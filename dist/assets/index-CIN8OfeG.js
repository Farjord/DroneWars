function Iw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vm={exports:{}},mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tA;function Kj(){if(tA)return mc;tA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return mc.Fragment=t,mc.jsx=n,mc.jsxs=n,mc}var nA;function Xj(){return nA||(nA=1,Vm.exports=Kj()),Vm.exports}var v=Xj(),Km={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function Wj(){if(rA)return Re;rA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function C(k,Z,F){this.props=k,this.context=Z,this.refs=A,this.updater=F||x}C.prototype.isReactComponent={},C.prototype.setState=function(k,Z){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Z,"setState")},C.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function P(){}P.prototype=C.prototype;function O(k,Z,F){this.props=k,this.context=Z,this.refs=A,this.updater=F||x}var T=O.prototype=new P;T.constructor=O,S(T,C.prototype),T.isPureReactComponent=!0;var j=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function M(k,Z,F,ne,me,z){return F=z.ref,{$$typeof:e,type:k,key:Z,ref:F!==void 0?F:null,props:z}}function R(k,Z){return M(k.type,Z,void 0,void 0,void 0,k.props)}function U(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function W(k){var Z={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(F){return Z[F]})}var Y=/\/+/g;function J(k,Z){return typeof k=="object"&&k!==null&&k.key!=null?W(""+k.key):Z.toString(36)}function ce(){}function se(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ce,ce):(k.status="pending",k.then(function(Z){k.status==="pending"&&(k.status="fulfilled",k.value=Z)},function(Z){k.status==="pending"&&(k.status="rejected",k.reason=Z)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function te(k,Z,F,ne,me){var z=typeof k;(z==="undefined"||z==="boolean")&&(k=null);var ae=!1;if(k===null)ae=!0;else switch(z){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(k.$$typeof){case e:case t:ae=!0;break;case p:return ae=k._init,te(ae(k._payload),Z,F,ne,me)}}if(ae)return me=me(k),ae=ne===""?"."+J(k,0):ne,j(me)?(F="",ae!=null&&(F=ae.replace(Y,"$&/")+"/"),te(me,Z,F,"",function(ie){return ie})):me!=null&&(U(me)&&(me=R(me,F+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(Y,"$&/")+"/")+ae)),Z.push(me)),1;ae=0;var ve=ne===""?".":ne+":";if(j(k))for(var pe=0;pe<k.length;pe++)ne=k[pe],z=ve+J(ne,pe),ae+=te(ne,Z,F,z,me);else if(pe=g(k),typeof pe=="function")for(k=pe.call(k),pe=0;!(ne=k.next()).done;)ne=ne.value,z=ve+J(ne,pe++),ae+=te(ne,Z,F,z,me);else if(z==="object"){if(typeof k.then=="function")return te(se(k),Z,F,ne,me);throw Z=String(k),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ae}function L(k,Z,F){if(k==null)return k;var ne=[],me=0;return te(k,ne,"","",function(z){return Z.call(F,z,me++)}),ne}function ee(k){if(k._status===-1){var Z=k._result;Z=Z(),Z.then(function(F){(k._status===0||k._status===-1)&&(k._status=1,k._result=F)},function(F){(k._status===0||k._status===-1)&&(k._status=2,k._result=F)}),k._status===-1&&(k._status=0,k._result=Z)}if(k._status===1)return k._result.default;throw k._result}var he=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Se(){}return Re.Children={map:L,forEach:function(k,Z,F){L(k,function(){Z.apply(this,arguments)},F)},count:function(k){var Z=0;return L(k,function(){Z++}),Z},toArray:function(k){return L(k,function(Z){return Z})||[]},only:function(k){if(!U(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Re.Component=C,Re.Fragment=n,Re.Profiler=i,Re.PureComponent=O,Re.StrictMode=r,Re.Suspense=h,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Re.__COMPILER_RUNTIME={__proto__:null,c:function(k){return N.H.useMemoCache(k)}},Re.cache=function(k){return function(){return k.apply(null,arguments)}},Re.cloneElement=function(k,Z,F){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ne=S({},k.props),me=k.key,z=void 0;if(Z!=null)for(ae in Z.ref!==void 0&&(z=void 0),Z.key!==void 0&&(me=""+Z.key),Z)!D.call(Z,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&Z.ref===void 0||(ne[ae]=Z[ae]);var ae=arguments.length-2;if(ae===1)ne.children=F;else if(1<ae){for(var ve=Array(ae),pe=0;pe<ae;pe++)ve[pe]=arguments[pe+2];ne.children=ve}return M(k.type,me,void 0,void 0,z,ne)},Re.createContext=function(k){return k={$$typeof:l,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:s,_context:k},k},Re.createElement=function(k,Z,F){var ne,me={},z=null;if(Z!=null)for(ne in Z.key!==void 0&&(z=""+Z.key),Z)D.call(Z,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(me[ne]=Z[ne]);var ae=arguments.length-2;if(ae===1)me.children=F;else if(1<ae){for(var ve=Array(ae),pe=0;pe<ae;pe++)ve[pe]=arguments[pe+2];me.children=ve}if(k&&k.defaultProps)for(ne in ae=k.defaultProps,ae)me[ne]===void 0&&(me[ne]=ae[ne]);return M(k,z,void 0,void 0,null,me)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(k){return{$$typeof:u,render:k}},Re.isValidElement=U,Re.lazy=function(k){return{$$typeof:p,_payload:{_status:-1,_result:k},_init:ee}},Re.memo=function(k,Z){return{$$typeof:f,type:k,compare:Z===void 0?null:Z}},Re.startTransition=function(k){var Z=N.T,F={};N.T=F;try{var ne=k(),me=N.S;me!==null&&me(F,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Se,he)}catch(z){he(z)}finally{N.T=Z}},Re.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Re.use=function(k){return N.H.use(k)},Re.useActionState=function(k,Z,F){return N.H.useActionState(k,Z,F)},Re.useCallback=function(k,Z){return N.H.useCallback(k,Z)},Re.useContext=function(k){return N.H.useContext(k)},Re.useDebugValue=function(){},Re.useDeferredValue=function(k,Z){return N.H.useDeferredValue(k,Z)},Re.useEffect=function(k,Z,F){var ne=N.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(k,Z)},Re.useId=function(){return N.H.useId()},Re.useImperativeHandle=function(k,Z,F){return N.H.useImperativeHandle(k,Z,F)},Re.useInsertionEffect=function(k,Z){return N.H.useInsertionEffect(k,Z)},Re.useLayoutEffect=function(k,Z){return N.H.useLayoutEffect(k,Z)},Re.useMemo=function(k,Z){return N.H.useMemo(k,Z)},Re.useOptimistic=function(k,Z){return N.H.useOptimistic(k,Z)},Re.useReducer=function(k,Z,F){return N.H.useReducer(k,Z,F)},Re.useRef=function(k){return N.H.useRef(k)},Re.useState=function(k){return N.H.useState(k)},Re.useSyncExternalStore=function(k,Z,F){return N.H.useSyncExternalStore(k,Z,F)},Re.useTransition=function(){return N.H.useTransition()},Re.version="19.1.1",Re}var aA;function tl(){return aA||(aA=1,Km.exports=Wj()),Km.exports}var E=tl();const Lw=Xr(E),Qj=Iw({__proto__:null,default:Lw},[E]);var Xm={exports:{}},gc={},Wm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA;function Zj(){return iA||(iA=1,(function(e){function t(L,ee){var he=L.length;L.push(ee);e:for(;0<he;){var Se=he-1>>>1,k=L[Se];if(0<i(k,ee))L[Se]=ee,L[he]=k,he=Se;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var ee=L[0],he=L.pop();if(he!==ee){L[0]=he;e:for(var Se=0,k=L.length,Z=k>>>1;Se<Z;){var F=2*(Se+1)-1,ne=L[F],me=F+1,z=L[me];if(0>i(ne,he))me<k&&0>i(z,ne)?(L[Se]=z,L[me]=he,Se=me):(L[Se]=ne,L[F]=he,Se=F);else if(me<k&&0>i(z,he))L[Se]=z,L[me]=he,Se=me;else break e}}return ee}function i(L,ee){var he=L.sortIndex-ee.sortIndex;return he!==0?he:L.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,m=null,g=3,x=!1,S=!1,A=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function j(L){for(var ee=n(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=L)r(f),ee.sortIndex=ee.expirationTime,t(h,ee);else break;ee=n(f)}}function N(L){if(A=!1,j(L),!S)if(n(h)!==null)S=!0,D||(D=!0,J());else{var ee=n(f);ee!==null&&te(N,ee.startTime-L)}}var D=!1,M=-1,R=5,U=-1;function W(){return C?!0:!(e.unstable_now()-U<R)}function Y(){if(C=!1,D){var L=e.unstable_now();U=L;var ee=!0;try{e:{S=!1,A&&(A=!1,O(M),M=-1),x=!0;var he=g;try{t:{for(j(L),m=n(h);m!==null&&!(m.expirationTime>L&&W());){var Se=m.callback;if(typeof Se=="function"){m.callback=null,g=m.priorityLevel;var k=Se(m.expirationTime<=L);if(L=e.unstable_now(),typeof k=="function"){m.callback=k,j(L),ee=!0;break t}m===n(h)&&r(h),j(L)}else r(h);m=n(h)}if(m!==null)ee=!0;else{var Z=n(f);Z!==null&&te(N,Z.startTime-L),ee=!1}}break e}finally{m=null,g=he,x=!1}ee=void 0}}finally{ee?J():D=!1}}}var J;if(typeof T=="function")J=function(){T(Y)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,se=ce.port2;ce.port1.onmessage=Y,J=function(){se.postMessage(null)}}else J=function(){P(Y,0)};function te(L,ee){M=P(function(){L(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var he=g;g=ee;try{return L()}finally{g=he}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(L,ee){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var he=g;g=L;try{return ee()}finally{g=he}},e.unstable_scheduleCallback=function(L,ee,he){var Se=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Se+he:Se):he=Se,L){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=he+k,L={id:p++,callback:ee,priorityLevel:L,startTime:he,expirationTime:k,sortIndex:-1},he>Se?(L.sortIndex=he,t(f,L),n(h)===null&&L===n(f)&&(A?(O(M),M=-1):A=!0,te(N,he-Se))):(L.sortIndex=k,t(h,L),S||x||(S=!0,D||(D=!0,J()))),L},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(L){var ee=g;return function(){var he=g;g=ee;try{return L.apply(this,arguments)}finally{g=he}}}})(Qm)),Qm}var oA;function Jj(){return oA||(oA=1,Wm.exports=Zj()),Wm.exports}var Zm={exports:{}},En={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA;function eM(){if(sA)return En;sA=1;var e=tl();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(h,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:h,containerInfo:f,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,En.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(h,f,null,p)},En.flushSync=function(h){var f=l.T,p=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=f,r.p=p,r.d.f()}},En.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},En.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},En.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:x}):p==="script"&&r.d.X(h,{crossOrigin:m,integrity:g,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},En.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},En.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},En.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},En.requestFormReset=function(h){r.d.r(h)},En.unstable_batchedUpdates=function(h,f){return h(f)},En.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},En.useFormStatus=function(){return l.H.useHostTransitionStatus()},En.version="19.1.1",En}var lA;function $w(){if(lA)return Zm.exports;lA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zm.exports=eM(),Zm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function tM(){if(cA)return gc;cA=1;var e=Jj(),t=tl(),n=$w();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,d=o;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return u(y),a;if(b===d)return u(y),o;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=b;else{for(var w=!1,_=y.child;_;){if(_===c){w=!0,c=y,d=b;break}if(_===d){w=!0,d=y,c=b;break}_=_.sibling}if(!w){for(_=b.child;_;){if(_===c){w=!0,c=b,d=y;break}if(_===d){w=!0,d=b,c=y;break}_=_.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function f(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=f(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),T=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function J(a){return a===null||typeof a!="object"?null:(a=Y&&a[Y]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Symbol.for("react.client.reference");function se(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ce?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case T:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case j:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return o=a.displayName||null,o!==null?o:se(a.type)||"Memo";case R:o=a._payload,a=a._init;try{return se(a(o))}catch{}}return null}var te=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Se=[],k=-1;function Z(a){return{current:a}}function F(a){0>k||(a.current=Se[k],Se[k]=null,k--)}function ne(a,o){k++,Se[k]=a.current,a.current=o}var me=Z(null),z=Z(null),ae=Z(null),ve=Z(null);function pe(a,o){switch(ne(ae,o),ne(z,a),ne(me,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?_1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=_1(o),a=D1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}F(me),ne(me,a)}function ie(){F(me),F(z),F(ae)}function de(a){a.memoizedState!==null&&ne(ve,a);var o=me.current,c=D1(o,a.type);o!==c&&(ne(z,a),ne(me,c))}function be(a){z.current===a&&(F(me),F(z)),ve.current===a&&(F(ve),uc._currentValue=he)}var fe=Object.prototype.hasOwnProperty,rt=e.unstable_scheduleCallback,Ge=e.unstable_cancelCallback,Ct=e.unstable_shouldYield,mt=e.unstable_requestPaint,dt=e.unstable_now,Ur=e.unstable_getCurrentPriorityLevel,ma=e.unstable_ImmediatePriority,Qo=e.unstable_UserBlockingPriority,ri=e.unstable_NormalPriority,_h=e.unstable_LowPriority,hl=e.unstable_IdlePriority,Dh=e.log,hu=e.unstable_setDisableYieldValue,Be=null,qe=null;function Qr(a){if(typeof Dh=="function"&&hu(a),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Be,a)}catch{}}var xn=Math.clz32?Math.clz32:Vi,Nh=Math.log,jh=Math.LN2;function Vi(a){return a>>>=0,a===0?32:31-(Nh(a)/jh|0)|0}var Ki=256,ai=4194304;function gr(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ga(a,o,c){var d=a.pendingLanes;if(d===0)return 0;var y=0,b=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var _=d&134217727;return _!==0?(d=_&~b,d!==0?y=gr(d):(w&=_,w!==0?y=gr(w):c||(c=_&~a,c!==0&&(y=gr(c))))):(_=d&~b,_!==0?y=gr(_):w!==0?y=gr(w):c||(c=d&~a,c!==0&&(y=gr(c)))),y===0?0:o!==0&&o!==y&&(o&b)===0&&(b=y&-y,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:y}function ya(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Mh(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(){var a=Ki;return Ki<<=1,(Ki&4194048)===0&&(Ki=256),a}function ml(){var a=ai;return ai<<=1,(ai&62914560)===0&&(ai=4194304),a}function va(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Kn(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function gl(a,o,c,d,y,b){var w=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var _=a.entanglements,I=a.expirationTimes,q=a.hiddenUpdates;for(c=w&~c;0<c;){var re=31-xn(c),le=1<<re;_[re]=0,I[re]=-1;var V=q[re];if(V!==null)for(q[re]=null,re=0;re<V.length;re++){var K=V[re];K!==null&&(K.lane&=-536870913)}c&=~le}d!==0&&yl(a,d,0),b!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=b&~(w&~o))}function yl(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-xn(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|c&4194090}function vl(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var d=31-xn(c),y=1<<d;y&o|a[d]&o&&(a[d]|=o),c&=~y}}function Zo(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Xi(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function bl(){var a=ee.p;return a!==0?a:(a=window.event,a===void 0?32:X1(a.type))}function xl(a,o){var c=ee.p;try{return ee.p=a,o()}finally{ee.p=c}}var Zr=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Zr,kt="__reactProps$"+Zr,ba="__reactContainer$"+Zr,pu="__reactEvents$"+Zr,Wb="__reactListeners$"+Zr,Pt="__reactHandles$"+Zr,Xn="__reactResources$"+Zr,zr="__reactMarker$"+Zr;function Wi(a){delete a[Tt],delete a[kt],delete a[pu],delete a[Wb],delete a[Pt]}function fn(a){var o=a[Tt];if(o)return o;for(var c=a.parentNode;c;){if(o=c[ba]||c[Tt]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=k1(a);a!==null;){if(c=a[Tt])return c;a=k1(a)}return o}a=c,c=a.parentNode}return null}function $n(a){if(a=a[Tt]||a[ba]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function Gr(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Wn(a){var o=a[Xn];return o||(o=a[Xn]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ke(a){a[zr]=!0}var Qn=new Set,Jr={};function Hr(a,o){Zn(a,o),Zn(a+"Capture",o)}function Zn(a,o){for(Jr[a]=o,a=0;a<o.length;a++)Qn.add(o[a])}var ea=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ii={},Qi={};function at(a){return fe.call(Qi,a)?!0:fe.call(ii,a)?!1:ea.test(a)?Qi[a]=!0:(ii[a]=!0,!1)}function Nn(a,o,c){if(at(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function Jo(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function yr(a,o,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+d)}}var Sl,Al;function oi(a){if(Sl===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Sl=o&&o[1]||"",Al=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sl+a+Al}var es=!1;function vr(a,o){if(!a||es)return"";es=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(K){var V=K}Reflect.construct(a,[],le)}else{try{le.call()}catch(K){V=K}a.call(le.prototype)}}else{try{throw Error()}catch(K){V=K}(le=a())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(K){if(K&&V&&typeof K.stack=="string")return[K.stack,V.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),w=b[0],_=b[1];if(w&&_){var I=w.split(`
`),q=_.split(`
`);for(y=d=0;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;for(;y<q.length&&!q[y].includes("DetermineComponentFrameRoot");)y++;if(d===I.length||y===q.length)for(d=I.length-1,y=q.length-1;1<=d&&0<=y&&I[d]!==q[y];)y--;for(;1<=d&&0<=y;d--,y--)if(I[d]!==q[y]){if(d!==1||y!==1)do if(d--,y--,0>y||I[d]!==q[y]){var re=`
`+I[d].replace(" at new "," at ");return a.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",a.displayName)),re}while(1<=d&&0<=y);break}}}finally{es=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?oi(c):""}function Zi(a){switch(a.tag){case 26:case 27:case 5:return oi(a.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return vr(a.type,!1);case 11:return vr(a.type.render,!1);case 1:return vr(a.type,!0);case 31:return oi("Activity");default:return""}}function mu(a){try{var o="";do o+=Zi(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function jn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function El(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function xa(a){var o=El(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),d=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,b=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(w){d=""+w,b.call(this,w)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Sa(a){a._valueTracker||(a._valueTracker=xa(a))}function Ji(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return a&&(d=El(a)?a.checked?"true":"false":a.value),a=d,a!==c?(o.setValue(a),!0):!1}function ta(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var kh=/[\n"\\]/g;function Mn(a){return a.replace(kh,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function eo(a,o,c,d,y,b,w,_){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),o!=null?w==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+jn(o)):a.value!==""+jn(o)&&(a.value=""+jn(o)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),o!=null?ts(a,w,jn(o)):c!=null?ts(a,w,jn(c)):d!=null&&a.removeAttribute("value"),y==null&&b!=null&&(a.defaultChecked=!!b),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+jn(_):a.removeAttribute("name")}function Cl(a,o,c,d,y,b,w,_){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;c=c!=null?""+jn(c):"",o=o!=null?""+jn(o):c,_||o===a.value||(a.value=o),a.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=_?a.checked:!!d,a.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function ts(a,o,c){o==="number"&&ta(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function to(a,o,c,d){if(a=a.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=o.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&d&&(a[c].defaultSelected=!0)}else{for(c=""+jn(c),o=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,d&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function gu(a,o,c){if(o!=null&&(o=""+jn(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+jn(c):""}function Rh(a,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(te(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=jn(o),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d)}function no(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var Qb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yu(a,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,c):typeof c!="number"||c===0||Qb.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function ns(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&yu(a,y,d)}else for(var b in o)o.hasOwnProperty(b)&&yu(a,b,o[b])}function Pl(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ih=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(a){return vu.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var br=null;function rs(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var hn=null,Jn=null;function bu(a){var o=$n(a);if(o&&(a=o.stateNode)){var c=a[kt]||null;e:switch(a=o.stateNode,o.type){case"input":if(eo(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Mn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==a&&d.form===a.form){var y=d[kt]||null;if(!y)throw Error(r(90));eo(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===a.form&&Ji(d)}break e;case"textarea":gu(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&to(a,!!c.multiple,o,!1)}}}var ro=!1;function Ve(a,o,c){if(ro)return a(o,c);ro=!0;try{var d=a(o);return d}finally{if(ro=!1,(hn!==null||Jn!==null)&&(ud(),hn&&(o=hn,a=Jn,Jn=hn=null,bu(o),a)))for(o=0;o<a.length;o++)bu(a[o])}}function er(a,o){var c=a.stateNode;if(c===null)return null;var d=c[kt]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ao=!1;if(Ht)try{var io={};Object.defineProperty(io,"passive",{get:function(){ao=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{ao=!1}var Ea=null,qt=null,en=null;function Lh(){if(en)return en;var a,o=qt,c=o.length,d,y="value"in Ea?Ea.value:Ea.textContent,b=y.length;for(a=0;a<c&&o[a]===y[a];a++);var w=c-a;for(d=1;d<=w&&o[c-d]===y[b-d];d++);return en=y.slice(a,1<d?1-d:void 0)}function as(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function si(){return!0}function $h(){return!1}function tn(a){function o(c,d,y,b,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(c=a[_],this[_]=c?c(b):b[_]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?si:$h,this.isPropagationStopped=$h,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),o}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=tn(Ca),oo=p({},Ca,{view:0,detail:0}),Bh=tn(oo),Pe,Ie,Bn,xr=p({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Bn&&(Bn&&a.type==="mousemove"?(Pe=a.screenX-Bn.screenX,Ie=a.screenY-Bn.screenY):Ie=Pe=0,Bn=a),Pe)},movementY:function(a){return"movementY"in a?a.movementY:Ie}}),wl=tn(xr),Pa=p({},xr,{dataTransfer:0}),os=tn(Pa),xu=p({},oo,{relatedTarget:0}),ss=tn(xu),Su=p({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),Uh=tn(Su),wa=p({},Ca,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),nn=tn(wa),na=p({},Ca,{data:0}),Ol=tn(na),zh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hh(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Gh[a])?!!o[a]:!1}function Tl(){return Hh}var qh=p({},oo,{key:function(a){if(a.key){var o=zh[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=as(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Au[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(a){return a.type==="keypress"?as(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?as(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Yh=tn(qh),Fh=p({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eu=tn(Fh),Vh=p({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),Kh=tn(Vh),Xh=p({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wh=tn(Xh),Qh=p({},xr,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Cu=tn(Qh),Zh=p({},Ca,{newState:0,oldState:0}),Jh=tn(Zh),ep=[9,13,27,32],_l=Ht&&"CompositionEvent"in window,so=null;Ht&&"documentMode"in document&&(so=document.documentMode);var Pu=Ht&&"TextEvent"in window&&!so,wu=Ht&&(!_l||so&&8<so&&11>=so),Ou=" ",Tu=!1;function _u(a,o){switch(a){case"keyup":return ep.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Du(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var li=!1;function tp(a,o){switch(a){case"compositionend":return Du(o);case"keypress":return o.which!==32?null:(Tu=!0,Ou);case"textInput":return a=o.data,a===Ou&&Tu?null:a;default:return null}}function np(a,o){if(li)return a==="compositionend"||!_l&&_u(a,o)?(a=Lh(),en=qt=Ea=null,li=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return wu&&o.locale!=="ko"?null:o.data;default:return null}}var B={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!B[a.type]:o==="textarea"}function ge(a,o,c,d){hn?Jn?Jn.push(d):Jn=[d]:hn=d,o=gd(o,"onChange"),0<o.length&&(c=new is("onChange","change",null,c,d),a.push({event:c,listeners:o}))}var ue=null,ye=null;function _e(a){C1(a,0)}function je(a){var o=Gr(a);if(Ji(o))return a}function He(a,o){if(a==="change")return o}var _t=!1;if(Ht){var Yt;if(Ht){var Rt="oninput"in document;if(!Rt){var It=document.createElement("div");It.setAttribute("oninput","return;"),Rt=typeof It.oninput=="function"}Yt=Rt}else Yt=!1;_t=Yt&&(!document.documentMode||9<document.documentMode)}function Un(){ue&&(ue.detachEvent("onpropertychange",Sn),ye=ue=null)}function Sn(a){if(a.propertyName==="value"&&je(ye)){var o=[];ge(o,ye,a,rs(a)),Ve(_e,o)}}function Dl(a,o,c){a==="focusin"?(Un(),ue=o,ye=c,ue.attachEvent("onpropertychange",Sn)):a==="focusout"&&Un()}function lo(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return je(ye)}function ci(a,o){if(a==="click")return je(o)}function rp(a,o){if(a==="input"||a==="change")return je(o)}function Nu(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Ft=typeof Object.is=="function"?Object.is:Nu;function co(a,o){if(Ft(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!fe.call(o,y)||!Ft(a[y],o[y]))return!1}return!0}function ls(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ap(a,o){var c=ls(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=o&&d>=o)return{node:c,offset:o-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ls(c)}}function Zb(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Zb(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Jb(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=ta(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=ta(a.document)}return o}function ip(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var _N=Ht&&"documentMode"in document&&11>=document.documentMode,cs=null,op=null,Nl=null,sp=!1;function ex(a,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;sp||cs==null||cs!==ta(d)||(d=cs,"selectionStart"in d&&ip(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Nl&&co(Nl,d)||(Nl=d,d=gd(op,"onSelect"),0<d.length&&(o=new is("onSelect","select",null,o,c),a.push({event:o,listeners:d}),o.target=cs)))}function uo(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var us={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},lp={},tx={};Ht&&(tx=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function fo(a){if(lp[a])return lp[a];if(!us[a])return a;var o=us[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in tx)return lp[a]=o[c];return a}var nx=fo("animationend"),rx=fo("animationiteration"),ax=fo("animationstart"),DN=fo("transitionrun"),NN=fo("transitionstart"),jN=fo("transitioncancel"),ix=fo("transitionend"),ox=new Map,cp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cp.push("scrollEnd");function qr(a,o){ox.set(a,o),Hr(o,[a])}var sx=new WeakMap;function Sr(a,o){if(typeof a=="object"&&a!==null){var c=sx.get(a);return c!==void 0?c:(o={value:a,source:o,stack:mu(o)},sx.set(a,o),o)}return{value:a,source:o,stack:mu(o)}}var Ar=[],ds=0,up=0;function ju(){for(var a=ds,o=up=ds=0;o<a;){var c=Ar[o];Ar[o++]=null;var d=Ar[o];Ar[o++]=null;var y=Ar[o];Ar[o++]=null;var b=Ar[o];if(Ar[o++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}b!==0&&lx(c,y,b)}}function Mu(a,o,c,d){Ar[ds++]=a,Ar[ds++]=o,Ar[ds++]=c,Ar[ds++]=d,up|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function dp(a,o,c,d){return Mu(a,o,c,d),ku(a)}function fs(a,o){return Mu(a,null,null,o),ku(a)}function lx(a,o,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=a.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(y=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,y&&o!==null&&(y=31-xn(c),a=b.hiddenUpdates,d=a[y],d===null?a[y]=[o]:d.push(o),o.lane=c|536870912),b):null}function ku(a){if(50<nc)throw nc=0,ym=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var hs={};function MN(a,o,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(a,o,c,d){return new MN(a,o,c,d)}function fp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Oa(a,o){var c=a.alternate;return c===null?(c=tr(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function cx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Ru(a,o,c,d,y,b){var w=0;if(d=a,typeof a=="function")fp(a)&&(w=1);else if(typeof a=="string")w=Rj(a,c,me.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=tr(31,c,o,y),a.elementType=U,a.lanes=b,a;case S:return ho(c.children,y,b,o);case A:w=8,y|=24;break;case C:return a=tr(12,c,o,y|2),a.elementType=C,a.lanes=b,a;case N:return a=tr(13,c,o,y),a.elementType=N,a.lanes=b,a;case D:return a=tr(19,c,o,y),a.elementType=D,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case P:case T:w=10;break e;case O:w=9;break e;case j:w=11;break e;case M:w=14;break e;case R:w=16,d=null;break e}w=29,c=Error(r(130,a===null?"null":typeof a,"")),d=null}return o=tr(w,c,o,y),o.elementType=a,o.type=d,o.lanes=b,o}function ho(a,o,c,d){return a=tr(7,a,d,o),a.lanes=c,a}function hp(a,o,c){return a=tr(6,a,null,o),a.lanes=c,a}function pp(a,o,c){return o=tr(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var ps=[],ms=0,Iu=null,Lu=0,Er=[],Cr=0,po=null,Ta=1,_a="";function mo(a,o){ps[ms++]=Lu,ps[ms++]=Iu,Iu=a,Lu=o}function ux(a,o,c){Er[Cr++]=Ta,Er[Cr++]=_a,Er[Cr++]=po,po=a;var d=Ta;a=_a;var y=32-xn(d)-1;d&=~(1<<y),c+=1;var b=32-xn(o)+y;if(30<b){var w=y-y%5;b=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Ta=1<<32-xn(o)+y|c<<y|d,_a=b+a}else Ta=1<<b|c<<y|d,_a=a}function mp(a){a.return!==null&&(mo(a,1),ux(a,1,0))}function gp(a){for(;a===Iu;)Iu=ps[--ms],ps[ms]=null,Lu=ps[--ms],ps[ms]=null;for(;a===po;)po=Er[--Cr],Er[Cr]=null,_a=Er[--Cr],Er[Cr]=null,Ta=Er[--Cr],Er[Cr]=null}var kn=null,wt=null,Ze=!1,go=null,ra=!1,yp=Error(r(519));function yo(a){var o=Error(r(418,""));throw kl(Sr(o,a)),yp}function dx(a){var o=a.stateNode,c=a.type,d=a.memoizedProps;switch(o[Tt]=a,o[kt]=d,c){case"dialog":ze("cancel",o),ze("close",o);break;case"iframe":case"object":case"embed":ze("load",o);break;case"video":case"audio":for(c=0;c<ac.length;c++)ze(ac[c],o);break;case"source":ze("error",o);break;case"img":case"image":case"link":ze("error",o),ze("load",o);break;case"details":ze("toggle",o);break;case"input":ze("invalid",o),Cl(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Sa(o);break;case"select":ze("invalid",o);break;case"textarea":ze("invalid",o),Rh(o,d.value,d.defaultValue,d.children),Sa(o)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||T1(o.textContent,c)?(d.popover!=null&&(ze("beforetoggle",o),ze("toggle",o)),d.onScroll!=null&&ze("scroll",o),d.onScrollEnd!=null&&ze("scrollend",o),d.onClick!=null&&(o.onclick=yd),o=!0):o=!1,o||yo(a)}function fx(a){for(kn=a.return;kn;)switch(kn.tag){case 5:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:kn=kn.return}}function jl(a){if(a!==kn)return!1;if(!Ze)return fx(a),Ze=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Mm(a.type,a.memoizedProps)),c=!c),c&&wt&&yo(a),fx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){wt=Fr(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}wt=null}}else o===27?(o=wt,Pi(a.type)?(a=Lm,Lm=null,wt=a):wt=o):wt=kn?Fr(a.stateNode.nextSibling):null;return!0}function Ml(){wt=kn=null,Ze=!1}function hx(){var a=go;return a!==null&&(Hn===null?Hn=a:Hn.push.apply(Hn,a),go=null),a}function kl(a){go===null?go=[a]:go.push(a)}var vp=Z(null),vo=null,Da=null;function ui(a,o,c){ne(vp,o._currentValue),o._currentValue=c}function Na(a){a._currentValue=vp.current,F(vp)}function bp(a,o,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===c)break;a=a.return}}function xp(a,o,c,d){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var b=y.dependencies;if(b!==null){var w=y.child;b=b.firstContext;e:for(;b!==null;){var _=b;b=y;for(var I=0;I<o.length;I++)if(_.context===o[I]){b.lanes|=c,_=b.alternate,_!==null&&(_.lanes|=c),bp(b.return,c,a),d||(w=null);break e}b=_.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),bp(w,c,a),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===a){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function Rl(a,o,c,d){a=null;for(var y=o,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var _=y.type;Ft(y.pendingProps.value,w.value)||(a!==null?a.push(_):a=[_])}}else if(y===ve.current){if(w=y.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(uc):a=[uc])}y=y.return}a!==null&&xp(o,a,c,d),o.flags|=262144}function $u(a){for(a=a.firstContext;a!==null;){if(!Ft(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function bo(a){vo=a,Da=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function An(a){return px(vo,a)}function Bu(a,o){return vo===null&&bo(a),px(a,o)}function px(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Da===null){if(a===null)throw Error(r(308));Da=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Da=Da.next=o;return c}var kN=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},RN=e.unstable_scheduleCallback,IN=e.unstable_NormalPriority,Vt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sp(){return{controller:new kN,data:new Map,refCount:0}}function Il(a){a.refCount--,a.refCount===0&&RN(IN,function(){a.controller.abort()})}var Ll=null,Ap=0,gs=0,ys=null;function LN(a,o){if(Ll===null){var c=Ll=[];Ap=0,gs=Cm(),ys={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Ap++,o.then(mx,mx),o}function mx(){if(--Ap===0&&Ll!==null){ys!==null&&(ys.status="fulfilled");var a=Ll;Ll=null,gs=0,ys=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function $N(a,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var gx=L.S;L.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&LN(a,o),gx!==null&&gx(a,o)};var xo=Z(null);function Ep(){var a=xo.current;return a!==null?a:ft.pooledCache}function Uu(a,o){o===null?ne(xo,xo.current):ne(xo,o.pool)}function yx(){var a=Ep();return a===null?null:{parent:Vt._currentValue,pool:a}}var $l=Error(r(460)),vx=Error(r(474)),zu=Error(r(542)),Cp={then:function(){}};function bx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Gu(){}function xx(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Gu,Gu),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ax(a),a;default:if(typeof o.status=="string")o.then(Gu,Gu);else{if(a=ft,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ax(a),a}throw Bl=o,$l}}var Bl=null;function Sx(){if(Bl===null)throw Error(r(459));var a=Bl;return Bl=null,a}function Ax(a){if(a===$l||a===zu)throw Error(r(483))}var di=!1;function Pp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wp(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function fi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function hi(a,o,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Je&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=ku(a),lx(a,null,c),o}return Mu(a,d,o,c),ku(a)}function Ul(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,vl(a,c)}}function Op(a,o){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?y=b=o:b=b.next=o}else y=b=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var Tp=!1;function zl(){if(Tp){var a=ys;if(a!==null)throw a}}function Gl(a,o,c,d){Tp=!1;var y=a.updateQueue;di=!1;var b=y.firstBaseUpdate,w=y.lastBaseUpdate,_=y.shared.pending;if(_!==null){y.shared.pending=null;var I=_,q=I.next;I.next=null,w===null?b=q:w.next=q,w=I;var re=a.alternate;re!==null&&(re=re.updateQueue,_=re.lastBaseUpdate,_!==w&&(_===null?re.firstBaseUpdate=q:_.next=q,re.lastBaseUpdate=I))}if(b!==null){var le=y.baseState;w=0,re=q=I=null,_=b;do{var V=_.lane&-536870913,K=V!==_.lane;if(K?(Ye&V)===V:(d&V)===V){V!==0&&V===gs&&(Tp=!0),re!==null&&(re=re.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Me=a,De=_;V=o;var st=c;switch(De.tag){case 1:if(Me=De.payload,typeof Me=="function"){le=Me.call(st,le,V);break e}le=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=De.payload,V=typeof Me=="function"?Me.call(st,le,V):Me,V==null)break e;le=p({},le,V);break e;case 2:di=!0}}V=_.callback,V!==null&&(a.flags|=64,K&&(a.flags|=8192),K=y.callbacks,K===null?y.callbacks=[V]:K.push(V))}else K={lane:V,tag:_.tag,payload:_.payload,callback:_.callback,next:null},re===null?(q=re=K,I=le):re=re.next=K,w|=V;if(_=_.next,_===null){if(_=y.shared.pending,_===null)break;K=_,_=K.next,K.next=null,y.lastBaseUpdate=K,y.shared.pending=null}}while(!0);re===null&&(I=le),y.baseState=I,y.firstBaseUpdate=q,y.lastBaseUpdate=re,b===null&&(y.shared.lanes=0),Si|=w,a.lanes=w,a.memoizedState=le}}function Ex(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Cx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Ex(c[a],o)}var vs=Z(null),Hu=Z(0);function Px(a,o){a=$a,ne(Hu,a),ne(vs,o),$a=a|o.baseLanes}function _p(){ne(Hu,$a),ne(vs,vs.current)}function Dp(){$a=Hu.current,F(vs),F(Hu)}var pi=0,Le=null,it=null,Lt=null,qu=!1,bs=!1,So=!1,Yu=0,Hl=0,xs=null,BN=0;function Dt(){throw Error(r(321))}function Np(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!Ft(a[c],o[c]))return!1;return!0}function jp(a,o,c,d,y,b){return pi=b,Le=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=a===null||a.memoizedState===null?lS:cS,So=!1,b=c(d,y),So=!1,bs&&(b=Ox(o,c,d,y)),wx(a),b}function wx(a){L.H=Qu;var o=it!==null&&it.next!==null;if(pi=0,Lt=it=Le=null,qu=!1,Hl=0,xs=null,o)throw Error(r(300));a===null||rn||(a=a.dependencies,a!==null&&$u(a)&&(rn=!0))}function Ox(a,o,c,d){Le=a;var y=0;do{if(bs&&(xs=null),Hl=0,bs=!1,25<=y)throw Error(r(301));if(y+=1,Lt=it=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}L.H=FN,b=o(c,d)}while(bs);return b}function UN(){var a=L.H,o=a.useState()[0];return o=typeof o.then=="function"?ql(o):o,a=a.useState()[0],(it!==null?it.memoizedState:null)!==a&&(Le.flags|=1024),o}function Mp(){var a=Yu!==0;return Yu=0,a}function kp(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function Rp(a){if(qu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}qu=!1}pi=0,Lt=it=Le=null,bs=!1,Hl=Yu=0,xs=null}function zn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Le.memoizedState=Lt=a:Lt=Lt.next=a,Lt}function $t(){if(it===null){var a=Le.alternate;a=a!==null?a.memoizedState:null}else a=it.next;var o=Lt===null?Le.memoizedState:Lt.next;if(o!==null)Lt=o,it=a;else{if(a===null)throw Le.alternate===null?Error(r(467)):Error(r(310));it=a,a={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Lt===null?Le.memoizedState=Lt=a:Lt=Lt.next=a}return Lt}function Ip(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(a){var o=Hl;return Hl+=1,xs===null&&(xs=[]),a=xx(xs,a,o),o=Le,(Lt===null?o.memoizedState:Lt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?lS:cS),a}function Fu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ql(a);if(a.$$typeof===T)return An(a)}throw Error(r(438,String(a)))}function Lp(a){var o=null,c=Le.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=Le.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Ip(),Le.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),d=0;d<a;d++)c[d]=W;return o.index++,c}function ja(a,o){return typeof o=="function"?o(a):o}function Vu(a){var o=$t();return $p(o,it,a)}function $p(a,o,c){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=a.baseQueue,b=d.pending;if(b!==null){if(y!==null){var w=y.next;y.next=b.next,b.next=w}o.baseQueue=y=b,d.pending=null}if(b=a.baseState,y===null)a.memoizedState=b;else{o=y.next;var _=w=null,I=null,q=o,re=!1;do{var le=q.lane&-536870913;if(le!==q.lane?(Ye&le)===le:(pi&le)===le){var V=q.revertLane;if(V===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),le===gs&&(re=!0);else if((pi&V)===V){q=q.next,V===gs&&(re=!0);continue}else le={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(_=I=le,w=b):I=I.next=le,Le.lanes|=V,Si|=V;le=q.action,So&&c(b,le),b=q.hasEagerState?q.eagerState:c(b,le)}else V={lane:le,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(_=I=V,w=b):I=I.next=V,Le.lanes|=le,Si|=le;q=q.next}while(q!==null&&q!==o);if(I===null?w=b:I.next=_,!Ft(b,a.memoizedState)&&(rn=!0,re&&(c=ys,c!==null)))throw c;a.memoizedState=b,a.baseState=w,a.baseQueue=I,d.lastRenderedState=b}return y===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Bp(a){var o=$t(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var d=c.dispatch,y=c.pending,b=o.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do b=a(b,w.action),w=w.next;while(w!==y);Ft(b,o.memoizedState)||(rn=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Tx(a,o,c){var d=Le,y=$t(),b=Ze;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!Ft((it||y).memoizedState,c);w&&(y.memoizedState=c,rn=!0),y=y.queue;var _=Nx.bind(null,d,y,a);if(Yl(2048,8,_,[a]),y.getSnapshot!==o||w||Lt!==null&&Lt.memoizedState.tag&1){if(d.flags|=2048,Ss(9,Ku(),Dx.bind(null,d,y,c,o),null),ft===null)throw Error(r(349));b||(pi&124)!==0||_x(d,o,c)}return c}function _x(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=Le.updateQueue,o===null?(o=Ip(),Le.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function Dx(a,o,c,d){o.value=c,o.getSnapshot=d,jx(o)&&Mx(a)}function Nx(a,o,c){return c(function(){jx(o)&&Mx(a)})}function jx(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!Ft(a,c)}catch{return!0}}function Mx(a){var o=fs(a,2);o!==null&&or(o,a,2)}function Up(a){var o=zn();if(typeof a=="function"){var c=a;if(a=c(),So){Qr(!0);try{c()}finally{Qr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:a},o}function kx(a,o,c,d){return a.baseState=c,$p(a,it,typeof d=="function"?d:ja)}function zN(a,o,c,d,y){if(Wu(a))throw Error(r(485));if(a=o.action,a!==null){var b={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};L.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,Rx(o,b)):(b.next=c.next,o.pending=c.next=b)}}function Rx(a,o){var c=o.action,d=o.payload,y=a.state;if(o.isTransition){var b=L.T,w={};L.T=w;try{var _=c(y,d),I=L.S;I!==null&&I(w,_),Ix(a,o,_)}catch(q){zp(a,o,q)}finally{L.T=b}}else try{b=c(y,d),Ix(a,o,b)}catch(q){zp(a,o,q)}}function Ix(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Lx(a,o,d)},function(d){return zp(a,o,d)}):Lx(a,o,c)}function Lx(a,o,c){o.status="fulfilled",o.value=c,$x(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,Rx(a,c)))}function zp(a,o,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,$x(o),o=o.next;while(o!==d)}a.action=null}function $x(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Bx(a,o){return o}function Ux(a,o){if(Ze){var c=ft.formState;if(c!==null){e:{var d=Le;if(Ze){if(wt){t:{for(var y=wt,b=ra;y.nodeType!==8;){if(!b){y=null;break t}if(y=Fr(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){wt=Fr(y.nextSibling),d=y.data==="F!";break e}}yo(d)}d=!1}d&&(o=c[0])}}return c=zn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bx,lastRenderedState:o},c.queue=d,c=iS.bind(null,Le,d),d.dispatch=c,d=Up(!1),b=Fp.bind(null,Le,!1,d.queue),d=zn(),y={state:o,dispatch:null,action:a,pending:null},d.queue=y,c=zN.bind(null,Le,y,b,c),y.dispatch=c,d.memoizedState=a,[o,c,!1]}function zx(a){var o=$t();return Gx(o,it,a)}function Gx(a,o,c){if(o=$p(a,o,Bx)[0],a=Vu(ja)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=ql(o)}catch(w){throw w===$l?zu:w}else d=o;o=$t();var y=o.queue,b=y.dispatch;return c!==o.memoizedState&&(Le.flags|=2048,Ss(9,Ku(),GN.bind(null,y,c),null)),[d,b,a]}function GN(a,o){a.action=o}function Hx(a){var o=$t(),c=it;if(c!==null)return Gx(o,c,a);$t(),o=o.memoizedState,c=$t();var d=c.queue.dispatch;return c.memoizedState=a,[o,d,!1]}function Ss(a,o,c,d){return a={tag:a,create:c,deps:d,inst:o,next:null},o=Le.updateQueue,o===null&&(o=Ip(),Le.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,o.lastEffect=a),a}function Ku(){return{destroy:void 0,resource:void 0}}function qx(){return $t().memoizedState}function Xu(a,o,c,d){var y=zn();d=d===void 0?null:d,Le.flags|=a,y.memoizedState=Ss(1|o,Ku(),c,d)}function Yl(a,o,c,d){var y=$t();d=d===void 0?null:d;var b=y.memoizedState.inst;it!==null&&d!==null&&Np(d,it.memoizedState.deps)?y.memoizedState=Ss(o,b,c,d):(Le.flags|=a,y.memoizedState=Ss(1|o,b,c,d))}function Yx(a,o){Xu(8390656,8,a,o)}function Fx(a,o){Yl(2048,8,a,o)}function Vx(a,o){return Yl(4,2,a,o)}function Kx(a,o){return Yl(4,4,a,o)}function Xx(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Wx(a,o,c){c=c!=null?c.concat([a]):null,Yl(4,4,Xx.bind(null,o,a),c)}function Gp(){}function Qx(a,o){var c=$t();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&Np(o,d[1])?d[0]:(c.memoizedState=[a,o],a)}function Zx(a,o){var c=$t();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&Np(o,d[1]))return d[0];if(d=a(),So){Qr(!0);try{a()}finally{Qr(!1)}}return c.memoizedState=[d,o],d}function Hp(a,o,c){return c===void 0||(pi&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=t1(),Le.lanes|=a,Si|=a,c)}function Jx(a,o,c,d){return Ft(c,o)?c:vs.current!==null?(a=Hp(a,c,d),Ft(a,o)||(rn=!0),a):(pi&42)===0?(rn=!0,a.memoizedState=c):(a=t1(),Le.lanes|=a,Si|=a,o)}function eS(a,o,c,d,y){var b=ee.p;ee.p=b!==0&&8>b?b:8;var w=L.T,_={};L.T=_,Fp(a,!1,o,c);try{var I=y(),q=L.S;if(q!==null&&q(_,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var re=$N(I,d);Fl(a,o,re,ir(a))}else Fl(a,o,d,ir(a))}catch(le){Fl(a,o,{then:function(){},status:"rejected",reason:le},ir())}finally{ee.p=b,L.T=w}}function HN(){}function qp(a,o,c,d){if(a.tag!==5)throw Error(r(476));var y=tS(a).queue;eS(a,y,o,he,c===null?HN:function(){return nS(a),c(d)})}function tS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:he},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function nS(a){var o=tS(a).next.queue;Fl(a,o,{},ir())}function Yp(){return An(uc)}function rS(){return $t().memoizedState}function aS(){return $t().memoizedState}function qN(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=ir();a=fi(c);var d=hi(o,a,c);d!==null&&(or(d,o,c),Ul(d,o,c)),o={cache:Sp()},a.payload=o;return}o=o.return}}function YN(a,o,c){var d=ir();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Wu(a)?oS(o,c):(c=dp(a,o,c,d),c!==null&&(or(c,a,d),sS(c,o,d)))}function iS(a,o,c){var d=ir();Fl(a,o,c,d)}function Fl(a,o,c,d){var y={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Wu(a))oS(o,y);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var w=o.lastRenderedState,_=b(w,c);if(y.hasEagerState=!0,y.eagerState=_,Ft(_,w))return Mu(a,o,y,0),ft===null&&ju(),!1}catch{}finally{}if(c=dp(a,o,y,d),c!==null)return or(c,a,d),sS(c,o,d),!0}return!1}function Fp(a,o,c,d){if(d={lane:2,revertLane:Cm(),action:d,hasEagerState:!1,eagerState:null,next:null},Wu(a)){if(o)throw Error(r(479))}else o=dp(a,c,d,2),o!==null&&or(o,a,2)}function Wu(a){var o=a.alternate;return a===Le||o!==null&&o===Le}function oS(a,o){bs=qu=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function sS(a,o,c){if((c&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,vl(a,c)}}var Qu={readContext:An,use:Fu,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},lS={readContext:An,use:Fu,useCallback:function(a,o){return zn().memoizedState=[a,o===void 0?null:o],a},useContext:An,useEffect:Yx,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Xu(4194308,4,Xx.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Xu(4194308,4,a,o)},useInsertionEffect:function(a,o){Xu(4,2,a,o)},useMemo:function(a,o){var c=zn();o=o===void 0?null:o;var d=a();if(So){Qr(!0);try{a()}finally{Qr(!1)}}return c.memoizedState=[d,o],d},useReducer:function(a,o,c){var d=zn();if(c!==void 0){var y=c(o);if(So){Qr(!0);try{c(o)}finally{Qr(!1)}}}else y=o;return d.memoizedState=d.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},d.queue=a,a=a.dispatch=YN.bind(null,Le,a),[d.memoizedState,a]},useRef:function(a){var o=zn();return a={current:a},o.memoizedState=a},useState:function(a){a=Up(a);var o=a.queue,c=iS.bind(null,Le,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:Gp,useDeferredValue:function(a,o){var c=zn();return Hp(c,a,o)},useTransition:function(){var a=Up(!1);return a=eS.bind(null,Le,a.queue,!0,!1),zn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var d=Le,y=zn();if(Ze){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),ft===null)throw Error(r(349));(Ye&124)!==0||_x(d,o,c)}y.memoizedState=c;var b={value:c,getSnapshot:o};return y.queue=b,Yx(Nx.bind(null,d,b,a),[a]),d.flags|=2048,Ss(9,Ku(),Dx.bind(null,d,b,c,o),null),c},useId:function(){var a=zn(),o=ft.identifierPrefix;if(Ze){var c=_a,d=Ta;c=(d&~(1<<32-xn(d)-1)).toString(32)+c,o=""+o+"R"+c,c=Yu++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=BN++,o=""+o+"r"+c.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:Yp,useFormState:Ux,useActionState:Ux,useOptimistic:function(a){var o=zn();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Fp.bind(null,Le,!0,c),c.dispatch=o,[a,o]},useMemoCache:Lp,useCacheRefresh:function(){return zn().memoizedState=qN.bind(null,Le)}},cS={readContext:An,use:Fu,useCallback:Qx,useContext:An,useEffect:Fx,useImperativeHandle:Wx,useInsertionEffect:Vx,useLayoutEffect:Kx,useMemo:Zx,useReducer:Vu,useRef:qx,useState:function(){return Vu(ja)},useDebugValue:Gp,useDeferredValue:function(a,o){var c=$t();return Jx(c,it.memoizedState,a,o)},useTransition:function(){var a=Vu(ja)[0],o=$t().memoizedState;return[typeof a=="boolean"?a:ql(a),o]},useSyncExternalStore:Tx,useId:rS,useHostTransitionStatus:Yp,useFormState:zx,useActionState:zx,useOptimistic:function(a,o){var c=$t();return kx(c,it,a,o)},useMemoCache:Lp,useCacheRefresh:aS},FN={readContext:An,use:Fu,useCallback:Qx,useContext:An,useEffect:Fx,useImperativeHandle:Wx,useInsertionEffect:Vx,useLayoutEffect:Kx,useMemo:Zx,useReducer:Bp,useRef:qx,useState:function(){return Bp(ja)},useDebugValue:Gp,useDeferredValue:function(a,o){var c=$t();return it===null?Hp(c,a,o):Jx(c,it.memoizedState,a,o)},useTransition:function(){var a=Bp(ja)[0],o=$t().memoizedState;return[typeof a=="boolean"?a:ql(a),o]},useSyncExternalStore:Tx,useId:rS,useHostTransitionStatus:Yp,useFormState:Hx,useActionState:Hx,useOptimistic:function(a,o){var c=$t();return it!==null?kx(c,it,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Lp,useCacheRefresh:aS},As=null,Vl=0;function Zu(a){var o=Vl;return Vl+=1,As===null&&(As=[]),xx(As,a,o)}function Kl(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Ju(a,o){throw o.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function uS(a){var o=a._init;return o(a._payload)}function dS(a){function o(G,$){if(a){var H=G.deletions;H===null?(G.deletions=[$],G.flags|=16):H.push($)}}function c(G,$){if(!a)return null;for(;$!==null;)o(G,$),$=$.sibling;return null}function d(G){for(var $=new Map;G!==null;)G.key!==null?$.set(G.key,G):$.set(G.index,G),G=G.sibling;return $}function y(G,$){return G=Oa(G,$),G.index=0,G.sibling=null,G}function b(G,$,H){return G.index=H,a?(H=G.alternate,H!==null?(H=H.index,H<$?(G.flags|=67108866,$):H):(G.flags|=67108866,$)):(G.flags|=1048576,$)}function w(G){return a&&G.alternate===null&&(G.flags|=67108866),G}function _(G,$,H,oe){return $===null||$.tag!==6?($=hp(H,G.mode,oe),$.return=G,$):($=y($,H),$.return=G,$)}function I(G,$,H,oe){var Ee=H.type;return Ee===S?re(G,$,H.props.children,oe,H.key):$!==null&&($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&uS(Ee)===$.type)?($=y($,H.props),Kl($,H),$.return=G,$):($=Ru(H.type,H.key,H.props,null,G.mode,oe),Kl($,H),$.return=G,$)}function q(G,$,H,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==H.containerInfo||$.stateNode.implementation!==H.implementation?($=pp(H,G.mode,oe),$.return=G,$):($=y($,H.children||[]),$.return=G,$)}function re(G,$,H,oe,Ee){return $===null||$.tag!==7?($=ho(H,G.mode,oe,Ee),$.return=G,$):($=y($,H),$.return=G,$)}function le(G,$,H){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=hp(""+$,G.mode,H),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return H=Ru($.type,$.key,$.props,null,G.mode,H),Kl(H,$),H.return=G,H;case x:return $=pp($,G.mode,H),$.return=G,$;case R:var oe=$._init;return $=oe($._payload),le(G,$,H)}if(te($)||J($))return $=ho($,G.mode,H,null),$.return=G,$;if(typeof $.then=="function")return le(G,Zu($),H);if($.$$typeof===T)return le(G,Bu(G,$),H);Ju(G,$)}return null}function V(G,$,H,oe){var Ee=$!==null?$.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ee!==null?null:_(G,$,""+H,oe);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case g:return H.key===Ee?I(G,$,H,oe):null;case x:return H.key===Ee?q(G,$,H,oe):null;case R:return Ee=H._init,H=Ee(H._payload),V(G,$,H,oe)}if(te(H)||J(H))return Ee!==null?null:re(G,$,H,oe,null);if(typeof H.then=="function")return V(G,$,Zu(H),oe);if(H.$$typeof===T)return V(G,$,Bu(G,H),oe);Ju(G,H)}return null}function K(G,$,H,oe,Ee){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return G=G.get(H)||null,_($,G,""+oe,Ee);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return G=G.get(oe.key===null?H:oe.key)||null,I($,G,oe,Ee);case x:return G=G.get(oe.key===null?H:oe.key)||null,q($,G,oe,Ee);case R:var $e=oe._init;return oe=$e(oe._payload),K(G,$,H,oe,Ee)}if(te(oe)||J(oe))return G=G.get(H)||null,re($,G,oe,Ee,null);if(typeof oe.then=="function")return K(G,$,H,Zu(oe),Ee);if(oe.$$typeof===T)return K(G,$,H,Bu($,oe),Ee);Ju($,oe)}return null}function Me(G,$,H,oe){for(var Ee=null,$e=null,Oe=$,Ne=$=0,on=null;Oe!==null&&Ne<H.length;Ne++){Oe.index>Ne?(on=Oe,Oe=null):on=Oe.sibling;var Xe=V(G,Oe,H[Ne],oe);if(Xe===null){Oe===null&&(Oe=on);break}a&&Oe&&Xe.alternate===null&&o(G,Oe),$=b(Xe,$,Ne),$e===null?Ee=Xe:$e.sibling=Xe,$e=Xe,Oe=on}if(Ne===H.length)return c(G,Oe),Ze&&mo(G,Ne),Ee;if(Oe===null){for(;Ne<H.length;Ne++)Oe=le(G,H[Ne],oe),Oe!==null&&($=b(Oe,$,Ne),$e===null?Ee=Oe:$e.sibling=Oe,$e=Oe);return Ze&&mo(G,Ne),Ee}for(Oe=d(Oe);Ne<H.length;Ne++)on=K(Oe,G,Ne,H[Ne],oe),on!==null&&(a&&on.alternate!==null&&Oe.delete(on.key===null?Ne:on.key),$=b(on,$,Ne),$e===null?Ee=on:$e.sibling=on,$e=on);return a&&Oe.forEach(function(Di){return o(G,Di)}),Ze&&mo(G,Ne),Ee}function De(G,$,H,oe){if(H==null)throw Error(r(151));for(var Ee=null,$e=null,Oe=$,Ne=$=0,on=null,Xe=H.next();Oe!==null&&!Xe.done;Ne++,Xe=H.next()){Oe.index>Ne?(on=Oe,Oe=null):on=Oe.sibling;var Di=V(G,Oe,Xe.value,oe);if(Di===null){Oe===null&&(Oe=on);break}a&&Oe&&Di.alternate===null&&o(G,Oe),$=b(Di,$,Ne),$e===null?Ee=Di:$e.sibling=Di,$e=Di,Oe=on}if(Xe.done)return c(G,Oe),Ze&&mo(G,Ne),Ee;if(Oe===null){for(;!Xe.done;Ne++,Xe=H.next())Xe=le(G,Xe.value,oe),Xe!==null&&($=b(Xe,$,Ne),$e===null?Ee=Xe:$e.sibling=Xe,$e=Xe);return Ze&&mo(G,Ne),Ee}for(Oe=d(Oe);!Xe.done;Ne++,Xe=H.next())Xe=K(Oe,G,Ne,Xe.value,oe),Xe!==null&&(a&&Xe.alternate!==null&&Oe.delete(Xe.key===null?Ne:Xe.key),$=b(Xe,$,Ne),$e===null?Ee=Xe:$e.sibling=Xe,$e=Xe);return a&&Oe.forEach(function(Vj){return o(G,Vj)}),Ze&&mo(G,Ne),Ee}function st(G,$,H,oe){if(typeof H=="object"&&H!==null&&H.type===S&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case g:e:{for(var Ee=H.key;$!==null;){if($.key===Ee){if(Ee=H.type,Ee===S){if($.tag===7){c(G,$.sibling),oe=y($,H.props.children),oe.return=G,G=oe;break e}}else if($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&uS(Ee)===$.type){c(G,$.sibling),oe=y($,H.props),Kl(oe,H),oe.return=G,G=oe;break e}c(G,$);break}else o(G,$);$=$.sibling}H.type===S?(oe=ho(H.props.children,G.mode,oe,H.key),oe.return=G,G=oe):(oe=Ru(H.type,H.key,H.props,null,G.mode,oe),Kl(oe,H),oe.return=G,G=oe)}return w(G);case x:e:{for(Ee=H.key;$!==null;){if($.key===Ee)if($.tag===4&&$.stateNode.containerInfo===H.containerInfo&&$.stateNode.implementation===H.implementation){c(G,$.sibling),oe=y($,H.children||[]),oe.return=G,G=oe;break e}else{c(G,$);break}else o(G,$);$=$.sibling}oe=pp(H,G.mode,oe),oe.return=G,G=oe}return w(G);case R:return Ee=H._init,H=Ee(H._payload),st(G,$,H,oe)}if(te(H))return Me(G,$,H,oe);if(J(H)){if(Ee=J(H),typeof Ee!="function")throw Error(r(150));return H=Ee.call(H),De(G,$,H,oe)}if(typeof H.then=="function")return st(G,$,Zu(H),oe);if(H.$$typeof===T)return st(G,$,Bu(G,H),oe);Ju(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,$!==null&&$.tag===6?(c(G,$.sibling),oe=y($,H),oe.return=G,G=oe):(c(G,$),oe=hp(H,G.mode,oe),oe.return=G,G=oe),w(G)):c(G,$)}return function(G,$,H,oe){try{Vl=0;var Ee=st(G,$,H,oe);return As=null,Ee}catch(Oe){if(Oe===$l||Oe===zu)throw Oe;var $e=tr(29,Oe,null,G.mode);return $e.lanes=oe,$e.return=G,$e}finally{}}}var Es=dS(!0),fS=dS(!1),Pr=Z(null),aa=null;function mi(a){var o=a.alternate;ne(Kt,Kt.current&1),ne(Pr,a),aa===null&&(o===null||vs.current!==null||o.memoizedState!==null)&&(aa=a)}function hS(a){if(a.tag===22){if(ne(Kt,Kt.current),ne(Pr,a),aa===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(aa=a)}}else gi()}function gi(){ne(Kt,Kt.current),ne(Pr,Pr.current)}function Ma(a){F(Pr),aa===a&&(aa=null),F(Kt)}var Kt=Z(0);function ed(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Im(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Vp(a,o,c,d){o=a.memoizedState,c=c(d,o),c=c==null?o:p({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Kp={enqueueSetState:function(a,o,c){a=a._reactInternals;var d=ir(),y=fi(d);y.payload=o,c!=null&&(y.callback=c),o=hi(a,y,d),o!==null&&(or(o,a,d),Ul(o,a,d))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var d=ir(),y=fi(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=hi(a,y,d),o!==null&&(or(o,a,d),Ul(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=ir(),d=fi(c);d.tag=2,o!=null&&(d.callback=o),o=hi(a,d,c),o!==null&&(or(o,a,c),Ul(o,a,c))}};function pS(a,o,c,d,y,b,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,b,w):o.prototype&&o.prototype.isPureReactComponent?!co(c,d)||!co(y,b):!0}function mS(a,o,c,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==a&&Kp.enqueueReplaceState(o,o.state,null)}function Ao(a,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(a=a.defaultProps){c===o&&(c=p({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}var td=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function gS(a){td(a)}function yS(a){console.error(a)}function vS(a){td(a)}function nd(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function bS(a,o,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Xp(a,o,c){return c=fi(c),c.tag=3,c.payload={element:null},c.callback=function(){nd(a,o)},c}function xS(a){return a=fi(a),a.tag=3,a}function SS(a,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;a.payload=function(){return y(b)},a.callback=function(){bS(o,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){bS(o,c,d),typeof y!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var _=d.stack;this.componentDidCatch(d.value,{componentStack:_!==null?_:""})})}function VN(a,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&Rl(o,c,y,!0),c=Pr.current,c!==null){switch(c.tag){case 13:return aa===null?bm():c.alternate===null&&Ot===0&&(Ot=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===Cp?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Sm(a,d,y)),!1;case 22:return c.flags|=65536,d===Cp?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Sm(a,d,y)),!1}throw Error(r(435,c.tag))}return Sm(a,d,y),bm(),!1}if(Ze)return o=Pr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==yp&&(a=Error(r(422),{cause:d}),kl(Sr(a,c)))):(d!==yp&&(o=Error(r(423),{cause:d}),kl(Sr(o,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,d=Sr(d,c),y=Xp(a.stateNode,d,y),Op(a,y),Ot!==4&&(Ot=2)),!1;var b=Error(r(520),{cause:d});if(b=Sr(b,c),tc===null?tc=[b]:tc.push(b),Ot!==4&&(Ot=2),o===null)return!0;d=Sr(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Xp(c.stateNode,d,a),Op(c,a),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ai===null||!Ai.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=xS(y),SS(y,a,c,d),Op(c,y),!1}c=c.return}while(c!==null);return!1}var AS=Error(r(461)),rn=!1;function pn(a,o,c,d){o.child=a===null?fS(o,null,c,d):Es(o,a.child,c,d)}function ES(a,o,c,d,y){c=c.render;var b=o.ref;if("ref"in d){var w={};for(var _ in d)_!=="ref"&&(w[_]=d[_])}else w=d;return bo(o),d=jp(a,o,c,w,b,y),_=Mp(),a!==null&&!rn?(kp(a,o,y),ka(a,o,y)):(Ze&&_&&mp(o),o.flags|=1,pn(a,o,d,y),o.child)}function CS(a,o,c,d,y){if(a===null){var b=c.type;return typeof b=="function"&&!fp(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,PS(a,o,b,d,y)):(a=Ru(c.type,null,d,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!rm(a,y)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:co,c(w,d)&&a.ref===o.ref)return ka(a,o,y)}return o.flags|=1,a=Oa(b,d),a.ref=o.ref,a.return=o,o.child=a}function PS(a,o,c,d,y){if(a!==null){var b=a.memoizedProps;if(co(b,d)&&a.ref===o.ref)if(rn=!1,o.pendingProps=d=b,rm(a,y))(a.flags&131072)!==0&&(rn=!0);else return o.lanes=a.lanes,ka(a,o,y)}return Wp(a,o,c,d,y)}function wS(a,o,c){var d=o.pendingProps,y=d.children,b=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=b!==null?b.baseLanes|c:c,a!==null){for(y=o.child=a.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;o.childLanes=b&~d}else o.childLanes=0,o.child=null;return OS(a,o,d,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Uu(o,b!==null?b.cachePool:null),b!==null?Px(o,b):_p(),hS(o);else return o.lanes=o.childLanes=536870912,OS(a,o,b!==null?b.baseLanes|c:c,c)}else b!==null?(Uu(o,b.cachePool),Px(o,b),gi(),o.memoizedState=null):(a!==null&&Uu(o,null),_p(),gi());return pn(a,o,y,c),o.child}function OS(a,o,c,d){var y=Ep();return y=y===null?null:{parent:Vt._currentValue,pool:y},o.memoizedState={baseLanes:c,cachePool:y},a!==null&&Uu(o,null),_p(),hS(o),a!==null&&Rl(a,o,d,!0),null}function rd(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function Wp(a,o,c,d,y){return bo(o),c=jp(a,o,c,d,void 0,y),d=Mp(),a!==null&&!rn?(kp(a,o,y),ka(a,o,y)):(Ze&&d&&mp(o),o.flags|=1,pn(a,o,c,y),o.child)}function TS(a,o,c,d,y,b){return bo(o),o.updateQueue=null,c=Ox(o,d,c,y),wx(a),d=Mp(),a!==null&&!rn?(kp(a,o,b),ka(a,o,b)):(Ze&&d&&mp(o),o.flags|=1,pn(a,o,c,b),o.child)}function _S(a,o,c,d,y){if(bo(o),o.stateNode===null){var b=hs,w=c.contextType;typeof w=="object"&&w!==null&&(b=An(w)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Kp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},Pp(o),w=c.contextType,b.context=typeof w=="object"&&w!==null?An(w):hs,b.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Vp(o,c,w,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&Kp.enqueueReplaceState(b,b.state,null),Gl(o,d,b,y),zl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){b=o.stateNode;var _=o.memoizedProps,I=Ao(c,_);b.props=I;var q=b.context,re=c.contextType;w=hs,typeof re=="object"&&re!==null&&(w=An(re));var le=c.getDerivedStateFromProps;re=typeof le=="function"||typeof b.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,re||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_||q!==w)&&mS(o,b,d,w),di=!1;var V=o.memoizedState;b.state=V,Gl(o,d,b,y),zl(),q=o.memoizedState,_||V!==q||di?(typeof le=="function"&&(Vp(o,c,le,d),q=o.memoizedState),(I=di||pS(o,c,I,d,V,q,w))?(re||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=q),b.props=d,b.state=q,b.context=w,d=I):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,wp(a,o),w=o.memoizedProps,re=Ao(c,w),b.props=re,le=o.pendingProps,V=b.context,q=c.contextType,I=hs,typeof q=="object"&&q!==null&&(I=An(q)),_=c.getDerivedStateFromProps,(q=typeof _=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==le||V!==I)&&mS(o,b,d,I),di=!1,V=o.memoizedState,b.state=V,Gl(o,d,b,y),zl();var K=o.memoizedState;w!==le||V!==K||di||a!==null&&a.dependencies!==null&&$u(a.dependencies)?(typeof _=="function"&&(Vp(o,c,_,d),K=o.memoizedState),(re=di||pS(o,c,re,d,V,K,I)||a!==null&&a.dependencies!==null&&$u(a.dependencies))?(q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,K,I),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,K,I)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&V===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&V===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=K),b.props=d,b.state=K,b.context=I,d=re):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&V===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&V===a.memoizedState||(o.flags|=1024),d=!1)}return b=d,rd(a,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&d?(o.child=Es(o,a.child,null,y),o.child=Es(o,null,c,y)):pn(a,o,c,y),o.memoizedState=b.state,a=o.child):a=ka(a,o,y),a}function DS(a,o,c,d){return Ml(),o.flags|=256,pn(a,o,c,d),o.child}var Qp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zp(a){return{baseLanes:a,cachePool:yx()}}function Jp(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=wr),a}function NS(a,o,c){var d=o.pendingProps,y=!1,b=(o.flags&128)!==0,w;if((w=b)||(w=a!==null&&a.memoizedState===null?!1:(Kt.current&2)!==0),w&&(y=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,a===null){if(Ze){if(y?mi(o):gi(),Ze){var _=wt,I;if(I=_){e:{for(I=_,_=ra;I.nodeType!==8;){if(!_){_=null;break e}if(I=Fr(I.nextSibling),I===null){_=null;break e}}_=I}_!==null?(o.memoizedState={dehydrated:_,treeContext:po!==null?{id:Ta,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},I=tr(18,null,null,0),I.stateNode=_,I.return=o,o.child=I,kn=o,wt=null,I=!0):I=!1}I||yo(o)}if(_=o.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Im(_)?o.lanes=32:o.lanes=536870912,null;Ma(o)}return _=d.children,d=d.fallback,y?(gi(),y=o.mode,_=ad({mode:"hidden",children:_},y),d=ho(d,y,c,null),_.return=o,d.return=o,_.sibling=d,o.child=_,y=o.child,y.memoizedState=Zp(c),y.childLanes=Jp(a,w,c),o.memoizedState=Qp,d):(mi(o),em(o,_))}if(I=a.memoizedState,I!==null&&(_=I.dehydrated,_!==null)){if(b)o.flags&256?(mi(o),o.flags&=-257,o=tm(a,o,c)):o.memoizedState!==null?(gi(),o.child=a.child,o.flags|=128,o=null):(gi(),y=d.fallback,_=o.mode,d=ad({mode:"visible",children:d.children},_),y=ho(y,_,c,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,Es(o,a.child,null,c),d=o.child,d.memoizedState=Zp(c),d.childLanes=Jp(a,w,c),o.memoizedState=Qp,o=y);else if(mi(o),Im(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var q=w.dgst;w=q,d=Error(r(419)),d.stack="",d.digest=w,kl({value:d,source:null,stack:null}),o=tm(a,o,c)}else if(rn||Rl(a,o,c,!1),w=(c&a.childLanes)!==0,rn||w){if(w=ft,w!==null&&(d=c&-c,d=(d&42)!==0?1:Zo(d),d=(d&(w.suspendedLanes|c))!==0?0:d,d!==0&&d!==I.retryLane))throw I.retryLane=d,fs(a,d),or(w,a,d),AS;_.data==="$?"||bm(),o=tm(a,o,c)}else _.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=I.treeContext,wt=Fr(_.nextSibling),kn=o,Ze=!0,go=null,ra=!1,a!==null&&(Er[Cr++]=Ta,Er[Cr++]=_a,Er[Cr++]=po,Ta=a.id,_a=a.overflow,po=o),o=em(o,d.children),o.flags|=4096);return o}return y?(gi(),y=d.fallback,_=o.mode,I=a.child,q=I.sibling,d=Oa(I,{mode:"hidden",children:d.children}),d.subtreeFlags=I.subtreeFlags&65011712,q!==null?y=Oa(q,y):(y=ho(y,_,c,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,_=a.child.memoizedState,_===null?_=Zp(c):(I=_.cachePool,I!==null?(q=Vt._currentValue,I=I.parent!==q?{parent:q,pool:q}:I):I=yx(),_={baseLanes:_.baseLanes|c,cachePool:I}),y.memoizedState=_,y.childLanes=Jp(a,w,c),o.memoizedState=Qp,d):(mi(o),c=a.child,a=c.sibling,c=Oa(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,a!==null&&(w=o.deletions,w===null?(o.deletions=[a],o.flags|=16):w.push(a)),o.child=c,o.memoizedState=null,c)}function em(a,o){return o=ad({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function ad(a,o){return a=tr(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function tm(a,o,c){return Es(o,a.child,null,c),a=em(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function jS(a,o,c){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),bp(a.return,o,c)}function nm(a,o,c,d,y){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=y)}function MS(a,o,c){var d=o.pendingProps,y=d.revealOrder,b=d.tail;if(pn(a,o,d.children,c),d=Kt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&jS(a,c,o);else if(a.tag===19)jS(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(ne(Kt,d),y){case"forwards":for(c=o.child,y=null;c!==null;)a=c.alternate,a!==null&&ed(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),nm(o,!1,y,c,b);break;case"backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&ed(a)===null){o.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}nm(o,!0,c,null,b);break;case"together":nm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ka(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),Si|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(Rl(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Oa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Oa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function rm(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&$u(a)))}function KN(a,o,c){switch(o.tag){case 3:pe(o,o.stateNode.containerInfo),ui(o,Vt,a.memoizedState.cache),Ml();break;case 27:case 5:de(o);break;case 4:pe(o,o.stateNode.containerInfo);break;case 10:ui(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(mi(o),o.flags|=128,null):(c&o.child.childLanes)!==0?NS(a,o,c):(mi(o),a=ka(a,o,c),a!==null?a.sibling:null);mi(o);break;case 19:var y=(a.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(Rl(a,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return MS(a,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ne(Kt,Kt.current),d)break;return null;case 22:case 23:return o.lanes=0,wS(a,o,c);case 24:ui(o,Vt,a.memoizedState.cache)}return ka(a,o,c)}function kS(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)rn=!0;else{if(!rm(a,c)&&(o.flags&128)===0)return rn=!1,KN(a,o,c);rn=(a.flags&131072)!==0}else rn=!1,Ze&&(o.flags&1048576)!==0&&ux(o,Lu,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var d=o.elementType,y=d._init;if(d=y(d._payload),o.type=d,typeof d=="function")fp(d)?(a=Ao(d,a),o.tag=1,o=_S(null,o,d,a,c)):(o.tag=0,o=Wp(null,o,d,a,c));else{if(d!=null){if(y=d.$$typeof,y===j){o.tag=11,o=ES(null,o,d,a,c);break e}else if(y===M){o.tag=14,o=CS(null,o,d,a,c);break e}}throw o=se(d)||d,Error(r(306,o,""))}}return o;case 0:return Wp(a,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=Ao(d,o.pendingProps),_S(a,o,d,y,c);case 3:e:{if(pe(o,o.stateNode.containerInfo),a===null)throw Error(r(387));d=o.pendingProps;var b=o.memoizedState;y=b.element,wp(a,o),Gl(o,d,null,c);var w=o.memoizedState;if(d=w.cache,ui(o,Vt,d),d!==b.cache&&xp(o,[Vt],c,!0),zl(),d=w.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=DS(a,o,d,c);break e}else if(d!==y){y=Sr(Error(r(424)),o),kl(y),o=DS(a,o,d,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(wt=Fr(a.firstChild),kn=o,Ze=!0,go=null,ra=!0,c=fS(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ml(),d===y){o=ka(a,o,c);break e}pn(a,o,d,c)}o=o.child}return o;case 26:return rd(a,o),a===null?(c=$1(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ze||(c=o.type,a=o.pendingProps,d=vd(ae.current).createElement(c),d[Tt]=o,d[kt]=a,gn(d,c,a),Ke(d),o.stateNode=d):o.memoizedState=$1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return de(o),a===null&&Ze&&(d=o.stateNode=R1(o.type,o.pendingProps,ae.current),kn=o,ra=!0,y=wt,Pi(o.type)?(Lm=y,wt=Fr(d.firstChild)):wt=y),pn(a,o,o.pendingProps.children,c),rd(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Ze&&((y=d=wt)&&(d=Aj(d,o.type,o.pendingProps,ra),d!==null?(o.stateNode=d,kn=o,wt=Fr(d.firstChild),ra=!1,y=!0):y=!1),y||yo(o)),de(o),y=o.type,b=o.pendingProps,w=a!==null?a.memoizedProps:null,d=b.children,Mm(y,b)?d=null:w!==null&&Mm(y,w)&&(o.flags|=32),o.memoizedState!==null&&(y=jp(a,o,UN,null,null,c),uc._currentValue=y),rd(a,o),pn(a,o,d,c),o.child;case 6:return a===null&&Ze&&((a=c=wt)&&(c=Ej(c,o.pendingProps,ra),c!==null?(o.stateNode=c,kn=o,wt=null,a=!0):a=!1),a||yo(o)),null;case 13:return NS(a,o,c);case 4:return pe(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=Es(o,null,d,c):pn(a,o,d,c),o.child;case 11:return ES(a,o,o.type,o.pendingProps,c);case 7:return pn(a,o,o.pendingProps,c),o.child;case 8:return pn(a,o,o.pendingProps.children,c),o.child;case 12:return pn(a,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,ui(o,o.type,d.value),pn(a,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,bo(o),y=An(y),d=d(y),o.flags|=1,pn(a,o,d,c),o.child;case 14:return CS(a,o,o.type,o.pendingProps,c);case 15:return PS(a,o,o.type,o.pendingProps,c);case 19:return MS(a,o,c);case 31:return d=o.pendingProps,c=o.mode,d={mode:d.mode,children:d.children},a===null?(c=ad(d,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Oa(a.child,d),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return wS(a,o,c);case 24:return bo(o),d=An(Vt),a===null?(y=Ep(),y===null&&(y=ft,b=Sp(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),o.memoizedState={parent:d,cache:y},Pp(o),ui(o,Vt,y)):((a.lanes&c)!==0&&(wp(a,o),Gl(o,null,null,c),zl()),y=a.memoizedState,b=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),ui(o,Vt,d)):(d=b.cache,ui(o,Vt,d),d!==y.cache&&xp(o,[Vt],c,!0))),pn(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Ra(a){a.flags|=4}function RS(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!H1(o)){if(o=Pr.current,o!==null&&((Ye&4194048)===Ye?aa!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||o!==aa))throw Bl=Cp,vx;a.flags|=8192}}function id(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ml():536870912,a.lanes|=o,Os|=o)}function Xl(a,o){if(!Ze)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function At(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(o)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=d,a.childLanes=c,o}function XN(a,o,c){var d=o.pendingProps;switch(gp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return At(o),null;case 3:return c=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Na(Vt),ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(jl(o)?Ra(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,hx())),At(o),null;case 26:return c=o.memoizedState,a===null?(Ra(o),c!==null?(At(o),RS(o,c)):(At(o),o.flags&=-16777217)):c?c!==a.memoizedState?(Ra(o),At(o),RS(o,c)):(At(o),o.flags&=-16777217):(a.memoizedProps!==d&&Ra(o),At(o),o.flags&=-16777217),null;case 27:be(o),c=ae.current;var y=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Ra(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return At(o),null}a=me.current,jl(o)?dx(o):(a=R1(y,d,c),o.stateNode=a,Ra(o))}return At(o),null;case 5:if(be(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Ra(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return At(o),null}if(a=me.current,jl(o))dx(o);else{switch(y=vd(ae.current),a){case 1:a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=y.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?y.createElement(c,{is:d.is}):y.createElement(c)}}a[Tt]=o,a[kt]=d;e:for(y=o.child;y!==null;){if(y.tag===5||y.tag===6)a.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}o.stateNode=a;e:switch(gn(a,c,d),c){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ra(o)}}return At(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Ra(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(a=ae.current,jl(o)){if(a=o.stateNode,c=o.memoizedProps,d=null,y=kn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}a[Tt]=o,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||T1(a.nodeValue,c)),a||yo(o)}else a=vd(a).createTextNode(d),a[Tt]=o,o.stateNode=a}return At(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=jl(o),d!==null&&d.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Tt]=o}else Ml(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),y=!1}else y=hx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Ma(o),o):(Ma(o),null)}if(Ma(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=d!==null,a=a!==null&&a.memoizedState!==null,c){d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),id(o,o.updateQueue),At(o),null;case 4:return ie(),a===null&&Tm(o.stateNode.containerInfo),At(o),null;case 10:return Na(o.type),At(o),null;case 19:if(F(Kt),y=o.memoizedState,y===null)return At(o),null;if(d=(o.flags&128)!==0,b=y.rendering,b===null)if(d)Xl(y,!1);else{if(Ot!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=ed(a),b!==null){for(o.flags|=128,Xl(y,!1),a=b.updateQueue,o.updateQueue=a,id(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)cx(c,a),c=c.sibling;return ne(Kt,Kt.current&1|2),o.child}a=a.sibling}y.tail!==null&&dt()>ld&&(o.flags|=128,d=!0,Xl(y,!1),o.lanes=4194304)}else{if(!d)if(a=ed(b),a!==null){if(o.flags|=128,d=!0,a=a.updateQueue,o.updateQueue=a,id(o,a),Xl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!Ze)return At(o),null}else 2*dt()-y.renderingStartTime>ld&&c!==536870912&&(o.flags|=128,d=!0,Xl(y,!1),o.lanes=4194304);y.isBackwards?(b.sibling=o.child,o.child=b):(a=y.last,a!==null?a.sibling=b:o.child=b,y.last=b)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=dt(),o.sibling=null,a=Kt.current,ne(Kt,d?a&1|2:a&1),o):(At(o),null);case 22:case 23:return Ma(o),Dp(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),c=o.updateQueue,c!==null&&id(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),a!==null&&F(xo),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Na(Vt),At(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function WN(a,o){switch(gp(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Na(Vt),ie(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return be(o),null;case 13:if(Ma(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Ml()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return F(Kt),null;case 4:return ie(),null;case 10:return Na(o.type),null;case 22:case 23:return Ma(o),Dp(),a!==null&&F(xo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Na(Vt),null;case 25:return null;default:return null}}function IS(a,o){switch(gp(o),o.tag){case 3:Na(Vt),ie();break;case 26:case 27:case 5:be(o);break;case 4:ie();break;case 13:Ma(o);break;case 19:F(Kt);break;case 10:Na(o.type);break;case 22:case 23:Ma(o),Dp(),a!==null&&F(xo);break;case 24:Na(Vt)}}function Wl(a,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&a)===a){d=void 0;var b=c.create,w=c.inst;d=b(),w.destroy=d}c=c.next}while(c!==y)}}catch(_){ct(o,o.return,_)}}function yi(a,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&a)===a){var w=d.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,y=o;var I=c,q=_;try{q()}catch(re){ct(y,I,re)}}}d=d.next}while(d!==b)}}catch(re){ct(o,o.return,re)}}function LS(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{Cx(o,c)}catch(d){ct(a,a.return,d)}}}function $S(a,o,c){c.props=Ao(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){ct(a,o,d)}}function Ql(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(y){ct(a,o,y)}}function ia(a,o){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){ct(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){ct(a,o,y)}else c.current=null}function BS(a){var o=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){ct(a,a.return,y)}}function am(a,o,c){try{var d=a.stateNode;yj(d,a.type,c,o),d[kt]=o}catch(y){ct(a,a.return,y)}}function US(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Pi(a.type)||a.tag===4}function im(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||US(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Pi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function om(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=yd));else if(d!==4&&(d===27&&Pi(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(om(a,o,c),a=a.sibling;a!==null;)om(a,o,c),a=a.sibling}function od(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(d!==4&&(d===27&&Pi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(od(a,o,c),a=a.sibling;a!==null;)od(a,o,c),a=a.sibling}function zS(a){var o=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);gn(o,d,c),o[Tt]=a,o[kt]=c}catch(b){ct(a,a.return,b)}}var Ia=!1,Nt=!1,sm=!1,GS=typeof WeakSet=="function"?WeakSet:Set,an=null;function QN(a,o){if(a=a.containerInfo,Nm=Cd,a=Jb(a),ip(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var w=0,_=-1,I=-1,q=0,re=0,le=a,V=null;t:for(;;){for(var K;le!==c||y!==0&&le.nodeType!==3||(_=w+y),le!==b||d!==0&&le.nodeType!==3||(I=w+d),le.nodeType===3&&(w+=le.nodeValue.length),(K=le.firstChild)!==null;)V=le,le=K;for(;;){if(le===a)break t;if(V===c&&++q===y&&(_=w),V===b&&++re===d&&(I=w),(K=le.nextSibling)!==null)break;le=V,V=le.parentNode}le=K}c=_===-1||I===-1?null:{start:_,end:I}}else c=null}c=c||{start:0,end:0}}else c=null;for(jm={focusedElem:a,selectionRange:c},Cd=!1,an=o;an!==null;)if(o=an,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,an=a;else for(;an!==null;){switch(o=an,b=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,c=o,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Me=Ao(c.type,y,c.elementType===c.type);a=d.getSnapshotBeforeUpdate(Me,b),d.__reactInternalSnapshotBeforeUpdate=a}catch(De){ct(c,c.return,De)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)Rm(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Rm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,an=a;break}an=o.return}}function HS(a,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:vi(a,c),d&4&&Wl(5,c);break;case 1:if(vi(a,c),d&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(w){ct(c,c.return,w)}else{var y=Ao(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(w){ct(c,c.return,w)}}d&64&&LS(c),d&512&&Ql(c,c.return);break;case 3:if(vi(a,c),d&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Cx(a,o)}catch(w){ct(c,c.return,w)}}break;case 27:o===null&&d&4&&zS(c);case 26:case 5:vi(a,c),o===null&&d&4&&BS(c),d&512&&Ql(c,c.return);break;case 12:vi(a,c);break;case 13:vi(a,c),d&4&&FS(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=oj.bind(null,c),Cj(a,c))));break;case 22:if(d=c.memoizedState!==null||Ia,!d){o=o!==null&&o.memoizedState!==null||Nt,y=Ia;var b=Nt;Ia=d,(Nt=o)&&!b?bi(a,c,(c.subtreeFlags&8772)!==0):vi(a,c),Ia=y,Nt=b}break;case 30:break;default:vi(a,c)}}function qS(a){var o=a.alternate;o!==null&&(a.alternate=null,qS(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Wi(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var gt=null,Gn=!1;function La(a,o,c){for(c=c.child;c!==null;)YS(a,o,c),c=c.sibling}function YS(a,o,c){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Be,c)}catch{}switch(c.tag){case 26:Nt||ia(c,o),La(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Nt||ia(c,o);var d=gt,y=Gn;Pi(c.type)&&(gt=c.stateNode,Gn=!1),La(a,o,c),oc(c.stateNode),gt=d,Gn=y;break;case 5:Nt||ia(c,o);case 6:if(d=gt,y=Gn,gt=null,La(a,o,c),gt=d,Gn=y,gt!==null)if(Gn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(c.stateNode)}catch(b){ct(c,o,b)}else try{gt.removeChild(c.stateNode)}catch(b){ct(c,o,b)}break;case 18:gt!==null&&(Gn?(a=gt,M1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),pc(a)):M1(gt,c.stateNode));break;case 4:d=gt,y=Gn,gt=c.stateNode.containerInfo,Gn=!0,La(a,o,c),gt=d,Gn=y;break;case 0:case 11:case 14:case 15:Nt||yi(2,c,o),Nt||yi(4,c,o),La(a,o,c);break;case 1:Nt||(ia(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&$S(c,o,d)),La(a,o,c);break;case 21:La(a,o,c);break;case 22:Nt=(d=Nt)||c.memoizedState!==null,La(a,o,c),Nt=d;break;default:La(a,o,c)}}function FS(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{pc(a)}catch(c){ct(o,o.return,c)}}function ZN(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new GS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new GS),o;default:throw Error(r(435,a.tag))}}function lm(a,o){var c=ZN(a);o.forEach(function(d){var y=sj.bind(null,a,d);c.has(d)||(c.add(d),d.then(y,y))})}function nr(a,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=a,w=o,_=w;e:for(;_!==null;){switch(_.tag){case 27:if(Pi(_.type)){gt=_.stateNode,Gn=!1;break e}break;case 5:gt=_.stateNode,Gn=!1;break e;case 3:case 4:gt=_.stateNode.containerInfo,Gn=!0;break e}_=_.return}if(gt===null)throw Error(r(160));YS(b,w,y),gt=null,Gn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)VS(o,a),o=o.sibling}var Yr=null;function VS(a,o){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:nr(o,a),rr(a),d&4&&(yi(3,a,a.return),Wl(3,a),yi(5,a,a.return));break;case 1:nr(o,a),rr(a),d&512&&(Nt||c===null||ia(c,c.return)),d&64&&Ia&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=Yr;if(nr(o,a),rr(a),d&512&&(Nt||c===null||ia(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[zr]||b[Tt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),gn(b,d,c),b[Tt]=a,Ke(b),d=b;break e;case"link":var w=z1("link","href",y).get(d+(c.href||""));if(w){for(var _=0;_<w.length;_++)if(b=w[_],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(_,1);break t}}b=y.createElement(d),gn(b,d,c),y.head.appendChild(b);break;case"meta":if(w=z1("meta","content",y).get(d+(c.content||""))){for(_=0;_<w.length;_++)if(b=w[_],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(_,1);break t}}b=y.createElement(d),gn(b,d,c),y.head.appendChild(b);break;default:throw Error(r(468,d))}b[Tt]=a,Ke(b),d=b}a.stateNode=d}else G1(y,a.type,a.stateNode);else a.stateNode=U1(y,d,a.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?G1(y,a.type,a.stateNode):U1(y,d,a.memoizedProps)):d===null&&a.stateNode!==null&&am(a,a.memoizedProps,c.memoizedProps)}break;case 27:nr(o,a),rr(a),d&512&&(Nt||c===null||ia(c,c.return)),c!==null&&d&4&&am(a,a.memoizedProps,c.memoizedProps);break;case 5:if(nr(o,a),rr(a),d&512&&(Nt||c===null||ia(c,c.return)),a.flags&32){y=a.stateNode;try{no(y,"")}catch(K){ct(a,a.return,K)}}d&4&&a.stateNode!=null&&(y=a.memoizedProps,am(a,y,c!==null?c.memoizedProps:y)),d&1024&&(sm=!0);break;case 6:if(nr(o,a),rr(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(K){ct(a,a.return,K)}}break;case 3:if(Sd=null,y=Yr,Yr=bd(o.containerInfo),nr(o,a),Yr=y,rr(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{pc(o.containerInfo)}catch(K){ct(a,a.return,K)}sm&&(sm=!1,KS(a));break;case 4:d=Yr,Yr=bd(a.stateNode.containerInfo),nr(o,a),rr(a),Yr=d;break;case 12:nr(o,a),rr(a);break;case 13:nr(o,a),rr(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(pm=dt()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,lm(a,d)));break;case 22:y=a.memoizedState!==null;var I=c!==null&&c.memoizedState!==null,q=Ia,re=Nt;if(Ia=q||y,Nt=re||I,nr(o,a),Nt=re,Ia=q,rr(a),d&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||I||Ia||Nt||Eo(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){I=c=o;try{if(b=I.stateNode,y)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=I.stateNode;var le=I.memoizedProps.style,V=le!=null&&le.hasOwnProperty("display")?le.display:null;_.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(K){ct(I,I.return,K)}}}else if(o.tag===6){if(c===null){I=o;try{I.stateNode.nodeValue=y?"":I.memoizedProps}catch(K){ct(I,I.return,K)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,lm(a,c))));break;case 19:nr(o,a),rr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,lm(a,d)));break;case 30:break;case 21:break;default:nr(o,a),rr(a)}}function rr(a){var o=a.flags;if(o&2){try{for(var c,d=a.return;d!==null;){if(US(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,b=im(a);od(a,b,y);break;case 5:var w=c.stateNode;c.flags&32&&(no(w,""),c.flags&=-33);var _=im(a);od(a,_,w);break;case 3:case 4:var I=c.stateNode.containerInfo,q=im(a);om(a,q,I);break;default:throw Error(r(161))}}catch(re){ct(a,a.return,re)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function KS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;KS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function vi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)HS(a,o.alternate,o),o=o.sibling}function Eo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:yi(4,o,o.return),Eo(o);break;case 1:ia(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&$S(o,o.return,c),Eo(o);break;case 27:oc(o.stateNode);case 26:case 5:ia(o,o.return),Eo(o);break;case 22:o.memoizedState===null&&Eo(o);break;case 30:Eo(o);break;default:Eo(o)}a=a.sibling}}function bi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=a,b=o,w=b.flags;switch(b.tag){case 0:case 11:case 15:bi(y,b,c),Wl(4,b);break;case 1:if(bi(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(q){ct(d,d.return,q)}if(d=b,y=d.updateQueue,y!==null){var _=d.stateNode;try{var I=y.shared.hiddenCallbacks;if(I!==null)for(y.shared.hiddenCallbacks=null,y=0;y<I.length;y++)Ex(I[y],_)}catch(q){ct(d,d.return,q)}}c&&w&64&&LS(b),Ql(b,b.return);break;case 27:zS(b);case 26:case 5:bi(y,b,c),c&&d===null&&w&4&&BS(b),Ql(b,b.return);break;case 12:bi(y,b,c);break;case 13:bi(y,b,c),c&&w&4&&FS(y,b);break;case 22:b.memoizedState===null&&bi(y,b,c),Ql(b,b.return);break;case 30:break;default:bi(y,b,c)}o=o.sibling}}function cm(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&Il(c))}function um(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Il(a))}function oa(a,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)XS(a,o,c,d),o=o.sibling}function XS(a,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:oa(a,o,c,d),y&2048&&Wl(9,o);break;case 1:oa(a,o,c,d);break;case 3:oa(a,o,c,d),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Il(a)));break;case 12:if(y&2048){oa(a,o,c,d),a=o.stateNode;try{var b=o.memoizedProps,w=b.id,_=b.onPostCommit;typeof _=="function"&&_(w,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(I){ct(o,o.return,I)}}else oa(a,o,c,d);break;case 13:oa(a,o,c,d);break;case 23:break;case 22:b=o.stateNode,w=o.alternate,o.memoizedState!==null?b._visibility&2?oa(a,o,c,d):Zl(a,o):b._visibility&2?oa(a,o,c,d):(b._visibility|=2,Cs(a,o,c,d,(o.subtreeFlags&10256)!==0)),y&2048&&cm(w,o);break;case 24:oa(a,o,c,d),y&2048&&um(o.alternate,o);break;default:oa(a,o,c,d)}}function Cs(a,o,c,d,y){for(y=y&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=a,w=o,_=c,I=d,q=w.flags;switch(w.tag){case 0:case 11:case 15:Cs(b,w,_,I,y),Wl(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?Cs(b,w,_,I,y):Zl(b,w):(re._visibility|=2,Cs(b,w,_,I,y)),y&&q&2048&&cm(w.alternate,w);break;case 24:Cs(b,w,_,I,y),y&&q&2048&&um(w.alternate,w);break;default:Cs(b,w,_,I,y)}o=o.sibling}}function Zl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,d=o,y=d.flags;switch(d.tag){case 22:Zl(c,d),y&2048&&cm(d.alternate,d);break;case 24:Zl(c,d),y&2048&&um(d.alternate,d);break;default:Zl(c,d)}o=o.sibling}}var Jl=8192;function Ps(a){if(a.subtreeFlags&Jl)for(a=a.child;a!==null;)WS(a),a=a.sibling}function WS(a){switch(a.tag){case 26:Ps(a),a.flags&Jl&&a.memoizedState!==null&&Lj(Yr,a.memoizedState,a.memoizedProps);break;case 5:Ps(a);break;case 3:case 4:var o=Yr;Yr=bd(a.stateNode.containerInfo),Ps(a),Yr=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Jl,Jl=16777216,Ps(a),Jl=o):Ps(a));break;default:Ps(a)}}function QS(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function ec(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];an=d,JS(d,a)}QS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ZS(a),a=a.sibling}function ZS(a){switch(a.tag){case 0:case 11:case 15:ec(a),a.flags&2048&&yi(9,a,a.return);break;case 3:ec(a);break;case 12:ec(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,sd(a)):ec(a);break;default:ec(a)}}function sd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];an=d,JS(d,a)}QS(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:yi(8,o,o.return),sd(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,sd(o));break;default:sd(o)}a=a.sibling}}function JS(a,o){for(;an!==null;){var c=an;switch(c.tag){case 0:case 11:case 15:yi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Il(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,an=d;else e:for(c=a;an!==null;){d=an;var y=d.sibling,b=d.return;if(qS(d),d===c){an=null;break e}if(y!==null){y.return=b,an=y;break e}an=b}}}var JN={getCacheForType:function(a){var o=An(Vt),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},ej=typeof WeakMap=="function"?WeakMap:Map,Je=0,ft=null,Ue=null,Ye=0,et=0,ar=null,xi=!1,ws=!1,dm=!1,$a=0,Ot=0,Si=0,Co=0,fm=0,wr=0,Os=0,tc=null,Hn=null,hm=!1,pm=0,ld=1/0,cd=null,Ai=null,mn=0,Ei=null,Ts=null,_s=0,mm=0,gm=null,e1=null,nc=0,ym=null;function ir(){if((Je&2)!==0&&Ye!==0)return Ye&-Ye;if(L.T!==null){var a=gs;return a!==0?a:Cm()}return bl()}function t1(){wr===0&&(wr=(Ye&536870912)===0||Ze?pl():536870912);var a=Pr.current;return a!==null&&(a.flags|=32),wr}function or(a,o,c){(a===ft&&(et===2||et===9)||a.cancelPendingCommit!==null)&&(Ds(a,0),Ci(a,Ye,wr,!1)),Kn(a,c),((Je&2)===0||a!==ft)&&(a===ft&&((Je&2)===0&&(Co|=c),Ot===4&&Ci(a,Ye,wr,!1)),sa(a))}function n1(a,o,c){if((Je&6)!==0)throw Error(r(327));var d=!c&&(o&124)===0&&(o&a.expiredLanes)===0||ya(a,o),y=d?rj(a,o):xm(a,o,!0),b=d;do{if(y===0){ws&&!d&&Ci(a,o,0,!1);break}else{if(c=a.current.alternate,b&&!tj(c)){y=xm(a,o,!1),b=!1;continue}if(y===2){if(b=o,a.errorRecoveryDisabledLanes&b)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var _=a;y=tc;var I=_.current.memoizedState.isDehydrated;if(I&&(Ds(_,w).flags|=256),w=xm(_,w,!1),w!==2){if(dm&&!I){_.errorRecoveryDisabledLanes|=b,Co|=b,y=4;break e}b=Hn,Hn=y,b!==null&&(Hn===null?Hn=b:Hn.push.apply(Hn,b))}y=w}if(b=!1,y!==2)continue}}if(y===1){Ds(a,0),Ci(a,o,0,!0);break}e:{switch(d=a,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ci(d,o,wr,!xi);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=pm+300-dt(),10<y)){if(Ci(d,o,wr,!xi),ga(d,0,!0)!==0)break e;d.timeoutHandle=N1(r1.bind(null,d,c,Hn,cd,hm,o,wr,Co,Os,xi,b,2,-0,0),y);break e}r1(d,c,Hn,cd,hm,o,wr,Co,Os,xi,b,0,-0,0)}}break}while(!0);sa(a)}function r1(a,o,c,d,y,b,w,_,I,q,re,le,V,K){if(a.timeoutHandle=-1,le=o.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(cc={stylesheets:null,count:0,unsuspend:Ij},WS(o),le=$j(),le!==null)){a.cancelPendingCommit=le(u1.bind(null,a,o,b,c,d,y,w,_,I,re,1,V,K)),Ci(a,b,w,!q);return}u1(a,o,b,c,d,y,w,_,I)}function tj(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!Ft(b(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ci(a,o,c,d){o&=~fm,o&=~Co,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var y=o;0<y;){var b=31-xn(y),w=1<<b;d[b]=-1,y&=~w}c!==0&&yl(a,c,o)}function ud(){return(Je&6)===0?(rc(0),!1):!0}function vm(){if(Ue!==null){if(et===0)var a=Ue.return;else a=Ue,Da=vo=null,Rp(a),As=null,Vl=0,a=Ue;for(;a!==null;)IS(a.alternate,a),a=a.return;Ue=null}}function Ds(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,bj(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),vm(),ft=a,Ue=c=Oa(a.current,null),Ye=o,et=0,ar=null,xi=!1,ws=ya(a,o),dm=!1,Os=wr=fm=Co=Si=Ot=0,Hn=tc=null,hm=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var y=31-xn(d),b=1<<y;o|=a[y],d&=~b}return $a=o,ju(),c}function a1(a,o){Le=null,L.H=Qu,o===$l||o===zu?(o=Sx(),et=3):o===vx?(o=Sx(),et=4):et=o===AS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ar=o,Ue===null&&(Ot=1,nd(a,Sr(o,a.current)))}function i1(){var a=L.H;return L.H=Qu,a===null?Qu:a}function o1(){var a=L.A;return L.A=JN,a}function bm(){Ot=4,xi||(Ye&4194048)!==Ye&&Pr.current!==null||(ws=!0),(Si&134217727)===0&&(Co&134217727)===0||ft===null||Ci(ft,Ye,wr,!1)}function xm(a,o,c){var d=Je;Je|=2;var y=i1(),b=o1();(ft!==a||Ye!==o)&&(cd=null,Ds(a,o)),o=!1;var w=Ot;e:do try{if(et!==0&&Ue!==null){var _=Ue,I=ar;switch(et){case 8:vm(),w=6;break e;case 3:case 2:case 9:case 6:Pr.current===null&&(o=!0);var q=et;if(et=0,ar=null,Ns(a,_,I,q),c&&ws){w=0;break e}break;default:q=et,et=0,ar=null,Ns(a,_,I,q)}}nj(),w=Ot;break}catch(re){a1(a,re)}while(!0);return o&&a.shellSuspendCounter++,Da=vo=null,Je=d,L.H=y,L.A=b,Ue===null&&(ft=null,Ye=0,ju()),w}function nj(){for(;Ue!==null;)s1(Ue)}function rj(a,o){var c=Je;Je|=2;var d=i1(),y=o1();ft!==a||Ye!==o?(cd=null,ld=dt()+500,Ds(a,o)):ws=ya(a,o);e:do try{if(et!==0&&Ue!==null){o=Ue;var b=ar;t:switch(et){case 1:et=0,ar=null,Ns(a,o,b,1);break;case 2:case 9:if(bx(b)){et=0,ar=null,l1(o);break}o=function(){et!==2&&et!==9||ft!==a||(et=7),sa(a)},b.then(o,o);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:bx(b)?(et=0,ar=null,l1(o)):(et=0,ar=null,Ns(a,o,b,7));break;case 5:var w=null;switch(Ue.tag){case 26:w=Ue.memoizedState;case 5:case 27:var _=Ue;if(!w||H1(w)){et=0,ar=null;var I=_.sibling;if(I!==null)Ue=I;else{var q=_.return;q!==null?(Ue=q,dd(q)):Ue=null}break t}}et=0,ar=null,Ns(a,o,b,5);break;case 6:et=0,ar=null,Ns(a,o,b,6);break;case 8:vm(),Ot=6;break e;default:throw Error(r(462))}}aj();break}catch(re){a1(a,re)}while(!0);return Da=vo=null,L.H=d,L.A=y,Je=c,Ue!==null?0:(ft=null,Ye=0,ju(),Ot)}function aj(){for(;Ue!==null&&!Ct();)s1(Ue)}function s1(a){var o=kS(a.alternate,a,$a);a.memoizedProps=a.pendingProps,o===null?dd(a):Ue=o}function l1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=TS(c,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=TS(c,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:Rp(o);default:IS(c,o),o=Ue=cx(o,$a),o=kS(c,o,$a)}a.memoizedProps=a.pendingProps,o===null?dd(a):Ue=o}function Ns(a,o,c,d){Da=vo=null,Rp(o),As=null,Vl=0;var y=o.return;try{if(VN(a,y,o,c,Ye)){Ot=1,nd(a,Sr(c,a.current)),Ue=null;return}}catch(b){if(y!==null)throw Ue=y,b;Ot=1,nd(a,Sr(c,a.current)),Ue=null;return}o.flags&32768?(Ze||d===1?a=!0:ws||(Ye&536870912)!==0?a=!1:(xi=a=!0,(d===2||d===9||d===3||d===6)&&(d=Pr.current,d!==null&&d.tag===13&&(d.flags|=16384))),c1(o,a)):dd(o)}function dd(a){var o=a;do{if((o.flags&32768)!==0){c1(o,xi);return}a=o.return;var c=XN(o.alternate,o,$a);if(c!==null){Ue=c;return}if(o=o.sibling,o!==null){Ue=o;return}Ue=o=a}while(o!==null);Ot===0&&(Ot=5)}function c1(a,o){do{var c=WN(a.alternate,a);if(c!==null){c.flags&=32767,Ue=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){Ue=a;return}Ue=a=c}while(a!==null);Ot=6,Ue=null}function u1(a,o,c,d,y,b,w,_,I){a.cancelPendingCommit=null;do fd();while(mn!==0);if((Je&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=up,gl(a,c,b,w,_,I),a===ft&&(Ue=ft=null,Ye=0),Ts=o,Ei=a,_s=c,mm=b,gm=y,e1=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,lj(ri,function(){return m1(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=L.T,L.T=null,y=ee.p,ee.p=2,w=Je,Je|=4;try{QN(a,o,c)}finally{Je=w,ee.p=y,L.T=d}}mn=1,d1(),f1(),h1()}}function d1(){if(mn===1){mn=0;var a=Ei,o=Ts,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var d=ee.p;ee.p=2;var y=Je;Je|=4;try{VS(o,a);var b=jm,w=Jb(a.containerInfo),_=b.focusedElem,I=b.selectionRange;if(w!==_&&_&&_.ownerDocument&&Zb(_.ownerDocument.documentElement,_)){if(I!==null&&ip(_)){var q=I.start,re=I.end;if(re===void 0&&(re=q),"selectionStart"in _)_.selectionStart=q,_.selectionEnd=Math.min(re,_.value.length);else{var le=_.ownerDocument||document,V=le&&le.defaultView||window;if(V.getSelection){var K=V.getSelection(),Me=_.textContent.length,De=Math.min(I.start,Me),st=I.end===void 0?De:Math.min(I.end,Me);!K.extend&&De>st&&(w=st,st=De,De=w);var G=ap(_,De),$=ap(_,st);if(G&&$&&(K.rangeCount!==1||K.anchorNode!==G.node||K.anchorOffset!==G.offset||K.focusNode!==$.node||K.focusOffset!==$.offset)){var H=le.createRange();H.setStart(G.node,G.offset),K.removeAllRanges(),De>st?(K.addRange(H),K.extend($.node,$.offset)):(H.setEnd($.node,$.offset),K.addRange(H))}}}}for(le=[],K=_;K=K.parentNode;)K.nodeType===1&&le.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<le.length;_++){var oe=le[_];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Cd=!!Nm,jm=Nm=null}finally{Je=y,ee.p=d,L.T=c}}a.current=o,mn=2}}function f1(){if(mn===2){mn=0;var a=Ei,o=Ts,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var d=ee.p;ee.p=2;var y=Je;Je|=4;try{HS(a,o.alternate,o)}finally{Je=y,ee.p=d,L.T=c}}mn=3}}function h1(){if(mn===4||mn===3){mn=0,mt();var a=Ei,o=Ts,c=_s,d=e1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?mn=5:(mn=0,Ts=Ei=null,p1(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(Ai=null),Xi(c),o=o.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Be,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=L.T,y=ee.p,ee.p=2,L.T=null;try{for(var b=a.onRecoverableError,w=0;w<d.length;w++){var _=d[w];b(_.value,{componentStack:_.stack})}}finally{L.T=o,ee.p=y}}(_s&3)!==0&&fd(),sa(a),y=a.pendingLanes,(c&4194090)!==0&&(y&42)!==0?a===ym?nc++:(nc=0,ym=a):nc=0,rc(0)}}function p1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Il(o)))}function fd(a){return d1(),f1(),h1(),m1()}function m1(){if(mn!==5)return!1;var a=Ei,o=mm;mm=0;var c=Xi(_s),d=L.T,y=ee.p;try{ee.p=32>c?32:c,L.T=null,c=gm,gm=null;var b=Ei,w=_s;if(mn=0,Ts=Ei=null,_s=0,(Je&6)!==0)throw Error(r(331));var _=Je;if(Je|=4,ZS(b.current),XS(b,b.current,w,c),Je=_,rc(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Be,b)}catch{}return!0}finally{ee.p=y,L.T=d,p1(a,o)}}function g1(a,o,c){o=Sr(c,o),o=Xp(a.stateNode,o,2),a=hi(a,o,2),a!==null&&(Kn(a,2),sa(a))}function ct(a,o,c){if(a.tag===3)g1(a,a,c);else for(;o!==null;){if(o.tag===3){g1(o,a,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ai===null||!Ai.has(d))){a=Sr(c,a),c=xS(2),d=hi(o,c,2),d!==null&&(SS(c,d,o,a),Kn(d,2),sa(d));break}}o=o.return}}function Sm(a,o,c){var d=a.pingCache;if(d===null){d=a.pingCache=new ej;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(dm=!0,y.add(c),a=ij.bind(null,a,o,c),o.then(a,a))}function ij(a,o,c){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,ft===a&&(Ye&c)===c&&(Ot===4||Ot===3&&(Ye&62914560)===Ye&&300>dt()-pm?(Je&2)===0&&Ds(a,0):fm|=c,Os===Ye&&(Os=0)),sa(a)}function y1(a,o){o===0&&(o=ml()),a=fs(a,o),a!==null&&(Kn(a,o),sa(a))}function oj(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),y1(a,c)}function sj(a,o){var c=0;switch(a.tag){case 13:var d=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),y1(a,c)}function lj(a,o){return rt(a,o)}var hd=null,js=null,Am=!1,pd=!1,Em=!1,Po=0;function sa(a){a!==js&&a.next===null&&(js===null?hd=js=a:js=js.next=a),pd=!0,Am||(Am=!0,uj())}function rc(a,o){if(!Em&&pd){Em=!0;do for(var c=!1,d=hd;d!==null;){if(a!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var w=d.suspendedLanes,_=d.pingedLanes;b=(1<<31-xn(42|a)+1)-1,b&=y&~(w&~_),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,S1(d,b))}else b=Ye,b=ga(d,d===ft?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||ya(d,b)||(c=!0,S1(d,b));d=d.next}while(c);Em=!1}}function cj(){v1()}function v1(){pd=Am=!1;var a=0;Po!==0&&(vj()&&(a=Po),Po=0);for(var o=dt(),c=null,d=hd;d!==null;){var y=d.next,b=b1(d,o);b===0?(d.next=null,c===null?hd=y:c.next=y,y===null&&(js=c)):(c=d,(a!==0||(b&3)!==0)&&(pd=!0)),d=y}rc(a)}function b1(a,o){for(var c=a.suspendedLanes,d=a.pingedLanes,y=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var w=31-xn(b),_=1<<w,I=y[w];I===-1?((_&c)===0||(_&d)!==0)&&(y[w]=Mh(_,o)):I<=o&&(a.expiredLanes|=_),b&=~_}if(o=ft,c=Ye,c=ga(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===o&&(et===2||et===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ge(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||ya(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(d!==null&&Ge(d),Xi(c)){case 2:case 8:c=Qo;break;case 32:c=ri;break;case 268435456:c=hl;break;default:c=ri}return d=x1.bind(null,a),c=rt(c,d),a.callbackPriority=o,a.callbackNode=c,o}return d!==null&&d!==null&&Ge(d),a.callbackPriority=2,a.callbackNode=null,2}function x1(a,o){if(mn!==0&&mn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(fd()&&a.callbackNode!==c)return null;var d=Ye;return d=ga(a,a===ft?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(n1(a,d,o),b1(a,dt()),a.callbackNode!=null&&a.callbackNode===c?x1.bind(null,a):null)}function S1(a,o){if(fd())return null;n1(a,o,!0)}function uj(){xj(function(){(Je&6)!==0?rt(ma,cj):v1()})}function Cm(){return Po===0&&(Po=pl()),Po}function A1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Aa(""+a)}function E1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function dj(a,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var b=A1((y[kt]||null).action),w=d.submitter;w&&(o=(o=w[kt]||null)?A1(o.formAction):w.getAttribute("formAction"),o!==null&&(b=o,w=null));var _=new is("action","action",null,d,y);a.push({event:_,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Po!==0){var I=w?E1(y,w):new FormData(y);qp(c,{pending:!0,data:I,method:y.method,action:b},null,I)}}else typeof b=="function"&&(_.preventDefault(),I=w?E1(y,w):new FormData(y),qp(c,{pending:!0,data:I,method:y.method,action:b},b,I))},currentTarget:y}]})}}for(var Pm=0;Pm<cp.length;Pm++){var wm=cp[Pm],fj=wm.toLowerCase(),hj=wm[0].toUpperCase()+wm.slice(1);qr(fj,"on"+hj)}qr(nx,"onAnimationEnd"),qr(rx,"onAnimationIteration"),qr(ax,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(DN,"onTransitionRun"),qr(NN,"onTransitionStart"),qr(jN,"onTransitionCancel"),qr(ix,"onTransitionEnd"),Zn("onMouseEnter",["mouseout","mouseover"]),Zn("onMouseLeave",["mouseout","mouseover"]),Zn("onPointerEnter",["pointerout","pointerover"]),Zn("onPointerLeave",["pointerout","pointerover"]),Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function C1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],y=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var w=d.length-1;0<=w;w--){var _=d[w],I=_.instance,q=_.currentTarget;if(_=_.listener,I!==b&&y.isPropagationStopped())break e;b=_,y.currentTarget=q;try{b(y)}catch(re){td(re)}y.currentTarget=null,b=I}else for(w=0;w<d.length;w++){if(_=d[w],I=_.instance,q=_.currentTarget,_=_.listener,I!==b&&y.isPropagationStopped())break e;b=_,y.currentTarget=q;try{b(y)}catch(re){td(re)}y.currentTarget=null,b=I}}}}function ze(a,o){var c=o[pu];c===void 0&&(c=o[pu]=new Set);var d=a+"__bubble";c.has(d)||(P1(o,a,2,!1),c.add(d))}function Om(a,o,c){var d=0;o&&(d|=4),P1(c,a,d,o)}var md="_reactListening"+Math.random().toString(36).slice(2);function Tm(a){if(!a[md]){a[md]=!0,Qn.forEach(function(c){c!=="selectionchange"&&(pj.has(c)||Om(c,!1,a),Om(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[md]||(o[md]=!0,Om("selectionchange",!1,o))}}function P1(a,o,c,d){switch(X1(o)){case 2:var y=zj;break;case 8:y=Gj;break;default:y=Gm}c=y.bind(null,o,c,a),y=void 0,!ao||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?a.addEventListener(o,c,{capture:!0,passive:y}):a.addEventListener(o,c,!0):y!==void 0?a.addEventListener(o,c,{passive:y}):a.addEventListener(o,c,!1)}function _m(a,o,c,d,y){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var _=d.stateNode.containerInfo;if(_===y)break;if(w===4)for(w=d.return;w!==null;){var I=w.tag;if((I===3||I===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;_!==null;){if(w=fn(_),w===null)return;if(I=w.tag,I===5||I===6||I===26||I===27){d=b=w;continue e}_=_.parentNode}}d=d.return}Ve(function(){var q=b,re=rs(c),le=[];e:{var V=ox.get(a);if(V!==void 0){var K=is,Me=a;switch(a){case"keypress":if(as(c)===0)break e;case"keydown":case"keyup":K=Yh;break;case"focusin":Me="focus",K=ss;break;case"focusout":Me="blur",K=ss;break;case"beforeblur":case"afterblur":K=ss;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=os;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Kh;break;case nx:case rx:case ax:K=Uh;break;case ix:K=Wh;break;case"scroll":case"scrollend":K=Bh;break;case"wheel":K=Cu;break;case"copy":case"cut":case"paste":K=nn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Eu;break;case"toggle":case"beforetoggle":K=Jh}var De=(o&4)!==0,st=!De&&(a==="scroll"||a==="scrollend"),G=De?V!==null?V+"Capture":null:V;De=[];for(var $=q,H;$!==null;){var oe=$;if(H=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||H===null||G===null||(oe=er($,G),oe!=null&&De.push(ic($,oe,H))),st)break;$=$.return}0<De.length&&(V=new K(V,Me,null,c,re),le.push({event:V,listeners:De}))}}if((o&7)===0){e:{if(V=a==="mouseover"||a==="pointerover",K=a==="mouseout"||a==="pointerout",V&&c!==br&&(Me=c.relatedTarget||c.fromElement)&&(fn(Me)||Me[ba]))break e;if((K||V)&&(V=re.window===re?re:(V=re.ownerDocument)?V.defaultView||V.parentWindow:window,K?(Me=c.relatedTarget||c.toElement,K=q,Me=Me?fn(Me):null,Me!==null&&(st=s(Me),De=Me.tag,Me!==st||De!==5&&De!==27&&De!==6)&&(Me=null)):(K=null,Me=q),K!==Me)){if(De=wl,oe="onMouseLeave",G="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(De=Eu,oe="onPointerLeave",G="onPointerEnter",$="pointer"),st=K==null?V:Gr(K),H=Me==null?V:Gr(Me),V=new De(oe,$+"leave",K,c,re),V.target=st,V.relatedTarget=H,oe=null,fn(re)===q&&(De=new De(G,$+"enter",Me,c,re),De.target=H,De.relatedTarget=st,oe=De),st=oe,K&&Me)t:{for(De=K,G=Me,$=0,H=De;H;H=Ms(H))$++;for(H=0,oe=G;oe;oe=Ms(oe))H++;for(;0<$-H;)De=Ms(De),$--;for(;0<H-$;)G=Ms(G),H--;for(;$--;){if(De===G||G!==null&&De===G.alternate)break t;De=Ms(De),G=Ms(G)}De=null}else De=null;K!==null&&w1(le,V,K,De,!1),Me!==null&&st!==null&&w1(le,st,Me,De,!0)}}e:{if(V=q?Gr(q):window,K=V.nodeName&&V.nodeName.toLowerCase(),K==="select"||K==="input"&&V.type==="file")var Ee=He;else if(Q(V))if(_t)Ee=rp;else{Ee=lo;var $e=Dl}else K=V.nodeName,!K||K.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?q&&Pl(q.elementType)&&(Ee=He):Ee=ci;if(Ee&&(Ee=Ee(a,q))){ge(le,Ee,c,re);break e}$e&&$e(a,V,q),a==="focusout"&&q&&V.type==="number"&&q.memoizedProps.value!=null&&ts(V,"number",V.value)}switch($e=q?Gr(q):window,a){case"focusin":(Q($e)||$e.contentEditable==="true")&&(cs=$e,op=q,Nl=null);break;case"focusout":Nl=op=cs=null;break;case"mousedown":sp=!0;break;case"contextmenu":case"mouseup":case"dragend":sp=!1,ex(le,c,re);break;case"selectionchange":if(_N)break;case"keydown":case"keyup":ex(le,c,re)}var Oe;if(_l)e:{switch(a){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else li?_u(a,c)&&(Ne="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Ne="onCompositionStart");Ne&&(wu&&c.locale!=="ko"&&(li||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&li&&(Oe=Lh()):(Ea=re,qt="value"in Ea?Ea.value:Ea.textContent,li=!0)),$e=gd(q,Ne),0<$e.length&&(Ne=new Ol(Ne,a,null,c,re),le.push({event:Ne,listeners:$e}),Oe?Ne.data=Oe:(Oe=Du(c),Oe!==null&&(Ne.data=Oe)))),(Oe=Pu?tp(a,c):np(a,c))&&(Ne=gd(q,"onBeforeInput"),0<Ne.length&&($e=new Ol("onBeforeInput","beforeinput",null,c,re),le.push({event:$e,listeners:Ne}),$e.data=Oe)),dj(le,a,q,c,re)}C1(le,o)})}function ic(a,o,c){return{instance:a,listener:o,currentTarget:c}}function gd(a,o){for(var c=o+"Capture",d=[];a!==null;){var y=a,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=er(a,c),y!=null&&d.unshift(ic(a,y,b)),y=er(a,o),y!=null&&d.push(ic(a,y,b))),a.tag===3)return d;a=a.return}return[]}function Ms(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function w1(a,o,c,d,y){for(var b=o._reactName,w=[];c!==null&&c!==d;){var _=c,I=_.alternate,q=_.stateNode;if(_=_.tag,I!==null&&I===d)break;_!==5&&_!==26&&_!==27||q===null||(I=q,y?(q=er(c,b),q!=null&&w.unshift(ic(c,q,I))):y||(q=er(c,b),q!=null&&w.push(ic(c,q,I)))),c=c.return}w.length!==0&&a.push({event:o,listeners:w})}var mj=/\r\n?/g,gj=/\u0000|\uFFFD/g;function O1(a){return(typeof a=="string"?a:""+a).replace(mj,`
`).replace(gj,"")}function T1(a,o){return o=O1(o),O1(a)===o}function yd(){}function ot(a,o,c,d,y,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||no(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&no(a,""+d);break;case"className":Jo(a,"class",d);break;case"tabIndex":Jo(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Jo(a,c,d);break;case"style":ns(a,d,b);break;case"data":if(o!=="object"){Jo(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=Aa(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&ot(a,o,"name",y.name,y,null),ot(a,o,"formEncType",y.formEncType,y,null),ot(a,o,"formMethod",y.formMethod,y,null),ot(a,o,"formTarget",y.formTarget,y,null)):(ot(a,o,"encType",y.encType,y,null),ot(a,o,"method",y.method,y,null),ot(a,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=Aa(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=yd);break;case"onScroll":d!=null&&ze("scroll",a);break;case"onScrollEnd":d!=null&&ze("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=Aa(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":ze("beforetoggle",a),ze("toggle",a),Nn(a,"popover",d);break;case"xlinkActuate":yr(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":yr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":yr(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":yr(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":yr(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":yr(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":yr(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":yr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":yr(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Nn(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ih.get(c)||c,Nn(a,c,d))}}function Dm(a,o,c,d,y,b){switch(c){case"style":ns(a,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof d=="string"?no(a,d):(typeof d=="number"||typeof d=="bigint")&&no(a,""+d);break;case"onScroll":d!=null&&ze("scroll",a);break;case"onScrollEnd":d!=null&&ze("scrollend",a);break;case"onClick":d!=null&&(a.onclick=yd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jr.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),b=a[kt]||null,b=b!=null?b[c]:null,typeof b=="function"&&a.removeEventListener(o,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,d,y);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):Nn(a,c,d)}}}function gn(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",a),ze("load",a);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ot(a,o,b,w,c,null)}}y&&ot(a,o,"srcSet",c.srcSet,c,null),d&&ot(a,o,"src",c.src,c,null);return;case"input":ze("invalid",a);var _=b=w=y=null,I=null,q=null;for(d in c)if(c.hasOwnProperty(d)){var re=c[d];if(re!=null)switch(d){case"name":y=re;break;case"type":w=re;break;case"checked":I=re;break;case"defaultChecked":q=re;break;case"value":b=re;break;case"defaultValue":_=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:ot(a,o,d,re,c,null)}}Cl(a,b,_,I,q,w,y,!1),Sa(a);return;case"select":ze("invalid",a),d=w=b=null;for(y in c)if(c.hasOwnProperty(y)&&(_=c[y],_!=null))switch(y){case"value":b=_;break;case"defaultValue":w=_;break;case"multiple":d=_;default:ot(a,o,y,_,c,null)}o=b,c=w,a.multiple=!!d,o!=null?to(a,!!d,o,!1):c!=null&&to(a,!!d,c,!0);return;case"textarea":ze("invalid",a),b=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(_=c[w],_!=null))switch(w){case"value":d=_;break;case"defaultValue":y=_;break;case"children":b=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:ot(a,o,w,_,c,null)}Rh(a,d,y,b),Sa(a);return;case"option":for(I in c)if(c.hasOwnProperty(I)&&(d=c[I],d!=null))switch(I){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ot(a,o,I,d,c,null)}return;case"dialog":ze("beforetoggle",a),ze("toggle",a),ze("cancel",a),ze("close",a);break;case"iframe":case"object":ze("load",a);break;case"video":case"audio":for(d=0;d<ac.length;d++)ze(ac[d],a);break;case"image":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"embed":case"source":case"link":ze("error",a),ze("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in c)if(c.hasOwnProperty(q)&&(d=c[q],d!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ot(a,o,q,d,c,null)}return;default:if(Pl(o)){for(re in c)c.hasOwnProperty(re)&&(d=c[re],d!==void 0&&Dm(a,o,re,d,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(d=c[_],d!=null&&ot(a,o,_,d,c,null))}function yj(a,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,w=null,_=null,I=null,q=null,re=null;for(K in c){var le=c[K];if(c.hasOwnProperty(K)&&le!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=le;default:d.hasOwnProperty(K)||ot(a,o,K,null,d,le)}}for(var V in d){var K=d[V];if(le=c[V],d.hasOwnProperty(V)&&(K!=null||le!=null))switch(V){case"type":b=K;break;case"name":y=K;break;case"checked":q=K;break;case"defaultChecked":re=K;break;case"value":w=K;break;case"defaultValue":_=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,o));break;default:K!==le&&ot(a,o,V,K,d,le)}}eo(a,w,_,I,q,re,b,y);return;case"select":K=w=_=V=null;for(b in c)if(I=c[b],c.hasOwnProperty(b)&&I!=null)switch(b){case"value":break;case"multiple":K=I;default:d.hasOwnProperty(b)||ot(a,o,b,null,d,I)}for(y in d)if(b=d[y],I=c[y],d.hasOwnProperty(y)&&(b!=null||I!=null))switch(y){case"value":V=b;break;case"defaultValue":_=b;break;case"multiple":w=b;default:b!==I&&ot(a,o,y,b,d,I)}o=_,c=w,d=K,V!=null?to(a,!!c,V,!1):!!d!=!!c&&(o!=null?to(a,!!c,o,!0):to(a,!!c,c?[]:"",!1));return;case"textarea":K=V=null;for(_ in c)if(y=c[_],c.hasOwnProperty(_)&&y!=null&&!d.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:ot(a,o,_,null,d,y)}for(w in d)if(y=d[w],b=c[w],d.hasOwnProperty(w)&&(y!=null||b!=null))switch(w){case"value":V=y;break;case"defaultValue":K=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&ot(a,o,w,y,d,b)}gu(a,V,K);return;case"option":for(var Me in c)if(V=c[Me],c.hasOwnProperty(Me)&&V!=null&&!d.hasOwnProperty(Me))switch(Me){case"selected":a.selected=!1;break;default:ot(a,o,Me,null,d,V)}for(I in d)if(V=d[I],K=c[I],d.hasOwnProperty(I)&&V!==K&&(V!=null||K!=null))switch(I){case"selected":a.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:ot(a,o,I,V,d,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in c)V=c[De],c.hasOwnProperty(De)&&V!=null&&!d.hasOwnProperty(De)&&ot(a,o,De,null,d,V);for(q in d)if(V=d[q],K=c[q],d.hasOwnProperty(q)&&V!==K&&(V!=null||K!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,o));break;default:ot(a,o,q,V,d,K)}return;default:if(Pl(o)){for(var st in c)V=c[st],c.hasOwnProperty(st)&&V!==void 0&&!d.hasOwnProperty(st)&&Dm(a,o,st,void 0,d,V);for(re in d)V=d[re],K=c[re],!d.hasOwnProperty(re)||V===K||V===void 0&&K===void 0||Dm(a,o,re,V,d,K);return}}for(var G in c)V=c[G],c.hasOwnProperty(G)&&V!=null&&!d.hasOwnProperty(G)&&ot(a,o,G,null,d,V);for(le in d)V=d[le],K=c[le],!d.hasOwnProperty(le)||V===K||V==null&&K==null||ot(a,o,le,V,d,K)}var Nm=null,jm=null;function vd(a){return a.nodeType===9?a:a.ownerDocument}function _1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Mm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var km=null;function vj(){var a=window.event;return a&&a.type==="popstate"?a===km?!1:(km=a,!0):(km=null,!1)}var N1=typeof setTimeout=="function"?setTimeout:void 0,bj=typeof clearTimeout=="function"?clearTimeout:void 0,j1=typeof Promise=="function"?Promise:void 0,xj=typeof queueMicrotask=="function"?queueMicrotask:typeof j1<"u"?function(a){return j1.resolve(null).then(a).catch(Sj)}:N1;function Sj(a){setTimeout(function(){throw a})}function Pi(a){return a==="head"}function M1(a,o){var c=o,d=0,y=0;do{var b=c.nextSibling;if(a.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<d&&8>d){c=d;var w=a.ownerDocument;if(c&1&&oc(w.documentElement),c&2&&oc(w.body),c&4)for(c=w.head,oc(c),w=c.firstChild;w;){var _=w.nextSibling,I=w.nodeName;w[zr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=_}}if(y===0){a.removeChild(b),pc(o);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:d=c.charCodeAt(0)-48;else d=0;c=b}while(c);pc(o)}function Rm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Rm(c),Wi(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function Aj(a,o,c,d){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[zr])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Fr(a.nextSibling),a===null)break}return null}function Ej(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=Fr(a.nextSibling),a===null))return null;return a}function Im(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Cj(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Fr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var Lm=null;function k1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function R1(a,o,c){switch(o=vd(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function oc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Wi(a)}var Or=new Map,I1=new Set;function bd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ba=ee.d;ee.d={f:Pj,r:wj,D:Oj,C:Tj,L:_j,m:Dj,X:jj,S:Nj,M:Mj};function Pj(){var a=Ba.f(),o=ud();return a||o}function wj(a){var o=$n(a);o!==null&&o.tag===5&&o.type==="form"?nS(o):Ba.r(a)}var ks=typeof document>"u"?null:document;function L1(a,o,c){var d=ks;if(d&&typeof o=="string"&&o){var y=Mn(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),I1.has(y)||(I1.add(y),a={rel:a,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),gn(o,"link",a),Ke(o),d.head.appendChild(o)))}}function Oj(a){Ba.D(a),L1("dns-prefetch",a,null)}function Tj(a,o){Ba.C(a,o),L1("preconnect",a,o)}function _j(a,o,c){Ba.L(a,o,c);var d=ks;if(d&&a&&o){var y='link[rel="preload"][as="'+Mn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Mn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Mn(c.imageSizes)+'"]')):y+='[href="'+Mn(a)+'"]';var b=y;switch(o){case"style":b=Rs(a);break;case"script":b=Is(a)}Or.has(b)||(a=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),Or.set(b,a),d.querySelector(y)!==null||o==="style"&&d.querySelector(sc(b))||o==="script"&&d.querySelector(lc(b))||(o=d.createElement("link"),gn(o,"link",a),Ke(o),d.head.appendChild(o)))}}function Dj(a,o){Ba.m(a,o);var c=ks;if(c&&a){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Mn(d)+'"][href="'+Mn(a)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Is(a)}if(!Or.has(b)&&(a=p({rel:"modulepreload",href:a},o),Or.set(b,a),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(lc(b)))return}d=c.createElement("link"),gn(d,"link",a),Ke(d),c.head.appendChild(d)}}}function Nj(a,o,c){Ba.S(a,o,c);var d=ks;if(d&&a){var y=Wn(d).hoistableStyles,b=Rs(a);o=o||"default";var w=y.get(b);if(!w){var _={loading:0,preload:null};if(w=d.querySelector(sc(b)))_.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},c),(c=Or.get(b))&&$m(a,c);var I=w=d.createElement("link");Ke(I),gn(I,"link",a),I._p=new Promise(function(q,re){I.onload=q,I.onerror=re}),I.addEventListener("load",function(){_.loading|=1}),I.addEventListener("error",function(){_.loading|=2}),_.loading|=4,xd(w,o,d)}w={type:"stylesheet",instance:w,count:1,state:_},y.set(b,w)}}}function jj(a,o){Ba.X(a,o);var c=ks;if(c&&a){var d=Wn(c).hoistableScripts,y=Is(a),b=d.get(y);b||(b=c.querySelector(lc(y)),b||(a=p({src:a,async:!0},o),(o=Or.get(y))&&Bm(a,o),b=c.createElement("script"),Ke(b),gn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function Mj(a,o){Ba.M(a,o);var c=ks;if(c&&a){var d=Wn(c).hoistableScripts,y=Is(a),b=d.get(y);b||(b=c.querySelector(lc(y)),b||(a=p({src:a,async:!0,type:"module"},o),(o=Or.get(y))&&Bm(a,o),b=c.createElement("script"),Ke(b),gn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function $1(a,o,c,d){var y=(y=ae.current)?bd(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Rs(c.href),c=Wn(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Rs(c.href);var b=Wn(y).hoistableStyles,w=b.get(a);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,w),(b=y.querySelector(sc(a)))&&!b._p&&(w.instance=b,w.state.loading=5),Or.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Or.set(a,c),b||kj(y,a,c,w.state))),o&&d===null)throw Error(r(528,""));return w}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Is(c),c=Wn(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Rs(a){return'href="'+Mn(a)+'"'}function sc(a){return'link[rel="stylesheet"]['+a+"]"}function B1(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function kj(a,o,c,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),gn(o,"link",c),Ke(o),a.head.appendChild(o))}function Is(a){return'[src="'+Mn(a)+'"]'}function lc(a){return"script[async]"+a}function U1(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+Mn(c.href)+'"]');if(d)return o.instance=d,Ke(d),d;var y=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Ke(d),gn(d,"style",y),xd(d,c.precedence,a),o.instance=d;case"stylesheet":y=Rs(c.href);var b=a.querySelector(sc(y));if(b)return o.state.loading|=4,o.instance=b,Ke(b),b;d=B1(c),(y=Or.get(y))&&$m(d,y),b=(a.ownerDocument||a).createElement("link"),Ke(b);var w=b;return w._p=new Promise(function(_,I){w.onload=_,w.onerror=I}),gn(b,"link",d),o.state.loading|=4,xd(b,c.precedence,a),o.instance=b;case"script":return b=Is(c.src),(y=a.querySelector(lc(b)))?(o.instance=y,Ke(y),y):(d=c,(y=Or.get(b))&&(d=p({},c),Bm(d,y)),a=a.ownerDocument||a,y=a.createElement("script"),Ke(y),gn(y,"link",d),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,xd(d,c.precedence,a));return o.instance}function xd(a,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,w=0;w<d.length;w++){var _=d[w];if(_.dataset.precedence===o)b=_;else if(b!==y)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function $m(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Bm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Sd=null;function z1(a,o,c){if(Sd===null){var d=new Map,y=Sd=new Map;y.set(c,d)}else y=Sd,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var b=c[y];if(!(b[zr]||b[Tt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(o)||"";w=a+w;var _=d.get(w);_?_.push(b):d.set(w,[b])}}return d}function G1(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function Rj(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function H1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var cc=null;function Ij(){}function Lj(a,o,c){if(cc===null)throw Error(r(475));var d=cc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=Rs(c.href),b=a.querySelector(sc(y));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=Ad.bind(d),a.then(d,d)),o.state.loading|=4,o.instance=b,Ke(b);return}b=a.ownerDocument||a,c=B1(c),(y=Or.get(y))&&$m(c,y),b=b.createElement("link"),Ke(b);var w=b;w._p=new Promise(function(_,I){w.onload=_,w.onerror=I}),gn(b,"link",c),o.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=Ad.bind(d),a.addEventListener("load",o),a.addEventListener("error",o))}}function $j(){if(cc===null)throw Error(r(475));var a=cc;return a.stylesheets&&a.count===0&&Um(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&Um(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function Ad(){if(this.count--,this.count===0){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Ed=null;function Um(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Ed=new Map,o.forEach(Bj,a),Ed=null,Ad.call(a))}function Bj(a,o){if(!(o.state.loading&4)){var c=Ed.get(a);if(c)var d=c.get(null);else{c=new Map,Ed.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var w=y[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=o.instance,w=y.getAttribute("data-precedence"),b=c.get(w)||d,b===d&&c.set(null,y),c.set(w,y),this.count++,d=Ad.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var uc={$$typeof:T,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Uj(a,o,c,d,y,b,w,_){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.hiddenUpdates=va(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function q1(a,o,c,d,y,b,w,_,I,q,re,le){return a=new Uj(a,o,c,w,_,I,q,le),o=1,b===!0&&(o|=24),b=tr(3,null,null,o),a.current=b,b.stateNode=a,o=Sp(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},Pp(b),a}function Y1(a){return a?(a=hs,a):hs}function F1(a,o,c,d,y,b){y=Y1(y),d.context===null?d.context=y:d.pendingContext=y,d=fi(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=hi(a,d,o),c!==null&&(or(c,a,o),Ul(c,a,o))}function V1(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function zm(a,o){V1(a,o),(a=a.alternate)&&V1(a,o)}function K1(a){if(a.tag===13){var o=fs(a,67108864);o!==null&&or(o,a,67108864),zm(a,67108864)}}var Cd=!0;function zj(a,o,c,d){var y=L.T;L.T=null;var b=ee.p;try{ee.p=2,Gm(a,o,c,d)}finally{ee.p=b,L.T=y}}function Gj(a,o,c,d){var y=L.T;L.T=null;var b=ee.p;try{ee.p=8,Gm(a,o,c,d)}finally{ee.p=b,L.T=y}}function Gm(a,o,c,d){if(Cd){var y=Hm(d);if(y===null)_m(a,o,d,Pd,c),W1(a,d);else if(qj(y,a,o,c,d))d.stopPropagation();else if(W1(a,d),o&4&&-1<Hj.indexOf(a)){for(;y!==null;){var b=$n(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=gr(b.pendingLanes);if(w!==0){var _=b;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var I=1<<31-xn(w);_.entanglements[1]|=I,w&=~I}sa(b),(Je&6)===0&&(ld=dt()+500,rc(0))}}break;case 13:_=fs(b,2),_!==null&&or(_,b,2),ud(),zm(b,2)}if(b=Hm(d),b===null&&_m(a,o,d,Pd,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else _m(a,o,d,null,c)}}function Hm(a){return a=rs(a),qm(a)}var Pd=null;function qm(a){if(Pd=null,a=fn(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Pd=a,null}function X1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ur()){case ma:return 2;case Qo:return 8;case ri:case _h:return 32;case hl:return 268435456;default:return 32}default:return 32}}var Ym=!1,wi=null,Oi=null,Ti=null,dc=new Map,fc=new Map,_i=[],Hj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function W1(a,o){switch(a){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":dc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(o.pointerId)}}function hc(a,o,c,d,y,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},o!==null&&(o=$n(o),o!==null&&K1(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function qj(a,o,c,d,y){switch(o){case"focusin":return wi=hc(wi,a,o,c,d,y),!0;case"dragenter":return Oi=hc(Oi,a,o,c,d,y),!0;case"mouseover":return Ti=hc(Ti,a,o,c,d,y),!0;case"pointerover":var b=y.pointerId;return dc.set(b,hc(dc.get(b)||null,a,o,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,fc.set(b,hc(fc.get(b)||null,a,o,c,d,y)),!0}return!1}function Q1(a){var o=fn(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,xl(a.priority,function(){if(c.tag===13){var d=ir();d=Zo(d);var y=fs(c,d);y!==null&&or(y,c,d),zm(c,d)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function wd(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=Hm(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);br=d,c.target.dispatchEvent(d),br=null}else return o=$n(c),o!==null&&K1(o),a.blockedOn=c,!1;o.shift()}return!0}function Z1(a,o,c){wd(a)&&c.delete(o)}function Yj(){Ym=!1,wi!==null&&wd(wi)&&(wi=null),Oi!==null&&wd(Oi)&&(Oi=null),Ti!==null&&wd(Ti)&&(Ti=null),dc.forEach(Z1),fc.forEach(Z1)}function Od(a,o){a.blockedOn===o&&(a.blockedOn=null,Ym||(Ym=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yj)))}var Td=null;function J1(a){Td!==a&&(Td=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Td===a&&(Td=null);for(var o=0;o<a.length;o+=3){var c=a[o],d=a[o+1],y=a[o+2];if(typeof d!="function"){if(qm(d||c)===null)continue;break}var b=$n(c);b!==null&&(a.splice(o,3),o-=3,qp(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function pc(a){function o(I){return Od(I,a)}wi!==null&&Od(wi,a),Oi!==null&&Od(Oi,a),Ti!==null&&Od(Ti,a),dc.forEach(o),fc.forEach(o);for(var c=0;c<_i.length;c++){var d=_i[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<_i.length&&(c=_i[0],c.blockedOn===null);)Q1(c),c.blockedOn===null&&_i.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],w=y[kt]||null;if(typeof b=="function")w||J1(c);else if(w){var _=null;if(b&&b.hasAttribute("formAction")){if(y=b,w=b[kt]||null)_=w.formAction;else if(qm(y)!==null)continue}else _=w.action;typeof _=="function"?c[d+1]=_:(c.splice(d,3),d-=3),J1(c)}}}function Fm(a){this._internalRoot=a}_d.prototype.render=Fm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=ir();F1(c,d,a,o,null,null)},_d.prototype.unmount=Fm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;F1(a.current,2,null,a,null,null),ud(),o[ba]=null}};function _d(a){this._internalRoot=a}_d.prototype.unstable_scheduleHydration=function(a){if(a){var o=bl();a={blockedOn:null,target:a,priority:o};for(var c=0;c<_i.length&&o!==0&&o<_i[c].priority;c++);_i.splice(c,0,a),c===0&&Q1(a)}};var eA=t.version;if(eA!=="19.1.1")throw Error(r(527,eA,"19.1.1"));ee.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(o),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Fj={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{Be=Dd.inject(Fj),qe=Dd}catch{}}return gc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,d="",y=gS,b=yS,w=vS,_=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks)),o=q1(a,1,!1,null,null,c,d,y,b,w,_,null),a[ba]=o.current,Tm(a),new Fm(o)},gc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var d=!1,y="",b=gS,w=yS,_=vS,I=null,q=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(I=c.unstable_transitionCallbacks),c.formState!==void 0&&(q=c.formState)),o=q1(a,1,!0,o,c??null,d,y,b,w,_,I,q),o.context=Y1(null),c=o.current,d=ir(),d=Zo(d),y=fi(d),y.callback=null,hi(c,y,d),c=d,o.current.lanes=c,Kn(o,c),sa(o),a[ba]=o.current,Tm(a),new _d(o)},gc.version="19.1.1",gc}var uA;function nM(){if(uA)return Xm.exports;uA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Xm.exports=tM(),Xm.exports}var rM=nM();const aM=Xr(rM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),dA=e=>{const t=oM(e);return t.charAt(0).toUpperCase()+t.slice(1)},Bw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),sM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},h)=>E.createElement("svg",{ref:h,...lM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Bw("lucide",i),...!s&&!sM(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,p])=>E.createElement(f,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(e,t)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(cM,{ref:s,iconNode:t,className:Bw(`lucide-${iM(dA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=dA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Ic=xt("bolt",uM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],fM=xt("bomb",dM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pM=xt("chevron-down",hM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fA=xt("chevron-right",mM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Nc=xt("chevron-up",gM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uw=xt("clock",yM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],zw=xt("copy",vM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],hA=xt("cpu",bM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],SM=xt("download",xM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pA=xt("eye",AM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],CM=xt("hand",EM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zv=xt("loader-circle",PM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Iy=xt("rocket",wM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],TM=xt("rotate-ccw",OM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mA=xt("settings",_M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Vd=xt("shield-check",DM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Jm=xt("shield",NM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],MM=xt("skull",jM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Ly=xt("sword",kM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],IM=xt("target",RM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$M=xt("upload",LM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Gw=xt("user",BM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],gA=xt("wrench",UM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Wt=xt("x",zM),_n=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",icon:Jm,effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",icon:fM,effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",icon:gA,targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:2,image:"/img/Interceptor.png",abilities:[{name:"Vigilant",description:"Can always intercept attacks in this lane, regardless of speed.",type:"PASSIVE",icon:Vd,effect:{type:"GRANT_KEYWORD",keyword:"ALWAYS_INTERCEPTS"}},{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",icon:Jm,effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",icon:Jm,scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",icon:MM,effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",icon:IM,targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",icon:Ly,effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",icon:Nc,effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",icon:Ly,effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",icon:fA,effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",icon:fA,effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",icon:gA,targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],GM=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD022",baseCardId:"CARD022",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD023",baseCardId:"CARD023",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],yA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},Li=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Qa=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=Li(l),h={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const p in l.middleLaneBonus)h.hasOwnProperty(p)&&(h[p]+=l.middleLaneBonus[p]);r[s]=h}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},kr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=_n.find(g=>g.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,h=s.speed,f=s.shields,p=s.class;l.forEach(g=>{g.mod.stat==="attack"&&(u+=g.mod.value),g.mod.stat==="speed"&&(h+=g.mod.value),g.mod.stat==="shields"&&(f+=g.mod.value),g.mod.stat==="cost"&&(p+=g.mod.value)}),p=Math.max(0,p);let m={...e,attack:u,speed:h,maxShields:f,cost:p,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(g=>{g.stat==="attack"&&(m.attack+=g.value),g.stat==="speed"&&(m.speed+=g.value),g.stat==="cost"&&(m.cost=Math.max(0,m.cost+g.value))}),s.abilities?.forEach(g=>{if(g.type==="PASSIVE"){if(g.effect.type==="GRANT_KEYWORD"&&m.keywords.add(g.effect.keyword),g.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:x,mod:S}=g.effect;let A=!1;if(x.type==="SHIP_SECTION_HULL_DAMAGED"&&x.location==="SAME_LANE"){const C=parseInt(t.slice(-1))-1,O=(n.name==="Player 1"?i.player1:i.player2)[C];if(O){const T=n.shipSections[O],j=Li(T);(j==="damaged"||j==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(m.attack+=S.value)}if(g.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:x,mod:S}=g.effect;let A=0;if(x.type==="OWN_DAMAGED_SECTIONS")for(const C in n.shipSections){const P=n.shipSections[C],O=Li(P);(O==="damaged"||O==="critical")&&A++}A>0&&(S.stat==="attack"&&(m.attack+=S.value*A),S.stat==="speed"&&(m.speed+=S.value*A))}g.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+g.effect.value),g.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&g.effect.mods.forEach(x=>{x.stat==="attack"&&(m.attack+=x.value),x.stat==="speed"&&(m.speed+=x.value)})}}),n.dronesOnBoard[t]?.forEach(g=>{if(g.id===e.id)return;_n.find(S=>S.name===g.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:C}=S.effect;A==="shields"?m.maxShields+=C:A==="attack"?m.attack+=C:A==="speed"&&(m.speed+=C)}})}),l.forEach(g=>{g.grantedAbilities&&g.grantedAbilities.forEach(x=>{if(x.type==="PASSIVE"&&(x.effect.type==="GRANT_KEYWORD"&&m.keywords.add(x.effect.keyword),x.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=x.effect;S==="attack"&&(m.attack+=A),S==="speed"&&(m.speed+=A),S==="shields"&&(m.maxShields+=A)}})}),m},HM=(e,t)=>({...e,instanceId:t}),$s=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],Hw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=GM.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(HM(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},Gv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},qM=(e,t)=>{const n=Qa({shipSections:yA},[]).totals;return{name:e,shipSections:yA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:Hw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Lc=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},qw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},nl=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=kr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},pa=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},jc=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],f=!(typeof n.cost=="number"),{type:p,affinity:m,location:g,custom:x}=n.targeting;let S=null;if(f&&Object.values(s.dronesOnBoard).flat().some(O=>O.id===t.id)&&(S=pa(t.id,s),!S))return[];const A=(P,O)=>{Object.entries(P.dronesOnBoard).forEach(([T,j])=>{let N=!1;g==="ANY_LANE"&&(N=!0),f&&g==="SAME_LANE"&&(N=T===S),N&&j.forEach(D=>{let M=!0;if(x?.includes("DAMAGED_HULL")){const R=_n.find(U=>U.name===D.name);(!R||D.hull>=R.hull)&&(M=!1)}x?.includes("EXHAUSTED")&&(D.isExhausted||(M=!1)),M&&u.push({...D,lane:T,owner:O})})})},C=(P,O)=>{Object.keys(P.shipSections).forEach(T=>{u.push({id:T,owner:O,...P.shipSections[T]})})};if(p==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(s,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(p==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&C(s,e),(m==="ENEMY"||m==="ANY")&&C(l,e==="player1"?"player2":"player1");else if(p==="LANE")["lane1","lane2","lane3"].forEach(P=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:P,owner:e}),m==="ENEMY"||m==="ANY"){const O=e==="player1"?"player2":"player1";u.push({id:P,owner:O})}});else if(p==="DRONE_CARD"){const P=e==="player1"?r:i;P.activeDronePool.forEach(O=>{const T=_n.find(M=>M.name===O.name),j=P.appliedUpgrades[O.name]||[],N=j.filter(M=>M.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;T&&j.length<T.upgradeSlots&&N<D&&u.push({...O,id:O.name,owner:e})})}else if(p==="APPLIED_UPGRADE"){const P=m==="ENEMY"?l:s,O=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(P.dronesOnBoard).flat().forEach(T=>{(P.appliedUpgrades[T.name]||[]).length>0&&u.push({...T,owner:O})})}return u},Yw=(e,t,n,r,i)=>{const s=_n.find(f=>f.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const h=s.abilities.filter(f=>f.type==="TRIGGERED"&&f.trigger==="ON_MOVE");if(h.length>0){const f=l.dronesOnBoard[r].findIndex(p=>p.id===t.id);if(f!==-1){const p=l.dronesOnBoard[r][f];h.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),p.statMods||(p.statMods=[]),m.effects?.forEach(g=>{g.type==="PERMANENT_STAT_MOD"&&(u=!0,p.statMods.push(g.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${g.mod.value} ${g.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},Fw=(e,t)=>{const n=_n.find(u=>u.name===t.name);if(!n?.abilities)return{newState:e,effects:[]};let r=JSON.parse(JSON.stringify(e));const i=[];let s=!1;return n.abilities.filter(u=>u.effect?.type==="AFTER_ATTACK").forEach(u=>{const{subEffect:h}=u.effect;if(h.type==="DESTROY_SELF")for(const f in r.dronesOnBoard){const p=r.dronesOnBoard[f].findIndex(m=>m.id===t.id);if(p!==-1){s=!0;const m=r.dronesOnBoard[f][p];i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', destroying itself.`}}),i.push({type:"EXPLOSION",payload:{targetId:t.id}}),r.dronesOnBoard[f]=r.dronesOnBoard[f].filter(g=>g.id!==t.id),Object.assign(r,Lc(r,m));break}}else if(h.type==="PERMANENT_STAT_MOD")for(const f in r.dronesOnBoard){const p=r.dronesOnBoard[f].findIndex(m=>m.id===t.id);if(p!==-1){s=!0,r.dronesOnBoard[f][p].statMods||(r.dronesOnBoard[f][p].statMods=[]),i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', gaining a permanent +${h.mod.value} ${h.mod.stat}.`}}),r.dronesOnBoard[f][p].statMods.push(h.mod);break}}}),{newState:s?r:e,effects:i}},$y=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>Li(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},Vw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=_n.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const h=t.class;let f=0,p=0;return n===1?(p=Math.min(e.initialDeploymentBudget,h),f=h-p):(p=Math.min(e.deploymentBudget,h),f=h-p),e.energy<f?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${f} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:p,energyCost:f}},Kw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},Hv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=Gv(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},YM=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},FM=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")Kw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=Hv(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},VM=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Hv(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},KM=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Qa(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(h=>{l[h]={...n.shipSections[h],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},XM=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,h=Qa(s,l).totals.shieldsPerTurn,f=JSON.parse(JSON.stringify(s.shipSections)),p=Object.keys(f);let m=h,g=0,x=0;for(;m>0&&x<100;){const P=p[g%p.length],O=f[P],T=Gv(P,s,l);O.allocatedShields<T&&(O.allocatedShields++,m--),g++,x++}const S={...s,shipSections:f},C={success:!0,newPhase:"deployment",firstPlayer:Ff(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(C.player1State=i,C.player2State=S):(C.player1State=S,C.player2State=i),C},WM=(e,t,n,r,i,s,l)=>{const{effect:u,cost:h}=e,f=r.player1;let p="",m="Ability effect applied.";e.targeting?.type==="LANE"?p=`Lane ${n.id.slice(-1)}`:n&&(p=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${p}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${p}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${p}.`),s&&s({player:f.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:p,outcome:m});const g={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(h.energy&&(g.player1.energy-=h.energy),h.exhausts)for(const A in g.player1.dronesOnBoard){const C=g.player1.dronesOnBoard[A].findIndex(P=>P.id===t.id);if(C!==-1){g.player1.dronesOnBoard[A][C].isExhausted=!0;break}}const x=tO(u,t,n,g,i,{resolveAttackCallback:l});g.player1=x.newPlayerStates.player1,g.player2=x.newPlayerStates.player2;const S=x.animationEvents||[];return{newPlayerStates:g,shouldEndTurn:!u.goAgain,animationEvents:S}},QM=(e,t,n,r,i,s,l)=>{const{cost:u,effect:h}=e,f=r.player1;s&&s({player:f.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const p={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.player1.energy-=u.energy,h.type==="REALLOCATE_SHIELDS")return{newPlayerStates:p,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:[]};{const m=nO(h,t,n,p,i,{resolveAttackCallback:l});p.player1=m.newPlayerStates.player1,p.player2=m.newPlayerStates.player2;const g=m.animationEvents||[];return m.needsDiscardSelection?{newPlayerStates:p,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0},animationEvents:g}:{newPlayerStates:p,shouldEndTurn:!0,animationEvents:g}}},Xw=(e,t,n,r,i,s,l)=>{const u=Vw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Qa(r,s.player1));if(!u.isValid)return{success:!1,error:u.reason,message:u.message,newPlayerState:r};const{budgetCost:h,energyCost:f}=u;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const p=JSON.parse(JSON.stringify(r)),m={...p.dronesOnBoard,[t]:[...p.dronesOnBoard[t],{...e,id:0}]},g={...p,dronesOnBoard:m},x=kr(e,t,g,i,s),S={...e,id:Date.now(),statMods:[],currentShields:x.maxShields,currentMaxShields:x.maxShields,hull:e.hull,isExhausted:!1};return p.dronesOnBoard[t].push(S),p.deployedDroneCounts={...p.deployedDroneCounts,[e.name]:(p.deployedDroneCounts[e.name]||0)+1},n===1?p.initialDeploymentBudget-=h:p.deploymentBudget-=h,p.energy-=f,p.dronesOnBoard=nl(p,i,s),{success:!0,newPlayerState:p,deployedDrone:S}},ZM=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return $y(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):$y(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},JM=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=pa(e.id,t);if(!i)return[];const s=kr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(h=>{const f=kr(h,i,n,t,r);return!h.isExhausted&&(f.speed>s.speed||f.keywords.has("ALWAYS_INTERCEPTS"))}).map(h=>h.id)},ek=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,h=e.class;let f=0;n===1?f=Math.min(r.initialDeploymentBudget,h):f=Math.min(r.deploymentBudget,h);const p=h-f;if(r.energy<p)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let g={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-f:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-f:r.deploymentBudget,energy:r.energy-p};return g.dronesOnBoard=nl(g,i,s),{success:!0,newPlayerState:g,deployedDrone:m,costs:{energy:p,budget:f}}},tk=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l}=e,u=kr(r,l,t.player2,t.player1,n),h=t.player1.dronesOnBoard[l].filter(f=>{const p=kr(f,l,t.player1,t.player2,n);return!f.isExhausted&&(p.speed>u.speed||p.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||f.id!==i.id)});return{hasInterceptors:h.length>0,interceptors:h,attackDetails:e}},qv=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},nk=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},rk=(e,t)=>{const n=qv(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},ak=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=Ff(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},ik=(e,t,n,r)=>{const i=By(e.player1,t,n,e.player2,e.placedSections),s=By(e.player2,t,r,e.player1,e.opponentPlacedSections),l=Uy(i,n.totals.handLimit),u=Uy(s,r.totals.handLimit),h=Ff(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),f={...e,turn:t,turnPhase:"deployment",currentPlayer:h,firstPlayerOfRound:h,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},p=[{type:"ROUND_START",turn:t,firstPlayer:h},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:f,uiEffects:p}},Ww=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=kr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},By=(e,t,n,r,i)=>({...Ww(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),Uy=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},ok=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:h,opponentPlacedSections:f}=e,{addLogEntry:p,setPlayer2:m,setPendingAttack:g,endTurn:x,endDeploymentPhase:S,endActionPhase:A,setPassInfo:C}=n;let P;return l==="deployment"&&!u.player2Passed?P=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:f,placedSections:h,getShipStatus:Li,calculateEffectiveShipStats:Qa,calculateEffectiveStats:kr,addLogEntry:p}):l==="action"&&!u.player2Passed&&(P=t.handleOpponentAction({player1:r,player2:i,placedSections:h,opponentPlacedSections:f,getShipStatus:Li,getLaneOfDrone:pa,getValidTargets:jc,calculateEffectiveStats:kr,addLogEntry:p})),P||null},sk=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:h}=t,{addLogEntry:f,setPlayer2:p,setPendingAttack:m,endTurn:g,endDeploymentPhase:x,endActionPhase:S,setPassInfo:A,resolveCardPlay:C}=n;if(e.type==="pass"){const P=!t.passInfo.player1Passed,O={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(P?"player2":null)};return A(O),O.player1Passed?l==="deployment"?x():l==="action"&&S():g("player2"),{newPassInfo:O}}else if(e.type==="deploy"){const{droneToDeploy:P,targetLane:O,logContext:T}=e.payload;f({player:i.name,actionType:"DEPLOY",source:P.name,target:O,outcome:`Deployed to ${O}.`},"aiDeploymentDeploy",T);const j=Xw(P,O,i,r,s,{player1:u,player2:h});return j.success&&(p(j.newPlayerState),g("player2")),{deployedDrone:j.deployedDrone}}else if(e.type==="action"){const P=e.payload,{logContext:O}=e;switch(P.type){case"play_card":C(P.card,P.target,"player2",O);break;case"attack":m({attacker:P.attacker,target:P.target,targetType:P.targetType,lane:P.attacker.lane,attackingPlayer:"player2",aiContext:O});break;case"move":{const{drone:T,fromLane:j,toLane:N}=P;f({player:i.name,actionType:"MOVE",source:T.name,target:N,outcome:`Moved from ${j} to ${N}.`},"aiActionMove",O);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[j]=D.dronesOnBoard[j].filter(U=>U.id!==T.id);const M={...T,isExhausted:!0};D.dronesOnBoard[N].push(M);const{newState:R}=Yw(D,M,j,N,f);R.dronesOnBoard=nl(R,r,{player1:u,player2:h}),p(R),g("player2");break}default:g("player2");break}return{action:P}}return null},lk=(e,t,n,r,i,s,l,u)=>{const{cost:h,effect:f}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=h,x.hand=x.hand.filter(P=>P.instanceId!==e.instanceId),x.discardPile.push(e);const S=new Set(t.map(P=>P.id));x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(P=>!S.has(P.id));const A=t.map(P=>({...P,isExhausted:P.isExhausted||!f.properties?.includes("DO_NOT_EXHAUST")}));x.dronesOnBoard[r].push(...A),p({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(P=>P.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let C=x;return A.forEach(P=>{const{newState:O}=m(C,P,n,r,p);C=O}),C.dronesOnBoard=g(C,s,l),{newPlayerState:C,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},ck=(e,t,n,r,i,s,l,u)=>{const{cost:h,effect:f}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=h,x.hand=x.hand.filter(C=>C.instanceId!==e.instanceId),x.discardPile.push(e),x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(C=>C.id!==t.id);const S={...t,isExhausted:f.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};x.dronesOnBoard[r].push(S),p({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(x,S,n,r,p);return A.dronesOnBoard=g(A,s,l),{newPlayerState:A,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},uk=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Qw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=Li(i);(s==="damaged"||s==="critical")&&n++}return n},dk=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:h,resolveAttackCallback:f}=s,p=t?t.name||t.id:"N/A";let m="Card effect applied.";const g=e.effect;if(g.type==="DRAW"&&(m=`Drew ${g.value} card(s).`),g.type==="GAIN_ENERGY"&&(m=`Gained ${g.value} energy.`),g.type==="HEAL_HULL"&&(m=`Healed ${g.value} hull on ${p}.`),g.type==="HEAL_SHIELDS"&&(m=`Healed ${g.value} shields on ${p}.`),g.type==="READY_DRONE"&&(m=`Readied ${p}.`),g.type==="DAMAGE"&&(g.scope==="FILTERED"?m=`Dealt ${g.value} damage to filtered targets in ${p}.`:m=`Dealt ${g.value} damage to ${p}.`),g.type==="MODIFY_STAT"){const C=g.mod,P=C.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${p} a ${C.value>0?"+":""}${C.value} ${C.stat} bonus${P}.`}if(g.type==="REPEATING_EFFECT"){const C=r[n],P=Qw(g.condition,C);m=`Drew ${P} card(s) and gained ${P} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:p,outcome:m});let x=uk(e,n,r);const S=fk(e.effect,t,n,x,i,s,e),A=[];if(e.visualEffect&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",targetId:t?.id,duration:e.visualEffect.duration||800,timestamp:Date.now()}),S.animationEvents&&A.push(...S.animationEvents),console.log("[ANIMATION EVENTS] resolveCardPlay emitted:",A),!S.needsCardSelection){const C=Zw(e,n,S.newPlayerStates);return{newPlayerStates:C.newPlayerStates,shouldEndTurn:C.shouldEndTurn,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:!1}}return{newPlayerStates:x,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:S.needsCardSelection}},Zw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},fk=(e,t,n,r,i,s,l=null)=>e.effects?hk(e,t,n,r,i,s,l):Jw(e,t,n,r,i,s,l),hk=(e,t,n,r,i,s,l=null)=>{let u=r,h=[];if(e.type==="REPEATING_EFFECT"){const f=Qw(e.condition,u[n]);for(let p=0;p<f;p++)for(const m of e.effects){const g=Jw(m,t,n,u,i,s,l);u=g.newPlayerStates,g.additionalEffects&&h.push(...g.additionalEffects)}}return{newPlayerStates:u,additionalEffects:h}},Jw=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return Fv(e,null,t,n,r);case"SEARCH_AND_DRAW":return eO(e,null,t,n,r);case"GAIN_ENERGY":return pk(e,n,r,i);case"READY_DRONE":return mk(e,t,n,r);case"HEAL_HULL":return Yv(e,null,t,n,r);case"HEAL_SHIELDS":return gk(e,t,n,r);case"DAMAGE":return Yf(e,null,t,n,r,i,s,l);case"DESTROY":return vk(e,t,n,r);case"MODIFY_STAT":return bk(e,t,n,r);case"MODIFY_DRONE_BASE":return xk(e,t,n,r);case"DESTROY_UPGRADE":return Sk(e,t,n,r);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},pk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,h=Qa(l,u).totals,f=Math.min(h.maxEnergy,l.energy+e.value);return l.energy=f,{newPlayerStates:s,additionalEffects:[]}},mk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const h=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(h!==-1){l.dronesOnBoard[u][h].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},gk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n];for(const u in l.dronesOnBoard){const h=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(h!==-1){const f=l.dronesOnBoard[u][h];f.currentShields=Math.min(f.currentMaxShields||f.shields,f.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},yk=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,f=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[f].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${f} ${u}`),console.log(`[DEBUG] Drones in ${f} ${u}:`,m.map(T=>`${T.name}(${T.id}) [${T.hull}hp, ${T.speed}spd]`));const{stat:g,comparison:x,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},P=A[f].dronesOnBoard[u]||[];for(let T=P.length-1;T>=0;T--){const j=P[T];let N=!1;if(x==="GTE"&&j[g]>=S&&(N=!0),x==="LTE"&&j[g]<=S&&(N=!0),console.log(`[DEBUG] ${j.name} ${g}=${j[g]} ${x} ${S} = ${N}`),N){console.log(`[DEBUG] Applying ${e.value} damage to ${j.name}`);const D=j.currentShields||0;let M=e.value;const R=Math.min(M,D);j.currentShields=(j.currentShields||0)-R,M-=R,M>0&&(j.hull-=M),j.hull<=0&&(console.log(`[DEBUG] ${j.name} destroyed`),P.splice(T,1))}}const O=[];for(const T of m){const j=P.find(D=>D.id===T.id);let N=!1;if(x==="GTE"&&T[g]>=S&&(N=!0),x==="LTE"&&T[g]<=S&&(N=!0),N){const D=T.currentShields||0,M=Math.min(e.value,D),R=e.value-M;M>0&&O.push({type:"SHIELD_DAMAGE",targetId:T.id,amount:M,timestamp:Date.now()}),j?R>0&&O.push({type:"HULL_DAMAGE",targetId:T.id,amount:R,timestamp:Date.now()}):O.push({type:"DRONE_DESTROYED",targetId:T.id,timestamp:Date.now()})}}return{newPlayerStates:A,additionalEffects:[],animationEvents:O}}else{const u=r[t.owner],h=pa(t.id,u);if(h){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const f={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=f[t.owner].dronesOnBoard[h]||[],g=m.find(x=>x.id===t.id);if(g){let x=e.value,S=0,A=x;if(e.damageType!=="PIERCING"&&(S=Math.min(x,g.currentShields),A-=S,g.currentShields-=S),g.hull-=A,console.log(`[DEBUG] Applied ${A} hull damage to ${g.name} (${g.hull} hull remaining)`),g.hull<=0){console.log(`[DEBUG] ${g.name} destroyed`);const P=m.findIndex(O=>O.id===t.id);P>=0&&m.splice(P,1)}const C=[];return S>0&&C.push({type:"SHIELD_DAMAGE",targetId:t.id,amount:S,timestamp:Date.now()}),g.hull<=0?C.push({type:"DRONE_DESTROYED",targetId:t.id,timestamp:Date.now()}):A>0&&C.push({type:"HULL_DAMAGE",targetId:t.id,amount:A,timestamp:Date.now()}),{newPlayerStates:f,additionalEffects:[],animationEvents:C}}return{newPlayerStates:f,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},vk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],h=[];if(e.scope==="LANE"&&t.id){const f=t.id;(u.dronesOnBoard[f]||[]).forEach(m=>{h.push({type:"EXPLOSION",payload:{targetId:m.id}});const g=Lc(u,m);u.deployedDroneCounts={...u.deployedDroneCounts||{},...g.deployedDroneCounts}}),u.dronesOnBoard[f]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const f=pa(t.id,u);if(f){const p=u.dronesOnBoard[f].find(m=>m.id===t.id);if(p){h.push({type:"EXPLOSION",payload:{targetId:p.id}});const m=Lc(u,p);u.deployedDroneCounts={...u.deployedDroneCounts||{},...m.deployedDroneCounts},u.dronesOnBoard[f]=u.dronesOnBoard[f].filter(g=>g.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:h}},bk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const h=t.id;l.dronesOnBoard[h]&&l.dronesOnBoard[h].forEach(f=>{f.statMods||(f.statMods=[]),f.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const h in l.dronesOnBoard){const f=l.dronesOnBoard[h].findIndex(p=>p.id===t.id);if(f!==-1){const p=l.dronesOnBoard[h][f];p.statMods||(p.statMods=[]),p.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},xk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,h=l.appliedUpgrades[u]||[],f={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(f.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...h,f]},{newPlayerStates:s,additionalEffects:[]}},Sk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:h,instanceId:f}=t;if(u.appliedUpgrades[h]){const p=u.appliedUpgrades[h].filter(m=>m.instanceId!==f);p.length>0?u.appliedUpgrades[h]=p:delete u.appliedUpgrades[h]}return{newPlayerStates:s,additionalEffects:[]}},Yf=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:h}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return yk(e,n,r,i,l,u?.targeting);const f=n.owner==="player1"?i.player1:i.player2,p=pa(n.id,f);if(p&&h){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:p,damageType:e.damageType},g=aO(m,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:g.newPlayerStates,additionalEffects:g.afterAttackEffects||[],animationEvents:g.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},Yv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},h=r||"player1";if(e.scope==="LANE"){const f=n.id;u[h].dronesOnBoard[f]&&u[h].dronesOnBoard[f].forEach(p=>{const m=_n.find(g=>g.name===p.name);m&&p.hull<m.hull&&(p.hull=Math.min(m.hull,p.hull+e.value))})}else{const f=_n.find(m=>m.name===n.name),p=pa(n.id,u[h]);if(p){const m=u[h].dronesOnBoard[p].findIndex(g=>g.id===n.id);m!==-1&&(u[h].dronesOnBoard[p][m].hull=Math.min(f.hull,u[h].dronesOnBoard[p][m].hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},Fv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},h=r||"player1",f=u[h];let p=[...f.deck],m=[...f.hand],g=[...f.discardPile];const x=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<x;A++){if(p.length===0)if(g.length>0)p=[...g].sort(()=>.5-Math.random()),g=[];else break;p.length>0&&m.push(p.pop())}u[h]={...f,deck:p,hand:m,discardPile:g};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},Ak=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),eO=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},h=r||"player1",f=u[h];let p=[...f.deck],m=[...f.discardPile],g,x;if(e.filter)p.length===0&&m.length>0&&(p=[...m.sort(()=>.5-Math.random())],m=[]),g=p.filter(A=>Ak(A,e.filter)).slice(0,e.searchCount),x=p.filter(A=>!g.includes(A));else{const S=e.searchCount;p.length<S&&m.length>0&&(p=[...p,...m.sort(()=>.5-Math.random())],m=[]),g=p.slice(-e.searchCount).reverse(),x=p.slice(0,-e.searchCount)}if(h==="player2"){const S=Ek(g,e.drawCount,u),A=g.filter(O=>!S.includes(O)),C=[...f.hand,...S];let P=[...x,...A];return e.shuffleAfter&&(P=P.sort(()=>.5-Math.random())),u[h]={...f,deck:P,hand:C,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:g,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:x,discardPile:m,filter:e.filter}}},Ek=(e,t,n,r)=>e.map(s=>({card:s,score:Ck(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),Ck=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},tO=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return Yv(e,t,n,"player1",r);case"DAMAGE":return Yf(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},nO=(e,t,n,r,i,s)=>{const l={name:t};switch(e.type){case"DAMAGE":return Yf(e,l,n,"player1",r,i,s);case"RECALL_DRONE":return rO(e,t,n,r,i);case"DRAW_THEN_DISCARD":return Fv(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},rO=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=pa(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(h=>h.id!==n.id),Object.assign(l.player1,qw(l.player1,n)),l.player1.dronesOnBoard=nl(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[],animationEvents:[]}},aO=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:h,interceptor:f,attackingPlayer:p,abilityDamage:m,goAgain:g,damageType:x,lane:S}=e,A=m!==void 0,C=f||u,P=f?"drone":h,O=p,T=C.owner||(O==="player1"?"player2":"player1"),j=t[O],N=t[T];let D=null,M=null;!A&&l&&l.id&&(D=pa(l.id,j),M=kr(l,D,j,N,n));let R=m??(M?Math.max(0,M.attack):0),U=x||(l?l.damageType:void 0);M&&M.keywords&&M.keywords.has("PIERCING")&&(U="PIERCING"),P==="section"&&!m&&l&&l.name&&_n.find(ne=>ne.name===l.name)?.abilities?.forEach(ne=>{ne.type==="PASSIVE"&&ne.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(R+=ne.effect.value)});let W=0,Y=0,J=!1,ce=0,se=0;if(P==="drone"){let F=null;for(const ne in N.dronesOnBoard)if(F=N.dronesOnBoard[ne].find(me=>me.id===C.id),F)break;if(F){let ne=R;U!=="PIERCING"&&(W=Math.min(R,F.currentShields),ne-=W),Y=Math.min(ne,F.hull),J=F.hull-Y<=0,ce=F.currentShields-W,se=J?0:F.hull-Y}}else{const F=N.shipSections[C.name];if(F){let ne=R;U!=="PIERCING"&&(W=Math.min(R,F.allocatedShields),ne-=W),Y=Math.min(ne,F.hull),J=F.hull-Y<=0,ce=F.allocatedShields-W,se=J?0:F.hull-Y}}const te=`Dealt ${W} shield and ${Y} hull damage to ${C.name}.`+(P==="drone"?J?` ${C.name} Destroyed.`:` ${C.name} has ${ce} shields and ${se} hull left.`:""),L=[];l&&l.id&&!A&&L.push({type:"DRONE_ATTACK_START",sourceId:l.id,targetId:C.id,timestamp:Date.now()}),W>0&&L.push({type:"SHIELD_DAMAGE",targetId:C.id,amount:W,timestamp:Date.now()}),J?L.push({type:P==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:C.id,timestamp:Date.now()}):(Y>0&&L.push({type:"HULL_DAMAGE",targetId:C.id,amount:Y,timestamp:Date.now()}),P==="section"&&(W>0||Y>0)&&L.push({type:"SECTION_DAMAGED",targetId:C.id,timestamp:Date.now()}),l&&l.id&&!A&&L.push({type:"DRONE_RETURN",sourceId:l.id,timestamp:Date.now()})),console.log("[ANIMATION EVENTS] resolveAttack emitted:",L);const ee=D||(S?S.replace("lane","Lane "):null),he=P==="drone"?`${C.name} (${ee})`:C.name,Se=l&&l.name?`${l.name} (${ee})`:"Card Effect";r&&r({player:t[O].name,actionType:"ATTACK",source:Se,target:he,outcome:te});const k={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};let Z=[];if(P==="drone"){let F=!1;for(const ne in k[T].dronesOnBoard){const me=k[T].dronesOnBoard[ne].findIndex(z=>z.id===C.id);if(me!==-1){if(k[T].dronesOnBoard[ne][me].hull-Y<=0){F=!0,Z.push({type:"EXPLOSION",payload:{targetId:C.id}});const z=k[T].dronesOnBoard[ne][me];k[T].dronesOnBoard[ne]=k[T].dronesOnBoard[ne].filter(ae=>ae.id!==C.id),Object.assign(k[T],Lc(k[T],z))}else Z.push({type:"HIT_ANIMATION",payload:{targetId:C.id}}),k[T].dronesOnBoard[ne][me].hull-=Y,k[T].dronesOnBoard[ne][me].currentShields-=W;break}}if(F){const ne=T==="player1"?k.player2:k.player1;k[T].dronesOnBoard=nl(k[T],ne,n)}}else{k[T].shipSections[C.name].hull-=Y,k[T].shipSections[C.name].allocatedShields-=W;const F=T==="player1"?n.player1:n.player2,ne=Qa(k[T],F).totals;k[T].energy>ne.maxEnergy&&(k[T].energy=ne.maxEnergy)}if(!A&&l&&l.id){let F=!1;for(const ne in k[O].dronesOnBoard){const me=k[O].dronesOnBoard[ne].findIndex(z=>z.id===l.id);if(me!==-1){k[O].dronesOnBoard[ne][me].isExhausted=!0,F=!0;break}}if(F){const ne=Fw(k[O],l);k[O]=ne.newState,Z=[...Z,...ne.effects]}}if(f){const F=O==="player1"?"player2":"player1";for(const ne in k[F].dronesOnBoard){const me=k[F].dronesOnBoard[ne].findIndex(z=>z.id===f.id);if(me!==-1){kr(k[F].dronesOnBoard[ne][me],ne,k[F],k[O],n).keywords.has("DEFENDER")||(k[F].dronesOnBoard[ne][me].isExhausted=!0);break}}}return{newPlayerStates:k,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:D||S,targetName:C.name,targetType:P,interceptorName:f?f.name:null,shieldDamage:W,hullDamage:Y,wasDestroyed:J,remainingShields:ce,remainingHull:se,outcome:te,shouldEndTurn:!g},afterAttackEffects:Z,animationEvents:L}},Pk=(e,t)=>{const n=Qa(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},Ff=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),wk=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},Ok=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},Tk=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},_k=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},Dk=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(h=>h.instanceId===l.instanceId||h.name===l.name&&h.id===l.id);if(u!==-1&&s<t){const h=r.splice(u,1)[0];i.push(h),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),h=r.splice(u,1)[0];i.push(h),s++}return{...e,hand:r,discardPile:i,discardCount:s}},iO=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const h=parseInt(u.replace("lane",""),10);Math.abs(l-h)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const h=parseInt(u.replace("lane",""),10);Math.abs(l-h)===1&&s.push({id:u,owner:"player1"})})}return s},oO=(e,t)=>t.activeDronePool.map(n=>{const r=_n.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),sO=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},Nk=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=jc("player1",e.drone,e.ability,i,s):t?l=jc("player1",{id:t.sectionName},t.ability,i,s):n?u=iO(n,i):r&&(r.type==="Upgrade"?u=oO(r,i):r.effect.type==="MULTI_MOVE"?u=sO(n,i):u=jc("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},jk=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),Mk=(e,t,n,r)=>{const i=qv(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},ke={initialPlayerState:qM,buildDeckFromList:Hw,getEffectiveSectionMaxShields:Gv,getShipStatus:Li,onDroneDestroyed:Lc,onDroneRecalled:qw,checkWinCondition:$y,calculateAfterAttackStateAndEffects:Fw,applyOnMoveEffects:Yw,updateAuras:nl,getLaneOfDrone:pa,getValidTargets:jc,calculateAllValidTargets:Nk,calculateMultiSelectTargets:iO,calculateUpgradeTargets:oO,calculateMultiMoveTargets:sO,validateDeployment:Vw,validateShieldRemoval:Kw,validateShieldAddition:Hv,executeShieldReallocation:YM,getValidShieldReallocationTargets:FM,processShieldAllocation:VM,processResetShieldAllocation:KM,processEndShieldAllocation:XM,resolveAttack:aO,resolveAbility:WM,resolveShipAbility:QM,executeDeployment:Xw,resolveCardPlay:dk,finishCardPlay:Zw,resolveMultiMove:lk,resolveSingleMove:ck,checkGameStateForWinner:ZM,calculatePotentialInterceptors:JM,calculateAiInterception:tk,calculateTurnTransition:qv,calculatePassTransition:nk,readyDronesAndRestoreShields:Ww,calculateNewRoundPlayerState:By,drawToHandLimit:Uy,drawPlayerCards:Pk,determineFirstPlayer:Ff,enforceHandLimit:wk,checkHandLimitCompliance:Ok,checkHandLimitViolations:Tk,enforceHandLimits:_k,processDiscardPhase:Dk,processTurnTransition:rk,processPhaseChange:ak,processRoundStart:ik,createExplosionEffect:jk,createTurnEndEffects:Mk,resolveUnifiedDamageEffect:Yf,resolveUnifiedHealEffect:Yv,resolveUnifiedDrawEffect:Fv,resolveSearchAndDrawEffect:eO,resolveDroneAbilityEffect:tO,resolveShipAbilityEffect:nO,resolveShipRecallEffect:rO,executeAiDeployment:ek,executeAiTurn:ok,executeAiAction:sk},yc=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:ke,startingDecklist:$s},Symbol.toStringTag,{value:"Module"})),kk="modulepreload",Rk=function(e){return"/"+e},vA={},la=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=h(n.map(f=>{if(f=Rk(f),f in vA)return;vA[f]=!0;const p=f.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":kk,p||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),p)return new Promise((x,S)=>{g.addEventListener("load",x),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class Ik{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log(" GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(` Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(` Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const Lk=new Ik;class Cn{static instance=null;static getInstance(t){return Cn.instance||(Cn.instance=new Cn(t)),Cn.instance}static reset(){Cn.instance&&Cn.instance.stateSubscriptionCleanup&&Cn.instance.stateSubscriptionCleanup(),Cn.instance=null,console.log(" GameDataService singleton reset")}constructor(t){if(Cn.instance)return console.warn(" GameDataService already exists. Use getInstance() instead of new GameDataService()"),Cn.instance;this.gameStateManager=t,this.cache=Lk,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log(" GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),h=s[l],f=s[u],p=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,h),S=kr(t,n,m?h:f,m?f:h,p);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Qa(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!0})),h=(l.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:h,hasGuardian:this.hasGuardianInLane(t,h)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const $k=Object.freeze(Object.defineProperty({__proto__:null,default:Cn},Symbol.toStringTag,{value:"Module"}));class Bk{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){if(this.isInitialized){console.log(" AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=Cn.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,console.log(" AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log(" AIPhaseProcessor connected to ActionProcessor for execution"),s&&console.log(" AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const h=this.dronePool?.find(f=>f.name===u);return h||console.warn(` AI personality references unknown drone: ${u}`),h}).filter(u=>u),console.log(` Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const l=r.map(u=>u.name).join(", ");console.log(` Mapped drones: ${l}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(` Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error(" Not enough drones available for AI selection:",r.length),n&&n.dronePool){const l=n.dronePool.filter(u=>!this.dronePool?.find(h=>h.name===u));l.length>0&&console.error(` Missing drones from collection: ${l.join(", ")}`),console.error(` Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(` Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),s=i.map(l=>l.name).join(", ");return console.log(` AI selected drones: ${s}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(h=>n.preferredDrones.includes(h.name)),u=Math.min(3,l.length);r=l.slice(0,u),console.log(` AI selected ${r.length} preferred drones:`,r.map(h=>h.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((h,f)=>{const p=(h.energyCost||1)+(h.health||0)+(h.attack||0);return(f.energyCost||1)+(f.health||0)+(f.attack||0)-p});const l=r?.aggression||.5,u=r?.economy||.5;for(let h=0;h<n&&s.length>0;h++){let f=0;if(l>.7)f=s.findIndex(p=>(p.attack||0)>2),f===-1&&(f=0);else if(u>.7)f=s.findIndex(p=>(p.energyCost||1)<=2),f===-1&&(f=0);else{const p=Math.min(3,s.length);f=Math.floor(Math.random()*p)}i.push(s.splice(f,1)[0])}return console.log(` AI balanced selection (${n}):`,i.map(h=>h.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(` Using ${n.name} personality decklist`);const{gameEngine:i}=await la(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>yc);return{gameEngine:s}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log(" Using standard deck as fallback");const{gameEngine:i,startingDecklist:s}=await la(async()=>{const{gameEngine:l,startingDecklist:u}=await Promise.resolve().then(()=>yc);return{gameEngine:l,startingDecklist:u}},void 0);r=i.buildDeckFromList(s)}return console.log(` AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(` AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return console.log(` AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return console.log(" AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return console.log(" AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return console.log(" AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(h=>h===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(h=>h===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(h=>h===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(console.log(" AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await la(async()=>{const{aiBrain:s}=await import("./aiLogic-Dy9izZJo.js");return{aiBrain:s}},[]),{gameEngine:r}=await la(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>yc);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log(" AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(console.log(" AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await la(async()=>{const{aiBrain:s}=await import("./aiLogic-Dy9izZJo.js");return{aiBrain:s}},[]),{gameEngine:r}=await la(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>yc);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log(" AIPhaseProcessor executing action decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(console.log(" AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await la(async()=>{const{gameEngine:p}=await Promise.resolve().then(()=>yc);return{gameEngine:p}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return console.log(" AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},h=[];if(u.hand.length>l){const p=u.hand.length-l;h=u.hand.slice(0,p),u={...u,hand:u.hand.slice(p),discardPile:[...u.discardPile,...h]},console.log(` AI discarding ${p} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const f=u.hand.length-(r.hand.length-h.length);return f>0&&console.log(` AI drew ${f} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:h,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(console.log(" AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return console.log(" AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];return u=[...n.hand].sort((f,p)=>p.cost-f.cost).slice(0,l),console.log(` AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(console.log(" AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return console.log(" AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let h=[];const f=[];return Object.entries(n.dronesOnBoard||{}).forEach(([p,m])=>{m.forEach(g=>{f.push({...g,lane:p})})}),f.sort((p,m)=>{const g=this.gameDataService.getEffectiveStats(p,p.lane),x=this.gameDataService.getEffectiveStats(m,m.lane);return g.power-x.power}),h=f.slice(0,u),console.log(` AI removing ${h.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:h,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log(" AI has already passed"),!0):!1}async executePass(t){return console.log(` AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(console.log(` AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn(t)},1500)))}async executeTurn(t){if(this.isProcessing){console.log(" AIPhaseProcessor: Already processing a turn, skipping");return}this.isProcessing=!0;try{console.log(` AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let n;if(t.turnPhase==="deployment")n=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")n=await this.executeActionTurn(t);else{console.warn(` AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}const r=this.gameStateManager.getState();r.currentPlayer==="player2"&&r.passInfo&&!r.passInfo.player2Passed&&(console.log(" AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(r)},100))}catch(n){console.error(" AIPhaseProcessor: Error executing turn:",n)}finally{this.isProcessing=!1}}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,version:"1.2.0"}}}const ca=new Bk;class Ua{static instance=null;static getInstance(t){return Ua.instance||(Ua.instance=new Ua(t)),Ua.instance}static reset(){Ua.instance=null,console.log(" ActionProcessor singleton reset")}constructor(t){if(Ua.instance)return console.warn(" ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),Ua.instance;this.gameStateManager=t,this.gameDataService=Cn.getInstance(t),this.animationManager=null,this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},console.log(" ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const h=`${u}Passed`;if(s.passInfo[h])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return console.log(" Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return console.log(" Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return console.log(" Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);!i&&this.p2pManager&&this.p2pManager.isConnected&&this.gameStateManager.get("gameMode")!=="local"&&(console.log("[P2P ACTION] Sending action to peer:",{type:n,payload:r}),this.p2pManager.sendData({type:"ACTION",action:{type:n,payload:r},timestamp:Date.now()})),this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeFirstPlayer":return await this.acknowledgeFirstPlayer(r.playerId);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections},s=p=>{this.gameStateManager.addLogEntry(p,"resolveAttack",n.attackingPlayer==="player2"?n.aiContext:null)},l=()=>{},u=()=>{},h=ke.resolveAttack(n,{player1:r.player1,player2:r.player2},i,s,l,u),f=(h.animationEvents||[]).map(p=>({animationName:p.type,payload:{droneId:p.sourceId,targetId:p.targetId,sourceId:p.sourceId,amount:p.amount,visualType:p.visualType,cardName:p.cardName,duration:p.duration}}));return console.log("[ANIMATION EVENTS] ActionProcessor received:",h.animationEvents),console.log("[ANIMATION EVENTS] Mapped to animations:",f),console.log(" [AI ANIMATION DEBUG] Built animations array:",{count:f.length,animations:f.map(p=>({name:p.animationName,sourceId:p.payload.sourceId,targetId:p.payload.targetId})),hasAnimationManager:!!this.animationManager}),this.animationManager?(console.log(" [AI ANIMATION DEBUG] Calling animationManager.executeAnimations()"),await this.animationManager.executeAnimations(f),console.log(" [AI ANIMATION DEBUG] executeAnimations() completed")):console.warn(" [AI ANIMATION DEBUG] No animationManager available!"),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.attackResult&&h.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),h}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const h=u.dronesOnBoard[r].findIndex(m=>m.id===n);if(h===-1)throw new Error(`Drone ${n} not found in ${r}`);const f=u.dronesOnBoard[r][h],p={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(m=>m.id!==n),[i]:[...u.dronesOnBoard[i],{...f,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:p}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:f.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),console.log(` Moved ${f.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${f.name} moved from ${r} to ${i}`,drone:f,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let h=null,f=null;if(Object.values(l).forEach(A=>{Object.values(A.dronesOnBoard).forEach(C=>{C.forEach(P=>{P.id===n&&(h=P),P.id===i&&(f=P)})})}),!h||!h.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const p=h.abilities[r],m=A=>{this.gameStateManager.addLogEntry(A,"resolveAbility")},g=async A=>await this.processAttack({attackDetails:A}),x=ke.resolveAbility(p,h,f,l,u,m,g),S=(x.animationEvents||[]).map(A=>({animationName:A.type,payload:{droneId:A.sourceId,targetId:A.targetId,sourceId:A.sourceId,amount:A.amount,visualType:A.visualType,duration:A.duration}}));if(this.animationManager&&S.length>0&&await this.animationManager.executeAnimations(S),this.gameStateManager.setPlayerStates(x.newPlayerStates.player1,x.newPlayerStates.player2),x.shouldEndTurn){const A=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:A.currentPlayer==="player1"?"player2":"player1"})}return x}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,l=this.gameStateManager.getState(),u=l[i],f=l[i==="player1"?"player2":"player1"],p={player1:l.placedSections,player2:l.opponentPlacedSections},m=x=>{this.gameStateManager.addLogEntry(x)},g=ke.executeDeployment(n,r,s||l.turn,u,f,p,m);if(g.success){const x=g.deployedDrone?.id||n.id,S={...g.newPlayerState,dronesOnBoard:{...g.newPlayerState.dronesOnBoard,[r]:g.newPlayerState.dronesOnBoard[r].map(C=>C.id===x?{...C,isTeleporting:!0}:C)}};i==="player1"?this.gameStateManager.updatePlayers(S,{}):this.gameStateManager.updatePlayers({},S),await new Promise(C=>setTimeout(C,50));const A=[{animationName:"TELEPORT_IN",payload:{targetId:x,laneId:r,playerId:i}}];this.animationManager&&await this.animationManager.executeAnimations(A),i==="player1"?this.gameStateManager.updatePlayers(g.newPlayerState,{}):this.gameStateManager.updatePlayers({},g.newPlayerState),await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return g}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let h=null;if(r){for(const g of["player1","player2"]){for(const x of["lane1","lane2","lane3"]){const A=(l[g].dronesOnBoard[x]||[]).find(C=>C.id===r);if(A){h={...A,owner:g};break}}if(h)break}if(!h)for(const g of["player1","player2"]){const x=l[g].shipSections;for(const S in x)if(x[S].id===r){h={...x[S],name:S,owner:g};break}if(h)break}!h&&r&&r.startsWith("lane")&&(h={id:r})}const f={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},p=ke.resolveCardPlay(n,h,i,l,u,f);console.log("[ANIMATION EVENTS] Card play events:",p.animationEvents);const m=(p.animationEvents||[]).map(g=>({animationName:g.type,payload:{droneId:g.sourceId,targetId:g.targetId,sourceId:g.sourceId,amount:g.amount,visualType:g.visualType,cardName:g.cardName,duration:g.duration}}));if(this.animationManager&&m.length>0&&await this.animationManager.executeAnimations(m),this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return p}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},h={player1:l.placedSections,player2:l.opponentPlacedSections},f={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},p=ke.resolveShipAbility(n,r,i,u,h,f),m=(p.animationEvents||[]).map(g=>({animationName:g.type,payload:{droneId:g.sourceId,targetId:g.targetId,sourceId:g.sourceId,amount:g.amount,visualType:g.visualType,duration:g.duration}}));if(this.animationManager&&m.length>0&&await this.animationManager.executeAnimations(m),this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return p}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=ke.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let h=r;u.passInfo&&u.passInfo[`${r}Passed`]?(h=u.currentPlayer,console.log(`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${h}`)):console.log(`[TURN TRANSITION DEBUG] Setting new player: ${h}`),this.gameStateManager.setCurrentPlayer(h)}const l=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return console.log(`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,console.log(`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const h=this.gameStateManager.getLocalPlayerId(),f=i[h],m=this.gameDataService.getEffectiveShipStats(f,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=m,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${m}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1}),console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase}  ${n}`);const u=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:u.turnPhase,placedSections:u.placedSections,opponentPlacedSections:u.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||ke.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),h=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),f=ke.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),p=ke.calculateNewRoundPlayerState(s.player2,n,h,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(f,p),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:f,player2:p}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const h=u.shipSections[r];if(!h||h.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const f={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},p={...u,shipSections:f};return this.gameStateManager.updatePlayerState(s,p),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:p}}else if(n==="add"){const h=s==="player1"?l.placedSections:l.opponentPlacedSections,f=ke.getEffectiveSectionMaxShields(r,u,h),p=u.shipSections[r];if(!p||p.allocatedShields>=f)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},g={...u,shipSections:m};return this.gameStateManager.updatePlayerState(s,g),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:g}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const h={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,h),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:h}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return console.log(" [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",s),s.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const h=this.gameStateManager.getState(),f=!h.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",h.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:h.passInfo.firstPasser||(f?n:null)});const p=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",p),p.player1Passed&&p.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),h.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):h.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=`${l}Passed`,h=`${n}Passed`,f=!s[u],p={...s,[h]:!0,firstPasser:s.firstPasser||(f?n:null)};if(console.log("[PLAYER PASS DEBUG] Updating pass info:",p),this.gameStateManager.setPassInfo(p,"ActionProcessor"),p.player1Passed&&p.player2Passed)console.log("[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let g=null;n==="player1"&&!p.player2Passed?g="player2":n==="player2"&&!p.player1Passed&&(g="player1"),g&&(console.log(`[PLAYER PASS DEBUG] Switching turn to ${g} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:g},"TURN_SWITCH","playerPass"))}return this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("playerPass",{playerId:n,playerName:r,turnPhase:i,passInfo:p}),{success:!0,newPassInfo:p}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error(" CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error(" CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("aiShipPlacement",{placement:n,aiPersonality:r}),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1}=t,s=this.gameStateManager.getState();if(console.log(`[OPTIONAL DISCARD DEBUG] Processing ${i?"mandatory":"optional"} discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const l=s[n];if(!l)throw new Error(`Player ${n} not found`);r.forEach(f=>{this.gameStateManager.addLogEntry({player:l.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:f.name,target:"N/A",outcome:`Discarded ${f.name}.`})});const u=l.hand.filter(f=>!r.some(p=>f.instanceId===p.instanceId)),h=[...l.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:u,discardPile:h}),console.log(`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){console.log(" ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await la(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-C-yFl_SP.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),console.log(` First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeFirstPlayer(t){return console.log(` ActionProcessor: Processing first player acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"determineFirstPlayer",actionData:{acknowledged:!0}})}async acknowledgeDeploymentComplete(t){return console.log(` ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),console.log(` Cleared commitments for phase: ${t}`)):(n.commitments={},console.log(" Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;console.log(` ActionProcessor: Processing ${r} commitment for ${n}`);const s=this.gameStateManager.getState();s.commitments[r]||(s.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),s.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:s.commitments},"COMMITMENT_UPDATE");const l=s.commitments[r].player1.completed&&s.commitments[r].player2.completed;return console.log(` ${n} ${r} committed, both complete: ${l}`),n==="player1"&&s.gameMode==="local"&&(console.log(" Single-player mode: Auto-completing AI commitment"),ca&&setTimeout(async()=>{try{await this.handleAICommitment(r,s)}catch(u){console.error("AI commitment error:",u)}},100)),{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:l}}}async handleAICommitment(t,n){try{console.log(` Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await ca.processDroneSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"droneSelection",actionData:{drones:r}}});break;case"deckSelection":r=await ca.processDeckSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deckSelection",actionData:{deck:r}}});break;case"placement":r=await ca.processPlacement(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"placement",actionData:{placedSections:r}}});break;case"mandatoryDiscard":r=await ca.executeMandatoryDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"optionalDiscard":r=await ca.executeOptionalDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"allocateShields":await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"allocateShields",actionData:{shieldAllocation:[]}}});break;case"mandatoryDroneRemoval":r=await ca.executeMandatoryDroneRemovalTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}}});break;case"determineFirstPlayer":await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}});break;case"deploymentComplete":console.log(" AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}}),console.log(" AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(` No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(` No commitments found for phase: ${t}`),{};console.log(` ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),console.log(" Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,discard:[]}),console.log(" Applied deck selections to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),console.log(" Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":console.log(" First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":console.log(" Discard commitments (handled via card actions)");break;case"allocateShields":console.log(" Shield allocation (handled separately)");break;case"deploymentComplete":console.log(" Deployment complete acknowledgments (no state changes)");break;case"determineFirstPlayer":console.log(" First player determination (handled by GameFlowManager)");break;default:console.warn(` No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return console.log(" ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r}=t;return console.log(" ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),{success:!0,message:"Energy reset completed",player1:n,player2:r}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}const lO=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(` Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(` Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},Uk=(e,t=3)=>{if(!e||e.length===0)return console.warn(" No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(` Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(` Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class zk{constructor(){console.log(" GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.state={appState:"menu",isHost:!1,isGuest:!1,isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=Ua.getInstance(this),this.gameFlowManager=null,this.p2pIntegrationSetup=!1,console.log(" GAMESTATE INITIALIZATION: GameStateManager created"),console.log(" App State:",this.state.appState),console.log(" Game Active:",this.state.gameActive),console.log(" GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost);break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),h=l.some(A=>A.includes("App.jsx")),f=l.some(A=>A.includes("ActionProcessor")),p=l.some(A=>A.includes("PhaseManager")),m=f||p;h&&!m&&(console.error(" ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error(" App.jsx should only call ActionProcessor or PhaseManager methods"),console.error(" Stack trace:",s));const g=Object.keys(t),x=`${u.primaryCaller} in ${u.primaryFile}`;console.log(` GAMESTATE CHANGE [${n}] from ${x}:`,{changedKeys:g,allUpdates:t,architectureViolation:h&&!m});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,x,n),g.forEach(A=>{if(!["player1","player2"].includes(A)){const C=i[A],P=t[A];JSON.stringify(C)!==JSON.stringify(P)&&console.log(` STATE CHANGE: ${A}`,{before:C,after:P,caller:x,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(m=>m in t),h=i&&i.includes("GameFlowManager"),f=r==="phaseTransition"||t.turnPhase&&h;u&&!(f&&h)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:h,isPhaseTransition:f,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(h=>{i.has(h.id)&&console.error(`Duplicate drone ID detected: ${h.id} in player${l+1}`),i.add(h.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(console.log(" Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){console.log(" Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],h=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],f=Object.keys(t).filter(P=>u.includes(P)),p=Object.keys(t).filter(P=>h.includes(P)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const g=f.every(P=>["player1","player2"].includes(P)),x=f.every(P=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(P));if(m&&(g||x))return;const S=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),C=f.length===1&&f[0]==="passInfo";if(!(S&&A&&C)){if(f.length>0&&!r){const P=i?.split(`
`)||[],O=P.find(T=>T.includes(".jsx")&&!T.includes("GameStateManager"))||P[2]||"Unknown";console.warn(" ActionProcessor bypass detected: Critical game state updated directly",{updates:f,turnPhase:n.turnPhase,caller:O.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug(" ActionProcessor bypass debug info:",{stackTrace:P.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}p.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];console.log(` PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(f=>{const p=l?l[f]:void 0,m=u?u[f]:void 0;if(JSON.stringify(p)!==JSON.stringify(m))if(f==="energy"||f==="deploymentBudget"||f==="initialDeploymentBudget")console.log(`   ${f}: ${p}  ${m}`),(m==null||isNaN(m))&&console.error(`   WARNING: ${f} became ${m}!`);else if(f==="activeDronePool"){const g=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";let S,A;if(Array.isArray(p))try{S=p.map(C=>C?.name||"UNNAMED").join(",")}catch(C){S=`ERROR_MAPPING_OLD: ${C.message}`}else S="undefined";if(Array.isArray(m))try{A=m.map(C=>C?.name||"UNNAMED").join(",")}catch(C){A=`ERROR_MAPPING_NEW: ${C.message}`}else A="undefined";if(console.log(`   ${f}: [${g} drones]  [${x} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(console.log("     Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("     First drone object:",m[0])),g!==x||S!==A){const C=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`     Update source:
${C}`)}}else if(f==="hand"||f==="deck"){const g=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";console.log(`   ${f}: [${g} cards]  [${x} cards]`)}else if(f==="dronesOnBoard"){const g=p?`L1:${p.lane1?.length||0} L2:${p.lane2?.length||0} L3:${p.lane3?.length||0}`:"undefined",x=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`   ${f}: ${g}  ${x}`)}else console.log(`   ${f}:`,{before:p,after:m})}),console.log(` Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],h=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],f=l.functions.filter(m=>u.some(g=>m.toLowerCase().includes(g.toLowerCase()))),p=l.functions.filter(m=>h.some(g=>m.toLowerCase().includes(g.toLowerCase())));f.length>0&&p.length===0&&(console.warn(" Inappropriate function updating game state:",{inappropriateFunctions:f,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI  ActionProcessor  gameLogic.js  GameStateManager"}),console.debug(" Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:f,appropriateFound:p,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const h of r){const f=u[h];if(!f)continue;const p=Array.isArray(f)?f:[f];let m=!1;for(const g of p)(g==="GameFlowManager"&&i||g==="SequentialPhaseManager"&&s||g==="ActionProcessor"&&l)&&(m=!0);if(!m){const g=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(` OWNERSHIP VIOLATION: ${g} cannot update '${h}'`,{updateKey:h,currentManager:g,allowedOwners:p,updates:r,recommendation:`Only ${p.join(" or ")} should update '${h}'`})}}}reset(){const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:ke.initialPlayerState("Player 1",$s),player2:ke.initialPlayerState("Player 2",$s),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET")}startGame(t="local",n={},r={}){console.log(" GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...ke.initialPlayerState(n.name||"Player 1",n.decklist||$s),...n},player2:{...ke.initialPlayerState(r.name||"Player 2",r.decklist||$s),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{}},s=lO(_n);i.droneSelectionPool=s.droneSelectionPool,i.droneSelectionTrio=s.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log(" Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log(" Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log(" GAME START: Game session initialized successfully")}endGame(){console.log(" GAME END: Ending current game session"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),console.log(" GAME END: Returned to menu state")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t,isHost:n&&t!=="local",isGuest:!n&&t!=="local"},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log(" [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Fe=new zk;class Gk{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return Hk(t).buffer}}function Hk(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function cO(e){return new qk(e).unpack()}function uO(e){const t=new Yk,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class qk{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class Yk{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,h=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(h)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Gk,this._textEncoder=new TextEncoder}}let dO=!0,fO=!0;function Tc(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function Ho(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const h=f=>{const p=n(f);p&&(u.handleEvent?u.handleEvent(p):u(p))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,h),i.apply(this,[l,h])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const h=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,h])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function Fk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(dO=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Vk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(fO=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function hO(){if(typeof window=="object"){if(dO)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Vv(e,t){fO&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Kk(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Tc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Tc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Tc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Tc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function bA(e){return Object.prototype.toString.call(e)==="[object Object]"}function pO(e){return bA(e)?Object.keys(e).reduce(function(t,n){const r=bA(e[n]),i=r?pO(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function zy(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?zy(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{zy(e,e.get(i),n)})}))}function xA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&zy(e,u,i)})}),i}const SA=hO;function mO(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const h={};return Object.keys(u).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const p=typeof u[f]=="object"?u[f]:{ideal:u[f]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const m=function(g,x){return g?g+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(p.ideal!==void 0){h.optional=h.optional||[];let g={};typeof p.ideal=="number"?(g[m("min",f)]=p.ideal,h.optional.push(g),g={},g[m("max",f)]=p.ideal,h.optional.push(g)):(g[m("",f)]=p.ideal,h.optional.push(g))}p.exact!==void 0&&typeof p.exact!="number"?(h.mandatory=h.mandatory||{},h.mandatory[m("",f)]=p.exact):["min","max"].forEach(g=>{p[g]!==void 0&&(h.mandatory=h.mandatory||{},h.mandatory[m(g,f)]=p[g])})}),u.advanced&&(h.optional=(h.optional||[]).concat(u.advanced)),h},i=function(u,h){if(t.version>=61)return h(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const f=function(p,m,g){m in p&&!(g in p)&&(p[g]=p[m],delete p[m])};u=JSON.parse(JSON.stringify(u)),f(u.audio,"autoGainControl","googAutoGainControl"),f(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let f=u.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const p=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete u.video.facingMode;let m;if(f.exact==="environment"||f.ideal==="environment"?m=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(S=>S.kind==="videoinput");let x=g.find(S=>m.some(A=>S.label.toLowerCase().includes(A)));return!x&&g.length&&m.includes("back")&&(x=g[g.length-1]),x&&(u.video.deviceId=f.exact?{exact:x.deviceId}:{ideal:x.deviceId}),u.video=r(u.video),SA("chrome: "+JSON.stringify(u)),h(u)})}u.video=r(u.video)}return SA("chrome: "+JSON.stringify(u)),h(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,h,f){i(u,p=>{n.webkitGetUserMedia(p,h,m=>{f&&f(s(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(h){return i(h,f=>u(f).then(p=>{if(f.audio&&!p.getAudioTracks().length||f.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(s(p))))}}}function gO(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function yO(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Ho(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function vO(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,h){let f=i.apply(this,arguments);return f||(f=t(this,u),this._senders.push(f)),f};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const h=this._senders.indexOf(u);h!==-1&&this._senders.splice(h,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(h=>h.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function bO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>xA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Ho(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>xA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function xO(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const h=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(h)===-1&&this._shimmedLocalStreams[u.id].push(h):this._shimmedLocalStreams[u.id]=[u,h],h};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(m=>m.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const h=this.getSenders().filter(f=>u.indexOf(f)===-1);this._shimmedLocalStreams[l.id]=[l].concat(h)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const h=this._shimmedLocalStreams[u].indexOf(l);h!==-1&&this._shimmedLocalStreams[u].splice(h,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function SO(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return xO(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=n.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(m=>{if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const m=new e.MediaStream(p.getTracks());this._streams[p.id]=m,this._reverseStreams[m.id]=p,p=m}r.apply(this,[p])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(A=>A===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([p]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===p)};function s(f,p){let m=p.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const x=f._reverseStreams[g],S=f._streams[x.id];m=m.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:p.type,sdp:m})}function l(f,p){let m=p.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const x=f._reverseStreams[g],S=f._streams[x.id];m=m.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:p.type,sdp:m})}["createOffer","createAnswer"].forEach(function(f){const p=e.RTCPeerConnection.prototype[f],m={[f](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[S=>{const A=s(this,S);g[0].apply(null,[A])},S=>{g[1]&&g[1].apply(null,S)},arguments[2]]):p.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[f]=m[f]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const h=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const f=h.get.apply(this);return f.type===""?f:s(this,f)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(A=>p.track===A)&&(g=this._streams[x])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Gy(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function AO(e,t){Ho(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const AA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:AO,shimAddTrackRemoveTrack:SO,shimAddTrackRemoveTrackWithNative:xO,shimGetSendersWithDtmf:vO,shimGetUserMedia:mO,shimMediaStream:gO,shimOnTrack:yO,shimPeerConnection:Gy,shimSenderReceiverGetStats:bO},Symbol.toStringTag,{value:"Module"}));function EO(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){Vv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,h){u in l&&!(h in l)&&(l[h]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function Xk(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function CO(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Hy(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(h=>{if(t.version<53&&!l)try{h.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;h.forEach((p,m)=>{h.set(m,Object.assign({},p,{type:n[p.type]||p.type}))})}return h}).then(l,u)}}function PO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function wO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Ho(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function OO(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Vv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function TO(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function _O(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function DO(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function NO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function jO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const EA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:_O,shimCreateAnswer:jO,shimCreateOffer:NO,shimGetDisplayMedia:Xk,shimGetParameters:DO,shimGetUserMedia:EO,shimOnTrack:CO,shimPeerConnection:Hy,shimRTCDataChannel:TO,shimReceiverGetStats:wO,shimRemoveStream:OO,shimSenderGetStats:PO},Symbol.toStringTag,{value:"Module"}));function MO(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function kO(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function RO(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(f,p){const m=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[m]);return p?(g.then(f,p),Promise.resolve()):g},t.createAnswer=function(f,p){const m=arguments.length>=2?arguments[2]:arguments[0],g=r.apply(this,[m]);return p?(g.then(f,p),Promise.resolve()):g};let u=function(h,f,p){const m=i.apply(this,[h]);return p?(m.then(f,p),Promise.resolve()):m};t.setLocalDescription=u,u=function(h,f,p){const m=s.apply(this,[h]);return p?(m.then(f,p),Promise.resolve()):m},t.setRemoteDescription=u,u=function(h,f,p){const m=l.apply(this,[h]);return p?(m.then(f,p),Promise.resolve()):m},t.addIceCandidate=u}function IO(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(LO(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function LO(e){return e&&e.video!==void 0?Object.assign({},e,{video:pO(e.video)}):e}function $O(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(Vv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function BO(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function UO(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function zO(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const CA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:zO,shimCallbacksAPI:RO,shimConstraints:LO,shimCreateOfferLegacy:UO,shimGetUserMedia:IO,shimLocalStreamsAPI:MO,shimRTCIceServerUrls:$O,shimRemoteStreamsAPI:kO,shimTrackEventTransceiver:BO},Symbol.toStringTag,{value:"Module"}));var eg={exports:{}},PA;function Wk(){return PA||(PA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const h=s[u],f=t.matchPrefix(n,"a=rtpmap:"+h+" ")[0];if(f){const p=t.parseRtpMap(f),m=t.matchPrefix(n,"a=fmtp:"+h+" ");switch(p.parameters=m.length?t.parseFmtp(m[0]):{},p.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+h+" ").map(t.parseRtcpFb),r.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(p.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(h=>{u.rtcpFeedback.find(p=>p.type===h.type&&p.parameter===h.parameter)||u.rtcpFeedback.push(h)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(g=>t.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),h=u.length>0&&u[0].ssrc;let f;const p=t.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(S=>parseInt(S,10)));p.length>0&&p[0].length>1&&p[0][0]===h&&(f=p[0][1]),i.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let x={ssrc:h,codecPayloadType:parseInt(g.parameters.apt,10)};h&&f&&(x.rtx={ssrc:f}),r.push(x),s&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:h,mechanism:l?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&h&&r.push({ssrc:h});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(g=>{g.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const h=u[0].substring(10).split(" ");return{port:parseInt(h[0],10),protocol:h[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(eg)),eg.exports}var GO=Wk();const zs=Xr(GO),Qk=Iw({__proto__:null,default:zs},[GO]);function Kd(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=zs.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Ho(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function qy(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Ho(e,"icecandidate",t=>{if(t.candidate){const n=zs.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Xd(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const h=zs.splitSections(u.sdp);return h.shift(),h.some(f=>{const p=zs.parseMLine(f);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},r=function(u){const h=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(h===null||h.length<2)return-1;const f=parseInt(h[1],10);return f!==f?-1:f},i=function(u){let h=65536;return t.browser==="firefox"&&(t.version<57?u===-1?h=16384:h=2147483637:t.version<60?h=t.version===57?65535:65536:h=2147483637),h},s=function(u,h){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const p=zs.matchPrefix(u.sdp,"a=max-message-size:");return p.length>0?f=parseInt(p[0].substring(19),10):t.browser==="firefox"&&h!==-1&&(f=2147483637),f},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:h}=this.getConfiguration();h==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const h=r(arguments[0]),f=i(h),p=s(arguments[0],h);let m;f===0&&p===0?m=Number.POSITIVE_INFINITY:f===0||p===0?m=Math.max(f,p):m=Math.min(f,p);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return m}}),this._sctp=g}return l.apply(this,arguments)}}function Wd(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],h=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&h>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Ho(e,"datachannel",r=>(t(r.channel,r.target),r))}function Yy(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Fy(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Qd(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Zd(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const Zk=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Fy,shimAddIceCandidateNullOrEmpty:Qd,shimConnectionState:Yy,shimMaxMessageSize:Xd,shimParameterlessSetLocalDescription:Zd,shimRTCIceCandidate:Kd,shimRTCIceCandidateRelayProtocol:qy,shimSendThrowTypeError:Wd},Symbol.toStringTag,{value:"Module"}));function Jk({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=hO,r=Kk(e),i={browserDetails:r,commonShim:Zk,extractVersion:Tc,disableLog:Fk,disableWarnings:Vk,sdp:Qk};switch(r.browser){case"chrome":if(!AA||!Gy||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=AA,Qd(e,r),Zd(e),mO(e,r),gO(e),Gy(e,r),yO(e),SO(e,r),vO(e),bO(e),AO(e,r),Kd(e),qy(e),Yy(e),Xd(e,r),Wd(e),Fy(e,r);break;case"firefox":if(!EA||!Hy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=EA,Qd(e,r),Zd(e),EO(e,r),Hy(e,r),CO(e),OO(e),PO(e),wO(e),TO(e),_O(e),DO(e),NO(e),jO(e),Kd(e),Yy(e),Xd(e,r),Wd(e);break;case"safari":if(!CA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=CA,Qd(e,r),Zd(e),$O(e),UO(e),RO(e),MO(e),kO(e),BO(e),IO(e),zO(e),Kd(e),qy(e),Xd(e,r),Wd(e),Fy(e,r);break;default:n("Unsupported browser!");break}return i}const wA=Jk({window:typeof window>"u"?void 0:window});function qo(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class HO{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),h=t.slice(l,u),f={__peerData:this._dataCount,n:s,data:h,total:i};n.push(f),l=u,s++}return this._dataCount++,n}}}function eR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const tg=wA.default||wA,vc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return tg.browserDetails.browser}getVersion(){return tg.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=tg.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},tR=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),qO=()=>Math.random().toString(36).slice(2),OA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class nR extends HO{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=OA,this.browser=vc.getBrowser(),this.browserVersion=vc.getVersion(),this.pack=uO,this.unpack=cO,this.supports=(function(){const n={browser:vc.isBrowserSupported(),webRTC:vc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(OA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!vc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=tR,this.randomToken=qO}}const qn=new nR,rR="PeerJS: ";class aR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[rR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ce=new aR,Kv={},iR=Object.prototype.hasOwnProperty,Ln="~";function $c(){}Object.create&&($c.prototype=Object.create(null),new $c().__proto__||(Ln=!1));function oR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function YO(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new oR(n,r||e,i),l=Ln?Ln+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function Jd(e,t){--e._eventsCount===0?e._events=new $c:delete e._events[t]}function Dn(){this._events=new $c,this._eventsCount=0}Dn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)iR.call(n,r)&&t.push(Ln?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Dn.prototype.listeners=function(t){var n=Ln?Ln+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};Dn.prototype.listenerCount=function(t){var n=Ln?Ln+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Dn.prototype.emit=function(t,n,r,i,s,l){var u=Ln?Ln+t:t;if(!this._events[u])return!1;var h=this._events[u],f=arguments.length,p,m;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),f){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,n),!0;case 3:return h.fn.call(h.context,n,r),!0;case 4:return h.fn.call(h.context,n,r,i),!0;case 5:return h.fn.call(h.context,n,r,i,s),!0;case 6:return h.fn.call(h.context,n,r,i,s,l),!0}for(m=1,p=new Array(f-1);m<f;m++)p[m-1]=arguments[m];h.fn.apply(h.context,p)}else{var g=h.length,x;for(m=0;m<g;m++)switch(h[m].once&&this.removeListener(t,h[m].fn,void 0,!0),f){case 1:h[m].fn.call(h[m].context);break;case 2:h[m].fn.call(h[m].context,n);break;case 3:h[m].fn.call(h[m].context,n,r);break;case 4:h[m].fn.call(h[m].context,n,r,i);break;default:if(!p)for(x=1,p=new Array(f-1);x<f;x++)p[x-1]=arguments[x];h[m].fn.apply(h[m].context,p)}}return!0};Dn.prototype.on=function(t,n,r){return YO(this,t,n,r,!1)};Dn.prototype.once=function(t,n,r){return YO(this,t,n,r,!0)};Dn.prototype.removeListener=function(t,n,r,i){var s=Ln?Ln+t:t;if(!this._events[s])return this;if(!n)return Jd(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Jd(this,s);else{for(var u=0,h=[],f=l.length;u<f;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&h.push(l[u]);h.length?this._events[s]=h.length===1?h[0]:h:Jd(this,s)}return this};Dn.prototype.removeAllListeners=function(t){var n;return t?(n=Ln?Ln+t:t,this._events[n]&&Jd(this,n)):(this._events=new $c,this._eventsCount=0),this};Dn.prototype.off=Dn.prototype.removeListener;Dn.prototype.addListener=Dn.prototype.on;Dn.prefixed=Ln;Dn.EventEmitter=Dn;Kv=Dn;var Yo={};qo(Yo,"ConnectionType",()=>Ri);qo(Yo,"PeerErrorType",()=>Bt);qo(Yo,"BaseConnectionErrorType",()=>Vy);qo(Yo,"DataConnectionErrorType",()=>Xv);qo(Yo,"SerializationType",()=>Vf);qo(Yo,"SocketEventType",()=>ki);qo(Yo,"ServerMessageType",()=>wn);var Ri=(function(e){return e.Data="data",e.Media="media",e})({}),Bt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Vy=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Xv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Vf=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),ki=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),wn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const FO="1.5.5";class sR extends Kv.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+FO),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Ce.log("Server message received:",s)}catch{Ce.log("Invalid server message",i.data);return}this.emit(ki.Message,s)},this._socket.onclose=i=>{this._disconnected||(Ce.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(ki.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ce.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ce.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:wn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(ki.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class VO{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ri.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Ce.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Ce.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Ce.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:wn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Ce.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Vy.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Ce.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Vy.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Ce.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Ce.log("Listening for data channel"),t.ondatachannel=l=>{Ce.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},Ce.log("Listening for remote stream"),t.ontrack=l=>{Ce.log("Received remote stream");const u=l.streams[0],h=s.getConnection(n,r);if(h.type===Ri.Media){const f=h;this._addStreamToMediaConnection(u,f)}}}cleanup(){Ce.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Ce.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ri.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:wn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Bt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Bt.WebRTC,r),Ce.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Ce.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:wn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Bt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Bt.WebRTC,r),Ce.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Ce.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Ce.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Bt.WebRTC,l),Ce.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Ce.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Ce.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Bt.WebRTC,n),Ce.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Ce.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Ce.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Ce.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class KO extends Kv.EventEmitter{emitError(t,n){Ce.error("Error:",n),this.emit("error",new lR(`${t}`,n))}}class lR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class XO extends KO{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class af extends XO{static#e=this.ID_PREFIX="mc_";get type(){return Ri.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||af.ID_PREFIX+qn.randomToken(),this._negotiator=new VO(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Ce.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case wn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case wn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ce.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Ce.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class cR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",FO),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Ce.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==qn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===qn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Ce.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class of extends XO{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ri.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||of.ID_PREFIX+qO(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new VO(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Ce.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Xv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case wn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case wn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Ce.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Wv extends of{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>of.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Ce.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class ng extends Wv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new HO,this.serialization=Vf.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=cO(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=eR(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=uO(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Ce.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class uR extends Wv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Vf.None}}class dR extends Wv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=qn.chunkedMTU){this.emitError(Xv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Vf.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Qv extends KO{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:uR,json:dR,binary:ng,"binary-utf8":ng,default:ng},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:qn.CLOUD_HOST,port:qn.CLOUD_PORT,path:"/",key:Qv.DEFAULT_KEY,token:qn.randomToken(),config:qn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==qn.CLOUD_HOST?this._options.secure=qn.isSecure():this._options.host==qn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ce.setLogFunction(this._options.logFunction),Ce.logLevel=this._options.debug||0,this._api=new cR(n),this._socket=this._createServerConnection(),!qn.supports.audioVideo&&!qn.supports.data){this._delayedAbort(Bt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!qn.validateId(r)){this._delayedAbort(Bt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Bt.ServerError,i))}_createServerConnection(){const t=new sR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(ki.Message,n=>{this._handleMessage(n)}),t.on(ki.Error,n=>{this._abort(Bt.SocketError,n)}),t.on(ki.Disconnected,()=>{this.disconnected||(this.emitError(Bt.Network,"Lost connection to server."),this.disconnect())}),t.on(ki.Close,()=>{this.disconnected||this._abort(Bt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case wn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case wn.Error:this._abort(Bt.ServerError,r.msg);break;case wn.IdTaken:this._abort(Bt.UnavailableID,`ID "${this.id}" is taken`);break;case wn.InvalidKey:this._abort(Bt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case wn.Leave:Ce.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case wn.Expire:this.emitError(Bt.PeerUnavailable,`Could not connect to peer ${i}`);break;case wn.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),Ce.warn(`Offer received for existing Connection ID:${s}`)),r.type===Ri.Media){const h=new af(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=h,this._addConnection(i,l),this.emit("call",h)}else if(r.type===Ri.Data){const h=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=h,this._addConnection(i,l),this.emit("connection",h)}else{Ce.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const h of u)l.handleMessage(h);break}default:{if(!r){Ce.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):Ce.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Bt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Bt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Ce.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new af(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Ce.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Ce.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ce.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Ce.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Ce.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ce.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Bt.ServerError,n))}}var TA=Qv;class fR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new TA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new TA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const bc=new fR,ef=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},hR=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Draw Phase",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,pR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],mR=["deployment","action"],gR=e=>pR.includes(e),_A=e=>mR.includes(e),Ui=()=>{const[e,t]=E.useState(Fe.getState()),[n,r]=E.useState(bc.getStatus());E.useEffect(()=>{Fe.setupP2PIntegration(bc)},[]),E.useEffect(()=>Fe.subscribe(L=>{t(Fe.getState())}),[]),E.useEffect(()=>bc.subscribe(L=>{r(bc.getStatus())}),[]);const i=E.useCallback(()=>Fe.isMyTurn(),[e.currentPlayer,e.gameMode]),s=E.useCallback(()=>Fe.getLocalPlayerId(),[e.gameMode]),l=E.useCallback(()=>Fe.getOpponentPlayerId(),[e.gameMode]),u=E.useCallback(()=>e.gameMode!=="local",[e.gameMode]),h=E.useCallback(()=>u()&&!i(),[u,i]),f=E.useCallback(()=>Fe.getLocalPlayerState(),[e.gameMode]),p=E.useCallback(()=>Fe.getOpponentPlayerState(),[e.gameMode]),m=E.useCallback(te=>Fe.isLocalPlayer(te),[e.gameMode]),g=E.useCallback(()=>Fe.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),x=E.useCallback(()=>{const te=Fe.getOpponentPlacedSections();return e.turnPhase==="placement"&&te.some(L=>L!==null)&&console.error(" CRITICAL - getOpponentPlacedSections returning:",te,"from gameState:",e.opponentPlacedSections),te},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=E.useCallback((te,L)=>{Fe.updatePlayers(te,L)},[]),A=E.useCallback((te,L)=>{Fe.updatePlayerState(te,L)},[]),C=E.useCallback((te,L)=>{Fe.setPlayerStates(te,L)},[]),P=E.useCallback(te=>{Fe.setFirstPasserOfPreviousRound(te)},[]),O=E.useCallback(te=>{Fe.setFirstPlayerOverride(te)},[]),T=E.useCallback(te=>{Fe.setPassInfo(te)},[]),j=E.useCallback(te=>{Fe.updatePassInfo(te)},[]),N=E.useCallback((te,L,ee)=>{Fe.addLogEntry(te,L,ee)},[]),D=E.useCallback(()=>{Fe.reset()},[]),M=E.useCallback(te=>{Fe.setWinner(te)},[]),R=E.useCallback(async(te,L)=>await Fe.processAction(te,L),[]),U=E.useCallback(()=>Fe.isActionInProgress(),[]),W=E.useCallback(()=>Fe.getActionQueueLength(),[]),Y=E.useCallback(()=>{Fe.clearActionQueue()},[]),J=E.useCallback(()=>gR(e.turnPhase),[e.turnPhase]),ce=E.useCallback(()=>_A(e.turnPhase),[e.turnPhase]),se=E.useCallback(async(te,L)=>{const ee=e.turnPhase,he=_A(ee);return console.log(` useGameState.routeAction: ${te} in phase ${ee} (${he?"sequential":"simultaneous"})`),he?await R(te,L):(console.warn(` Simultaneous phase action ${te} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${te} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:ee,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,R]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:h,getLocalPlayerState:f,getOpponentPlayerState:p,isLocalPlayer:m,getLocalPlacedSections:g,getOpponentPlacedSections:x,updatePlayers:S,updatePlayerState:A,setPlayerStates:C,setFirstPasserOfPreviousRound:P,setFirstPlayerOverride:O,setPassInfo:T,updatePassInfo:j,addLogEntry:N,resetGame:D,setWinner:M,processAction:R,isActionInProgress:U,getActionQueueLength:W,clearActionQueue:Y,isSimultaneousPhase:J,isSequentialPhase:ce,routeAction:se,gameStateManager:Fe,p2pManager:bc}},DA=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(` Initialized ship placement: ${e.length} sections available`),console.log(` Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class Mc{constructor(){if(Mc.instance)return Mc.instance;Mc.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,console.log(" GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){console.log(" GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=Cn.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&(i.initialize(u,l,s,n,t),console.log(" GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,console.log(" GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(` GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="droneSelection"){console.log(` GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let n={};if(t==="droneSelection"){console.log(" GameFlowManager initializing drone selection phase data");const r=lO(_n),i=DA();n={...r,...i}}this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(n).length>0&&this.gameStateManager.setState(n,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(console.log(` GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const i=this.actionProcessor.applyPhaseCommitments(t);Object.keys(i).length>0&&(this.gameStateManager.setState(i,"COMMITMENT_APPLICATION",`${t}_completion`),console.log(` GameFlowManager: Applied ${t} commitments to game state`))}const r=this.getNextPhase(t);r?this.isSequentialPhase(r)?(console.log(` GameFlowManager: Handover to sequential phase '${r}'`),this.initiateSequentialPhase(r)):(console.log(` GameFlowManager: Continuing with simultaneous phase '${r}'`),await this.transitionToPhase(r)):console.log(" GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(console.log(` GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(n!=="COMMITMENT_UPDATE"||!t.commitments)return;console.log(" checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){console.log(" Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){console.log(" Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;console.log(" Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:s}),s&&(console.log(` GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){console.log(` GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(` GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="gameInitializing"?n=await this.processGameInitializingPhase():t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():console.warn(` No handler for automatic phase: ${t}`),n?(console.log(` GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),await this.transitionToPhase(n)):console.warn(` No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(){console.log(" GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await la(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-CzK_WdNP.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error(" GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),console.log(" Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return console.log(" Automatic draw completed, returning next phase:",s),s}catch(n){console.error(" Error during automatic draw phase:",n)}}async processAutomaticEnergyResetPhase(){console.log(" GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error(" GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await la(async()=>{const{default:x}=await Promise.resolve().then(()=>$k);return{default:x}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},h=ke.readyDronesAndRestoreShields(n.player1,n.player2,u.player1),f=ke.readyDronesAndRestoreShields(n.player2,n.player1,u.player2),p={...h,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},m={...f,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget};await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:p,player2:m}}),console.log(` Energy reset complete - Player 1: ${p.energy} energy, Player 2: ${m.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const g=this.getNextPhase("energyReset");return console.log(" Automatic energy reset completed, returning next phase:",g),g}catch(n){console.error(" Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(){console.log(" GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:"placement",gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(n=>setTimeout(n,100));const t=this.getNextPhase("gameInitializing");return console.log(" Game initialization completed, returning next phase:",t),t}catch(t){throw console.error(" Error during game initialization:",t),t}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn(" GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return!1}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(` GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(` Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn(" ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1)),console.log(` GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"?(console.log(" GameFlowManager: Initializing placement phase data"),r=DA()):t==="determineFirstPlayer"&&(console.log(" GameFlowManager: Initializing first player determination phase"),this.actionProcessor&&(i=await this.actionProcessor.processFirstPlayerDetermination(),console.log(" First player determination completed:",i),i&&i.stateUpdates&&(r={...r,...i.stateUpdates},console.log(" GameFlowManager: Including first player state updates:",i.stateUpdates)))),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!0}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){console.log(` GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,console.log(` GameFlowManager: Starting round ${this.roundNumber}`);const t={player1Passed:!1,player2Passed:!1,firstPasser:null};this.gameStateManager.setPassInfo(t),console.log(" PassInfo reset for new round");const n=this.ROUND_PHASES.find(r=>this.isPhaseRequired(r));n?await this.transitionToPhase(n):(console.warn(" No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){console.log(` GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log(" GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const Bc=new Mc;function NA(){const{gameStateManager:e}=Ui(),[t,n]=E.useState(!1),r=()=>{console.log(" Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{console.log(" Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},l=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#00ff88",color:"#000000",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 255, 136, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#00cc6a",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#00ff88",u.target.style.transform="translateY(0)"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#ff6b35",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 53, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#e55a2b",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#ff6b35",u.target.style.transform="translateY(0)"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"10px 20px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>{u.target.style.backgroundColor="#cccccc",u.target.style.color="#1a1a1a"},onMouseOut:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#cccccc"},children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"DRONE WARS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"Strategic Combat in the Digital Arena"}),v.jsx("button",{onClick:s,style:{fontSize:"1.5rem",padding:"15px 40px",backgroundColor:"#0088ff",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 136, 255, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#0066cc",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#0088ff",u.target.style.transform="translateY(0)"},children:"START GAME"})]})})}const jA=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];function yR(){const{gameState:e,gameStateManager:t}=Ui(),[n,r]=E.useState(null),i=e.gameMode==="local",s=e.gameMode==="multiplayer",l=()=>{console.log(" Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=f=>{console.log(" Selected AI:",f.name),r(f)},h=()=>{if(i&&n){console.log(" Starting single player game with AI:",n.name);const f=_n.filter(m=>n.dronePool.includes(m.name)),p={};f.forEach(m=>{p[m.name]=0}),ca.initialize(jA,_n,n,t.actionProcessor,t),console.log(" AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:f,deployedDroneCounts:p,aiPersonality:n})}else s&&(console.log(" Starting multiplayer game"),t.startGame("multiplayer",{name:"Player 1"},{name:"Player 2"}))};return v.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:jA.map(f=>v.jsxs("div",{onClick:()=>u(f),style:{padding:"20px",backgroundColor:n?.name===f.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===f.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:p=>{n?.name!==f.name&&(p.target.style.backgroundColor="#333333",p.target.style.borderColor="#666666")},onMouseOut:p=>{n?.name!==f.name&&(p.target.style.backgroundColor="#2a2a2a",p.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===f.name?"#ffffff":"#00ff88"},children:f.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:f.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",f.difficulty]})]},f.name))})}),s&&v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[v.jsx("div",{style:{fontSize:"1.2rem",color:"#cccccc",marginBottom:"1rem"},children:"Multiplayer game ready to start"}),v.jsx("div",{style:{fontSize:"1rem",color:"#888888"},children:"Both players will customize their decks and drones in-game"})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"12px 24px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:f=>{f.target.style.backgroundColor="#cccccc",f.target.style.color="#1a1a1a"},onMouseOut:f=>{f.target.style.backgroundColor="transparent",f.target.style.color="#cccccc"},children:"BACK TO MENU"}),v.jsx("button",{onClick:h,disabled:i&&!n,style:{fontSize:"1.2rem",padding:"12px 30px",backgroundColor:i&&!n?"#444444":"#00ff88",color:i&&!n?"#888888":"#000000",border:"none",borderRadius:"8px",cursor:i&&!n?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:i&&!n?.5:1},onMouseOver:f=>{i&&!n||(f.target.style.backgroundColor="#00cc6a",f.target.style.transform="translateY(-2px)")},onMouseOut:f=>{i&&!n||(f.target.style.backgroundColor="#00ff88",f.target.style.transform="translateY(0)")},children:i?"START GAME":"START MULTIPLAYER"})]})]})}const MA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),vR=({text:e,className:t})=>{const n=E.useRef(null),r=E.useRef(null);return E.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,h;t.includes("font-orbitron")?(u=8,h=16):(u=8,h=12);let f=h;for(s.style.fontSize=f+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&f>u;)f-=.5,s.style.fontSize=f+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},sf=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:h})=>{let f=e.limit;l.forEach(se=>{se.mod.stat==="limit"&&(f+=se.mod.value)});const p=i>=f,m=n&&(!p||s),g=E.useMemo(()=>{const se={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(te=>{te.mod.stat==="cost"?se.cost=Math.max(0,se.cost+te.mod.value):se.hasOwnProperty(te.mod.stat)&&(se[te.mod.stat]+=te.mod.value)}),se},[e,l]),x=g.cost,S=g.attack>e.attack,A=g.attack<e.attack,C=S?"text-green-400":A?"text-red-400":"text-white",P=g.speed>e.speed,O=g.speed<e.speed,T=P?"text-green-400":O?"text-red-400":"text-white",j=g.cost<e.class,N=g.cost>e.class,D=j?"text-green-400":N?"text-red-400":"text-white",R=f>e.limit?"text-green-400":"text-white",{name:U,image:W,hull:Y,shields:J,abilities:ce}=e;return v.jsx("div",{onClick:m?()=>t(e):void 0,className:`
        w-60 h-[320px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${m?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${m?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:v.jsxs("div",{className:`
          w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden
        `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:W,alt:U,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(vR,{text:U,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(MA,{value:g.attack,isFlat:!1,icon:Ly,iconColor:"text-red-400",textColor:C})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:J>0&&Array.from({length:J}).map((se,te)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${te}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:Y}).map((se,te)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${te}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(MA,{value:g.speed,isFlat:!0,icon:Iy,iconColor:"text-blue-400",textColor:T})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-40 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:ce&&ce.length>0?ce.map((se,te)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:se.name}),v.jsx("p",{className:"text-gray-400 text-xs leading-tight font-exo",children:se.description})]},te)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Ic,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${D}`,children:x})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:se=>{se.stopPropagation(),h&&h(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${p?"text-pink-500":R}`,children:[i,"/",f]})})]})]})]})]})})},Zv=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(zv,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:" Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function bR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r}=Ui(),{droneSelectionPool:i,droneSelectionTrio:s,turnPhase:l}=e,u=r(),[h,f]=E.useState([]),[p,m]=E.useState(s),[g,x]=E.useState(i),[S,A]=E.useState({droneSelection:!1}),[C,P]=E.useState({droneSelection:!1});E.useEffect(()=>{const D=M=>{const{type:R,phase:U,playerId:W}=M.detail||M;console.log(` DroneSelectionScreen received PhaseManager event: ${R}`,{phase:U,playerId:W}),U==="droneSelection"&&(R==="playerCompleted"?W===t()?A(J=>({...J,droneSelection:!0})):n()&&P(J=>({...J,droneSelection:!0})):R==="phaseCompleted"&&(f([]),A(Y=>({...Y,droneSelection:!1})),P(Y=>({...Y,droneSelection:!1}))))};return window.addEventListener("phaseManagerEvent",D),()=>{window.removeEventListener("phaseManagerEvent",D)}},[t,n]);const O=D=>{if(l!=="droneSelection")return;console.log(" handleChooseDroneForSelection called with:",D.name);const M=[...h,D];if(f(M),M.length<5){const R=Uk(g);m(R.droneSelectionTrio),x(R.droneSelectionPool),console.log(" Advanced to next trio locally, selected:",M.length,"of 5 drones")}else console.log(" All 5 drones selected, waiting for Continue button click")},T=()=>{if(l!=="droneSelection")return;console.log(" handleContinueDroneSelection called with:",h.length,"drones");const D=t();Fe.actionProcessor.queueAction({type:"commitment",payload:{playerId:D,phase:"droneSelection",actionData:{drones:h}}}).then(M=>{if(!M.success){console.error(" Drone selection submission failed:",M.error);return}console.log(" Drone selection submitted successfully")}).catch(M=>{console.error(" Drone selection submission error:",M)}),console.log(" Drone selection submitted to PhaseManager")},j=S.droneSelection;if(n()&&j&&!C.droneSelection){const M=Fe.actionProcessor.getPhaseCommitmentStatus("droneSelection").commitments?.player1?.drones||u.activeDronePool||h,R=M.length>0?M.map(U=>U.name).join(", "):"Selection complete";return v.jsx(Zv,{phase:"droneSelection",localPlayerStatus:`You selected: ${R}`})}const N=h.length===5;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((D,M)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${M<h.length?"bg-green-500":"bg-gray-600"}`},M)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[h.length,"/5 drones selected"]})]}),N?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:" Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",h.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),p&&p.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:p.map((D,M)=>v.jsx(sf,{drone:D,onClick:()=>O(D),isSelectable:!0,deployedCount:0},D.name||M))})]}),v.jsx("button",{onClick:T,disabled:!N,className:`px-8 py-3 font-bold rounded-lg transition-all mb-8 ${N?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/25 hover:shadow-green-500/30 transform hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:N?"Continue to Deck Selection":`Continue (${h.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",h.length,"/5)",N&&v.jsx("span",{className:"text-green-400 ml-2",children:""})]}),h.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:h.map((D,M)=>v.jsx(sf,{drone:D,isSelectable:!1,deployedCount:0},M))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function xR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getOpponentPlayerState:i,addLogEntry:s}=Ui(),{turnPhase:l}=e,u=r();i();const[h,f]=E.useState({deckSelection:!1}),[p,m]=E.useState({deckSelection:!1});E.useEffect(()=>{const S=A=>{const{type:C,phase:P,playerId:O}=A.detail||A;console.log(` DeckSelectionScreen received PhaseManager event: ${C}`,{phase:P,playerId:O}),P==="deckSelection"&&(C==="playerCompleted"?O===t()?f(j=>({...j,deckSelection:!0})):n()&&m(j=>({...j,deckSelection:!0})):C==="phaseCompleted"&&(f(T=>({...T,deckSelection:!1})),m(T=>({...T,deckSelection:!1}))))};return window.addEventListener("phaseManagerEvent",S),()=>{window.removeEventListener("phaseManagerEvent",S)}},[t,n]);const g=async S=>{if(l==="deckSelection")if(console.log(" handleDeckChoice called with:",S),S==="standard"){const A=t(),C=ke.buildDeckFromList($s),P=await Fe.actionProcessor.processCommitment({phase:"deckSelection",playerId:A,actionData:{deck:C}});if(!P.success){console.error(" Deck selection submission failed:",P.error);return}console.log(" Standard deck selection submitted to PhaseManager"),s({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else S==="custom"&&(console.log(" Transitioning to deck building phase"),Bc.transitionToPhase("deckBuilding"))},x=u.deck&&u.deck.length>0;return console.log("Deck selection render check:",{isMultiplayer:n(),localPlayerHasDeck:x,opponentPhaseCompletion_deckSelection:p.deckSelection,turnPhase:l,localPlayerDeckLength:u.deck?.length}),n()&&x&&!p.deckSelection?v.jsx(Zv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>g("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"mt-6 bg-cyan-600 text-white font-bold px-6 py-2 rounded-full hover:bg-cyan-700 transition-colors duration-200",children:"Select"})]}),v.jsxs("div",{onClick:()=>g("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const SR=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),lf=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:h,isHovered:f,onMouseEnter:p,onMouseLeave:m,isCardTarget:g,isInMiddleLane:x,reallocationState:S,gameEngine:A,turnPhase:C,isMyTurn:P,passInfo:O,getLocalPlayerId:T,localPlayerState:j,shipAbilityMode:N,sectionRef:D})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const M=A.getShipStatus(t),R=M==="critical"?"bg-red-900/60":M==="damaged"?"bg-yellow-900/50":"bg-black/60";let U=M==="critical"?"border-red-500":M==="damaged"?"border-yellow-500":h?"border-pink-500":"border-cyan-500";const W=h?"shadow-pink-500/20":"shadow-cyan-500/20",Y=f?"scale-105 shadow-xl":"";let J="";if(S)switch(S){case"can-remove":U="border-orange-400",J="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":U="border-orange-600",J="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":U="border-gray-600",J="opacity-50";break;case"can-add":U="border-green-400",J="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":U="border-green-600",J="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":U="border-gray-600",J="opacity-50";break}const ce=g?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",se=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,L=>L.toUpperCase()),te={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{ref:D,className:`
        relative rounded-xl shadow-lg ${W} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${U}
        ${u?`cursor-pointer ${Y}`:""}
        ${ce}
        ${J}
      `,style:te,onClick:s,onMouseEnter:p,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${R}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-4 h-full",children:[v.jsx("div",{className:`absolute top-2 right-2 flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${M==="healthy"?"bg-green-500/20 text-green-300":M==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:M.charAt(0).toUpperCase()+M.slice(1)}),v.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:se}),v.jsx("p",{className:"text-xs text-gray-400 italic max-w-[200px]",children:t.description})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([L,ee])=>{const he=x&&t.middleLaneBonus&&t.middleLaneBonus[L];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[L,":"]}),v.jsx("span",{className:he?"text-green-400 font-bold":"",children:ee})]},L)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((L,ee)=>v.jsx("div",{children:ee<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},ee))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((L,ee)=>{const he=ee+1,{critical:Se,damaged:k}=t.thresholds;let Z;he<=Se?Z="bg-red-500":he<=k?Z="bg-orange-500":Z="bg-green-500";const F=ee<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${F?Z:"bg-gray-400"} border border-black/50`},ee)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(SR,{ability:t.ability,isUsable:C==="action"&&P()&&!O[`${T()}Passed`]&&j.energy>=t.ability.cost.energy,isSelected:N?.ability.id===t.ability.id,onClick:L=>l(L,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function AR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getLocalPlacedSections:i,setModalContent:s}=Ui(),{turnPhase:l,unplacedSections:u}=e,h=r(),f=i(),[p,m]=E.useState(null),[g,x]=E.useState(f||[null,null,null]),[S,A]=E.useState(u||["bridge","powerCell","droneControlHub"]),[C,P]=E.useState({placement:!1}),[O,T]=E.useState({placement:!1});E.useEffect(()=>{const R=U=>{const{type:W,phase:Y,playerId:J}=U.detail||U;console.log(` ShipPlacementScreen received PhaseManager event: ${W}`,{phase:Y,playerId:J}),Y==="placement"&&(W==="playerCompleted"?J===t()?P(se=>({...se,placement:!0})):n()&&T(se=>({...se,placement:!0})):W==="phaseCompleted"&&(P(ce=>({...ce,placement:!1})),T(ce=>({...ce,placement:!1}))))};return window.addEventListener("phaseManagerEvent",R),()=>{window.removeEventListener("phaseManagerEvent",R)}},[t,n]);const j=R=>{if(l==="placement")if(console.log(" handleSelectSectionForPlacement called with:",R,"gameMode:",e.gameMode),S.includes(R))m(U=>U===R?null:R);else{const U=g.indexOf(R),W=[...g];W[U]=null,x(W),A(Y=>[...Y,R]),m(null)}},N=R=>{if(l==="placement")if(console.log(" handleLaneSelectForPlacement called with lane:",R,"gameMode:",e.gameMode),p){if(g[R]){const U=g[R],W=[...g];W[R]=p;const Y=S.indexOf(p),J=[...S];J.splice(Y,1,U),x(W),A(J)}else{const U=[...g];U[R]=p,x(U),A(W=>W.filter(Y=>Y!==p))}m(null)}else g[R]&&j(g[R])},D=async()=>{if(l!=="placement")return;if(console.log(" handleConfirmPlacement called"),g.some(U=>U==null)){s({title:"Incomplete Placement",text:"All ship sections must be placed before confirming placement.",onClose:()=>s(null),isBlocking:!1});return}console.log(" Submitting placement to PhaseManager:",g);try{const U=await Fe.actionProcessor.processCommitment({phase:"placement",playerId:t(),actionData:{placedSections:g}});if(!U.success){console.error(" Placement submission failed:",U.error),s({title:"Placement Error",text:U.error,onClose:()=>s(null),isBlocking:!1});return}console.log(" Placement submitted to PhaseManager"),n()&&!U.data.bothComplete&&s({title:"Placement Confirmed",text:"Your ship placement has been confirmed. Waiting for opponent to complete their placement...",onClose:()=>s(null),isBlocking:!1})}catch(U){console.error(" Error submitting placement:",U),s({title:"Placement Error",text:"An error occurred while submitting placement. Please try again.",onClose:()=>s(null),isBlocking:!1})}};if(g&&g.length===3&&g.every(R=>R!==null),n()&&C.placement&&!O.placement){const R=g.map((U,W)=>U?U.name:"Empty").join(", ");return v.jsx(Zv,{phase:"placement",localPlayerStatus:`Your ship layout: ${R}`})}const M=g.every(R=>R!==null);return console.log(" ShipPlacementScreen rendered:",{allPlaced:M,placed:g,unplaced:u,selected:p}),v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(R=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes(R)&&v.jsx("div",{onClick:()=>j(R),className:`h-full transition-all duration-300 rounded-xl ${p===R?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(lf,{section:R,stats:h.shipSections[R],effectiveStatsForDisplay:h.shipSections[R].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:ke,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:h,shipAbilityMode:null})})},R))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(R=>{const U=g[R],W=p&&!g[R];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>N(R),children:U?v.jsx(lf,{section:U,stats:h.shipSections[U],effectiveStatsForDisplay:h.shipSections[U].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:R===1,gameEngine:ke,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:h,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${W?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:R===1?"Lane 2 (Center Bonus)":`Lane ${R+1}`})})},R)})})]}),v.jsx("button",{onClick:()=>{console.log(` Confirm Layout button clicked! allPlaced: ${M}`),D()},disabled:!M,className:"mt-12 bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 disabled:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed enabled:hover:bg-green-500 shadow-lg",children:"Confirm Layout"})]})]})}function WO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=WO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function nt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=WO(e))&&(r&&(r+=" "),r+=t);return r}var rg={},ag={},kA;function ER(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(ag)),ag}var ig={},RA;function QO(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(ig)),ig}var og={},IA;function ZO(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(og)),og}var sg={},LA;function Jv(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",h=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const f=n[s];u?f==="\\"&&s+1<i?(s++,l+=n[s]):f===u?u="":l+=f:h?f==='"'||f==="'"?u=f:f==="]"?(h=!1,r.push(l),l=""):l+=f:f==="["?(h=!0,l&&(r.push(l),l="")):f==="."?l&&(r.push(l),l=""):l+=f,s++}return l&&r.push(l),r}e.toPath=t})(sg)),sg}var $A;function e0(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ER(),n=QO(),r=ZO(),i=Jv();function s(u,h,f){if(u==null)return f;switch(typeof h){case"string":{if(t.isUnsafeProperty(h))return f;const p=u[h];return p===void 0?n.isDeepKey(h)?s(u,i.toPath(h),f):f:p}case"number":case"symbol":{typeof h=="number"&&(h=r.toKey(h));const p=u[h];return p===void 0?f:p}default:{if(Array.isArray(h))return l(u,h,f);if(Object.is(h?.valueOf(),-0)?h="-0":h=String(h),t.isUnsafeProperty(h))return f;const p=u[h];return p===void 0?f:p}}}function l(u,h,f){if(h.length===0)return f;let p=u;for(let m=0;m<h.length;m++){if(p==null||t.isUnsafeProperty(h[m]))return f;p=p[h[m]]}return p===void 0?f:p}e.get=s})(rg)),rg}var lg,BA;function CR(){return BA||(BA=1,lg=e0().get),lg}var PR=CR();const $o=Xr(PR);var cg={exports:{}},lt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UA;function wR(){if(UA)return lt;UA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var C=A.$$typeof;switch(C){case e:switch(A=A.type,A){case n:case i:case r:case h:case f:case g:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case p:return A;case s:return A;default:return C}}case t:return C}}}return lt.ContextConsumer=s,lt.ContextProvider=l,lt.Element=e,lt.ForwardRef=u,lt.Fragment=n,lt.Lazy=m,lt.Memo=p,lt.Portal=t,lt.Profiler=i,lt.StrictMode=r,lt.Suspense=h,lt.SuspenseList=f,lt.isContextConsumer=function(A){return S(A)===s},lt.isContextProvider=function(A){return S(A)===l},lt.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},lt.isForwardRef=function(A){return S(A)===u},lt.isFragment=function(A){return S(A)===n},lt.isLazy=function(A){return S(A)===m},lt.isMemo=function(A){return S(A)===p},lt.isPortal=function(A){return S(A)===t},lt.isProfiler=function(A){return S(A)===i},lt.isStrictMode=function(A){return S(A)===r},lt.isSuspense=function(A){return S(A)===h},lt.isSuspenseList=function(A){return S(A)===f},lt.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===h||A===f||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===p||A.$$typeof===l||A.$$typeof===s||A.$$typeof===u||A.$$typeof===x||A.getModuleId!==void 0)},lt.typeOf=S,lt}var zA;function OR(){return zA||(zA=1,cg.exports=wR()),cg.exports}var TR=OR(),ln=e=>e===0?0:e>0?1:-1,fr=e=>typeof e=="number"&&e!=+e,Do=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Te=e=>(typeof e=="number"||e instanceof Number)&&!fr(e),fa=e=>Te(e)||typeof e=="string",_R=0,Uc=e=>{var t=++_R;return"".concat(e||"").concat(t)},Tn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Te(t)&&typeof t!="string")return r;var s;if(Do(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return fr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},JO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function bn(e,t,n){return Te(e)&&Te(t)?e+n*(t-e):t}function DR(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):$o(r,t))===n)}var cn=e=>e===null||typeof e>"u",Wc=e=>cn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),NR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function t0(e){if(typeof e!="string")return!1;var t=NR;return t.includes(e)}var jR=["viewBox","children"],GA=["points","pathLength"],ug={svg:jR,polygon:GA,polyline:GA},MR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{t0(i)&&(r[i]=(s=>n[i](n,s)))}),r},kR=(e,t,n)=>r=>(e(t,n,r),null),Qc=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];t0(i)&&typeof s=="function"&&(r||(r={}),r[i]=kR(s,t,n))}),r},RR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function e2(e){if(typeof e!="string")return!1;var t=RR;return t.includes(e)}function Fo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return e2(r)});return Object.fromEntries(t)}var HA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",qA=null,dg=null,t2=e=>{if(e===qA&&Array.isArray(dg))return dg;var t=[];return E.Children.forEach(e,n=>{cn(n)||(TR.isFragment(n)?t=t.concat(t2(n.props.children)):t.push(n))}),dg=t,qA=e,t};function n0(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>HA(i)):r=[HA(t)],t2(e).forEach(i=>{var s=$o(i,"type.displayName")||$o(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var IR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&ug?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||e2(t)),h=!!n&&t0(t);return l||u||h},Ut=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;IR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},LR=["children","width","height","viewBox","className","style","title","desc"];function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ky.apply(null,arguments)}function $R(e,t){if(e==null)return{};var n,r,i=BR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var r0=E.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:h,desc:f}=e,p=$R(e,LR),m=s||{width:r,height:i,x:0,y:0},g=nt("recharts-surface",l);return E.createElement("svg",Ky({},Ut(p,!0,"svg"),{className:g,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),E.createElement("title",null,h),E.createElement("desc",null,f),n)}),UR=["children","className"];function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(null,arguments)}function zR(e,t){if(e==null)return{};var n,r,i=GR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Vn=E.forwardRef((e,t)=>{var{children:n,className:r}=e,i=zR(e,UR),s=nt("recharts-layer",r);return E.createElement("g",Xy({className:s},Ut(i,!0),{ref:t}),n)}),n2=$w(),r2=E.createContext(null),HR=()=>E.useContext(r2);function ht(e){return function(){return e}}const a2=Math.cos,cf=Math.sin,Wr=Math.sqrt,uf=Math.PI,Kf=2*uf,Wy=Math.PI,Qy=2*Wy,Oo=1e-6,qR=Qy-Oo;function i2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function YR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return i2;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class FR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?i2:YR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,h=r-t,f=i-n,p=l-t,m=u-n,g=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Oo)if(!(Math.abs(m*h-f*p)>Oo)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,S=i-u,A=h*h+f*f,C=x*x+S*S,P=Math.sqrt(A),O=Math.sqrt(g),T=s*Math.tan((Wy-Math.acos((A+g-C)/(2*P*O)))/2),j=T/O,N=T/P;Math.abs(j-1)>Oo&&this._append`L${t+j*p},${n+j*m}`,this._append`A${s},${s},0,0,${+(m*x>p*S)},${this._x1=t+N*h},${this._y1=n+N*f}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),h=r*Math.sin(i),f=t+u,p=n+h,m=1^l,g=l?i-s:s-i;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>Oo||Math.abs(this._y1-p)>Oo)&&this._append`L${f},${p}`,r&&(g<0&&(g=g%Qy+Qy),g>qR?this._append`A${r},${r},0,1,${m},${t-u},${n-h}A${r},${r},0,1,${m},${this._x1=f},${this._y1=p}`:g>Oo&&this._append`A${r},${r},0,${+(g>=Wy)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function a0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new FR(t)}function i0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function o2(e){this._context=e}o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Xf(e){return new o2(e)}function s2(e){return e[0]}function l2(e){return e[1]}function c2(e,t){var n=ht(!0),r=null,i=Xf,s=null,l=a0(u);e=typeof e=="function"?e:e===void 0?s2:ht(e),t=typeof t=="function"?t:t===void 0?l2:ht(t);function u(h){var f,p=(h=i0(h)).length,m,g=!1,x;for(r==null&&(s=i(x=l())),f=0;f<=p;++f)!(f<p&&n(m=h[f],f,h))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+e(m,f,h),+t(m,f,h));if(x)return s=null,x+""||null}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:ht(+h),u):e},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:ht(+h),u):t},u.defined=function(h){return arguments.length?(n=typeof h=="function"?h:ht(!!h),u):n},u.curve=function(h){return arguments.length?(i=h,r!=null&&(s=i(r)),u):i},u.context=function(h){return arguments.length?(h==null?r=s=null:s=i(r=h),u):r},u}function Nd(e,t,n){var r=null,i=ht(!0),s=null,l=Xf,u=null,h=a0(f);e=typeof e=="function"?e:e===void 0?s2:ht(+e),t=typeof t=="function"?t:ht(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?l2:ht(+n);function f(m){var g,x,S,A=(m=i0(m)).length,C,P=!1,O,T=new Array(A),j=new Array(A);for(s==null&&(u=l(O=h())),g=0;g<=A;++g){if(!(g<A&&i(C=m[g],g,m))===P)if(P=!P)x=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=g-1;S>=x;--S)u.point(T[S],j[S]);u.lineEnd(),u.areaEnd()}P&&(T[g]=+e(C,g,m),j[g]=+t(C,g,m),u.point(r?+r(C,g,m):T[g],n?+n(C,g,m):j[g]))}if(O)return u=null,O+""||null}function p(){return c2().defined(i).curve(l).context(s)}return f.x=function(m){return arguments.length?(e=typeof m=="function"?m:ht(+m),r=null,f):e},f.x0=function(m){return arguments.length?(e=typeof m=="function"?m:ht(+m),f):e},f.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:ht(+m),f):r},f.y=function(m){return arguments.length?(t=typeof m=="function"?m:ht(+m),n=null,f):t},f.y0=function(m){return arguments.length?(t=typeof m=="function"?m:ht(+m),f):t},f.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:ht(+m),f):n},f.lineX0=f.lineY0=function(){return p().x(e).y(t)},f.lineY1=function(){return p().x(e).y(n)},f.lineX1=function(){return p().x(r).y(t)},f.defined=function(m){return arguments.length?(i=typeof m=="function"?m:ht(!!m),f):i},f.curve=function(m){return arguments.length?(l=m,s!=null&&(u=l(s)),f):l},f.context=function(m){return arguments.length?(m==null?s=u=null:u=l(s=m),f):s},f}class u2{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function VR(e){return new u2(e,!0)}function KR(e){return new u2(e,!1)}const o0={draw(e,t){const n=Wr(t/uf);e.moveTo(n,0),e.arc(0,0,n,0,Kf)}},XR={draw(e,t){const n=Wr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},d2=Wr(1/3),WR=d2*2,QR={draw(e,t){const n=Wr(t/WR),r=n*d2;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},ZR={draw(e,t){const n=Wr(t),r=-n/2;e.rect(r,r,n,n)}},JR=.8908130915292852,f2=cf(uf/10)/cf(7*uf/10),eI=cf(Kf/10)*f2,tI=-a2(Kf/10)*f2,nI={draw(e,t){const n=Wr(t*JR),r=eI*n,i=tI*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=Kf*s/5,u=a2(l),h=cf(l);e.lineTo(h*n,-u*n),e.lineTo(u*r-h*i,h*r+u*i)}e.closePath()}},fg=Wr(3),rI={draw(e,t){const n=-Wr(t/(fg*3));e.moveTo(0,n*2),e.lineTo(-fg*n,-n),e.lineTo(fg*n,-n),e.closePath()}},Tr=-.5,_r=Wr(3)/2,Zy=1/Wr(12),aI=(Zy/2+1)*3,iI={draw(e,t){const n=Wr(t/aI),r=n/2,i=n*Zy,s=r,l=n*Zy+n,u=-s,h=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,h),e.lineTo(Tr*r-_r*i,_r*r+Tr*i),e.lineTo(Tr*s-_r*l,_r*s+Tr*l),e.lineTo(Tr*u-_r*h,_r*u+Tr*h),e.lineTo(Tr*r+_r*i,Tr*i-_r*r),e.lineTo(Tr*s+_r*l,Tr*l-_r*s),e.lineTo(Tr*u+_r*h,Tr*h-_r*u),e.closePath()}};function oI(e,t){let n=null,r=a0(i);e=typeof e=="function"?e:ht(e||o0),t=typeof t=="function"?t:ht(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:ht(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:ht(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function df(){}function ff(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function h2(e){this._context=e}h2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ff(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ff(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sI(e){return new h2(e)}function p2(e){this._context=e}p2.prototype={areaStart:df,areaEnd:df,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ff(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lI(e){return new p2(e)}function m2(e){this._context=e}m2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ff(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cI(e){return new m2(e)}function g2(e){this._context=e}g2.prototype={areaStart:df,areaEnd:df,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uI(e){return new g2(e)}function YA(e){return e<0?-1:1}function FA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(YA(s)+YA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function VA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function hg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function hf(e){this._context=e}hf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hg(this,this._t0,VA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hg(this,VA(this,n=FA(this,e,t)),n);break;default:hg(this,this._t0,n=FA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function y2(e){this._context=new v2(e)}(y2.prototype=Object.create(hf.prototype)).point=function(e,t){hf.prototype.point.call(this,t,e)};function v2(e){this._context=e}v2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function dI(e){return new hf(e)}function fI(e){return new y2(e)}function b2(e){this._context=e}b2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=KA(e),i=KA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function KA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function hI(e){return new b2(e)}function Wf(e,t){this._context=e,this._t=t}Wf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function pI(e){return new Wf(e,.5)}function mI(e){return new Wf(e,0)}function gI(e){return new Wf(e,1)}function qs(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Jy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function yI(e,t){return e[t]}function vI(e){const t=[];return t.key=e,t}function bI(){var e=ht([]),t=Jy,n=qs,r=yI;function i(s){var l=Array.from(e.apply(this,arguments),vI),u,h=l.length,f=-1,p;for(const m of s)for(u=0,++f;u<h;++u)(l[u][f]=[0,+r(m,l[u].key,f,s)]).data=m;for(u=0,p=i0(t(l));u<h;++u)l[p[u]].index=u;return n(l,p),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:ht(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:ht(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Jy:typeof s=="function"?s:ht(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??qs,i):n},i}function xI(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}qs(e,t)}}function SI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}qs(e,t)}}function AI(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,h=0,f=0;u<l;++u){for(var p=e[t[u]],m=p[r][1]||0,g=p[r-1][1]||0,x=(m-g)/2,S=0;S<u;++S){var A=e[t[S]],C=A[r][1]||0,P=A[r-1][1]||0;x+=C-P}h+=m,f+=x*m}i[r-1][1]+=i[r-1][0]=n,h&&(n-=f/h)}i[r-1][1]+=i[r-1][0]=n,qs(e,t)}}var EI=["type","size","sizeType"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(r){CI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CI(e,t,n){return(t=PI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PI(e){var t=wI(e,"string");return typeof t=="symbol"?t:t+""}function wI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OI(e,t){if(e==null)return{};var n,r,i=TI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function TI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var x2={symbolCircle:o0,symbolCross:XR,symbolDiamond:QR,symbolSquare:ZR,symbolStar:nI,symbolTriangle:rI,symbolWye:iI},_I=Math.PI/180,DI=e=>{var t="symbol".concat(Wc(e));return x2[t]||o0},NI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*_I;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},jI=(e,t)=>{x2["symbol".concat(Wc(e))]=t},s0=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=OI(e,EI),s=WA(WA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var g=DI(l),x=oI().type(g).size(NI(n,r,l));return x()},{className:h,cx:f,cy:p}=s,m=Ut(s,!0);return f===+f&&p===+p&&n===+n?E.createElement("path",ev({},m,{className:nt("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:u()})):null};s0.registerSymbol=jI;function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(n),!0).forEach(function(r){l0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l0(e,t,n){return(t=kI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kI(e){var t=RI(e,"string");return typeof t=="symbol"?t:t+""}function RI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dr=32;class c0 extends E.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Dr/2,s=Dr/6,l=Dr/3,u=t.inactive?r:t.color,h=n??t.type;if(h==="none")return null;if(h==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Dr,y2:i,className:"recharts-legend-icon"});if(h==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Dr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(h==="rect")return E.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Dr/8,"h").concat(Dr,"v").concat(Dr*3/4,"h").concat(-Dr,"z"),className:"recharts-legend-icon"});if(E.isValidElement(t.legendIcon)){var f=MI({},t);return delete f.legendIcon,E.cloneElement(t.legendIcon,f)}return E.createElement(s0,{fill:u,cx:i,cy:i,size:Dr,sizeType:"diameter",type:h})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Dr,height:Dr},h={display:r==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,m)=>{var g=p.formatter||i,x=nt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:p.inactive});if(p.type==="none")return null;var S=p.inactive?s:p.color,A=g?g(p.value,p,m):p.value;return E.createElement("li",tv({className:x,style:h,key:"legend-item-".concat(m)},Qc(this.props,p,m)),E.createElement(r0,{width:n,height:n,viewBox:u,style:f,"aria-label":"".concat(A," legend icon")},this.renderIcon(p,l)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}l0(c0,"displayName","Legend");l0(c0,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var pg={},mg={},ZA;function II(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(mg)),mg}var gg={},JA;function S2(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(gg)),gg}var yg={},vg={},bg={},eE;function LI(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(bg)),bg}var tE;function u0(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LI();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(vg)),vg}var xg={},nE;function $I(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(xg)),xg}var rE;function BI(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u0(),n=$I();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(yg)),yg}var Sg={},Ag={},aE;function UI(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e0();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Ag)),Ag}var Eg={},Cg={},Pg={},wg={},iE;function A2(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(wg)),wg}var Og={},oE;function E2(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Og)),Og}var Tg={},sE;function C2(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Tg)),Tg}var lE;function zI(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d0(),n=A2(),r=E2(),i=C2();function s(m,g,x){return typeof x!="function"?t.isMatch(m,g):l(m,g,function S(A,C,P,O,T,j){const N=x(A,C,P,O,T,j);return N!==void 0?!!N:l(A,C,S,j)},new Map)}function l(m,g,x,S){if(g===m)return!0;switch(typeof g){case"object":return u(m,g,x,S);case"function":return Object.keys(g).length>0?l(m,{...g},x,S):i.eq(m,g);default:return n.isObject(m)?typeof g=="string"?g==="":!0:i.eq(m,g)}}function u(m,g,x,S){if(g==null)return!0;if(Array.isArray(g))return f(m,g,x,S);if(g instanceof Map)return h(m,g,x,S);if(g instanceof Set)return p(m,g,x,S);const A=Object.keys(g);if(m==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(g))return S.get(g)===m;S&&S.set(g,m);try{for(let C=0;C<A.length;C++){const P=A[C];if(!r.isPrimitive(m)&&!(P in m)||g[P]===void 0&&m[P]!==void 0||g[P]===null&&m[P]!==null||!x(m[P],g[P],P,m,g,S))return!1}return!0}finally{S&&S.delete(g)}}function h(m,g,x,S){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,C]of g.entries()){const P=m.get(A);if(x(P,C,A,m,g,S)===!1)return!1}return!0}function f(m,g,x,S){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let C=0;C<g.length;C++){const P=g[C];let O=!1;for(let T=0;T<m.length;T++){if(A.has(T))continue;const j=m[T];let N=!1;if(x(j,P,C,m,g,S)&&(N=!0),N){A.add(T),O=!0;break}}if(!O)return!1}return!0}function p(m,g,x,S){return g.size===0?!0:m instanceof Set?f([...m],[...g],x,S):!1}e.isMatchWith=s,e.isSetMatch=p})(Pg)),Pg}var cE;function d0(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Cg)),Cg}var _g={},Dg={},Ng={},uE;function GI(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Ng)),Ng}var jg={},dE;function P2(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(jg)),jg}var Mg={},fE;function w2(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",h="[object Map]",f="[object Set]",p="[object Array]",m="[object Function]",g="[object ArrayBuffer]",x="[object Object]",S="[object Error]",A="[object DataView]",C="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",T="[object Uint32Array]",j="[object BigUint64Array]",N="[object Int8Array]",D="[object Int16Array]",M="[object Int32Array]",R="[object BigInt64Array]",U="[object Float32Array]",W="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=g,e.arrayTag=p,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=j,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=U,e.float64ArrayTag=W,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=M,e.int8ArrayTag=N,e.mapTag=h,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=f,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=T,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=P})(Mg)),Mg}var kg={},hE;function HI(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(kg)),kg}var pE;function O2(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GI(),n=P2(),r=w2(),i=E2(),s=HI();function l(p,m){return u(p,void 0,p,new Map,m)}function u(p,m,g,x=new Map,S=void 0){const A=S?.(p,m,g,x);if(A!==void 0)return A;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const C=new Array(p.length);x.set(p,C);for(let P=0;P<p.length;P++)C[P]=u(p[P],P,g,x,S);return Object.hasOwn(p,"index")&&(C.index=p.index),Object.hasOwn(p,"input")&&(C.input=p.input),C}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const C=new RegExp(p.source,p.flags);return C.lastIndex=p.lastIndex,C}if(p instanceof Map){const C=new Map;x.set(p,C);for(const[P,O]of p)C.set(P,u(O,P,g,x,S));return C}if(p instanceof Set){const C=new Set;x.set(p,C);for(const P of p)C.add(u(P,void 0,g,x,S));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const C=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,C);for(let P=0;P<p.length;P++)C[P]=u(p[P],P,g,x,S);return C}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const C=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,C),h(C,p,g,x,S),C}if(typeof File<"u"&&p instanceof File){const C=new File([p],p.name,{type:p.type});return x.set(p,C),h(C,p,g,x,S),C}if(p instanceof Blob){const C=new Blob([p],{type:p.type});return x.set(p,C),h(C,p,g,x,S),C}if(p instanceof Error){const C=new p.constructor;return x.set(p,C),C.message=p.message,C.name=p.name,C.stack=p.stack,C.cause=p.cause,h(C,p,g,x,S),C}if(typeof p=="object"&&f(p)){const C=Object.create(Object.getPrototypeOf(p));return x.set(p,C),h(C,p,g,x,S),C}return p}function h(p,m,g=p,x,S){const A=[...Object.keys(m),...t.getSymbols(m)];for(let C=0;C<A.length;C++){const P=A[C],O=Object.getOwnPropertyDescriptor(p,P);(O==null||O.writable)&&(p[P]=u(m[P],P,g,x,S))}}function f(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=h})(Dg)),Dg}var mE;function qI(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O2();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(_g)),_g}var gE;function YI(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d0(),n=qI();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Eg)),Eg}var Rg={},Ig={},Lg={},yE;function FI(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O2(),n=w2();function r(i,s){return t.cloneDeepWith(i,(l,u,h,f)=>{const p=s?.(l,u,h,f);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(Lg)),Lg}var vE;function VI(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Ig)),Ig}var $g={},Bg={},bE;function T2(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Bg)),Bg}var Ug={},xE;function KI(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P2();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Ug)),Ug}var SE;function XI(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QO(),n=T2(),r=KI(),i=Jv();function s(l,u){let h;if(Array.isArray(u)?h=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?h=i.toPath(u):h=[u],h.length===0)return!1;let f=l;for(let p=0;p<h.length;p++){const m=h[p];if((f==null||!Object.hasOwn(f,m))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(m)&&m<f.length))return!1;f=f[m]}return!0}e.has=s})($g)),$g}var AE;function WI(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d0(),n=ZO(),r=VI(),i=e0(),s=XI();function l(u,h){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return h=r.cloneDeep(h),function(f){const p=i.get(f,u);return p===void 0?s.has(f,u):h===void 0?p===void 0:t.isMatch(p,h)}}e.matchesProperty=l})(Rg)),Rg}var EE;function QI(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S2(),n=UI(),r=YI(),i=WI();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Sg)),Sg}var CE;function ZI(){return CE||(CE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=II(),n=S2(),r=BI(),i=QI();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(pg)),pg}var zg,PE;function JI(){return PE||(PE=1,zg=ZI().uniqBy),zg}var eL=JI();const wE=Xr(eL);function _2(e,t,n){return t===!0?wE(e,n):typeof t=="function"?wE(e,t):e}var Gg={exports:{}},Hg={},qg={exports:{}},Yg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function tL(){if(OE)return Yg;OE=1;var e=tl();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(m,g){var x=g(),S=r({inst:{value:x,getSnapshot:g}}),A=S[0].inst,C=S[1];return s(function(){A.value=x,A.getSnapshot=g,h(A)&&C({inst:A})},[m,x,g]),i(function(){return h(A)&&C({inst:A}),m(function(){h(A)&&C({inst:A})})},[m]),l(x),x}function h(m){var g=m.getSnapshot;m=m.value;try{var x=g();return!n(m,x)}catch{return!0}}function f(m,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Yg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Yg}var TE;function nL(){return TE||(TE=1,qg.exports=tL()),qg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function rL(){if(_E)return Hg;_E=1;var e=tl(),t=nL();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,h=e.useDebugValue;return Hg.useSyncExternalStoreWithSelector=function(f,p,m,g,x){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function P(D){if(!O){if(O=!0,T=D,D=g(D),x!==void 0&&A.hasValue){var M=A.value;if(x(M,D))return j=M}return j=D}if(M=j,r(T,D))return M;var R=g(D);return x!==void 0&&x(M,R)?(T=D,M):(T=D,j=R)}var O=!1,T,j,N=m===void 0?null:m;return[function(){return P(p())},N===null?void 0:function(){return P(N())}]},[p,m,g,x]);var C=i(f,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=C},[C]),h(C),C},Hg}var DE;function aL(){return DE||(DE=1,Gg.exports=rL()),Gg.exports}var iL=aL(),f0=E.createContext(null),oL=e=>e,Et=()=>{var e=E.useContext(f0);return e?e.store.dispatch:oL},tf=()=>{},sL=()=>tf,lL=(e,t)=>e===t;function we(e){var t=E.useContext(f0);return iL.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:sL,t?t.store.getState:tf,t?t.store.getState:tf,t?e:tf,lL)}function cL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function uL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function dL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var NE=e=>Array.isArray(e)?e:[e];function fL(e){const t=Array.isArray(e[0])?e[0]:e;return dL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function hL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var pL=class{constructor(e){this.value=e}deref(){return this.value}},mL=typeof WeakRef<"u"?WeakRef:pL,gL=0,jE=1;function jd(){return{s:gL,v:void 0,o:null,p:null}}function D2(e,t={}){let n=jd();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:h}=arguments;for(let m=0,g=h;m<g;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(x);A===void 0?(u=jd(),S.set(x,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(x);A===void 0?(u=jd(),S.set(x,u)):u=A}}const f=u;let p;if(u.s===jE)p=u.v;else if(p=e.apply(null,arguments),s++,r){const m=i?.deref?.()??i;m!=null&&r(m,p)&&(p=m,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new mL(p):p}return f.s=jE,f.v=p,p}return l.clearCache=()=>{n=jd(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function yL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,h={},f=i.pop();typeof f=="object"&&(h=f,f=i.pop()),cL(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const p={...n,...h},{memoize:m,memoizeOptions:g=[],argsMemoize:x=D2,argsMemoizeOptions:S=[]}=p,A=NE(g),C=NE(S),P=fL(i),O=m(function(){return s++,f.apply(null,arguments)},...A),T=x(function(){l++;const N=hL(P,arguments);return u=O.apply(null,N),u},...C);return Object.assign(T,{resultFunc:f,memoizedResultFunc:O,dependencies:P,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var X=yL(D2),vL=Object.assign((e,t=X)=>{uL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,h)=>(l[n[h]]=u,l),{}))},{withTypes:()=>vL}),Fg={},Vg={},Kg={},ME;function bL(){return ME||(ME=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(Kg)),Kg}var Xg={},Wg={},kE;function N2(){return kE||(kE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Wg)),Wg}var RE;function xL(){return RE||(RE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N2(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Xg)),Xg}var IE;function SL(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bL(),n=xL(),r=Jv();function i(s,l,u,h){if(s==null)return[];u=h?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const f=(x,S)=>{let A=x;for(let C=0;C<S.length&&A!=null;++C)A=A[S[C]];return A},p=(x,S)=>S==null||x==null?S:typeof x=="object"&&"key"in x?Object.hasOwn(S,x.key)?S[x.key]:f(S,x.path):typeof x=="function"?x(S):Array.isArray(x)?f(S,x):typeof S=="object"?S[x]:S,m=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:m.map(S=>p(S,x))})).slice().sort((x,S)=>{for(let A=0;A<m.length;A++){const C=t.compareValues(x.criteria[A],S.criteria[A],u[A]);if(C!==0)return C}return 0}).map(x=>x.original)}e.orderBy=i})(Vg)),Vg}var Qg={},LE;function AL(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,h)=>{for(let f=0;f<u.length;f++){const p=u[f];Array.isArray(p)&&h<s?l(p,h+1):i.push(p)}};return l(n,0),i}e.flatten=t})(Qg)),Qg}var Zg={},$E;function j2(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T2(),n=u0(),r=A2(),i=C2();function s(l,u,h){return r.isObject(h)&&(typeof u=="number"&&n.isArrayLike(h)&&t.isIndex(u)&&u<h.length||typeof u=="string"&&u in h)?i.eq(h[u],l):!1}e.isIterateeCall=s})(Zg)),Zg}var BE;function EL(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SL(),n=AL(),r=j2();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(Fg)),Fg}var Jg,UE;function CL(){return UE||(UE=1,Jg=EL().sortBy),Jg}var PL=CL();const Qf=Xr(PL);var M2=e=>e.legend.settings,wL=e=>e.legend.size,OL=e=>e.legend.payload,TL=X([OL,M2],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Qf(r,n):r});function _L(){return we(TL)}var Md=1;function k2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Md||Math.abs(l.left-t.left)>Md||Math.abs(l.top-t.top)>Md||Math.abs(l.width-t.width)>Md)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function yn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var DL=typeof Symbol=="function"&&Symbol.observable||"@@observable",zE=DL,ey=()=>Math.random().toString(36).substring(7).split("").join("."),NL={INIT:`@@redux/INIT${ey()}`,REPLACE:`@@redux/REPLACE${ey()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ey()}`},pf=NL;function h0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function R2(e,t,n){if(typeof e!="function")throw new Error(yn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(yn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(yn(1));return n(R2)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,h=!1;function f(){l===s&&(l=new Map,s.forEach((C,P)=>{l.set(P,C)}))}function p(){if(h)throw new Error(yn(3));return i}function m(C){if(typeof C!="function")throw new Error(yn(4));if(h)throw new Error(yn(5));let P=!0;f();const O=u++;return l.set(O,C),function(){if(P){if(h)throw new Error(yn(6));P=!1,f(),l.delete(O),s=null}}}function g(C){if(!h0(C))throw new Error(yn(7));if(typeof C.type>"u")throw new Error(yn(8));if(typeof C.type!="string")throw new Error(yn(17));if(h)throw new Error(yn(9));try{h=!0,i=r(i,C)}finally{h=!1}return(s=l).forEach(O=>{O()}),C}function x(C){if(typeof C!="function")throw new Error(yn(10));r=C,g({type:pf.REPLACE})}function S(){const C=m;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(yn(11));function O(){const j=P;j.next&&j.next(p())}return O(),{unsubscribe:C(O)}},[zE](){return this}}}return g({type:pf.INIT}),{dispatch:g,subscribe:m,getState:p,replaceReducer:x,[zE]:S}}function jL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:pf.INIT})>"u")throw new Error(yn(12));if(typeof n(void 0,{type:pf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(yn(13))})}function I2(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{jL(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let h=!1;const f={};for(let p=0;p<r.length;p++){const m=r[p],g=n[m],x=l[m],S=g(x,u);if(typeof S>"u")throw u&&u.type,new Error(yn(14));f[m]=S,h=h||S!==x}return h=h||r.length!==Object.keys(l).length,h?f:l}}function mf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function ML(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(yn(15))};const l={getState:i.getState,dispatch:(h,...f)=>s(h,...f)},u=e.map(h=>h(l));return s=mf(...u)(i.dispatch),{...i,dispatch:s}}}function L2(e){return h0(e)&&"type"in e&&typeof e.type=="string"}var $2=Symbol.for("immer-nothing"),GE=Symbol.for("immer-draftable"),hr=Symbol.for("immer-state");function Vr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ys=Object.getPrototypeOf;function Bo(e){return!!e&&!!e[hr]}function Va(e){return e?B2(e)||Array.isArray(e)||!!e[GE]||!!e.constructor?.[GE]||Zc(e)||Jf(e):!1}var kL=Object.prototype.constructor.toString();function B2(e){if(!e||typeof e!="object")return!1;const t=Ys(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===kL}function gf(e,t){Zf(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Zf(e){const t=e[hr];return t?t.type_:Array.isArray(e)?1:Zc(e)?2:Jf(e)?3:0}function nv(e,t){return Zf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function U2(e,t,n){const r=Zf(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function RL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Zc(e){return e instanceof Map}function Jf(e){return e instanceof Set}function To(e){return e.copy_||e.base_}function rv(e,t){if(Zc(e))return new Map(e);if(Jf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=B2(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[hr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ys(e),r)}else{const r=Ys(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function p0(e,t=!1){return eh(e)||Bo(e)||!Va(e)||(Zf(e)>1&&Object.defineProperties(e,{set:{value:kd},add:{value:kd},clear:{value:kd},delete:{value:kd}}),Object.freeze(e),t&&Object.values(e).forEach(n=>p0(n,!0))),e}function kd(){Vr(2)}function eh(e){return Object.isFrozen(e)}var IL={};function Uo(e){const t=IL[e];return t||Vr(0,e),t}var zc;function z2(){return zc}function LL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function HE(e,t){t&&(Uo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function av(e){iv(e),e.drafts_.forEach($L),e.drafts_=null}function iv(e){e===zc&&(zc=e.parent_)}function qE(e){return zc=LL(zc,e)}function $L(e){const t=e[hr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function YE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[hr].modified_&&(av(t),Vr(4)),Va(e)&&(e=yf(t,e),t.parent_||vf(t,e)),t.patches_&&Uo("Patches").generateReplacementPatches_(n[hr].base_,e,t.patches_,t.inversePatches_)):e=yf(t,n,[]),av(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$2?e:void 0}function yf(e,t,n){if(eh(t))return t;const r=t[hr];if(!r)return gf(t,(i,s)=>FE(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return vf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),gf(s,(u,h)=>FE(e,r,i,u,h,n,l)),vf(e,i,!1),n&&e.patches_&&Uo("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function FE(e,t,n,r,i,s,l){if(Bo(i)){const u=s&&t&&t.type_!==3&&!nv(t.assigned_,r)?s.concat(r):void 0,h=yf(e,i,u);if(U2(n,r,h),Bo(h))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Va(i)&&!eh(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;yf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Zc(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&vf(e,i)}}function vf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&p0(t,n)}function BL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:z2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=m0;n&&(i=[r],s=Gc);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var m0={get(e,t){if(t===hr)return e;const n=To(e);if(!nv(n,t))return UL(e,n,t);const r=n[t];return e.finalized_||!Va(r)?r:r===ty(e.base_,t)?(ny(e),e.copy_[t]=sv(r,e)):r},has(e,t){return t in To(e)},ownKeys(e){return Reflect.ownKeys(To(e))},set(e,t,n){const r=G2(To(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=ty(To(e),t),s=i?.[hr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(RL(n,i)&&(n!==void 0||nv(e.base_,t)))return!0;ny(e),ov(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ty(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ny(e),ov(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=To(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Vr(11)},getPrototypeOf(e){return Ys(e.base_)},setPrototypeOf(){Vr(12)}},Gc={};gf(m0,(e,t)=>{Gc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Gc.deleteProperty=function(e,t){return Gc.set.call(this,e,t,void 0)};Gc.set=function(e,t,n){return m0.set.call(this,e[0],t,n,e[0])};function ty(e,t){const n=e[hr];return(n?To(n):e)[t]}function UL(e,t,n){const r=G2(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function G2(e,t){if(!(t in e))return;let n=Ys(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Ys(n)}}function ov(e){e.modified_||(e.modified_=!0,e.parent_&&ov(e.parent_))}function ny(e){e.copy_||(e.copy_=rv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(h=s,...f){return l.produce(h,p=>n.call(this,p,...f))}}typeof n!="function"&&Vr(6),r!==void 0&&typeof r!="function"&&Vr(7);let i;if(Va(t)){const s=qE(this),l=sv(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?av(s):iv(s)}return HE(s,r),YE(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===$2&&(i=void 0),this.autoFreeze_&&p0(i,!0),r){const s=[],l=[];Uo("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else Vr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,h=>t(h,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Va(e)||Vr(8),Bo(e)&&(e=Ya(e));const t=qE(this),n=sv(e,void 0);return n[hr].isManual_=!0,iv(t),n}finishDraft(e,t){const n=e&&e[hr];(!n||!n.isManual_)&&Vr(9);const{scope_:r}=n;return HE(r,t),YE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Uo("Patches").applyPatches_;return Bo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function sv(e,t){const n=Zc(e)?Uo("MapSet").proxyMap_(e,t):Jf(e)?Uo("MapSet").proxySet_(e,t):BL(e,t);return(t?t.scope_:z2()).drafts_.push(n),n}function Ya(e){return Bo(e)||Vr(10,e),H2(e)}function H2(e){if(!Va(e)||eh(e))return e;const t=e[hr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=rv(e,t.scope_.immer_.useStrictShallowCopy_)}else n=rv(e,!0);return gf(n,(r,i)=>{U2(n,r,H2(i))}),t&&(t.finalized_=!1),n}var GL=new zL,q2=GL.produce;function Y2(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var HL=Y2(),qL=Y2,YL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mf:mf.apply(null,arguments)};function Rr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(dr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>L2(r)&&r.type===e,n}var F2=class _c extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,_c.prototype)}static get[Symbol.species](){return _c}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new _c(...t[0].concat(this)):new _c(...t.concat(this))}};function VE(e){return Va(e)?q2(e,()=>{}):e}function Rd(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function FL(e){return typeof e=="boolean"}var VL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new F2;return n&&(FL(n)?l.push(HL):l.push(qL(n.extraArgument))),l},KL="RTK_autoBatch",KE=e=>t=>{setTimeout(t,e)},XL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:KE(10):e.type==="callback"?e.queueNotification:KE(e.timeout),f=()=>{l=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const m=()=>i&&p(),g=r.subscribe(m);return u.add(p),()=>{g(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[KL],s=!i,s&&(l||(l=!0,h(f))),r.dispatch(p)}finally{i=!0}}})},WL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new F2(e);return r&&i.push(XL(typeof r=="object"?r:void 0)),i};function QL(e){const t=VL(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(h0(n))u=I2(n);else throw new Error(dr(1));let h;typeof r=="function"?h=r(t):h=t();let f=mf;i&&(f=YL({trace:!1,...typeof i=="object"&&i}));const p=ML(...h),m=WL(p);let g=typeof l=="function"?l(m):m();const x=f(...g);return R2(u,s,x)}function V2(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(dr(28));if(u in t)throw new Error(dr(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function ZL(e){return typeof e=="function"}function JL(e,t){let[n,r,i]=V2(t),s;if(ZL(e))s=()=>VE(e());else{const u=VE(e);s=()=>u}function l(u=s(),h){let f=[n[h.type],...r.filter(({matcher:p})=>p(h)).map(({reducer:p})=>p)];return f.filter(p=>!!p).length===0&&(f=[i]),f.reduce((p,m)=>{if(m)if(Bo(p)){const x=m(p,h);return x===void 0?p:x}else{if(Va(p))return q2(p,g=>m(g,h));{const g=m(p,h);if(g===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return p},u)}return l.getInitialState=s,l}var e4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",t4=(e=21)=>{let t="",n=e;for(;n--;)t+=e4[Math.random()*64|0];return t},n4=Symbol.for("rtk-slice-createasyncthunk");function r4(e,t){return`${e}/${t}`}function a4({creators:e}={}){const t=e?.asyncThunk?.[n4];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(dr(11));const l=(typeof r.reducers=="function"?r.reducers(o4()):r.reducers)||{},u=Object.keys(l),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(T,j){const N=typeof T=="string"?T:T.type;if(!N)throw new Error(dr(12));if(N in h.sliceCaseReducersByType)throw new Error(dr(13));return h.sliceCaseReducersByType[N]=j,f},addMatcher(T,j){return h.sliceMatchers.push({matcher:T,reducer:j}),f},exposeAction(T,j){return h.actionCreators[T]=j,f},exposeCaseReducer(T,j){return h.sliceCaseReducersByName[T]=j,f}};u.forEach(T=>{const j=l[T],N={reducerName:T,type:r4(i,T),createNotation:typeof r.reducers=="function"};l4(j)?u4(N,j,f,t):s4(N,j,f)});function p(){const[T={},j=[],N=void 0]=typeof r.extraReducers=="function"?V2(r.extraReducers):[r.extraReducers],D={...T,...h.sliceCaseReducersByType};return JL(r.initialState,M=>{for(let R in D)M.addCase(R,D[R]);for(let R of h.sliceMatchers)M.addMatcher(R.matcher,R.reducer);for(let R of j)M.addMatcher(R.matcher,R.reducer);N&&M.addDefaultCase(N)})}const m=T=>T,g=new Map,x=new WeakMap;let S;function A(T,j){return S||(S=p()),S(T,j)}function C(){return S||(S=p()),S.getInitialState()}function P(T,j=!1){function N(M){let R=M[T];return typeof R>"u"&&j&&(R=Rd(x,N,C)),R}function D(M=m){const R=Rd(g,j,()=>new WeakMap);return Rd(R,M,()=>{const U={};for(const[W,Y]of Object.entries(r.selectors??{}))U[W]=i4(Y,M,()=>Rd(x,M,C),j);return U})}return{reducerPath:T,getSelectors:D,get selectors(){return D(N)},selectSlice:N}}const O={name:i,reducer:A,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:C,...P(s),injectInto(T,{reducerPath:j,...N}={}){const D=j??s;return T.inject({reducerPath:D,reducer:A},N),{...O,...P(D,!0)}}};return O}}function i4(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var mr=a4();function o4(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function s4({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!c4(r))throw new Error(dr(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Rr(e,l):Rr(e))}function l4(e){return e._reducerDefinitionType==="asyncThunk"}function c4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function u4({type:e,reducerName:t},n,r,i){if(!i)throw new Error(dr(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:h,settled:f,options:p}=n,m=i(e,s,p);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),h&&r.addCase(m.rejected,h),f&&r.addMatcher(m.settled,f),r.exposeCaseReducer(t,{fulfilled:l||Id,pending:u||Id,rejected:h||Id,settled:f||Id})}function Id(){}var d4="task",K2="listener",X2="completed",g0="cancelled",f4=`task-${g0}`,h4=`task-${X2}`,lv=`${K2}-${g0}`,p4=`${K2}-${X2}`,th=class{constructor(e){this.code=e,this.message=`${d4} ${g0} (reason: ${e})`}name="TaskAbortError";message},y0=(e,t)=>{if(typeof e!="function")throw new TypeError(dr(32))},bf=()=>{},W2=(e,t=bf)=>(e.catch(t),e),Q2=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ko=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ro=e=>{if(e.aborted){const{reason:t}=e;throw new th(t)}};function Z2(e,t){let n=bf;return new Promise((r,i)=>{const s=()=>i(new th(e.reason));if(e.aborted){s();return}n=Q2(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=bf})}var m4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof th?"cancelled":"rejected",error:n}}finally{t?.()}},xf=e=>t=>W2(Z2(e,t).then(n=>(Ro(e),n))),J2=e=>{const t=xf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Gs}=Object,XE={},nh="listenerMiddleware",g4=(e,t)=>{const n=r=>Q2(e,()=>ko(r,e.reason));return(r,i)=>{y0(r);const s=new AbortController;n(s);const l=m4(async()=>{Ro(e),Ro(s.signal);const u=await r({pause:xf(s.signal),delay:J2(s.signal),signal:s.signal});return Ro(s.signal),u},()=>ko(s,h4));return i?.autoJoin&&t.push(l.catch(bf)),{result:xf(e)(l),cancel(){ko(s,f4)}}}},y4=(e,t)=>{const n=async(r,i)=>{Ro(t);let s=()=>{};const u=[new Promise((h,f)=>{let p=e({predicate:r,effect:(m,g)=>{g.unsubscribe(),h([m,g.getState(),g.getOriginalState()])}});s=()=>{p(),f()}})];i!=null&&u.push(new Promise(h=>setTimeout(h,i,null)));try{const h=await Z2(t,Promise.race(u));return Ro(t),h}finally{s()}};return(r,i)=>W2(n(r,i))},eT=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Rr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(dr(21));return y0(s),{predicate:i,type:t,effect:s}},tT=Gs(e=>{const{type:t,predicate:n,effect:r}=eT(e);return{id:t4(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(dr(22))}}},{withTypes:()=>tT}),WE=(e,t)=>{const{type:n,effect:r,predicate:i}=eT(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},cv=e=>{e.pending.forEach(t=>{ko(t,lv)})},v4=e=>()=>{e.forEach(cv),e.clear()},QE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},nT=Gs(Rr(`${nh}/add`),{withTypes:()=>nT}),b4=Rr(`${nh}/removeAll`),rT=Gs(Rr(`${nh}/remove`),{withTypes:()=>rT}),x4=(...e)=>{console.error(`${nh}/error`,...e)},Jc=(e={})=>{const t=new Map,{extra:n,onError:r=x4}=e;y0(r);const i=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),m=>{p.unsubscribe(),m?.cancelActive&&cv(p)}),s=p=>{const m=WE(t,p)??tT(p);return i(m)};Gs(s,{withTypes:()=>s});const l=p=>{const m=WE(t,p);return m&&(m.unsubscribe(),p.cancelActive&&cv(m)),!!m};Gs(l,{withTypes:()=>l});const u=async(p,m,g,x)=>{const S=new AbortController,A=y4(s,S.signal),C=[];try{p.pending.add(S),await Promise.resolve(p.effect(m,Gs({},g,{getOriginalState:x,condition:(P,O)=>A(P,O).then(Boolean),take:A,delay:J2(S.signal),pause:xf(S.signal),extra:n,signal:S.signal,fork:g4(S.signal,C),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((P,O,T)=>{P!==S&&(ko(P,lv),T.delete(P))})},cancel:()=>{ko(S,lv),p.pending.delete(S)},throwIfCancelled:()=>{Ro(S.signal)}})))}catch(P){P instanceof th||QE(r,P,{raisedBy:"effect"})}finally{await Promise.all(C),ko(S,p4),p.pending.delete(S)}},h=v4(t);return{middleware:p=>m=>g=>{if(!L2(g))return m(g);if(nT.match(g))return s(g.payload);if(b4.match(g)){h();return}if(rT.match(g))return l(g.payload);let x=p.getState();const S=()=>{if(x===XE)throw new Error(dr(23));return x};let A;try{if(A=m(g),t.size>0){const C=p.getState(),P=Array.from(t.values());for(const O of P){let T=!1;try{T=O.predicate(g,C,x)}catch(j){T=!1,QE(r,j,{raisedBy:"predicate"})}T&&u(O,g,p,S)}}}finally{x=XE}return A},startListening:s,stopListening:l,clearListeners:h}};function dr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var S4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},aT=mr({name:"chartLayout",initialState:S4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:A4,setLayout:E4,setChartSize:C4,setScale:P4}=aT.actions,w4=aT.reducer;function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(r){O4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O4(e,t,n){return(t=T4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T4(e){var t=_4(e,"string");return typeof t=="symbol"?t:t+""}function _4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sf=Math.PI/180,D4=e=>e*180/Math.PI,zt=(e,t,n,r)=>({x:e+Math.cos(-Sf*r)*n,y:t+Math.sin(-Sf*r)*n}),iT=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},N4=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},j4=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=N4({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,h=Math.acos(u);return r>s&&(h=2*Math.PI-h),{radius:l,angle:D4(h),angleInRadian:h}},M4=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},k4=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},R4=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=j4({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:h,endAngle:f}=M4(t),p=s,m;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}return m?JE(JE({},t),{},{radius:i,angle:k4(p,t)}):null};function oT(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(r){I4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I4(e,t,n){return(t=L4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L4(e){var t=$4(e,"string");return typeof t=="symbol"?t:t+""}function $4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vt(e,t,n){return cn(e)||cn(t)?n:fa(t)?$o(e,t,n):typeof t=="function"?t(e):n}var B4=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var h=0;h<u;h++){var f=h>0?n[h-1].coordinate:n[u-1].coordinate,p=n[h].coordinate,m=h>=u-1?n[0].coordinate:n[h+1].coordinate,g=void 0;if(ln(p-f)!==ln(m-p)){var x=[];if(ln(m-p)===ln(i[1]-i[0])){g=m;var S=p+i[1]-i[0];x[0]=Math.min(S,(S+f)/2),x[1]=Math.max(S,(S+f)/2)}else{g=f;var A=m+i[1]-i[0];x[0]=Math.min(p,(A+p)/2),x[1]=Math.max(p,(A+p)/2)}var C=[Math.min(p,(g+p)/2),Math.max(p,(g+p)/2)];if(e>C[0]&&e<=C[1]||e>=x[0]&&e<=x[1]){({index:l}=n[h]);break}}else{var P=Math.min(f,m),O=Math.max(f,m);if(e>(P+p)/2&&e<=(O+p)/2){({index:l}=n[h]);break}}}else if(t){for(var T=0;T<u;T++)if(T===0&&e<=(t[T].coordinate+t[T+1].coordinate)/2||T>0&&T<u-1&&e>(t[T].coordinate+t[T-1].coordinate)/2&&e<=(t[T].coordinate+t[T+1].coordinate)/2||T===u-1&&e>(t[T].coordinate+t[T-1].coordinate)/2){({index:l}=t[T]);break}}return l},U4=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&Te(e[s]))return jr(jr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&Te(e[l]))return jr(jr({},e),{},{[l]:e[l]+(i||0)})}return e},Vo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",sT=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},lT=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:h,categoricalDomain:f,tickCount:p,ticks:m,niceTicks:g,axisType:x}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=x==="angleAxis"&&s&&s.length>=2?ln(s[0]-s[1])*2*A:A,m||g){var C=(m||g||[]).map((P,O)=>{var T=r?r.indexOf(P):P;return{coordinate:l(T)+A,value:P,offset:A,index:O}});return C.filter(P=>!fr(P.coordinate))}return h&&f?f.map((P,O)=>({coordinate:l(P)+A,value:P,index:O,offset:A})):l.ticks&&p!=null?l.ticks(p).map((P,O)=>({coordinate:l(P)+A,value:P,offset:A,index:O})):l.domain().map((P,O)=>({coordinate:l(P)+A,value:r?r[P]:P,index:O,offset:A}))},tC=1e-4,z4=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-tC,s=Math.max(r[0],r[1])+tC,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},G4=(e,t)=>{if(!t||t.length!==2||!Te(t[0])||!Te(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Te(e[0])||e[0]<n)&&(i[0]=n),(!Te(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},H4=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=fr(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},q4=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=fr(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},Y4={sign:H4,expand:xI,none:qs,silhouette:SI,wiggle:AI,positive:q4},F4=(e,t,n)=>{var r=Y4[n],i=bI().keys(t).value((s,l)=>+vt(s,l,0)).order(Jy).offset(r);return i(e)};function V4(e){return e==null?void 0:String(e)}var nC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=vt(s,t.dataKey,t.scale.domain()[l]);return cn(u)?null:t.scale(u)-i/2+r},K4=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},X4=e=>{var t=e.flat(2).filter(Te);return[Math.min(...t),Math.max(...t)]},W4=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Q4=(e,t,n)=>{if(e!=null)return W4(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((h,f)=>{var p=oT(f,t,n),m=X4(p);return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},rC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,v0=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Qf(t,p=>p.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var h=i[l],f=i[l-1];s=Math.min((h.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function iC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return jr(jr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function rh(e,t){if(e)return String(e);if(typeof t=="string")return t}function Z4(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?R4({x:e,y:t},r):null}var J4=(e,t,n,r)=>{var i=t.find(f=>f&&f.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return jr(jr(jr({},r),zt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:h}=r;return jr(jr(jr({},r),zt(r.cx,r.cy,u,h)),{},{angle:h,radius:u})}return{x:0,y:0}},e3=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Za=e=>e.layout.width,Ja=e=>e.layout.height,t3=e=>e.layout.scale,cT=e=>e.layout.margin,ah=X(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ih=X(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),uT="data-recharts-item-index",dT="data-recharts-item-data-key",eu=60;function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(n),!0).forEach(function(r){n3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n3(e,t,n){return(t=r3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r3(e){var t=a3(e,"string");return typeof t=="symbol"?t:t+""}function a3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i3=e=>e.brush.height;function o3(e){var t=ih(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:eu;return n+i}return n},0)}function s3(e){var t=ih(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:eu;return n+i}return n},0)}function l3(e){var t=ah(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function c3(e){var t=ah(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Qt=X([Za,Ja,cT,i3,o3,s3,l3,c3,M2,wL],(e,t,n,r,i,s,l,u,h,f)=>{var p={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},g=Ld(Ld({},m),p),x=g.bottom;g.bottom+=r,g=U4(g,h,f);var S=e-g.left-g.right,A=t-g.top-g.bottom;return Ld(Ld({brushBottom:x},g),{},{width:Math.max(S,0),height:Math.max(A,0)})}),u3=X(Qt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),b0=X(Za,Ja,(e,t)=>({x:0,y:0,width:e,height:t})),d3=E.createContext(null),Lr=()=>E.useContext(d3)!=null,oh=e=>e.brush,sh=X([oh,Qt,cT],(e,t,n)=>({height:e.height,x:Te(e.x)?e.x:t.left,y:Te(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Te(e.width)?e.width:t.width})),x0=()=>{var e,t=Lr(),n=we(u3),r=we(sh),i=(e=we(oh))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},f3={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},fT=()=>{var e;return(e=we(Qt))!==null&&e!==void 0?e:f3},S0=()=>we(Za),A0=()=>we(Ja),h3=()=>we(e=>e.layout.margin),Qe=e=>e.layout.layoutType,E0=()=>we(Qe),p3={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hT=mr({name:"legend",initialState:p3,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Ya(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:sC,setLegendSettings:m3,addLegendPayload:pT,removeLegendPayload:mT}=hT.actions,g3=hT.reducer,y3=["contextPayload"];function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uv.apply(null,arguments)}function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(r){C0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C0(e,t,n){return(t=v3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v3(e){var t=b3(e,"string");return typeof t=="symbol"?t:t+""}function b3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x3(e,t){if(e==null)return{};var n,r,i=S3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function A3(e){return e.value}function E3(e){var{contextPayload:t}=e,n=x3(e,y3),r=_2(t,e.payloadUniqBy,A3),i=Fs(Fs({},n),{},{payload:r});return E.isValidElement(e.content)?E.cloneElement(e.content,i):typeof e.content=="function"?E.createElement(e.content,i):E.createElement(c0,i)}function C3(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:h}=t,f,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?f={left:((r||0)-s.width)/2}:f=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(h==="middle"?p={top:((i||0)-s.height)/2}:p=h==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Fs(Fs({},f),p)}function P3(e){var t=Et();return E.useEffect(()=>{t(m3(e))},[t,e]),null}function w3(e){var t=Et();return E.useEffect(()=>(t(sC(e)),()=>{t(sC({width:0,height:0}))}),[t,e]),null}function O3(e){var t=_L(),n=HR(),r=h3(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[h,f]=k2([t]),p=S0(),m=A0();if(p==null||m==null)return null;var g=p-(r.left||0)-(r.right||0),x=lh.getWidthOrHeight(e.layout,s,i,g),S=u?l:Fs(Fs({position:"absolute",width:x?.width||i||"auto",height:x?.height||s||"auto"},C3(l,e,r,p,m,h)),l),A=u??n;if(A==null)return null;var C=E.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:f},E.createElement(P3,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),E.createElement(w3,{width:h.width,height:h.height}),E.createElement(E3,uv({},e,x,{margin:r,chartWidth:p,chartHeight:m,contextPayload:t})));return n2.createPortal(C,A)}class lh extends E.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Te(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return E.createElement(O3,this.props)}}C0(lh,"displayName","Legend");C0(lh,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dv.apply(null,arguments)}function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){T3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T3(e,t,n){return(t=_3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _3(e){var t=D3(e,"string");return typeof t=="symbol"?t:t+""}function D3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N3(e){return Array.isArray(e)&&fa(e[0])&&fa(e[1])?e.join(" ~ "):e}var j3=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:h,labelClassName:f,label:p,labelFormatter:m,accessibilityLayer:g=!1}=e,x=()=>{if(s&&s.length){var N={padding:0,margin:0},D=(u?Qf(s,u):s).map((M,R)=>{if(M.type==="none")return null;var U=M.formatter||l||N3,{value:W,name:Y}=M,J=W,ce=Y;if(U){var se=U(W,Y,M,R,s);if(Array.isArray(se))[J,ce]=se;else if(se!=null)J=se;else return null}var te=ry({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:te},fa(ce)?E.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,fa(ce)?E.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,E.createElement("span",{className:"recharts-tooltip-item-value"},J),E.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:N},D)}return null},S=ry({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=ry({margin:0},i),C=!cn(p),P=C?p:"",O=nt("recharts-default-tooltip",h),T=nt("recharts-tooltip-label",f);C&&m&&s!==void 0&&s!==null&&(P=m(p,s));var j=g?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",dv({className:O,style:S},j),E.createElement("p",{className:T,style:A},E.isValidElement(P)?P:"".concat(P)),x())},xc="recharts-tooltip-wrapper",M3={visibility:"hidden"};function k3(e){var{coordinate:t,translateX:n,translateY:r}=e;return nt(xc,{["".concat(xc,"-right")]:Te(n)&&t&&Te(t.x)&&n>=t.x,["".concat(xc,"-left")]:Te(n)&&t&&Te(t.x)&&n<t.x,["".concat(xc,"-bottom")]:Te(r)&&t&&Te(t.y)&&r>=t.y,["".concat(xc,"-top")]:Te(r)&&t&&Te(t.y)&&r<t.y})}function uC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:h,viewBoxDimension:f}=e;if(s&&Te(s[r]))return s[r];var p=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?p:m;var g=h[r];if(g==null)return 0;if(l[r]){var x=p,S=g;return x<S?Math.max(m,g):Math.max(p,g)}if(f==null)return 0;var A=m+u,C=g+f;return A>C?Math.max(p,g):Math.max(m,g)}function R3(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function I3(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:h}=e,f,p,m;return l.height>0&&l.width>0&&n?(p=uC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:h,viewBoxDimension:h.width}),m=uC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:h,viewBoxDimension:h.height}),f=R3({translateX:p,translateY:m,useTranslate3d:u})):f=M3,{cssProperties:f,cssClasses:k3({translateX:p,translateY:m,coordinate:n})}}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(r){fv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fv(e,t,n){return(t=L3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L3(e){var t=$3(e,"string");return typeof t=="symbol"?t:t+""}function $3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class B3 extends E.PureComponent{constructor(){super(...arguments),fv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),fv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:h,offset:f,position:p,reverseDirection:m,useTranslate3d:g,viewBox:x,wrapperStyle:S,lastBoundingBox:A,innerRef:C,hasPortalFromProps:P}=this.props,{cssClasses:O,cssProperties:T}=I3({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:f,position:p,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:g,viewBox:x}),j=P?{}:$d($d({transition:h&&t?"transform ".concat(r,"ms ").concat(i):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),N=$d($d({},j),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:N,ref:C},s)}}var U3=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),rl={isSsr:U3()},gT=()=>we(e=>e.rootProps.accessibilityLayer);function pr(e){return Number.isFinite(e)}function Vs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hv.apply(null,arguments)}function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){z3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z3(e,t,n){return(t=G3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G3(e){var t=H3(e,"string");return typeof t=="symbol"?t:t+""}function H3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pC={curveBasisClosed:lI,curveBasisOpen:cI,curveBasis:sI,curveBumpX:VR,curveBumpY:KR,curveLinearClosed:uI,curveLinear:Xf,curveMonotoneX:dI,curveMonotoneY:fI,curveNatural:hI,curveStep:pI,curveStepAfter:gI,curveStepBefore:mI},Bd=e=>pr(e.x)&&pr(e.y),Sc=e=>e.x,Ac=e=>e.y,q3=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Wc(e));return(n==="curveMonotone"||n==="curveBump")&&t?pC["".concat(n).concat(t==="vertical"?"Y":"X")]:pC[n]||Xf},Y3=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=q3(t,i),u=s?n.filter(Bd):n,h;if(Array.isArray(r)){var f=s?r.filter(m=>Bd(m)):r,p=u.map((m,g)=>hC(hC({},m),{},{base:f[g]}));return i==="vertical"?h=Nd().y(Ac).x1(Sc).x0(m=>m.base.x):h=Nd().x(Sc).y1(Ac).y0(m=>m.base.y),h.defined(Bd).curve(l),h(p)}return i==="vertical"&&Te(r)?h=Nd().y(Ac).x1(Sc).x0(r):Te(r)?h=Nd().x(Sc).y1(Ac).y0(r):h=c2().x(Sc).y(Ac),h.defined(Bd).curve(l),h(u)},yT=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?Y3(e):r;return E.createElement("path",hv({},Fo(e),MR(e),{className:nt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},F3=["x","y","top","left","width","height","className"];function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pv.apply(null,arguments)}function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function V3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(n),!0).forEach(function(r){K3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K3(e,t,n){return(t=X3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X3(e){var t=W3(e,"string");return typeof t=="symbol"?t:t+""}function W3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q3(e,t){if(e==null)return{};var n,r,i=Z3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var J3=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),e5=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,h=Q3(e,F3),f=V3({x:t,y:n,top:r,left:i,width:s,height:l},h);return!Te(t)||!Te(n)||!Te(s)||!Te(l)||!Te(r)||!Te(i)?null:E.createElement("path",pv({},Ut(f,!0),{className:nt("recharts-cross",u),d:J3(t,n,s,l,r,i)}))};function t5(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){r5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r5(e,t,n){return(t=a5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a5(e){var t=i5(e,"string");return typeof t=="symbol"?t:t+""}function i5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $r(e,t){var n=n5({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function o5(){}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){s5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s5(e,t,n){return(t=l5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l5(e){var t=c5(e,"string");return typeof t=="symbol"?t:t+""}function c5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u5=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vT=(e,t,n)=>e.map(r=>"".concat(u5(r)," ").concat(t,"ms ").concat(n)).join(","),d5=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Hc=(e,t)=>Object.keys(t).reduce((n,r)=>vC(vC({},n),{},{[r]:e(r,t[r])}),{});function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(n),!0).forEach(function(r){f5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f5(e,t,n){return(t=h5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h5(e){var t=p5(e,"string");return typeof t=="symbol"?t:t+""}function p5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Af=(e,t,n)=>e+(t-e)*n,mv=e=>{var{from:t,to:n}=e;return t!==n},bT=(e,t,n)=>{var r=Hc((i,s)=>{if(mv(s)){var[l,u]=e(s.from,s.to,s.velocity);return vn(vn({},s),{},{from:l,velocity:u})}return s},t);return n<1?Hc((i,s)=>mv(s)?vn(vn({},s),{},{velocity:Af(s.velocity,r[i].velocity,n),from:Af(s.from,r[i].from,n)}):s,t):bT(e,r,n-1)};function m5(e,t,n,r,i,s){var l,u=r.reduce((g,x)=>vn(vn({},g),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),h=()=>Hc((g,x)=>x.from,u),f=()=>!Object.values(u).filter(mv).length,p=null,m=g=>{l||(l=g);var x=g-l,S=x/n.dt;u=bT(n,u,S),i(vn(vn(vn({},e),t),h())),l=g,f()||(p=s.setTimeout(m))};return()=>(p=s.setTimeout(m),()=>{p()})}function g5(e,t,n,r,i,s,l){var u=null,h=i.reduce((m,g)=>vn(vn({},m),{},{[g]:[e[g],t[g]]}),{}),f,p=m=>{f||(f=m);var g=(m-f)/r,x=Hc((A,C)=>Af(...C,n(g)),h);if(s(vn(vn(vn({},e),t),x)),g<1)u=l.setTimeout(p);else{var S=Hc((A,C)=>Af(...C,n(1)),h);s(vn(vn(vn({},e),t),S))}};return()=>(u=l.setTimeout(p),()=>{u()})}const y5=(e,t,n,r,i,s)=>{var l=d5(e,t);return n.isStepper===!0?m5(e,t,n,l,i,s):g5(e,t,n,r,l,i,s)};var Ef=1e-4,xT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ST=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),xC=(e,t)=>n=>{var r=xT(e,t);return ST(r,n)},v5=(e,t)=>n=>{var r=xT(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return ST(i,n)},SC=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var h=l[0].split("(");h[0]==="cubic-bezier"&&h[1].split(")")[0].split(",").length===4&&([t,r,n,i]=h[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var f=xC(t,n),p=xC(r,i),m=v5(t,n),g=S=>S>1?1:S<0?0:S,x=S=>{for(var A=S>1?1:S,C=A,P=0;P<8;++P){var O=f(C)-A,T=m(C);if(Math.abs(O-A)<Ef||T<Ef)return p(C);C=g(C-O/T)}return p(C)};return x.isStepper=!1,x},b5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,h)=>{var f=-(l-u)*n,p=h*r,m=h+(f-p)*i/1e3,g=h*i/1e3+l;return Math.abs(g-u)<Ef&&Math.abs(m)<Ef?[u,0]:[g,m]};return s.isStepper=!0,s.dt=i,s},x5=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return SC(e);case"spring":return b5();default:if(e.split("(")[0]==="cubic-bezier")return SC(e)}return typeof e=="function"?e:null};function S5(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[h,...f]=u;if(typeof h=="number"){i=e.setTimeout(s.bind(null,f),h);return}s(h),i=e.setTimeout(s.bind(null,f));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class A5{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function E5(){return S5(new A5)}var C5=E.createContext(E5);function P5(e,t){var n=E.useContext(C5);return E.useMemo(()=>t??n(e),[e,t,n])}var w5={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},AC={t:0},ay={t:1};function ch(e){var t=$r(e,w5),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:h,children:f}=t,p=P5(t.animationId,t.animationManager),[m,g]=E.useState(n?AC:ay),x=E.useRef(null);return E.useEffect(()=>{n||g(ay)},[n]),E.useEffect(()=>{if(!n||!r)return o5;var S=y5(AC,ay,x5(s),i,g,p.getTimeoutController()),A=()=>{x.current=S()};return p.start([h,l,A,i,u]),()=>{p.stop(),x.current&&x.current(),u()}},[n,r,i,s,l,h,u,p]),f(m.t)}function uh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(Uc(t)),r=E.useRef(e);return r.current!==e&&(n.current=Uc(t),r.current=e),n.current}function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(n),!0).forEach(function(r){O5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O5(e,t,n){return(t=T5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T5(e){var t=_5(e,"string");return typeof t=="symbol"?t:t+""}function _5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cf(){return Cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cf.apply(null,arguments)}var PC=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,h=r>=0&&n>=0||r<0&&n<0?1:0,f;if(s>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,g=4;m<g;m++)p[m]=i[m]>s?s:i[m];f="M".concat(e,",").concat(t+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(h,",").concat(e+u*p[0],",").concat(t)),f+="L ".concat(e+n-u*p[1],",").concat(t),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(t+l*p[1])),f+="L ".concat(e+n,",").concat(t+r-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(h,`,
        `).concat(e+n-u*p[2],",").concat(t+r)),f+="L ".concat(e+u*p[3],",").concat(t+r),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(t+r-l*p[3])),f+="Z"}else if(s>0&&i===+i&&i>0){var x=Math.min(s,i);f="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(h,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(h,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(h,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(h,",").concat(e,",").concat(t+r-l*x," Z")}else f="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},D5={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},AT=e=>{var t=$r(e,D5),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var se=n.current.getTotalLength();se&&i(se)}catch{}},[]);var{x:s,y:l,width:u,height:h,radius:f,className:p}=t,{animationEasing:m,animationDuration:g,animationBegin:x,isAnimationActive:S,isUpdateAnimationActive:A}=t,C=E.useRef(u),P=E.useRef(h),O=E.useRef(s),T=E.useRef(l),j=E.useMemo(()=>({x:s,y:l,width:u,height:h,radius:f}),[s,l,u,h,f]),N=uh(j,"rectangle-");if(s!==+s||l!==+l||u!==+u||h!==+h||u===0||h===0)return null;var D=nt("recharts-rectangle",p);if(!A)return E.createElement("path",Cf({},Ut(t,!0),{className:D,d:PC(s,l,u,h,f)}));var M=C.current,R=P.current,U=O.current,W=T.current,Y="0px ".concat(r===-1?1:r,"px"),J="".concat(r,"px 0px"),ce=vT(["strokeDasharray"],g,typeof m=="string"?m:void 0);return E.createElement(ch,{animationId:N,key:N,canBegin:r>0,duration:g,easing:m,isActive:A,begin:x},se=>{var te=bn(M,u,se),L=bn(R,h,se),ee=bn(U,s,se),he=bn(W,l,se);n.current&&(C.current=te,P.current=L,O.current=ee,T.current=he);var Se;return S?se>0?Se={transition:ce,strokeDasharray:J}:Se={strokeDasharray:Y}:Se={strokeDasharray:J},E.createElement("path",Cf({},Ut(t,!0),{className:D,d:PC(ee,he,te,L,f),ref:n,style:CC(CC({},Se),t.style)}))})};function ET(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=zt(t,n,r,i),u=zt(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gv.apply(null,arguments)}var N5=(e,t)=>{var n=ln(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Ud=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:h}=e,f=u*(l?1:-1)+r,p=Math.asin(u/f)/Sf,m=h?i:i+s*p,g=zt(t,n,f,m),x=zt(t,n,r,m),S=h?i-s*p:i,A=zt(t,n,f*Math.cos(p*Sf),S);return{center:g,circleTangency:x,lineTangency:A,theta:p}},CT=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=N5(s,l),h=s+u,f=zt(t,n,i,s),p=zt(t,n,i,h),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>h),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var g=zt(t,n,r,s),x=zt(t,n,r,h);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=h),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},j5=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:h,endAngle:f}=e,p=ln(f-h),{circleTangency:m,lineTangency:g,theta:x}=Ud({cx:t,cy:n,radius:i,angle:h,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:C}=Ud({cx:t,cy:n,radius:i,angle:f,sign:-p,cornerRadius:s,cornerIsExternal:u}),P=u?Math.abs(h-f):Math.abs(h-f)-x-C;if(P<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):CT({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:h,endAngle:f});var O="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:T,lineTangency:j,theta:N}=Ud({cx:t,cy:n,radius:r,angle:h,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:M,theta:R}=Ud({cx:t,cy:n,radius:r,angle:f,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),U=u?Math.abs(h-f):Math.abs(h-f)-N-R;if(U<0&&s===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(U>180),",").concat(+(p>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(j.x,",").concat(j.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},M5={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},PT=e=>{var t=$r(e,M5),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:h,startAngle:f,endAngle:p,className:m}=t;if(s<i||f===p)return null;var g=nt("recharts-sector",m),x=s-i,S=Tn(l,x,0,!0),A;return S>0&&Math.abs(f-p)<360?A=j5({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,x/2),forceCornerRadius:u,cornerIsExternal:h,startAngle:f,endAngle:p}):A=CT({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:f,endAngle:p}),E.createElement("path",gv({},Ut(t,!0),{className:g,d:A}))};function k5(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:h,innerRadius:f,outerRadius:p,angle:m}=t,g=zt(u,h,f,m),x=zt(u,h,p,m);r=g.x,i=g.y,s=x.x,l=x.y}else return ET(t);return[{x:r,y:i},{x:s,y:l}]}var iy={},oy={},sy={},wC;function R5(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N2();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(sy)),sy}var OC;function I5(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R5();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(oy)),oy}var TC;function L5(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j2(),n=I5();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),h=new Array(u);for(let f=0;f<u;f++)h[f]=i,i+=l;return h}e.range=r})(iy)),iy}var ly,_C;function $5(){return _C||(_C=1,ly=L5().range),ly}var B5=$5();const wT=Xr(B5);function Ii(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U5(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function P0(e){let t,n,r;e.length!==2?(t=Ii,n=(u,h)=>Ii(e(u),h),r=(u,h)=>e(u)-h):(t=e===Ii||e===U5?e:z5,n=e,r=e);function i(u,h,f=0,p=u.length){if(f<p){if(t(h,h)!==0)return p;do{const m=f+p>>>1;n(u[m],h)<0?f=m+1:p=m}while(f<p)}return f}function s(u,h,f=0,p=u.length){if(f<p){if(t(h,h)!==0)return p;do{const m=f+p>>>1;n(u[m],h)<=0?f=m+1:p=m}while(f<p)}return f}function l(u,h,f=0,p=u.length){const m=i(u,h,f,p-1);return m>f&&r(u[m-1],h)>-r(u[m],h)?m-1:m}return{left:i,center:l,right:s}}function z5(){return 0}function OT(e){return e===null?NaN:+e}function*G5(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const H5=P0(Ii),tu=H5.right;P0(OT).center;class DC extends Map{constructor(t,n=F5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(NC(this,t))}has(t){return super.has(NC(this,t))}set(t,n){return super.set(q5(this,t),n)}delete(t){return super.delete(Y5(this,t))}}function NC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function q5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Y5({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function F5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function V5(e=Ii){if(e===Ii)return TT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function TT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const K5=Math.sqrt(50),X5=Math.sqrt(10),W5=Math.sqrt(2);function Pf(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=K5?10:s>=X5?5:s>=W5?2:1;let u,h,f;return i<0?(f=Math.pow(10,-i)/l,u=Math.round(e*f),h=Math.round(t*f),u/f<e&&++u,h/f>t&&--h,f=-f):(f=Math.pow(10,i)*l,u=Math.round(e/f),h=Math.round(t/f),u*f<e&&++u,h*f>t&&--h),h<u&&.5<=n&&n<2?Pf(e,t,n*2):[u,h,f]}function yv(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?Pf(t,e,n):Pf(e,t,n);if(!(s>=i))return[];const u=s-i+1,h=new Array(u);if(r)if(l<0)for(let f=0;f<u;++f)h[f]=(s-f)/-l;else for(let f=0;f<u;++f)h[f]=(s-f)*l;else if(l<0)for(let f=0;f<u;++f)h[f]=(i+f)/-l;else for(let f=0;f<u;++f)h[f]=(i+f)*l;return h}function vv(e,t,n){return t=+t,e=+e,n=+n,Pf(e,t,n)[2]}function bv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?vv(t,e,n):vv(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function jC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function MC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function _T(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?TT:V5(i);r>n;){if(r-n>600){const h=r-n+1,f=t-n+1,p=Math.log(h),m=.5*Math.exp(2*p/3),g=.5*Math.sqrt(p*m*(h-m)/h)*(f-h/2<0?-1:1),x=Math.max(n,Math.floor(t-f*m/h+g)),S=Math.min(r,Math.floor(t+(h-f)*m/h+g));_T(e,t,x,S,i)}const s=e[t];let l=n,u=r;for(Ec(e,n,t),i(e[r],s)>0&&Ec(e,n,r);l<u;){for(Ec(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Ec(e,n,u):(++u,Ec(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Ec(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Q5(e,t,n){if(e=Float64Array.from(G5(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return MC(e);if(t>=1)return jC(e);var r,i=(r-1)*t,s=Math.floor(i),l=jC(_T(e,s).subarray(0,s+1)),u=MC(e.subarray(s+1));return l+(u-l)*(i-s)}}function Z5(e,t,n=OT){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function J5(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Br(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ei(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xv=Symbol("implicit");function w0(){var e=new DC,t=[],n=[],r=xv;function i(s){let l=e.get(s);if(l===void 0){if(r!==xv)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new DC;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return w0(t,n).unknown(r)},Br.apply(i,arguments),i}function O0(){var e=w0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,h=0,f=0,p=.5;delete e.unknown;function m(){var g=t().length,x=i<r,S=x?i:r,A=x?r:i;s=(A-S)/Math.max(1,g-h+f*2),u&&(s=Math.floor(s)),S+=(A-S-s*(g-h))*p,l=s*(1-h),u&&(S=Math.round(S),l=Math.round(l));var C=J5(g).map(function(P){return S+s*P});return n(x?C.reverse():C)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(g){return arguments.length?(u=!!g,m()):u},e.padding=function(g){return arguments.length?(h=Math.min(1,f=+g),m()):h},e.paddingInner=function(g){return arguments.length?(h=Math.min(1,g),m()):h},e.paddingOuter=function(g){return arguments.length?(f=+g,m()):f},e.align=function(g){return arguments.length?(p=Math.max(0,Math.min(1,g)),m()):p},e.copy=function(){return O0(t(),[r,i]).round(u).paddingInner(h).paddingOuter(f).align(p)},Br.apply(m(),arguments)}function DT(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return DT(t())},e}function e$(){return DT(O0.apply(null,arguments).paddingInner(1))}function T0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function NT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nu(){}var qc=.7,wf=1/qc,Hs="\\s*([+-]?\\d+)\\s*",Yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t$=/^#([0-9a-f]{3,8})$/,n$=new RegExp(`^rgb\\(${Hs},${Hs},${Hs}\\)$`),r$=new RegExp(`^rgb\\(${da},${da},${da}\\)$`),a$=new RegExp(`^rgba\\(${Hs},${Hs},${Hs},${Yc}\\)$`),i$=new RegExp(`^rgba\\(${da},${da},${da},${Yc}\\)$`),o$=new RegExp(`^hsl\\(${Yc},${da},${da}\\)$`),s$=new RegExp(`^hsla\\(${Yc},${da},${da},${Yc}\\)$`),kC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};T0(nu,Fc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:RC,formatHex:RC,formatHex8:l$,formatHsl:c$,formatRgb:IC,toString:IC});function RC(){return this.rgb().formatHex()}function l$(){return this.rgb().formatHex8()}function c$(){return jT(this).formatHsl()}function IC(){return this.rgb().formatRgb()}function Fc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=t$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?LC(t):n===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?zd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?zd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=n$.exec(e))?new Fn(t[1],t[2],t[3],1):(t=r$.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=a$.exec(e))?zd(t[1],t[2],t[3],t[4]):(t=i$.exec(e))?zd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o$.exec(e))?UC(t[1],t[2]/100,t[3]/100,1):(t=s$.exec(e))?UC(t[1],t[2]/100,t[3]/100,t[4]):kC.hasOwnProperty(e)?LC(kC[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function LC(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function zd(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fn(e,t,n,r)}function u$(e){return e instanceof nu||(e=Fc(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function Sv(e,t,n,r){return arguments.length===1?u$(e):new Fn(e,t,n,r??1)}function Fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}T0(Fn,Sv,NT(nu,{brighter(e){return e=e==null?wf:Math.pow(wf,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qc:Math.pow(qc,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(Io(this.r),Io(this.g),Io(this.b),Of(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$C,formatHex:$C,formatHex8:d$,formatRgb:BC,toString:BC}));function $C(){return`#${No(this.r)}${No(this.g)}${No(this.b)}`}function d$(){return`#${No(this.r)}${No(this.g)}${No(this.b)}${No((isNaN(this.opacity)?1:this.opacity)*255)}`}function BC(){const e=Of(this.opacity);return`${e===1?"rgb(":"rgba("}${Io(this.r)}, ${Io(this.g)}, ${Io(this.b)}${e===1?")":`, ${e})`}`}function Of(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Io(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function No(e){return e=Io(e),(e<16?"0":"")+e.toString(16)}function UC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Kr(e,t,n,r)}function jT(e){if(e instanceof Kr)return new Kr(e.h,e.s,e.l,e.opacity);if(e instanceof nu||(e=Fc(e)),!e)return new Kr;if(e instanceof Kr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,h=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=h<.5?s+i:2-s-i,l*=60):u=h>0&&h<1?0:l,new Kr(l,u,h,e.opacity)}function f$(e,t,n,r){return arguments.length===1?jT(e):new Kr(e,t,n,r??1)}function Kr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}T0(Kr,f$,NT(nu,{brighter(e){return e=e==null?wf:Math.pow(wf,e),new Kr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qc:Math.pow(qc,e),new Kr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fn(cy(e>=240?e-240:e+120,i,r),cy(e,i,r),cy(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Kr(zC(this.h),Gd(this.s),Gd(this.l),Of(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Of(this.opacity);return`${e===1?"hsl(":"hsla("}${zC(this.h)}, ${Gd(this.s)*100}%, ${Gd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zC(e){return e=(e||0)%360,e<0?e+360:e}function Gd(e){return Math.max(0,Math.min(1,e||0))}function cy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const _0=e=>()=>e;function h$(e,t){return function(n){return e+n*t}}function p$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function m$(e){return(e=+e)==1?MT:function(t,n){return n-t?p$(t,n,e):_0(isNaN(t)?n:t)}}function MT(e,t){var n=t-e;return n?h$(e,n):_0(isNaN(e)?t:e)}const GC=(function e(t){var n=m$(t);function r(i,s){var l=n((i=Sv(i)).r,(s=Sv(s)).r),u=n(i.g,s.g),h=n(i.b,s.b),f=MT(i.opacity,s.opacity);return function(p){return i.r=l(p),i.g=u(p),i.b=h(p),i.opacity=f(p),i+""}}return r.gamma=e,r})(1);function g$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function y$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function v$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=al(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function b$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Tf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function x$(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=al(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Av=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uy=new RegExp(Av.source,"g");function S$(e){return function(){return e}}function A$(e){return function(t){return e(t)+""}}function E$(e,t){var n=Av.lastIndex=uy.lastIndex=0,r,i,s,l=-1,u=[],h=[];for(e=e+"",t=t+"";(r=Av.exec(e))&&(i=uy.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,h.push({i:l,x:Tf(r,i)})),n=uy.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?h[0]?A$(h[0].x):S$(t):(t=h.length,function(f){for(var p=0,m;p<t;++p)u[(m=h[p]).i]=m.x(f);return u.join("")})}function al(e,t){var n=typeof t,r;return t==null||n==="boolean"?_0(t):(n==="number"?Tf:n==="string"?(r=Fc(t))?(t=r,GC):E$:t instanceof Fc?GC:t instanceof Date?b$:y$(t)?g$:Array.isArray(t)?v$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?x$:Tf)(e,t)}function D0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function C$(e,t){t===void 0&&(t=e,e=al);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function P$(e){return function(){return e}}function _f(e){return+e}var HC=[0,1];function In(e){return e}function Ev(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:P$(isNaN(t)?NaN:.5)}function w$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function O$(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=Ev(i,r),s=n(l,s)):(r=Ev(r,i),s=n(s,l)),function(u){return s(r(u))}}function T$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Ev(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var h=tu(e,u,1,r)-1;return s[h](i[h](u))}}function ru(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dh(){var e=HC,t=HC,n=al,r,i,s,l=In,u,h,f;function p(){var g=Math.min(e.length,t.length);return l!==In&&(l=w$(e[0],e[g-1])),u=g>2?T$:O$,h=f=null,m}function m(g){return g==null||isNaN(g=+g)?s:(h||(h=u(e.map(r),t,n)))(r(l(g)))}return m.invert=function(g){return l(i((f||(f=u(t,e.map(r),Tf)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,_f),p()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),p()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),n=D0,p()},m.clamp=function(g){return arguments.length?(l=g?!0:In,p()):l!==In},m.interpolate=function(g){return arguments.length?(n=g,p()):n},m.unknown=function(g){return arguments.length?(s=g,m):s},function(g,x){return r=g,i=x,p()}}function N0(){return dh()(In,In)}function _$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Df(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ks(e){return e=Df(Math.abs(e)),e?e[1]:NaN}function D$(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],h=0;i>0&&u>0&&(h+u+1>r&&(u=Math.max(1,r-h)),s.push(n.substring(i-=u,i+u)),!((h+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function N$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var j$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vc(e){if(!(t=j$.exec(e)))throw new Error("invalid format: "+e);var t;return new j0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vc.prototype=j0.prototype;function j0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}j0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function M$(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var kT;function k$(e,t){var n=Df(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(kT=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Df(e,Math.max(0,t+s-1))[0]}function qC(e,t){var n=Df(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const YC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:_$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qC(e*100,t),r:qC,s:k$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function FC(e){return e}var VC=Array.prototype.map,KC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function R$(e){var t=e.grouping===void 0||e.thousands===void 0?FC:D$(VC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?FC:N$(VC.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function f(m){m=Vc(m);var g=m.fill,x=m.align,S=m.sign,A=m.symbol,C=m.zero,P=m.width,O=m.comma,T=m.precision,j=m.trim,N=m.type;N==="n"?(O=!0,N="g"):YC[N]||(T===void 0&&(T=12),j=!0,N="g"),(C||g==="0"&&x==="=")&&(C=!0,g="0",x="=");var D=A==="$"?n:A==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",M=A==="$"?r:/[%p]/.test(N)?l:"",R=YC[N],U=/[defgprs%]/.test(N);T=T===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function W(Y){var J=D,ce=M,se,te,L;if(N==="c")ce=R(Y)+ce,Y="";else{Y=+Y;var ee=Y<0||1/Y<0;if(Y=isNaN(Y)?h:R(Math.abs(Y),T),j&&(Y=M$(Y)),ee&&+Y==0&&S!=="+"&&(ee=!1),J=(ee?S==="("?S:u:S==="-"||S==="("?"":S)+J,ce=(N==="s"?KC[8+kT/3]:"")+ce+(ee&&S==="("?")":""),U){for(se=-1,te=Y.length;++se<te;)if(L=Y.charCodeAt(se),48>L||L>57){ce=(L===46?i+Y.slice(se+1):Y.slice(se))+ce,Y=Y.slice(0,se);break}}}O&&!C&&(Y=t(Y,1/0));var he=J.length+Y.length+ce.length,Se=he<P?new Array(P-he+1).join(g):"";switch(O&&C&&(Y=t(Se+Y,Se.length?P-ce.length:1/0),Se=""),x){case"<":Y=J+Y+ce+Se;break;case"=":Y=J+Se+Y+ce;break;case"^":Y=Se.slice(0,he=Se.length>>1)+J+Y+ce+Se.slice(he);break;default:Y=Se+J+Y+ce;break}return s(Y)}return W.toString=function(){return m+""},W}function p(m,g){var x=f((m=Vc(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(Ks(g)/3)))*3,A=Math.pow(10,-S),C=KC[8+S/3];return function(P){return x(A*P)+C}}return{format:f,formatPrefix:p}}var Hd,M0,RT;I$({thousands:",",grouping:[3],currency:["$",""]});function I$(e){return Hd=R$(e),M0=Hd.format,RT=Hd.formatPrefix,Hd}function L$(e){return Math.max(0,-Ks(Math.abs(e)))}function $$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ks(t)/3)))*3-Ks(Math.abs(e)))}function B$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ks(t)-Ks(e))+1}function IT(e,t,n,r){var i=bv(e,t,n),s;switch(r=Vc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=$$(i,l))&&(r.precision=s),RT(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=B$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=L$(i))&&(r.precision=s-(r.type==="%")*2);break}}return M0(r)}function zi(e){var t=e.domain;return e.ticks=function(n){var r=t();return yv(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return IT(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],h,f,p=10;for(u<l&&(f=l,l=u,u=f,f=i,i=s,s=f);p-- >0;){if(f=vv(l,u,n),f===h)return r[i]=l,r[s]=u,t(r);if(f>0)l=Math.floor(l/f)*f,u=Math.ceil(u/f)*f;else if(f<0)l=Math.ceil(l*f)/f,u=Math.floor(u*f)/f;else break;h=f}return e},e}function LT(){var e=N0();return e.copy=function(){return ru(e,LT())},Br.apply(e,arguments),zi(e)}function $T(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,_f),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return $T(e).unknown(t)},e=arguments.length?Array.from(e,_f):[0,1],zi(n)}function BT(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function XC(e){return Math.log(e)}function WC(e){return Math.exp(e)}function U$(e){return-Math.log(-e)}function z$(e){return-Math.exp(-e)}function G$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H$(e){return e===10?G$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function QC(e){return(t,n)=>-e(-t,n)}function k0(e){const t=e(XC,WC),n=t.domain;let r=10,i,s;function l(){return i=q$(r),s=H$(r),n()[0]<0?(i=QC(i),s=QC(s),e(U$,z$)):e(XC,WC),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const h=n();let f=h[0],p=h[h.length-1];const m=p<f;m&&([f,p]=[p,f]);let g=i(f),x=i(p),S,A;const C=u==null?10:+u;let P=[];if(!(r%1)&&x-g<C){if(g=Math.floor(g),x=Math.ceil(x),f>0){for(;g<=x;++g)for(S=1;S<r;++S)if(A=g<0?S/s(-g):S*s(g),!(A<f)){if(A>p)break;P.push(A)}}else for(;g<=x;++g)for(S=r-1;S>=1;--S)if(A=g>0?S/s(-g):S*s(g),!(A<f)){if(A>p)break;P.push(A)}P.length*2<C&&(P=yv(f,p,C))}else P=yv(g,x,Math.min(x-g,C)).map(s);return m?P.reverse():P},t.tickFormat=(u,h)=>{if(u==null&&(u=10),h==null&&(h=r===10?"s":","),typeof h!="function"&&(!(r%1)&&(h=Vc(h)).precision==null&&(h.trim=!0),h=M0(h)),u===1/0)return h;const f=Math.max(1,r*u/t.ticks().length);return p=>{let m=p/s(Math.round(i(p)));return m*r<r-.5&&(m*=r),m<=f?h(p):""}},t.nice=()=>n(BT(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function UT(){const e=k0(dh()).domain([1,10]);return e.copy=()=>ru(e,UT()).base(e.base()),Br.apply(e,arguments),e}function ZC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function JC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function R0(e){var t=1,n=e(ZC(t),JC(t));return n.constant=function(r){return arguments.length?e(ZC(t=+r),JC(t)):t},zi(n)}function zT(){var e=R0(dh());return e.copy=function(){return ru(e,zT()).constant(e.constant())},Br.apply(e,arguments)}function eP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Y$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function F$(e){return e<0?-e*e:e*e}function I0(e){var t=e(In,In),n=1;function r(){return n===1?e(In,In):n===.5?e(Y$,F$):e(eP(n),eP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},zi(t)}function L0(){var e=I0(dh());return e.copy=function(){return ru(e,L0()).exponent(e.exponent())},Br.apply(e,arguments),e}function V$(){return L0.apply(null,arguments).exponent(.5)}function tP(e){return Math.sign(e)*e*e}function K$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function GT(){var e=N0(),t=[0,1],n=!1,r;function i(s){var l=K$(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(tP(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,_f)).map(tP)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return GT(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Br.apply(i,arguments),zi(i)}function HT(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=Z5(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[tu(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ii),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return HT().domain(e).range(t).unknown(r)},Br.apply(s,arguments)}function qT(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(h){return h!=null&&h<=h?i[tu(r,h,0,n)]:s}function u(){var h=-1;for(r=new Array(n);++h<n;)r[h]=((h+1)*t-(h-n)*e)/(n+1);return l}return l.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,u()):[e,t]},l.range=function(h){return arguments.length?(n=(i=Array.from(h)).length-1,u()):i.slice()},l.invertExtent=function(h){var f=i.indexOf(h);return f<0?[NaN,NaN]:f<1?[e,r[0]]:f>=n?[r[n-1],t]:[r[f-1],r[f]]},l.unknown=function(h){return arguments.length&&(s=h),l},l.thresholds=function(){return r.slice()},l.copy=function(){return qT().domain([e,t]).range(i).unknown(s)},Br.apply(zi(l),arguments)}function YT(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[tu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return YT().domain(e).range(t).unknown(n)},Br.apply(i,arguments)}const dy=new Date,fy=new Date;function Zt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const h=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return h;let f;do h.push(f=new Date(+s)),t(s,u),e(s);while(f<s&&s<l);return h},i.filter=s=>Zt(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(dy.setTime(+s),fy.setTime(+l),e(dy),e(fy),Math.floor(n(dy,fy))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const Nf=Zt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Nf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Nf);Nf.range;const Ha=1e3,Mr=Ha*60,qa=Mr*60,Ka=qa*24,$0=Ka*7,nP=Ka*30,hy=Ka*365,jo=Zt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ha)},(e,t)=>(t-e)/Ha,e=>e.getUTCSeconds());jo.range;const B0=Zt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ha)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getMinutes());B0.range;const U0=Zt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getUTCMinutes());U0.range;const z0=Zt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ha-e.getMinutes()*Mr)},(e,t)=>{e.setTime(+e+t*qa)},(e,t)=>(t-e)/qa,e=>e.getHours());z0.range;const G0=Zt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qa)},(e,t)=>(t-e)/qa,e=>e.getUTCHours());G0.range;const au=Zt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mr)/Ka,e=>e.getDate()-1);au.range;const fh=Zt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ka,e=>e.getUTCDate()-1);fh.range;const FT=Zt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ka,e=>Math.floor(e/Ka));FT.range;function Ko(e){return Zt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Mr)/$0)}const hh=Ko(0),jf=Ko(1),X$=Ko(2),W$=Ko(3),Xs=Ko(4),Q$=Ko(5),Z$=Ko(6);hh.range;jf.range;X$.range;W$.range;Xs.range;Q$.range;Z$.range;function Xo(e){return Zt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/$0)}const ph=Xo(0),Mf=Xo(1),J$=Xo(2),eB=Xo(3),Ws=Xo(4),tB=Xo(5),nB=Xo(6);ph.range;Mf.range;J$.range;eB.range;Ws.range;tB.range;nB.range;const H0=Zt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());H0.range;const q0=Zt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());q0.range;const Xa=Zt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Xa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Xa.range;const Wa=Zt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Wa.range;function VT(e,t,n,r,i,s){const l=[[jo,1,Ha],[jo,5,5*Ha],[jo,15,15*Ha],[jo,30,30*Ha],[s,1,Mr],[s,5,5*Mr],[s,15,15*Mr],[s,30,30*Mr],[i,1,qa],[i,3,3*qa],[i,6,6*qa],[i,12,12*qa],[r,1,Ka],[r,2,2*Ka],[n,1,$0],[t,1,nP],[t,3,3*nP],[e,1,hy]];function u(f,p,m){const g=p<f;g&&([f,p]=[p,f]);const x=m&&typeof m.range=="function"?m:h(f,p,m),S=x?x.range(f,+p+1):[];return g?S.reverse():S}function h(f,p,m){const g=Math.abs(p-f)/m,x=P0(([,,C])=>C).right(l,g);if(x===l.length)return e.every(bv(f/hy,p/hy,m));if(x===0)return Nf.every(Math.max(bv(f,p,m),1));const[S,A]=l[g/l[x-1][2]<l[x][2]/g?x-1:x];return S.every(A)}return[u,h]}const[rB,aB]=VT(Wa,q0,ph,FT,G0,U0),[iB,oB]=VT(Xa,H0,hh,au,z0,B0);function py(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function my(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function sB(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,h=e.shortMonths,f=Pc(i),p=wc(i),m=Pc(s),g=wc(s),x=Pc(l),S=wc(l),A=Pc(u),C=wc(u),P=Pc(h),O=wc(h),T={a:ee,A:he,b:Se,B:k,c:null,d:lP,e:lP,f:DB,g:UB,G:GB,H:OB,I:TB,j:_B,L:KT,m:NB,M:jB,p:Z,q:F,Q:dP,s:fP,S:MB,u:kB,U:RB,V:IB,w:LB,W:$B,x:null,X:null,y:BB,Y:zB,Z:HB,"%":uP},j={a:ne,A:me,b:z,B:ae,c:null,d:cP,e:cP,f:VB,g:r8,G:i8,H:qB,I:YB,j:FB,L:WT,m:KB,M:XB,p:ve,q:pe,Q:dP,s:fP,S:WB,u:QB,U:ZB,V:JB,w:e8,W:t8,x:null,X:null,y:n8,Y:a8,Z:o8,"%":uP},N={a:W,A:Y,b:J,B:ce,c:se,d:oP,e:oP,f:EB,g:iP,G:aP,H:sP,I:sP,j:bB,L:AB,m:vB,M:xB,p:U,q:yB,Q:PB,s:wB,S:SB,u:fB,U:hB,V:pB,w:dB,W:mB,x:te,X:L,y:iP,Y:aP,Z:gB,"%":CB};T.x=D(n,T),T.X=D(r,T),T.c=D(t,T),j.x=D(n,j),j.X=D(r,j),j.c=D(t,j);function D(ie,de){return function(be){var fe=[],rt=-1,Ge=0,Ct=ie.length,mt,dt,Ur;for(be instanceof Date||(be=new Date(+be));++rt<Ct;)ie.charCodeAt(rt)===37&&(fe.push(ie.slice(Ge,rt)),(dt=rP[mt=ie.charAt(++rt)])!=null?mt=ie.charAt(++rt):dt=mt==="e"?" ":"0",(Ur=de[mt])&&(mt=Ur(be,dt)),fe.push(mt),Ge=rt+1);return fe.push(ie.slice(Ge,rt)),fe.join("")}}function M(ie,de){return function(be){var fe=Cc(1900,void 0,1),rt=R(fe,ie,be+="",0),Ge,Ct;if(rt!=be.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(de&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Ge=my(Cc(fe.y,0,1)),Ct=Ge.getUTCDay(),Ge=Ct>4||Ct===0?Mf.ceil(Ge):Mf(Ge),Ge=fh.offset(Ge,(fe.V-1)*7),fe.y=Ge.getUTCFullYear(),fe.m=Ge.getUTCMonth(),fe.d=Ge.getUTCDate()+(fe.w+6)%7):(Ge=py(Cc(fe.y,0,1)),Ct=Ge.getDay(),Ge=Ct>4||Ct===0?jf.ceil(Ge):jf(Ge),Ge=au.offset(Ge,(fe.V-1)*7),fe.y=Ge.getFullYear(),fe.m=Ge.getMonth(),fe.d=Ge.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Ct="Z"in fe?my(Cc(fe.y,0,1)).getUTCDay():py(Cc(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Ct+5)%7:fe.w+fe.U*7-(Ct+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,my(fe)):py(fe)}}function R(ie,de,be,fe){for(var rt=0,Ge=de.length,Ct=be.length,mt,dt;rt<Ge;){if(fe>=Ct)return-1;if(mt=de.charCodeAt(rt++),mt===37){if(mt=de.charAt(rt++),dt=N[mt in rP?de.charAt(rt++):mt],!dt||(fe=dt(ie,be,fe))<0)return-1}else if(mt!=be.charCodeAt(fe++))return-1}return fe}function U(ie,de,be){var fe=f.exec(de.slice(be));return fe?(ie.p=p.get(fe[0].toLowerCase()),be+fe[0].length):-1}function W(ie,de,be){var fe=x.exec(de.slice(be));return fe?(ie.w=S.get(fe[0].toLowerCase()),be+fe[0].length):-1}function Y(ie,de,be){var fe=m.exec(de.slice(be));return fe?(ie.w=g.get(fe[0].toLowerCase()),be+fe[0].length):-1}function J(ie,de,be){var fe=P.exec(de.slice(be));return fe?(ie.m=O.get(fe[0].toLowerCase()),be+fe[0].length):-1}function ce(ie,de,be){var fe=A.exec(de.slice(be));return fe?(ie.m=C.get(fe[0].toLowerCase()),be+fe[0].length):-1}function se(ie,de,be){return R(ie,t,de,be)}function te(ie,de,be){return R(ie,n,de,be)}function L(ie,de,be){return R(ie,r,de,be)}function ee(ie){return l[ie.getDay()]}function he(ie){return s[ie.getDay()]}function Se(ie){return h[ie.getMonth()]}function k(ie){return u[ie.getMonth()]}function Z(ie){return i[+(ie.getHours()>=12)]}function F(ie){return 1+~~(ie.getMonth()/3)}function ne(ie){return l[ie.getUTCDay()]}function me(ie){return s[ie.getUTCDay()]}function z(ie){return h[ie.getUTCMonth()]}function ae(ie){return u[ie.getUTCMonth()]}function ve(ie){return i[+(ie.getUTCHours()>=12)]}function pe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var de=D(ie+="",T);return de.toString=function(){return ie},de},parse:function(ie){var de=M(ie+="",!1);return de.toString=function(){return ie},de},utcFormat:function(ie){var de=D(ie+="",j);return de.toString=function(){return ie},de},utcParse:function(ie){var de=M(ie+="",!0);return de.toString=function(){return ie},de}}}var rP={"-":"",_:" ",0:"0"},un=/^\s*\d+/,lB=/^%/,cB=/[\\^$*+?|[\]().{}]/g;function We(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function uB(e){return e.replace(cB,"\\$&")}function Pc(e){return new RegExp("^(?:"+e.map(uB).join("|")+")","i")}function wc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function dB(e,t,n){var r=un.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function fB(e,t,n){var r=un.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function hB(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function pB(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function mB(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function aP(e,t,n){var r=un.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function iP(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gB(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yB(e,t,n){var r=un.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function vB(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function oP(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function bB(e,t,n){var r=un.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function sP(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function xB(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function SB(e,t,n){var r=un.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function AB(e,t,n){var r=un.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function EB(e,t,n){var r=un.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function CB(e,t,n){var r=lB.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function PB(e,t,n){var r=un.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function wB(e,t,n){var r=un.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function lP(e,t){return We(e.getDate(),t,2)}function OB(e,t){return We(e.getHours(),t,2)}function TB(e,t){return We(e.getHours()%12||12,t,2)}function _B(e,t){return We(1+au.count(Xa(e),e),t,3)}function KT(e,t){return We(e.getMilliseconds(),t,3)}function DB(e,t){return KT(e,t)+"000"}function NB(e,t){return We(e.getMonth()+1,t,2)}function jB(e,t){return We(e.getMinutes(),t,2)}function MB(e,t){return We(e.getSeconds(),t,2)}function kB(e){var t=e.getDay();return t===0?7:t}function RB(e,t){return We(hh.count(Xa(e)-1,e),t,2)}function XT(e){var t=e.getDay();return t>=4||t===0?Xs(e):Xs.ceil(e)}function IB(e,t){return e=XT(e),We(Xs.count(Xa(e),e)+(Xa(e).getDay()===4),t,2)}function LB(e){return e.getDay()}function $B(e,t){return We(jf.count(Xa(e)-1,e),t,2)}function BB(e,t){return We(e.getFullYear()%100,t,2)}function UB(e,t){return e=XT(e),We(e.getFullYear()%100,t,2)}function zB(e,t){return We(e.getFullYear()%1e4,t,4)}function GB(e,t){var n=e.getDay();return e=n>=4||n===0?Xs(e):Xs.ceil(e),We(e.getFullYear()%1e4,t,4)}function HB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+We(t/60|0,"0",2)+We(t%60,"0",2)}function cP(e,t){return We(e.getUTCDate(),t,2)}function qB(e,t){return We(e.getUTCHours(),t,2)}function YB(e,t){return We(e.getUTCHours()%12||12,t,2)}function FB(e,t){return We(1+fh.count(Wa(e),e),t,3)}function WT(e,t){return We(e.getUTCMilliseconds(),t,3)}function VB(e,t){return WT(e,t)+"000"}function KB(e,t){return We(e.getUTCMonth()+1,t,2)}function XB(e,t){return We(e.getUTCMinutes(),t,2)}function WB(e,t){return We(e.getUTCSeconds(),t,2)}function QB(e){var t=e.getUTCDay();return t===0?7:t}function ZB(e,t){return We(ph.count(Wa(e)-1,e),t,2)}function QT(e){var t=e.getUTCDay();return t>=4||t===0?Ws(e):Ws.ceil(e)}function JB(e,t){return e=QT(e),We(Ws.count(Wa(e),e)+(Wa(e).getUTCDay()===4),t,2)}function e8(e){return e.getUTCDay()}function t8(e,t){return We(Mf.count(Wa(e)-1,e),t,2)}function n8(e,t){return We(e.getUTCFullYear()%100,t,2)}function r8(e,t){return e=QT(e),We(e.getUTCFullYear()%100,t,2)}function a8(e,t){return We(e.getUTCFullYear()%1e4,t,4)}function i8(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ws(e):Ws.ceil(e),We(e.getUTCFullYear()%1e4,t,4)}function o8(){return"+0000"}function uP(){return"%"}function dP(e){return+e}function fP(e){return Math.floor(+e/1e3)}var Ls,ZT,JT;s8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function s8(e){return Ls=sB(e),ZT=Ls.format,Ls.parse,JT=Ls.utcFormat,Ls.utcParse,Ls}function l8(e){return new Date(e)}function c8(e){return e instanceof Date?+e:+new Date(+e)}function Y0(e,t,n,r,i,s,l,u,h,f){var p=N0(),m=p.invert,g=p.domain,x=f(".%L"),S=f(":%S"),A=f("%I:%M"),C=f("%I %p"),P=f("%a %d"),O=f("%b %d"),T=f("%B"),j=f("%Y");function N(D){return(h(D)<D?x:u(D)<D?S:l(D)<D?A:s(D)<D?C:r(D)<D?i(D)<D?P:O:n(D)<D?T:j)(D)}return p.invert=function(D){return new Date(m(D))},p.domain=function(D){return arguments.length?g(Array.from(D,c8)):g().map(l8)},p.ticks=function(D){var M=g();return e(M[0],M[M.length-1],D??10)},p.tickFormat=function(D,M){return M==null?N:f(M)},p.nice=function(D){var M=g();return(!D||typeof D.range!="function")&&(D=t(M[0],M[M.length-1],D??10)),D?g(BT(M,D)):p},p.copy=function(){return ru(p,Y0(e,t,n,r,i,s,l,u,h,f))},p}function u8(){return Br.apply(Y0(iB,oB,Xa,H0,hh,au,z0,B0,jo,ZT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function d8(){return Br.apply(Y0(rB,aB,Wa,q0,ph,fh,G0,U0,jo,JT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mh(){var e=0,t=1,n,r,i,s,l=In,u=!1,h;function f(m){return m==null||isNaN(m=+m)?h:l(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(m){return arguments.length?(u=!!m,f):u},f.interpolator=function(m){return arguments.length?(l=m,f):l};function p(m){return function(g){var x,S;return arguments.length?([x,S]=g,l=m(x,S),f):[l(0),l(1)]}}return f.range=p(al),f.rangeRound=p(D0),f.unknown=function(m){return arguments.length?(h=m,f):h},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),f}}function Gi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function e_(){var e=zi(mh()(In));return e.copy=function(){return Gi(e,e_())},ei.apply(e,arguments)}function t_(){var e=k0(mh()).domain([1,10]);return e.copy=function(){return Gi(e,t_()).base(e.base())},ei.apply(e,arguments)}function n_(){var e=R0(mh());return e.copy=function(){return Gi(e,n_()).constant(e.constant())},ei.apply(e,arguments)}function F0(){var e=I0(mh());return e.copy=function(){return Gi(e,F0()).exponent(e.exponent())},ei.apply(e,arguments)}function f8(){return F0.apply(null,arguments).exponent(.5)}function r_(){var e=[],t=In;function n(r){if(r!=null&&!isNaN(r=+r))return t((tu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Ii),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Q5(e,s/r))},n.copy=function(){return r_(t).domain(e)},ei.apply(n,arguments)}function gh(){var e=0,t=.5,n=1,r=1,i,s,l,u,h,f=In,p,m=!1,g;function x(A){return isNaN(A=+A)?g:(A=.5+((A=+p(A))-s)*(r*A<r*s?u:h),f(m?Math.max(0,Math.min(1,A)):A))}x.domain=function(A){return arguments.length?([e,t,n]=A,i=p(e=+e),s=p(t=+t),l=p(n=+n),u=i===s?0:.5/(s-i),h=s===l?0:.5/(l-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(A){return arguments.length?(m=!!A,x):m},x.interpolator=function(A){return arguments.length?(f=A,x):f};function S(A){return function(C){var P,O,T;return arguments.length?([P,O,T]=C,f=C$(A,[P,O,T]),x):[f(0),f(.5),f(1)]}}return x.range=S(al),x.rangeRound=S(D0),x.unknown=function(A){return arguments.length?(g=A,x):g},function(A){return p=A,i=A(e),s=A(t),l=A(n),u=i===s?0:.5/(s-i),h=s===l?0:.5/(l-s),r=s<i?-1:1,x}}function a_(){var e=zi(gh()(In));return e.copy=function(){return Gi(e,a_())},ei.apply(e,arguments)}function i_(){var e=k0(gh()).domain([.1,1,10]);return e.copy=function(){return Gi(e,i_()).base(e.base())},ei.apply(e,arguments)}function o_(){var e=R0(gh());return e.copy=function(){return Gi(e,o_()).constant(e.constant())},ei.apply(e,arguments)}function V0(){var e=I0(gh());return e.copy=function(){return Gi(e,V0()).exponent(e.exponent())},ei.apply(e,arguments)}function h8(){return V0.apply(null,arguments).exponent(.5)}const Dc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:O0,scaleDiverging:a_,scaleDivergingLog:i_,scaleDivergingPow:V0,scaleDivergingSqrt:h8,scaleDivergingSymlog:o_,scaleIdentity:$T,scaleImplicit:xv,scaleLinear:LT,scaleLog:UT,scaleOrdinal:w0,scalePoint:e$,scalePow:L0,scaleQuantile:HT,scaleQuantize:qT,scaleRadial:GT,scaleSequential:e_,scaleSequentialLog:t_,scaleSequentialPow:F0,scaleSequentialQuantile:r_,scaleSequentialSqrt:f8,scaleSequentialSymlog:n_,scaleSqrt:V$,scaleSymlog:zT,scaleThreshold:YT,scaleTime:u8,scaleUtc:d8,tickFormat:IT},Symbol.toStringTag,{value:"Module"}));var Hi=e=>e.chartData,K0=X([Hi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),X0=(e,t,n,r)=>r?K0(e):Hi(e);function Qs(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(pr(t)&&pr(n))return!0}return!1}function hP(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function p8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(pr(n))i=n;else if(typeof n=="function")return;if(pr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Qs(l))return l}}function m8(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Qs(r))return hP(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Te(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&rC.test(i)){var h=rC.exec(i);if(h==null||t==null)l=void 0;else{var f=+h[1];l=t[0]-f}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(Te(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&aC.test(s)){var p=aC.exec(s);if(p==null||t==null)u=void 0;else{var m=+p[1];u=t[1]+m}}else u=t?.[1];var g=[l,u];if(Qs(g))return t==null?g:hP(g,t,n)}}}var il=1e9,g8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Q0,bt=!0,Ir="[DecimalError] ",Lo=Ir+"Invalid argument: ",W0=Ir+"Exponent out of range: ",ol=Math.floor,_o=Math.pow,y8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ur,sn=1e7,pt=7,s_=9007199254740991,kf=ol(s_/pt),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*pt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ae.dividedBy=Ae.div=function(e){return Fa(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,n=t.constructor;return ut(Fa(t,new n(e),0,1),n.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return Gt(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ur))throw Error(Ir+"NaN");if(n.s<1)throw Error(Ir+(n.s?"NaN":"-Infinity"));return n.eq(ur)?new r(0):(bt=!1,t=Fa(Kc(n,s),Kc(e,s),s),bt=!0,ut(t,i))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?u_(t,e):l_(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Ir+"NaN");return n.s?(bt=!1,t=Fa(n,e,0,1).times(e),bt=!0,n.minus(t)):ut(new r(n),i)};Ae.naturalExponential=Ae.exp=function(){return c_(this)};Ae.naturalLogarithm=Ae.ln=function(){return Kc(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?l_(t,e):u_(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lo+e);if(t=Gt(i)+1,r=i.d.length-1,n=r*pt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ae.squareRoot=Ae.sqrt=function(){var e,t,n,r,i,s,l,u=this,h=u.constructor;if(u.s<1){if(!u.s)return new h(0);throw Error(Ir+"NaN")}for(e=Gt(u),bt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ua(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ol((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new h(t)):r=new h(i.toString()),n=h.precision,i=l=n+3;;)if(s=r,r=s.plus(Fa(u,s,l+2)).times(.5),ua(s.d).slice(0,l)===(t=ua(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(ut(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return bt=!0,ut(r,n)};Ae.times=Ae.mul=function(e){var t,n,r,i,s,l,u,h,f,p=this,m=p.constructor,g=p.d,x=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,n=p.e+e.e,h=g.length,f=x.length,h<f&&(s=g,g=x,x=s,l=h,h=f,f=l),s=[],l=h+f,r=l;r--;)s.push(0);for(r=f;--r>=0;){for(t=0,i=h+r;i>r;)u=s[i]+x[r]*g[i-r-1]+t,s[i--]=u%sn|0,t=u/sn|0;s[i]=(s[i]+t)%sn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,bt?ut(e,m.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ha(e,0,il),t===void 0?t=r.rounding:ha(t,0,8),ut(n,e+Gt(n)+1,t))};Ae.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=zo(r,!0):(ha(e,0,il),t===void 0?t=i.rounding:ha(t,0,8),r=ut(new i(r),e+1,t),n=zo(r,!0,e+1)),n};Ae.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?zo(i):(ha(e,0,il),t===void 0?t=s.rounding:ha(t,0,8),r=ut(new s(i),e+Gt(i)+1,t),n=zo(r.abs(),!1,e+Gt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return ut(new t(e),Gt(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,n,r,i,s,l,u=this,h=u.constructor,f=12,p=+(e=new h(e));if(!e.s)return new h(ur);if(u=new h(u),!u.s){if(e.s<1)throw Error(Ir+"Infinity");return u}if(u.eq(ur))return u;if(r=h.precision,e.eq(ur))return ut(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=p<0?-p:p)<=s_){for(i=new h(ur),t=Math.ceil(r/pt+4),bt=!1;n%2&&(i=i.times(u),mP(i.d,t)),n=ol(n/2),n!==0;)u=u.times(u),mP(u.d,t);return bt=!0,e.s<0?new h(ur).div(i):ut(i,r)}}else if(s<0)throw Error(Ir+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,bt=!1,i=e.times(Kc(u,r+f)),bt=!0,i=c_(i),i.s=s,i};Ae.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Gt(i),r=zo(i,n<=s.toExpNeg||n>=s.toExpPos)):(ha(e,1,il),t===void 0?t=s.rounding:ha(t,0,8),i=ut(new s(i),e,t),n=Gt(i),r=zo(i,e<=n||n<=s.toExpNeg,e)),r};Ae.toSignificantDigits=Ae.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ha(e,1,il),t===void 0?t=r.rounding:ha(t,0,8)),ut(new r(n),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Gt(e),n=e.constructor;return zo(e,t<=n.toExpNeg||t>=n.toExpPos)};function l_(e,t){var n,r,i,s,l,u,h,f,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),bt?ut(t,m):t;if(h=e.d,f=t.d,l=e.e,i=t.e,h=h.slice(),s=l-i,s){for(s<0?(r=h,s=-s,u=f.length):(r=f,i=l,u=h.length),l=Math.ceil(m/pt),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=h.length,s=f.length,u-s<0&&(s=u,r=f,f=h,h=r),n=0;s;)n=(h[--s]=h[s]+f[s]+n)/sn|0,h[s]%=sn;for(n&&(h.unshift(n),++i),u=h.length;h[--u]==0;)h.pop();return t.d=h,t.e=i,bt?ut(t,m):t}function ha(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Lo+e)}function ua(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=pt-r.length,n&&(s+=Ni(n)),s+=r;l=e[t],r=l+"",n=pt-r.length,n&&(s+=Ni(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Fa=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%sn|0,l=s/sn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,h;if(s!=l)h=s>l?1:-1;else for(u=h=0;u<s;u++)if(r[u]!=i[u]){h=r[u]>i[u]?1:-1;break}return h}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*sn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,h,f,p,m,g,x,S,A,C,P,O,T,j,N,D,M,R,U=r.constructor,W=r.s==i.s?1:-1,Y=r.d,J=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Ir+"Division by zero");for(h=r.e-i.e,M=J.length,N=Y.length,x=new U(W),S=x.d=[],f=0;J[f]==(Y[f]||0);)++f;if(J[f]>(Y[f]||0)&&--h,s==null?O=s=U.precision:l?O=s+(Gt(r)-Gt(i))+1:O=s,O<0)return new U(0);if(O=O/pt+2|0,f=0,M==1)for(p=0,J=J[0],O++;(f<N||p)&&O--;f++)T=p*sn+(Y[f]||0),S[f]=T/J|0,p=T%J|0;else{for(p=sn/(J[0]+1)|0,p>1&&(J=e(J,p),Y=e(Y,p),M=J.length,N=Y.length),j=M,A=Y.slice(0,M),C=A.length;C<M;)A[C++]=0;R=J.slice(),R.unshift(0),D=J[0],J[1]>=sn/2&&++D;do p=0,u=t(J,A,M,C),u<0?(P=A[0],M!=C&&(P=P*sn+(A[1]||0)),p=P/D|0,p>1?(p>=sn&&(p=sn-1),m=e(J,p),g=m.length,C=A.length,u=t(m,A,g,C),u==1&&(p--,n(m,M<g?R:J,g))):(p==0&&(u=p=1),m=J.slice()),g=m.length,g<C&&m.unshift(0),n(A,m,C),u==-1&&(C=A.length,u=t(J,A,M,C),u<1&&(p++,n(A,M<C?R:J,C))),C=A.length):u===0&&(p++,A=[0]),S[f++]=p,u&&A[0]?A[C++]=Y[j]||0:(A=[Y[j]],C=1);while((j++<N||A[0]!==void 0)&&O--)}return S[0]||S.shift(),x.e=h,ut(x,l?s+Gt(x)+1:s)}})();function c_(e,t){var n,r,i,s,l,u,h=0,f=0,p=e.constructor,m=p.precision;if(Gt(e)>16)throw Error(W0+Gt(e));if(!e.s)return new p(ur);for(bt=!1,u=m,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(r=Math.log(_o(2,f))/Math.LN10*2+5|0,u+=r,n=i=s=new p(ur),p.precision=u;;){if(i=ut(i.times(e),u),n=n.times(++h),l=s.plus(Fa(i,n,u)),ua(l.d).slice(0,u)===ua(s.d).slice(0,u)){for(;f--;)s=ut(s.times(s),u);return p.precision=m,t==null?(bt=!0,ut(s,m)):s}s=l}}function Gt(e){for(var t=e.e*pt,n=e.d[0];n>=10;n/=10)t++;return t}function gy(e,t,n){if(t>e.LN10.sd())throw bt=!0,n&&(e.precision=n),Error(Ir+"LN10 precision limit exceeded");return ut(new e(e.LN10),t)}function Ni(e){for(var t="";e--;)t+="0";return t}function Kc(e,t){var n,r,i,s,l,u,h,f,p,m=1,g=10,x=e,S=x.d,A=x.constructor,C=A.precision;if(x.s<1)throw Error(Ir+(x.s?"NaN":"-Infinity"));if(x.eq(ur))return new A(0);if(t==null?(bt=!1,f=C):f=t,x.eq(10))return t==null&&(bt=!0),gy(A,f);if(f+=g,A.precision=f,n=ua(S),r=n.charAt(0),s=Gt(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=ua(x.d),r=n.charAt(0),m++;s=Gt(x),r>1?(x=new A("0."+n),s++):x=new A(r+"."+n.slice(1))}else return h=gy(A,f+2,C).times(s+""),x=Kc(new A(r+"."+n.slice(1)),f-g).plus(h),A.precision=C,t==null?(bt=!0,ut(x,C)):x;for(u=l=x=Fa(x.minus(ur),x.plus(ur),f),p=ut(x.times(x),f),i=3;;){if(l=ut(l.times(p),f),h=u.plus(Fa(l,new A(i),f)),ua(h.d).slice(0,f)===ua(u.d).slice(0,f))return u=u.times(2),s!==0&&(u=u.plus(gy(A,f+2,C).times(s+""))),u=Fa(u,new A(m),f),A.precision=C,t==null?(bt=!0,ut(u,C)):u;u=h,i+=2}}function pP(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=ol(n/pt),e.d=[],r=(n+1)%pt,n<0&&(r+=pt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=pt;r<i;)e.d.push(+t.slice(r,r+=pt));t=t.slice(r),r=pt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),bt&&(e.e>kf||e.e<-kf))throw Error(W0+n)}else e.s=0,e.e=0,e.d=[0];return e}function ut(e,t,n){var r,i,s,l,u,h,f,p,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=pt,i=t,f=m[p=0];else{if(p=Math.ceil((r+1)/pt),s=m.length,p>=s)return e;for(f=s=m[p],l=1;s>=10;s/=10)l++;r%=pt,i=r-pt+l}if(n!==void 0&&(s=_o(10,l-i-1),u=f/s%10|0,h=t<0||m[p+1]!==void 0||f%s,h=n<4?(u||h)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||h||n==6&&(r>0?i>0?f/_o(10,l-i):0:m[p-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return h?(s=Gt(e),m.length=1,t=t-s-1,m[0]=_o(10,(pt-t%pt)%pt),e.e=ol(-t/pt)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=p,s=1,p--):(m.length=p+1,s=_o(10,pt-r),m[p]=i>0?(f/_o(10,l-i)%_o(10,i)|0)*s:0),h)for(;;)if(p==0){(m[0]+=s)==sn&&(m[0]=1,++e.e);break}else{if(m[p]+=s,m[p]!=sn)break;m[p--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(bt&&(e.e>kf||e.e<-kf))throw Error(W0+Gt(e));return e}function u_(e,t){var n,r,i,s,l,u,h,f,p,m,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),bt?ut(t,x):t;if(h=e.d,m=t.d,r=t.e,f=e.e,h=h.slice(),l=f-r,l){for(p=l<0,p?(n=h,l=-l,u=m.length):(n=m,r=f,u=h.length),i=Math.max(Math.ceil(x/pt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=h.length,u=m.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(h[i]!=m[i]){p=h[i]<m[i];break}l=0}for(p&&(n=h,h=m,m=n,t.s=-t.s),u=h.length,i=m.length-u;i>0;--i)h[u++]=0;for(i=m.length;i>l;){if(h[--i]<m[i]){for(s=i;s&&h[--s]===0;)h[s]=sn-1;--h[s],h[i]+=sn}h[i]-=m[i]}for(;h[--u]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(t.d=h,t.e=r,bt?ut(t,x):t):new g(0)}function zo(e,t,n){var r,i=Gt(e),s=ua(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+Ni(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ni(-i-1)+s,n&&(r=n-l)>0&&(s+=Ni(r))):i>=l?(s+=Ni(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+Ni(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=Ni(r))),e.s<0?"-"+s:s}function mP(e,t){if(e.length>t)return e.length=t,!0}function d_(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Lo+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return pP(l,s.toString())}else if(typeof s!="string")throw Error(Lo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,y8.test(s))pP(l,s);else throw Error(Lo+s)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=d_,i.config=i.set=v8,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function v8(e){if(!e||typeof e!="object")throw Error(Ir+"Object expected");var t,n,r,i=["precision",1,il,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(ol(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Lo+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Lo+n+": "+r);return this}var Q0=d_(g8);ur=new Q0(1);const tt=Q0;var b8=e=>e,f_={},h_=e=>e===f_,gP=e=>function t(){return arguments.length===0||arguments.length===1&&h_(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},p_=(e,t)=>e===1?t:gP(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==f_).length;return s>=e?t(...r):p_(e-s,gP(function(){for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];var f=r.map(p=>h_(p)?u.shift():p);return t(...f,...u)}))}),yh=e=>p_(e.length,e),Cv=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},x8=yh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),S8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return b8;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,h)=>h(u),s(...arguments))}},Pv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),m_=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var h;return l===((h=t)===null||h===void 0?void 0:h[u])})||(t=i,n=e(...i)),n}};function g_(e){var t;return e===0?t=1:t=Math.floor(new tt(e).abs().log(10).toNumber())+1,t}function y_(e,t,n){for(var r=new tt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}yh((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});yh((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});yh((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var v_=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},b_=(e,t,n)=>{if(e.lte(0))return new tt(0);var r=g_(e.toNumber()),i=new tt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new tt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),h=u.mul(i);return t?new tt(h.toNumber()):new tt(Math.ceil(h.toNumber()))},A8=(e,t,n)=>{var r=new tt(1),i=new tt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new tt(10).pow(g_(e)-1),i=new tt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new tt(Math.floor(e)))}else e===0?i=new tt(Math.floor((t-1)/2)):n||(i=new tt(Math.floor(e)));var l=Math.floor((t-1)/2),u=S8(x8(h=>i.add(new tt(h-l).mul(r)).toNumber()),Cv);return u(0,t)},x_=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new tt(0),tickMin:new tt(0),tickMax:new tt(0)};var l=b_(new tt(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new tt(0):(u=new tt(t).add(n).div(2),u=u.sub(new tt(u).mod(l)));var h=Math.ceil(u.sub(t).div(l).toNumber()),f=Math.ceil(new tt(n).sub(u).div(l).toNumber()),p=h+f+1;return p>r?x_(t,n,r,i,s+1):(p<r&&(f=n>0?f+(r-p):f,h=n>0?h:h+(r-p)),{step:l,tickMin:u.sub(new tt(h).mul(l)),tickMax:u.add(new tt(f).mul(l))})};function E8(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=v_([t,n]);if(l===-1/0||u===1/0){var h=u===1/0?[l,...Cv(0,r-1).map(()=>1/0)]:[...Cv(0,r-1).map(()=>-1/0),u];return t>n?Pv(h):h}if(l===u)return A8(l,r,i);var{step:f,tickMin:p,tickMax:m}=x_(l,u,s,i,0),g=y_(p,m.add(new tt(.1).mul(f)),f);return t>n?Pv(g):g}function C8(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=v_([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),h=b_(new tt(l).sub(s).div(u-1),i,0),f=[...y_(new tt(s),new tt(l),h),l];return i===!1&&(f=f.map(p=>Math.round(p))),n>r?Pv(f):f}var P8=m_(E8),w8=m_(C8),S_=e=>e.rootProps.maxBarSize,O8=e=>e.rootProps.barGap,A_=e=>e.rootProps.barCategoryGap,T8=e=>e.rootProps.barSize,iu=e=>e.rootProps.stackOffset,Z0=e=>e.options.chartName,J0=e=>e.rootProps.syncId,E_=e=>e.rootProps.syncMethod,eb=e=>e.options.eventEmitter,za={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},cr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},vh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},_8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:za.angleAxisId,includeHidden:!1,name:void 0,reversed:za.reversed,scale:za.scale,tick:za.tick,tickCount:void 0,ticks:void 0,type:za.type,unit:void 0},D8={allowDataOverflow:cr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:cr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:cr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:cr.scale,tick:cr.tick,tickCount:cr.tickCount,ticks:void 0,type:cr.type,unit:void 0},N8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:za.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:za.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:za.scale,tick:za.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},j8={allowDataOverflow:cr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:cr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:cr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:cr.scale,tick:cr.tick,tickCount:cr.tickCount,ticks:void 0,type:"category",unit:void 0},tb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?N8:_8,nb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?j8:D8,bh=e=>e.polarOptions,rb=X([Za,Ja,Qt],iT),C_=X([bh,rb],(e,t)=>{if(e!=null)return Tn(e.innerRadius,t,0)}),P_=X([bh,rb],(e,t)=>{if(e!=null)return Tn(e.outerRadius,t,t*.8)}),M8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},w_=X([bh],M8);X([tb,w_],vh);var O_=X([rb,C_,P_],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});X([nb,O_],vh);var T_=X([Qe,bh,C_,P_,Za,Ja],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:h,endAngle:f}=t;return{cx:Tn(l,i,i/2),cy:Tn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:h,endAngle:f,clockWise:!1}}}),St=(e,t)=>t,ou=(e,t,n)=>n;function ab(e){return e?.id}var Jt=e=>{var t=Qe(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},sl=e=>e.tooltip.settings.axisId,dn=e=>{var t=Jt(e),n=sl(e);return su(e,t,n)},__=X([dn],e=>e?.dataKey);function D_(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var h,f=(h=u.data)!==null&&h!==void 0?h:r;if(!(f==null||f.length===0)){var p=ab(u);f.forEach((m,g)=>{var x=s==null||i?g:String(vt(m,s,null)),S=vt(m,u.dataKey,0),A;l.has(x)?A=l.get(x):A={},Object.assign(A,{[p]:S}),l.set(x,A)})}}),Array.from(l.values())}function xh(e){return e.stackId!=null&&e.dataKey!=null}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(r){k8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k8(e,t,n){return(t=R8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R8(e){var t=I8(e,"string");return typeof t=="symbol"?t:t+""}function I8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wv=[0,"auto"],sr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},N_=(e,t)=>e.cartesianAxis.xAxis[t],qi=(e,t)=>{var n=N_(e,t);return n??sr},lr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:wv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:eu},j_=(e,t)=>e.cartesianAxis.yAxis[t],Yi=(e,t)=>{var n=j_(e,t);return n??lr},L8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ib=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??L8},Mt=(e,t,n)=>{switch(t){case"xAxis":return qi(e,n);case"yAxis":return Yi(e,n);case"zAxis":return ib(e,n);case"angleAxis":return tb(e,n);case"radiusAxis":return nb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},$8=(e,t,n)=>{switch(t){case"xAxis":return qi(e,n);case"yAxis":return Yi(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},su=(e,t,n)=>{switch(t){case"xAxis":return qi(e,n);case"yAxis":return Yi(e,n);case"angleAxis":return tb(e,n);case"radiusAxis":return nb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},M_=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ob(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var sb=e=>e.graphicalItems.cartesianItems,B8=X([St,ou],ob),lb=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),lu=X([sb,Mt,B8],lb),k_=X([lu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(xh)),R_=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),I_=X([lu],R_),cb=e=>e.map(t=>t.data).filter(Boolean).flat(1),U8=X([lu],cb),ub=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},db=X([U8,X0],ub),fb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:vt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:vt(i,r)}))):e.map(r=>({value:r})),Sh=X([db,Mt,lu],fb);function L_(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Wo(e){return e.filter(t=>fa(t)||t instanceof Date).map(Number).filter(t=>fr(t)===!1)}function z8(e,t,n){return!n||typeof t!="number"||fr(t)?[]:n.length?Wo(n.flatMap(r=>{var i=vt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!pr(s)||!pr(l)))return[t-s,t+l]})):[]}var G8=X([k_,X0,dn],D_),$_=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,h=u.map(ab);return[l,{stackedData:F4(e,h,n),graphicalItems:u}]}))},Ov=X([G8,k_,iu],$_),B_=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=Q4(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},H8=X([Ov,Hi,St],B_),U_=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,h,f=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>L_(i,m)),p=vt(s,(h=t.dataKey)!==null&&h!==void 0?h:l.dataKey);return{value:p,errorDomain:z8(s,p,f)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:vt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Ah=e=>e.errorBars,z_=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>L_(n,r));X([I_,Ah,St],z_);var q8=X([db,Mt,I_,Ah,St],U_);function Y8(e){var{value:t}=e;if(fa(t)||t instanceof Date)return t}var vP=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Wo(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},F8=(e,t,n)=>{var r=e.map(Y8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&JO(r))?wT(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},hb=e=>{var t;if(e==null||!("domain"in e))return wv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Wo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:wv},If=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},G_=e=>e.referenceElements.dots,ll=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),V8=X([G_,St,ou],ll),H_=e=>e.referenceElements.areas,K8=X([H_,St,ou],ll),q_=e=>e.referenceElements.lines,X8=X([q_,St,ou],ll),Y_=(e,t)=>{var n=Wo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},W8=X(V8,St,Y_),F_=(e,t)=>{var n=Wo(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Q8=X([K8,St],F_),V_=(e,t)=>{var n=Wo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Z8=X(X8,St,V_),J8=X(W8,Z8,Q8,(e,t,n)=>If(e,n,t)),K_=X([Mt],hb),pb=(e,t,n,r,i,s,l)=>{var u=p8(t,e.allowDataOverflow);if(u!=null)return u;var h=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",f=h?If(n,i,vP(r)):If(i,vP(r));return m8(t,f,e.allowDataOverflow)},e6=X([Mt,K_,H8,q8,J8,Qe,St],pb),t6=[0,1],mb=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:h}=e,f=Vo(t,s);return f&&u==null?wT(0,n.length):h==="category"?F8(r,e,f):i==="expand"?t6:l}},gb=X([Mt,Qe,db,Sh,iu,St,e6],mb),X_=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Wc(s));return u in Dc?u:"point"}}},cl=X([Mt,Qe,M_,Z0,St],X_);function n6(e){if(e!=null){if(e in Dc)return Dc[e]();var t="scale".concat(Wc(e));if(t in Dc)return Dc[t]()}}function yb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=n6(t);if(i!=null){var s=i.domain(n).range(r);return z4(s),s}}}var vb=(e,t,n)=>{var r=hb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Qs(e))return P8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Qs(e))return w8(e,t.tickCount,t.allowDecimals)}},bb=X([gb,su,cl],vb),xb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Qs(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},r6=X([Mt,gb,bb,St],xb),a6=X(Sh,Mt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Wo(e.map(u=>u.value))).sort((u,h)=>u-h);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),W_=X(a6,Qe,A_,Qt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!pr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=Tn(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),i6=(e,t)=>{var n=qi(e,t);return n==null||typeof n.padding!="string"?0:W_(e,"xAxis",t,n.padding)},o6=(e,t)=>{var n=Yi(e,t);return n==null||typeof n.padding!="string"?0:W_(e,"yAxis",t,n.padding)},s6=X(qi,i6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),l6=X(Yi,o6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),c6=X([Qt,s6,sh,oh,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),u6=X([Qt,Qe,l6,sh,oh,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),cu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return c6(e,n,r);case"yAxis":return u6(e,n,r);case"zAxis":return(i=ib(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return w_(e);case"radiusAxis":return O_(e,n);default:return}},Q_=X([Mt,cu],vh),ul=X([Mt,cl,r6,Q_],yb);X([lu,Ah,St],z_);function Z_(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Eh=(e,t)=>t,Ch=(e,t,n)=>n,d6=X(ah,Eh,Ch,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Z_)),f6=X(ih,Eh,Ch,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Z_)),J_=(e,t)=>({width:e.width,height:t.height}),h6=(e,t)=>{var n=typeof t.width=="number"?t.width:eu;return{width:n,height:e.height}},eD=X(Qt,qi,J_),p6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},m6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},g6=X(Ja,Qt,d6,Eh,Ch,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var h=J_(t,u);l==null&&(l=p6(t,r,e));var f=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(f)*h.height,l+=(f?-1:1)*h.height}),s}),y6=X(Za,Qt,f6,Eh,Ch,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var h=h6(t,u);l==null&&(l=m6(t,r,e));var f=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(f)*h.width,l+=(f?-1:1)*h.width}),s}),v6=(e,t)=>{var n=Qt(e),r=qi(e,t);if(r!=null){var i=g6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},b6=(e,t)=>{var n=Qt(e),r=Yi(e,t);if(r!=null){var i=y6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},tD=X(Qt,Yi,(e,t)=>{var n=typeof t.width=="number"?t.width:eu;return{width:n,height:e.height}}),bP=(e,t,n)=>{switch(t){case"xAxis":return eD(e,n).width;case"yAxis":return tD(e,n).height;default:return}},nD=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Vo(e,r),h=t.map(f=>f.value);if(l&&u&&s==="category"&&i&&JO(h))return h}},Sb=X([Qe,Sh,Mt,St],nD),rD=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Vo(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},Ab=X([Qe,Sh,su,St],rD),xP=X([Qe,$8,cl,ul,Sb,Ab,cu,bb,St],(e,t,n,r,i,s,l,u,h)=>{if(t==null)return null;var f=Vo(e,h);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:h,categoricalDomain:s,duplicateDomain:i,isCategorical:f,niceTicks:u,range:l,realScaleType:n,scale:r}}),x6=(e,t,n,r,i,s,l,u,h)=>{if(!(t==null||r==null)){var f=Vo(e,h),{type:p,ticks:m,tickCount:g}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=p==="category"&&r.bandwidth?r.bandwidth()/x:0;S=h==="angleAxis"&&s!=null&&s.length>=2?ln(s[0]-s[1])*2*S:S;var A=m||i;if(A){var C=A.map((P,O)=>{var T=l?l.indexOf(P):P;return{index:O,coordinate:r(T)+S,value:P,offset:S}});return C.filter(P=>!fr(P.coordinate))}return f&&u?u.map((P,O)=>({coordinate:r(P)+S,value:P,index:O,offset:S})):r.ticks?r.ticks(g).map(P=>({coordinate:r(P)+S,value:P,offset:S})):r.domain().map((P,O)=>({coordinate:r(P)+S,value:l?l[P]:P,index:O,offset:S}))}},aD=X([Qe,su,cl,ul,bb,cu,Sb,Ab,St],x6),S6=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Vo(e,l),{tickCount:h}=t,f=0;return f=l==="angleAxis"&&r?.length>=2?ln(r[0]-r[1])*2*f:f,u&&s?s.map((p,m)=>({coordinate:n(p)+f,value:p,index:m,offset:f})):n.ticks?n.ticks(h).map(p=>({coordinate:n(p)+f,value:p,offset:f})):n.domain().map((p,m)=>({coordinate:n(p)+f,value:i?i[p]:p,index:m,offset:f}))}},Zs=X([Qe,su,ul,cu,Sb,Ab,St],S6),Js=X(Mt,ul,(e,t)=>{if(!(e==null||t==null))return Rf(Rf({},e),{},{scale:t})}),A6=X([Mt,cl,gb,Q_],yb);X((e,t,n)=>ib(e,n),A6,(e,t)=>{if(!(e==null||t==null))return Rf(Rf({},e),{},{scale:t})});var E6=X([Qe,ah,ih],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),iD=e=>e.options.defaultTooltipEventType,oD=e=>e.options.validateTooltipEventTypes;function sD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Eb(e,t){var n=iD(e),r=oD(e);return sD(t,n,r)}function C6(e){return we(t=>Eb(t,e))}var lD=(e,t)=>{var n,r=Number(t);if(!(fr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},P6=e=>e.tooltip.settings,Mi={active:!1,index:null,dataKey:void 0,coordinate:void 0},w6={itemInteraction:{click:Mi,hover:Mi},axisInteraction:{click:Mi,hover:Mi},keyboardInteraction:Mi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},cD=mr({name:"tooltip",initialState:w6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Ya(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:O6,removeTooltipEntrySettings:T6,setTooltipSettingsState:_6,setActiveMouseOverItemIndex:uD,mouseLeaveItem:D6,mouseLeaveChart:dD,setActiveClickItemIndex:N6,setMouseOverAxisIndex:fD,setMouseClickAxisIndex:j6,setSyncInteraction:Tv,setKeyboardInteraction:_v}=cD.actions,M6=cD.reducer;function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){k6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k6(e,t,n){return(t=R6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e){var t=I6(e,"string");return typeof t=="symbol"?t:t+""}function I6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $6(e){return e.index!=null}var hD=(e,t,n,r)=>{if(t==null)return Mi;var i=L6(e,t,n);if(i==null)return Mi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if($6(i)){if(s)return qd(qd({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return qd(qd({},Mi),{},{coordinate:i.coordinate})},Cb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!pr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},pD=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var h=l[0],f=h==null?void 0:u(h.positions,s);if(f!=null)return f;var p=i?.[Number(s)];if(p)switch(n){case"horizontal":return{x:p.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:p.coordinate}}}},mD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},uu=e=>e.options.tooltipPayloadSearcher,dl=e=>e.tooltip;function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){B6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B6(e,t,n){return(t=U6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U6(e){var t=z6(e,"string");return typeof t=="symbol"?t:t+""}function z6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G6(e,t){return e??t}var gD=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:h,dataStartIndex:f,dataEndIndex:p}=n,m=[];return e.reduce((g,x)=>{var S,{dataDefinedOnItem:A,settings:C}=x,P=G6(A,u),O=Array.isArray(P)?oT(P,f,p):P,T=(S=C?.dataKey)!==null&&S!==void 0?S:r,j=C?.nameKey,N;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?N=DR(O,r,i):N=s(O,t,h,j),Array.isArray(N))N.forEach(M=>{var R=EP(EP({},C),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});g.push(iC({tooltipEntrySettings:R,dataKey:M.dataKey,payload:M.payload,value:vt(M.payload,M.dataKey),name:M.name}))});else{var D;g.push(iC({tooltipEntrySettings:C,dataKey:T,payload:N,value:vt(N,T),name:(D=vt(N,j))!==null&&D!==void 0?D:C?.name}))}return g},m)}},Pb=X([dn,Qe,M_,Z0,Jt],X_),H6=X([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),q6=X([Jt,sl],ob),du=X([H6,dn,q6],lb),Y6=X([du],e=>e.filter(xh)),F6=X([du],cb),fl=X([F6,Hi],ub),V6=X([Y6,Hi,dn],D_),wb=X([fl,dn,du],fb),K6=X([dn],hb),X6=X([du],e=>e.filter(xh)),W6=X([V6,X6,iu],$_),Q6=X([W6,Hi,Jt],B_),Z6=X([du],R_),J6=X([fl,dn,Z6,Ah,Jt],U_),eU=X([G_,Jt,sl],ll),tU=X([eU,Jt],Y_),nU=X([H_,Jt,sl],ll),rU=X([nU,Jt],F_),aU=X([q_,Jt,sl],ll),iU=X([aU,Jt],V_),oU=X([tU,iU,rU],If),sU=X([dn,K6,Q6,J6,oU,Qe,Jt],pb),yD=X([dn,Qe,fl,wb,iu,Jt,sU],mb),lU=X([yD,dn,Pb],vb),cU=X([dn,yD,lU,Jt],xb),vD=e=>{var t=Jt(e),n=sl(e),r=!1;return cu(e,t,n,r)},bD=X([dn,vD],vh),xD=X([dn,Pb,cU,bD],yb),uU=X([Qe,wb,dn,Jt],nD),dU=X([Qe,wb,dn,Jt],rD),fU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:h}=t,f=Vo(e,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=h==="category"&&r.bandwidth?r.bandwidth()/p:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?ln(i[0]-i[1])*2*m:m,f&&l?l.map((g,x)=>({coordinate:r(g)+m,value:g,index:x,offset:m})):r.domain().map((g,x)=>({coordinate:r(g)+m,value:s?s[g]:g,index:x,offset:m}))}}},ti=X([Qe,dn,Pb,xD,vD,uU,dU,Jt],fU),Ob=X([iD,oD,P6],(e,t,n)=>sD(n.shared,e,t)),SD=e=>e.tooltip.settings.trigger,Tb=e=>e.tooltip.settings.defaultIndex,Ph=X([dl,Ob,SD,Tb],hD),Go=X([Ph,fl],Cb),AD=X([ti,Go],lD),ED=X([Ph],e=>{if(e)return e.dataKey}),CD=X([dl,Ob,SD,Tb],mD),hU=X([Za,Ja,Qe,Qt,ti,Tb,CD,uu],pD),pU=X([Ph,hU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),mU=X([Ph],e=>e.active),gU=X([CD,Go,Hi,__,AD,uu,Ob],gD);X([gU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){yU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yU(e,t,n){return(t=vU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vU(e){var t=bU(e,"string");return typeof t=="symbol"?t:t+""}function bU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xU=()=>we(dn),SU=()=>{var e=xU(),t=we(ti),n=we(xD);return v0(PP(PP({},e),{},{scale:n}),t)},AU=()=>we(Z0),_b=(e,t)=>t,PD=(e,t,n)=>n,Db=(e,t,n,r)=>r,EU=X(ti,e=>Qf(e,t=>t.coordinate)),Nb=X([dl,_b,PD,Db],hD),wD=X([Nb,fl],Cb),CU=(e,t,n)=>{if(t!=null){var r=dl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},OD=X([dl,_b,PD,Db],mD),Lf=X([Za,Ja,Qe,Qt,ti,Db,OD,uu],pD),PU=X([Nb,Lf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),TD=X(ti,wD,lD),wU=X([OD,wD,Hi,__,TD,uu,_b],gD),OU=X([Nb],e=>({isActive:e.active,activeIndex:e.index})),TU=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var h=Z4(e.chartX,e.chartY,t,n,u);if(h){var f=e3(h,t),p=B4(f,l,s,r,i),m=J4(t,s,p,h);return{activeIndex:String(p),activeCoordinate:m}}}};function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dv.apply(null,arguments)}function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(n),!0).forEach(function(r){_U(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _U(e,t,n){return(t=DU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DU(e){var t=NU(e,"string");return typeof t=="symbol"?t:t+""}function NU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:h,chartName:f}=e,p=t,m=n,g=r;if(!u||!p||f!=="ScatterChart"&&h!=="axis")return null;var x,S;if(f==="ScatterChart")x=p,S=e5;else if(f==="BarChart")x=t5(l,p,i,s),S=AT;else if(l==="radial"){var{cx:A,cy:C,radius:P,startAngle:O,endAngle:T}=ET(p);x={cx:A,cy:C,startAngle:O,endAngle:T,innerRadius:P,outerRadius:P},S=PT}else x={points:k5(l,p,i)},S=yT;var j=typeof u=="object"&&"className"in u?u.className:void 0,N=Yd(Yd(Yd(Yd({stroke:"#ccc",pointerEvents:"none"},i),x),Ut(u,!1)),{},{payload:m,payloadIndex:g,className:nt("recharts-tooltip-cursor",j)});return E.isValidElement(u)?E.cloneElement(u,N):E.createElement(S,N)}function MU(e){var t=SU(),n=fT(),r=E0(),i=AU();return E.createElement(jU,Dv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var _D=E.createContext(null),kU=()=>E.useContext(_D),yy={exports:{}},OP;function RU(){return OP||(OP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(h,f,p){this.fn=h,this.context=f,this.once=p||!1}function s(h,f,p,m,g){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,m||h,g),S=n?n+f:f;return h._events[S]?h._events[S].fn?h._events[S]=[h._events[S],x]:h._events[S].push(x):(h._events[S]=x,h._eventsCount++),h}function l(h,f){--h._eventsCount===0?h._events=new r:delete h._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],p,m;if(this._eventsCount===0)return f;for(m in p=this._events)t.call(p,m)&&f.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},u.prototype.listeners=function(f){var p=n?n+f:f,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,x=m.length,S=new Array(x);g<x;g++)S[g]=m[g].fn;return S},u.prototype.listenerCount=function(f){var p=n?n+f:f,m=this._events[p];return m?m.fn?1:m.length:0},u.prototype.emit=function(f,p,m,g,x,S){var A=n?n+f:f;if(!this._events[A])return!1;var C=this._events[A],P=arguments.length,O,T;if(C.fn){switch(C.once&&this.removeListener(f,C.fn,void 0,!0),P){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,p),!0;case 3:return C.fn.call(C.context,p,m),!0;case 4:return C.fn.call(C.context,p,m,g),!0;case 5:return C.fn.call(C.context,p,m,g,x),!0;case 6:return C.fn.call(C.context,p,m,g,x,S),!0}for(T=1,O=new Array(P-1);T<P;T++)O[T-1]=arguments[T];C.fn.apply(C.context,O)}else{var j=C.length,N;for(T=0;T<j;T++)switch(C[T].once&&this.removeListener(f,C[T].fn,void 0,!0),P){case 1:C[T].fn.call(C[T].context);break;case 2:C[T].fn.call(C[T].context,p);break;case 3:C[T].fn.call(C[T].context,p,m);break;case 4:C[T].fn.call(C[T].context,p,m,g);break;default:if(!O)for(N=1,O=new Array(P-1);N<P;N++)O[N-1]=arguments[N];C[T].fn.apply(C[T].context,O)}}return!0},u.prototype.on=function(f,p,m){return s(this,f,p,m,!1)},u.prototype.once=function(f,p,m){return s(this,f,p,m,!0)},u.prototype.removeListener=function(f,p,m,g){var x=n?n+f:f;if(!this._events[x])return this;if(!p)return l(this,x),this;var S=this._events[x];if(S.fn)S.fn===p&&(!g||S.once)&&(!m||S.context===m)&&l(this,x);else{for(var A=0,C=[],P=S.length;A<P;A++)(S[A].fn!==p||g&&!S[A].once||m&&S[A].context!==m)&&C.push(S[A]);C.length?this._events[x]=C.length===1?C[0]:C:l(this,x)}return this},u.prototype.removeAllListeners=function(f){var p;return f?(p=n?n+f:f,this._events[p]&&l(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(yy)),yy.exports}var IU=RU();const LU=Xr(IU);var Xc=new LU,Nv="recharts.syncEvent.tooltip",TP="recharts.syncEvent.brush";function DD(e,t){if(t){var n=Number.parseInt(t,10);if(!fr(n))return e?.[n]}}var $U={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ND=mr({name:"options",initialState:$U,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),BU=ND.reducer,{createEventEmitter:UU}=ND.actions;function zU(e){return e.tooltip.syncInteraction}var GU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},jD=mr({name:"chartData",initialState:GU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:_P,setDataStartEndIndexes:HU,setComputedData:pV}=jD.actions,qU=jD.reducer,YU=["x","y"];function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(r){FU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FU(e,t,n){return(t=VU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VU(e){var t=KU(e,"string");return typeof t=="symbol"?t:t+""}function KU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XU(e,t){if(e==null)return{};var n,r,i=WU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var MD=()=>{};function QU(){var e=we(J0),t=we(eb),n=Et(),r=we(E_),i=we(ti),s=E0(),l=x0(),u=we(h=>h.rootProps.className);E.useEffect(()=>{if(e==null)return MD;var h=(f,p,m)=>{if(t!==m&&e===f){if(r==="index"){var g;if(l&&p!==null&&p!==void 0&&(g=p.payload)!==null&&g!==void 0&&g.coordinate){var x=p.payload.coordinate,{x:S,y:A}=x,C=XU(x,YU),P=wo(wo(wo({},C),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),O=wo(wo({},p),{},{payload:wo(wo({},p.payload),{},{coordinate:P})});n(O)}else n(p);return}if(i!=null){var T;if(typeof r=="function"){var j={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},N=r(i,j);T=i[N]}else r==="value"&&(T=i.find(ce=>String(ce.value)===p.payload.label));var{coordinate:D}=p.payload;if(T==null||p.payload.active===!1||D==null||l==null){n(Tv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:M,y:R}=D,U=Math.min(M,l.x+l.width),W=Math.min(R,l.y+l.height),Y={x:s==="horizontal"?T.coordinate:U,y:s==="horizontal"?W:T.coordinate},J=Tv({active:p.payload.active,coordinate:Y,dataKey:p.payload.dataKey,index:String(T.index),label:p.payload.label});n(J)}}};return Xc.on(Nv,h),()=>{Xc.off(Nv,h)}},[u,n,t,e,r,i,s,l])}function ZU(){var e=we(J0),t=we(eb),n=Et();E.useEffect(()=>{if(e==null)return MD;var r=(i,s,l)=>{t!==l&&e===i&&n(HU(s))};return Xc.on(TP,r),()=>{Xc.off(TP,r)}},[n,t,e])}function JU(){var e=Et();E.useEffect(()=>{e(UU())},[e]),QU(),ZU()}function ez(e,t,n,r,i,s){var l=we(g=>CU(g,e,t)),u=we(eb),h=we(J0),f=we(E_),p=we(zU),m=p?.active;E.useEffect(()=>{if(!m&&h!=null&&u!=null){var g=Tv({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Xc.emit(Nv,h,g,u)}},[m,n,l,i,r,u,h,f,s])}function NP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(n),!0).forEach(function(r){tz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tz(e,t,n){return(t=nz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nz(e){var t=rz(e,"string");return typeof t=="symbol"?t:t+""}function rz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function az(e){return e.dataKey}function iz(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(j3,t)}var MP=[],oz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!rl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function vy(e){var t=$r(e,oz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:h,offset:f,payloadUniqBy:p,position:m,reverseDirection:g,useTranslate3d:x,wrapperStyle:S,cursor:A,shared:C,trigger:P,defaultIndex:O,portal:T,axisId:j}=t,N=Et(),D=typeof O=="number"?String(O):O;E.useEffect(()=>{N(_6({shared:C,trigger:P,axisId:j,active:n,defaultIndex:D}))},[N,C,P,j,n,D]);var M=x0(),R=gT(),U=C6(C),{activeIndex:W,isActive:Y}=we(z=>OU(z,U,P,D)),J=we(z=>wU(z,U,P,D)),ce=we(z=>TD(z,U,P,D)),se=we(z=>PU(z,U,P,D)),te=J,L=kU(),ee=n??Y,[he,Se]=k2([te,ee]),k=U==="axis"?ce:void 0;ez(U,P,se,k,W,ee);var Z=T??L;if(Z==null)return null;var F=te??MP;ee||(F=MP),u&&F.length&&(F=_2(te.filter(z=>z.value!=null&&(z.hide!==!0||t.includeHidden)),p,az));var ne=F.length>0,me=E.createElement(B3,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:h,active:ee,coordinate:se,hasPayload:ne,offset:f,position:m,reverseDirection:g,useTranslate3d:x,viewBox:M,wrapperStyle:S,lastBoundingBox:he,innerRef:Se,hasPortalFromProps:!!T},iz(l,jP(jP({},t),{},{payload:F,label:k,active:ee,coordinate:se,accessibilityLayer:R})));return E.createElement(E.Fragment,null,n2.createPortal(me,Z),ee&&E.createElement(MU,{cursor:A,tooltipEventType:U,coordinate:se,payload:te,index:W}))}var by={},xy={},Sy={},kP;function sz(){return kP||(kP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const h=s!=null&&s.includes("leading"),f=s==null||s.includes("trailing"),p=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{f&&p(),A()};let g=null;const x=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},r)},S=()=>{g!==null&&(clearTimeout(g),g=null)},A=()=>{S(),l=void 0,u=null},C=()=>{p()},P=function(...O){if(i?.aborted)return;l=this,u=O;const T=g==null;x(),h&&T&&p()};return P.schedule=x,P.cancel=A,P.flush=C,i?.addEventListener("abort",A,{once:!0}),P}e.debounce=t})(Sy)),Sy}var RP;function lz(){return RP||(RP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:h}=s,f=Array(2);l&&(f[0]="leading"),u&&(f[1]="trailing");let p,m=null;const g=t.debounce(function(...A){p=r.apply(this,A),m=null},i,{edges:f}),x=function(...A){return h!=null&&(m===null&&(m=Date.now()),Date.now()-m>=h)?(p=r.apply(this,A),m=Date.now(),g.cancel(),g.schedule(),p):(g.apply(this,A),p)},S=()=>(g.flush(),p);return x.cancel=g.cancel,x.flush=S,x}e.debounce=n})(xy)),xy}var IP;function cz(){return IP||(IP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lz();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(by)),by}var Ay,LP;function uz(){return LP||(LP=1,Ay=cz().throttle),Ay}var dz=uz();const fz=Xr(dz);var kc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ey(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(n),!0).forEach(function(r){hz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hz(e,t,n){return(t=pz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pz(e){var t=mz(e,"string");return typeof t=="symbol"?t:t+""}function mz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cy=E.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:h,children:f,debounce:p=0,id:m,className:g,onResize:x,style:S={}}=e,A=E.useRef(null),C=E.useRef();C.current=x,E.useImperativeHandle(t,()=>A.current);var[P,O]=E.useState({containerWidth:r.width,containerHeight:r.height}),T=E.useCallback((N,D)=>{O(M=>{var R=Math.round(N),U=Math.round(D);return M.containerWidth===R&&M.containerHeight===U?M:{containerWidth:R,containerHeight:U}})},[]);E.useEffect(()=>{var N=U=>{var W,{width:Y,height:J}=U[0].contentRect;T(Y,J),(W=C.current)===null||W===void 0||W.call(C,Y,J)};p>0&&(N=fz(N,p,{trailing:!0,leading:!1}));var D=new ResizeObserver(N),{width:M,height:R}=A.current.getBoundingClientRect();return T(M,R),D.observe(A.current),()=>{D.disconnect()}},[T,p]);var j=E.useMemo(()=>{var{containerWidth:N,containerHeight:D}=P;if(N<0||D<0)return null;kc(Do(i)||Do(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),kc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=Do(i)?N:i,R=Do(s)?D:s;return n&&n>0&&(M?R=M/n:R&&(M=R*n),h&&R>h&&(R=h)),kc(M>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,R,i,s,l,u,n),E.Children.map(f,U=>E.cloneElement(U,{width:M,height:R,style:Ey({width:M,height:R},U.props.style)}))},[n,f,s,h,u,l,P,i]);return E.createElement("div",{id:m?"".concat(m):void 0,className:nt("recharts-responsive-container",g),style:Ey(Ey({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:h}),ref:A},E.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),el=e=>null;el.displayName="Cell";function gz(e,t,n){return(t=yz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bz{constructor(t){gz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function BP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(n),!0).forEach(function(r){Sz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sz(e,t,n){return(t=Az(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Az(e){var t=Ez(e,"string");return typeof t=="symbol"?t:t+""}function Ez(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cz={cacheSize:2e3,enableCache:!0},kD=xz({},Cz),UP=new bz(kD.cacheSize),Pz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zP="recharts_measurement_span";function wz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var GP=(e,t)=>{try{var n=document.getElementById(zP);n||(n=document.createElement("span"),n.setAttribute("id",zP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Pz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Rc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||rl.isSsr)return{width:0,height:0};if(!kD.enableCache)return GP(t,n);var r=wz(t,n),i=UP.get(r);if(i)return i;var s=GP(t,n);return UP.set(r,s),s},HP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Oz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Tz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_z=Object.keys(RD),Bs="NaN";function Dz(e,t){return e*RD[t]}class Yn{static parse(t){var n,[,r,i]=(n=Tz.exec(t))!==null&&n!==void 0?n:[];return new Yn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,fr(t)&&(this.unit=""),n!==""&&!Oz.test(n)&&(this.num=NaN,this.unit=""),_z.includes(n)&&(this.num=Dz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Yn(NaN,""):new Yn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Yn(NaN,""):new Yn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Yn(NaN,""):new Yn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Yn(NaN,""):new Yn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return fr(this.num)}}function ID(e){if(e.includes(Bs))return Bs;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=HP.exec(t))!==null&&n!==void 0?n:[],l=Yn.parse(r??""),u=Yn.parse(s??""),h=i==="*"?l.multiply(u):l.divide(u);if(h.isNaN())return Bs;t=t.replace(HP,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,p,m,g]=(f=qP.exec(t))!==null&&f!==void 0?f:[],x=Yn.parse(p??""),S=Yn.parse(g??""),A=m==="+"?x.add(S):x.subtract(S);if(A.isNaN())return Bs;t=t.replace(qP,A.toString())}return t}var YP=/\(([^()]*)\)/;function Nz(e){for(var t=e,n;(n=YP.exec(t))!=null;){var[,r]=n;t=t.replace(YP,ID(r))}return t}function jz(e){var t=e.replace(/\s+/g,"");return t=Nz(t),t=ID(t),t}function Mz(e){try{return jz(e)}catch{return Bs}}function Py(e){var t=Mz(e.slice(5,-1));return t===Bs?"":t}var kz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rz=["dx","dy","angle","className","breakAll"];function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jv.apply(null,arguments)}function FP(e,t){if(e==null)return{};var n,r,i=Iz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Iz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LD=/[ \f\n\r\t\v\u2028\u2029]+/,$D=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];cn(t)||(n?i=t.toString().split(""):i=t.toString().split(LD));var s=i.map(u=>({word:u,width:Rc(u,r).width})),l=n?0:Rc("",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},Lz=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:h}=e,f=Te(s),p=l,m=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce((J,ce)=>{var{word:se,width:te}=ce,L=J[J.length-1];if(L&&(r==null||i||L.width+te+n<Number(r)))L.words.push(se),L.width+=te+n;else{var ee={words:[se],width:te};J.push(ee)}return J},[])},g=m(t),x=W=>W.reduce((Y,J)=>Y.width>J.width?Y:J);if(!f||i)return g;var S=g.length>s||x(g).width>Number(r);if(!S)return g;for(var A="",C=W=>{var Y=p.slice(0,W),J=$D({breakAll:h,style:u,children:Y+A}).wordsWithComputedWidth,ce=m(J),se=ce.length>s||x(ce).width>Number(r);return[se,ce]},P=0,O=p.length-1,T=0,j;P<=O&&T<=p.length-1;){var N=Math.floor((P+O)/2),D=N-1,[M,R]=C(D),[U]=C(N);if(!M&&!U&&(P=N+1),M&&U&&(O=N-1),!M&&U){j=R;break}T++}return j||g},VP=e=>{var t=cn(e)?[]:e.toString().split(LD);return[{words:t}]},$z=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!rl.isSsr){var u,h,f=$D({breakAll:s,children:r,style:i});if(f){var{wordsWithComputedWidth:p,spaceWidth:m}=f;u=p,h=m}else return VP(r);return Lz({breakAll:s,children:r,maxLines:l,style:i},u,h,t,n)}return VP(r)},KP="#808080",wh=E.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:h="end",fill:f=KP}=e,p=FP(e,kz),m=E.useMemo(()=>$z({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:l,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,l,p.style,p.width]),{dx:g,dy:x,angle:S,className:A,breakAll:C}=p,P=FP(p,Rz);if(!fa(n)||!fa(r)||m.length===0)return null;var O=n+(Te(g)?g:0),T=r+(Te(x)?x:0),j;switch(h){case"start":j=Py("calc(".concat(s,")"));break;case"middle":j=Py("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:j=Py("calc(".concat(m.length-1," * -").concat(i,")"));break}var N=[];if(l){var D=m[0].width,{width:M}=p;N.push("scale(".concat(Te(M)?M/D:1,")"))}return S&&N.push("rotate(".concat(S,", ").concat(O,", ").concat(T,")")),N.length&&(P.transform=N.join(" ")),E.createElement("text",jv({},Ut(P,!0),{ref:t,x:O,y:T,className:nt("recharts-text",A),textAnchor:u,fill:f.includes("url")?KP:f}),m.map((R,U)=>{var W=R.words.join(C?"":" ");return E.createElement("tspan",{x:O,dy:U===0?j:i,key:"".concat(W,"-").concat(U)},W)}))});wh.displayName="Text";var Bz=["labelRef"];function Uz(e,t){if(e==null)return{};var n,r,i=zz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function XP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(n),!0).forEach(function(r){Gz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gz(e,t,n){return(t=Hz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hz(e){var t=qz(e,"string");return typeof t=="symbol"?t:t+""}function qz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(null,arguments)}var BD=E.createContext(null),Yz=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=E.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return E.createElement(BD.Provider,{value:l},s)},UD=()=>{var e=E.useContext(BD),t=x0();return e||t},Fz=E.createContext(null),Vz=()=>{var e=E.useContext(Fz),t=we(T_);return e||t},Kz=e=>{var{value:t,formatter:n}=e,r=cn(e.children)?t:e.children;return typeof n=="function"?n(r):r},jb=e=>e!=null&&typeof e=="function",Xz=(e,t)=>{var n=ln(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Wz=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:h,innerRadius:f,outerRadius:p,startAngle:m,endAngle:g,clockWise:x}=i,S=(f+p)/2,A=Xz(m,g),C=A>=0?1:-1,P,O;switch(t){case"insideStart":P=m+C*s,O=x;break;case"insideEnd":P=g-C*s,O=!x;break;case"end":P=g+C*s,O=x;break;default:throw new Error("Unsupported position ".concat(t))}O=A<=0?O:!O;var T=zt(u,h,S,P),j=zt(u,h,S,P+(O?1:-1)*359),N="M".concat(T.x,",").concat(T.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(O?0:1,`,
    `).concat(j.x,",").concat(j.y),D=cn(e.id)?Uc("recharts-radial-line-"):e.id;return E.createElement("text",Ga({},r,{dominantBaseline:"central",className:nt("recharts-radial-bar-label",l)}),E.createElement("defs",null,E.createElement("path",{id:D,d:N})),E.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Qz=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:h}=e,f=(u+h)/2;if(n==="outside"){var{x:p,y:m}=zt(r,i,l+t,f);return{x:p,y:m,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+l)/2,{x,y:S}=zt(r,i,g,f);return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},zD=e=>"cx"in e&&Te(e.cx),Zz=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!zD(n)&&(s=n);var{x:l,y:u,width:h,height:f}=t,p=f>=0?1:-1,m=p*r,g=p>0?"end":"start",x=p>0?"start":"end",S=h>=0?1:-1,A=S*r,C=S>0?"end":"start",P=S>0?"start":"end";if(i==="top"){var O={x:l+h/2,y:u-p*r,textAnchor:"middle",verticalAnchor:g};return jt(jt({},O),s?{height:Math.max(u-s.y,0),width:h}:{})}if(i==="bottom"){var T={x:l+h/2,y:u+f+m,textAnchor:"middle",verticalAnchor:x};return jt(jt({},T),s?{height:Math.max(s.y+s.height-(u+f),0),width:h}:{})}if(i==="left"){var j={x:l-A,y:u+f/2,textAnchor:C,verticalAnchor:"middle"};return jt(jt({},j),s?{width:Math.max(j.x-s.x,0),height:f}:{})}if(i==="right"){var N={x:l+h+A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return jt(jt({},N),s?{width:Math.max(s.x+s.width-N.x,0),height:f}:{})}var D=s?{width:h,height:f}:{};return i==="insideLeft"?jt({x:l+A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},D):i==="insideRight"?jt({x:l+h-A,y:u+f/2,textAnchor:C,verticalAnchor:"middle"},D):i==="insideTop"?jt({x:l+h/2,y:u+m,textAnchor:"middle",verticalAnchor:x},D):i==="insideBottom"?jt({x:l+h/2,y:u+f-m,textAnchor:"middle",verticalAnchor:g},D):i==="insideTopLeft"?jt({x:l+A,y:u+m,textAnchor:P,verticalAnchor:x},D):i==="insideTopRight"?jt({x:l+h-A,y:u+m,textAnchor:C,verticalAnchor:x},D):i==="insideBottomLeft"?jt({x:l+A,y:u+f-m,textAnchor:P,verticalAnchor:g},D):i==="insideBottomRight"?jt({x:l+h-A,y:u+f-m,textAnchor:C,verticalAnchor:g},D):i&&typeof i=="object"&&(Te(i.x)||Do(i.x))&&(Te(i.y)||Do(i.y))?jt({x:l+Tn(i.x,h),y:u+Tn(i.y,f),textAnchor:"end",verticalAnchor:"end"},D):jt({x:l+h/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},D)},Jz={offset:5};function ji(e){var t=$r(e,Jz),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:h,labelRef:f}=t,p=Vz(),m=UD(),g=r==="center"?m:p??m,x=n||g;if(!x||cn(i)&&cn(s)&&!E.isValidElement(l)&&typeof l!="function")return null;var S=jt(jt({},t),{},{viewBox:x});if(E.isValidElement(l)){var{labelRef:A}=S,C=Uz(S,Bz);return E.cloneElement(l,C)}var P;if(typeof l=="function"){if(P=E.createElement(l,S),E.isValidElement(P))return P}else P=Kz(t);var O=zD(x),T=Ut(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Wz(t,r,P,T,x);var j=O?Qz(x,t.offset,t.position):Zz(t,x);return E.createElement(wh,Ga({ref:f,className:nt("recharts-label",u)},T,j,{breakAll:h}),P)}ji.displayName="Label";var eG=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?E.createElement(ji,Ga({key:"label-implicit"},r)):fa(e)?E.createElement(ji,Ga({key:"label-implicit",value:e},r)):E.isValidElement(e)?e.type===ji?E.cloneElement(e,jt({key:"label-implicit"},r)):E.createElement(ji,Ga({key:"label-implicit",content:e},r)):jb(e)?E.createElement(ji,Ga({key:"label-implicit",content:e},r)):e&&typeof e=="object"?E.createElement(ji,Ga({},e,{key:"label-implicit"},r)):null};function tG(e){var{label:t}=e,n=UD();return eG(t,n)||null}var wy={},Oy={},WP;function nG(){return WP||(WP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Oy)),Oy}var Ty={},QP;function rG(){return QP||(QP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Ty)),Ty}var ZP;function aG(){return ZP||(ZP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nG(),n=rG(),r=u0();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(wy)),wy}var _y,JP;function iG(){return JP||(JP=1,_y=aG().last),_y}var oG=iG();const sG=Xr(oG);var lG=["valueAccessor"],cG=["dataKey","clockWise","id","textBreakAll"];function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$f.apply(null,arguments)}function ew(e,t){if(e==null)return{};var n,r,i=uG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dG=e=>Array.isArray(e.value)?sG(e.value):e.value,GD=E.createContext(void 0),fG=GD.Provider,HD=E.createContext(void 0),hG=HD.Provider;function pG(){return E.useContext(GD)}function mG(){return E.useContext(HD)}function nf(e){var{valueAccessor:t=dG}=e,n=ew(e,lG),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=ew(n,cG),h=pG(),f=mG(),p=h||f;return!p||!p.length?null:E.createElement(Vn,{className:"recharts-label-list"},p.map((m,g)=>{var x,S=cn(r)?t(m,g):vt(m&&m.payload,r),A=cn(s)?{}:{id:"".concat(s,"-").concat(g)};return E.createElement(ji,$f({},Ut(m,!0),u,A,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(g),index:g}))}))}nf.displayName="LabelList";function qD(e){var{label:t}=e;return t?t===!0?E.createElement(nf,{key:"labelList-implicit"}):E.isValidElement(t)||jb(t)?E.createElement(nf,{key:"labelList-implicit",content:t}):typeof t=="object"?E.createElement(nf,$f({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var YD=e=>e.graphicalItems.polarItems,gG=X([St,ou],ob),Mb=X([YD,Mt,gG],lb),yG=X([Mb],cb),kb=X([yG,K0],ub),vG=X([kb,Mt,Mb],fb),bG=X([kb,Mt,Mb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=vt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:vt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),tw=()=>{},xG=X([Mt,K_,tw,bG,tw,Qe,St],pb),FD=X([Mt,Qe,kb,vG,iu,St,xG],mb),SG=X([FD,Mt,cl],vb);X([Mt,FD,SG,St],xb);var AG={radiusAxis:{},angleAxis:{}},VD=mr({name:"polarAxis",initialState:AG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:mV,removeRadiusAxis:gV,addAngleAxis:yV,removeAngleAxis:vV}=VD.actions,EG=VD.reducer;function nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nw(Object(n),!0).forEach(function(r){CG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CG(e,t,n){return(t=PG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PG(e){var t=wG(e,"string");return typeof t=="symbol"?t:t+""}function wG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OG=(e,t)=>t,Rb=X([YD,OG],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),TG=[],Ib=(e,t,n)=>n?.length===0?TG:n,KD=X([K0,Rb,Ib],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>rw(rw({},t.presentationProps),s.props))),i!=null)return i}}),_G=X([KD,Rb,Ib],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=vt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:rh(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),DG=X([KD,Rb,Ib,Qt],(e,t,n,r)=>{if(!(t==null||e==null))return _7({offset:r,pieSettings:t,displayedData:e,cells:n})}),Dy={},aw;function NG(){return aw||(aw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Dy)),Dy}var Ny,iw;function jG(){return iw||(iw=1,Ny=NG().isPlainObject),Ny}var MG=jG();const kG=Xr(MG);function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ow(Object(n),!0).forEach(function(r){RG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RG(e,t,n){return(t=IG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IG(e){var t=LG(e,"string");return typeof t=="symbol"?t:t+""}function LG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bf(){return Bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bf.apply(null,arguments)}var lw=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},$G={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BG=e=>{var t=$r(e,$G),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:m}=t,g=E.useRef(),[x,S]=E.useState(-1),A=E.useRef(i),C=E.useRef(s),P=E.useRef(l),O=E.useRef(n),T=E.useRef(r),j=uh(e,"trapezoid-");if(E.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var se=g.current.getTotalLength();se&&S(se)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var N=nt("recharts-trapezoid",u);if(!m)return E.createElement("g",null,E.createElement("path",Bf({},Ut(t,!0),{className:N,d:lw(n,r,i,s,l)})));var D=A.current,M=C.current,R=P.current,U=O.current,W=T.current,Y="0px ".concat(x===-1?1:x,"px"),J="".concat(x,"px 0px"),ce=vT(["strokeDasharray"],f,h);return E.createElement(ch,{animationId:j,key:j,canBegin:x>0,duration:f,easing:h,isActive:m,begin:p},se=>{var te=bn(D,i,se),L=bn(M,s,se),ee=bn(R,l,se),he=bn(U,n,se),Se=bn(W,r,se);g.current&&(A.current=te,C.current=L,P.current=ee,O.current=he,T.current=Se);var k=se>0?{transition:ce,strokeDasharray:J}:{strokeDasharray:Y};return E.createElement("path",Bf({},Ut(t,!0),{className:N,d:lw(he,Se,te,L,ee),ref:g,style:sw(sw({},k),t.style)}))})},UG=["option","shapeType","propTransformer","activeClassName","isActive"];function zG(e,t){if(e==null)return{};var n,r,i=GG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Uf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(r){HG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HG(e,t,n){return(t=qG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qG(e){var t=YG(e,"string");return typeof t=="symbol"?t:t+""}function YG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FG(e,t){return Uf(Uf({},t),e)}function VG(e,t){return e==="symbols"}function uw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return E.createElement(AT,n);case"trapezoid":return E.createElement(BG,n);case"sector":return E.createElement(PT,n);case"symbols":if(VG(t))return E.createElement(s0,n);break;default:return null}}function KG(e){return E.isValidElement(e)?e.props:e}function XD(e){var{option:t,shapeType:n,propTransformer:r=FG,activeClassName:i="recharts-active-shape",isActive:s}=e,l=zG(e,UG),u;if(E.isValidElement(t))u=E.cloneElement(t,Uf(Uf({},l),KG(t)));else if(typeof t=="function")u=t(l);else if(kG(t)&&typeof t!="boolean"){var h=r(t,l);u=E.createElement(uw,{shapeType:n,elementProps:h})}else{var f=l;u=E.createElement(uw,{shapeType:n,elementProps:f})}return s?E.createElement(Vn,{className:i},u):u}var Lb=(e,t)=>{var n=Et();return(r,i)=>s=>{e?.(r,i,s),n(uD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},$b=e=>{var t=Et();return(n,r)=>i=>{e?.(n,r,i),t(D6())}},Bb=(e,t)=>{var n=Et();return(r,i)=>s=>{e?.(r,i,s),n(N6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function WD(e){var{fn:t,args:n}=e,r=Et(),i=Lr();return E.useEffect(()=>{if(!i){var s=t(n);return r(O6(s)),()=>{r(T6(s))}}},[t,n,r,i]),null}var QD=()=>{};function XG(e){var{legendPayload:t}=e,n=Et(),r=Lr();return E.useEffect(()=>r?QD:(n(pT(t)),()=>{n(mT(t))}),[n,r,t]),null}function WG(e){var{legendPayload:t}=e,n=Et(),r=we(Qe);return E.useEffect(()=>r!=="centric"&&r!=="radial"?QD:(n(pT(t)),()=>{n(mT(t))}),[n,r,t]),null}var jy,QG=()=>{var[e]=E.useState(()=>Uc("uid-"));return e},ZG=(jy=Qj.useId)!==null&&jy!==void 0?jy:QG;function JG(e,t){var n=ZG();return t||(e?"".concat(e,"-").concat(n):n)}var e7=E.createContext(void 0),ZD=e=>{var{id:t,type:n,children:r}=e,i=JG("recharts-".concat(n),t);return E.createElement(e7.Provider,{value:i},r(i))},t7={cartesianItems:[],polarItems:[]},JD=mr({name:"graphicalItems",initialState:t7,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Ya(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Ya(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Ya(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:n7,replaceCartesianGraphicalItem:r7,removeCartesianGraphicalItem:a7,addPolarGraphicalItem:i7,removePolarGraphicalItem:o7}=JD.actions,s7=JD.reducer;function l7(e){var t=Et(),n=E.useRef(null);return E.useEffect(()=>{n.current===null?t(n7(e)):n.current!==e&&t(r7({prev:n.current,next:e})),n.current=e},[t,e]),E.useEffect(()=>()=>{n.current&&(t(a7(n.current)),n.current=null)},[t]),null}function c7(e){var t=Et();return E.useEffect(()=>(t(i7(e)),()=>{t(o7(e))}),[t,e]),null}var u7=["onMouseEnter","onClick","onMouseLeave"],d7=["id"],f7=["id"];function Ub(e,t){if(e==null)return{};var n,r,i=h7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(r){p7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p7(e,t,n){return(t=m7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m7(e){var t=g7(e,"string");return typeof t=="symbol"?t:t+""}function g7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $i(){return $i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$i.apply(null,arguments)}function y7(e){var t=E.useMemo(()=>n0(e.children,el),[e.children]),n=we(r=>_G(r,e.id,t));return n==null?null:E.createElement(WG,{legendPayload:n})}function v7(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:h,tooltipType:f}=e;return{dataDefinedOnItem:r.map(p=>p.tooltipPayload),positions:r.map(p=>p.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:rh(u,t),hide:h,type:f,color:l,unit:""}}}var b7=(e,t)=>e>t?"start":e<t?"end":"middle",x7=(e,t,n)=>Tn(typeof t=="function"?t(e):t,n,n*.8),S7=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=iT(s,l),h=i+Tn(e.cx,s,s/2),f=r+Tn(e.cy,l,l/2),p=Tn(e.innerRadius,u,0),m=x7(n,e.outerRadius,u),g=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:h,cy:f,innerRadius:p,outerRadius:m,maxRadius:g}},A7=(e,t)=>{var n=ln(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function E7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var C7=(e,t)=>{if(E.isValidElement(e))return E.cloneElement(e,t);if(typeof e=="function")return e(t);var n=nt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return E.createElement(yT,$i({},t,{type:"linear",className:n}))},P7=(e,t,n)=>{if(E.isValidElement(e))return E.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),E.isValidElement(r)))return r;var i=nt("recharts-pie-label-text",E7(e));return E.createElement(wh,$i({},t,{alignmentBaseline:"middle",className:i}),r)};function w7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=Fo(n),h=Ut(i,!1),f=Ut(s,!1),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((g,x)=>{var S=(g.startAngle+g.endAngle)/2,A=zt(g.cx,g.cy,g.outerRadius+p,S),C=yt(yt(yt(yt({},u),g),{},{stroke:"none"},h),{},{index:x,textAnchor:b7(A.x,g.cx)},A),P=yt(yt(yt(yt({},u),g),{},{fill:"none",stroke:g.fill},f),{},{index:x,points:[zt(g.cx,g.cy,g.outerRadius,S),A],key:"line"});return E.createElement(Vn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},s&&C7(s,P),P7(i,C,vt(g,l)))});return E.createElement(Vn,{className:"recharts-pie-labels"},m)}function O7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(qD,{label:n.label}):E.createElement(w7,{sectors:t,props:n,showLabels:r})}function T7(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=we(Go),{onMouseEnter:l,onClick:u,onMouseLeave:h}=i,f=Ub(i,u7),p=Lb(l,i.dataKey),m=$b(h),g=Bb(u,i.dataKey);return t==null||t.length===0?null:E.createElement(E.Fragment,null,t.map((x,S)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===s,C=s?r:null,P=A?n:C,O=yt(yt({},x),{},{stroke:x.stroke,tabIndex:-1,[uT]:S,[dT]:i.dataKey});return E.createElement(Vn,$i({tabIndex:-1,className:"recharts-pie-sector"},Qc(f,x,S),{onMouseEnter:p(x,S),onMouseLeave:m(x,S),onClick:g(x,S),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(S)}),E.createElement(XD,$i({option:P,isActive:A,shapeType:"sector"},O)))}))}function _7(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:h,dataKey:f,nameKey:p,tooltipType:m}=n,g=Math.abs(n.minAngle),x=A7(u,h),S=Math.abs(x),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(D=>vt(D,f,0)!==0).length,P=(S>=360?C:C-1)*A,O=S-C*g-P,T=r.reduce((D,M)=>{var R=vt(M,f,0);return D+(Te(R)?R:0)},0),j;if(T>0){var N;j=r.map((D,M)=>{var R=vt(D,f,0),U=vt(D,p,M),W=S7(n,s,D),Y=(Te(R)?R:0)/T,J,ce=yt(yt({},D),i&&i[M]&&i[M].props);M?J=N.endAngle+ln(x)*A*(R!==0?1:0):J=u;var se=J+ln(x)*((R!==0?g:0)+Y*O),te=(J+se)/2,L=(W.innerRadius+W.outerRadius)/2,ee=[{name:U,value:R,payload:ce,dataKey:f,type:m}],he=zt(W.cx,W.cy,L,te);return N=yt(yt(yt(yt({},n.presentationProps),{},{percent:Y,cornerRadius:l,name:U,tooltipPayload:ee,midAngle:te,middleRadius:L,tooltipPosition:he},ce),W),{},{value:vt(D,f),startAngle:J,endAngle:se,payload:ce,paddingAngle:ln(x)*A}),N})}return j}function D7(e){var{showLabels:t,sectors:n,children:r}=e,i=E.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return E.createElement(hG,{value:t?i:void 0},r)}function N7(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:h,inactiveShape:f,onAnimationStart:p,onAnimationEnd:m}=t,g=uh(t,"recharts-pie-"),x=n.current,[S,A]=E.useState(!1),C=E.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),P=E.useCallback(()=>{typeof p=="function"&&p(),A(!0)},[p]);return E.createElement(D7,{showLabels:!S,sectors:r},E.createElement(ch,{animationId:g,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:P,onAnimationEnd:C,key:g},O=>{var T=[],j=r&&r[0],N=j?.startAngle;return r?.forEach((D,M)=>{var R=x&&x[M],U=M>0?$o(D,"paddingAngle",0):0;if(R){var W=bn(R.endAngle-R.startAngle,D.endAngle-D.startAngle,O),Y=yt(yt({},D),{},{startAngle:N+U,endAngle:N+W+U});T.push(Y),N=Y.endAngle}else{var{endAngle:J,startAngle:ce}=D,se=bn(0,J-ce,O),te=yt(yt({},D),{},{startAngle:N+U,endAngle:N+se+U});T.push(te),N=te.endAngle}}),n.current=T,E.createElement(Vn,null,E.createElement(T7,{sectors:T,activeShape:h,inactiveShape:f,allOtherPieProps:t}))}),E.createElement(O7,{showLabels:!S,sectors:r,props:t}),t.children)}var j7={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!rl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function M7(e){var{id:t}=e,n=Ub(e,d7),{hide:r,className:i,rootTabIndex:s}=e,l=E.useMemo(()=>n0(e.children,el),[e.children]),u=we(p=>DG(p,t,l)),h=E.useRef(null),f=nt("recharts-pie",i);return r||u==null?(h.current=null,E.createElement(Vn,{tabIndex:s,className:f})):E.createElement(E.Fragment,null,E.createElement(WD,{fn:v7,args:yt(yt({},e),{},{sectors:u})}),E.createElement(Vn,{tabIndex:s,className:f},E.createElement(N7,{props:yt(yt({},n),{},{sectors:u}),previousSectorsRef:h})))}function Mv(e){var t=$r(e,j7),{id:n}=t,r=Ub(t,f7),i=Fo(r);return E.createElement(ZD,{id:n,type:"pie"},s=>E.createElement(E.Fragment,null,E.createElement(c7,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),E.createElement(y7,$i({},r,{id:s})),E.createElement(M7,$i({},r,{id:s}))))}Mv.displayName="Pie";function fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(n),!0).forEach(function(r){k7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k7(e,t,n){return(t=R7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R7(e){var t=I7(e,"string");return typeof t=="symbol"?t:t+""}function I7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L7={xAxis:{},yAxis:{},zAxis:{}},eN=mr({name:"cartesianAxis",initialState:L7,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=hw(hw({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:$7,removeXAxis:B7,addYAxis:U7,removeYAxis:z7,addZAxis:bV,removeZAxis:xV,updateYAxisWidth:G7}=eN.actions,H7=eN.reducer,q7=X([Qt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Y7=X([q7,Za,Ja],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),tN=()=>we(Y7),F7="Invariant failed";function V7(e,t){throw new Error(F7)}var K7=["x","y"];function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(null,arguments)}function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){X7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X7(e,t,n){return(t=W7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W7(e){var t=Q7(e,"string");return typeof t=="symbol"?t:t+""}function Q7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z7(e,t){if(e==null)return{};var n,r,i=J7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function e9(e,t){var{x:n,y:r}=e,i=Z7(e,K7),s="".concat(n),l=parseInt(s,10),u="".concat(r),h=parseInt(u,10),f="".concat(t.height||i.height),p=parseInt(f,10),m="".concat(t.width||i.width),g=parseInt(m,10);return Oc(Oc(Oc(Oc(Oc({},t),i),l?{x:l}:{}),h?{y:h}:{}),{},{height:p,width:g,name:t.name,radius:t.radius})}function zb(e){return E.createElement(XD,kv({shapeType:"rectangle",propTransformer:e9,activeClassName:"recharts-active-bar"},e))}var t9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Te(t))return t;var s=Te(r)||cn(r);return s?t(r,i):(s||V7(),n)}},n9={},nN=mr({name:"errorBars",initialState:n9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:SV,replaceErrorBar:AV,removeErrorBar:EV}=nN.actions,r9=nN.reducer,a9=["children"];function i9(e,t){if(e==null)return{};var n,r,i=o9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var s9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},l9=E.createContext(s9);function c9(e){var{children:t}=e,n=i9(e,a9);return E.createElement(l9.Provider,{value:n},t)}function rN(e,t){var n,r,i=we(f=>qi(f,e)),s=we(f=>Yi(f,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:sr.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:lr.allowDataOverflow,h=l||u;return{needClip:h,needClipX:l,needClipY:u}}function u9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=tN(),{needClipX:s,needClipY:l,needClip:u}=rN(t,n);if(!u)return null;var{x:h,y:f,width:p,height:m}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:s?h:h-p/2,y:l?f:f-m/2,width:s?p:p*2,height:l?m:m*2}))}var d9=["onMouseEnter","onMouseLeave","onClick"],f9=["value","background","tooltipPosition"],h9=["id"],p9=["onMouseEnter","onClick","onMouseLeave"];function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bi.apply(null,arguments)}function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){m9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m9(e,t,n){return(t=g9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g9(e){var t=y9(e,"string");return typeof t=="symbol"?t:t+""}function y9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zf(e,t){if(e==null)return{};var n,r,i=v9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var b9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:rh(n,t),payload:e}]};function x9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:rh(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function S9(e){var t=we(Go),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:h}=s,f=zf(s,d9),p=Lb(l,r),m=$b(u),g=Bb(h,r);if(!i||n==null)return null;var x=Ut(i,!1);return E.createElement(E.Fragment,null,n.map((S,A)=>{var{value:C,background:P,tooltipPosition:O}=S,T=zf(S,f9);if(!P)return null;var j=p(S,A),N=m(S,A),D=g(S,A),M=Rn(Rn(Rn(Rn(Rn({option:i,isActive:String(A)===t},T),{},{fill:"#eee"},P),x),Qc(f,S,A)),{},{onMouseEnter:j,onMouseLeave:N,onClick:D,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return E.createElement(zb,Bi({key:"background-bar-".concat(A)},M))}))}function A9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Rn(Rn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return E.createElement(fG,{value:t?i:void 0},n)}function E9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=we(Go),h=we(ED),f=n&&String(s)===u&&(h==null||l===h),p=f?n:t;return E.createElement(zb,Bi({},r,i,{isActive:f,option:p,index:s,dataKey:l}))}function C9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return E.createElement(zb,Bi({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function P9(e){var{data:t,props:n}=e,r=Fo(n),{id:i}=r,s=zf(r,h9),{shape:l,dataKey:u,activeBar:h}=n,{onMouseEnter:f,onClick:p,onMouseLeave:m}=n,g=zf(n,p9),x=Lb(f,u),S=$b(m),A=Bb(p,u);return t?E.createElement(E.Fragment,null,t.map((C,P)=>E.createElement(Vn,Bi({className:"recharts-bar-rectangle"},Qc(g,C,P),{onMouseEnter:x(C,P),onMouseLeave:S(C,P),onClick:A(C,P),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(P)}),h?E.createElement(E9,{shape:l,activeBar:h,baseProps:s,entry:C,index:P,dataKey:u}):E.createElement(C9,{shape:l,baseProps:s,entry:C,index:P,dataKey:u})))):null}function w9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:h,onAnimationEnd:f,onAnimationStart:p}=t,m=n.current,g=uh(t,"recharts-bar-"),[x,S]=E.useState(!1),A=!x,C=E.useCallback(()=>{typeof f=="function"&&f(),S(!1)},[f]),P=E.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return E.createElement(A9,{showLabels:A,rects:r},E.createElement(ch,{animationId:g,begin:l,duration:u,isActive:s,easing:h,onAnimationEnd:C,onAnimationStart:P,key:g},O=>{var T=O===1?r:r?.map((j,N)=>{var D=m&&m[N];if(D)return Rn(Rn({},j),{},{x:bn(D.x,j.x,O),y:bn(D.y,j.y,O),width:bn(D.width,j.width,O),height:bn(D.height,j.height,O)});if(i==="horizontal"){var M=bn(0,j.height,O);return Rn(Rn({},j),{},{y:j.y+j.height-M,height:M})}var R=bn(0,j.width,O);return Rn(Rn({},j),{},{width:R})});return O>0&&(n.current=T??null),T==null?null:E.createElement(Vn,null,E.createElement(P9,{props:t,data:T}))}),E.createElement(qD,{label:t.label}),t.children)}function O9(e){var t=E.useRef(null);return E.createElement(w9,{previousRectanglesRef:t,props:e})}var aN=0,T9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:vt(e,t)}};class _9 extends E.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:h,id:f}=this.props;if(t||n==null)return null;var p=nt("recharts-bar",i),m=f;return E.createElement(Vn,{className:p,id:f},u&&E.createElement("defs",null,E.createElement(u9,{clipPathId:m,xAxisId:s,yAxisId:l})),E.createElement(Vn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},E.createElement(S9,{data:n,dataKey:r,background:h,allOtherBarProps:this.props}),E.createElement(O9,this.props)))}}var D9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!rl.isSsr,legendType:"rect",minPointSize:aN,xAxisId:0,yAxisId:0};function N9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:h,animationEasing:f,isAnimationActive:p}=e,{needClip:m}=rN(t,n),g=E0(),x=Lr(),S=n0(e.children,el),A=we(O=>aH(O,t,n,x,e.id,S));if(g!=="vertical"&&g!=="horizontal")return null;var C,P=A?.[0];return P==null||P.height==null||P.width==null?C=0:C=g==="vertical"?P.height/2:P.width/2,E.createElement(c9,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:T9,errorBarOffset:C},E.createElement(_9,Bi({},e,{layout:g,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:h,animationEasing:f,isAnimationActive:p})))}function j9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:h,yAxisTicks:f,stackedData:p,displayedData:m,offset:g,cells:x,parentViewBox:S}=e,A=t==="horizontal"?u:l,C=p?A.scale.domain():null,P=K4({numericAxis:A});return m.map((O,T)=>{var j,N,D,M,R,U;p?j=G4(p[T],C):(j=vt(O,n),Array.isArray(j)||(j=[P,j]));var W=t9(r,aN)(j[1],T);if(t==="horizontal"){var Y,[J,ce]=[u.scale(j[0]),u.scale(j[1])];N=nC({axis:l,ticks:h,bandSize:s,offset:i.offset,entry:O,index:T}),D=(Y=ce??J)!==null&&Y!==void 0?Y:void 0,M=i.size;var se=J-ce;if(R=fr(se)?0:se,U={x:N,y:g.top,width:M,height:g.height},Math.abs(W)>0&&Math.abs(R)<Math.abs(W)){var te=ln(R||W)*(Math.abs(W)-Math.abs(R));D-=te,R+=te}}else{var[L,ee]=[l.scale(j[0]),l.scale(j[1])];if(N=L,D=nC({axis:u,ticks:f,bandSize:s,offset:i.offset,entry:O,index:T}),M=ee-L,R=i.size,U={x:g.left,y:D,width:g.width,height:R},Math.abs(W)>0&&Math.abs(M)<Math.abs(W)){var he=ln(M||W)*(Math.abs(W)-Math.abs(M));M+=he}}if(N==null||D==null||M==null||R==null)return null;var Se=Rn(Rn({},O),{},{x:N,y:D,width:M,height:R,value:p?j:j[1],payload:O,background:U,tooltipPosition:{x:N+M/2,y:D+R/2},parentViewBox:S},x&&x[T]&&x[T].props);return Se}).filter(Boolean)}function iN(e){var t=$r(e,D9),n=Lr();return E.createElement(ZD,{id:t.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(XG,{legendPayload:b9(t)}),E.createElement(WD,{fn:x9,args:t}),E.createElement(l7,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:V4(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),E.createElement(N9,Bi({},t,{id:r}))))}iN.displayName="Bar";function gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gw(Object(n),!0).forEach(function(r){M9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M9(e,t,n){return(t=k9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k9(e){var t=R9(e,"string");return typeof t=="symbol"?t:t+""}function R9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I9=(e,t)=>t,L9=(e,t,n)=>n,$9=(e,t,n,r)=>r,B9=(e,t,n,r,i)=>i,fu=X([sb,B9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),U9=X([fu],e=>e?.maxBarSize),z9=(e,t,n,r,i,s)=>s,yw=(e,t,n)=>{var r=n??e;if(!cn(r))return Tn(r,t,0)},G9=X([Qe,sb,I9,L9,$9],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),H9=(e,t,n,r)=>{var i=Qe(e);return i==="horizontal"?Ov(e,"yAxis",n,r):Ov(e,"xAxis",t,r)},q9=(e,t,n)=>{var r=Qe(e);return r==="horizontal"?bP(e,"xAxis",t):bP(e,"yAxis",n)},Y9=(e,t,n)=>{var r={},i=e.filter(xh),s=e.filter(f=>f.stackId==null),l=i.reduce((f,p)=>(f[p.stackId]||(f[p.stackId]=[]),f[p.stackId].push(p),f),r),u=Object.entries(l).map(f=>{var[p,m]=f,g=m.map(S=>S.dataKey),x=yw(t,n,m[0].barSize);return{stackId:p,dataKeys:g,barSize:x}}),h=s.map(f=>{var p=[f.dataKey].filter(g=>g!=null),m=yw(t,n,f.barSize);return{stackId:void 0,dataKeys:p,barSize:m}});return[...u,...h]},F9=X([G9,T8,q9],Y9),V9=(e,t,n,r,i)=>{var s,l,u=fu(e,t,n,r,i);if(u!=null){var h=Qe(e),f=S_(e),{maxBarSize:p}=u,m=cn(p)?f:p,g,x;return h==="horizontal"?(g=Js(e,"xAxis",t,r),x=Zs(e,"xAxis",t,r)):(g=Js(e,"yAxis",n,r),x=Zs(e,"yAxis",n,r)),(s=(l=v0(g,x,!0))!==null&&l!==void 0?l:m)!==null&&s!==void 0?s:0}},oN=(e,t,n,r)=>{var i=Qe(e),s,l;return i==="horizontal"?(s=Js(e,"xAxis",t,r),l=Zs(e,"xAxis",t,r)):(s=Js(e,"yAxis",n,r),l=Zs(e,"yAxis",n,r)),v0(s,l)};function K9(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=Tn(e,n,0,!0),u,h=[];if(pr(r[0].barSize)){var f=!1,p=n/s,m=r.reduce((P,O)=>P+(O.barSize||0),0);m+=(s-1)*l,m>=n&&(m-=(s-1)*l,l=0),m>=n&&p>0&&(f=!0,p*=.9,m=s*p);var g=(n-m)/2>>0,x={offset:g-l,size:0};u=r.reduce((P,O)=>{var T,j={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:x.offset+x.size+l,size:f?p:(T=O.barSize)!==null&&T!==void 0?T:0}},N=[...P,j];return x=N[N.length-1].position,N},h)}else{var S=Tn(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var A=(n-2*S-(s-1)*l)/s;A>1&&(A>>=0);var C=pr(i)?Math.min(A,i):A;u=r.reduce((P,O,T)=>[...P,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:S+(A+l)*T+(A-C)/2,size:C}}],h)}return u}}var X9=(e,t,n,r,i,s,l)=>{var u=cn(l)?t:l,h=K9(n,r,i!==s?i:s,e,u);return i!==s&&h!=null&&(h=h.map(f=>Fd(Fd({},f),{},{position:Fd(Fd({},f.position),{},{offset:f.position.offset-i/2})}))),h},W9=X([F9,S_,O8,A_,V9,oN,U9],X9),Q9=(e,t,n,r)=>Js(e,"xAxis",t,r),Z9=(e,t,n,r)=>Js(e,"yAxis",n,r),J9=(e,t,n,r)=>Zs(e,"xAxis",t,r),eH=(e,t,n,r)=>Zs(e,"yAxis",n,r),tH=X([W9,fu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),nH=(e,t)=>{var n=ab(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},rH=X([H9,fu],nH),aH=X([Qt,b0,Q9,Z9,J9,eH,tH,Qe,X0,oN,rH,fu,z9],(e,t,n,r,i,s,l,u,h,f,p,m,g)=>{var{chartData:x,dataStartIndex:S,dataEndIndex:A}=h;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||f==null)){var{data:C}=m,P;if(C!=null&&C.length>0?P=C:P=x?.slice(S,A+1),P!=null)return j9({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:P,offset:e,cells:g})}}),sN=e=>{var{chartData:t}=e,n=Et(),r=Lr();return E.useEffect(()=>r?()=>{}:(n(_P(t)),()=>{n(_P(void 0))}),[t,n,r]),null},vw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},lN=mr({name:"brush",initialState:vw,reducers:{setBrushSettings(e,t){return t.payload==null?vw:t.payload}}}),{setBrushSettings:CV}=lN.actions,iH=lN.reducer;function oH(e,t,n){return(t=sH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sH(e){var t=lH(e,"string");return typeof t=="symbol"?t:t+""}function lH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Gb{static create(t){return new Gb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}oH(Gb,"EPS",1e-4);function cH(e){return(e%180+180)%180}var uH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=cH(i),l=s*Math.PI/180,u=Math.atan(r/n),h=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(h)},dH={dots:[],areas:[],lines:[]},cN=mr({name:"referenceElements",initialState:dH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ya(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ya(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ya(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:PV,removeDot:wV,addArea:OV,removeArea:TV,addLine:_V,removeLine:DV}=cN.actions,fH=cN.reducer,hH=E.createContext(void 0),pH=e=>{var{children:t}=e,[n]=E.useState("".concat(Uc("recharts"),"-clip")),r=tN();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return E.createElement(hH.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function My(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function uN(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function mH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return uH(r,n)}function gH(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Gf(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function yH(e,t){return uN(e,t+1)}function vH(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,h=0,f=1,p=l,m=function(){var S=r?.[h];if(S===void 0)return{v:uN(r,f)};var A=h,C,P=()=>(C===void 0&&(C=n(S,A)),C),O=S.coordinate,T=h===0||Gf(e,O,P,p,u);T||(h=0,p=l,f+=1),T&&(p=O+e*(P()/2+i),h+=f)},g;f<=s.length;)if(g=m(),g)return g.v;return[]}function bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(n),!0).forEach(function(r){bH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bH(e,t,n){return(t=xH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xH(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AH(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:h}=t,f=function(g){var x=s[g],S,A=()=>(S===void 0&&(S=n(x,g)),S);if(g===l-1){var C=e*(x.coordinate+e*A()/2-h);s[g]=x=Pn(Pn({},x),{},{tickCoord:C>0?x.coordinate-C*e:x.coordinate})}else s[g]=x=Pn(Pn({},x),{},{tickCoord:x.coordinate});var P=Gf(e,x.tickCoord,A,u,h);P&&(h=x.tickCoord-e*(A()/2+i),s[g]=Pn(Pn({},x),{},{isShow:!0}))},p=l-1;p>=0;p--)f(p);return s}function EH(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:h,end:f}=t;if(s){var p=r[u-1],m=n(p,u-1),g=e*(p.coordinate+e*m/2-f);l[u-1]=p=Pn(Pn({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate});var x=Gf(e,p.tickCoord,()=>m,h,f);x&&(f=p.tickCoord-e*(m/2+i),l[u-1]=Pn(Pn({},p),{},{isShow:!0}))}for(var S=s?u-1:u,A=function(O){var T=l[O],j,N=()=>(j===void 0&&(j=n(T,O)),j);if(O===0){var D=e*(T.coordinate-e*N()/2-h);l[O]=T=Pn(Pn({},T),{},{tickCoord:D<0?T.coordinate-D*e:T.coordinate})}else l[O]=T=Pn(Pn({},T),{},{tickCoord:T.coordinate});var M=Gf(e,T.tickCoord,N,h,f);M&&(h=T.tickCoord+e*(N()/2+i),l[O]=Pn(Pn({},T),{},{isShow:!0}))},C=0;C<S;C++)A(C);return l}function Hb(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:h,tickFormatter:f,unit:p,angle:m}=e;if(!i||!i.length||!r)return[];if(Te(h)||rl.isSsr){var g;return(g=yH(i,Te(h)?h:0))!==null&&g!==void 0?g:[]}var x=[],S=u==="top"||u==="bottom"?"width":"height",A=p&&S==="width"?Rc(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(T,j)=>{var N=typeof f=="function"?f(T.value,j):T.value;return S==="width"?mH(Rc(N,{fontSize:t,letterSpacing:n}),A,m):Rc(N,{fontSize:t,letterSpacing:n})[S]},P=i.length>=2?ln(i[1].coordinate-i[0].coordinate):1,O=gH(s,P,S);return h==="equidistantPreserveStart"?vH(P,O,C,i,l):(h==="preserveStart"||h==="preserveStartEnd"?x=EH(P,O,C,i,l,h==="preserveStartEnd"):x=AH(P,O,C,i,l),x.filter(T=>T.isShow))}var CH=["viewBox"],PH=["viewBox"];function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Us.apply(null,arguments)}function xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(n),!0).forEach(function(r){qb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sw(e,t){if(e==null)return{};var n,r,i=wH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qb(e,t,n){return(t=OH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OH(e){var t=TH(e,"string");return typeof t=="symbol"?t:t+""}function TH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Fi extends E.Component{constructor(t){super(t),this.tickRefs=E.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=Sw(t,CH),s=this.props,{viewBox:l}=s,u=Sw(s,PH);return!My(r,l)||!My(i,u)||!My(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:h,tickMargin:f}=this.props,p,m,g,x,S,A,C=h?-1:1,P=t.tickSize||u,O=Te(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":p=m=t.coordinate,x=r+ +!h*s,g=x-C*P,A=g-C*f,S=O;break;case"left":g=x=t.coordinate,m=n+ +!h*i,p=m-C*P,S=p-C*f,A=O;break;case"right":g=x=t.coordinate,m=n+ +h*i,p=m+C*P,S=p+C*f,A=O;break;default:p=m=t.coordinate,x=r+ +h*s,g=x+C*P,A=g+C*f,S=O;break}return{line:{x1:p,y1:g,x2:m,y2:x},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,h=Xt(Xt(Xt({},Ut(this.props,!1)),Ut(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!l||s==="bottom"&&l);h=Xt(Xt({},h),{},{x1:t,y1:n+f*i,x2:t+r,y2:n+f*i})}else{var p=+(s==="left"&&!l||s==="right"&&l);h=Xt(Xt({},h),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+i})}return E.createElement("line",Us({},h,{className:nt("recharts-cartesian-axis-line",$o(u,"className"))}))}static renderTickItem(t,n,r){var i,s=nt(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(t))i=E.cloneElement(t,Xt(Xt({},n),{},{className:s}));else if(typeof t=="function")i=t(Xt(Xt({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=nt(l,t.className)),i=E.createElement(wh,Us({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:h,padding:f,tickTextProps:p}=this.props,m=Hb(Xt(Xt({},this.props),{},{ticks:r}),t,n),g=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),S=Fo(this.props),A=Ut(l,!1),C=Xt(Xt({},S),{},{fill:"none"},Ut(i,!1)),P=m.map((O,T)=>{var{line:j,tick:N}=this.getTickLineCoord(O),D=Xt(Xt(Xt(Xt({textAnchor:g,verticalAnchor:x},S),{},{stroke:"none",fill:s},A),N),{},{index:T,payload:O,visibleTicksCount:m.length,tickFormatter:u,padding:f},p);return E.createElement(Vn,Us({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Qc(this.props,O,T)),i&&E.createElement("line",Us({},C,j,{className:nt("recharts-cartesian-axis-tick-line",$o(i,"className"))})),l&&Fi.renderTickItem(l,D,"".concat(typeof u=="function"?u(O.value,T):O.value).concat(h||"")))});return P.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:E.createElement(Vn,{className:nt("recharts-cartesian-axis",i),ref:u=>{if(u){var h=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(h);var f=h[0];if(f){var p=window.getComputedStyle(f).fontSize,m=window.getComputedStyle(f).letterSpacing;(p!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),E.createElement(Yz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},E.createElement(tG,{label:this.props.label}),this.props.children))}}qb(Fi,"displayName","CartesianAxis");qb(Fi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _H=["x1","y1","x2","y2","key"],DH=["offset"],NH=["xAxisId","yAxisId"],jH=["xAxisId","yAxisId"];function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(n),!0).forEach(function(r){MH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MH(e,t,n){return(t=kH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kH(e){var t=RH(e,"string");return typeof t=="symbol"?t:t+""}function RH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mo(){return Mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mo.apply(null,arguments)}function Hf(e,t){if(e==null)return{};var n,r,i=IH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return E.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function dN(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,h=Hf(t,_H),f=Fo(h),{offset:p}=f,m=Hf(f,DH);n=E.createElement("line",Mo({},m,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function $H(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Hf(e,NH),h=i.map((f,p)=>{var m=On(On({},u),{},{x1:t,y1:f,x2:t+n,y2:f,key:"line-".concat(p),index:p});return dN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function BH(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Hf(e,jH),h=i.map((f,p)=>{var m=On(On({},u),{},{x1:f,y1:t,x2:f,y2:t+n,key:"line-".concat(p),index:p});return dN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function UH(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:h=!0}=e;if(!h||!t||!t.length)return null;var f=u.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var p=f.map((m,g)=>{var x=!f[g+1],S=x?i+l-m:f[g+1]-m;if(S<=0)return null;var A=g%t.length;return E.createElement("rect",{key:"react-".concat(g),y:m,x:r,height:S,width:s,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function zH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:h}=e;if(!t||!n||!n.length)return null;var f=h.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var p=f.map((m,g)=>{var x=!f[g+1],S=x?i+l-m:f[g+1]-m;if(S<=0)return null;var A=g%n.length;return E.createElement("rect",{key:"react-".concat(g),x:m,y:s,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var GH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return sT(Hb(On(On(On({},Fi.defaultProps),n),{},{ticks:lT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},HH=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return sT(Hb(On(On(On({},Fi.defaultProps),n),{},{ticks:lT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},qH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function fN(e){var t=S0(),n=A0(),r=fT(),i=On(On({},$r(e,qH)),{},{x:Te(e.x)?e.x:r.left,y:Te(e.y)?e.y:r.top,width:Te(e.width)?e.width:r.width,height:Te(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:h,width:f,height:p,syncWithTicks:m,horizontalValues:g,verticalValues:x}=i,S=Lr(),A=we(U=>xP(U,"xAxis",s,S)),C=we(U=>xP(U,"yAxis",l,S));if(!Te(f)||f<=0||!Te(p)||p<=0||!Te(u)||u!==+u||!Te(h)||h!==+h)return null;var P=i.verticalCoordinatesGenerator||GH,O=i.horizontalCoordinatesGenerator||HH,{horizontalPoints:T,verticalPoints:j}=i;if((!T||!T.length)&&typeof O=="function"){var N=g&&g.length,D=O({yAxis:C?On(On({},C),{},{ticks:N?g:C.ticks}):void 0,width:t,height:n,offset:r},N?!0:m);kc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(T=D)}if((!j||!j.length)&&typeof P=="function"){var M=x&&x.length,R=P({xAxis:A?On(On({},A),{},{ticks:M?x:A.ticks}):void 0,width:t,height:n,offset:r},M?!0:m);kc(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(j=R)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(LH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(UH,Mo({},i,{horizontalPoints:T})),E.createElement(zH,Mo({},i,{verticalPoints:j})),E.createElement($H,Mo({},i,{offset:r,horizontalPoints:T,xAxis:A,yAxis:C})),E.createElement(BH,Mo({},i,{offset:r,verticalPoints:j,xAxis:A,yAxis:C})))}fN.displayName="CartesianGrid";var YH=["children"],FH=["dangerouslySetInnerHTML","ticks"],VH=["id"];function hN(e,t,n){return(t=KH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KH(e){var t=XH(e,"string");return typeof t=="symbol"?t:t+""}function XH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rv.apply(null,arguments)}function Iv(e,t){if(e==null)return{};var n,r,i=WH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function QH(e){var t=Et(),n=E.useMemo(()=>{var{children:r}=e,i=Iv(e,YH);return i},[e]);return E.useEffect(()=>(t($7(n)),()=>{t(B7(n))}),[n,t]),e.children}var ZH=e=>{var{xAxisId:t,className:n}=e,r=we(b0),i=Lr(),s="xAxis",l=we(C=>ul(C,s,t,i)),u=we(C=>aD(C,s,t,i)),h=we(C=>eD(C,t)),f=we(C=>v6(C,t)),p=we(C=>N_(C,t));if(h==null||f==null||p==null)return null;var{dangerouslySetInnerHTML:m,ticks:g}=e,x=Iv(e,FH),{id:S}=p,A=Iv(p,VH);return E.createElement(Fi,Rv({},x,A,{scale:l,x:f.x,y:f.y,width:h.width,height:h.height,className:nt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},JH=e=>{var t,n,r,i,s;return E.createElement(QH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},E.createElement(ZH,e))};class Yb extends E.Component{render(){return E.createElement(JH,this.props)}}hN(Yb,"displayName","XAxis");hN(Yb,"defaultProps",{allowDataOverflow:sr.allowDataOverflow,allowDecimals:sr.allowDecimals,allowDuplicatedCategory:sr.allowDuplicatedCategory,height:sr.height,hide:!1,mirror:sr.mirror,orientation:sr.orientation,padding:sr.padding,reversed:sr.reversed,scale:sr.scale,tickCount:sr.tickCount,type:sr.type,xAxisId:0});var eq=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(p=>{if(p){var m=p.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,h=i+s,f=l+h+u+(n?r:0);return Math.round(f)}return 0},tq=["dangerouslySetInnerHTML","ticks"],nq=["id"];function pN(e,t,n){return(t=rq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rq(e){var t=aq(e,"string");return typeof t=="symbol"?t:t+""}function aq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lv.apply(null,arguments)}function Ew(e,t){if(e==null)return{};var n,r,i=iq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function oq(e){var t=Et();return E.useEffect(()=>(t(U7(e)),()=>{t(z7(e))}),[e,t]),null}var sq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=E.useRef(null),u=E.useRef(null),h=we(b0),f=Lr(),p=Et(),m="yAxis",g=we(D=>ul(D,m,n,f)),x=we(D=>tD(D,n)),S=we(D=>b6(D,n)),A=we(D=>aD(D,m,n,f)),C=we(D=>j_(D,n));if(E.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!x||jb(s)||E.isValidElement(s)||C==null)){var M=l.current,R=M==null||(D=M.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:U,tickMargin:W}=M.props,Y=eq({ticks:R,label:u.current,labelGapWithTick:5,tickSize:U,tickMargin:W});Math.round(x.width)!==Math.round(Y)&&p(G7({id:n,width:Y}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,p,s,n,i]),x==null||S==null||C==null)return null;var{dangerouslySetInnerHTML:P,ticks:O}=e,T=Ew(e,tq),{id:j}=C,N=Ew(C,nq);return E.createElement(Fi,Lv({},T,N,{ref:l,labelRef:u,scale:g,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:x.width,height:x.height,className:nt("recharts-".concat(m," ").concat(m),r),viewBox:h,ticks:A}))},lq=e=>{var t,n,r,i,s;return E.createElement(E.Fragment,null,E.createElement(oq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),E.createElement(sq,e))},cq={allowDataOverflow:lr.allowDataOverflow,allowDecimals:lr.allowDecimals,allowDuplicatedCategory:lr.allowDuplicatedCategory,hide:!1,mirror:lr.mirror,orientation:lr.orientation,padding:lr.padding,reversed:lr.reversed,scale:lr.scale,tickCount:lr.tickCount,type:lr.type,width:lr.width,yAxisId:0};class Fb extends E.Component{render(){return E.createElement(lq,this.props)}}pN(Fb,"displayName","YAxis");pN(Fb,"defaultProps",cq);var ky={exports:{}},Ry={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function uq(){if(Cw)return Ry;Cw=1;var e=tl();function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Ry.useSyncExternalStoreWithSelector=function(h,f,p,m,g){var x=i(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function C(N){if(!P){if(P=!0,O=N,N=m(N),g!==void 0&&S.hasValue){var D=S.value;if(g(D,N))return T=D}return T=N}if(D=T,n(O,N))return D;var M=m(N);return g!==void 0&&g(D,M)?(O=N,D):(O=N,T=M)}var P=!1,O,T,j=p===void 0?null:p;return[function(){return C(f())},j===null?void 0:function(){return C(j())}]},[f,p,m,g]);var A=r(h,x[0],x[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},Ry}var Pw;function dq(){return Pw||(Pw=1,ky.exports=uq()),ky.exports}dq();function fq(e){e()}function hq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){fq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var ww={notify(){},get:()=>[]};function pq(e,t){let n,r=ww,i=0,s=!1;function l(A){p();const C=r.subscribe(A);let P=!1;return()=>{P||(P=!0,C(),m())}}function u(){r.notify()}function h(){S.onStateChange&&S.onStateChange()}function f(){return s}function p(){i++,n||(n=e.subscribe(h),r=hq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=ww)}function g(){s||(s=!0,p())}function x(){s&&(s=!1,m())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:h,isSubscribed:f,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>r};return S}var mq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gq=mq(),yq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",vq=yq(),bq=()=>gq||vq?E.useLayoutEffect:E.useEffect,xq=bq(),Sq=Symbol.for("react-redux-context"),Aq=typeof globalThis<"u"?globalThis:{};function Eq(){if(!E.createContext)return{};const e=Aq[Sq]??=new Map;let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var Cq=Eq();function Pq(e){const{children:t,context:n,serverState:r,store:i}=e,s=E.useMemo(()=>{const h=pq(i);return{store:i,subscription:h,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);xq(()=>{const{subscription:h}=s;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),l!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[s,l]);const u=n||Cq;return E.createElement(u.Provider,{value:s},t)}var wq=Pq,Oq=(e,t)=>t,Vb=X([Oq,Qe,T_,Jt,bD,ti,EU,Qt],TU),Kb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},mN=Rr("mouseClick"),gN=Jc();gN.startListening({actionCreator:mN,effect:(e,t)=>{var n=e.payload,r=Vb(t.getState(),Kb(n));r?.activeIndex!=null&&t.dispatch(j6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var $v=Rr("mouseMove"),yN=Jc();yN.startListening({actionCreator:$v,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Eb(r,r.tooltip.settings.shared),s=Vb(r,Kb(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(fD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(dD()))}});function Tq(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Ow={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},vN=mr({name:"rootProps",initialState:Ow,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:Ow.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),_q=vN.reducer,{updateOptions:Dq}=vN.actions,bN=mr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Nq}=bN.actions,jq=bN.reducer,xN=Rr("keyDown"),SN=Rr("focus"),Xb=Jc();Xb.startListening({actionCreator:xN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(Cb(i,fl(n))),u=ti(n);if(s==="Enter"){var h=Lf(n,"axis","hover",String(i.index));t.dispatch(_v({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:h}));return}var f=E6(n),p=f==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=l+m*p;if(!(u==null||g>=u.length||g<0)){var x=Lf(n,"axis","hover",String(g));t.dispatch(_v({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Xb.startListening({actionCreator:SN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=Lf(n,"axis","hover",String(s));t.dispatch(_v({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Nr=Rr("externalEvent"),AN=Jc();AN.startListening({actionCreator:Nr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:pU(n),activeDataKey:ED(n),activeIndex:Go(n),activeLabel:AD(n),activeTooltipIndex:Go(n),isTooltipActive:mU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var Mq=X([dl],e=>e.tooltipItemPayloads),kq=X([Mq,uu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),EN=Rr("touchMove"),CN=Jc();CN.startListening({actionCreator:EN,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Eb(r,r.tooltip.settings.shared);if(i==="axis"){var s=Vb(r,Kb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(fD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],h=document.elementFromPoint(u.clientX,u.clientY);if(!h||!h.getAttribute)return;var f=h.getAttribute(uT),p=(l=h.getAttribute(dT))!==null&&l!==void 0?l:void 0,m=kq(t.getState(),f,p);t.dispatch(uD({activeDataKey:p,activeIndex:f,activeCoordinate:m}))}}});var Rq=I2({brush:iH,cartesianAxis:H7,chartData:qU,errorBars:r9,graphicalItems:s7,layout:w4,legend:g3,options:BU,polarAxis:EG,polarOptions:jq,referenceElements:fH,rootProps:_q,tooltip:M6}),Iq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return QL({reducer:Rq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([gN.middleware,yN.middleware,Xb.middleware,AN.middleware,CN.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Tq},name:"recharts-".concat(n)}})};function PN(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Lr(),s=E.useRef(null);if(i)return n;s.current==null&&(s.current=Iq(t,r));var l=f0;return E.createElement(wq,{context:l,store:s.current},n)}function wN(e){var{layout:t,width:n,height:r,margin:i}=e,s=Et(),l=Lr();return E.useEffect(()=>{l||(s(E4(t)),s(C4({width:n,height:r})),s(A4(i)))},[s,l,t,n,r,i]),null}function ON(e){var t=Et();return E.useEffect(()=>{t(Dq(e))},[t,e]),null}var Lq=["children"];function $q(e,t){if(e==null)return{};var n,r,i=Bq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qf.apply(null,arguments)}var Uq={width:"100%",height:"100%"},zq=E.forwardRef((e,t)=>{var n=S0(),r=A0(),i=gT();if(!Vs(n)||!Vs(r))return null;var{children:s,otherAttributes:l,title:u,desc:h}=e,f,p;return typeof l.tabIndex=="number"?f=l.tabIndex:f=i?0:void 0,typeof l.role=="string"?p=l.role:p=i?"application":void 0,E.createElement(r0,qf({},l,{title:u,desc:h,role:p,tabIndex:f,width:n,height:r,style:Uq,ref:t}),s)}),Gq=e=>{var{children:t}=e,n=we(sh);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return E.createElement(r0,{width:r,height:i,x:l,y:s},t)},Tw=E.forwardRef((e,t)=>{var{children:n}=e,r=$q(e,Lq),i=Lr();return i?E.createElement(Gq,null,n):E.createElement(zq,qf({ref:t},r),n)});function Hq(){var e=Et(),[t,n]=E.useState(null),r=we(t3);return E.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;pr(s)&&s!==r&&e(P4(s))}},[t,e,r]),n}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(n),!0).forEach(function(r){Yq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yq(e,t,n){return(t=Fq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fq(e){var t=Vq(e,"string");return typeof t=="symbol"?t:t+""}function Vq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kq=E.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:h,onMouseEnter:f,onMouseLeave:p,onMouseMove:m,onMouseUp:g,onTouchEnd:x,onTouchMove:S,onTouchStart:A,style:C,width:P}=e,O=Et(),[T,j]=E.useState(null),[N,D]=E.useState(null);JU();var M=Hq(),R=E.useCallback(F=>{M(F),typeof t=="function"&&t(F),j(F),D(F)},[M,t,j,D]),U=E.useCallback(F=>{O(mN(F)),O(Nr({handler:s,reactEvent:F}))},[O,s]),W=E.useCallback(F=>{O($v(F)),O(Nr({handler:f,reactEvent:F}))},[O,f]),Y=E.useCallback(F=>{O(dD()),O(Nr({handler:p,reactEvent:F}))},[O,p]),J=E.useCallback(F=>{O($v(F)),O(Nr({handler:m,reactEvent:F}))},[O,m]),ce=E.useCallback(()=>{O(SN())},[O]),se=E.useCallback(F=>{O(xN(F.key))},[O]),te=E.useCallback(F=>{O(Nr({handler:l,reactEvent:F}))},[O,l]),L=E.useCallback(F=>{O(Nr({handler:u,reactEvent:F}))},[O,u]),ee=E.useCallback(F=>{O(Nr({handler:h,reactEvent:F}))},[O,h]),he=E.useCallback(F=>{O(Nr({handler:g,reactEvent:F}))},[O,g]),Se=E.useCallback(F=>{O(Nr({handler:A,reactEvent:F}))},[O,A]),k=E.useCallback(F=>{O(EN(F)),O(Nr({handler:S,reactEvent:F}))},[O,S]),Z=E.useCallback(F=>{O(Nr({handler:x,reactEvent:F}))},[O,x]);return E.createElement(_D.Provider,{value:T},E.createElement(r2.Provider,{value:N},E.createElement("div",{className:nt("recharts-wrapper",r),style:qq({position:"relative",cursor:"default",width:P,height:i},C),onClick:U,onContextMenu:te,onDoubleClick:L,onFocus:ce,onKeyDown:se,onMouseDown:ee,onMouseEnter:W,onMouseLeave:Y,onMouseMove:J,onMouseUp:he,onTouchEnd:Z,onTouchMove:k,onTouchStart:Se,ref:R},n)))}),Xq=["children","className","width","height","style","compact","title","desc"];function Wq(e,t){if(e==null)return{};var n,r,i=Qq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var TN=E.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:h,desc:f}=e,p=Wq(e,Xq),m=Fo(p);return u?E.createElement(Tw,{otherAttributes:m,title:h,desc:f},n):E.createElement(Kq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},E.createElement(Tw,{otherAttributes:m,title:h,desc:f,ref:t},E.createElement(pH,null,n)))}),Zq=["width","height"];function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bv.apply(null,arguments)}function Jq(e,t){if(e==null)return{};var n,r,i=eY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tY={top:5,right:5,bottom:5,left:5},nY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tY,reverseStackOrder:!1,syncMethod:"index"},rY=E.forwardRef(function(t,n){var r,i=$r(t.categoricalChartProps,nY),{width:s,height:l}=i,u=Jq(i,Zq);if(!Vs(s)||!Vs(l))return null;var{chartName:h,defaultTooltipEventType:f,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,categoricalChartProps:g}=t,x={chartName:h,defaultTooltipEventType:f,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,eventEmitter:void 0};return E.createElement(PN,{preloadedState:{options:x},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:h},E.createElement(sN,{chartData:g.data}),E.createElement(wN,{width:s,height:l,layout:i.layout,margin:i.margin}),E.createElement(ON,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(TN,Bv({},u,{width:s,height:l,ref:n})))}),aY=["axis","item"],iY=E.forwardRef((e,t)=>E.createElement(rY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aY,tooltipPayloadSearcher:DD,categoricalChartProps:e,ref:t}));function oY(e){var t=Et();return E.useEffect(()=>{t(Nq(e))},[t,e]),null}var sY=["width","height","layout"];function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uv.apply(null,arguments)}function lY(e,t){if(e==null)return{};var n,r,i=cY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uY={top:5,right:5,bottom:5,left:5},dY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},fY=E.forwardRef(function(t,n){var r,i=$r(t.categoricalChartProps,dY),{width:s,height:l,layout:u}=i,h=lY(i,sY);if(!Vs(s)||!Vs(l))return null;var{chartName:f,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:g}=t,x={chartName:f,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return E.createElement(PN,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},E.createElement(sN,{chartData:i.data}),E.createElement(wN,{width:s,height:l,layout:u,margin:i.margin}),E.createElement(ON,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(oY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(TN,Uv({width:s,height:l},h,{ref:n})))}),hY=["item"],pY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Dw=E.forwardRef((e,t)=>{var n=$r(e,pY);return E.createElement(fY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:hY,tooltipPayloadSearcher:DD,categoricalChartProps:n,ref:t})});const mY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80 transform scale-150",onClick:n=>n.stopPropagation(),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Ic,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})}):null,gY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:s})=>{const[l,u]=E.useState(null),[h,f]=E.useState(!1),[p,m]=E.useState(!1),[g,x]=E.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,A]=E.useState(!1),C=E.useRef(null),[P,O]=E.useState({key:"name",direction:"ascending"}),[T,j]=E.useState("cost"),[N,D]=E.useState(!0),M=E.useMemo(()=>{const z=ae=>ae?ae.replace(/_/g," ").toLowerCase().split(" ").map(pe=>pe.charAt(0).toUpperCase()+pe.slice(1)).join(" "):"";return t.map(ae=>{const ve=[],pe=ae.effect;if(pe.type==="REPEATING_EFFECT")ve.push(z(pe.type)),pe.effects&&Array.isArray(pe.effects)&&pe.effects.forEach(de=>{de.type&&ve.push(z(de.type))});else if(pe.type==="MODIFY_DRONE_BASE"&&pe.mod){const de=pe.mod.stat,be=pe.mod.value;de==="attack"?ve.push(be>0?"Attack Buff":"Attack Debuff"):de==="speed"?ve.push(be>0?"Speed Buff":"Speed Debuff"):de==="shields"?ve.push(be>0?"Shield Buff":"Shield Debuff"):de==="cost"?ve.push(be<0?"Cost Reduction":"Cost Increase"):de==="limit"?ve.push(be>0?"Limit Buff":"Limit Debuff"):de==="ability"?(ve.push("Ability Grant"),pe.mod.abilityToAdd&&pe.mod.abilityToAdd.name&&ve.push(pe.mod.abilityToAdd.name)):ve.push(z(`${de} Modification`))}else if(pe.type==="MODIFY_STAT"&&pe.mod){const de=pe.mod.stat,be=pe.mod.value;pe.mod.type,de==="attack"?ve.push(be>0?"Attack Buff":"Attack Debuff"):de==="speed"?ve.push(be>0?"Speed Buff":"Speed Debuff"):de==="shields"?ve.push(be>0?"Shield Buff":"Shield Debuff"):ve.push(be>0?`${de} Buff`:`${de} Debuff`)}else pe.type==="SEARCH_AND_DRAW"?(ve.push(z(pe.type)),ve.push("Draw")):pe.type&&ve.push(z(pe.type));pe.goAgain&&ve.push("Go Again"),pe.damageType==="PIERCING"&&ve.push("Piercing"),pe.mod?.type&&ve.push(z(pe.mod.type));const ie=(()=>{if(ae.targeting){const de=z(ae.targeting.type);if(ae.targeting.affinity){const be=ae.targeting.affinity.charAt(0)+ae.targeting.affinity.slice(1).toLowerCase();return`${de} (${be})`}return de}else if(pe.type==="MULTI_MOVE"&&pe.source){const de=pe.source.location||"Any",be=pe.source.affinity||"Any",fe=be.charAt(0).toUpperCase()+be.slice(1).toLowerCase();return`${z(de)} (${fe})`}else if(pe.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...ae,keywords:ve,targetingText:ie}})},[t]),R=E.useMemo(()=>{const z=new Set,ae=new Set,ve=new Set;M.forEach(ie=>{z.add(ie.cost),ae.add(ie.targetingText),ie.keywords.forEach(de=>ve.add(de))});const pe=Array.from(z);return{minCost:Math.min(...pe),maxCost:Math.max(...pe),targets:["all",...Array.from(ae).sort()],abilities:Array.from(ve).sort()}},[M]);E.useEffect(()=>{R.minCost!==1/0&&R.maxCost!==-1/0&&x(z=>({...z,cost:{min:R.minCost,max:R.maxCost}}))},[R.minCost,R.maxCost]);const{cardCount:U,deckListForDisplay:W,baseCardCounts:Y}=E.useMemo(()=>{const z={};let ae=0;Object.entries(n).forEach(([pe,ie])=>{if(ie>0){ae+=ie;const de=M.find(be=>be.id===pe);if(de){const be=de.baseCardId;z[be]=(z[be]||0)+ie}}});const ve=Object.entries(n).filter(([,pe])=>pe>0).map(([pe,ie])=>({...M.find(be=>be.id===pe),quantity:ie})).sort((pe,ie)=>pe.name.localeCompare(ie.name));return{cardCount:ae,deckListForDisplay:ve,baseCardCounts:z}},[n,M]),J=U>=40,ce=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],se=E.useMemo(()=>{const z={};W.forEach(ie=>{const de=ie.cost||0;z[de]=(z[de]||0)+ie.quantity});const ae=Object.entries(z).map(([ie,de])=>({name:`${ie}`,count:de})).sort((ie,de)=>parseInt(ie.name)-parseInt(de.name)),ve={};W.forEach(ie=>{ie.keywords&&ie.keywords.forEach(de=>{ve[de]=(ve[de]||0)+ie.quantity})});const pe=Object.entries(ve).map(([ie,de])=>({name:ie,value:de})).sort((ie,de)=>de.value-ie.value);return{barChartData:ae,pieChartData:pe}},[W]),te=E.useMemo(()=>{let z=[...M].filter(ae=>ae.cost<g.cost.min||ae.cost>g.cost.max||g.target!=="all"&&ae.targetingText!==g.target||g.type!=="all"&&ae.type!==g.type?!1:g.abilities.length>0?g.abilities.every(ve=>ae.keywords.includes(ve)):!(g.hideEnhanced&&ae.id.endsWith("_ENHANCED")));return P.key!==null&&z.sort((ae,ve)=>{const pe=ae[P.key],ie=ve[P.key];if(pe==null&&ie==null)return 0;if(pe==null)return 1;if(ie==null)return-1;const de=String(pe).toLowerCase(),be=String(ie).toLowerCase();return de<be?P.direction==="ascending"?-1:1:de>be?P.direction==="ascending"?1:-1:ae.id.localeCompare(ve.id)}),z},[M,g,P]),L=z=>{let ae="ascending";P.key===z&&P.direction==="ascending"&&(ae="descending"),O({key:z,direction:ae})},ee=(z,ae)=>{x(ve=>({...ve,[z]:ae}))},he=z=>{x(ae=>{const ve=ae.abilities.includes(z)?ae.abilities.filter(pe=>pe!==z):[...ae.abilities,z];return{...ae,abilities:ve}})},Se=()=>{x({cost:{min:R.minCost,max:R.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),A(!1)},k=()=>{Object.keys(n).forEach(z=>{n[z]>0&&r(z,0)})};E.useEffect(()=>{const z=ae=>{C.current&&!C.current.contains(ae.target)&&A(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const Z=Math.PI/180,F=({cx:z,cy:ae,midAngle:ve,outerRadius:pe,fill:ie,name:de,value:be})=>{const fe=Math.sin(-Z*ve),rt=Math.cos(-Z*ve),Ge=z+(pe+5)*rt,Ct=ae+(pe+5)*fe,mt=z+(pe+15)*rt,dt=ae+(pe+15)*fe,Ur=mt+(rt>=0?1:-1)*12,ma=dt,Qo=rt>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${Ge},${Ct}L${mt},${dt}L${Ur},${ma}`,stroke:ie,fill:"none"}),v.jsx("circle",{cx:Ur,cy:ma,r:2,fill:ie,stroke:"none"}),v.jsx("text",{x:Ur+(rt>=0?1:-1)*8,y:ma,dy:4,textAnchor:Qo,fill:"#9CA3AF",fontSize:"11px",children:`${de} (${be})`})]})},ne=()=>{const[z,ae]=E.useState(""),ve=E.useRef(null),pe=E.useMemo(()=>Object.entries(n).map(([de,be])=>`${de}:${be}`).join(","),[n]),ie=()=>{ve.current.select(),document.execCommand("copy"),ae("Copied!"),setTimeout(()=>ae(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>f(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:de=>de.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:ve,readOnly:!0,value:pe,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:z}),v.jsxs("button",{onClick:ie,className:"flex items-center gap-2 bg-cyan-600 text-white font-bold py-2 px-4 rounded hover:bg-cyan-700",children:[v.jsx(zw,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>f(!1),className:"flex items-center gap-2 bg-pink-600 text-white font-bold py-2 px-4 rounded hover:bg-pink-700",children:[v.jsx(Wt,{size:16})," Close"]})]})]})})},me=()=>{const[z,ae]=E.useState(""),[ve,pe]=E.useState(""),ie=()=>{pe("");const de=s(z);de.success?m(!1):pe(de.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:de=>de.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:z,onChange:de=>ae(de.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),ve&&v.jsx("p",{className:"text-red-500 mt-2",children:ve}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-700",children:"Cancel"}),v.jsx("button",{onClick:ie,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded hover:bg-purple-700",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[l&&v.jsx(mY,{card:l,onClose:()=>u(null)}),h&&v.jsx(ne,{}),p&&v.jsx(me,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx($M,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(SM,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:Se,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",g.cost.min," - ",g.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:R.minCost,max:R.maxCost,value:g.cost.min,onChange:z=>ee("cost",{...g.cost,min:Math.min(parseInt(z.target.value),g.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:R.minCost,max:R.maxCost,value:g.cost.max,onChange:z=>ee("cost",{...g.cost,max:Math.max(parseInt(z.target.value),g.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:C,children:[v.jsx("button",{onClick:()=>A(!S),className:"filter-select w-full text-left h-full",children:g.abilities.length===0?"Select Abilities":`${g.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:R.abilities.map(z=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.abilities.includes(z),onChange:()=>he(z),className:"mr-2"}),z]},z))})]}),v.jsxs("select",{onChange:z=>ee("type",z.target.value),value:g.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.hideEnhanced,onChange:z=>ee("hideEnhanced",z.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("name"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",P.key==="name"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("type"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",P.key==="type"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",P.key==="cost"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("description"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",P.key==="description"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:te.map((z,ae)=>{const ve=n[z.id]||0,pe=Y[z.baseCardId]||0,ie=z.maxInDeck;return v.jsxs("tr",{className:z.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(pA,{size:18})})}),v.jsx("td",{className:"font-bold",children:z.name}),v.jsx("td",{className:`font-semibold ${z.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:z.type}),v.jsx("td",{children:z.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:z.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:z.keywords.map(de=>v.jsx("span",{className:"ability-chip",children:de},de))})}),v.jsx("td",{className:"text-xs",children:z.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):z.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:ie+1}).map((de,be)=>{const fe=be===ve,rt=ie-(pe-ve),Ge=be>rt;return v.jsx("button",{onClick:()=>r(z.id,be),className:`quantity-btn ${fe?"selected":""}`,disabled:Ge,children:be},be)})})})]},`${z.id}-${ae}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${J?"text-green-400":"text-white"}`,children:["Your Deck (",U,"/40)"]}),v.jsx("button",{onClick:k,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:W.length>0?W.map(z=>{const ae=Y[z.baseCardId]>=z.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(pA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:z.name,children:z.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(z.id,z.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",z.quantity]}),v.jsx("button",{onClick:()=>r(z.id,z.quantity+1),disabled:ae,className:"deck-edit-btn",children:"+"})]})]},z.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),U>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!N),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(Nc,{size:20,className:`transition-transform duration-300 ${N?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${N?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>j("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${T==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>j("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${T==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>j("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${T==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[T==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(Cy,{width:"100%",height:"100%",children:v.jsxs(iY,{data:se.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(fN,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(Yb,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(Fb,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(vy,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(iN,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),T==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(Cy,{width:"100%",height:"100%",children:v.jsxs(Dw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(Mv,{data:[{name:"Action Cards",value:W.filter(z=>z.type==="Action").reduce((z,ae)=>z+ae.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:W.filter(z=>z.type==="Upgrade").reduce((z,ae)=>z+ae.quantity,0),color:"#c084fc"}].filter(z=>z.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:z,value:ae,percent:ve})=>`${z}: ${ae} (${(ve*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:W.filter(z=>z.type==="Action").reduce((z,ae)=>z+ae.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:W.filter(z=>z.type==="Upgrade").reduce((z,ae)=>z+ae.quantity,0),color:"#c084fc"}].filter(z=>z.value>0).map((z,ae)=>v.jsx(el,{fill:z.color},`cell-${ae}`))}),v.jsx(vy,{}),v.jsx(lh,{})]})})]}),T==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(Cy,{width:"100%",height:"100%",children:v.jsxs(Dw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(Mv,{data:se.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:F,outerRadius:60,dataKey:"value",children:se.pieChartData.map((z,ae)=>v.jsx(el,{fill:ce[ae%ce.length]},`cell-${ae}`))}),v.jsx(vy,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!J,className:"w-full p-4 mt-4 text-lg font-bold font-orbitron rounded-lg bg-purple-600 text-white transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed enabled:hover:bg-purple-500",children:"Confirm Deck"})]})]})]})},ni=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})});function yY({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:h,shieldsToRemove:f,shieldsToAdd:p,reallocationPhase:m,totalLocalPlayerDrones:g,totalOpponentPlayerDrones:x,getLocalPlayerId:S,getOpponentPlayerId:A,isMyTurn:C,handlePlayerPass:P,handleReset:O,mandatoryAction:T,multiSelectState:j,AI_HAND_DEBUG_MODE:N,setShowAiHandModal:D,onShowDebugModal:M}){const[R,U]=E.useState(!1),W=E.useRef(null);return E.useEffect(()=>{const Y=J=>{W.current&&!W.current.contains(J.target)&&U(!1)};return document.addEventListener("mousedown",Y),()=>{document.removeEventListener("mousedown",Y)}},[]),v.jsxs("header",{className:"w-full flex justify-between items-center mb-2 flex-shrink-0 px-5 pt-8",children:[v.jsxs("div",{className:"flex flex-col items-start gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-pink-300 flex items-center",children:["Opponent Resources",(i==="deployment"||i==="action")&&u===A()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${t.energy>r.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(Ic,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.energy," / ",r.totals.maxEnergy]})]}),v.jsxs("div",{onClick:()=>N&&setTimeout(()=>D(!0),100),className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${N?"cursor-pointer hover:bg-gray-800":""} ${t.hand.length>r.totals.handLimit?"text-red-400":""}`,children:[v.jsx(CM,{className:"text-gray-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.hand.length," / ",r.totals.handLimit]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50",children:[v.jsx(Iy,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:s===1?t.initialDeploymentBudget:t.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${x>r.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(hA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[x," / ",r.totals.cpuLimit]})]})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center",children:[v.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-xl font-orbitron",style:{textShadow:"0 0 15px rgba(236, 72, 153, 0.5), 0 0 5px rgba(255, 255, 255, 0.5)"},children:"Drone Wars"}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-300 tracking-widest font-exo",children:hR(i)}),(i==="deployment"||i==="action")&&C()&&!T&&!j&&v.jsx("button",{onClick:P,disabled:l[`${S()}Passed`],className:`btn-clipped text-white font-bold py-1 px-6 transition-colors duration-200 ${l[`${S()}Passed`]?"bg-gray-700 cursor-not-allowed":"bg-red-600 hover:bg-red-500"}`,children:"Pass"})]})]}),v.jsxs("div",{className:"flex flex-col items-end gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-cyan-300 flex items-center",children:["Your Resources",(i==="deployment"||i==="action")&&u===S()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${S()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${e.energy>n.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(Ic,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[e.energy," / ",n.totals.maxEnergy]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(Iy,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:s===1?e.initialDeploymentBudget:e.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${g>n.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(hA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[g," / ",n.totals.cpuLimit]})]}),i==="allocateShields"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(Vd,{className:"text-cyan-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:h})]}),m==="removing"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-orange-500/50",children:[v.jsx(Vd,{className:"text-orange-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:f})]}),m==="adding"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-green-500/50",children:[v.jsx(Vd,{className:"text-green-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:p})]}),v.jsx("button",{onClick:O,className:"bg-pink-700 text-white p-3 rounded-full shadow-lg hover:bg-pink-600 transition-colors duration-200","aria-label":"Reset Game",children:v.jsx(TM,{})}),v.jsxs("div",{className:"relative",ref:W,children:[v.jsxs("button",{onClick:()=>U(!R),className:"bg-slate-700 text-white p-3 rounded-full shadow-lg hover:bg-slate-600 transition-colors duration-200 flex items-center","aria-label":"Settings",children:[v.jsx(mA,{}),v.jsx(pM,{size:16,className:"ml-1"})]}),R&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:v.jsxs("button",{onClick:()=>{M&&M(),U(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[v.jsx(mA,{size:16}),"Debug View"]})})]})]})]})]})}const Oh=()=>{const{gameStateManager:e}=Ui(),t=E.useMemo(()=>e?Cn.getInstance(e):null,[e]),[n,r]=E.useState(null);return E.useEffect(()=>{if(!t)return;const p=()=>{r(t.getCacheStats())};p();const m=setInterval(p,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(p,m)=>t?t.getEffectiveStats(p,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(p,m=[])=>t?t.getEffectiveShipStats(p,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:p=>t?t.getLaneData(p):{lane:p,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(p,m=null)=>t?t.hasGuardianInLane(p,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},Nw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:h,gameEngine:f,turnPhase:p,isMyTurn:m,passInfo:g,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,hoveredTarget:C,setHoveredTarget:P,sectionRefs:O})=>{const{getEffectiveShipStats:T}=Oh(),j=T(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(N=>{const D=n[N];if(!D)return console.log(` [DEBUG] Lane ${N} rendering EMPTY div - no hover possible:`,{sectionName:D,sectionNameType:typeof D,sectionNameValue:JSON.stringify(D),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},N);const M=e.shipSections[D],R=u.some(W=>W.id===D);let U=null;if(h&&t){if(h==="removing")M.allocatedShields>0?U="can-remove":U="cannot-remove";else if(h==="adding"){const W=f.getEffectiveSectionMaxShields(D,e,n);M.allocatedShields<W?U="can-add":U="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0",children:v.jsx(lf,{section:D,stats:M,effectiveStatsForDisplay:j.bySection[D],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(D):s&&s({id:D,name:D,...M},"section",t)},onAbilityClick:i,isInteractive:l||p==="action"&&t&&M.ability&&S.energy>=M.ability.cost.energy,isCardTarget:R,isInMiddleLane:N===1,isHovered:C?.type==="section"&&C?.target.name===D,onMouseEnter:()=>!t&&P({target:{name:D,...M},type:"section"}),onMouseLeave:()=>!t&&P(null),reallocationState:U,gameEngine:f,turnPhase:p,isMyTurn:m,passInfo:g,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,sectionRef:W=>{O&&W&&(O.current[D]=W)}})},N)})})},jw=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),vY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),rf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:h,lane:f,onAbilityClick:p,isActionTarget:m,droneRefs:g,mandatoryAction:x,localPlayerState:S})=>{const{getEffectiveStats:A}=Oh(),C=E.useMemo(()=>_n.find(me=>me.name===e.name),[e.name]),P=A(e,f),{maxShields:O}=P,T=e.currentShields??O,j=C.abilities.filter(me=>me.type==="ACTIVE"),N=n?"border-cyan-400":"border-pink-500",D=n?"bg-cyan-900":"bg-pink-950",M=n?"text-cyan-100":"text-pink-100",R=n?"bg-cyan-900":"bg-pink-950",U=n?"text-cyan-400":"text-pink-500",W=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",Y=P.attack>P.baseAttack,J=P.attack<P.baseAttack,ce=Y?"text-green-400":J?"text-red-400":"text-white",se=P.speed>P.baseSpeed,te=P.speed<P.baseSpeed,L=se?"text-green-400":te?"text-red-400":"text-white",ee=e.isExhausted?"grayscale opacity-60":"",he=s?"animate-shake":"",Se=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",k=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",Z=x?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",F=me=>!(e.isExhausted&&me.cost.exhausts!==!1||me.cost.energy&&S.energy<me.cost.energy),ne=e.isTeleporting?"opacity-0 pointer-events-none":"";return v.jsxs("div",{ref:me=>g.current[e.id]=me,onClick:me=>t&&t(me,e,n),onMouseEnter:u,onMouseLeave:h,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ee} ${he} ${Se} ${k} ${Z} ${ne}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${N} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:O}).map((me,z)=>z<T?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:U,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},z):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:W,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},z))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:C.hull}).map((me,z)=>{const ae=z<e.hull,ve=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${ae?ve:"bg-gray-400"} border border-black/50`},z)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${D} flex items-center justify-center border-t ${N}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${M} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(jw,{value:P.attack,isFlat:!1,bgColor:R,textColor:ce})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:v.jsx(jw,{value:P.speed,isFlat:!0,bgColor:R,textColor:L})}),n&&j.length>0&&F(j[0])&&v.jsx(vY,{onClick:me=>p&&p(me,e,j[0])})]})},bY=(e,t,n,r,i,s,l,u,h,f,p,m,g,x,S,A,C,P,O,T)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(j=>v.jsx(rf,{drone:j,lane:n,isPlayer:t,onClick:f,onAbilityClick:p,isSelected:m&&m.id===j.id,isSelectedForMove:g?.phase==="select_drones"&&g.selectedDrones.some(N=>N.id===j.id),isHit:x.includes(j.id),isPotentialInterceptor:S.includes(j.id),droneRefs:A,mandatoryAction:C,localPlayerState:r,isActionTarget:P.some(N=>N.id===j.id)||O.some(N=>N.id===j.id),onMouseEnter:()=>!t&&T({target:j,type:"drone",lane:n}),onMouseLeave:()=>!t&&T(null)},j.id))}),Mw=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:h,multiSelectState:f,turnPhase:p,localPlayerState:m,opponentPlayerState:g,localPlacedSections:x,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:C,handleTokenClick:P,handleAbilityIconClick:O,selectedDrone:T,recentlyHitDrones:j,potentialInterceptors:N,droneRefs:D,mandatoryAction:M,setHoveredTarget:R})=>(Oh(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(U=>{const W=t?r():i(),Y=s&&l.some(ce=>ce.id===U&&ce.owner===W)||u&&h.some(ce=>ce.id===U&&ce.owner===W)||f&&h.some(ce=>ce.id===U&&ce.owner===W),J=t&&(p==="deployment"||p==="action");return v.jsx("div",{onClick:ce=>n(ce,U,t),className:`flex-1 rounded-lg border-2 transition-all duration-200 p-2 lane-background
              ${Y?"border-purple-500 bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":"border-gray-700/50 bg-black/20"}
              ${J?"cursor-pointer hover:bg-cyan-900/50":""}
            `,children:bY(e.dronesOnBoard[U],t,U,m,g,x,S,A,C,P,O,T,f,j,N,D,M,l,h,R)},U)})}));function xY({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:h,turnPhase:f,reallocationPhase:p,shipAbilityMode:m,hoveredTarget:g,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,sectionRefs:P,mandatoryAction:O,gameEngine:T,getLocalPlayerId:j,getOpponentPlayerId:N,isMyTurn:D,getPlacedSectionsForEngine:M,passInfo:R,handleTargetClick:U,handleLaneClick:W,handleShipSectionClick:Y,handleShipAbilityClick:J,handleTokenClick:ce,handleAbilityIconClick:se,setHoveredTarget:te}){return v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(Nw,{player:t,isPlayer:!1,placedSections:r,onTargetClick:U,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:T,turnPhase:f,isMyTurn:D,passInfo:R,getLocalPlayerId:j,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:te,sectionRefs:P}),v.jsx(Mw,{player:t,isPlayer:!1,onLaneClick:W,getLocalPlayerId:j,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:h,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:T,getPlacedSectionsForEngine:M,handleTokenClick:ce,handleAbilityIconClick:se,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:O,setHoveredTarget:te}),v.jsx(Mw,{player:e,isPlayer:!0,onLaneClick:W,getLocalPlayerId:j,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:h,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:T,getPlacedSectionsForEngine:M,handleTokenClick:ce,handleAbilityIconClick:se,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:O,setHoveredTarget:te}),v.jsx(Nw,{player:e,isPlayer:!0,placedSections:n,onSectionClick:Y,onAbilityClick:J,onTargetClick:U,isInteractive:f==="allocateShields"||p,selectedCard:i,validCardTargets:s,reallocationPhase:p,gameEngine:T,turnPhase:f,isMyTurn:D,passInfo:R,getLocalPlayerId:j,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:te,sectionRefs:P})]})})}const Th=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i})=>{const{name:s,cost:l,image:u,description:h}=e;return v.jsx("div",{onClick:f=>{f.stopPropagation(),(n||i)&&t(e)},className:`
        w-52 h-72 rounded-lg p-1 relative group transition-all duration-200 flex-shrink-0
        ${n?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"grayscale":""}
        ${i?"cursor-pointer ring-2 ring-red-500 animate-pulse":""}
      `,children:v.jsxs("div",{className:`
          w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md
          transition-all duration-200
          ${n&&!r?"group-hover:bg-slate-800":""}
        `,children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:s}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Ic,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:l})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:u,alt:s,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:h})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})},SY="_footer_js8yx_10",AY="_tabContainer_js8yx_14",EY="_contentContainer_js8yx_18",CY="_contentOpen_js8yx_22",PY="_contentClosed_js8yx_26",wY="_tabButton_js8yx_32",OY="_tabButtonActive_js8yx_36",TY="_tabButtonInactive_js8yx_40",_Y="_tabIcon_js8yx_44",DY="_multiSelectOverlay_js8yx_50",NY="_multiSelectText_js8yx_54",jY="_handContainer_js8yx_60",MY="_cardPile_js8yx_64",kY="_deckCard_js8yx_68",RY="_deckCardText_js8yx_74",IY="_discardCard_js8yx_78",LY="_discardCardText_js8yx_84",$Y="_pileLabel_js8yx_88",BY="_handSection_js8yx_92",UY="_handHeader_js8yx_96",zY="_handTitle_js8yx_100",GY="_handTitleOverLimit_js8yx_104",HY="_handTitleNormal_js8yx_108",qY="_mandatoryDiscardWarning_js8yx_112",YY="_handCardsContainer_js8yx_116",FY="_handCardsWrapper_js8yx_120",VY="_handCardsWrapperGap_js8yx_124",KY="_cardWrapper_js8yx_128",XY="_optionalDiscardControls_js8yx_133",WY="_optionalDiscardCounter_js8yx_137",QY="_finishDiscardButton_js8yx_141",ZY="_droneContainer_js8yx_148",JY="_droneGrid_js8yx_152",eF="_logContainer_js8yx_158",tF="_logHeader_js8yx_162",nF="_logTitle_js8yx_166",rF="_downloadButton_js8yx_170",aF="_logTableWrapper_js8yx_175",iF="_logTable_js8yx_175",oF="_logTableHeader_js8yx_183",sF="_logTableHeaderCell_js8yx_187",lF="_logTableDebugHeader_js8yx_191",cF="_logTableRow_js8yx_195",uF="_logTableCell_js8yx_199",dF="_logTableCellBold_js8yx_203",fF="_logTableCellGray_js8yx_207",hF="_logTableCellCyan_js8yx_211",pF="_logTableCellYellow_js8yx_215",mF="_logTableCellGrayText_js8yx_219",gF="_logTableCellDebug_js8yx_223",yF="_logTableCellCenter_js8yx_227",vF="_aiDecisionButton_js8yx_231",bF="_buttonDanger_js8yx_242",xF="_buttonSuccess_js8yx_247",SF="_buttonDisabled_js8yx_252",xe={footer:SY,tabContainer:AY,contentContainer:EY,contentOpen:CY,contentClosed:PY,tabButton:wY,tabButtonActive:OY,tabButtonInactive:TY,tabIcon:_Y,multiSelectOverlay:DY,multiSelectText:NY,handContainer:jY,cardPile:MY,deckCard:kY,deckCardText:RY,discardCard:IY,discardCardText:LY,pileLabel:$Y,handSection:BY,handHeader:UY,handTitle:zY,handTitleOverLimit:GY,handTitleNormal:HY,mandatoryDiscardWarning:qY,handCardsContainer:YY,handCardsWrapper:FY,handCardsWrapperGap:VY,cardWrapper:KY,optionalDiscardControls:XY,optionalDiscardCounter:WY,finishDiscardButton:QY,droneContainer:ZY,droneGrid:JY,logContainer:eF,logHeader:tF,logTitle:nF,downloadButton:rF,logTableWrapper:aF,logTable:iF,logTableHeader:oF,logTableHeaderCell:sF,logTableDebugHeader:lF,logTableRow:cF,logTableCell:uF,logTableCellBold:dF,logTableCellGray:fF,logTableCellCyan:hF,logTableCellYellow:pF,logTableCellGrayText:mF,logTableCellDebug:gF,logTableCellCenter:yF,aiDecisionButton:vF,buttonDanger:bF,buttonSuccess:xF,buttonDisabled:SF};function AF({localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleCardClick:s,getLocalPlayerId:l,isMyTurn:u,hoveredCardId:h,setHoveredCardId:f,setIsViewDiscardModalOpen:p,setIsViewDeckModalOpen:m,optionalDiscardCount:g,handleRoundStartDraw:x,checkBothPlayersHandLimitComplete:S,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:C,setConfirmationModal:P,passInfo:O,validCardTargets:T,gameEngine:j,opponentPlayerState:N}){const U=e.hand.length>7,W=1552,Y=e.hand.length;let J=0;return Y>1&&(J=(W-208)/(Y-1)-208),v.jsxs("div",{className:xe.handContainer,children:[v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>p(!0),className:xe.discardCard,children:v.jsx("p",{className:xe.discardCardText,children:e.discardPile.length})}),v.jsx("p",{className:xe.pileLabel,children:"Discard Pile"})]}),v.jsxs("div",{className:xe.handSection,children:[v.jsx("div",{className:xe.handHeader,children:v.jsxs("h3",{className:`${xe.handTitle} ${e.hand.length>t.totals.handLimit?xe.handTitleOverLimit:xe.handTitleNormal}`,children:["Your Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),i?.type==="discard"&&i.fromAbility&&v.jsxs("p",{className:xe.mandatoryDiscardWarning,children:["You must discard ",i.count," card(s)."]}),v.jsx("div",{className:xe.handCardsContainer,style:U?{width:`${W}px`}:{},children:v.jsx("div",{className:`${xe.handCardsWrapper} ${U?"":xe.handCardsWrapperGap}`,children:e.hand.map((ce,se)=>{const te=h?e.hand.findIndex(he=>he.instanceId===h):-1;let L="",ee={zIndex:se};return U&&te!==-1&&(se<te?L="transform -translate-x-12":se>te?L="transform translate-x-12":(L="transform -translate-y-8 scale-105",ee.zIndex=50)),U&&se>0&&(ee.marginLeft=`${J}px`),v.jsx("div",{className:`${xe.cardWrapper} ${L}`,style:ee,onMouseEnter:()=>f(ce.instanceId),onMouseLeave:()=>f(null),children:v.jsx(Th,{card:ce,isPlayable:r==="action"&&u()&&!O[`${l()}Passed`]&&e.energy>=ce.cost&&(!ce.targeting||j.getValidTargets(l(),null,ce,e,N).length>0)||r==="optionalDiscard"&&g<t.totals.discardLimit,isMandatoryTarget:i?.type==="discard",onClick:i?.type==="discard"?he=>P({type:"discard",target:he,onConfirm:()=>A(he),onCancel:()=>P(null),text:`Are you sure you want to discard ${he.name}?`}):r==="optionalDiscard"?he=>P({type:"discard",target:he,onConfirm:()=>C(he),onCancel:()=>P(null),text:`Are you sure you want to discard ${he.name}?`}):s})},ce.instanceId)})})})]}),v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>m(!0),className:xe.deckCard,children:v.jsx("p",{className:xe.deckCardText,children:e.deck.length})}),v.jsx("p",{className:xe.pileLabel,children:"Deck"}),r==="optionalDiscard"&&v.jsxs("div",{className:xe.optionalDiscardControls,children:[v.jsxs("p",{className:xe.optionalDiscardCounter,children:["Discarded: ",g," / ",t.discardLimit]}),v.jsx("button",{onClick:()=>{x(),S()},className:xe.finishDiscardButton,children:"Finish Discarding"})]})]})]})}function EF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:h,isMyTurn:f,turn:p,passInfo:m,validCardTargets:g}){return v.jsx("div",{className:xe.droneContainer,children:v.jsx("div",{className:xe.droneGrid,children:t.map((x,S)=>{const C=(p===1?e.initialDeploymentBudget+e.energy:e.energy)>=x.class,P=n?.type==="Upgrade"&&g.some(O=>O.id===x.name);return v.jsx(sf,{drone:x,onClick:s,isSelected:l&&l.name===x.name,isSelectable:r==="deployment"&&f()&&!m[`${h()}Passed`]&&C&&!i||P,deployedCount:e.deployedDroneCounts[x.name]||0,appliedUpgrades:e.appliedUpgrades[x.name]||[],isUpgradeTarget:P,onViewUpgrades:(O,T)=>u({droneName:O.name,upgrades:T})},S)})})})}function CF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return v.jsxs("div",{className:xe.logContainer,children:[v.jsxs("div",{className:xe.logHeader,children:[v.jsx("h3",{className:xe.logTitle,children:"Game Log"}),v.jsx("button",{onClick:t,className:xe.downloadButton,children:"Download CSV"})]}),v.jsx("div",{className:xe.logTableWrapper,children:v.jsxs("table",{className:xe.logTable,children:[v.jsx("thead",{className:xe.logTableHeader,children:v.jsxs("tr",{children:[v.jsx("th",{className:xe.logTableHeaderCell,children:"Rnd"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Timestamp (UTC)"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Player"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Action"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Source"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Target"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Outcome"}),v.jsx("th",{className:xe.logTableDebugHeader,children:"Debug Source"}),v.jsx("th",{className:xe.logTableHeaderCell})]})}),v.jsx("tbody",{children:e.map((r,i)=>v.jsxs("tr",{className:xe.logTableRow,children:[v.jsx("td",{className:xe.logTableCellBold,children:r.round}),v.jsx("td",{className:xe.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:xe.logTableCellCyan,children:r.player}),v.jsx("td",{className:xe.logTableCellYellow,children:r.actionType}),v.jsx("td",{className:xe.logTableCell,children:r.source}),v.jsx("td",{className:xe.logTableCell,children:r.target}),v.jsx("td",{className:xe.logTableCellGrayText,children:r.outcome}),v.jsx("td",{className:xe.logTableCellDebug,children:r.debugSource}),v.jsx("td",{className:xe.logTableCellCenter,children:r.aiDecisionContext&&v.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:xe.aiDecisionButton,title:"Show AI Decision Logic",children:""})})]},i)).reverse()})]})})]})}function PF({localPlayerState:e,localPlayerEffectiveStats:t,sortedLocalActivePool:n,gameLog:r,footerView:i,isFooterOpen:s,multiSelectState:l,selectedCard:u,turnPhase:h,mandatoryAction:f,handleFooterButtonClick:p,handleCardClick:m,cancelCardSelection:g,downloadLogAsCSV:x,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:T,optionalDiscardCount:j,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleToggleDroneSelection:M,selectedDrone:R,setViewUpgradesModal:U,handleConfirmMandatoryDiscard:W,handleRoundStartDiscard:Y,setConfirmationModal:J,turn:ce,passInfo:se,validCardTargets:te,gameEngine:L,opponentPlayerState:ee,setAiDecisionLogToShow:he}){return v.jsxs("footer",{className:xe.footer,children:[v.jsxs("div",{className:xe.tabContainer,children:[v.jsx("button",{onClick:()=>p("hand"),className:`${xe.tabButton} ${s&&i==="hand"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="hand"&&v.jsx(Nc,{size:20}),"Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>p("drones"),className:`${xe.tabButton} ${s&&i==="drones"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="drones"&&v.jsx(Nc,{size:20}),"Drones"]})}),v.jsx("button",{onClick:()=>p("log"),className:`${xe.tabButton} ${s&&i==="log"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="log"&&v.jsx(Nc,{size:20}),"Log (",r.length,")"]})})]}),v.jsxs("div",{className:`${xe.contentContainer} ${s?xe.contentOpen:xe.contentClosed}`,children:[l&&v.jsxs("div",{className:xe.multiSelectOverlay,children:[v.jsxs("span",{className:xe.multiSelectText,children:[l.phase==="select_source_lane"&&"Reposition: Select a source lane",l.phase==="select_drones"&&`Select Drones (${l.selectedDrones.length} / ${l.maxSelection})`,l.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:Se=>{Se.stopPropagation(),g()},className:xe.buttonDanger,children:"Cancel"}),l.phase==="select_drones"&&v.jsx("button",{onClick:Se=>{Se.stopPropagation(),l.selectedDrones.length>0&&console.log("Confirm drones clicked")},disabled:l.selectedDrones.length===0,className:`${xe.buttonSuccess} ${l.selectedDrones.length===0?xe.buttonDisabled:""}`,children:"Confirm Drones"})]}),i==="hand"&&v.jsx(AF,{localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:u,turnPhase:h,mandatoryAction:f,handleCardClick:m,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:T,optionalDiscardCount:j,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleConfirmMandatoryDiscard:W,handleRoundStartDiscard:Y,setConfirmationModal:J,passInfo:se,validCardTargets:te,gameEngine:L,opponentPlayerState:ee}),i==="drones"&&v.jsx(EF,{localPlayerState:e,sortedLocalActivePool:n,selectedCard:u,turnPhase:h,mandatoryAction:f,handleToggleDroneSelection:M,selectedDrone:R,setViewUpgradesModal:U,getLocalPlayerId:S,isMyTurn:A,turn:ce,passInfo:se,validCardTargets:te}),i==="log"&&v.jsx(CF,{gameLog:r,downloadLogAsCSV:x,setAiDecisionLogToShow:he})]})]})}const wF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(ni,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},OF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=E.useState(null);return v.jsxs(ni,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(h=>{const f=s.appliedUpgrades[h.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",h.name]}),v.jsx("div",{className:"space-y-2",children:f.map(p=>v.jsx("div",{onClick:()=>u({droneName:h.name,instanceId:p.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===p.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:p.name})},p.instanceId))})]},h.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},TF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=E.useState(null);return v.jsxs(ni,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(Th,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},_F=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:h})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(wF,{modalData:e,onClose:()=>t(null)}),n&&v.jsx(OF,{selectionData:n,onConfirm:async(f,p)=>{await l(f,p,u()),r(null)},onCancel:()=>{r(null),h()}}),i&&v.jsx(TF,{selectionData:i,onConfirm:async(f,p)=>{await l(f,p,u()),s(null)},onCancel:()=>{s(null),h()}})]}),DF=({visible:e,start:t,end:n,lineRef:r})=>e?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,NF=({top:e,left:t,size:n="large"})=>{const[r,i]=E.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return E.useEffect(()=>{const u=[];for(let h=0;h<l.particleCount;h++){const f=Math.PI*2*h/l.particleCount,p=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),m=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:h,x:Math.cos(f)*p,y:Math.sin(f)*p,size:m,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),v.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>v.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},jF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const h=n!=="local",f=t===u()?s?.name||"You":l?.name||"Opponent";return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-6 shadow-2xl shadow-purple-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-400 mb-2",children:[v.jsx(zv,{className:"w-6 h-6 animate-spin"}),v.jsx(Uw,{className:"w-6 h-6"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:h?"Opponent's Turn":"AI Thinking..."}),v.jsx("p",{className:"text-gray-300 text-sm",children:h?`Waiting for ${f}`:"Processing AI actions..."})]}),h&&r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Gw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),i&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Recent action:"}),v.jsx("p",{className:"text-white text-sm",children:i})]}),v.jsx("div",{className:"flex justify-center mt-4",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},MF=({card:e})=>v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80",children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),kw=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Wt,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(MF,{card:l})},`${l.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},kF=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:""})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),RF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=E.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:h,filter:f}=r,p=S=>{s(A=>{const C=S.instanceId||`${S.id}-${S.name}`;return A.some(O=>(O.instanceId||`${O.id}-${O.name}`)===C)?A.filter(O=>(O.instanceId||`${O.id}-${O.name}`)!==C):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),s([]))},g=()=>{s([]),t()},x=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:g,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Wt,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:h==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:f?`Select ${u} ${f.type} card${u>1?"s":""} from ${l.length} found ${f.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${x?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>v.jsx(kF,{card:S,isSelected:i.some(C=>{const P=S.instanceId||`${S.id}-${S.name}`;return(C.instanceId||`${C.id}-${C.name}`)===P}),onClick:p},S.instanceId||`${S.id}-${A}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:g,className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!x,className:`font-bold py-3 px-8 rounded-full transition-colors ${x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"Confirm Selection"})]})]})})},IF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return v.jsxs(ni,{title:"AI Action: Card Played",text:"",onClose:t,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:n.name}),r&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:r}),i&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(Th,{card:n,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},LF=({report:e,onClose:t})=>{if(!e)return null;const{attackerName:n,lane:r,targetName:i,targetType:s,interceptorName:l,shieldDamage:u,hullDamage:h,wasDestroyed:f,remainingShields:p,remainingHull:m}=e,g=s==="section"?i.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase()):i;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[t&&v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Action Report"}),v.jsxs("div",{className:"text-left text-gray-300 space-y-3 mt-4 text-center",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-pink-400",children:n})," attacked in"," ",v.jsx("strong",{children:r?.replace("lane","Lane ")||"Unknown Lane"}),"."]}),l?v.jsxs("p",{children:["Your ",v.jsx("strong",{className:"text-yellow-400",children:l})," intercepted the attack, which was targeting your ",v.jsx("strong",{className:"text-cyan-400",children:g}),"!"]}):v.jsxs("p",{children:["It targeted your ",v.jsx("strong",{className:"text-cyan-400",children:g}),"."]}),v.jsxs("p",{children:["The attack dealt ",v.jsx("strong",{className:"text-cyan-300",children:u})," damage to shields and ",v.jsx("strong",{className:"text-red-400",children:h})," damage to the hull."]}),f?v.jsx("p",{className:"font-bold text-red-500 text-lg",children:"The target was destroyed!"}):v.jsxs("p",{children:["The target has ",v.jsx("strong",{className:"text-cyan-300",children:p})," shields and ",v.jsx("strong",{className:"text-green-400",children:m})," hull remaining."]})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})})},$F=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(sf,{drone:t,isSelectable:!1,deployedCount:0})})]})}),BF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,turn:s,firstPasserOfPreviousRound:l,onContinue:u})=>{if(!e)return null;const h=t===n?r:i;let f;s===1?f="The first player is determined randomly for the first round.":f=`${l===n?r:i} passed first in the previous round, securing the initiative.`;const p=`${h} will go first this round. ${f}`;return v.jsx(ni,{title:"First Player Determined",text:p,onClose:u,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:u,className:"btn-continue",children:"Continue"})})})},UF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return v.jsx(ni,{title:"Deployment Complete",text:u,onClose:s,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},zF=({show:e,onContinue:t})=>e?v.jsx(ni,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,GF=({show:e,isMultiplayer:t,phase:n,actionType:r="action"})=>{if(!e)return null;const i=t?"Opponent's Turn":"AI Thinking...";let s;return r==="deploy"?s=t?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...":r==="another"?s="Your opponent takes another action!":n==="deployment"?s=t?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...":s=t?"Your opponent is taking their turn.":"AI is deciding on its next action...",v.jsx(ni,{title:i,text:s,onClose:null})},HF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=u=>{switch(u){case"determineFirstPlayer":return{title:"Waiting for Acknowledgment",message:`Waiting for ${n} to acknowledge first player determination`};case"mandatoryDiscard":return{title:"Waiting for Discard",message:`Waiting for ${n} to complete mandatory discard`};case"allocateShields":return{title:"Waiting for Shield Allocation",message:`Waiting for ${n} to allocate shields`};case"mandatoryDroneRemoval":return{title:"Waiting for Drone Removal",message:`Waiting for ${n} to remove excess drones`};case"deploymentComplete":return{title:"Waiting for Acknowledgment",message:`Waiting for ${n} to acknowledge deployment complete`};default:return{title:"Waiting for Opponent",message:`Waiting for ${n} to complete their action`}}},{title:s,message:l}=i(t);return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-amber-500 p-6 shadow-2xl shadow-amber-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 mb-2",children:[v.jsx(Uw,{className:"w-6 h-6"}),v.jsx(zv,{className:"w-6 h-6 animate-spin"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:s}),v.jsx("p",{className:"text-gray-300 text-sm",children:l})]}),r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Gw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"You have completed your part:"}),v.jsx("p",{className:"text-white text-sm",children:"Waiting for opponent to finish"})]}),v.jsx("div",{className:"flex justify-center",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},qF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&v.jsx("button",{onClick:e.onCancel,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:n}),v.jsx("p",{className:"modal-text",children:e.text}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},YF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:s}),v.jsx("p",{className:"modal-text",children:l})]})})},FF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{if(!n)return null;const i=e===t;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:i?"Victory!":"Defeat!"}),v.jsx("p",{className:"modal-text",children:i?"You have crippled the enemy command ship.":"Your command ship has been crippled."}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"View Final Board"})})]})})},VF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,h=>h.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),v.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),v.jsx("td",{className:"p-2 text-center",children:s.isChosen&&v.jsx("span",{className:"text-yellow-400",children:""})})]},l))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},KF=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Deployment"}),v.jsxs("p",{className:"modal-text",children:["This deployment will use ",i," Initial Deployment points and cost ",s," Energy. Proceed?"]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},XF=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Move"}),v.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},WF=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:h,localPlayerState:f,shipAbilityMode:p,droneRefs:m,mandatoryAction:g})=>{if(!t||!e)return null;const{attackDetails:x,interceptors:S}=e,{attacker:A,target:C,targetType:P,lane:O}=x;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-3xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Interception Opportunity!"}),v.jsxs("p",{className:"modal-text",children:["Combat in ",O?.replace("lane","Lane ")||"Unknown Lane"]}),v.jsxs("div",{className:"flex justify-around items-center my-4 p-4 bg-black/20 rounded-lg",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-pink-400 mb-2",children:"Attacker"}),v.jsx(rf,{drone:A,isPlayer:!1,lane:O,droneRefs:m,mandatoryAction:g,localPlayerState:f})]}),v.jsx("div",{className:"text-4xl font-bold text-gray-500",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-cyan-400 mb-2",children:"Target"}),P==="drone"?v.jsx(rf,{drone:C,isPlayer:!0,lane:O,droneRefs:m,mandatoryAction:g,localPlayerState:f}):v.jsx("div",{className:"transform scale-75",children:v.jsx(lf,{section:C.name,stats:f.shipSections[C.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:h,localPlayerState:f,shipAbilityMode:p})})]})]}),v.jsx("h3",{className:"text-center text-white text-xl font-semibold mt-6 mb-2",children:"Choose an Interceptor"}),v.jsx("p",{className:"text-center text-gray-400 mb-4",children:"Drones with higher speed or special abilities can intercept the attack."}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 my-4",children:S.map(T=>v.jsx(rf,{drone:T,isPlayer:!0,onClick:()=>n(T),lane:O,droneRefs:m,mandatoryAction:g,localPlayerState:f},T.id))}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline Interception"})})]})})},QF=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),v.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},ZF=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},JF=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},eV=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase());let h="";return l&&(h=l.name),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${h}`:"","? This will cost ",i.cost.energy," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},tV=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),v.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>v.jsx(Th,{card:i,isPlayable:!1},i.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),nV=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=E.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(g,x)=>{navigator.clipboard.writeText(JSON.stringify(g,null,2)).then(()=>console.log(`${x} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},h=g=>g===null?"null":g===void 0?"undefined":typeof g=="boolean"?g.toString():typeof g=="string"?`"${g}"`:typeof g=="number"?g.toString():Array.isArray(g)?g.length===0?"[]":`[${g.length} items]`:typeof g=="object"?Object.keys(g).length===0?"{}":`{${Object.keys(g).length} properties}`:String(g),f=(g,x,S="")=>v.jsxs("div",{className:`mb-6 ${S}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-white",children:x}),v.jsxs("button",{onClick:()=>u(g,x),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[v.jsx(zw,{size:12}),"Copy"]})]}),v.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-800",children:[v.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),v.jsx("tbody",{children:Object.entries(g).map(([A,C],P)=>v.jsxs("tr",{className:P%2===0?"bg-gray-900":"bg-gray-800",children:[v.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),v.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:h(C)}),v.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof C=="object"&&C!==null?Array.isArray(C)?"array":"object":typeof C})]},A))})]})})]}),p=()=>{const g={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return v.jsxs("div",{className:"p-4 space-y-6",children:[f(g,"Core Game Info"),f(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),f(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),f({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),f({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&f(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return v.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const g=r.getEffectiveShipStats(l.player1,l.placedSections),x=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(P=>{S[P]=l.player1.dronesOnBoard[P].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,P)})),A[P]=l.player2.dronesOnBoard[P].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,P)}))});const C=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return v.jsxs("div",{className:"p-4 space-y-6",children:[f(g,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),f(x,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),f(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),f(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),f(C,"GameDataService Cache Statistics")]})}catch(g){return v.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",g.message]})}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Wt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Game Debug View"}),v.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[v.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),v.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),v.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?p():m()}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},rV=(e,t)=>{const[n,r]=E.useState([]),i=E.useCallback((s,l=null,u="large")=>{console.log(" [EXPLOSION] triggerExplosion called:",{targetId:s,capturedPosition:l,size:u});const h=ke.createExplosionEffect(s);let f=l;if(!f){const p=e.current[s];console.log(" [EXPLOSION] Looking for drone element:",{targetId:s,found:!!p}),f=ef(p,t.current)}if(console.log(" [EXPLOSION] Position calculated:",f),f){const p=`${h.timestamp}-${Math.random()}`;console.log(" [EXPLOSION] Adding explosion to state:",{explosionId:p,top:f.y,left:f.x,size:u}),r(m=>[...m,{id:p,top:f.y,left:f.x,size:u}]),setTimeout(()=>{r(m=>m.filter(g=>g.id!==p))},h.duration)}else console.warn(" [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class aV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},TELEPORT_IN:{duration:800,type:"TELEPORT_EFFECT",config:{}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t){if(console.log("[ANIMATION EVENTS] AnimationManager executing:",t),t.forEach((n,r)=>{console.log(`[ANIMATION EVENTS] Animation ${r+1}:`,{name:n.animationName,type:this.animations[n.animationName]?.type,duration:this.animations[n.animationName]?.duration,payload:n.payload})}),console.log(" [AI ANIMATION DEBUG] AnimationManager.executeAnimations() called:",{effectCount:t?.length||0,effects:t?.map(n=>n.animationName)}),!t||t.length===0){console.log(" [AI ANIMATION DEBUG] No effects to execute, returning early");return}this.setBlocking(!0);try{const n=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED"];let r=0;for(;r<t.length;){const i=t[r];if(n.includes(i.animationName)){const s=[];for(;r<t.length&&n.includes(t[r].animationName);)s.push(t[r]),r++;console.log(" [ANIMATION DEBUG] Playing damage effects in parallel:",s.map(l=>l.animationName)),await Promise.all(s.map(async l=>{const u=this.animations[l.animationName];if(!u){console.warn(` [ANIMATION DEBUG] Unknown animation: ${l.animationName}`);return}const h=this.visualHandlers.get(u.type);if(!h){console.warn(` [ANIMATION DEBUG] No visual handler for: ${u.type}`);return}return new Promise(f=>{h({...l.payload,config:u.config,onComplete:f}),setTimeout(f,u.duration)})})),console.log(" [ANIMATION DEBUG] All damage effects completed")}else{console.log(" [ANIMATION DEBUG] Processing sequential effect:",i.animationName);const s=this.animations[i.animationName];if(!s){console.warn(` [ANIMATION DEBUG] Unknown animation: ${i.animationName}`),r++;continue}const l=this.visualHandlers.get(s.type);if(!l){console.warn(` [ANIMATION DEBUG] No visual handler for: ${s.type}`),r++;continue}await new Promise(u=>{l({...i.payload,config:s.config,onComplete:u}),setTimeout(u,s.duration)}),console.log(" [ANIMATION DEBUG] Animation completed:",i.animationName),r++}}}finally{await new Promise(n=>setTimeout(n,500)),this.setBlocking(!1),console.log(" [AI ANIMATION DEBUG] All animations completed, blocking released")}}setBlocking(t){console.log(` [ANIMATION BLOCKING] Setting blocking to: ${t}`),this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const iV=({targetId:e,color:t="#00bcd4",intensity:n=.6,duration:r=300,onComplete:i,droneRefs:s,gameAreaRef:l})=>{const[u,h]=E.useState(0),[f,p]=E.useState(null);return E.useEffect(()=>{const m=s.current[e];if(!m||!l.current){i?.();return}const g=m.getBoundingClientRect();p({left:g.left,top:g.top,width:g.width,height:g.height});const x=50,S=100,A=150;setTimeout(()=>h(n),10),setTimeout(()=>h(0),x+S),setTimeout(()=>{i?.()},x+S+A)},[e,n,s,l,i]),f?v.jsx("div",{style:{position:"fixed",left:f.left,top:f.top,width:f.width,height:f.height,backgroundColor:t,opacity:u,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${u>0?"50ms":"150ms"} ease-${u>0?"in":"out"}`}}):null},oV=({visualType:e,sourceId:t,targetId:n,duration:r=800,onComplete:i,droneRefs:s,gameAreaRef:l})=>{const[u,h]=E.useState(!1),[f,p]=E.useState(null);if(E.useEffect(()=>{const m=s.current[n];if(!m||!l.current){i?.();return}const g=m.getBoundingClientRect(),x=l.current.getBoundingClientRect(),S=t==="player1-hand"?x.bottom-100:x.top+100,A=x.left+x.width/2;p({start:{x:A,y:S},end:{x:g.left+g.width/2,y:g.top+g.height/2}}),h(!0);const C=setTimeout(()=>{h(!1),i?.()},r);return()=>clearTimeout(C)},[e,t,n,r,s,l,i]),!u||!f)return null;switch(e){case"LASER_BLAST":return v.jsx(sV,{positions:f,duration:r});case"ENERGY_WAVE":return v.jsx(lV,{positions:f,duration:r});default:return null}},sV=({positions:e,duration:t})=>{const n=Math.atan2(e.end.y-e.start.y,e.end.x-e.start.x),r=Math.sqrt(Math.pow(e.end.x-e.start.x,2)+Math.pow(e.end.y-e.start.y,2));return v.jsx("div",{style:{position:"fixed",left:e.start.x,top:e.start.y,width:r,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${n}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${t}ms ease-out forwards`}})},lV=({positions:e,duration:t})=>v.jsx("div",{style:{position:"fixed",left:e.start.x-20,top:e.start.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}});function cV(e,t,n,r,i,s,l,u,h,f,p,m,g,x){E.useEffect(()=>{const S=r(),A=i(),C=new aV(e);C.registerVisualHandler("DRONE_FLY",O=>{const{droneId:T,targetId:j,config:N,onComplete:D}=O;if(N.isReturn){D?.();return}console.log(" [LASER DEBUG] DRONE_FLY handler called:",{droneId:T,targetId:j,config:N});const M=t.current[T],R=t.current[j]||n.current[j];if(!M||!R){console.warn(" [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!M,hasTarget:!!R,targetId:j,availableSections:Object.keys(n.current||{})}),D?.();return}let U=null;if([S,A].forEach(ce=>{ce?.dronesOnBoard&&Object.values(ce.dronesOnBoard).forEach(se=>{const te=se.find(L=>L.id===T);te&&(U=te)})}),!U){console.warn(" [LASER DEBUG] Drone data not found"),D?.();return}console.log(" [LASER DEBUG] Creating laser effect with attack:",U.attack);const W=l(M,u.current),Y=l(R,u.current),J=`laser-${T}-${Date.now()}`;g(ce=>[...ce,{id:J,startPos:W,endPos:Y,attackValue:U.attack||1,duration:500,onComplete:()=>{g(se=>se.filter(te=>te.id!==J)),D?.()}}])}),C.registerVisualHandler("EXPLOSION_EFFECT",O=>{const T=t.current[O.targetId]||n.current[O.targetId];if(T){const j=l(T,u.current);s(O.targetId,j,O.config?.size||"large")}else console.warn(" [EXPLOSION DEBUG] Target element not found:",O.targetId);O.onComplete?.()}),C.registerVisualHandler("FLASH_EFFECT",O=>{const{targetId:T,config:j,onComplete:N}=O;if(!(t.current[T]||n.current[T])){console.warn(" [FLASH DEBUG] Target element not found:",T),N?.();return}const M=`flash-${T}-${Date.now()}`;p(R=>[...R,{id:M,targetId:T,color:j.color,intensity:j.intensity,onComplete:()=>{p(U=>U.filter(W=>W.id!==M)),N?.()}}])}),C.registerVisualHandler("CARD_VISUAL_EFFECT",O=>{const{visualType:T,sourceId:j,targetId:N,duration:D,onComplete:M}=O,R=`cardvisual-${Date.now()}`;m(U=>[...U,{id:R,visualType:T||"LASER_BLAST",sourceId:j,targetId:N,duration:D||800,onComplete:()=>{m(W=>W.filter(Y=>Y.id!==R)),M?.()}}])}),C.registerVisualHandler("SHAKE_EFFECT",O=>{const{targetId:T,config:j,onComplete:N}=O,D=t.current[T];D?(D.classList.add("animate-shake-damage"),setTimeout(()=>{D.classList.remove("animate-shake-damage"),N?.()},j?.duration||500)):N?.()}),C.registerVisualHandler("TELEPORT_EFFECT",O=>{const{targetId:T,laneId:j,playerId:N,onComplete:D}=O;console.log(" [TELEPORT DEBUG] TELEPORT_EFFECT handler called:",{targetId:T,laneId:j,playerId:N});const M=t.current[T];if(!M){console.warn(" [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",T),D?.();return}const R=l(M,u.current);console.log(" [TELEPORT DEBUG] Using exact drone placeholder position:",R);const U=e.getLocalPlayerId(),Y=N===U?"#00ffff":"#ec4899",J=`teleport-${T}-${Date.now()}`;x(ce=>[...ce,{id:J,top:R.y,left:R.x,color:Y,duration:800,onComplete:()=>{x(se=>se.filter(te=>te.id!==J)),D?.()}}])});const P=e.subscribe(O=>{O.type==="animationStateChange"&&f(O.blocking)});return e.actionProcessor.setAnimationManager(C),P},[r,i,e,s,t,n,l,u,h,f,p,m,g,x])}const uV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=E.useState(t),[u,h]=E.useState([]),f=E.useRef(),p=E.useRef(Date.now());return E.useEffect(()=>{const m=r.duration||800,g=()=>{const x=Date.now()-p.current,S=Math.min(x/m,1),A=S<.5?2*S*S:-1+(4-2*S)*S,C=t.x+(n.x-t.x)*A,P=t.y+(n.y-t.y)*A;l({x:C,y:P}),r.trail&&h(O=>[...O.slice(-8),{id:Date.now(),x:C,y:P}]),S<1?f.current=requestAnimationFrame(g):i?.()};return f.current=requestAnimationFrame(g),()=>{f.current&&cancelAnimationFrame(f.current)}},[t,n,r,i]),v.jsxs(v.Fragment,{children:[u.map((m,g)=>v.jsx("div",{style:{position:"fixed",left:m.x+35,top:m.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+g*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},m.id)),v.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:v.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},dV=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=E.useState(0);E.useEffect(()=>{setTimeout(()=>l(1),50);const g=r*.7;setTimeout(()=>l(0),g);const x=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(x)}},[r,i]);const u=t.x-e.x,h=t.y-e.y,f=Math.sqrt(u*u+h*h),p=Math.atan2(h,u)*(180/Math.PI),m=Math.max(3,2+n*1.5);return v.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${f}px`,height:`${m}px`,transformOrigin:"0 50%",transform:`rotate(${p}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[v.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${m*2}px rgba(255, 0, 0, 0.8), 0 0 ${m*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),v.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},fV=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=E.useState([]);return E.useEffect(()=>{const u=[];for(let p=0;p<16;p++){const m=Math.PI*2*p/16;u.push({id:p,angle:m,delay:p/16*200})}l(u);const f=setTimeout(()=>{i?.()},n);return()=>clearTimeout(f)},[n,i]),v.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},Rw=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:h,updatePlayerState:f,addLogEntry:p,resetGame:m,setWinner:g,processAction:x,gameStateManager:S,p2pManager:A}=Ui(),{getEffectiveStats:C,getEffectiveShipStats:P,gameDataService:O}=Oh(),T=!0,[j,N]=E.useState(!1),[D,M]=E.useState(!1),[R,U]=E.useState([]),[W,Y]=E.useState([]),[J,ce]=E.useState([]),[se,te]=E.useState([]),[L,ee]=E.useState([]),[he,Se]=E.useState(!1),[k,Z]=E.useState(null),[F,ne]=E.useState(null),[me,z]=E.useState(null),[ae,ve]=E.useState(null),[pe,ie]=E.useState(!1),[de,be]=E.useState(!1),[fe,rt]=E.useState(!1),[Ge,Ct]=E.useState(!1),[mt,dt]=E.useState(null),[Ur,ma]=E.useState({phase:"action",actionType:"action"}),[Qo,ri]=E.useState(!1),[_h,hl]=E.useState(!1),[Dh,hu]=E.useState(!1),[Be,qe]=E.useState(null),[Qr,xn]=E.useState(null),[Nh,jh]=E.useState(null),[Vi,Ki]=E.useState(null),[ai,gr]=E.useState(null),[ga,ya]=E.useState(null),[Mh,pl]=E.useState([]),[ml,va]=E.useState(null),[Kn,gl]=E.useState(null),[yl,vl]=E.useState(null),[Zo,Xi]=E.useState("drones"),[bl,xl]=E.useState(!0),[Zr,Tt]=E.useState([]),[kt,ba]=E.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[pu,Wb]=E.useState({}),[Pt,Xn]=E.useState(null),[zr,Wi]=E.useState([]),[fn,$n]=E.useState(null),[Gr,Wn]=E.useState(null),[Ke,Qn]=E.useState(null),[Jr,Hr]=E.useState([]),[Zn,ea]=E.useState(null),[ii,Qi]=E.useState(null),[at,Nn]=E.useState(null),[Jo,yr]=E.useState(null),[Sl,Al]=E.useState(null),[oi,es]=E.useState(null),[vr,Zi]=E.useState(null),[mu,jn]=E.useState(!1),[El,xa]=E.useState(null),[Sa,Ji]=E.useState(null),[ta,kh]=E.useState(null),[Mn,eo]=E.useState(0),[Cl,ts]=E.useState(0),[to,gu]=E.useState(null),[Rh,no]=E.useState(null),[Qb,yu]=E.useState(null),[ns,Pl]=E.useState(null),[Ih,vu]=E.useState(0),Aa=E.useRef(null),br=E.useRef({}),rs=E.useRef({}),hn=E.useRef(null),Jn=E.useRef(!1),{explosions:bu,triggerExplosion:ro}=rV(br,hn);cV(S,br,rs,s,l,ro,ef,hn,U,Se,Y,ce,te,ee),E.useEffect(()=>{Bc.initialize(S,S.actionProcessor,()=>e.gameMode!=="local",ca),console.log(" GameFlowManager initialized")},[]),E.useEffect(()=>{const B=ge=>{const{type:ue,phase:ye,playerId:_e,data:je}=ge;if(console.log(` App.jsx received PhaseManager event: ${ue}`,{phase:ye,playerId:_e}),ue==="phaseTransition"){const{newPhase:He,previousPhase:_t,firstPlayerResult:Yt}=ge;console.log(` App.jsx handling phase transition: ${_t}  ${He}`),Ct(!1),mt===_t&&dt(null),He==="determineFirstPlayer"&&(console.log(" First player determination phase started, showing modal"),ie(!0)),He==="deploymentComplete"&&(console.log(" Deployment complete phase started, showing modal"),be(!0))}else ue==="phaseComplete"&&(console.log(` App.jsx handling phase completion: ${ye}`),mt===ye&&dt(null),ye==="determineFirstPlayer"&&console.log(" Both players acknowledged first player determination"),ye==="deploymentComplete"&&console.log(" Both players acknowledged deployment complete"))},Q=Bc.subscribe(B);return()=>{Q()}},[i,n,Z,mt]);const{turnPhase:Ve,turn:er,currentPlayer:Ht,firstPlayerOfRound:ao,firstPasserOfPreviousRound:io,firstPlayerOverride:Ea,passInfo:qt,winner:en,unplacedSections:Lh,shieldsToAllocate:as,gameLog:si,placedSections:$h}=e,[tn,Ca]=E.useState(Ht),is=E.useRef(qt),oo=E.useRef(Ve),Bh=E.useRef(en);E.useEffect(()=>{is.current=qt},[qt]),E.useEffect(()=>{oo.current=Ve},[Ve]),E.useEffect(()=>{Bh.current=en},[en]);const Pe=s(),Ie=l(),Bn=u(),xr=h();if(!Pe||!Ie)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});const wl=E.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]),Pa=E.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);E.useEffect(()=>{if(!i())return;const B=ge=>{if(console.log(" P2P Event received in App:",ge),ge.type==="PHASE_COMPLETED"){const{phase:ue}=ge.data||ge;console.log(` Opponent completed phase: ${ue}`)}};return A.subscribe(B)},[i,A]);const os=Pe?P(Pe,Bn):null,xu=Ie?P(Ie,xr):null,ss=E.useMemo(()=>Pe?Object.values(Pe.dronesOnBoard).flat().length:0,[Pe?.dronesOnBoard]),Su=E.useMemo(()=>Ie?Object.values(Ie.dronesOnBoard).flat().length:0,[Ie?.dronesOnBoard]),Uh=E.useMemo(()=>[...Pe.activeDronePool].sort((B,Q)=>B.class!==Q.class?B.class-Q.class:B.name.localeCompare(Q.name)),[Pe.activeDronePool]);E.useMemo(()=>Pe?Object.keys(Pe.shipSections).some(B=>Pe.shipSections[B].allocatedShields<O.getEffectiveSectionMaxShields(B,Pe,Bn)):!1,[Pe.shipSections,Bn,O]),E.useCallback(B=>{if(console.log(` sendPhaseCompletion called for phase: ${B}`),i()){const Q={type:"PHASE_COMPLETED",data:{phase:B}};console.log(" Sending phase completion message:",Q),A.sendData(Q),console.log(` Sent phase completion: ${B}`)}else console.log(" Not multiplayer, skipping network send")},[i,A]),E.useCallback(async()=>{va(null),await x("turnTransition",{newPlayer:n(),reason:"aiReportClosed"})},[x,n]),E.useCallback(async()=>{Kn&&!Kn.card.effect.goAgain?await x("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):Kn&&Kn.card.effect.goAgain&&!en&&(await x("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),ma({phase:Ve,actionType:"another"}),Ct(!0)),gl(null)},[x,n,r,Kn,en]),E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:Q}=ke.calculateAllValidTargets(Pt,fn,at,Ke,Pe,Ie);Wi(B),Hr(Q),Pt&&(Qn(null),$n(null))},[Pt,fn,Ke,Pe,Ie,at]);const wa=()=>{Pt&&(Xn(null),qe(null))},nn=()=>{Qn(null),Nn(null)},na=E.useCallback(async B=>{if(Jn.current){console.warn("Attack already in progress. Aborting duplicate call.");return}Jn.current=!0;try{const Q=ye=>{Tt(_e=>[..._e,ye]),setTimeout(()=>Tt(_e=>_e.filter(je=>je!==ye)),500)},ge=new Map;if(B.targetId){const ye=ef(br.current[B.targetId],hn.current);ye&&ge.set(B.targetId,ye)}const ue=await x("attack",{attackDetails:B});B.targetId&&Q(B.targetId),B.attackingPlayer===r()&&va({...ue.attackResult,isBlocking:!0}),ue.afterAttackEffects&&ue.afterAttackEffects.forEach(ye=>{if(ye.type==="EXPLOSION"){const _e=ge.get(ye.payload.targetId);ro(ye.payload.targetId,_e)}else ye.type==="HIT_ANIMATION"&&(Tt(_e=>[..._e,ye.payload.targetId]),setTimeout(()=>{Tt(_e=>_e.filter(je=>je!==ye.payload.targetId))},500))}),Ki(null)}catch(Q){console.error("Error in resolveAttack:",Q),Ki(null),va(null)}finally{Jn.current=!1}},[ro,x,n,r]),Ol=E.useCallback(async(B,Q,ge)=>{try{const ue=await x("ability",{droneId:Q.id,abilityIndex:Q.abilities.indexOf(B),targetId:ge?.id||null});wa()}catch(ue){console.error("Error in resolveAbility:",ue),wa()}},[x,n]),zh=E.useCallback(async(B,Q,ge)=>{const ue=await x("shipAbility",{ability:B,sectionName:Q,targetId:ge?.id||null,playerId:n()});if(ue.mandatoryAction){Zi(ue.mandatoryAction),Xi("hand"),xl(!0),$n(null),Wn(null);return}if(ue.requiresShieldReallocation){$n(null),Wn(null);return}return $n(null),Wn(null),ue},[x,n]),Au=E.useCallback(async(B,Q,ge,ue=null)=>{if(ge===r()){let _e="",je="";if(Q)if(Q.name){if(_e=Q.name,Q.id&&Q.owner){const He=Q.owner===n()?Pe:Ie;for(const[_t,Yt]of Object.entries(He.dronesOnBoard))if(Yt.some(Rt=>Rt.id===Q.id)){je=_t.replace("lane","Lane ");break}}}else Q.id.startsWith("lane")?(_e=`Lane ${Q.id.slice(-1)}`,je=`Lane ${Q.id.slice(-1)}`):_e=Q.id.replace(/([A-Z])/g," $1").replace(/^./,He=>He.toUpperCase());gl({card:B,targetName:_e,targetLane:je})}const ye=await x("cardPlay",{card:B,targetId:Q?.id||null,playerId:ge});if(ye.needsCardSelection){Ji({...ye.needsCardSelection,onConfirm:_e=>{Gh(_e,ye.needsCardSelection,B,Q,ge,ue,ye.newPlayerStates),Ji(null)},onCancel:()=>{Ji(null),ge===n()&&(nn(),ea(null))}});return}return ge===n()&&(nn(),ea(null)),ye},[x,n,Pe,Ie]),Gh=E.useCallback((B,Q,ge,ue,ye,_e,je=null)=>{const{searchedCards:He,remainingDeck:_t,discardPile:Yt,shuffleAfter:Rt}=Q,It=He.filter(Ft=>{const co=Ft.instanceId||`${Ft.id}-${Ft.name}`;return!B.some(ls=>(ls.instanceId||`${ls.id}-${ls.name}`)===co)}),Un=je||{player1:Pe,player2:Ie},Sn=ye===n()?Un[n()]:Un[r()],Dl=[...Sn.hand,...B];let lo=[..._t,...It];Rt&&(lo=lo.sort(()=>.5-Math.random()));const ci={...Sn,deck:lo,hand:Dl,discardPile:Yt};p({player:Sn.name,actionType:"CARD_SELECTION",source:ge.name,target:`Selected ${B.length} cards`,outcome:`Drew: ${B.map(Ft=>Ft.name).join(", ")}`},"handleCardSelection",ye===r()?_e:null);const rp={[n()]:ye===n()?{...Sn,deck:ci.deck,hand:ci.hand,discardPile:ci.discardPile}:Un[n()],[r()]:ye===r()?{...Sn,deck:ci.deck,hand:ci.hand,discardPile:ci.discardPile}:Un[r()]},Nu=ke.finishCardPlay(ge,ye,rp);S.setPlayerStates(Nu.newPlayerStates.player1,Nu.newPlayerStates.player2),ye===n()&&(nn(),ea(null))},[Pe,Ie,p]),Hh=E.useCallback((B,Q,ge,ue)=>{const ye=ke.resolveMultiMove(B,Q,ge,ue,Pe,l(),Pa(),{logCallback:p,applyOnMoveEffectsCallback:ke.applyOnMoveEffects,updateAurasCallback:ke.updateAuras});f(n(),ye.newPlayerState),ye.shouldClearMultiSelectState&&Nn(null),ye.shouldCancelCardSelection&&nn()},[Pe,p,ke,Bn,xr]),Tl=E.useCallback((B,Q,ge,ue)=>{const ye=ke.resolveSingleMove(B,Q,ge,ue,Pe,l(),Pa(),{logCallback:p,applyOnMoveEffectsCallback:ke.applyOnMoveEffects,updateAurasCallback:ke.updateAuras});f(n(),ye.newPlayerState),ye.shouldClearMultiSelectState&&Nn(null),ye.shouldCancelCardSelection&&nn()},[Pe,p,ke,Bn,xr]),qh=B=>{bl?Zo===B?xl(!1):Xi(B):(xl(!0),Xi(B))};E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:Q}=ke.calculateAllValidTargets(Pt,fn,at,Ke,Pe,Ie);Wi(B),Hr(Q),Pt&&(Qn(null),$n(null))},[Pt,fn,Ke,Pe,Ie,at]),E.useEffect(()=>{en||ke.checkGameStateForWinner(wl(),{logCallback:p,setWinnerCallback:g,showWinnerModalCallback:ri})},[Pe?.shipSections,Ie?.shipSections,en,p]),E.useEffect(()=>{if(Ve==="action"){const B=ke.calculatePotentialInterceptors(Be,Pe,Ie,Pa());pl(B)}else pl([])},[Be,Ve,Pe,Ie,ke,Bn,xr]),E.useEffect(()=>{xn(null)},[Be]),E.useEffect(()=>{if(Be&&!Pt&&Ve==="action"){const B=ef(br.current[Be.id],hn.current);B&&ba({visible:!0,start:B,end:{x:B.x,y:B.y}})}else ba(B=>({...B,visible:!1}))},[Be,Ve,Pt]),E.useEffect(()=>{const B=ge=>{if(kt.visible&&Aa.current&&hn.current){const ue=hn.current.getBoundingClientRect(),ye=ge.clientX-ue.left,_e=ge.clientY-ue.top;Aa.current.setAttribute("x2",ye),Aa.current.setAttribute("y2",_e)}},Q=hn.current;return Q?.addEventListener("mousemove",B),()=>{Q?.removeEventListener("mousemove",B)}},[kt.visible]),E.useEffect(()=>{en&&Jn.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),Jn.current=!1)},[en,Ve,Ht]),E.useEffect(()=>{if(Ve!=="deployment"&&Ve!=="action"||en||pe||de||fe||F||me||Zn||Ht===tn&&Ve===ns)return;const B=t(),Q=i();console.log("[MODAL UPDATE] Turn/phase change detected:",{currentPlayer:Ht,lastCurrentPlayer:tn,turnPhase:Ve,lastTurnPhase:ns,myTurn:B,isMultiplayerGame:Q,currentModalTitle:k?.title}),Ca(Ht),Pl(Ve),B?(Z(null),Ct(!1)):(ma({phase:Ve,actionType:"action"}),Ct(!0))},[Ht,Ve,t,i,er,en,pe,de,fe,F,me,Zn,tn,ns,k?.title]);const Yh=()=>{m(),Jn.current=!1,qe(null),Z(null),va(null),Xn(null),Wi([]),Zi(null),jn(!1),xa(null),Qn(null),Hr([]),ea(null),ri(!1)},Fh=async B=>{const{turnPhase:Q}=e;Q==="allocateShields"?await x("allocateShield",{sectionName:B,playerId:n()}):await x("reallocateShields",{action:"add",sectionName:B,playerId:n()})},Eu=async B=>{if(Cl<=0||Pe.shipSections[B].allocatedShields<=0)return;(await x("reallocateShields",{action:"remove",sectionName:B,playerId:n()})).success&&(ts(ue=>ue-1),eo(ue=>ue+1))},Vh=async B=>{if(Mn<=0)return;(await x("reallocateShields",{action:"add",sectionName:B,playerId:n()})).success&&eo(ge=>ge-1)},Kh=async()=>{console.log(" App.jsx: Acknowledging first player determination");const B=n();if((await x("acknowledgeFirstPlayer",{playerId:B})).success){ie(!1);const ge=e.commitments?.determineFirstPlayer||{};!(Object.keys(ge).length===2)&&e.gameMode!=="local"&&dt("determineFirstPlayer")}},Xh=async()=>{console.log(" App.jsx: Acknowledging deployment complete");const B=n(),Q=await x("acknowledgeDeploymentComplete",{playerId:B});Q.success&&(be(!1),Q.data?.bothPlayersComplete||dt("deploymentComplete"))},Wh=B=>{if(ta){ta==="removing"?Eu(B):ta==="adding"&&Vh(B);return}Ve==="allocateShields"&&Fh(B)},Qh=B=>{qt[n()+"Passed"]||(Be&&Be.name===B.name?qe(null):(qe(B),Xn(null),nn()))},Cu=async B=>{try{const Q=await x("deployment",{droneData:Be,laneId:B,playerId:n(),turn:er});Q.success?qe(null):Z({title:Q.error,text:Q.message,isBlocking:!0})}catch(Q){console.error("Error executing deployment:",Q),Z({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Zh=B=>{if(!(!Be||Ht!==n()||qt[n()+"Passed"])){if(er===1){const Q=ke.validateDeployment(Pe,Be,er,ss,os);if(!Q.isValid){Z({title:Q.reason,text:Q.message,isBlocking:!0});return}const{budgetCost:ge,energyCost:ue}=Q;if(ue>0){ne({lane:B,budgetCost:ge,energyCost:ue});return}}Cu(B)}},Jh=async()=>{qt[`${n()}Passed`]||await x("playerPass",{playerId:n(),playerName:Pe.name,turnPhase:Ve,passInfo:qt,opponentPlayerId:r()})};E.useEffect(()=>{if(!Vi||Vi.attackingPlayer!==r())return;const B=ke.calculateAiInterception(Vi,wl(),Pa());B.hasInterceptors?ya({attackDetails:B.attackDetails,interceptors:B.interceptors}):na(Vi)},[Vi,na,Bn,xr]);const ep=(B,Q,ge)=>{if(B.stopPropagation(),Ve!=="action"||Ht!==n()||qt[n()+"Passed"])return;const ue=ge.cost||{};if(Q.isExhausted&&ue.exhausts!==!1){Z({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(ue.energy&&Pe.energy<ue.energy){Z({title:"Not Enough Energy",text:`This ability costs ${ue.energy} energy, but you only have ${Pe.energy}.`,isBlocking:!0});return}if(ge.targeting?.type==="LANE"&&ge.targeting?.location==="SAME_LANE"){const ye=ke.getLaneOfDrone(Q.id,Pe);if(ye){Qi({ability:ge,drone:Q,target:{id:ye,owner:n()}});return}}Pt&&Pt.drone.id===Q.id?wa():(Xn({drone:Q,ability:ge}),qe(Q),nn())},_l=(B,Q,ge)=>{if(B.stopPropagation(),!(Ve!=="action"||!t()||qt[`${n()}Passed`])){if(Pe.energy<ge.cost.energy){Z({title:"Not Enough Energy",text:`This ability costs ${ge.cost.energy} energy, but you only have ${Pe.energy}.`,isBlocking:!0});return}fn?.ability.id===ge.id?$n(null):ge.targeting?($n({sectionName:Q.name,ability:ge}),qe(null),wa(),nn()):ge.effect.type==="REALLOCATE_SHIELDS"?(kh("removing"),ts(ge.effect.value.maxShields),eo(0),gu(JSON.parse(JSON.stringify(Pe.shipSections))),yu({ability:ge,sectionName:Q.name})):Wn({ability:ge,sectionName:Q.name,target:null})}},so=(B,Q,ge)=>{if(B.stopPropagation(),console.log(`--- handleTokenClick triggered for ${Q.name} (isPlayer: ${ge}) ---`),at&&at.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:ue,maxSelection:ye}=at;ue.some(je=>je.id===Q.id)?Nn(je=>({...je,selectedDrones:je.selectedDrones.filter(He=>He.id!==Q.id)})):ue.length<ye&&Nn(je=>({...je,selectedDrones:[...je.selectedDrones,Q]}));return}if(zr.some(ue=>ue.id===Q.id)||Jr.some(ue=>ue.id===Q.id)){console.log("Action: Targeting for an active card/ability."),Pu(Q,"drone",ge);return}if(Ve==="action"&&t()&&Be&&!Be.isExhausted&&!ge){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",Be.name,`(ID: ${Be.id})`),console.log("Target clicked:",Q.name,`(ID: ${Q.id})`);const[ue]=Object.entries(Pe.dronesOnBoard).find(([_e,je])=>je.some(He=>He.id===Be.id))||[],[ye]=Object.entries(Ie.dronesOnBoard).find(([_e,je])=>je.some(He=>He.id===Q.id))||[];if(console.log("Calculated Attacker Lane:",ue),console.log("Calculated Target Lane:",ye),ue&&ye&&ue===ye)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),Ie.dronesOnBoard[ye].some(He=>C(He,ye).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),Z({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const He={attacker:Be,target:Q,targetType:"drone",lane:ue,attackingPlayer:n()},_t=C(Be,ue),Yt=Ie.dronesOnBoard[ue].filter(It=>{const Un=C(It,ue);return!It.isExhausted&&(Un.speed>_t.speed||Un.keywords.has("ALWAYS_INTERCEPTS"))&&It.id!==Q.id}).sort((It,Un)=>It.class-Un.class);let Rt=null;Yt.length>0&&(Q.class===void 0||Yt[0].class<Q.class)&&(Rt=Yt[0]),Rt?gr({interceptor:Rt,originalTarget:Q,onClose:()=>{na({...He,interceptor:Rt}),gr(null),qe(null)}}):(na(He),qe(null))}else console.log("FAILURE: Lanes do not match or could not be found."),Z({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(at&&at.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:ue,maxSelection:ye}=at;ue.some(je=>je.id===Q.id)?Nn(je=>({...je,selectedDrones:je.selectedDrones.filter(He=>He.id!==Q.id)})):ue.length<ye&&Nn(je=>({...je,selectedDrones:[...je.selectedDrones,Q]}));return}if(vr?.type==="destroy"&&ge){console.log("Action: Mandatory destruction."),xa({type:"destroy",target:Q,onConfirm:()=>tp(Q),onCancel:()=>xa(null),text:`Are you sure you want to destroy your ${Q.name}?`});return}if(ge&&Ve==="action"&&t()&&!qt[`${n()}Passed`]){if(Q.isExhausted){console.log("Action prevented: Drone is exhausted.");return}Be?.id===Q.id?(console.log("Action: Deselecting drone",Q.name),qe(null)):(console.log("Action: Selecting drone",Q.name),qe(Q),wa(),nn());return}console.log("Action: Fallback - showing drone details."),ve(Q)},Pu=(B,Q,ge)=>{if(fn&&zr.some(ue=>ue.id===B.id)){Wn({ability:fn.ability,sectionName:fn.sectionName,target:B});return}if(Pt&&zr.some(ue=>ue.id===B.id)){Ol(Pt.ability,Pt.drone,B);return}if(Ke&&Jr.some(ue=>ue.id===B.id)){const ue=ge?n():r();ea({card:Ke,target:{...B,owner:ue}});return}if(Ve==="action"&&t()&&Be&&!Be.isExhausted&&!ge&&Q==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",Be.name,`(ID: ${Be.id})`),console.log("Target clicked:",B.name,`(Type: ${Q})`);const[ue]=Object.entries(Pe.dronesOnBoard).find(([ye,_e])=>_e.some(je=>je.id===Be.id))||[];if(console.log("Calculated Attacker Lane:",ue),ue){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const ye=Ie.dronesOnBoard[ue];if(ye&&ye.some(je=>C(je,ue).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),Z({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const je={attacker:Be,target:B,targetType:"section",lane:ue,attackingPlayer:n()},He=C(Be,ue),_t=Ie.dronesOnBoard[ue].filter(Rt=>{const It=C(Rt,ue);return!Rt.isExhausted&&(It.speed>He.speed||It.keywords.has("ALWAYS_INTERCEPTS"))}).sort((Rt,It)=>Rt.class-It.class);let Yt=null;_t.length>0&&(Yt=_t[0]),Yt?gr({interceptor:Yt,originalTarget:B,onClose:()=>{na({...je,interceptor:Yt}),gr(null),qe(null)}}):(na(je),qe(null))}}else console.log("FAILURE: Could not determine attacker lane."),Z({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}Q==="drone"&&ve(B)},wu=(B,Q,ge)=>{if(B.stopPropagation(),Pt&&Pt.ability.targeting.type==="LANE"){const ue=ge?n():r();if(zr.some(ye=>ye.id===Q&&ye.owner===ue)){Qi({ability:Pt.ability,drone:Pt.drone,target:{id:Q,owner:ue}});return}}if(at&&ge&&Jr.some(ue=>ue.id===Q)){const{phase:ue,sourceLane:ye,selectedDrones:_e}=at;if(ue==="select_source_lane"){Nn(je=>({...je,phase:"select_drones",sourceLane:Q}));return}if(ue==="select_destination_lane"){Hh(at.card,_e,ye,Q);return}}if(at&&at.card.effect.type==="SINGLE_MOVE"&&at.phase==="select_destination"&&ge){Jr.some(ue=>ue.id===Q)&&Tl(at.card,at.selectedDrone,at.sourceLane,Q);return}if(Ke&&Ke.targeting.type==="LANE"){const ue=ge?n():r();if(Jr.some(ye=>ye.id===Q&&ye.owner===ue)){ea({card:Ke,target:{id:Q,owner:ue}});return}}if(Ke){nn();return}if(Pt){wa();return}if(Ve==="deployment"&&ge)Zh(Q);else if(Ve==="action"&&ge&&Be){const[ue]=Object.entries(Pe.dronesOnBoard).find(([je,He])=>He.some(_t=>_t.id===Be.id))||[];if(!ue)return;const ye=parseInt(ue.replace("lane",""),10),_e=parseInt(Q.replace("lane",""),10);Math.abs(ye-_e)===1?z({drone:Be,from:ue,to:Q}):Z({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},Ou=B=>{if(!(Ve!=="action"||!t()||qt[`${n()}Passed`])&&!(Pe.energy<B.cost)){if(B.effect.type==="MULTI_MOVE"){at&&at.card.instanceId===B.instanceId?nn():(Nn({card:B,phase:"select_source_lane",sourceLane:null,selectedDrones:[],maxSelection:B.effect.count}),Qn(B),qe(null),Xn(null));return}if(B.effect.type==="SINGLE_MOVE"){at&&at.card.instanceId===B.instanceId?nn():(Nn({card:B,phase:"select_drone",selectedDrone:null,sourceLane:null}),Qn(B),qe(null),Xn(null));return}if(Ke?.instanceId===B.instanceId)nn();else if(B.name==="System Sabotage"){const Q=ke.getValidTargets(n(),null,B,Pe,Ie);yr({card:B,targets:Q,opponentState:Ie}),Qn(null),Xn(null),qe(null)}else if(B.type==="Upgrade"){const Q=ke.getValidTargets(n(),null,B,Pe,Ie);Q.length>0?(Al({card:B,targets:Q}),Qn(null),Xn(null),qe(null)):Z({title:"No Valid Targets",text:`There are no drone types that can accept the '${B.name}' upgrade right now.`,isBlocking:!0})}else B.targeting?(Qn(B),qe(null),Xn(null)):(ea({card:B,target:null}),Qn(null),Xn(null),qe(null))}},Tu=async B=>{const Q=vr;await x("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!0}),xa(null);const ge=Q.count-1;ge<=0?(Zi(null),Q.fromAbility):Zi(ue=>({...ue,count:ge}))},_u=async B=>{await x("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!1}),vu(Q=>Q+1),xa(null)},Du=async()=>{console.log("[OPTIONAL DISCARD] Player completing optional discard phase"),vu(0),await x("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}})},li=()=>{const B=actionProcessor?.getPhaseCommitmentStatus("optionalDiscard");return console.log("[OPTIONAL DISCARD] Commitment status:",B),B?.bothComplete||!1},tp=B=>{const Q=ke.getLaneOfDrone(B.id,Pe);if(Q){let ge={...Pe,dronesOnBoard:{...Pe.dronesOnBoard}};ge.dronesOnBoard[Q]=ge.dronesOnBoard[Q].filter(ye=>ye.id!==B.id);const ue=ke.onDroneDestroyed(ge,B);Object.assign(ge,ue),ge.dronesOnBoard=ke.updateAuras(ge,l(),Pa()),f(n(),ge)}Zi(ge=>{const ue=ge.count-1;if(ue<=0){if(Su>xu.totals.cpuLimit){let _e={...Ie},je=Object.values(Ie.dronesOnBoard).flat().length-P(Ie,xr).totals.cpuLimit;for(let He=0;He<je;He++){const _t=Object.entries(_e.dronesOnBoard).flatMap(([Sn,Dl])=>Dl.map(lo=>({...lo,lane:Sn})));if(_t.length===0)break;const Yt=Math.min(..._t.map(Sn=>Sn.class)),Rt=_t.filter(Sn=>Sn.class===Yt),It=Rt[Math.floor(Math.random()*Rt.length)];_e.dronesOnBoard[It.lane]=_e.dronesOnBoard[It.lane].filter(Sn=>Sn.id!==It.id);const Un=ke.onDroneDestroyed(_e,It);Object.assign(_e,Un)}_e.dronesOnBoard=ke.updateAuras(_e,s(),Pa()),f(r(),_e)}return null}return{...ge,count:ue}}),xa(null)},np=()=>{if(si.length===0){alert("The game log is empty.");return}const B=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],Q=si.map(_e=>[_e.round,_e.player,_e.actionType,_e.source,_e.target,_e.outcome,_e.debugSource||"N/A"].map(He=>`"${String(He).replace(/"/g,'""')}"`).join(",")),ge=[B.join(","),...Q].join(`
`),ue=new Blob([ge],{type:"text/csv;charset=utf-8;"}),ye=document.createElement("a");if(ye.download!==void 0){const _e=URL.createObjectURL(ue);ye.setAttribute("href",_e),ye.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),ye.style.visibility="hidden",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)}};return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",ref:hn,onClick:()=>{wa(),nn()},children:[v.jsx(DF,{visible:kt.visible,start:kt.start,end:kt.end,lineRef:Aa}),bu.map(B=>v.jsx(NF,{top:B.top,left:B.left,size:B.size},B.id)),R.map(B=>v.jsx(uV,{droneData:B.droneData,startPos:B.startPos,endPos:B.endPos,config:B.config,onComplete:B.onComplete},B.id)),W.map(B=>v.jsx(iV,{targetId:B.targetId,color:B.color,intensity:B.intensity,onComplete:B.onComplete,droneRefs:br,gameAreaRef:hn},B.id)),J.map(B=>v.jsx(oV,{visualType:B.visualType,sourceId:B.sourceId,targetId:B.targetId,duration:B.duration,onComplete:B.onComplete,droneRefs:br,gameAreaRef:hn},B.id)),se.map(B=>v.jsx(dV,{startPos:B.startPos,endPos:B.endPos,attackValue:B.attackValue,duration:B.duration,onComplete:B.onComplete},B.id)),L.map(B=>v.jsx(fV,{top:B.top,left:B.left,duration:B.duration,onComplete:B.onComplete},B.id)),he&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),v.jsx(yY,{localPlayerState:Pe,opponentPlayerState:Ie,localPlayerEffectiveStats:os,opponentPlayerEffectiveStats:xu,turnPhase:Ve,turn:er,passInfo:qt,firstPlayerOfRound:ao,shieldsToAllocate:as,shieldsToRemove:Cl,shieldsToAdd:Mn,reallocationPhase:ta,totalLocalPlayerDrones:ss,totalOpponentPlayerDrones:Su,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,handlePlayerPass:Jh,handleReset:Yh,mandatoryAction:vr,multiSelectState:at,AI_HAND_DEBUG_MODE:T,setShowAiHandModal:N,onShowDebugModal:()=>M(!0)}),v.jsx(xY,{localPlayerState:Pe,opponentPlayerState:Ie,localPlacedSections:Bn,opponentPlacedSections:xr,selectedCard:Ke,validCardTargets:Jr,abilityMode:Pt,validAbilityTargets:zr,multiSelectState:at,turnPhase:Ve,reallocationPhase:ta,shipAbilityMode:fn,hoveredTarget:Qr,selectedDrone:Be,recentlyHitDrones:Zr,potentialInterceptors:Mh,droneRefs:br,sectionRefs:rs,mandatoryAction:vr,gameEngine:ke,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:Pa,passInfo:qt,handleTargetClick:Pu,handleLaneClick:wu,handleShipSectionClick:Wh,handleShipAbilityClick:_l,handleTokenClick:so,handleAbilityIconClick:ep,setHoveredTarget:xn}),v.jsx(PF,{localPlayerState:Pe,localPlayerEffectiveStats:os,sortedLocalActivePool:Uh,gameLog:si,footerView:Zo,isFooterOpen:bl,multiSelectState:at,selectedCard:Ke,turnPhase:Ve,mandatoryAction:vr,handleFooterButtonClick:qh,handleCardClick:Ou,cancelCardSelection:nn,downloadLogAsCSV:np,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Nh,setHoveredCardId:jh,setIsViewDiscardModalOpen:hu,setIsViewDeckModalOpen:hl,handleToggleDroneSelection:Qh,selectedDrone:Be,setViewUpgradesModal:es,handleConfirmMandatoryDiscard:Tu,setConfirmationModal:xa,turn:er,passInfo:qt,validCardTargets:Jr,gameEngine:ke,opponentPlayerState:Ie,setAiDecisionLogToShow:vl,optionalDiscardCount:Ih,handleRoundStartDraw:Du,handleRoundStartDiscard:_u,checkBothPlayersHandLimitComplete:li}),k&&v.jsx(ni,{title:k.title,text:k.text,onClose:k.onClose===null?null:k.onClose||(()=>Z(null)),children:k.children}),v.jsx(BF,{show:pe,firstPlayerOfRound:ao,localPlayerId:n(),localPlayerName:Pe.name,opponentPlayerName:Ie.name,turn:er,firstPasserOfPreviousRound:io,onContinue:Kh}),v.jsx(UF,{show:de,firstPlayerOfRound:ao,localPlayerId:n(),localPlayerName:Pe.name,opponentPlayerName:Ie.name,onContinue:Xh}),v.jsx(zF,{show:fe,onContinue:()=>rt(!1)}),v.jsx(GF,{show:Ge,isMultiplayer:i(),phase:Ur.phase,actionType:Ur.actionType}),v.jsx(HF,{show:!!mt,phase:mt,opponentName:Ie.name,roomCode:null}),v.jsx(KF,{deploymentConfirmation:F,show:!!F,onCancel:()=>ne(null),onConfirm:async()=>{if(!F)return;const{lane:B}=F;await Cu(B),ne(null)}}),v.jsx(XF,{moveConfirmation:me,show:!!me,onCancel:()=>z(null),onConfirm:async()=>{if(!me)return;const{drone:B,from:Q,to:ge}=me;await x("move",{droneId:B.id,fromLane:Q,toLane:ge,playerId:n()}),z(null),qe(null)}}),v.jsx(QF,{interceptionModal:ai,show:!!ai,onClose:ai?.onClose}),v.jsx(WF,{choiceData:ga,show:!!ga,onIntercept:B=>{na({...ga.attackDetails,interceptor:B}),ya(null)},onDecline:()=>{na(ga.attackDetails),ya(null)},gameEngine:ke,turnPhase:Ve,isMyTurn:t,passInfo:qt,getLocalPlayerId:n,localPlayerState:Pe,shipAbilityMode:fn,droneRefs:br,mandatoryAction:vr}),v.jsx($F,{isOpen:!!ae,drone:ae,onClose:()=>ve(null)}),v.jsx(LF,{report:ml,show:!!ml,onClose:()=>va(null)}),Kn&&v.jsx(IF,{report:Kn,onClose:()=>gl(null)}),v.jsx(VF,{decisionLog:yl,show:!!yl,onClose:()=>vl(null),getLocalPlayerId:n}),v.jsx(FF,{winner:en,localPlayerId:n(),show:en&&Qo,onClose:()=>ri(!1)}),v.jsx(YF,{mandatoryAction:vr,effectiveStats:os,show:vr&&mu,onClose:()=>jn(!1)}),v.jsx(qF,{confirmationModal:El,show:!!El}),v.jsx(_F,{viewUpgradesModal:oi,setViewUpgradesModal:es,destroyUpgradeModal:Jo,setDestroyUpgradeModal:yr,upgradeSelectionModal:Sl,setUpgradeSelectionModal:Al,resolveCardPlay:Au,getLocalPlayerId:n,cancelCardSelection:nn}),v.jsx(ZF,{cardConfirmation:Zn,show:!!Zn,onCancel:()=>ea(null),onConfirm:async()=>await Au(Zn.card,Zn.target,n())}),v.jsx(JF,{abilityConfirmation:ii,show:!!ii,onCancel:()=>Qi(null),onConfirm:()=>{Ol(ii.ability,ii.drone,ii.target),Qi(null)}}),v.jsx(tV,{opponentPlayerState:Ie,show:j,debugMode:T,onClose:()=>N(!1)}),v.jsx(nV,{show:D,onClose:()=>M(!1),gameStateManager:S,gameDataService:O}),v.jsx(kw,{isOpen:_h,onClose:()=>hl(!1),cards:Pe.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(kw,{isOpen:Dh,onClose:()=>hu(!1),cards:Pe.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(RF,{isOpen:!!Sa,onClose:Sa?.onCancel||(()=>Ji(null)),onConfirm:Sa?.onConfirm||(()=>{}),selectionData:Sa}),v.jsx(eV,{shipAbilityConfirmation:Gr,show:!!Gr,onCancel:()=>Wn(null),onConfirm:async()=>await zh(Gr.ability,Gr.sectionName,Gr.target)}),v.jsx(jF,{isVisible:!1,currentPlayer:Ht,gameMode:e.gameMode,roomCode:null,lastAction:null,localPlayerState:Pe,opponentPlayerState:Ie,getLocalPlayerId:n})]})};function hV(){const{gameState:e}=Ui(),[t,n]=E.useState(!0),r=E.useRef(!1);if(E.useEffect(()=>{const i=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(i)},[]),E.useEffect(()=>{r.current?console.log(" GameFlowManager already initialized, skipping..."):(Bc.initialize(Fe,Fe.actionProcessor,()=>e.gameMode!=="local",ca),Fe.setGameFlowManager(Bc),r.current=!0,console.log(" GameFlowManager initialized in AppRouter"))},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading Drone Wars..."})});switch(e.appState){case"menu":return v.jsx(NA,{});case"lobby":return v.jsx(yR,{});case"inGame":switch(e.turnPhase){case"droneSelection":return v.jsx(bR,{});case"deckSelection":return v.jsx(xR,{});case"deckBuilding":return v.jsx(gY,{});case"placement":return v.jsx(AR,{});case"gameInitializing":return v.jsx(Rw,{});default:return v.jsx(Rw,{})}default:return console.warn("Unknown app state:",e.appState,"defaulting to menu"),v.jsx(NA,{})}}aM.createRoot(document.getElementById("root")).render(v.jsx(Lw.StrictMode,{children:v.jsx(hV,{})}));export{Cn as G,_n as f};
