function _w(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dm={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1;function KN(){if(V1)return sc;V1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return sc.Fragment=t,sc.jsx=n,sc.jsxs=n,sc}var X1;function VN(){return X1||(X1=1,Dm.exports=KN()),Dm.exports}var v=VN(),jm={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function XN(){if(W1)return Le;W1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=m&&I[m]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function E(I,K,Y){this.props=I,this.context=K,this.refs=A,this.updater=Y||x}E.prototype.isReactComponent={},E.prototype.setState=function(I,K){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,K,"setState")},E.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function P(){}P.prototype=E.prototype;function O(I,K,Y){this.props=I,this.context=K,this.refs=A,this.updater=Y||x}var _=O.prototype=new P;_.constructor=O,S(_,E.prototype),_.isPureReactComponent=!0;var N=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function R(I,K,Y,oe,ye,z){return Y=z.ref,{$$typeof:e,type:I,key:K,ref:Y!==void 0?Y:null,props:z}}function k(I,K){return R(I.type,K,void 0,void 0,void 0,I.props)}function B(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function J(I){var K={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Y){return K[Y]})}var q=/\/+/g;function Z(I,K){return typeof I=="object"&&I!==null&&I.key!=null?J(""+I.key):K.toString(36)}function ce(){}function le(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(ce,ce):(I.status="pending",I.then(function(K){I.status==="pending"&&(I.status="fulfilled",I.value=K)},function(K){I.status==="pending"&&(I.status="rejected",I.reason=K)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function te(I,K,Y,oe,ye){var z=typeof I;(z==="undefined"||z==="boolean")&&(I=null);var re=!1;if(I===null)re=!0;else switch(z){case"bigint":case"string":case"number":re=!0;break;case"object":switch(I.$$typeof){case e:case t:re=!0;break;case p:return re=I._init,te(re(I._payload),K,Y,oe,ye)}}if(re)return ye=ye(I),re=oe===""?"."+Z(I,0):oe,N(ye)?(Y="",re!=null&&(Y=re.replace(q,"$&/")+"/"),te(ye,K,Y,"",function(ae){return ae})):ye!=null&&(B(ye)&&(ye=k(ye,Y+(ye.key==null||I&&I.key===ye.key?"":(""+ye.key).replace(q,"$&/")+"/")+re)),K.push(ye)),1;re=0;var be=oe===""?".":oe+":";if(N(I))for(var me=0;me<I.length;me++)oe=I[me],z=be+Z(oe,me),re+=te(oe,K,Y,z,ye);else if(me=y(I),typeof me=="function")for(I=me.call(I),me=0;!(oe=I.next()).done;)oe=oe.value,z=be+Z(oe,me++),re+=te(oe,K,Y,z,ye);else if(z==="object"){if(typeof I.then=="function")return te(le(I),K,Y,oe,ye);throw K=String(I),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return re}function $(I,K,Y){if(I==null)return I;var oe=[],ye=0;return te(I,oe,"","",function(z){return K.call(Y,z,ye++)}),oe}function ee(I){if(I._status===-1){var K=I._result;K=K(),K.then(function(Y){(I._status===0||I._status===-1)&&(I._status=1,I._result=Y)},function(Y){(I._status===0||I._status===-1)&&(I._status=2,I._result=Y)}),I._status===-1&&(I._status=0,I._result=K)}if(I._status===1)return I._result.default;throw I._result}var he=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function pe(){}return Le.Children={map:$,forEach:function(I,K,Y){$(I,function(){K.apply(this,arguments)},Y)},count:function(I){var K=0;return $(I,function(){K++}),K},toArray:function(I){return $(I,function(K){return K})||[]},only:function(I){if(!B(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Le.Component=E,Le.Fragment=n,Le.Profiler=i,Le.PureComponent=O,Le.StrictMode=r,Le.Suspense=d,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Le.__COMPILER_RUNTIME={__proto__:null,c:function(I){return j.H.useMemoCache(I)}},Le.cache=function(I){return function(){return I.apply(null,arguments)}},Le.cloneElement=function(I,K,Y){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var oe=S({},I.props),ye=I.key,z=void 0;if(K!=null)for(re in K.ref!==void 0&&(z=void 0),K.key!==void 0&&(ye=""+K.key),K)!D.call(K,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&K.ref===void 0||(oe[re]=K[re]);var re=arguments.length-2;if(re===1)oe.children=Y;else if(1<re){for(var be=Array(re),me=0;me<re;me++)be[me]=arguments[me+2];oe.children=be}return R(I.type,ye,void 0,void 0,z,oe)},Le.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:s,_context:I},I},Le.createElement=function(I,K,Y){var oe,ye={},z=null;if(K!=null)for(oe in K.key!==void 0&&(z=""+K.key),K)D.call(K,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ye[oe]=K[oe]);var re=arguments.length-2;if(re===1)ye.children=Y;else if(1<re){for(var be=Array(re),me=0;me<re;me++)be[me]=arguments[me+2];ye.children=be}if(I&&I.defaultProps)for(oe in re=I.defaultProps,re)ye[oe]===void 0&&(ye[oe]=re[oe]);return R(I,z,void 0,void 0,null,ye)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(I){return{$$typeof:u,render:I}},Le.isValidElement=B,Le.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:ee}},Le.memo=function(I,K){return{$$typeof:h,type:I,compare:K===void 0?null:K}},Le.startTransition=function(I){var K=j.T,Y={};j.T=Y;try{var oe=I(),ye=j.S;ye!==null&&ye(Y,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(pe,he)}catch(z){he(z)}finally{j.T=K}},Le.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Le.use=function(I){return j.H.use(I)},Le.useActionState=function(I,K,Y){return j.H.useActionState(I,K,Y)},Le.useCallback=function(I,K){return j.H.useCallback(I,K)},Le.useContext=function(I){return j.H.useContext(I)},Le.useDebugValue=function(){},Le.useDeferredValue=function(I,K){return j.H.useDeferredValue(I,K)},Le.useEffect=function(I,K,Y){var oe=j.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(I,K)},Le.useId=function(){return j.H.useId()},Le.useImperativeHandle=function(I,K,Y){return j.H.useImperativeHandle(I,K,Y)},Le.useInsertionEffect=function(I,K){return j.H.useInsertionEffect(I,K)},Le.useLayoutEffect=function(I,K){return j.H.useLayoutEffect(I,K)},Le.useMemo=function(I,K){return j.H.useMemo(I,K)},Le.useOptimistic=function(I,K){return j.H.useOptimistic(I,K)},Le.useReducer=function(I,K,Y){return j.H.useReducer(I,K,Y)},Le.useRef=function(I){return j.H.useRef(I)},Le.useState=function(I){return j.H.useState(I)},Le.useSyncExternalStore=function(I,K,Y){return j.H.useSyncExternalStore(I,K,Y)},Le.useTransition=function(){return j.H.useTransition()},Le.version="19.1.1",Le}var Q1;function Ks(){return Q1||(Q1=1,jm.exports=XN()),jm.exports}var C=Ks();const Tw=Hr(C),WN=_w({__proto__:null,default:Tw},[C]);var Nm={exports:{}},lc={},km={exports:{}},Mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function QN(){return Z1||(Z1=1,(function(e){function t($,ee){var he=$.length;$.push(ee);e:for(;0<he;){var pe=he-1>>>1,I=$[pe];if(0<i(I,ee))$[pe]=ee,$[he]=I,he=pe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ee=$[0],he=$.pop();if(he!==ee){$[0]=he;e:for(var pe=0,I=$.length,K=I>>>1;pe<K;){var Y=2*(pe+1)-1,oe=$[Y],ye=Y+1,z=$[ye];if(0>i(oe,he))ye<I&&0>i(z,oe)?($[pe]=z,$[ye]=he,pe=ye):($[pe]=oe,$[Y]=he,pe=Y);else if(ye<I&&0>i(z,he))$[pe]=z,$[ye]=he,pe=ye;else break e}}return ee}function i($,ee){var he=$.sortIndex-ee.sortIndex;return he!==0?he:$.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,y=3,x=!1,S=!1,A=!1,E=!1,P=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function N($){for(var ee=n(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=$)r(h),ee.sortIndex=ee.expirationTime,t(d,ee);else break;ee=n(h)}}function j($){if(A=!1,N($),!S)if(n(d)!==null)S=!0,D||(D=!0,Z());else{var ee=n(h);ee!==null&&te(j,ee.startTime-$)}}var D=!1,R=-1,k=5,B=-1;function J(){return E?!0:!(e.unstable_now()-B<k)}function q(){if(E=!1,D){var $=e.unstable_now();B=$;var ee=!0;try{e:{S=!1,A&&(A=!1,O(R),R=-1),x=!0;var he=y;try{t:{for(N($),m=n(d);m!==null&&!(m.expirationTime>$&&J());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,y=m.priorityLevel;var I=pe(m.expirationTime<=$);if($=e.unstable_now(),typeof I=="function"){m.callback=I,N($),ee=!0;break t}m===n(d)&&r(d),N($)}else r(d);m=n(d)}if(m!==null)ee=!0;else{var K=n(h);K!==null&&te(j,K.startTime-$),ee=!1}}break e}finally{m=null,y=he,x=!1}ee=void 0}}finally{ee?Z():D=!1}}}var Z;if(typeof _=="function")Z=function(){_(q)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,le=ce.port2;ce.port1.onmessage=q,Z=function(){le.postMessage(null)}}else Z=function(){P(q,0)};function te($,ee){R=P(function(){$(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function($){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var he=y;y=ee;try{return $()}finally{y=he}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var he=y;y=$;try{return ee()}finally{y=he}},e.unstable_scheduleCallback=function($,ee,he){var pe=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?pe+he:pe):he=pe,$){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=he+I,$={id:p++,callback:ee,priorityLevel:$,startTime:he,expirationTime:I,sortIndex:-1},he>pe?($.sortIndex=he,t(h,$),n(d)===null&&$===n(h)&&(A?(O(R),R=-1):A=!0,te(j,he-pe))):($.sortIndex=I,t(d,$),S||x||(S=!0,D||(D=!0,Z()))),$},e.unstable_shouldYield=J,e.unstable_wrapCallback=function($){var ee=y;return function(){var he=y;y=ee;try{return $.apply(this,arguments)}finally{y=he}}}})(Mm)),Mm}var J1;function ZN(){return J1||(J1=1,km.exports=QN()),km.exports}var Rm={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA;function JN(){if(eA)return Cn;eA=1;var e=Ks();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(d,h,null,p)},Cn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},Cn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Cn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Cn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Cn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Cn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Cn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Cn.requestFormReset=function(d){r.d.r(d)},Cn.unstable_batchedUpdates=function(d,h){return d(h)},Cn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},Cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Cn.version="19.1.1",Cn}var tA;function Dw(){if(tA)return Rm.exports;tA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Rm.exports=JN(),Rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA;function ek(){if(nA)return lc;nA=1;var e=ZN(),t=Ks(),n=Dw();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function d(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,f=o;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return u(g),a;if(b===f)return u(g),o;b=b.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=b;else{for(var w=!1,T=g.child;T;){if(T===c){w=!0,c=g,f=b;break}if(T===f){w=!0,f=g,c=b;break}T=T.sibling}if(!w){for(T=b.child;T;){if(T===c){w=!0,c=b,f=g;break}if(T===f){w=!0,f=b,c=g;break}T=T.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function h(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=h(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),_=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Z(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Symbol.for("react.client.reference");function le(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ce?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case E:return"Profiler";case A:return"StrictMode";case j:return"Suspense";case D:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case _:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case N:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case R:return o=a.displayName||null,o!==null?o:le(a.type)||"Memo";case k:o=a._payload,a=a._init;try{return le(a(o))}catch{}}return null}var te=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},pe=[],I=-1;function K(a){return{current:a}}function Y(a){0>I||(a.current=pe[I],pe[I]=null,I--)}function oe(a,o){I++,pe[I]=a.current,a.current=o}var ye=K(null),z=K(null),re=K(null),be=K(null);function me(a,o){switch(oe(re,o),oe(z,a),oe(ye,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?A1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=A1(o),a=C1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Y(ye),oe(ye,a)}function ae(){Y(ye),Y(z),Y(re)}function fe(a){a.memoizedState!==null&&oe(be,a);var o=ye.current,c=C1(o,a.type);o!==c&&(oe(z,a),oe(ye,c))}function ve(a){z.current===a&&(Y(ye),Y(z)),be.current===a&&(Y(be),nc._currentValue=he)}var de=Object.prototype.hasOwnProperty,Je=e.unstable_scheduleCallback,Ae=e.unstable_cancelCallback,Be=e.unstable_shouldYield,Nt=e.unstable_requestPaint,pt=e.unstable_now,Yr=e.unstable_getCurrentPriorityLevel,Xa=e.unstable_ImmediatePriority,Fr=e.unstable_UserBlockingPriority,Gi=e.unstable_NormalPriority,il=e.unstable_LowPriority,Hi=e.unstable_IdlePriority,Fo=e.log,ol=e.unstable_setDisableYieldValue,qi=null,vn=null;function jr(a){if(typeof Fo=="function"&&ol(a),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(qi,a)}catch{}}var zt=Math.clz32?Math.clz32:ou,la=Math.log,sl=Math.LN2;function ou(a){return a>>>=0,a===0?32:31-(la(a)/sl|0)|0}var Yi=256,Fi=4194304;function Nr(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ki(a,o,c){var f=a.pendingLanes;if(f===0)return 0;var g=0,b=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var T=f&134217727;return T!==0?(f=T&~b,f!==0?g=Nr(f):(w&=T,w!==0?g=Nr(w):c||(c=T&~a,c!==0&&(g=Nr(c))))):(T=f&~b,T!==0?g=Nr(T):w!==0?g=Nr(w):c||(c=f&~a,c!==0&&(g=Nr(c)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:g}function ca(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function bh(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ll(){var a=Yi;return Yi<<=1,(Yi&4194048)===0&&(Yi=256),a}function Wa(){var a=Fi;return Fi<<=1,(Fi&62914560)===0&&(Fi=4194304),a}function Ko(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Vo(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Mb(a,o,c,f,g,b){var w=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var T=a.entanglements,M=a.expirationTimes,H=a.hiddenUpdates;for(c=w&~c;0<c;){var ne=31-zt(c),se=1<<ne;T[ne]=0,M[ne]=-1;var F=H[ne];if(F!==null)for(H[ne]=null,ne=0;ne<F.length;ne++){var X=F[ne];X!==null&&(X.lane&=-536870913)}c&=~se}f!==0&&St(a,f,0),b!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=b&~(w&~o))}function St(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-zt(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|c&4194090}function Yn(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var f=31-zt(c),g=1<<f;g&o|a[f]&o&&(a[f]|=o),c&=~g}}function ua(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Vi(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Fn(){var a=ee.p;return a!==0?a:(a=window.event,a===void 0?32:G1(a.type))}function fa(a,o){var c=ee.p;try{return ee.p=a,o()}finally{ee.p=c}}var Rn=Math.random().toString(36).slice(2),At="__reactFiber$"+Rn,at="__reactProps$"+Rn,ln="__reactContainer$"+Rn,kr="__reactEvents$"+Rn,cl="__reactListeners$"+Rn,Qa="__reactHandles$"+Rn,Mr="__reactResources$"+Rn,Rr="__reactMarker$"+Rn;function Za(a){delete a[At],delete a[at],delete a[kr],delete a[cl],delete a[Qa]}function Fe(a){var o=a[At];if(o)return o;for(var c=a.parentNode;c;){if(o=c[ln]||c[At]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=O1(a);a!==null;){if(c=a[At])return c;a=O1(a)}return o}a=c,c=a.parentNode}return null}function cn(a){if(a=a[At]||a[ln]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function Xi(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function da(a){var o=a[Mr];return o||(o=a[Mr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function kt(a){a[Rr]=!0}var ul=new Set,su={};function Kr(a,o){Dn(a,o),Dn(a+"Capture",o)}function Dn(a,o){for(su[a]=o,a=0;a<o.length;a++)ul.add(o[a])}var Wi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},fl={};function cu(a){return de.call(fl,a)?!0:de.call(lu,a)?!1:Wi.test(a)?fl[a]=!0:(lu[a]=!0,!1)}function Ir(a,o,c){if(cu(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function ha(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function In(a,o,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+f)}}var pa,uu;function ma(a){if(pa===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);pa=o&&o[1]||"",uu=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pa+a+uu}var Qi=!1;function Xo(a,o){if(!a||Qi)return"";Qi=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var F=X}Reflect.construct(a,[],se)}else{try{se.call()}catch(X){F=X}a.call(se.prototype)}}else{try{throw Error()}catch(X){F=X}(se=a())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&F&&typeof X.stack=="string")return[X.stack,F.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),w=b[0],T=b[1];if(w&&T){var M=w.split(`
`),H=T.split(`
`);for(g=f=0;f<M.length&&!M[f].includes("DetermineComponentFrameRoot");)f++;for(;g<H.length&&!H[g].includes("DetermineComponentFrameRoot");)g++;if(f===M.length||g===H.length)for(f=M.length-1,g=H.length-1;1<=f&&0<=g&&M[f]!==H[g];)g--;for(;1<=f&&0<=g;f--,g--)if(M[f]!==H[g]){if(f!==1||g!==1)do if(f--,g--,0>g||M[f]!==H[g]){var ne=`
`+M[f].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=f&&0<=g);break}}}finally{Qi=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?ma(c):""}function fu(a){switch(a.tag){case 26:case 27:case 5:return ma(a.type);case 16:return ma("Lazy");case 13:return ma("Suspense");case 19:return ma("SuspenseList");case 0:case 15:return Xo(a.type,!1);case 11:return Xo(a.type.render,!1);case 1:return Xo(a.type,!0);case 31:return ma("Activity");default:return""}}function xh(a){try{var o="";do o+=fu(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Ln(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Sh(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rb(a){var o=Sh(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),f=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,b=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,b.call(this,w)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function dl(a){a._valueTracker||(a._valueTracker=Rb(a))}function du(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return a&&(f=Sh(a)?a.checked?"true":"false":a.value),a=f,a!==c?(o.setValue(a),!0):!1}function ga(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Wo=/[\n"\\]/g;function Gt(a){return a.replace(Wo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Vr(a,o,c,f,g,b,w,T){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),o!=null?w==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Ln(o)):a.value!==""+Ln(o)&&(a.value=""+Ln(o)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),o!=null?Qo(a,w,Ln(o)):c!=null?Qo(a,w,Ln(c)):f!=null&&a.removeAttribute("value"),g==null&&b!=null&&(a.defaultChecked=!!b),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.name=""+Ln(T):a.removeAttribute("name")}function hu(a,o,c,f,g,b,w,T){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;c=c!=null?""+Ln(c):"",o=o!=null?""+Ln(o):c,T||o===a.value||(a.value=o),a.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=T?a.checked:!!f,a.defaultChecked=!!f,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function Qo(a,o,c){o==="number"&&ga(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function ze(a,o,c,f){if(a=a.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<a.length;c++)g=o.hasOwnProperty("$"+a[c].value),a[c].selected!==g&&(a[c].selected=g),g&&f&&(a[c].defaultSelected=!0)}else{for(c=""+Ln(c),o=null,g=0;g<a.length;g++){if(a[g].value===c){a[g].selected=!0,f&&(a[g].defaultSelected=!0);return}o!==null||a[g].disabled||(o=a[g])}o!==null&&(o.selected=!0)}}function Xr(a,o,c){if(o!=null&&(o=""+Ln(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+Ln(c):""}function ur(a,o,c,f){if(o==null){if(f!=null){if(c!=null)throw Error(r(92));if(te(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),o=c}c=Ln(o),a.defaultValue=c,f=a.textContent,f===c&&f!==""&&f!==null&&(a.value=f)}function ya(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var Ah=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ch(a,o,c){var f=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,c):typeof c!="number"||c===0||Ah.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function Qt(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&c[g]!==f&&Ch(a,g,f)}else for(var b in o)o.hasOwnProperty(b)&&Ch(a,b,o[b])}function un(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ib=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Eh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(a){return Eh.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var pu=null;function Zi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ei=null,ti=null;function mu(a){var o=cn(a);if(o&&(a=o.stateNode)){var c=a[at]||null;e:switch(a=o.stateNode,o.type){case"input":if(Vr(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Gt(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==a&&f.form===a.form){var g=f[at]||null;if(!g)throw Error(r(90));Vr(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)f=c[o],f.form===a.form&&du(f)}break e;case"textarea":Xr(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&ze(a,!!c.multiple,o,!1)}}}var hl=!1;function Oe(a,o,c){if(hl)return a(o,c);hl=!0;try{var f=a(o);return f}finally{if(hl=!1,(ei!==null||ti!==null)&&(tf(),ei&&(o=ei,a=ti,ti=ei=null,mu(o),a)))for(o=0;o<a.length;o++)mu(a[o])}}function Ie(a,o){var c=a.stateNode;if(c===null)return null;var f=c[at]||null;if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lr=!1;if(Zt)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){Lr=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{Lr=!1}var bn=null,ri=null,Ji=null;function pl(){if(Ji)return Ji;var a,o=ri,c=o.length,f,g="value"in bn?bn.value:bn.textContent,b=g.length;for(a=0;a<c&&o[a]===g[a];a++);var w=c-a;for(f=1;f<=w&&o[c-f]===g[b-f];f++);return Ji=g.slice(a,1<f?1-f:void 0)}function eo(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Zo(){return!0}function Wr(){return!1}function Qe(a){function o(c,f,g,b,w){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var T in a)a.hasOwnProperty(T)&&(c=a[T],this[T]=c?c(b):b[T]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Zo:Wr,this.isPropagationStopped=Wr,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),o}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},to=Qe(xn),no=p({},xn,{view:0,detail:0}),gu=Qe(no),ml,gl,ro,Jo=p({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ro&&(ro&&a.type==="mousemove"?(ml=a.screenX-ro.screenX,gl=a.screenY-ro.screenY):gl=ml=0,ro=a),ml)},movementY:function(a){return"movementY"in a?a.movementY:gl}}),yu=Qe(Jo),Ph=p({},Jo,{dataTransfer:0}),wh=Qe(Ph),Oh=p({},no,{relatedTarget:0}),yl=Qe(Oh),_h=p({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Th=Qe(_h),vu=p({},xn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Dh=Qe(vu),jh=p({},xn,{data:0}),bu=Qe(jh),Nh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mh(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=xu[a])?!!o[a]:!1}function vl(){return Mh}var Rh=p({},no,{key:function(a){if(a.key){var o=Nh[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=eo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?kh[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(a){return a.type==="keypress"?eo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?eo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ih=Qe(Rh),Lh=p({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V=Qe(Lh),Q=p({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),ge=Qe(Q),ue=p({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Se=Qe(ue),Me=p({},Jo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Re=Qe(Me),Ke=p({},xn,{newState:0,oldState:0}),Ht=Qe(Ke),fn=[9,13,27,32],Mt=Zt&&"CompositionEvent"in window,Ct=null;Zt&&"documentMode"in document&&(Ct=document.documentMode);var Kn=Zt&&"TextEvent"in window&&!Ct,Sn=Zt&&(!Mt||Ct&&8<Ct&&11>=Ct),es=" ",ai=!1;function va(a,o){switch(a){case"keyup":return fn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Su(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ba=!1;function ao(a,o){switch(a){case"compositionend":return Su(o);case"keypress":return o.which!==32?null:(ai=!0,es);case"textInput":return a=o.data,a===es&&ai?null:a;default:return null}}function $h(a,o){if(ba)return a==="compositionend"||!Mt&&va(a,o)?(a=pl(),Ji=ri=bn=null,ba=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Sn&&o.locale!=="ko"?null:o.data;default:return null}}var bl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!bl[a.type]:o==="textarea"}function Lb(a,o,c,f){ei?ti?ti.push(f):ti=[f]:ei=f,o=lf(o,"onChange"),0<o.length&&(c=new to("onChange","change",null,c,f),a.push({event:c,listeners:o}))}var xl=null,Sl=null;function Aj(a){y1(a,0)}function Au(a){var o=Xi(a);if(du(o))return a}function $b(a,o){if(a==="change")return o}var Bb=!1;if(Zt){var Uh;if(Zt){var zh="oninput"in document;if(!zh){var Ub=document.createElement("div");Ub.setAttribute("oninput","return;"),zh=typeof Ub.oninput=="function"}Uh=zh}else Uh=!1;Bb=Uh&&(!document.documentMode||9<document.documentMode)}function zb(){xl&&(xl.detachEvent("onpropertychange",Gb),Sl=xl=null)}function Gb(a){if(a.propertyName==="value"&&Au(Sl)){var o=[];Lb(o,Sl,a,Zi(a)),Oe(Aj,o)}}function Cj(a,o,c){a==="focusin"?(zb(),xl=o,Sl=c,xl.attachEvent("onpropertychange",Gb)):a==="focusout"&&zb()}function Ej(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Au(Sl)}function Pj(a,o){if(a==="click")return Au(o)}function wj(a,o){if(a==="input"||a==="change")return Au(o)}function Oj(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Vn=typeof Object.is=="function"?Object.is:Oj;function Al(a,o){if(Vn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!de.call(o,g)||!Vn(a[g],o[g]))return!1}return!0}function Hb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function qb(a,o){var c=Hb(a);a=0;for(var f;c;){if(c.nodeType===3){if(f=a+c.textContent.length,a<=o&&f>=o)return{node:c,offset:o-a};a=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Hb(c)}}function Yb(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Yb(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Fb(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=ga(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=ga(a.document)}return o}function Gh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var _j=Zt&&"documentMode"in document&&11>=document.documentMode,ts=null,Hh=null,Cl=null,qh=!1;function Kb(a,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;qh||ts==null||ts!==ga(f)||(f=ts,"selectionStart"in f&&Gh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Cl&&Al(Cl,f)||(Cl=f,f=lf(Hh,"onSelect"),0<f.length&&(o=new to("onSelect","select",null,o,c),a.push({event:o,listeners:f}),o.target=ts)))}function io(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var ns={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionrun:io("Transition","TransitionRun"),transitionstart:io("Transition","TransitionStart"),transitioncancel:io("Transition","TransitionCancel"),transitionend:io("Transition","TransitionEnd")},Yh={},Vb={};Zt&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function oo(a){if(Yh[a])return Yh[a];if(!ns[a])return a;var o=ns[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in Vb)return Yh[a]=o[c];return a}var Xb=oo("animationend"),Wb=oo("animationiteration"),Qb=oo("animationstart"),Tj=oo("transitionrun"),Dj=oo("transitionstart"),jj=oo("transitioncancel"),Zb=oo("transitionend"),Jb=new Map,Fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fh.push("scrollEnd");function $r(a,o){Jb.set(a,o),Kr(o,[a])}var ex=new WeakMap;function fr(a,o){if(typeof a=="object"&&a!==null){var c=ex.get(a);return c!==void 0?c:(o={value:a,source:o,stack:xh(o)},ex.set(a,o),o)}return{value:a,source:o,stack:xh(o)}}var dr=[],rs=0,Kh=0;function Cu(){for(var a=rs,o=Kh=rs=0;o<a;){var c=dr[o];dr[o++]=null;var f=dr[o];dr[o++]=null;var g=dr[o];dr[o++]=null;var b=dr[o];if(dr[o++]=null,f!==null&&g!==null){var w=f.pending;w===null?g.next=g:(g.next=w.next,w.next=g),f.pending=g}b!==0&&tx(c,g,b)}}function Eu(a,o,c,f){dr[rs++]=a,dr[rs++]=o,dr[rs++]=c,dr[rs++]=f,Kh|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function Vh(a,o,c,f){return Eu(a,o,c,f),Pu(a)}function as(a,o){return Eu(a,null,null,o),Pu(a)}function tx(a,o,c){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c);for(var g=!1,b=a.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(g=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,g&&o!==null&&(g=31-zt(c),a=b.hiddenUpdates,f=a[g],f===null?a[g]=[o]:f.push(o),o.lane=c|536870912),b):null}function Pu(a){if(50<Vl)throw Vl=0,em=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var is={};function Nj(a,o,c,f){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(a,o,c,f){return new Nj(a,o,c,f)}function Xh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function xa(a,o){var c=a.alternate;return c===null?(c=Xn(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function nx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function wu(a,o,c,f,g,b){var w=0;if(f=a,typeof a=="function")Xh(a)&&(w=1);else if(typeof a=="string")w=MN(a,c,ye.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=Xn(31,c,o,g),a.elementType=B,a.lanes=b,a;case S:return so(c.children,g,b,o);case A:w=8,g|=24;break;case E:return a=Xn(12,c,o,g|2),a.elementType=E,a.lanes=b,a;case j:return a=Xn(13,c,o,g),a.elementType=j,a.lanes=b,a;case D:return a=Xn(19,c,o,g),a.elementType=D,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case P:case _:w=10;break e;case O:w=9;break e;case N:w=11;break e;case R:w=14;break e;case k:w=16,f=null;break e}w=29,c=Error(r(130,a===null?"null":typeof a,"")),f=null}return o=Xn(w,c,o,g),o.elementType=a,o.type=f,o.lanes=b,o}function so(a,o,c,f){return a=Xn(7,a,f,o),a.lanes=c,a}function Wh(a,o,c){return a=Xn(6,a,null,o),a.lanes=c,a}function Qh(a,o,c){return o=Xn(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var os=[],ss=0,Ou=null,_u=0,hr=[],pr=0,lo=null,Sa=1,Aa="";function co(a,o){os[ss++]=_u,os[ss++]=Ou,Ou=a,_u=o}function rx(a,o,c){hr[pr++]=Sa,hr[pr++]=Aa,hr[pr++]=lo,lo=a;var f=Sa;a=Aa;var g=32-zt(f)-1;f&=~(1<<g),c+=1;var b=32-zt(o)+g;if(30<b){var w=g-g%5;b=(f&(1<<w)-1).toString(32),f>>=w,g-=w,Sa=1<<32-zt(o)+g|c<<g|f,Aa=b+a}else Sa=1<<b|c<<g|f,Aa=a}function Zh(a){a.return!==null&&(co(a,1),rx(a,1,0))}function Jh(a){for(;a===Ou;)Ou=os[--ss],os[ss]=null,_u=os[--ss],os[ss]=null;for(;a===lo;)lo=hr[--pr],hr[pr]=null,Aa=hr[--pr],hr[pr]=null,Sa=hr[--pr],hr[pr]=null}var jn=null,wt=null,Ze=!1,uo=null,Qr=!1,ep=Error(r(519));function fo(a){var o=Error(r(418,""));throw wl(fr(o,a)),ep}function ax(a){var o=a.stateNode,c=a.type,f=a.memoizedProps;switch(o[At]=a,o[at]=f,c){case"dialog":He("cancel",o),He("close",o);break;case"iframe":case"object":case"embed":He("load",o);break;case"video":case"audio":for(c=0;c<Wl.length;c++)He(Wl[c],o);break;case"source":He("error",o);break;case"img":case"image":case"link":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"input":He("invalid",o),hu(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),dl(o);break;case"select":He("invalid",o);break;case"textarea":He("invalid",o),ur(o,f.value,f.defaultValue,f.children),dl(o)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||f.suppressHydrationWarning===!0||S1(o.textContent,c)?(f.popover!=null&&(He("beforetoggle",o),He("toggle",o)),f.onScroll!=null&&He("scroll",o),f.onScrollEnd!=null&&He("scrollend",o),f.onClick!=null&&(o.onclick=cf),o=!0):o=!1,o||fo(a)}function ix(a){for(jn=a.return;jn;)switch(jn.tag){case 5:case 13:Qr=!1;return;case 27:case 3:Qr=!0;return;default:jn=jn.return}}function El(a){if(a!==jn)return!1;if(!Ze)return ix(a),Ze=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||gm(a.type,a.memoizedProps)),c=!c),c&&wt&&fo(a),ix(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){wt=Ur(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}wt=null}}else o===27?(o=wt,xi(a.type)?(a=xm,xm=null,wt=a):wt=o):wt=jn?Ur(a.stateNode.nextSibling):null;return!0}function Pl(){wt=jn=null,Ze=!1}function ox(){var a=uo;return a!==null&&(Un===null?Un=a:Un.push.apply(Un,a),uo=null),a}function wl(a){uo===null?uo=[a]:uo.push(a)}var tp=K(null),ho=null,Ca=null;function ii(a,o,c){oe(tp,o._currentValue),o._currentValue=c}function Ea(a){a._currentValue=tp.current,Y(tp)}function np(a,o,c){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===c)break;a=a.return}}function rp(a,o,c,f){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var b=g.dependencies;if(b!==null){var w=g.child;b=b.firstContext;e:for(;b!==null;){var T=b;b=g;for(var M=0;M<o.length;M++)if(T.context===o[M]){b.lanes|=c,T=b.alternate,T!==null&&(T.lanes|=c),np(b.return,c,a),f||(w=null);break e}b=T.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(r(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),np(w,c,a),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===a){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function Ol(a,o,c,f){a=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var T=g.type;Vn(g.pendingProps.value,w.value)||(a!==null?a.push(T):a=[T])}}else if(g===be.current){if(w=g.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(nc):a=[nc])}g=g.return}a!==null&&rp(o,a,c,f),o.flags|=262144}function Tu(a){for(a=a.firstContext;a!==null;){if(!Vn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function po(a){ho=a,Ca=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function An(a){return sx(ho,a)}function Du(a,o){return ho===null&&po(a),sx(a,o)}function sx(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ca===null){if(a===null)throw Error(r(308));Ca=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Ca=Ca.next=o;return c}var kj=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},Mj=e.unstable_scheduleCallback,Rj=e.unstable_NormalPriority,qt={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ap(){return{controller:new kj,data:new Map,refCount:0}}function _l(a){a.refCount--,a.refCount===0&&Mj(Rj,function(){a.controller.abort()})}var Tl=null,ip=0,ls=0,cs=null;function Ij(a,o){if(Tl===null){var c=Tl=[];ip=0,ls=sm(),cs={status:"pending",value:void 0,then:function(f){c.push(f)}}}return ip++,o.then(lx,lx),o}function lx(){if(--ip===0&&Tl!==null){cs!==null&&(cs.status="fulfilled");var a=Tl;Tl=null,ls=0,cs=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function Lj(a,o){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var cx=$.S;$.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Ij(a,o),cx!==null&&cx(a,o)};var mo=K(null);function op(){var a=mo.current;return a!==null?a:ft.pooledCache}function ju(a,o){o===null?oe(mo,mo.current):oe(mo,o.pool)}function ux(){var a=op();return a===null?null:{parent:qt._currentValue,pool:a}}var Dl=Error(r(460)),fx=Error(r(474)),Nu=Error(r(542)),sp={then:function(){}};function dx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ku(){}function hx(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(ku,ku),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,mx(a),a;default:if(typeof o.status=="string")o.then(ku,ku);else{if(a=ft,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,mx(a),a}throw jl=o,Dl}}var jl=null;function px(){if(jl===null)throw Error(r(459));var a=jl;return jl=null,a}function mx(a){if(a===Dl||a===Nu)throw Error(r(483))}var oi=!1;function lp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cp(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function si(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function li(a,o,c){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(et&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=Pu(a),tx(a,null,c),o}return Eu(a,f,o,c),Pu(a)}function Nl(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,c|=f,o.lanes=c,Yn(a,c)}}function up(a,o){var c=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?g=b=o:b=b.next=o}else g=b=o;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var fp=!1;function kl(){if(fp){var a=cs;if(a!==null)throw a}}function Ml(a,o,c,f){fp=!1;var g=a.updateQueue;oi=!1;var b=g.firstBaseUpdate,w=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var M=T,H=M.next;M.next=null,w===null?b=H:w.next=H,w=M;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==w&&(T===null?ne.firstBaseUpdate=H:T.next=H,ne.lastBaseUpdate=M))}if(b!==null){var se=g.baseState;w=0,ne=H=M=null,T=b;do{var F=T.lane&-536870913,X=F!==T.lane;if(X?(Ye&F)===F:(f&F)===F){F!==0&&F===ls&&(fp=!0),ne!==null&&(ne=ne.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ke=a,je=T;F=o;var st=c;switch(je.tag){case 1:if(ke=je.payload,typeof ke=="function"){se=ke.call(st,se,F);break e}se=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=je.payload,F=typeof ke=="function"?ke.call(st,se,F):ke,F==null)break e;se=p({},se,F);break e;case 2:oi=!0}}F=T.callback,F!==null&&(a.flags|=64,X&&(a.flags|=8192),X=g.callbacks,X===null?g.callbacks=[F]:X.push(F))}else X={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(H=ne=X,M=se):ne=ne.next=X,w|=F;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;X=T,T=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);ne===null&&(M=se),g.baseState=M,g.firstBaseUpdate=H,g.lastBaseUpdate=ne,b===null&&(g.shared.lanes=0),gi|=w,a.lanes=w,a.memoizedState=se}}function gx(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function yx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)gx(c[a],o)}var us=K(null),Mu=K(0);function vx(a,o){a=ja,oe(Mu,a),oe(us,o),ja=a|o.baseLanes}function dp(){oe(Mu,ja),oe(us,us.current)}function hp(){ja=Mu.current,Y(us),Y(Mu)}var ci=0,$e=null,it=null,Rt=null,Ru=!1,fs=!1,go=!1,Iu=0,Rl=0,ds=null,$j=0;function _t(){throw Error(r(321))}function pp(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!Vn(a[c],o[c]))return!1;return!0}function mp(a,o,c,f,g,b){return ci=b,$e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=a===null||a.memoizedState===null?tS:nS,go=!1,b=c(f,g),go=!1,fs&&(b=xx(o,c,f,g)),bx(a),b}function bx(a){$.H=Gu;var o=it!==null&&it.next!==null;if(ci=0,Rt=it=$e=null,Ru=!1,Rl=0,ds=null,o)throw Error(r(300));a===null||Jt||(a=a.dependencies,a!==null&&Tu(a)&&(Jt=!0))}function xx(a,o,c,f){$e=a;var g=0;do{if(fs&&(ds=null),Rl=0,fs=!1,25<=g)throw Error(r(301));if(g+=1,Rt=it=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=Yj,b=o(c,f)}while(fs);return b}function Bj(){var a=$.H,o=a.useState()[0];return o=typeof o.then=="function"?Il(o):o,a=a.useState()[0],(it!==null?it.memoizedState:null)!==a&&($e.flags|=1024),o}function gp(){var a=Iu!==0;return Iu=0,a}function yp(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function vp(a){if(Ru){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ru=!1}ci=0,Rt=it=$e=null,fs=!1,Rl=Iu=0,ds=null}function $n(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?$e.memoizedState=Rt=a:Rt=Rt.next=a,Rt}function It(){if(it===null){var a=$e.alternate;a=a!==null?a.memoizedState:null}else a=it.next;var o=Rt===null?$e.memoizedState:Rt.next;if(o!==null)Rt=o,it=a;else{if(a===null)throw $e.alternate===null?Error(r(467)):Error(r(310));it=a,a={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Rt===null?$e.memoizedState=Rt=a:Rt=Rt.next=a}return Rt}function bp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(a){var o=Rl;return Rl+=1,ds===null&&(ds=[]),a=hx(ds,a,o),o=$e,(Rt===null?o.memoizedState:Rt.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?tS:nS),a}function Lu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Il(a);if(a.$$typeof===_)return An(a)}throw Error(r(438,String(a)))}function xp(a){var o=null,c=$e.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var f=$e.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=bp(),$e.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),f=0;f<a;f++)c[f]=J;return o.index++,c}function Pa(a,o){return typeof o=="function"?o(a):o}function $u(a){var o=It();return Sp(o,it,a)}function Sp(a,o,c){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=a.baseQueue,b=f.pending;if(b!==null){if(g!==null){var w=g.next;g.next=b.next,b.next=w}o.baseQueue=g=b,f.pending=null}if(b=a.baseState,g===null)a.memoizedState=b;else{o=g.next;var T=w=null,M=null,H=o,ne=!1;do{var se=H.lane&-536870913;if(se!==H.lane?(Ye&se)===se:(ci&se)===se){var F=H.revertLane;if(F===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),se===ls&&(ne=!0);else if((ci&F)===F){H=H.next,F===ls&&(ne=!0);continue}else se={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},M===null?(T=M=se,w=b):M=M.next=se,$e.lanes|=F,gi|=F;se=H.action,go&&c(b,se),b=H.hasEagerState?H.eagerState:c(b,se)}else F={lane:se,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},M===null?(T=M=F,w=b):M=M.next=F,$e.lanes|=se,gi|=se;H=H.next}while(H!==null&&H!==o);if(M===null?w=b:M.next=T,!Vn(b,a.memoizedState)&&(Jt=!0,ne&&(c=cs,c!==null)))throw c;a.memoizedState=b,a.baseState=w,a.baseQueue=M,f.lastRenderedState=b}return g===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function Ap(a){var o=It(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=c.dispatch,g=c.pending,b=o.memoizedState;if(g!==null){c.pending=null;var w=g=g.next;do b=a(b,w.action),w=w.next;while(w!==g);Vn(b,o.memoizedState)||(Jt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,f]}function Sx(a,o,c){var f=$e,g=It(),b=Ze;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!Vn((it||g).memoizedState,c);w&&(g.memoizedState=c,Jt=!0),g=g.queue;var T=Ex.bind(null,f,g,a);if(Ll(2048,8,T,[a]),g.getSnapshot!==o||w||Rt!==null&&Rt.memoizedState.tag&1){if(f.flags|=2048,hs(9,Bu(),Cx.bind(null,f,g,c,o),null),ft===null)throw Error(r(349));b||(ci&124)!==0||Ax(f,o,c)}return c}function Ax(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=$e.updateQueue,o===null?(o=bp(),$e.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function Cx(a,o,c,f){o.value=c,o.getSnapshot=f,Px(o)&&wx(a)}function Ex(a,o,c){return c(function(){Px(o)&&wx(a)})}function Px(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!Vn(a,c)}catch{return!0}}function wx(a){var o=as(a,2);o!==null&&er(o,a,2)}function Cp(a){var o=$n();if(typeof a=="function"){var c=a;if(a=c(),go){jr(!0);try{c()}finally{jr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:a},o}function Ox(a,o,c,f){return a.baseState=c,Sp(a,it,typeof f=="function"?f:Pa)}function Uj(a,o,c,f,g){if(zu(a))throw Error(r(485));if(a=o.action,a!==null){var b={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};$.T!==null?c(!0):b.isTransition=!1,f(b),c=o.pending,c===null?(b.next=o.pending=b,_x(o,b)):(b.next=c.next,o.pending=c.next=b)}}function _x(a,o){var c=o.action,f=o.payload,g=a.state;if(o.isTransition){var b=$.T,w={};$.T=w;try{var T=c(g,f),M=$.S;M!==null&&M(w,T),Tx(a,o,T)}catch(H){Ep(a,o,H)}finally{$.T=b}}else try{b=c(g,f),Tx(a,o,b)}catch(H){Ep(a,o,H)}}function Tx(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Dx(a,o,f)},function(f){return Ep(a,o,f)}):Dx(a,o,c)}function Dx(a,o,c){o.status="fulfilled",o.value=c,jx(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,_x(a,c)))}function Ep(a,o,c){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=c,jx(o),o=o.next;while(o!==f)}a.action=null}function jx(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Nx(a,o){return o}function kx(a,o){if(Ze){var c=ft.formState;if(c!==null){e:{var f=$e;if(Ze){if(wt){t:{for(var g=wt,b=Qr;g.nodeType!==8;){if(!b){g=null;break t}if(g=Ur(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){wt=Ur(g.nextSibling),f=g.data==="F!";break e}}fo(f)}f=!1}f&&(o=c[0])}}return c=$n(),c.memoizedState=c.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nx,lastRenderedState:o},c.queue=f,c=Zx.bind(null,$e,f),f.dispatch=c,f=Cp(!1),b=Tp.bind(null,$e,!1,f.queue),f=$n(),g={state:o,dispatch:null,action:a,pending:null},f.queue=g,c=Uj.bind(null,$e,g,b,c),g.dispatch=c,f.memoizedState=a,[o,c,!1]}function Mx(a){var o=It();return Rx(o,it,a)}function Rx(a,o,c){if(o=Sp(a,o,Nx)[0],a=$u(Pa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Il(o)}catch(w){throw w===Dl?Nu:w}else f=o;o=It();var g=o.queue,b=g.dispatch;return c!==o.memoizedState&&($e.flags|=2048,hs(9,Bu(),zj.bind(null,g,c),null)),[f,b,a]}function zj(a,o){a.action=o}function Ix(a){var o=It(),c=it;if(c!==null)return Rx(o,c,a);It(),o=o.memoizedState,c=It();var f=c.queue.dispatch;return c.memoizedState=a,[o,f,!1]}function hs(a,o,c,f){return a={tag:a,create:c,deps:f,inst:o,next:null},o=$e.updateQueue,o===null&&(o=bp(),$e.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(f=c.next,c.next=a,a.next=f,o.lastEffect=a),a}function Bu(){return{destroy:void 0,resource:void 0}}function Lx(){return It().memoizedState}function Uu(a,o,c,f){var g=$n();f=f===void 0?null:f,$e.flags|=a,g.memoizedState=hs(1|o,Bu(),c,f)}function Ll(a,o,c,f){var g=It();f=f===void 0?null:f;var b=g.memoizedState.inst;it!==null&&f!==null&&pp(f,it.memoizedState.deps)?g.memoizedState=hs(o,b,c,f):($e.flags|=a,g.memoizedState=hs(1|o,b,c,f))}function $x(a,o){Uu(8390656,8,a,o)}function Bx(a,o){Ll(2048,8,a,o)}function Ux(a,o){return Ll(4,2,a,o)}function zx(a,o){return Ll(4,4,a,o)}function Gx(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Hx(a,o,c){c=c!=null?c.concat([a]):null,Ll(4,4,Gx.bind(null,o,a),c)}function Pp(){}function qx(a,o){var c=It();o=o===void 0?null:o;var f=c.memoizedState;return o!==null&&pp(o,f[1])?f[0]:(c.memoizedState=[a,o],a)}function Yx(a,o){var c=It();o=o===void 0?null:o;var f=c.memoizedState;if(o!==null&&pp(o,f[1]))return f[0];if(f=a(),go){jr(!0);try{a()}finally{jr(!1)}}return c.memoizedState=[f,o],f}function wp(a,o,c){return c===void 0||(ci&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=VS(),$e.lanes|=a,gi|=a,c)}function Fx(a,o,c,f){return Vn(c,o)?c:us.current!==null?(a=wp(a,c,f),Vn(a,o)||(Jt=!0),a):(ci&42)===0?(Jt=!0,a.memoizedState=c):(a=VS(),$e.lanes|=a,gi|=a,o)}function Kx(a,o,c,f,g){var b=ee.p;ee.p=b!==0&&8>b?b:8;var w=$.T,T={};$.T=T,Tp(a,!1,o,c);try{var M=g(),H=$.S;if(H!==null&&H(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=Lj(M,f);$l(a,o,ne,Jn(a))}else $l(a,o,f,Jn(a))}catch(se){$l(a,o,{then:function(){},status:"rejected",reason:se},Jn())}finally{ee.p=b,$.T=w}}function Gj(){}function Op(a,o,c,f){if(a.tag!==5)throw Error(r(476));var g=Vx(a).queue;Kx(a,g,o,he,c===null?Gj:function(){return Xx(a),c(f)})}function Vx(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:he},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function Xx(a){var o=Vx(a).next.queue;$l(a,o,{},Jn())}function _p(){return An(nc)}function Wx(){return It().memoizedState}function Qx(){return It().memoizedState}function Hj(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=Jn();a=si(c);var f=li(o,a,c);f!==null&&(er(f,o,c),Nl(f,o,c)),o={cache:ap()},a.payload=o;return}o=o.return}}function qj(a,o,c){var f=Jn();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},zu(a)?Jx(o,c):(c=Vh(a,o,c,f),c!==null&&(er(c,a,f),eS(c,o,f)))}function Zx(a,o,c){var f=Jn();$l(a,o,c,f)}function $l(a,o,c,f){var g={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(zu(a))Jx(o,g);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var w=o.lastRenderedState,T=b(w,c);if(g.hasEagerState=!0,g.eagerState=T,Vn(T,w))return Eu(a,o,g,0),ft===null&&Cu(),!1}catch{}finally{}if(c=Vh(a,o,g,f),c!==null)return er(c,a,f),eS(c,o,f),!0}return!1}function Tp(a,o,c,f){if(f={lane:2,revertLane:sm(),action:f,hasEagerState:!1,eagerState:null,next:null},zu(a)){if(o)throw Error(r(479))}else o=Vh(a,c,f,2),o!==null&&er(o,a,2)}function zu(a){var o=a.alternate;return a===$e||o!==null&&o===$e}function Jx(a,o){fs=Ru=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function eS(a,o,c){if((c&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,c|=f,o.lanes=c,Yn(a,c)}}var Gu={readContext:An,use:Lu,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},tS={readContext:An,use:Lu,useCallback:function(a,o){return $n().memoizedState=[a,o===void 0?null:o],a},useContext:An,useEffect:$x,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Uu(4194308,4,Gx.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Uu(4194308,4,a,o)},useInsertionEffect:function(a,o){Uu(4,2,a,o)},useMemo:function(a,o){var c=$n();o=o===void 0?null:o;var f=a();if(go){jr(!0);try{a()}finally{jr(!1)}}return c.memoizedState=[f,o],f},useReducer:function(a,o,c){var f=$n();if(c!==void 0){var g=c(o);if(go){jr(!0);try{c(o)}finally{jr(!1)}}}else g=o;return f.memoizedState=f.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},f.queue=a,a=a.dispatch=qj.bind(null,$e,a),[f.memoizedState,a]},useRef:function(a){var o=$n();return a={current:a},o.memoizedState=a},useState:function(a){a=Cp(a);var o=a.queue,c=Zx.bind(null,$e,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:Pp,useDeferredValue:function(a,o){var c=$n();return wp(c,a,o)},useTransition:function(){var a=Cp(!1);return a=Kx.bind(null,$e,a.queue,!0,!1),$n().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var f=$e,g=$n();if(Ze){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),ft===null)throw Error(r(349));(Ye&124)!==0||Ax(f,o,c)}g.memoizedState=c;var b={value:c,getSnapshot:o};return g.queue=b,$x(Ex.bind(null,f,b,a),[a]),f.flags|=2048,hs(9,Bu(),Cx.bind(null,f,b,c,o),null),c},useId:function(){var a=$n(),o=ft.identifierPrefix;if(Ze){var c=Aa,f=Sa;c=(f&~(1<<32-zt(f)-1)).toString(32)+c,o="«"+o+"R"+c,c=Iu++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=$j++,o="«"+o+"r"+c.toString(32)+"»";return a.memoizedState=o},useHostTransitionStatus:_p,useFormState:kx,useActionState:kx,useOptimistic:function(a){var o=$n();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Tp.bind(null,$e,!0,c),c.dispatch=o,[a,o]},useMemoCache:xp,useCacheRefresh:function(){return $n().memoizedState=Hj.bind(null,$e)}},nS={readContext:An,use:Lu,useCallback:qx,useContext:An,useEffect:Bx,useImperativeHandle:Hx,useInsertionEffect:Ux,useLayoutEffect:zx,useMemo:Yx,useReducer:$u,useRef:Lx,useState:function(){return $u(Pa)},useDebugValue:Pp,useDeferredValue:function(a,o){var c=It();return Fx(c,it.memoizedState,a,o)},useTransition:function(){var a=$u(Pa)[0],o=It().memoizedState;return[typeof a=="boolean"?a:Il(a),o]},useSyncExternalStore:Sx,useId:Wx,useHostTransitionStatus:_p,useFormState:Mx,useActionState:Mx,useOptimistic:function(a,o){var c=It();return Ox(c,it,a,o)},useMemoCache:xp,useCacheRefresh:Qx},Yj={readContext:An,use:Lu,useCallback:qx,useContext:An,useEffect:Bx,useImperativeHandle:Hx,useInsertionEffect:Ux,useLayoutEffect:zx,useMemo:Yx,useReducer:Ap,useRef:Lx,useState:function(){return Ap(Pa)},useDebugValue:Pp,useDeferredValue:function(a,o){var c=It();return it===null?wp(c,a,o):Fx(c,it.memoizedState,a,o)},useTransition:function(){var a=Ap(Pa)[0],o=It().memoizedState;return[typeof a=="boolean"?a:Il(a),o]},useSyncExternalStore:Sx,useId:Wx,useHostTransitionStatus:_p,useFormState:Ix,useActionState:Ix,useOptimistic:function(a,o){var c=It();return it!==null?Ox(c,it,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:xp,useCacheRefresh:Qx},ps=null,Bl=0;function Hu(a){var o=Bl;return Bl+=1,ps===null&&(ps=[]),hx(ps,a,o)}function Ul(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function qu(a,o){throw o.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function rS(a){var o=a._init;return o(a._payload)}function aS(a){function o(U,L){if(a){var G=U.deletions;G===null?(U.deletions=[L],U.flags|=16):G.push(L)}}function c(U,L){if(!a)return null;for(;L!==null;)o(U,L),L=L.sibling;return null}function f(U){for(var L=new Map;U!==null;)U.key!==null?L.set(U.key,U):L.set(U.index,U),U=U.sibling;return L}function g(U,L){return U=xa(U,L),U.index=0,U.sibling=null,U}function b(U,L,G){return U.index=G,a?(G=U.alternate,G!==null?(G=G.index,G<L?(U.flags|=67108866,L):G):(U.flags|=67108866,L)):(U.flags|=1048576,L)}function w(U){return a&&U.alternate===null&&(U.flags|=67108866),U}function T(U,L,G,ie){return L===null||L.tag!==6?(L=Wh(G,U.mode,ie),L.return=U,L):(L=g(L,G),L.return=U,L)}function M(U,L,G,ie){var Ee=G.type;return Ee===S?ne(U,L,G.props.children,ie,G.key):L!==null&&(L.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===k&&rS(Ee)===L.type)?(L=g(L,G.props),Ul(L,G),L.return=U,L):(L=wu(G.type,G.key,G.props,null,U.mode,ie),Ul(L,G),L.return=U,L)}function H(U,L,G,ie){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=Qh(G,U.mode,ie),L.return=U,L):(L=g(L,G.children||[]),L.return=U,L)}function ne(U,L,G,ie,Ee){return L===null||L.tag!==7?(L=so(G,U.mode,ie,Ee),L.return=U,L):(L=g(L,G),L.return=U,L)}function se(U,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Wh(""+L,U.mode,G),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case y:return G=wu(L.type,L.key,L.props,null,U.mode,G),Ul(G,L),G.return=U,G;case x:return L=Qh(L,U.mode,G),L.return=U,L;case k:var ie=L._init;return L=ie(L._payload),se(U,L,G)}if(te(L)||Z(L))return L=so(L,U.mode,G,null),L.return=U,L;if(typeof L.then=="function")return se(U,Hu(L),G);if(L.$$typeof===_)return se(U,Du(U,L),G);qu(U,L)}return null}function F(U,L,G,ie){var Ee=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ee!==null?null:T(U,L,""+G,ie);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return G.key===Ee?M(U,L,G,ie):null;case x:return G.key===Ee?H(U,L,G,ie):null;case k:return Ee=G._init,G=Ee(G._payload),F(U,L,G,ie)}if(te(G)||Z(G))return Ee!==null?null:ne(U,L,G,ie,null);if(typeof G.then=="function")return F(U,L,Hu(G),ie);if(G.$$typeof===_)return F(U,L,Du(U,G),ie);qu(U,G)}return null}function X(U,L,G,ie,Ee){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return U=U.get(G)||null,T(L,U,""+ie,Ee);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return U=U.get(ie.key===null?G:ie.key)||null,M(L,U,ie,Ee);case x:return U=U.get(ie.key===null?G:ie.key)||null,H(L,U,ie,Ee);case k:var Ue=ie._init;return ie=Ue(ie._payload),X(U,L,G,ie,Ee)}if(te(ie)||Z(ie))return U=U.get(G)||null,ne(L,U,ie,Ee,null);if(typeof ie.then=="function")return X(U,L,G,Hu(ie),Ee);if(ie.$$typeof===_)return X(U,L,G,Du(L,ie),Ee);qu(L,ie)}return null}function ke(U,L,G,ie){for(var Ee=null,Ue=null,_e=L,Ne=L=0,tn=null;_e!==null&&Ne<G.length;Ne++){_e.index>Ne?(tn=_e,_e=null):tn=_e.sibling;var Ve=F(U,_e,G[Ne],ie);if(Ve===null){_e===null&&(_e=tn);break}a&&_e&&Ve.alternate===null&&o(U,_e),L=b(Ve,L,Ne),Ue===null?Ee=Ve:Ue.sibling=Ve,Ue=Ve,_e=tn}if(Ne===G.length)return c(U,_e),Ze&&co(U,Ne),Ee;if(_e===null){for(;Ne<G.length;Ne++)_e=se(U,G[Ne],ie),_e!==null&&(L=b(_e,L,Ne),Ue===null?Ee=_e:Ue.sibling=_e,Ue=_e);return Ze&&co(U,Ne),Ee}for(_e=f(_e);Ne<G.length;Ne++)tn=X(_e,U,Ne,G[Ne],ie),tn!==null&&(a&&tn.alternate!==null&&_e.delete(tn.key===null?Ne:tn.key),L=b(tn,L,Ne),Ue===null?Ee=tn:Ue.sibling=tn,Ue=tn);return a&&_e.forEach(function(Pi){return o(U,Pi)}),Ze&&co(U,Ne),Ee}function je(U,L,G,ie){if(G==null)throw Error(r(151));for(var Ee=null,Ue=null,_e=L,Ne=L=0,tn=null,Ve=G.next();_e!==null&&!Ve.done;Ne++,Ve=G.next()){_e.index>Ne?(tn=_e,_e=null):tn=_e.sibling;var Pi=F(U,_e,Ve.value,ie);if(Pi===null){_e===null&&(_e=tn);break}a&&_e&&Pi.alternate===null&&o(U,_e),L=b(Pi,L,Ne),Ue===null?Ee=Pi:Ue.sibling=Pi,Ue=Pi,_e=tn}if(Ve.done)return c(U,_e),Ze&&co(U,Ne),Ee;if(_e===null){for(;!Ve.done;Ne++,Ve=G.next())Ve=se(U,Ve.value,ie),Ve!==null&&(L=b(Ve,L,Ne),Ue===null?Ee=Ve:Ue.sibling=Ve,Ue=Ve);return Ze&&co(U,Ne),Ee}for(_e=f(_e);!Ve.done;Ne++,Ve=G.next())Ve=X(_e,U,Ne,Ve.value,ie),Ve!==null&&(a&&Ve.alternate!==null&&_e.delete(Ve.key===null?Ne:Ve.key),L=b(Ve,L,Ne),Ue===null?Ee=Ve:Ue.sibling=Ve,Ue=Ve);return a&&_e.forEach(function(FN){return o(U,FN)}),Ze&&co(U,Ne),Ee}function st(U,L,G,ie){if(typeof G=="object"&&G!==null&&G.type===S&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case y:e:{for(var Ee=G.key;L!==null;){if(L.key===Ee){if(Ee=G.type,Ee===S){if(L.tag===7){c(U,L.sibling),ie=g(L,G.props.children),ie.return=U,U=ie;break e}}else if(L.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===k&&rS(Ee)===L.type){c(U,L.sibling),ie=g(L,G.props),Ul(ie,G),ie.return=U,U=ie;break e}c(U,L);break}else o(U,L);L=L.sibling}G.type===S?(ie=so(G.props.children,U.mode,ie,G.key),ie.return=U,U=ie):(ie=wu(G.type,G.key,G.props,null,U.mode,ie),Ul(ie,G),ie.return=U,U=ie)}return w(U);case x:e:{for(Ee=G.key;L!==null;){if(L.key===Ee)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){c(U,L.sibling),ie=g(L,G.children||[]),ie.return=U,U=ie;break e}else{c(U,L);break}else o(U,L);L=L.sibling}ie=Qh(G,U.mode,ie),ie.return=U,U=ie}return w(U);case k:return Ee=G._init,G=Ee(G._payload),st(U,L,G,ie)}if(te(G))return ke(U,L,G,ie);if(Z(G)){if(Ee=Z(G),typeof Ee!="function")throw Error(r(150));return G=Ee.call(G),je(U,L,G,ie)}if(typeof G.then=="function")return st(U,L,Hu(G),ie);if(G.$$typeof===_)return st(U,L,Du(U,G),ie);qu(U,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(c(U,L.sibling),ie=g(L,G),ie.return=U,U=ie):(c(U,L),ie=Wh(G,U.mode,ie),ie.return=U,U=ie),w(U)):c(U,L)}return function(U,L,G,ie){try{Bl=0;var Ee=st(U,L,G,ie);return ps=null,Ee}catch(_e){if(_e===Dl||_e===Nu)throw _e;var Ue=Xn(29,_e,null,U.mode);return Ue.lanes=ie,Ue.return=U,Ue}finally{}}}var ms=aS(!0),iS=aS(!1),mr=K(null),Zr=null;function ui(a){var o=a.alternate;oe(Yt,Yt.current&1),oe(mr,a),Zr===null&&(o===null||us.current!==null||o.memoizedState!==null)&&(Zr=a)}function oS(a){if(a.tag===22){if(oe(Yt,Yt.current),oe(mr,a),Zr===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(Zr=a)}}else fi()}function fi(){oe(Yt,Yt.current),oe(mr,mr.current)}function wa(a){Y(mr),Zr===a&&(Zr=null),Y(Yt)}var Yt=K(0);function Yu(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||bm(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Dp(a,o,c,f){o=a.memoizedState,c=c(f,o),c=c==null?o:p({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var jp={enqueueSetState:function(a,o,c){a=a._reactInternals;var f=Jn(),g=si(f);g.payload=o,c!=null&&(g.callback=c),o=li(a,g,f),o!==null&&(er(o,a,f),Nl(o,a,f))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var f=Jn(),g=si(f);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=li(a,g,f),o!==null&&(er(o,a,f),Nl(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=Jn(),f=si(c);f.tag=2,o!=null&&(f.callback=o),o=li(a,f,c),o!==null&&(er(o,a,c),Nl(o,a,c))}};function sS(a,o,c,f,g,b,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,b,w):o.prototype&&o.prototype.isPureReactComponent?!Al(c,f)||!Al(g,b):!0}function lS(a,o,c,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==a&&jp.enqueueReplaceState(o,o.state,null)}function yo(a,o){var c=o;if("ref"in o){c={};for(var f in o)f!=="ref"&&(c[f]=o[f])}if(a=a.defaultProps){c===o&&(c=p({},c));for(var g in a)c[g]===void 0&&(c[g]=a[g])}return c}var Fu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function cS(a){Fu(a)}function uS(a){console.error(a)}function fS(a){Fu(a)}function Ku(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function dS(a,o,c){try{var f=a.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Np(a,o,c){return c=si(c),c.tag=3,c.payload={element:null},c.callback=function(){Ku(a,o)},c}function hS(a){return a=si(a),a.tag=3,a}function pS(a,o,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;a.payload=function(){return g(b)},a.callback=function(){dS(o,c,f)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){dS(o,c,f),typeof g!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var T=f.stack;this.componentDidCatch(f.value,{componentStack:T!==null?T:""})})}function Fj(a,o,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=c.alternate,o!==null&&Ol(o,c,g,!0),c=mr.current,c!==null){switch(c.tag){case 13:return Zr===null?nm():c.alternate===null&&Ot===0&&(Ot=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===sp?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([f]):o.add(f),am(a,f,g)),!1;case 22:return c.flags|=65536,f===sp?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([f]):c.add(f)),am(a,f,g)),!1}throw Error(r(435,c.tag))}return am(a,f,g),nm(),!1}if(Ze)return o=mr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==ep&&(a=Error(r(422),{cause:f}),wl(fr(a,c)))):(f!==ep&&(o=Error(r(423),{cause:f}),wl(fr(o,c))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,f=fr(f,c),g=Np(a.stateNode,f,g),up(a,g),Ot!==4&&(Ot=2)),!1;var b=Error(r(520),{cause:f});if(b=fr(b,c),Kl===null?Kl=[b]:Kl.push(b),Ot!==4&&(Ot=2),o===null)return!0;f=fr(f,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=g&-g,c.lanes|=a,a=Np(c.stateNode,f,a),up(c,a),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(yi===null||!yi.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=hS(g),pS(g,a,c,f),up(c,g),!1}c=c.return}while(c!==null);return!1}var mS=Error(r(461)),Jt=!1;function dn(a,o,c,f){o.child=a===null?iS(o,null,c,f):ms(o,a.child,c,f)}function gS(a,o,c,f,g){c=c.render;var b=o.ref;if("ref"in f){var w={};for(var T in f)T!=="ref"&&(w[T]=f[T])}else w=f;return po(o),f=mp(a,o,c,w,b,g),T=gp(),a!==null&&!Jt?(yp(a,o,g),Oa(a,o,g)):(Ze&&T&&Zh(o),o.flags|=1,dn(a,o,f,g),o.child)}function yS(a,o,c,f,g){if(a===null){var b=c.type;return typeof b=="function"&&!Xh(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,vS(a,o,b,f,g)):(a=wu(c.type,null,f,o,o.mode,g),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!Up(a,g)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:Al,c(w,f)&&a.ref===o.ref)return Oa(a,o,g)}return o.flags|=1,a=xa(b,f),a.ref=o.ref,a.return=o,o.child=a}function vS(a,o,c,f,g){if(a!==null){var b=a.memoizedProps;if(Al(b,f)&&a.ref===o.ref)if(Jt=!1,o.pendingProps=f=b,Up(a,g))(a.flags&131072)!==0&&(Jt=!0);else return o.lanes=a.lanes,Oa(a,o,g)}return kp(a,o,c,f,g)}function bS(a,o,c){var f=o.pendingProps,g=f.children,b=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=b!==null?b.baseLanes|c:c,a!==null){for(g=o.child=a.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;o.childLanes=b&~f}else o.childLanes=0,o.child=null;return xS(a,o,f,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&ju(o,b!==null?b.cachePool:null),b!==null?vx(o,b):dp(),oS(o);else return o.lanes=o.childLanes=536870912,xS(a,o,b!==null?b.baseLanes|c:c,c)}else b!==null?(ju(o,b.cachePool),vx(o,b),fi(),o.memoizedState=null):(a!==null&&ju(o,null),dp(),fi());return dn(a,o,g,c),o.child}function xS(a,o,c,f){var g=op();return g=g===null?null:{parent:qt._currentValue,pool:g},o.memoizedState={baseLanes:c,cachePool:g},a!==null&&ju(o,null),dp(),oS(o),a!==null&&Ol(a,o,f,!0),null}function Vu(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function kp(a,o,c,f,g){return po(o),c=mp(a,o,c,f,void 0,g),f=gp(),a!==null&&!Jt?(yp(a,o,g),Oa(a,o,g)):(Ze&&f&&Zh(o),o.flags|=1,dn(a,o,c,g),o.child)}function SS(a,o,c,f,g,b){return po(o),o.updateQueue=null,c=xx(o,f,c,g),bx(a),f=gp(),a!==null&&!Jt?(yp(a,o,b),Oa(a,o,b)):(Ze&&f&&Zh(o),o.flags|=1,dn(a,o,c,b),o.child)}function AS(a,o,c,f,g){if(po(o),o.stateNode===null){var b=is,w=c.contextType;typeof w=="object"&&w!==null&&(b=An(w)),b=new c(f,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=jp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=f,b.state=o.memoizedState,b.refs={},lp(o),w=c.contextType,b.context=typeof w=="object"&&w!==null?An(w):is,b.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Dp(o,c,w,f),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&jp.enqueueReplaceState(b,b.state,null),Ml(o,f,b,g),kl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){b=o.stateNode;var T=o.memoizedProps,M=yo(c,T);b.props=M;var H=b.context,ne=c.contextType;w=is,typeof ne=="object"&&ne!==null&&(w=An(ne));var se=c.getDerivedStateFromProps;ne=typeof se=="function"||typeof b.getSnapshotBeforeUpdate=="function",T=o.pendingProps!==T,ne||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T||H!==w)&&lS(o,b,f,w),oi=!1;var F=o.memoizedState;b.state=F,Ml(o,f,b,g),kl(),H=o.memoizedState,T||F!==H||oi?(typeof se=="function"&&(Dp(o,c,se,f),H=o.memoizedState),(M=oi||sS(o,c,M,f,F,H,w))?(ne||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=H),b.props=f,b.state=H,b.context=w,f=M):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,cp(a,o),w=o.memoizedProps,ne=yo(c,w),b.props=ne,se=o.pendingProps,F=b.context,H=c.contextType,M=is,typeof H=="object"&&H!==null&&(M=An(H)),T=c.getDerivedStateFromProps,(H=typeof T=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==se||F!==M)&&lS(o,b,f,M),oi=!1,F=o.memoizedState,b.state=F,Ml(o,f,b,g),kl();var X=o.memoizedState;w!==se||F!==X||oi||a!==null&&a.dependencies!==null&&Tu(a.dependencies)?(typeof T=="function"&&(Dp(o,c,T,f),X=o.memoizedState),(ne=oi||sS(o,c,ne,f,F,X,M)||a!==null&&a.dependencies!==null&&Tu(a.dependencies))?(H||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,X,M),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,X,M)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=X),b.props=f,b.state=X,b.context=M,f=ne):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(o.flags|=1024),f=!1)}return b=f,Vu(a,o),f=(o.flags&128)!==0,b||f?(b=o.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&f?(o.child=ms(o,a.child,null,g),o.child=ms(o,null,c,g)):dn(a,o,c,g),o.memoizedState=b.state,a=o.child):a=Oa(a,o,g),a}function CS(a,o,c,f){return Pl(),o.flags|=256,dn(a,o,c,f),o.child}var Mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rp(a){return{baseLanes:a,cachePool:ux()}}function Ip(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=gr),a}function ES(a,o,c){var f=o.pendingProps,g=!1,b=(o.flags&128)!==0,w;if((w=b)||(w=a!==null&&a.memoizedState===null?!1:(Yt.current&2)!==0),w&&(g=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,a===null){if(Ze){if(g?ui(o):fi(),Ze){var T=wt,M;if(M=T){e:{for(M=T,T=Qr;M.nodeType!==8;){if(!T){T=null;break e}if(M=Ur(M.nextSibling),M===null){T=null;break e}}T=M}T!==null?(o.memoizedState={dehydrated:T,treeContext:lo!==null?{id:Sa,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},M=Xn(18,null,null,0),M.stateNode=T,M.return=o,o.child=M,jn=o,wt=null,M=!0):M=!1}M||fo(o)}if(T=o.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return bm(T)?o.lanes=32:o.lanes=536870912,null;wa(o)}return T=f.children,f=f.fallback,g?(fi(),g=o.mode,T=Xu({mode:"hidden",children:T},g),f=so(f,g,c,null),T.return=o,f.return=o,T.sibling=f,o.child=T,g=o.child,g.memoizedState=Rp(c),g.childLanes=Ip(a,w,c),o.memoizedState=Mp,f):(ui(o),Lp(o,T))}if(M=a.memoizedState,M!==null&&(T=M.dehydrated,T!==null)){if(b)o.flags&256?(ui(o),o.flags&=-257,o=$p(a,o,c)):o.memoizedState!==null?(fi(),o.child=a.child,o.flags|=128,o=null):(fi(),g=f.fallback,T=o.mode,f=Xu({mode:"visible",children:f.children},T),g=so(g,T,c,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,ms(o,a.child,null,c),f=o.child,f.memoizedState=Rp(c),f.childLanes=Ip(a,w,c),o.memoizedState=Mp,o=g);else if(ui(o),bm(T)){if(w=T.nextSibling&&T.nextSibling.dataset,w)var H=w.dgst;w=H,f=Error(r(419)),f.stack="",f.digest=w,wl({value:f,source:null,stack:null}),o=$p(a,o,c)}else if(Jt||Ol(a,o,c,!1),w=(c&a.childLanes)!==0,Jt||w){if(w=ft,w!==null&&(f=c&-c,f=(f&42)!==0?1:ua(f),f=(f&(w.suspendedLanes|c))!==0?0:f,f!==0&&f!==M.retryLane))throw M.retryLane=f,as(a,f),er(w,a,f),mS;T.data==="$?"||nm(),o=$p(a,o,c)}else T.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=M.treeContext,wt=Ur(T.nextSibling),jn=o,Ze=!0,uo=null,Qr=!1,a!==null&&(hr[pr++]=Sa,hr[pr++]=Aa,hr[pr++]=lo,Sa=a.id,Aa=a.overflow,lo=o),o=Lp(o,f.children),o.flags|=4096);return o}return g?(fi(),g=f.fallback,T=o.mode,M=a.child,H=M.sibling,f=xa(M,{mode:"hidden",children:f.children}),f.subtreeFlags=M.subtreeFlags&65011712,H!==null?g=xa(H,g):(g=so(g,T,c,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,T=a.child.memoizedState,T===null?T=Rp(c):(M=T.cachePool,M!==null?(H=qt._currentValue,M=M.parent!==H?{parent:H,pool:H}:M):M=ux(),T={baseLanes:T.baseLanes|c,cachePool:M}),g.memoizedState=T,g.childLanes=Ip(a,w,c),o.memoizedState=Mp,f):(ui(o),c=a.child,a=c.sibling,c=xa(c,{mode:"visible",children:f.children}),c.return=o,c.sibling=null,a!==null&&(w=o.deletions,w===null?(o.deletions=[a],o.flags|=16):w.push(a)),o.child=c,o.memoizedState=null,c)}function Lp(a,o){return o=Xu({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Xu(a,o){return a=Xn(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function $p(a,o,c){return ms(o,a.child,null,c),a=Lp(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function PS(a,o,c){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),np(a.return,o,c)}function Bp(a,o,c,f,g){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=c,b.tailMode=g)}function wS(a,o,c){var f=o.pendingProps,g=f.revealOrder,b=f.tail;if(dn(a,o,f.children,c),f=Yt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&PS(a,c,o);else if(a.tag===19)PS(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(oe(Yt,f),g){case"forwards":for(c=o.child,g=null;c!==null;)a=c.alternate,a!==null&&Yu(a)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),Bp(o,!1,g,c,b);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(a=g.alternate,a!==null&&Yu(a)===null){o.child=g;break}a=g.sibling,g.sibling=c,c=g,g=a}Bp(o,!0,c,null,b);break;case"together":Bp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Oa(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),gi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(Ol(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=xa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=xa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function Up(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Tu(a)))}function Kj(a,o,c){switch(o.tag){case 3:me(o,o.stateNode.containerInfo),ii(o,qt,a.memoizedState.cache),Pl();break;case 27:case 5:fe(o);break;case 4:me(o,o.stateNode.containerInfo);break;case 10:ii(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(ui(o),o.flags|=128,null):(c&o.child.childLanes)!==0?ES(a,o,c):(ui(o),a=Oa(a,o,c),a!==null?a.sibling:null);ui(o);break;case 19:var g=(a.flags&128)!==0;if(f=(c&o.childLanes)!==0,f||(Ol(a,o,c,!1),f=(c&o.childLanes)!==0),g){if(f)return wS(a,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),oe(Yt,Yt.current),f)break;return null;case 22:case 23:return o.lanes=0,bS(a,o,c);case 24:ii(o,qt,a.memoizedState.cache)}return Oa(a,o,c)}function OS(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)Jt=!0;else{if(!Up(a,c)&&(o.flags&128)===0)return Jt=!1,Kj(a,o,c);Jt=(a.flags&131072)!==0}else Jt=!1,Ze&&(o.flags&1048576)!==0&&rx(o,_u,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")Xh(f)?(a=yo(f,a),o.tag=1,o=AS(null,o,f,a,c)):(o.tag=0,o=kp(null,o,f,a,c));else{if(f!=null){if(g=f.$$typeof,g===N){o.tag=11,o=gS(null,o,f,a,c);break e}else if(g===R){o.tag=14,o=yS(null,o,f,a,c);break e}}throw o=le(f)||f,Error(r(306,o,""))}}return o;case 0:return kp(a,o,o.type,o.pendingProps,c);case 1:return f=o.type,g=yo(f,o.pendingProps),AS(a,o,f,g,c);case 3:e:{if(me(o,o.stateNode.containerInfo),a===null)throw Error(r(387));f=o.pendingProps;var b=o.memoizedState;g=b.element,cp(a,o),Ml(o,f,null,c);var w=o.memoizedState;if(f=w.cache,ii(o,qt,f),f!==b.cache&&rp(o,[qt],c,!0),kl(),f=w.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=CS(a,o,f,c);break e}else if(f!==g){g=fr(Error(r(424)),o),wl(g),o=CS(a,o,f,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(wt=Ur(a.firstChild),jn=o,Ze=!0,uo=null,Qr=!0,c=iS(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Pl(),f===g){o=Oa(a,o,c);break e}dn(a,o,f,c)}o=o.child}return o;case 26:return Vu(a,o),a===null?(c=j1(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ze||(c=o.type,a=o.pendingProps,f=uf(re.current).createElement(c),f[At]=o,f[at]=a,pn(f,c,a),kt(f),o.stateNode=f):o.memoizedState=j1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return fe(o),a===null&&Ze&&(f=o.stateNode=_1(o.type,o.pendingProps,re.current),jn=o,Qr=!0,g=wt,xi(o.type)?(xm=g,wt=Ur(f.firstChild)):wt=g),dn(a,o,o.pendingProps.children,c),Vu(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Ze&&((g=f=wt)&&(f=SN(f,o.type,o.pendingProps,Qr),f!==null?(o.stateNode=f,jn=o,wt=Ur(f.firstChild),Qr=!1,g=!0):g=!1),g||fo(o)),fe(o),g=o.type,b=o.pendingProps,w=a!==null?a.memoizedProps:null,f=b.children,gm(g,b)?f=null:w!==null&&gm(g,w)&&(o.flags|=32),o.memoizedState!==null&&(g=mp(a,o,Bj,null,null,c),nc._currentValue=g),Vu(a,o),dn(a,o,f,c),o.child;case 6:return a===null&&Ze&&((a=c=wt)&&(c=AN(c,o.pendingProps,Qr),c!==null?(o.stateNode=c,jn=o,wt=null,a=!0):a=!1),a||fo(o)),null;case 13:return ES(a,o,c);case 4:return me(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=ms(o,null,f,c):dn(a,o,f,c),o.child;case 11:return gS(a,o,o.type,o.pendingProps,c);case 7:return dn(a,o,o.pendingProps,c),o.child;case 8:return dn(a,o,o.pendingProps.children,c),o.child;case 12:return dn(a,o,o.pendingProps.children,c),o.child;case 10:return f=o.pendingProps,ii(o,o.type,f.value),dn(a,o,f.children,c),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,po(o),g=An(g),f=f(g),o.flags|=1,dn(a,o,f,c),o.child;case 14:return yS(a,o,o.type,o.pendingProps,c);case 15:return vS(a,o,o.type,o.pendingProps,c);case 19:return wS(a,o,c);case 31:return f=o.pendingProps,c=o.mode,f={mode:f.mode,children:f.children},a===null?(c=Xu(f,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=xa(a.child,f),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return bS(a,o,c);case 24:return po(o),f=An(qt),a===null?(g=op(),g===null&&(g=ft,b=ap(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),o.memoizedState={parent:f,cache:g},lp(o),ii(o,qt,g)):((a.lanes&c)!==0&&(cp(a,o),Ml(o,null,null,c),kl()),g=a.memoizedState,b=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),ii(o,qt,f)):(f=b.cache,ii(o,qt,f),f!==g.cache&&rp(o,[qt],c,!0))),dn(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function _a(a){a.flags|=4}function _S(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!I1(o)){if(o=mr.current,o!==null&&((Ye&4194048)===Ye?Zr!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||o!==Zr))throw jl=sp,fx;a.flags|=8192}}function Wu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Wa():536870912,a.lanes|=o,bs|=o)}function zl(a,o){if(!Ze)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Et(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,f=0;if(o)for(var g=a.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=f,a.childLanes=c,o}function Vj(a,o,c){var f=o.pendingProps;switch(Jh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return c=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Ea(qt),ae(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(El(o)?_a(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ox())),Et(o),null;case 26:return c=o.memoizedState,a===null?(_a(o),c!==null?(Et(o),_S(o,c)):(Et(o),o.flags&=-16777217)):c?c!==a.memoizedState?(_a(o),Et(o),_S(o,c)):(Et(o),o.flags&=-16777217):(a.memoizedProps!==f&&_a(o),Et(o),o.flags&=-16777217),null;case 27:ve(o),c=re.current;var g=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==f&&_a(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Et(o),null}a=ye.current,El(o)?ax(o):(a=_1(g,f,c),o.stateNode=a,_a(o))}return Et(o),null;case 5:if(ve(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&_a(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Et(o),null}if(a=ye.current,El(o))ax(o);else{switch(g=uf(re.current),a){case 1:a=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?g.createElement(c,{is:f.is}):g.createElement(c)}}a[At]=o,a[at]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=a;e:switch(pn(a,c,f),c){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&_a(o)}}return Et(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&_a(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(a=re.current,El(o)){if(a=o.stateNode,c=o.memoizedProps,f=null,g=jn,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}a[At]=o,a=!!(a.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||S1(a.nodeValue,c)),a||fo(o)}else a=uf(a).createTextNode(f),a[At]=o,o.stateNode=a}return Et(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=El(o),f!==null&&f.dehydrated!==null){if(a===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[At]=o}else Pl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),g=!1}else g=ox(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(wa(o),o):(wa(o),null)}if(wa(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=f!==null,a=a!==null&&a.memoizedState!==null,c){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),Wu(o,o.updateQueue),Et(o),null;case 4:return ae(),a===null&&fm(o.stateNode.containerInfo),Et(o),null;case 10:return Ea(o.type),Et(o),null;case 19:if(Y(Yt),g=o.memoizedState,g===null)return Et(o),null;if(f=(o.flags&128)!==0,b=g.rendering,b===null)if(f)zl(g,!1);else{if(Ot!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=Yu(a),b!==null){for(o.flags|=128,zl(g,!1),a=b.updateQueue,o.updateQueue=a,Wu(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)nx(c,a),c=c.sibling;return oe(Yt,Yt.current&1|2),o.child}a=a.sibling}g.tail!==null&&pt()>Ju&&(o.flags|=128,f=!0,zl(g,!1),o.lanes=4194304)}else{if(!f)if(a=Yu(b),a!==null){if(o.flags|=128,f=!0,a=a.updateQueue,o.updateQueue=a,Wu(o,a),zl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Ze)return Et(o),null}else 2*pt()-g.renderingStartTime>Ju&&c!==536870912&&(o.flags|=128,f=!0,zl(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(a=g.last,a!==null?a.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=pt(),o.sibling=null,a=Yt.current,oe(Yt,f?a&1|2:a&1),o):(Et(o),null);case 22:case 23:return wa(o),hp(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(c&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),c=o.updateQueue,c!==null&&Wu(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048),a!==null&&Y(mo),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ea(qt),Et(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Xj(a,o){switch(Jh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ea(qt),ae(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return ve(o),null;case 13:if(wa(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Pl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return Y(Yt),null;case 4:return ae(),null;case 10:return Ea(o.type),null;case 22:case 23:return wa(o),hp(),a!==null&&Y(mo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ea(qt),null;case 25:return null;default:return null}}function TS(a,o){switch(Jh(o),o.tag){case 3:Ea(qt),ae();break;case 26:case 27:case 5:ve(o);break;case 4:ae();break;case 13:wa(o);break;case 19:Y(Yt);break;case 10:Ea(o.type);break;case 22:case 23:wa(o),hp(),a!==null&&Y(mo);break;case 24:Ea(qt)}}function Gl(a,o){try{var c=o.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&a)===a){f=void 0;var b=c.create,w=c.inst;f=b(),w.destroy=f}c=c.next}while(c!==g)}}catch(T){ct(o,o.return,T)}}function di(a,o,c){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&a)===a){var w=f.inst,T=w.destroy;if(T!==void 0){w.destroy=void 0,g=o;var M=c,H=T;try{H()}catch(ne){ct(g,M,ne)}}}f=f.next}while(f!==b)}}catch(ne){ct(o,o.return,ne)}}function DS(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{yx(o,c)}catch(f){ct(a,a.return,f)}}}function jS(a,o,c){c.props=yo(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(f){ct(a,o,f)}}function Hl(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof c=="function"?a.refCleanup=c(f):c.current=f}}catch(g){ct(a,o,g)}}function Jr(a,o){var c=a.ref,f=a.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){ct(a,o,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){ct(a,o,g)}else c.current=null}function NS(a){var o=a.type,c=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){ct(a,a.return,g)}}function zp(a,o,c){try{var f=a.stateNode;gN(f,a.type,c,o),f[at]=o}catch(g){ct(a,a.return,g)}}function kS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&xi(a.type)||a.tag===4}function Gp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||kS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&xi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Hp(a,o,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=cf));else if(f!==4&&(f===27&&xi(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(Hp(a,o,c),a=a.sibling;a!==null;)Hp(a,o,c),a=a.sibling}function Qu(a,o,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(f!==4&&(f===27&&xi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Qu(a,o,c),a=a.sibling;a!==null;)Qu(a,o,c),a=a.sibling}function MS(a){var o=a.stateNode,c=a.memoizedProps;try{for(var f=a.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);pn(o,f,c),o[At]=a,o[at]=c}catch(b){ct(a,a.return,b)}}var Ta=!1,Tt=!1,qp=!1,RS=typeof WeakSet=="function"?WeakSet:Set,en=null;function Wj(a,o){if(a=a.containerInfo,pm=gf,a=Fb(a),Gh(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var w=0,T=-1,M=-1,H=0,ne=0,se=a,F=null;t:for(;;){for(var X;se!==c||g!==0&&se.nodeType!==3||(T=w+g),se!==b||f!==0&&se.nodeType!==3||(M=w+f),se.nodeType===3&&(w+=se.nodeValue.length),(X=se.firstChild)!==null;)F=se,se=X;for(;;){if(se===a)break t;if(F===c&&++H===g&&(T=w),F===b&&++ne===f&&(M=w),(X=se.nextSibling)!==null)break;se=F,F=se.parentNode}se=X}c=T===-1||M===-1?null:{start:T,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(mm={focusedElem:a,selectionRange:c},gf=!1,en=o;en!==null;)if(o=en,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,en=a;else for(;en!==null;){switch(o=en,b=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,c=o,g=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var ke=yo(c.type,g,c.elementType===c.type);a=f.getSnapshotBeforeUpdate(ke,b),f.__reactInternalSnapshotBeforeUpdate=a}catch(je){ct(c,c.return,je)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)vm(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":vm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,en=a;break}en=o.return}}function IS(a,o,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:hi(a,c),f&4&&Gl(5,c);break;case 1:if(hi(a,c),f&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(w){ct(c,c.return,w)}else{var g=yo(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(g,o,a.__reactInternalSnapshotBeforeUpdate)}catch(w){ct(c,c.return,w)}}f&64&&DS(c),f&512&&Hl(c,c.return);break;case 3:if(hi(a,c),f&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{yx(a,o)}catch(w){ct(c,c.return,w)}}break;case 27:o===null&&f&4&&MS(c);case 26:case 5:hi(a,c),o===null&&f&4&&NS(c),f&512&&Hl(c,c.return);break;case 12:hi(a,c);break;case 13:hi(a,c),f&4&&BS(a,c),f&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=iN.bind(null,c),CN(a,c))));break;case 22:if(f=c.memoizedState!==null||Ta,!f){o=o!==null&&o.memoizedState!==null||Tt,g=Ta;var b=Tt;Ta=f,(Tt=o)&&!b?pi(a,c,(c.subtreeFlags&8772)!==0):hi(a,c),Ta=g,Tt=b}break;case 30:break;default:hi(a,c)}}function LS(a){var o=a.alternate;o!==null&&(a.alternate=null,LS(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Za(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var mt=null,Bn=!1;function Da(a,o,c){for(c=c.child;c!==null;)$S(a,o,c),c=c.sibling}function $S(a,o,c){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(qi,c)}catch{}switch(c.tag){case 26:Tt||Jr(c,o),Da(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Tt||Jr(c,o);var f=mt,g=Bn;xi(c.type)&&(mt=c.stateNode,Bn=!1),Da(a,o,c),Zl(c.stateNode),mt=f,Bn=g;break;case 5:Tt||Jr(c,o);case 6:if(f=mt,g=Bn,mt=null,Da(a,o,c),mt=f,Bn=g,mt!==null)if(Bn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(c.stateNode)}catch(b){ct(c,o,b)}else try{mt.removeChild(c.stateNode)}catch(b){ct(c,o,b)}break;case 18:mt!==null&&(Bn?(a=mt,w1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),oc(a)):w1(mt,c.stateNode));break;case 4:f=mt,g=Bn,mt=c.stateNode.containerInfo,Bn=!0,Da(a,o,c),mt=f,Bn=g;break;case 0:case 11:case 14:case 15:Tt||di(2,c,o),Tt||di(4,c,o),Da(a,o,c);break;case 1:Tt||(Jr(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"&&jS(c,o,f)),Da(a,o,c);break;case 21:Da(a,o,c);break;case 22:Tt=(f=Tt)||c.memoizedState!==null,Da(a,o,c),Tt=f;break;default:Da(a,o,c)}}function BS(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{oc(a)}catch(c){ct(o,o.return,c)}}function Qj(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new RS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new RS),o;default:throw Error(r(435,a.tag))}}function Yp(a,o){var c=Qj(a);o.forEach(function(f){var g=oN.bind(null,a,f);c.has(f)||(c.add(f),f.then(g,g))})}function Wn(a,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],b=a,w=o,T=w;e:for(;T!==null;){switch(T.tag){case 27:if(xi(T.type)){mt=T.stateNode,Bn=!1;break e}break;case 5:mt=T.stateNode,Bn=!1;break e;case 3:case 4:mt=T.stateNode.containerInfo,Bn=!0;break e}T=T.return}if(mt===null)throw Error(r(160));$S(b,w,g),mt=null,Bn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)US(o,a),o=o.sibling}var Br=null;function US(a,o){var c=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Wn(o,a),Qn(a),f&4&&(di(3,a,a.return),Gl(3,a),di(5,a,a.return));break;case 1:Wn(o,a),Qn(a),f&512&&(Tt||c===null||Jr(c,c.return)),f&64&&Ta&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=Br;if(Wn(o,a),Qn(a),f&512&&(Tt||c===null||Jr(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=a.memoizedState,c===null)if(f===null)if(a.stateNode===null){e:{f=a.type,c=a.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Rr]||b[At]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),pn(b,f,c),b[At]=a,kt(b),f=b;break e;case"link":var w=M1("link","href",g).get(f+(c.href||""));if(w){for(var T=0;T<w.length;T++)if(b=w[T],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(T,1);break t}}b=g.createElement(f),pn(b,f,c),g.head.appendChild(b);break;case"meta":if(w=M1("meta","content",g).get(f+(c.content||""))){for(T=0;T<w.length;T++)if(b=w[T],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(T,1);break t}}b=g.createElement(f),pn(b,f,c),g.head.appendChild(b);break;default:throw Error(r(468,f))}b[At]=a,kt(b),f=b}a.stateNode=f}else R1(g,a.type,a.stateNode);else a.stateNode=k1(g,f,a.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?R1(g,a.type,a.stateNode):k1(g,f,a.memoizedProps)):f===null&&a.stateNode!==null&&zp(a,a.memoizedProps,c.memoizedProps)}break;case 27:Wn(o,a),Qn(a),f&512&&(Tt||c===null||Jr(c,c.return)),c!==null&&f&4&&zp(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Wn(o,a),Qn(a),f&512&&(Tt||c===null||Jr(c,c.return)),a.flags&32){g=a.stateNode;try{ya(g,"")}catch(X){ct(a,a.return,X)}}f&4&&a.stateNode!=null&&(g=a.memoizedProps,zp(a,g,c!==null?c.memoizedProps:g)),f&1024&&(qp=!0);break;case 6:if(Wn(o,a),Qn(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,c=a.stateNode;try{c.nodeValue=f}catch(X){ct(a,a.return,X)}}break;case 3:if(hf=null,g=Br,Br=ff(o.containerInfo),Wn(o,a),Br=g,Qn(a),f&4&&c!==null&&c.memoizedState.isDehydrated)try{oc(o.containerInfo)}catch(X){ct(a,a.return,X)}qp&&(qp=!1,zS(a));break;case 4:f=Br,Br=ff(a.stateNode.containerInfo),Wn(o,a),Qn(a),Br=f;break;case 12:Wn(o,a),Qn(a);break;case 13:Wn(o,a),Qn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Qp=pt()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Yp(a,f)));break;case 22:g=a.memoizedState!==null;var M=c!==null&&c.memoizedState!==null,H=Ta,ne=Tt;if(Ta=H||g,Tt=ne||M,Wn(o,a),Tt=ne,Ta=H,Qn(a),f&8192)e:for(o=a.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||M||Ta||Tt||vo(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){M=c=o;try{if(b=M.stateNode,g)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{T=M.stateNode;var se=M.memoizedProps.style,F=se!=null&&se.hasOwnProperty("display")?se.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(X){ct(M,M.return,X)}}}else if(o.tag===6){if(c===null){M=o;try{M.stateNode.nodeValue=g?"":M.memoizedProps}catch(X){ct(M,M.return,X)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Yp(a,c))));break;case 19:Wn(o,a),Qn(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Yp(a,f)));break;case 30:break;case 21:break;default:Wn(o,a),Qn(a)}}function Qn(a){var o=a.flags;if(o&2){try{for(var c,f=a.return;f!==null;){if(kS(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,b=Gp(a);Qu(a,b,g);break;case 5:var w=c.stateNode;c.flags&32&&(ya(w,""),c.flags&=-33);var T=Gp(a);Qu(a,T,w);break;case 3:case 4:var M=c.stateNode.containerInfo,H=Gp(a);Hp(a,H,M);break;default:throw Error(r(161))}}catch(ne){ct(a,a.return,ne)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function zS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;zS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function hi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)IS(a,o.alternate,o),o=o.sibling}function vo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:di(4,o,o.return),vo(o);break;case 1:Jr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&jS(o,o.return,c),vo(o);break;case 27:Zl(o.stateNode);case 26:case 5:Jr(o,o.return),vo(o);break;case 22:o.memoizedState===null&&vo(o);break;case 30:vo(o);break;default:vo(o)}a=a.sibling}}function pi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=a,b=o,w=b.flags;switch(b.tag){case 0:case 11:case 15:pi(g,b,c),Gl(4,b);break;case 1:if(pi(g,b,c),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(H){ct(f,f.return,H)}if(f=b,g=f.updateQueue,g!==null){var T=f.stateNode;try{var M=g.shared.hiddenCallbacks;if(M!==null)for(g.shared.hiddenCallbacks=null,g=0;g<M.length;g++)gx(M[g],T)}catch(H){ct(f,f.return,H)}}c&&w&64&&DS(b),Hl(b,b.return);break;case 27:MS(b);case 26:case 5:pi(g,b,c),c&&f===null&&w&4&&NS(b),Hl(b,b.return);break;case 12:pi(g,b,c);break;case 13:pi(g,b,c),c&&w&4&&BS(g,b);break;case 22:b.memoizedState===null&&pi(g,b,c),Hl(b,b.return);break;case 30:break;default:pi(g,b,c)}o=o.sibling}}function Fp(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&_l(c))}function Kp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&_l(a))}function ea(a,o,c,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)GS(a,o,c,f),o=o.sibling}function GS(a,o,c,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ea(a,o,c,f),g&2048&&Gl(9,o);break;case 1:ea(a,o,c,f);break;case 3:ea(a,o,c,f),g&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&_l(a)));break;case 12:if(g&2048){ea(a,o,c,f),a=o.stateNode;try{var b=o.memoizedProps,w=b.id,T=b.onPostCommit;typeof T=="function"&&T(w,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(M){ct(o,o.return,M)}}else ea(a,o,c,f);break;case 13:ea(a,o,c,f);break;case 23:break;case 22:b=o.stateNode,w=o.alternate,o.memoizedState!==null?b._visibility&2?ea(a,o,c,f):ql(a,o):b._visibility&2?ea(a,o,c,f):(b._visibility|=2,gs(a,o,c,f,(o.subtreeFlags&10256)!==0)),g&2048&&Fp(w,o);break;case 24:ea(a,o,c,f),g&2048&&Kp(o.alternate,o);break;default:ea(a,o,c,f)}}function gs(a,o,c,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=a,w=o,T=c,M=f,H=w.flags;switch(w.tag){case 0:case 11:case 15:gs(b,w,T,M,g),Gl(8,w);break;case 23:break;case 22:var ne=w.stateNode;w.memoizedState!==null?ne._visibility&2?gs(b,w,T,M,g):ql(b,w):(ne._visibility|=2,gs(b,w,T,M,g)),g&&H&2048&&Fp(w.alternate,w);break;case 24:gs(b,w,T,M,g),g&&H&2048&&Kp(w.alternate,w);break;default:gs(b,w,T,M,g)}o=o.sibling}}function ql(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,f=o,g=f.flags;switch(f.tag){case 22:ql(c,f),g&2048&&Fp(f.alternate,f);break;case 24:ql(c,f),g&2048&&Kp(f.alternate,f);break;default:ql(c,f)}o=o.sibling}}var Yl=8192;function ys(a){if(a.subtreeFlags&Yl)for(a=a.child;a!==null;)HS(a),a=a.sibling}function HS(a){switch(a.tag){case 26:ys(a),a.flags&Yl&&a.memoizedState!==null&&IN(Br,a.memoizedState,a.memoizedProps);break;case 5:ys(a);break;case 3:case 4:var o=Br;Br=ff(a.stateNode.containerInfo),ys(a),Br=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Yl,Yl=16777216,ys(a),Yl=o):ys(a));break;default:ys(a)}}function qS(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Fl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];en=f,FS(f,a)}qS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)YS(a),a=a.sibling}function YS(a){switch(a.tag){case 0:case 11:case 15:Fl(a),a.flags&2048&&di(9,a,a.return);break;case 3:Fl(a);break;case 12:Fl(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Zu(a)):Fl(a);break;default:Fl(a)}}function Zu(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];en=f,FS(f,a)}qS(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:di(8,o,o.return),Zu(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Zu(o));break;default:Zu(o)}a=a.sibling}}function FS(a,o){for(;en!==null;){var c=en;switch(c.tag){case 0:case 11:case 15:di(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:_l(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,en=f;else e:for(c=a;en!==null;){f=en;var g=f.sibling,b=f.return;if(LS(f),f===c){en=null;break e}if(g!==null){g.return=b,en=g;break e}en=b}}}var Zj={getCacheForType:function(a){var o=An(qt),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},Jj=typeof WeakMap=="function"?WeakMap:Map,et=0,ft=null,Ge=null,Ye=0,tt=0,Zn=null,mi=!1,vs=!1,Vp=!1,ja=0,Ot=0,gi=0,bo=0,Xp=0,gr=0,bs=0,Kl=null,Un=null,Wp=!1,Qp=0,Ju=1/0,ef=null,yi=null,hn=0,vi=null,xs=null,Ss=0,Zp=0,Jp=null,KS=null,Vl=0,em=null;function Jn(){if((et&2)!==0&&Ye!==0)return Ye&-Ye;if($.T!==null){var a=ls;return a!==0?a:sm()}return Fn()}function VS(){gr===0&&(gr=(Ye&536870912)===0||Ze?ll():536870912);var a=mr.current;return a!==null&&(a.flags|=32),gr}function er(a,o,c){(a===ft&&(tt===2||tt===9)||a.cancelPendingCommit!==null)&&(As(a,0),bi(a,Ye,gr,!1)),Vo(a,c),((et&2)===0||a!==ft)&&(a===ft&&((et&2)===0&&(bo|=c),Ot===4&&bi(a,Ye,gr,!1)),ta(a))}function XS(a,o,c){if((et&6)!==0)throw Error(r(327));var f=!c&&(o&124)===0&&(o&a.expiredLanes)===0||ca(a,o),g=f?nN(a,o):rm(a,o,!0),b=f;do{if(g===0){vs&&!f&&bi(a,o,0,!1);break}else{if(c=a.current.alternate,b&&!eN(c)){g=rm(a,o,!1),b=!1;continue}if(g===2){if(b=o,a.errorRecoveryDisabledLanes&b)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var T=a;g=Kl;var M=T.current.memoizedState.isDehydrated;if(M&&(As(T,w).flags|=256),w=rm(T,w,!1),w!==2){if(Vp&&!M){T.errorRecoveryDisabledLanes|=b,bo|=b,g=4;break e}b=Un,Un=g,b!==null&&(Un===null?Un=b:Un.push.apply(Un,b))}g=w}if(b=!1,g!==2)continue}}if(g===1){As(a,0),bi(a,o,0,!0);break}e:{switch(f=a,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:bi(f,o,gr,!mi);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=Qp+300-pt(),10<g)){if(bi(f,o,gr,!mi),Ki(f,0,!0)!==0)break e;f.timeoutHandle=E1(WS.bind(null,f,c,Un,ef,Wp,o,gr,bo,bs,mi,b,2,-0,0),g);break e}WS(f,c,Un,ef,Wp,o,gr,bo,bs,mi,b,0,-0,0)}}break}while(!0);ta(a)}function WS(a,o,c,f,g,b,w,T,M,H,ne,se,F,X){if(a.timeoutHandle=-1,se=o.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(tc={stylesheets:null,count:0,unsuspend:RN},HS(o),se=LN(),se!==null)){a.cancelPendingCommit=se(r1.bind(null,a,o,b,c,f,g,w,T,M,ne,1,F,X)),bi(a,b,w,!H);return}r1(a,o,b,c,f,g,w,T,M)}function eN(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],b=g.getSnapshot;g=g.value;try{if(!Vn(b(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function bi(a,o,c,f){o&=~Xp,o&=~bo,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var g=o;0<g;){var b=31-zt(g),w=1<<b;f[b]=-1,g&=~w}c!==0&&St(a,c,o)}function tf(){return(et&6)===0?(Xl(0),!1):!0}function tm(){if(Ge!==null){if(tt===0)var a=Ge.return;else a=Ge,Ca=ho=null,vp(a),ps=null,Bl=0,a=Ge;for(;a!==null;)TS(a.alternate,a),a=a.return;Ge=null}}function As(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,vN(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),tm(),ft=a,Ge=c=xa(a.current,null),Ye=o,tt=0,Zn=null,mi=!1,vs=ca(a,o),Vp=!1,bs=gr=Xp=bo=gi=Ot=0,Un=Kl=null,Wp=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var g=31-zt(f),b=1<<g;o|=a[g],f&=~b}return ja=o,Cu(),c}function QS(a,o){$e=null,$.H=Gu,o===Dl||o===Nu?(o=px(),tt=3):o===fx?(o=px(),tt=4):tt=o===mS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Zn=o,Ge===null&&(Ot=1,Ku(a,fr(o,a.current)))}function ZS(){var a=$.H;return $.H=Gu,a===null?Gu:a}function JS(){var a=$.A;return $.A=Zj,a}function nm(){Ot=4,mi||(Ye&4194048)!==Ye&&mr.current!==null||(vs=!0),(gi&134217727)===0&&(bo&134217727)===0||ft===null||bi(ft,Ye,gr,!1)}function rm(a,o,c){var f=et;et|=2;var g=ZS(),b=JS();(ft!==a||Ye!==o)&&(ef=null,As(a,o)),o=!1;var w=Ot;e:do try{if(tt!==0&&Ge!==null){var T=Ge,M=Zn;switch(tt){case 8:tm(),w=6;break e;case 3:case 2:case 9:case 6:mr.current===null&&(o=!0);var H=tt;if(tt=0,Zn=null,Cs(a,T,M,H),c&&vs){w=0;break e}break;default:H=tt,tt=0,Zn=null,Cs(a,T,M,H)}}tN(),w=Ot;break}catch(ne){QS(a,ne)}while(!0);return o&&a.shellSuspendCounter++,Ca=ho=null,et=f,$.H=g,$.A=b,Ge===null&&(ft=null,Ye=0,Cu()),w}function tN(){for(;Ge!==null;)e1(Ge)}function nN(a,o){var c=et;et|=2;var f=ZS(),g=JS();ft!==a||Ye!==o?(ef=null,Ju=pt()+500,As(a,o)):vs=ca(a,o);e:do try{if(tt!==0&&Ge!==null){o=Ge;var b=Zn;t:switch(tt){case 1:tt=0,Zn=null,Cs(a,o,b,1);break;case 2:case 9:if(dx(b)){tt=0,Zn=null,t1(o);break}o=function(){tt!==2&&tt!==9||ft!==a||(tt=7),ta(a)},b.then(o,o);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:dx(b)?(tt=0,Zn=null,t1(o)):(tt=0,Zn=null,Cs(a,o,b,7));break;case 5:var w=null;switch(Ge.tag){case 26:w=Ge.memoizedState;case 5:case 27:var T=Ge;if(!w||I1(w)){tt=0,Zn=null;var M=T.sibling;if(M!==null)Ge=M;else{var H=T.return;H!==null?(Ge=H,nf(H)):Ge=null}break t}}tt=0,Zn=null,Cs(a,o,b,5);break;case 6:tt=0,Zn=null,Cs(a,o,b,6);break;case 8:tm(),Ot=6;break e;default:throw Error(r(462))}}rN();break}catch(ne){QS(a,ne)}while(!0);return Ca=ho=null,$.H=f,$.A=g,et=c,Ge!==null?0:(ft=null,Ye=0,Cu(),Ot)}function rN(){for(;Ge!==null&&!Be();)e1(Ge)}function e1(a){var o=OS(a.alternate,a,ja);a.memoizedProps=a.pendingProps,o===null?nf(a):Ge=o}function t1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=SS(c,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=SS(c,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:vp(o);default:TS(c,o),o=Ge=nx(o,ja),o=OS(c,o,ja)}a.memoizedProps=a.pendingProps,o===null?nf(a):Ge=o}function Cs(a,o,c,f){Ca=ho=null,vp(o),ps=null,Bl=0;var g=o.return;try{if(Fj(a,g,o,c,Ye)){Ot=1,Ku(a,fr(c,a.current)),Ge=null;return}}catch(b){if(g!==null)throw Ge=g,b;Ot=1,Ku(a,fr(c,a.current)),Ge=null;return}o.flags&32768?(Ze||f===1?a=!0:vs||(Ye&536870912)!==0?a=!1:(mi=a=!0,(f===2||f===9||f===3||f===6)&&(f=mr.current,f!==null&&f.tag===13&&(f.flags|=16384))),n1(o,a)):nf(o)}function nf(a){var o=a;do{if((o.flags&32768)!==0){n1(o,mi);return}a=o.return;var c=Vj(o.alternate,o,ja);if(c!==null){Ge=c;return}if(o=o.sibling,o!==null){Ge=o;return}Ge=o=a}while(o!==null);Ot===0&&(Ot=5)}function n1(a,o){do{var c=Xj(a.alternate,a);if(c!==null){c.flags&=32767,Ge=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){Ge=a;return}Ge=a=c}while(a!==null);Ot=6,Ge=null}function r1(a,o,c,f,g,b,w,T,M){a.cancelPendingCommit=null;do rf();while(hn!==0);if((et&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=Kh,Mb(a,c,b,w,T,M),a===ft&&(Ge=ft=null,Ye=0),xs=o,vi=a,Ss=c,Zp=b,Jp=g,KS=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,sN(Gi,function(){return l1(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=$.T,$.T=null,g=ee.p,ee.p=2,w=et,et|=4;try{Wj(a,o,c)}finally{et=w,ee.p=g,$.T=f}}hn=1,a1(),i1(),o1()}}function a1(){if(hn===1){hn=0;var a=vi,o=xs,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var f=ee.p;ee.p=2;var g=et;et|=4;try{US(o,a);var b=mm,w=Fb(a.containerInfo),T=b.focusedElem,M=b.selectionRange;if(w!==T&&T&&T.ownerDocument&&Yb(T.ownerDocument.documentElement,T)){if(M!==null&&Gh(T)){var H=M.start,ne=M.end;if(ne===void 0&&(ne=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(ne,T.value.length);else{var se=T.ownerDocument||document,F=se&&se.defaultView||window;if(F.getSelection){var X=F.getSelection(),ke=T.textContent.length,je=Math.min(M.start,ke),st=M.end===void 0?je:Math.min(M.end,ke);!X.extend&&je>st&&(w=st,st=je,je=w);var U=qb(T,je),L=qb(T,st);if(U&&L&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var G=se.createRange();G.setStart(U.node,U.offset),X.removeAllRanges(),je>st?(X.addRange(G),X.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),X.addRange(G))}}}}for(se=[],X=T;X=X.parentNode;)X.nodeType===1&&se.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<se.length;T++){var ie=se[T];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}gf=!!pm,mm=pm=null}finally{et=g,ee.p=f,$.T=c}}a.current=o,hn=2}}function i1(){if(hn===2){hn=0;var a=vi,o=xs,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var f=ee.p;ee.p=2;var g=et;et|=4;try{IS(a,o.alternate,o)}finally{et=g,ee.p=f,$.T=c}}hn=3}}function o1(){if(hn===4||hn===3){hn=0,Nt();var a=vi,o=xs,c=Ss,f=KS;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?hn=5:(hn=0,xs=vi=null,s1(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(yi=null),Vi(c),o=o.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(qi,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=$.T,g=ee.p,ee.p=2,$.T=null;try{for(var b=a.onRecoverableError,w=0;w<f.length;w++){var T=f[w];b(T.value,{componentStack:T.stack})}}finally{$.T=o,ee.p=g}}(Ss&3)!==0&&rf(),ta(a),g=a.pendingLanes,(c&4194090)!==0&&(g&42)!==0?a===em?Vl++:(Vl=0,em=a):Vl=0,Xl(0)}}function s1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,_l(o)))}function rf(a){return a1(),i1(),o1(),l1()}function l1(){if(hn!==5)return!1;var a=vi,o=Zp;Zp=0;var c=Vi(Ss),f=$.T,g=ee.p;try{ee.p=32>c?32:c,$.T=null,c=Jp,Jp=null;var b=vi,w=Ss;if(hn=0,xs=vi=null,Ss=0,(et&6)!==0)throw Error(r(331));var T=et;if(et|=4,YS(b.current),GS(b,b.current,w,c),et=T,Xl(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(qi,b)}catch{}return!0}finally{ee.p=g,$.T=f,s1(a,o)}}function c1(a,o,c){o=fr(c,o),o=Np(a.stateNode,o,2),a=li(a,o,2),a!==null&&(Vo(a,2),ta(a))}function ct(a,o,c){if(a.tag===3)c1(a,a,c);else for(;o!==null;){if(o.tag===3){c1(o,a,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(yi===null||!yi.has(f))){a=fr(c,a),c=hS(2),f=li(o,c,2),f!==null&&(pS(c,f,o,a),Vo(f,2),ta(f));break}}o=o.return}}function am(a,o,c){var f=a.pingCache;if(f===null){f=a.pingCache=new Jj;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(c)||(Vp=!0,g.add(c),a=aN.bind(null,a,o,c),o.then(a,a))}function aN(a,o,c){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,ft===a&&(Ye&c)===c&&(Ot===4||Ot===3&&(Ye&62914560)===Ye&&300>pt()-Qp?(et&2)===0&&As(a,0):Xp|=c,bs===Ye&&(bs=0)),ta(a)}function u1(a,o){o===0&&(o=Wa()),a=as(a,o),a!==null&&(Vo(a,o),ta(a))}function iN(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),u1(a,c)}function oN(a,o){var c=0;switch(a.tag){case 13:var f=a.stateNode,g=a.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(o),u1(a,c)}function sN(a,o){return Je(a,o)}var af=null,Es=null,im=!1,of=!1,om=!1,xo=0;function ta(a){a!==Es&&a.next===null&&(Es===null?af=Es=a:Es=Es.next=a),of=!0,im||(im=!0,cN())}function Xl(a,o){if(!om&&of){om=!0;do for(var c=!1,f=af;f!==null;){if(a!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var w=f.suspendedLanes,T=f.pingedLanes;b=(1<<31-zt(42|a)+1)-1,b&=g&~(w&~T),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,p1(f,b))}else b=Ye,b=Ki(f,f===ft?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||ca(f,b)||(c=!0,p1(f,b));f=f.next}while(c);om=!1}}function lN(){f1()}function f1(){of=im=!1;var a=0;xo!==0&&(yN()&&(a=xo),xo=0);for(var o=pt(),c=null,f=af;f!==null;){var g=f.next,b=d1(f,o);b===0?(f.next=null,c===null?af=g:c.next=g,g===null&&(Es=c)):(c=f,(a!==0||(b&3)!==0)&&(of=!0)),f=g}Xl(a)}function d1(a,o){for(var c=a.suspendedLanes,f=a.pingedLanes,g=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var w=31-zt(b),T=1<<w,M=g[w];M===-1?((T&c)===0||(T&f)!==0)&&(g[w]=bh(T,o)):M<=o&&(a.expiredLanes|=T),b&=~T}if(o=ft,c=Ye,c=Ki(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,c===0||a===o&&(tt===2||tt===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Ae(f),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||ca(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(f!==null&&Ae(f),Vi(c)){case 2:case 8:c=Fr;break;case 32:c=Gi;break;case 268435456:c=Hi;break;default:c=Gi}return f=h1.bind(null,a),c=Je(c,f),a.callbackPriority=o,a.callbackNode=c,o}return f!==null&&f!==null&&Ae(f),a.callbackPriority=2,a.callbackNode=null,2}function h1(a,o){if(hn!==0&&hn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(rf()&&a.callbackNode!==c)return null;var f=Ye;return f=Ki(a,a===ft?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(XS(a,f,o),d1(a,pt()),a.callbackNode!=null&&a.callbackNode===c?h1.bind(null,a):null)}function p1(a,o){if(rf())return null;XS(a,o,!0)}function cN(){bN(function(){(et&6)!==0?Je(Xa,lN):f1()})}function sm(){return xo===0&&(xo=ll()),xo}function m1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ja(""+a)}function g1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function uN(a,o,c,f,g){if(o==="submit"&&c&&c.stateNode===g){var b=m1((g[at]||null).action),w=f.submitter;w&&(o=(o=w[at]||null)?m1(o.formAction):w.getAttribute("formAction"),o!==null&&(b=o,w=null));var T=new to("action","action",null,f,g);a.push({event:T,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(xo!==0){var M=w?g1(g,w):new FormData(g);Op(c,{pending:!0,data:M,method:g.method,action:b},null,M)}}else typeof b=="function"&&(T.preventDefault(),M=w?g1(g,w):new FormData(g),Op(c,{pending:!0,data:M,method:g.method,action:b},b,M))},currentTarget:g}]})}}for(var lm=0;lm<Fh.length;lm++){var cm=Fh[lm],fN=cm.toLowerCase(),dN=cm[0].toUpperCase()+cm.slice(1);$r(fN,"on"+dN)}$r(Xb,"onAnimationEnd"),$r(Wb,"onAnimationIteration"),$r(Qb,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(Tj,"onTransitionRun"),$r(Dj,"onTransitionStart"),$r(jj,"onTransitionCancel"),$r(Zb,"onTransitionEnd"),Dn("onMouseEnter",["mouseout","mouseover"]),Dn("onMouseLeave",["mouseout","mouseover"]),Dn("onPointerEnter",["pointerout","pointerover"]),Dn("onPointerLeave",["pointerout","pointerover"]),Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function y1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var f=a[c],g=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var w=f.length-1;0<=w;w--){var T=f[w],M=T.instance,H=T.currentTarget;if(T=T.listener,M!==b&&g.isPropagationStopped())break e;b=T,g.currentTarget=H;try{b(g)}catch(ne){Fu(ne)}g.currentTarget=null,b=M}else for(w=0;w<f.length;w++){if(T=f[w],M=T.instance,H=T.currentTarget,T=T.listener,M!==b&&g.isPropagationStopped())break e;b=T,g.currentTarget=H;try{b(g)}catch(ne){Fu(ne)}g.currentTarget=null,b=M}}}}function He(a,o){var c=o[kr];c===void 0&&(c=o[kr]=new Set);var f=a+"__bubble";c.has(f)||(v1(o,a,2,!1),c.add(f))}function um(a,o,c){var f=0;o&&(f|=4),v1(c,a,f,o)}var sf="_reactListening"+Math.random().toString(36).slice(2);function fm(a){if(!a[sf]){a[sf]=!0,ul.forEach(function(c){c!=="selectionchange"&&(hN.has(c)||um(c,!1,a),um(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[sf]||(o[sf]=!0,um("selectionchange",!1,o))}}function v1(a,o,c,f){switch(G1(o)){case 2:var g=UN;break;case 8:g=zN;break;default:g=Pm}c=g.bind(null,o,c,a),g=void 0,!Lr||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?a.addEventListener(o,c,{capture:!0,passive:g}):a.addEventListener(o,c,!0):g!==void 0?a.addEventListener(o,c,{passive:g}):a.addEventListener(o,c,!1)}function dm(a,o,c,f,g){var b=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var T=f.stateNode.containerInfo;if(T===g)break;if(w===4)for(w=f.return;w!==null;){var M=w.tag;if((M===3||M===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;T!==null;){if(w=Fe(T),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){f=b=w;continue e}T=T.parentNode}}f=f.return}Oe(function(){var H=b,ne=Zi(c),se=[];e:{var F=Jb.get(a);if(F!==void 0){var X=to,ke=a;switch(a){case"keypress":if(eo(c)===0)break e;case"keydown":case"keyup":X=Ih;break;case"focusin":ke="focus",X=yl;break;case"focusout":ke="blur",X=yl;break;case"beforeblur":case"afterblur":X=yl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=ge;break;case Xb:case Wb:case Qb:X=Th;break;case Zb:X=Se;break;case"scroll":case"scrollend":X=gu;break;case"wheel":X=Re;break;case"copy":case"cut":case"paste":X=Dh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=V;break;case"toggle":case"beforetoggle":X=Ht}var je=(o&4)!==0,st=!je&&(a==="scroll"||a==="scrollend"),U=je?F!==null?F+"Capture":null:F;je=[];for(var L=H,G;L!==null;){var ie=L;if(G=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||G===null||U===null||(ie=Ie(L,U),ie!=null&&je.push(Ql(L,ie,G))),st)break;L=L.return}0<je.length&&(F=new X(F,ke,null,c,ne),se.push({event:F,listeners:je}))}}if((o&7)===0){e:{if(F=a==="mouseover"||a==="pointerover",X=a==="mouseout"||a==="pointerout",F&&c!==pu&&(ke=c.relatedTarget||c.fromElement)&&(Fe(ke)||ke[ln]))break e;if((X||F)&&(F=ne.window===ne?ne:(F=ne.ownerDocument)?F.defaultView||F.parentWindow:window,X?(ke=c.relatedTarget||c.toElement,X=H,ke=ke?Fe(ke):null,ke!==null&&(st=s(ke),je=ke.tag,ke!==st||je!==5&&je!==27&&je!==6)&&(ke=null)):(X=null,ke=H),X!==ke)){if(je=yu,ie="onMouseLeave",U="onMouseEnter",L="mouse",(a==="pointerout"||a==="pointerover")&&(je=V,ie="onPointerLeave",U="onPointerEnter",L="pointer"),st=X==null?F:Xi(X),G=ke==null?F:Xi(ke),F=new je(ie,L+"leave",X,c,ne),F.target=st,F.relatedTarget=G,ie=null,Fe(ne)===H&&(je=new je(U,L+"enter",ke,c,ne),je.target=G,je.relatedTarget=st,ie=je),st=ie,X&&ke)t:{for(je=X,U=ke,L=0,G=je;G;G=Ps(G))L++;for(G=0,ie=U;ie;ie=Ps(ie))G++;for(;0<L-G;)je=Ps(je),L--;for(;0<G-L;)U=Ps(U),G--;for(;L--;){if(je===U||U!==null&&je===U.alternate)break t;je=Ps(je),U=Ps(U)}je=null}else je=null;X!==null&&b1(se,F,X,je,!1),ke!==null&&st!==null&&b1(se,st,ke,je,!0)}}e:{if(F=H?Xi(H):window,X=F.nodeName&&F.nodeName.toLowerCase(),X==="select"||X==="input"&&F.type==="file")var Ee=$b;else if(Bh(F))if(Bb)Ee=wj;else{Ee=Ej;var Ue=Cj}else X=F.nodeName,!X||X.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&un(H.elementType)&&(Ee=$b):Ee=Pj;if(Ee&&(Ee=Ee(a,H))){Lb(se,Ee,c,ne);break e}Ue&&Ue(a,F,H),a==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&Qo(F,"number",F.value)}switch(Ue=H?Xi(H):window,a){case"focusin":(Bh(Ue)||Ue.contentEditable==="true")&&(ts=Ue,Hh=H,Cl=null);break;case"focusout":Cl=Hh=ts=null;break;case"mousedown":qh=!0;break;case"contextmenu":case"mouseup":case"dragend":qh=!1,Kb(se,c,ne);break;case"selectionchange":if(_j)break;case"keydown":case"keyup":Kb(se,c,ne)}var _e;if(Mt)e:{switch(a){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else ba?va(a,c)&&(Ne="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Ne="onCompositionStart");Ne&&(Sn&&c.locale!=="ko"&&(ba||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&ba&&(_e=pl()):(bn=ne,ri="value"in bn?bn.value:bn.textContent,ba=!0)),Ue=lf(H,Ne),0<Ue.length&&(Ne=new bu(Ne,a,null,c,ne),se.push({event:Ne,listeners:Ue}),_e?Ne.data=_e:(_e=Su(c),_e!==null&&(Ne.data=_e)))),(_e=Kn?ao(a,c):$h(a,c))&&(Ne=lf(H,"onBeforeInput"),0<Ne.length&&(Ue=new bu("onBeforeInput","beforeinput",null,c,ne),se.push({event:Ue,listeners:Ne}),Ue.data=_e)),uN(se,a,H,c,ne)}y1(se,o)})}function Ql(a,o,c){return{instance:a,listener:o,currentTarget:c}}function lf(a,o){for(var c=o+"Capture",f=[];a!==null;){var g=a,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Ie(a,c),g!=null&&f.unshift(Ql(a,g,b)),g=Ie(a,o),g!=null&&f.push(Ql(a,g,b))),a.tag===3)return f;a=a.return}return[]}function Ps(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function b1(a,o,c,f,g){for(var b=o._reactName,w=[];c!==null&&c!==f;){var T=c,M=T.alternate,H=T.stateNode;if(T=T.tag,M!==null&&M===f)break;T!==5&&T!==26&&T!==27||H===null||(M=H,g?(H=Ie(c,b),H!=null&&w.unshift(Ql(c,H,M))):g||(H=Ie(c,b),H!=null&&w.push(Ql(c,H,M)))),c=c.return}w.length!==0&&a.push({event:o,listeners:w})}var pN=/\r\n?/g,mN=/\u0000|\uFFFD/g;function x1(a){return(typeof a=="string"?a:""+a).replace(pN,`
`).replace(mN,"")}function S1(a,o){return o=x1(o),x1(a)===o}function cf(){}function ot(a,o,c,f,g,b){switch(c){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||ya(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&ya(a,""+f);break;case"className":ha(a,"class",f);break;case"tabIndex":ha(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ha(a,c,f);break;case"style":Qt(a,f,b);break;case"data":if(o!=="object"){ha(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=Ja(""+f),a.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&ot(a,o,"name",g.name,g,null),ot(a,o,"formEncType",g.formEncType,g,null),ot(a,o,"formMethod",g.formMethod,g,null),ot(a,o,"formTarget",g.formTarget,g,null)):(ot(a,o,"encType",g.encType,g,null),ot(a,o,"method",g.method,g,null),ot(a,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=Ja(""+f),a.setAttribute(c,f);break;case"onClick":f!=null&&(a.onclick=cf);break;case"onScroll":f!=null&&He("scroll",a);break;case"onScrollEnd":f!=null&&He("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}c=Ja(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""+f):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":f===!0?a.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,f):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(c,f):a.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(c):a.setAttribute(c,f);break;case"popover":He("beforetoggle",a),He("toggle",a),Ir(a,"popover",f);break;case"xlinkActuate":In(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":In(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":In(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":In(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":In(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":In(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":In(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":In(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":In(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ir(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ib.get(c)||c,Ir(a,c,f))}}function hm(a,o,c,f,g,b){switch(c){case"style":Qt(a,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof f=="string"?ya(a,f):(typeof f=="number"||typeof f=="bigint")&&ya(a,""+f);break;case"onScroll":f!=null&&He("scroll",a);break;case"onScrollEnd":f!=null&&He("scrollend",a);break;case"onClick":f!=null&&(a.onclick=cf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!su.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),b=a[at]||null,b=b!=null?b[c]:null,typeof b=="function"&&a.removeEventListener(o,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,f,g);break e}c in a?a[c]=f:f===!0?a.setAttribute(c,""):Ir(a,c,f)}}}function pn(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",a),He("load",a);var f=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ot(a,o,b,w,c,null)}}g&&ot(a,o,"srcSet",c.srcSet,c,null),f&&ot(a,o,"src",c.src,c,null);return;case"input":He("invalid",a);var T=b=w=g=null,M=null,H=null;for(f in c)if(c.hasOwnProperty(f)){var ne=c[f];if(ne!=null)switch(f){case"name":g=ne;break;case"type":w=ne;break;case"checked":M=ne;break;case"defaultChecked":H=ne;break;case"value":b=ne;break;case"defaultValue":T=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:ot(a,o,f,ne,c,null)}}hu(a,b,T,M,H,w,g,!1),dl(a);return;case"select":He("invalid",a),f=w=b=null;for(g in c)if(c.hasOwnProperty(g)&&(T=c[g],T!=null))switch(g){case"value":b=T;break;case"defaultValue":w=T;break;case"multiple":f=T;default:ot(a,o,g,T,c,null)}o=b,c=w,a.multiple=!!f,o!=null?ze(a,!!f,o,!1):c!=null&&ze(a,!!f,c,!0);return;case"textarea":He("invalid",a),b=g=f=null;for(w in c)if(c.hasOwnProperty(w)&&(T=c[w],T!=null))switch(w){case"value":f=T;break;case"defaultValue":g=T;break;case"children":b=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ot(a,o,w,T,c,null)}ur(a,f,g,b),dl(a);return;case"option":for(M in c)if(c.hasOwnProperty(M)&&(f=c[M],f!=null))switch(M){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ot(a,o,M,f,c,null)}return;case"dialog":He("beforetoggle",a),He("toggle",a),He("cancel",a),He("close",a);break;case"iframe":case"object":He("load",a);break;case"video":case"audio":for(f=0;f<Wl.length;f++)He(Wl[f],a);break;case"image":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"embed":case"source":case"link":He("error",a),He("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in c)if(c.hasOwnProperty(H)&&(f=c[H],f!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ot(a,o,H,f,c,null)}return;default:if(un(o)){for(ne in c)c.hasOwnProperty(ne)&&(f=c[ne],f!==void 0&&hm(a,o,ne,f,c,void 0));return}}for(T in c)c.hasOwnProperty(T)&&(f=c[T],f!=null&&ot(a,o,T,f,c,null))}function gN(a,o,c,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,w=null,T=null,M=null,H=null,ne=null;for(X in c){var se=c[X];if(c.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":M=se;default:f.hasOwnProperty(X)||ot(a,o,X,null,f,se)}}for(var F in f){var X=f[F];if(se=c[F],f.hasOwnProperty(F)&&(X!=null||se!=null))switch(F){case"type":b=X;break;case"name":g=X;break;case"checked":H=X;break;case"defaultChecked":ne=X;break;case"value":w=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,o));break;default:X!==se&&ot(a,o,F,X,f,se)}}Vr(a,w,T,M,H,ne,b,g);return;case"select":X=w=T=F=null;for(b in c)if(M=c[b],c.hasOwnProperty(b)&&M!=null)switch(b){case"value":break;case"multiple":X=M;default:f.hasOwnProperty(b)||ot(a,o,b,null,f,M)}for(g in f)if(b=f[g],M=c[g],f.hasOwnProperty(g)&&(b!=null||M!=null))switch(g){case"value":F=b;break;case"defaultValue":T=b;break;case"multiple":w=b;default:b!==M&&ot(a,o,g,b,f,M)}o=T,c=w,f=X,F!=null?ze(a,!!c,F,!1):!!f!=!!c&&(o!=null?ze(a,!!c,o,!0):ze(a,!!c,c?[]:"",!1));return;case"textarea":X=F=null;for(T in c)if(g=c[T],c.hasOwnProperty(T)&&g!=null&&!f.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(a,o,T,null,f,g)}for(w in f)if(g=f[w],b=c[w],f.hasOwnProperty(w)&&(g!=null||b!=null))switch(w){case"value":F=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&ot(a,o,w,g,f,b)}Xr(a,F,X);return;case"option":for(var ke in c)if(F=c[ke],c.hasOwnProperty(ke)&&F!=null&&!f.hasOwnProperty(ke))switch(ke){case"selected":a.selected=!1;break;default:ot(a,o,ke,null,f,F)}for(M in f)if(F=f[M],X=c[M],f.hasOwnProperty(M)&&F!==X&&(F!=null||X!=null))switch(M){case"selected":a.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:ot(a,o,M,F,f,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in c)F=c[je],c.hasOwnProperty(je)&&F!=null&&!f.hasOwnProperty(je)&&ot(a,o,je,null,f,F);for(H in f)if(F=f[H],X=c[H],f.hasOwnProperty(H)&&F!==X&&(F!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,o));break;default:ot(a,o,H,F,f,X)}return;default:if(un(o)){for(var st in c)F=c[st],c.hasOwnProperty(st)&&F!==void 0&&!f.hasOwnProperty(st)&&hm(a,o,st,void 0,f,F);for(ne in f)F=f[ne],X=c[ne],!f.hasOwnProperty(ne)||F===X||F===void 0&&X===void 0||hm(a,o,ne,F,f,X);return}}for(var U in c)F=c[U],c.hasOwnProperty(U)&&F!=null&&!f.hasOwnProperty(U)&&ot(a,o,U,null,f,F);for(se in f)F=f[se],X=c[se],!f.hasOwnProperty(se)||F===X||F==null&&X==null||ot(a,o,se,F,f,X)}var pm=null,mm=null;function uf(a){return a.nodeType===9?a:a.ownerDocument}function A1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function gm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ym=null;function yN(){var a=window.event;return a&&a.type==="popstate"?a===ym?!1:(ym=a,!0):(ym=null,!1)}var E1=typeof setTimeout=="function"?setTimeout:void 0,vN=typeof clearTimeout=="function"?clearTimeout:void 0,P1=typeof Promise=="function"?Promise:void 0,bN=typeof queueMicrotask=="function"?queueMicrotask:typeof P1<"u"?function(a){return P1.resolve(null).then(a).catch(xN)}:E1;function xN(a){setTimeout(function(){throw a})}function xi(a){return a==="head"}function w1(a,o){var c=o,f=0,g=0;do{var b=c.nextSibling;if(a.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<f&&8>f){c=f;var w=a.ownerDocument;if(c&1&&Zl(w.documentElement),c&2&&Zl(w.body),c&4)for(c=w.head,Zl(c),w=c.firstChild;w;){var T=w.nextSibling,M=w.nodeName;w[Rr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=T}}if(g===0){a.removeChild(b),oc(o);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:f=c.charCodeAt(0)-48;else f=0;c=b}while(c);oc(o)}function vm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":vm(c),Za(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function SN(a,o,c,f){for(;a.nodeType===1;){var g=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Rr])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Ur(a.nextSibling),a===null)break}return null}function AN(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=Ur(a.nextSibling),a===null))return null;return a}function bm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function CN(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var f=function(){o(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Ur(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var xm=null;function O1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function _1(a,o,c){switch(o=uf(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Zl(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Za(a)}var yr=new Map,T1=new Set;function ff(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Na=ee.d;ee.d={f:EN,r:PN,D:wN,C:ON,L:_N,m:TN,X:jN,S:DN,M:NN};function EN(){var a=Na.f(),o=tf();return a||o}function PN(a){var o=cn(a);o!==null&&o.tag===5&&o.type==="form"?Xx(o):Na.r(a)}var ws=typeof document>"u"?null:document;function D1(a,o,c){var f=ws;if(f&&typeof o=="string"&&o){var g=Gt(o);g='link[rel="'+a+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),T1.has(g)||(T1.add(g),a={rel:a,crossOrigin:c,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),pn(o,"link",a),kt(o),f.head.appendChild(o)))}}function wN(a){Na.D(a),D1("dns-prefetch",a,null)}function ON(a,o){Na.C(a,o),D1("preconnect",a,o)}function _N(a,o,c){Na.L(a,o,c);var f=ws;if(f&&a&&o){var g='link[rel="preload"][as="'+Gt(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Gt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Gt(c.imageSizes)+'"]')):g+='[href="'+Gt(a)+'"]';var b=g;switch(o){case"style":b=Os(a);break;case"script":b=_s(a)}yr.has(b)||(a=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),yr.set(b,a),f.querySelector(g)!==null||o==="style"&&f.querySelector(Jl(b))||o==="script"&&f.querySelector(ec(b))||(o=f.createElement("link"),pn(o,"link",a),kt(o),f.head.appendChild(o)))}}function TN(a,o){Na.m(a,o);var c=ws;if(c&&a){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Gt(f)+'"][href="'+Gt(a)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=_s(a)}if(!yr.has(b)&&(a=p({rel:"modulepreload",href:a},o),yr.set(b,a),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ec(b)))return}f=c.createElement("link"),pn(f,"link",a),kt(f),c.head.appendChild(f)}}}function DN(a,o,c){Na.S(a,o,c);var f=ws;if(f&&a){var g=da(f).hoistableStyles,b=Os(a);o=o||"default";var w=g.get(b);if(!w){var T={loading:0,preload:null};if(w=f.querySelector(Jl(b)))T.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},c),(c=yr.get(b))&&Sm(a,c);var M=w=f.createElement("link");kt(M),pn(M,"link",a),M._p=new Promise(function(H,ne){M.onload=H,M.onerror=ne}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,df(w,o,f)}w={type:"stylesheet",instance:w,count:1,state:T},g.set(b,w)}}}function jN(a,o){Na.X(a,o);var c=ws;if(c&&a){var f=da(c).hoistableScripts,g=_s(a),b=f.get(g);b||(b=c.querySelector(ec(g)),b||(a=p({src:a,async:!0},o),(o=yr.get(g))&&Am(a,o),b=c.createElement("script"),kt(b),pn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function NN(a,o){Na.M(a,o);var c=ws;if(c&&a){var f=da(c).hoistableScripts,g=_s(a),b=f.get(g);b||(b=c.querySelector(ec(g)),b||(a=p({src:a,async:!0,type:"module"},o),(o=yr.get(g))&&Am(a,o),b=c.createElement("script"),kt(b),pn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function j1(a,o,c,f){var g=(g=re.current)?ff(g):null;if(!g)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Os(c.href),c=da(g).hoistableStyles,f=c.get(o),f||(f={type:"style",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Os(c.href);var b=da(g).hoistableStyles,w=b.get(a);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,w),(b=g.querySelector(Jl(a)))&&!b._p&&(w.instance=b,w.state.loading=5),yr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},yr.set(a,c),b||kN(g,a,c,w.state))),o&&f===null)throw Error(r(528,""));return w}if(o&&f!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=_s(c),c=da(g).hoistableScripts,f=c.get(o),f||(f={type:"script",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Os(a){return'href="'+Gt(a)+'"'}function Jl(a){return'link[rel="stylesheet"]['+a+"]"}function N1(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function kN(a,o,c,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),pn(o,"link",c),kt(o),a.head.appendChild(o))}function _s(a){return'[src="'+Gt(a)+'"]'}function ec(a){return"script[async]"+a}function k1(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+Gt(c.href)+'"]');if(f)return o.instance=f,kt(f),f;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),kt(f),pn(f,"style",g),df(f,c.precedence,a),o.instance=f;case"stylesheet":g=Os(c.href);var b=a.querySelector(Jl(g));if(b)return o.state.loading|=4,o.instance=b,kt(b),b;f=N1(c),(g=yr.get(g))&&Sm(f,g),b=(a.ownerDocument||a).createElement("link"),kt(b);var w=b;return w._p=new Promise(function(T,M){w.onload=T,w.onerror=M}),pn(b,"link",f),o.state.loading|=4,df(b,c.precedence,a),o.instance=b;case"script":return b=_s(c.src),(g=a.querySelector(ec(b)))?(o.instance=g,kt(g),g):(f=c,(g=yr.get(b))&&(f=p({},c),Am(f,g)),a=a.ownerDocument||a,g=a.createElement("script"),kt(g),pn(g,"link",f),a.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,df(f,c.precedence,a));return o.instance}function df(a,o,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,w=0;w<f.length;w++){var T=f[w];if(T.dataset.precedence===o)b=T;else if(b!==g)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function Sm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Am(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var hf=null;function M1(a,o,c){if(hf===null){var f=new Map,g=hf=new Map;g.set(c,f)}else g=hf,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(a))return f;for(f.set(a,null),c=c.getElementsByTagName(a),g=0;g<c.length;g++){var b=c[g];if(!(b[Rr]||b[At]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(o)||"";w=a+w;var T=f.get(w);T?T.push(b):f.set(w,[b])}}return f}function R1(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function MN(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function I1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var tc=null;function RN(){}function IN(a,o,c){if(tc===null)throw Error(r(475));var f=tc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Os(c.href),b=a.querySelector(Jl(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=pf.bind(f),a.then(f,f)),o.state.loading|=4,o.instance=b,kt(b);return}b=a.ownerDocument||a,c=N1(c),(g=yr.get(g))&&Sm(c,g),b=b.createElement("link"),kt(b);var w=b;w._p=new Promise(function(T,M){w.onload=T,w.onerror=M}),pn(b,"link",c),o.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=pf.bind(f),a.addEventListener("load",o),a.addEventListener("error",o))}}function LN(){if(tc===null)throw Error(r(475));var a=tc;return a.stylesheets&&a.count===0&&Cm(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&Cm(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function pf(){if(this.count--,this.count===0){if(this.stylesheets)Cm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var mf=null;function Cm(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,mf=new Map,o.forEach($N,a),mf=null,pf.call(a))}function $N(a,o){if(!(o.state.loading&4)){var c=mf.get(a);if(c)var f=c.get(null);else{c=new Map,mf.set(a,c);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var w=g[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),f=w)}f&&c.set(null,f)}g=o.instance,w=g.getAttribute("data-precedence"),b=c.get(w)||f,b===f&&c.set(null,g),c.set(w,g),this.count++,f=pf.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),o.state.loading|=4}}var nc={$$typeof:_,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function BN(a,o,c,f,g,b,w,T){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ko(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.hiddenUpdates=Ko(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function L1(a,o,c,f,g,b,w,T,M,H,ne,se){return a=new BN(a,o,c,w,T,M,H,se),o=1,b===!0&&(o|=24),b=Xn(3,null,null,o),a.current=b,b.stateNode=a,o=ap(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:o},lp(b),a}function $1(a){return a?(a=is,a):is}function B1(a,o,c,f,g,b){g=$1(g),f.context===null?f.context=g:f.pendingContext=g,f=si(o),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=li(a,f,o),c!==null&&(er(c,a,o),Nl(c,a,o))}function U1(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function Em(a,o){U1(a,o),(a=a.alternate)&&U1(a,o)}function z1(a){if(a.tag===13){var o=as(a,67108864);o!==null&&er(o,a,67108864),Em(a,67108864)}}var gf=!0;function UN(a,o,c,f){var g=$.T;$.T=null;var b=ee.p;try{ee.p=2,Pm(a,o,c,f)}finally{ee.p=b,$.T=g}}function zN(a,o,c,f){var g=$.T;$.T=null;var b=ee.p;try{ee.p=8,Pm(a,o,c,f)}finally{ee.p=b,$.T=g}}function Pm(a,o,c,f){if(gf){var g=wm(f);if(g===null)dm(a,o,f,yf,c),H1(a,f);else if(HN(g,a,o,c,f))f.stopPropagation();else if(H1(a,f),o&4&&-1<GN.indexOf(a)){for(;g!==null;){var b=cn(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=Nr(b.pendingLanes);if(w!==0){var T=b;for(T.pendingLanes|=2,T.entangledLanes|=2;w;){var M=1<<31-zt(w);T.entanglements[1]|=M,w&=~M}ta(b),(et&6)===0&&(Ju=pt()+500,Xl(0))}}break;case 13:T=as(b,2),T!==null&&er(T,b,2),tf(),Em(b,2)}if(b=wm(f),b===null&&dm(a,o,f,yf,c),b===g)break;g=b}g!==null&&f.stopPropagation()}else dm(a,o,f,null,c)}}function wm(a){return a=Zi(a),Om(a)}var yf=null;function Om(a){if(yf=null,a=Fe(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return yf=a,null}function G1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yr()){case Xa:return 2;case Fr:return 8;case Gi:case il:return 32;case Hi:return 268435456;default:return 32}default:return 32}}var _m=!1,Si=null,Ai=null,Ci=null,rc=new Map,ac=new Map,Ei=[],GN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H1(a,o){switch(a){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":Ai=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":rc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(o.pointerId)}}function ic(a,o,c,f,g,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},o!==null&&(o=cn(o),o!==null&&z1(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),a)}function HN(a,o,c,f,g){switch(o){case"focusin":return Si=ic(Si,a,o,c,f,g),!0;case"dragenter":return Ai=ic(Ai,a,o,c,f,g),!0;case"mouseover":return Ci=ic(Ci,a,o,c,f,g),!0;case"pointerover":var b=g.pointerId;return rc.set(b,ic(rc.get(b)||null,a,o,c,f,g)),!0;case"gotpointercapture":return b=g.pointerId,ac.set(b,ic(ac.get(b)||null,a,o,c,f,g)),!0}return!1}function q1(a){var o=Fe(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,fa(a.priority,function(){if(c.tag===13){var f=Jn();f=ua(f);var g=as(c,f);g!==null&&er(g,c,f),Em(c,f)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function vf(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=wm(a.nativeEvent);if(c===null){c=a.nativeEvent;var f=new c.constructor(c.type,c);pu=f,c.target.dispatchEvent(f),pu=null}else return o=cn(c),o!==null&&z1(o),a.blockedOn=c,!1;o.shift()}return!0}function Y1(a,o,c){vf(a)&&c.delete(o)}function qN(){_m=!1,Si!==null&&vf(Si)&&(Si=null),Ai!==null&&vf(Ai)&&(Ai=null),Ci!==null&&vf(Ci)&&(Ci=null),rc.forEach(Y1),ac.forEach(Y1)}function bf(a,o){a.blockedOn===o&&(a.blockedOn=null,_m||(_m=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qN)))}var xf=null;function F1(a){xf!==a&&(xf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){xf===a&&(xf=null);for(var o=0;o<a.length;o+=3){var c=a[o],f=a[o+1],g=a[o+2];if(typeof f!="function"){if(Om(f||c)===null)continue;break}var b=cn(c);b!==null&&(a.splice(o,3),o-=3,Op(b,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function oc(a){function o(M){return bf(M,a)}Si!==null&&bf(Si,a),Ai!==null&&bf(Ai,a),Ci!==null&&bf(Ci,a),rc.forEach(o),ac.forEach(o);for(var c=0;c<Ei.length;c++){var f=Ei[c];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Ei.length&&(c=Ei[0],c.blockedOn===null);)q1(c),c.blockedOn===null&&Ei.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],b=c[f+1],w=g[at]||null;if(typeof b=="function")w||F1(c);else if(w){var T=null;if(b&&b.hasAttribute("formAction")){if(g=b,w=b[at]||null)T=w.formAction;else if(Om(g)!==null)continue}else T=w.action;typeof T=="function"?c[f+1]=T:(c.splice(f,3),f-=3),F1(c)}}}function Tm(a){this._internalRoot=a}Sf.prototype.render=Tm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,f=Jn();B1(c,f,a,o,null,null)},Sf.prototype.unmount=Tm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;B1(a.current,2,null,a,null,null),tf(),o[ln]=null}};function Sf(a){this._internalRoot=a}Sf.prototype.unstable_scheduleHydration=function(a){if(a){var o=Fn();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Ei.length&&o!==0&&o<Ei[c].priority;c++);Ei.splice(c,0,a),c===0&&q1(a)}};var K1=t.version;if(K1!=="19.1.1")throw Error(r(527,K1,"19.1.1"));ee.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(o),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var YN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{qi=Af.inject(YN),vn=Af}catch{}}return lc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,f="",g=cS,b=uS,w=fS,T=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(T=o.unstable_transitionCallbacks)),o=L1(a,1,!1,null,null,c,f,g,b,w,T,null),a[ln]=o.current,fm(a),new Tm(o)},lc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var f=!1,g="",b=cS,w=uS,T=fS,M=null,H=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(M=c.unstable_transitionCallbacks),c.formState!==void 0&&(H=c.formState)),o=L1(a,1,!0,o,c??null,f,g,b,w,T,M,H),o.context=$1(null),c=o.current,f=Jn(),f=ua(f),g=si(f),g.callback=null,li(c,g,f),c=f,o.current.lanes=c,Vo(o,c),ta(o),a[ln]=o.current,fm(a),new Sf(o)},lc.version="19.1.1",lc}var rA;function tk(){if(rA)return Nm.exports;rA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Nm.exports=ek(),Nm.exports}var nk=tk();const rk=Hr(nk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ik=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),aA=e=>{const t=ik(e);return t.charAt(0).toUpperCase()+t.slice(1)},jw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),ok=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},d)=>C.createElement("svg",{ref:d,...sk,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:jw("lucide",i),...!s&&!ok(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,p])=>C.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(e,t)=>{const n=C.forwardRef(({className:r,...i},s)=>C.createElement(lk,{ref:s,iconNode:t,className:jw(`lucide-${ak(aA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=aA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],_c=bt("bolt",ck);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],fk=bt("bomb",uk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hk=bt("chevron-down",dk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],iA=bt("chevron-right",pk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Cc=bt("chevron-up",mk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nw=bt("clock",gk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],kw=bt("copy",yk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],oA=bt("cpu",vk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xk=bt("download",bk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sA=bt("eye",Sk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Ck=bt("hand",Ak);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Pv=bt("loader-circle",Ek);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],by=bt("rocket",Pk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ok=bt("rotate-ccw",wk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lA=bt("settings",_k);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bf=bt("shield-check",Tk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Im=bt("shield",Dk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Nk=bt("skull",jk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],xy=bt("sword",kk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Rk=bt("target",Mk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Lk=bt("upload",Ik);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Mw=bt("user",$k);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],cA=bt("wrench",Bk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kt=bt("x",Uk),_n=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",icon:Im,effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",icon:fk,effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",icon:cA,targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:2,image:"/img/Interceptor.png",abilities:[{name:"Vigilant",description:"Can always intercept attacks in this lane, regardless of speed.",type:"PASSIVE",icon:Bf,effect:{type:"GRANT_KEYWORD",keyword:"ALWAYS_INTERCEPTS"}},{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",icon:Im,effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",icon:Im,scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",icon:Nk,effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",icon:Rk,targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",icon:xy,effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",icon:Cc,effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",icon:xy,effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",icon:iA,effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",icon:iA,effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",icon:cA,targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],zk=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD022",baseCardId:"CARD022",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD023",baseCardId:"CARD023",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],uA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},Ni=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Ha=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=Ni(l),d={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const p in l.middleLaneBonus)d.hasOwnProperty(p)&&(d[p]+=l.middleLaneBonus[p]);r[s]=d}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},Pr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=_n.find(y=>y.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,d=s.speed,h=s.shields,p=s.class;l.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(d+=y.mod.value),y.mod.stat==="shields"&&(h+=y.mod.value),y.mod.stat==="cost"&&(p+=y.mod.value)}),p=Math.max(0,p);let m={...e,attack:u,speed:d,maxShields:h,cost:p,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(m.attack+=y.value),y.stat==="speed"&&(m.speed+=y.value),y.stat==="cost"&&(m.cost=Math.max(0,m.cost+y.value))}),s.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&m.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:x,mod:S}=y.effect;let A=!1;if(x.type==="SHIP_SECTION_HULL_DAMAGED"&&x.location==="SAME_LANE"){const E=parseInt(t.slice(-1))-1,O=(n.name==="Player 1"?i.player1:i.player2)[E];if(O){const _=n.shipSections[O],N=Ni(_);(N==="damaged"||N==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(m.attack+=S.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:x,mod:S}=y.effect;let A=0;if(x.type==="OWN_DAMAGED_SECTIONS")for(const E in n.shipSections){const P=n.shipSections[E],O=Ni(P);(O==="damaged"||O==="critical")&&A++}A>0&&(S.stat==="attack"&&(m.attack+=S.value*A),S.stat==="speed"&&(m.speed+=S.value*A))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(x=>{x.stat==="attack"&&(m.attack+=x.value),x.stat==="speed"&&(m.speed+=x.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;_n.find(S=>S.name===y.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:E}=S.effect;A==="shields"?m.maxShields+=E:A==="attack"?m.attack+=E:A==="speed"&&(m.speed+=E)}})}),l.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(x=>{if(x.type==="PASSIVE"&&(x.effect.type==="GRANT_KEYWORD"&&m.keywords.add(x.effect.keyword),x.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=x.effect;S==="attack"&&(m.attack+=A),S==="speed"&&(m.speed+=A),S==="shields"&&(m.maxShields+=A)}})}),m},Gk=(e,t)=>({...e,instanceId:t}),Ds=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],Rw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=zk.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(Gk(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},wv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},Hk=(e,t)=>{const n=Ha({shipSections:uA},[]).totals;return{name:e,shipSections:uA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:Rw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Tc=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},Iw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},Vs=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=Pr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},sa=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},Ec=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],h=!(typeof n.cost=="number"),{type:p,affinity:m,location:y,custom:x}=n.targeting;let S=null;if(h&&Object.values(s.dronesOnBoard).flat().some(O=>O.id===t.id)&&(S=sa(t.id,s),!S))return[];const A=(P,O)=>{Object.entries(P.dronesOnBoard).forEach(([_,N])=>{let j=!1;y==="ANY_LANE"&&(j=!0),h&&y==="SAME_LANE"&&(j=_===S),j&&N.forEach(D=>{let R=!0;if(x?.includes("DAMAGED_HULL")){const k=_n.find(B=>B.name===D.name);(!k||D.hull>=k.hull)&&(R=!1)}x?.includes("EXHAUSTED")&&(D.isExhausted||(R=!1)),R&&u.push({...D,lane:_,owner:O})})})},E=(P,O)=>{Object.keys(P.shipSections).forEach(_=>{u.push({id:_,owner:O,...P.shipSections[_]})})};if(p==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(s,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(p==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&E(s,e),(m==="ENEMY"||m==="ANY")&&E(l,e==="player1"?"player2":"player1");else if(p==="LANE")["lane1","lane2","lane3"].forEach(P=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:P,owner:e}),m==="ENEMY"||m==="ANY"){const O=e==="player1"?"player2":"player1";u.push({id:P,owner:O})}});else if(p==="DRONE_CARD"){const P=e==="player1"?r:i;P.activeDronePool.forEach(O=>{const _=_n.find(R=>R.name===O.name),N=P.appliedUpgrades[O.name]||[],j=N.filter(R=>R.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;_&&N.length<_.upgradeSlots&&j<D&&u.push({...O,id:O.name,owner:e})})}else if(p==="APPLIED_UPGRADE"){const P=m==="ENEMY"?l:s,O=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(P.dronesOnBoard).flat().forEach(_=>{(P.appliedUpgrades[_.name]||[]).length>0&&u.push({..._,owner:O})})}return u},Lw=(e,t,n,r,i)=>{const s=_n.find(h=>h.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const d=s.abilities.filter(h=>h.type==="TRIGGERED"&&h.trigger==="ON_MOVE");if(d.length>0){const h=l.dronesOnBoard[r].findIndex(p=>p.id===t.id);if(h!==-1){const p=l.dronesOnBoard[r][h];d.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),p.statMods||(p.statMods=[]),m.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,p.statMods.push(y.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},$w=(e,t)=>{const n=_n.find(u=>u.name===t.name);if(!n?.abilities)return{newState:e,effects:[]};let r=JSON.parse(JSON.stringify(e));const i=[];let s=!1;return n.abilities.filter(u=>u.effect?.type==="AFTER_ATTACK").forEach(u=>{const{subEffect:d}=u.effect;if(d.type==="DESTROY_SELF")for(const h in r.dronesOnBoard){const p=r.dronesOnBoard[h].findIndex(m=>m.id===t.id);if(p!==-1){s=!0;const m=r.dronesOnBoard[h][p];i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', destroying itself.`}}),i.push({type:"EXPLOSION",payload:{targetId:t.id}}),r.dronesOnBoard[h]=r.dronesOnBoard[h].filter(y=>y.id!==t.id),Object.assign(r,Tc(r,m));break}}else if(d.type==="PERMANENT_STAT_MOD")for(const h in r.dronesOnBoard){const p=r.dronesOnBoard[h].findIndex(m=>m.id===t.id);if(p!==-1){s=!0,r.dronesOnBoard[h][p].statMods||(r.dronesOnBoard[h][p].statMods=[]),i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', gaining a permanent +${d.mod.value} ${d.mod.stat}.`}}),r.dronesOnBoard[h][p].statMods.push(d.mod);break}}}),{newState:s?r:e,effects:i}},Sy=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>Ni(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},Bw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=_n.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const d=t.class;let h=0,p=0;return n===1?(p=Math.min(e.initialDeploymentBudget,d),h=d-p):(p=Math.min(e.deploymentBudget,d),h=d-p),e.energy<h?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${h} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:p,energyCost:h}},Uw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},Ov=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=wv(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},qk=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},Yk=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")Uw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=Ov(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},Fk=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Ov(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},Kk=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Ha(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(d=>{l[d]={...n.shipSections[d],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},Vk=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,d=Ha(s,l).totals.shieldsPerTurn,h=JSON.parse(JSON.stringify(s.shipSections)),p=Object.keys(h);let m=d,y=0,x=0;for(;m>0&&x<100;){const P=p[y%p.length],O=h[P],_=wv(P,s,l);O.allocatedShields<_&&(O.allocatedShields++,m--),y++,x++}const S={...s,shipSections:h},E={success:!0,newPhase:"deployment",firstPlayer:Id(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(E.player1State=i,E.player2State=S):(E.player1State=S,E.player2State=i),E},Xk=(e,t,n,r,i,s,l)=>{const{effect:u,cost:d}=e,h=r.player1;let p="",m="Ability effect applied.";e.targeting?.type==="LANE"?p=`Lane ${n.id.slice(-1)}`:n&&(p=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${p}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${p}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${p}.`),s&&s({player:h.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:p,outcome:m});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(d.energy&&(y.player1.energy-=d.energy),d.exhausts)for(const S in y.player1.dronesOnBoard){const A=y.player1.dronesOnBoard[S].findIndex(E=>E.id===t.id);if(A!==-1){y.player1.dronesOnBoard[S][A].isExhausted=!0;break}}const x=Kw(u,t,n,y,i,{resolveAttackCallback:l});return y.player1=x.newPlayerStates.player1,y.player2=x.newPlayerStates.player2,{newPlayerStates:y,shouldEndTurn:!u.goAgain}},Wk=(e,t,n,r,i,s,l)=>{const{cost:u,effect:d}=e,h=r.player1;s&&s({player:h.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const p={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.player1.energy-=u.energy,d.type==="REALLOCATE_SHIELDS")return{newPlayerStates:p,shouldEndTurn:!1,requiresShieldReallocation:!0};{const m=Vw(d,t,n,p,i,{resolveAttackCallback:l});if(p.player1=m.newPlayerStates.player1,p.player2=m.newPlayerStates.player2,m.needsDiscardSelection)return{newPlayerStates:p,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0}}}return{newPlayerStates:p,shouldEndTurn:!0}},zw=(e,t,n,r,i,s,l)=>{const u=Bw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Ha(r,s.player1));if(!u.isValid)return{success:!1,error:u.reason,message:u.message,newPlayerState:r};const{budgetCost:d,energyCost:h}=u;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const p=JSON.parse(JSON.stringify(r)),m={...p.dronesOnBoard,[t]:[...p.dronesOnBoard[t],{...e,id:0}]},y={...p,dronesOnBoard:m},x=Pr(e,t,y,i,s),S={...e,id:Date.now(),statMods:[],currentShields:x.maxShields,currentMaxShields:x.maxShields,hull:e.hull,isExhausted:!1};return p.dronesOnBoard[t].push(S),p.deployedDroneCounts={...p.deployedDroneCounts,[e.name]:(p.deployedDroneCounts[e.name]||0)+1},n===1?p.initialDeploymentBudget-=d:p.deploymentBudget-=d,p.energy-=h,p.dronesOnBoard=Vs(p,i,s),{success:!0,newPlayerState:p,deployedDrone:S}},Qk=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return Sy(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):Sy(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},Zk=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=sa(e.id,t);if(!i)return[];const s=Pr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(d=>{const h=Pr(d,i,n,t,r);return!d.isExhausted&&(h.speed>s.speed||h.keywords.has("ALWAYS_INTERCEPTS"))}).map(d=>d.id)},Jk=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,d=e.class;let h=0;n===1?h=Math.min(r.initialDeploymentBudget,d):h=Math.min(r.deploymentBudget,d);const p=d-h;if(r.energy<p)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-h:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-h:r.deploymentBudget,energy:r.energy-p};return y.dronesOnBoard=Vs(y,i,s),{success:!0,newPlayerState:y,deployedDrone:m,costs:{energy:p,budget:h}}},eM=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l}=e,u=Pr(r,l,t.player2,t.player1,n),d=t.player1.dronesOnBoard[l].filter(h=>{const p=Pr(h,l,t.player1,t.player2,n);return!h.isExhausted&&(p.speed>u.speed||p.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||h.id!==i.id)});return{hasInterceptors:d.length>0,interceptors:d,attackDetails:e}},_v=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},tM=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},nM=(e,t)=>{const n=_v(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},rM=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=Id(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},aM=(e,t,n,r)=>{const i=Ay(e.player1,t,n,e.player2,e.placedSections),s=Ay(e.player2,t,r,e.player1,e.opponentPlacedSections),l=Cy(i,n.totals.handLimit),u=Cy(s,r.totals.handLimit),d=Id(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),h={...e,turn:t,turnPhase:"deployment",currentPlayer:d,firstPlayerOfRound:d,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},p=[{type:"ROUND_START",turn:t,firstPlayer:d},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:h,uiEffects:p}},Gw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=Pr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},Ay=(e,t,n,r,i)=>({...Gw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),Cy=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},iM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:d,opponentPlacedSections:h}=e,{addLogEntry:p,setPlayer2:m,setPendingAttack:y,endTurn:x,endDeploymentPhase:S,endActionPhase:A,setPassInfo:E}=n;let P;return l==="deployment"&&!u.player2Passed?P=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:h,placedSections:d,getShipStatus:Ni,calculateEffectiveShipStats:Ha,calculateEffectiveStats:Pr,addLogEntry:p}):l==="action"&&!u.player2Passed&&(P=t.handleOpponentAction({player1:r,player2:i,placedSections:d,opponentPlacedSections:h,getShipStatus:Ni,getLaneOfDrone:sa,getValidTargets:Ec,calculateEffectiveStats:Pr,addLogEntry:p})),P||null},oM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:d}=t,{addLogEntry:h,setPlayer2:p,setPendingAttack:m,endTurn:y,endDeploymentPhase:x,endActionPhase:S,setPassInfo:A,resolveCardPlay:E}=n;if(e.type==="pass"){const P=!t.passInfo.player1Passed,O={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(P?"player2":null)};return A(O),O.player1Passed?l==="deployment"?x():l==="action"&&S():y("player2"),{newPassInfo:O}}else if(e.type==="deploy"){const{droneToDeploy:P,targetLane:O,logContext:_}=e.payload;h({player:i.name,actionType:"DEPLOY",source:P.name,target:O,outcome:`Deployed to ${O}.`},"aiDeploymentDeploy",_);const N=zw(P,O,i,r,s,{player1:u,player2:d});return N.success&&(p(N.newPlayerState),y("player2")),{deployedDrone:N.deployedDrone}}else if(e.type==="action"){const P=e.payload,{logContext:O}=e;switch(P.type){case"play_card":E(P.card,P.target,"player2",O);break;case"attack":m({attacker:P.attacker,target:P.target,targetType:P.targetType,lane:P.attacker.lane,attackingPlayer:"player2",aiContext:O});break;case"move":{const{drone:_,fromLane:N,toLane:j}=P;h({player:i.name,actionType:"MOVE",source:_.name,target:j,outcome:`Moved from ${N} to ${j}.`},"aiActionMove",O);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[N]=D.dronesOnBoard[N].filter(B=>B.id!==_.id);const R={..._,isExhausted:!0};D.dronesOnBoard[j].push(R);const{newState:k}=Lw(D,R,N,j,h);k.dronesOnBoard=Vs(k,r,{player1:u,player2:d}),p(k),y("player2");break}default:y("player2");break}return{action:P}}return null},sM=(e,t,n,r,i,s,l,u)=>{const{cost:d,effect:h}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=d,x.hand=x.hand.filter(P=>P.instanceId!==e.instanceId),x.discardPile.push(e);const S=new Set(t.map(P=>P.id));x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(P=>!S.has(P.id));const A=t.map(P=>({...P,isExhausted:P.isExhausted||!h.properties?.includes("DO_NOT_EXHAUST")}));x.dronesOnBoard[r].push(...A),p({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(P=>P.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let E=x;return A.forEach(P=>{const{newState:O}=m(E,P,n,r,p);E=O}),E.dronesOnBoard=y(E,s,l),{newPlayerState:E,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},lM=(e,t,n,r,i,s,l,u)=>{const{cost:d,effect:h}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=d,x.hand=x.hand.filter(E=>E.instanceId!==e.instanceId),x.discardPile.push(e),x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(E=>E.id!==t.id);const S={...t,isExhausted:h.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};x.dronesOnBoard[r].push(S),p({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(x,S,n,r,p);return A.dronesOnBoard=y(A,s,l),{newPlayerState:A,shouldEndTurn:!1,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},cM=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Hw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=Ni(i);(s==="damaged"||s==="critical")&&n++}return n},uM=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:d,resolveAttackCallback:h}=s,p=t?t.name||t.id:"N/A";let m="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(m=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(m=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(m=`Healed ${y.value} hull on ${p}.`),y.type==="HEAL_SHIELDS"&&(m=`Healed ${y.value} shields on ${p}.`),y.type==="READY_DRONE"&&(m=`Readied ${p}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?m=`Dealt ${y.value} damage to filtered targets in ${p}.`:m=`Dealt ${y.value} damage to ${p}.`),y.type==="MODIFY_STAT"){const A=y.mod,E=A.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${p} a ${A.value>0?"+":""}${A.value} ${A.stat} bonus${E}.`}if(y.type==="REPEATING_EFFECT"){const A=r[n],E=Hw(y.condition,A);m=`Drew ${E} card(s) and gained ${E} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:p,outcome:m});let x=cM(e,n,r);const S=fM(e.effect,t,n,x,i,s,e);if(!S.needsCardSelection){const A=qw(e,n,S.newPlayerStates);return{newPlayerStates:A.newPlayerStates,shouldEndTurn:A.shouldEndTurn,additionalEffects:S.additionalEffects||[],needsCardSelection:!1}}return{newPlayerStates:x,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],needsCardSelection:S.needsCardSelection}},qw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},fM=(e,t,n,r,i,s,l=null)=>e.effects?dM(e,t,n,r,i,s,l):Yw(e,t,n,r,i,s,l),dM=(e,t,n,r,i,s,l=null)=>{let u=r,d=[];if(e.type==="REPEATING_EFFECT"){const h=Hw(e.condition,u[n]);for(let p=0;p<h;p++)for(const m of e.effects){const y=Yw(m,t,n,u,i,s,l);u=y.newPlayerStates,y.additionalEffects&&d.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:d}},Yw=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return Dv(e,null,t,n,r);case"SEARCH_AND_DRAW":return Fw(e,null,t,n,r);case"GAIN_ENERGY":return hM(e,n,r,i);case"READY_DRONE":return pM(e,t,n,r);case"HEAL_HULL":return Tv(e,null,t,n,r);case"HEAL_SHIELDS":return mM(e,t,n,r);case"DAMAGE":return Rd(e,null,t,n,r,i,s,l);case"DESTROY":return yM(e,t,n,r,s);case"MODIFY_STAT":return vM(e,t,n,r);case"MODIFY_DRONE_BASE":return bM(e,t,n,r);case"DESTROY_UPGRADE":return xM(e,t,n,r);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},hM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,d=Ha(l,u).totals,h=Math.min(d.maxEnergy,l.energy+e.value);return l.energy=h,{newPlayerStates:s,additionalEffects:[]}},pM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const d=l.dronesOnBoard[u].findIndex(h=>h.id===t.id);if(d!==-1){l.dronesOnBoard[u][d].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},mM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n];for(const u in l.dronesOnBoard){const d=l.dronesOnBoard[u].findIndex(h=>h.id===t.id);if(d!==-1){const h=l.dronesOnBoard[u][d];h.currentShields=Math.min(h.currentMaxShields||h.shields,h.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},gM=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,h=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[h].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${h} ${u}`),console.log(`[DEBUG] Drones in ${h} ${u}:`,m.map(O=>`${O.name}(${O.id}) [${O.hull}hp, ${O.speed}spd]`));const{stat:y,comparison:x,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},P=A[h].dronesOnBoard[u]||[];for(let O=P.length-1;O>=0;O--){const _=P[O];let N=!1;if(x==="GTE"&&_[y]>=S&&(N=!0),x==="LTE"&&_[y]<=S&&(N=!0),console.log(`[DEBUG] ${_.name} ${y}=${_[y]} ${x} ${S} = ${N}`),N){console.log(`[DEBUG] Applying ${e.value} damage to ${_.name}`);const j=_.currentShields||0;let D=e.value;const R=Math.min(D,j);_.currentShields=(_.currentShields||0)-R,D-=R,D>0&&(_.hull-=D),_.hull<=0&&(console.log(`[DEBUG] ${_.name} destroyed`),P.splice(O,1))}}return{newPlayerStates:A,additionalEffects:[]}}else{const u=r[t.owner],d=sa(t.id,u);if(d){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=h[t.owner].dronesOnBoard[d]||[],y=m.find(x=>x.id===t.id);if(y){let x=e.value,S=0,A=x;if(e.damageType!=="PIERCING"&&(S=Math.min(x,y.currentShields),A-=S,y.currentShields-=S),y.hull-=A,console.log(`[DEBUG] Applied ${A} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){console.log(`[DEBUG] ${y.name} destroyed`);const E=m.findIndex(P=>P.id===t.id);E>=0&&m.splice(E,1)}}return{newPlayerStates:h,additionalEffects:[]}}}return{newPlayerStates:r,additionalEffects:[]}},yM=(e,t,n,r,i)=>{const{explosionCallback:s}=i,l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},d=l[n==="player1"?"player2":"player1"];if(e.scope==="LANE"&&t.id){const h=t.id;(d.dronesOnBoard[h]||[]).forEach(m=>{s&&s(m.id);const y=Tc(d,m);d.deployedDroneCounts={...d.deployedDroneCounts||{},...y.deployedDroneCounts}}),d.dronesOnBoard[h]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const h=sa(t.id,d);if(h){const p=d.dronesOnBoard[h].find(m=>m.id===t.id);if(p){s&&s(p.id);const m=Tc(d,p);d.deployedDroneCounts={...d.deployedDroneCounts||{},...m.deployedDroneCounts},d.dronesOnBoard[h]=d.dronesOnBoard[h].filter(y=>y.id!==t.id)}}}return{newPlayerStates:l,additionalEffects:[]}},vM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&t.id.startsWith("lane")){const d=t.id;l.dronesOnBoard[d]&&l.dronesOnBoard[d].forEach(h=>{h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const d in l.dronesOnBoard){const h=l.dronesOnBoard[d].findIndex(p=>p.id===t.id);if(h!==-1){const p=l.dronesOnBoard[d][h];p.statMods||(p.statMods=[]),p.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},bM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,d=l.appliedUpgrades[u]||[],h={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(h.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...d,h]},{newPlayerStates:s,additionalEffects:[]}},xM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:d,instanceId:h}=t;if(u.appliedUpgrades[d]){const p=u.appliedUpgrades[d].filter(m=>m.instanceId!==h);p.length>0?u.appliedUpgrades[d]=p:delete u.appliedUpgrades[d]}return{newPlayerStates:s,additionalEffects:[]}},Rd=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:d}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return gM(e,n,r,i,l,u?.targeting);const h=n.owner==="player1"?i.player1:i.player2,p=sa(n.id,h);if(p&&d){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:p,damageType:e.damageType},y=Ww(m,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[]}}return{newPlayerStates:i,additionalEffects:[]}},Tv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1";if(e.scope==="LANE"){const h=n.id;u[d].dronesOnBoard[h]&&u[d].dronesOnBoard[h].forEach(p=>{const m=_n.find(y=>y.name===p.name);m&&p.hull<m.hull&&(p.hull=Math.min(m.hull,p.hull+e.value))})}else{const h=_n.find(m=>m.name===n.name),p=sa(n.id,u[d]);if(p){const m=u[d].dronesOnBoard[p].findIndex(y=>y.id===n.id);m!==-1&&(u[d].dronesOnBoard[p][m].hull=Math.min(h.hull,u[d].dronesOnBoard[p][m].hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},Dv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1",h=u[d];let p=[...h.deck],m=[...h.hand],y=[...h.discardPile];const x=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<x;A++){if(p.length===0)if(y.length>0)p=[...y].sort(()=>.5-Math.random()),y=[];else break;p.length>0&&m.push(p.pop())}u[d]={...h,deck:p,hand:m,discardPile:y};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},SM=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),Fw=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1",h=u[d];let p=[...h.deck],m=[...h.discardPile],y,x;if(e.filter)p.length===0&&m.length>0&&(p=[...m.sort(()=>.5-Math.random())],m=[]),y=p.filter(A=>SM(A,e.filter)).slice(0,e.searchCount),x=p.filter(A=>!y.includes(A));else{const S=e.searchCount;p.length<S&&m.length>0&&(p=[...p,...m.sort(()=>.5-Math.random())],m=[]),y=p.slice(-e.searchCount).reverse(),x=p.slice(0,-e.searchCount)}if(d==="player2"){const S=AM(y,e.drawCount,u),A=y.filter(O=>!S.includes(O)),E=[...h.hand,...S];let P=[...x,...A];return e.shuffleAfter&&(P=P.sort(()=>.5-Math.random())),u[d]={...h,deck:P,hand:E,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:x,discardPile:m,filter:e.filter}}},AM=(e,t,n,r)=>e.map(s=>({card:s,score:CM(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),CM=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},Kw=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return Tv(e,t,n,"player1",r);case"DAMAGE":return Rd(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},Vw=(e,t,n,r,i,s)=>{const l={name:t};switch(e.type){case"DAMAGE":return Rd(e,l,n,"player1",r,i,s);case"RECALL_DRONE":return Xw(e,t,n,r,i);case"DRAW_THEN_DISCARD":return Dv(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},Xw=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=sa(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(d=>d.id!==n.id),Object.assign(l.player1,Iw(l.player1,n)),l.player1.dronesOnBoard=Vs(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[]}},Ww=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:d,interceptor:h,attackingPlayer:p,abilityDamage:m,goAgain:y,damageType:x,lane:S}=e,A=m!==void 0,E=h||u,P=h?"drone":d,O=p,_=E.owner||(O==="player1"?"player2":"player1"),N=t[O],j=t[_];let D=null,R=null;!A&&l&&l.id&&(D=sa(l.id,N),R=Pr(l,D,N,j,n));let k=m??(R?Math.max(0,R.attack):0),B=x||(l?l.damageType:void 0);R&&R.keywords&&R.keywords.has("PIERCING")&&(B="PIERCING"),P==="section"&&!m&&l&&l.name&&_n.find(Y=>Y.name===l.name)?.abilities?.forEach(Y=>{Y.type==="PASSIVE"&&Y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(k+=Y.effect.value)});let J=0,q=0,Z=!1,ce=0,le=0;if(P==="drone"){let K=null;for(const Y in j.dronesOnBoard)if(K=j.dronesOnBoard[Y].find(oe=>oe.id===E.id),K)break;if(K){let Y=k;B!=="PIERCING"&&(J=Math.min(k,K.currentShields),Y-=J),q=Math.min(Y,K.hull),Z=K.hull-q<=0,ce=K.currentShields-J,le=Z?0:K.hull-q}}else{const K=j.shipSections[E.name];if(K){let Y=k;B!=="PIERCING"&&(J=Math.min(k,K.allocatedShields),Y-=J),q=Math.min(Y,K.hull),Z=K.hull-q<=0,ce=K.allocatedShields-J,le=Z?0:K.hull-q}}const te=`Dealt ${J} shield and ${q} hull damage to ${E.name}.`+(P==="drone"?Z?` ${E.name} Destroyed.`:` ${E.name} has ${ce} shields and ${le} hull left.`:""),$=D||(S?S.replace("lane","Lane "):null),ee=P==="drone"?`${E.name} (${$})`:E.name,he=l&&l.name?`${l.name} (${$})`:"Card Effect";r&&r({player:t[O].name,actionType:"ATTACK",source:he,target:ee,outcome:te});const pe={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(P==="drone"){let K=!1;for(const Y in pe[_].dronesOnBoard){const oe=pe[_].dronesOnBoard[Y].findIndex(ye=>ye.id===E.id);if(oe!==-1){if(pe[_].dronesOnBoard[Y][oe].hull-q<=0){K=!0,i&&i(E.id);const ye=pe[_].dronesOnBoard[Y][oe];pe[_].dronesOnBoard[Y]=pe[_].dronesOnBoard[Y].filter(z=>z.id!==E.id),Object.assign(pe[_],Tc(pe[_],ye))}else s&&s(E.id),pe[_].dronesOnBoard[Y][oe].hull-=q,pe[_].dronesOnBoard[Y][oe].currentShields-=J;break}}if(K){const Y=_==="player1"?pe.player2:pe.player1;pe[_].dronesOnBoard=Vs(pe[_],Y,n)}}else{pe[_].shipSections[E.name].hull-=q,pe[_].shipSections[E.name].allocatedShields-=J;const K=_==="player1"?n.player1:n.player2,Y=Ha(pe[_],K).totals;pe[_].energy>Y.maxEnergy&&(pe[_].energy=Y.maxEnergy)}let I=[];if(!A&&l&&l.id){let K=!1;for(const Y in pe[O].dronesOnBoard){const oe=pe[O].dronesOnBoard[Y].findIndex(ye=>ye.id===l.id);if(oe!==-1){pe[O].dronesOnBoard[Y][oe].isExhausted=!0,K=!0;break}}if(K){const Y=$w(pe[O],l);pe[O]=Y.newState,I=Y.effects}}if(h){const K=O==="player1"?"player2":"player1";for(const Y in pe[K].dronesOnBoard){const oe=pe[K].dronesOnBoard[Y].findIndex(ye=>ye.id===h.id);if(oe!==-1){Pr(pe[K].dronesOnBoard[Y][oe],Y,pe[K],pe[O],n).keywords.has("DEFENDER")||(pe[K].dronesOnBoard[Y][oe].isExhausted=!0);break}}}return{newPlayerStates:pe,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:D||S,targetName:E.name,targetType:P,interceptorName:h?h.name:null,shieldDamage:J,hullDamage:q,wasDestroyed:Z,remainingShields:ce,remainingHull:le,outcome:te,shouldEndTurn:!y},afterAttackEffects:I}},EM=(e,t)=>{const n=Ha(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},Id=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),PM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},wM=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},OM=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},_M=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},TM=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(d=>d.instanceId===l.instanceId||d.name===l.name&&d.id===l.id);if(u!==-1&&s<t){const d=r.splice(u,1)[0];i.push(d),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),d=r.splice(u,1)[0];i.push(d),s++}return{...e,hand:r,discardPile:i,discardCount:s}},Qw=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const d=parseInt(u.replace("lane",""),10);Math.abs(l-d)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const d=parseInt(u.replace("lane",""),10);Math.abs(l-d)===1&&s.push({id:u,owner:"player1"})})}return s},Zw=(e,t)=>t.activeDronePool.map(n=>{const r=_n.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),Jw=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},DM=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=Ec("player1",e.drone,e.ability,i,s):t?l=Ec("player1",{id:t.sectionName},t.ability,i,s):n?u=Qw(n,i):r&&(r.type==="Upgrade"?u=Zw(r,i):r.effect.type==="MULTI_MOVE"?u=Jw(n,i):u=Ec("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},jM=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),NM=(e,t,n,r)=>{const i=_v(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},De={initialPlayerState:Hk,buildDeckFromList:Rw,getEffectiveSectionMaxShields:wv,getShipStatus:Ni,onDroneDestroyed:Tc,onDroneRecalled:Iw,checkWinCondition:Sy,calculateAfterAttackStateAndEffects:$w,applyOnMoveEffects:Lw,updateAuras:Vs,getLaneOfDrone:sa,getValidTargets:Ec,calculateAllValidTargets:DM,calculateMultiSelectTargets:Qw,calculateUpgradeTargets:Zw,calculateMultiMoveTargets:Jw,validateDeployment:Bw,validateShieldRemoval:Uw,validateShieldAddition:Ov,executeShieldReallocation:qk,getValidShieldReallocationTargets:Yk,processShieldAllocation:Fk,processResetShieldAllocation:Kk,processEndShieldAllocation:Vk,resolveAttack:Ww,resolveAbility:Xk,resolveShipAbility:Wk,executeDeployment:zw,resolveCardPlay:uM,finishCardPlay:qw,resolveMultiMove:sM,resolveSingleMove:lM,checkGameStateForWinner:Qk,calculatePotentialInterceptors:Zk,calculateAiInterception:eM,calculateTurnTransition:_v,calculatePassTransition:tM,readyDronesAndRestoreShields:Gw,calculateNewRoundPlayerState:Ay,drawToHandLimit:Cy,drawPlayerCards:EM,determineFirstPlayer:Id,enforceHandLimit:PM,checkHandLimitCompliance:wM,checkHandLimitViolations:OM,enforceHandLimits:_M,processDiscardPhase:TM,processTurnTransition:nM,processPhaseChange:rM,processRoundStart:aM,createExplosionEffect:jM,createTurnEndEffects:NM,resolveUnifiedDamageEffect:Rd,resolveUnifiedHealEffect:Tv,resolveUnifiedDrawEffect:Dv,resolveSearchAndDrawEffect:Fw,resolveDroneAbilityEffect:Kw,resolveShipAbilityEffect:Vw,resolveShipRecallEffect:Xw,executeAiDeployment:Jk,executeAiTurn:iM,executeAiAction:oM},cc=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:De,startingDecklist:Ds},Symbol.toStringTag,{value:"Module"})),kM="modulepreload",MM=function(e){return"/"+e},fA={},na=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=d(n.map(h=>{if(h=MM(h),h in fA)return;fA[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":kM,p||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((x,S)=>{y.addEventListener("load",x),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class RM{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log("💾 GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(`💾 Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(`💾 Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const IM=new RM;class Gc{constructor(t){this.gameStateManager=t,this.cache=IM,this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log("🎯 GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),d=s[l],h=s[u],p=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,d),S=Pr(t,n,m?d:h,m?h:d,p);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Ha(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(h=>({...h,effectiveStats:this.getEffectiveStats(h,t),isPlayer:!0})),d=(l.dronesOnBoard[t]||[]).map(h=>({...h,effectiveStats:this.getEffectiveStats(h,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:d,hasGuardian:this.hasGuardianInLane(t,d)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const LM=Object.freeze(Object.defineProperty({__proto__:null,default:Gc},Symbol.toStringTag,{value:"Module"}));class $M{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null}initialize(t,n,r,i=null,s=null){this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&(this.gameDataService=new Gc(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&s.subscribe(l=>{this.checkForAITurn(l)}),console.log("🤖 AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log("🔗 AIPhaseProcessor connected to ActionProcessor for execution"),s&&console.log("🔗 AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const d=this.dronePool?.find(h=>h.name===u);return d||console.warn(`⚠️ AI personality references unknown drone: ${u}`),d}).filter(u=>u),console.log(`🎯 Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const l=r.map(u=>u.name).join(", ");console.log(`🎯 Mapped drones: ${l}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(`🎯 Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error("❌ Not enough drones available for AI selection:",r.length),n&&n.dronePool){const l=n.dronePool.filter(u=>!this.dronePool?.find(d=>d.name===u));l.length>0&&console.error(`❌ Missing drones from collection: ${l.join(", ")}`),console.error(`❌ Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(`❌ Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),s=i.map(l=>l.name).join(", ");return console.log(`🤖 AI selected drones: ${s}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(d=>n.preferredDrones.includes(d.name)),u=Math.min(3,l.length);r=l.slice(0,u),console.log(`🎯 AI selected ${r.length} preferred drones:`,r.map(d=>d.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((d,h)=>{const p=(d.energyCost||1)+(d.health||0)+(d.attack||0);return(h.energyCost||1)+(h.health||0)+(h.attack||0)-p});const l=r?.aggression||.5,u=r?.economy||.5;for(let d=0;d<n&&s.length>0;d++){let h=0;if(l>.7)h=s.findIndex(p=>(p.attack||0)>2),h===-1&&(h=0);else if(u>.7)h=s.findIndex(p=>(p.energyCost||1)<=2),h===-1&&(h=0);else{const p=Math.min(3,s.length);h=Math.floor(Math.random()*p)}i.push(s.splice(h,1)[0])}return console.log(`🎯 AI balanced selection (${n}):`,i.map(d=>d.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(`🎯 Using ${n.name} personality decklist`);const{gameEngine:i}=await na(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>cc);return{gameEngine:s}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log("🎯 Using standard deck as fallback");const{gameEngine:i,startingDecklist:s}=await na(async()=>{const{gameEngine:l,startingDecklist:u}=await Promise.resolve().then(()=>cc);return{gameEngine:l,startingDecklist:u}},void 0);r=i.buildDeckFromList(s)}return console.log(`✅ AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(`🎯 AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return console.log(`🤖 AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return console.log("🎯 AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return console.log("🎯 AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return console.log("🎯 AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(console.log("🤖 AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await na(async()=>{const{aiBrain:s}=await import("./aiLogic-BVu87m6u.js");return{aiBrain:s}},[]),{gameEngine:r}=await na(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>cc);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log("🤖 AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(console.log("🤖 AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await na(async()=>{const{aiBrain:s}=await import("./aiLogic-BVu87m6u.js");return{aiBrain:s}},[]),{gameEngine:r}=await na(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>cc);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log("🤖 AIPhaseProcessor executing action decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(console.log("🤖 AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await na(async()=>{const{gameEngine:p}=await Promise.resolve().then(()=>cc);return{gameEngine:p}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return console.log("🤖 AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},d=[];if(u.hand.length>l){const p=u.hand.length-l;d=u.hand.slice(0,p),u={...u,hand:u.hand.slice(p),discardPile:[...u.discardPile,...d]},console.log(`🤖 AI discarding ${p} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const h=u.hand.length-(r.hand.length-d.length);return h>0&&console.log(`🤖 AI drew ${h} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:d,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(console.log("🤖 AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return console.log("🤖 AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];return u=[...n.hand].sort((h,p)=>p.cost-h.cost).slice(0,l),console.log(`🤖 AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(console.log("🤖 AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return console.log("🤖 AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let d=[];const h=[];return Object.entries(n.dronesOnBoard||{}).forEach(([p,m])=>{m.forEach(y=>{h.push({...y,lane:p})})}),h.sort((p,m)=>{const y=this.gameDataService.getEffectiveStats(p,p.lane),x=this.gameDataService.getEffectiveStats(m,m.lane);return y.power-x.power}),d=h.slice(0,u),console.log(`🤖 AI removing ${d.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:d,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log("🤖 AI has already passed"),!0):!1}async executePass(t){return console.log(`🏳️ AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(console.log(`⏰ AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn(t)},1500)))}async executeTurn(t){if(this.isProcessing){console.log("⚠️ AIPhaseProcessor: Already processing a turn, skipping");return}this.isProcessing=!0;try{console.log(`🤖 AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let n;if(t.turnPhase==="deployment")n=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")n=await this.executeActionTurn(t);else{console.warn(`⚠️ AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}const r=this.gameStateManager.getState();r.passInfo&&r.passInfo.player1Passed&&!r.passInfo.player2Passed&&r.currentPlayer==="player2"&&(console.log("🔄 AIPhaseProcessor: Human has passed - AI continues taking turns"),setTimeout(()=>{this.checkForAITurn(r)},100))}catch(n){console.error("❌ AIPhaseProcessor: Error executing turn:",n)}finally{this.isProcessing=!1}}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,version:"1.2.0"}}}const Ar=new $M;class BM{constructor(t){this.gameStateManager=t,this.gameDataService=new Gc(t),this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1}}setP2PManager(t){this.p2pManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const d=`${u}Passed`;if(s.passInfo[d])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return console.log("🛡️ Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return console.log("🔄 Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return console.log("🏁 Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);!i&&this.p2pManager&&this.p2pManager.isConnected&&this.gameStateManager.get("gameMode")!=="local"&&(console.log("[P2P ACTION] Sending action to peer:",{type:n,payload:r}),this.p2pManager.sendData({type:"ACTION",action:{type:n,payload:r},timestamp:Date.now()})),this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"aiTurn":return await this.processAiTurn(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeFirstPlayer":return await this.acknowledgeFirstPlayer(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections},s=h=>{this.gameStateManager.addLogEntry(h,"resolveAttack",n.attackingPlayer==="player2"?n.aiContext:null)},l=()=>{},u=()=>{},d=De.resolveAttack(n,{player1:r.player1,player2:r.player2},i,s,l,u);return this.gameStateManager.setPlayerStates(d.newPlayerStates.player1,d.newPlayerStates.player2),d.attackResult&&d.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),d}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let d=null,h=null;if(Object.values(l).forEach(S=>{Object.values(S.dronesOnBoard).forEach(A=>{A.forEach(E=>{E.id===n&&(d=E),E.id===i&&(h=E)})})}),!d||!d.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const p=d.abilities[r],m=S=>{this.gameStateManager.addLogEntry(S,"resolveAbility")},y=async S=>await this.processAttack({attackDetails:S}),x=De.resolveAbility(p,d,h,l,u,m,y);if(this.gameStateManager.setPlayerStates(x.newPlayerStates.player1,x.newPlayerStates.player2),x.shouldEndTurn){const S=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:S.currentPlayer==="player1"?"player2":"player1"})}return x}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,l=this.gameStateManager.getState(),u=l[i],h=l[i==="player1"?"player2":"player1"],p={player1:l.placedSections,player2:l.opponentPlacedSections},m=x=>{this.gameStateManager.addLogEntry(x)},y=De.executeDeployment(n,r,s||l.turn,u,h,p,m);return y.success&&(i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState),await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})),y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections},d={logCallback:p=>this.gameStateManager.addLogEntry(p),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async p=>await this.processAttack(p)},h=De.resolveCardPlay(n,r,i,l,u,d);if(this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const p=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:p.currentPlayer==="player1"?"player2":"player1"})}return h}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},d={player1:l.placedSections,player2:l.opponentPlacedSections},h={logCallback:m=>this.gameStateManager.addLogEntry(m),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async m=>await this.processAttack(m)},p=De.resolveShipAbility(n,r,i,u,d,h);if(this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p.shouldEndTurn){const m=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:m.currentPlayer==="player1"?"player2":"player1"})}return p}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=De.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let d=r;u.passInfo&&u.passInfo[`${r}Passed`]?(d=u.currentPlayer,console.log(`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${d}`)):console.log(`[TURN TRANSITION DEBUG] Setting new player: ${d}`),this.gameStateManager.setCurrentPlayer(d)}const l=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return console.log(`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(n==="allocateShields"){const u=this.gameStateManager.getLocalPlayerId(),d=i[u],p=this.gameDataService.getEffectiveShipStats(d,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=p,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${p}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1}),console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase} → ${n}`);const l=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:l.turnPhase,placedSections:l.placedSections,opponentPlacedSections:l.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||De.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),d=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),h=De.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),p=De.calculateNewRoundPlayerState(s.player2,n,d,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(h,p),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:h,player2:p}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const d=u.shipSections[r];if(!d||d.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const h={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},p={...u,shipSections:h};return this.gameStateManager.updatePlayerState(s,p),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:p}}else if(n==="add"){const d=s==="player1"?l.placedSections:l.opponentPlacedSections,h=De.getEffectiveSectionMaxShields(r,u,d),p=u.shipSections[r];if(!p||p.allocatedShields>=h)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:m};return this.gameStateManager.updatePlayerState(s,y),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const d={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,d),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:d}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return await this.processAttack({attackDetails:{attackerId:s.attacker.id,targetId:s.target.id,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":const l=this.gameStateManager.getState(),u={name:"AI Move",cost:0,effect:{type:"MOVE",properties:[]}},d=De.resolveSingleMove(u,s.drone,s.fromLane,s.toLane,l.player2,l.player1,{player1:l.placedSections,player2:l.opponentPlacedSections},{logCallback:()=>{},applyOnMoveEffectsCallback:De.applyOnMoveEffects,updateAurasCallback:De.updateAuras});return this.gameStateManager.updatePlayerState("player2",d.newPlayerState),d;case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiTurn(t){const{turnPhase:n,playerId:r}=t;console.log(`[AI TURN DEBUG] Starting AI turn for ${r} in phase: ${n}`);const i=this.gameStateManager.getState(),s=i.passInfo;if(console.log("[AI TURN DEBUG] Current state:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn,passInfo:s}),s[r+"Passed"])return console.log("[AI TURN DEBUG] AI already passed, returning"),{success:!0,action:"already_passed"};let l;console.log(`[AI TURN DEBUG] Delegating to AIPhaseProcessor for phase: ${n}`),n==="deployment"?l=await Ar.handleDeploymentTurn(i):n==="action"?l=await Ar.handleActionTurn(i):(l={type:"pass"},console.log(`[AI TURN DEBUG] AI passing due to unknown phase: ${n}`)),console.log("[AI TURN DEBUG] AI decision from AIPhaseProcessor:",l),console.log("[AI TURN DEBUG] Processing AI decision:",l.type);const u=await this.processAiDecision(l,r);return console.log("[AI TURN DEBUG] AI decision result:",u),u}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",s),s.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attackerId:l.attacker.id,targetId:l.target.id,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove(l,n);break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u.shouldEndTurn!==!1&&await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const d=this.gameStateManager.getState(),h=!d.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",d.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:d.passInfo.firstPasser||(h?n:null)});const p=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",p),p.player1Passed&&p.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),d.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):d.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}async processMove(t,n){const r=this.gameStateManager.getState(),i={name:"AI Move",cost:0,effect:{type:"MOVE",properties:[]}},s=r[n],l=r[n==="player1"?"player2":"player1"],u=De.resolveSingleMove(i,t.drone,t.fromLane,t.toLane,s,l,{player1:r.placedSections,player2:r.opponentPlacedSections},{logCallback:()=>{},applyOnMoveEffectsCallback:De.applyOnMoveEffects,updateAurasCallback:De.updateAuras});return this.gameStateManager.updatePlayerState(n,u.newPlayerState),u}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=`${l}Passed`,d=`${n}Passed`,h=!s[u],p={...s,[d]:!0,firstPasser:s.firstPasser||(h?n:null)};return console.log("[PLAYER PASS DEBUG] Updating pass info:",p),this.gameStateManager.setPassInfo(p,"ActionProcessor"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("playerPass",{playerId:n,playerName:r,turnPhase:i,passInfo:p}),{success:!0,newPassInfo:p}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error("🔥 CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error("🔥 CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("aiShipPlacement",{placement:n,aiPersonality:r}),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r}=t,i=this.gameStateManager.getState();if(console.log(`[OPTIONAL DISCARD DEBUG] Processing optional discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const s=i[n];if(!s)throw new Error(`Player ${n} not found`);const l=s.hand.filter(d=>!r.some(h=>d.instanceId===h.instanceId)),u=[...s.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:l,discardPile:u}),console.log(`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){console.log("🎯 ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await na(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-C-yFl_SP.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.updateState({currentPlayer:i,firstPlayerOfRound:i}),console.log(`✅ First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeFirstPlayer(t){return console.log(`🎯 ActionProcessor: Processing first player acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"determineFirstPlayer",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),console.log(`🔄 Cleared commitments for phase: ${t}`)):(n.commitments={},console.log("🔄 Cleared all phase commitments")),this.gameStateManager.updateState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;console.log(`🤝 ActionProcessor: Processing ${r} commitment for ${n}`);const s=this.gameStateManager.getState();s.commitments[r]||(s.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),s.commitments[r][n]={completed:!0,...i},this.gameStateManager.updateState({commitments:s.commitments});const l=s.commitments[r].player1.completed&&s.commitments[r].player2.completed;return console.log(`✅ ${n} ${r} committed, both complete: ${l}`),n==="player1"&&s.gameMode==="local"&&(console.log("🤖 Single-player mode: Auto-completing AI commitment"),Ar&&setTimeout(async()=>{try{await this.handleAICommitment(r,s)}catch(u){console.error("AI commitment error:",u)}},100)),{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:l}}}async handleAICommitment(t,n){try{console.log(`🤖 Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await Ar.processDroneSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"droneSelection",actionData:{drones:r}}});break;case"deckSelection":r=await Ar.processDeckSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deckSelection",actionData:{deck:r}}});break;case"placement":r=await Ar.processPlacement(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"placement",actionData:{placement:r}}});break;case"mandatoryDiscard":r=await Ar.executeMandatoryDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"optionalDiscard":r=await Ar.executeOptionalDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"allocateShields":await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"allocateShields",actionData:{shieldAllocation:[]}}});break;case"mandatoryDroneRemoval":r=await Ar.executeMandatoryDroneRemovalTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}}});break;case"determineFirstPlayer":await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}});break;default:console.warn(`⚠️ No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}async processDraw(t){const{player1:n,player2:r}=t;return console.log("🃏 ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r}=t;return console.log("⚡ ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),{success:!0,message:"Energy reset completed",player1:n,player2:r}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}const e2=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(`🎲 Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(`🎯 Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},UM=(e,t=3)=>{if(!e||e.length===0)return console.warn("⚠️ No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(`🔄 Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(`📦 Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class zM{constructor(){console.log("🔄 GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.state={appState:"menu",isHost:!1,isGuest:!1,isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},this.actionProcessor=new BM(this),this.gameFlowManager=null,this.p2pIntegrationSetup=!1,console.log("🔄 GAMESTATE INITIALIZATION: GameStateManager created"),console.log("📱 App State:",this.state.appState),console.log("🎮 Game Active:",this.state.gameActive),console.log("✅ GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost);break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),d=l.some(A=>A.includes("App.jsx")),h=l.some(A=>A.includes("ActionProcessor")),p=l.some(A=>A.includes("PhaseManager")),m=h||p;d&&!m&&(console.error("🚨 ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error("📋 App.jsx should only call ActionProcessor or PhaseManager methods"),console.error("🔍 Stack trace:",s));const y=Object.keys(t),x=`${u.primaryCaller} in ${u.primaryFile}`;console.log(`🔍 GAMESTATE CHANGE [${n}] from ${x}:`,{changedKeys:y,allUpdates:t,architectureViolation:d&&!m});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,x,n),y.forEach(A=>{if(!["player1","player2"].includes(A)){const E=i[A],P=t[A];JSON.stringify(E)!==JSON.stringify(P)&&console.log(`🔍 STATE CHANGE: ${A}`,{before:E,after:P,caller:x,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(m=>m in t),d=i&&i.includes("GameFlowManager"),h=r==="phaseTransition"||t.turnPhase&&d;u&&!(h&&d)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:d,isPhaseTransition:h,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(d=>{i.has(d.id)&&console.error(`Duplicate drone ID detected: ${d.id} in player${l+1}`),i.add(d.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","roundEnd"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(console.log("🔍 Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){console.log("✅ Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],d=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],h=Object.keys(t).filter(P=>u.includes(P)),p=Object.keys(t).filter(P=>d.includes(P)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const y=h.every(P=>["player1","player2"].includes(P)),x=h.every(P=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(P));if(m&&(y||x))return;const S=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),E=h.length===1&&h[0]==="passInfo";if(!(S&&A&&E)){if(h.length>0&&!r){const P=i?.split(`
`)||[],O=P.find(_=>_.includes(".jsx")&&!_.includes("GameStateManager"))||P[2]||"Unknown";console.warn("⚠️ ActionProcessor bypass detected: Critical game state updated directly",{updates:h,turnPhase:n.turnPhase,caller:O.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug("🐛 ActionProcessor bypass debug info:",{stackTrace:P.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}p.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];console.log(`🚨 PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(h=>{const p=l?l[h]:void 0,m=u?u[h]:void 0;if(JSON.stringify(p)!==JSON.stringify(m))if(h==="energy"||h==="deploymentBudget"||h==="initialDeploymentBudget")console.log(`  💰 ${h}: ${p} → ${m}`),(m==null||isNaN(m))&&console.error(`  🚨 WARNING: ${h} became ${m}!`);else if(h==="activeDronePool"){const y=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";let S,A;if(Array.isArray(p))try{S=p.map(E=>E?.name||"UNNAMED").join(",")}catch(E){S=`ERROR_MAPPING_OLD: ${E.message}`}else S="undefined";if(Array.isArray(m))try{A=m.map(E=>E?.name||"UNNAMED").join(",")}catch(E){A=`ERROR_MAPPING_NEW: ${E.message}`}else A="undefined";if(console.log(`  🤖 ${h}: [${y} drones] → [${x} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(console.log("    🔍 Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("    🔍 First drone object:",m[0])),y!==x||S!==A){const E=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`    📍 Update source:
${E}`)}}else if(h==="hand"||h==="deck"){const y=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";console.log(`  🃏 ${h}: [${y} cards] → [${x} cards]`)}else if(h==="dronesOnBoard"){const y=p?`L1:${p.lane1?.length||0} L2:${p.lane2?.length||0} L3:${p.lane3?.length||0}`:"undefined",x=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`  🛸 ${h}: ${y} → ${x}`)}else console.log(`  📝 ${h}:`,{before:p,after:m})}),console.log(`🔍 Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],d=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],h=l.functions.filter(m=>u.some(y=>m.toLowerCase().includes(y.toLowerCase()))),p=l.functions.filter(m=>d.some(y=>m.toLowerCase().includes(y.toLowerCase())));h.length>0&&p.length===0&&(console.warn("🚨 Inappropriate function updating game state:",{inappropriateFunctions:h,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI → ActionProcessor → gameLogic.js → GameStateManager"}),console.debug("🔍 Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:h,appropriateFound:p,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const d of r){const h=u[d];if(!h)continue;const p=Array.isArray(h)?h:[h];let m=!1;for(const y of p)(y==="GameFlowManager"&&i||y==="SequentialPhaseManager"&&s||y==="ActionProcessor"&&l)&&(m=!0);if(!m){const y=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(`🚨 OWNERSHIP VIOLATION: ${y} cannot update '${d}'`,{updateKey:d,currentManager:y,allowedOwners:p,updates:r,recommendation:`Only ${p.join(" or ")} should update '${d}'`})}}}reset(){const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:De.initialPlayerState("Player 1",Ds),player2:De.initialPlayerState("Player 2",Ds),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET")}startGame(t="local",n={},r={}){console.log("🎮 GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...De.initialPlayerState(n.name||"Player 1",n.decklist||Ds),...n},player2:{...De.initialPlayerState(r.name||"Player 2",r.decklist||Ds),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{}},s=e2(_n);i.droneSelectionPool=s.droneSelectionPool,i.droneSelectionTrio=s.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log("👤 Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log("👤 Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log("✅ GAME START: Game session initialized successfully")}endGame(){console.log("🎮 GAME END: Ending current game session"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),console.log("✅ GAME END: Returned to menu state")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t,isHost:n&&t!=="local",isGuest:!n&&t!=="local"},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log("🔍 [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const qe=new zM;class GM{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return HM(t).buffer}}function HM(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function t2(e){return new qM(e).unpack()}function n2(e){const t=new YM,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class qM{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class YM{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,d=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(d)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new GM,this._textEncoder=new TextEncoder}}let r2=!0,a2=!0;function xc(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function $o(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const d=h=>{const p=n(h);p&&(u.handleEvent?u.handleEvent(p):u(p))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,d),i.apply(this,[l,d])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const d=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,d])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function FM(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(r2=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function KM(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(a2=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function i2(){if(typeof window=="object"){if(r2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function jv(e,t){a2&&console.warn(e+" is deprecated, please use "+t+" instead.")}function VM(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(xc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(xc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(xc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=xc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function dA(e){return Object.prototype.toString.call(e)==="[object Object]"}function o2(e){return dA(e)?Object.keys(e).reduce(function(t,n){const r=dA(e[n]),i=r?o2(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function Ey(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Ey(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Ey(e,e.get(i),n)})}))}function hA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&Ey(e,u,i)})}),i}const pA=i2;function s2(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const d={};return Object.keys(u).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const p=typeof u[h]=="object"?u[h]:{ideal:u[h]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const m=function(y,x){return y?y+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(p.ideal!==void 0){d.optional=d.optional||[];let y={};typeof p.ideal=="number"?(y[m("min",h)]=p.ideal,d.optional.push(y),y={},y[m("max",h)]=p.ideal,d.optional.push(y)):(y[m("",h)]=p.ideal,d.optional.push(y))}p.exact!==void 0&&typeof p.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[m("",h)]=p.exact):["min","max"].forEach(y=>{p[y]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[m(y,h)]=p[y])})}),u.advanced&&(d.optional=(d.optional||[]).concat(u.advanced)),d},i=function(u,d){if(t.version>=61)return d(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const h=function(p,m,y){m in p&&!(y in p)&&(p[y]=p[m],delete p[m])};u=JSON.parse(JSON.stringify(u)),h(u.audio,"autoGainControl","googAutoGainControl"),h(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let h=u.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const p=t.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete u.video.facingMode;let m;if(h.exact==="environment"||h.ideal==="environment"?m=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let x=y.find(S=>m.some(A=>S.label.toLowerCase().includes(A)));return!x&&y.length&&m.includes("back")&&(x=y[y.length-1]),x&&(u.video.deviceId=h.exact?{exact:x.deviceId}:{ideal:x.deviceId}),u.video=r(u.video),pA("chrome: "+JSON.stringify(u)),d(u)})}u.video=r(u.video)}return pA("chrome: "+JSON.stringify(u)),d(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,d,h){i(u,p=>{n.webkitGetUserMedia(p,d,m=>{h&&h(s(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return i(d,h=>u(h).then(p=>{if(h.audio&&!p.getAudioTracks().length||h.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(s(p))))}}}function l2(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function c2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else $o(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function u2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,d){let h=i.apply(this,arguments);return h||(h=t(this,u),this._senders.push(h)),h};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const d=this._senders.indexOf(u);d!==-1&&this._senders.splice(d,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(d=>d.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function f2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>hA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),$o(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>hA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function d2(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(d)===-1&&this._shimmedLocalStreams[u.id].push(d):this._shimmedLocalStreams[u.id]=[u,d],d};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(h=>{if(this.getSenders().find(m=>m.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(h=>u.indexOf(h)===-1);this._shimmedLocalStreams[l.id]=[l].concat(d)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const d=this._shimmedLocalStreams[u].indexOf(l);d!==-1&&this._shimmedLocalStreams[u].splice(d,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function h2(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return d2(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=n.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(m=>{if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const m=new e.MediaStream(p.getTracks());this._streams[p.id]=m,this._reverseStreams[m.id]=p,p=m}r.apply(this,[p])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(A=>A===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([p]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===p)};function s(h,p){let m=p.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const x=h._reverseStreams[y],S=h._streams[x.id];m=m.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:p.type,sdp:m})}function l(h,p){let m=p.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const x=h._reverseStreams[y],S=h._streams[x.id];m=m.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:p.type,sdp:m})}["createOffer","createAnswer"].forEach(function(h){const p=e.RTCPeerConnection.prototype[h],m={[h](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[S=>{const A=s(this,S);y[0].apply(null,[A])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):p.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[h]=m[h]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const h=d.get.apply(this);return h.type===""?h:s(this,h)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(A=>p.track===A)&&(y=this._streams[x])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Py(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function p2(e,t){$o(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const mA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:p2,shimAddTrackRemoveTrack:h2,shimAddTrackRemoveTrackWithNative:d2,shimGetSendersWithDtmf:u2,shimGetUserMedia:s2,shimMediaStream:l2,shimOnTrack:c2,shimPeerConnection:Py,shimSenderReceiverGetStats:f2},Symbol.toStringTag,{value:"Module"}));function m2(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){jv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,d){u in l&&!(d in l)&&(l[d]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function XM(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function g2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function wy(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(d=>{if(t.version<53&&!l)try{d.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;d.forEach((p,m)=>{d.set(m,Object.assign({},p,{type:n[p.type]||p.type}))})}return d}).then(l,u)}}function y2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function v2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),$o(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function b2(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){jv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function x2(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function S2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function A2(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function C2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function E2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const gA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:S2,shimCreateAnswer:E2,shimCreateOffer:C2,shimGetDisplayMedia:XM,shimGetParameters:A2,shimGetUserMedia:m2,shimOnTrack:g2,shimPeerConnection:wy,shimRTCDataChannel:x2,shimReceiverGetStats:v2,shimRemoveStream:b2,shimSenderGetStats:y2},Symbol.toStringTag,{value:"Module"}));function P2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function w2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function O2(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(h,p){const m=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[m]);return p?(y.then(h,p),Promise.resolve()):y},t.createAnswer=function(h,p){const m=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[m]);return p?(y.then(h,p),Promise.resolve()):y};let u=function(d,h,p){const m=i.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m};t.setLocalDescription=u,u=function(d,h,p){const m=s.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m},t.setRemoteDescription=u,u=function(d,h,p){const m=l.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m},t.addIceCandidate=u}function _2(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(T2(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function T2(e){return e&&e.video!==void 0?Object.assign({},e,{video:o2(e.video)}):e}function D2(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(jv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function j2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function N2(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function k2(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const yA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:k2,shimCallbacksAPI:O2,shimConstraints:T2,shimCreateOfferLegacy:N2,shimGetUserMedia:_2,shimLocalStreamsAPI:P2,shimRTCIceServerUrls:D2,shimRemoteStreamsAPI:w2,shimTrackEventTransceiver:j2},Symbol.toStringTag,{value:"Module"}));var Lm={exports:{}},vA;function WM(){return vA||(vA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const d=s[u],h=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(h){const p=t.parseRtpMap(h),m=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(p.parameters=m.length?t.parseFmtp(m[0]):{},p.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),r.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(p.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(d=>{u.rtcpFeedback.find(p=>p.type===d.type&&p.parameter===d.parameter)||u.rtcpFeedback.push(d)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),d=u.length>0&&u[0].ssrc;let h;const p=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));p.length>0&&p[0].length>1&&p[0][0]===d&&(h=p[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let x={ssrc:d,codecPayloadType:parseInt(y.parameters.apt,10)};d&&h&&(x.rtx={ssrc:h}),r.push(x),s&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:d,mechanism:l?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&d&&r.push({ssrc:d});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(y=>{y.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const d=u[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(Lm)),Lm.exports}var M2=WM();const ks=Hr(M2),QM=_w({__proto__:null,default:ks},[M2]);function Uf(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=ks.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,$o(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Oy(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||$o(e,"icecandidate",t=>{if(t.candidate){const n=ks.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function zf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const d=ks.splitSections(u.sdp);return d.shift(),d.some(h=>{const p=ks.parseMLine(h);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},r=function(u){const d=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const h=parseInt(d[1],10);return h!==h?-1:h},i=function(u){let d=65536;return t.browser==="firefox"&&(t.version<57?u===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},s=function(u,d){let h=65536;t.browser==="firefox"&&t.version===57&&(h=65535);const p=ks.matchPrefix(u.sdp,"a=max-message-size:");return p.length>0?h=parseInt(p[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(h=2147483637),h},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=r(arguments[0]),h=i(d),p=s(arguments[0],d);let m;h===0&&p===0?m=Number.POSITIVE_INFINITY:h===0||p===0?m=Math.max(h,p):m=Math.min(h,p);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return m}}),this._sctp=y}return l.apply(this,arguments)}}function Gf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],d=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&d>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},$o(e,"datachannel",r=>(t(r.channel,r.target),r))}function _y(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Ty(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Hf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function qf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const ZM=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Ty,shimAddIceCandidateNullOrEmpty:Hf,shimConnectionState:_y,shimMaxMessageSize:zf,shimParameterlessSetLocalDescription:qf,shimRTCIceCandidate:Uf,shimRTCIceCandidateRelayProtocol:Oy,shimSendThrowTypeError:Gf},Symbol.toStringTag,{value:"Module"}));function JM({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=i2,r=VM(e),i={browserDetails:r,commonShim:ZM,extractVersion:xc,disableLog:FM,disableWarnings:KM,sdp:QM};switch(r.browser){case"chrome":if(!mA||!Py||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=mA,Hf(e,r),qf(e),s2(e,r),l2(e),Py(e,r),c2(e),h2(e,r),u2(e),f2(e),p2(e,r),Uf(e),Oy(e),_y(e),zf(e,r),Gf(e),Ty(e,r);break;case"firefox":if(!gA||!wy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=gA,Hf(e,r),qf(e),m2(e,r),wy(e,r),g2(e),b2(e),y2(e),v2(e),x2(e),S2(e),A2(e),C2(e),E2(e),Uf(e),_y(e),zf(e,r),Gf(e);break;case"safari":if(!yA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=yA,Hf(e,r),qf(e),D2(e),N2(e),O2(e),P2(e),w2(e),j2(e),_2(e),k2(e),Uf(e),Oy(e),zf(e,r),Gf(e),Ty(e,r);break;default:n("Unsupported browser!");break}return i}const bA=JM({window:typeof window>"u"?void 0:window});function Bo(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class R2{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),d=t.slice(l,u),h={__peerData:this._dataCount,n:s,data:d,total:i};n.push(h),l=u,s++}return this._dataCount++,n}}}function eR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const $m=bA.default||bA,uc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return $m.browserDetails.browser}getVersion(){return $m.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=$m.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},tR=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),I2=()=>Math.random().toString(36).slice(2),xA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class nR extends R2{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=xA,this.browser=uc.getBrowser(),this.browserVersion=uc.getVersion(),this.pack=n2,this.unpack=t2,this.supports=(function(){const n={browser:uc.isBrowserSupported(),webRTC:uc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(xA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!uc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=tR,this.randomToken=I2}}const zn=new nR,rR="PeerJS: ";class aR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[rR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Pe=new aR,Nv={},iR=Object.prototype.hasOwnProperty,Mn="~";function Dc(){}Object.create&&(Dc.prototype=Object.create(null),new Dc().__proto__||(Mn=!1));function oR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function L2(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new oR(n,r||e,i),l=Mn?Mn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function Yf(e,t){--e._eventsCount===0?e._events=new Dc:delete e._events[t]}function Tn(){this._events=new Dc,this._eventsCount=0}Tn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)iR.call(n,r)&&t.push(Mn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Tn.prototype.listeners=function(t){var n=Mn?Mn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};Tn.prototype.listenerCount=function(t){var n=Mn?Mn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Tn.prototype.emit=function(t,n,r,i,s,l){var u=Mn?Mn+t:t;if(!this._events[u])return!1;var d=this._events[u],h=arguments.length,p,m;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,r),!0;case 4:return d.fn.call(d.context,n,r,i),!0;case 5:return d.fn.call(d.context,n,r,i,s),!0;case 6:return d.fn.call(d.context,n,r,i,s,l),!0}for(m=1,p=new Array(h-1);m<h;m++)p[m-1]=arguments[m];d.fn.apply(d.context,p)}else{var y=d.length,x;for(m=0;m<y;m++)switch(d[m].once&&this.removeListener(t,d[m].fn,void 0,!0),h){case 1:d[m].fn.call(d[m].context);break;case 2:d[m].fn.call(d[m].context,n);break;case 3:d[m].fn.call(d[m].context,n,r);break;case 4:d[m].fn.call(d[m].context,n,r,i);break;default:if(!p)for(x=1,p=new Array(h-1);x<h;x++)p[x-1]=arguments[x];d[m].fn.apply(d[m].context,p)}}return!0};Tn.prototype.on=function(t,n,r){return L2(this,t,n,r,!1)};Tn.prototype.once=function(t,n,r){return L2(this,t,n,r,!0)};Tn.prototype.removeListener=function(t,n,r,i){var s=Mn?Mn+t:t;if(!this._events[s])return this;if(!n)return Yf(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Yf(this,s);else{for(var u=0,d=[],h=l.length;u<h;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&d.push(l[u]);d.length?this._events[s]=d.length===1?d[0]:d:Yf(this,s)}return this};Tn.prototype.removeAllListeners=function(t){var n;return t?(n=Mn?Mn+t:t,this._events[n]&&Yf(this,n)):(this._events=new Dc,this._eventsCount=0),this};Tn.prototype.off=Tn.prototype.removeListener;Tn.prototype.addListener=Tn.prototype.on;Tn.prefixed=Mn;Tn.EventEmitter=Tn;Nv=Tn;var Uo={};Bo(Uo,"ConnectionType",()=>Di);Bo(Uo,"PeerErrorType",()=>Lt);Bo(Uo,"BaseConnectionErrorType",()=>Dy);Bo(Uo,"DataConnectionErrorType",()=>kv);Bo(Uo,"SerializationType",()=>Ld);Bo(Uo,"SocketEventType",()=>Ti);Bo(Uo,"ServerMessageType",()=>Pn);var Di=(function(e){return e.Data="data",e.Media="media",e})({}),Lt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Dy=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),kv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Ld=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Ti=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Pn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const $2="1.5.5";class sR extends Nv.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+$2),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Pe.log("Server message received:",s)}catch{Pe.log("Invalid server message",i.data);return}this.emit(Ti.Message,s)},this._socket.onclose=i=>{this._disconnected||(Pe.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Ti.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Pe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Pe.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Pn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Ti.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class B2{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Di.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Pe.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Pe.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Pe.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:Pn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Pe.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Dy.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Pe.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Dy.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Pe.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Pe.log("Listening for data channel"),t.ondatachannel=l=>{Pe.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},Pe.log("Listening for remote stream"),t.ontrack=l=>{Pe.log("Received remote stream");const u=l.streams[0],d=s.getConnection(n,r);if(d.type===Di.Media){const h=d;this._addStreamToMediaConnection(u,h)}}}cleanup(){Pe.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Pe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Pe.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Di.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Pn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Lt.WebRTC,i),Pe.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Lt.WebRTC,r),Pe.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Pe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Pe.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Pn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Lt.WebRTC,i),Pe.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Lt.WebRTC,r),Pe.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Pe.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Pe.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Lt.WebRTC,l),Pe.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Pe.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Pe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Lt.WebRTC,n),Pe.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Pe.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Pe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Pe.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class U2 extends Nv.EventEmitter{emitError(t,n){Pe.error("Error:",n),this.emit("error",new lR(`${t}`,n))}}class lR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class z2 extends U2{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Xf extends z2{static#e=this.ID_PREFIX="mc_";get type(){return Di.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Xf.ID_PREFIX+zn.randomToken(),this._negotiator=new B2(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Pe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Pe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Pe.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Pn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Pn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Pe.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Pe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class cR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",$2),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Pe.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==zn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===zn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Pe.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Wf extends z2{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Di.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Wf.ID_PREFIX+I2(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new B2(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Pe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Pe.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Pe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(kv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Pn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Pn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Pe.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Mv extends Wf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Wf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Pe.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Bm extends Mv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new R2,this.serialization=Ld.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=t2(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=eR(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=n2(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Pe.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class uR extends Mv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Ld.None}}class fR extends Mv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=zn.chunkedMTU){this.emitError(kv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Ld.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Rv extends U2{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:uR,json:fR,binary:Bm,"binary-utf8":Bm,default:Bm},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:zn.CLOUD_HOST,port:zn.CLOUD_PORT,path:"/",key:Rv.DEFAULT_KEY,token:zn.randomToken(),config:zn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==zn.CLOUD_HOST?this._options.secure=zn.isSecure():this._options.host==zn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Pe.setLogFunction(this._options.logFunction),Pe.logLevel=this._options.debug||0,this._api=new cR(n),this._socket=this._createServerConnection(),!zn.supports.audioVideo&&!zn.supports.data){this._delayedAbort(Lt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!zn.validateId(r)){this._delayedAbort(Lt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Lt.ServerError,i))}_createServerConnection(){const t=new sR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Ti.Message,n=>{this._handleMessage(n)}),t.on(Ti.Error,n=>{this._abort(Lt.SocketError,n)}),t.on(Ti.Disconnected,()=>{this.disconnected||(this.emitError(Lt.Network,"Lost connection to server."),this.disconnect())}),t.on(Ti.Close,()=>{this.disconnected||this._abort(Lt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case Pn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Pn.Error:this._abort(Lt.ServerError,r.msg);break;case Pn.IdTaken:this._abort(Lt.UnavailableID,`ID "${this.id}" is taken`);break;case Pn.InvalidKey:this._abort(Lt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Pn.Leave:Pe.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Pn.Expire:this.emitError(Lt.PeerUnavailable,`Could not connect to peer ${i}`);break;case Pn.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),Pe.warn(`Offer received for existing Connection ID:${s}`)),r.type===Di.Media){const d=new Xf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=d,this._addConnection(i,l),this.emit("call",d)}else if(r.type===Di.Data){const d=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=d,this._addConnection(i,l),this.emit("connection",d)}else{Pe.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const d of u)l.handleMessage(d);break}default:{if(!r){Pe.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):Pe.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Pe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Lt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Pe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Lt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Pe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new Xf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Pe.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Pe.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Pe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Pe.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Pe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Pe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Lt.ServerError,n))}}var SA=Rv;class dR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new SA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new SA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const fc=new dR,G2=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},hR=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Draw Phase",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,pR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],mR=["deployment","action"],gR=e=>pR.includes(e),AA=e=>mR.includes(e),Ri=()=>{const[e,t]=C.useState(qe.getState()),[n,r]=C.useState(fc.getStatus());C.useEffect(()=>{qe.setupP2PIntegration(fc)},[]),C.useEffect(()=>qe.subscribe($=>{t(qe.getState())}),[]),C.useEffect(()=>fc.subscribe($=>{r(fc.getStatus())}),[]);const i=C.useCallback(()=>qe.isMyTurn(),[e.currentPlayer,e.gameMode]),s=C.useCallback(()=>qe.getLocalPlayerId(),[e.gameMode]),l=C.useCallback(()=>qe.getOpponentPlayerId(),[e.gameMode]),u=C.useCallback(()=>e.gameMode!=="local",[e.gameMode]),d=C.useCallback(()=>u()&&!i(),[u,i]),h=C.useCallback(()=>qe.getLocalPlayerState(),[e.gameMode]),p=C.useCallback(()=>qe.getOpponentPlayerState(),[e.gameMode]),m=C.useCallback(te=>qe.isLocalPlayer(te),[e.gameMode]),y=C.useCallback(()=>qe.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),x=C.useCallback(()=>{const te=qe.getOpponentPlacedSections();return e.turnPhase==="placement"&&te.some($=>$!==null)&&console.error("🔥 CRITICAL - getOpponentPlacedSections returning:",te,"from gameState:",e.opponentPlacedSections),te},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=C.useCallback((te,$)=>{qe.updatePlayers(te,$)},[]),A=C.useCallback((te,$)=>{qe.updatePlayerState(te,$)},[]),E=C.useCallback((te,$)=>{qe.setPlayerStates(te,$)},[]),P=C.useCallback(te=>{qe.setFirstPasserOfPreviousRound(te)},[]),O=C.useCallback(te=>{qe.setFirstPlayerOverride(te)},[]),_=C.useCallback(te=>{qe.setPassInfo(te)},[]),N=C.useCallback(te=>{qe.updatePassInfo(te)},[]),j=C.useCallback((te,$,ee)=>{qe.addLogEntry(te,$,ee)},[]),D=C.useCallback(()=>{qe.reset()},[]),R=C.useCallback(te=>{qe.setWinner(te)},[]),k=C.useCallback(async(te,$)=>await qe.processAction(te,$),[]),B=C.useCallback(()=>qe.isActionInProgress(),[]),J=C.useCallback(()=>qe.getActionQueueLength(),[]),q=C.useCallback(()=>{qe.clearActionQueue()},[]),Z=C.useCallback(()=>gR(e.turnPhase),[e.turnPhase]),ce=C.useCallback(()=>AA(e.turnPhase),[e.turnPhase]),le=C.useCallback(async(te,$)=>{const ee=e.turnPhase,he=AA(ee);return console.log(`🔀 useGameState.routeAction: ${te} in phase ${ee} (${he?"sequential":"simultaneous"})`),he?await k(te,$):(console.warn(`⚠️ Simultaneous phase action ${te} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${te} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:ee,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,k]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:d,getLocalPlayerState:h,getOpponentPlayerState:p,isLocalPlayer:m,getLocalPlacedSections:y,getOpponentPlacedSections:x,updatePlayers:S,updatePlayerState:A,setPlayerStates:E,setFirstPasserOfPreviousRound:P,setFirstPlayerOverride:O,setPassInfo:_,updatePassInfo:N,addLogEntry:j,resetGame:D,setWinner:R,processAction:k,isActionInProgress:B,getActionQueueLength:J,clearActionQueue:q,isSimultaneousPhase:Z,isSequentialPhase:ce,routeAction:le,gameStateManager:qe,p2pManager:fc}},CA=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(`🚢 Initialized ship placement: ${e.length} sections available`),console.log(`🎯 Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class Pc{constructor(){if(Pc.instance)return Pc.instance;Pc.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","determineFirstPlayer","allocateShields","mandatoryDroneRemoval"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,console.log("🎮 GameFlowManager initialized")}initialize(t,n,r,i){if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService=new Gc(t),i&&i.initialize){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;i.initialize(u,l,s,n,t)}this.setupEventListeners(),console.log("🔧 GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe((t,n)=>{this.checkSequentialPhaseCompletion(t,n),this.checkSimultaneousPhaseCompletion(t,n)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(`🔔 GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="droneSelection"){console.log(`🚀 GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage="preGame",this.roundNumber=0;let n={};if(t==="droneSelection"){console.log("🎲 GameFlowManager initializing drone selection phase data");const r=e2(_n),i=CA();n={...r,...i}}this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...n},"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){console.log(`✅ GameFlowManager: Simultaneous phase '${t}' completed`,n);const r=this.getNextPhase(t);r?(this.isSequentialPhase(r)?(console.log(`🔄 GameFlowManager: Handover to sequential phase '${r}'`),this.initiateSequentialPhase(r)):(console.log(`🔄 GameFlowManager: Continuing with simultaneous phase '${r}'`),await this.transitionToPhase(r)),this.actionProcessor&&(this.actionProcessor.clearPhaseCommitments(t),console.log(`🧹 GameFlowManager: Cleaned up completed phase '${t}' after transition`))):(console.log("🎯 GameFlowManager: Game flow completed or needs special handling"),this.actionProcessor&&(this.actionProcessor.clearPhaseCommitments(t),console.log(`🧹 GameFlowManager: Cleaned up final phase '${t}'`)))}checkSequentialPhaseCompletion(t,n){n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(console.log(`🎯 GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(n!=="STATE_UPDATED"||!t.commitments)return;const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r))return;const i=t.commitments[r];if(!i)return;i.player1?.completed&&i.player2?.completed&&(console.log(`🎯 GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){console.log(`✅ GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(`🤖 GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="gameInitializing"?n=await this.processGameInitializingPhase():t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():console.warn(`⚠️ No handler for automatic phase: ${t}`),n?(console.log(`🔄 GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),await this.transitionToPhase(n)):console.warn(`⚠️ No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(){console.log("🃏 GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await na(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-24simbD1.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error("❌ GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),console.log("✅ Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return console.log("✅ Automatic draw completed, returning next phase:",s),s}catch(n){console.error("❌ Error during automatic draw phase:",n)}}async processAutomaticEnergyResetPhase(){console.log("⚡ GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error("❌ GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),r=(await na(async()=>{const{default:p}=await Promise.resolve().then(()=>LM);return{default:p}},void 0)).default,i=new r(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={...n.player1,energy:s.totals.energyPerTurn,deploymentBudget:s.totals.deploymentBudget},d={...n.player2,energy:l.totals.energyPerTurn,deploymentBudget:l.totals.deploymentBudget};await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:u,player2:d}}),console.log(`✅ Energy reset complete - Player 1: ${u.energy} energy, Player 2: ${d.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const h=this.getNextPhase("energyReset");return console.log("✅ Automatic energy reset completed, returning next phase:",h),h}catch(n){console.error("❌ Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(){console.log("🎯 GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:"placement",gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(n=>setTimeout(n,100));const t=this.getNextPhase("gameInitializing");return console.log("✅ Game initialization completed, returning next phase:",t),t}catch(t){throw console.error("❌ Error during game initialization:",t),t}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn("⚠️ GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return!1}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(`🎯 GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(`🔄 Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn("⚠️ ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1)),console.log(`🔄 GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"?(console.log("🚢 GameFlowManager: Initializing placement phase data"),r=CA()):t==="determineFirstPlayer"&&(console.log("🎯 GameFlowManager: Initializing first player determination phase"),this.actionProcessor&&(i=await this.actionProcessor.processFirstPlayerDetermination(),console.log("🎯 First player determination completed:",i),i&&i.stateUpdates&&(r={...r,...i.stateUpdates},console.log("🎯 GameFlowManager: Including first player state updates:",i.stateUpdates)))),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!0}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){console.log(`🤖 GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,console.log(`🔄 GameFlowManager: Starting round ${this.roundNumber}`);const t={player1Passed:!1,player2Passed:!1,firstPasser:null};this.gameStateManager.setPassInfo(t),console.log("✅ PassInfo reset for new round");const n=this.ROUND_PHASES.find(r=>this.isPhaseRequired(r));n?await this.transitionToPhase(n):(console.warn("⚠️ No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){console.log(`🏆 GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log("🔄 GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const jc=new Pc,jy=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];function EA(){const{gameStateManager:e}=Ri(),[t,n]=C.useState(!1),r=()=>{console.log("🎮 Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{console.log("🎮 Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},l=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#00ff88",color:"#000000",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 255, 136, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#00cc6a",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#00ff88",u.target.style.transform="translateY(0)"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#ff6b35",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 53, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#e55a2b",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#ff6b35",u.target.style.transform="translateY(0)"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"10px 20px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>{u.target.style.backgroundColor="#cccccc",u.target.style.color="#1a1a1a"},onMouseOut:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#cccccc"},children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"DRONE WARS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"Strategic Combat in the Digital Arena"}),v.jsx("button",{onClick:s,style:{fontSize:"1.5rem",padding:"15px 40px",backgroundColor:"#0088ff",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 136, 255, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#0066cc",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#0088ff",u.target.style.transform="translateY(0)"},children:"START GAME"})]})})}function yR(){const{gameState:e,gameStateManager:t}=Ri(),[n,r]=C.useState(null),i=e.gameMode==="local",s=e.gameMode==="multiplayer",l=()=>{console.log("🔙 Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=h=>{console.log("🤖 Selected AI:",h.name),r(h)},d=()=>{if(i&&n){console.log("🎮 Starting single player game with AI:",n.name);const h=_n.filter(m=>n.dronePool.includes(m.name)),p={};h.forEach(m=>{p[m.name]=0}),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:h,deployedDroneCounts:p,aiPersonality:n})}else s&&(console.log("🎮 Starting multiplayer game"),t.startGame("multiplayer",{name:"Player 1"},{name:"Player 2"}))};return v.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:jy.map(h=>v.jsxs("div",{onClick:()=>u(h),style:{padding:"20px",backgroundColor:n?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:p=>{n?.name!==h.name&&(p.target.style.backgroundColor="#333333",p.target.style.borderColor="#666666")},onMouseOut:p=>{n?.name!==h.name&&(p.target.style.backgroundColor="#2a2a2a",p.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),s&&v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[v.jsx("div",{style:{fontSize:"1.2rem",color:"#cccccc",marginBottom:"1rem"},children:"Multiplayer game ready to start"}),v.jsx("div",{style:{fontSize:"1rem",color:"#888888"},children:"Both players will customize their decks and drones in-game"})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"12px 24px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:h=>{h.target.style.backgroundColor="#cccccc",h.target.style.color="#1a1a1a"},onMouseOut:h=>{h.target.style.backgroundColor="transparent",h.target.style.color="#cccccc"},children:"BACK TO MENU"}),v.jsx("button",{onClick:d,disabled:i&&!n,style:{fontSize:"1.2rem",padding:"12px 30px",backgroundColor:i&&!n?"#444444":"#00ff88",color:i&&!n?"#888888":"#000000",border:"none",borderRadius:"8px",cursor:i&&!n?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:i&&!n?.5:1},onMouseOver:h=>{i&&!n||(h.target.style.backgroundColor="#00cc6a",h.target.style.transform="translateY(-2px)")},onMouseOut:h=>{i&&!n||(h.target.style.backgroundColor="#00ff88",h.target.style.transform="translateY(0)")},children:i?"START GAME":"START MULTIPLAYER"})]})]})}const PA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),vR=({text:e,className:t})=>{const n=C.useRef(null),r=C.useRef(null);return C.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,d;t.includes("font-orbitron")?(u=8,d=16):(u=8,d=12);let h=d;for(s.style.fontSize=h+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&h>u;)h-=.5,s.style.fontSize=h+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},Qf=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:d})=>{let h=e.limit;l.forEach(le=>{le.mod.stat==="limit"&&(h+=le.mod.value)});const p=i>=h,m=n&&(!p||s),y=C.useMemo(()=>{const le={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(te=>{te.mod.stat==="cost"?le.cost=Math.max(0,le.cost+te.mod.value):le.hasOwnProperty(te.mod.stat)&&(le[te.mod.stat]+=te.mod.value)}),le},[e,l]),x=y.cost,S=y.attack>e.attack,A=y.attack<e.attack,E=S?"text-green-400":A?"text-red-400":"text-white",P=y.speed>e.speed,O=y.speed<e.speed,_=P?"text-green-400":O?"text-red-400":"text-white",N=y.cost<e.class,j=y.cost>e.class,D=N?"text-green-400":j?"text-red-400":"text-white",k=h>e.limit?"text-green-400":"text-white",{name:B,image:J,hull:q,shields:Z,abilities:ce}=e;return v.jsx("div",{onClick:m?()=>t(e):void 0,className:`
        w-60 h-[320px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${m?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${m?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:v.jsxs("div",{className:`
          w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden
        `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:J,alt:B,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(vR,{text:B,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(PA,{value:y.attack,isFlat:!1,icon:xy,iconColor:"text-red-400",textColor:E})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:Z>0&&Array.from({length:Z}).map((le,te)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${te}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:q}).map((le,te)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${te}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(PA,{value:y.speed,isFlat:!0,icon:by,iconColor:"text-blue-400",textColor:_})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-40 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:ce&&ce.length>0?ce.map((le,te)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:le.name}),v.jsx("p",{className:"text-gray-400 text-xs leading-tight font-exo",children:le.description})]},te)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(_c,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${D}`,children:x})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:le=>{le.stopPropagation(),d&&d(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${p?"text-pink-500":k}`,children:[i,"/",h]})})]})]})]})]})})},Iv=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(Pv,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"✅ Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function bR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r}=Ri(),{droneSelectionPool:i,droneSelectionTrio:s,turnPhase:l}=e,u=r(),[d,h]=C.useState([]),[p,m]=C.useState(s),[y,x]=C.useState(i),[S,A]=C.useState({droneSelection:!1}),[E,P]=C.useState({droneSelection:!1});C.useEffect(()=>{const D=R=>{const{type:k,phase:B,playerId:J}=R.detail||R;console.log(`🔔 DroneSelectionScreen received PhaseManager event: ${k}`,{phase:B,playerId:J}),B==="droneSelection"&&(k==="playerCompleted"?J===t()?A(Z=>({...Z,droneSelection:!0})):n()&&P(Z=>({...Z,droneSelection:!0})):k==="phaseCompleted"&&(h([]),A(q=>({...q,droneSelection:!1})),P(q=>({...q,droneSelection:!1}))))};return window.addEventListener("phaseManagerEvent",D),()=>{window.removeEventListener("phaseManagerEvent",D)}},[t,n]);const O=D=>{if(l!=="droneSelection")return;console.log("🔧 handleChooseDroneForSelection called with:",D.name);const R=[...d,D];if(h(R),R.length<5){const k=UM(y);m(k.droneSelectionTrio),x(k.droneSelectionPool),console.log("🔧 Advanced to next trio locally, selected:",R.length,"of 5 drones")}else console.log("🔧 All 5 drones selected, waiting for Continue button click")},_=()=>{if(l!=="droneSelection")return;console.log("🔧 handleContinueDroneSelection called with:",d.length,"drones");const D=t();qe.actionProcessor.queueAction({type:"commitment",payload:{playerId:D,phase:"droneSelection",actionData:{drones:d}}}).then(R=>{if(!R.success){console.error("❌ Drone selection submission failed:",R.error);return}console.log("✅ Drone selection submitted successfully")}).catch(R=>{console.error("❌ Drone selection submission error:",R)}),console.log("✅ Drone selection submitted to PhaseManager")},N=S.droneSelection;if(n()&&N&&!E.droneSelection){const R=qe.actionProcessor.getPhaseCommitmentStatus("droneSelection").commitments?.player1?.drones||u.activeDronePool||d,k=R.length>0?R.map(B=>B.name).join(", "):"Selection complete";return v.jsx(Iv,{phase:"droneSelection",localPlayerStatus:`You selected: ${k}`})}const j=d.length===5;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((D,R)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${R<d.length?"bg-green-500":"bg-gray-600"}`},R)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[d.length,"/5 drones selected"]})]}),j?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:"✅ Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",d.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),p&&p.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:p.map((D,R)=>v.jsx(Qf,{drone:D,onClick:()=>O(D),isSelectable:!0,deployedCount:0},D.name||R))})]}),v.jsx("button",{onClick:_,disabled:!j,className:`px-8 py-3 font-bold rounded-lg transition-all mb-8 ${j?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/25 hover:shadow-green-500/30 transform hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:j?"Continue to Deck Selection":`Continue (${d.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",d.length,"/5)",j&&v.jsx("span",{className:"text-green-400 ml-2",children:"✓"})]}),d.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:d.map((D,R)=>v.jsx(Qf,{drone:D,isSelectable:!1,deployedCount:0},R))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function xR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getOpponentPlayerState:i,addLogEntry:s}=Ri(),{turnPhase:l}=e,u=r();i();const[d,h]=C.useState({deckSelection:!1}),[p,m]=C.useState({deckSelection:!1});C.useEffect(()=>{const S=A=>{const{type:E,phase:P,playerId:O}=A.detail||A;console.log(`🔔 DeckSelectionScreen received PhaseManager event: ${E}`,{phase:P,playerId:O}),P==="deckSelection"&&(E==="playerCompleted"?O===t()?h(N=>({...N,deckSelection:!0})):n()&&m(N=>({...N,deckSelection:!0})):E==="phaseCompleted"&&(h(_=>({..._,deckSelection:!1})),m(_=>({..._,deckSelection:!1}))))};return window.addEventListener("phaseManagerEvent",S),()=>{window.removeEventListener("phaseManagerEvent",S)}},[t,n]);const y=async S=>{if(l==="deckSelection")if(console.log("🔧 handleDeckChoice called with:",S),S==="standard"){const A=t(),E=De.buildDeckFromList(Ds),P=await qe.actionProcessor.processCommitment({phase:"deckSelection",playerId:A,commitment:{deck:E}});if(!P.success){console.error("❌ Deck selection submission failed:",P.error);return}console.log("✅ Standard deck selection submitted to PhaseManager"),s({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else S==="custom"&&(console.log("🔧 Transitioning to deck building phase"),jc.transitionToPhase("deckBuilding"))},x=u.deck&&u.deck.length>0;return console.log("Deck selection render check:",{isMultiplayer:n(),localPlayerHasDeck:x,opponentPhaseCompletion_deckSelection:p.deckSelection,turnPhase:l,localPlayerDeckLength:u.deck?.length}),n()&&x&&!p.deckSelection?v.jsx(Iv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>y("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"mt-6 bg-cyan-600 text-white font-bold px-6 py-2 rounded-full hover:bg-cyan-700 transition-colors duration-200",children:"Select"})]}),v.jsxs("div",{onClick:()=>y("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const SR=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Zf=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:d,isHovered:h,onMouseEnter:p,onMouseLeave:m,isCardTarget:y,isInMiddleLane:x,reallocationState:S,gameEngine:A,turnPhase:E,isMyTurn:P,passInfo:O,getLocalPlayerId:_,localPlayerState:N,shipAbilityMode:j})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const D=A.getShipStatus(t),R=D==="critical"?"bg-red-900/60":D==="damaged"?"bg-yellow-900/50":"bg-black/60";let k=D==="critical"?"border-red-500":D==="damaged"?"border-yellow-500":d?"border-pink-500":"border-cyan-500";const B=d?"shadow-pink-500/20":"shadow-cyan-500/20",J=h?"scale-105 shadow-xl":"";let q="";if(S)switch(S){case"can-remove":k="border-orange-400",q="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":k="border-orange-600",q="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":k="border-gray-600",q="opacity-50";break;case"can-add":k="border-green-400",q="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":k="border-green-600",q="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":k="border-gray-600",q="opacity-50";break}const Z=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",ce=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,te=>te.toUpperCase()),le={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{className:`
        relative rounded-xl shadow-lg ${B} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${k}
        ${u?`cursor-pointer ${J}`:""}
        ${Z}
        ${q}
      `,style:le,onClick:s,onMouseEnter:p,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${R}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-4 h-full",children:[v.jsx("div",{className:`absolute top-2 right-2 flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${D==="healthy"?"bg-green-500/20 text-green-300":D==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:D.charAt(0).toUpperCase()+D.slice(1)}),v.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:ce}),v.jsx("p",{className:"text-xs text-gray-400 italic max-w-[200px]",children:t.description})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([te,$])=>{const ee=x&&t.middleLaneBonus&&t.middleLaneBonus[te];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[te,":"]}),v.jsx("span",{className:ee?"text-green-400 font-bold":"",children:$})]},te)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((te,$)=>v.jsx("div",{children:$<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},$))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((te,$)=>{const ee=$+1,{critical:he,damaged:pe}=t.thresholds;let I;ee<=he?I="bg-red-500":ee<=pe?I="bg-orange-500":I="bg-green-500";const K=$<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${K?I:"bg-gray-400"} border border-black/50`},$)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(SR,{ability:t.ability,isUsable:E==="action"&&P()&&!O[`${_()}Passed`]&&N.energy>=t.ability.cost.energy,isSelected:j?.ability.id===t.ability.id,onClick:te=>l(te,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function AR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getLocalPlacedSections:i,setModalContent:s}=Ri(),{turnPhase:l,unplacedSections:u}=e,d=r(),h=i(),[p,m]=C.useState(null),[y,x]=C.useState(h||[null,null,null]),[S,A]=C.useState(u||["bridge","powerCell","droneControlHub"]),[E,P]=C.useState({placement:!1}),[O,_]=C.useState({placement:!1});C.useEffect(()=>{const k=B=>{const{type:J,phase:q,playerId:Z}=B.detail||B;console.log(`🔔 ShipPlacementScreen received PhaseManager event: ${J}`,{phase:q,playerId:Z}),q==="placement"&&(J==="playerCompleted"?Z===t()?P(le=>({...le,placement:!0})):n()&&_(le=>({...le,placement:!0})):J==="phaseCompleted"&&(P(ce=>({...ce,placement:!1})),_(ce=>({...ce,placement:!1}))))};return window.addEventListener("phaseManagerEvent",k),()=>{window.removeEventListener("phaseManagerEvent",k)}},[t,n]);const N=k=>{if(l==="placement")if(console.log("🔧 handleSelectSectionForPlacement called with:",k,"gameMode:",e.gameMode),S.includes(k))m(B=>B===k?null:k);else{const B=y.indexOf(k),J=[...y];J[B]=null,x(J),A(q=>[...q,k]),m(null)}},j=k=>{if(l==="placement")if(console.log("🔧 handleLaneSelectForPlacement called with lane:",k,"gameMode:",e.gameMode),p){if(y[k]){const B=y[k],J=[...y];J[k]=p;const q=S.indexOf(p),Z=[...S];Z.splice(q,1,B),x(J),A(Z)}else{const B=[...y];B[k]=p,x(B),A(J=>J.filter(q=>q!==p))}m(null)}else y[k]&&N(y[k])},D=async()=>{if(l!=="placement")return;if(console.log("🔧 handleConfirmPlacement called"),y.some(B=>B==null)){s({title:"Incomplete Placement",text:"All ship sections must be placed before confirming placement.",onClose:()=>s(null),isBlocking:!1});return}console.log("🔧 Submitting placement to PhaseManager:",y);try{const B=await qe.actionProcessor.processCommitment({phase:"placement",playerId:t(),commitment:{placedSections:y}});if(!B.success){console.error("❌ Placement submission failed:",B.error),s({title:"Placement Error",text:B.error,onClose:()=>s(null),isBlocking:!1});return}console.log("✅ Placement submitted to PhaseManager"),n()&&!B.data.bothComplete&&s({title:"Placement Confirmed",text:"Your ship placement has been confirmed. Waiting for opponent to complete their placement...",onClose:()=>s(null),isBlocking:!1})}catch(B){console.error("❌ Error submitting placement:",B),s({title:"Placement Error",text:"An error occurred while submitting placement. Please try again.",onClose:()=>s(null),isBlocking:!1})}};if(y&&y.length===3&&y.every(k=>k!==null),n()&&E.placement&&!O.placement){const k=y.map((B,J)=>B?B.name:"Empty").join(", ");return v.jsx(Iv,{phase:"placement",localPlayerStatus:`Your ship layout: ${k}`})}const R=y.every(k=>k!==null);return console.log("🔥 ShipPlacementScreen rendered:",{allPlaced:R,placed:y,unplaced:u,selected:p}),v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(k=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes(k)&&v.jsx("div",{onClick:()=>N(k),className:`h-full transition-all duration-300 rounded-xl ${p===k?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(Zf,{section:k,stats:d.shipSections[k],effectiveStatsForDisplay:d.shipSections[k].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:De,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:d,shipAbilityMode:null})})},k))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(k=>{const B=y[k],J=p&&!y[k];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>j(k),children:B?v.jsx(Zf,{section:B,stats:d.shipSections[B],effectiveStatsForDisplay:d.shipSections[B].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:k===1,gameEngine:De,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:d,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${J?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:k===1?"Lane 2 (Center Bonus)":`Lane ${k+1}`})})},k)})})]}),v.jsx("button",{onClick:()=>{console.log(`🔥 Confirm Layout button clicked! allPlaced: ${R}`),D()},disabled:!R,className:"mt-12 bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 disabled:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed enabled:hover:bg-green-500 shadow-lg",children:"Confirm Layout"})]})]})}function H2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=H2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function rt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=H2(e))&&(r&&(r+=" "),r+=t);return r}var Um={},zm={},wA;function CR(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(zm)),zm}var Gm={},OA;function q2(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Gm)),Gm}var Hm={},_A;function Y2(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Hm)),Hm}var qm={},TA;function Lv(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",d=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const h=n[s];u?h==="\\"&&s+1<i?(s++,l+=n[s]):h===u?u="":l+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,r.push(l),l=""):l+=h:h==="["?(d=!0,l&&(r.push(l),l="")):h==="."?l&&(r.push(l),l=""):l+=h,s++}return l&&r.push(l),r}e.toPath=t})(qm)),qm}var DA;function $v(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CR(),n=q2(),r=Y2(),i=Lv();function s(u,d,h){if(u==null)return h;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return h;const p=u[d];return p===void 0?n.isDeepKey(d)?s(u,i.toPath(d),h):h:p}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const p=u[d];return p===void 0?h:p}default:{if(Array.isArray(d))return l(u,d,h);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return h;const p=u[d];return p===void 0?h:p}}}function l(u,d,h){if(d.length===0)return h;let p=u;for(let m=0;m<d.length;m++){if(p==null||t.isUnsafeProperty(d[m]))return h;p=p[d[m]]}return p===void 0?h:p}e.get=s})(Um)),Um}var Ym,jA;function ER(){return jA||(jA=1,Ym=$v().get),Ym}var PR=ER();const ko=Hr(PR);var Fm={exports:{}},lt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA;function wR(){if(NA)return lt;NA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var E=A.$$typeof;switch(E){case e:switch(A=A.type,A){case n:case i:case r:case d:case h:case y:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case p:return A;case s:return A;default:return E}}case t:return E}}}return lt.ContextConsumer=s,lt.ContextProvider=l,lt.Element=e,lt.ForwardRef=u,lt.Fragment=n,lt.Lazy=m,lt.Memo=p,lt.Portal=t,lt.Profiler=i,lt.StrictMode=r,lt.Suspense=d,lt.SuspenseList=h,lt.isContextConsumer=function(A){return S(A)===s},lt.isContextProvider=function(A){return S(A)===l},lt.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},lt.isForwardRef=function(A){return S(A)===u},lt.isFragment=function(A){return S(A)===n},lt.isLazy=function(A){return S(A)===m},lt.isMemo=function(A){return S(A)===p},lt.isPortal=function(A){return S(A)===t},lt.isProfiler=function(A){return S(A)===i},lt.isStrictMode=function(A){return S(A)===r},lt.isSuspense=function(A){return S(A)===d},lt.isSuspenseList=function(A){return S(A)===h},lt.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===d||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===p||A.$$typeof===l||A.$$typeof===s||A.$$typeof===u||A.$$typeof===x||A.getModuleId!==void 0)},lt.typeOf=S,lt}var kA;function OR(){return kA||(kA=1,Fm.exports=wR()),Fm.exports}var _R=OR(),rn=e=>e===0?0:e>0?1:-1,or=e=>typeof e=="number"&&e!=+e,Po=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Te=e=>(typeof e=="number"||e instanceof Number)&&!or(e),ia=e=>Te(e)||typeof e=="string",TR=0,Nc=e=>{var t=++TR;return"".concat(e||"").concat(t)},On=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Te(t)&&typeof t!="string")return r;var s;if(Po(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return or(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},F2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function yn(e,t,n){return Te(e)&&Te(t)?e+n*(t-e):t}function DR(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):ko(r,t))===n)}var an=e=>e===null||typeof e>"u",Hc=e=>an(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),jR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Bv(e){if(typeof e!="string")return!1;var t=jR;return t.includes(e)}var NR=["viewBox","children"],MA=["points","pathLength"],Km={svg:NR,polygon:MA,polyline:MA},kR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(C.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Bv(i)&&(r[i]=(s=>n[i](n,s)))}),r},MR=(e,t,n)=>r=>(e(t,n,r),null),qc=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Bv(i)&&typeof s=="function"&&(r||(r={}),r[i]=MR(s,t,n))}),r},RR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function K2(e){if(typeof e!="string")return!1;var t=RR;return t.includes(e)}function zo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return K2(r)});return Object.fromEntries(t)}var RA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",IA=null,Vm=null,V2=e=>{if(e===IA&&Array.isArray(Vm))return Vm;var t=[];return C.Children.forEach(e,n=>{an(n)||(_R.isFragment(n)?t=t.concat(V2(n.props.children)):t.push(n))}),Vm=t,IA=e,t};function Uv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>RA(i)):r=[RA(t)],V2(e).forEach(i=>{var s=ko(i,"type.displayName")||ko(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var IR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&Km?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||K2(t)),d=!!n&&Bv(t);return l||u||d},$t=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(C.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;IR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},LR=["children","width","height","viewBox","className","style","title","desc"];function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ny.apply(null,arguments)}function $R(e,t){if(e==null)return{};var n,r,i=BR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var zv=C.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:d,desc:h}=e,p=$R(e,LR),m=s||{width:r,height:i,x:0,y:0},y=rt("recharts-surface",l);return C.createElement("svg",Ny({},$t(p,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),C.createElement("title",null,d),C.createElement("desc",null,h),n)}),UR=["children","className"];function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ky.apply(null,arguments)}function zR(e,t){if(e==null)return{};var n,r,i=GR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var qn=C.forwardRef((e,t)=>{var{children:n,className:r}=e,i=zR(e,UR),s=rt("recharts-layer",r);return C.createElement("g",ky({className:s},$t(i,!0),{ref:t}),n)}),X2=Dw(),W2=C.createContext(null),HR=()=>C.useContext(W2);function dt(e){return function(){return e}}const Q2=Math.cos,Jf=Math.sin,qr=Math.sqrt,ed=Math.PI,$d=2*ed,My=Math.PI,Ry=2*My,Ao=1e-6,qR=Ry-Ao;function Z2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function YR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Z2;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class FR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Z2:YR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,d=r-t,h=i-n,p=l-t,m=u-n,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Ao)if(!(Math.abs(m*d-h*p)>Ao)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,S=i-u,A=d*d+h*h,E=x*x+S*S,P=Math.sqrt(A),O=Math.sqrt(y),_=s*Math.tan((My-Math.acos((A+y-E)/(2*P*O)))/2),N=_/O,j=_/P;Math.abs(N-1)>Ao&&this._append`L${t+N*p},${n+N*m}`,this._append`A${s},${s},0,0,${+(m*x>p*S)},${this._x1=t+j*d},${this._y1=n+j*h}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),d=r*Math.sin(i),h=t+u,p=n+d,m=1^l,y=l?i-s:s-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Ao||Math.abs(this._y1-p)>Ao)&&this._append`L${h},${p}`,r&&(y<0&&(y=y%Ry+Ry),y>qR?this._append`A${r},${r},0,1,${m},${t-u},${n-d}A${r},${r},0,1,${m},${this._x1=h},${this._y1=p}`:y>Ao&&this._append`A${r},${r},0,${+(y>=My)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Gv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new FR(t)}function Hv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function J2(e){this._context=e}J2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Bd(e){return new J2(e)}function eO(e){return e[0]}function tO(e){return e[1]}function nO(e,t){var n=dt(!0),r=null,i=Bd,s=null,l=Gv(u);e=typeof e=="function"?e:e===void 0?eO:dt(e),t=typeof t=="function"?t:t===void 0?tO:dt(t);function u(d){var h,p=(d=Hv(d)).length,m,y=!1,x;for(r==null&&(s=i(x=l())),h=0;h<=p;++h)!(h<p&&n(m=d[h],h,d))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(m,h,d),+t(m,h,d));if(x)return s=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:dt(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:dt(+d),u):t},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:dt(!!d),u):n},u.curve=function(d){return arguments.length?(i=d,r!=null&&(s=i(r)),u):i},u.context=function(d){return arguments.length?(d==null?r=s=null:s=i(r=d),u):r},u}function Cf(e,t,n){var r=null,i=dt(!0),s=null,l=Bd,u=null,d=Gv(h);e=typeof e=="function"?e:e===void 0?eO:dt(+e),t=typeof t=="function"?t:dt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?tO:dt(+n);function h(m){var y,x,S,A=(m=Hv(m)).length,E,P=!1,O,_=new Array(A),N=new Array(A);for(s==null&&(u=l(O=d())),y=0;y<=A;++y){if(!(y<A&&i(E=m[y],y,m))===P)if(P=!P)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=x;--S)u.point(_[S],N[S]);u.lineEnd(),u.areaEnd()}P&&(_[y]=+e(E,y,m),N[y]=+t(E,y,m),u.point(r?+r(E,y,m):_[y],n?+n(E,y,m):N[y]))}if(O)return u=null,O+""||null}function p(){return nO().defined(i).curve(l).context(s)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:dt(+m),r=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:dt(+m),h):e},h.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:dt(+m),h):r},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:dt(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:dt(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:dt(+m),h):n},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(n)},h.lineX1=function(){return p().x(r).y(t)},h.defined=function(m){return arguments.length?(i=typeof m=="function"?m:dt(!!m),h):i},h.curve=function(m){return arguments.length?(l=m,s!=null&&(u=l(s)),h):l},h.context=function(m){return arguments.length?(m==null?s=u=null:u=l(s=m),h):s},h}class rO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function KR(e){return new rO(e,!0)}function VR(e){return new rO(e,!1)}const qv={draw(e,t){const n=qr(t/ed);e.moveTo(n,0),e.arc(0,0,n,0,$d)}},XR={draw(e,t){const n=qr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},aO=qr(1/3),WR=aO*2,QR={draw(e,t){const n=qr(t/WR),r=n*aO;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},ZR={draw(e,t){const n=qr(t),r=-n/2;e.rect(r,r,n,n)}},JR=.8908130915292852,iO=Jf(ed/10)/Jf(7*ed/10),eI=Jf($d/10)*iO,tI=-Q2($d/10)*iO,nI={draw(e,t){const n=qr(t*JR),r=eI*n,i=tI*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=$d*s/5,u=Q2(l),d=Jf(l);e.lineTo(d*n,-u*n),e.lineTo(u*r-d*i,d*r+u*i)}e.closePath()}},Xm=qr(3),rI={draw(e,t){const n=-qr(t/(Xm*3));e.moveTo(0,n*2),e.lineTo(-Xm*n,-n),e.lineTo(Xm*n,-n),e.closePath()}},vr=-.5,br=qr(3)/2,Iy=1/qr(12),aI=(Iy/2+1)*3,iI={draw(e,t){const n=qr(t/aI),r=n/2,i=n*Iy,s=r,l=n*Iy+n,u=-s,d=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,d),e.lineTo(vr*r-br*i,br*r+vr*i),e.lineTo(vr*s-br*l,br*s+vr*l),e.lineTo(vr*u-br*d,br*u+vr*d),e.lineTo(vr*r+br*i,vr*i-br*r),e.lineTo(vr*s+br*l,vr*l-br*s),e.lineTo(vr*u+br*d,vr*d-br*u),e.closePath()}};function oI(e,t){let n=null,r=Gv(i);e=typeof e=="function"?e:dt(e||qv),t=typeof t=="function"?t:dt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:dt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:dt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function td(){}function nd(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function oO(e){this._context=e}oO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sI(e){return new oO(e)}function sO(e){this._context=e}sO.prototype={areaStart:td,areaEnd:td,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lI(e){return new sO(e)}function lO(e){this._context=e}lO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:nd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cI(e){return new lO(e)}function cO(e){this._context=e}cO.prototype={areaStart:td,areaEnd:td,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uI(e){return new cO(e)}function LA(e){return e<0?-1:1}function $A(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(LA(s)+LA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function BA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Wm(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function rd(e){this._context=e}rd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wm(this,this._t0,BA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Wm(this,BA(this,n=$A(this,e,t)),n);break;default:Wm(this,this._t0,n=$A(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function uO(e){this._context=new fO(e)}(uO.prototype=Object.create(rd.prototype)).point=function(e,t){rd.prototype.point.call(this,t,e)};function fO(e){this._context=e}fO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function fI(e){return new rd(e)}function dI(e){return new uO(e)}function dO(e){this._context=e}dO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=UA(e),i=UA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function UA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function hI(e){return new dO(e)}function Ud(e,t){this._context=e,this._t=t}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function pI(e){return new Ud(e,.5)}function mI(e){return new Ud(e,0)}function gI(e){return new Ud(e,1)}function Is(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ly(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function yI(e,t){return e[t]}function vI(e){const t=[];return t.key=e,t}function bI(){var e=dt([]),t=Ly,n=Is,r=yI;function i(s){var l=Array.from(e.apply(this,arguments),vI),u,d=l.length,h=-1,p;for(const m of s)for(u=0,++h;u<d;++u)(l[u][h]=[0,+r(m,l[u].key,h,s)]).data=m;for(u=0,p=Hv(t(l));u<d;++u)l[p[u]].index=u;return n(l,p),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:dt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:dt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Ly:typeof s=="function"?s:dt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Is,i):n},i}function xI(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}Is(e,t)}}function SI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}Is(e,t)}}function AI(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,d=0,h=0;u<l;++u){for(var p=e[t[u]],m=p[r][1]||0,y=p[r-1][1]||0,x=(m-y)/2,S=0;S<u;++S){var A=e[t[S]],E=A[r][1]||0,P=A[r-1][1]||0;x+=E-P}d+=m,h+=x*m}i[r-1][1]+=i[r-1][0]=n,d&&(n-=h/d)}i[r-1][1]+=i[r-1][0]=n,Is(e,t)}}var CI=["type","size","sizeType"];function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$y.apply(null,arguments)}function zA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function GA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(n),!0).forEach(function(r){EI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EI(e,t,n){return(t=PI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PI(e){var t=wI(e,"string");return typeof t=="symbol"?t:t+""}function wI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OI(e,t){if(e==null)return{};var n,r,i=_I(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _I(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var hO={symbolCircle:qv,symbolCross:XR,symbolDiamond:QR,symbolSquare:ZR,symbolStar:nI,symbolTriangle:rI,symbolWye:iI},TI=Math.PI/180,DI=e=>{var t="symbol".concat(Hc(e));return hO[t]||qv},jI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*TI;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},NI=(e,t)=>{hO["symbol".concat(Hc(e))]=t},Yv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=OI(e,CI),s=GA(GA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=DI(l),x=oI().type(y).size(jI(n,r,l));return x()},{className:d,cx:h,cy:p}=s,m=$t(s,!0);return h===+h&&p===+p&&n===+n?C.createElement("path",$y({},m,{className:rt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};Yv.registerSymbol=NI;function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},By.apply(null,arguments)}function HA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(n),!0).forEach(function(r){Fv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fv(e,t,n){return(t=MI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MI(e){var t=RI(e,"string");return typeof t=="symbol"?t:t+""}function RI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xr=32;class Kv extends C.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=xr/2,s=xr/6,l=xr/3,u=t.inactive?r:t.color,d=n??t.type;if(d==="none")return null;if(d==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:xr,y2:i,className:"recharts-legend-icon"});if(d==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(xr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return C.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(xr/8,"h").concat(xr,"v").concat(xr*3/4,"h").concat(-xr,"z"),className:"recharts-legend-icon"});if(C.isValidElement(t.legendIcon)){var h=kI({},t);return delete h.legendIcon,C.cloneElement(t.legendIcon,h)}return C.createElement(Yv,{fill:u,cx:i,cy:i,size:xr,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:xr,height:xr},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,m)=>{var y=p.formatter||i,x=rt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:p.inactive});if(p.type==="none")return null;var S=p.inactive?s:p.color,A=y?y(p.value,p,m):p.value;return C.createElement("li",By({className:x,style:d,key:"legend-item-".concat(m)},qc(this.props,p,m)),C.createElement(zv,{width:n,height:n,viewBox:u,style:h,"aria-label":"".concat(A," legend icon")},this.renderIcon(p,l)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Fv(Kv,"displayName","Legend");Fv(Kv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Qm={},Zm={},qA;function II(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(Zm)),Zm}var Jm={},YA;function pO(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Jm)),Jm}var eg={},tg={},ng={},FA;function LI(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(ng)),ng}var KA;function Vv(){return KA||(KA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LI();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(tg)),tg}var rg={},VA;function $I(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(rg)),rg}var XA;function BI(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vv(),n=$I();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(eg)),eg}var ag={},ig={},WA;function UI(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$v();function n(r){return function(i){return t.get(i,r)}}e.property=n})(ig)),ig}var og={},sg={},lg={},cg={},QA;function mO(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(cg)),cg}var ug={},ZA;function gO(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(ug)),ug}var fg={},JA;function yO(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(fg)),fg}var eC;function zI(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xv(),n=mO(),r=gO(),i=yO();function s(m,y,x){return typeof x!="function"?t.isMatch(m,y):l(m,y,function S(A,E,P,O,_,N){const j=x(A,E,P,O,_,N);return j!==void 0?!!j:l(A,E,S,N)},new Map)}function l(m,y,x,S){if(y===m)return!0;switch(typeof y){case"object":return u(m,y,x,S);case"function":return Object.keys(y).length>0?l(m,{...y},x,S):i.eq(m,y);default:return n.isObject(m)?typeof y=="string"?y==="":!0:i.eq(m,y)}}function u(m,y,x,S){if(y==null)return!0;if(Array.isArray(y))return h(m,y,x,S);if(y instanceof Map)return d(m,y,x,S);if(y instanceof Set)return p(m,y,x,S);const A=Object.keys(y);if(m==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(y))return S.get(y)===m;S&&S.set(y,m);try{for(let E=0;E<A.length;E++){const P=A[E];if(!r.isPrimitive(m)&&!(P in m)||y[P]===void 0&&m[P]!==void 0||y[P]===null&&m[P]!==null||!x(m[P],y[P],P,m,y,S))return!1}return!0}finally{S&&S.delete(y)}}function d(m,y,x,S){if(y.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,E]of y.entries()){const P=m.get(A);if(x(P,E,A,m,y,S)===!1)return!1}return!0}function h(m,y,x,S){if(y.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let E=0;E<y.length;E++){const P=y[E];let O=!1;for(let _=0;_<m.length;_++){if(A.has(_))continue;const N=m[_];let j=!1;if(x(N,P,E,m,y,S)&&(j=!0),j){A.add(_),O=!0;break}}if(!O)return!1}return!0}function p(m,y,x,S){return y.size===0?!0:m instanceof Set?h([...m],[...y],x,S):!1}e.isMatchWith=s,e.isSetMatch=p})(lg)),lg}var tC;function Xv(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(sg)),sg}var dg={},hg={},pg={},nC;function GI(){return nC||(nC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(pg)),pg}var mg={},rC;function vO(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(mg)),mg}var gg={},aC;function bO(){return aC||(aC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",h="[object Set]",p="[object Array]",m="[object Function]",y="[object ArrayBuffer]",x="[object Object]",S="[object Error]",A="[object DataView]",E="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",_="[object Uint32Array]",N="[object BigUint64Array]",j="[object Int8Array]",D="[object Int16Array]",R="[object Int32Array]",k="[object BigInt64Array]",B="[object Float32Array]",J="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=p,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=N,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=B,e.float64ArrayTag=J,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=R,e.int8ArrayTag=j,e.mapTag=d,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=_,e.uint8ArrayTag=E,e.uint8ClampedArrayTag=P})(gg)),gg}var yg={},iC;function HI(){return iC||(iC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(yg)),yg}var oC;function xO(){return oC||(oC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GI(),n=vO(),r=bO(),i=gO(),s=HI();function l(p,m){return u(p,void 0,p,new Map,m)}function u(p,m,y,x=new Map,S=void 0){const A=S?.(p,m,y,x);if(A!==void 0)return A;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const E=new Array(p.length);x.set(p,E);for(let P=0;P<p.length;P++)E[P]=u(p[P],P,y,x,S);return Object.hasOwn(p,"index")&&(E.index=p.index),Object.hasOwn(p,"input")&&(E.input=p.input),E}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const E=new RegExp(p.source,p.flags);return E.lastIndex=p.lastIndex,E}if(p instanceof Map){const E=new Map;x.set(p,E);for(const[P,O]of p)E.set(P,u(O,P,y,x,S));return E}if(p instanceof Set){const E=new Set;x.set(p,E);for(const P of p)E.add(u(P,void 0,y,x,S));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const E=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,E);for(let P=0;P<p.length;P++)E[P]=u(p[P],P,y,x,S);return E}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const E=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,E),d(E,p,y,x,S),E}if(typeof File<"u"&&p instanceof File){const E=new File([p],p.name,{type:p.type});return x.set(p,E),d(E,p,y,x,S),E}if(p instanceof Blob){const E=new Blob([p],{type:p.type});return x.set(p,E),d(E,p,y,x,S),E}if(p instanceof Error){const E=new p.constructor;return x.set(p,E),E.message=p.message,E.name=p.name,E.stack=p.stack,E.cause=p.cause,d(E,p,y,x,S),E}if(typeof p=="object"&&h(p)){const E=Object.create(Object.getPrototypeOf(p));return x.set(p,E),d(E,p,y,x,S),E}return p}function d(p,m,y=p,x,S){const A=[...Object.keys(m),...t.getSymbols(m)];for(let E=0;E<A.length;E++){const P=A[E],O=Object.getOwnPropertyDescriptor(p,P);(O==null||O.writable)&&(p[P]=u(m[P],P,y,x,S))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(hg)),hg}var sC;function qI(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xO();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(dg)),dg}var lC;function YI(){return lC||(lC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xv(),n=qI();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(og)),og}var vg={},bg={},xg={},cC;function FI(){return cC||(cC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xO(),n=bO();function r(i,s){return t.cloneDeepWith(i,(l,u,d,h)=>{const p=s?.(l,u,d,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(xg)),xg}var uC;function KI(){return uC||(uC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(bg)),bg}var Sg={},Ag={},fC;function SO(){return fC||(fC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Ag)),Ag}var Cg={},dC;function VI(){return dC||(dC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vO();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Cg)),Cg}var hC;function XI(){return hC||(hC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q2(),n=SO(),r=VI(),i=Lv();function s(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?d=i.toPath(u):d=[u],d.length===0)return!1;let h=l;for(let p=0;p<d.length;p++){const m=d[p];if((h==null||!Object.hasOwn(h,m))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(m)&&m<h.length))return!1;h=h[m]}return!0}e.has=s})(Sg)),Sg}var pC;function WI(){return pC||(pC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xv(),n=Y2(),r=KI(),i=$v(),s=XI();function l(u,d){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=r.cloneDeep(d),function(h){const p=i.get(h,u);return p===void 0?s.has(h,u):d===void 0?p===void 0:t.isMatch(p,d)}}e.matchesProperty=l})(vg)),vg}var mC;function QI(){return mC||(mC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pO(),n=UI(),r=YI(),i=WI();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(ag)),ag}var gC;function ZI(){return gC||(gC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=II(),n=pO(),r=BI(),i=QI();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(Qm)),Qm}var Eg,yC;function JI(){return yC||(yC=1,Eg=ZI().uniqBy),Eg}var e4=JI();const vC=Hr(e4);function AO(e,t,n){return t===!0?vC(e,n):typeof t=="function"?vC(e,t):e}var Pg={exports:{}},wg={},Og={exports:{}},_g={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC;function t4(){if(bC)return _g;bC=1;var e=Ks();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(m,y){var x=y(),S=r({inst:{value:x,getSnapshot:y}}),A=S[0].inst,E=S[1];return s(function(){A.value=x,A.getSnapshot=y,d(A)&&E({inst:A})},[m,x,y]),i(function(){return d(A)&&E({inst:A}),m(function(){d(A)&&E({inst:A})})},[m]),l(x),x}function d(m){var y=m.getSnapshot;m=m.value;try{var x=y();return!n(m,x)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return _g.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,_g}var xC;function n4(){return xC||(xC=1,Og.exports=t4()),Og.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SC;function r4(){if(SC)return wg;SC=1;var e=Ks(),t=n4();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return wg.useSyncExternalStoreWithSelector=function(h,p,m,y,x){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function P(D){if(!O){if(O=!0,_=D,D=y(D),x!==void 0&&A.hasValue){var R=A.value;if(x(R,D))return N=R}return N=D}if(R=N,r(_,D))return R;var k=y(D);return x!==void 0&&x(R,k)?(_=D,R):(_=D,N=k)}var O=!1,_,N,j=m===void 0?null:m;return[function(){return P(p())},j===null?void 0:function(){return P(j())}]},[p,m,y,x]);var E=i(h,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=E},[E]),d(E),E},wg}var AC;function a4(){return AC||(AC=1,Pg.exports=r4()),Pg.exports}var i4=a4(),Wv=C.createContext(null),o4=e=>e,Pt=()=>{var e=C.useContext(Wv);return e?e.store.dispatch:o4},Ff=()=>{},s4=()=>Ff,l4=(e,t)=>e===t;function we(e){var t=C.useContext(Wv);return i4.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:s4,t?t.store.getState:Ff,t?t.store.getState:Ff,t?e:Ff,l4)}function c4(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function u4(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function f4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var CC=e=>Array.isArray(e)?e:[e];function d4(e){const t=Array.isArray(e[0])?e[0]:e;return f4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function h4(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var p4=class{constructor(e){this.value=e}deref(){return this.value}},m4=typeof WeakRef<"u"?WeakRef:p4,g4=0,EC=1;function Ef(){return{s:g4,v:void 0,o:null,p:null}}function CO(e,t={}){let n=Ef();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:d}=arguments;for(let m=0,y=d;m<y;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(x);A===void 0?(u=Ef(),S.set(x,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(x);A===void 0?(u=Ef(),S.set(x,u)):u=A}}const h=u;let p;if(u.s===EC)p=u.v;else if(p=e.apply(null,arguments),s++,r){const m=i?.deref?.()??i;m!=null&&r(m,p)&&(p=m,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new m4(p):p}return h.s=EC,h.v=p,p}return l.clearCache=()=>{n=Ef(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function y4(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,d={},h=i.pop();typeof h=="object"&&(d=h,h=i.pop()),c4(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...d},{memoize:m,memoizeOptions:y=[],argsMemoize:x=CO,argsMemoizeOptions:S=[]}=p,A=CC(y),E=CC(S),P=d4(i),O=m(function(){return s++,h.apply(null,arguments)},...A),_=x(function(){l++;const j=h4(P,arguments);return u=O.apply(null,j),u},...E);return Object.assign(_,{resultFunc:h,memoizedResultFunc:O,dependencies:P,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var W=y4(CO),v4=Object.assign((e,t=W)=>{u4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,d)=>(l[n[d]]=u,l),{}))},{withTypes:()=>v4}),Tg={},Dg={},jg={},PC;function b4(){return PC||(PC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(jg)),jg}var Ng={},kg={},wC;function EO(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(kg)),kg}var OC;function x4(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Ng)),Ng}var _C;function S4(){return _C||(_C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b4(),n=x4(),r=Lv();function i(s,l,u,d){if(s==null)return[];u=d?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,S)=>{let A=x;for(let E=0;E<S.length&&A!=null;++E)A=A[S[E]];return A},p=(x,S)=>S==null||x==null?S:typeof x=="object"&&"key"in x?Object.hasOwn(S,x.key)?S[x.key]:h(S,x.path):typeof x=="function"?x(S):Array.isArray(x)?h(S,x):typeof S=="object"?S[x]:S,m=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:m.map(S=>p(S,x))})).slice().sort((x,S)=>{for(let A=0;A<m.length;A++){const E=t.compareValues(x.criteria[A],S.criteria[A],u[A]);if(E!==0)return E}return 0}).map(x=>x.original)}e.orderBy=i})(Dg)),Dg}var Mg={},TC;function A4(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,d)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&d<s?l(p,d+1):i.push(p)}};return l(n,0),i}e.flatten=t})(Mg)),Mg}var Rg={},DC;function PO(){return DC||(DC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SO(),n=Vv(),r=mO(),i=yO();function s(l,u,d){return r.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?i.eq(d[u],l):!1}e.isIterateeCall=s})(Rg)),Rg}var jC;function C4(){return jC||(jC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S4(),n=A4(),r=PO();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(Tg)),Tg}var Ig,NC;function E4(){return NC||(NC=1,Ig=C4().sortBy),Ig}var P4=E4();const zd=Hr(P4);var wO=e=>e.legend.settings,w4=e=>e.legend.size,O4=e=>e.legend.payload,_4=W([O4,wO],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?zd(r,n):r});function T4(){return we(_4)}var Pf=1;function OO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=C.useState({height:0,left:0,top:0,width:0}),r=C.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Pf||Math.abs(l.left-t.left)>Pf||Math.abs(l.top-t.top)>Pf||Math.abs(l.width-t.width)>Pf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function mn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var D4=typeof Symbol=="function"&&Symbol.observable||"@@observable",kC=D4,Lg=()=>Math.random().toString(36).substring(7).split("").join("."),j4={INIT:`@@redux/INIT${Lg()}`,REPLACE:`@@redux/REPLACE${Lg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lg()}`},ad=j4;function Qv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function _O(e,t,n){if(typeof e!="function")throw new Error(mn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(mn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(mn(1));return n(_O)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,d=!1;function h(){l===s&&(l=new Map,s.forEach((E,P)=>{l.set(P,E)}))}function p(){if(d)throw new Error(mn(3));return i}function m(E){if(typeof E!="function")throw new Error(mn(4));if(d)throw new Error(mn(5));let P=!0;h();const O=u++;return l.set(O,E),function(){if(P){if(d)throw new Error(mn(6));P=!1,h(),l.delete(O),s=null}}}function y(E){if(!Qv(E))throw new Error(mn(7));if(typeof E.type>"u")throw new Error(mn(8));if(typeof E.type!="string")throw new Error(mn(17));if(d)throw new Error(mn(9));try{d=!0,i=r(i,E)}finally{d=!1}return(s=l).forEach(O=>{O()}),E}function x(E){if(typeof E!="function")throw new Error(mn(10));r=E,y({type:ad.REPLACE})}function S(){const E=m;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(mn(11));function O(){const N=P;N.next&&N.next(p())}return O(),{unsubscribe:E(O)}},[kC](){return this}}}return y({type:ad.INIT}),{dispatch:y,subscribe:m,getState:p,replaceReducer:x,[kC]:S}}function N4(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:ad.INIT})>"u")throw new Error(mn(12));if(typeof n(void 0,{type:ad.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(mn(13))})}function TO(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{N4(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let d=!1;const h={};for(let p=0;p<r.length;p++){const m=r[p],y=n[m],x=l[m],S=y(x,u);if(typeof S>"u")throw u&&u.type,new Error(mn(14));h[m]=S,d=d||S!==x}return d=d||r.length!==Object.keys(l).length,d?h:l}}function id(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function k4(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(mn(15))};const l={getState:i.getState,dispatch:(d,...h)=>s(d,...h)},u=e.map(d=>d(l));return s=id(...u)(i.dispatch),{...i,dispatch:s}}}function DO(e){return Qv(e)&&"type"in e&&typeof e.type=="string"}var jO=Symbol.for("immer-nothing"),MC=Symbol.for("immer-draftable"),sr=Symbol.for("immer-state");function zr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ls=Object.getPrototypeOf;function Mo(e){return!!e&&!!e[sr]}function Ba(e){return e?NO(e)||Array.isArray(e)||!!e[MC]||!!e.constructor?.[MC]||Yc(e)||Hd(e):!1}var M4=Object.prototype.constructor.toString();function NO(e){if(!e||typeof e!="object")return!1;const t=Ls(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===M4}function od(e,t){Gd(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Gd(e){const t=e[sr];return t?t.type_:Array.isArray(e)?1:Yc(e)?2:Hd(e)?3:0}function Uy(e,t){return Gd(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kO(e,t,n){const r=Gd(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function R4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Yc(e){return e instanceof Map}function Hd(e){return e instanceof Set}function Co(e){return e.copy_||e.base_}function zy(e,t){if(Yc(e))return new Map(e);if(Hd(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=NO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[sr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ls(e),r)}else{const r=Ls(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Zv(e,t=!1){return qd(e)||Mo(e)||!Ba(e)||(Gd(e)>1&&Object.defineProperties(e,{set:{value:wf},add:{value:wf},clear:{value:wf},delete:{value:wf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Zv(n,!0))),e}function wf(){zr(2)}function qd(e){return Object.isFrozen(e)}var I4={};function Ro(e){const t=I4[e];return t||zr(0,e),t}var kc;function MO(){return kc}function L4(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RC(e,t){t&&(Ro("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Gy(e){Hy(e),e.drafts_.forEach($4),e.drafts_=null}function Hy(e){e===kc&&(kc=e.parent_)}function IC(e){return kc=L4(kc,e)}function $4(e){const t=e[sr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function LC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[sr].modified_&&(Gy(t),zr(4)),Ba(e)&&(e=sd(t,e),t.parent_||ld(t,e)),t.patches_&&Ro("Patches").generateReplacementPatches_(n[sr].base_,e,t.patches_,t.inversePatches_)):e=sd(t,n,[]),Gy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jO?e:void 0}function sd(e,t,n){if(qd(t))return t;const r=t[sr];if(!r)return od(t,(i,s)=>$C(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ld(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),od(s,(u,d)=>$C(e,r,i,u,d,n,l)),ld(e,i,!1),n&&e.patches_&&Ro("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function $C(e,t,n,r,i,s,l){if(Mo(i)){const u=s&&t&&t.type_!==3&&!Uy(t.assigned_,r)?s.concat(r):void 0,d=sd(e,i,u);if(kO(n,r,d),Mo(d))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Ba(i)&&!qd(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;sd(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Yc(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&ld(e,i)}}function ld(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zv(t,n)}function B4(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:MO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Jv;n&&(i=[r],s=Mc);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var Jv={get(e,t){if(t===sr)return e;const n=Co(e);if(!Uy(n,t))return U4(e,n,t);const r=n[t];return e.finalized_||!Ba(r)?r:r===$g(e.base_,t)?(Bg(e),e.copy_[t]=Yy(r,e)):r},has(e,t){return t in Co(e)},ownKeys(e){return Reflect.ownKeys(Co(e))},set(e,t,n){const r=RO(Co(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=$g(Co(e),t),s=i?.[sr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(R4(n,i)&&(n!==void 0||Uy(e.base_,t)))return!0;Bg(e),qy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return $g(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Bg(e),qy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Co(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){zr(11)},getPrototypeOf(e){return Ls(e.base_)},setPrototypeOf(){zr(12)}},Mc={};od(Jv,(e,t)=>{Mc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Mc.deleteProperty=function(e,t){return Mc.set.call(this,e,t,void 0)};Mc.set=function(e,t,n){return Jv.set.call(this,e[0],t,n,e[0])};function $g(e,t){const n=e[sr];return(n?Co(n):e)[t]}function U4(e,t,n){const r=RO(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function RO(e,t){if(!(t in e))return;let n=Ls(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Ls(n)}}function qy(e){e.modified_||(e.modified_=!0,e.parent_&&qy(e.parent_))}function Bg(e){e.copy_||(e.copy_=zy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var z4=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(d=s,...h){return l.produce(d,p=>n.call(this,p,...h))}}typeof n!="function"&&zr(6),r!==void 0&&typeof r!="function"&&zr(7);let i;if(Ba(t)){const s=IC(this),l=Yy(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?Gy(s):Hy(s)}return RC(s,r),LC(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===jO&&(i=void 0),this.autoFreeze_&&Zv(i,!0),r){const s=[],l=[];Ro("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else zr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ba(e)||zr(8),Mo(e)&&(e=La(e));const t=IC(this),n=Yy(e,void 0);return n[sr].isManual_=!0,Hy(t),n}finishDraft(e,t){const n=e&&e[sr];(!n||!n.isManual_)&&zr(9);const{scope_:r}=n;return RC(r,t),LC(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ro("Patches").applyPatches_;return Mo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Yy(e,t){const n=Yc(e)?Ro("MapSet").proxyMap_(e,t):Hd(e)?Ro("MapSet").proxySet_(e,t):B4(e,t);return(t?t.scope_:MO()).drafts_.push(n),n}function La(e){return Mo(e)||zr(10,e),IO(e)}function IO(e){if(!Ba(e)||qd(e))return e;const t=e[sr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=zy(e,t.scope_.immer_.useStrictShallowCopy_)}else n=zy(e,!0);return od(n,(r,i)=>{kO(n,r,IO(i))}),t&&(t.finalized_=!1),n}var G4=new z4,LO=G4.produce;function $O(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var H4=$O(),q4=$O,Y4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?id:id.apply(null,arguments)};function wr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(ir(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>DO(r)&&r.type===e,n}var BO=class Sc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Sc.prototype)}static get[Symbol.species](){return Sc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Sc(...t[0].concat(this)):new Sc(...t.concat(this))}};function BC(e){return Ba(e)?LO(e,()=>{}):e}function Of(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function F4(e){return typeof e=="boolean"}var K4=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new BO;return n&&(F4(n)?l.push(H4):l.push(q4(n.extraArgument))),l},V4="RTK_autoBatch",UC=e=>t=>{setTimeout(t,e)},X4=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:UC(10):e.type==="callback"?e.queueNotification:UC(e.timeout),h=()=>{l=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const m=()=>i&&p(),y=r.subscribe(m);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[V4],s=!i,s&&(l||(l=!0,d(h))),r.dispatch(p)}finally{i=!0}}})},W4=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new BO(e);return r&&i.push(X4(typeof r=="object"?r:void 0)),i};function Q4(e){const t=K4(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(Qv(n))u=TO(n);else throw new Error(ir(1));let d;typeof r=="function"?d=r(t):d=t();let h=id;i&&(h=Y4({trace:!1,...typeof i=="object"&&i}));const p=k4(...d),m=W4(p);let y=typeof l=="function"?l(m):m();const x=h(...y);return _O(u,s,x)}function UO(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(ir(28));if(u in t)throw new Error(ir(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Z4(e){return typeof e=="function"}function J4(e,t){let[n,r,i]=UO(t),s;if(Z4(e))s=()=>BC(e());else{const u=BC(e);s=()=>u}function l(u=s(),d){let h=[n[d.type],...r.filter(({matcher:p})=>p(d)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,m)=>{if(m)if(Mo(p)){const x=m(p,d);return x===void 0?p:x}else{if(Ba(p))return LO(p,y=>m(y,d));{const y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return l.getInitialState=s,l}var eL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tL=(e=21)=>{let t="",n=e;for(;n--;)t+=eL[Math.random()*64|0];return t},nL=Symbol.for("rtk-slice-createasyncthunk");function rL(e,t){return`${e}/${t}`}function aL({creators:e}={}){const t=e?.asyncThunk?.[nL];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(ir(11));const l=(typeof r.reducers=="function"?r.reducers(oL()):r.reducers)||{},u=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(_,N){const j=typeof _=="string"?_:_.type;if(!j)throw new Error(ir(12));if(j in d.sliceCaseReducersByType)throw new Error(ir(13));return d.sliceCaseReducersByType[j]=N,h},addMatcher(_,N){return d.sliceMatchers.push({matcher:_,reducer:N}),h},exposeAction(_,N){return d.actionCreators[_]=N,h},exposeCaseReducer(_,N){return d.sliceCaseReducersByName[_]=N,h}};u.forEach(_=>{const N=l[_],j={reducerName:_,type:rL(i,_),createNotation:typeof r.reducers=="function"};lL(N)?uL(j,N,h,t):sL(j,N,h)});function p(){const[_={},N=[],j=void 0]=typeof r.extraReducers=="function"?UO(r.extraReducers):[r.extraReducers],D={..._,...d.sliceCaseReducersByType};return J4(r.initialState,R=>{for(let k in D)R.addCase(k,D[k]);for(let k of d.sliceMatchers)R.addMatcher(k.matcher,k.reducer);for(let k of N)R.addMatcher(k.matcher,k.reducer);j&&R.addDefaultCase(j)})}const m=_=>_,y=new Map,x=new WeakMap;let S;function A(_,N){return S||(S=p()),S(_,N)}function E(){return S||(S=p()),S.getInitialState()}function P(_,N=!1){function j(R){let k=R[_];return typeof k>"u"&&N&&(k=Of(x,j,E)),k}function D(R=m){const k=Of(y,N,()=>new WeakMap);return Of(k,R,()=>{const B={};for(const[J,q]of Object.entries(r.selectors??{}))B[J]=iL(q,R,()=>Of(x,R,E),N);return B})}return{reducerPath:_,getSelectors:D,get selectors(){return D(j)},selectSlice:j}}const O={name:i,reducer:A,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:E,...P(s),injectInto(_,{reducerPath:N,...j}={}){const D=N??s;return _.inject({reducerPath:D,reducer:A},j),{...O,...P(D,!0)}}};return O}}function iL(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var cr=aL();function oL(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function sL({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!cL(r))throw new Error(ir(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?wr(e,l):wr(e))}function lL(e){return e._reducerDefinitionType==="asyncThunk"}function cL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function uL({type:e,reducerName:t},n,r,i){if(!i)throw new Error(ir(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:d,settled:h,options:p}=n,m=i(e,s,p);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),d&&r.addCase(m.rejected,d),h&&r.addMatcher(m.settled,h),r.exposeCaseReducer(t,{fulfilled:l||_f,pending:u||_f,rejected:d||_f,settled:h||_f})}function _f(){}var fL="task",zO="listener",GO="completed",e0="cancelled",dL=`task-${e0}`,hL=`task-${GO}`,Fy=`${zO}-${e0}`,pL=`${zO}-${GO}`,Yd=class{constructor(e){this.code=e,this.message=`${fL} ${e0} (reason: ${e})`}name="TaskAbortError";message},t0=(e,t)=>{if(typeof e!="function")throw new TypeError(ir(32))},cd=()=>{},HO=(e,t=cd)=>(e.catch(t),e),qO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),To=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Do=e=>{if(e.aborted){const{reason:t}=e;throw new Yd(t)}};function YO(e,t){let n=cd;return new Promise((r,i)=>{const s=()=>i(new Yd(e.reason));if(e.aborted){s();return}n=qO(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=cd})}var mL=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Yd?"cancelled":"rejected",error:n}}finally{t?.()}},ud=e=>t=>HO(YO(e,t).then(n=>(Do(e),n))),FO=e=>{const t=ud(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Ms}=Object,zC={},Fd="listenerMiddleware",gL=(e,t)=>{const n=r=>qO(e,()=>To(r,e.reason));return(r,i)=>{t0(r);const s=new AbortController;n(s);const l=mL(async()=>{Do(e),Do(s.signal);const u=await r({pause:ud(s.signal),delay:FO(s.signal),signal:s.signal});return Do(s.signal),u},()=>To(s,hL));return i?.autoJoin&&t.push(l.catch(cd)),{result:ud(e)(l),cancel(){To(s,dL)}}}},yL=(e,t)=>{const n=async(r,i)=>{Do(t);let s=()=>{};const u=[new Promise((d,h)=>{let p=e({predicate:r,effect:(m,y)=>{y.unsubscribe(),d([m,y.getState(),y.getOriginalState()])}});s=()=>{p(),h()}})];i!=null&&u.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await YO(t,Promise.race(u));return Do(t),d}finally{s()}};return(r,i)=>HO(n(r,i))},KO=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=wr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ir(21));return t0(s),{predicate:i,type:t,effect:s}},VO=Ms(e=>{const{type:t,predicate:n,effect:r}=KO(e);return{id:tL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ir(22))}}},{withTypes:()=>VO}),GC=(e,t)=>{const{type:n,effect:r,predicate:i}=KO(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},Ky=e=>{e.pending.forEach(t=>{To(t,Fy)})},vL=e=>()=>{e.forEach(Ky),e.clear()},HC=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},XO=Ms(wr(`${Fd}/add`),{withTypes:()=>XO}),bL=wr(`${Fd}/removeAll`),WO=Ms(wr(`${Fd}/remove`),{withTypes:()=>WO}),xL=(...e)=>{console.error(`${Fd}/error`,...e)},Fc=(e={})=>{const t=new Map,{extra:n,onError:r=xL}=e;t0(r);const i=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),m=>{p.unsubscribe(),m?.cancelActive&&Ky(p)}),s=p=>{const m=GC(t,p)??VO(p);return i(m)};Ms(s,{withTypes:()=>s});const l=p=>{const m=GC(t,p);return m&&(m.unsubscribe(),p.cancelActive&&Ky(m)),!!m};Ms(l,{withTypes:()=>l});const u=async(p,m,y,x)=>{const S=new AbortController,A=yL(s,S.signal),E=[];try{p.pending.add(S),await Promise.resolve(p.effect(m,Ms({},y,{getOriginalState:x,condition:(P,O)=>A(P,O).then(Boolean),take:A,delay:FO(S.signal),pause:ud(S.signal),extra:n,signal:S.signal,fork:gL(S.signal,E),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((P,O,_)=>{P!==S&&(To(P,Fy),_.delete(P))})},cancel:()=>{To(S,Fy),p.pending.delete(S)},throwIfCancelled:()=>{Do(S.signal)}})))}catch(P){P instanceof Yd||HC(r,P,{raisedBy:"effect"})}finally{await Promise.all(E),To(S,pL),p.pending.delete(S)}},d=vL(t);return{middleware:p=>m=>y=>{if(!DO(y))return m(y);if(XO.match(y))return s(y.payload);if(bL.match(y)){d();return}if(WO.match(y))return l(y.payload);let x=p.getState();const S=()=>{if(x===zC)throw new Error(ir(23));return x};let A;try{if(A=m(y),t.size>0){const E=p.getState(),P=Array.from(t.values());for(const O of P){let _=!1;try{_=O.predicate(y,E,x)}catch(N){_=!1,HC(r,N,{raisedBy:"predicate"})}_&&u(O,y,p,S)}}}finally{x=zC}return A},startListening:s,stopListening:l,clearListeners:d}};function ir(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var SL={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},QO=cr({name:"chartLayout",initialState:SL,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:AL,setLayout:CL,setChartSize:EL,setScale:PL}=QO.actions,wL=QO.reducer;function qC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(n),!0).forEach(function(r){OL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OL(e,t,n){return(t=_L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _L(e){var t=TL(e,"string");return typeof t=="symbol"?t:t+""}function TL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fd=Math.PI/180,DL=e=>e*180/Math.PI,Bt=(e,t,n,r)=>({x:e+Math.cos(-fd*r)*n,y:t+Math.sin(-fd*r)*n}),ZO=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},jL=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},NL=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=jL({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,d=Math.acos(u);return r>s&&(d=2*Math.PI-d),{radius:l,angle:DL(d),angleInRadian:d}},kL=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},ML=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},RL=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=NL({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:d,endAngle:h}=kL(t),p=s,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?YC(YC({},t),{},{radius:i,angle:ML(p,t)}):null};function JO(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(n),!0).forEach(function(r){IL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IL(e,t,n){return(t=LL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LL(e){var t=$L(e,"string");return typeof t=="symbol"?t:t+""}function $L(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yt(e,t,n){return an(e)||an(t)?n:ia(t)?ko(e,t,n):typeof t=="function"?t(e):n}var BL=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<u;d++){var h=d>0?n[d-1].coordinate:n[u-1].coordinate,p=n[d].coordinate,m=d>=u-1?n[0].coordinate:n[d+1].coordinate,y=void 0;if(rn(p-h)!==rn(m-p)){var x=[];if(rn(m-p)===rn(i[1]-i[0])){y=m;var S=p+i[1]-i[0];x[0]=Math.min(S,(S+h)/2),x[1]=Math.max(S,(S+h)/2)}else{y=h;var A=m+i[1]-i[0];x[0]=Math.min(p,(A+p)/2),x[1]=Math.max(p,(A+p)/2)}var E=[Math.min(p,(y+p)/2),Math.max(p,(y+p)/2)];if(e>E[0]&&e<=E[1]||e>=x[0]&&e<=x[1]){({index:l}=n[d]);break}}else{var P=Math.min(h,m),O=Math.max(h,m);if(e>(P+p)/2&&e<=(O+p)/2){({index:l}=n[d]);break}}}else if(t){for(var _=0;_<u;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:l}=t[_]);break}}return l},UL=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&Te(e[s]))return Cr(Cr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&Te(e[l]))return Cr(Cr({},e),{},{[l]:e[l]+(i||0)})}return e},Go=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",e_=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},t_=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:h,tickCount:p,ticks:m,niceTicks:y,axisType:x}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=x==="angleAxis"&&s&&s.length>=2?rn(s[0]-s[1])*2*A:A,m||y){var E=(m||y||[]).map((P,O)=>{var _=r?r.indexOf(P):P;return{coordinate:l(_)+A,value:P,offset:A,index:O}});return E.filter(P=>!or(P.coordinate))}return d&&h?h.map((P,O)=>({coordinate:l(P)+A,value:P,index:O,offset:A})):l.ticks&&p!=null?l.ticks(p).map((P,O)=>({coordinate:l(P)+A,value:P,offset:A,index:O})):l.domain().map((P,O)=>({coordinate:l(P)+A,value:r?r[P]:P,index:O,offset:A}))},KC=1e-4,zL=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-KC,s=Math.max(r[0],r[1])+KC,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},GL=(e,t)=>{if(!t||t.length!==2||!Te(t[0])||!Te(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Te(e[0])||e[0]<n)&&(i[0]=n),(!Te(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},HL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=or(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},qL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=or(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},YL={sign:HL,expand:xI,none:Is,silhouette:SI,wiggle:AI,positive:qL},FL=(e,t,n)=>{var r=YL[n],i=bI().keys(t).value((s,l)=>+yt(s,l,0)).order(Ly).offset(r);return i(e)};function KL(e){return e==null?void 0:String(e)}var VC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=yt(s,t.dataKey,t.scale.domain()[l]);return an(u)?null:t.scale(u)-i/2+r},VL=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},XL=e=>{var t=e.flat(2).filter(Te);return[Math.min(...t),Math.max(...t)]},WL=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],QL=(e,t,n)=>{if(e!=null)return WL(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((d,h)=>{var p=JO(h,t,n),m=XL(p);return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},XC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,n0=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=zd(t,p=>p.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var d=i[l],h=i[l-1];s=Math.min((d.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function QC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Cr(Cr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function Kd(e,t){if(e)return String(e);if(typeof t=="string")return t}function ZL(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?RL({x:e,y:t},r):null}var JL=(e,t,n,r)=>{var i=t.find(h=>h&&h.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Cr(Cr(Cr({},r),Bt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:d}=r;return Cr(Cr(Cr({},r),Bt(r.cx,r.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},e3=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,qa=e=>e.layout.width,Ya=e=>e.layout.height,t3=e=>e.layout.scale,n_=e=>e.layout.margin,Vd=W(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Xd=W(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),r_="data-recharts-item-index",a_="data-recharts-item-data-key",Kc=60;function ZC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(n),!0).forEach(function(r){n3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n3(e,t,n){return(t=r3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r3(e){var t=a3(e,"string");return typeof t=="symbol"?t:t+""}function a3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i3=e=>e.brush.height;function o3(e){var t=Xd(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Kc;return n+i}return n},0)}function s3(e){var t=Xd(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Kc;return n+i}return n},0)}function l3(e){var t=Vd(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function c3(e){var t=Vd(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Vt=W([qa,Ya,n_,i3,o3,s3,l3,c3,wO,w4],(e,t,n,r,i,s,l,u,d,h)=>{var p={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},y=Tf(Tf({},m),p),x=y.bottom;y.bottom+=r,y=UL(y,d,h);var S=e-y.left-y.right,A=t-y.top-y.bottom;return Tf(Tf({brushBottom:x},y),{},{width:Math.max(S,0),height:Math.max(A,0)})}),u3=W(Vt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),r0=W(qa,Ya,(e,t)=>({x:0,y:0,width:e,height:t})),f3=C.createContext(null),_r=()=>C.useContext(f3)!=null,Wd=e=>e.brush,Qd=W([Wd,Vt,n_],(e,t,n)=>({height:e.height,x:Te(e.x)?e.x:t.left,y:Te(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Te(e.width)?e.width:t.width})),a0=()=>{var e,t=_r(),n=we(u3),r=we(Qd),i=(e=we(Wd))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},d3={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},i_=()=>{var e;return(e=we(Vt))!==null&&e!==void 0?e:d3},i0=()=>we(qa),o0=()=>we(Ya),h3=()=>we(e=>e.layout.margin),We=e=>e.layout.layoutType,s0=()=>we(We),p3={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},o_=cr({name:"legend",initialState:p3,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=La(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:JC,setLegendSettings:m3,addLegendPayload:s_,removeLegendPayload:l_}=o_.actions,g3=o_.reducer,y3=["contextPayload"];function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vy.apply(null,arguments)}function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eE(Object(n),!0).forEach(function(r){l0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l0(e,t,n){return(t=v3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v3(e){var t=b3(e,"string");return typeof t=="symbol"?t:t+""}function b3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x3(e,t){if(e==null)return{};var n,r,i=S3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function A3(e){return e.value}function C3(e){var{contextPayload:t}=e,n=x3(e,y3),r=AO(t,e.payloadUniqBy,A3),i=$s($s({},n),{},{payload:r});return C.isValidElement(e.content)?C.cloneElement(e.content,i):typeof e.content=="function"?C.createElement(e.content,i):C.createElement(Kv,i)}function E3(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:d}=t,h,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?h={left:((r||0)-s.width)/2}:h=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?p={top:((i||0)-s.height)/2}:p=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),$s($s({},h),p)}function P3(e){var t=Pt();return C.useEffect(()=>{t(m3(e))},[t,e]),null}function w3(e){var t=Pt();return C.useEffect(()=>(t(JC(e)),()=>{t(JC({width:0,height:0}))}),[t,e]),null}function O3(e){var t=T4(),n=HR(),r=h3(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[d,h]=OO([t]),p=i0(),m=o0();if(p==null||m==null)return null;var y=p-(r.left||0)-(r.right||0),x=Zd.getWidthOrHeight(e.layout,s,i,y),S=u?l:$s($s({position:"absolute",width:x?.width||i||"auto",height:x?.height||s||"auto"},E3(l,e,r,p,m,d)),l),A=u??n;if(A==null)return null;var E=C.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:h},C.createElement(P3,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),C.createElement(w3,{width:d.width,height:d.height}),C.createElement(C3,Vy({},e,x,{margin:r,chartWidth:p,chartHeight:m,contextPayload:t})));return X2.createPortal(E,A)}class Zd extends C.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Te(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return C.createElement(O3,this.props)}}l0(Zd,"displayName","Legend");l0(Zd,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(null,arguments)}function tE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ug(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tE(Object(n),!0).forEach(function(r){_3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _3(e,t,n){return(t=T3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T3(e){var t=D3(e,"string");return typeof t=="symbol"?t:t+""}function D3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j3(e){return Array.isArray(e)&&ia(e[0])&&ia(e[1])?e.join(" ~ "):e}var N3=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:h,label:p,labelFormatter:m,accessibilityLayer:y=!1}=e,x=()=>{if(s&&s.length){var j={padding:0,margin:0},D=(u?zd(s,u):s).map((R,k)=>{if(R.type==="none")return null;var B=R.formatter||l||j3,{value:J,name:q}=R,Z=J,ce=q;if(B){var le=B(J,q,R,k,s);if(Array.isArray(le))[Z,ce]=le;else if(le!=null)Z=le;else return null}var te=Ug({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},r);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:te},ia(ce)?C.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,ia(ce)?C.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,C.createElement("span",{className:"recharts-tooltip-item-value"},Z),C.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:j},D)}return null},S=Ug({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=Ug({margin:0},i),E=!an(p),P=E?p:"",O=rt("recharts-default-tooltip",d),_=rt("recharts-tooltip-label",h);E&&m&&s!==void 0&&s!==null&&(P=m(p,s));var N=y?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",Xy({className:O,style:S},N),C.createElement("p",{className:_,style:A},C.isValidElement(P)?P:"".concat(P)),x())},dc="recharts-tooltip-wrapper",k3={visibility:"hidden"};function M3(e){var{coordinate:t,translateX:n,translateY:r}=e;return rt(dc,{["".concat(dc,"-right")]:Te(n)&&t&&Te(t.x)&&n>=t.x,["".concat(dc,"-left")]:Te(n)&&t&&Te(t.x)&&n<t.x,["".concat(dc,"-bottom")]:Te(r)&&t&&Te(t.y)&&r>=t.y,["".concat(dc,"-top")]:Te(r)&&t&&Te(t.y)&&r<t.y})}function nE(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:h}=e;if(s&&Te(s[r]))return s[r];var p=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?p:m;var y=d[r];if(y==null)return 0;if(l[r]){var x=p,S=y;return x<S?Math.max(m,y):Math.max(p,y)}if(h==null)return 0;var A=m+u,E=y+h;return A>E?Math.max(p,y):Math.max(m,y)}function R3(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function I3(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,h,p,m;return l.height>0&&l.width>0&&n?(p=nE({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),m=nE({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),h=R3({translateX:p,translateY:m,useTranslate3d:u})):h=k3,{cssProperties:h,cssClasses:M3({translateX:p,translateY:m,coordinate:n})}}function rE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Df(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rE(Object(n),!0).forEach(function(r){Wy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wy(e,t,n){return(t=L3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L3(e){var t=$3(e,"string");return typeof t=="symbol"?t:t+""}function $3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class B3 extends C.PureComponent{constructor(){super(...arguments),Wy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Wy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:d,offset:h,position:p,reverseDirection:m,useTranslate3d:y,viewBox:x,wrapperStyle:S,lastBoundingBox:A,innerRef:E,hasPortalFromProps:P}=this.props,{cssClasses:O,cssProperties:_}=I3({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:y,viewBox:x}),N=P?{}:Df(Df({transition:d&&t?"transform ".concat(r,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),j=Df(Df({},N),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:j,ref:E},s)}}var U3=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Xs={isSsr:U3()},c_=()=>we(e=>e.rootProps.accessibilityLayer);function lr(e){return Number.isFinite(e)}function Bs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qy.apply(null,arguments)}function aE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(n),!0).forEach(function(r){z3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z3(e,t,n){return(t=G3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G3(e){var t=H3(e,"string");return typeof t=="symbol"?t:t+""}function H3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oE={curveBasisClosed:lI,curveBasisOpen:cI,curveBasis:sI,curveBumpX:KR,curveBumpY:VR,curveLinearClosed:uI,curveLinear:Bd,curveMonotoneX:fI,curveMonotoneY:dI,curveNatural:hI,curveStep:pI,curveStepAfter:gI,curveStepBefore:mI},jf=e=>lr(e.x)&&lr(e.y),hc=e=>e.x,pc=e=>e.y,q3=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Hc(e));return(n==="curveMonotone"||n==="curveBump")&&t?oE["".concat(n).concat(t==="vertical"?"Y":"X")]:oE[n]||Bd},Y3=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=q3(t,i),u=s?n.filter(jf):n,d;if(Array.isArray(r)){var h=s?r.filter(m=>jf(m)):r,p=u.map((m,y)=>iE(iE({},m),{},{base:h[y]}));return i==="vertical"?d=Cf().y(pc).x1(hc).x0(m=>m.base.x):d=Cf().x(hc).y1(pc).y0(m=>m.base.y),d.defined(jf).curve(l),d(p)}return i==="vertical"&&Te(r)?d=Cf().y(pc).x1(hc).x0(r):Te(r)?d=Cf().x(hc).y1(pc).y0(r):d=nO().x(hc).y(pc),d.defined(jf).curve(l),d(u)},u_=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?Y3(e):r;return C.createElement("path",Qy({},zo(e),kR(e),{className:rt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},F3=["x","y","top","left","width","height","className"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(null,arguments)}function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(r){V3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V3(e,t,n){return(t=X3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X3(e){var t=W3(e,"string");return typeof t=="symbol"?t:t+""}function W3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q3(e,t){if(e==null)return{};var n,r,i=Z3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var J3=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),e$=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,d=Q3(e,F3),h=K3({x:t,y:n,top:r,left:i,width:s,height:l},d);return!Te(t)||!Te(n)||!Te(s)||!Te(l)||!Te(r)||!Te(i)?null:C.createElement("path",Zy({},$t(h,!0),{className:rt("recharts-cross",u),d:J3(t,n,s,l,r,i)}))};function t$(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function lE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lE(Object(n),!0).forEach(function(r){r$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r$(e,t,n){return(t=a$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a$(e){var t=i$(e,"string");return typeof t=="symbol"?t:t+""}function i$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tr(e,t){var n=n$({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function o$(){}function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(r){s$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s$(e,t,n){return(t=l$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l$(e){var t=c$(e,"string");return typeof t=="symbol"?t:t+""}function c$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u$=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),f_=(e,t,n)=>e.map(r=>"".concat(u$(r)," ").concat(t,"ms ").concat(n)).join(","),f$=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Rc=(e,t)=>Object.keys(t).reduce((n,r)=>uE(uE({},n),{},{[r]:e(r,t[r])}),{});function fE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(n),!0).forEach(function(r){d$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d$(e,t,n){return(t=h$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h$(e){var t=p$(e,"string");return typeof t=="symbol"?t:t+""}function p$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dd=(e,t,n)=>e+(t-e)*n,Jy=e=>{var{from:t,to:n}=e;return t!==n},d_=(e,t,n)=>{var r=Rc((i,s)=>{if(Jy(s)){var[l,u]=e(s.from,s.to,s.velocity);return gn(gn({},s),{},{from:l,velocity:u})}return s},t);return n<1?Rc((i,s)=>Jy(s)?gn(gn({},s),{},{velocity:dd(s.velocity,r[i].velocity,n),from:dd(s.from,r[i].from,n)}):s,t):d_(e,r,n-1)};function m$(e,t,n,r,i,s){var l,u=r.reduce((y,x)=>gn(gn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Rc((y,x)=>x.from,u),h=()=>!Object.values(u).filter(Jy).length,p=null,m=y=>{l||(l=y);var x=y-l,S=x/n.dt;u=d_(n,u,S),i(gn(gn(gn({},e),t),d())),l=y,h()||(p=s.setTimeout(m))};return()=>(p=s.setTimeout(m),()=>{p()})}function g$(e,t,n,r,i,s,l){var u=null,d=i.reduce((m,y)=>gn(gn({},m),{},{[y]:[e[y],t[y]]}),{}),h,p=m=>{h||(h=m);var y=(m-h)/r,x=Rc((A,E)=>dd(...E,n(y)),d);if(s(gn(gn(gn({},e),t),x)),y<1)u=l.setTimeout(p);else{var S=Rc((A,E)=>dd(...E,n(1)),d);s(gn(gn(gn({},e),t),S))}};return()=>(u=l.setTimeout(p),()=>{u()})}const y$=(e,t,n,r,i,s)=>{var l=f$(e,t);return n.isStepper===!0?m$(e,t,n,l,i,s):g$(e,t,n,r,l,i,s)};var hd=1e-4,h_=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],p_=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),dE=(e,t)=>n=>{var r=h_(e,t);return p_(r,n)},v$=(e,t)=>n=>{var r=h_(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return p_(i,n)},hE=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,r,n,i]=d[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var h=dE(t,n),p=dE(r,i),m=v$(t,n),y=S=>S>1?1:S<0?0:S,x=S=>{for(var A=S>1?1:S,E=A,P=0;P<8;++P){var O=h(E)-A,_=m(E);if(Math.abs(O-A)<hd||_<hd)return p(E);E=y(E-O/_)}return p(E)};return x.isStepper=!1,x},b$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,d)=>{var h=-(l-u)*n,p=d*r,m=d+(h-p)*i/1e3,y=d*i/1e3+l;return Math.abs(y-u)<hd&&Math.abs(m)<hd?[u,0]:[y,m]};return s.isStepper=!0,s.dt=i,s},x$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return hE(e);case"spring":return b$();default:if(e.split("(")[0]==="cubic-bezier")return hE(e)}return typeof e=="function"?e:null};function S$(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...h]=u;if(typeof d=="number"){i=e.setTimeout(s.bind(null,h),d);return}s(d),i=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class A${setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function C$(){return S$(new A$)}var E$=C.createContext(C$);function P$(e,t){var n=C.useContext(E$);return C.useMemo(()=>t??n(e),[e,t,n])}var w$={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},pE={t:0},zg={t:1};function Jd(e){var t=Tr(e,w$),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:d,children:h}=t,p=P$(t.animationId,t.animationManager),[m,y]=C.useState(n?pE:zg),x=C.useRef(null);return C.useEffect(()=>{n||y(zg)},[n]),C.useEffect(()=>{if(!n||!r)return o$;var S=y$(pE,zg,x$(s),i,y,p.getTimeoutController()),A=()=>{x.current=S()};return p.start([d,l,A,i,u]),()=>{p.stop(),x.current&&x.current(),u()}},[n,r,i,s,l,d,u,p]),h(m.t)}function eh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=C.useRef(Nc(t)),r=C.useRef(e);return r.current!==e&&(n.current=Nc(t),r.current=e),n.current}function mE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(n),!0).forEach(function(r){O$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O$(e,t,n){return(t=_$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _$(e){var t=T$(e,"string");return typeof t=="symbol"?t:t+""}function T$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pd.apply(null,arguments)}var yE=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,h;if(s>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,y=4;m<y;m++)p[m]=i[m]>s?s:i[m];h="M".concat(e,",").concat(t+l*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+u*p[0],",").concat(t)),h+="L ".concat(e+n-u*p[1],",").concat(t),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+l*p[1])),h+="L ".concat(e+n,",").concat(t+r-l*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+n-u*p[2],",").concat(t+r)),h+="L ".concat(e+u*p[3],",").concat(t+r),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+r-l*p[3])),h+="Z"}else if(s>0&&i===+i&&i>0){var x=Math.min(s,i);h="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+r-l*x," Z")}else h="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},D$={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},m_=e=>{var t=Tr(e,D$),n=C.useRef(null),[r,i]=C.useState(-1);C.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var le=n.current.getTotalLength();le&&i(le)}catch{}},[]);var{x:s,y:l,width:u,height:d,radius:h,className:p}=t,{animationEasing:m,animationDuration:y,animationBegin:x,isAnimationActive:S,isUpdateAnimationActive:A}=t,E=C.useRef(u),P=C.useRef(d),O=C.useRef(s),_=C.useRef(l),N=C.useMemo(()=>({x:s,y:l,width:u,height:d,radius:h}),[s,l,u,d,h]),j=eh(N,"rectangle-");if(s!==+s||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var D=rt("recharts-rectangle",p);if(!A)return C.createElement("path",pd({},$t(t,!0),{className:D,d:yE(s,l,u,d,h)}));var R=E.current,k=P.current,B=O.current,J=_.current,q="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),ce=f_(["strokeDasharray"],y,typeof m=="string"?m:void 0);return C.createElement(Jd,{animationId:j,key:j,canBegin:r>0,duration:y,easing:m,isActive:A,begin:x},le=>{var te=yn(R,u,le),$=yn(k,d,le),ee=yn(B,s,le),he=yn(J,l,le);n.current&&(E.current=te,P.current=$,O.current=ee,_.current=he);var pe;return S?le>0?pe={transition:ce,strokeDasharray:Z}:pe={strokeDasharray:q}:pe={strokeDasharray:Z},C.createElement("path",pd({},$t(t,!0),{className:D,d:yE(ee,he,te,$,h),ref:n,style:gE(gE({},pe),t.style)}))})};function g_(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=Bt(t,n,r,i),u=Bt(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}var j$=(e,t)=>{var n=rn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Nf=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,h=u*(l?1:-1)+r,p=Math.asin(u/h)/fd,m=d?i:i+s*p,y=Bt(t,n,h,m),x=Bt(t,n,r,m),S=d?i-s*p:i,A=Bt(t,n,h*Math.cos(p*fd),S);return{center:y,circleTangency:x,lineTangency:A,theta:p}},y_=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=j$(s,l),d=s+u,h=Bt(t,n,i,s),p=Bt(t,n,i,d),m="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var y=Bt(t,n,r,s),x=Bt(t,n,r,d);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},N$=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}=e,p=rn(h-d),{circleTangency:m,lineTangency:y,theta:x}=Nf({cx:t,cy:n,radius:i,angle:d,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:E}=Nf({cx:t,cy:n,radius:i,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:u}),P=u?Math.abs(d-h):Math.abs(d-h)-x-E;if(P<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):y_({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:h});var O="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:_,lineTangency:N,theta:j}=Nf({cx:t,cy:n,radius:r,angle:d,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:R,theta:k}=Nf({cx:t,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),B=u?Math.abs(d-h):Math.abs(d-h)-j-k;if(B<0&&s===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(B>180),",").concat(+(p>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(N.x,",").concat(N.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},k$={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},v_=e=>{var t=Tr(e,k$),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:p,className:m}=t;if(s<i||h===p)return null;var y=rt("recharts-sector",m),x=s-i,S=On(l,x,0,!0),A;return S>0&&Math.abs(h-p)<360?A=N$({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:p}):A=y_({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:h,endAngle:p}),C.createElement("path",ev({},$t(t,!0),{className:y,d:A}))};function M$(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:h,outerRadius:p,angle:m}=t,y=Bt(u,d,h,m),x=Bt(u,d,p,m);r=y.x,i=y.y,s=x.x,l=x.y}else return g_(t);return[{x:r,y:i},{x:s,y:l}]}var Gg={},Hg={},qg={},vE;function R$(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EO();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(qg)),qg}var bE;function I$(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R$();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(Hg)),Hg}var xE;function L$(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PO(),n=I$();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),d=new Array(u);for(let h=0;h<u;h++)d[h]=i,i+=l;return d}e.range=r})(Gg)),Gg}var Yg,SE;function $$(){return SE||(SE=1,Yg=L$().range),Yg}var B$=$$();const b_=Hr(B$);function ji(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U$(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function c0(e){let t,n,r;e.length!==2?(t=ji,n=(u,d)=>ji(e(u),d),r=(u,d)=>e(u)-d):(t=e===ji||e===U$?e:z$,n=e,r=e);function i(u,d,h=0,p=u.length){if(h<p){if(t(d,d)!==0)return p;do{const m=h+p>>>1;n(u[m],d)<0?h=m+1:p=m}while(h<p)}return h}function s(u,d,h=0,p=u.length){if(h<p){if(t(d,d)!==0)return p;do{const m=h+p>>>1;n(u[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function l(u,d,h=0,p=u.length){const m=i(u,d,h,p-1);return m>h&&r(u[m-1],d)>-r(u[m],d)?m-1:m}return{left:i,center:l,right:s}}function z$(){return 0}function x_(e){return e===null?NaN:+e}function*G$(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const H$=c0(ji),Vc=H$.right;c0(x_).center;class AE extends Map{constructor(t,n=F$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(CE(this,t))}has(t){return super.has(CE(this,t))}set(t,n){return super.set(q$(this,t),n)}delete(t){return super.delete(Y$(this,t))}}function CE({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function q$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Y$({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function F$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function K$(e=ji){if(e===ji)return S_;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function S_(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const V$=Math.sqrt(50),X$=Math.sqrt(10),W$=Math.sqrt(2);function md(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=V$?10:s>=X$?5:s>=W$?2:1;let u,d,h;return i<0?(h=Math.pow(10,-i)/l,u=Math.round(e*h),d=Math.round(t*h),u/h<e&&++u,d/h>t&&--d,h=-h):(h=Math.pow(10,i)*l,u=Math.round(e/h),d=Math.round(t/h),u*h<e&&++u,d*h>t&&--d),d<u&&.5<=n&&n<2?md(e,t,n*2):[u,d,h]}function tv(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?md(t,e,n):md(e,t,n);if(!(s>=i))return[];const u=s-i+1,d=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)d[h]=(s-h)/-l;else for(let h=0;h<u;++h)d[h]=(s-h)*l;else if(l<0)for(let h=0;h<u;++h)d[h]=(i+h)/-l;else for(let h=0;h<u;++h)d[h]=(i+h)*l;return d}function nv(e,t,n){return t=+t,e=+e,n=+n,md(e,t,n)[2]}function rv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?nv(t,e,n):nv(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function EE(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function PE(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function A_(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?S_:K$(i);r>n;){if(r-n>600){const d=r-n+1,h=t-n+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),x=Math.max(n,Math.floor(t-h*m/d+y)),S=Math.min(r,Math.floor(t+(d-h)*m/d+y));A_(e,t,x,S,i)}const s=e[t];let l=n,u=r;for(mc(e,n,t),i(e[r],s)>0&&mc(e,n,r);l<u;){for(mc(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?mc(e,n,u):(++u,mc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function mc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Q$(e,t,n){if(e=Float64Array.from(G$(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return PE(e);if(t>=1)return EE(e);var r,i=(r-1)*t,s=Math.floor(i),l=EE(A_(e,s).subarray(0,s+1)),u=PE(e.subarray(s+1));return l+(u-l)*(i-s)}}function Z$(e,t,n=x_){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function J$(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Dr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const av=Symbol("implicit");function u0(){var e=new AE,t=[],n=[],r=av;function i(s){let l=e.get(s);if(l===void 0){if(r!==av)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new AE;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return u0(t,n).unknown(r)},Dr.apply(i,arguments),i}function f0(){var e=u0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,d=0,h=0,p=.5;delete e.unknown;function m(){var y=t().length,x=i<r,S=x?i:r,A=x?r:i;s=(A-S)/Math.max(1,y-d+h*2),u&&(s=Math.floor(s)),S+=(A-S-s*(y-d))*p,l=s*(1-d),u&&(S=Math.round(S),l=Math.round(l));var E=J$(y).map(function(P){return S+s*P});return n(x?E.reverse():E)}return e.domain=function(y){return arguments.length?(t(y),m()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(u=!!y,m()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},e.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},e.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},e.copy=function(){return f0(t(),[r,i]).round(u).paddingInner(d).paddingOuter(h).align(p)},Dr.apply(m(),arguments)}function C_(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return C_(t())},e}function e5(){return C_(f0.apply(null,arguments).paddingInner(1))}function d0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function E_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xc(){}var Ic=.7,gd=1/Ic,Rs="\\s*([+-]?\\d+)\\s*",Lc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",aa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t5=/^#([0-9a-f]{3,8})$/,n5=new RegExp(`^rgb\\(${Rs},${Rs},${Rs}\\)$`),r5=new RegExp(`^rgb\\(${aa},${aa},${aa}\\)$`),a5=new RegExp(`^rgba\\(${Rs},${Rs},${Rs},${Lc}\\)$`),i5=new RegExp(`^rgba\\(${aa},${aa},${aa},${Lc}\\)$`),o5=new RegExp(`^hsl\\(${Lc},${aa},${aa}\\)$`),s5=new RegExp(`^hsla\\(${Lc},${aa},${aa},${Lc}\\)$`),wE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d0(Xc,$c,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:OE,formatHex:OE,formatHex8:l5,formatHsl:c5,formatRgb:_E,toString:_E});function OE(){return this.rgb().formatHex()}function l5(){return this.rgb().formatHex8()}function c5(){return P_(this).formatHsl()}function _E(){return this.rgb().formatRgb()}function $c(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=t5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?TE(t):n===3?new Hn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?kf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?kf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=n5.exec(e))?new Hn(t[1],t[2],t[3],1):(t=r5.exec(e))?new Hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=a5.exec(e))?kf(t[1],t[2],t[3],t[4]):(t=i5.exec(e))?kf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o5.exec(e))?NE(t[1],t[2]/100,t[3]/100,1):(t=s5.exec(e))?NE(t[1],t[2]/100,t[3]/100,t[4]):wE.hasOwnProperty(e)?TE(wE[e]):e==="transparent"?new Hn(NaN,NaN,NaN,0):null}function TE(e){return new Hn(e>>16&255,e>>8&255,e&255,1)}function kf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Hn(e,t,n,r)}function u5(e){return e instanceof Xc||(e=$c(e)),e?(e=e.rgb(),new Hn(e.r,e.g,e.b,e.opacity)):new Hn}function iv(e,t,n,r){return arguments.length===1?u5(e):new Hn(e,t,n,r??1)}function Hn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}d0(Hn,iv,E_(Xc,{brighter(e){return e=e==null?gd:Math.pow(gd,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ic:Math.pow(Ic,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hn(jo(this.r),jo(this.g),jo(this.b),yd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DE,formatHex:DE,formatHex8:f5,formatRgb:jE,toString:jE}));function DE(){return`#${wo(this.r)}${wo(this.g)}${wo(this.b)}`}function f5(){return`#${wo(this.r)}${wo(this.g)}${wo(this.b)}${wo((isNaN(this.opacity)?1:this.opacity)*255)}`}function jE(){const e=yd(this.opacity);return`${e===1?"rgb(":"rgba("}${jo(this.r)}, ${jo(this.g)}, ${jo(this.b)}${e===1?")":`, ${e})`}`}function yd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wo(e){return e=jo(e),(e<16?"0":"")+e.toString(16)}function NE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gr(e,t,n,r)}function P_(e){if(e instanceof Gr)return new Gr(e.h,e.s,e.l,e.opacity);if(e instanceof Xc||(e=$c(e)),!e)return new Gr;if(e instanceof Gr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,d=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?s+i:2-s-i,l*=60):u=d>0&&d<1?0:l,new Gr(l,u,d,e.opacity)}function d5(e,t,n,r){return arguments.length===1?P_(e):new Gr(e,t,n,r??1)}function Gr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}d0(Gr,d5,E_(Xc,{brighter(e){return e=e==null?gd:Math.pow(gd,e),new Gr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ic:Math.pow(Ic,e),new Gr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Hn(Fg(e>=240?e-240:e+120,i,r),Fg(e,i,r),Fg(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Gr(kE(this.h),Mf(this.s),Mf(this.l),yd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=yd(this.opacity);return`${e===1?"hsl(":"hsla("}${kE(this.h)}, ${Mf(this.s)*100}%, ${Mf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kE(e){return e=(e||0)%360,e<0?e+360:e}function Mf(e){return Math.max(0,Math.min(1,e||0))}function Fg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const h0=e=>()=>e;function h5(e,t){return function(n){return e+n*t}}function p5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function m5(e){return(e=+e)==1?w_:function(t,n){return n-t?p5(t,n,e):h0(isNaN(t)?n:t)}}function w_(e,t){var n=t-e;return n?h5(e,n):h0(isNaN(e)?t:e)}const ME=(function e(t){var n=m5(t);function r(i,s){var l=n((i=iv(i)).r,(s=iv(s)).r),u=n(i.g,s.g),d=n(i.b,s.b),h=w_(i.opacity,s.opacity);return function(p){return i.r=l(p),i.g=u(p),i.b=d(p),i.opacity=h(p),i+""}}return r.gamma=e,r})(1);function g5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function y5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function v5(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Ws(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function b5(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function vd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function x5(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ws(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var ov=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kg=new RegExp(ov.source,"g");function S5(e){return function(){return e}}function A5(e){return function(t){return e(t)+""}}function C5(e,t){var n=ov.lastIndex=Kg.lastIndex=0,r,i,s,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=ov.exec(e))&&(i=Kg.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,d.push({i:l,x:vd(r,i)})),n=Kg.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?d[0]?A5(d[0].x):S5(t):(t=d.length,function(h){for(var p=0,m;p<t;++p)u[(m=d[p]).i]=m.x(h);return u.join("")})}function Ws(e,t){var n=typeof t,r;return t==null||n==="boolean"?h0(t):(n==="number"?vd:n==="string"?(r=$c(t))?(t=r,ME):C5:t instanceof $c?ME:t instanceof Date?b5:y5(t)?g5:Array.isArray(t)?v5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?x5:vd)(e,t)}function p0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function E5(e,t){t===void 0&&(t=e,e=Ws);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function P5(e){return function(){return e}}function bd(e){return+e}var RE=[0,1];function kn(e){return e}function sv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:P5(isNaN(t)?NaN:.5)}function w5(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function O5(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=sv(i,r),s=n(l,s)):(r=sv(r,i),s=n(s,l)),function(u){return s(r(u))}}function _5(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=sv(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var d=Vc(e,u,1,r)-1;return s[d](i[d](u))}}function Wc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function th(){var e=RE,t=RE,n=Ws,r,i,s,l=kn,u,d,h;function p(){var y=Math.min(e.length,t.length);return l!==kn&&(l=w5(e[0],e[y-1])),u=y>2?_5:O5,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?s:(d||(d=u(e.map(r),t,n)))(r(l(y)))}return m.invert=function(y){return l(i((h||(h=u(t,e.map(r),vd)))(y)))},m.domain=function(y){return arguments.length?(e=Array.from(y,bd),p()):e.slice()},m.range=function(y){return arguments.length?(t=Array.from(y),p()):t.slice()},m.rangeRound=function(y){return t=Array.from(y),n=p0,p()},m.clamp=function(y){return arguments.length?(l=y?!0:kn,p()):l!==kn},m.interpolate=function(y){return arguments.length?(n=y,p()):n},m.unknown=function(y){return arguments.length?(s=y,m):s},function(y,x){return r=y,i=x,p()}}function m0(){return th()(kn,kn)}function T5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Us(e){return e=xd(Math.abs(e)),e?e[1]:NaN}function D5(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],d=0;i>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),s.push(n.substring(i-=u,i+u)),!((d+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function j5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var N5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bc(e){if(!(t=N5.exec(e)))throw new Error("invalid format: "+e);var t;return new g0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bc.prototype=g0.prototype;function g0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}g0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var O_;function M5(e,t){var n=xd(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(O_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+xd(e,Math.max(0,t+s-1))[0]}function IE(e,t){var n=xd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const LE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:T5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>IE(e*100,t),r:IE,s:M5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $E(e){return e}var BE=Array.prototype.map,UE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function R5(e){var t=e.grouping===void 0||e.thousands===void 0?$E:D5(BE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?$E:j5(BE.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(m){m=Bc(m);var y=m.fill,x=m.align,S=m.sign,A=m.symbol,E=m.zero,P=m.width,O=m.comma,_=m.precision,N=m.trim,j=m.type;j==="n"?(O=!0,j="g"):LE[j]||(_===void 0&&(_=12),N=!0,j="g"),(E||y==="0"&&x==="=")&&(E=!0,y="0",x="=");var D=A==="$"?n:A==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",R=A==="$"?r:/[%p]/.test(j)?l:"",k=LE[j],B=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function J(q){var Z=D,ce=R,le,te,$;if(j==="c")ce=k(q)+ce,q="";else{q=+q;var ee=q<0||1/q<0;if(q=isNaN(q)?d:k(Math.abs(q),_),N&&(q=k5(q)),ee&&+q==0&&S!=="+"&&(ee=!1),Z=(ee?S==="("?S:u:S==="-"||S==="("?"":S)+Z,ce=(j==="s"?UE[8+O_/3]:"")+ce+(ee&&S==="("?")":""),B){for(le=-1,te=q.length;++le<te;)if($=q.charCodeAt(le),48>$||$>57){ce=($===46?i+q.slice(le+1):q.slice(le))+ce,q=q.slice(0,le);break}}}O&&!E&&(q=t(q,1/0));var he=Z.length+q.length+ce.length,pe=he<P?new Array(P-he+1).join(y):"";switch(O&&E&&(q=t(pe+q,pe.length?P-ce.length:1/0),pe=""),x){case"<":q=Z+q+ce+pe;break;case"=":q=Z+pe+q+ce;break;case"^":q=pe.slice(0,he=pe.length>>1)+Z+q+ce+pe.slice(he);break;default:q=pe+Z+q+ce;break}return s(q)}return J.toString=function(){return m+""},J}function p(m,y){var x=h((m=Bc(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(Us(y)/3)))*3,A=Math.pow(10,-S),E=UE[8+S/3];return function(P){return x(A*P)+E}}return{format:h,formatPrefix:p}}var Rf,y0,__;I5({thousands:",",grouping:[3],currency:["$",""]});function I5(e){return Rf=R5(e),y0=Rf.format,__=Rf.formatPrefix,Rf}function L5(e){return Math.max(0,-Us(Math.abs(e)))}function $5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Us(t)/3)))*3-Us(Math.abs(e)))}function B5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Us(t)-Us(e))+1}function T_(e,t,n,r){var i=rv(e,t,n),s;switch(r=Bc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=$5(i,l))&&(r.precision=s),__(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=B5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=L5(i))&&(r.precision=s-(r.type==="%")*2);break}}return y0(r)}function Ii(e){var t=e.domain;return e.ticks=function(n){var r=t();return tv(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return T_(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],d,h,p=10;for(u<l&&(h=l,l=u,u=h,h=i,i=s,s=h);p-- >0;){if(h=nv(l,u,n),h===d)return r[i]=l,r[s]=u,t(r);if(h>0)l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h;else if(h<0)l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h;else break;d=h}return e},e}function D_(){var e=m0();return e.copy=function(){return Wc(e,D_())},Dr.apply(e,arguments),Ii(e)}function j_(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,bd),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return j_(e).unknown(t)},e=arguments.length?Array.from(e,bd):[0,1],Ii(n)}function N_(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function zE(e){return Math.log(e)}function GE(e){return Math.exp(e)}function U5(e){return-Math.log(-e)}function z5(e){return-Math.exp(-e)}function G5(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H5(e){return e===10?G5:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q5(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function HE(e){return(t,n)=>-e(-t,n)}function v0(e){const t=e(zE,GE),n=t.domain;let r=10,i,s;function l(){return i=q5(r),s=H5(r),n()[0]<0?(i=HE(i),s=HE(s),e(U5,z5)):e(zE,GE),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const d=n();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=i(h),x=i(p),S,A;const E=u==null?10:+u;let P=[];if(!(r%1)&&x-y<E){if(y=Math.floor(y),x=Math.ceil(x),h>0){for(;y<=x;++y)for(S=1;S<r;++S)if(A=y<0?S/s(-y):S*s(y),!(A<h)){if(A>p)break;P.push(A)}}else for(;y<=x;++y)for(S=r-1;S>=1;--S)if(A=y>0?S/s(-y):S*s(y),!(A<h)){if(A>p)break;P.push(A)}P.length*2<E&&(P=tv(h,p,E))}else P=tv(y,x,Math.min(x-y,E)).map(s);return m?P.reverse():P},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=Bc(d)).precision==null&&(d.trim=!0),d=y0(d)),u===1/0)return d;const h=Math.max(1,r*u/t.ticks().length);return p=>{let m=p/s(Math.round(i(p)));return m*r<r-.5&&(m*=r),m<=h?d(p):""}},t.nice=()=>n(N_(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function k_(){const e=v0(th()).domain([1,10]);return e.copy=()=>Wc(e,k_()).base(e.base()),Dr.apply(e,arguments),e}function qE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function YE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function b0(e){var t=1,n=e(qE(t),YE(t));return n.constant=function(r){return arguments.length?e(qE(t=+r),YE(t)):t},Ii(n)}function M_(){var e=b0(th());return e.copy=function(){return Wc(e,M_()).constant(e.constant())},Dr.apply(e,arguments)}function FE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Y5(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function F5(e){return e<0?-e*e:e*e}function x0(e){var t=e(kn,kn),n=1;function r(){return n===1?e(kn,kn):n===.5?e(Y5,F5):e(FE(n),FE(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ii(t)}function S0(){var e=x0(th());return e.copy=function(){return Wc(e,S0()).exponent(e.exponent())},Dr.apply(e,arguments),e}function K5(){return S0.apply(null,arguments).exponent(.5)}function KE(e){return Math.sign(e)*e*e}function V5(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function R_(){var e=m0(),t=[0,1],n=!1,r;function i(s){var l=V5(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(KE(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,bd)).map(KE)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return R_(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Dr.apply(i,arguments),Ii(i)}function I_(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=Z$(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[Vc(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ji),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return I_().domain(e).range(t).unknown(r)},Dr.apply(s,arguments)}function L_(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(d){return d!=null&&d<=d?i[Vc(r,d,0,n)]:s}function u(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,u()):i.slice()},l.invertExtent=function(d){var h=i.indexOf(d);return h<0?[NaN,NaN]:h<1?[e,r[0]]:h>=n?[r[n-1],t]:[r[h-1],r[h]]},l.unknown=function(d){return arguments.length&&(s=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return L_().domain([e,t]).range(i).unknown(s)},Dr.apply(Ii(l),arguments)}function $_(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Vc(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return $_().domain(e).range(t).unknown(n)},Dr.apply(i,arguments)}const Vg=new Date,Xg=new Date;function Xt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const d=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return d;let h;do d.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<l);return d},i.filter=s=>Xt(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(Vg.setTime(+s),Xg.setTime(+l),e(Vg),e(Xg),Math.floor(n(Vg,Xg))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const Sd=Xt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Sd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Xt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Sd);Sd.range;const Ra=1e3,Er=Ra*60,Ia=Er*60,Ua=Ia*24,A0=Ua*7,VE=Ua*30,Wg=Ua*365,Oo=Xt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ra)},(e,t)=>(t-e)/Ra,e=>e.getUTCSeconds());Oo.range;const C0=Xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ra)},(e,t)=>{e.setTime(+e+t*Er)},(e,t)=>(t-e)/Er,e=>e.getMinutes());C0.range;const E0=Xt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Er)},(e,t)=>(t-e)/Er,e=>e.getUTCMinutes());E0.range;const P0=Xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ra-e.getMinutes()*Er)},(e,t)=>{e.setTime(+e+t*Ia)},(e,t)=>(t-e)/Ia,e=>e.getHours());P0.range;const w0=Xt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ia)},(e,t)=>(t-e)/Ia,e=>e.getUTCHours());w0.range;const Qc=Xt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Er)/Ua,e=>e.getDate()-1);Qc.range;const nh=Xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ua,e=>e.getUTCDate()-1);nh.range;const B_=Xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ua,e=>Math.floor(e/Ua));B_.range;function Ho(e){return Xt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Er)/A0)}const rh=Ho(0),Ad=Ho(1),X5=Ho(2),W5=Ho(3),zs=Ho(4),Q5=Ho(5),Z5=Ho(6);rh.range;Ad.range;X5.range;W5.range;zs.range;Q5.range;Z5.range;function qo(e){return Xt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/A0)}const ah=qo(0),Cd=qo(1),J5=qo(2),eB=qo(3),Gs=qo(4),tB=qo(5),nB=qo(6);ah.range;Cd.range;J5.range;eB.range;Gs.range;tB.range;nB.range;const O0=Xt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());O0.range;const _0=Xt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_0.range;const za=Xt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());za.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});za.range;const Ga=Xt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ga.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ga.range;function U_(e,t,n,r,i,s){const l=[[Oo,1,Ra],[Oo,5,5*Ra],[Oo,15,15*Ra],[Oo,30,30*Ra],[s,1,Er],[s,5,5*Er],[s,15,15*Er],[s,30,30*Er],[i,1,Ia],[i,3,3*Ia],[i,6,6*Ia],[i,12,12*Ia],[r,1,Ua],[r,2,2*Ua],[n,1,A0],[t,1,VE],[t,3,3*VE],[e,1,Wg]];function u(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const x=m&&typeof m.range=="function"?m:d(h,p,m),S=x?x.range(h,+p+1):[];return y?S.reverse():S}function d(h,p,m){const y=Math.abs(p-h)/m,x=c0(([,,E])=>E).right(l,y);if(x===l.length)return e.every(rv(h/Wg,p/Wg,m));if(x===0)return Sd.every(Math.max(rv(h,p,m),1));const[S,A]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return S.every(A)}return[u,d]}const[rB,aB]=U_(Ga,_0,ah,B_,w0,E0),[iB,oB]=U_(za,O0,rh,Qc,P0,C0);function Qg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Zg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function gc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function sB(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,h=yc(i),p=vc(i),m=yc(s),y=vc(s),x=yc(l),S=vc(l),A=yc(u),E=vc(u),P=yc(d),O=vc(d),_={a:ee,A:he,b:pe,B:I,c:null,d:eP,e:eP,f:DB,g:UB,G:GB,H:OB,I:_B,j:TB,L:z_,m:jB,M:NB,p:K,q:Y,Q:rP,s:aP,S:kB,u:MB,U:RB,V:IB,w:LB,W:$B,x:null,X:null,y:BB,Y:zB,Z:HB,"%":nP},N={a:oe,A:ye,b:z,B:re,c:null,d:tP,e:tP,f:KB,g:r8,G:i8,H:qB,I:YB,j:FB,L:H_,m:VB,M:XB,p:be,q:me,Q:rP,s:aP,S:WB,u:QB,U:ZB,V:JB,w:e8,W:t8,x:null,X:null,y:n8,Y:a8,Z:o8,"%":nP},j={a:J,A:q,b:Z,B:ce,c:le,d:ZE,e:ZE,f:CB,g:QE,G:WE,H:JE,I:JE,j:bB,L:AB,m:vB,M:xB,p:B,q:yB,Q:PB,s:wB,S:SB,u:dB,U:hB,V:pB,w:fB,W:mB,x:te,X:$,y:QE,Y:WE,Z:gB,"%":EB};_.x=D(n,_),_.X=D(r,_),_.c=D(t,_),N.x=D(n,N),N.X=D(r,N),N.c=D(t,N);function D(ae,fe){return function(ve){var de=[],Je=-1,Ae=0,Be=ae.length,Nt,pt,Yr;for(ve instanceof Date||(ve=new Date(+ve));++Je<Be;)ae.charCodeAt(Je)===37&&(de.push(ae.slice(Ae,Je)),(pt=XE[Nt=ae.charAt(++Je)])!=null?Nt=ae.charAt(++Je):pt=Nt==="e"?" ":"0",(Yr=fe[Nt])&&(Nt=Yr(ve,pt)),de.push(Nt),Ae=Je+1);return de.push(ae.slice(Ae,Je)),de.join("")}}function R(ae,fe){return function(ve){var de=gc(1900,void 0,1),Je=k(de,ae,ve+="",0),Ae,Be;if(Je!=ve.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(fe&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Ae=Zg(gc(de.y,0,1)),Be=Ae.getUTCDay(),Ae=Be>4||Be===0?Cd.ceil(Ae):Cd(Ae),Ae=nh.offset(Ae,(de.V-1)*7),de.y=Ae.getUTCFullYear(),de.m=Ae.getUTCMonth(),de.d=Ae.getUTCDate()+(de.w+6)%7):(Ae=Qg(gc(de.y,0,1)),Be=Ae.getDay(),Ae=Be>4||Be===0?Ad.ceil(Ae):Ad(Ae),Ae=Qc.offset(Ae,(de.V-1)*7),de.y=Ae.getFullYear(),de.m=Ae.getMonth(),de.d=Ae.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Be="Z"in de?Zg(gc(de.y,0,1)).getUTCDay():Qg(gc(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Be+5)%7:de.w+de.U*7-(Be+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,Zg(de)):Qg(de)}}function k(ae,fe,ve,de){for(var Je=0,Ae=fe.length,Be=ve.length,Nt,pt;Je<Ae;){if(de>=Be)return-1;if(Nt=fe.charCodeAt(Je++),Nt===37){if(Nt=fe.charAt(Je++),pt=j[Nt in XE?fe.charAt(Je++):Nt],!pt||(de=pt(ae,ve,de))<0)return-1}else if(Nt!=ve.charCodeAt(de++))return-1}return de}function B(ae,fe,ve){var de=h.exec(fe.slice(ve));return de?(ae.p=p.get(de[0].toLowerCase()),ve+de[0].length):-1}function J(ae,fe,ve){var de=x.exec(fe.slice(ve));return de?(ae.w=S.get(de[0].toLowerCase()),ve+de[0].length):-1}function q(ae,fe,ve){var de=m.exec(fe.slice(ve));return de?(ae.w=y.get(de[0].toLowerCase()),ve+de[0].length):-1}function Z(ae,fe,ve){var de=P.exec(fe.slice(ve));return de?(ae.m=O.get(de[0].toLowerCase()),ve+de[0].length):-1}function ce(ae,fe,ve){var de=A.exec(fe.slice(ve));return de?(ae.m=E.get(de[0].toLowerCase()),ve+de[0].length):-1}function le(ae,fe,ve){return k(ae,t,fe,ve)}function te(ae,fe,ve){return k(ae,n,fe,ve)}function $(ae,fe,ve){return k(ae,r,fe,ve)}function ee(ae){return l[ae.getDay()]}function he(ae){return s[ae.getDay()]}function pe(ae){return d[ae.getMonth()]}function I(ae){return u[ae.getMonth()]}function K(ae){return i[+(ae.getHours()>=12)]}function Y(ae){return 1+~~(ae.getMonth()/3)}function oe(ae){return l[ae.getUTCDay()]}function ye(ae){return s[ae.getUTCDay()]}function z(ae){return d[ae.getUTCMonth()]}function re(ae){return u[ae.getUTCMonth()]}function be(ae){return i[+(ae.getUTCHours()>=12)]}function me(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var fe=D(ae+="",_);return fe.toString=function(){return ae},fe},parse:function(ae){var fe=R(ae+="",!1);return fe.toString=function(){return ae},fe},utcFormat:function(ae){var fe=D(ae+="",N);return fe.toString=function(){return ae},fe},utcParse:function(ae){var fe=R(ae+="",!0);return fe.toString=function(){return ae},fe}}}var XE={"-":"",_:" ",0:"0"},on=/^\s*\d+/,lB=/^%/,cB=/[\\^$*+?|[\]().{}]/g;function Xe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function uB(e){return e.replace(cB,"\\$&")}function yc(e){return new RegExp("^(?:"+e.map(uB).join("|")+")","i")}function vc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fB(e,t,n){var r=on.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function dB(e,t,n){var r=on.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function hB(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function pB(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function mB(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function WE(e,t,n){var r=on.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function QE(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gB(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yB(e,t,n){var r=on.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function vB(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ZE(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function bB(e,t,n){var r=on.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function JE(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function xB(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function SB(e,t,n){var r=on.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function AB(e,t,n){var r=on.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function CB(e,t,n){var r=on.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function EB(e,t,n){var r=lB.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function PB(e,t,n){var r=on.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function wB(e,t,n){var r=on.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function eP(e,t){return Xe(e.getDate(),t,2)}function OB(e,t){return Xe(e.getHours(),t,2)}function _B(e,t){return Xe(e.getHours()%12||12,t,2)}function TB(e,t){return Xe(1+Qc.count(za(e),e),t,3)}function z_(e,t){return Xe(e.getMilliseconds(),t,3)}function DB(e,t){return z_(e,t)+"000"}function jB(e,t){return Xe(e.getMonth()+1,t,2)}function NB(e,t){return Xe(e.getMinutes(),t,2)}function kB(e,t){return Xe(e.getSeconds(),t,2)}function MB(e){var t=e.getDay();return t===0?7:t}function RB(e,t){return Xe(rh.count(za(e)-1,e),t,2)}function G_(e){var t=e.getDay();return t>=4||t===0?zs(e):zs.ceil(e)}function IB(e,t){return e=G_(e),Xe(zs.count(za(e),e)+(za(e).getDay()===4),t,2)}function LB(e){return e.getDay()}function $B(e,t){return Xe(Ad.count(za(e)-1,e),t,2)}function BB(e,t){return Xe(e.getFullYear()%100,t,2)}function UB(e,t){return e=G_(e),Xe(e.getFullYear()%100,t,2)}function zB(e,t){return Xe(e.getFullYear()%1e4,t,4)}function GB(e,t){var n=e.getDay();return e=n>=4||n===0?zs(e):zs.ceil(e),Xe(e.getFullYear()%1e4,t,4)}function HB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Xe(t/60|0,"0",2)+Xe(t%60,"0",2)}function tP(e,t){return Xe(e.getUTCDate(),t,2)}function qB(e,t){return Xe(e.getUTCHours(),t,2)}function YB(e,t){return Xe(e.getUTCHours()%12||12,t,2)}function FB(e,t){return Xe(1+nh.count(Ga(e),e),t,3)}function H_(e,t){return Xe(e.getUTCMilliseconds(),t,3)}function KB(e,t){return H_(e,t)+"000"}function VB(e,t){return Xe(e.getUTCMonth()+1,t,2)}function XB(e,t){return Xe(e.getUTCMinutes(),t,2)}function WB(e,t){return Xe(e.getUTCSeconds(),t,2)}function QB(e){var t=e.getUTCDay();return t===0?7:t}function ZB(e,t){return Xe(ah.count(Ga(e)-1,e),t,2)}function q_(e){var t=e.getUTCDay();return t>=4||t===0?Gs(e):Gs.ceil(e)}function JB(e,t){return e=q_(e),Xe(Gs.count(Ga(e),e)+(Ga(e).getUTCDay()===4),t,2)}function e8(e){return e.getUTCDay()}function t8(e,t){return Xe(Cd.count(Ga(e)-1,e),t,2)}function n8(e,t){return Xe(e.getUTCFullYear()%100,t,2)}function r8(e,t){return e=q_(e),Xe(e.getUTCFullYear()%100,t,2)}function a8(e,t){return Xe(e.getUTCFullYear()%1e4,t,4)}function i8(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Gs(e):Gs.ceil(e),Xe(e.getUTCFullYear()%1e4,t,4)}function o8(){return"+0000"}function nP(){return"%"}function rP(e){return+e}function aP(e){return Math.floor(+e/1e3)}var Ts,Y_,F_;s8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function s8(e){return Ts=sB(e),Y_=Ts.format,Ts.parse,F_=Ts.utcFormat,Ts.utcParse,Ts}function l8(e){return new Date(e)}function c8(e){return e instanceof Date?+e:+new Date(+e)}function T0(e,t,n,r,i,s,l,u,d,h){var p=m0(),m=p.invert,y=p.domain,x=h(".%L"),S=h(":%S"),A=h("%I:%M"),E=h("%I %p"),P=h("%a %d"),O=h("%b %d"),_=h("%B"),N=h("%Y");function j(D){return(d(D)<D?x:u(D)<D?S:l(D)<D?A:s(D)<D?E:r(D)<D?i(D)<D?P:O:n(D)<D?_:N)(D)}return p.invert=function(D){return new Date(m(D))},p.domain=function(D){return arguments.length?y(Array.from(D,c8)):y().map(l8)},p.ticks=function(D){var R=y();return e(R[0],R[R.length-1],D??10)},p.tickFormat=function(D,R){return R==null?j:h(R)},p.nice=function(D){var R=y();return(!D||typeof D.range!="function")&&(D=t(R[0],R[R.length-1],D??10)),D?y(N_(R,D)):p},p.copy=function(){return Wc(p,T0(e,t,n,r,i,s,l,u,d,h))},p}function u8(){return Dr.apply(T0(iB,oB,za,O0,rh,Qc,P0,C0,Oo,Y_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function f8(){return Dr.apply(T0(rB,aB,Ga,_0,ah,nh,w0,E0,Oo,F_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ih(){var e=0,t=1,n,r,i,s,l=kn,u=!1,d;function h(m){return m==null||isNaN(m=+m)?d:l(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),h):[e,t]},h.clamp=function(m){return arguments.length?(u=!!m,h):u},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(y){var x,S;return arguments.length?([x,S]=y,l=m(x,S),h):[l(0),l(1)]}}return h.range=p(Ws),h.rangeRound=p(p0),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),h}}function Li(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function K_(){var e=Ii(ih()(kn));return e.copy=function(){return Li(e,K_())},Fa.apply(e,arguments)}function V_(){var e=v0(ih()).domain([1,10]);return e.copy=function(){return Li(e,V_()).base(e.base())},Fa.apply(e,arguments)}function X_(){var e=b0(ih());return e.copy=function(){return Li(e,X_()).constant(e.constant())},Fa.apply(e,arguments)}function D0(){var e=x0(ih());return e.copy=function(){return Li(e,D0()).exponent(e.exponent())},Fa.apply(e,arguments)}function d8(){return D0.apply(null,arguments).exponent(.5)}function W_(){var e=[],t=kn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Vc(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ji),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Q$(e,s/r))},n.copy=function(){return W_(t).domain(e)},Fa.apply(n,arguments)}function oh(){var e=0,t=.5,n=1,r=1,i,s,l,u,d,h=kn,p,m=!1,y;function x(A){return isNaN(A=+A)?y:(A=.5+((A=+p(A))-s)*(r*A<r*s?u:d),h(m?Math.max(0,Math.min(1,A)):A))}x.domain=function(A){return arguments.length?([e,t,n]=A,i=p(e=+e),s=p(t=+t),l=p(n=+n),u=i===s?0:.5/(s-i),d=s===l?0:.5/(l-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(A){return arguments.length?(m=!!A,x):m},x.interpolator=function(A){return arguments.length?(h=A,x):h};function S(A){return function(E){var P,O,_;return arguments.length?([P,O,_]=E,h=E5(A,[P,O,_]),x):[h(0),h(.5),h(1)]}}return x.range=S(Ws),x.rangeRound=S(p0),x.unknown=function(A){return arguments.length?(y=A,x):y},function(A){return p=A,i=A(e),s=A(t),l=A(n),u=i===s?0:.5/(s-i),d=s===l?0:.5/(l-s),r=s<i?-1:1,x}}function Q_(){var e=Ii(oh()(kn));return e.copy=function(){return Li(e,Q_())},Fa.apply(e,arguments)}function Z_(){var e=v0(oh()).domain([.1,1,10]);return e.copy=function(){return Li(e,Z_()).base(e.base())},Fa.apply(e,arguments)}function J_(){var e=b0(oh());return e.copy=function(){return Li(e,J_()).constant(e.constant())},Fa.apply(e,arguments)}function j0(){var e=x0(oh());return e.copy=function(){return Li(e,j0()).exponent(e.exponent())},Fa.apply(e,arguments)}function h8(){return j0.apply(null,arguments).exponent(.5)}const Ac=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:f0,scaleDiverging:Q_,scaleDivergingLog:Z_,scaleDivergingPow:j0,scaleDivergingSqrt:h8,scaleDivergingSymlog:J_,scaleIdentity:j_,scaleImplicit:av,scaleLinear:D_,scaleLog:k_,scaleOrdinal:u0,scalePoint:e5,scalePow:S0,scaleQuantile:I_,scaleQuantize:L_,scaleRadial:R_,scaleSequential:K_,scaleSequentialLog:V_,scaleSequentialPow:D0,scaleSequentialQuantile:W_,scaleSequentialSqrt:d8,scaleSequentialSymlog:X_,scaleSqrt:K5,scaleSymlog:M_,scaleThreshold:$_,scaleTime:u8,scaleUtc:f8,tickFormat:T_},Symbol.toStringTag,{value:"Module"}));var $i=e=>e.chartData,N0=W([$i],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),k0=(e,t,n,r)=>r?N0(e):$i(e);function Hs(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(lr(t)&&lr(n))return!0}return!1}function iP(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function p8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(lr(n))i=n;else if(typeof n=="function")return;if(lr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Hs(l))return l}}function m8(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Hs(r))return iP(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Te(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&XC.test(i)){var d=XC.exec(i);if(d==null||t==null)l=void 0;else{var h=+d[1];l=t[0]-h}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(Te(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&WC.test(s)){var p=WC.exec(s);if(p==null||t==null)u=void 0;else{var m=+p[1];u=t[1]+m}}else u=t?.[1];var y=[l,u];if(Hs(y))return t==null?y:iP(y,t,n)}}}var Qs=1e9,g8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},R0,vt=!0,Or="[DecimalError] ",No=Or+"Invalid argument: ",M0=Or+"Exponent out of range: ",Zs=Math.floor,Eo=Math.pow,y8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ar,nn=1e7,ht=7,eT=9007199254740991,Ed=Zs(eT/ht),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*ht;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ce.dividedBy=Ce.div=function(e){return $a(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,n=t.constructor;return ut($a(t,new n(e),0,1),n.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return Ut(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ar))throw Error(Or+"NaN");if(n.s<1)throw Error(Or+(n.s?"NaN":"-Infinity"));return n.eq(ar)?new r(0):(vt=!1,t=$a(Uc(n,s),Uc(e,s),s),vt=!0,ut(t,i))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rT(t,e):tT(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Or+"NaN");return n.s?(vt=!1,t=$a(n,e,0,1).times(e),vt=!0,n.minus(t)):ut(new r(n),i)};Ce.naturalExponential=Ce.exp=function(){return nT(this)};Ce.naturalLogarithm=Ce.ln=function(){return Uc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?tT(t,e):rT(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(No+e);if(t=Ut(i)+1,r=i.d.length-1,n=r*ht+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ce.squareRoot=Ce.sqrt=function(){var e,t,n,r,i,s,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Or+"NaN")}for(e=Ut(u),vt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ra(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Zs((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new d(t)):r=new d(i.toString()),n=d.precision,i=l=n+3;;)if(s=r,r=s.plus($a(u,s,l+2)).times(.5),ra(s.d).slice(0,l)===(t=ra(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(ut(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return vt=!0,ut(r,n)};Ce.times=Ce.mul=function(e){var t,n,r,i,s,l,u,d,h,p=this,m=p.constructor,y=p.d,x=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,n=p.e+e.e,d=y.length,h=x.length,d<h&&(s=y,y=x,x=s,l=d,d=h,h=l),s=[],l=d+h,r=l;r--;)s.push(0);for(r=h;--r>=0;){for(t=0,i=d+r;i>r;)u=s[i]+x[r]*y[i-r-1]+t,s[i--]=u%nn|0,t=u/nn|0;s[i]=(s[i]+t)%nn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,vt?ut(e,m.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(oa(e,0,Qs),t===void 0?t=r.rounding:oa(t,0,8),ut(n,e+Ut(n)+1,t))};Ce.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Io(r,!0):(oa(e,0,Qs),t===void 0?t=i.rounding:oa(t,0,8),r=ut(new i(r),e+1,t),n=Io(r,!0,e+1)),n};Ce.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Io(i):(oa(e,0,Qs),t===void 0?t=s.rounding:oa(t,0,8),r=ut(new s(i),e+Ut(i)+1,t),n=Io(r.abs(),!1,e+Ut(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return ut(new t(e),Ut(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,n,r,i,s,l,u=this,d=u.constructor,h=12,p=+(e=new d(e));if(!e.s)return new d(ar);if(u=new d(u),!u.s){if(e.s<1)throw Error(Or+"Infinity");return u}if(u.eq(ar))return u;if(r=d.precision,e.eq(ar))return ut(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=p<0?-p:p)<=eT){for(i=new d(ar),t=Math.ceil(r/ht+4),vt=!1;n%2&&(i=i.times(u),sP(i.d,t)),n=Zs(n/2),n!==0;)u=u.times(u),sP(u.d,t);return vt=!0,e.s<0?new d(ar).div(i):ut(i,r)}}else if(s<0)throw Error(Or+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,vt=!1,i=e.times(Uc(u,r+h)),vt=!0,i=nT(i),i.s=s,i};Ce.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Ut(i),r=Io(i,n<=s.toExpNeg||n>=s.toExpPos)):(oa(e,1,Qs),t===void 0?t=s.rounding:oa(t,0,8),i=ut(new s(i),e,t),n=Ut(i),r=Io(i,e<=n||n<=s.toExpNeg,e)),r};Ce.toSignificantDigits=Ce.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(oa(e,1,Qs),t===void 0?t=r.rounding:oa(t,0,8)),ut(new r(n),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ut(e),n=e.constructor;return Io(e,t<=n.toExpNeg||t>=n.toExpPos)};function tT(e,t){var n,r,i,s,l,u,d,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),vt?ut(t,m):t;if(d=e.d,h=t.d,l=e.e,i=t.e,d=d.slice(),s=l-i,s){for(s<0?(r=d,s=-s,u=h.length):(r=h,i=l,u=d.length),l=Math.ceil(m/ht),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=d.length,s=h.length,u-s<0&&(s=u,r=h,h=d,d=r),n=0;s;)n=(d[--s]=d[s]+h[s]+n)/nn|0,d[s]%=nn;for(n&&(d.unshift(n),++i),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=i,vt?ut(t,m):t}function oa(e,t,n){if(e!==~~e||e<t||e>n)throw Error(No+e)}function ra(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=ht-r.length,n&&(s+=wi(n)),s+=r;l=e[t],r=l+"",n=ht-r.length,n&&(s+=wi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var $a=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%nn|0,l=s/nn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,d;if(s!=l)d=s>l?1:-1;else for(u=d=0;u<s;u++)if(r[u]!=i[u]){d=r[u]>i[u]?1:-1;break}return d}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*nn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,d,h,p,m,y,x,S,A,E,P,O,_,N,j,D,R,k,B=r.constructor,J=r.s==i.s?1:-1,q=r.d,Z=i.d;if(!r.s)return new B(r);if(!i.s)throw Error(Or+"Division by zero");for(d=r.e-i.e,R=Z.length,j=q.length,x=new B(J),S=x.d=[],h=0;Z[h]==(q[h]||0);)++h;if(Z[h]>(q[h]||0)&&--d,s==null?O=s=B.precision:l?O=s+(Ut(r)-Ut(i))+1:O=s,O<0)return new B(0);if(O=O/ht+2|0,h=0,R==1)for(p=0,Z=Z[0],O++;(h<j||p)&&O--;h++)_=p*nn+(q[h]||0),S[h]=_/Z|0,p=_%Z|0;else{for(p=nn/(Z[0]+1)|0,p>1&&(Z=e(Z,p),q=e(q,p),R=Z.length,j=q.length),N=R,A=q.slice(0,R),E=A.length;E<R;)A[E++]=0;k=Z.slice(),k.unshift(0),D=Z[0],Z[1]>=nn/2&&++D;do p=0,u=t(Z,A,R,E),u<0?(P=A[0],R!=E&&(P=P*nn+(A[1]||0)),p=P/D|0,p>1?(p>=nn&&(p=nn-1),m=e(Z,p),y=m.length,E=A.length,u=t(m,A,y,E),u==1&&(p--,n(m,R<y?k:Z,y))):(p==0&&(u=p=1),m=Z.slice()),y=m.length,y<E&&m.unshift(0),n(A,m,E),u==-1&&(E=A.length,u=t(Z,A,R,E),u<1&&(p++,n(A,R<E?k:Z,E))),E=A.length):u===0&&(p++,A=[0]),S[h++]=p,u&&A[0]?A[E++]=q[N]||0:(A=[q[N]],E=1);while((N++<j||A[0]!==void 0)&&O--)}return S[0]||S.shift(),x.e=d,ut(x,l?s+Ut(x)+1:s)}})();function nT(e,t){var n,r,i,s,l,u,d=0,h=0,p=e.constructor,m=p.precision;if(Ut(e)>16)throw Error(M0+Ut(e));if(!e.s)return new p(ar);for(vt=!1,u=m,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(r=Math.log(Eo(2,h))/Math.LN10*2+5|0,u+=r,n=i=s=new p(ar),p.precision=u;;){if(i=ut(i.times(e),u),n=n.times(++d),l=s.plus($a(i,n,u)),ra(l.d).slice(0,u)===ra(s.d).slice(0,u)){for(;h--;)s=ut(s.times(s),u);return p.precision=m,t==null?(vt=!0,ut(s,m)):s}s=l}}function Ut(e){for(var t=e.e*ht,n=e.d[0];n>=10;n/=10)t++;return t}function Jg(e,t,n){if(t>e.LN10.sd())throw vt=!0,n&&(e.precision=n),Error(Or+"LN10 precision limit exceeded");return ut(new e(e.LN10),t)}function wi(e){for(var t="";e--;)t+="0";return t}function Uc(e,t){var n,r,i,s,l,u,d,h,p,m=1,y=10,x=e,S=x.d,A=x.constructor,E=A.precision;if(x.s<1)throw Error(Or+(x.s?"NaN":"-Infinity"));if(x.eq(ar))return new A(0);if(t==null?(vt=!1,h=E):h=t,x.eq(10))return t==null&&(vt=!0),Jg(A,h);if(h+=y,A.precision=h,n=ra(S),r=n.charAt(0),s=Ut(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=ra(x.d),r=n.charAt(0),m++;s=Ut(x),r>1?(x=new A("0."+n),s++):x=new A(r+"."+n.slice(1))}else return d=Jg(A,h+2,E).times(s+""),x=Uc(new A(r+"."+n.slice(1)),h-y).plus(d),A.precision=E,t==null?(vt=!0,ut(x,E)):x;for(u=l=x=$a(x.minus(ar),x.plus(ar),h),p=ut(x.times(x),h),i=3;;){if(l=ut(l.times(p),h),d=u.plus($a(l,new A(i),h)),ra(d.d).slice(0,h)===ra(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(Jg(A,h+2,E).times(s+""))),u=$a(u,new A(m),h),A.precision=E,t==null?(vt=!0,ut(u,E)):u;u=d,i+=2}}function oP(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Zs(n/ht),e.d=[],r=(n+1)%ht,n<0&&(r+=ht),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=ht;r<i;)e.d.push(+t.slice(r,r+=ht));t=t.slice(r),r=ht-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),vt&&(e.e>Ed||e.e<-Ed))throw Error(M0+n)}else e.s=0,e.e=0,e.d=[0];return e}function ut(e,t,n){var r,i,s,l,u,d,h,p,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=ht,i=t,h=m[p=0];else{if(p=Math.ceil((r+1)/ht),s=m.length,p>=s)return e;for(h=s=m[p],l=1;s>=10;s/=10)l++;r%=ht,i=r-ht+l}if(n!==void 0&&(s=Eo(10,l-i-1),u=h/s%10|0,d=t<0||m[p+1]!==void 0||h%s,d=n<4?(u||d)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(r>0?i>0?h/Eo(10,l-i):0:m[p-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return d?(s=Ut(e),m.length=1,t=t-s-1,m[0]=Eo(10,(ht-t%ht)%ht),e.e=Zs(-t/ht)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=p,s=1,p--):(m.length=p+1,s=Eo(10,ht-r),m[p]=i>0?(h/Eo(10,l-i)%Eo(10,i)|0)*s:0),d)for(;;)if(p==0){(m[0]+=s)==nn&&(m[0]=1,++e.e);break}else{if(m[p]+=s,m[p]!=nn)break;m[p--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(vt&&(e.e>Ed||e.e<-Ed))throw Error(M0+Ut(e));return e}function rT(e,t){var n,r,i,s,l,u,d,h,p,m,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),vt?ut(t,x):t;if(d=e.d,m=t.d,r=t.e,h=e.e,d=d.slice(),l=h-r,l){for(p=l<0,p?(n=d,l=-l,u=m.length):(n=m,r=h,u=d.length),i=Math.max(Math.ceil(x/ht),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=d.length,u=m.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(d[i]!=m[i]){p=d[i]<m[i];break}l=0}for(p&&(n=d,d=m,m=n,t.s=-t.s),u=d.length,i=m.length-u;i>0;--i)d[u++]=0;for(i=m.length;i>l;){if(d[--i]<m[i]){for(s=i;s&&d[--s]===0;)d[s]=nn-1;--d[s],d[i]+=nn}d[i]-=m[i]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(t.d=d,t.e=r,vt?ut(t,x):t):new y(0)}function Io(e,t,n){var r,i=Ut(e),s=ra(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+wi(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+wi(-i-1)+s,n&&(r=n-l)>0&&(s+=wi(r))):i>=l?(s+=wi(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+wi(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=wi(r))),e.s<0?"-"+s:s}function sP(e,t){if(e.length>t)return e.length=t,!0}function aT(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(No+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return oP(l,s.toString())}else if(typeof s!="string")throw Error(No+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,y8.test(s))oP(l,s);else throw Error(No+s)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=aT,i.config=i.set=v8,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function v8(e){if(!e||typeof e!="object")throw Error(Or+"Object expected");var t,n,r,i=["precision",1,Qs,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Zs(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(No+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(No+n+": "+r);return this}var R0=aT(g8);ar=new R0(1);const nt=R0;var b8=e=>e,iT={},oT=e=>e===iT,lP=e=>function t(){return arguments.length===0||arguments.length===1&&oT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},sT=(e,t)=>e===1?t:lP(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==iT).length;return s>=e?t(...r):sT(e-s,lP(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var h=r.map(p=>oT(p)?u.shift():p);return t(...h,...u)}))}),sh=e=>sT(e.length,e),lv=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},x8=sh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),S8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return b8;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,d)=>d(u),s(...arguments))}},cv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),lT=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=i,n=e(...i)),n}};function cT(e){var t;return e===0?t=1:t=Math.floor(new nt(e).abs().log(10).toNumber())+1,t}function uT(e,t,n){for(var r=new nt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}sh((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});sh((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});sh((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var fT=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},dT=(e,t,n)=>{if(e.lte(0))return new nt(0);var r=cT(e.toNumber()),i=new nt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new nt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),d=u.mul(i);return t?new nt(d.toNumber()):new nt(Math.ceil(d.toNumber()))},A8=(e,t,n)=>{var r=new nt(1),i=new nt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new nt(10).pow(cT(e)-1),i=new nt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new nt(Math.floor(e)))}else e===0?i=new nt(Math.floor((t-1)/2)):n||(i=new nt(Math.floor(e)));var l=Math.floor((t-1)/2),u=S8(x8(d=>i.add(new nt(d-l).mul(r)).toNumber()),lv);return u(0,t)},hT=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new nt(0),tickMin:new nt(0),tickMax:new nt(0)};var l=dT(new nt(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new nt(0):(u=new nt(t).add(n).div(2),u=u.sub(new nt(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),h=Math.ceil(new nt(n).sub(u).div(l).toNumber()),p=d+h+1;return p>r?hT(t,n,r,i,s+1):(p<r&&(h=n>0?h+(r-p):h,d=n>0?d:d+(r-p)),{step:l,tickMin:u.sub(new nt(d).mul(l)),tickMax:u.add(new nt(h).mul(l))})};function C8(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=fT([t,n]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...lv(0,r-1).map(()=>1/0)]:[...lv(0,r-1).map(()=>-1/0),u];return t>n?cv(d):d}if(l===u)return A8(l,r,i);var{step:h,tickMin:p,tickMax:m}=hT(l,u,s,i,0),y=uT(p,m.add(new nt(.1).mul(h)),h);return t>n?cv(y):y}function E8(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=fT([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),d=dT(new nt(l).sub(s).div(u-1),i,0),h=[...uT(new nt(s),new nt(l),d),l];return i===!1&&(h=h.map(p=>Math.round(p))),n>r?cv(h):h}var P8=lT(C8),w8=lT(E8),pT=e=>e.rootProps.maxBarSize,O8=e=>e.rootProps.barGap,mT=e=>e.rootProps.barCategoryGap,_8=e=>e.rootProps.barSize,Zc=e=>e.rootProps.stackOffset,I0=e=>e.options.chartName,L0=e=>e.rootProps.syncId,gT=e=>e.rootProps.syncMethod,$0=e=>e.options.eventEmitter,ka={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},rr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},lh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},T8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ka.angleAxisId,includeHidden:!1,name:void 0,reversed:ka.reversed,scale:ka.scale,tick:ka.tick,tickCount:void 0,ticks:void 0,type:ka.type,unit:void 0},D8={allowDataOverflow:rr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:rr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:rr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:rr.scale,tick:rr.tick,tickCount:rr.tickCount,ticks:void 0,type:rr.type,unit:void 0},j8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ka.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ka.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ka.scale,tick:ka.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},N8={allowDataOverflow:rr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:rr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:rr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:rr.scale,tick:rr.tick,tickCount:rr.tickCount,ticks:void 0,type:"category",unit:void 0},B0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?j8:T8,U0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?N8:D8,ch=e=>e.polarOptions,z0=W([qa,Ya,Vt],ZO),yT=W([ch,z0],(e,t)=>{if(e!=null)return On(e.innerRadius,t,0)}),vT=W([ch,z0],(e,t)=>{if(e!=null)return On(e.outerRadius,t,t*.8)}),k8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},bT=W([ch],k8);W([B0,bT],lh);var xT=W([z0,yT,vT],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});W([U0,xT],lh);var ST=W([We,ch,yT,vT,qa,Ya],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:d,endAngle:h}=t;return{cx:On(l,i,i/2),cy:On(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:h,clockWise:!1}}}),xt=(e,t)=>t,Jc=(e,t,n)=>n;function G0(e){return e?.id}var Wt=e=>{var t=We(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Js=e=>e.tooltip.settings.axisId,sn=e=>{var t=Wt(e),n=Js(e);return eu(e,t,n)},AT=W([sn],e=>e?.dataKey);function CT(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var d,h=(d=u.data)!==null&&d!==void 0?d:r;if(!(h==null||h.length===0)){var p=G0(u);h.forEach((m,y)=>{var x=s==null||i?y:String(yt(m,s,null)),S=yt(m,u.dataKey,0),A;l.has(x)?A=l.get(x):A={},Object.assign(A,{[p]:S}),l.set(x,A)})}}),Array.from(l.values())}function uh(e){return e.stackId!=null&&e.dataKey!=null}function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(r){M8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M8(e,t,n){return(t=R8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R8(e){var t=I8(e,"string");return typeof t=="symbol"?t:t+""}function I8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uv=[0,"auto"],tr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ET=(e,t)=>e.cartesianAxis.xAxis[t],Bi=(e,t)=>{var n=ET(e,t);return n??tr},nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:uv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kc},PT=(e,t)=>e.cartesianAxis.yAxis[t],Ui=(e,t)=>{var n=PT(e,t);return n??nr},L8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},H0=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??L8},jt=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);case"zAxis":return H0(e,n);case"angleAxis":return B0(e,n);case"radiusAxis":return U0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},$8=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},eu=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);case"angleAxis":return B0(e,n);case"radiusAxis":return U0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},wT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function q0(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Y0=e=>e.graphicalItems.cartesianItems,B8=W([xt,Jc],q0),F0=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),tu=W([Y0,jt,B8],F0),OT=W([tu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(uh)),_T=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),TT=W([tu],_T),K0=e=>e.map(t=>t.data).filter(Boolean).flat(1),U8=W([tu],K0),V0=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},X0=W([U8,k0],V0),W0=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:yt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:yt(i,r)}))):e.map(r=>({value:r})),fh=W([X0,jt,tu],W0);function DT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Yo(e){return e.filter(t=>ia(t)||t instanceof Date).map(Number).filter(t=>or(t)===!1)}function z8(e,t,n){return!n||typeof t!="number"||or(t)?[]:n.length?Yo(n.flatMap(r=>{var i=yt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!lr(s)||!lr(l)))return[t-s,t+l]})):[]}var G8=W([OT,k0,sn],CT),jT=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,d=u.map(G0);return[l,{stackedData:FL(e,d,n),graphicalItems:u}]}))},fv=W([G8,OT,Zc],jT),NT=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=QL(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},H8=W([fv,$i,xt],NT),kT=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,d,h=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>DT(i,m)),p=yt(s,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey);return{value:p,errorDomain:z8(s,p,h)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:yt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),dh=e=>e.errorBars,MT=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>DT(n,r));W([TT,dh,xt],MT);var q8=W([X0,jt,TT,dh,xt],kT);function Y8(e){var{value:t}=e;if(ia(t)||t instanceof Date)return t}var uP=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Yo(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},F8=(e,t,n)=>{var r=e.map(Y8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&F2(r))?b_(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},Q0=e=>{var t;if(e==null||!("domain"in e))return uv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Yo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:uv},wd=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},RT=e=>e.referenceElements.dots,el=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),K8=W([RT,xt,Jc],el),IT=e=>e.referenceElements.areas,V8=W([IT,xt,Jc],el),LT=e=>e.referenceElements.lines,X8=W([LT,xt,Jc],el),$T=(e,t)=>{var n=Yo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},W8=W(K8,xt,$T),BT=(e,t)=>{var n=Yo(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Q8=W([V8,xt],BT),UT=(e,t)=>{var n=Yo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Z8=W(X8,xt,UT),J8=W(W8,Z8,Q8,(e,t,n)=>wd(e,n,t)),zT=W([jt],Q0),Z0=(e,t,n,r,i,s,l)=>{var u=p8(t,e.allowDataOverflow);if(u!=null)return u;var d=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",h=d?wd(n,i,uP(r)):wd(i,uP(r));return m8(t,h,e.allowDataOverflow)},e6=W([jt,zT,H8,q8,J8,We,xt],Z0),t6=[0,1],J0=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,h=Go(t,s);return h&&u==null?b_(0,n.length):d==="category"?F8(r,e,h):i==="expand"?t6:l}},eb=W([jt,We,X0,fh,Zc,xt,e6],J0),GT=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Hc(s));return u in Ac?u:"point"}}},tl=W([jt,We,wT,I0,xt],GT);function n6(e){if(e!=null){if(e in Ac)return Ac[e]();var t="scale".concat(Hc(e));if(t in Ac)return Ac[t]()}}function tb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=n6(t);if(i!=null){var s=i.domain(n).range(r);return zL(s),s}}}var nb=(e,t,n)=>{var r=Q0(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Hs(e))return P8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Hs(e))return w8(e,t.tickCount,t.allowDecimals)}},rb=W([eb,eu,tl],nb),ab=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Hs(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},r6=W([jt,eb,rb,xt],ab),a6=W(fh,jt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Yo(e.map(u=>u.value))).sort((u,d)=>u-d);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),HT=W(a6,We,mT,Vt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!lr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=On(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),i6=(e,t)=>{var n=Bi(e,t);return n==null||typeof n.padding!="string"?0:HT(e,"xAxis",t,n.padding)},o6=(e,t)=>{var n=Ui(e,t);return n==null||typeof n.padding!="string"?0:HT(e,"yAxis",t,n.padding)},s6=W(Bi,i6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),l6=W(Ui,o6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),c6=W([Vt,s6,Qd,Wd,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),u6=W([Vt,We,l6,Qd,Wd,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),nu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return c6(e,n,r);case"yAxis":return u6(e,n,r);case"zAxis":return(i=H0(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return bT(e);case"radiusAxis":return xT(e,n);default:return}},qT=W([jt,nu],lh),nl=W([jt,tl,r6,qT],tb);W([tu,dh,xt],MT);function YT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var hh=(e,t)=>t,ph=(e,t,n)=>n,f6=W(Vd,hh,ph,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(YT)),d6=W(Xd,hh,ph,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(YT)),FT=(e,t)=>({width:e.width,height:t.height}),h6=(e,t)=>{var n=typeof t.width=="number"?t.width:Kc;return{width:n,height:e.height}},KT=W(Vt,Bi,FT),p6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},m6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},g6=W(Ya,Vt,f6,hh,ph,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var d=FT(t,u);l==null&&(l=p6(t,r,e));var h=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(h)*d.height,l+=(h?-1:1)*d.height}),s}),y6=W(qa,Vt,d6,hh,ph,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var d=h6(t,u);l==null&&(l=m6(t,r,e));var h=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(h)*d.width,l+=(h?-1:1)*d.width}),s}),v6=(e,t)=>{var n=Vt(e),r=Bi(e,t);if(r!=null){var i=g6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},b6=(e,t)=>{var n=Vt(e),r=Ui(e,t);if(r!=null){var i=y6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},VT=W(Vt,Ui,(e,t)=>{var n=typeof t.width=="number"?t.width:Kc;return{width:n,height:e.height}}),fP=(e,t,n)=>{switch(t){case"xAxis":return KT(e,n).width;case"yAxis":return VT(e,n).height;default:return}},XT=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Go(e,r),d=t.map(h=>h.value);if(l&&u&&s==="category"&&i&&F2(d))return d}},ib=W([We,fh,jt,xt],XT),WT=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Go(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},ob=W([We,fh,eu,xt],WT),dP=W([We,$8,tl,nl,ib,ob,nu,rb,xt],(e,t,n,r,i,s,l,u,d)=>{if(t==null)return null;var h=Go(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:l,realScaleType:n,scale:r}}),x6=(e,t,n,r,i,s,l,u,d)=>{if(!(t==null||r==null)){var h=Go(e,d),{type:p,ticks:m,tickCount:y}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=p==="category"&&r.bandwidth?r.bandwidth()/x:0;S=d==="angleAxis"&&s!=null&&s.length>=2?rn(s[0]-s[1])*2*S:S;var A=m||i;if(A){var E=A.map((P,O)=>{var _=l?l.indexOf(P):P;return{index:O,coordinate:r(_)+S,value:P,offset:S}});return E.filter(P=>!or(P.coordinate))}return h&&u?u.map((P,O)=>({coordinate:r(P)+S,value:P,index:O,offset:S})):r.ticks?r.ticks(y).map(P=>({coordinate:r(P)+S,value:P,offset:S})):r.domain().map((P,O)=>({coordinate:r(P)+S,value:l?l[P]:P,index:O,offset:S}))}},QT=W([We,eu,tl,nl,rb,nu,ib,ob,xt],x6),S6=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Go(e,l),{tickCount:d}=t,h=0;return h=l==="angleAxis"&&r?.length>=2?rn(r[0]-r[1])*2*h:h,u&&s?s.map((p,m)=>({coordinate:n(p)+h,value:p,index:m,offset:h})):n.ticks?n.ticks(d).map(p=>({coordinate:n(p)+h,value:p,offset:h})):n.domain().map((p,m)=>({coordinate:n(p)+h,value:i?i[p]:p,index:m,offset:h}))}},qs=W([We,eu,nl,nu,ib,ob,xt],S6),Ys=W(jt,nl,(e,t)=>{if(!(e==null||t==null))return Pd(Pd({},e),{},{scale:t})}),A6=W([jt,tl,eb,qT],tb);W((e,t,n)=>H0(e,n),A6,(e,t)=>{if(!(e==null||t==null))return Pd(Pd({},e),{},{scale:t})});var C6=W([We,Vd,Xd],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ZT=e=>e.options.defaultTooltipEventType,JT=e=>e.options.validateTooltipEventTypes;function eD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function sb(e,t){var n=ZT(e),r=JT(e);return eD(t,n,r)}function E6(e){return we(t=>sb(t,e))}var tD=(e,t)=>{var n,r=Number(t);if(!(or(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},P6=e=>e.tooltip.settings,_i={active:!1,index:null,dataKey:void 0,coordinate:void 0},w6={itemInteraction:{click:_i,hover:_i},axisInteraction:{click:_i,hover:_i},keyboardInteraction:_i,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},nD=cr({name:"tooltip",initialState:w6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=La(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:O6,removeTooltipEntrySettings:_6,setTooltipSettingsState:T6,setActiveMouseOverItemIndex:rD,mouseLeaveItem:D6,mouseLeaveChart:aD,setActiveClickItemIndex:j6,setMouseOverAxisIndex:iD,setMouseClickAxisIndex:N6,setSyncInteraction:dv,setKeyboardInteraction:hv}=nD.actions,k6=nD.reducer;function hP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function If(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(n),!0).forEach(function(r){M6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M6(e,t,n){return(t=R6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e){var t=I6(e,"string");return typeof t=="symbol"?t:t+""}function I6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $6(e){return e.index!=null}var oD=(e,t,n,r)=>{if(t==null)return _i;var i=L6(e,t,n);if(i==null)return _i;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if($6(i)){if(s)return If(If({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return If(If({},_i),{},{coordinate:i.coordinate})},lb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!lr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},sD=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var d=l[0],h=d==null?void 0:u(d.positions,s);if(h!=null)return h;var p=i?.[Number(s)];if(p)switch(n){case"horizontal":return{x:p.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:p.coordinate}}}},lD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},ru=e=>e.options.tooltipPayloadSearcher,rl=e=>e.tooltip;function pP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(n),!0).forEach(function(r){B6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B6(e,t,n){return(t=U6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U6(e){var t=z6(e,"string");return typeof t=="symbol"?t:t+""}function z6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G6(e,t){return e??t}var cD=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:d,dataStartIndex:h,dataEndIndex:p}=n,m=[];return e.reduce((y,x)=>{var S,{dataDefinedOnItem:A,settings:E}=x,P=G6(A,u),O=Array.isArray(P)?JO(P,h,p):P,_=(S=E?.dataKey)!==null&&S!==void 0?S:r,N=E?.nameKey,j;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?j=DR(O,r,i):j=s(O,t,d,N),Array.isArray(j))j.forEach(R=>{var k=mP(mP({},E),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});y.push(QC({tooltipEntrySettings:k,dataKey:R.dataKey,payload:R.payload,value:yt(R.payload,R.dataKey),name:R.name}))});else{var D;y.push(QC({tooltipEntrySettings:E,dataKey:_,payload:j,value:yt(j,_),name:(D=yt(j,N))!==null&&D!==void 0?D:E?.name}))}return y},m)}},cb=W([sn,We,wT,I0,Wt],GT),H6=W([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),q6=W([Wt,Js],q0),au=W([H6,sn,q6],F0),Y6=W([au],e=>e.filter(uh)),F6=W([au],K0),al=W([F6,$i],V0),K6=W([Y6,$i,sn],CT),ub=W([al,sn,au],W0),V6=W([sn],Q0),X6=W([au],e=>e.filter(uh)),W6=W([K6,X6,Zc],jT),Q6=W([W6,$i,Wt],NT),Z6=W([au],_T),J6=W([al,sn,Z6,dh,Wt],kT),eU=W([RT,Wt,Js],el),tU=W([eU,Wt],$T),nU=W([IT,Wt,Js],el),rU=W([nU,Wt],BT),aU=W([LT,Wt,Js],el),iU=W([aU,Wt],UT),oU=W([tU,iU,rU],wd),sU=W([sn,V6,Q6,J6,oU,We,Wt],Z0),uD=W([sn,We,al,ub,Zc,Wt,sU],J0),lU=W([uD,sn,cb],nb),cU=W([sn,uD,lU,Wt],ab),fD=e=>{var t=Wt(e),n=Js(e),r=!1;return nu(e,t,n,r)},dD=W([sn,fD],lh),hD=W([sn,cb,cU,dD],tb),uU=W([We,ub,sn,Wt],XT),fU=W([We,ub,sn,Wt],WT),dU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:d}=t,h=Go(e,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=d==="category"&&r.bandwidth?r.bandwidth()/p:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?rn(i[0]-i[1])*2*m:m,h&&l?l.map((y,x)=>({coordinate:r(y)+m,value:y,index:x,offset:m})):r.domain().map((y,x)=>({coordinate:r(y)+m,value:s?s[y]:y,index:x,offset:m}))}}},Ka=W([We,sn,cb,hD,fD,uU,fU,Wt],dU),fb=W([ZT,JT,P6],(e,t,n)=>eD(n.shared,e,t)),pD=e=>e.tooltip.settings.trigger,db=e=>e.tooltip.settings.defaultIndex,mh=W([rl,fb,pD,db],oD),Lo=W([mh,al],lb),mD=W([Ka,Lo],tD),gD=W([mh],e=>{if(e)return e.dataKey}),yD=W([rl,fb,pD,db],lD),hU=W([qa,Ya,We,Vt,Ka,db,yD,ru],sD),pU=W([mh,hU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),mU=W([mh],e=>e.active),gU=W([yD,Lo,$i,AT,mD,ru,fb],cD);W([gU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function gP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(n),!0).forEach(function(r){yU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yU(e,t,n){return(t=vU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vU(e){var t=bU(e,"string");return typeof t=="symbol"?t:t+""}function bU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xU=()=>we(sn),SU=()=>{var e=xU(),t=we(Ka),n=we(hD);return n0(yP(yP({},e),{},{scale:n}),t)},AU=()=>we(I0),hb=(e,t)=>t,vD=(e,t,n)=>n,pb=(e,t,n,r)=>r,CU=W(Ka,e=>zd(e,t=>t.coordinate)),mb=W([rl,hb,vD,pb],oD),bD=W([mb,al],lb),EU=(e,t,n)=>{if(t!=null){var r=rl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},xD=W([rl,hb,vD,pb],lD),Od=W([qa,Ya,We,Vt,Ka,pb,xD,ru],sD),PU=W([mb,Od],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),SD=W(Ka,bD,tD),wU=W([xD,bD,$i,AT,SD,ru,hb],cD),OU=W([mb],e=>({isActive:e.active,activeIndex:e.index})),_U=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var d=ZL(e.chartX,e.chartY,t,n,u);if(d){var h=e3(d,t),p=BL(h,l,s,r,i),m=JL(t,s,p,d);return{activeIndex:String(p),activeCoordinate:m}}}};function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pv.apply(null,arguments)}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(r){TU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TU(e,t,n){return(t=DU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DU(e){var t=jU(e,"string");return typeof t=="symbol"?t:t+""}function jU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:d,chartName:h}=e,p=t,m=n,y=r;if(!u||!p||h!=="ScatterChart"&&d!=="axis")return null;var x,S;if(h==="ScatterChart")x=p,S=e$;else if(h==="BarChart")x=t$(l,p,i,s),S=m_;else if(l==="radial"){var{cx:A,cy:E,radius:P,startAngle:O,endAngle:_}=g_(p);x={cx:A,cy:E,startAngle:O,endAngle:_,innerRadius:P,outerRadius:P},S=v_}else x={points:M$(l,p,i)},S=u_;var N=typeof u=="object"&&"className"in u?u.className:void 0,j=Lf(Lf(Lf(Lf({stroke:"#ccc",pointerEvents:"none"},i),x),$t(u,!1)),{},{payload:m,payloadIndex:y,className:rt("recharts-tooltip-cursor",N)});return C.isValidElement(u)?C.cloneElement(u,j):C.createElement(S,j)}function kU(e){var t=SU(),n=i_(),r=s0(),i=AU();return C.createElement(NU,pv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var AD=C.createContext(null),MU=()=>C.useContext(AD),ey={exports:{}},bP;function RU(){return bP||(bP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function s(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,m||d,y),S=n?n+h:h;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],x]:d._events[S].push(x):(d._events[S]=x,d._eventsCount++),d}function l(d,h){--d._eventsCount===0?d._events=new r:delete d._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)t.call(p,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=n?n+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,x=m.length,S=new Array(x);y<x;y++)S[y]=m[y].fn;return S},u.prototype.listenerCount=function(h){var p=n?n+h:h,m=this._events[p];return m?m.fn?1:m.length:0},u.prototype.emit=function(h,p,m,y,x,S){var A=n?n+h:h;if(!this._events[A])return!1;var E=this._events[A],P=arguments.length,O,_;if(E.fn){switch(E.once&&this.removeListener(h,E.fn,void 0,!0),P){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,p),!0;case 3:return E.fn.call(E.context,p,m),!0;case 4:return E.fn.call(E.context,p,m,y),!0;case 5:return E.fn.call(E.context,p,m,y,x),!0;case 6:return E.fn.call(E.context,p,m,y,x,S),!0}for(_=1,O=new Array(P-1);_<P;_++)O[_-1]=arguments[_];E.fn.apply(E.context,O)}else{var N=E.length,j;for(_=0;_<N;_++)switch(E[_].once&&this.removeListener(h,E[_].fn,void 0,!0),P){case 1:E[_].fn.call(E[_].context);break;case 2:E[_].fn.call(E[_].context,p);break;case 3:E[_].fn.call(E[_].context,p,m);break;case 4:E[_].fn.call(E[_].context,p,m,y);break;default:if(!O)for(j=1,O=new Array(P-1);j<P;j++)O[j-1]=arguments[j];E[_].fn.apply(E[_].context,O)}}return!0},u.prototype.on=function(h,p,m){return s(this,h,p,m,!1)},u.prototype.once=function(h,p,m){return s(this,h,p,m,!0)},u.prototype.removeListener=function(h,p,m,y){var x=n?n+h:h;if(!this._events[x])return this;if(!p)return l(this,x),this;var S=this._events[x];if(S.fn)S.fn===p&&(!y||S.once)&&(!m||S.context===m)&&l(this,x);else{for(var A=0,E=[],P=S.length;A<P;A++)(S[A].fn!==p||y&&!S[A].once||m&&S[A].context!==m)&&E.push(S[A]);E.length?this._events[x]=E.length===1?E[0]:E:l(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&l(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(ey)),ey.exports}var IU=RU();const LU=Hr(IU);var zc=new LU,mv="recharts.syncEvent.tooltip",xP="recharts.syncEvent.brush";function CD(e,t){if(t){var n=Number.parseInt(t,10);if(!or(n))return e?.[n]}}var $U={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ED=cr({name:"options",initialState:$U,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),BU=ED.reducer,{createEventEmitter:UU}=ED.actions;function zU(e){return e.tooltip.syncInteraction}var GU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},PD=cr({name:"chartData",initialState:GU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:SP,setDataStartEndIndexes:HU,setComputedData:iK}=PD.actions,qU=PD.reducer,YU=["x","y"];function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function So(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){FU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FU(e,t,n){return(t=KU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KU(e){var t=VU(e,"string");return typeof t=="symbol"?t:t+""}function VU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XU(e,t){if(e==null)return{};var n,r,i=WU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var wD=()=>{};function QU(){var e=we(L0),t=we($0),n=Pt(),r=we(gT),i=we(Ka),s=s0(),l=a0(),u=we(d=>d.rootProps.className);C.useEffect(()=>{if(e==null)return wD;var d=(h,p,m)=>{if(t!==m&&e===h){if(r==="index"){var y;if(l&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate){var x=p.payload.coordinate,{x:S,y:A}=x,E=XU(x,YU),P=So(So(So({},E),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),O=So(So({},p),{},{payload:So(So({},p.payload),{},{coordinate:P})});n(O)}else n(p);return}if(i!=null){var _;if(typeof r=="function"){var N={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},j=r(i,N);_=i[j]}else r==="value"&&(_=i.find(ce=>String(ce.value)===p.payload.label));var{coordinate:D}=p.payload;if(_==null||p.payload.active===!1||D==null||l==null){n(dv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:R,y:k}=D,B=Math.min(R,l.x+l.width),J=Math.min(k,l.y+l.height),q={x:s==="horizontal"?_.coordinate:B,y:s==="horizontal"?J:_.coordinate},Z=dv({active:p.payload.active,coordinate:q,dataKey:p.payload.dataKey,index:String(_.index),label:p.payload.label});n(Z)}}};return zc.on(mv,d),()=>{zc.off(mv,d)}},[u,n,t,e,r,i,s,l])}function ZU(){var e=we(L0),t=we($0),n=Pt();C.useEffect(()=>{if(e==null)return wD;var r=(i,s,l)=>{t!==l&&e===i&&n(HU(s))};return zc.on(xP,r),()=>{zc.off(xP,r)}},[n,t,e])}function JU(){var e=Pt();C.useEffect(()=>{e(UU())},[e]),QU(),ZU()}function ez(e,t,n,r,i,s){var l=we(y=>EU(y,e,t)),u=we($0),d=we(L0),h=we(gT),p=we(zU),m=p?.active;C.useEffect(()=>{if(!m&&d!=null&&u!=null){var y=dv({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});zc.emit(mv,d,y,u)}},[m,n,l,i,r,u,d,h,s])}function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){tz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tz(e,t,n){return(t=nz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nz(e){var t=rz(e,"string");return typeof t=="symbol"?t:t+""}function rz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function az(e){return e.dataKey}function iz(e,t){return C.isValidElement(e)?C.cloneElement(e,t):typeof e=="function"?C.createElement(e,t):C.createElement(N3,t)}var PP=[],oz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Xs.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ty(e){var t=Tr(e,oz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:p,position:m,reverseDirection:y,useTranslate3d:x,wrapperStyle:S,cursor:A,shared:E,trigger:P,defaultIndex:O,portal:_,axisId:N}=t,j=Pt(),D=typeof O=="number"?String(O):O;C.useEffect(()=>{j(T6({shared:E,trigger:P,axisId:N,active:n,defaultIndex:D}))},[j,E,P,N,n,D]);var R=a0(),k=c_(),B=E6(E),{activeIndex:J,isActive:q}=we(z=>OU(z,B,P,D)),Z=we(z=>wU(z,B,P,D)),ce=we(z=>SD(z,B,P,D)),le=we(z=>PU(z,B,P,D)),te=Z,$=MU(),ee=n??q,[he,pe]=OO([te,ee]),I=B==="axis"?ce:void 0;ez(B,P,le,I,J,ee);var K=_??$;if(K==null)return null;var Y=te??PP;ee||(Y=PP),u&&Y.length&&(Y=AO(te.filter(z=>z.value!=null&&(z.hide!==!0||t.includeHidden)),p,az));var oe=Y.length>0,ye=C.createElement(B3,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:d,active:ee,coordinate:le,hasPayload:oe,offset:h,position:m,reverseDirection:y,useTranslate3d:x,viewBox:R,wrapperStyle:S,lastBoundingBox:he,innerRef:pe,hasPortalFromProps:!!_},iz(l,EP(EP({},t),{},{payload:Y,label:I,active:ee,coordinate:le,accessibilityLayer:k})));return C.createElement(C.Fragment,null,X2.createPortal(ye,K),ee&&C.createElement(kU,{cursor:A,tooltipEventType:B,coordinate:le,payload:te,index:J}))}var ny={},ry={},ay={},wP;function sz(){return wP||(wP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const d=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{h&&p(),A()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,m()},r)},S=()=>{y!==null&&(clearTimeout(y),y=null)},A=()=>{S(),l=void 0,u=null},E=()=>{p()},P=function(...O){if(i?.aborted)return;l=this,u=O;const _=y==null;x(),d&&_&&p()};return P.schedule=x,P.cancel=A,P.flush=E,i?.addEventListener("abort",A,{once:!0}),P}e.debounce=t})(ay)),ay}var OP;function lz(){return OP||(OP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:d}=s,h=Array(2);l&&(h[0]="leading"),u&&(h[1]="trailing");let p,m=null;const y=t.debounce(function(...A){p=r.apply(this,A),m=null},i,{edges:h}),x=function(...A){return d!=null&&(m===null&&(m=Date.now()),Date.now()-m>=d)?(p=r.apply(this,A),m=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,A),p)},S=()=>(y.flush(),p);return x.cancel=y.cancel,x.flush=S,x}e.debounce=n})(ry)),ry}var _P;function cz(){return _P||(_P=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lz();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(ny)),ny}var iy,TP;function uz(){return TP||(TP=1,iy=cz().throttle),iy}var fz=uz();const dz=Hr(fz);var wc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(r){hz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hz(e,t,n){return(t=pz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pz(e){var t=mz(e,"string");return typeof t=="symbol"?t:t+""}function mz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sy=C.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:d,children:h,debounce:p=0,id:m,className:y,onResize:x,style:S={}}=e,A=C.useRef(null),E=C.useRef();E.current=x,C.useImperativeHandle(t,()=>A.current);var[P,O]=C.useState({containerWidth:r.width,containerHeight:r.height}),_=C.useCallback((j,D)=>{O(R=>{var k=Math.round(j),B=Math.round(D);return R.containerWidth===k&&R.containerHeight===B?R:{containerWidth:k,containerHeight:B}})},[]);C.useEffect(()=>{var j=B=>{var J,{width:q,height:Z}=B[0].contentRect;_(q,Z),(J=E.current)===null||J===void 0||J.call(E,q,Z)};p>0&&(j=dz(j,p,{trailing:!0,leading:!1}));var D=new ResizeObserver(j),{width:R,height:k}=A.current.getBoundingClientRect();return _(R,k),D.observe(A.current),()=>{D.disconnect()}},[_,p]);var N=C.useMemo(()=>{var{containerWidth:j,containerHeight:D}=P;if(j<0||D<0)return null;wc(Po(i)||Po(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),wc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var R=Po(i)?j:i,k=Po(s)?D:s;return n&&n>0&&(R?k=R/n:k&&(R=k*n),d&&k>d&&(k=d)),wc(R>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,k,i,s,l,u,n),C.Children.map(h,B=>C.cloneElement(B,{width:R,height:k,style:oy({width:R,height:k},B.props.style)}))},[n,h,s,d,u,l,P,i]);return C.createElement("div",{id:m?"".concat(m):void 0,className:rt("recharts-responsive-container",y),style:oy(oy({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:d}),ref:A},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},N))}),Fs=e=>null;Fs.displayName="Cell";function gz(e,t,n){return(t=yz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bz{constructor(t){gz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function jP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(n),!0).forEach(function(r){Sz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sz(e,t,n){return(t=Az(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Az(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ez={cacheSize:2e3,enableCache:!0},OD=xz({},Ez),NP=new bz(OD.cacheSize),Pz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kP="recharts_measurement_span";function wz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var MP=(e,t)=>{try{var n=document.getElementById(kP);n||(n=document.createElement("span"),n.setAttribute("id",kP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Pz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Oc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Xs.isSsr)return{width:0,height:0};if(!OD.enableCache)return MP(t,n);var r=wz(t,n),i=NP.get(r);if(i)return i;var s=MP(t,n);return NP.set(r,s),s},RP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Oz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_z=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_D={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tz=Object.keys(_D),js="NaN";function Dz(e,t){return e*_D[t]}class Gn{static parse(t){var n,[,r,i]=(n=_z.exec(t))!==null&&n!==void 0?n:[];return new Gn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,or(t)&&(this.unit=""),n!==""&&!Oz.test(n)&&(this.num=NaN,this.unit=""),Tz.includes(n)&&(this.num=Dz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Gn(NaN,""):new Gn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Gn(NaN,""):new Gn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Gn(NaN,""):new Gn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Gn(NaN,""):new Gn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return or(this.num)}}function TD(e){if(e.includes(js))return js;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=RP.exec(t))!==null&&n!==void 0?n:[],l=Gn.parse(r??""),u=Gn.parse(s??""),d=i==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return js;t=t.replace(RP,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,m,y]=(h=IP.exec(t))!==null&&h!==void 0?h:[],x=Gn.parse(p??""),S=Gn.parse(y??""),A=m==="+"?x.add(S):x.subtract(S);if(A.isNaN())return js;t=t.replace(IP,A.toString())}return t}var LP=/\(([^()]*)\)/;function jz(e){for(var t=e,n;(n=LP.exec(t))!=null;){var[,r]=n;t=t.replace(LP,TD(r))}return t}function Nz(e){var t=e.replace(/\s+/g,"");return t=jz(t),t=TD(t),t}function kz(e){try{return Nz(e)}catch{return js}}function ly(e){var t=kz(e.slice(5,-1));return t===js?"":t}var Mz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rz=["dx","dy","angle","className","breakAll"];function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gv.apply(null,arguments)}function $P(e,t){if(e==null)return{};var n,r,i=Iz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Iz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var DD=/[ \f\n\r\t\v\u2028\u2029]+/,jD=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];an(t)||(n?i=t.toString().split(""):i=t.toString().split(DD));var s=i.map(u=>({word:u,width:Oc(u,r).width})),l=n?0:Oc(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},Lz=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:d}=e,h=Te(s),p=l,m=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce((Z,ce)=>{var{word:le,width:te}=ce,$=Z[Z.length-1];if($&&(r==null||i||$.width+te+n<Number(r)))$.words.push(le),$.width+=te+n;else{var ee={words:[le],width:te};Z.push(ee)}return Z},[])},y=m(t),x=J=>J.reduce((q,Z)=>q.width>Z.width?q:Z);if(!h||i)return y;var S=y.length>s||x(y).width>Number(r);if(!S)return y;for(var A="…",E=J=>{var q=p.slice(0,J),Z=jD({breakAll:d,style:u,children:q+A}).wordsWithComputedWidth,ce=m(Z),le=ce.length>s||x(ce).width>Number(r);return[le,ce]},P=0,O=p.length-1,_=0,N;P<=O&&_<=p.length-1;){var j=Math.floor((P+O)/2),D=j-1,[R,k]=E(D),[B]=E(j);if(!R&&!B&&(P=j+1),R&&B&&(O=j-1),!R&&B){N=k;break}_++}return N||y},BP=e=>{var t=an(e)?[]:e.toString().split(DD);return[{words:t}]},$z=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!Xs.isSsr){var u,d,h=jD({breakAll:s,children:r,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:m}=h;u=p,d=m}else return BP(r);return Lz({breakAll:s,children:r,maxLines:l,style:i},u,d,t,n)}return BP(r)},UP="#808080",gh=C.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:d="end",fill:h=UP}=e,p=$P(e,Mz),m=C.useMemo(()=>$z({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:l,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,l,p.style,p.width]),{dx:y,dy:x,angle:S,className:A,breakAll:E}=p,P=$P(p,Rz);if(!ia(n)||!ia(r)||m.length===0)return null;var O=n+(Te(y)?y:0),_=r+(Te(x)?x:0),N;switch(d){case"start":N=ly("calc(".concat(s,")"));break;case"middle":N=ly("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:N=ly("calc(".concat(m.length-1," * -").concat(i,")"));break}var j=[];if(l){var D=m[0].width,{width:R}=p;j.push("scale(".concat(Te(R)?R/D:1,")"))}return S&&j.push("rotate(".concat(S,", ").concat(O,", ").concat(_,")")),j.length&&(P.transform=j.join(" ")),C.createElement("text",gv({},$t(P,!0),{ref:t,x:O,y:_,className:rt("recharts-text",A),textAnchor:u,fill:h.includes("url")?UP:h}),m.map((k,B)=>{var J=k.words.join(E?"":" ");return C.createElement("tspan",{x:O,dy:B===0?N:i,key:"".concat(J,"-").concat(B)},J)}))});gh.displayName="Text";var Bz=["labelRef"];function Uz(e,t){if(e==null)return{};var n,r,i=zz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function zP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(n),!0).forEach(function(r){Gz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gz(e,t,n){return(t=Hz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hz(e){var t=qz(e,"string");return typeof t=="symbol"?t:t+""}function qz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ma.apply(null,arguments)}var ND=C.createContext(null),Yz=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=C.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return C.createElement(ND.Provider,{value:l},s)},kD=()=>{var e=C.useContext(ND),t=a0();return e||t},Fz=C.createContext(null),Kz=()=>{var e=C.useContext(Fz),t=we(ST);return e||t},Vz=e=>{var{value:t,formatter:n}=e,r=an(e.children)?t:e.children;return typeof n=="function"?n(r):r},gb=e=>e!=null&&typeof e=="function",Xz=(e,t)=>{var n=rn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Wz=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:d,innerRadius:h,outerRadius:p,startAngle:m,endAngle:y,clockWise:x}=i,S=(h+p)/2,A=Xz(m,y),E=A>=0?1:-1,P,O;switch(t){case"insideStart":P=m+E*s,O=x;break;case"insideEnd":P=y-E*s,O=!x;break;case"end":P=y+E*s,O=x;break;default:throw new Error("Unsupported position ".concat(t))}O=A<=0?O:!O;var _=Bt(u,d,S,P),N=Bt(u,d,S,P+(O?1:-1)*359),j="M".concat(_.x,",").concat(_.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(O?0:1,`,
    `).concat(N.x,",").concat(N.y),D=an(e.id)?Nc("recharts-radial-line-"):e.id;return C.createElement("text",Ma({},r,{dominantBaseline:"central",className:rt("recharts-radial-bar-label",l)}),C.createElement("defs",null,C.createElement("path",{id:D,d:j})),C.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Qz=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:d}=e,h=(u+d)/2;if(n==="outside"){var{x:p,y:m}=Bt(r,i,l+t,h);return{x:p,y:m,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x,y:S}=Bt(r,i,y,h);return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},MD=e=>"cx"in e&&Te(e.cx),Zz=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!MD(n)&&(s=n);var{x:l,y:u,width:d,height:h}=t,p=h>=0?1:-1,m=p*r,y=p>0?"end":"start",x=p>0?"start":"end",S=d>=0?1:-1,A=S*r,E=S>0?"end":"start",P=S>0?"start":"end";if(i==="top"){var O={x:l+d/2,y:u-p*r,textAnchor:"middle",verticalAnchor:y};return Dt(Dt({},O),s?{height:Math.max(u-s.y,0),width:d}:{})}if(i==="bottom"){var _={x:l+d/2,y:u+h+m,textAnchor:"middle",verticalAnchor:x};return Dt(Dt({},_),s?{height:Math.max(s.y+s.height-(u+h),0),width:d}:{})}if(i==="left"){var N={x:l-A,y:u+h/2,textAnchor:E,verticalAnchor:"middle"};return Dt(Dt({},N),s?{width:Math.max(N.x-s.x,0),height:h}:{})}if(i==="right"){var j={x:l+d+A,y:u+h/2,textAnchor:P,verticalAnchor:"middle"};return Dt(Dt({},j),s?{width:Math.max(s.x+s.width-j.x,0),height:h}:{})}var D=s?{width:d,height:h}:{};return i==="insideLeft"?Dt({x:l+A,y:u+h/2,textAnchor:P,verticalAnchor:"middle"},D):i==="insideRight"?Dt({x:l+d-A,y:u+h/2,textAnchor:E,verticalAnchor:"middle"},D):i==="insideTop"?Dt({x:l+d/2,y:u+m,textAnchor:"middle",verticalAnchor:x},D):i==="insideBottom"?Dt({x:l+d/2,y:u+h-m,textAnchor:"middle",verticalAnchor:y},D):i==="insideTopLeft"?Dt({x:l+A,y:u+m,textAnchor:P,verticalAnchor:x},D):i==="insideTopRight"?Dt({x:l+d-A,y:u+m,textAnchor:E,verticalAnchor:x},D):i==="insideBottomLeft"?Dt({x:l+A,y:u+h-m,textAnchor:P,verticalAnchor:y},D):i==="insideBottomRight"?Dt({x:l+d-A,y:u+h-m,textAnchor:E,verticalAnchor:y},D):i&&typeof i=="object"&&(Te(i.x)||Po(i.x))&&(Te(i.y)||Po(i.y))?Dt({x:l+On(i.x,d),y:u+On(i.y,h),textAnchor:"end",verticalAnchor:"end"},D):Dt({x:l+d/2,y:u+h/2,textAnchor:"middle",verticalAnchor:"middle"},D)},Jz={offset:5};function Oi(e){var t=Tr(e,Jz),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:d,labelRef:h}=t,p=Kz(),m=kD(),y=r==="center"?m:p??m,x=n||y;if(!x||an(i)&&an(s)&&!C.isValidElement(l)&&typeof l!="function")return null;var S=Dt(Dt({},t),{},{viewBox:x});if(C.isValidElement(l)){var{labelRef:A}=S,E=Uz(S,Bz);return C.cloneElement(l,E)}var P;if(typeof l=="function"){if(P=C.createElement(l,S),C.isValidElement(P))return P}else P=Vz(t);var O=MD(x),_=$t(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Wz(t,r,P,_,x);var N=O?Qz(x,t.offset,t.position):Zz(t,x);return C.createElement(gh,Ma({ref:h,className:rt("recharts-label",u)},_,N,{breakAll:d}),P)}Oi.displayName="Label";var e7=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?C.createElement(Oi,Ma({key:"label-implicit"},r)):ia(e)?C.createElement(Oi,Ma({key:"label-implicit",value:e},r)):C.isValidElement(e)?e.type===Oi?C.cloneElement(e,Dt({key:"label-implicit"},r)):C.createElement(Oi,Ma({key:"label-implicit",content:e},r)):gb(e)?C.createElement(Oi,Ma({key:"label-implicit",content:e},r)):e&&typeof e=="object"?C.createElement(Oi,Ma({},e,{key:"label-implicit"},r)):null};function t7(e){var{label:t}=e,n=kD();return e7(t,n)||null}var cy={},uy={},GP;function n7(){return GP||(GP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(uy)),uy}var fy={},HP;function r7(){return HP||(HP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(fy)),fy}var qP;function a7(){return qP||(qP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n7(),n=r7(),r=Vv();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(cy)),cy}var dy,YP;function i7(){return YP||(YP=1,dy=a7().last),dy}var o7=i7();const s7=Hr(o7);var l7=["valueAccessor"],c7=["dataKey","clockWise","id","textBreakAll"];function _d(){return _d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_d.apply(null,arguments)}function FP(e,t){if(e==null)return{};var n,r,i=u7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var f7=e=>Array.isArray(e.value)?s7(e.value):e.value,RD=C.createContext(void 0),d7=RD.Provider,ID=C.createContext(void 0),h7=ID.Provider;function p7(){return C.useContext(RD)}function m7(){return C.useContext(ID)}function Kf(e){var{valueAccessor:t=f7}=e,n=FP(e,l7),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=FP(n,c7),d=p7(),h=m7(),p=d||h;return!p||!p.length?null:C.createElement(qn,{className:"recharts-label-list"},p.map((m,y)=>{var x,S=an(r)?t(m,y):yt(m&&m.payload,r),A=an(s)?{}:{id:"".concat(s,"-").concat(y)};return C.createElement(Oi,_d({},$t(m,!0),u,A,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(y),index:y}))}))}Kf.displayName="LabelList";function LD(e){var{label:t}=e;return t?t===!0?C.createElement(Kf,{key:"labelList-implicit"}):C.isValidElement(t)||gb(t)?C.createElement(Kf,{key:"labelList-implicit",content:t}):typeof t=="object"?C.createElement(Kf,_d({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var $D=e=>e.graphicalItems.polarItems,g7=W([xt,Jc],q0),yb=W([$D,jt,g7],F0),y7=W([yb],K0),vb=W([y7,N0],V0),v7=W([vb,jt,yb],W0),b7=W([vb,jt,yb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=yt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:yt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),KP=()=>{},x7=W([jt,zT,KP,b7,KP,We,xt],Z0),BD=W([jt,We,vb,v7,Zc,xt,x7],J0),S7=W([BD,jt,tl],nb);W([jt,BD,S7,xt],ab);var A7={radiusAxis:{},angleAxis:{}},UD=cr({name:"polarAxis",initialState:A7,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:oK,removeRadiusAxis:sK,addAngleAxis:lK,removeAngleAxis:cK}=UD.actions,C7=UD.reducer;function VP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function XP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VP(Object(n),!0).forEach(function(r){E7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E7(e,t,n){return(t=P7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P7(e){var t=w7(e,"string");return typeof t=="symbol"?t:t+""}function w7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O7=(e,t)=>t,bb=W([$D,O7],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),_7=[],xb=(e,t,n)=>n?.length===0?_7:n,zD=W([N0,bb,xb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>XP(XP({},t.presentationProps),s.props))),i!=null)return i}}),T7=W([zD,bb,xb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=yt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:Kd(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),D7=W([zD,bb,xb,Vt],(e,t,n,r)=>{if(!(t==null||e==null))return TG({offset:r,pieSettings:t,displayedData:e,cells:n})}),hy={},WP;function j7(){return WP||(WP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(hy)),hy}var py,QP;function N7(){return QP||(QP=1,py=j7().isPlainObject),py}var k7=N7();const M7=Hr(k7);function ZP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(n),!0).forEach(function(r){R7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R7(e,t,n){return(t=I7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I7(e){var t=L7(e,"string");return typeof t=="symbol"?t:t+""}function L7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Td.apply(null,arguments)}var ew=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},$7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},B7=e=>{var t=Tr(e,$7),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:d,animationDuration:h,animationBegin:p,isUpdateAnimationActive:m}=t,y=C.useRef(),[x,S]=C.useState(-1),A=C.useRef(i),E=C.useRef(s),P=C.useRef(l),O=C.useRef(n),_=C.useRef(r),N=eh(e,"trapezoid-");if(C.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var le=y.current.getTotalLength();le&&S(le)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var j=rt("recharts-trapezoid",u);if(!m)return C.createElement("g",null,C.createElement("path",Td({},$t(t,!0),{className:j,d:ew(n,r,i,s,l)})));var D=A.current,R=E.current,k=P.current,B=O.current,J=_.current,q="0px ".concat(x===-1?1:x,"px"),Z="".concat(x,"px 0px"),ce=f_(["strokeDasharray"],h,d);return C.createElement(Jd,{animationId:N,key:N,canBegin:x>0,duration:h,easing:d,isActive:m,begin:p},le=>{var te=yn(D,i,le),$=yn(R,s,le),ee=yn(k,l,le),he=yn(B,n,le),pe=yn(J,r,le);y.current&&(A.current=te,E.current=$,P.current=ee,O.current=he,_.current=pe);var I=le>0?{transition:ce,strokeDasharray:Z}:{strokeDasharray:q};return C.createElement("path",Td({},$t(t,!0),{className:j,d:ew(he,pe,te,$,ee),ref:y,style:JP(JP({},I),t.style)}))})},U7=["option","shapeType","propTransformer","activeClassName","isActive"];function z7(e,t){if(e==null)return{};var n,r,i=G7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function G7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tw(Object(n),!0).forEach(function(r){H7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H7(e,t,n){return(t=q7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q7(e){var t=Y7(e,"string");return typeof t=="symbol"?t:t+""}function Y7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F7(e,t){return Dd(Dd({},t),e)}function K7(e,t){return e==="symbols"}function nw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return C.createElement(m_,n);case"trapezoid":return C.createElement(B7,n);case"sector":return C.createElement(v_,n);case"symbols":if(K7(t))return C.createElement(Yv,n);break;default:return null}}function V7(e){return C.isValidElement(e)?e.props:e}function GD(e){var{option:t,shapeType:n,propTransformer:r=F7,activeClassName:i="recharts-active-shape",isActive:s}=e,l=z7(e,U7),u;if(C.isValidElement(t))u=C.cloneElement(t,Dd(Dd({},l),V7(t)));else if(typeof t=="function")u=t(l);else if(M7(t)&&typeof t!="boolean"){var d=r(t,l);u=C.createElement(nw,{shapeType:n,elementProps:d})}else{var h=l;u=C.createElement(nw,{shapeType:n,elementProps:h})}return s?C.createElement(qn,{className:i},u):u}var Sb=(e,t)=>{var n=Pt();return(r,i)=>s=>{e?.(r,i,s),n(rD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Ab=e=>{var t=Pt();return(n,r)=>i=>{e?.(n,r,i),t(D6())}},Cb=(e,t)=>{var n=Pt();return(r,i)=>s=>{e?.(r,i,s),n(j6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function HD(e){var{fn:t,args:n}=e,r=Pt(),i=_r();return C.useEffect(()=>{if(!i){var s=t(n);return r(O6(s)),()=>{r(_6(s))}}},[t,n,r,i]),null}var qD=()=>{};function X7(e){var{legendPayload:t}=e,n=Pt(),r=_r();return C.useEffect(()=>r?qD:(n(s_(t)),()=>{n(l_(t))}),[n,r,t]),null}function W7(e){var{legendPayload:t}=e,n=Pt(),r=we(We);return C.useEffect(()=>r!=="centric"&&r!=="radial"?qD:(n(s_(t)),()=>{n(l_(t))}),[n,r,t]),null}var my,Q7=()=>{var[e]=C.useState(()=>Nc("uid-"));return e},Z7=(my=WN.useId)!==null&&my!==void 0?my:Q7;function J7(e,t){var n=Z7();return t||(e?"".concat(e,"-").concat(n):n)}var eG=C.createContext(void 0),YD=e=>{var{id:t,type:n,children:r}=e,i=J7("recharts-".concat(n),t);return C.createElement(eG.Provider,{value:i},r(i))},tG={cartesianItems:[],polarItems:[]},FD=cr({name:"graphicalItems",initialState:tG,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=La(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=La(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=La(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:nG,replaceCartesianGraphicalItem:rG,removeCartesianGraphicalItem:aG,addPolarGraphicalItem:iG,removePolarGraphicalItem:oG}=FD.actions,sG=FD.reducer;function lG(e){var t=Pt(),n=C.useRef(null);return C.useEffect(()=>{n.current===null?t(nG(e)):n.current!==e&&t(rG({prev:n.current,next:e})),n.current=e},[t,e]),C.useEffect(()=>()=>{n.current&&(t(aG(n.current)),n.current=null)},[t]),null}function cG(e){var t=Pt();return C.useEffect(()=>(t(iG(e)),()=>{t(oG(e))}),[t,e]),null}var uG=["onMouseEnter","onClick","onMouseLeave"],fG=["id"],dG=["id"];function Eb(e,t){if(e==null)return{};var n,r,i=hG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rw(Object(n),!0).forEach(function(r){pG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pG(e,t,n){return(t=mG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mG(e){var t=gG(e,"string");return typeof t=="symbol"?t:t+""}function gG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ki.apply(null,arguments)}function yG(e){var t=C.useMemo(()=>Uv(e.children,Fs),[e.children]),n=we(r=>T7(r,e.id,t));return n==null?null:C.createElement(W7,{legendPayload:n})}function vG(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:d,tooltipType:h}=e;return{dataDefinedOnItem:r.map(p=>p.tooltipPayload),positions:r.map(p=>p.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:Kd(u,t),hide:d,type:h,color:l,unit:""}}}var bG=(e,t)=>e>t?"start":e<t?"end":"middle",xG=(e,t,n)=>On(typeof t=="function"?t(e):t,n,n*.8),SG=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=ZO(s,l),d=i+On(e.cx,s,s/2),h=r+On(e.cy,l,l/2),p=On(e.innerRadius,u,0),m=xG(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:d,cy:h,innerRadius:p,outerRadius:m,maxRadius:y}},AG=(e,t)=>{var n=rn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function CG(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var EG=(e,t)=>{if(C.isValidElement(e))return C.cloneElement(e,t);if(typeof e=="function")return e(t);var n=rt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return C.createElement(u_,ki({},t,{type:"linear",className:n}))},PG=(e,t,n)=>{if(C.isValidElement(e))return C.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),C.isValidElement(r)))return r;var i=rt("recharts-pie-label-text",CG(e));return C.createElement(gh,ki({},t,{alignmentBaseline:"middle",className:i}),r)};function wG(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=zo(n),d=$t(i,!1),h=$t(s,!1),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((y,x)=>{var S=(y.startAngle+y.endAngle)/2,A=Bt(y.cx,y.cy,y.outerRadius+p,S),E=gt(gt(gt(gt({},u),y),{},{stroke:"none"},d),{},{index:x,textAnchor:bG(A.x,y.cx)},A),P=gt(gt(gt(gt({},u),y),{},{fill:"none",stroke:y.fill},h),{},{index:x,points:[Bt(y.cx,y.cy,y.outerRadius,S),A],key:"line"});return C.createElement(qn,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(x)},s&&EG(s,P),PG(i,E,yt(y,l)))});return C.createElement(qn,{className:"recharts-pie-labels"},m)}function OG(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?C.createElement(LD,{label:n.label}):C.createElement(wG,{sectors:t,props:n,showLabels:r})}function _G(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=we(Lo),{onMouseEnter:l,onClick:u,onMouseLeave:d}=i,h=Eb(i,uG),p=Sb(l,i.dataKey),m=Ab(d),y=Cb(u,i.dataKey);return t==null||t.length===0?null:C.createElement(C.Fragment,null,t.map((x,S)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===s,E=s?r:null,P=A?n:E,O=gt(gt({},x),{},{stroke:x.stroke,tabIndex:-1,[r_]:S,[a_]:i.dataKey});return C.createElement(qn,ki({tabIndex:-1,className:"recharts-pie-sector"},qc(h,x,S),{onMouseEnter:p(x,S),onMouseLeave:m(x,S),onClick:y(x,S),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(S)}),C.createElement(GD,ki({option:P,isActive:A,shapeType:"sector"},O)))}))}function TG(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:d,dataKey:h,nameKey:p,tooltipType:m}=n,y=Math.abs(n.minAngle),x=AG(u,d),S=Math.abs(x),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,E=r.filter(D=>yt(D,h,0)!==0).length,P=(S>=360?E:E-1)*A,O=S-E*y-P,_=r.reduce((D,R)=>{var k=yt(R,h,0);return D+(Te(k)?k:0)},0),N;if(_>0){var j;N=r.map((D,R)=>{var k=yt(D,h,0),B=yt(D,p,R),J=SG(n,s,D),q=(Te(k)?k:0)/_,Z,ce=gt(gt({},D),i&&i[R]&&i[R].props);R?Z=j.endAngle+rn(x)*A*(k!==0?1:0):Z=u;var le=Z+rn(x)*((k!==0?y:0)+q*O),te=(Z+le)/2,$=(J.innerRadius+J.outerRadius)/2,ee=[{name:B,value:k,payload:ce,dataKey:h,type:m}],he=Bt(J.cx,J.cy,$,te);return j=gt(gt(gt(gt({},n.presentationProps),{},{percent:q,cornerRadius:l,name:B,tooltipPayload:ee,midAngle:te,middleRadius:$,tooltipPosition:he},ce),J),{},{value:yt(D,h),startAngle:Z,endAngle:le,payload:ce,paddingAngle:rn(x)*A}),j})}return N}function DG(e){var{showLabels:t,sectors:n,children:r}=e,i=C.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return C.createElement(h7,{value:t?i:void 0},r)}function jG(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:d,inactiveShape:h,onAnimationStart:p,onAnimationEnd:m}=t,y=eh(t,"recharts-pie-"),x=n.current,[S,A]=C.useState(!1),E=C.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),P=C.useCallback(()=>{typeof p=="function"&&p(),A(!0)},[p]);return C.createElement(DG,{showLabels:!S,sectors:r},C.createElement(Jd,{animationId:y,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:P,onAnimationEnd:E,key:y},O=>{var _=[],N=r&&r[0],j=N?.startAngle;return r?.forEach((D,R)=>{var k=x&&x[R],B=R>0?ko(D,"paddingAngle",0):0;if(k){var J=yn(k.endAngle-k.startAngle,D.endAngle-D.startAngle,O),q=gt(gt({},D),{},{startAngle:j+B,endAngle:j+J+B});_.push(q),j=q.endAngle}else{var{endAngle:Z,startAngle:ce}=D,le=yn(0,Z-ce,O),te=gt(gt({},D),{},{startAngle:j+B,endAngle:j+le+B});_.push(te),j=te.endAngle}}),n.current=_,C.createElement(qn,null,C.createElement(_G,{sectors:_,activeShape:d,inactiveShape:h,allOtherPieProps:t}))}),C.createElement(OG,{showLabels:!S,sectors:r,props:t}),t.children)}var NG={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Xs.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function kG(e){var{id:t}=e,n=Eb(e,fG),{hide:r,className:i,rootTabIndex:s}=e,l=C.useMemo(()=>Uv(e.children,Fs),[e.children]),u=we(p=>D7(p,t,l)),d=C.useRef(null),h=rt("recharts-pie",i);return r||u==null?(d.current=null,C.createElement(qn,{tabIndex:s,className:h})):C.createElement(C.Fragment,null,C.createElement(HD,{fn:vG,args:gt(gt({},e),{},{sectors:u})}),C.createElement(qn,{tabIndex:s,className:h},C.createElement(jG,{props:gt(gt({},n),{},{sectors:u}),previousSectorsRef:d})))}function yv(e){var t=Tr(e,NG),{id:n}=t,r=Eb(t,dG),i=zo(r);return C.createElement(YD,{id:n,type:"pie"},s=>C.createElement(C.Fragment,null,C.createElement(cG,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),C.createElement(yG,ki({},r,{id:s})),C.createElement(kG,ki({},r,{id:s}))))}yv.displayName="Pie";function aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(n),!0).forEach(function(r){MG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MG(e,t,n){return(t=RG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RG(e){var t=IG(e,"string");return typeof t=="symbol"?t:t+""}function IG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LG={xAxis:{},yAxis:{},zAxis:{}},KD=cr({name:"cartesianAxis",initialState:LG,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=iw(iw({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:$G,removeXAxis:BG,addYAxis:UG,removeYAxis:zG,addZAxis:uK,removeZAxis:fK,updateYAxisWidth:GG}=KD.actions,HG=KD.reducer,qG=W([Vt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),YG=W([qG,qa,Ya],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),VD=()=>we(YG),FG="Invariant failed";function KG(e,t){throw new Error(FG)}var VG=["x","y"];function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vv.apply(null,arguments)}function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ow(Object(n),!0).forEach(function(r){XG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XG(e,t,n){return(t=WG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WG(e){var t=QG(e,"string");return typeof t=="symbol"?t:t+""}function QG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZG(e,t){if(e==null)return{};var n,r,i=JG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function JG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function e9(e,t){var{x:n,y:r}=e,i=ZG(e,VG),s="".concat(n),l=parseInt(s,10),u="".concat(r),d=parseInt(u,10),h="".concat(t.height||i.height),p=parseInt(h,10),m="".concat(t.width||i.width),y=parseInt(m,10);return bc(bc(bc(bc(bc({},t),i),l?{x:l}:{}),d?{y:d}:{}),{},{height:p,width:y,name:t.name,radius:t.radius})}function Pb(e){return C.createElement(GD,vv({shapeType:"rectangle",propTransformer:e9,activeClassName:"recharts-active-bar"},e))}var t9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Te(t))return t;var s=Te(r)||an(r);return s?t(r,i):(s||KG(),n)}},n9={},XD=cr({name:"errorBars",initialState:n9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:dK,replaceErrorBar:hK,removeErrorBar:pK}=XD.actions,r9=XD.reducer,a9=["children"];function i9(e,t){if(e==null)return{};var n,r,i=o9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var s9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},l9=C.createContext(s9);function c9(e){var{children:t}=e,n=i9(e,a9);return C.createElement(l9.Provider,{value:n},t)}function WD(e,t){var n,r,i=we(h=>Bi(h,e)),s=we(h=>Ui(h,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:tr.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:nr.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function u9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=VD(),{needClipX:s,needClipY:l,needClip:u}=WD(t,n);if(!u)return null;var{x:d,y:h,width:p,height:m}=i;return C.createElement("clipPath",{id:"clipPath-".concat(r)},C.createElement("rect",{x:s?d:d-p/2,y:l?h:h-m/2,width:s?p:p*2,height:l?m:m*2}))}var f9=["onMouseEnter","onMouseLeave","onClick"],d9=["value","background","tooltipPosition"],h9=["id"],p9=["onMouseEnter","onClick","onMouseLeave"];function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(null,arguments)}function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(n),!0).forEach(function(r){m9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m9(e,t,n){return(t=g9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g9(e){var t=y9(e,"string");return typeof t=="symbol"?t:t+""}function y9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jd(e,t){if(e==null)return{};var n,r,i=v9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var b9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Kd(n,t),payload:e}]};function x9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Kd(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function S9(e){var t=we(Lo),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=s,h=jd(s,f9),p=Sb(l,r),m=Ab(u),y=Cb(d,r);if(!i||n==null)return null;var x=$t(i,!1);return C.createElement(C.Fragment,null,n.map((S,A)=>{var{value:E,background:P,tooltipPosition:O}=S,_=jd(S,d9);if(!P)return null;var N=p(S,A),j=m(S,A),D=y(S,A),R=Nn(Nn(Nn(Nn(Nn({option:i,isActive:String(A)===t},_),{},{fill:"#eee"},P),x),qc(h,S,A)),{},{onMouseEnter:N,onMouseLeave:j,onClick:D,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return C.createElement(Pb,Mi({key:"background-bar-".concat(A)},R))}))}function A9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Nn(Nn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return C.createElement(d7,{value:t?i:void 0},n)}function C9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=we(Lo),d=we(gD),h=n&&String(s)===u&&(d==null||l===d),p=h?n:t;return C.createElement(Pb,Mi({},r,i,{isActive:h,option:p,index:s,dataKey:l}))}function E9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return C.createElement(Pb,Mi({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function P9(e){var{data:t,props:n}=e,r=zo(n),{id:i}=r,s=jd(r,h9),{shape:l,dataKey:u,activeBar:d}=n,{onMouseEnter:h,onClick:p,onMouseLeave:m}=n,y=jd(n,p9),x=Sb(h,u),S=Ab(m),A=Cb(p,u);return t?C.createElement(C.Fragment,null,t.map((E,P)=>C.createElement(qn,Mi({className:"recharts-bar-rectangle"},qc(y,E,P),{onMouseEnter:x(E,P),onMouseLeave:S(E,P),onClick:A(E,P),key:"rectangle-".concat(E?.x,"-").concat(E?.y,"-").concat(E?.value,"-").concat(P)}),d?C.createElement(C9,{shape:l,activeBar:d,baseProps:s,entry:E,index:P,dataKey:u}):C.createElement(E9,{shape:l,baseProps:s,entry:E,index:P,dataKey:u})))):null}function w9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:h,onAnimationStart:p}=t,m=n.current,y=eh(t,"recharts-bar-"),[x,S]=C.useState(!1),A=!x,E=C.useCallback(()=>{typeof h=="function"&&h(),S(!1)},[h]),P=C.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return C.createElement(A9,{showLabels:A,rects:r},C.createElement(Jd,{animationId:y,begin:l,duration:u,isActive:s,easing:d,onAnimationEnd:E,onAnimationStart:P,key:y},O=>{var _=O===1?r:r?.map((N,j)=>{var D=m&&m[j];if(D)return Nn(Nn({},N),{},{x:yn(D.x,N.x,O),y:yn(D.y,N.y,O),width:yn(D.width,N.width,O),height:yn(D.height,N.height,O)});if(i==="horizontal"){var R=yn(0,N.height,O);return Nn(Nn({},N),{},{y:N.y+N.height-R,height:R})}var k=yn(0,N.width,O);return Nn(Nn({},N),{},{width:k})});return O>0&&(n.current=_??null),_==null?null:C.createElement(qn,null,C.createElement(P9,{props:t,data:_}))}),C.createElement(LD,{label:t.label}),t.children)}function O9(e){var t=C.useRef(null);return C.createElement(w9,{previousRectanglesRef:t,props:e})}var QD=0,_9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:yt(e,t)}};class T9 extends C.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:d,id:h}=this.props;if(t||n==null)return null;var p=rt("recharts-bar",i),m=h;return C.createElement(qn,{className:p,id:h},u&&C.createElement("defs",null,C.createElement(u9,{clipPathId:m,xAxisId:s,yAxisId:l})),C.createElement(qn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},C.createElement(S9,{data:n,dataKey:r,background:d,allOtherBarProps:this.props}),C.createElement(O9,this.props)))}}var D9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Xs.isSsr,legendType:"rect",minPointSize:QD,xAxisId:0,yAxisId:0};function j9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:h,isAnimationActive:p}=e,{needClip:m}=WD(t,n),y=s0(),x=_r(),S=Uv(e.children,Fs),A=we(O=>aH(O,t,n,x,e.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var E,P=A?.[0];return P==null||P.height==null||P.width==null?E=0:E=y==="vertical"?P.height/2:P.width/2,C.createElement(c9,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:_9,errorBarOffset:E},C.createElement(T9,Mi({},e,{layout:y,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:h,isAnimationActive:p})))}function N9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:h,stackedData:p,displayedData:m,offset:y,cells:x,parentViewBox:S}=e,A=t==="horizontal"?u:l,E=p?A.scale.domain():null,P=VL({numericAxis:A});return m.map((O,_)=>{var N,j,D,R,k,B;p?N=GL(p[_],E):(N=yt(O,n),Array.isArray(N)||(N=[P,N]));var J=t9(r,QD)(N[1],_);if(t==="horizontal"){var q,[Z,ce]=[u.scale(N[0]),u.scale(N[1])];j=VC({axis:l,ticks:d,bandSize:s,offset:i.offset,entry:O,index:_}),D=(q=ce??Z)!==null&&q!==void 0?q:void 0,R=i.size;var le=Z-ce;if(k=or(le)?0:le,B={x:j,y:y.top,width:R,height:y.height},Math.abs(J)>0&&Math.abs(k)<Math.abs(J)){var te=rn(k||J)*(Math.abs(J)-Math.abs(k));D-=te,k+=te}}else{var[$,ee]=[l.scale(N[0]),l.scale(N[1])];if(j=$,D=VC({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:O,index:_}),R=ee-$,k=i.size,B={x:y.left,y:D,width:y.width,height:k},Math.abs(J)>0&&Math.abs(R)<Math.abs(J)){var he=rn(R||J)*(Math.abs(J)-Math.abs(R));R+=he}}if(j==null||D==null||R==null||k==null)return null;var pe=Nn(Nn({},O),{},{x:j,y:D,width:R,height:k,value:p?N:N[1],payload:O,background:B,tooltipPosition:{x:j+R/2,y:D+k/2},parentViewBox:S},x&&x[_]&&x[_].props);return pe}).filter(Boolean)}function ZD(e){var t=Tr(e,D9),n=_r();return C.createElement(YD,{id:t.id,type:"bar"},r=>C.createElement(C.Fragment,null,C.createElement(X7,{legendPayload:b9(t)}),C.createElement(HD,{fn:x9,args:t}),C.createElement(lG,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:KL(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),C.createElement(j9,Mi({},t,{id:r}))))}ZD.displayName="Bar";function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(r){k9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k9(e,t,n){return(t=M9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M9(e){var t=R9(e,"string");return typeof t=="symbol"?t:t+""}function R9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I9=(e,t)=>t,L9=(e,t,n)=>n,$9=(e,t,n,r)=>r,B9=(e,t,n,r,i)=>i,iu=W([Y0,B9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),U9=W([iu],e=>e?.maxBarSize),z9=(e,t,n,r,i,s)=>s,cw=(e,t,n)=>{var r=n??e;if(!an(r))return On(r,t,0)},G9=W([We,Y0,I9,L9,$9],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),H9=(e,t,n,r)=>{var i=We(e);return i==="horizontal"?fv(e,"yAxis",n,r):fv(e,"xAxis",t,r)},q9=(e,t,n)=>{var r=We(e);return r==="horizontal"?fP(e,"xAxis",t):fP(e,"yAxis",n)},Y9=(e,t,n)=>{var r={},i=e.filter(uh),s=e.filter(h=>h.stackId==null),l=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),r),u=Object.entries(l).map(h=>{var[p,m]=h,y=m.map(S=>S.dataKey),x=cw(t,n,m[0].barSize);return{stackId:p,dataKeys:y,barSize:x}}),d=s.map(h=>{var p=[h.dataKey].filter(y=>y!=null),m=cw(t,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:m}});return[...u,...d]},F9=W([G9,_8,q9],Y9),K9=(e,t,n,r,i)=>{var s,l,u=iu(e,t,n,r,i);if(u!=null){var d=We(e),h=pT(e),{maxBarSize:p}=u,m=an(p)?h:p,y,x;return d==="horizontal"?(y=Ys(e,"xAxis",t,r),x=qs(e,"xAxis",t,r)):(y=Ys(e,"yAxis",n,r),x=qs(e,"yAxis",n,r)),(s=(l=n0(y,x,!0))!==null&&l!==void 0?l:m)!==null&&s!==void 0?s:0}},JD=(e,t,n,r)=>{var i=We(e),s,l;return i==="horizontal"?(s=Ys(e,"xAxis",t,r),l=qs(e,"xAxis",t,r)):(s=Ys(e,"yAxis",n,r),l=qs(e,"yAxis",n,r)),n0(s,l)};function V9(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=On(e,n,0,!0),u,d=[];if(lr(r[0].barSize)){var h=!1,p=n/s,m=r.reduce((P,O)=>P+(O.barSize||0),0);m+=(s-1)*l,m>=n&&(m-=(s-1)*l,l=0),m>=n&&p>0&&(h=!0,p*=.9,m=s*p);var y=(n-m)/2>>0,x={offset:y-l,size:0};u=r.reduce((P,O)=>{var _,N={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:x.offset+x.size+l,size:h?p:(_=O.barSize)!==null&&_!==void 0?_:0}},j=[...P,N];return x=j[j.length-1].position,j},d)}else{var S=On(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var A=(n-2*S-(s-1)*l)/s;A>1&&(A>>=0);var E=lr(i)?Math.min(A,i):A;u=r.reduce((P,O,_)=>[...P,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:S+(A+l)*_+(A-E)/2,size:E}}],d)}return u}}var X9=(e,t,n,r,i,s,l)=>{var u=an(l)?t:l,d=V9(n,r,i!==s?i:s,e,u);return i!==s&&d!=null&&(d=d.map(h=>$f($f({},h),{},{position:$f($f({},h.position),{},{offset:h.position.offset-i/2})}))),d},W9=W([F9,pT,O8,mT,K9,JD,U9],X9),Q9=(e,t,n,r)=>Ys(e,"xAxis",t,r),Z9=(e,t,n,r)=>Ys(e,"yAxis",n,r),J9=(e,t,n,r)=>qs(e,"xAxis",t,r),eH=(e,t,n,r)=>qs(e,"yAxis",n,r),tH=W([W9,iu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),nH=(e,t)=>{var n=G0(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},rH=W([H9,iu],nH),aH=W([Vt,r0,Q9,Z9,J9,eH,tH,We,k0,JD,rH,iu,z9],(e,t,n,r,i,s,l,u,d,h,p,m,y)=>{var{chartData:x,dataStartIndex:S,dataEndIndex:A}=d;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||h==null)){var{data:E}=m,P;if(E!=null&&E.length>0?P=E:P=x?.slice(S,A+1),P!=null)return N9({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:P,offset:e,cells:y})}}),ej=e=>{var{chartData:t}=e,n=Pt(),r=_r();return C.useEffect(()=>r?()=>{}:(n(SP(t)),()=>{n(SP(void 0))}),[t,n,r]),null},uw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},tj=cr({name:"brush",initialState:uw,reducers:{setBrushSettings(e,t){return t.payload==null?uw:t.payload}}}),{setBrushSettings:mK}=tj.actions,iH=tj.reducer;function oH(e,t,n){return(t=sH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sH(e){var t=lH(e,"string");return typeof t=="symbol"?t:t+""}function lH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wb{static create(t){return new wb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}oH(wb,"EPS",1e-4);function cH(e){return(e%180+180)%180}var uH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=cH(i),l=s*Math.PI/180,u=Math.atan(r/n),d=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(d)},fH={dots:[],areas:[],lines:[]},nj=cr({name:"referenceElements",initialState:fH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=La(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=La(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=La(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:gK,removeDot:yK,addArea:vK,removeArea:bK,addLine:xK,removeLine:SK}=nj.actions,dH=nj.reducer,hH=C.createContext(void 0),pH=e=>{var{children:t}=e,[n]=C.useState("".concat(Nc("recharts"),"-clip")),r=VD();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return C.createElement(hH.Provider,{value:n},C.createElement("defs",null,C.createElement("clipPath",{id:n},C.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function gy(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function rj(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function mH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return uH(r,n)}function gH(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Nd(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function yH(e,t){return rj(e,t+1)}function vH(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,d=0,h=1,p=l,m=function(){var S=r?.[d];if(S===void 0)return{v:rj(r,h)};var A=d,E,P=()=>(E===void 0&&(E=n(S,A)),E),O=S.coordinate,_=d===0||Nd(e,O,P,p,u);_||(d=0,p=l,h+=1),_&&(p=O+e*(P()/2+i),d+=h)},y;h<=s.length;)if(y=m(),y)return y.v;return[]}function fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(n),!0).forEach(function(r){bH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bH(e,t,n){return(t=xH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xH(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AH(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:d}=t,h=function(y){var x=s[y],S,A=()=>(S===void 0&&(S=n(x,y)),S);if(y===l-1){var E=e*(x.coordinate+e*A()/2-d);s[y]=x=En(En({},x),{},{tickCoord:E>0?x.coordinate-E*e:x.coordinate})}else s[y]=x=En(En({},x),{},{tickCoord:x.coordinate});var P=Nd(e,x.tickCoord,A,u,d);P&&(d=x.tickCoord-e*(A()/2+i),s[y]=En(En({},x),{},{isShow:!0}))},p=l-1;p>=0;p--)h(p);return s}function CH(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:d,end:h}=t;if(s){var p=r[u-1],m=n(p,u-1),y=e*(p.coordinate+e*m/2-h);l[u-1]=p=En(En({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate});var x=Nd(e,p.tickCoord,()=>m,d,h);x&&(h=p.tickCoord-e*(m/2+i),l[u-1]=En(En({},p),{},{isShow:!0}))}for(var S=s?u-1:u,A=function(O){var _=l[O],N,j=()=>(N===void 0&&(N=n(_,O)),N);if(O===0){var D=e*(_.coordinate-e*j()/2-d);l[O]=_=En(En({},_),{},{tickCoord:D<0?_.coordinate-D*e:_.coordinate})}else l[O]=_=En(En({},_),{},{tickCoord:_.coordinate});var R=Nd(e,_.tickCoord,j,d,h);R&&(d=_.tickCoord+e*(j()/2+i),l[O]=En(En({},_),{},{isShow:!0}))},E=0;E<S;E++)A(E);return l}function Ob(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:d,tickFormatter:h,unit:p,angle:m}=e;if(!i||!i.length||!r)return[];if(Te(d)||Xs.isSsr){var y;return(y=yH(i,Te(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],S=u==="top"||u==="bottom"?"width":"height",A=p&&S==="width"?Oc(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},E=(_,N)=>{var j=typeof h=="function"?h(_.value,N):_.value;return S==="width"?mH(Oc(j,{fontSize:t,letterSpacing:n}),A,m):Oc(j,{fontSize:t,letterSpacing:n})[S]},P=i.length>=2?rn(i[1].coordinate-i[0].coordinate):1,O=gH(s,P,S);return d==="equidistantPreserveStart"?vH(P,O,E,i,l):(d==="preserveStart"||d==="preserveStartEnd"?x=CH(P,O,E,i,l,d==="preserveStartEnd"):x=AH(P,O,E,i,l),x.filter(_=>_.isShow))}var EH=["viewBox"],PH=["viewBox"];function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ns.apply(null,arguments)}function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(r){_b(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hw(e,t){if(e==null)return{};var n,r,i=wH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _b(e,t,n){return(t=OH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zi extends C.Component{constructor(t){super(t),this.tickRefs=C.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=hw(t,EH),s=this.props,{viewBox:l}=s,u=hw(s,PH);return!gy(r,l)||!gy(i,u)||!gy(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:d,tickMargin:h}=this.props,p,m,y,x,S,A,E=d?-1:1,P=t.tickSize||u,O=Te(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":p=m=t.coordinate,x=r+ +!d*s,y=x-E*P,A=y-E*h,S=O;break;case"left":y=x=t.coordinate,m=n+ +!d*i,p=m-E*P,S=p-E*h,A=O;break;case"right":y=x=t.coordinate,m=n+ +d*i,p=m+E*P,S=p+E*h,A=O;break;default:p=m=t.coordinate,x=r+ +d*s,y=x+E*P,A=y+E*h,S=O;break}return{line:{x1:p,y1:y,x2:m,y2:x},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,d=Ft(Ft(Ft({},$t(this.props,!1)),$t(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!l||s==="bottom"&&l);d=Ft(Ft({},d),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var p=+(s==="left"&&!l||s==="right"&&l);d=Ft(Ft({},d),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+i})}return C.createElement("line",Ns({},d,{className:rt("recharts-cartesian-axis-line",ko(u,"className"))}))}static renderTickItem(t,n,r){var i,s=rt(n.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(t))i=C.cloneElement(t,Ft(Ft({},n),{},{className:s}));else if(typeof t=="function")i=t(Ft(Ft({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=rt(l,t.className)),i=C.createElement(gh,Ns({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:d,padding:h,tickTextProps:p}=this.props,m=Ob(Ft(Ft({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),S=zo(this.props),A=$t(l,!1),E=Ft(Ft({},S),{},{fill:"none"},$t(i,!1)),P=m.map((O,_)=>{var{line:N,tick:j}=this.getTickLineCoord(O),D=Ft(Ft(Ft(Ft({textAnchor:y,verticalAnchor:x},S),{},{stroke:"none",fill:s},A),j),{},{index:_,payload:O,visibleTicksCount:m.length,tickFormatter:u,padding:h},p);return C.createElement(qn,Ns({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},qc(this.props,O,_)),i&&C.createElement("line",Ns({},E,N,{className:rt("recharts-cartesian-axis-tick-line",ko(i,"className"))})),l&&zi.renderTickItem(l,D,"".concat(typeof u=="function"?u(O.value,_):O.value).concat(d||"")))});return P.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:C.createElement(qn,{className:rt("recharts-cartesian-axis",i),ref:u=>{if(u){var d=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var h=d[0];if(h){var p=window.getComputedStyle(h).fontSize,m=window.getComputedStyle(h).letterSpacing;(p!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(h).fontSize,letterSpacing:window.getComputedStyle(h).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),C.createElement(Yz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},C.createElement(t7,{label:this.props.label}),this.props.children))}}_b(zi,"displayName","CartesianAxis");_b(zi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var TH=["x1","y1","x2","y2","key"],DH=["offset"],jH=["xAxisId","yAxisId"],NH=["xAxisId","yAxisId"];function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){kH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kH(e,t,n){return(t=MH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MH(e){var t=RH(e,"string");return typeof t=="symbol"?t:t+""}function RH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _o(){return _o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_o.apply(null,arguments)}function kd(e,t){if(e==null)return{};var n,r,i=IH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return C.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function aj(e,t){var n;if(C.isValidElement(e))n=C.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,d=kd(t,TH),h=zo(d),{offset:p}=h,m=kd(h,DH);n=C.createElement("line",_o({},m,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function $H(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=kd(e,jH),d=i.map((h,p)=>{var m=wn(wn({},u),{},{x1:t,y1:h,x2:t+n,y2:h,key:"line-".concat(p),index:p});return aj(r,m)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function BH(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=kd(e,NH),d=i.map((h,p)=>{var m=wn(wn({},u),{},{x1:h,y1:t,x2:h,y2:t+n,key:"line-".concat(p),index:p});return aj(r,m)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function UH(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var h=u.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==h[0]&&h.unshift(0);var p=h.map((m,y)=>{var x=!h[y+1],S=x?i+l-m:h[y+1]-m;if(S<=0)return null;var A=y%t.length;return C.createElement("rect",{key:"react-".concat(y),y:m,x:r,height:S,width:s,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function zH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var h=d.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==h[0]&&h.unshift(0);var p=h.map((m,y)=>{var x=!h[y+1],S=x?i+l-m:h[y+1]-m;if(S<=0)return null;var A=y%n.length;return C.createElement("rect",{key:"react-".concat(y),x:m,y:s,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var GH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return e_(Ob(wn(wn(wn({},zi.defaultProps),n),{},{ticks:t_(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},HH=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return e_(Ob(wn(wn(wn({},zi.defaultProps),n),{},{ticks:t_(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},qH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function ij(e){var t=i0(),n=o0(),r=i_(),i=wn(wn({},Tr(e,qH)),{},{x:Te(e.x)?e.x:r.left,y:Te(e.y)?e.y:r.top,width:Te(e.width)?e.width:r.width,height:Te(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:d,width:h,height:p,syncWithTicks:m,horizontalValues:y,verticalValues:x}=i,S=_r(),A=we(B=>dP(B,"xAxis",s,S)),E=we(B=>dP(B,"yAxis",l,S));if(!Te(h)||h<=0||!Te(p)||p<=0||!Te(u)||u!==+u||!Te(d)||d!==+d)return null;var P=i.verticalCoordinatesGenerator||GH,O=i.horizontalCoordinatesGenerator||HH,{horizontalPoints:_,verticalPoints:N}=i;if((!_||!_.length)&&typeof O=="function"){var j=y&&y.length,D=O({yAxis:E?wn(wn({},E),{},{ticks:j?y:E.ticks}):void 0,width:t,height:n,offset:r},j?!0:m);wc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(_=D)}if((!N||!N.length)&&typeof P=="function"){var R=x&&x.length,k=P({xAxis:A?wn(wn({},A),{},{ticks:R?x:A.ticks}):void 0,width:t,height:n,offset:r},R?!0:m);wc(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(N=k)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(LH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),C.createElement(UH,_o({},i,{horizontalPoints:_})),C.createElement(zH,_o({},i,{verticalPoints:N})),C.createElement($H,_o({},i,{offset:r,horizontalPoints:_,xAxis:A,yAxis:E})),C.createElement(BH,_o({},i,{offset:r,verticalPoints:N,xAxis:A,yAxis:E})))}ij.displayName="CartesianGrid";var YH=["children"],FH=["dangerouslySetInnerHTML","ticks"],KH=["id"];function oj(e,t,n){return(t=VH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VH(e){var t=XH(e,"string");return typeof t=="symbol"?t:t+""}function XH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bv.apply(null,arguments)}function xv(e,t){if(e==null)return{};var n,r,i=WH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function QH(e){var t=Pt(),n=C.useMemo(()=>{var{children:r}=e,i=xv(e,YH);return i},[e]);return C.useEffect(()=>(t($G(n)),()=>{t(BG(n))}),[n,t]),e.children}var ZH=e=>{var{xAxisId:t,className:n}=e,r=we(r0),i=_r(),s="xAxis",l=we(E=>nl(E,s,t,i)),u=we(E=>QT(E,s,t,i)),d=we(E=>KT(E,t)),h=we(E=>v6(E,t)),p=we(E=>ET(E,t));if(d==null||h==null||p==null)return null;var{dangerouslySetInnerHTML:m,ticks:y}=e,x=xv(e,FH),{id:S}=p,A=xv(p,KH);return C.createElement(zi,bv({},x,A,{scale:l,x:h.x,y:h.y,width:d.width,height:d.height,className:rt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},JH=e=>{var t,n,r,i,s;return C.createElement(QH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},C.createElement(ZH,e))};class Tb extends C.Component{render(){return C.createElement(JH,this.props)}}oj(Tb,"displayName","XAxis");oj(Tb,"defaultProps",{allowDataOverflow:tr.allowDataOverflow,allowDecimals:tr.allowDecimals,allowDuplicatedCategory:tr.allowDuplicatedCategory,height:tr.height,hide:!1,mirror:tr.mirror,orientation:tr.orientation,padding:tr.padding,reversed:tr.reversed,scale:tr.scale,tickCount:tr.tickCount,type:tr.type,xAxisId:0});var eq=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(p=>{if(p){var m=p.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,d=i+s,h=l+d+u+(n?r:0);return Math.round(h)}return 0},tq=["dangerouslySetInnerHTML","ticks"],nq=["id"];function sj(e,t,n){return(t=rq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rq(e){var t=aq(e,"string");return typeof t=="symbol"?t:t+""}function aq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sv.apply(null,arguments)}function mw(e,t){if(e==null)return{};var n,r,i=iq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function oq(e){var t=Pt();return C.useEffect(()=>(t(UG(e)),()=>{t(zG(e))}),[e,t]),null}var sq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=C.useRef(null),u=C.useRef(null),d=we(r0),h=_r(),p=Pt(),m="yAxis",y=we(D=>nl(D,m,n,h)),x=we(D=>VT(D,n)),S=we(D=>b6(D,n)),A=we(D=>QT(D,m,n,h)),E=we(D=>PT(D,n));if(C.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!x||gb(s)||C.isValidElement(s)||E==null)){var R=l.current,k=R==null||(D=R.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:B,tickMargin:J}=R.props,q=eq({ticks:k,label:u.current,labelGapWithTick:5,tickSize:B,tickMargin:J});Math.round(x.width)!==Math.round(q)&&p(GG({id:n,width:q}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,p,s,n,i]),x==null||S==null||E==null)return null;var{dangerouslySetInnerHTML:P,ticks:O}=e,_=mw(e,tq),{id:N}=E,j=mw(E,nq);return C.createElement(zi,Sv({},_,j,{ref:l,labelRef:u,scale:y,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:x.width,height:x.height,className:rt("recharts-".concat(m," ").concat(m),r),viewBox:d,ticks:A}))},lq=e=>{var t,n,r,i,s;return C.createElement(C.Fragment,null,C.createElement(oq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),C.createElement(sq,e))},cq={allowDataOverflow:nr.allowDataOverflow,allowDecimals:nr.allowDecimals,allowDuplicatedCategory:nr.allowDuplicatedCategory,hide:!1,mirror:nr.mirror,orientation:nr.orientation,padding:nr.padding,reversed:nr.reversed,scale:nr.scale,tickCount:nr.tickCount,type:nr.type,width:nr.width,yAxisId:0};class Db extends C.Component{render(){return C.createElement(lq,this.props)}}sj(Db,"displayName","YAxis");sj(Db,"defaultProps",cq);var yy={exports:{}},vy={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw;function uq(){if(gw)return vy;gw=1;var e=Ks();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return vy.useSyncExternalStoreWithSelector=function(d,h,p,m,y){var x=i(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function E(j){if(!P){if(P=!0,O=j,j=m(j),y!==void 0&&S.hasValue){var D=S.value;if(y(D,j))return _=D}return _=j}if(D=_,n(O,j))return D;var R=m(j);return y!==void 0&&y(D,R)?(O=j,D):(O=j,_=R)}var P=!1,O,_,N=p===void 0?null:p;return[function(){return E(h())},N===null?void 0:function(){return E(N())}]},[h,p,m,y]);var A=r(d,x[0],x[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},vy}var yw;function fq(){return yw||(yw=1,yy.exports=uq()),yy.exports}fq();function dq(e){e()}function hq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var vw={notify(){},get:()=>[]};function pq(e,t){let n,r=vw,i=0,s=!1;function l(A){p();const E=r.subscribe(A);let P=!1;return()=>{P||(P=!0,E(),m())}}function u(){r.notify()}function d(){S.onStateChange&&S.onStateChange()}function h(){return s}function p(){i++,n||(n=e.subscribe(d),r=hq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=vw)}function y(){s||(s=!0,p())}function x(){s&&(s=!1,m())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:h,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return S}var mq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gq=mq(),yq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",vq=yq(),bq=()=>gq||vq?C.useLayoutEffect:C.useEffect,xq=bq(),Sq=Symbol.for("react-redux-context"),Aq=typeof globalThis<"u"?globalThis:{};function Cq(){if(!C.createContext)return{};const e=Aq[Sq]??=new Map;let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var Eq=Cq();function Pq(e){const{children:t,context:n,serverState:r,store:i}=e,s=C.useMemo(()=>{const d=pq(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=C.useMemo(()=>i.getState(),[i]);xq(()=>{const{subscription:d}=s;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[s,l]);const u=n||Eq;return C.createElement(u.Provider,{value:s},t)}var wq=Pq,Oq=(e,t)=>t,jb=W([Oq,We,ST,Wt,dD,Ka,CU,Vt],_U),Nb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},lj=wr("mouseClick"),cj=Fc();cj.startListening({actionCreator:lj,effect:(e,t)=>{var n=e.payload,r=jb(t.getState(),Nb(n));r?.activeIndex!=null&&t.dispatch(N6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Av=wr("mouseMove"),uj=Fc();uj.startListening({actionCreator:Av,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=sb(r,r.tooltip.settings.shared),s=jb(r,Nb(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(iD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(aD()))}});function _q(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var bw={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},fj=cr({name:"rootProps",initialState:bw,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:bw.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Tq=fj.reducer,{updateOptions:Dq}=fj.actions,dj=cr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:jq}=dj.actions,Nq=dj.reducer,hj=wr("keyDown"),pj=wr("focus"),kb=Fc();kb.startListening({actionCreator:hj,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(lb(i,al(n))),u=Ka(n);if(s==="Enter"){var d=Od(n,"axis","hover",String(i.index));t.dispatch(hv({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=C6(n),p=h==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,y=l+m*p;if(!(u==null||y>=u.length||y<0)){var x=Od(n,"axis","hover",String(y));t.dispatch(hv({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});kb.startListening({actionCreator:pj,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=Od(n,"axis","hover",String(s));t.dispatch(hv({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Sr=wr("externalEvent"),mj=Fc();mj.startListening({actionCreator:Sr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:pU(n),activeDataKey:gD(n),activeIndex:Lo(n),activeLabel:mD(n),activeTooltipIndex:Lo(n),isTooltipActive:mU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var kq=W([rl],e=>e.tooltipItemPayloads),Mq=W([kq,ru,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),gj=wr("touchMove"),yj=Fc();yj.startListening({actionCreator:gj,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=sb(r,r.tooltip.settings.shared);if(i==="axis"){var s=jb(r,Nb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(iD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(r_),p=(l=d.getAttribute(a_))!==null&&l!==void 0?l:void 0,m=Mq(t.getState(),h,p);t.dispatch(rD({activeDataKey:p,activeIndex:h,activeCoordinate:m}))}}});var Rq=TO({brush:iH,cartesianAxis:HG,chartData:qU,errorBars:r9,graphicalItems:sG,layout:wL,legend:g3,options:BU,polarAxis:C7,polarOptions:Nq,referenceElements:dH,rootProps:Tq,tooltip:k6}),Iq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Q4({reducer:Rq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([cj.middleware,uj.middleware,kb.middleware,mj.middleware,yj.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:_q},name:"recharts-".concat(n)}})};function vj(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=_r(),s=C.useRef(null);if(i)return n;s.current==null&&(s.current=Iq(t,r));var l=Wv;return C.createElement(wq,{context:l,store:s.current},n)}function bj(e){var{layout:t,width:n,height:r,margin:i}=e,s=Pt(),l=_r();return C.useEffect(()=>{l||(s(CL(t)),s(EL({width:n,height:r})),s(AL(i)))},[s,l,t,n,r,i]),null}function xj(e){var t=Pt();return C.useEffect(()=>{t(Dq(e))},[t,e]),null}var Lq=["children"];function $q(e,t){if(e==null)return{};var n,r,i=Bq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Md.apply(null,arguments)}var Uq={width:"100%",height:"100%"},zq=C.forwardRef((e,t)=>{var n=i0(),r=o0(),i=c_();if(!Bs(n)||!Bs(r))return null;var{children:s,otherAttributes:l,title:u,desc:d}=e,h,p;return typeof l.tabIndex=="number"?h=l.tabIndex:h=i?0:void 0,typeof l.role=="string"?p=l.role:p=i?"application":void 0,C.createElement(zv,Md({},l,{title:u,desc:d,role:p,tabIndex:h,width:n,height:r,style:Uq,ref:t}),s)}),Gq=e=>{var{children:t}=e,n=we(Qd);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return C.createElement(zv,{width:r,height:i,x:l,y:s},t)},xw=C.forwardRef((e,t)=>{var{children:n}=e,r=$q(e,Lq),i=_r();return i?C.createElement(Gq,null,n):C.createElement(zq,Md({ref:t},r),n)});function Hq(){var e=Pt(),[t,n]=C.useState(null),r=we(t3);return C.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;lr(s)&&s!==r&&e(PL(s))}},[t,e,r]),n}function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(r){Yq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yq(e,t,n){return(t=Fq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fq(e){var t=Kq(e,"string");return typeof t=="symbol"?t:t+""}function Kq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vq=C.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:h,onMouseLeave:p,onMouseMove:m,onMouseUp:y,onTouchEnd:x,onTouchMove:S,onTouchStart:A,style:E,width:P}=e,O=Pt(),[_,N]=C.useState(null),[j,D]=C.useState(null);JU();var R=Hq(),k=C.useCallback(Y=>{R(Y),typeof t=="function"&&t(Y),N(Y),D(Y)},[R,t,N,D]),B=C.useCallback(Y=>{O(lj(Y)),O(Sr({handler:s,reactEvent:Y}))},[O,s]),J=C.useCallback(Y=>{O(Av(Y)),O(Sr({handler:h,reactEvent:Y}))},[O,h]),q=C.useCallback(Y=>{O(aD()),O(Sr({handler:p,reactEvent:Y}))},[O,p]),Z=C.useCallback(Y=>{O(Av(Y)),O(Sr({handler:m,reactEvent:Y}))},[O,m]),ce=C.useCallback(()=>{O(pj())},[O]),le=C.useCallback(Y=>{O(hj(Y.key))},[O]),te=C.useCallback(Y=>{O(Sr({handler:l,reactEvent:Y}))},[O,l]),$=C.useCallback(Y=>{O(Sr({handler:u,reactEvent:Y}))},[O,u]),ee=C.useCallback(Y=>{O(Sr({handler:d,reactEvent:Y}))},[O,d]),he=C.useCallback(Y=>{O(Sr({handler:y,reactEvent:Y}))},[O,y]),pe=C.useCallback(Y=>{O(Sr({handler:A,reactEvent:Y}))},[O,A]),I=C.useCallback(Y=>{O(gj(Y)),O(Sr({handler:S,reactEvent:Y}))},[O,S]),K=C.useCallback(Y=>{O(Sr({handler:x,reactEvent:Y}))},[O,x]);return C.createElement(AD.Provider,{value:_},C.createElement(W2.Provider,{value:j},C.createElement("div",{className:rt("recharts-wrapper",r),style:qq({position:"relative",cursor:"default",width:P,height:i},E),onClick:B,onContextMenu:te,onDoubleClick:$,onFocus:ce,onKeyDown:le,onMouseDown:ee,onMouseEnter:J,onMouseLeave:q,onMouseMove:Z,onMouseUp:he,onTouchEnd:K,onTouchMove:I,onTouchStart:pe,ref:k},n)))}),Xq=["children","className","width","height","style","compact","title","desc"];function Wq(e,t){if(e==null)return{};var n,r,i=Qq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Sj=C.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:d,desc:h}=e,p=Wq(e,Xq),m=zo(p);return u?C.createElement(xw,{otherAttributes:m,title:d,desc:h},n):C.createElement(Vq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},C.createElement(xw,{otherAttributes:m,title:d,desc:h,ref:t},C.createElement(pH,null,n)))}),Zq=["width","height"];function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cv.apply(null,arguments)}function Jq(e,t){if(e==null)return{};var n,r,i=eY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tY={top:5,right:5,bottom:5,left:5},nY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tY,reverseStackOrder:!1,syncMethod:"index"},rY=C.forwardRef(function(t,n){var r,i=Tr(t.categoricalChartProps,nY),{width:s,height:l}=i,u=Jq(i,Zq);if(!Bs(s)||!Bs(l))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,categoricalChartProps:y}=t,x={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,eventEmitter:void 0};return C.createElement(vj,{preloadedState:{options:x},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:d},C.createElement(ej,{chartData:y.data}),C.createElement(bj,{width:s,height:l,layout:i.layout,margin:i.margin}),C.createElement(xj,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(Sj,Cv({},u,{width:s,height:l,ref:n})))}),aY=["axis","item"],iY=C.forwardRef((e,t)=>C.createElement(rY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aY,tooltipPayloadSearcher:CD,categoricalChartProps:e,ref:t}));function oY(e){var t=Pt();return C.useEffect(()=>{t(jq(e))},[t,e]),null}var sY=["width","height","layout"];function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ev.apply(null,arguments)}function lY(e,t){if(e==null)return{};var n,r,i=cY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uY={top:5,right:5,bottom:5,left:5},fY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},dY=C.forwardRef(function(t,n){var r,i=Tr(t.categoricalChartProps,fY),{width:s,height:l,layout:u}=i,d=lY(i,sY);if(!Bs(s)||!Bs(l))return null;var{chartName:h,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:y}=t,x={chartName:h,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:y,eventEmitter:void 0};return C.createElement(vj,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:h},C.createElement(ej,{chartData:i.data}),C.createElement(bj,{width:s,height:l,layout:u,margin:i.margin}),C.createElement(xj,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(oY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),C.createElement(Sj,Ev({width:s,height:l},d,{ref:n})))}),hY=["item"],pY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Aw=C.forwardRef((e,t)=>{var n=Tr(e,pY);return C.createElement(dY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:hY,tooltipPayloadSearcher:CD,categoricalChartProps:n,ref:t})});const mY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80 transform scale-150",onClick:n=>n.stopPropagation(),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(_c,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})}):null,gY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:s})=>{const[l,u]=C.useState(null),[d,h]=C.useState(!1),[p,m]=C.useState(!1),[y,x]=C.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,A]=C.useState(!1),E=C.useRef(null),[P,O]=C.useState({key:"name",direction:"ascending"}),[_,N]=C.useState("cost"),[j,D]=C.useState(!0),R=C.useMemo(()=>{const z=re=>re?re.replace(/_/g," ").toLowerCase().split(" ").map(me=>me.charAt(0).toUpperCase()+me.slice(1)).join(" "):"";return t.map(re=>{const be=[],me=re.effect;if(me.type==="REPEATING_EFFECT")be.push(z(me.type)),me.effects&&Array.isArray(me.effects)&&me.effects.forEach(fe=>{fe.type&&be.push(z(fe.type))});else if(me.type==="MODIFY_DRONE_BASE"&&me.mod){const fe=me.mod.stat,ve=me.mod.value;fe==="attack"?be.push(ve>0?"Attack Buff":"Attack Debuff"):fe==="speed"?be.push(ve>0?"Speed Buff":"Speed Debuff"):fe==="shields"?be.push(ve>0?"Shield Buff":"Shield Debuff"):fe==="cost"?be.push(ve<0?"Cost Reduction":"Cost Increase"):fe==="limit"?be.push(ve>0?"Limit Buff":"Limit Debuff"):fe==="ability"?(be.push("Ability Grant"),me.mod.abilityToAdd&&me.mod.abilityToAdd.name&&be.push(me.mod.abilityToAdd.name)):be.push(z(`${fe} Modification`))}else if(me.type==="MODIFY_STAT"&&me.mod){const fe=me.mod.stat,ve=me.mod.value;me.mod.type,fe==="attack"?be.push(ve>0?"Attack Buff":"Attack Debuff"):fe==="speed"?be.push(ve>0?"Speed Buff":"Speed Debuff"):fe==="shields"?be.push(ve>0?"Shield Buff":"Shield Debuff"):be.push(ve>0?`${fe} Buff`:`${fe} Debuff`)}else me.type==="SEARCH_AND_DRAW"?(be.push(z(me.type)),be.push("Draw")):me.type&&be.push(z(me.type));me.goAgain&&be.push("Go Again"),me.damageType==="PIERCING"&&be.push("Piercing"),me.mod?.type&&be.push(z(me.mod.type));const ae=(()=>{if(re.targeting){const fe=z(re.targeting.type);if(re.targeting.affinity){const ve=re.targeting.affinity.charAt(0)+re.targeting.affinity.slice(1).toLowerCase();return`${fe} (${ve})`}return fe}else if(me.type==="MULTI_MOVE"&&me.source){const fe=me.source.location||"Any",ve=me.source.affinity||"Any",de=ve.charAt(0).toUpperCase()+ve.slice(1).toLowerCase();return`${z(fe)} (${de})`}else if(me.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...re,keywords:be,targetingText:ae}})},[t]),k=C.useMemo(()=>{const z=new Set,re=new Set,be=new Set;R.forEach(ae=>{z.add(ae.cost),re.add(ae.targetingText),ae.keywords.forEach(fe=>be.add(fe))});const me=Array.from(z);return{minCost:Math.min(...me),maxCost:Math.max(...me),targets:["all",...Array.from(re).sort()],abilities:Array.from(be).sort()}},[R]);C.useEffect(()=>{k.minCost!==1/0&&k.maxCost!==-1/0&&x(z=>({...z,cost:{min:k.minCost,max:k.maxCost}}))},[k.minCost,k.maxCost]);const{cardCount:B,deckListForDisplay:J,baseCardCounts:q}=C.useMemo(()=>{const z={};let re=0;Object.entries(n).forEach(([me,ae])=>{if(ae>0){re+=ae;const fe=R.find(ve=>ve.id===me);if(fe){const ve=fe.baseCardId;z[ve]=(z[ve]||0)+ae}}});const be=Object.entries(n).filter(([,me])=>me>0).map(([me,ae])=>({...R.find(ve=>ve.id===me),quantity:ae})).sort((me,ae)=>me.name.localeCompare(ae.name));return{cardCount:re,deckListForDisplay:be,baseCardCounts:z}},[n,R]),Z=B>=40,ce=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],le=C.useMemo(()=>{const z={};J.forEach(ae=>{const fe=ae.cost||0;z[fe]=(z[fe]||0)+ae.quantity});const re=Object.entries(z).map(([ae,fe])=>({name:`${ae}`,count:fe})).sort((ae,fe)=>parseInt(ae.name)-parseInt(fe.name)),be={};J.forEach(ae=>{ae.keywords&&ae.keywords.forEach(fe=>{be[fe]=(be[fe]||0)+ae.quantity})});const me=Object.entries(be).map(([ae,fe])=>({name:ae,value:fe})).sort((ae,fe)=>fe.value-ae.value);return{barChartData:re,pieChartData:me}},[J]),te=C.useMemo(()=>{let z=[...R].filter(re=>re.cost<y.cost.min||re.cost>y.cost.max||y.target!=="all"&&re.targetingText!==y.target||y.type!=="all"&&re.type!==y.type?!1:y.abilities.length>0?y.abilities.every(be=>re.keywords.includes(be)):!(y.hideEnhanced&&re.id.endsWith("_ENHANCED")));return P.key!==null&&z.sort((re,be)=>{const me=re[P.key],ae=be[P.key];if(me==null&&ae==null)return 0;if(me==null)return 1;if(ae==null)return-1;const fe=String(me).toLowerCase(),ve=String(ae).toLowerCase();return fe<ve?P.direction==="ascending"?-1:1:fe>ve?P.direction==="ascending"?1:-1:re.id.localeCompare(be.id)}),z},[R,y,P]),$=z=>{let re="ascending";P.key===z&&P.direction==="ascending"&&(re="descending"),O({key:z,direction:re})},ee=(z,re)=>{x(be=>({...be,[z]:re}))},he=z=>{x(re=>{const be=re.abilities.includes(z)?re.abilities.filter(me=>me!==z):[...re.abilities,z];return{...re,abilities:be}})},pe=()=>{x({cost:{min:k.minCost,max:k.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),A(!1)},I=()=>{Object.keys(n).forEach(z=>{n[z]>0&&r(z,0)})};C.useEffect(()=>{const z=re=>{E.current&&!E.current.contains(re.target)&&A(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const K=Math.PI/180,Y=({cx:z,cy:re,midAngle:be,outerRadius:me,fill:ae,name:fe,value:ve})=>{const de=Math.sin(-K*be),Je=Math.cos(-K*be),Ae=z+(me+5)*Je,Be=re+(me+5)*de,Nt=z+(me+15)*Je,pt=re+(me+15)*de,Yr=Nt+(Je>=0?1:-1)*12,Xa=pt,Fr=Je>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${Ae},${Be}L${Nt},${pt}L${Yr},${Xa}`,stroke:ae,fill:"none"}),v.jsx("circle",{cx:Yr,cy:Xa,r:2,fill:ae,stroke:"none"}),v.jsx("text",{x:Yr+(Je>=0?1:-1)*8,y:Xa,dy:4,textAnchor:Fr,fill:"#9CA3AF",fontSize:"11px",children:`${fe} (${ve})`})]})},oe=()=>{const[z,re]=C.useState(""),be=C.useRef(null),me=C.useMemo(()=>Object.entries(n).map(([fe,ve])=>`${fe}:${ve}`).join(","),[n]),ae=()=>{be.current.select(),document.execCommand("copy"),re("Copied!"),setTimeout(()=>re(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>h(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:fe=>fe.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:be,readOnly:!0,value:me,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:z}),v.jsxs("button",{onClick:ae,className:"flex items-center gap-2 bg-cyan-600 text-white font-bold py-2 px-4 rounded hover:bg-cyan-700",children:[v.jsx(kw,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>h(!1),className:"flex items-center gap-2 bg-pink-600 text-white font-bold py-2 px-4 rounded hover:bg-pink-700",children:[v.jsx(Kt,{size:16})," Close"]})]})]})})},ye=()=>{const[z,re]=C.useState(""),[be,me]=C.useState(""),ae=()=>{me("");const fe=s(z);fe.success?m(!1):me(fe.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:fe=>fe.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:z,onChange:fe=>re(fe.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),be&&v.jsx("p",{className:"text-red-500 mt-2",children:be}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-700",children:"Cancel"}),v.jsx("button",{onClick:ae,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded hover:bg-purple-700",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[l&&v.jsx(mY,{card:l,onClose:()=>u(null)}),d&&v.jsx(oe,{}),p&&v.jsx(ye,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(Lk,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(xk,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:pe,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",y.cost.min," - ",y.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:k.minCost,max:k.maxCost,value:y.cost.min,onChange:z=>ee("cost",{...y.cost,min:Math.min(parseInt(z.target.value),y.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:k.minCost,max:k.maxCost,value:y.cost.max,onChange:z=>ee("cost",{...y.cost,max:Math.max(parseInt(z.target.value),y.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:E,children:[v.jsx("button",{onClick:()=>A(!S),className:"filter-select w-full text-left h-full",children:y.abilities.length===0?"Select Abilities":`${y.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:k.abilities.map(z=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:y.abilities.includes(z),onChange:()=>he(z),className:"mr-2"}),z]},z))})]}),v.jsxs("select",{onChange:z=>ee("type",z.target.value),value:y.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:y.hideEnhanced,onChange:z=>ee("hideEnhanced",z.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("name"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",P.key==="name"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("type"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",P.key==="type"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",P.key==="cost"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("description"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",P.key==="description"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:te.map((z,re)=>{const be=n[z.id]||0,me=q[z.baseCardId]||0,ae=z.maxInDeck;return v.jsxs("tr",{className:z.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(sA,{size:18})})}),v.jsx("td",{className:"font-bold",children:z.name}),v.jsx("td",{className:`font-semibold ${z.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:z.type}),v.jsx("td",{children:z.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:z.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:z.keywords.map(fe=>v.jsx("span",{className:"ability-chip",children:fe},fe))})}),v.jsx("td",{className:"text-xs",children:z.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):z.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:ae+1}).map((fe,ve)=>{const de=ve===be,Je=ae-(me-be),Ae=ve>Je;return v.jsx("button",{onClick:()=>r(z.id,ve),className:`quantity-btn ${de?"selected":""}`,disabled:Ae,children:ve},ve)})})})]},`${z.id}-${re}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${Z?"text-green-400":"text-white"}`,children:["Your Deck (",B,"/40)"]}),v.jsx("button",{onClick:I,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:J.length>0?J.map(z=>{const re=q[z.baseCardId]>=z.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(sA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:z.name,children:z.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(z.id,z.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",z.quantity]}),v.jsx("button",{onClick:()=>r(z.id,z.quantity+1),disabled:re,className:"deck-edit-btn",children:"+"})]})]},z.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),B>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!j),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(Cc,{size:20,className:`transition-transform duration-300 ${j?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${j?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>N("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>N("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>N("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[_==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(sy,{width:"100%",height:"100%",children:v.jsxs(iY,{data:le.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(ij,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(Tb,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(Db,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(ty,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(ZD,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),_==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(sy,{width:"100%",height:"100%",children:v.jsxs(Aw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(yv,{data:[{name:"Action Cards",value:J.filter(z=>z.type==="Action").reduce((z,re)=>z+re.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:J.filter(z=>z.type==="Upgrade").reduce((z,re)=>z+re.quantity,0),color:"#c084fc"}].filter(z=>z.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:z,value:re,percent:be})=>`${z}: ${re} (${(be*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:J.filter(z=>z.type==="Action").reduce((z,re)=>z+re.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:J.filter(z=>z.type==="Upgrade").reduce((z,re)=>z+re.quantity,0),color:"#c084fc"}].filter(z=>z.value>0).map((z,re)=>v.jsx(Fs,{fill:z.color},`cell-${re}`))}),v.jsx(ty,{}),v.jsx(Zd,{})]})})]}),_==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(sy,{width:"100%",height:"100%",children:v.jsxs(Aw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(yv,{data:le.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:Y,outerRadius:60,dataKey:"value",children:le.pieChartData.map((z,re)=>v.jsx(Fs,{fill:ce[re%ce.length]},`cell-${re}`))}),v.jsx(ty,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!Z,className:"w-full p-4 mt-4 text-lg font-bold font-orbitron rounded-lg bg-purple-600 text-white transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed enabled:hover:bg-purple-500",children:"Confirm Deck"})]})]})]})},Va=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})});function yY({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:d,shieldsToRemove:h,shieldsToAdd:p,reallocationPhase:m,totalLocalPlayerDrones:y,totalOpponentPlayerDrones:x,getLocalPlayerId:S,getOpponentPlayerId:A,isMyTurn:E,handlePlayerPass:P,handleReset:O,mandatoryAction:_,multiSelectState:N,AI_HAND_DEBUG_MODE:j,setShowAiHandModal:D,onShowDebugModal:R}){const[k,B]=C.useState(!1),J=C.useRef(null);return C.useEffect(()=>{const q=Z=>{J.current&&!J.current.contains(Z.target)&&B(!1)};return document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[]),v.jsxs("header",{className:"w-full flex justify-between items-center mb-2 flex-shrink-0 px-5 pt-8",children:[v.jsxs("div",{className:"flex flex-col items-start gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-pink-300 flex items-center",children:["Opponent Resources",(i==="deployment"||i==="action")&&u===A()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${t.energy>r.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(_c,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.energy," / ",r.totals.maxEnergy]})]}),v.jsxs("div",{onClick:()=>j&&setTimeout(()=>D(!0),100),className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${j?"cursor-pointer hover:bg-gray-800":""} ${t.hand.length>r.totals.handLimit?"text-red-400":""}`,children:[v.jsx(Ck,{className:"text-gray-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.hand.length," / ",r.totals.handLimit]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50",children:[v.jsx(by,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:s===1?t.initialDeploymentBudget:t.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${x>r.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(oA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[x," / ",r.totals.cpuLimit]})]})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center",children:[v.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-xl font-orbitron",style:{textShadow:"0 0 15px rgba(236, 72, 153, 0.5), 0 0 5px rgba(255, 255, 255, 0.5)"},children:"Drone Wars"}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-300 tracking-widest font-exo",children:hR(i)}),(i==="deployment"||i==="action")&&E()&&!_&&!N&&v.jsx("button",{onClick:P,disabled:l[`${S()}Passed`],className:`btn-clipped text-white font-bold py-1 px-6 transition-colors duration-200 ${l[`${S()}Passed`]?"bg-gray-700 cursor-not-allowed":"bg-red-600 hover:bg-red-500"}`,children:"Pass"})]})]}),v.jsxs("div",{className:"flex flex-col items-end gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-cyan-300 flex items-center",children:["Your Resources",(i==="deployment"||i==="action")&&u===S()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${S()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${e.energy>n.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(_c,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[e.energy," / ",n.totals.maxEnergy]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(by,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:s===1?e.initialDeploymentBudget:e.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${y>n.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(oA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[y," / ",n.totals.cpuLimit]})]}),i==="allocateShields"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(Bf,{className:"text-cyan-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:d})]}),m==="removing"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-orange-500/50",children:[v.jsx(Bf,{className:"text-orange-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:h})]}),m==="adding"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-green-500/50",children:[v.jsx(Bf,{className:"text-green-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:p})]}),v.jsx("button",{onClick:O,className:"bg-pink-700 text-white p-3 rounded-full shadow-lg hover:bg-pink-600 transition-colors duration-200","aria-label":"Reset Game",children:v.jsx(Ok,{})}),v.jsxs("div",{className:"relative",ref:J,children:[v.jsxs("button",{onClick:()=>B(!k),className:"bg-slate-700 text-white p-3 rounded-full shadow-lg hover:bg-slate-600 transition-colors duration-200 flex items-center","aria-label":"Settings",children:[v.jsx(lA,{}),v.jsx(hk,{size:16,className:"ml-1"})]}),k&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:v.jsxs("button",{onClick:()=>{R&&R(),B(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[v.jsx(lA,{size:16}),"Debug View"]})})]})]})]})]})}const yh=()=>{const{gameStateManager:e}=Ri(),t=C.useMemo(()=>e?new Gc(e):null,[e]),[n,r]=C.useState(null);return C.useEffect(()=>{if(!t)return;const p=()=>{r(t.getCacheStats())};p();const m=setInterval(p,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(p,m)=>t?t.getEffectiveStats(p,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(p,m=[])=>t?t.getEffectiveShipStats(p,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:p=>t?t.getLaneData(p):{lane:p,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(p,m=null)=>t?t.hasGuardianInLane(p,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},Cw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:d,gameEngine:h,turnPhase:p,isMyTurn:m,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,hoveredTarget:E,setHoveredTarget:P})=>{const{getEffectiveShipStats:O}=yh(),_=O(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(N=>{const j=n[N];if(!j)return console.log(`🚨 [DEBUG] Lane ${N} rendering EMPTY div - no hover possible:`,{sectionName:j,sectionNameType:typeof j,sectionNameValue:JSON.stringify(j),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},N);const D=e.shipSections[j],R=u.some(B=>B.id===j);let k=null;if(d&&t){if(d==="removing")D.allocatedShields>0?k="can-remove":k="cannot-remove";else if(d==="adding"){const B=h.getEffectiveSectionMaxShields(j,e,n);D.allocatedShields<B?k="can-add":k="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0",children:v.jsx(Zf,{section:j,stats:D,effectiveStatsForDisplay:_.bySection[j],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(j):s&&s({id:j,name:j,...D},"section",t)},onAbilityClick:i,isInteractive:l||p==="action"&&t&&D.ability&&S.energy>=D.ability.cost.energy,isCardTarget:R,isInMiddleLane:N===1,isHovered:E?.type==="section"&&E?.target.name===j,onMouseEnter:()=>!t&&P({target:{name:j,...D},type:"section"}),onMouseLeave:()=>!t&&P(null),reallocationState:k,gameEngine:h,turnPhase:p,isMyTurn:m,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A})},N)})})},Ew=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),vY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Vf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:d,lane:h,onAbilityClick:p,isActionTarget:m,droneRefs:y,mandatoryAction:x,localPlayerState:S})=>{const{getEffectiveStats:A}=yh(),E=C.useMemo(()=>_n.find(oe=>oe.name===e.name),[e.name]),P=A(e,h),{maxShields:O}=P,_=e.currentShields??O,N=E.abilities.filter(oe=>oe.type==="ACTIVE"),j=n?"border-cyan-400":"border-pink-500",D=n?"bg-cyan-900":"bg-pink-950",R=n?"text-cyan-100":"text-pink-100",k=n?"bg-cyan-900":"bg-pink-950",B=n?"text-cyan-400":"text-pink-500",J=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",q=P.attack>P.baseAttack,Z=P.attack<P.baseAttack,ce=q?"text-green-400":Z?"text-red-400":"text-white",le=P.speed>P.baseSpeed,te=P.speed<P.baseSpeed,$=le?"text-green-400":te?"text-red-400":"text-white",ee=e.isExhausted?"grayscale opacity-60":"",he=s?"animate-shake":"",pe=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",I=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",K=x?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",Y=oe=>!(e.isExhausted&&oe.cost.exhausts!==!1||oe.cost.energy&&S.energy<oe.cost.energy);return v.jsxs("div",{ref:oe=>y.current[e.id]=oe,onClick:oe=>t&&t(oe,e,n),onMouseEnter:u,onMouseLeave:d,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ee} ${he} ${pe} ${I} ${K}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${j} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:O}).map((oe,ye)=>ye<_?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:B,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ye):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:J,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ye))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:E.hull}).map((oe,ye)=>{const z=ye<e.hull,re=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${z?re:"bg-gray-400"} border border-black/50`},ye)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${D} flex items-center justify-center border-t ${j}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${R} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(Ew,{value:P.attack,isFlat:!1,bgColor:k,textColor:ce})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:v.jsx(Ew,{value:P.speed,isFlat:!0,bgColor:k,textColor:$})}),n&&N.length>0&&Y(N[0])&&v.jsx(vY,{onClick:oe=>p&&p(oe,e,N[0])})]})},bY=(e,t,n,r,i,s,l,u,d,h,p,m,y,x,S,A,E,P,O,_)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(N=>v.jsx(Vf,{drone:N,lane:n,isPlayer:t,onClick:h,onAbilityClick:p,isSelected:m&&m.id===N.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(j=>j.id===N.id),isHit:x.includes(N.id),isPotentialInterceptor:S.includes(N.id),droneRefs:A,mandatoryAction:E,localPlayerState:r,isActionTarget:P.some(j=>j.id===N.id)||O.some(j=>j.id===N.id),onMouseEnter:()=>!t&&_({target:N,type:"drone",lane:n}),onMouseLeave:()=>!t&&_(null)},N.id))}),Pw=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:d,multiSelectState:h,turnPhase:p,localPlayerState:m,opponentPlayerState:y,localPlacedSections:x,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:E,handleTokenClick:P,handleAbilityIconClick:O,selectedDrone:_,recentlyHitDrones:N,potentialInterceptors:j,droneRefs:D,mandatoryAction:R,setHoveredTarget:k})=>(yh(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(B=>{const J=t?r():i(),q=s&&l.some(ce=>ce.id===B&&ce.owner===J)||u&&d.some(ce=>ce.id===B&&ce.owner===J)||h&&d.some(ce=>ce.id===B&&ce.owner===J),Z=t&&(p==="deployment"||p==="action");return v.jsx("div",{onClick:ce=>n(ce,B,t),className:`flex-1 rounded-lg border-2 transition-all duration-200 p-2 lane-background
              ${q?"border-purple-500 bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":"border-gray-700/50 bg-black/20"}
              ${Z?"cursor-pointer hover:bg-cyan-900/50":""}
            `,children:bY(e.dronesOnBoard[B],t,B,m,y,x,S,A,E,P,O,_,h,N,j,D,R,l,d,k)},B)})}));function xY({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:d,turnPhase:h,reallocationPhase:p,shipAbilityMode:m,hoveredTarget:y,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:E,mandatoryAction:P,gameEngine:O,getLocalPlayerId:_,getOpponentPlayerId:N,isMyTurn:j,getPlacedSectionsForEngine:D,passInfo:R,handleTargetClick:k,handleLaneClick:B,handleShipSectionClick:J,handleShipAbilityClick:q,handleTokenClick:Z,handleAbilityIconClick:ce,setHoveredTarget:le}){return v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(Cw,{player:t,isPlayer:!1,placedSections:r,onTargetClick:k,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:O,turnPhase:h,isMyTurn:j,passInfo:R,getLocalPlayerId:_,localPlayerState:e,shipAbilityMode:m,hoveredTarget:y,setHoveredTarget:le}),v.jsx(Pw,{player:t,isPlayer:!1,onLaneClick:B,getLocalPlayerId:_,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:d,turnPhase:h,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:D,handleTokenClick:Z,handleAbilityIconClick:ce,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:E,mandatoryAction:P,setHoveredTarget:le}),v.jsx(Pw,{player:e,isPlayer:!0,onLaneClick:B,getLocalPlayerId:_,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:d,turnPhase:h,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:D,handleTokenClick:Z,handleAbilityIconClick:ce,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:E,mandatoryAction:P,setHoveredTarget:le}),v.jsx(Cw,{player:e,isPlayer:!0,placedSections:n,onSectionClick:J,onAbilityClick:q,onTargetClick:k,isInteractive:h==="allocateShields"||p,selectedCard:i,validCardTargets:s,reallocationPhase:p,gameEngine:O,turnPhase:h,isMyTurn:j,passInfo:R,getLocalPlayerId:_,localPlayerState:e,shipAbilityMode:m,hoveredTarget:y,setHoveredTarget:le})]})})}const vh=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i})=>{const{name:s,cost:l,image:u,description:d}=e;return v.jsx("div",{onClick:h=>{h.stopPropagation(),(n||i)&&t(e)},className:`
        w-52 h-72 rounded-lg p-1 relative group transition-all duration-200 flex-shrink-0
        ${n?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"grayscale":""}
        ${i?"cursor-pointer ring-2 ring-red-500 animate-pulse":""}
      `,children:v.jsxs("div",{className:`
          w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md
          transition-all duration-200
          ${n&&!r?"group-hover:bg-slate-800":""}
        `,children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:s}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(_c,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:l})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:u,alt:s,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:d})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})},SY="_footer_js8yx_10",AY="_tabContainer_js8yx_14",CY="_contentContainer_js8yx_18",EY="_contentOpen_js8yx_22",PY="_contentClosed_js8yx_26",wY="_tabButton_js8yx_32",OY="_tabButtonActive_js8yx_36",_Y="_tabButtonInactive_js8yx_40",TY="_tabIcon_js8yx_44",DY="_multiSelectOverlay_js8yx_50",jY="_multiSelectText_js8yx_54",NY="_handContainer_js8yx_60",kY="_cardPile_js8yx_64",MY="_deckCard_js8yx_68",RY="_deckCardText_js8yx_74",IY="_discardCard_js8yx_78",LY="_discardCardText_js8yx_84",$Y="_pileLabel_js8yx_88",BY="_handSection_js8yx_92",UY="_handHeader_js8yx_96",zY="_handTitle_js8yx_100",GY="_handTitleOverLimit_js8yx_104",HY="_handTitleNormal_js8yx_108",qY="_mandatoryDiscardWarning_js8yx_112",YY="_handCardsContainer_js8yx_116",FY="_handCardsWrapper_js8yx_120",KY="_handCardsWrapperGap_js8yx_124",VY="_cardWrapper_js8yx_128",XY="_optionalDiscardControls_js8yx_133",WY="_optionalDiscardCounter_js8yx_137",QY="_finishDiscardButton_js8yx_141",ZY="_droneContainer_js8yx_148",JY="_droneGrid_js8yx_152",eF="_logContainer_js8yx_158",tF="_logHeader_js8yx_162",nF="_logTitle_js8yx_166",rF="_downloadButton_js8yx_170",aF="_logTableWrapper_js8yx_175",iF="_logTable_js8yx_175",oF="_logTableHeader_js8yx_183",sF="_logTableHeaderCell_js8yx_187",lF="_logTableDebugHeader_js8yx_191",cF="_logTableRow_js8yx_195",uF="_logTableCell_js8yx_199",fF="_logTableCellBold_js8yx_203",dF="_logTableCellGray_js8yx_207",hF="_logTableCellCyan_js8yx_211",pF="_logTableCellYellow_js8yx_215",mF="_logTableCellGrayText_js8yx_219",gF="_logTableCellDebug_js8yx_223",yF="_logTableCellCenter_js8yx_227",vF="_aiDecisionButton_js8yx_231",bF="_buttonDanger_js8yx_242",xF="_buttonSuccess_js8yx_247",SF="_buttonDisabled_js8yx_252",xe={footer:SY,tabContainer:AY,contentContainer:CY,contentOpen:EY,contentClosed:PY,tabButton:wY,tabButtonActive:OY,tabButtonInactive:_Y,tabIcon:TY,multiSelectOverlay:DY,multiSelectText:jY,handContainer:NY,cardPile:kY,deckCard:MY,deckCardText:RY,discardCard:IY,discardCardText:LY,pileLabel:$Y,handSection:BY,handHeader:UY,handTitle:zY,handTitleOverLimit:GY,handTitleNormal:HY,mandatoryDiscardWarning:qY,handCardsContainer:YY,handCardsWrapper:FY,handCardsWrapperGap:KY,cardWrapper:VY,optionalDiscardControls:XY,optionalDiscardCounter:WY,finishDiscardButton:QY,droneContainer:ZY,droneGrid:JY,logContainer:eF,logHeader:tF,logTitle:nF,downloadButton:rF,logTableWrapper:aF,logTable:iF,logTableHeader:oF,logTableHeaderCell:sF,logTableDebugHeader:lF,logTableRow:cF,logTableCell:uF,logTableCellBold:fF,logTableCellGray:dF,logTableCellCyan:hF,logTableCellYellow:pF,logTableCellGrayText:mF,logTableCellDebug:gF,logTableCellCenter:yF,aiDecisionButton:vF,buttonDanger:bF,buttonSuccess:xF,buttonDisabled:SF};function AF({localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleCardClick:s,getLocalPlayerId:l,isMyTurn:u,hoveredCardId:d,setHoveredCardId:h,setIsViewDiscardModalOpen:p,setIsViewDeckModalOpen:m,optionalDiscardCount:y,handleRoundStartDraw:x,checkBothPlayersHandLimitComplete:S,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:E,setConfirmationModal:P,passInfo:O,validCardTargets:_,gameEngine:N,opponentPlayerState:j}){const B=e.hand.length>7,J=1552,q=e.hand.length;let Z=0;return q>1&&(Z=(J-208)/(q-1)-208),v.jsxs("div",{className:xe.handContainer,children:[v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>p(!0),className:xe.discardCard,children:v.jsx("p",{className:xe.discardCardText,children:e.discardPile.length})}),v.jsx("p",{className:xe.pileLabel,children:"Discard Pile"})]}),v.jsxs("div",{className:xe.handSection,children:[v.jsx("div",{className:xe.handHeader,children:v.jsxs("h3",{className:`${xe.handTitle} ${e.hand.length>t.totals.handLimit?xe.handTitleOverLimit:xe.handTitleNormal}`,children:["Your Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),i?.type==="discard"&&i.fromAbility&&v.jsxs("p",{className:xe.mandatoryDiscardWarning,children:["You must discard ",i.count," card(s)."]}),v.jsx("div",{className:xe.handCardsContainer,style:B?{width:`${J}px`}:{},children:v.jsx("div",{className:`${xe.handCardsWrapper} ${B?"":xe.handCardsWrapperGap}`,children:e.hand.map((ce,le)=>{const te=d?e.hand.findIndex(he=>he.instanceId===d):-1;let $="",ee={zIndex:le};return B&&te!==-1&&(le<te?$="transform -translate-x-12":le>te?$="transform translate-x-12":($="transform -translate-y-8 scale-105",ee.zIndex=50)),B&&le>0&&(ee.marginLeft=`${Z}px`),v.jsx("div",{className:`${xe.cardWrapper} ${$}`,style:ee,onMouseEnter:()=>h(ce.instanceId),onMouseLeave:()=>h(null),children:v.jsx(vh,{card:ce,isPlayable:r==="action"&&u()&&!O[`${l()}Passed`]&&e.energy>=ce.cost&&(!ce.targeting||N.getValidTargets(l(),null,ce,e,j).length>0)||r==="optionalDiscard"&&y<t.totals.discardLimit,isMandatoryTarget:i?.type==="discard",onClick:i?.type==="discard"?he=>P({type:"discard",target:he,onConfirm:()=>A(he),onCancel:()=>P(null),text:`Are you sure you want to discard ${he.name}?`}):r==="optionalDiscard"?he=>P({type:"discard",target:he,onConfirm:()=>E(he),onCancel:()=>P(null),text:`Are you sure you want to discard ${he.name}?`}):s})},ce.instanceId)})})})]}),v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>m(!0),className:xe.deckCard,children:v.jsx("p",{className:xe.deckCardText,children:e.deck.length})}),v.jsx("p",{className:xe.pileLabel,children:"Deck"}),r==="optionalDiscard"&&v.jsxs("div",{className:xe.optionalDiscardControls,children:[v.jsxs("p",{className:xe.optionalDiscardCounter,children:["Discarded: ",y," / ",t.discardLimit]}),v.jsx("button",{onClick:()=>{x(),S()},className:xe.finishDiscardButton,children:"Finish Discarding"})]})]})]})}function CF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:d,isMyTurn:h,turn:p,passInfo:m,validCardTargets:y}){return v.jsx("div",{className:xe.droneContainer,children:v.jsx("div",{className:xe.droneGrid,children:t.map((x,S)=>{const E=(p===1?e.initialDeploymentBudget+e.energy:e.energy)>=x.class,P=n?.type==="Upgrade"&&y.some(O=>O.id===x.name);return v.jsx(Qf,{drone:x,onClick:s,isSelected:l&&l.name===x.name,isSelectable:r==="deployment"&&h()&&!m[`${d()}Passed`]&&E&&!i||P,deployedCount:e.deployedDroneCounts[x.name]||0,appliedUpgrades:e.appliedUpgrades[x.name]||[],isUpgradeTarget:P,onViewUpgrades:(O,_)=>u({droneName:O.name,upgrades:_})},S)})})})}function EF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return v.jsxs("div",{className:xe.logContainer,children:[v.jsxs("div",{className:xe.logHeader,children:[v.jsx("h3",{className:xe.logTitle,children:"Game Log"}),v.jsx("button",{onClick:t,className:xe.downloadButton,children:"Download CSV"})]}),v.jsx("div",{className:xe.logTableWrapper,children:v.jsxs("table",{className:xe.logTable,children:[v.jsx("thead",{className:xe.logTableHeader,children:v.jsxs("tr",{children:[v.jsx("th",{className:xe.logTableHeaderCell,children:"Rnd"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Timestamp (UTC)"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Player"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Action"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Source"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Target"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Outcome"}),v.jsx("th",{className:xe.logTableDebugHeader,children:"Debug Source"}),v.jsx("th",{className:xe.logTableHeaderCell})]})}),v.jsx("tbody",{children:e.map((r,i)=>v.jsxs("tr",{className:xe.logTableRow,children:[v.jsx("td",{className:xe.logTableCellBold,children:r.round}),v.jsx("td",{className:xe.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:xe.logTableCellCyan,children:r.player}),v.jsx("td",{className:xe.logTableCellYellow,children:r.actionType}),v.jsx("td",{className:xe.logTableCell,children:r.source}),v.jsx("td",{className:xe.logTableCell,children:r.target}),v.jsx("td",{className:xe.logTableCellGrayText,children:r.outcome}),v.jsx("td",{className:xe.logTableCellDebug,children:r.debugSource}),v.jsx("td",{className:xe.logTableCellCenter,children:r.aiDecisionContext&&v.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:xe.aiDecisionButton,title:"Show AI Decision Logic",children:"ℹ️"})})]},i)).reverse()})]})})]})}function PF({localPlayerState:e,localPlayerEffectiveStats:t,sortedLocalActivePool:n,gameLog:r,footerView:i,isFooterOpen:s,multiSelectState:l,selectedCard:u,turnPhase:d,mandatoryAction:h,handleFooterButtonClick:p,handleCardClick:m,cancelCardSelection:y,downloadLogAsCSV:x,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:E,setHoveredCardId:P,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:_,optionalDiscardCount:N,handleRoundStartDraw:j,checkBothPlayersHandLimitComplete:D,handleToggleDroneSelection:R,selectedDrone:k,setViewUpgradesModal:B,handleConfirmMandatoryDiscard:J,handleRoundStartDiscard:q,setConfirmationModal:Z,turn:ce,passInfo:le,validCardTargets:te,gameEngine:$,opponentPlayerState:ee,setAiDecisionLogToShow:he}){return v.jsxs("footer",{className:xe.footer,children:[v.jsxs("div",{className:xe.tabContainer,children:[v.jsx("button",{onClick:()=>p("hand"),className:`${xe.tabButton} ${s&&i==="hand"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="hand"&&v.jsx(Cc,{size:20}),"Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>p("drones"),className:`${xe.tabButton} ${s&&i==="drones"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="drones"&&v.jsx(Cc,{size:20}),"Drones"]})}),v.jsx("button",{onClick:()=>p("log"),className:`${xe.tabButton} ${s&&i==="log"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="log"&&v.jsx(Cc,{size:20}),"Log (",r.length,")"]})})]}),v.jsxs("div",{className:`${xe.contentContainer} ${s?xe.contentOpen:xe.contentClosed}`,children:[l&&v.jsxs("div",{className:xe.multiSelectOverlay,children:[v.jsxs("span",{className:xe.multiSelectText,children:[l.phase==="select_source_lane"&&"Reposition: Select a source lane",l.phase==="select_drones"&&`Select Drones (${l.selectedDrones.length} / ${l.maxSelection})`,l.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:pe=>{pe.stopPropagation(),y()},className:xe.buttonDanger,children:"Cancel"}),l.phase==="select_drones"&&v.jsx("button",{onClick:pe=>{pe.stopPropagation(),l.selectedDrones.length>0&&console.log("Confirm drones clicked")},disabled:l.selectedDrones.length===0,className:`${xe.buttonSuccess} ${l.selectedDrones.length===0?xe.buttonDisabled:""}`,children:"Confirm Drones"})]}),i==="hand"&&v.jsx(AF,{localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:u,turnPhase:d,mandatoryAction:h,handleCardClick:m,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:E,setHoveredCardId:P,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:_,optionalDiscardCount:N,handleRoundStartDraw:j,checkBothPlayersHandLimitComplete:D,handleConfirmMandatoryDiscard:J,handleRoundStartDiscard:q,setConfirmationModal:Z,passInfo:le,validCardTargets:te,gameEngine:$,opponentPlayerState:ee}),i==="drones"&&v.jsx(CF,{localPlayerState:e,sortedLocalActivePool:n,selectedCard:u,turnPhase:d,mandatoryAction:h,handleToggleDroneSelection:R,selectedDrone:k,setViewUpgradesModal:B,getLocalPlayerId:S,isMyTurn:A,turn:ce,passInfo:le,validCardTargets:te}),i==="log"&&v.jsx(EF,{gameLog:r,downloadLogAsCSV:x,setAiDecisionLogToShow:he})]})]})}const wF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(Va,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},OF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=C.useState(null);return v.jsxs(Va,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(d=>{const h=s.appliedUpgrades[d.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",d.name]}),v.jsx("div",{className:"space-y-2",children:h.map(p=>v.jsx("div",{onClick:()=>u({droneName:d.name,instanceId:p.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===p.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:p.name})},p.instanceId))})]},d.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},_F=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=C.useState(null);return v.jsxs(Va,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(vh,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},TF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:d})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(wF,{modalData:e,onClose:()=>t(null)}),n&&v.jsx(OF,{selectionData:n,onConfirm:async(h,p)=>{await l(h,p,u()),r(null)},onCancel:()=>{r(null),d()}}),i&&v.jsx(_F,{selectionData:i,onConfirm:async(h,p)=>{await l(h,p,u()),s(null)},onCancel:()=>{s(null),d()}})]}),DF=({visible:e,start:t,end:n,lineRef:r})=>e?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,jF=({top:e,left:t})=>v.jsx("div",{className:"explosion",style:{top:`${e}px`,left:`${t}px`}}),NF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const d=n!=="local",h=t===u()?s?.name||"You":l?.name||"Opponent";return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-6 shadow-2xl shadow-purple-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-400 mb-2",children:[v.jsx(Pv,{className:"w-6 h-6 animate-spin"}),v.jsx(Nw,{className:"w-6 h-6"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:d?"Opponent's Turn":"AI Thinking..."}),v.jsx("p",{className:"text-gray-300 text-sm",children:d?`Waiting for ${h}`:"Processing AI actions..."})]}),d&&r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Mw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),i&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Recent action:"}),v.jsx("p",{className:"text-white text-sm",children:i})]}),v.jsx("div",{className:"flex justify-center mt-4",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},kF=({card:e})=>v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80",children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),ww=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Kt,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(kF,{card:l})},`${l.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},MF=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:"✓"})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),RF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=C.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:d,filter:h}=r,p=S=>{s(A=>{const E=S.instanceId||`${S.id}-${S.name}`;return A.some(O=>(O.instanceId||`${O.id}-${O.name}`)===E)?A.filter(O=>(O.instanceId||`${O.id}-${O.name}`)!==E):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),s([]))},y=()=>{s([]),t()},x=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Kt,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:d==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:h?`Select ${u} ${h.type} card${u>1?"s":""} from ${l.length} found ${h.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${x?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>v.jsx(MF,{card:S,isSelected:i.some(E=>{const P=S.instanceId||`${S.id}-${S.name}`;return(E.instanceId||`${E.id}-${E.name}`)===P}),onClick:p},S.instanceId||`${S.id}-${A}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:y,className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!x,className:`font-bold py-3 px-8 rounded-full transition-colors ${x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"Confirm Selection"})]})]})})},IF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return v.jsxs(Va,{title:"AI Action: Card Played",text:"",onClose:t,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:n.name}),r&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:r}),i&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(vh,{card:n,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},LF=({report:e,onClose:t})=>{if(!e)return null;const{attackerName:n,lane:r,targetName:i,targetType:s,interceptorName:l,shieldDamage:u,hullDamage:d,wasDestroyed:h,remainingShields:p,remainingHull:m}=e,y=s==="section"?i.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase()):i;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[t&&v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Action Report"}),v.jsxs("div",{className:"text-left text-gray-300 space-y-3 mt-4 text-center",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-pink-400",children:n})," attacked in"," ",v.jsx("strong",{children:r?.replace("lane","Lane ")||"Unknown Lane"}),"."]}),l?v.jsxs("p",{children:["Your ",v.jsx("strong",{className:"text-yellow-400",children:l})," intercepted the attack, which was targeting your ",v.jsx("strong",{className:"text-cyan-400",children:y}),"!"]}):v.jsxs("p",{children:["It targeted your ",v.jsx("strong",{className:"text-cyan-400",children:y}),"."]}),v.jsxs("p",{children:["The attack dealt ",v.jsx("strong",{className:"text-cyan-300",children:u})," damage to shields and ",v.jsx("strong",{className:"text-red-400",children:d})," damage to the hull."]}),h?v.jsx("p",{className:"font-bold text-red-500 text-lg",children:"The target was destroyed!"}):v.jsxs("p",{children:["The target has ",v.jsx("strong",{className:"text-cyan-300",children:p})," shields and ",v.jsx("strong",{className:"text-green-400",children:m})," hull remaining."]})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})})},$F=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(Qf,{drone:t,isSelectable:!1,deployedCount:0})})]})}),BF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,turn:s,firstPasserOfPreviousRound:l,onContinue:u})=>{if(!e)return null;const d=t===n?r:i;let h;s===1?h="The first player is determined randomly for the first round.":h=`${l===n?r:i} passed first in the previous round, securing the initiative.`;const p=`${d} will go first this round. ${h}`;return v.jsx(Va,{title:"First Player Determined",text:p,onClose:u,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:u,className:"btn-continue",children:"Continue"})})})},UF=({show:e,onContinue:t})=>e?v.jsx(Va,{title:"Action Phase",text:"Deployment has ended. Prepare for action!",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})}):null,zF=({show:e,onContinue:t})=>e?v.jsx(Va,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,GF=({show:e,isMultiplayer:t,phase:n,actionType:r="action"})=>{if(!e)return null;const i=t?"Opponent's Turn":"AI Thinking...";let s;return r==="deploy"?s=t?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...":r==="another"?s="Your opponent takes another action!":n==="deployment"?s=t?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...":s=t?"Your opponent is taking their turn.":"AI is deciding on its next action...",v.jsx(Va,{title:i,text:s,onClose:null})},HF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=u=>{switch(u){case"determineFirstPlayer":return{title:"Waiting for Acknowledgment",message:`Waiting for ${n} to acknowledge first player determination`};case"mandatoryDiscard":return{title:"Waiting for Discard",message:`Waiting for ${n} to complete mandatory discard`};case"allocateShields":return{title:"Waiting for Shield Allocation",message:`Waiting for ${n} to allocate shields`};case"mandatoryDroneRemoval":return{title:"Waiting for Drone Removal",message:`Waiting for ${n} to remove excess drones`};default:return{title:"Waiting for Opponent",message:`Waiting for ${n} to complete their action`}}},{title:s,message:l}=i(t);return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-amber-500 p-6 shadow-2xl shadow-amber-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 mb-2",children:[v.jsx(Nw,{className:"w-6 h-6"}),v.jsx(Pv,{className:"w-6 h-6 animate-spin"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:s}),v.jsx("p",{className:"text-gray-300 text-sm",children:l})]}),r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Mw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"You have completed your part:"}),v.jsx("p",{className:"text-white text-sm",children:"Waiting for opponent to finish"})]}),v.jsx("div",{className:"flex justify-center",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},qF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&v.jsx("button",{onClick:e.onCancel,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:n}),v.jsx("p",{className:"modal-text",children:e.text}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},YF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:s}),v.jsx("p",{className:"modal-text",children:l})]})})},FF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{if(!n)return null;const i=e===t;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:i?"Victory!":"Defeat!"}),v.jsx("p",{className:"modal-text",children:i?"You have crippled the enemy command ship.":"Your command ship has been crippled."}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"View Final Board"})})]})})},KF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),v.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),v.jsx("td",{className:"p-2 text-center",children:s.isChosen&&v.jsx("span",{className:"text-yellow-400",children:"✔"})})]},l))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},VF=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Deployment"}),v.jsxs("p",{className:"modal-text",children:["This deployment will use ",i," Initial Deployment points and cost ",s," Energy. Proceed?"]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},XF=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Move"}),v.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},WF=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:d,localPlayerState:h,shipAbilityMode:p,droneRefs:m,mandatoryAction:y})=>{if(!t||!e)return null;const{attackDetails:x,interceptors:S}=e,{attacker:A,target:E,targetType:P,lane:O}=x;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-3xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Interception Opportunity!"}),v.jsxs("p",{className:"modal-text",children:["Combat in ",O?.replace("lane","Lane ")||"Unknown Lane"]}),v.jsxs("div",{className:"flex justify-around items-center my-4 p-4 bg-black/20 rounded-lg",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-pink-400 mb-2",children:"Attacker"}),v.jsx(Vf,{drone:A,isPlayer:!1,lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h})]}),v.jsx("div",{className:"text-4xl font-bold text-gray-500",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-cyan-400 mb-2",children:"Target"}),P==="drone"?v.jsx(Vf,{drone:E,isPlayer:!0,lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h}):v.jsx("div",{className:"transform scale-75",children:v.jsx(Zf,{section:E.name,stats:h.shipSections[E.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:d,localPlayerState:h,shipAbilityMode:p})})]})]}),v.jsx("h3",{className:"text-center text-white text-xl font-semibold mt-6 mb-2",children:"Choose an Interceptor"}),v.jsx("p",{className:"text-center text-gray-400 mb-4",children:"Drones with higher speed or special abilities can intercept the attack."}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 my-4",children:S.map(_=>v.jsx(Vf,{drone:_,isPlayer:!0,onClick:()=>n(_),lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h},_.id))}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline Interception"})})]})})},QF=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),v.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},ZF=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},JF=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},eK=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,h=>h.toUpperCase());let d="";return l&&(d=l.name),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${d}`:"","? This will cost ",i.cost.energy," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},tK=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),v.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>v.jsx(vh,{card:i,isPlayable:!1},i.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),nK=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=C.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(y,x)=>{navigator.clipboard.writeText(JSON.stringify(y,null,2)).then(()=>console.log(`${x} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},d=y=>y===null?"null":y===void 0?"undefined":typeof y=="boolean"?y.toString():typeof y=="string"?`"${y}"`:typeof y=="number"?y.toString():Array.isArray(y)?y.length===0?"[]":`[${y.length} items]`:typeof y=="object"?Object.keys(y).length===0?"{}":`{${Object.keys(y).length} properties}`:String(y),h=(y,x,S="")=>v.jsxs("div",{className:`mb-6 ${S}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-white",children:x}),v.jsxs("button",{onClick:()=>u(y,x),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[v.jsx(kw,{size:12}),"Copy"]})]}),v.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-800",children:[v.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),v.jsx("tbody",{children:Object.entries(y).map(([A,E],P)=>v.jsxs("tr",{className:P%2===0?"bg-gray-900":"bg-gray-800",children:[v.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),v.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:d(E)}),v.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof E=="object"&&E!==null?Array.isArray(E)?"array":"object":typeof E})]},A))})]})})]}),p=()=>{const y={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return v.jsxs("div",{className:"p-4 space-y-6",children:[h(y,"Core Game Info"),h(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),h(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),h({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),h({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&h(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return v.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const y=r.getEffectiveShipStats(l.player1,l.placedSections),x=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(P=>{S[P]=l.player1.dronesOnBoard[P].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,P)})),A[P]=l.player2.dronesOnBoard[P].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,P)}))});const E=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return v.jsxs("div",{className:"p-4 space-y-6",children:[h(y,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),h(x,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),h(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),h(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),h(E,"GameDataService Cache Statistics")]})}catch(y){return v.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",y.message]})}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Game Debug View"}),v.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[v.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),v.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),v.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?p():m()}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},rK=(e,t)=>{const[n,r]=C.useState([]),i=C.useCallback(s=>{const l=De.createExplosionEffect(s),u=G2(e.current[s],t.current);if(u){const d=`${l.timestamp}-${Math.random()}`;r(h=>[...h,{id:d,top:u.y,left:u.x}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},l.duration)}},[e,t]);return{explosions:n,triggerExplosion:i}},Ow=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:d,updatePlayerState:h,addLogEntry:p,resetGame:m,setWinner:y,processAction:x,gameStateManager:S,p2pManager:A}=Ri(),{getEffectiveStats:E,getEffectiveShipStats:P,gameDataService:O}=yh(),_=!0,[N,j]=C.useState(!1),[D,R]=C.useState(!1),[k,B]=C.useState(null),[J,q]=C.useState(null),[Z,ce]=C.useState(null),[le,te]=C.useState(null),[$,ee]=C.useState(!1),[he,pe]=C.useState(!1),[I,K]=C.useState(!1),[Y,oe]=C.useState(!1),[ye,z]=C.useState(null),[re,be]=C.useState({phase:"action",actionType:"action"}),[me,ae]=C.useState(!1),[fe,ve]=C.useState(!1),[de,Je]=C.useState(!1),[Ae,Be]=C.useState(null),[Nt,pt]=C.useState(null),[Yr,Xa]=C.useState(null),[Fr,Gi]=C.useState(null),[il,Hi]=C.useState(null),[Fo,ol]=C.useState(null),[qi,vn]=C.useState([]),[jr,zt]=C.useState(null),[la,sl]=C.useState(null),[ou,Yi]=C.useState(null),[Fi,Nr]=C.useState("drones"),[Ki,ca]=C.useState(!0),[bh,ll]=C.useState([]),[Wa,Ko]=C.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[Vo,Mb]=C.useState({}),[St,Yn]=C.useState(null),[ua,Vi]=C.useState([]),[Fn,fa]=C.useState(null),[Rn,At]=C.useState(null),[at,ln]=C.useState(null),[kr,cl]=C.useState([]),[Qa,Mr]=C.useState(null),[Rr,Za]=C.useState(null),[Fe,cn]=C.useState(null),[Xi,da]=C.useState(null),[kt,ul]=C.useState(null),[su,Kr]=C.useState(null),[Dn,Wi]=C.useState(null),[lu,fl]=C.useState(!1),[cu,Ir]=C.useState(null),[ha,In]=C.useState(null),[pa,uu]=C.useState(null),[ma,Qi]=C.useState(0),[Xo,fu]=C.useState(0),[xh,Ln]=C.useState(null),[Sh,Rb]=C.useState(null),[dl,du]=C.useState(null),ga=C.useRef(null),Wo=C.useRef({}),Gt=C.useRef(null),Vr=C.useRef(!1),{explosions:hu,triggerExplosion:Qo}=rK(Wo,Gt);C.useEffect(()=>{jc.initialize(S,S.actionProcessor,()=>e.gameMode!=="local",Ar),console.log("🔧 GameFlowManager initialized")},[]),C.useEffect(()=>{const V=ge=>{const{type:ue,phase:Se,playerId:Me,data:Re}=ge;if(console.log(`🔔 App.jsx received PhaseManager event: ${ue}`,{phase:Se,playerId:Me}),ue==="phaseTransition"){const{newPhase:Ke,previousPhase:Ht,firstPlayerResult:fn}=ge;console.log(`🔄 App.jsx handling phase transition: ${Ht} → ${Ke}`),Ke==="determineFirstPlayer"&&(console.log("🎯 First player determination phase started, showing modal"),ee(!0))}else ue==="phaseComplete"&&(console.log(`🎯 App.jsx handling phase completion: ${Se}`),ye===Se&&z(null),Se==="determineFirstPlayer"&&console.log("✅ Both players acknowledged first player determination"))},Q=jc.subscribe(V);return()=>{Q(),unsubscribeSimultaneous()}},[i,n,B]);const{turnPhase:ze,turn:Xr,currentPlayer:ur,firstPlayerOfRound:ya,firstPasserOfPreviousRound:Ah,firstPlayerOverride:Ch,passInfo:Qt,winner:un,unplacedSections:Ib,shieldsToAllocate:Eh,gameLog:Ja,placedSections:pu}=e,[Zi,ei]=C.useState(ur),ti=C.useRef(Qt),mu=C.useRef(ze),hl=C.useRef(un);C.useEffect(()=>{ti.current=Qt},[Qt]),C.useEffect(()=>{mu.current=ze},[ze]),C.useEffect(()=>{hl.current=un},[un]);const Oe=s(),Ie=l(),Zt=u(),Lr=d();if(!Oe||!Ie)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});const ni=C.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]),bn=C.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);C.useEffect(()=>{if(!i())return;const V=ge=>{if(console.log("🔥 P2P Event received in App:",ge),ge.type==="PHASE_COMPLETED"){const{phase:ue}=ge.data||ge;console.log(`🔥 Opponent completed phase: ${ue}`)}};return A.subscribe(V)},[i,A]);const ri=Oe?P(Oe,Zt):null,Ji=Ie?P(Ie,Lr):null,pl=C.useMemo(()=>Oe?Object.values(Oe.dronesOnBoard).flat().length:0,[Oe?.dronesOnBoard]),eo=C.useMemo(()=>Ie?Object.values(Ie.dronesOnBoard).flat().length:0,[Ie?.dronesOnBoard]),Zo=C.useMemo(()=>[...Oe.activeDronePool].sort((V,Q)=>V.class!==Q.class?V.class-Q.class:V.name.localeCompare(Q.name)),[Oe.activeDronePool]);C.useMemo(()=>Oe?Object.keys(Oe.shipSections).some(V=>Oe.shipSections[V].allocatedShields<O.getEffectiveSectionMaxShields(V,Oe,Zt)):!1,[Oe.shipSections,Zt,O]),C.useCallback(V=>{if(console.log(`🔥 sendPhaseCompletion called for phase: ${V}`),i()){const Q={type:"PHASE_COMPLETED",data:{phase:V}};console.log("🔥 Sending phase completion message:",Q),A.sendData(Q),console.log(`🔥 Sent phase completion: ${V}`)}else console.log("🔥 Not multiplayer, skipping network send")},[i,A]),C.useCallback(async()=>{zt(null),await x("turnTransition",{newPlayer:n(),reason:"aiReportClosed"})},[x,n]),C.useCallback(async()=>{la&&!la.card.effect.goAgain?await x("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):la&&la.card.effect.goAgain&&!un&&(await x("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),be({phase:ze,actionType:"another"}),oe(!0)),sl(null)},[x,n,r,la,un]),C.useEffect(()=>{const{validAbilityTargets:V,validCardTargets:Q}=De.calculateAllValidTargets(St,Fn,Fe,at,Oe,Ie);Vi(V),cl(Q),St&&(ln(null),fa(null))},[St,Fn,at,Oe,Ie,Fe]);const Wr=()=>{St&&(Yn(null),Be(null))},Qe=()=>{ln(null),cn(null)},xn=C.useCallback(async V=>{if(Vr.current){console.warn("Attack already in progress. Aborting duplicate call.");return}Vr.current=!0;try{const Q=ue=>{ll(Se=>[...Se,ue]),setTimeout(()=>ll(Se=>Se.filter(Me=>Me!==ue)),500)},ge=await x("attack",{attackDetails:V});V.targetId&&Q(V.targetId),V.attackingPlayer===r()&&zt({...ge.attackResult,isBlocking:!0}),ge.afterAttackEffects&&ge.afterAttackEffects.forEach(ue=>{ue.type==="EXPLOSION"&&Qo(ue.payload.targetId)}),Gi(null)}catch(Q){console.error("Error in resolveAttack:",Q),Gi(null),zt(null)}finally{Vr.current=!1}},[Qo,x,n,r]),to=C.useCallback(async(V,Q,ge)=>{try{const ue=await x("ability",{droneId:Q.id,abilityIndex:Q.abilities.indexOf(V),targetId:ge?.id||null});Wr()}catch(ue){console.error("Error in resolveAbility:",ue),Wr()}},[x,n]),no=C.useCallback(async(V,Q,ge)=>{const ue=await x("shipAbility",{ability:V,sectionName:Q,targetId:ge?.id||null,playerId:n()});if(ue.mandatoryAction){Wi(ue.mandatoryAction),Nr("hand"),ca(!0),fa(null),At(null);return}if(ue.requiresShieldReallocation){fa(null),At(null);return}return fa(null),At(null),ue},[x,n]),gu=C.useCallback(async(V,Q,ge,ue=null)=>{if(ge===r()){let Me="",Re="";if(Q)if(Q.name){if(Me=Q.name,Q.id&&Q.owner){const Ke=Q.owner===n()?Oe:Ie;for(const[Ht,fn]of Object.entries(Ke.dronesOnBoard))if(fn.some(Mt=>Mt.id===Q.id)){Re=Ht.replace("lane","Lane ");break}}}else Q.id.startsWith("lane")?(Me=`Lane ${Q.id.slice(-1)}`,Re=`Lane ${Q.id.slice(-1)}`):Me=Q.id.replace(/([A-Z])/g," $1").replace(/^./,Ke=>Ke.toUpperCase());sl({card:V,targetName:Me,targetLane:Re})}const Se=await x("cardPlay",{card:V,targetId:Q?.id||null,playerId:ge});if(Se.needsCardSelection){In({...Se.needsCardSelection,onConfirm:Me=>{ml(Me,Se.needsCardSelection,V,Q,ge,ue,Se.newPlayerStates),In(null)},onCancel:()=>{In(null),ge===n()&&(Qe(),Mr(null))}});return}return ge===n()&&(Qe(),Mr(null)),Se},[x,n,Oe,Ie]),ml=C.useCallback((V,Q,ge,ue,Se,Me,Re=null)=>{const{searchedCards:Ke,remainingDeck:Ht,discardPile:fn,shuffleAfter:Mt}=Q,Ct=Ke.filter(ao=>{const $h=ao.instanceId||`${ao.id}-${ao.name}`;return!V.some(bl=>(bl.instanceId||`${bl.id}-${bl.name}`)===$h)}),Kn=Re||{player1:Oe,player2:Ie},Sn=Se===n()?Kn[n()]:Kn[r()],es=[...Sn.hand,...V];let ai=[...Ht,...Ct];Mt&&(ai=ai.sort(()=>.5-Math.random()));const va={...Sn,deck:ai,hand:es,discardPile:fn};p({player:Sn.name,actionType:"CARD_SELECTION",source:ge.name,target:`Selected ${V.length} cards`,outcome:`Drew: ${V.map(ao=>ao.name).join(", ")}`},"handleCardSelection",Se===r()?Me:null);const Su={[n()]:Se===n()?{...Sn,deck:va.deck,hand:va.hand,discardPile:va.discardPile}:Kn[n()],[r()]:Se===r()?{...Sn,deck:va.deck,hand:va.hand,discardPile:va.discardPile}:Kn[r()]},ba=De.finishCardPlay(ge,Se,Su);S.setPlayerStates(ba.newPlayerStates.player1,ba.newPlayerStates.player2),Se===n()&&(Qe(),Mr(null))},[Oe,Ie,p]),gl=C.useCallback((V,Q,ge,ue)=>{const Se=De.resolveMultiMove(V,Q,ge,ue,Oe,l(),bn(),{logCallback:p,applyOnMoveEffectsCallback:De.applyOnMoveEffects,updateAurasCallback:De.updateAuras});h(n(),Se.newPlayerState),Se.shouldClearMultiSelectState&&cn(null),Se.shouldCancelCardSelection&&Qe()},[Oe,p,De,Zt,Lr]),ro=C.useCallback((V,Q,ge,ue)=>{const Se=De.resolveSingleMove(V,Q,ge,ue,Oe,l(),bn(),{logCallback:p,applyOnMoveEffectsCallback:De.applyOnMoveEffects,updateAurasCallback:De.updateAuras});h(n(),Se.newPlayerState),Se.shouldClearMultiSelectState&&cn(null),Se.shouldCancelCardSelection&&Qe()},[Oe,p,De,Zt,Lr]),Jo=V=>{Ki?Fi===V?ca(!1):Nr(V):(ca(!0),Nr(V))};C.useEffect(()=>{const{validAbilityTargets:V,validCardTargets:Q}=De.calculateAllValidTargets(St,Fn,Fe,at,Oe,Ie);Vi(V),cl(Q),St&&(ln(null),fa(null))},[St,Fn,at,Oe,Ie,Fe]),C.useEffect(()=>{un||De.checkGameStateForWinner(ni(),{logCallback:p,setWinnerCallback:y,showWinnerModalCallback:ae})},[Oe?.shipSections,Ie?.shipSections,un,p]),C.useEffect(()=>{if(ze==="action"){const V=De.calculatePotentialInterceptors(Ae,Oe,Ie,bn());vn(V)}else vn([])},[Ae,ze,Oe,Ie,De,Zt,Lr]),C.useEffect(()=>{pt(null)},[Ae]),C.useEffect(()=>{if(Ae&&!St&&ze==="action"){const V=G2(Wo.current[Ae.id],Gt.current);V&&Ko({visible:!0,start:V,end:{x:V.x,y:V.y}})}else Ko(V=>({...V,visible:!1}))},[Ae,ze,St]),C.useEffect(()=>{const V=ge=>{if(Wa.visible&&ga.current&&Gt.current){const ue=Gt.current.getBoundingClientRect(),Se=ge.clientX-ue.left,Me=ge.clientY-ue.top;ga.current.setAttribute("x2",Se),ga.current.setAttribute("y2",Me)}},Q=Gt.current;return Q?.addEventListener("mousemove",V),()=>{Q?.removeEventListener("mousemove",V)}},[Wa.visible]),C.useEffect(()=>{un&&Vr.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),Vr.current=!1)},[un,ze,ur]),C.useEffect(()=>{if(ze!=="deployment"&&ze!=="action"||un||$||he||I||J||Z||Qa||ur===Zi)return;const V=t(),Q=i();console.log("[MODAL UPDATE] Turn change detected:",{currentPlayer:ur,lastCurrentPlayer:Zi,myTurn:V,turnPhase:ze,isMultiplayerGame:Q,currentModalTitle:k?.title}),ei(ur),V?ze==="deployment"?(B(null),oe(!1)):ze==="action"&&(B({title:"Action Phase - Your Turn",text:"It's your turn to act. Select a drone to move or attack, play a card, or use an ability.",isBlocking:!0}),oe(!1)):(be({phase:ze,actionType:"action"}),oe(!0))},[ur,ze,t,i,Xr,un,$,he,I,J,Z,Qa,Zi,k?.title]);const yu=()=>{m(),Vr.current=!1,Be(null),B(null),zt(null),Yn(null),Vi([]),Wi(null),fl(!1),Ir(null),ln(null),cl([]),Mr(null),ae(!1)},Ph=async V=>{const{turnPhase:Q}=e;Q==="allocateShields"?await x("allocateShield",{sectionName:V,playerId:n()}):await x("reallocateShields",{action:"add",sectionName:V,playerId:n()})},wh=async V=>{if(Xo<=0||Oe.shipSections[V].allocatedShields<=0)return;(await x("reallocateShields",{action:"remove",sectionName:V,playerId:n()})).success&&(fu(ue=>ue-1),Qi(ue=>ue+1))},Oh=async V=>{if(ma<=0)return;(await x("reallocateShields",{action:"add",sectionName:V,playerId:n()})).success&&Qi(ge=>ge-1)},yl=async()=>{console.log("🎯 App.jsx: Acknowledging first player determination");const V=n();if((await x("acknowledgeFirstPlayer",{playerId:V})).success){ee(!1);const ge=e.commitments?.determineFirstPlayer||{};!(Object.keys(ge).length===2)&&e.gameMode!=="local"&&z("determineFirstPlayer")}},_h=V=>{if(pa){pa==="removing"?wh(V):pa==="adding"&&Oh(V);return}ze==="allocateShields"&&Ph(V)},Th=V=>{Qt[n()+"Passed"]||(Ae&&Ae.name===V.name?Be(null):(Be(V),Yn(null),Qe()))},vu=async V=>{try{const Q=await x("deployment",{droneData:Ae,laneId:V,playerId:n(),turn:Xr});Q.success?Be(null):B({title:Q.error,text:Q.message,isBlocking:!0})}catch(Q){console.error("Error executing deployment:",Q),B({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Dh=V=>{if(!(!Ae||ur!==n()||Qt[n()+"Passed"])){if(Xr===1){const Q=De.validateDeployment(Oe,Ae,Xr,pl,ri);if(!Q.isValid){B({title:Q.reason,text:Q.message,isBlocking:!0});return}const{budgetCost:ge,energyCost:ue}=Q;if(ue>0){q({lane:V,budgetCost:ge,energyCost:ue});return}}vu(V)}},jh=async()=>{Qt[`${n()}Passed`]||await x("playerPass",{playerId:n(),playerName:Oe.name,turnPhase:ze,passInfo:Qt,opponentPlayerId:r()})};C.useEffect(()=>{if(!Fr||Fr.attackingPlayer!==r())return;const V=De.calculateAiInterception(Fr,ni(),bn());V.hasInterceptors?ol({attackDetails:V.attackDetails,interceptors:V.interceptors}):xn(Fr)},[Fr,xn,Zt,Lr]);const bu=(V,Q,ge)=>{if(V.stopPropagation(),ze!=="action"||ur!==n()||Qt[n()+"Passed"])return;const ue=ge.cost||{};if(Q.isExhausted&&ue.exhausts!==!1){B({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(ue.energy&&Oe.energy<ue.energy){B({title:"Not Enough Energy",text:`This ability costs ${ue.energy} energy, but you only have ${Oe.energy}.`,isBlocking:!0});return}if(ge.targeting?.type==="LANE"&&ge.targeting?.location==="SAME_LANE"){const Se=De.getLaneOfDrone(Q.id,Oe);if(Se){Za({ability:ge,drone:Q,target:{id:Se,owner:n()}});return}}St&&St.drone.id===Q.id?Wr():(Yn({drone:Q,ability:ge}),Be(Q),Qe())},Nh=(V,Q,ge)=>{if(V.stopPropagation(),!(ze!=="action"||!t()||Qt[`${n()}Passed`])){if(Oe.energy<ge.cost.energy){B({title:"Not Enough Energy",text:`This ability costs ${ge.cost.energy} energy, but you only have ${Oe.energy}.`,isBlocking:!0});return}Fn?.ability.id===ge.id?fa(null):ge.targeting?(fa({sectionName:Q.name,ability:ge}),Be(null),Wr(),Qe()):ge.effect.type==="REALLOCATE_SHIELDS"?(uu("removing"),fu(ge.effect.value.maxShields),Qi(0),Ln(JSON.parse(JSON.stringify(Oe.shipSections))),du({ability:ge,sectionName:Q.name})):At({ability:ge,sectionName:Q.name,target:null})}},kh=(V,Q,ge)=>{if(V.stopPropagation(),console.log(`--- handleTokenClick triggered for ${Q.name} (isPlayer: ${ge}) ---`),Fe&&Fe.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:ue,maxSelection:Se}=Fe;ue.some(Re=>Re.id===Q.id)?cn(Re=>({...Re,selectedDrones:Re.selectedDrones.filter(Ke=>Ke.id!==Q.id)})):ue.length<Se&&cn(Re=>({...Re,selectedDrones:[...Re.selectedDrones,Q]}));return}if(ua.some(ue=>ue.id===Q.id)||kr.some(ue=>ue.id===Q.id)){console.log("Action: Targeting for an active card/ability."),xu(Q,"drone",ge);return}if(ze==="action"&&t()&&Ae&&!Ae.isExhausted&&!ge){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",Ae.name,`(ID: ${Ae.id})`),console.log("Target clicked:",Q.name,`(ID: ${Q.id})`);const[ue]=Object.entries(Oe.dronesOnBoard).find(([Me,Re])=>Re.some(Ke=>Ke.id===Ae.id))||[],[Se]=Object.entries(Ie.dronesOnBoard).find(([Me,Re])=>Re.some(Ke=>Ke.id===Q.id))||[];if(console.log("Calculated Attacker Lane:",ue),console.log("Calculated Target Lane:",Se),ue&&Se&&ue===Se)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),Ie.dronesOnBoard[Se].some(Ke=>E(Ke,Se).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),B({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const Ke={attacker:Ae,target:Q,targetType:"drone",lane:ue,attackingPlayer:n()},Ht=E(Ae,ue),fn=Ie.dronesOnBoard[ue].filter(Ct=>{const Kn=E(Ct,ue);return!Ct.isExhausted&&(Kn.speed>Ht.speed||Kn.keywords.has("ALWAYS_INTERCEPTS"))&&Ct.id!==Q.id}).sort((Ct,Kn)=>Ct.class-Kn.class);let Mt=null;fn.length>0&&(Q.class===void 0||fn[0].class<Q.class)&&(Mt=fn[0]),Mt?Hi({interceptor:Mt,originalTarget:Q,onClose:()=>{xn({...Ke,interceptor:Mt}),Hi(null),Be(null)}}):(xn(Ke),Be(null))}else console.log("FAILURE: Lanes do not match or could not be found."),B({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(Fe&&Fe.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:ue,maxSelection:Se}=Fe;ue.some(Re=>Re.id===Q.id)?cn(Re=>({...Re,selectedDrones:Re.selectedDrones.filter(Ke=>Ke.id!==Q.id)})):ue.length<Se&&cn(Re=>({...Re,selectedDrones:[...Re.selectedDrones,Q]}));return}if(Dn?.type==="destroy"&&ge){console.log("Action: Mandatory destruction."),Ir({type:"destroy",target:Q,onConfirm:()=>Ih(Q),onCancel:()=>Ir(null),text:`Are you sure you want to destroy your ${Q.name}?`});return}if(ge&&ze==="action"&&t()&&!Qt[`${n()}Passed`]){if(Q.isExhausted){console.log("Action prevented: Drone is exhausted.");return}Ae?.id===Q.id?(console.log("Action: Deselecting drone",Q.name),Be(null)):(console.log("Action: Selecting drone",Q.name),Be(Q),Wr(),Qe());return}console.log("Action: Fallback - showing drone details."),te(Q)},xu=(V,Q,ge)=>{if(Fn&&ua.some(ue=>ue.id===V.id)){At({ability:Fn.ability,sectionName:Fn.sectionName,target:V});return}if(St&&ua.some(ue=>ue.id===V.id)){to(St.ability,St.drone,V);return}if(at&&kr.some(ue=>ue.id===V.id)){const ue=ge?n():r();Mr({card:at,target:{...V,owner:ue}});return}if(ze==="action"&&t()&&Ae&&!Ae.isExhausted&&!ge&&Q==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",Ae.name,`(ID: ${Ae.id})`),console.log("Target clicked:",V.name,`(Type: ${Q})`);const[ue]=Object.entries(Oe.dronesOnBoard).find(([Se,Me])=>Me.some(Re=>Re.id===Ae.id))||[];if(console.log("Calculated Attacker Lane:",ue),ue){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const Se=Ie.dronesOnBoard[ue];if(Se&&Se.some(Re=>E(Re,ue).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),B({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const Re={attacker:Ae,target:V,targetType:"section",lane:ue,attackingPlayer:n()},Ke=E(Ae,ue),Ht=Ie.dronesOnBoard[ue].filter(Mt=>{const Ct=E(Mt,ue);return!Mt.isExhausted&&(Ct.speed>Ke.speed||Ct.keywords.has("ALWAYS_INTERCEPTS"))}).sort((Mt,Ct)=>Mt.class-Ct.class);let fn=null;Ht.length>0&&(fn=Ht[0]),fn?Hi({interceptor:fn,originalTarget:V,onClose:()=>{xn({...Re,interceptor:fn}),Hi(null),Be(null)}}):(xn(Re),Be(null))}}else console.log("FAILURE: Could not determine attacker lane."),B({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}Q==="drone"&&te(V)},Mh=(V,Q,ge)=>{if(V.stopPropagation(),St&&St.ability.targeting.type==="LANE"){const ue=ge?n():r();if(ua.some(Se=>Se.id===Q&&Se.owner===ue)){Za({ability:St.ability,drone:St.drone,target:{id:Q,owner:ue}});return}}if(Fe&&ge&&kr.some(ue=>ue.id===Q)){const{phase:ue,sourceLane:Se,selectedDrones:Me}=Fe;if(ue==="select_source_lane"){cn(Re=>({...Re,phase:"select_drones",sourceLane:Q}));return}if(ue==="select_destination_lane"){gl(Fe.card,Me,Se,Q);return}}if(Fe&&Fe.card.effect.type==="SINGLE_MOVE"&&Fe.phase==="select_destination"&&ge){kr.some(ue=>ue.id===Q)&&ro(Fe.card,Fe.selectedDrone,Fe.sourceLane,Q);return}if(at&&at.targeting.type==="LANE"){const ue=ge?n():r();if(kr.some(Se=>Se.id===Q&&Se.owner===ue)){Mr({card:at,target:{id:Q,owner:ue}});return}}if(at){Qe();return}if(St){Wr();return}if(ze==="deployment"&&ge)Dh(Q);else if(ze==="action"&&ge&&Ae){const[ue]=Object.entries(Oe.dronesOnBoard).find(([Re,Ke])=>Ke.some(Ht=>Ht.id===Ae.id))||[];if(!ue)return;const Se=parseInt(ue.replace("lane",""),10),Me=parseInt(Q.replace("lane",""),10);Math.abs(Se-Me)===1?ce({drone:Ae,from:ue,to:Q}):B({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},vl=V=>{if(!(ze!=="action"||!t()||Qt[`${n()}Passed`])&&!(Oe.energy<V.cost)){if(V.effect.type==="MULTI_MOVE"){Fe&&Fe.card.instanceId===V.instanceId?Qe():(cn({card:V,phase:"select_source_lane",sourceLane:null,selectedDrones:[],maxSelection:V.effect.count}),ln(V),Be(null),Yn(null));return}if(V.effect.type==="SINGLE_MOVE"){Fe&&Fe.card.instanceId===V.instanceId?Qe():(cn({card:V,phase:"select_drone",selectedDrone:null,sourceLane:null}),ln(V),Be(null),Yn(null));return}if(at?.instanceId===V.instanceId)Qe();else if(V.name==="System Sabotage"){const Q=De.getValidTargets(n(),null,V,Oe,Ie);da({card:V,targets:Q,opponentState:Ie}),ln(null),Yn(null),Be(null)}else if(V.type==="Upgrade"){const Q=De.getValidTargets(n(),null,V,Oe,Ie);Q.length>0?(ul({card:V,targets:Q}),ln(null),Yn(null),Be(null)):B({title:"No Valid Targets",text:`There are no drone types that can accept the '${V.name}' upgrade right now.`,isBlocking:!0})}else V.targeting?(ln(V),Be(null),Yn(null)):(Mr({card:V,target:null}),ln(null),Yn(null),Be(null))}},Rh=async V=>{const Q=Dn;p({player:Oe.name,actionType:"DISCARD_MANDATORY",source:V.name,target:"N/A",outcome:`Discarded ${V.name}.`},"handleConfirmMandatoryDiscard"),await x("optionalDiscard",{playerId:n(),cardsToDiscard:[V]}),Ir(null);const ge=Q.count-1;ge<=0?(Wi(null),Q.fromAbility):Wi(ue=>({...ue,count:ge}))},Ih=V=>{const Q=De.getLaneOfDrone(V.id,Oe);if(Q){let ge={...Oe,dronesOnBoard:{...Oe.dronesOnBoard}};ge.dronesOnBoard[Q]=ge.dronesOnBoard[Q].filter(Se=>Se.id!==V.id);const ue=De.onDroneDestroyed(ge,V);Object.assign(ge,ue),ge.dronesOnBoard=De.updateAuras(ge,l(),bn()),h(n(),ge)}Wi(ge=>{const ue=ge.count-1;if(ue<=0){if(eo>Ji.totals.cpuLimit){let Me={...Ie},Re=Object.values(Ie.dronesOnBoard).flat().length-P(Ie,Lr).totals.cpuLimit;for(let Ke=0;Ke<Re;Ke++){const Ht=Object.entries(Me.dronesOnBoard).flatMap(([Sn,es])=>es.map(ai=>({...ai,lane:Sn})));if(Ht.length===0)break;const fn=Math.min(...Ht.map(Sn=>Sn.class)),Mt=Ht.filter(Sn=>Sn.class===fn),Ct=Mt[Math.floor(Math.random()*Mt.length)];Me.dronesOnBoard[Ct.lane]=Me.dronesOnBoard[Ct.lane].filter(Sn=>Sn.id!==Ct.id);const Kn=De.onDroneDestroyed(Me,Ct);Object.assign(Me,Kn)}Me.dronesOnBoard=De.updateAuras(Me,s(),bn()),h(r(),Me)}return null}return{...ge,count:ue}}),Ir(null)},Lh=()=>{if(Ja.length===0){alert("The game log is empty.");return}const V=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],Q=Ja.map(Me=>[Me.round,Me.player,Me.actionType,Me.source,Me.target,Me.outcome,Me.debugSource||"N/A"].map(Ke=>`"${String(Ke).replace(/"/g,'""')}"`).join(",")),ge=[V.join(","),...Q].join(`
`),ue=new Blob([ge],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a");if(Se.download!==void 0){const Me=URL.createObjectURL(ue);Se.setAttribute("href",Me),Se.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Se.style.visibility="hidden",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)}};return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",ref:Gt,onClick:()=>{Wr(),Qe()},children:[v.jsx(DF,{visible:Wa.visible,start:Wa.start,end:Wa.end,lineRef:ga}),hu.map(V=>v.jsx(jF,{top:V.top,left:V.left},V.id)),v.jsx(yY,{localPlayerState:Oe,opponentPlayerState:Ie,localPlayerEffectiveStats:ri,opponentPlayerEffectiveStats:Ji,turnPhase:ze,turn:Xr,passInfo:Qt,firstPlayerOfRound:ya,shieldsToAllocate:Eh,shieldsToRemove:Xo,shieldsToAdd:ma,reallocationPhase:pa,totalLocalPlayerDrones:pl,totalOpponentPlayerDrones:eo,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,handlePlayerPass:jh,handleReset:yu,mandatoryAction:Dn,multiSelectState:Fe,AI_HAND_DEBUG_MODE:_,setShowAiHandModal:j,onShowDebugModal:()=>R(!0)}),v.jsx(xY,{localPlayerState:Oe,opponentPlayerState:Ie,localPlacedSections:Zt,opponentPlacedSections:Lr,selectedCard:at,validCardTargets:kr,abilityMode:St,validAbilityTargets:ua,multiSelectState:Fe,turnPhase:ze,reallocationPhase:pa,shipAbilityMode:Fn,hoveredTarget:Nt,selectedDrone:Ae,recentlyHitDrones:bh,potentialInterceptors:qi,droneRefs:Wo,mandatoryAction:Dn,gameEngine:De,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:bn,passInfo:Qt,handleTargetClick:xu,handleLaneClick:Mh,handleShipSectionClick:_h,handleShipAbilityClick:Nh,handleTokenClick:kh,handleAbilityIconClick:bu,setHoveredTarget:pt}),v.jsx(PF,{localPlayerState:Oe,localPlayerEffectiveStats:ri,sortedLocalActivePool:Zo,gameLog:Ja,footerView:Fi,isFooterOpen:Ki,multiSelectState:Fe,selectedCard:at,turnPhase:ze,mandatoryAction:Dn,handleFooterButtonClick:Jo,handleCardClick:vl,cancelCardSelection:Qe,downloadLogAsCSV:Lh,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Yr,setHoveredCardId:Xa,setIsViewDiscardModalOpen:Je,setIsViewDeckModalOpen:ve,handleToggleDroneSelection:Th,selectedDrone:Ae,setViewUpgradesModal:Kr,handleConfirmMandatoryDiscard:Rh,setConfirmationModal:Ir,turn:Xr,passInfo:Qt,validCardTargets:kr,gameEngine:De,opponentPlayerState:Ie,setAiDecisionLogToShow:Yi}),k&&v.jsx(Va,{title:k.title,text:k.text,onClose:k.onClose===null?null:k.onClose||(()=>B(null)),children:k.children}),v.jsx(BF,{show:$,firstPlayerOfRound:ya,localPlayerId:n(),localPlayerName:Oe.name,opponentPlayerName:Ie.name,turn:Xr,firstPasserOfPreviousRound:Ah,onContinue:yl}),v.jsx(UF,{show:he,onContinue:()=>pe(!1)}),v.jsx(zF,{show:I,onContinue:()=>K(!1)}),v.jsx(GF,{show:Y,isMultiplayer:i(),phase:re.phase,actionType:re.actionType}),v.jsx(HF,{show:!!ye,phase:ye,opponentName:Ie.name,roomCode:null}),v.jsx(VF,{deploymentConfirmation:J,show:!!J,onCancel:()=>q(null),onConfirm:async()=>{if(!J)return;const{lane:V}=J;await vu(V),q(null)}}),v.jsx(XF,{moveConfirmation:Z,show:!!Z,onCancel:()=>ce(null),onConfirm:async()=>{if(!Z)return;const{drone:V,from:Q,to:ge}=Z;await x("move",{droneId:V.id,fromLane:Q,toLane:ge,playerId:n()}),ce(null),Be(null)}}),v.jsx(QF,{interceptionModal:il,show:!!il,onClose:il?.onClose}),v.jsx(WF,{choiceData:Fo,show:!!Fo,onIntercept:V=>{xn({...Fo.attackDetails,interceptor:V}),ol(null)},onDecline:()=>{xn(Fo.attackDetails),ol(null)},gameEngine:De,turnPhase:ze,isMyTurn:t,passInfo:Qt,getLocalPlayerId:n,localPlayerState:Oe,shipAbilityMode:Fn,droneRefs:Wo,mandatoryAction:Dn}),v.jsx($F,{isOpen:!!le,drone:le,onClose:()=>te(null)}),v.jsx(LF,{report:jr,show:!!jr,onClose:()=>zt(null)}),la&&v.jsx(IF,{report:la,onClose:()=>sl(null)}),v.jsx(KF,{decisionLog:ou,show:!!ou,onClose:()=>Yi(null),getLocalPlayerId:n}),v.jsx(FF,{winner:un,localPlayerId:n(),show:un&&me,onClose:()=>ae(!1)}),v.jsx(YF,{mandatoryAction:Dn,effectiveStats:ri,show:Dn&&lu,onClose:()=>fl(!1)}),v.jsx(qF,{confirmationModal:cu,show:!!cu}),v.jsx(TF,{viewUpgradesModal:su,setViewUpgradesModal:Kr,destroyUpgradeModal:Xi,setDestroyUpgradeModal:da,upgradeSelectionModal:kt,setUpgradeSelectionModal:ul,resolveCardPlay:gu,getLocalPlayerId:n,cancelCardSelection:Qe}),v.jsx(ZF,{cardConfirmation:Qa,show:!!Qa,onCancel:()=>Mr(null),onConfirm:async()=>await gu(Qa.card,Qa.target,n())}),v.jsx(JF,{abilityConfirmation:Rr,show:!!Rr,onCancel:()=>Za(null),onConfirm:()=>{to(Rr.ability,Rr.drone,Rr.target),Za(null)}}),v.jsx(tK,{opponentPlayerState:Ie,show:N,debugMode:_,onClose:()=>j(!1)}),v.jsx(nK,{show:D,onClose:()=>R(!1),gameStateManager:S,gameDataService:O}),v.jsx(ww,{isOpen:fe,onClose:()=>ve(!1),cards:Oe.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(ww,{isOpen:de,onClose:()=>Je(!1),cards:Oe.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(RF,{isOpen:!!ha,onClose:ha?.onCancel||(()=>In(null)),onConfirm:ha?.onConfirm||(()=>{}),selectionData:ha}),v.jsx(eK,{shipAbilityConfirmation:Rn,show:!!Rn,onCancel:()=>At(null),onConfirm:async()=>await no(Rn.ability,Rn.sectionName,Rn.target)}),v.jsx(NF,{isVisible:!1,currentPlayer:ur,gameMode:e.gameMode,roomCode:null,lastAction:null,localPlayerState:Oe,opponentPlayerState:Ie,getLocalPlayerId:n})]})};function aK(){const{gameState:e}=Ri(),[t,n]=C.useState(!0);if(C.useEffect(()=>{const r=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(r)},[]),C.useEffect(()=>{Ar.initialize(jy,_n,e.selectedAIPersonality||jy[0],qe.actionProcessor,qe),console.log("🤖 AIPhaseProcessor initialized in AppRouter with full dependencies")},[e.selectedAIPersonality]),C.useEffect(()=>{jc.initialize(qe,qe.actionProcessor,()=>e.gameMode!=="local",Ar),qe.setGameFlowManager(jc),console.log("🔄 GameFlowManager initialized in AppRouter")},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading Drone Wars..."})});switch(e.appState){case"menu":return v.jsx(EA,{});case"lobby":return v.jsx(yR,{});case"inGame":switch(e.turnPhase){case"droneSelection":return v.jsx(bR,{});case"deckSelection":return v.jsx(xR,{});case"deckBuilding":return v.jsx(gY,{});case"placement":return v.jsx(AR,{});case"gameInitializing":return v.jsx(Ow,{});default:return v.jsx(Ow,{})}default:return console.warn("Unknown app state:",e.appState,"defaulting to menu"),v.jsx(EA,{})}}rk.createRoot(document.getElementById("root")).render(v.jsx(Tw.StrictMode,{children:v.jsx(aK,{})}));export{Gc as G,_n as f};
