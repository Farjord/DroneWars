function Lw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qm={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function Vk(){if(rA)return Ec;rA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return Ec.Fragment=t,Ec.jsx=n,Ec.jsxs=n,Ec}var aA;function Kk(){return aA||(aA=1,Qm.exports=Vk()),Qm.exports}var v=Kk(),Zm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA;function Wk(){if(iA)return je;iA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function g(j){return j===null||typeof j!="object"?null:(j=m&&j[m]||j["@@iterator"],typeof j=="function"?j:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function C(j,V,Y){this.props=j,this.context=V,this.refs=A,this.updater=Y||b}C.prototype.isReactComponent={},C.prototype.setState=function(j,V){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,V,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function P(){}P.prototype=C.prototype;function T(j,V,Y){this.props=j,this.context=V,this.refs=A,this.updater=Y||b}var O=T.prototype=new P;O.constructor=T,S(O,C.prototype),O.isPureReactComponent=!0;var M=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function k(j,V,Y,ie,ve,G){return Y=G.ref,{$$typeof:e,type:j,key:V,ref:Y!==void 0?Y:null,props:G}}function R(j,V){return k(j.type,V,void 0,void 0,void 0,j.props)}function U(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function H(j){var V={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Y){return V[Y]})}var q=/\/+/g;function K(j,V){return typeof j=="object"&&j!==null&&j.key!=null?H(""+j.key):V.toString(36)}function ce(){}function ue(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ce,ce):(j.status="pending",j.then(function(V){j.status==="pending"&&(j.status="fulfilled",j.value=V)},function(V){j.status==="pending"&&(j.status="rejected",j.reason=V)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ne(j,V,Y,ie,ve){var G=typeof j;(G==="undefined"||G==="boolean")&&(j=null);var te=!1;if(j===null)te=!0;else switch(G){case"bigint":case"string":case"number":te=!0;break;case"object":switch(j.$$typeof){case e:case t:te=!0;break;case h:return te=j._init,ne(te(j._payload),V,Y,ie,ve)}}if(te)return ve=ve(j),te=ie===""?"."+K(j,0):ie,M(ve)?(Y="",te!=null&&(Y=te.replace(q,"$&/")+"/"),ne(ve,V,Y,"",function(ae){return ae})):ve!=null&&(U(ve)&&(ve=R(ve,Y+(ve.key==null||j&&j.key===ve.key?"":(""+ve.key).replace(q,"$&/")+"/")+te)),V.push(ve)),1;te=0;var ye=ie===""?".":ie+":";if(M(j))for(var pe=0;pe<j.length;pe++)ie=j[pe],G=ye+K(ie,pe),te+=ne(ie,V,Y,G,ve);else if(pe=g(j),typeof pe=="function")for(j=pe.call(j),pe=0;!(ie=j.next()).done;)ie=ie.value,G=ye+K(ie,pe++),te+=ne(ie,V,Y,G,ve);else if(G==="object"){if(typeof j.then=="function")return ne(ue(j),V,Y,ie,ve);throw V=String(j),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return te}function I(j,V,Y){if(j==null)return j;var ie=[],ve=0;return ne(j,ie,"","",function(G){return V.call(Y,G,ve++)}),ie}function X(j){if(j._status===-1){var V=j._result;V=V(),V.then(function(Y){(j._status===0||j._status===-1)&&(j._status=1,j._result=Y)},function(Y){(j._status===0||j._status===-1)&&(j._status=2,j._result=Y)}),j._status===-1&&(j._status=0,j._result=V)}if(j._status===1)return j._result.default;throw j._result}var se=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function ge(){}return je.Children={map:I,forEach:function(j,V,Y){I(j,function(){V.apply(this,arguments)},Y)},count:function(j){var V=0;return I(j,function(){V++}),V},toArray:function(j){return I(j,function(V){return V})||[]},only:function(j){if(!U(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},je.Component=C,je.Fragment=n,je.Profiler=i,je.PureComponent=T,je.StrictMode=r,je.Suspense=p,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,je.__COMPILER_RUNTIME={__proto__:null,c:function(j){return N.H.useMemoCache(j)}},je.cache=function(j){return function(){return j.apply(null,arguments)}},je.cloneElement=function(j,V,Y){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ie=S({},j.props),ve=j.key,G=void 0;if(V!=null)for(te in V.ref!==void 0&&(G=void 0),V.key!==void 0&&(ve=""+V.key),V)!D.call(V,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&V.ref===void 0||(ie[te]=V[te]);var te=arguments.length-2;if(te===1)ie.children=Y;else if(1<te){for(var ye=Array(te),pe=0;pe<te;pe++)ye[pe]=arguments[pe+2];ie.children=ye}return k(j.type,ve,void 0,void 0,G,ie)},je.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:s,_context:j},j},je.createElement=function(j,V,Y){var ie,ve={},G=null;if(V!=null)for(ie in V.key!==void 0&&(G=""+V.key),V)D.call(V,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ve[ie]=V[ie]);var te=arguments.length-2;if(te===1)ve.children=Y;else if(1<te){for(var ye=Array(te),pe=0;pe<te;pe++)ye[pe]=arguments[pe+2];ve.children=ye}if(j&&j.defaultProps)for(ie in te=j.defaultProps,te)ve[ie]===void 0&&(ve[ie]=te[ie]);return k(j,G,void 0,void 0,null,ve)},je.createRef=function(){return{current:null}},je.forwardRef=function(j){return{$$typeof:u,render:j}},je.isValidElement=U,je.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:X}},je.memo=function(j,V){return{$$typeof:f,type:j,compare:V===void 0?null:V}},je.startTransition=function(j){var V=N.T,Y={};N.T=Y;try{var ie=j(),ve=N.S;ve!==null&&ve(Y,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(ge,se)}catch(G){se(G)}finally{N.T=V}},je.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},je.use=function(j){return N.H.use(j)},je.useActionState=function(j,V,Y){return N.H.useActionState(j,V,Y)},je.useCallback=function(j,V){return N.H.useCallback(j,V)},je.useContext=function(j){return N.H.useContext(j)},je.useDebugValue=function(){},je.useDeferredValue=function(j,V){return N.H.useDeferredValue(j,V)},je.useEffect=function(j,V,Y){var ie=N.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(j,V)},je.useId=function(){return N.H.useId()},je.useImperativeHandle=function(j,V,Y){return N.H.useImperativeHandle(j,V,Y)},je.useInsertionEffect=function(j,V){return N.H.useInsertionEffect(j,V)},je.useLayoutEffect=function(j,V){return N.H.useLayoutEffect(j,V)},je.useMemo=function(j,V){return N.H.useMemo(j,V)},je.useOptimistic=function(j,V){return N.H.useOptimistic(j,V)},je.useReducer=function(j,V,Y){return N.H.useReducer(j,V,Y)},je.useRef=function(j){return N.H.useRef(j)},je.useState=function(j){return N.H.useState(j)},je.useSyncExternalStore=function(j,V,Y){return N.H.useSyncExternalStore(j,V,Y)},je.useTransition=function(){return N.H.useTransition()},je.version="19.1.1",je}var oA;function hl(){return oA||(oA=1,Zm.exports=Wk()),Zm.exports}var E=hl();const $w=Hr(E),Xk=Lw({__proto__:null,default:$w},[E]);var Jm={exports:{}},Cc={},eg={exports:{}},tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA;function Qk(){return sA||(sA=1,(function(e){function t(I,X){var se=I.length;I.push(X);e:for(;0<se;){var ge=se-1>>>1,j=I[ge];if(0<i(j,X))I[ge]=X,I[se]=j,se=ge;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var X=I[0],se=I.pop();if(se!==X){I[0]=se;e:for(var ge=0,j=I.length,V=j>>>1;ge<V;){var Y=2*(ge+1)-1,ie=I[Y],ve=Y+1,G=I[ve];if(0>i(ie,se))ve<j&&0>i(G,ie)?(I[ge]=G,I[ve]=se,ge=ve):(I[ge]=ie,I[Y]=se,ge=Y);else if(ve<j&&0>i(G,se))I[ge]=G,I[ve]=se,ge=ve;else break e}}return X}function i(I,X){var se=I.sortIndex-X.sortIndex;return se!==0?se:I.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var p=[],f=[],h=1,m=null,g=3,b=!1,S=!1,A=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function M(I){for(var X=n(f);X!==null;){if(X.callback===null)r(f);else if(X.startTime<=I)r(f),X.sortIndex=X.expirationTime,t(p,X);else break;X=n(f)}}function N(I){if(A=!1,M(I),!S)if(n(p)!==null)S=!0,D||(D=!0,K());else{var X=n(f);X!==null&&ne(N,X.startTime-I)}}var D=!1,k=-1,R=5,U=-1;function H(){return C?!0:!(e.unstable_now()-U<R)}function q(){if(C=!1,D){var I=e.unstable_now();U=I;var X=!0;try{e:{S=!1,A&&(A=!1,T(k),k=-1),b=!0;var se=g;try{t:{for(M(I),m=n(p);m!==null&&!(m.expirationTime>I&&H());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,g=m.priorityLevel;var j=ge(m.expirationTime<=I);if(I=e.unstable_now(),typeof j=="function"){m.callback=j,M(I),X=!0;break t}m===n(p)&&r(p),M(I)}else r(p);m=n(p)}if(m!==null)X=!0;else{var V=n(f);V!==null&&ne(N,V.startTime-I),X=!1}}break e}finally{m=null,g=se,b=!1}X=void 0}}finally{X?K():D=!1}}}var K;if(typeof O=="function")K=function(){O(q)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ue=ce.port2;ce.port1.onmessage=q,K=function(){ue.postMessage(null)}}else K=function(){P(q,0)};function ne(I,X){k=P(function(){I(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var se=g;g=X;try{return I()}finally{g=se}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(I,X){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var se=g;g=I;try{return X()}finally{g=se}},e.unstable_scheduleCallback=function(I,X,se){var ge=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ge+se:ge):se=ge,I){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=se+j,I={id:h++,callback:X,priorityLevel:I,startTime:se,expirationTime:j,sortIndex:-1},se>ge?(I.sortIndex=se,t(f,I),n(p)===null&&I===n(f)&&(A?(T(k),k=-1):A=!0,ne(N,se-ge))):(I.sortIndex=j,t(p,I),S||b||(S=!0,D||(D=!0,K()))),I},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(I){var X=g;return function(){var se=g;g=X;try{return I.apply(this,arguments)}finally{g=se}}}})(tg)),tg}var lA;function Zk(){return lA||(lA=1,eg.exports=Qk()),eg.exports}var ng={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function Jk(){if(cA)return mn;cA=1;var e=hl();function t(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(p,f,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:p,containerInfo:f,implementation:h}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mn.createPortal=function(p,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(p,f,null,h)},mn.flushSync=function(p){var f=l.T,h=r.p;try{if(l.T=null,r.p=2,p)return p()}finally{l.T=f,r.p=h,r.d.f()}},mn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(p,f))},mn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},mn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var h=f.as,m=u(h,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:b}):h==="script"&&r.d.X(p,{crossOrigin:m,integrity:g,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},mn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=u(f.as,f.crossOrigin);r.d.M(p,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(p)},mn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,m=u(h,f.crossOrigin);r.d.L(p,h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},mn.preloadModule=function(p,f){if(typeof p=="string")if(f){var h=u(f.as,f.crossOrigin);r.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(p)},mn.requestFormReset=function(p){r.d.r(p)},mn.unstable_batchedUpdates=function(p,f){return p(f)},mn.useFormState=function(p,f,h){return l.H.useFormState(p,f,h)},mn.useFormStatus=function(){return l.H.useHostTransitionStatus()},mn.version="19.1.1",mn}var uA;function Bw(){if(uA)return ng.exports;uA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ng.exports=Jk(),ng.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA;function eM(){if(dA)return Cc;dA=1;var e=Zk(),t=hl(),n=Bw();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function p(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,d=o;;){var y=c.return;if(y===null)break;var x=y.alternate;if(x===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===c)return u(y),a;if(x===d)return u(y),o;x=x.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=x;else{for(var w=!1,_=y.child;_;){if(_===c){w=!0,c=y,d=x;break}if(_===d){w=!0,d=y,c=x;break}_=_.sibling}if(!w){for(_=x.child;_;){if(_===c){w=!0,c=x,d=y;break}if(_===d){w=!0,d=x,c=y;break}_=_.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function f(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=f(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function K(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Symbol.for("react.client.reference");function ue(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ce?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case O:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case M:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return o=a.displayName||null,o!==null?o:ue(a.type)||"Memo";case R:o=a._payload,a=a._init;try{return ue(a(o))}catch{}}return null}var ne=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},ge=[],j=-1;function V(a){return{current:a}}function Y(a){0>j||(a.current=ge[j],ge[j]=null,j--)}function ie(a,o){j++,ge[j]=a.current,a.current=o}var ve=V(null),G=V(null),te=V(null),ye=V(null);function pe(a,o){switch(ie(te,o),ie(G,a),ie(ve,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?N1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=N1(o),a=k1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Y(ve),ie(ve,a)}function ae(){Y(ve),Y(G),Y(te)}function de(a){a.memoizedState!==null&&ie(ye,a);var o=ve.current,c=k1(o,a.type);o!==c&&(ie(G,a),ie(ve,c))}function be(a){G.current===a&&(Y(ve),Y(G)),ye.current===a&&(Y(ye),vc._currentValue=se)}var fe=Object.prototype.hasOwnProperty,rt=e.unstable_scheduleCallback,Ie=e.unstable_cancelCallback,Ot=e.unstable_shouldYield,Ct=e.unstable_requestPaint,pt=e.unstable_now,Yr=e.unstable_getCurrentPriorityLevel,ca=e.unstable_ImmediatePriority,ts=e.unstable_UserBlockingPriority,Wi=e.unstable_NormalPriority,We=e.unstable_LowPriority,zt=e.unstable_IdlePriority,Lp=e.log,vu=e.unstable_setDisableYieldValue,Xi=null,An=null;function ir(a){if(typeof Lp=="function"&&vu(a),An&&typeof An.setStrictMode=="function")try{An.setStrictMode(Xi,a)}catch{}}var Mn=Math.clz32?Math.clz32:$p,ns=Math.log,Qi=Math.LN2;function $p(a){return a>>>=0,a===0?32:31-(ns(a)/Qi|0)|0}var Zi=256,rs=4194304;function Fr(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function as(a,o,c){var d=a.pendingLanes;if(d===0)return 0;var y=0,x=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var _=d&134217727;return _!==0?(d=_&~x,d!==0?y=Fr(d):(w&=_,w!==0?y=Fr(w):c||(c=_&~a,c!==0&&(y=Fr(c))))):(_=d&~x,_!==0?y=Fr(_):w!==0?y=Fr(w):c||(c=d&~a,c!==0&&(y=Fr(c)))),y===0?0:o!==0&&o!==y&&(o&x)===0&&(x=y&-y,c=o&-o,x>=c||x===32&&(c&4194048)!==0)?o:y}function Ji(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function ua(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function is(){var a=Zi;return Zi<<=1,(Zi&4194048)===0&&(Zi=256),a}function wl(){var a=rs;return rs<<=1,(rs&62914560)===0&&(rs=4194304),a}function os(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Ja(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Ol(a,o,c,d,y,x){var w=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var _=a.entanglements,L=a.expirationTimes,W=a.hiddenUpdates;for(c=w&~c;0<c;){var re=31-Mn(c),le=1<<re;_[re]=0,L[re]=-1;var Q=W[re];if(Q!==null)for(W[re]=null,re=0;re<Q.length;re++){var Z=Q[re];Z!==null&&(Z.lane&=-536870913)}c&=~le}d!==0&&Tl(a,d,0),x!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=x&~(w&~o))}function Tl(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-Mn(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|c&4194090}function ss(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var d=31-Mn(c),y=1<<d;y&o|a[d]&o&&(a[d]|=o),c&=~y}}function _l(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function bu(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ei(){var a=X.p;return a!==0?a:(a=window.event,a===void 0?32:Q1(a.type))}function xu(a,o){var c=X.p;try{return X.p=a,o()}finally{X.p=c}}var da=Math.random().toString(36).slice(2),rn="__reactFiber$"+da,He="__reactProps$"+da,En="__reactContainer$"+da,fa="__reactEvents$"+da,Dl="__reactListeners$"+da,or="__reactHandles$"+da,Vr="__reactResources$"+da,Nr="__reactMarker$"+da;function kr(a){delete a[rn],delete a[He],delete a[fa],delete a[Dl],delete a[or]}function Mt(a){var o=a[rn];if(o)return o;for(var c=a.parentNode;c;){if(o=c[En]||c[rn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=I1(a);a!==null;){if(c=a[rn])return c;a=I1(a)}return o}a=c,c=a.parentNode}return null}function Cn(a){if(a=a[rn]||a[En]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function Hn(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Kr(a){var o=a[Vr];return o||(o=a[Vr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function xt(a){a[Nr]=!0}var sr=new Set,ti={};function lr(a,o){Xe(a,o),Xe(a+"Capture",o)}function Xe(a,o){for(ti[a]=o,a=0;a<o.length;a++)sr.add(o[a])}var Mr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Su={},Nl={};function Bp(a){return fe.call(Nl,a)?!0:fe.call(Su,a)?!1:Mr.test(a)?Nl[a]=!0:(Su[a]=!0,!1)}function eo(a,o,c){if(Bp(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function ls(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function cr(a,o,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+d)}}var ur,ni;function ri(a){if(ur===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);ur=o&&o[1]||"",ni=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ur+a+ni}var cs=!1;function us(a,o){if(!a||cs)return"";cs=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Z){var Q=Z}Reflect.construct(a,[],le)}else{try{le.call()}catch(Z){Q=Z}a.call(le.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(le=a())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),w=x[0],_=x[1];if(w&&_){var L=w.split(`
`),W=_.split(`
`);for(y=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;y<W.length&&!W[y].includes("DetermineComponentFrameRoot");)y++;if(d===L.length||y===W.length)for(d=L.length-1,y=W.length-1;1<=d&&0<=y&&L[d]!==W[y];)y--;for(;1<=d&&0<=y;d--,y--)if(L[d]!==W[y]){if(d!==1||y!==1)do if(d--,y--,0>y||L[d]!==W[y]){var re=`
`+L[d].replace(" at new "," at ");return a.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",a.displayName)),re}while(1<=d&&0<=y);break}}}finally{cs=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?ri(c):""}function pa(a){switch(a.tag){case 26:case 27:case 5:return ri(a.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 15:return us(a.type,!1);case 11:return us(a.type.render,!1);case 1:return us(a.type,!0);case 31:return ri("Activity");default:return""}}function to(a){try{var o="";do o+=pa(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function an(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Wr(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function kl(a){var o=Wr(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),d=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,x=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(w){d=""+w,x.call(this,w)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function ai(a){a._valueTracker||(a._valueTracker=kl(a))}function ha(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return a&&(d=Wr(a)?a.checked?"true":"false":a.value),a=d,a!==c?(o.setValue(a),!0):!1}function ii(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var ds=/[\n"\\]/g;function Pn(a){return a.replace(ds,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function fs(a,o,c,d,y,x,w,_){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),o!=null?w==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+an(o)):a.value!==""+an(o)&&(a.value=""+an(o)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),o!=null?ps(a,w,an(o)):c!=null?ps(a,w,an(c)):d!=null&&a.removeAttribute("value"),y==null&&x!=null&&(a.defaultChecked=!!x),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+an(_):a.removeAttribute("name")}function Au(a,o,c,d,y,x,w,_){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),o!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||o!=null))return;c=c!=null?""+an(c):"",o=o!=null?""+an(o):c,_||o===a.value||(a.value=o),a.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=_?a.checked:!!d,a.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function ps(a,o,c){o==="number"&&ii(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function no(a,o,c,d){if(a=a.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=o.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&d&&(a[c].defaultSelected=!0)}else{for(c=""+an(c),o=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,d&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function Up(a,o,c){if(o!=null&&(o=""+an(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+an(c):""}function hs(a,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(ne(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=an(o),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d)}function ma(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var ex=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zp(a,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,c):typeof c!="number"||c===0||ex.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function Eu(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&zp(a,y,d)}else for(var x in o)o.hasOwnProperty(x)&&zp(a,x,o[x])}function ms(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ro=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ao(a){return ro.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var jr=null;function Rr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var oi=null,ga=null;function lt(a){var o=Cn(a);if(o&&(a=o.stateNode)){var c=a[He]||null;e:switch(a=o.stateNode,o.type){case"input":if(fs(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Pn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==a&&d.form===a.form){var y=d[He]||null;if(!y)throw Error(r(90));fs(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===a.form&&ha(d)}break e;case"textarea":Up(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&no(a,!!c.multiple,o,!1)}}}var ya=!1;function va(a,o,c){if(ya)return a(o,c);ya=!0;try{var d=a(o);return d}finally{if(ya=!1,(oi!==null||ga!==null)&&(vd(),oi&&(o=oi,a=ga,ga=oi=null,lt(o),a)))for(o=0;o<a.length;o++)lt(a[o])}}function si(a,o){var c=a.stateNode;if(c===null)return null;var d=c[He]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cu=!1;if(Xr)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){Cu=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{Cu=!1}var jt=null,Pu=null,ys=null;function wu(){if(ys)return ys;var a,o=Pu,c=o.length,d,y="value"in jt?jt.value:jt.textContent,x=y.length;for(a=0;a<c&&o[a]===y[a];a++);var w=c-a;for(d=1;d<=w&&o[c-d]===y[x-d];d++);return ys=y.slice(a,1<d?1-d:void 0)}function li(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Ml(){return!0}function Gp(){return!1}function wn(a){function o(c,d,y,x,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=x,this.target=w,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(c=a[_],this[_]=c?c(x):x[_]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ml:Gp,this.isPropagationStopped=Gp,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),o}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vs=wn(ba),io=h({},ba,{view:0,detail:0}),De=wn(io),Ue,xa,Qr,oo=h({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Il,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Qr&&(Qr&&a.type==="mousemove"?(Ue=a.screenX-Qr.screenX,xa=a.screenY-Qr.screenY):xa=Ue=0,Qr=a),Ue)},movementY:function(a){return"movementY"in a?a.movementY:xa}}),so=wn(oo),Ou=h({},oo,{dataTransfer:0}),Tu=wn(Ou),_u=h({},io,{relatedTarget:0}),jl=wn(_u),Ze=h({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),Hp=wn(Ze),qp=h({},ba,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Sa=wn(qp),on=h({},ba,{data:0}),lo=wn(on),Du={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fp(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Rl[a])?!!o[a]:!1}function Il(){return Fp}var Vp=h({},io,{key:function(a){if(a.key){var o=Du[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=li(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Yp[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Il,charCode:function(a){return a.type==="keypress"?li(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?li(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Kp=wn(Vp),Wp=h({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nu=wn(Wp),Xp=h({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Il}),Qp=wn(Xp),Zp=h({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jp=wn(Zp),eh=h({},oo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),th=wn(eh),nh=h({},ba,{newState:0,oldState:0}),rh=wn(nh),ah=[9,13,27,32],bs=Xr&&"CompositionEvent"in window,co=null;Xr&&"documentMode"in document&&(co=document.documentMode);var ih=Xr&&"TextEvent"in window&&!co,ku=Xr&&(!bs||co&&8<co&&11>=co),Mu=" ",ju=!1;function Ll(a,o){switch(a){case"keyup":return ah.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ru(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ci=!1;function oh(a,o){switch(a){case"compositionend":return Ru(o);case"keypress":return o.which!==32?null:(ju=!0,Mu);case"textInput":return a=o.data,a===Mu&&ju?null:a;default:return null}}function sh(a,o){if(ci)return a==="compositionend"||!bs&&Ll(a,o)?(a=wu(),ys=Pu=jt=null,ci=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ku&&o.locale!=="ko"?null:o.data;default:return null}}var lh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iu(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!lh[a.type]:o==="textarea"}function Lu(a,o,c,d){oi?ga?ga.push(d):ga=[d]:oi=d,o=Cd(o,"onChange"),0<o.length&&(c=new vs("onChange","change",null,c,d),a.push({event:c,listeners:o}))}var uo=null,B=null;function J(a){w1(a,0)}function me(a){var o=Hn(a);if(ha(o))return a}function he(a,o){if(a==="change")return o}var Se=!1;if(Xr){var Le;if(Xr){var ke="oninput"in document;if(!ke){var Ye=document.createElement("div");Ye.setAttribute("oninput","return;"),ke=typeof Ye.oninput=="function"}Le=ke}else Le=!1;Se=Le&&(!document.documentMode||9<document.documentMode)}function jn(){uo&&(uo.detachEvent("onpropertychange",Zr),B=uo=null)}function Zr(a){if(a.propertyName==="value"&&me(B)){var o=[];Lu(o,B,a,Rr(a)),va(J,o)}}function fo(a,o,c){a==="focusin"?(jn(),uo=o,B=c,uo.attachEvent("onpropertychange",Zr)):a==="focusout"&&jn()}function Aa(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return me(B)}function ui(a,o){if(a==="click")return me(o)}function Ea(a,o){if(a==="input"||a==="change")return me(o)}function ch(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var sn=typeof Object.is=="function"?Object.is:ch;function dr(a,o){if(sn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!fe.call(o,y)||!sn(a[y],o[y]))return!1}return!0}function $u(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function $l(a,o){var c=$u(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=o&&d>=o)return{node:c,offset:o-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=$u(c)}}function di(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?di(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Bu(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=ii(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=ii(a.document)}return o}function po(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var tx=Xr&&"documentMode"in document&&11>=document.documentMode,xs=null,uh=null,Bl=null,dh=!1;function nx(a,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;dh||xs==null||xs!==ii(d)||(d=xs,"selectionStart"in d&&po(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Bl&&dr(Bl,d)||(Bl=d,d=Cd(uh,"onSelect"),0<d.length&&(o=new vs("onSelect","select",null,o,c),a.push({event:o,listeners:d}),o.target=xs)))}function ho(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var Ss={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},fh={},rx={};Xr&&(rx=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function mo(a){if(fh[a])return fh[a];if(!Ss[a])return a;var o=Ss[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in rx)return fh[a]=o[c];return a}var ax=mo("animationend"),ix=mo("animationiteration"),ox=mo("animationstart"),_N=mo("transitionrun"),DN=mo("transitionstart"),NN=mo("transitioncancel"),sx=mo("transitionend"),lx=new Map,ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ph.push("scrollEnd");function Ir(a,o){lx.set(a,o),lr(o,[a])}var cx=new WeakMap;function fr(a,o){if(typeof a=="object"&&a!==null){var c=cx.get(a);return c!==void 0?c:(o={value:a,source:o,stack:to(o)},cx.set(a,o),o)}return{value:a,source:o,stack:to(o)}}var pr=[],As=0,hh=0;function Uu(){for(var a=As,o=hh=As=0;o<a;){var c=pr[o];pr[o++]=null;var d=pr[o];pr[o++]=null;var y=pr[o];pr[o++]=null;var x=pr[o];if(pr[o++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}x!==0&&ux(c,y,x)}}function zu(a,o,c,d){pr[As++]=a,pr[As++]=o,pr[As++]=c,pr[As++]=d,hh|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function mh(a,o,c,d){return zu(a,o,c,d),Gu(a)}function Es(a,o){return zu(a,null,null,o),Gu(a)}function ux(a,o,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var y=!1,x=a.return;x!==null;)x.childLanes|=c,d=x.alternate,d!==null&&(d.childLanes|=c),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(y=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,y&&o!==null&&(y=31-Mn(c),a=x.hiddenUpdates,d=a[y],d===null?a[y]=[o]:d.push(o),o.lane=c|536870912),x):null}function Gu(a){if(50<uc)throw uc=0,Sm=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Cs={};function kN(a,o,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(a,o,c,d){return new kN(a,o,c,d)}function gh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ca(a,o){var c=a.alternate;return c===null?(c=qn(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function dx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Hu(a,o,c,d,y,x){var w=0;if(d=a,typeof a=="function")gh(a)&&(w=1);else if(typeof a=="string")w=jk(a,c,ve.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=qn(31,c,o,y),a.elementType=U,a.lanes=x,a;case S:return go(c.children,y,x,o);case A:w=8,y|=24;break;case C:return a=qn(12,c,o,y|2),a.elementType=C,a.lanes=x,a;case N:return a=qn(13,c,o,y),a.elementType=N,a.lanes=x,a;case D:return a=qn(19,c,o,y),a.elementType=D,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case P:case O:w=10;break e;case T:w=9;break e;case M:w=11;break e;case k:w=14;break e;case R:w=16,d=null;break e}w=29,c=Error(r(130,a===null?"null":typeof a,"")),d=null}return o=qn(w,c,o,y),o.elementType=a,o.type=d,o.lanes=x,o}function go(a,o,c,d){return a=qn(7,a,d,o),a.lanes=c,a}function yh(a,o,c){return a=qn(6,a,null,o),a.lanes=c,a}function vh(a,o,c){return o=qn(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Ps=[],ws=0,qu=null,Yu=0,hr=[],mr=0,yo=null,Pa=1,wa="";function vo(a,o){Ps[ws++]=Yu,Ps[ws++]=qu,qu=a,Yu=o}function fx(a,o,c){hr[mr++]=Pa,hr[mr++]=wa,hr[mr++]=yo,yo=a;var d=Pa;a=wa;var y=32-Mn(d)-1;d&=~(1<<y),c+=1;var x=32-Mn(o)+y;if(30<x){var w=y-y%5;x=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Pa=1<<32-Mn(o)+y|c<<y|d,wa=x+a}else Pa=1<<x|c<<y|d,wa=a}function bh(a){a.return!==null&&(vo(a,1),fx(a,1,0))}function xh(a){for(;a===qu;)qu=Ps[--ws],Ps[ws]=null,Yu=Ps[--ws],Ps[ws]=null;for(;a===yo;)yo=hr[--mr],hr[mr]=null,wa=hr[--mr],hr[mr]=null,Pa=hr[--mr],hr[mr]=null}var On=null,Pt=null,Qe=!1,bo=null,Jr=!1,Sh=Error(r(519));function xo(a){var o=Error(r(418,""));throw Gl(fr(o,a)),Sh}function px(a){var o=a.stateNode,c=a.type,d=a.memoizedProps;switch(o[rn]=a,o[He]=d,c){case"dialog":Ge("cancel",o),Ge("close",o);break;case"iframe":case"object":case"embed":Ge("load",o);break;case"video":case"audio":for(c=0;c<fc.length;c++)Ge(fc[c],o);break;case"source":Ge("error",o);break;case"img":case"image":case"link":Ge("error",o),Ge("load",o);break;case"details":Ge("toggle",o);break;case"input":Ge("invalid",o),Au(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),ai(o);break;case"select":Ge("invalid",o);break;case"textarea":Ge("invalid",o),hs(o,d.value,d.defaultValue,d.children),ai(o)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||D1(o.textContent,c)?(d.popover!=null&&(Ge("beforetoggle",o),Ge("toggle",o)),d.onScroll!=null&&Ge("scroll",o),d.onScrollEnd!=null&&Ge("scrollend",o),d.onClick!=null&&(o.onclick=Pd),o=!0):o=!1,o||xo(a)}function hx(a){for(On=a.return;On;)switch(On.tag){case 5:case 13:Jr=!1;return;case 27:case 3:Jr=!0;return;default:On=On.return}}function Ul(a){if(a!==On)return!1;if(!Qe)return hx(a),Qe=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Lm(a.type,a.memoizedProps)),c=!c),c&&Pt&&xo(a),hx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){Pt=$r(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}Pt=null}}else o===27?(o=Pt,Oi(a.type)?(a=zm,zm=null,Pt=a):Pt=o):Pt=On?$r(a.stateNode.nextSibling):null;return!0}function zl(){Pt=On=null,Qe=!1}function mx(){var a=bo;return a!==null&&(Ln===null?Ln=a:Ln.push.apply(Ln,a),bo=null),a}function Gl(a){bo===null?bo=[a]:bo.push(a)}var Ah=V(null),So=null,Oa=null;function fi(a,o,c){ie(Ah,o._currentValue),o._currentValue=c}function Ta(a){a._currentValue=Ah.current,Y(Ah)}function Eh(a,o,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===c)break;a=a.return}}function Ch(a,o,c,d){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var x=y.dependencies;if(x!==null){var w=y.child;x=x.firstContext;e:for(;x!==null;){var _=x;x=y;for(var L=0;L<o.length;L++)if(_.context===o[L]){x.lanes|=c,_=x.alternate,_!==null&&(_.lanes|=c),Eh(x.return,c,a),d||(w=null);break e}x=_.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=c,x=w.alternate,x!==null&&(x.lanes|=c),Eh(w,c,a),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===a){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function Hl(a,o,c,d){a=null;for(var y=o,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var _=y.type;sn(y.pendingProps.value,w.value)||(a!==null?a.push(_):a=[_])}}else if(y===ye.current){if(w=y.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(vc):a=[vc])}y=y.return}a!==null&&Ch(o,a,c,d),o.flags|=262144}function Fu(a){for(a=a.firstContext;a!==null;){if(!sn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ao(a){So=a,Oa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function hn(a){return gx(So,a)}function Vu(a,o){return So===null&&Ao(a),gx(a,o)}function gx(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Oa===null){if(a===null)throw Error(r(308));Oa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Oa=Oa.next=o;return c}var MN=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},jN=e.unstable_scheduleCallback,RN=e.unstable_NormalPriority,Gt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new MN,data:new Map,refCount:0}}function ql(a){a.refCount--,a.refCount===0&&jN(RN,function(){a.controller.abort()})}var Yl=null,wh=0,Os=0,Ts=null;function IN(a,o){if(Yl===null){var c=Yl=[];wh=0,Os=Tm(),Ts={status:"pending",value:void 0,then:function(d){c.push(d)}}}return wh++,o.then(yx,yx),o}function yx(){if(--wh===0&&Yl!==null){Ts!==null&&(Ts.status="fulfilled");var a=Yl;Yl=null,Os=0,Ts=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function LN(a,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var vx=I.S;I.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&IN(a,o),vx!==null&&vx(a,o)};var Eo=V(null);function Oh(){var a=Eo.current;return a!==null?a:dt.pooledCache}function Ku(a,o){o===null?ie(Eo,Eo.current):ie(Eo,o.pool)}function bx(){var a=Oh();return a===null?null:{parent:Gt._currentValue,pool:a}}var Fl=Error(r(460)),xx=Error(r(474)),Wu=Error(r(542)),Th={then:function(){}};function Sx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Xu(){}function Ax(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Xu,Xu),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Cx(a),a;default:if(typeof o.status=="string")o.then(Xu,Xu);else{if(a=dt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Cx(a),a}throw Vl=o,Fl}}var Vl=null;function Ex(){if(Vl===null)throw Error(r(459));var a=Vl;return Vl=null,a}function Cx(a){if(a===Fl||a===Wu)throw Error(r(483))}var pi=!1;function _h(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function hi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function mi(a,o,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Je&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=Gu(a),ux(a,null,c),o}return zu(a,d,o,c),Gu(a)}function Kl(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,ss(a,c)}}function Nh(a,o){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?y=x=w:x=x.next=w,c=c.next}while(c!==null);x===null?y=x=o:x=x.next=o}else y=x=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var kh=!1;function Wl(){if(kh){var a=Ts;if(a!==null)throw a}}function Xl(a,o,c,d){kh=!1;var y=a.updateQueue;pi=!1;var x=y.firstBaseUpdate,w=y.lastBaseUpdate,_=y.shared.pending;if(_!==null){y.shared.pending=null;var L=_,W=L.next;L.next=null,w===null?x=W:w.next=W,w=L;var re=a.alternate;re!==null&&(re=re.updateQueue,_=re.lastBaseUpdate,_!==w&&(_===null?re.firstBaseUpdate=W:_.next=W,re.lastBaseUpdate=L))}if(x!==null){var le=y.baseState;w=0,re=W=L=null,_=x;do{var Q=_.lane&-536870913,Z=Q!==_.lane;if(Z?(qe&Q)===Q:(d&Q)===Q){Q!==0&&Q===Os&&(kh=!0),re!==null&&(re=re.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Ne=a,Te=_;Q=o;var ot=c;switch(Te.tag){case 1:if(Ne=Te.payload,typeof Ne=="function"){le=Ne.call(ot,le,Q);break e}le=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Te.payload,Q=typeof Ne=="function"?Ne.call(ot,le,Q):Ne,Q==null)break e;le=h({},le,Q);break e;case 2:pi=!0}}Q=_.callback,Q!==null&&(a.flags|=64,Z&&(a.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:_.tag,payload:_.payload,callback:_.callback,next:null},re===null?(W=re=Z,L=le):re=re.next=Z,w|=Q;if(_=_.next,_===null){if(_=y.shared.pending,_===null)break;Z=_,_=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);re===null&&(L=le),y.baseState=L,y.firstBaseUpdate=W,y.lastBaseUpdate=re,x===null&&(y.shared.lanes=0),Ei|=w,a.lanes=w,a.memoizedState=le}}function Px(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function wx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Px(c[a],o)}var _s=V(null),Qu=V(0);function Ox(a,o){a=Ra,ie(Qu,a),ie(_s,o),Ra=a|o.baseLanes}function Mh(){ie(Qu,Ra),ie(_s,_s.current)}function jh(){Ra=Qu.current,Y(_s),Y(Qu)}var gi=0,$e=null,at=null,Rt=null,Zu=!1,Ds=!1,Co=!1,Ju=0,Ql=0,Ns=null,$N=0;function _t(){throw Error(r(321))}function Rh(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!sn(a[c],o[c]))return!1;return!0}function Ih(a,o,c,d,y,x){return gi=x,$e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=a===null||a.memoizedState===null?uS:dS,Co=!1,x=c(d,y),Co=!1,Ds&&(x=_x(o,c,d,y)),Tx(a),x}function Tx(a){I.H=id;var o=at!==null&&at.next!==null;if(gi=0,Rt=at=$e=null,Zu=!1,Ql=0,Ns=null,o)throw Error(r(300));a===null||Wt||(a=a.dependencies,a!==null&&Fu(a)&&(Wt=!0))}function _x(a,o,c,d){$e=a;var y=0;do{if(Ds&&(Ns=null),Ql=0,Ds=!1,25<=y)throw Error(r(301));if(y+=1,Rt=at=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}I.H=YN,x=o(c,d)}while(Ds);return x}function BN(){var a=I.H,o=a.useState()[0];return o=typeof o.then=="function"?Zl(o):o,a=a.useState()[0],(at!==null?at.memoizedState:null)!==a&&($e.flags|=1024),o}function Lh(){var a=Ju!==0;return Ju=0,a}function $h(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function Bh(a){if(Zu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Zu=!1}gi=0,Rt=at=$e=null,Ds=!1,Ql=Ju=0,Ns=null}function Rn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?$e.memoizedState=Rt=a:Rt=Rt.next=a,Rt}function It(){if(at===null){var a=$e.alternate;a=a!==null?a.memoizedState:null}else a=at.next;var o=Rt===null?$e.memoizedState:Rt.next;if(o!==null)Rt=o,at=a;else{if(a===null)throw $e.alternate===null?Error(r(467)):Error(r(310));at=a,a={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Rt===null?$e.memoizedState=Rt=a:Rt=Rt.next=a}return Rt}function Uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(a){var o=Ql;return Ql+=1,Ns===null&&(Ns=[]),a=Ax(Ns,a,o),o=$e,(Rt===null?o.memoizedState:Rt.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?uS:dS),a}function ed(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Zl(a);if(a.$$typeof===O)return hn(a)}throw Error(r(438,String(a)))}function zh(a){var o=null,c=$e.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=$e.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Uh(),$e.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),d=0;d<a;d++)c[d]=H;return o.index++,c}function _a(a,o){return typeof o=="function"?o(a):o}function td(a){var o=It();return Gh(o,at,a)}function Gh(a,o,c){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=a.baseQueue,x=d.pending;if(x!==null){if(y!==null){var w=y.next;y.next=x.next,x.next=w}o.baseQueue=y=x,d.pending=null}if(x=a.baseState,y===null)a.memoizedState=x;else{o=y.next;var _=w=null,L=null,W=o,re=!1;do{var le=W.lane&-536870913;if(le!==W.lane?(qe&le)===le:(gi&le)===le){var Q=W.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),le===Os&&(re=!0);else if((gi&Q)===Q){W=W.next,Q===Os&&(re=!0);continue}else le={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(_=L=le,w=x):L=L.next=le,$e.lanes|=Q,Ei|=Q;le=W.action,Co&&c(x,le),x=W.hasEagerState?W.eagerState:c(x,le)}else Q={lane:le,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(_=L=Q,w=x):L=L.next=Q,$e.lanes|=le,Ei|=le;W=W.next}while(W!==null&&W!==o);if(L===null?w=x:L.next=_,!sn(x,a.memoizedState)&&(Wt=!0,re&&(c=Ts,c!==null)))throw c;a.memoizedState=x,a.baseState=w,a.baseQueue=L,d.lastRenderedState=x}return y===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Hh(a){var o=It(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var d=c.dispatch,y=c.pending,x=o.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do x=a(x,w.action),w=w.next;while(w!==y);sn(x,o.memoizedState)||(Wt=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,d]}function Dx(a,o,c){var d=$e,y=It(),x=Qe;if(x){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!sn((at||y).memoizedState,c);w&&(y.memoizedState=c,Wt=!0),y=y.queue;var _=Mx.bind(null,d,y,a);if(Jl(2048,8,_,[a]),y.getSnapshot!==o||w||Rt!==null&&Rt.memoizedState.tag&1){if(d.flags|=2048,ks(9,nd(),kx.bind(null,d,y,c,o),null),dt===null)throw Error(r(349));x||(gi&124)!==0||Nx(d,o,c)}return c}function Nx(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=$e.updateQueue,o===null?(o=Uh(),$e.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function kx(a,o,c,d){o.value=c,o.getSnapshot=d,jx(o)&&Rx(a)}function Mx(a,o,c){return c(function(){jx(o)&&Rx(a)})}function jx(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!sn(a,c)}catch{return!0}}function Rx(a){var o=Es(a,2);o!==null&&Wn(o,a,2)}function qh(a){var o=Rn();if(typeof a=="function"){var c=a;if(a=c(),Co){ir(!0);try{c()}finally{ir(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:a},o}function Ix(a,o,c,d){return a.baseState=c,Gh(a,at,typeof d=="function"?d:_a)}function UN(a,o,c,d,y){if(ad(a))throw Error(r(485));if(a=o.action,a!==null){var x={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){x.listeners.push(w)}};I.T!==null?c(!0):x.isTransition=!1,d(x),c=o.pending,c===null?(x.next=o.pending=x,Lx(o,x)):(x.next=c.next,o.pending=c.next=x)}}function Lx(a,o){var c=o.action,d=o.payload,y=a.state;if(o.isTransition){var x=I.T,w={};I.T=w;try{var _=c(y,d),L=I.S;L!==null&&L(w,_),$x(a,o,_)}catch(W){Yh(a,o,W)}finally{I.T=x}}else try{x=c(y,d),$x(a,o,x)}catch(W){Yh(a,o,W)}}function $x(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Bx(a,o,d)},function(d){return Yh(a,o,d)}):Bx(a,o,c)}function Bx(a,o,c){o.status="fulfilled",o.value=c,Ux(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,Lx(a,c)))}function Yh(a,o,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,Ux(o),o=o.next;while(o!==d)}a.action=null}function Ux(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function zx(a,o){return o}function Gx(a,o){if(Qe){var c=dt.formState;if(c!==null){e:{var d=$e;if(Qe){if(Pt){t:{for(var y=Pt,x=Jr;y.nodeType!==8;){if(!x){y=null;break t}if(y=$r(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Pt=$r(y.nextSibling),d=y.data==="F!";break e}}xo(d)}d=!1}d&&(o=c[0])}}return c=Rn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zx,lastRenderedState:o},c.queue=d,c=sS.bind(null,$e,d),d.dispatch=c,d=qh(!1),x=Xh.bind(null,$e,!1,d.queue),d=Rn(),y={state:o,dispatch:null,action:a,pending:null},d.queue=y,c=UN.bind(null,$e,y,x,c),y.dispatch=c,d.memoizedState=a,[o,c,!1]}function Hx(a){var o=It();return qx(o,at,a)}function qx(a,o,c){if(o=Gh(a,o,zx)[0],a=td(_a)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Zl(o)}catch(w){throw w===Fl?Wu:w}else d=o;o=It();var y=o.queue,x=y.dispatch;return c!==o.memoizedState&&($e.flags|=2048,ks(9,nd(),zN.bind(null,y,c),null)),[d,x,a]}function zN(a,o){a.action=o}function Yx(a){var o=It(),c=at;if(c!==null)return qx(o,c,a);It(),o=o.memoizedState,c=It();var d=c.queue.dispatch;return c.memoizedState=a,[o,d,!1]}function ks(a,o,c,d){return a={tag:a,create:c,deps:d,inst:o,next:null},o=$e.updateQueue,o===null&&(o=Uh(),$e.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,o.lastEffect=a),a}function nd(){return{destroy:void 0,resource:void 0}}function Fx(){return It().memoizedState}function rd(a,o,c,d){var y=Rn();d=d===void 0?null:d,$e.flags|=a,y.memoizedState=ks(1|o,nd(),c,d)}function Jl(a,o,c,d){var y=It();d=d===void 0?null:d;var x=y.memoizedState.inst;at!==null&&d!==null&&Rh(d,at.memoizedState.deps)?y.memoizedState=ks(o,x,c,d):($e.flags|=a,y.memoizedState=ks(1|o,x,c,d))}function Vx(a,o){rd(8390656,8,a,o)}function Kx(a,o){Jl(2048,8,a,o)}function Wx(a,o){return Jl(4,2,a,o)}function Xx(a,o){return Jl(4,4,a,o)}function Qx(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Zx(a,o,c){c=c!=null?c.concat([a]):null,Jl(4,4,Qx.bind(null,o,a),c)}function Fh(){}function Jx(a,o){var c=It();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&Rh(o,d[1])?d[0]:(c.memoizedState=[a,o],a)}function eS(a,o){var c=It();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&Rh(o,d[1]))return d[0];if(d=a(),Co){ir(!0);try{a()}finally{ir(!1)}}return c.memoizedState=[d,o],d}function Vh(a,o,c){return c===void 0||(gi&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=r1(),$e.lanes|=a,Ei|=a,c)}function tS(a,o,c,d){return sn(c,o)?c:_s.current!==null?(a=Vh(a,c,d),sn(a,o)||(Wt=!0),a):(gi&42)===0?(Wt=!0,a.memoizedState=c):(a=r1(),$e.lanes|=a,Ei|=a,o)}function nS(a,o,c,d,y){var x=X.p;X.p=x!==0&&8>x?x:8;var w=I.T,_={};I.T=_,Xh(a,!1,o,c);try{var L=y(),W=I.S;if(W!==null&&W(_,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var re=LN(L,d);ec(a,o,re,Kn(a))}else ec(a,o,d,Kn(a))}catch(le){ec(a,o,{then:function(){},status:"rejected",reason:le},Kn())}finally{X.p=x,I.T=w}}function GN(){}function Kh(a,o,c,d){if(a.tag!==5)throw Error(r(476));var y=rS(a).queue;nS(a,y,o,se,c===null?GN:function(){return aS(a),c(d)})}function rS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:se},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function aS(a){var o=rS(a).next.queue;ec(a,o,{},Kn())}function Wh(){return hn(vc)}function iS(){return It().memoizedState}function oS(){return It().memoizedState}function HN(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=Kn();a=hi(c);var d=mi(o,a,c);d!==null&&(Wn(d,o,c),Kl(d,o,c)),o={cache:Ph()},a.payload=o;return}o=o.return}}function qN(a,o,c){var d=Kn();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},ad(a)?lS(o,c):(c=mh(a,o,c,d),c!==null&&(Wn(c,a,d),cS(c,o,d)))}function sS(a,o,c){var d=Kn();ec(a,o,c,d)}function ec(a,o,c,d){var y={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(ad(a))lS(o,y);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var w=o.lastRenderedState,_=x(w,c);if(y.hasEagerState=!0,y.eagerState=_,sn(_,w))return zu(a,o,y,0),dt===null&&Uu(),!1}catch{}finally{}if(c=mh(a,o,y,d),c!==null)return Wn(c,a,d),cS(c,o,d),!0}return!1}function Xh(a,o,c,d){if(d={lane:2,revertLane:Tm(),action:d,hasEagerState:!1,eagerState:null,next:null},ad(a)){if(o)throw Error(r(479))}else o=mh(a,c,d,2),o!==null&&Wn(o,a,2)}function ad(a){var o=a.alternate;return a===$e||o!==null&&o===$e}function lS(a,o){Ds=Zu=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function cS(a,o,c){if((c&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,ss(a,c)}}var id={readContext:hn,use:ed,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},uS={readContext:hn,use:ed,useCallback:function(a,o){return Rn().memoizedState=[a,o===void 0?null:o],a},useContext:hn,useEffect:Vx,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,rd(4194308,4,Qx.bind(null,o,a),c)},useLayoutEffect:function(a,o){return rd(4194308,4,a,o)},useInsertionEffect:function(a,o){rd(4,2,a,o)},useMemo:function(a,o){var c=Rn();o=o===void 0?null:o;var d=a();if(Co){ir(!0);try{a()}finally{ir(!1)}}return c.memoizedState=[d,o],d},useReducer:function(a,o,c){var d=Rn();if(c!==void 0){var y=c(o);if(Co){ir(!0);try{c(o)}finally{ir(!1)}}}else y=o;return d.memoizedState=d.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},d.queue=a,a=a.dispatch=qN.bind(null,$e,a),[d.memoizedState,a]},useRef:function(a){var o=Rn();return a={current:a},o.memoizedState=a},useState:function(a){a=qh(a);var o=a.queue,c=sS.bind(null,$e,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:Fh,useDeferredValue:function(a,o){var c=Rn();return Vh(c,a,o)},useTransition:function(){var a=qh(!1);return a=nS.bind(null,$e,a.queue,!0,!1),Rn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var d=$e,y=Rn();if(Qe){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),dt===null)throw Error(r(349));(qe&124)!==0||Nx(d,o,c)}y.memoizedState=c;var x={value:c,getSnapshot:o};return y.queue=x,Vx(Mx.bind(null,d,x,a),[a]),d.flags|=2048,ks(9,nd(),kx.bind(null,d,x,c,o),null),c},useId:function(){var a=Rn(),o=dt.identifierPrefix;if(Qe){var c=wa,d=Pa;c=(d&~(1<<32-Mn(d)-1)).toString(32)+c,o="«"+o+"R"+c,c=Ju++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=$N++,o="«"+o+"r"+c.toString(32)+"»";return a.memoizedState=o},useHostTransitionStatus:Wh,useFormState:Gx,useActionState:Gx,useOptimistic:function(a){var o=Rn();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Xh.bind(null,$e,!0,c),c.dispatch=o,[a,o]},useMemoCache:zh,useCacheRefresh:function(){return Rn().memoizedState=HN.bind(null,$e)}},dS={readContext:hn,use:ed,useCallback:Jx,useContext:hn,useEffect:Kx,useImperativeHandle:Zx,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:eS,useReducer:td,useRef:Fx,useState:function(){return td(_a)},useDebugValue:Fh,useDeferredValue:function(a,o){var c=It();return tS(c,at.memoizedState,a,o)},useTransition:function(){var a=td(_a)[0],o=It().memoizedState;return[typeof a=="boolean"?a:Zl(a),o]},useSyncExternalStore:Dx,useId:iS,useHostTransitionStatus:Wh,useFormState:Hx,useActionState:Hx,useOptimistic:function(a,o){var c=It();return Ix(c,at,a,o)},useMemoCache:zh,useCacheRefresh:oS},YN={readContext:hn,use:ed,useCallback:Jx,useContext:hn,useEffect:Kx,useImperativeHandle:Zx,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:eS,useReducer:Hh,useRef:Fx,useState:function(){return Hh(_a)},useDebugValue:Fh,useDeferredValue:function(a,o){var c=It();return at===null?Vh(c,a,o):tS(c,at.memoizedState,a,o)},useTransition:function(){var a=Hh(_a)[0],o=It().memoizedState;return[typeof a=="boolean"?a:Zl(a),o]},useSyncExternalStore:Dx,useId:iS,useHostTransitionStatus:Wh,useFormState:Yx,useActionState:Yx,useOptimistic:function(a,o){var c=It();return at!==null?Ix(c,at,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:zh,useCacheRefresh:oS},Ms=null,tc=0;function od(a){var o=tc;return tc+=1,Ms===null&&(Ms=[]),Ax(Ms,a,o)}function nc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function sd(a,o){throw o.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function fS(a){var o=a._init;return o(a._payload)}function pS(a){function o(z,$){if(a){var F=z.deletions;F===null?(z.deletions=[$],z.flags|=16):F.push($)}}function c(z,$){if(!a)return null;for(;$!==null;)o(z,$),$=$.sibling;return null}function d(z){for(var $=new Map;z!==null;)z.key!==null?$.set(z.key,z):$.set(z.index,z),z=z.sibling;return $}function y(z,$){return z=Ca(z,$),z.index=0,z.sibling=null,z}function x(z,$,F){return z.index=F,a?(F=z.alternate,F!==null?(F=F.index,F<$?(z.flags|=67108866,$):F):(z.flags|=67108866,$)):(z.flags|=1048576,$)}function w(z){return a&&z.alternate===null&&(z.flags|=67108866),z}function _(z,$,F,oe){return $===null||$.tag!==6?($=yh(F,z.mode,oe),$.return=z,$):($=y($,F),$.return=z,$)}function L(z,$,F,oe){var Ee=F.type;return Ee===S?re(z,$,F.props.children,oe,F.key):$!==null&&($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&fS(Ee)===$.type)?($=y($,F.props),nc($,F),$.return=z,$):($=Hu(F.type,F.key,F.props,null,z.mode,oe),nc($,F),$.return=z,$)}function W(z,$,F,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==F.containerInfo||$.stateNode.implementation!==F.implementation?($=vh(F,z.mode,oe),$.return=z,$):($=y($,F.children||[]),$.return=z,$)}function re(z,$,F,oe,Ee){return $===null||$.tag!==7?($=go(F,z.mode,oe,Ee),$.return=z,$):($=y($,F),$.return=z,$)}function le(z,$,F){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=yh(""+$,z.mode,F),$.return=z,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return F=Hu($.type,$.key,$.props,null,z.mode,F),nc(F,$),F.return=z,F;case b:return $=vh($,z.mode,F),$.return=z,$;case R:var oe=$._init;return $=oe($._payload),le(z,$,F)}if(ne($)||K($))return $=go($,z.mode,F,null),$.return=z,$;if(typeof $.then=="function")return le(z,od($),F);if($.$$typeof===O)return le(z,Vu(z,$),F);sd(z,$)}return null}function Q(z,$,F,oe){var Ee=$!==null?$.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ee!==null?null:_(z,$,""+F,oe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case g:return F.key===Ee?L(z,$,F,oe):null;case b:return F.key===Ee?W(z,$,F,oe):null;case R:return Ee=F._init,F=Ee(F._payload),Q(z,$,F,oe)}if(ne(F)||K(F))return Ee!==null?null:re(z,$,F,oe,null);if(typeof F.then=="function")return Q(z,$,od(F),oe);if(F.$$typeof===O)return Q(z,$,Vu(z,F),oe);sd(z,F)}return null}function Z(z,$,F,oe,Ee){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return z=z.get(F)||null,_($,z,""+oe,Ee);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return z=z.get(oe.key===null?F:oe.key)||null,L($,z,oe,Ee);case b:return z=z.get(oe.key===null?F:oe.key)||null,W($,z,oe,Ee);case R:var Be=oe._init;return oe=Be(oe._payload),Z(z,$,F,oe,Ee)}if(ne(oe)||K(oe))return z=z.get(F)||null,re($,z,oe,Ee,null);if(typeof oe.then=="function")return Z(z,$,F,od(oe),Ee);if(oe.$$typeof===O)return Z(z,$,F,Vu($,oe),Ee);sd($,oe)}return null}function Ne(z,$,F,oe){for(var Ee=null,Be=null,we=$,_e=$=0,Qt=null;we!==null&&_e<F.length;_e++){we.index>_e?(Qt=we,we=null):Qt=we.sibling;var Fe=Q(z,we,F[_e],oe);if(Fe===null){we===null&&(we=Qt);break}a&&we&&Fe.alternate===null&&o(z,we),$=x(Fe,$,_e),Be===null?Ee=Fe:Be.sibling=Fe,Be=Fe,we=Qt}if(_e===F.length)return c(z,we),Qe&&vo(z,_e),Ee;if(we===null){for(;_e<F.length;_e++)we=le(z,F[_e],oe),we!==null&&($=x(we,$,_e),Be===null?Ee=we:Be.sibling=we,Be=we);return Qe&&vo(z,_e),Ee}for(we=d(we);_e<F.length;_e++)Qt=Z(we,z,_e,F[_e],oe),Qt!==null&&(a&&Qt.alternate!==null&&we.delete(Qt.key===null?_e:Qt.key),$=x(Qt,$,_e),Be===null?Ee=Qt:Be.sibling=Qt,Be=Qt);return a&&we.forEach(function(ki){return o(z,ki)}),Qe&&vo(z,_e),Ee}function Te(z,$,F,oe){if(F==null)throw Error(r(151));for(var Ee=null,Be=null,we=$,_e=$=0,Qt=null,Fe=F.next();we!==null&&!Fe.done;_e++,Fe=F.next()){we.index>_e?(Qt=we,we=null):Qt=we.sibling;var ki=Q(z,we,Fe.value,oe);if(ki===null){we===null&&(we=Qt);break}a&&we&&ki.alternate===null&&o(z,we),$=x(ki,$,_e),Be===null?Ee=ki:Be.sibling=ki,Be=ki,we=Qt}if(Fe.done)return c(z,we),Qe&&vo(z,_e),Ee;if(we===null){for(;!Fe.done;_e++,Fe=F.next())Fe=le(z,Fe.value,oe),Fe!==null&&($=x(Fe,$,_e),Be===null?Ee=Fe:Be.sibling=Fe,Be=Fe);return Qe&&vo(z,_e),Ee}for(we=d(we);!Fe.done;_e++,Fe=F.next())Fe=Z(we,z,_e,Fe.value,oe),Fe!==null&&(a&&Fe.alternate!==null&&we.delete(Fe.key===null?_e:Fe.key),$=x(Fe,$,_e),Be===null?Ee=Fe:Be.sibling=Fe,Be=Fe);return a&&we.forEach(function(Fk){return o(z,Fk)}),Qe&&vo(z,_e),Ee}function ot(z,$,F,oe){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case g:e:{for(var Ee=F.key;$!==null;){if($.key===Ee){if(Ee=F.type,Ee===S){if($.tag===7){c(z,$.sibling),oe=y($,F.props.children),oe.return=z,z=oe;break e}}else if($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&fS(Ee)===$.type){c(z,$.sibling),oe=y($,F.props),nc(oe,F),oe.return=z,z=oe;break e}c(z,$);break}else o(z,$);$=$.sibling}F.type===S?(oe=go(F.props.children,z.mode,oe,F.key),oe.return=z,z=oe):(oe=Hu(F.type,F.key,F.props,null,z.mode,oe),nc(oe,F),oe.return=z,z=oe)}return w(z);case b:e:{for(Ee=F.key;$!==null;){if($.key===Ee)if($.tag===4&&$.stateNode.containerInfo===F.containerInfo&&$.stateNode.implementation===F.implementation){c(z,$.sibling),oe=y($,F.children||[]),oe.return=z,z=oe;break e}else{c(z,$);break}else o(z,$);$=$.sibling}oe=vh(F,z.mode,oe),oe.return=z,z=oe}return w(z);case R:return Ee=F._init,F=Ee(F._payload),ot(z,$,F,oe)}if(ne(F))return Ne(z,$,F,oe);if(K(F)){if(Ee=K(F),typeof Ee!="function")throw Error(r(150));return F=Ee.call(F),Te(z,$,F,oe)}if(typeof F.then=="function")return ot(z,$,od(F),oe);if(F.$$typeof===O)return ot(z,$,Vu(z,F),oe);sd(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,$!==null&&$.tag===6?(c(z,$.sibling),oe=y($,F),oe.return=z,z=oe):(c(z,$),oe=yh(F,z.mode,oe),oe.return=z,z=oe),w(z)):c(z,$)}return function(z,$,F,oe){try{tc=0;var Ee=ot(z,$,F,oe);return Ms=null,Ee}catch(we){if(we===Fl||we===Wu)throw we;var Be=qn(29,we,null,z.mode);return Be.lanes=oe,Be.return=z,Be}finally{}}}var js=pS(!0),hS=pS(!1),gr=V(null),ea=null;function yi(a){var o=a.alternate;ie(Ht,Ht.current&1),ie(gr,a),ea===null&&(o===null||_s.current!==null||o.memoizedState!==null)&&(ea=a)}function mS(a){if(a.tag===22){if(ie(Ht,Ht.current),ie(gr,a),ea===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(ea=a)}}else vi()}function vi(){ie(Ht,Ht.current),ie(gr,gr.current)}function Da(a){Y(gr),ea===a&&(ea=null),Y(Ht)}var Ht=V(0);function ld(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Um(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Qh(a,o,c,d){o=a.memoizedState,c=c(d,o),c=c==null?o:h({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Zh={enqueueSetState:function(a,o,c){a=a._reactInternals;var d=Kn(),y=hi(d);y.payload=o,c!=null&&(y.callback=c),o=mi(a,y,d),o!==null&&(Wn(o,a,d),Kl(o,a,d))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var d=Kn(),y=hi(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=mi(a,y,d),o!==null&&(Wn(o,a,d),Kl(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=Kn(),d=hi(c);d.tag=2,o!=null&&(d.callback=o),o=mi(a,d,c),o!==null&&(Wn(o,a,c),Kl(o,a,c))}};function gS(a,o,c,d,y,x,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,x,w):o.prototype&&o.prototype.isPureReactComponent?!dr(c,d)||!dr(y,x):!0}function yS(a,o,c,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==a&&Zh.enqueueReplaceState(o,o.state,null)}function Po(a,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(a=a.defaultProps){c===o&&(c=h({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}var cd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function vS(a){cd(a)}function bS(a){console.error(a)}function xS(a){cd(a)}function ud(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function SS(a,o,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Jh(a,o,c){return c=hi(c),c.tag=3,c.payload={element:null},c.callback=function(){ud(a,o)},c}function AS(a){return a=hi(a),a.tag=3,a}function ES(a,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var x=d.value;a.payload=function(){return y(x)},a.callback=function(){SS(o,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){SS(o,c,d),typeof y!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var _=d.stack;this.componentDidCatch(d.value,{componentStack:_!==null?_:""})})}function FN(a,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&Hl(o,c,y,!0),c=gr.current,c!==null){switch(c.tag){case 13:return ea===null?Em():c.alternate===null&&wt===0&&(wt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===Th?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Pm(a,d,y)),!1;case 22:return c.flags|=65536,d===Th?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Pm(a,d,y)),!1}throw Error(r(435,c.tag))}return Pm(a,d,y),Em(),!1}if(Qe)return o=gr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==Sh&&(a=Error(r(422),{cause:d}),Gl(fr(a,c)))):(d!==Sh&&(o=Error(r(423),{cause:d}),Gl(fr(o,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,d=fr(d,c),y=Jh(a.stateNode,d,y),Nh(a,y),wt!==4&&(wt=2)),!1;var x=Error(r(520),{cause:d});if(x=fr(x,c),cc===null?cc=[x]:cc.push(x),wt!==4&&(wt=2),o===null)return!0;d=fr(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Jh(c.stateNode,d,a),Nh(c,a),!1;case 1:if(o=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ci===null||!Ci.has(x))))return c.flags|=65536,y&=-y,c.lanes|=y,y=AS(y),ES(y,a,c,d),Nh(c,y),!1}c=c.return}while(c!==null);return!1}var CS=Error(r(461)),Wt=!1;function ln(a,o,c,d){o.child=a===null?hS(o,null,c,d):js(o,a.child,c,d)}function PS(a,o,c,d,y){c=c.render;var x=o.ref;if("ref"in d){var w={};for(var _ in d)_!=="ref"&&(w[_]=d[_])}else w=d;return Ao(o),d=Ih(a,o,c,w,x,y),_=Lh(),a!==null&&!Wt?($h(a,o,y),Na(a,o,y)):(Qe&&_&&bh(o),o.flags|=1,ln(a,o,d,y),o.child)}function wS(a,o,c,d,y){if(a===null){var x=c.type;return typeof x=="function"&&!gh(x)&&x.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=x,OS(a,o,x,d,y)):(a=Hu(c.type,null,d,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(x=a.child,!sm(a,y)){var w=x.memoizedProps;if(c=c.compare,c=c!==null?c:dr,c(w,d)&&a.ref===o.ref)return Na(a,o,y)}return o.flags|=1,a=Ca(x,d),a.ref=o.ref,a.return=o,o.child=a}function OS(a,o,c,d,y){if(a!==null){var x=a.memoizedProps;if(dr(x,d)&&a.ref===o.ref)if(Wt=!1,o.pendingProps=d=x,sm(a,y))(a.flags&131072)!==0&&(Wt=!0);else return o.lanes=a.lanes,Na(a,o,y)}return em(a,o,c,d,y)}function TS(a,o,c){var d=o.pendingProps,y=d.children,x=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=x!==null?x.baseLanes|c:c,a!==null){for(y=o.child=a.child,x=0;y!==null;)x=x|y.lanes|y.childLanes,y=y.sibling;o.childLanes=x&~d}else o.childLanes=0,o.child=null;return _S(a,o,d,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Ku(o,x!==null?x.cachePool:null),x!==null?Ox(o,x):Mh(),mS(o);else return o.lanes=o.childLanes=536870912,_S(a,o,x!==null?x.baseLanes|c:c,c)}else x!==null?(Ku(o,x.cachePool),Ox(o,x),vi(),o.memoizedState=null):(a!==null&&Ku(o,null),Mh(),vi());return ln(a,o,y,c),o.child}function _S(a,o,c,d){var y=Oh();return y=y===null?null:{parent:Gt._currentValue,pool:y},o.memoizedState={baseLanes:c,cachePool:y},a!==null&&Ku(o,null),Mh(),mS(o),a!==null&&Hl(a,o,d,!0),null}function dd(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function em(a,o,c,d,y){return Ao(o),c=Ih(a,o,c,d,void 0,y),d=Lh(),a!==null&&!Wt?($h(a,o,y),Na(a,o,y)):(Qe&&d&&bh(o),o.flags|=1,ln(a,o,c,y),o.child)}function DS(a,o,c,d,y,x){return Ao(o),o.updateQueue=null,c=_x(o,d,c,y),Tx(a),d=Lh(),a!==null&&!Wt?($h(a,o,x),Na(a,o,x)):(Qe&&d&&bh(o),o.flags|=1,ln(a,o,c,x),o.child)}function NS(a,o,c,d,y){if(Ao(o),o.stateNode===null){var x=Cs,w=c.contextType;typeof w=="object"&&w!==null&&(x=hn(w)),x=new c(d,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Zh,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=d,x.state=o.memoizedState,x.refs={},_h(o),w=c.contextType,x.context=typeof w=="object"&&w!==null?hn(w):Cs,x.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Qh(o,c,w,d),x.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(w=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),w!==x.state&&Zh.enqueueReplaceState(x,x.state,null),Xl(o,d,x,y),Wl(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){x=o.stateNode;var _=o.memoizedProps,L=Po(c,_);x.props=L;var W=x.context,re=c.contextType;w=Cs,typeof re=="object"&&re!==null&&(w=hn(re));var le=c.getDerivedStateFromProps;re=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,re||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_||W!==w)&&yS(o,x,d,w),pi=!1;var Q=o.memoizedState;x.state=Q,Xl(o,d,x,y),Wl(),W=o.memoizedState,_||Q!==W||pi?(typeof le=="function"&&(Qh(o,c,le,d),W=o.memoizedState),(L=pi||gS(o,c,L,d,Q,W,w))?(re||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=W),x.props=d,x.state=W,x.context=w,d=L):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{x=o.stateNode,Dh(a,o),w=o.memoizedProps,re=Po(c,w),x.props=re,le=o.pendingProps,Q=x.context,W=c.contextType,L=Cs,typeof W=="object"&&W!==null&&(L=hn(W)),_=c.getDerivedStateFromProps,(W=typeof _=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==le||Q!==L)&&yS(o,x,d,L),pi=!1,Q=o.memoizedState,x.state=Q,Xl(o,d,x,y),Wl();var Z=o.memoizedState;w!==le||Q!==Z||pi||a!==null&&a.dependencies!==null&&Fu(a.dependencies)?(typeof _=="function"&&(Qh(o,c,_,d),Z=o.memoizedState),(re=pi||gS(o,c,re,d,Q,Z,L)||a!==null&&a.dependencies!==null&&Fu(a.dependencies))?(W||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,Z,L),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,Z,L)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||w===a.memoizedProps&&Q===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&Q===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Z),x.props=d,x.state=Z,x.context=L,d=re):(typeof x.componentDidUpdate!="function"||w===a.memoizedProps&&Q===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&Q===a.memoizedState||(o.flags|=1024),d=!1)}return x=d,dd(a,o),d=(o.flags&128)!==0,x||d?(x=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,a!==null&&d?(o.child=js(o,a.child,null,y),o.child=js(o,null,c,y)):ln(a,o,c,y),o.memoizedState=x.state,a=o.child):a=Na(a,o,y),a}function kS(a,o,c,d){return zl(),o.flags|=256,ln(a,o,c,d),o.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nm(a){return{baseLanes:a,cachePool:bx()}}function rm(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=yr),a}function MS(a,o,c){var d=o.pendingProps,y=!1,x=(o.flags&128)!==0,w;if((w=x)||(w=a!==null&&a.memoizedState===null?!1:(Ht.current&2)!==0),w&&(y=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,a===null){if(Qe){if(y?yi(o):vi(),Qe){var _=Pt,L;if(L=_){e:{for(L=_,_=Jr;L.nodeType!==8;){if(!_){_=null;break e}if(L=$r(L.nextSibling),L===null){_=null;break e}}_=L}_!==null?(o.memoizedState={dehydrated:_,treeContext:yo!==null?{id:Pa,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},L=qn(18,null,null,0),L.stateNode=_,L.return=o,o.child=L,On=o,Pt=null,L=!0):L=!1}L||xo(o)}if(_=o.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Um(_)?o.lanes=32:o.lanes=536870912,null;Da(o)}return _=d.children,d=d.fallback,y?(vi(),y=o.mode,_=fd({mode:"hidden",children:_},y),d=go(d,y,c,null),_.return=o,d.return=o,_.sibling=d,o.child=_,y=o.child,y.memoizedState=nm(c),y.childLanes=rm(a,w,c),o.memoizedState=tm,d):(yi(o),am(o,_))}if(L=a.memoizedState,L!==null&&(_=L.dehydrated,_!==null)){if(x)o.flags&256?(yi(o),o.flags&=-257,o=im(a,o,c)):o.memoizedState!==null?(vi(),o.child=a.child,o.flags|=128,o=null):(vi(),y=d.fallback,_=o.mode,d=fd({mode:"visible",children:d.children},_),y=go(y,_,c,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,js(o,a.child,null,c),d=o.child,d.memoizedState=nm(c),d.childLanes=rm(a,w,c),o.memoizedState=tm,o=y);else if(yi(o),Um(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var W=w.dgst;w=W,d=Error(r(419)),d.stack="",d.digest=w,Gl({value:d,source:null,stack:null}),o=im(a,o,c)}else if(Wt||Hl(a,o,c,!1),w=(c&a.childLanes)!==0,Wt||w){if(w=dt,w!==null&&(d=c&-c,d=(d&42)!==0?1:_l(d),d=(d&(w.suspendedLanes|c))!==0?0:d,d!==0&&d!==L.retryLane))throw L.retryLane=d,Es(a,d),Wn(w,a,d),CS;_.data==="$?"||Em(),o=im(a,o,c)}else _.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=L.treeContext,Pt=$r(_.nextSibling),On=o,Qe=!0,bo=null,Jr=!1,a!==null&&(hr[mr++]=Pa,hr[mr++]=wa,hr[mr++]=yo,Pa=a.id,wa=a.overflow,yo=o),o=am(o,d.children),o.flags|=4096);return o}return y?(vi(),y=d.fallback,_=o.mode,L=a.child,W=L.sibling,d=Ca(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&65011712,W!==null?y=Ca(W,y):(y=go(y,_,c,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,_=a.child.memoizedState,_===null?_=nm(c):(L=_.cachePool,L!==null?(W=Gt._currentValue,L=L.parent!==W?{parent:W,pool:W}:L):L=bx(),_={baseLanes:_.baseLanes|c,cachePool:L}),y.memoizedState=_,y.childLanes=rm(a,w,c),o.memoizedState=tm,d):(yi(o),c=a.child,a=c.sibling,c=Ca(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,a!==null&&(w=o.deletions,w===null?(o.deletions=[a],o.flags|=16):w.push(a)),o.child=c,o.memoizedState=null,c)}function am(a,o){return o=fd({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function fd(a,o){return a=qn(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function im(a,o,c){return js(o,a.child,null,c),a=am(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function jS(a,o,c){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),Eh(a.return,o,c)}function om(a,o,c,d,y){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=c,x.tailMode=y)}function RS(a,o,c){var d=o.pendingProps,y=d.revealOrder,x=d.tail;if(ln(a,o,d.children,c),d=Ht.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&jS(a,c,o);else if(a.tag===19)jS(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(ie(Ht,d),y){case"forwards":for(c=o.child,y=null;c!==null;)a=c.alternate,a!==null&&ld(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),om(o,!1,y,c,x);break;case"backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&ld(a)===null){o.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}om(o,!0,c,null,x);break;case"together":om(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Na(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),Ei|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(Hl(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Ca(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Ca(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function sm(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Fu(a)))}function VN(a,o,c){switch(o.tag){case 3:pe(o,o.stateNode.containerInfo),fi(o,Gt,a.memoizedState.cache),zl();break;case 27:case 5:de(o);break;case 4:pe(o,o.stateNode.containerInfo);break;case 10:fi(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(yi(o),o.flags|=128,null):(c&o.child.childLanes)!==0?MS(a,o,c):(yi(o),a=Na(a,o,c),a!==null?a.sibling:null);yi(o);break;case 19:var y=(a.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(Hl(a,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return RS(a,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(Ht,Ht.current),d)break;return null;case 22:case 23:return o.lanes=0,TS(a,o,c);case 24:fi(o,Gt,a.memoizedState.cache)}return Na(a,o,c)}function IS(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)Wt=!0;else{if(!sm(a,c)&&(o.flags&128)===0)return Wt=!1,VN(a,o,c);Wt=(a.flags&131072)!==0}else Wt=!1,Qe&&(o.flags&1048576)!==0&&fx(o,Yu,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var d=o.elementType,y=d._init;if(d=y(d._payload),o.type=d,typeof d=="function")gh(d)?(a=Po(d,a),o.tag=1,o=NS(null,o,d,a,c)):(o.tag=0,o=em(null,o,d,a,c));else{if(d!=null){if(y=d.$$typeof,y===M){o.tag=11,o=PS(null,o,d,a,c);break e}else if(y===k){o.tag=14,o=wS(null,o,d,a,c);break e}}throw o=ue(d)||d,Error(r(306,o,""))}}return o;case 0:return em(a,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=Po(d,o.pendingProps),NS(a,o,d,y,c);case 3:e:{if(pe(o,o.stateNode.containerInfo),a===null)throw Error(r(387));d=o.pendingProps;var x=o.memoizedState;y=x.element,Dh(a,o),Xl(o,d,null,c);var w=o.memoizedState;if(d=w.cache,fi(o,Gt,d),d!==x.cache&&Ch(o,[Gt],c,!0),Wl(),d=w.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=kS(a,o,d,c);break e}else if(d!==y){y=fr(Error(r(424)),o),Gl(y),o=kS(a,o,d,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Pt=$r(a.firstChild),On=o,Qe=!0,bo=null,Jr=!0,c=hS(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(zl(),d===y){o=Na(a,o,c);break e}ln(a,o,d,c)}o=o.child}return o;case 26:return dd(a,o),a===null?(c=U1(o.type,null,o.pendingProps,null))?o.memoizedState=c:Qe||(c=o.type,a=o.pendingProps,d=wd(te.current).createElement(c),d[rn]=o,d[He]=a,un(d,c,a),xt(d),o.stateNode=d):o.memoizedState=U1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return de(o),a===null&&Qe&&(d=o.stateNode=L1(o.type,o.pendingProps,te.current),On=o,Jr=!0,y=Pt,Oi(o.type)?(zm=y,Pt=$r(d.firstChild)):Pt=y),ln(a,o,o.pendingProps.children,c),dd(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Qe&&((y=d=Pt)&&(d=Sk(d,o.type,o.pendingProps,Jr),d!==null?(o.stateNode=d,On=o,Pt=$r(d.firstChild),Jr=!1,y=!0):y=!1),y||xo(o)),de(o),y=o.type,x=o.pendingProps,w=a!==null?a.memoizedProps:null,d=x.children,Lm(y,x)?d=null:w!==null&&Lm(y,w)&&(o.flags|=32),o.memoizedState!==null&&(y=Ih(a,o,BN,null,null,c),vc._currentValue=y),dd(a,o),ln(a,o,d,c),o.child;case 6:return a===null&&Qe&&((a=c=Pt)&&(c=Ak(c,o.pendingProps,Jr),c!==null?(o.stateNode=c,On=o,Pt=null,a=!0):a=!1),a||xo(o)),null;case 13:return MS(a,o,c);case 4:return pe(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=js(o,null,d,c):ln(a,o,d,c),o.child;case 11:return PS(a,o,o.type,o.pendingProps,c);case 7:return ln(a,o,o.pendingProps,c),o.child;case 8:return ln(a,o,o.pendingProps.children,c),o.child;case 12:return ln(a,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,fi(o,o.type,d.value),ln(a,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,Ao(o),y=hn(y),d=d(y),o.flags|=1,ln(a,o,d,c),o.child;case 14:return wS(a,o,o.type,o.pendingProps,c);case 15:return OS(a,o,o.type,o.pendingProps,c);case 19:return RS(a,o,c);case 31:return d=o.pendingProps,c=o.mode,d={mode:d.mode,children:d.children},a===null?(c=fd(d,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Ca(a.child,d),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return TS(a,o,c);case 24:return Ao(o),d=hn(Gt),a===null?(y=Oh(),y===null&&(y=dt,x=Ph(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=c),y=x),o.memoizedState={parent:d,cache:y},_h(o),fi(o,Gt,y)):((a.lanes&c)!==0&&(Dh(a,o),Xl(o,null,null,c),Wl()),y=a.memoizedState,x=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),fi(o,Gt,d)):(d=x.cache,fi(o,Gt,d),d!==y.cache&&Ch(o,[Gt],c,!0))),ln(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ka(a){a.flags|=4}function LS(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Y1(o)){if(o=gr.current,o!==null&&((qe&4194048)===qe?ea!==null:(qe&62914560)!==qe&&(qe&536870912)===0||o!==ea))throw Vl=Th,xx;a.flags|=8192}}function pd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?wl():536870912,a.lanes|=o,$s|=o)}function rc(a,o){if(!Qe)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function St(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(o)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=d,a.childLanes=c,o}function KN(a,o,c){var d=o.pendingProps;switch(xh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(o),null;case 1:return St(o),null;case 3:return c=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Ta(Gt),ae(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Ul(o)?ka(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,mx())),St(o),null;case 26:return c=o.memoizedState,a===null?(ka(o),c!==null?(St(o),LS(o,c)):(St(o),o.flags&=-16777217)):c?c!==a.memoizedState?(ka(o),St(o),LS(o,c)):(St(o),o.flags&=-16777217):(a.memoizedProps!==d&&ka(o),St(o),o.flags&=-16777217),null;case 27:be(o),c=te.current;var y=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==d&&ka(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return St(o),null}a=ve.current,Ul(o)?px(o):(a=L1(y,d,c),o.stateNode=a,ka(o))}return St(o),null;case 5:if(be(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&ka(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return St(o),null}if(a=ve.current,Ul(o))px(o);else{switch(y=wd(te.current),a){case 1:a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=y.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?y.createElement(c,{is:d.is}):y.createElement(c)}}a[rn]=o,a[He]=d;e:for(y=o.child;y!==null;){if(y.tag===5||y.tag===6)a.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}o.stateNode=a;e:switch(un(a,c,d),c){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ka(o)}}return St(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&ka(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(a=te.current,Ul(o)){if(a=o.stateNode,c=o.memoizedProps,d=null,y=On,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}a[rn]=o,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||D1(a.nodeValue,c)),a||xo(o)}else a=wd(a).createTextNode(d),a[rn]=o,o.stateNode=a}return St(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=Ul(o),d!==null&&d.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[rn]=o}else zl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;St(o),y=!1}else y=mx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Da(o),o):(Da(o),null)}if(Da(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=d!==null,a=a!==null&&a.memoizedState!==null,c){d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var x=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==y&&(d.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),pd(o,o.updateQueue),St(o),null;case 4:return ae(),a===null&&km(o.stateNode.containerInfo),St(o),null;case 10:return Ta(o.type),St(o),null;case 19:if(Y(Ht),y=o.memoizedState,y===null)return St(o),null;if(d=(o.flags&128)!==0,x=y.rendering,x===null)if(d)rc(y,!1);else{if(wt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(x=ld(a),x!==null){for(o.flags|=128,rc(y,!1),a=x.updateQueue,o.updateQueue=a,pd(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)dx(c,a),c=c.sibling;return ie(Ht,Ht.current&1|2),o.child}a=a.sibling}y.tail!==null&&pt()>gd&&(o.flags|=128,d=!0,rc(y,!1),o.lanes=4194304)}else{if(!d)if(a=ld(x),a!==null){if(o.flags|=128,d=!0,a=a.updateQueue,o.updateQueue=a,pd(o,a),rc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!Qe)return St(o),null}else 2*pt()-y.renderingStartTime>gd&&c!==536870912&&(o.flags|=128,d=!0,rc(y,!1),o.lanes=4194304);y.isBackwards?(x.sibling=o.child,o.child=x):(a=y.last,a!==null?a.sibling=x:o.child=x,y.last=x)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=pt(),o.sibling=null,a=Ht.current,ie(Ht,d?a&1|2:a&1),o):(St(o),null);case 22:case 23:return Da(o),jh(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(St(o),o.subtreeFlags&6&&(o.flags|=8192)):St(o),c=o.updateQueue,c!==null&&pd(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),a!==null&&Y(Eo),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ta(Gt),St(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function WN(a,o){switch(xh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ta(Gt),ae(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return be(o),null;case 13:if(Da(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));zl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return Y(Ht),null;case 4:return ae(),null;case 10:return Ta(o.type),null;case 22:case 23:return Da(o),jh(),a!==null&&Y(Eo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ta(Gt),null;case 25:return null;default:return null}}function $S(a,o){switch(xh(o),o.tag){case 3:Ta(Gt),ae();break;case 26:case 27:case 5:be(o);break;case 4:ae();break;case 13:Da(o);break;case 19:Y(Ht);break;case 10:Ta(o.type);break;case 22:case 23:Da(o),jh(),a!==null&&Y(Eo);break;case 24:Ta(Gt)}}function ac(a,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&a)===a){d=void 0;var x=c.create,w=c.inst;d=x(),w.destroy=d}c=c.next}while(c!==y)}}catch(_){ct(o,o.return,_)}}function bi(a,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var x=y.next;d=x;do{if((d.tag&a)===a){var w=d.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,y=o;var L=c,W=_;try{W()}catch(re){ct(y,L,re)}}}d=d.next}while(d!==x)}}catch(re){ct(o,o.return,re)}}function BS(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{wx(o,c)}catch(d){ct(a,a.return,d)}}}function US(a,o,c){c.props=Po(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){ct(a,o,d)}}function ic(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(y){ct(a,o,y)}}function ta(a,o){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){ct(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){ct(a,o,y)}else c.current=null}function zS(a){var o=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){ct(a,a.return,y)}}function lm(a,o,c){try{var d=a.stateNode;gk(d,a.type,c,o),d[He]=o}catch(y){ct(a,a.return,y)}}function GS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Oi(a.type)||a.tag===4}function cm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||GS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Oi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function um(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Pd));else if(d!==4&&(d===27&&Oi(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(um(a,o,c),a=a.sibling;a!==null;)um(a,o,c),a=a.sibling}function hd(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(d!==4&&(d===27&&Oi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(hd(a,o,c),a=a.sibling;a!==null;)hd(a,o,c),a=a.sibling}function HS(a){var o=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);un(o,d,c),o[rn]=a,o[He]=c}catch(x){ct(a,a.return,x)}}var Ma=!1,Dt=!1,dm=!1,qS=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function XN(a,o){if(a=a.containerInfo,Rm=kd,a=Bu(a),po(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var w=0,_=-1,L=-1,W=0,re=0,le=a,Q=null;t:for(;;){for(var Z;le!==c||y!==0&&le.nodeType!==3||(_=w+y),le!==x||d!==0&&le.nodeType!==3||(L=w+d),le.nodeType===3&&(w+=le.nodeValue.length),(Z=le.firstChild)!==null;)Q=le,le=Z;for(;;){if(le===a)break t;if(Q===c&&++W===y&&(_=w),Q===x&&++re===d&&(L=w),(Z=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=Z}c=_===-1||L===-1?null:{start:_,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(Im={focusedElem:a,selectionRange:c},kd=!1,Xt=o;Xt!==null;)if(o=Xt,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,Xt=a;else for(;Xt!==null;){switch(o=Xt,x=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,c=o,y=x.memoizedProps,x=x.memoizedState,d=c.stateNode;try{var Ne=Po(c.type,y,c.elementType===c.type);a=d.getSnapshotBeforeUpdate(Ne,x),d.__reactInternalSnapshotBeforeUpdate=a}catch(Te){ct(c,c.return,Te)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)Bm(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Bm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Xt=a;break}Xt=o.return}}function YS(a,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:xi(a,c),d&4&&ac(5,c);break;case 1:if(xi(a,c),d&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(w){ct(c,c.return,w)}else{var y=Po(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(w){ct(c,c.return,w)}}d&64&&BS(c),d&512&&ic(c,c.return);break;case 3:if(xi(a,c),d&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{wx(a,o)}catch(w){ct(c,c.return,w)}}break;case 27:o===null&&d&4&&HS(c);case 26:case 5:xi(a,c),o===null&&d&4&&zS(c),d&512&&ic(c,c.return);break;case 12:xi(a,c);break;case 13:xi(a,c),d&4&&KS(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=ik.bind(null,c),Ek(a,c))));break;case 22:if(d=c.memoizedState!==null||Ma,!d){o=o!==null&&o.memoizedState!==null||Dt,y=Ma;var x=Dt;Ma=d,(Dt=o)&&!x?Si(a,c,(c.subtreeFlags&8772)!==0):xi(a,c),Ma=y,Dt=x}break;case 30:break;default:xi(a,c)}}function FS(a){var o=a.alternate;o!==null&&(a.alternate=null,FS(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&kr(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var mt=null,In=!1;function ja(a,o,c){for(c=c.child;c!==null;)VS(a,o,c),c=c.sibling}function VS(a,o,c){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(Xi,c)}catch{}switch(c.tag){case 26:Dt||ta(c,o),ja(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Dt||ta(c,o);var d=mt,y=In;Oi(c.type)&&(mt=c.stateNode,In=!1),ja(a,o,c),hc(c.stateNode),mt=d,In=y;break;case 5:Dt||ta(c,o);case 6:if(d=mt,y=In,mt=null,ja(a,o,c),mt=d,In=y,mt!==null)if(In)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(c.stateNode)}catch(x){ct(c,o,x)}else try{mt.removeChild(c.stateNode)}catch(x){ct(c,o,x)}break;case 18:mt!==null&&(In?(a=mt,R1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Ac(a)):R1(mt,c.stateNode));break;case 4:d=mt,y=In,mt=c.stateNode.containerInfo,In=!0,ja(a,o,c),mt=d,In=y;break;case 0:case 11:case 14:case 15:Dt||bi(2,c,o),Dt||bi(4,c,o),ja(a,o,c);break;case 1:Dt||(ta(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&US(c,o,d)),ja(a,o,c);break;case 21:ja(a,o,c);break;case 22:Dt=(d=Dt)||c.memoizedState!==null,ja(a,o,c),Dt=d;break;default:ja(a,o,c)}}function KS(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ac(a)}catch(c){ct(o,o.return,c)}}function QN(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new qS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new qS),o;default:throw Error(r(435,a.tag))}}function fm(a,o){var c=QN(a);o.forEach(function(d){var y=ok.bind(null,a,d);c.has(d)||(c.add(d),d.then(y,y))})}function Yn(a,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],x=a,w=o,_=w;e:for(;_!==null;){switch(_.tag){case 27:if(Oi(_.type)){mt=_.stateNode,In=!1;break e}break;case 5:mt=_.stateNode,In=!1;break e;case 3:case 4:mt=_.stateNode.containerInfo,In=!0;break e}_=_.return}if(mt===null)throw Error(r(160));VS(x,w,y),mt=null,In=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)WS(o,a),o=o.sibling}var Lr=null;function WS(a,o){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Yn(o,a),Fn(a),d&4&&(bi(3,a,a.return),ac(3,a),bi(5,a,a.return));break;case 1:Yn(o,a),Fn(a),d&512&&(Dt||c===null||ta(c,c.return)),d&64&&Ma&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=Lr;if(Yn(o,a),Fn(a),d&512&&(Dt||c===null||ta(c,c.return)),d&4){var x=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":x=y.getElementsByTagName("title")[0],(!x||x[Nr]||x[rn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(d),y.head.insertBefore(x,y.querySelector("head > title"))),un(x,d,c),x[rn]=a,xt(x),d=x;break e;case"link":var w=H1("link","href",y).get(d+(c.href||""));if(w){for(var _=0;_<w.length;_++)if(x=w[_],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(_,1);break t}}x=y.createElement(d),un(x,d,c),y.head.appendChild(x);break;case"meta":if(w=H1("meta","content",y).get(d+(c.content||""))){for(_=0;_<w.length;_++)if(x=w[_],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(_,1);break t}}x=y.createElement(d),un(x,d,c),y.head.appendChild(x);break;default:throw Error(r(468,d))}x[rn]=a,xt(x),d=x}a.stateNode=d}else q1(y,a.type,a.stateNode);else a.stateNode=G1(y,d,a.memoizedProps);else x!==d?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,d===null?q1(y,a.type,a.stateNode):G1(y,d,a.memoizedProps)):d===null&&a.stateNode!==null&&lm(a,a.memoizedProps,c.memoizedProps)}break;case 27:Yn(o,a),Fn(a),d&512&&(Dt||c===null||ta(c,c.return)),c!==null&&d&4&&lm(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Yn(o,a),Fn(a),d&512&&(Dt||c===null||ta(c,c.return)),a.flags&32){y=a.stateNode;try{ma(y,"")}catch(Z){ct(a,a.return,Z)}}d&4&&a.stateNode!=null&&(y=a.memoizedProps,lm(a,y,c!==null?c.memoizedProps:y)),d&1024&&(dm=!0);break;case 6:if(Yn(o,a),Fn(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(Z){ct(a,a.return,Z)}}break;case 3:if(_d=null,y=Lr,Lr=Od(o.containerInfo),Yn(o,a),Lr=y,Fn(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ac(o.containerInfo)}catch(Z){ct(a,a.return,Z)}dm&&(dm=!1,XS(a));break;case 4:d=Lr,Lr=Od(a.stateNode.containerInfo),Yn(o,a),Fn(a),Lr=d;break;case 12:Yn(o,a),Fn(a);break;case 13:Yn(o,a),Fn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(vm=pt()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,fm(a,d)));break;case 22:y=a.memoizedState!==null;var L=c!==null&&c.memoizedState!==null,W=Ma,re=Dt;if(Ma=W||y,Dt=re||L,Yn(o,a),Dt=re,Ma=W,Fn(a),d&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||L||Ma||Dt||wo(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){L=c=o;try{if(x=L.stateNode,y)w=x.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=L.stateNode;var le=L.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;_.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){ct(L,L.return,Z)}}}else if(o.tag===6){if(c===null){L=o;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(Z){ct(L,L.return,Z)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,fm(a,c))));break;case 19:Yn(o,a),Fn(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,fm(a,d)));break;case 30:break;case 21:break;default:Yn(o,a),Fn(a)}}function Fn(a){var o=a.flags;if(o&2){try{for(var c,d=a.return;d!==null;){if(GS(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,x=cm(a);hd(a,x,y);break;case 5:var w=c.stateNode;c.flags&32&&(ma(w,""),c.flags&=-33);var _=cm(a);hd(a,_,w);break;case 3:case 4:var L=c.stateNode.containerInfo,W=cm(a);um(a,W,L);break;default:throw Error(r(161))}}catch(re){ct(a,a.return,re)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function XS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;XS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function xi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)YS(a,o.alternate,o),o=o.sibling}function wo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:bi(4,o,o.return),wo(o);break;case 1:ta(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&US(o,o.return,c),wo(o);break;case 27:hc(o.stateNode);case 26:case 5:ta(o,o.return),wo(o);break;case 22:o.memoizedState===null&&wo(o);break;case 30:wo(o);break;default:wo(o)}a=a.sibling}}function Si(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=a,x=o,w=x.flags;switch(x.tag){case 0:case 11:case 15:Si(y,x,c),ac(4,x);break;case 1:if(Si(y,x,c),d=x,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(W){ct(d,d.return,W)}if(d=x,y=d.updateQueue,y!==null){var _=d.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Px(L[y],_)}catch(W){ct(d,d.return,W)}}c&&w&64&&BS(x),ic(x,x.return);break;case 27:HS(x);case 26:case 5:Si(y,x,c),c&&d===null&&w&4&&zS(x),ic(x,x.return);break;case 12:Si(y,x,c);break;case 13:Si(y,x,c),c&&w&4&&KS(y,x);break;case 22:x.memoizedState===null&&Si(y,x,c),ic(x,x.return);break;case 30:break;default:Si(y,x,c)}o=o.sibling}}function pm(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&ql(c))}function hm(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ql(a))}function na(a,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)QS(a,o,c,d),o=o.sibling}function QS(a,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:na(a,o,c,d),y&2048&&ac(9,o);break;case 1:na(a,o,c,d);break;case 3:na(a,o,c,d),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ql(a)));break;case 12:if(y&2048){na(a,o,c,d),a=o.stateNode;try{var x=o.memoizedProps,w=x.id,_=x.onPostCommit;typeof _=="function"&&_(w,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(L){ct(o,o.return,L)}}else na(a,o,c,d);break;case 13:na(a,o,c,d);break;case 23:break;case 22:x=o.stateNode,w=o.alternate,o.memoizedState!==null?x._visibility&2?na(a,o,c,d):oc(a,o):x._visibility&2?na(a,o,c,d):(x._visibility|=2,Rs(a,o,c,d,(o.subtreeFlags&10256)!==0)),y&2048&&pm(w,o);break;case 24:na(a,o,c,d),y&2048&&hm(o.alternate,o);break;default:na(a,o,c,d)}}function Rs(a,o,c,d,y){for(y=y&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var x=a,w=o,_=c,L=d,W=w.flags;switch(w.tag){case 0:case 11:case 15:Rs(x,w,_,L,y),ac(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?Rs(x,w,_,L,y):oc(x,w):(re._visibility|=2,Rs(x,w,_,L,y)),y&&W&2048&&pm(w.alternate,w);break;case 24:Rs(x,w,_,L,y),y&&W&2048&&hm(w.alternate,w);break;default:Rs(x,w,_,L,y)}o=o.sibling}}function oc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,d=o,y=d.flags;switch(d.tag){case 22:oc(c,d),y&2048&&pm(d.alternate,d);break;case 24:oc(c,d),y&2048&&hm(d.alternate,d);break;default:oc(c,d)}o=o.sibling}}var sc=8192;function Is(a){if(a.subtreeFlags&sc)for(a=a.child;a!==null;)ZS(a),a=a.sibling}function ZS(a){switch(a.tag){case 26:Is(a),a.flags&sc&&a.memoizedState!==null&&Ik(Lr,a.memoizedState,a.memoizedProps);break;case 5:Is(a);break;case 3:case 4:var o=Lr;Lr=Od(a.stateNode.containerInfo),Is(a),Lr=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=sc,sc=16777216,Is(a),sc=o):Is(a));break;default:Is(a)}}function JS(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function lc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Xt=d,t1(d,a)}JS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)e1(a),a=a.sibling}function e1(a){switch(a.tag){case 0:case 11:case 15:lc(a),a.flags&2048&&bi(9,a,a.return);break;case 3:lc(a);break;case 12:lc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,md(a)):lc(a);break;default:lc(a)}}function md(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Xt=d,t1(d,a)}JS(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:bi(8,o,o.return),md(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,md(o));break;default:md(o)}a=a.sibling}}function t1(a,o){for(;Xt!==null;){var c=Xt;switch(c.tag){case 0:case 11:case 15:bi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ql(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Xt=d;else e:for(c=a;Xt!==null;){d=Xt;var y=d.sibling,x=d.return;if(FS(d),d===c){Xt=null;break e}if(y!==null){y.return=x,Xt=y;break e}Xt=x}}}var ZN={getCacheForType:function(a){var o=hn(Gt),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},JN=typeof WeakMap=="function"?WeakMap:Map,Je=0,dt=null,ze=null,qe=0,et=0,Vn=null,Ai=!1,Ls=!1,mm=!1,Ra=0,wt=0,Ei=0,Oo=0,gm=0,yr=0,$s=0,cc=null,Ln=null,ym=!1,vm=0,gd=1/0,yd=null,Ci=null,cn=0,Pi=null,Bs=null,Us=0,bm=0,xm=null,n1=null,uc=0,Sm=null;function Kn(){if((Je&2)!==0&&qe!==0)return qe&-qe;if(I.T!==null){var a=Os;return a!==0?a:Tm()}return ei()}function r1(){yr===0&&(yr=(qe&536870912)===0||Qe?is():536870912);var a=gr.current;return a!==null&&(a.flags|=32),yr}function Wn(a,o,c){(a===dt&&(et===2||et===9)||a.cancelPendingCommit!==null)&&(zs(a,0),wi(a,qe,yr,!1)),Ja(a,c),((Je&2)===0||a!==dt)&&(a===dt&&((Je&2)===0&&(Oo|=c),wt===4&&wi(a,qe,yr,!1)),ra(a))}function a1(a,o,c){if((Je&6)!==0)throw Error(r(327));var d=!c&&(o&124)===0&&(o&a.expiredLanes)===0||Ji(a,o),y=d?nk(a,o):Cm(a,o,!0),x=d;do{if(y===0){Ls&&!d&&wi(a,o,0,!1);break}else{if(c=a.current.alternate,x&&!ek(c)){y=Cm(a,o,!1),x=!1;continue}if(y===2){if(x=o,a.errorRecoveryDisabledLanes&x)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var _=a;y=cc;var L=_.current.memoizedState.isDehydrated;if(L&&(zs(_,w).flags|=256),w=Cm(_,w,!1),w!==2){if(mm&&!L){_.errorRecoveryDisabledLanes|=x,Oo|=x,y=4;break e}x=Ln,Ln=y,x!==null&&(Ln===null?Ln=x:Ln.push.apply(Ln,x))}y=w}if(x=!1,y!==2)continue}}if(y===1){zs(a,0),wi(a,o,0,!0);break}e:{switch(d=a,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:wi(d,o,yr,!Ai);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=vm+300-pt(),10<y)){if(wi(d,o,yr,!Ai),as(d,0,!0)!==0)break e;d.timeoutHandle=M1(i1.bind(null,d,c,Ln,yd,ym,o,yr,Oo,$s,Ai,x,2,-0,0),y);break e}i1(d,c,Ln,yd,ym,o,yr,Oo,$s,Ai,x,0,-0,0)}}break}while(!0);ra(a)}function i1(a,o,c,d,y,x,w,_,L,W,re,le,Q,Z){if(a.timeoutHandle=-1,le=o.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(yc={stylesheets:null,count:0,unsuspend:Rk},ZS(o),le=Lk(),le!==null)){a.cancelPendingCommit=le(f1.bind(null,a,o,x,c,d,y,w,_,L,re,1,Q,Z)),wi(a,x,w,!W);return}f1(a,o,x,c,d,y,w,_,L)}function ek(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],x=y.getSnapshot;y=y.value;try{if(!sn(x(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function wi(a,o,c,d){o&=~gm,o&=~Oo,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var y=o;0<y;){var x=31-Mn(y),w=1<<x;d[x]=-1,y&=~w}c!==0&&Tl(a,c,o)}function vd(){return(Je&6)===0?(dc(0),!1):!0}function Am(){if(ze!==null){if(et===0)var a=ze.return;else a=ze,Oa=So=null,Bh(a),Ms=null,tc=0,a=ze;for(;a!==null;)$S(a.alternate,a),a=a.return;ze=null}}function zs(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,vk(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Am(),dt=a,ze=c=Ca(a.current,null),qe=o,et=0,Vn=null,Ai=!1,Ls=Ji(a,o),mm=!1,$s=yr=gm=Oo=Ei=wt=0,Ln=cc=null,ym=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var y=31-Mn(d),x=1<<y;o|=a[y],d&=~x}return Ra=o,Uu(),c}function o1(a,o){$e=null,I.H=id,o===Fl||o===Wu?(o=Ex(),et=3):o===xx?(o=Ex(),et=4):et=o===CS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Vn=o,ze===null&&(wt=1,ud(a,fr(o,a.current)))}function s1(){var a=I.H;return I.H=id,a===null?id:a}function l1(){var a=I.A;return I.A=ZN,a}function Em(){wt=4,Ai||(qe&4194048)!==qe&&gr.current!==null||(Ls=!0),(Ei&134217727)===0&&(Oo&134217727)===0||dt===null||wi(dt,qe,yr,!1)}function Cm(a,o,c){var d=Je;Je|=2;var y=s1(),x=l1();(dt!==a||qe!==o)&&(yd=null,zs(a,o)),o=!1;var w=wt;e:do try{if(et!==0&&ze!==null){var _=ze,L=Vn;switch(et){case 8:Am(),w=6;break e;case 3:case 2:case 9:case 6:gr.current===null&&(o=!0);var W=et;if(et=0,Vn=null,Gs(a,_,L,W),c&&Ls){w=0;break e}break;default:W=et,et=0,Vn=null,Gs(a,_,L,W)}}tk(),w=wt;break}catch(re){o1(a,re)}while(!0);return o&&a.shellSuspendCounter++,Oa=So=null,Je=d,I.H=y,I.A=x,ze===null&&(dt=null,qe=0,Uu()),w}function tk(){for(;ze!==null;)c1(ze)}function nk(a,o){var c=Je;Je|=2;var d=s1(),y=l1();dt!==a||qe!==o?(yd=null,gd=pt()+500,zs(a,o)):Ls=Ji(a,o);e:do try{if(et!==0&&ze!==null){o=ze;var x=Vn;t:switch(et){case 1:et=0,Vn=null,Gs(a,o,x,1);break;case 2:case 9:if(Sx(x)){et=0,Vn=null,u1(o);break}o=function(){et!==2&&et!==9||dt!==a||(et=7),ra(a)},x.then(o,o);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:Sx(x)?(et=0,Vn=null,u1(o)):(et=0,Vn=null,Gs(a,o,x,7));break;case 5:var w=null;switch(ze.tag){case 26:w=ze.memoizedState;case 5:case 27:var _=ze;if(!w||Y1(w)){et=0,Vn=null;var L=_.sibling;if(L!==null)ze=L;else{var W=_.return;W!==null?(ze=W,bd(W)):ze=null}break t}}et=0,Vn=null,Gs(a,o,x,5);break;case 6:et=0,Vn=null,Gs(a,o,x,6);break;case 8:Am(),wt=6;break e;default:throw Error(r(462))}}rk();break}catch(re){o1(a,re)}while(!0);return Oa=So=null,I.H=d,I.A=y,Je=c,ze!==null?0:(dt=null,qe=0,Uu(),wt)}function rk(){for(;ze!==null&&!Ot();)c1(ze)}function c1(a){var o=IS(a.alternate,a,Ra);a.memoizedProps=a.pendingProps,o===null?bd(a):ze=o}function u1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=DS(c,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=DS(c,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:Bh(o);default:$S(c,o),o=ze=dx(o,Ra),o=IS(c,o,Ra)}a.memoizedProps=a.pendingProps,o===null?bd(a):ze=o}function Gs(a,o,c,d){Oa=So=null,Bh(o),Ms=null,tc=0;var y=o.return;try{if(FN(a,y,o,c,qe)){wt=1,ud(a,fr(c,a.current)),ze=null;return}}catch(x){if(y!==null)throw ze=y,x;wt=1,ud(a,fr(c,a.current)),ze=null;return}o.flags&32768?(Qe||d===1?a=!0:Ls||(qe&536870912)!==0?a=!1:(Ai=a=!0,(d===2||d===9||d===3||d===6)&&(d=gr.current,d!==null&&d.tag===13&&(d.flags|=16384))),d1(o,a)):bd(o)}function bd(a){var o=a;do{if((o.flags&32768)!==0){d1(o,Ai);return}a=o.return;var c=KN(o.alternate,o,Ra);if(c!==null){ze=c;return}if(o=o.sibling,o!==null){ze=o;return}ze=o=a}while(o!==null);wt===0&&(wt=5)}function d1(a,o){do{var c=WN(a.alternate,a);if(c!==null){c.flags&=32767,ze=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){ze=a;return}ze=a=c}while(a!==null);wt=6,ze=null}function f1(a,o,c,d,y,x,w,_,L){a.cancelPendingCommit=null;do xd();while(cn!==0);if((Je&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(x=o.lanes|o.childLanes,x|=hh,Ol(a,c,x,w,_,L),a===dt&&(ze=dt=null,qe=0),Bs=o,Pi=a,Us=c,bm=x,xm=y,n1=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,sk(Wi,function(){return y1(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=I.T,I.T=null,y=X.p,X.p=2,w=Je,Je|=4;try{XN(a,o,c)}finally{Je=w,X.p=y,I.T=d}}cn=1,p1(),h1(),m1()}}function p1(){if(cn===1){cn=0;var a=Pi,o=Bs,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=I.T,I.T=null;var d=X.p;X.p=2;var y=Je;Je|=4;try{WS(o,a);var x=Im,w=Bu(a.containerInfo),_=x.focusedElem,L=x.selectionRange;if(w!==_&&_&&_.ownerDocument&&di(_.ownerDocument.documentElement,_)){if(L!==null&&po(_)){var W=L.start,re=L.end;if(re===void 0&&(re=W),"selectionStart"in _)_.selectionStart=W,_.selectionEnd=Math.min(re,_.value.length);else{var le=_.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Ne=_.textContent.length,Te=Math.min(L.start,Ne),ot=L.end===void 0?Te:Math.min(L.end,Ne);!Z.extend&&Te>ot&&(w=ot,ot=Te,Te=w);var z=$l(_,Te),$=$l(_,ot);if(z&&$&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==$.node||Z.focusOffset!==$.offset)){var F=le.createRange();F.setStart(z.node,z.offset),Z.removeAllRanges(),Te>ot?(Z.addRange(F),Z.extend($.node,$.offset)):(F.setEnd($.node,$.offset),Z.addRange(F))}}}}for(le=[],Z=_;Z=Z.parentNode;)Z.nodeType===1&&le.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<le.length;_++){var oe=le[_];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}kd=!!Rm,Im=Rm=null}finally{Je=y,X.p=d,I.T=c}}a.current=o,cn=2}}function h1(){if(cn===2){cn=0;var a=Pi,o=Bs,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=I.T,I.T=null;var d=X.p;X.p=2;var y=Je;Je|=4;try{YS(a,o.alternate,o)}finally{Je=y,X.p=d,I.T=c}}cn=3}}function m1(){if(cn===4||cn===3){cn=0,Ct();var a=Pi,o=Bs,c=Us,d=n1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?cn=5:(cn=0,Bs=Pi=null,g1(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(Ci=null),bu(c),o=o.stateNode,An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(Xi,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=I.T,y=X.p,X.p=2,I.T=null;try{for(var x=a.onRecoverableError,w=0;w<d.length;w++){var _=d[w];x(_.value,{componentStack:_.stack})}}finally{I.T=o,X.p=y}}(Us&3)!==0&&xd(),ra(a),y=a.pendingLanes,(c&4194090)!==0&&(y&42)!==0?a===Sm?uc++:(uc=0,Sm=a):uc=0,dc(0)}}function g1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,ql(o)))}function xd(a){return p1(),h1(),m1(),y1()}function y1(){if(cn!==5)return!1;var a=Pi,o=bm;bm=0;var c=bu(Us),d=I.T,y=X.p;try{X.p=32>c?32:c,I.T=null,c=xm,xm=null;var x=Pi,w=Us;if(cn=0,Bs=Pi=null,Us=0,(Je&6)!==0)throw Error(r(331));var _=Je;if(Je|=4,e1(x.current),QS(x,x.current,w,c),Je=_,dc(0,!1),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(Xi,x)}catch{}return!0}finally{X.p=y,I.T=d,g1(a,o)}}function v1(a,o,c){o=fr(c,o),o=Jh(a.stateNode,o,2),a=mi(a,o,2),a!==null&&(Ja(a,2),ra(a))}function ct(a,o,c){if(a.tag===3)v1(a,a,c);else for(;o!==null;){if(o.tag===3){v1(o,a,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ci===null||!Ci.has(d))){a=fr(c,a),c=AS(2),d=mi(o,c,2),d!==null&&(ES(c,d,o,a),Ja(d,2),ra(d));break}}o=o.return}}function Pm(a,o,c){var d=a.pingCache;if(d===null){d=a.pingCache=new JN;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(mm=!0,y.add(c),a=ak.bind(null,a,o,c),o.then(a,a))}function ak(a,o,c){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,dt===a&&(qe&c)===c&&(wt===4||wt===3&&(qe&62914560)===qe&&300>pt()-vm?(Je&2)===0&&zs(a,0):gm|=c,$s===qe&&($s=0)),ra(a)}function b1(a,o){o===0&&(o=wl()),a=Es(a,o),a!==null&&(Ja(a,o),ra(a))}function ik(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),b1(a,c)}function ok(a,o){var c=0;switch(a.tag){case 13:var d=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),b1(a,c)}function sk(a,o){return rt(a,o)}var Sd=null,Hs=null,wm=!1,Ad=!1,Om=!1,To=0;function ra(a){a!==Hs&&a.next===null&&(Hs===null?Sd=Hs=a:Hs=Hs.next=a),Ad=!0,wm||(wm=!0,ck())}function dc(a,o){if(!Om&&Ad){Om=!0;do for(var c=!1,d=Sd;d!==null;){if(a!==0){var y=d.pendingLanes;if(y===0)var x=0;else{var w=d.suspendedLanes,_=d.pingedLanes;x=(1<<31-Mn(42|a)+1)-1,x&=y&~(w&~_),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,E1(d,x))}else x=qe,x=as(d,d===dt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||Ji(d,x)||(c=!0,E1(d,x));d=d.next}while(c);Om=!1}}function lk(){x1()}function x1(){Ad=wm=!1;var a=0;To!==0&&(yk()&&(a=To),To=0);for(var o=pt(),c=null,d=Sd;d!==null;){var y=d.next,x=S1(d,o);x===0?(d.next=null,c===null?Sd=y:c.next=y,y===null&&(Hs=c)):(c=d,(a!==0||(x&3)!==0)&&(Ad=!0)),d=y}dc(a)}function S1(a,o){for(var c=a.suspendedLanes,d=a.pingedLanes,y=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var w=31-Mn(x),_=1<<w,L=y[w];L===-1?((_&c)===0||(_&d)!==0)&&(y[w]=ua(_,o)):L<=o&&(a.expiredLanes|=_),x&=~_}if(o=dt,c=qe,c=as(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===o&&(et===2||et===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ie(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Ji(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(d!==null&&Ie(d),bu(c)){case 2:case 8:c=ts;break;case 32:c=Wi;break;case 268435456:c=zt;break;default:c=Wi}return d=A1.bind(null,a),c=rt(c,d),a.callbackPriority=o,a.callbackNode=c,o}return d!==null&&d!==null&&Ie(d),a.callbackPriority=2,a.callbackNode=null,2}function A1(a,o){if(cn!==0&&cn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(xd()&&a.callbackNode!==c)return null;var d=qe;return d=as(a,a===dt?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(a1(a,d,o),S1(a,pt()),a.callbackNode!=null&&a.callbackNode===c?A1.bind(null,a):null)}function E1(a,o){if(xd())return null;a1(a,o,!0)}function ck(){bk(function(){(Je&6)!==0?rt(ca,lk):x1()})}function Tm(){return To===0&&(To=is()),To}function C1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ao(""+a)}function P1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function uk(a,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var x=C1((y[He]||null).action),w=d.submitter;w&&(o=(o=w[He]||null)?C1(o.formAction):w.getAttribute("formAction"),o!==null&&(x=o,w=null));var _=new vs("action","action",null,d,y);a.push({event:_,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(To!==0){var L=w?P1(y,w):new FormData(y);Kh(c,{pending:!0,data:L,method:y.method,action:x},null,L)}}else typeof x=="function"&&(_.preventDefault(),L=w?P1(y,w):new FormData(y),Kh(c,{pending:!0,data:L,method:y.method,action:x},x,L))},currentTarget:y}]})}}for(var _m=0;_m<ph.length;_m++){var Dm=ph[_m],dk=Dm.toLowerCase(),fk=Dm[0].toUpperCase()+Dm.slice(1);Ir(dk,"on"+fk)}Ir(ax,"onAnimationEnd"),Ir(ix,"onAnimationIteration"),Ir(ox,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(_N,"onTransitionRun"),Ir(DN,"onTransitionStart"),Ir(NN,"onTransitionCancel"),Ir(sx,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fc));function w1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],y=d.event;d=d.listeners;e:{var x=void 0;if(o)for(var w=d.length-1;0<=w;w--){var _=d[w],L=_.instance,W=_.currentTarget;if(_=_.listener,L!==x&&y.isPropagationStopped())break e;x=_,y.currentTarget=W;try{x(y)}catch(re){cd(re)}y.currentTarget=null,x=L}else for(w=0;w<d.length;w++){if(_=d[w],L=_.instance,W=_.currentTarget,_=_.listener,L!==x&&y.isPropagationStopped())break e;x=_,y.currentTarget=W;try{x(y)}catch(re){cd(re)}y.currentTarget=null,x=L}}}}function Ge(a,o){var c=o[fa];c===void 0&&(c=o[fa]=new Set);var d=a+"__bubble";c.has(d)||(O1(o,a,2,!1),c.add(d))}function Nm(a,o,c){var d=0;o&&(d|=4),O1(c,a,d,o)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function km(a){if(!a[Ed]){a[Ed]=!0,sr.forEach(function(c){c!=="selectionchange"&&(pk.has(c)||Nm(c,!1,a),Nm(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Ed]||(o[Ed]=!0,Nm("selectionchange",!1,o))}}function O1(a,o,c,d){switch(Q1(o)){case 2:var y=Uk;break;case 8:y=zk;break;default:y=Fm}c=y.bind(null,o,c,a),y=void 0,!Cu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?a.addEventListener(o,c,{capture:!0,passive:y}):a.addEventListener(o,c,!0):y!==void 0?a.addEventListener(o,c,{passive:y}):a.addEventListener(o,c,!1)}function Mm(a,o,c,d,y){var x=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var _=d.stateNode.containerInfo;if(_===y)break;if(w===4)for(w=d.return;w!==null;){var L=w.tag;if((L===3||L===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;_!==null;){if(w=Mt(_),w===null)return;if(L=w.tag,L===5||L===6||L===26||L===27){d=x=w;continue e}_=_.parentNode}}d=d.return}va(function(){var W=x,re=Rr(c),le=[];e:{var Q=lx.get(a);if(Q!==void 0){var Z=vs,Ne=a;switch(a){case"keypress":if(li(c)===0)break e;case"keydown":case"keyup":Z=Kp;break;case"focusin":Ne="focus",Z=jl;break;case"focusout":Ne="blur",Z=jl;break;case"beforeblur":case"afterblur":Z=jl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=so;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Qp;break;case ax:case ix:case ox:Z=Hp;break;case sx:Z=Jp;break;case"scroll":case"scrollend":Z=De;break;case"wheel":Z=th;break;case"copy":case"cut":case"paste":Z=Sa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Nu;break;case"toggle":case"beforetoggle":Z=rh}var Te=(o&4)!==0,ot=!Te&&(a==="scroll"||a==="scrollend"),z=Te?Q!==null?Q+"Capture":null:Q;Te=[];for(var $=W,F;$!==null;){var oe=$;if(F=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||F===null||z===null||(oe=si($,z),oe!=null&&Te.push(pc($,oe,F))),ot)break;$=$.return}0<Te.length&&(Q=new Z(Q,Ne,null,c,re),le.push({event:Q,listeners:Te}))}}if((o&7)===0){e:{if(Q=a==="mouseover"||a==="pointerover",Z=a==="mouseout"||a==="pointerout",Q&&c!==jr&&(Ne=c.relatedTarget||c.fromElement)&&(Mt(Ne)||Ne[En]))break e;if((Z||Q)&&(Q=re.window===re?re:(Q=re.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Ne=c.relatedTarget||c.toElement,Z=W,Ne=Ne?Mt(Ne):null,Ne!==null&&(ot=s(Ne),Te=Ne.tag,Ne!==ot||Te!==5&&Te!==27&&Te!==6)&&(Ne=null)):(Z=null,Ne=W),Z!==Ne)){if(Te=so,oe="onMouseLeave",z="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(Te=Nu,oe="onPointerLeave",z="onPointerEnter",$="pointer"),ot=Z==null?Q:Hn(Z),F=Ne==null?Q:Hn(Ne),Q=new Te(oe,$+"leave",Z,c,re),Q.target=ot,Q.relatedTarget=F,oe=null,Mt(re)===W&&(Te=new Te(z,$+"enter",Ne,c,re),Te.target=F,Te.relatedTarget=ot,oe=Te),ot=oe,Z&&Ne)t:{for(Te=Z,z=Ne,$=0,F=Te;F;F=qs(F))$++;for(F=0,oe=z;oe;oe=qs(oe))F++;for(;0<$-F;)Te=qs(Te),$--;for(;0<F-$;)z=qs(z),F--;for(;$--;){if(Te===z||z!==null&&Te===z.alternate)break t;Te=qs(Te),z=qs(z)}Te=null}else Te=null;Z!==null&&T1(le,Q,Z,Te,!1),Ne!==null&&ot!==null&&T1(le,ot,Ne,Te,!0)}}e:{if(Q=W?Hn(W):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Ee=he;else if(Iu(Q))if(Se)Ee=Ea;else{Ee=Aa;var Be=fo}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&ms(W.elementType)&&(Ee=he):Ee=ui;if(Ee&&(Ee=Ee(a,W))){Lu(le,Ee,c,re);break e}Be&&Be(a,Q,W),a==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&ps(Q,"number",Q.value)}switch(Be=W?Hn(W):window,a){case"focusin":(Iu(Be)||Be.contentEditable==="true")&&(xs=Be,uh=W,Bl=null);break;case"focusout":Bl=uh=xs=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,nx(le,c,re);break;case"selectionchange":if(tx)break;case"keydown":case"keyup":nx(le,c,re)}var we;if(bs)e:{switch(a){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else ci?Ll(a,c)&&(_e="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(_e="onCompositionStart");_e&&(ku&&c.locale!=="ko"&&(ci||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&ci&&(we=wu()):(jt=re,Pu="value"in jt?jt.value:jt.textContent,ci=!0)),Be=Cd(W,_e),0<Be.length&&(_e=new lo(_e,a,null,c,re),le.push({event:_e,listeners:Be}),we?_e.data=we:(we=Ru(c),we!==null&&(_e.data=we)))),(we=ih?oh(a,c):sh(a,c))&&(_e=Cd(W,"onBeforeInput"),0<_e.length&&(Be=new lo("onBeforeInput","beforeinput",null,c,re),le.push({event:Be,listeners:_e}),Be.data=we)),uk(le,a,W,c,re)}w1(le,o)})}function pc(a,o,c){return{instance:a,listener:o,currentTarget:c}}function Cd(a,o){for(var c=o+"Capture",d=[];a!==null;){var y=a,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=si(a,c),y!=null&&d.unshift(pc(a,y,x)),y=si(a,o),y!=null&&d.push(pc(a,y,x))),a.tag===3)return d;a=a.return}return[]}function qs(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function T1(a,o,c,d,y){for(var x=o._reactName,w=[];c!==null&&c!==d;){var _=c,L=_.alternate,W=_.stateNode;if(_=_.tag,L!==null&&L===d)break;_!==5&&_!==26&&_!==27||W===null||(L=W,y?(W=si(c,x),W!=null&&w.unshift(pc(c,W,L))):y||(W=si(c,x),W!=null&&w.push(pc(c,W,L)))),c=c.return}w.length!==0&&a.push({event:o,listeners:w})}var hk=/\r\n?/g,mk=/\u0000|\uFFFD/g;function _1(a){return(typeof a=="string"?a:""+a).replace(hk,`
`).replace(mk,"")}function D1(a,o){return o=_1(o),_1(a)===o}function Pd(){}function it(a,o,c,d,y,x){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||ma(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&ma(a,""+d);break;case"className":ls(a,"class",d);break;case"tabIndex":ls(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(a,c,d);break;case"style":Eu(a,d,x);break;case"data":if(o!=="object"){ls(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=ao(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(o!=="input"&&it(a,o,"name",y.name,y,null),it(a,o,"formEncType",y.formEncType,y,null),it(a,o,"formMethod",y.formMethod,y,null),it(a,o,"formTarget",y.formTarget,y,null)):(it(a,o,"encType",y.encType,y,null),it(a,o,"method",y.method,y,null),it(a,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=ao(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=Pd);break;case"onScroll":d!=null&&Ge("scroll",a);break;case"onScrollEnd":d!=null&&Ge("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=ao(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":Ge("beforetoggle",a),Ge("toggle",a),eo(a,"popover",d);break;case"xlinkActuate":cr(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":cr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":cr(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":cr(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":cr(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":cr(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":cr(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":cr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":cr(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":eo(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=gs.get(c)||c,eo(a,c,d))}}function jm(a,o,c,d,y,x){switch(c){case"style":Eu(a,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof d=="string"?ma(a,d):(typeof d=="number"||typeof d=="bigint")&&ma(a,""+d);break;case"onScroll":d!=null&&Ge("scroll",a);break;case"onScrollEnd":d!=null&&Ge("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Pd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ti.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),x=a[He]||null,x=x!=null?x[c]:null,typeof x=="function"&&a.removeEventListener(o,x,y),typeof d=="function")){typeof x!="function"&&x!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,d,y);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):eo(a,c,d)}}}function un(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",a),Ge("load",a);var d=!1,y=!1,x;for(x in c)if(c.hasOwnProperty(x)){var w=c[x];if(w!=null)switch(x){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:it(a,o,x,w,c,null)}}y&&it(a,o,"srcSet",c.srcSet,c,null),d&&it(a,o,"src",c.src,c,null);return;case"input":Ge("invalid",a);var _=x=w=y=null,L=null,W=null;for(d in c)if(c.hasOwnProperty(d)){var re=c[d];if(re!=null)switch(d){case"name":y=re;break;case"type":w=re;break;case"checked":L=re;break;case"defaultChecked":W=re;break;case"value":x=re;break;case"defaultValue":_=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:it(a,o,d,re,c,null)}}Au(a,x,_,L,W,w,y,!1),ai(a);return;case"select":Ge("invalid",a),d=w=x=null;for(y in c)if(c.hasOwnProperty(y)&&(_=c[y],_!=null))switch(y){case"value":x=_;break;case"defaultValue":w=_;break;case"multiple":d=_;default:it(a,o,y,_,c,null)}o=x,c=w,a.multiple=!!d,o!=null?no(a,!!d,o,!1):c!=null&&no(a,!!d,c,!0);return;case"textarea":Ge("invalid",a),x=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(_=c[w],_!=null))switch(w){case"value":d=_;break;case"defaultValue":y=_;break;case"children":x=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:it(a,o,w,_,c,null)}hs(a,d,y,x),ai(a);return;case"option":for(L in c)if(c.hasOwnProperty(L)&&(d=c[L],d!=null))switch(L){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:it(a,o,L,d,c,null)}return;case"dialog":Ge("beforetoggle",a),Ge("toggle",a),Ge("cancel",a),Ge("close",a);break;case"iframe":case"object":Ge("load",a);break;case"video":case"audio":for(d=0;d<fc.length;d++)Ge(fc[d],a);break;case"image":Ge("error",a),Ge("load",a);break;case"details":Ge("toggle",a);break;case"embed":case"source":case"link":Ge("error",a),Ge("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in c)if(c.hasOwnProperty(W)&&(d=c[W],d!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:it(a,o,W,d,c,null)}return;default:if(ms(o)){for(re in c)c.hasOwnProperty(re)&&(d=c[re],d!==void 0&&jm(a,o,re,d,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(d=c[_],d!=null&&it(a,o,_,d,c,null))}function gk(a,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,w=null,_=null,L=null,W=null,re=null;for(Z in c){var le=c[Z];if(c.hasOwnProperty(Z)&&le!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=le;default:d.hasOwnProperty(Z)||it(a,o,Z,null,d,le)}}for(var Q in d){var Z=d[Q];if(le=c[Q],d.hasOwnProperty(Q)&&(Z!=null||le!=null))switch(Q){case"type":x=Z;break;case"name":y=Z;break;case"checked":W=Z;break;case"defaultChecked":re=Z;break;case"value":w=Z;break;case"defaultValue":_=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,o));break;default:Z!==le&&it(a,o,Q,Z,d,le)}}fs(a,w,_,L,W,re,x,y);return;case"select":Z=w=_=Q=null;for(x in c)if(L=c[x],c.hasOwnProperty(x)&&L!=null)switch(x){case"value":break;case"multiple":Z=L;default:d.hasOwnProperty(x)||it(a,o,x,null,d,L)}for(y in d)if(x=d[y],L=c[y],d.hasOwnProperty(y)&&(x!=null||L!=null))switch(y){case"value":Q=x;break;case"defaultValue":_=x;break;case"multiple":w=x;default:x!==L&&it(a,o,y,x,d,L)}o=_,c=w,d=Z,Q!=null?no(a,!!c,Q,!1):!!d!=!!c&&(o!=null?no(a,!!c,o,!0):no(a,!!c,c?[]:"",!1));return;case"textarea":Z=Q=null;for(_ in c)if(y=c[_],c.hasOwnProperty(_)&&y!=null&&!d.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:it(a,o,_,null,d,y)}for(w in d)if(y=d[w],x=c[w],d.hasOwnProperty(w)&&(y!=null||x!=null))switch(w){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&it(a,o,w,y,d,x)}Up(a,Q,Z);return;case"option":for(var Ne in c)if(Q=c[Ne],c.hasOwnProperty(Ne)&&Q!=null&&!d.hasOwnProperty(Ne))switch(Ne){case"selected":a.selected=!1;break;default:it(a,o,Ne,null,d,Q)}for(L in d)if(Q=d[L],Z=c[L],d.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":a.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:it(a,o,L,Q,d,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in c)Q=c[Te],c.hasOwnProperty(Te)&&Q!=null&&!d.hasOwnProperty(Te)&&it(a,o,Te,null,d,Q);for(W in d)if(Q=d[W],Z=c[W],d.hasOwnProperty(W)&&Q!==Z&&(Q!=null||Z!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,o));break;default:it(a,o,W,Q,d,Z)}return;default:if(ms(o)){for(var ot in c)Q=c[ot],c.hasOwnProperty(ot)&&Q!==void 0&&!d.hasOwnProperty(ot)&&jm(a,o,ot,void 0,d,Q);for(re in d)Q=d[re],Z=c[re],!d.hasOwnProperty(re)||Q===Z||Q===void 0&&Z===void 0||jm(a,o,re,Q,d,Z);return}}for(var z in c)Q=c[z],c.hasOwnProperty(z)&&Q!=null&&!d.hasOwnProperty(z)&&it(a,o,z,null,d,Q);for(le in d)Q=d[le],Z=c[le],!d.hasOwnProperty(le)||Q===Z||Q==null&&Z==null||it(a,o,le,Q,d,Z)}var Rm=null,Im=null;function wd(a){return a.nodeType===9?a:a.ownerDocument}function N1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Lm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $m=null;function yk(){var a=window.event;return a&&a.type==="popstate"?a===$m?!1:($m=a,!0):($m=null,!1)}var M1=typeof setTimeout=="function"?setTimeout:void 0,vk=typeof clearTimeout=="function"?clearTimeout:void 0,j1=typeof Promise=="function"?Promise:void 0,bk=typeof queueMicrotask=="function"?queueMicrotask:typeof j1<"u"?function(a){return j1.resolve(null).then(a).catch(xk)}:M1;function xk(a){setTimeout(function(){throw a})}function Oi(a){return a==="head"}function R1(a,o){var c=o,d=0,y=0;do{var x=c.nextSibling;if(a.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(0<d&&8>d){c=d;var w=a.ownerDocument;if(c&1&&hc(w.documentElement),c&2&&hc(w.body),c&4)for(c=w.head,hc(c),w=c.firstChild;w;){var _=w.nextSibling,L=w.nodeName;w[Nr]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=_}}if(y===0){a.removeChild(x),Ac(o);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:d=c.charCodeAt(0)-48;else d=0;c=x}while(c);Ac(o)}function Bm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Bm(c),kr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function Sk(a,o,c,d){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Nr])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=$r(a.nextSibling),a===null)break}return null}function Ak(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=$r(a.nextSibling),a===null))return null;return a}function Um(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Ek(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function $r(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var zm=null;function I1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function L1(a,o,c){switch(o=wd(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function hc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);kr(a)}var vr=new Map,$1=new Set;function Od(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ia=X.d;X.d={f:Ck,r:Pk,D:wk,C:Ok,L:Tk,m:_k,X:Nk,S:Dk,M:kk};function Ck(){var a=Ia.f(),o=vd();return a||o}function Pk(a){var o=Cn(a);o!==null&&o.tag===5&&o.type==="form"?aS(o):Ia.r(a)}var Ys=typeof document>"u"?null:document;function B1(a,o,c){var d=Ys;if(d&&typeof o=="string"&&o){var y=Pn(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),$1.has(y)||($1.add(y),a={rel:a,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),un(o,"link",a),xt(o),d.head.appendChild(o)))}}function wk(a){Ia.D(a),B1("dns-prefetch",a,null)}function Ok(a,o){Ia.C(a,o),B1("preconnect",a,o)}function Tk(a,o,c){Ia.L(a,o,c);var d=Ys;if(d&&a&&o){var y='link[rel="preload"][as="'+Pn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Pn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Pn(c.imageSizes)+'"]')):y+='[href="'+Pn(a)+'"]';var x=y;switch(o){case"style":x=Fs(a);break;case"script":x=Vs(a)}vr.has(x)||(a=h({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),vr.set(x,a),d.querySelector(y)!==null||o==="style"&&d.querySelector(mc(x))||o==="script"&&d.querySelector(gc(x))||(o=d.createElement("link"),un(o,"link",a),xt(o),d.head.appendChild(o)))}}function _k(a,o){Ia.m(a,o);var c=Ys;if(c&&a){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Pn(d)+'"][href="'+Pn(a)+'"]',x=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Vs(a)}if(!vr.has(x)&&(a=h({rel:"modulepreload",href:a},o),vr.set(x,a),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(gc(x)))return}d=c.createElement("link"),un(d,"link",a),xt(d),c.head.appendChild(d)}}}function Dk(a,o,c){Ia.S(a,o,c);var d=Ys;if(d&&a){var y=Kr(d).hoistableStyles,x=Fs(a);o=o||"default";var w=y.get(x);if(!w){var _={loading:0,preload:null};if(w=d.querySelector(mc(x)))_.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},c),(c=vr.get(x))&&Gm(a,c);var L=w=d.createElement("link");xt(L),un(L,"link",a),L._p=new Promise(function(W,re){L.onload=W,L.onerror=re}),L.addEventListener("load",function(){_.loading|=1}),L.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Td(w,o,d)}w={type:"stylesheet",instance:w,count:1,state:_},y.set(x,w)}}}function Nk(a,o){Ia.X(a,o);var c=Ys;if(c&&a){var d=Kr(c).hoistableScripts,y=Vs(a),x=d.get(y);x||(x=c.querySelector(gc(y)),x||(a=h({src:a,async:!0},o),(o=vr.get(y))&&Hm(a,o),x=c.createElement("script"),xt(x),un(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function kk(a,o){Ia.M(a,o);var c=Ys;if(c&&a){var d=Kr(c).hoistableScripts,y=Vs(a),x=d.get(y);x||(x=c.querySelector(gc(y)),x||(a=h({src:a,async:!0,type:"module"},o),(o=vr.get(y))&&Hm(a,o),x=c.createElement("script"),xt(x),un(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function U1(a,o,c,d){var y=(y=te.current)?Od(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Fs(c.href),c=Kr(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Fs(c.href);var x=Kr(y).hoistableStyles,w=x.get(a);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,w),(x=y.querySelector(mc(a)))&&!x._p&&(w.instance=x,w.state.loading=5),vr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},vr.set(a,c),x||Mk(y,a,c,w.state))),o&&d===null)throw Error(r(528,""));return w}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Vs(c),c=Kr(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Fs(a){return'href="'+Pn(a)+'"'}function mc(a){return'link[rel="stylesheet"]['+a+"]"}function z1(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function Mk(a,o,c,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),un(o,"link",c),xt(o),a.head.appendChild(o))}function Vs(a){return'[src="'+Pn(a)+'"]'}function gc(a){return"script[async]"+a}function G1(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+Pn(c.href)+'"]');if(d)return o.instance=d,xt(d),d;var y=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),xt(d),un(d,"style",y),Td(d,c.precedence,a),o.instance=d;case"stylesheet":y=Fs(c.href);var x=a.querySelector(mc(y));if(x)return o.state.loading|=4,o.instance=x,xt(x),x;d=z1(c),(y=vr.get(y))&&Gm(d,y),x=(a.ownerDocument||a).createElement("link"),xt(x);var w=x;return w._p=new Promise(function(_,L){w.onload=_,w.onerror=L}),un(x,"link",d),o.state.loading|=4,Td(x,c.precedence,a),o.instance=x;case"script":return x=Vs(c.src),(y=a.querySelector(gc(x)))?(o.instance=y,xt(y),y):(d=c,(y=vr.get(x))&&(d=h({},c),Hm(d,y)),a=a.ownerDocument||a,y=a.createElement("script"),xt(y),un(y,"link",d),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Td(d,c.precedence,a));return o.instance}function Td(a,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,x=y,w=0;w<d.length;w++){var _=d[w];if(_.dataset.precedence===o)x=_;else if(x!==y)break}x?x.parentNode.insertBefore(a,x.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function Gm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Hm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var _d=null;function H1(a,o,c){if(_d===null){var d=new Map,y=_d=new Map;y.set(c,d)}else y=_d,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var x=c[y];if(!(x[Nr]||x[rn]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var w=x.getAttribute(o)||"";w=a+w;var _=d.get(w);_?_.push(x):d.set(w,[x])}}return d}function q1(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function jk(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Y1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var yc=null;function Rk(){}function Ik(a,o,c){if(yc===null)throw Error(r(475));var d=yc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=Fs(c.href),x=a.querySelector(mc(y));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=Dd.bind(d),a.then(d,d)),o.state.loading|=4,o.instance=x,xt(x);return}x=a.ownerDocument||a,c=z1(c),(y=vr.get(y))&&Gm(c,y),x=x.createElement("link"),xt(x);var w=x;w._p=new Promise(function(_,L){w.onload=_,w.onerror=L}),un(x,"link",c),o.instance=x}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=Dd.bind(d),a.addEventListener("load",o),a.addEventListener("error",o))}}function Lk(){if(yc===null)throw Error(r(475));var a=yc;return a.stylesheets&&a.count===0&&qm(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&qm(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function Dd(){if(this.count--,this.count===0){if(this.stylesheets)qm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Nd=null;function qm(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Nd=new Map,o.forEach($k,a),Nd=null,Dd.call(a))}function $k(a,o){if(!(o.state.loading&4)){var c=Nd.get(a);if(c)var d=c.get(null);else{c=new Map,Nd.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var w=y[x];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=o.instance,w=y.getAttribute("data-precedence"),x=c.get(w)||d,x===d&&c.set(null,y),c.set(w,y),this.count++,d=Dd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),x?x.parentNode.insertBefore(y,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var vc={$$typeof:O,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function Bk(a,o,c,d,y,x,w,_){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.hiddenUpdates=os(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function F1(a,o,c,d,y,x,w,_,L,W,re,le){return a=new Bk(a,o,c,w,_,L,W,le),o=1,x===!0&&(o|=24),x=qn(3,null,null,o),a.current=x,x.stateNode=a,o=Ph(),o.refCount++,a.pooledCache=o,o.refCount++,x.memoizedState={element:d,isDehydrated:c,cache:o},_h(x),a}function V1(a){return a?(a=Cs,a):Cs}function K1(a,o,c,d,y,x){y=V1(y),d.context===null?d.context=y:d.pendingContext=y,d=hi(o),d.payload={element:c},x=x===void 0?null:x,x!==null&&(d.callback=x),c=mi(a,d,o),c!==null&&(Wn(c,a,o),Kl(c,a,o))}function W1(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function Ym(a,o){W1(a,o),(a=a.alternate)&&W1(a,o)}function X1(a){if(a.tag===13){var o=Es(a,67108864);o!==null&&Wn(o,a,67108864),Ym(a,67108864)}}var kd=!0;function Uk(a,o,c,d){var y=I.T;I.T=null;var x=X.p;try{X.p=2,Fm(a,o,c,d)}finally{X.p=x,I.T=y}}function zk(a,o,c,d){var y=I.T;I.T=null;var x=X.p;try{X.p=8,Fm(a,o,c,d)}finally{X.p=x,I.T=y}}function Fm(a,o,c,d){if(kd){var y=Vm(d);if(y===null)Mm(a,o,d,Md,c),Z1(a,d);else if(Hk(y,a,o,c,d))d.stopPropagation();else if(Z1(a,d),o&4&&-1<Gk.indexOf(a)){for(;y!==null;){var x=Cn(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var w=Fr(x.pendingLanes);if(w!==0){var _=x;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var L=1<<31-Mn(w);_.entanglements[1]|=L,w&=~L}ra(x),(Je&6)===0&&(gd=pt()+500,dc(0))}}break;case 13:_=Es(x,2),_!==null&&Wn(_,x,2),vd(),Ym(x,2)}if(x=Vm(d),x===null&&Mm(a,o,d,Md,c),x===y)break;y=x}y!==null&&d.stopPropagation()}else Mm(a,o,d,null,c)}}function Vm(a){return a=Rr(a),Km(a)}var Md=null;function Km(a){if(Md=null,a=Mt(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Md=a,null}function Q1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yr()){case ca:return 2;case ts:return 8;case Wi:case We:return 32;case zt:return 268435456;default:return 32}default:return 32}}var Wm=!1,Ti=null,_i=null,Di=null,bc=new Map,xc=new Map,Ni=[],Gk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z1(a,o){switch(a){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":bc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(o.pointerId)}}function Sc(a,o,c,d,y,x){return a===null||a.nativeEvent!==x?(a={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:x,targetContainers:[y]},o!==null&&(o=Cn(o),o!==null&&X1(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function Hk(a,o,c,d,y){switch(o){case"focusin":return Ti=Sc(Ti,a,o,c,d,y),!0;case"dragenter":return _i=Sc(_i,a,o,c,d,y),!0;case"mouseover":return Di=Sc(Di,a,o,c,d,y),!0;case"pointerover":var x=y.pointerId;return bc.set(x,Sc(bc.get(x)||null,a,o,c,d,y)),!0;case"gotpointercapture":return x=y.pointerId,xc.set(x,Sc(xc.get(x)||null,a,o,c,d,y)),!0}return!1}function J1(a){var o=Mt(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,xu(a.priority,function(){if(c.tag===13){var d=Kn();d=_l(d);var y=Es(c,d);y!==null&&Wn(y,c,d),Ym(c,d)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function jd(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=Vm(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);jr=d,c.target.dispatchEvent(d),jr=null}else return o=Cn(c),o!==null&&X1(o),a.blockedOn=c,!1;o.shift()}return!0}function eA(a,o,c){jd(a)&&c.delete(o)}function qk(){Wm=!1,Ti!==null&&jd(Ti)&&(Ti=null),_i!==null&&jd(_i)&&(_i=null),Di!==null&&jd(Di)&&(Di=null),bc.forEach(eA),xc.forEach(eA)}function Rd(a,o){a.blockedOn===o&&(a.blockedOn=null,Wm||(Wm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qk)))}var Id=null;function tA(a){Id!==a&&(Id=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Id===a&&(Id=null);for(var o=0;o<a.length;o+=3){var c=a[o],d=a[o+1],y=a[o+2];if(typeof d!="function"){if(Km(d||c)===null)continue;break}var x=Cn(c);x!==null&&(a.splice(o,3),o-=3,Kh(x,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function Ac(a){function o(L){return Rd(L,a)}Ti!==null&&Rd(Ti,a),_i!==null&&Rd(_i,a),Di!==null&&Rd(Di,a),bc.forEach(o),xc.forEach(o);for(var c=0;c<Ni.length;c++){var d=Ni[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Ni.length&&(c=Ni[0],c.blockedOn===null);)J1(c),c.blockedOn===null&&Ni.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],x=c[d+1],w=y[He]||null;if(typeof x=="function")w||tA(c);else if(w){var _=null;if(x&&x.hasAttribute("formAction")){if(y=x,w=x[He]||null)_=w.formAction;else if(Km(y)!==null)continue}else _=w.action;typeof _=="function"?c[d+1]=_:(c.splice(d,3),d-=3),tA(c)}}}function Xm(a){this._internalRoot=a}Ld.prototype.render=Xm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=Kn();K1(c,d,a,o,null,null)},Ld.prototype.unmount=Xm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;K1(a.current,2,null,a,null,null),vd(),o[En]=null}};function Ld(a){this._internalRoot=a}Ld.prototype.unstable_scheduleHydration=function(a){if(a){var o=ei();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Ni.length&&o!==0&&o<Ni[c].priority;c++);Ni.splice(c,0,a),c===0&&J1(a)}};var nA=t.version;if(nA!=="19.1.1")throw Error(r(527,nA,"19.1.1"));X.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=p(o),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Yk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{Xi=$d.inject(Yk),An=$d}catch{}}return Cc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,d="",y=vS,x=bS,w=xS,_=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks)),o=F1(a,1,!1,null,null,c,d,y,x,w,_,null),a[En]=o.current,km(a),new Xm(o)},Cc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var d=!1,y="",x=vS,w=bS,_=xS,L=null,W=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(L=c.unstable_transitionCallbacks),c.formState!==void 0&&(W=c.formState)),o=F1(a,1,!0,o,c??null,d,y,x,w,_,L,W),o.context=V1(null),c=o.current,d=Kn(),d=_l(d),y=hi(d),y.callback=null,mi(c,y,d),c=d,o.current.lanes=c,Ja(o,c),ra(o),a[En]=o.current,km(a),new Ld(o)},Cc.version="19.1.1",Cc}var fA;function tM(){if(fA)return Jm.exports;fA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Jm.exports=eM(),Jm.exports}var nM=tM();const rM=Hr(nM),xn=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:6,image:"/img/Interceptor.png",abilities:[{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],tf=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],pA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},Bi=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Ka=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=Bi(l),p={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const h in l.middleLaneBonus)p.hasOwnProperty(h)&&(p[h]+=l.middleLaneBonus[h]);r[s]=p}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},Pr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=xn.find(g=>g.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,p=s.speed,f=s.shields,h=s.class;l.forEach(g=>{g.mod.stat==="attack"&&(u+=g.mod.value),g.mod.stat==="speed"&&(p+=g.mod.value),g.mod.stat==="shields"&&(f+=g.mod.value),g.mod.stat==="cost"&&(h+=g.mod.value)}),h=Math.max(0,h);let m={...e,attack:u,speed:p,maxShields:f,cost:h,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(g=>{g.stat==="attack"&&(m.attack+=g.value),g.stat==="speed"&&(m.speed+=g.value),g.stat==="cost"&&(m.cost=Math.max(0,m.cost+g.value))}),s.abilities?.forEach(g=>{if(g.type==="PASSIVE"){if(g.effect.type==="GRANT_KEYWORD"&&m.keywords.add(g.effect.keyword),g.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:b,mod:S}=g.effect;let A=!1;if(b.type==="SHIP_SECTION_HULL_DAMAGED"&&b.location==="SAME_LANE"){const C=parseInt(t.slice(-1))-1,T=(n.name==="Player 1"?i.player1:i.player2)[C];if(T){const O=n.shipSections[T],M=Bi(O);(M==="damaged"||M==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(m.attack+=S.value)}if(g.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:b,mod:S}=g.effect;let A=0;if(b.type==="OWN_DAMAGED_SECTIONS")for(const C in n.shipSections){const P=n.shipSections[C],T=Bi(P);(T==="damaged"||T==="critical")&&A++}A>0&&(S.stat==="attack"&&(m.attack+=S.value*A),S.stat==="speed"&&(m.speed+=S.value*A))}g.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+g.effect.value),g.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&g.effect.mods.forEach(b=>{b.stat==="attack"&&(m.attack+=b.value),b.stat==="speed"&&(m.speed+=b.value)})}}),n.dronesOnBoard[t]?.forEach(g=>{if(g.id===e.id)return;xn.find(S=>S.name===g.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:C}=S.effect;A==="shields"?m.maxShields+=C:A==="attack"?m.attack+=C:A==="speed"&&(m.speed+=C)}})}),l.forEach(g=>{g.grantedAbilities&&g.grantedAbilities.forEach(b=>{if(b.type==="PASSIVE"&&(b.effect.type==="GRANT_KEYWORD"&&m.keywords.add(b.effect.keyword),b.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=b.effect;S==="attack"&&(m.attack+=A),S==="speed"&&(m.speed+=A),S==="shields"&&(m.maxShields+=A)}})}),m},aM=(e,t)=>({...e,instanceId:t}),Xs=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],Uw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=tf.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(aM(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},Y0=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},iM=(e,t)=>{const n=Ka({shipSections:pA},[]).totals;return{name:e,shipSections:pA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:Uw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Js=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},zw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},ml=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=Pr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},Un=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},$c=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],f=!(typeof n.cost=="number"),{type:h,affinity:m,location:g,custom:b}=n.targeting;let S=null;if(f&&Object.values(s.dronesOnBoard).flat().some(T=>T.id===t.id)&&(S=Un(t.id,s),!S))return[];const A=(P,T)=>{Object.entries(P.dronesOnBoard).forEach(([O,M])=>{let N=!1;g==="ANY_LANE"&&(N=!0),f&&g==="SAME_LANE"&&(N=O===S),N&&M.forEach(D=>{let k=!0;if(b?.includes("DAMAGED_HULL")){const R=xn.find(U=>U.name===D.name);(!R||D.hull>=R.hull)&&(k=!1)}b?.includes("EXHAUSTED")&&(D.isExhausted||(k=!1)),k&&u.push({...D,lane:O,owner:T})})})},C=(P,T)=>{Object.keys(P.shipSections).forEach(O=>{u.push({id:O,owner:T,...P.shipSections[O]})})};if(h==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(s,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(h==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&C(s,e),(m==="ENEMY"||m==="ANY")&&C(l,e==="player1"?"player2":"player1");else if(h==="LANE")["lane1","lane2","lane3"].forEach(P=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:P,owner:e}),m==="ENEMY"||m==="ANY"){const T=e==="player1"?"player2":"player1";u.push({id:P,owner:T})}});else if(h==="DRONE_CARD"){const P=e==="player1"?r:i;P.activeDronePool.forEach(T=>{const O=xn.find(k=>k.name===T.name),M=P.appliedUpgrades[T.name]||[],N=M.filter(k=>k.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;O&&M.length<O.upgradeSlots&&N<D&&u.push({...T,id:T.name,owner:e})})}else if(h==="APPLIED_UPGRADE"){const P=m==="ENEMY"?l:s,T=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(P.dronesOnBoard).flat().forEach(O=>{(P.appliedUpgrades[O.name]||[]).length>0&&u.push({...O,owner:T})})}return u},Gw=(e,t,n,r,i)=>{const s=xn.find(f=>f.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const p=s.abilities.filter(f=>f.type==="TRIGGERED"&&f.trigger==="ON_MOVE");if(p.length>0){const f=l.dronesOnBoard[r].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[r][f];p.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),h.statMods||(h.statMods=[]),m.effects?.forEach(g=>{g.type==="PERMANENT_STAT_MOD"&&(u=!0,h.statMods.push(g.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${g.mod.value} ${g.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},Hw=(e,t,n)=>{const r=xn.find(f=>f.name===t.name);if(!r?.abilities)return{newState:e,effects:[],animationEvents:[]};let i=JSON.parse(JSON.stringify(e));const s=[],l=[];let u=!1;return r.abilities.filter(f=>f.effect?.type==="AFTER_ATTACK").forEach(f=>{const{subEffect:h}=f.effect;if(h.type==="DESTROY_SELF")for(const m in i.dronesOnBoard){const g=i.dronesOnBoard[m].findIndex(b=>b.id===t.id);if(g!==-1){u=!0;const b=i.dronesOnBoard[m][g];s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${f.name}', destroying itself.`}}),l.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:n,targetLane:m,targetType:"drone",timestamp:Date.now()}),i.dronesOnBoard[m]=i.dronesOnBoard[m].filter(S=>S.id!==t.id),Object.assign(i,Js(i,b));break}}else if(h.type==="PERMANENT_STAT_MOD")for(const m in i.dronesOnBoard){const g=i.dronesOnBoard[m].findIndex(b=>b.id===t.id);if(g!==-1){u=!0,i.dronesOnBoard[m][g].statMods||(i.dronesOnBoard[m][g].statMods=[]),s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${f.name}', gaining a permanent +${h.mod.value} ${h.mod.stat}.`}}),i.dronesOnBoard[m][g].statMods.push(h.mod);break}}}),{newState:u?i:e,effects:s,animationEvents:l}},Uy=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>Bi(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},qw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=xn.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const p=t.class;let f=0,h=0;return n===1?(h=Math.min(e.initialDeploymentBudget,p),f=p-h):(h=Math.min(e.deploymentBudget,p),f=p-h),e.energy<f?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${f} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:h,energyCost:f}},Yw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},F0=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=Y0(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},oM=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},sM=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")Yw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=F0(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},lM=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=F0(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},cM=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Ka(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(p=>{l[p]={...n.shipSections[p],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},uM=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,p=Ka(s,l).totals.shieldsPerTurn,f=JSON.parse(JSON.stringify(s.shipSections)),h=Object.keys(f);let m=p,g=0,b=0;for(;m>0&&b<100;){const P=h[g%h.length],T=f[P],O=Y0(P,s,l);T.allocatedShields<O&&(T.allocatedShields++,m--),g++,b++}const S={...s,shipSections:f},C={success:!0,newPhase:"deployment",firstPlayer:tp(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(C.player1State=i,C.player2State=S):(C.player1State=S,C.player2State=i),C},dM=(e,t,n,r,i,s,l)=>{const{effect:u,cost:p}=e,f=r.player1;let h="",m="Ability effect applied.";e.targeting?.type==="LANE"?h=`Lane ${n.id.slice(-1)}`:n&&(h=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${h}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${h}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${h}.`),s&&s({player:f.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:h,outcome:m});const g={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.energy&&(g.player1.energy-=p.energy),p.exhausts)for(const A in g.player1.dronesOnBoard){const C=g.player1.dronesOnBoard[A].findIndex(P=>P.id===t.id);if(C!==-1){g.player1.dronesOnBoard[A][C].isExhausted=!0;break}}const b=e2(u,t,n,g,i,{resolveAttackCallback:l});g.player1=b.newPlayerStates.player1,g.player2=b.newPlayerStates.player2;const S=b.animationEvents||[];return{newPlayerStates:g,shouldEndTurn:!u.goAgain,animationEvents:S}},fM=(e,t,n,r,i,s,l)=>{const{cost:u,effect:p}=e,f=r.player1;s&&s({player:f.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(h.player1.energy-=u.energy,p.type==="REALLOCATE_SHIELDS")return{newPlayerStates:h,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:[]};{const m=t2(p,t,n,h,i,{resolveAttackCallback:l});h.player1=m.newPlayerStates.player1,h.player2=m.newPlayerStates.player2;const g=m.animationEvents||[];return m.needsDiscardSelection?{newPlayerStates:h,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0},animationEvents:g}:{newPlayerStates:h,shouldEndTurn:!0,animationEvents:g}}},Fw=(e,t,n,r,i,s,l,u)=>{const p=qw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Ka(r,s.player1||s));if(!p.isValid)return{success:!1,error:p.reason,message:p.message,newPlayerState:r};const{budgetCost:f,energyCost:h}=p;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const m=JSON.parse(JSON.stringify(r)),g={...m.dronesOnBoard,[t]:[...m.dronesOnBoard[t],{...e,id:0}]},b={...m,dronesOnBoard:g},S=Pr(e,t,b,i,s),A={...e,id:Date.now(),statMods:[],currentShields:S.maxShields,currentMaxShields:S.maxShields,hull:e.hull,isExhausted:!1};m.dronesOnBoard[t].push(A),m.deployedDroneCounts={...m.deployedDroneCounts,[e.name]:(m.deployedDroneCounts[e.name]||0)+1},n===1?m.initialDeploymentBudget-=f:m.deploymentBudget-=f,m.energy-=h,m.dronesOnBoard=ml(m,i,s);const C=[{type:"TELEPORT_IN",targetId:A.id,laneId:t,playerId:u,timestamp:Date.now()}];return{success:!0,newPlayerState:m,deployedDrone:A,animationEvents:C}},pM=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return Uy(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):Uy(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},hM=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=Un(e.id,t);if(!i)return[];const s=Pr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(p=>{const f=Pr(p,i,n,t,r);return!p.isExhausted&&(f.speed>s.speed||f.keywords.has("ALWAYS_INTERCEPTS"))}).map(p=>p.id)},mM=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,p=e.class;let f=0;n===1?f=Math.min(r.initialDeploymentBudget,p):f=Math.min(r.deploymentBudget,p);const h=p-f;if(r.energy<h)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let g={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-f:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-f:r.deploymentBudget,energy:r.energy-h};return g.dronesOnBoard=ml(g,i,s),{success:!0,newPlayerState:g,deployedDrone:m,costs:{energy:h,budget:f}}},gM=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l,attackingPlayer:u}=e,f=t[u==="player1"?"player2":"player1"],h=t[u],m=Pr(r,l,h,f,n),g=f.dronesOnBoard[l].filter(b=>{const S=Pr(b,l,f,h,n);return!b.isExhausted&&(S.speed>m.speed||S.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||b.id!==i.id)});return{hasInterceptors:g.length>0,interceptors:g,attackDetails:e}},V0=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},yM=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},vM=(e,t)=>{const n=V0(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},bM=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=tp(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},xM=(e,t,n,r)=>{const i=zy(e.player1,t,n,e.player2,e.placedSections),s=zy(e.player2,t,r,e.player1,e.opponentPlacedSections),l=Gy(i,n.totals.handLimit),u=Gy(s,r.totals.handLimit),p=tp(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),f={...e,turn:t,turnPhase:"deployment",currentPlayer:p,firstPlayerOfRound:p,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},h=[{type:"ROUND_START",turn:t,firstPlayer:p},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:f,uiEffects:h}},Vw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=Pr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},zy=(e,t,n,r,i)=>({...Vw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),Gy=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},SM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:p,opponentPlacedSections:f}=e,{addLogEntry:h,setPlayer2:m,setPendingAttack:g,endTurn:b,endDeploymentPhase:S,endActionPhase:A,setPassInfo:C}=n;let P;return l==="deployment"&&!u.player2Passed?P=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:f,placedSections:p,getShipStatus:Bi,calculateEffectiveShipStats:Ka,calculateEffectiveStats:Pr,addLogEntry:h}):l==="action"&&!u.player2Passed&&(P=t.handleOpponentAction({player1:r,player2:i,placedSections:p,opponentPlacedSections:f,getShipStatus:Bi,getLaneOfDrone:Un,getValidTargets:$c,calculateEffectiveStats:Pr,addLogEntry:h})),P||null},AM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:p}=t,{addLogEntry:f,setPlayer2:h,setPendingAttack:m,endTurn:g,endDeploymentPhase:b,endActionPhase:S,setPassInfo:A,resolveCardPlay:C}=n;if(e.type==="pass"){const P=!t.passInfo.player1Passed,T={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(P?"player2":null)};return A(T),T.player1Passed?l==="deployment"?b():l==="action"&&S():g("player2"),{newPassInfo:T}}else if(e.type==="deploy"){const{droneToDeploy:P,targetLane:T,logContext:O}=e.payload;f({player:i.name,actionType:"DEPLOY",source:P.name,target:T,outcome:`Deployed to ${T}.`},"aiDeploymentDeploy",O);const M=Fw(P,T,i,r,s,{player1:u,player2:p});return M.success&&(h(M.newPlayerState),g("player2")),{deployedDrone:M.deployedDrone}}else if(e.type==="action"){const P=e.payload,{logContext:T}=e;switch(P.type){case"play_card":C(P.card,P.target,"player2",T);break;case"attack":m({attacker:P.attacker,target:P.target,targetType:P.targetType,lane:P.attacker.lane,attackingPlayer:"player2",aiContext:T});break;case"move":{const{drone:O,fromLane:M,toLane:N}=P;f({player:i.name,actionType:"MOVE",source:O.name,target:N,outcome:`Moved from ${M} to ${N}.`},"aiActionMove",T);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[M]=D.dronesOnBoard[M].filter(U=>U.id!==O.id);const k={...O,isExhausted:!0};D.dronesOnBoard[N].push(k);const{newState:R}=Gw(D,k,M,N,f);R.dronesOnBoard=ml(R,r,{player1:u,player2:p}),h(R),g("player2");break}default:g("player2");break}return{action:P}}return null},Kw=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:f}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=p,b.hand=b.hand.filter(P=>P.instanceId!==e.instanceId),b.discardPile.push(e);const S=new Set(t.map(P=>P.id));b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(P=>!S.has(P.id));const A=t.map(P=>({...P,isExhausted:P.isExhausted||!f.properties?.includes("DO_NOT_EXHAUST")}));b.dronesOnBoard[r].push(...A),h({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(P=>P.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let C=b;return A.forEach(P=>{const{newState:T}=m(C,P,n,r,h);C=T}),C.dronesOnBoard=g(C,s,l),{newPlayerState:C,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},Ww=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:f}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=p,b.hand=b.hand.filter(C=>C.instanceId!==e.instanceId),b.discardPile.push(e),b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(C=>C.id!==t.id);const S={...t,isExhausted:f.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};b.dronesOnBoard[r].push(S),h({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(b,S,n,r,h);return A.dronesOnBoard=g(A,s,l),{newPlayerState:A,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},EM=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Xw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=Bi(i);(s==="damaged"||s==="critical")&&n++}return n},CM=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:p,resolveAttackCallback:f}=s,h=t?t.name||t.id:"N/A";let m="Card effect applied.";const g=e.effect;if(g.type==="DRAW"&&(m=`Drew ${g.value} card(s).`),g.type==="GAIN_ENERGY"&&(m=`Gained ${g.value} energy.`),g.type==="HEAL_HULL"&&(m=`Healed ${g.value} hull on ${h}.`),g.type==="HEAL_SHIELDS"&&(m=`Healed ${g.value} shields on ${h}.`),g.type==="READY_DRONE"&&(m=`Readied ${h}.`),g.type==="DAMAGE"&&(g.scope==="FILTERED"?m=`Dealt ${g.value} damage to filtered targets in ${h}.`:m=`Dealt ${g.value} damage to ${h}.`),g.type==="MODIFY_STAT"){const C=g.mod,P=C.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${h} a ${C.value>0?"+":""}${C.value} ${C.stat} bonus${P}.`}if(g.type==="REPEATING_EFFECT"){const C=r[n],P=Xw(g.condition,C);m=`Drew ${P} card(s) and gained ${P} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:h,outcome:m});let b=EM(e,n,r);const S=PM(e.effect,t,n,b,i,s,e),A=[];if(A.push({type:"CARD_REVEAL",cardId:e.id,cardName:e.name,cardData:e,actingPlayerId:n,timestamp:Date.now()}),e.visualEffect&&t){let C=null,P=null,T=null;if(t.id&&(t.id==="lane1"||t.id==="lane2"||t.id==="lane3")){const O=e.targeting?.affinity||"ANY";O==="ENEMY"?(C=n==="player1"?"player2":"player1",P=t.id,T="lane"):O==="ANY"&&(C="center",P=t.id,T="lane"),C&&T&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:P,targetType:T,duration:e.visualEffect.duration||800,timestamp:Date.now()})}else{for(const O of["player1","player2"]){for(const M in b[O].dronesOnBoard)if(b[O].dronesOnBoard[M].some(N=>N.id===t.id)){C=O,P=M,T="drone";break}if(C)break}if(!C){for(const O of["player1","player2"])if(b[O].shipSections[t.name]||b[O].shipSections[t.id]){C=O,T="section";break}}C&&T&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:P,targetType:T,duration:e.visualEffect.duration||800,timestamp:Date.now()})}}if(S.animationEvents&&A.push(...S.animationEvents),console.log("[ANIMATION EVENTS] resolveCardPlay emitted:",A),!S.needsCardSelection){const C=Qw(e,n,S.newPlayerStates);return{newPlayerStates:C.newPlayerStates,shouldEndTurn:C.shouldEndTurn,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:!1}}return{newPlayerStates:b,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:S.needsCardSelection}},Qw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},PM=(e,t,n,r,i,s,l=null)=>e.effects?wM(e,t,n,r,i,s,l):Zw(e,t,n,r,i,s,l),wM=(e,t,n,r,i,s,l=null)=>{let u=r,p=[];if(e.type==="REPEATING_EFFECT"){const f=Xw(e.condition,u[n]);for(let h=0;h<f;h++)for(const m of e.effects){const g=Zw(m,t,n,u,i,s,l);u=g.newPlayerStates,g.additionalEffects&&p.push(...g.additionalEffects)}}return{newPlayerStates:u,additionalEffects:p}},Zw=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return W0(e,null,t,n,r);case"SEARCH_AND_DRAW":return Jw(e,null,t,n,r);case"GAIN_ENERGY":return OM(e,n,r,i);case"READY_DRONE":return TM(e,t,n,r);case"HEAL_HULL":return K0(e,null,t,n,r,i);case"HEAL_SHIELDS":return _M(e,t,n,r);case"DAMAGE":return ep(e,null,t,n,r,i,s,l);case"DESTROY":return NM(e,t,n,r);case"MODIFY_STAT":return kM(e,t,n,r);case"MODIFY_DRONE_BASE":return MM(e,t,n,r);case"DESTROY_UPGRADE":return jM(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return $M(e,t,n,r,i,s,l);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},OM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,p=Ka(l,u).totals,f=Math.min(p.maxEnergy,l.energy+e.value);return l.energy=f,{newPlayerStates:s,additionalEffects:[]}},TM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(p!==-1){l.dronesOnBoard[u][p].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},_M=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(p!==-1){const f=l.dronesOnBoard[u][p];f.currentShields=Math.min(f.currentMaxShields||f.shields,f.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},DM=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,f=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[f].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${f} ${u}`),console.log(`[DEBUG] Drones in ${f} ${u}:`,m.map(O=>`${O.name}(${O.id}) [${O.hull}hp, ${O.speed}spd]`));const{stat:g,comparison:b,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},P=A[f].dronesOnBoard[u]||[];for(let O=P.length-1;O>=0;O--){const M=P[O];let N=!1;if(b==="GTE"&&M[g]>=S&&(N=!0),b==="LTE"&&M[g]<=S&&(N=!0),console.log(`[DEBUG] ${M.name} ${g}=${M[g]} ${b} ${S} = ${N}`),N){console.log(`[DEBUG] Applying ${e.value} damage to ${M.name}`);const D=M.currentShields||0;let k=e.value;const R=Math.min(k,D);M.currentShields=(M.currentShields||0)-R,k-=R,k>0&&(M.hull-=k),M.hull<=0&&(console.log(`[DEBUG] ${M.name} destroyed`),P.splice(O,1))}}const T=[];for(const O of m){const M=P.find(D=>D.id===O.id);let N=!1;if(b==="GTE"&&O[g]>=S&&(N=!0),b==="LTE"&&O[g]<=S&&(N=!0),N){const D=O.currentShields||0,k=Math.min(e.value,D),R=e.value-k;k>0&&T.push({type:"SHIELD_DAMAGE",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",amount:k,timestamp:Date.now()}),M?R>0&&T.push({type:"HULL_DAMAGE",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",amount:R,timestamp:Date.now()}):T.push({type:"DRONE_DESTROYED",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",timestamp:Date.now()})}}return{newPlayerStates:A,additionalEffects:[],animationEvents:T}}else{const u=r[t.owner],p=Un(t.id,u);if(p){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const f={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=f[t.owner].dronesOnBoard[p]||[],g=m.find(b=>b.id===t.id);if(g){let b=e.value,S=0,A=b;if(e.damageType!=="PIERCING"&&(S=Math.min(b,g.currentShields),A-=S,g.currentShields-=S),g.hull-=A,console.log(`[DEBUG] Applied ${A} hull damage to ${g.name} (${g.hull} hull remaining)`),g.hull<=0){console.log(`[DEBUG] ${g.name} destroyed`);const P=m.findIndex(T=>T.id===t.id);P>=0&&m.splice(P,1)}const C=[];return S>0&&C.push({type:"SHIELD_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:S,timestamp:Date.now()}),g.hull<=0?C.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",timestamp:Date.now()}):A>0&&C.push({type:"HULL_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:A,timestamp:Date.now()}),{newPlayerStates:f,additionalEffects:[],animationEvents:C}}return{newPlayerStates:f,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},NM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const p=t.id;(s[l].dronesOnBoard[p]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:l,targetLane:p,targetType:"drone",timestamp:Date.now()});const g=Js(s[l],m);s[l].deployedDroneCounts={...s[l].deployedDroneCounts||{},...g.deployedDroneCounts}}),s[l].dronesOnBoard[p]=[],(s[n].dronesOnBoard[p]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:n,targetLane:p,targetType:"drone",timestamp:Date.now()});const g=Js(s[n],m);s[n].deployedDroneCounts={...s[n].deployedDroneCounts||{},...g.deployedDroneCounts}}),s[n].dronesOnBoard[p]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const p=s[l],f=Un(t.id,p);if(f){const h=p.dronesOnBoard[f].find(m=>m.id===t.id);if(h){u.push({type:"DRONE_DESTROYED",targetId:h.id,targetPlayer:l,targetLane:f,targetType:"drone",timestamp:Date.now()});const m=Js(p,h);p.deployedDroneCounts={...p.deployedDroneCounts||{},...m.deployedDroneCounts},p.dronesOnBoard[f]=p.dronesOnBoard[f].filter(g=>g.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:[],animationEvents:u}},kM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const p=t.id;l.dronesOnBoard[p]&&l.dronesOnBoard[p].forEach(f=>{f.statMods||(f.statMods=[]),f.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const p in l.dronesOnBoard){const f=l.dronesOnBoard[p].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[p][f];h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},MM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,p=l.appliedUpgrades[u]||[],f={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(f.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...p,f]},{newPlayerStates:s,additionalEffects:[]}},jM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:p,instanceId:f}=t;if(u.appliedUpgrades[p]){const h=u.appliedUpgrades[p].filter(m=>m.instanceId!==f);h.length>0?u.appliedUpgrades[p]=h:delete u.appliedUpgrades[p]}return{newPlayerStates:s,additionalEffects:[]}},ep=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:p}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return DM(e,n,r,i,l,u?.targeting);const f=n.owner==="player1"?i.player1:i.player2,h=Un(n.id,f);if(h&&p){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:h,damageType:e.damageType},g=r2(m,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:g.newPlayerStates,additionalEffects:g.afterAttackEffects||[],animationEvents:g.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},K0=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1";if(e.scope==="LANE"){const f=n.id;u[p].dronesOnBoard[f]&&u[p].dronesOnBoard[f].forEach(h=>{const m=xn.find(g=>g.name===h.name);m&&h.hull<m.hull&&(h.hull=Math.min(m.hull,h.hull+e.value))})}else{const f=xn.find(h=>h.name===n.name);if(f){const h=Un(n.id,u[p]);if(h){const m=u[p].dronesOnBoard[h].findIndex(g=>g.id===n.id);m!==-1&&(u[p].dronesOnBoard[h][m].hull=Math.min(f.hull,u[p].dronesOnBoard[h][m].hull+e.value))}}else if(n.name&&u[p].shipSections[n.name]){const h=u[p].shipSections[n.name],g=(p==="player1"?s.player1:s.player2).find(b=>b.name===n.name);g&&(h.hull=Math.min(g.maxHull,h.hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},W0=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",f=u[p];let h=[...f.deck],m=[...f.hand],g=[...f.discardPile];const b=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<b;A++){if(h.length===0)if(g.length>0)h=[...g].sort(()=>.5-Math.random()),g=[];else break;h.length>0&&m.push(h.pop())}u[p]={...f,deck:h,hand:m,discardPile:g};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},RM=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),Jw=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",f=u[p];let h=[...f.deck],m=[...f.discardPile],g,b;if(e.filter)h.length===0&&m.length>0&&(h=[...m.sort(()=>.5-Math.random())],m=[]),g=h.filter(A=>RM(A,e.filter)).slice(0,e.searchCount),b=h.filter(A=>!g.includes(A));else{const S=e.searchCount;h.length<S&&m.length>0&&(h=[...h,...m.sort(()=>.5-Math.random())],m=[]),g=h.slice(-e.searchCount).reverse(),b=h.slice(0,-e.searchCount)}if(p==="player2"){const S=IM(g,e.drawCount,u),A=g.filter(T=>!S.includes(T)),C=[...f.hand,...S];let P=[...b,...A];return e.shuffleAfter&&(P=P.sort(()=>.5-Math.random())),u[p]={...f,deck:P,hand:C,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:g,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:b,discardPile:m,filter:e.filter}}},IM=(e,t,n,r)=>e.map(s=>({card:s,score:LM(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),LM=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},$M=(e,t,n,r,i,s,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",p=r[n],f=r[u];let h=null,m=-1/0;for(const g of["lane1","lane2","lane3"]){const S=(p.dronesOnBoard[g]||[]).filter(A=>!A.isExhausted);if(S.length!==0)for(const A of["lane1","lane2","lane3"]){if(g===A)continue;if(e.type==="SINGLE_MOVE"){const O=parseInt(g.replace("lane","")),M=parseInt(A.replace("lane",""));if(Math.abs(O-M)!==1)continue}const C=f.dronesOnBoard[A]?.length||0,P=p.dronesOnBoard[A]?.length||0,T=C*10-P*5;T>m&&(m=T,h={fromLane:g,toLane:A,drones:e.type==="SINGLE_MOVE"?[S[0]]:S.slice(0,Math.min(e.count||3,S.length))})}}if(!h)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const g=Ww(l,h.drones[0],h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:g.newPlayerState},additionalEffects:[]}}else{const g=Kw(l,h.drones,h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:g.newPlayerState},additionalEffects:[]}}},e2=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return K0(e,t,n,"player1",r,i);case"DAMAGE":return ep(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},t2=(e,t,n,r,i,s)=>{const l={name:t};switch(e.type){case"DAMAGE":return ep(e,l,n,"player1",r,i,s);case"RECALL_DRONE":return n2(e,t,n,r,i);case"DRAW_THEN_DISCARD":return W0(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},n2=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=Un(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(p=>p.id!==n.id),Object.assign(l.player1,zw(l.player1,n)),l.player1.dronesOnBoard=ml(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[],animationEvents:[]}},r2=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:p,interceptor:f,attackingPlayer:h,abilityDamage:m,goAgain:g,damageType:b,lane:S}=e,A=m!==void 0,C=f||u,P=f?"drone":p,T=h,O=C.owner||(T==="player1"?"player2":"player1"),M=t[T],N=t[O];let D=null,k=null;!A&&l&&l.id&&(D=Un(l.id,M),k=Pr(l,D,M,N,n));let R=m??(k?Math.max(0,k.attack):0),U=b||(l?l.damageType:void 0);k&&k.keywords&&k.keywords.has("PIERCING")&&(U="PIERCING"),P==="section"&&!m&&l&&l.name&&xn.find(Y=>Y.name===l.name)?.abilities?.forEach(Y=>{Y.type==="PASSIVE"&&Y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(R+=Y.effect.value)});let H=0,q=0,K=!1,ce=0,ue=0;if(P==="drone"){let V=null;for(const Y in N.dronesOnBoard)if(V=N.dronesOnBoard[Y].find(ie=>ie.id===C.id),V)break;if(V){let Y=R;U!=="PIERCING"&&(H=Math.min(R,V.currentShields),Y-=H),q=Math.min(Y,V.hull),K=V.hull-q<=0,ce=V.currentShields-H,ue=K?0:V.hull-q}}else{const V=N.shipSections[C.name];if(V){let Y=R;U!=="PIERCING"&&(H=Math.min(R,V.allocatedShields),Y-=H),q=Math.min(Y,V.hull),K=V.hull-q<=0,ce=V.allocatedShields-H,ue=K?0:V.hull-q}}const ne=`Dealt ${H} shield and ${q} hull damage to ${C.name}.`+(P==="drone"?K?` ${C.name} Destroyed.`:` ${C.name} has ${ce} shields and ${ue} hull left.`:""),I=[];if(l&&l.id&&!A&&I.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:T,sourceLane:D,targetId:C.id,targetPlayer:O,targetLane:P==="drone"?Un(C.id,N):null,targetType:P,attackValue:k?k.attack:1,timestamp:Date.now()}),H>0){const V={type:"SHIELD_DAMAGE",targetId:C.id,targetPlayer:O,targetLane:P==="drone"?Un(C.id,N):null,targetType:P,amount:H,timestamp:Date.now()};I.push(V)}if(K){const V={type:P==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:C.id,targetPlayer:O,targetLane:P==="drone"?Un(C.id,N):null,targetType:P,timestamp:Date.now()};I.push(V)}else{if(q>0){const V={type:"HULL_DAMAGE",targetId:C.id,targetPlayer:O,targetLane:P==="drone"?Un(C.id,N):null,targetType:P,amount:q,timestamp:Date.now()};I.push(V)}P==="section"&&(H>0||q>0)&&I.push({type:"SECTION_DAMAGED",targetId:C.id,targetPlayer:O,targetType:"section",timestamp:Date.now()}),l&&l.id&&!A&&I.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:T,sourceLane:D,timestamp:Date.now()})}console.log("[ANIMATION EVENTS] resolveAttack emitted:",I);const X=D||(S?S.replace("lane","Lane "):null),se=P==="drone"?`${C.name} (${X})`:C.name,ge=l&&l.name?`${l.name} (${X})`:"Card Effect";r&&r({player:t[T].name,actionType:"ATTACK",source:ge,target:se,outcome:ne});const j={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(P==="drone"){let V=!1;for(const Y in j[O].dronesOnBoard){const ie=j[O].dronesOnBoard[Y].findIndex(ve=>ve.id===C.id);if(ie!==-1){if(j[O].dronesOnBoard[Y][ie].hull-q<=0){V=!0;const ve=j[O].dronesOnBoard[Y][ie];j[O].dronesOnBoard[Y]=j[O].dronesOnBoard[Y].filter(G=>G.id!==C.id),Object.assign(j[O],Js(j[O],ve))}else j[O].dronesOnBoard[Y][ie].hull-=q,j[O].dronesOnBoard[Y][ie].currentShields-=H;break}}if(V){const Y=O==="player1"?j.player2:j.player1;j[O].dronesOnBoard=ml(j[O],Y,n)}}else{j[O].shipSections[C.name].hull-=q,j[O].shipSections[C.name].allocatedShields-=H;const V=O==="player1"?n.player1:n.player2,Y=Ka(j[O],V).totals;j[O].energy>Y.maxEnergy&&(j[O].energy=Y.maxEnergy)}if(!A&&l&&l.id){let V=!1;for(const Y in j[T].dronesOnBoard){const ie=j[T].dronesOnBoard[Y].findIndex(ve=>ve.id===l.id);if(ie!==-1){j[T].dronesOnBoard[Y][ie].isExhausted=!0,V=!0;break}}if(V){const Y=Hw(j[T],l,T);j[T]=Y.newState,Y.animationEvents&&Y.animationEvents.length>0&&I.push(...Y.animationEvents),Y.effects.forEach(ie=>{ie.type==="LOG"&&r&&r(ie.payload,"afterAttack")})}}if(f){const V=T==="player1"?"player2":"player1";for(const Y in j[V].dronesOnBoard){const ie=j[V].dronesOnBoard[Y].findIndex(ve=>ve.id===f.id);if(ie!==-1){Pr(j[V].dronesOnBoard[Y][ie],Y,j[V],j[T],n).keywords.has("DEFENDER")||(j[V].dronesOnBoard[Y][ie].isExhausted=!0);break}}}return{newPlayerStates:j,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:D||S,targetName:C.name,targetType:P,interceptorName:f?f.name:null,shieldDamage:H,hullDamage:q,wasDestroyed:K,remainingShields:ce,remainingHull:ue,outcome:ne,shouldEndTurn:!g},animationEvents:I}},BM=(e,t)=>{const n=Ka(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},tp=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),UM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},zM=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},GM=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},HM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},qM=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(p=>p.instanceId===l.instanceId||p.name===l.name&&p.id===l.id);if(u!==-1&&s<t){const p=r.splice(u,1)[0];i.push(p),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),p=r.splice(u,1)[0];i.push(p),s++}return{...e,hand:r,discardPile:i,discardCount:s}},a2=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}return s},i2=(e,t)=>t.activeDronePool.map(n=>{const r=xn.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),o2=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},YM=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=$c("player1",e.drone,e.ability,i,s):t?l=$c("player1",{id:t.sectionName},t.ability,i,s):n?u=a2(n,i):r&&(r.type==="Upgrade"?u=i2(r,i):r.effect.type==="MULTI_MOVE"?u=o2(n,i):u=$c("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},FM=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),VM=(e,t,n,r)=>{const i=V0(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},Me={initialPlayerState:iM,buildDeckFromList:Uw,getEffectiveSectionMaxShields:Y0,getShipStatus:Bi,onDroneDestroyed:Js,onDroneRecalled:zw,checkWinCondition:Uy,calculateAfterAttackStateAndEffects:Hw,applyOnMoveEffects:Gw,updateAuras:ml,getLaneOfDrone:Un,getValidTargets:$c,calculateAllValidTargets:YM,calculateMultiSelectTargets:a2,calculateUpgradeTargets:i2,calculateMultiMoveTargets:o2,validateDeployment:qw,validateShieldRemoval:Yw,validateShieldAddition:F0,executeShieldReallocation:oM,getValidShieldReallocationTargets:sM,processShieldAllocation:lM,processResetShieldAllocation:cM,processEndShieldAllocation:uM,resolveAttack:r2,resolveAbility:dM,resolveShipAbility:fM,executeDeployment:Fw,resolveCardPlay:CM,finishCardPlay:Qw,resolveMultiMove:Kw,resolveSingleMove:Ww,checkGameStateForWinner:pM,calculatePotentialInterceptors:hM,calculateAiInterception:gM,calculateTurnTransition:V0,calculatePassTransition:yM,readyDronesAndRestoreShields:Vw,calculateNewRoundPlayerState:zy,drawToHandLimit:Gy,drawPlayerCards:BM,determineFirstPlayer:tp,enforceHandLimit:UM,checkHandLimitCompliance:zM,checkHandLimitViolations:GM,enforceHandLimits:HM,processDiscardPhase:qM,processTurnTransition:vM,processPhaseChange:bM,processRoundStart:xM,createExplosionEffect:FM,createTurnEndEffects:VM,resolveUnifiedDamageEffect:ep,resolveUnifiedHealEffect:K0,resolveUnifiedDrawEffect:W0,resolveSearchAndDrawEffect:Jw,resolveDroneAbilityEffect:e2,resolveShipAbilityEffect:t2,resolveShipRecallEffect:n2,executeAiDeployment:mM,executeAiTurn:SM,executeAiAction:AM},Pc=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:Me,startingDecklist:Xs},Symbol.toStringTag,{value:"Module"})),KM="modulepreload",WM=function(e){return"/"+e},hA={},Br=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=p(n.map(f=>{if(f=WM(f),f in hA)return;hA[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":KM,h||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((b,S)=>{g.addEventListener("load",b),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class XM{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log("💾 GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(`💾 Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(`💾 Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const QM=new XM;class Yt{static instance=null;static getInstance(t){return Yt.instance||(Yt.instance=new Yt(t)),Yt.instance}static reset(){Yt.instance&&Yt.instance.stateSubscriptionCleanup&&Yt.instance.stateSubscriptionCleanup(),Yt.instance=null,console.log("🎯 GameDataService singleton reset")}constructor(t){if(Yt.instance)return console.warn("⚠️ GameDataService already exists. Use getInstance() instead of new GameDataService()"),Yt.instance;this.gameStateManager=t,this.cache=QM,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log("🎯 GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),p=s[l],f=s[u],h=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,p),S=Pr(t,n,m?p:f,m?f:p,h);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Ka(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!0})),p=(l.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:p,hasGuardian:this.hasGuardianInLane(t,p)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const ZM=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"}));class JM{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){if(this.isInitialized){console.log("🤖 AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=Yt.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,console.log("🤖 AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log("🔗 AIPhaseProcessor connected to ActionProcessor for execution"),s&&console.log("🔗 AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const p=this.dronePool?.find(f=>f.name===u);return p||console.warn(`⚠️ AI personality references unknown drone: ${u}`),p}).filter(u=>u),console.log(`🎯 Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const l=r.map(u=>u.name).join(", ");console.log(`🎯 Mapped drones: ${l}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(`🎯 Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error("❌ Not enough drones available for AI selection:",r.length),n&&n.dronePool){const l=n.dronePool.filter(u=>!this.dronePool?.find(p=>p.name===u));l.length>0&&console.error(`❌ Missing drones from collection: ${l.join(", ")}`),console.error(`❌ Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(`❌ Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),s=i.map(l=>l.name).join(", ");return console.log(`🤖 AI selected drones: ${s}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(p=>n.preferredDrones.includes(p.name)),u=Math.min(3,l.length);r=l.slice(0,u),console.log(`🎯 AI selected ${r.length} preferred drones:`,r.map(p=>p.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((p,f)=>{const h=(p.energyCost||1)+(p.health||0)+(p.attack||0);return(f.energyCost||1)+(f.health||0)+(f.attack||0)-h});const l=r?.aggression||.5,u=r?.economy||.5;for(let p=0;p<n&&s.length>0;p++){let f=0;if(l>.7)f=s.findIndex(h=>(h.attack||0)>2),f===-1&&(f=0);else if(u>.7)f=s.findIndex(h=>(h.energyCost||1)<=2),f===-1&&(f=0);else{const h=Math.min(3,s.length);f=Math.floor(Math.random()*h)}i.push(s.splice(f,1)[0])}return console.log(`🎯 AI balanced selection (${n}):`,i.map(p=>p.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(`🎯 Using ${n.name} personality decklist`);const{gameEngine:i}=await Br(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>Pc);return{gameEngine:s}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log("🎯 Using standard deck as fallback");const{gameEngine:i,startingDecklist:s}=await Br(async()=>{const{gameEngine:l,startingDecklist:u}=await Promise.resolve().then(()=>Pc);return{gameEngine:l,startingDecklist:u}},void 0);r=i.buildDeckFromList(s)}return console.log(`✅ AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(`🎯 AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return console.log(`🤖 AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return console.log("🎯 AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return console.log("🎯 AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return console.log("🎯 AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(console.log("🤖 AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Br(async()=>{const{aiBrain:s}=await import("./aiLogic-Lu7oK0ao.js");return{aiBrain:s}},[]),{gameEngine:r}=await Br(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>Pc);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log("🤖 AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(console.log("🤖 AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Br(async()=>{const{aiBrain:s}=await import("./aiLogic-Lu7oK0ao.js");return{aiBrain:s}},[]),{gameEngine:r}=await Br(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>Pc);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});return console.log("🤖 AIPhaseProcessor executing action decision:",i),i.type==="pass"?(await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}),null):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(console.log("🤖 AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await Br(async()=>{const{gameEngine:h}=await Promise.resolve().then(()=>Pc);return{gameEngine:h}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return console.log("🤖 AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},p=[];if(u.hand.length>l){const h=u.hand.length-l;p=u.hand.slice(0,h),u={...u,hand:u.hand.slice(h),discardPile:[...u.discardPile,...p]},console.log(`🤖 AI discarding ${h} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const f=u.hand.length-(r.hand.length-p.length);return f>0&&console.log(`🤖 AI drew ${f} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:p,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(console.log("🤖 AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return console.log("🤖 AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];return u=[...n.hand].sort((f,h)=>h.cost-f.cost).slice(0,l),console.log(`🤖 AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(console.log("🤖 AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return console.log("🤖 AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let p=[];const f=[];return Object.entries(n.dronesOnBoard||{}).forEach(([h,m])=>{m.forEach(g=>{f.push({...g,lane:h})})}),f.sort((h,m)=>{const g=this.gameDataService.getEffectiveStats(h,h.lane),b=this.gameDataService.getEffectiveStats(m,m.lane);return g.power-b.power}),p=f.slice(0,u),console.log(`🤖 AI removing ${p.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:p,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log("🤖 AI has already passed"),!0):!1}async executePass(t){return console.log(`🏳️ AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}async executeShieldAllocationTurn(t){if(console.log("🤖 AIPhaseProcessor.executeShieldAllocationTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");t.player2;const n=t.opponentPlacedSections,r=t.opponentShieldsToAllocate||0;if(r===0){console.log("🤖 AI has no shields to allocate");return}const i=n.map(u=>u.name);if(i.length===0){console.log("🤖 AI has no placed sections to allocate shields to");return}let s=r,l=0;for(console.log(`🤖 AI distributing ${r} shields evenly across ${i.length} sections`);s>0;){const u=i[l];await this.actionProcessor.queueAction({type:"addShield",payload:{sectionName:u,playerId:"player2"}}),s--,l=(l+1)%i.length,console.log(`🤖 AI allocated shield to ${u}, ${s} remaining`)}console.log("✅ AI shield allocation complete")}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||t.winner||t.gameStage==="gameOver"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(console.log(`⏰ AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn(t)},1500)))}async executeTurn(t){if(this.isProcessing){console.log("⚠️ AIPhaseProcessor: Already processing a turn, skipping");return}this.isProcessing=!0;try{console.log(`🤖 AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let n;if(t.turnPhase==="deployment")n=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")n=await this.executeActionTurn(t);else{console.warn(`⚠️ AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}if(n?.needsInterceptionDecision){console.log("🛡️ AIPhaseProcessor: AI attack needs human interception decision, pausing turn loop"),this.isProcessing=!1;return}const r=this.gameStateManager.getState();r.currentPlayer==="player2"&&r.passInfo&&!r.passInfo.player2Passed&&(console.log("🔄 AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(r)},100))}catch(n){console.error("❌ AIPhaseProcessor: Error executing turn:",n)}finally{this.isProcessing=!1}}async makeInterceptionDecision(t,n){if(!this.isInitialized)throw new Error("AIPhaseProcessor not initialized");console.log("🤖 AIPhaseProcessor.makeInterceptionDecision called:",{interceptorCount:t?.length||0,target:n.target?.name});const{aiBrain:r}=await Br(async()=>{const{aiBrain:s}=await import("./aiLogic-Lu7oK0ao.js");return{aiBrain:s}},[]),i=r.makeInterceptionDecision(t,n.target);return console.log("🤖 AI interception decision:",{willIntercept:!!i.interceptor,interceptorName:i.interceptor?.name}),i}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,interception:!0,version:"1.3.0"}}}const Ur=new JM;class La{static instance=null;static getInstance(t){return La.instance||(La.instance=new La(t)),La.instance}static reset(){La.instance=null,console.log("⚙️ ActionProcessor singleton reset")}constructor(t){if(La.instance)return console.warn("⚠️ ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),La.instance;this.gameStateManager=t,this.gameDataService=Yt.getInstance(t),this.animationManager=null,this.pendingAnimationsForBroadcast=[],this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},console.log("⚙️ ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const p=`${u}Passed`;if(s.passInfo[p])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return console.log("🛡️ Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return console.log("🔄 Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return console.log("🏁 Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);case"destroyDrone":return await this.processDestroyDrone(r);case"addShield":return await this.processAddShield(r);case"resetShields":return await this.processResetShields(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{i||this.broadcastStateToGuest(),this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections};let s={...n};if(!n.interceptor){const m=Me.calculateAiInterception(n,{player1:r.player1,player2:r.player2},i);if(m.hasInterceptors){const g=n.attackingPlayer==="player1"?"player2":"player1";if(this.gameStateManager.setState({interceptionPending:{attackDetails:n,defendingPlayerId:g,attackingPlayerId:n.attackingPlayer,interceptors:m.interceptors,timestamp:Date.now()}}),g==="player2"&&r.gameMode==="local"){if(console.log("🛡️ [INTERCEPTION] AI defender has interceptors"),await new Promise(b=>setTimeout(b,1e3)),this.aiPhaseProcessor){const b=await this.aiPhaseProcessor.makeInterceptionDecision(m.interceptors,n);console.log("🛡️ [INTERCEPTION] AI decision:",b.interceptor?"INTERCEPT":"DECLINE"),b.interceptor&&(s.interceptor=b.interceptor,this.gameStateManager.setState({lastInterception:{interceptor:b.interceptor,originalTarget:n.target,timestamp:Date.now()}}))}this.gameStateManager.setState({interceptionPending:null})}else return console.log("🛡️ [INTERCEPTION] Human defender has interceptors"),{needsInterceptionDecision:!0,interceptionData:{interceptors:m.interceptors,attackDetails:m.attackDetails}}}}const l=m=>{this.gameStateManager.addLogEntry(m,"resolveAttack",s.attackingPlayer==="player2"?s.aiContext:null)},u=()=>{},p=()=>{},f=Me.resolveAttack(s,{player1:r.player1,player2:r.player2},i,l,u,p),h=(f.animationEvents||[]).map(m=>({animationName:m.type,payload:{...m,droneId:m.sourceId}}));return console.log("[ANIMATION EVENTS] ActionProcessor received:",f.animationEvents),console.log("[ANIMATION EVENTS] Mapped to animations:",h),console.log("🎬 [AI ANIMATION DEBUG] Built animations array:",{count:h.length,animations:h.map(m=>({name:m.animationName,sourceId:m.payload.sourceId,targetId:m.payload.targetId})),hasAnimationManager:!!this.animationManager}),console.log("🎬 [AI ANIMATION DEBUG] Calling executeAndCaptureAnimations()"),await this.executeAndCaptureAnimations(h),console.log("🎬 [AI ANIMATION DEBUG] executeAndCaptureAnimations() completed"),this.gameStateManager.setPlayerStates(f.newPlayerStates.player1,f.newPlayerStates.player2),r.interceptionPending&&(console.log("🛡️ [INTERCEPTION] Clearing interceptionPending after attack completed"),this.gameStateManager.setState({interceptionPending:null})),this.checkWinCondition(),f.attackResult&&f.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),f}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const p=u.dronesOnBoard[r].findIndex(m=>m.id===n);if(p===-1)throw new Error(`Drone ${n} not found in ${r}`);const f=u.dronesOnBoard[r][p],h={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(m=>m.id!==n),[i]:[...u.dronesOnBoard[i],{...f,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:h}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:f.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),console.log(`✅ Moved ${f.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${f.name} moved from ${r} to ${i}`,drone:f,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null,f=null;if(Object.values(l).forEach(A=>{Object.values(A.dronesOnBoard).forEach(C=>{C.forEach(P=>{P.id===n&&(p=P),P.id===i&&(f=P)})})}),i&&typeof i=="string"&&i.startsWith("lane")&&!f&&(f={id:i}),!p||!p.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const h=p.abilities[r],m=A=>{this.gameStateManager.addLogEntry(A,"resolveAbility")},g=async A=>await this.processAttack({attackDetails:A}),b=Me.resolveAbility(h,p,f,l,u,m,g),S=(b.animationEvents||[]).map(A=>({animationName:A.type,payload:{...A,droneId:A.sourceId}}));if(await this.executeAndCaptureAnimations(S),this.gameStateManager.setPlayerStates(b.newPlayerStates.player1,b.newPlayerStates.player2),this.checkWinCondition(),b.shouldEndTurn){const A=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:A.currentPlayer==="player1"?"player2":"player1"})}return b}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,l=this.gameStateManager.getState(),u=l[i],f=l[i==="player1"?"player2":"player1"],h={player1:l.placedSections,player2:l.opponentPlacedSections},m=b=>{this.gameStateManager.addLogEntry(b)},g=Me.executeDeployment(n,r,s||l.turn,u,f,h,m,i);if(g.success){const b=g.deployedDrone?.id||n.id,S=(g.animationEvents||[]).map(O=>({animationName:O.type,payload:{...O,droneId:O.targetId}})),A={...g.newPlayerState,dronesOnBoard:{...g.newPlayerState.dronesOnBoard,[r]:g.newPlayerState.dronesOnBoard[r].map(O=>O.id===b?{...O,isTeleporting:!0}:O)}};i==="player1"?this.gameStateManager.updatePlayers(A,{}):this.gameStateManager.updatePlayers({},A),await new Promise(O=>setTimeout(O,50));const C=this.executeAndCaptureAnimations(S),P=this.animationManager?.animations?.TELEPORT_IN||{duration:600,config:{revealAt:.7}},T=P.duration*(P.config?.revealAt||.7);setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(g.newPlayerState,{}):this.gameStateManager.updatePlayers({},g.newPlayerState)},T),await C,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return g}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null;if(r){for(const g of["player1","player2"]){for(const b of["lane1","lane2","lane3"]){const A=(l[g].dronesOnBoard[b]||[]).find(C=>C.id===r);if(A){p={...A,owner:g};break}}if(p)break}if(!p)for(const g of["player1","player2"]){const b=l[g].shipSections;for(const S in b)if(b[S].id===r){p={...b[S],name:S,owner:g};break}if(p)break}!p&&r&&r.startsWith("lane")&&(p={id:r})}const f={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},h=Me.resolveCardPlay(n,p,i,l,u,f);console.log("[ANIMATION EVENTS] Card play events:",h.animationEvents);const m=(h.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));if(await this.executeAndCaptureAnimations(m),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),this.checkWinCondition(),h.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return h}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:s,toLane:l,playerId:u}=t,p=this.gameStateManager.getState(),f={player1:p.player1,player2:p.player2},h={player1:p.placedSections,player2:p.opponentPlacedSections},m={logCallback:b=>this.gameStateManager.addLogEntry(b),applyOnMoveEffectsCallback:Me.applyOnMoveEffects,updateAurasCallback:Me.updateAuras};let g;if(r==="single_move"){g=Me.resolveSingleMove(n,i[0],s,l,f[u],f[u==="player1"?"player2":"player1"],h,m);const b={...f,[u]:g.newPlayerState};this.gameStateManager.setPlayerStates(b.player1,b.player2)}else{g=Me.resolveMultiMove(n,i,s,l,f[u],f[u==="player1"?"player2":"player1"],h,m);const b={...f,[u]:g.newPlayerState};this.gameStateManager.setPlayerStates(b.player1,b.player2)}if(g.shouldEndTurn){const b=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:b.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:g.shouldEndTurn}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},p={player1:l.placedSections,player2:l.opponentPlacedSections},f={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},h=Me.resolveShipAbility(n,r,i,u,p,f),m=(h.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));if(await this.executeAndCaptureAnimations(m),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return h}checkWinCondition(){const t=this.gameStateManager.getState();if(t.winner)return null;const n={player1:t.player1,player2:t.player2},r={logCallback:s=>{this.gameStateManager.addLogEntry(s,"checkWinCondition")},setWinnerCallback:s=>{this.gameStateManager.setWinner(s)},showWinnerModalCallback:()=>{}};return Me.checkGameStateForWinner(n,r)}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=Me.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let p=r;u.passInfo&&u.passInfo[`${r}Passed`]?(p=u.currentPlayer,console.log(`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${p}`)):console.log(`[TURN TRANSITION DEBUG] Setting new player: ${p}`),this.gameStateManager.setCurrentPlayer(p)}const l=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return console.log(`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,console.log(`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const f=this.gameStateManager.getLocalPlayerId(),h=i[f],g=this.gameDataService.getEffectiveShipStats(h,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=g,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${g}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1});const u={determineFirstPlayer:"DETERMINING FIRST PLAYER",energyReset:"ENERGY RESET",mandatoryDiscard:"MANDATORY DISCARD PHASE",optionalDiscard:"OPTIONAL DISCARD PHASE",draw:"DRAW PHASE",allocateShields:"ALLOCATE SHIELDS",mandatoryDroneRemoval:"REMOVE EXCESS DRONES",deployment:"DEPLOYMENT PHASE",deploymentComplete:"DEPLOYMENT COMPLETE",action:"ACTION PHASE"};if(u[n]&&this.animationManager){console.log(`🎬 [PHASE ANNOUNCEMENT] Showing announcement for: ${n}`);const f={phaseText:u[n],phaseName:n,timestamp:Date.now()};(n==="deployment"||n==="action")&&(f.firstPlayerId=i.firstPlayerOfRound);const h={animationName:"PHASE_ANNOUNCEMENT",payload:f};await this.executeAndCaptureAnimations([h]),console.log(`🎬 [PHASE ANNOUNCEMENT] Announcement complete for: ${n}`)}console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase} → ${n}`);const p=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:p.turnPhase,placedSections:p.placedSections,opponentPlacedSections:p.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||Me.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),p=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),f=Me.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),h=Me.calculateNewRoundPlayerState(s.player2,n,p,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,firstPasserOfPreviousRound:s.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(f,h),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:f,player2:h}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const p=u.shipSections[r];if(!p||p.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const f={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},h={...u,shipSections:f};return this.gameStateManager.updatePlayerState(s,h),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:h}}else if(n==="add"){const p=s==="player1"?l.placedSections:l.opponentPlacedSections,f=Me.getEffectiveSectionMaxShields(r,u,p),h=u.shipSections[r];if(!h||h.allocatedShields>=f)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},g={...u,shipSections:m};return this.gameStateManager.updatePlayerState(s,g),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:g}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const p={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,p),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:p}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return console.log("🎬 [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",s),s.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const p=this.gameStateManager.getState(),f=!p.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",p.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:p.passInfo.firstPasser||(f?n:null)});const h=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",h),h.player1Passed&&h.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),p.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):p.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processGuestAction(t){if(this.gameStateManager.get("gameMode")!=="host"){console.warn("⚠️ processGuestAction should only be called by host");return}console.log("[HOST] Processing guest action:",t);const r=await this.queueAction({type:t.type,payload:t.payload,isNetworkAction:!0});return this.broadcastStateToGuest(),r}async executeAndCaptureAnimations(t){if(!t||t.length===0)return;this.gameStateManager.get("gameMode")==="host"&&this.pendingAnimationsForBroadcast.push(...t),this.animationManager&&await this.animationManager.executeAnimations(t)}getAndClearPendingAnimations(){const t=[...this.pendingAnimationsForBroadcast];return this.pendingAnimationsForBroadcast=[],t}broadcastStateToGuest(){if(this.gameStateManager.get("gameMode")==="host"&&this.p2pManager&&this.p2pManager.isConnected){const n=this.gameStateManager.getState(),r=this.getAndClearPendingAnimations();console.log("📡 [ANIMATION BROADCAST] Sending state with animations:",{animationCount:r.length,animations:r.map(i=>i.animationName)}),this.p2pManager.broadcastState(n,r)}}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=`${l}Passed`,p=`${n}Passed`,f=!s[u],h={...s,[p]:!0,firstPasser:s.firstPasser||(f?n:null)};if(console.log("[PLAYER PASS DEBUG] Updating pass info:",h),this.gameStateManager.setPassInfo(h,"ActionProcessor"),h.player1Passed&&h.player2Passed)console.log("[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let g=null;n==="player1"&&!h.player2Passed?g="player2":n==="player2"&&!h.player1Passed&&(g="player1"),g&&(console.log(`[PLAYER PASS DEBUG] Switching turn to ${g} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:g},"TURN_SWITCH","playerPass"))}return this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("playerPass",{playerId:n,playerName:r,turnPhase:i,passInfo:h}),{success:!0,newPassInfo:h}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error("🔥 CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error("🔥 CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("aiShipPlacement",{placement:n,aiPersonality:r}),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1}=t,s=this.gameStateManager.getState();if(console.log(`[OPTIONAL DISCARD DEBUG] Processing ${i?"mandatory":"optional"} discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const l=s[n];if(!l)throw new Error(`Player ${n} not found`);r.forEach(f=>{this.gameStateManager.addLogEntry({player:l.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:f.name,target:"N/A",outcome:`Discarded ${f.name}.`})});const u=l.hand.filter(f=>!r.some(h=>f.instanceId===h.instanceId)),p=[...l.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:u,discardPile:p}),console.log(`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){console.log("🎯 ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await Br(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-C-yFl_SP.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),console.log(`✅ First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeDeploymentComplete(t){return console.log(`🎯 ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),console.log(`🔄 Cleared commitments for phase: ${t}`)):(n.commitments={},console.log("🔄 Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;if(console.log(`🤝 ActionProcessor: Processing ${r} commitment for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processCommitment - should send to host instead"),{success:!1,error:"Guest cannot process commitments locally"};const l=this.gameStateManager.getState();l.commitments[r]||(l.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),l.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:l.commitments},"COMMITMENT_UPDATE");const u=l.commitments[r].player1.completed&&l.commitments[r].player2.completed;return console.log(`✅ ${n} ${r} committed, both complete: ${u}`),n==="player1"&&l.gameMode==="local"&&(console.log("🤖 Single-player mode: Auto-completing AI commitment"),Ur&&setTimeout(async()=>{try{await this.handleAICommitment(r,l)}catch(p){console.error("AI commitment error:",p)}},100)),{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:u}}}async handleAICommitment(t,n){try{console.log(`🤖 Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await Ur.processDroneSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"droneSelection",actionData:{drones:r}}});break;case"deckSelection":r=await Ur.processDeckSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deckSelection",actionData:{deck:r}}});break;case"placement":r=await Ur.processPlacement(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"placement",actionData:{placedSections:r}}});break;case"mandatoryDiscard":r=await Ur.executeMandatoryDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"optionalDiscard":r=await Ur.executeOptionalDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"allocateShields":await Ur.executeShieldAllocationTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"allocateShields",actionData:{committed:!0}}});break;case"mandatoryDroneRemoval":r=await Ur.executeMandatoryDroneRemovalTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}}),i()},1e3)});break;case"deploymentComplete":console.log("🤖 AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}}),console.log("🤖 AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(`⚠️ No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(`⚠️ No commitments found for phase: ${t}`),{};console.log(`📋 ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),console.log("✅ Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,discard:[]}),console.log("✅ Applied deck selections to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),console.log("✅ Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":console.log("✅ First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":console.log("✅ Discard commitments (handled via card actions)");break;case"allocateShields":console.log("✅ Shield allocation (handled separately)");break;case"deploymentComplete":console.log("✅ Deployment complete acknowledgments (no state changes)");break;case"determineFirstPlayer":console.log("✅ First player determination (handled by GameFlowManager)");break;default:console.warn(`⚠️ No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return console.log("🃏 ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}=t;return console.log("⚡ ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),i!==void 0&&this.gameStateManager.setState({shieldsToAllocate:i}),s!==void 0&&this.gameStateManager.setState({opponentShieldsToAllocate:s}),console.log(`✅ Energy reset complete - Shields to allocate: ${i||0}, ${s||0}`),{success:!0,message:"Energy reset completed",player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}}async processDestroyDrone(t){const{droneId:n,playerId:r}=t;if(console.log(`💥 ActionProcessor: Processing drone destruction for ${r}, drone ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processDestroyDrone - should send to host instead"),{success:!1,error:"Guest cannot destroy drones locally"};const s=this.gameStateManager.getState(),l=s[r];if(!l)return{success:!1,error:`Player ${r} not found`};const u=Me.getLaneOfDrone(n,l);if(!u)return{success:!1,error:`Drone ${n} not found on board`};const p=l.dronesOnBoard[u].find(S=>S.id===n);if(!p)return{success:!1,error:`Drone ${n} not found in lane ${u}`};let f={...l,dronesOnBoard:{...l.dronesOnBoard}};f.dronesOnBoard[u]=f.dronesOnBoard[u].filter(S=>S.id!==n);const h=Me.onDroneDestroyed(f,p);Object.assign(f,h);const g=s[r==="player1"?"player2":"player1"],b={player1:s.placedSections,player2:s.opponentPlacedSections};return f.dronesOnBoard=Me.updateAuras(f,g,b),this.gameStateManager.updatePlayerState(r,f),console.log(`✅ Drone ${n} destroyed successfully from ${u}`),{success:!0,message:`Drone destroyed from ${u}`,droneId:n,lane:u,droneName:p.name}}async processAddShield(t){const{sectionName:n,playerId:r}=t;if(console.log(`🛡️ ActionProcessor: Processing shield addition for ${r}, section ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processAddShield - should send to host instead"),{success:!1,error:"Guest cannot add shields locally"};const s=this.gameStateManager.getState(),l=r==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate",u=Me.processShieldAllocation({...s,shieldsToAllocate:s[l]},r,n);return u.success?(this.gameStateManager.updatePlayerState(r,u.newPlayerState),this.gameStateManager.setState({[l]:u.newShieldsToAllocate}),console.log(`✅ Shield added to ${n}, ${u.newShieldsToAllocate} shields remaining`),{success:!0,message:`Shield added to ${n}`,sectionName:n,shieldsRemaining:u.newShieldsToAllocate}):(console.warn(`⚠️ Shield allocation failed: ${u.error}`),u)}async processResetShields(t){const{playerId:n}=t;if(console.log(`🔄 ActionProcessor: Processing shield allocation reset for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processResetShields - should send to host instead"),{success:!1,error:"Guest cannot reset shields locally"};const i=this.gameStateManager.getState(),s=Me.processResetShieldAllocation(i,n);if(!s.success)return console.warn(`⚠️ Shield reset failed: ${s.error}`),s;this.gameStateManager.updatePlayerState(n,s.newPlayerState);const l=n==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate";return this.gameStateManager.setState({[l]:s.newShieldsToAllocate}),console.log(`✅ Shield allocation reset, ${s.newShieldsToAllocate} shields available`),{success:!0,message:"Shield allocation reset",shieldsToAllocate:s.newShieldsToAllocate}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}class ej{constructor(t){this.gameStateManager=t,this.messageQueue=[],this.isProcessing=!1,this.renderCompletePromise=null,this.renderCompleteResolve=null}initialize(t){console.log("🎯 [GUEST QUEUE] Initializing GuestMessageQueueService"),t.subscribe(n=>{n.type==="state_update_received"&&(console.log("📥 [GUEST QUEUE] Received state update, queuing for processing"),this.enqueueMessage(n))}),this.gameStateManager.subscribe(n=>{n.type==="render_complete"&&(console.log("✅ [GUEST QUEUE] Render complete received"),this.renderCompleteResolve&&(this.renderCompleteResolve(),this.renderCompleteResolve=null,this.renderCompletePromise=null))})}enqueueMessage(t){console.log("📝 [GUEST QUEUE] Enqueuing message:",{type:t.type,queueLength:this.messageQueue.length+1}),this.messageQueue.push(t),this.processQueue()}async processQueue(){if(this.isProcessing){console.log("⏸️ [GUEST QUEUE] Already processing, queue length:",this.messageQueue.length);return}for(this.isProcessing=!0,console.log("▶️ [GUEST QUEUE] Starting queue processing");this.messageQueue.length>0;){const t=this.messageQueue.shift();console.log("🔄 [GUEST QUEUE] Processing message:",{type:t.type,remaining:this.messageQueue.length}),await this.processMessage(t)}this.isProcessing=!1,console.log("⏹️ [GUEST QUEUE] Queue processing complete")}async processMessage(t){switch(t.type){case"state_update_received":await this.processStateUpdate(t.data);break;default:console.warn("⚠️ [GUEST QUEUE] Unknown message type:",t.type)}}async processStateUpdate({state:t,animations:n}){console.log("📊 [GUEST QUEUE] Processing state update:",{turnPhase:t?.turnPhase,hasAnimations:n?.length>0,animationCount:n?.length||0});const r=n&&n.length>0;let i=null;r&&(console.log("🔧 [GUEST QUEUE] Setting up render listener for animations..."),i=this.waitForRender()),console.log("📝 [GUEST QUEUE] Applying state..."),this.gameStateManager.applyHostState(t),r&&i?(console.log("⏳ [GUEST QUEUE] Waiting for React render before animations..."),await i,console.log("✅ [GUEST QUEUE] React render complete"),this.gameStateManager.actionProcessor?.animationManager&&(console.log("🎬 [GUEST QUEUE] Executing animations..."),await this.gameStateManager.actionProcessor.animationManager.executeAnimations(n),console.log("✅ [GUEST QUEUE] Animations complete"))):console.log("⚡ [GUEST QUEUE] No animations - state applied immediately without render wait"),console.log("✅ [GUEST QUEUE] State update processing complete")}async waitForRender(){return this.renderCompletePromise?this.renderCompletePromise:(this.renderCompletePromise=new Promise(t=>{this.renderCompleteResolve=t}),this.renderCompletePromise)}getStatus(){return{queueLength:this.messageQueue.length,isProcessing:this.isProcessing,waitingForRender:!!this.renderCompletePromise}}}const s2=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(`🎲 Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(`🎯 Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},tj=(e,t=3)=>{if(!e||e.length===0)return console.warn("⚠️ No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(`🔄 Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(`📦 Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class nj{constructor(){console.log("🔄 GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.state={appState:"menu",isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=La.getInstance(this),this.gameFlowManager=null,this.guestQueueService=null,this.p2pIntegrationSetup=!1,console.log("🔄 GAMESTATE INITIALIZATION: GameStateManager created"),console.log("📱 App State:",this.state.appState),console.log("🎮 Game Active:",this.state.gameActive),console.log("✅ GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost),n.data.mode==="guest"&&!this.guestQueueService&&(console.log("🎯 [GUEST QUEUE] Initializing service for guest mode"),this.guestQueueService=new ej(this),this.guestQueueService.initialize(t));break;case"state_update_received":this.state.gameMode==="guest"&&(this.guestQueueService||(console.warn("⚠️ [GUEST QUEUE] Service not initialized, applying state directly (fallback)"),this.applyHostState(n.data.state)));break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}applyHostState(t){if(this.state.gameMode!=="guest"){console.warn("⚠️ applyHostState should only be called in guest mode");return}console.log("[GUEST STATE UPDATE] Applying state from host:",{turnPhase:t.turnPhase,currentPlayer:t.currentPlayer,roundNumber:t.roundNumber});const n=this.state.gameMode;this.state={...t},this.state.gameMode=n,this.emit("HOST_STATE_UPDATE",{hostState:t})}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),p=l.some(A=>A.includes("App.jsx")),f=l.some(A=>A.includes("ActionProcessor")),h=l.some(A=>A.includes("PhaseManager")),m=f||h;p&&!m&&(console.error("🚨 ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error("📋 App.jsx should only call ActionProcessor or PhaseManager methods"),console.error("🔍 Stack trace:",s));const g=Object.keys(t),b=`${u.primaryCaller} in ${u.primaryFile}`;console.log(`🔍 GAMESTATE CHANGE [${n}] from ${b}:`,{changedKeys:g,allUpdates:t,architectureViolation:p&&!m});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,b,n),g.forEach(A=>{if(!["player1","player2"].includes(A)){const C=i[A],P=t[A];JSON.stringify(C)!==JSON.stringify(P)&&console.log(`🔍 STATE CHANGE: ${A}`,{before:C,after:P,caller:b,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(m=>m in t),p=i&&i.includes("GameFlowManager"),f=r==="phaseTransition"||t.turnPhase&&p;u&&!(f&&p)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:p,isPhaseTransition:f,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(p=>{i.has(p.id)&&console.error(`Duplicate drone ID detected: ${p.id} in player${l+1}`),i.add(p.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(console.log("🔍 Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){console.log("✅ Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],p=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],f=Object.keys(t).filter(P=>u.includes(P)),h=Object.keys(t).filter(P=>p.includes(P)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const g=f.every(P=>["player1","player2"].includes(P)),b=f.every(P=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(P));if(m&&(g||b))return;const S=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),C=f.length===1&&f[0]==="passInfo";if(!(S&&A&&C)){if(f.length>0&&!r){const P=i?.split(`
`)||[],T=P.find(O=>O.includes(".jsx")&&!O.includes("GameStateManager"))||P[2]||"Unknown";console.warn("⚠️ ActionProcessor bypass detected: Critical game state updated directly",{updates:f,turnPhase:n.turnPhase,caller:T.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug("🐛 ActionProcessor bypass debug info:",{stackTrace:P.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}h.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];console.log(`🚨 PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(f=>{const h=l?l[f]:void 0,m=u?u[f]:void 0;if(JSON.stringify(h)!==JSON.stringify(m))if(f==="energy"||f==="deploymentBudget"||f==="initialDeploymentBudget")console.log(`  💰 ${f}: ${h} → ${m}`),(m==null||isNaN(m))&&console.error(`  🚨 WARNING: ${f} became ${m}!`);else if(f==="activeDronePool"){const g=Array.isArray(h)?h.length:"undefined",b=Array.isArray(m)?m.length:"undefined";let S,A;if(Array.isArray(h))try{S=h.map(C=>C?.name||"UNNAMED").join(",")}catch(C){S=`ERROR_MAPPING_OLD: ${C.message}`}else S="undefined";if(Array.isArray(m))try{A=m.map(C=>C?.name||"UNNAMED").join(",")}catch(C){A=`ERROR_MAPPING_NEW: ${C.message}`}else A="undefined";if(console.log(`  🤖 ${f}: [${g} drones] → [${b} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(console.log("    🔍 Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("    🔍 First drone object:",m[0])),g!==b||S!==A){const C=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`    📍 Update source:
${C}`)}}else if(f==="hand"||f==="deck"){const g=Array.isArray(h)?h.length:"undefined",b=Array.isArray(m)?m.length:"undefined";console.log(`  🃏 ${f}: [${g} cards] → [${b} cards]`)}else if(f==="dronesOnBoard"){const g=h?`L1:${h.lane1?.length||0} L2:${h.lane2?.length||0} L3:${h.lane3?.length||0}`:"undefined",b=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`  🛸 ${f}: ${g} → ${b}`)}else console.log(`  📝 ${f}:`,{before:h,after:m})}),console.log(`🔍 Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],p=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],f=l.functions.filter(m=>u.some(g=>m.toLowerCase().includes(g.toLowerCase()))),h=l.functions.filter(m=>p.some(g=>m.toLowerCase().includes(g.toLowerCase())));f.length>0&&h.length===0&&(console.warn("🚨 Inappropriate function updating game state:",{inappropriateFunctions:f,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI → ActionProcessor → gameLogic.js → GameStateManager"}),console.debug("🔍 Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:f,appropriateFound:h,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const p of r){const f=u[p];if(!f)continue;const h=Array.isArray(f)?f:[f];let m=!1;for(const g of h)(g==="GameFlowManager"&&i||g==="SequentialPhaseManager"&&s||g==="ActionProcessor"&&l)&&(m=!0);if(!m){const g=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(`🚨 OWNERSHIP VIOLATION: ${g} cannot update '${p}'`,{updateKey:p,currentManager:g,allowedOwners:h,updates:r,recommendation:`Only ${h.join(" or ")} should update '${p}'`})}}}reset(){console.log("🔄 GAME RESET: Resetting game state and clearing caches");const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:Me.initialPlayerState("Player 1",Xs),player2:Me.initialPlayerState("Player 2",Xs),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),Yt.reset(),this.actionProcessor.clearQueue(),console.log("✅ GAME RESET: State, cache, and queue cleared")}startGame(t="local",n={},r={}){console.log("🎮 GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...Me.initialPlayerState(n.name||"Player 1",n.decklist||Xs),...n},player2:{...Me.initialPlayerState(r.name||"Player 2",r.decklist||Xs),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{}},s=s2(xn);i.droneSelectionPool=s.droneSelectionPool,i.droneSelectionTrio=s.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log("👤 Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log("👤 Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log("✅ GAME START: Game session initialized successfully")}endGame(){console.log("🎮 GAME END: Ending current game session and clearing caches"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),Yt.reset(),this.actionProcessor.clearQueue(),console.log("✅ GAME END: Returned to menu state, cache and queue cleared")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log("🔍 [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Re=new nj;class rj{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return aj(t).buffer}}function aj(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function l2(e){return new ij(e).unpack()}function c2(e){const t=new oj,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class ij{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class oj{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,p=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(p)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new rj,this._textEncoder=new TextEncoder}}let u2=!0,d2=!0;function Rc(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function Fo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const p=f=>{const h=n(f);h&&(u.handleEvent?u.handleEvent(h):u(h))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,p),i.apply(this,[l,p])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const p=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,p])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function sj(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(u2=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function lj(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(d2=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function f2(){if(typeof window=="object"){if(u2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function X0(e,t){d2&&console.warn(e+" is deprecated, please use "+t+" instead.")}function cj(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Rc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Rc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Rc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Rc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function mA(e){return Object.prototype.toString.call(e)==="[object Object]"}function p2(e){return mA(e)?Object.keys(e).reduce(function(t,n){const r=mA(e[n]),i=r?p2(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function Hy(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Hy(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Hy(e,e.get(i),n)})}))}function gA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&Hy(e,u,i)})}),i}const yA=f2;function h2(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const p={};return Object.keys(u).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const h=typeof u[f]=="object"?u[f]:{ideal:u[f]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const m=function(g,b){return g?g+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(h.ideal!==void 0){p.optional=p.optional||[];let g={};typeof h.ideal=="number"?(g[m("min",f)]=h.ideal,p.optional.push(g),g={},g[m("max",f)]=h.ideal,p.optional.push(g)):(g[m("",f)]=h.ideal,p.optional.push(g))}h.exact!==void 0&&typeof h.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[m("",f)]=h.exact):["min","max"].forEach(g=>{h[g]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[m(g,f)]=h[g])})}),u.advanced&&(p.optional=(p.optional||[]).concat(u.advanced)),p},i=function(u,p){if(t.version>=61)return p(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const f=function(h,m,g){m in h&&!(g in h)&&(h[g]=h[m],delete h[m])};u=JSON.parse(JSON.stringify(u)),f(u.audio,"autoGainControl","googAutoGainControl"),f(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let f=u.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const h=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete u.video.facingMode;let m;if(f.exact==="environment"||f.ideal==="environment"?m=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(S=>S.kind==="videoinput");let b=g.find(S=>m.some(A=>S.label.toLowerCase().includes(A)));return!b&&g.length&&m.includes("back")&&(b=g[g.length-1]),b&&(u.video.deviceId=f.exact?{exact:b.deviceId}:{ideal:b.deviceId}),u.video=r(u.video),yA("chrome: "+JSON.stringify(u)),p(u)})}u.video=r(u.video)}return yA("chrome: "+JSON.stringify(u)),p(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,p,f){i(u,h=>{n.webkitGetUserMedia(h,p,m=>{f&&f(s(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(p){return i(p,f=>u(f).then(h=>{if(f.audio&&!h.getAudioTracks().length||f.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function m2(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function g2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Fo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function y2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,p){let f=i.apply(this,arguments);return f||(f=t(this,u),this._senders.push(f)),f};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const p=this._senders.indexOf(u);p!==-1&&this._senders.splice(p,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(p=>p.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function v2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>gA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Fo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>gA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function b2(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(p)===-1&&this._shimmedLocalStreams[u.id].push(p):this._shimmedLocalStreams[u.id]=[u,p],p};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(m=>m.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const p=this.getSenders().filter(f=>u.indexOf(f)===-1);this._shimmedLocalStreams[l.id]=[l].concat(p)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const p=this._shimmedLocalStreams[u].indexOf(l);p!==-1&&this._shimmedLocalStreams[u].splice(p,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function x2(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return b2(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(m=>{if(this.getSenders().find(b=>b.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const m=new e.MediaStream(h.getTracks());this._streams[h.id]=m,this._reverseStreams[m.id]=h,h=m}r.apply(this,[h])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(A=>A===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([h]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===h)};function s(f,h){let m=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const b=f._reverseStreams[g],S=f._streams[b.id];m=m.replace(new RegExp(S.id,"g"),b.id)}),new RTCSessionDescription({type:h.type,sdp:m})}function l(f,h){let m=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const b=f._reverseStreams[g],S=f._streams[b.id];m=m.replace(new RegExp(b.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:m})}["createOffer","createAnswer"].forEach(function(f){const h=e.RTCPeerConnection.prototype[f],m={[f](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[S=>{const A=s(this,S);g[0].apply(null,[A])},S=>{g[1]&&g[1].apply(null,S)},arguments[2]]):h.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[f]=m[f]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const f=p.get.apply(this);return f.type===""?f:s(this,f)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(A=>h.track===A)&&(g=this._streams[b])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function qy(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function S2(e,t){Fo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const vA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:S2,shimAddTrackRemoveTrack:x2,shimAddTrackRemoveTrackWithNative:b2,shimGetSendersWithDtmf:y2,shimGetUserMedia:h2,shimMediaStream:m2,shimOnTrack:g2,shimPeerConnection:qy,shimSenderReceiverGetStats:v2},Symbol.toStringTag,{value:"Module"}));function A2(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){X0("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,p){u in l&&!(p in l)&&(l[p]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function uj(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function E2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Yy(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(p=>{if(t.version<53&&!l)try{p.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;p.forEach((h,m)=>{p.set(m,Object.assign({},h,{type:n[h.type]||h.type}))})}return p}).then(l,u)}}function C2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function P2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Fo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function w2(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){X0("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function O2(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function T2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function _2(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function D2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function N2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const bA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:T2,shimCreateAnswer:N2,shimCreateOffer:D2,shimGetDisplayMedia:uj,shimGetParameters:_2,shimGetUserMedia:A2,shimOnTrack:E2,shimPeerConnection:Yy,shimRTCDataChannel:O2,shimReceiverGetStats:P2,shimRemoveStream:w2,shimSenderGetStats:C2},Symbol.toStringTag,{value:"Module"}));function k2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function M2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function j2(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(f,h){const m=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[m]);return h?(g.then(f,h),Promise.resolve()):g},t.createAnswer=function(f,h){const m=arguments.length>=2?arguments[2]:arguments[0],g=r.apply(this,[m]);return h?(g.then(f,h),Promise.resolve()):g};let u=function(p,f,h){const m=i.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m};t.setLocalDescription=u,u=function(p,f,h){const m=s.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m},t.setRemoteDescription=u,u=function(p,f,h){const m=l.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m},t.addIceCandidate=u}function R2(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(I2(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function I2(e){return e&&e.video!==void 0?Object.assign({},e,{video:p2(e.video)}):e}function L2(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(X0("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function $2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function B2(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function U2(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const xA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:U2,shimCallbacksAPI:j2,shimConstraints:I2,shimCreateOfferLegacy:B2,shimGetUserMedia:R2,shimLocalStreamsAPI:k2,shimRTCIceServerUrls:L2,shimRemoteStreamsAPI:M2,shimTrackEventTransceiver:$2},Symbol.toStringTag,{value:"Module"}));var rg={exports:{}},SA;function dj(){return SA||(SA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const p=s[u],f=t.matchPrefix(n,"a=rtpmap:"+p+" ")[0];if(f){const h=t.parseRtpMap(f),m=t.matchPrefix(n,"a=fmtp:"+p+" ");switch(h.parameters=m.length?t.parseFmtp(m[0]):{},h.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+p+" ").map(t.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(p=>{u.rtcpFeedback.find(h=>h.type===p.type&&h.parameter===p.parameter)||u.rtcpFeedback.push(p)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(g=>t.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),p=u.length>0&&u[0].ssrc;let f;const h=t.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(S=>parseInt(S,10)));h.length>0&&h[0].length>1&&h[0][0]===p&&(f=h[0][1]),i.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let b={ssrc:p,codecPayloadType:parseInt(g.parameters.apt,10)};p&&f&&(b.rtx={ssrc:f}),r.push(b),s&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:p,mechanism:l?"red+ulpfec":"red"},r.push(b))}}),r.length===0&&p&&r.push({ssrc:p});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(g=>{g.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const p=u[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(rg)),rg.exports}var z2=dj();const el=Hr(z2),fj=Lw({__proto__:null,default:el},[z2]);function nf(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=el.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Fo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Fy(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Fo(e,"icecandidate",t=>{if(t.candidate){const n=el.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function rf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const p=el.splitSections(u.sdp);return p.shift(),p.some(f=>{const h=el.parseMLine(f);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(u){const p=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const f=parseInt(p[1],10);return f!==f?-1:f},i=function(u){let p=65536;return t.browser==="firefox"&&(t.version<57?u===-1?p=16384:p=2147483637:t.version<60?p=t.version===57?65535:65536:p=2147483637),p},s=function(u,p){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const h=el.matchPrefix(u.sdp,"a=max-message-size:");return h.length>0?f=parseInt(h[0].substring(19),10):t.browser==="firefox"&&p!==-1&&(f=2147483637),f},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const p=r(arguments[0]),f=i(p),h=s(arguments[0],p);let m;f===0&&h===0?m=Number.POSITIVE_INFINITY:f===0||h===0?m=Math.max(f,h):m=Math.min(f,h);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return m}}),this._sctp=g}return l.apply(this,arguments)}}function af(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],p=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&p>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Fo(e,"datachannel",r=>(t(r.channel,r.target),r))}function Vy(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Ky(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function of(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function sf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const pj=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Ky,shimAddIceCandidateNullOrEmpty:of,shimConnectionState:Vy,shimMaxMessageSize:rf,shimParameterlessSetLocalDescription:sf,shimRTCIceCandidate:nf,shimRTCIceCandidateRelayProtocol:Fy,shimSendThrowTypeError:af},Symbol.toStringTag,{value:"Module"}));function hj({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=f2,r=cj(e),i={browserDetails:r,commonShim:pj,extractVersion:Rc,disableLog:sj,disableWarnings:lj,sdp:fj};switch(r.browser){case"chrome":if(!vA||!qy||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=vA,of(e,r),sf(e),h2(e,r),m2(e),qy(e,r),g2(e),x2(e,r),y2(e),v2(e),S2(e,r),nf(e),Fy(e),Vy(e),rf(e,r),af(e),Ky(e,r);break;case"firefox":if(!bA||!Yy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=bA,of(e,r),sf(e),A2(e,r),Yy(e,r),E2(e),w2(e),C2(e),P2(e),O2(e),T2(e),_2(e),D2(e),N2(e),nf(e),Vy(e),rf(e,r),af(e);break;case"safari":if(!xA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=xA,of(e,r),sf(e),L2(e),B2(e),j2(e),k2(e),M2(e),$2(e),R2(e),U2(e),nf(e),Fy(e),rf(e,r),af(e),Ky(e,r);break;default:n("Unsupported browser!");break}return i}const AA=hj({window:typeof window>"u"?void 0:window});function Vo(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class G2{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),p=t.slice(l,u),f={__peerData:this._dataCount,n:s,data:p,total:i};n.push(f),l=u,s++}return this._dataCount++,n}}}function mj(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const ag=AA.default||AA,wc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return ag.browserDetails.browser}getVersion(){return ag.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=ag.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},gj=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),H2=()=>Math.random().toString(36).slice(2),EA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class yj extends G2{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=EA,this.browser=wc.getBrowser(),this.browserVersion=wc.getVersion(),this.pack=c2,this.unpack=l2,this.supports=(function(){const n={browser:wc.isBrowserSupported(),webRTC:wc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(EA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!wc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=gj,this.randomToken=H2}}const $n=new yj,vj="PeerJS: ";class bj{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[vj,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ce=new bj,Q0={},xj=Object.prototype.hasOwnProperty,Nn="~";function Gc(){}Object.create&&(Gc.prototype=Object.create(null),new Gc().__proto__||(Nn=!1));function Sj(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function q2(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new Sj(n,r||e,i),l=Nn?Nn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function lf(e,t){--e._eventsCount===0?e._events=new Gc:delete e._events[t]}function Sn(){this._events=new Gc,this._eventsCount=0}Sn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)xj.call(n,r)&&t.push(Nn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Sn.prototype.listeners=function(t){var n=Nn?Nn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};Sn.prototype.listenerCount=function(t){var n=Nn?Nn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Sn.prototype.emit=function(t,n,r,i,s,l){var u=Nn?Nn+t:t;if(!this._events[u])return!1;var p=this._events[u],f=arguments.length,h,m;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),f){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,n),!0;case 3:return p.fn.call(p.context,n,r),!0;case 4:return p.fn.call(p.context,n,r,i),!0;case 5:return p.fn.call(p.context,n,r,i,s),!0;case 6:return p.fn.call(p.context,n,r,i,s,l),!0}for(m=1,h=new Array(f-1);m<f;m++)h[m-1]=arguments[m];p.fn.apply(p.context,h)}else{var g=p.length,b;for(m=0;m<g;m++)switch(p[m].once&&this.removeListener(t,p[m].fn,void 0,!0),f){case 1:p[m].fn.call(p[m].context);break;case 2:p[m].fn.call(p[m].context,n);break;case 3:p[m].fn.call(p[m].context,n,r);break;case 4:p[m].fn.call(p[m].context,n,r,i);break;default:if(!h)for(b=1,h=new Array(f-1);b<f;b++)h[b-1]=arguments[b];p[m].fn.apply(p[m].context,h)}}return!0};Sn.prototype.on=function(t,n,r){return q2(this,t,n,r,!1)};Sn.prototype.once=function(t,n,r){return q2(this,t,n,r,!0)};Sn.prototype.removeListener=function(t,n,r,i){var s=Nn?Nn+t:t;if(!this._events[s])return this;if(!n)return lf(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&lf(this,s);else{for(var u=0,p=[],f=l.length;u<f;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&p.push(l[u]);p.length?this._events[s]=p.length===1?p[0]:p:lf(this,s)}return this};Sn.prototype.removeAllListeners=function(t){var n;return t?(n=Nn?Nn+t:t,this._events[n]&&lf(this,n)):(this._events=new Gc,this._eventsCount=0),this};Sn.prototype.off=Sn.prototype.removeListener;Sn.prototype.addListener=Sn.prototype.on;Sn.prefixed=Nn;Sn.EventEmitter=Sn;Q0=Sn;var Ko={};Vo(Ko,"ConnectionType",()=>Li);Vo(Ko,"PeerErrorType",()=>Lt);Vo(Ko,"BaseConnectionErrorType",()=>Wy);Vo(Ko,"DataConnectionErrorType",()=>Z0);Vo(Ko,"SerializationType",()=>np);Vo(Ko,"SocketEventType",()=>Ii);Vo(Ko,"ServerMessageType",()=>yn);var Li=(function(e){return e.Data="data",e.Media="media",e})({}),Lt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Wy=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Z0=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),np=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Ii=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),yn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const Y2="1.5.5";class Aj extends Q0.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Y2),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Ce.log("Server message received:",s)}catch{Ce.log("Invalid server message",i.data);return}this.emit(Ii.Message,s)},this._socket.onclose=i=>{this._disconnected||(Ce.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Ii.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ce.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ce.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:yn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Ii.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class F2{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Li.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Ce.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Ce.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Ce.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:yn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Ce.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Wy.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Ce.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Wy.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Ce.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Ce.log("Listening for data channel"),t.ondatachannel=l=>{Ce.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},Ce.log("Listening for remote stream"),t.ontrack=l=>{Ce.log("Received remote stream");const u=l.streams[0],p=s.getConnection(n,r);if(p.type===Li.Media){const f=p;this._addStreamToMediaConnection(u,f)}}}cleanup(){Ce.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Ce.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Li.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:yn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Lt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Lt.WebRTC,r),Ce.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Ce.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:yn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Lt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Lt.WebRTC,r),Ce.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Ce.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Ce.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Lt.WebRTC,l),Ce.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Ce.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Ce.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Lt.WebRTC,n),Ce.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Ce.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Ce.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Ce.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class V2 extends Q0.EventEmitter{emitError(t,n){Ce.error("Error:",n),this.emit("error",new Ej(`${t}`,n))}}class Ej extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class K2 extends V2{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class pf extends K2{static#e=this.ID_PREFIX="mc_";get type(){return Li.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||pf.ID_PREFIX+$n.randomToken(),this._negotiator=new F2(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Ce.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case yn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case yn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ce.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Ce.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Cj{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",Y2),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Ce.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==$n.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===$n.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Ce.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class hf extends K2{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Li.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||hf.ID_PREFIX+H2(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new F2(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Ce.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Z0.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case yn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case yn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Ce.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class J0 extends hf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>hf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Ce.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class ig extends J0{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new G2,this.serialization=np.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=l2(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=mj(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=c2(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Ce.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class Pj extends J0{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=np.None}}class wj extends J0{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=$n.chunkedMTU){this.emitError(Z0.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=np.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class ev extends V2{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:Pj,json:wj,binary:ig,"binary-utf8":ig,default:ig},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:$n.CLOUD_HOST,port:$n.CLOUD_PORT,path:"/",key:ev.DEFAULT_KEY,token:$n.randomToken(),config:$n.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==$n.CLOUD_HOST?this._options.secure=$n.isSecure():this._options.host==$n.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ce.setLogFunction(this._options.logFunction),Ce.logLevel=this._options.debug||0,this._api=new Cj(n),this._socket=this._createServerConnection(),!$n.supports.audioVideo&&!$n.supports.data){this._delayedAbort(Lt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!$n.validateId(r)){this._delayedAbort(Lt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Lt.ServerError,i))}_createServerConnection(){const t=new Aj(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Ii.Message,n=>{this._handleMessage(n)}),t.on(Ii.Error,n=>{this._abort(Lt.SocketError,n)}),t.on(Ii.Disconnected,()=>{this.disconnected||(this.emitError(Lt.Network,"Lost connection to server."),this.disconnect())}),t.on(Ii.Close,()=>{this.disconnected||this._abort(Lt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case yn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case yn.Error:this._abort(Lt.ServerError,r.msg);break;case yn.IdTaken:this._abort(Lt.UnavailableID,`ID "${this.id}" is taken`);break;case yn.InvalidKey:this._abort(Lt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case yn.Leave:Ce.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case yn.Expire:this.emitError(Lt.PeerUnavailable,`Could not connect to peer ${i}`);break;case yn.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),Ce.warn(`Offer received for existing Connection ID:${s}`)),r.type===Li.Media){const p=new pf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=p,this._addConnection(i,l),this.emit("call",p)}else if(r.type===Li.Data){const p=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=p,this._addConnection(i,l),this.emit("connection",p)}else{Ce.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const p of u)l.handleMessage(p);break}default:{if(!r){Ce.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):Ce.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Lt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Lt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Ce.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new pf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Ce.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Ce.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ce.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Ce.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Ce.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ce.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Lt.ServerError,n))}}var CA=ev;class Oj{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new CA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new CA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"STATE_UPDATE":console.log("[P2P GUEST] Received state update with animations:",{hasAnimations:t.animations&&t.animations.length>0,animationCount:t.animations?.length||0}),this.emit("state_update_received",{state:t.state,animations:t.animations||[]});break;case"GUEST_ACTION":this.actionProcessor?await this.actionProcessor.processGuestAction(t.action):console.error("ActionProcessor not set - cannot process guest action");break;case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}broadcastState(t,n=[]){if(!this.isHost){console.warn("Only host can broadcast state");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"STATE_UPDATE",state:t,animations:n,timestamp:Date.now()}),console.log("[P2P HOST] Broadcasted state update to guest",{hasAnimations:n.length>0,animationCount:n.length})}catch(r){console.error("Failed to broadcast state:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot broadcast state - no connection available")}sendActionToHost(t,n){if(this.isHost){console.warn("Host should not send actions to itself");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"GUEST_ACTION",action:{type:t,payload:n},timestamp:Date.now()}),console.log("[P2P GUEST] Sent action to host:",t)}catch(r){console.error("Failed to send action to host:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot send action - no connection to host")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const _n=new Oj,Xy=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},Tj=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Drawing up to Hand Limit",draw:"Drawing up to Hand Limit",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,_j=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],Dj=["deployment","action"],Nj=e=>_j.includes(e),PA=e=>Dj.includes(e),Gi=()=>{const[e,t]=E.useState(Re.getState()),[n,r]=E.useState(_n.getStatus());E.useEffect(()=>{Re.setupP2PIntegration(_n)},[]),E.useEffect(()=>Re.subscribe(I=>{I.type!=="render_complete"&&t(Re.getState())}),[]),E.useEffect(()=>_n.subscribe(I=>{r(_n.getStatus())}),[]);const i=E.useCallback(()=>Re.isMyTurn(),[e.currentPlayer,e.gameMode]),s=E.useCallback(()=>Re.getLocalPlayerId(),[e.gameMode]),l=E.useCallback(()=>Re.getOpponentPlayerId(),[e.gameMode]),u=E.useCallback(()=>e.gameMode!=="local",[e.gameMode]),p=E.useCallback(()=>u()&&!i(),[u,i]),f=E.useCallback(()=>Re.getLocalPlayerState(),[e.gameMode]),h=E.useCallback(()=>Re.getOpponentPlayerState(),[e.gameMode]),m=E.useCallback(ne=>Re.isLocalPlayer(ne),[e.gameMode]),g=E.useCallback(()=>Re.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),b=E.useCallback(()=>{const ne=Re.getOpponentPlacedSections();return e.turnPhase==="placement"&&ne.some(I=>I!==null)&&console.error("🔥 CRITICAL - getOpponentPlacedSections returning:",ne,"from gameState:",e.opponentPlacedSections),ne},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=E.useCallback((ne,I)=>{Re.updatePlayers(ne,I)},[]),A=E.useCallback((ne,I)=>{Re.updatePlayerState(ne,I)},[]),C=E.useCallback((ne,I)=>{Re.setPlayerStates(ne,I)},[]),P=E.useCallback(ne=>{Re.setFirstPasserOfPreviousRound(ne)},[]),T=E.useCallback(ne=>{Re.setFirstPlayerOverride(ne)},[]),O=E.useCallback(ne=>{Re.setPassInfo(ne)},[]),M=E.useCallback(ne=>{Re.updatePassInfo(ne)},[]),N=E.useCallback((ne,I,X)=>{Re.addLogEntry(ne,I,X)},[]),D=E.useCallback(()=>{Re.reset()},[]),k=E.useCallback(ne=>{Re.setWinner(ne)},[]),R=E.useCallback(async(ne,I)=>await Re.processAction(ne,I),[]),U=E.useCallback(()=>Re.isActionInProgress(),[]),H=E.useCallback(()=>Re.getActionQueueLength(),[]),q=E.useCallback(()=>{Re.clearActionQueue()},[]),K=E.useCallback(()=>Nj(e.turnPhase),[e.turnPhase]),ce=E.useCallback(()=>PA(e.turnPhase),[e.turnPhase]),ue=E.useCallback(async(ne,I)=>{const X=e.turnPhase,se=PA(X);return console.log(`🔀 useGameState.routeAction: ${ne} in phase ${X} (${se?"sequential":"simultaneous"})`),se?await R(ne,I):(console.warn(`⚠️ Simultaneous phase action ${ne} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${ne} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:X,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,R]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:p,getLocalPlayerState:f,getOpponentPlayerState:h,isLocalPlayer:m,getLocalPlacedSections:g,getOpponentPlacedSections:b,updatePlayers:S,updatePlayerState:A,setPlayerStates:C,setFirstPasserOfPreviousRound:P,setFirstPlayerOverride:T,setPassInfo:O,updatePassInfo:M,addLogEntry:N,resetGame:D,setWinner:k,processAction:R,isActionInProgress:U,getActionQueueLength:H,clearActionQueue:q,isSimultaneousPhase:K,isSequentialPhase:ce,routeAction:ue,gameStateManager:Re,p2pManager:_n}},wA=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(`🚢 Initialized ship placement: ${e.length} sections available`),console.log(`🎯 Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class Bc{constructor(){if(Bc.instance)return Bc.instance;Bc.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,console.log("🎮 GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){console.log("🔧 GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=Yt.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&(i.initialize(u,l,s,n,t),console.log("🔄 GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,console.log("🔧 GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(`🔔 GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="droneSelection"){if(this.gameStateManager.get("gameMode")==="guest"){console.log("🔒 Guest mode: Skipping game flow logic (waiting for host state)");return}console.log(`🚀 GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let r={};if(t==="droneSelection"){console.log("🎲 GameFlowManager initializing drone selection phase data");const i=s2(xn),s=wA();r={...i,...s}}this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(r).length>0&&this.gameStateManager.setState(r,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(this.gameStateManager.get("gameMode")==="guest")return;if(console.log(`✅ GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const s=this.actionProcessor.applyPhaseCommitments(t);Object.keys(s).length>0&&(this.gameStateManager.setState(s,"COMMITMENT_APPLICATION",`${t}_completion`),console.log(`📋 GameFlowManager: Applied ${t} commitments to game state`))}const i=this.getNextPhase(t);i?this.isSequentialPhase(i)?(console.log(`🔄 GameFlowManager: Handover to sequential phase '${i}'`),this.initiateSequentialPhase(i)):(console.log(`🔄 GameFlowManager: Continuing with simultaneous phase '${i}'`),await this.transitionToPhase(i)):console.log("🎯 GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){t.gameMode==="guest"||n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(console.log(`🎯 GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(t.gameMode==="guest"||n!=="COMMITMENT_UPDATE"||!t.commitments)return;console.log("🔍 checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){console.log("🔍 Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){console.log("🔍 Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;console.log("🔍 Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:s}),s&&(console.log(`🎯 GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){console.log(`✅ GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(`🤖 GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="gameInitializing"?n=await this.processGameInitializingPhase():t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():t==="determineFirstPlayer"?n=await this.processAutomaticFirstPlayerPhase():console.warn(`⚠️ No handler for automatic phase: ${t}`),n?(console.log(`🔄 GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),await this.transitionToPhase(n)):console.warn(`⚠️ No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(){console.log("🃏 GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await Br(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-CiUQmp71.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error("❌ GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),console.log("✅ Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return console.log("✅ Automatic draw completed, returning next phase:",s),s}catch(n){console.error("❌ Error during automatic draw phase:",n)}}async processAutomaticFirstPlayerPhase(){console.log("🎯 GameFlowManager: Processing automatic first player determination phase");const t="determineFirstPlayer";try{const n=await this.actionProcessor.processFirstPlayerDetermination();if(console.log("🎯 First player determination completed:",n),this.animationManager&&n.stateUpdates){const i=this.gameStateManager.getLocalPlayerId(),p={animationName:"PHASE_ANNOUNCEMENT",payload:{phaseText:n.stateUpdates.firstPlayerOfRound===i?"YOU ARE FIRST PLAYER":"OPPONENT IS FIRST PLAYER",phaseName:"firstPlayerResult",timestamp:Date.now()}};await this.animationManager.executeAnimations([p]),console.log("🎬 [FIRST PLAYER] Second announcement complete")}this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const r=this.getNextPhase("determineFirstPlayer");return console.log("✅ Automatic first player determination completed, returning next phase:",r),r}catch(n){console.error("❌ Error during automatic first player determination:",n)}}async processAutomaticEnergyResetPhase(){console.log("⚡ GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error("❌ GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await Br(async()=>{const{default:A}=await Promise.resolve().then(()=>ZM);return{default:A}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},p=Me.readyDronesAndRestoreShields(n.player1,n.player2,u),f=Me.readyDronesAndRestoreShields(n.player2,n.player1,u),h={...p,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},m={...f,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget},g=this.roundNumber>=2?s.totals.shieldsPerTurn:0,b=this.roundNumber>=2?l.totals.shieldsPerTurn:0;await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:h,player2:m,shieldsToAllocate:g,opponentShieldsToAllocate:b}}),console.log(`✅ Energy reset complete - Player 1: ${h.energy} energy, Player 2: ${m.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const S=this.getNextPhase("energyReset");return console.log("✅ Automatic energy reset completed, returning next phase:",S),S}catch(n){console.error("❌ Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(){console.log("🎯 GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:"placement",gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(n=>setTimeout(n,100));const t=this.getNextPhase("gameInitializing");return console.log("✅ Game initialization completed, returning next phase:",t),t}catch(t){throw console.error("❌ Error during game initialization:",t),t}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn("⚠️ GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return t.roundNumber<2?!1:t.shieldsToAllocate>0||t.opponentShieldsToAllocate>0}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(`🎯 GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(`🔄 Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn("⚠️ ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1,this.gameStateManager.setState({roundNumber:1,turn:1}))),console.log(`🔄 GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"&&(console.log("🚢 GameFlowManager: Initializing placement phase data"),r=wA()),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t,resetPassInfo:!0}}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){console.log(`🤖 GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,console.log(`🔄 GameFlowManager: Starting round ${this.roundNumber}`),this.gameStateManager.setState({roundNumber:this.roundNumber,turn:this.roundNumber});const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn("⚠️ No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){console.log(`🏆 GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log("🔄 GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const mf=new Bc;function OA(){const{gameStateManager:e}=Gi(),[t,n]=E.useState(!1);E.useEffect(()=>{console.log("🏠 MenuScreen mounted - ensuring clean state"),Yt.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),console.log("✅ MenuScreen: State cleaned up")},[e]);const r=()=>{console.log("🎮 Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{console.log("🎮 Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},l=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#00ff88",color:"#000000",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 255, 136, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#00cc6a",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#00ff88",u.target.style.transform="translateY(0)"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#ff6b35",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 53, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#e55a2b",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#ff6b35",u.target.style.transform="translateY(0)"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"10px 20px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>{u.target.style.backgroundColor="#cccccc",u.target.style.color="#1a1a1a"},onMouseOut:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#cccccc"},children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"EREMOS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"the wilderness left when civilization departs"}),v.jsx("button",{onClick:s,style:{fontSize:"1.5rem",padding:"15px 40px",backgroundColor:"#0088ff",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 136, 255, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#0066cc",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#0088ff",u.target.style.transform="translateY(0)"},children:"START GAME"})]})})}const TA=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),_A=e=>{const t=Mj(e);return t.charAt(0).toUpperCase()+t.slice(1)},W2=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),jj=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},p)=>E.createElement("svg",{ref:p,...Rj,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:W2("lucide",i),...!s&&!jj(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,h])=>E.createElement(f,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=(e,t)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(Ij,{ref:s,iconNode:t,className:W2(`lucide-${kj(_A(e))}`,`lucide-${e}`,r),...i}));return n.displayName=_A(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Hc=At("bolt",Lj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Bj=At("check",$j);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zj=At("chevron-down",Uj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cf=At("chevron-up",Gj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tv=At("copy",Hj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],DA=At("cpu",qj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Fj=At("download",Yj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],NA=At("eye",Vj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],Wj=At("gamepad",Kj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Qj=At("hand",Xj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ws=At("loader-circle",Zj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],eR=At("refresh-cw",Jj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Qy=At("rocket",tR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],rR=At("rotate-ccw",nR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kA=At("settings",aR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],og=At("shield-check",iR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],sR=At("shield",oR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],cR=At("sword",lR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],dR=At("upload",uR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pR=At("users",fR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],mR=At("wifi-off",hR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],MA=At("wifi",gR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kn=At("x",yR),vR=({onGameStart:e,onBack:t})=>{const[n,r]=E.useState("menu"),[i,s]=E.useState(""),[l,u]=E.useState(""),[p,f]=E.useState("disconnected"),[h,m]=E.useState(""),[g,b]=E.useState(!1),[S,A]=E.useState(!1);E.useEffect(()=>_n.subscribe(R=>{switch(console.log("P2P Event:",R),R.type){case"room_created":s(R.data.roomCode),r("waiting"),f("waiting"),b(!1);break;case"joined_room":s(R.data.roomCode),r("connected"),f("connected"),b(!1);break;case"connected":r("connected"),f("connected"),b(!1),m("");break;case"disconnected":f("disconnected"),r("menu"),s(""),m("");break;case"connection_error":m(R.data.error),b(!1),r("menu");break}}),[]);const C=async()=>{b(!0),m(""),r("host");try{const k=await _n.hostGame();console.log("Room created with code:",k)}catch(k){console.error("Failed to host game:",k),m(k.message),b(!1),r("menu")}},P=async()=>{if(l.length!==6){m("Please enter a 6-digit room code");return}b(!0),m(""),r("join");try{await _n.joinGame(l)}catch(k){console.error("Failed to join game:",k),m(k.message),b(!1),r("menu")}},T=async()=>{try{await navigator.clipboard.writeText(i),A(!0),setTimeout(()=>A(!1),2e3)}catch(k){console.error("Failed to copy room code:",k)}},O=()=>{p==="connected"&&e()},M=()=>{_n.disconnect(),r("menu"),s(""),u(""),m("")},N=()=>{p!=="disconnected"&&M(),t()},D=()=>{switch(p){case"waiting":return v.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[v.jsx(Ws,{className:"w-4 h-4 animate-spin"}),v.jsx("span",{children:"Waiting for opponent..."})]});case"connected":return v.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[v.jsx(MA,{className:"w-4 h-4"}),v.jsx("span",{children:"Connected to opponent"})]});case"disconnected":default:return v.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[v.jsx(mR,{className:"w-4 h-4"}),v.jsx("span",{children:"Not connected"})]})}};return console.log("🎮 MultiplayerLobby rendering - mode:",n,"connectionStatus:",p),v.jsx("div",{style:{maxWidth:"500px",width:"100%",margin:"0 auto"},children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20",style:{backgroundColor:"rgba(15, 23, 42, 0.95)",borderColor:"#a855f7",boxShadow:"0 20px 50px rgba(168, 85, 247, 0.2)"},children:[v.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[v.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[v.jsx(pR,{className:"w-8 h-8 text-purple-400"}),"Multiplayer Lobby"]}),v.jsx("div",{style:{marginBottom:"1rem"},children:D()})]}),h&&v.jsx("div",{style:{backgroundColor:"rgba(127, 29, 29, 0.5)",border:"1px solid #ef4444",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"1rem"},children:v.jsx("p",{style:{color:"#fca5a5",fontSize:"0.875rem"},children:h})}),n==="menu"&&v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("button",{onClick:C,disabled:g,style:{width:"100%",backgroundColor:g?"#4b5563":"#9333ea",color:"#ffffff",fontWeight:"bold",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:g?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"1rem"},onMouseOver:k=>!g&&(k.target.style.backgroundColor="#7c3aed"),onMouseOut:k=>!g&&(k.target.style.backgroundColor="#9333ea"),children:[g?v.jsx(Ws,{className:"w-5 h-5 animate-spin"}):v.jsx(Wj,{className:"w-5 h-5"}),"Host Game"]}),v.jsx("div",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.875rem"},children:"or"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.jsx("input",{type:"text",placeholder:"Enter 6-digit room code",value:l,onChange:k=>u(k.target.value.replace(/[^0-9]/g,"").slice(0,6)),style:{width:"100%",backgroundColor:"#1e293b",border:"1px solid #4b5563",borderRadius:"0.5rem",padding:"0.75rem 1rem",color:"#ffffff",textAlign:"center",fontSize:"1.125rem",letterSpacing:"0.1em"},maxLength:6}),v.jsxs("button",{onClick:P,disabled:g||l.length!==6,style:{width:"100%",backgroundColor:g||l.length!==6?"#4b5563":"#0891b2",color:"#ffffff",fontWeight:"bold",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:g||l.length!==6?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"1rem"},onMouseOver:k=>!(g||l.length!==6)&&(k.target.style.backgroundColor="#0e7490"),onMouseOut:k=>!(g||l.length!==6)&&(k.target.style.backgroundColor="#0891b2"),children:[g?v.jsx(Ws,{className:"w-5 h-5 animate-spin"}):v.jsx(MA,{className:"w-5 h-5"}),"Join Game"]})]})]}),n==="waiting"&&v.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"#1e293b",borderRadius:"0.5rem",padding:"1rem"},children:[v.jsx("p",{style:{color:"#d1d5db",marginBottom:"0.5rem"},children:"Share this room code:"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[v.jsx("code",{style:{fontSize:"1.5rem",fontFamily:"monospace",color:"#ffffff",backgroundColor:"#334155",padding:"0.5rem 1rem",borderRadius:"0.25rem"},children:i}),v.jsx("button",{onClick:T,style:{backgroundColor:"#9333ea",color:"#ffffff",padding:"0.5rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:k=>k.target.style.backgroundColor="#7c3aed",onMouseOut:k=>k.target.style.backgroundColor="#9333ea",children:S?v.jsx(Bj,{className:"w-5 h-5"}):v.jsx(tv,{className:"w-5 h-5"})})]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#facc15"},children:[v.jsx(Ws,{className:"w-5 h-5 animate-spin"}),v.jsx("span",{children:"Waiting for opponent to join..."})]})]}),n==="connected"&&v.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"rgba(20, 83, 45, 0.5)",border:"1px solid #22c55e",borderRadius:"0.5rem",padding:"1rem"},children:[v.jsx("p",{style:{color:"#86efac"},children:"✅ Connected to opponent!"}),i&&v.jsxs("p",{style:{color:"#9ca3af",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Room: ",i]})]}),v.jsx("button",{onClick:O,style:{width:"100%",backgroundColor:"#16a34a",color:"#ffffff",fontWeight:"bold",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",transition:"background-color 0.2s",fontSize:"1rem"},onMouseOver:k=>k.target.style.backgroundColor="#15803d",onMouseOut:k=>k.target.style.backgroundColor="#16a34a",children:"Start Game"})]}),(n==="host"||n==="join")&&g&&v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx(Ws,{className:"w-8 h-8 animate-spin text-purple-400",style:{margin:"0 auto 1rem auto",color:"#c084fc"}}),v.jsx("p",{style:{color:"#d1d5db"},children:n==="host"?"Creating room...":"Joining room..."})]}),v.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #374151"},children:v.jsx("button",{onClick:N,style:{width:"100%",backgroundColor:"#4b5563",color:"#ffffff",fontWeight:"bold",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",transition:"background-color 0.2s",fontSize:"1rem"},onMouseOver:k=>k.target.style.backgroundColor="#374151",onMouseOut:k=>k.target.style.backgroundColor="#4b5563",children:p!=="disconnected"?"Disconnect & Back":"Back"})})]})})};function bR(){const{gameState:e,gameStateManager:t}=Gi(),[n,r]=E.useState(null),i=e.gameMode==="local",s=e.gameMode!=="local";E.useEffect(()=>{s&&(console.log("🔌 Setting up P2P integration for multiplayer"),t.setupP2PIntegration(_n))},[s]);const l=()=>{console.log("🔙 Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=h=>{console.log("🤖 Selected AI:",h.name),r(h)},p=()=>{if(i&&n){console.log("🎮 Starting single player game with AI:",n.name);const h=xn.filter(g=>n.dronePool.includes(g.name)),m={};h.forEach(g=>{m[g.name]=0}),Ur.initialize(TA,xn,n,t.actionProcessor,t),console.log("🤖 AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:h,deployedDroneCounts:m,aiPersonality:n})}},f=()=>{console.log("🎮 Starting multiplayer game after connection");const h=_n.isHost,m=h?"host":"guest";console.log(`🎮 Multiplayer mode: ${m}`),t.startGame(m,{name:h?"Host Player":"Guest Player"},{name:h?"Guest Player":"Host Player"})};return v.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:TA.map(h=>v.jsxs("div",{onClick:()=>u(h),style:{padding:"20px",backgroundColor:n?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:m=>{n?.name!==h.name&&(m.target.style.backgroundColor="#333333",m.target.style.borderColor="#666666")},onMouseOut:m=>{n?.name!==h.name&&(m.target.style.backgroundColor="#2a2a2a",m.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),s&&v.jsx(vR,{onGameStart:f,onBack:l}),i&&v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"12px 24px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:h=>{h.target.style.backgroundColor="#cccccc",h.target.style.color="#1a1a1a"},onMouseOut:h=>{h.target.style.backgroundColor="transparent",h.target.style.color="#cccccc"},children:"BACK TO MENU"}),v.jsx("button",{onClick:p,disabled:!n,style:{fontSize:"1.2rem",padding:"12px 30px",backgroundColor:n?"#00ff88":"#444444",color:n?"#000000":"#888888",border:"none",borderRadius:"8px",cursor:n?"pointer":"not-allowed",transition:"all 0.3s ease",opacity:n?1:.5},onMouseOver:h=>{n&&(h.target.style.backgroundColor="#00cc6a",h.target.style.transform="translateY(-2px)")},onMouseOut:h=>{n&&(h.target.style.backgroundColor="#00ff88",h.target.style.transform="translateY(0)")},children:"START GAME"})]})]})}const jA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),xR=({text:e,className:t})=>{const n=E.useRef(null),r=E.useRef(null);return E.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,p;t.includes("font-orbitron")?(u=8,p=16):(u=8,p=12);let f=p;for(s.style.fontSize=f+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&f>u;)f-=.5,s.style.fontSize=f+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},gf=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:p,scale:f=1})=>{let h=e.limit;l.forEach(I=>{I.mod.stat==="limit"&&(h+=I.mod.value)});const m=i>=h,g=n&&(!m||s),b=E.useMemo(()=>{const I={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(X=>{X.mod.stat==="cost"?I.cost=Math.max(0,I.cost+X.mod.value):I.hasOwnProperty(X.mod.stat)&&(I[X.mod.stat]+=X.mod.value)}),I},[e,l]),S=b.cost,A=b.attack>e.attack,C=b.attack<e.attack,P=A?"text-green-400":C?"text-red-400":"text-white",T=b.speed>e.speed,O=b.speed<e.speed,M=T?"text-green-400":O?"text-red-400":"text-white",N=b.cost<e.class,D=b.cost>e.class,k=N?"text-green-400":D?"text-red-400":"text-white",U=h>e.limit?"text-green-400":"text-white",{name:H,image:q,hull:K,shields:ce,abilities:ue}=e,ne=f!==1?{transform:`scale(${f})`,transformOrigin:"center center"}:{};return v.jsx("div",{onClick:g?()=>t(e):void 0,className:`
        w-[225px] h-[275px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${g?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${g?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...ne},children:v.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:q,alt:H,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(xR,{text:H,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(jA,{value:b.attack,isFlat:!1,icon:cR,iconColor:"text-red-400",textColor:P})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:ce>0&&Array.from({length:ce}).map((I,X)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${X}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:K}).map((I,X)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${X}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(jA,{value:b.speed,isFlat:!0,icon:Qy,iconColor:"text-blue-400",textColor:M})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-48 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:ue&&ue.length>0?ue.map((I,X)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm text-purple-400 tracking-wider font-bold",children:I.name}),v.jsx("p",{className:"text-gray-400 text-sm leading-tight font-exo",children:I.description})]},X)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-sm text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Hc,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${k}`,children:S})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:I=>{I.stopPropagation(),p&&p(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${m?"text-pink-500":U}`,children:[i,"/",h]})})]})]})]})]})})},nv=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(Ws,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"✅ Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function SR(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i}=Gi(),{droneSelectionPool:s,droneSelectionTrio:l,turnPhase:u}=e;i();const[p,f]=E.useState([]),[h,m]=E.useState(l),[g,b]=E.useState(s),S=N=>{if(u!=="droneSelection")return;console.log("🔧 handleChooseDroneForSelection called with:",N.name);const D=[...p,N];if(f(D),D.length<5){const k=tj(g);m(k.droneSelectionTrio),b(k.droneSelectionPool),console.log("🔧 Advanced to next trio locally, selected:",D.length,"of 5 drones")}else console.log("🔧 All 5 drones selected, waiting for Continue button click")},A=()=>{if(u!=="droneSelection")return;console.log("🔧 handleContinueDroneSelection called with:",p.length,"drones");const N=t(),D={playerId:N,phase:"droneSelection",actionData:{drones:p}};if(console.log("🔍 [DRONE SELECTION] Submitting commitment:",{gameMode:e.gameMode,playerId:N,droneCount:p.length,commitmentsBefore:e.commitments?.droneSelection}),e.gameMode==="guest"){console.log("[GUEST] Sending drone selection commitment to host"),_n.sendActionToHost("commitment",D);return}Re.actionProcessor.queueAction({type:"commitment",payload:D}).then(k=>{if(!k.success){console.error("❌ Drone selection submission failed:",k.error);return}console.log("✅ Drone selection submitted successfully")}).catch(k=>{console.error("❌ Drone selection submission error:",k)}),console.log("✅ Drone selection submitted to PhaseManager")};E.useEffect(()=>{e.gameMode==="guest"&&Re.emit("render_complete")},[e,Re]);const C=t(),P=n(),T=e.commitments?.droneSelection?.[C]?.completed||!1,O=e.commitments?.droneSelection?.[P]?.completed||!1;if(console.log("🔍 [DRONE SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:C,opponentPlayerId:P,localPlayerCompleted:T,opponentCompleted:O,fullCommitmentsObject:e.commitments?.droneSelection,turnPhase:u,willShowWaiting:r()&&T&&!O}),r()&&T&&!O){const N=e.commitments?.droneSelection?.[C]?.drones||p,D=N.length>0?N.map(k=>k.name).join(", "):"Selection complete";return v.jsx(nv,{phase:"droneSelection",localPlayerStatus:`You selected: ${D}`})}const M=p.length===5;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((N,D)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${D<p.length?"bg-green-500":"bg-gray-600"}`},D)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[p.length,"/5 drones selected"]})]}),M?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:"✅ Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",p.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),h&&h.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:h.map((N,D)=>v.jsx(gf,{drone:N,onClick:()=>S(N),isSelectable:!0,deployedCount:0},N.name||D))})]}),v.jsx("button",{onClick:A,disabled:!M,className:`px-8 py-3 font-bold rounded-lg transition-all mb-8 ${M?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/25 hover:shadow-green-500/30 transform hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:M?"Continue to Deck Selection":`Continue (${p.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",p.length,"/5)",M&&v.jsx("span",{className:"text-green-400 ml-2",children:"✓"})]}),p.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:p.map((N,D)=>v.jsx(gf,{drone:N,isSelectable:!1,deployedCount:0},D))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function X2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=X2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function nt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=X2(e))&&(r&&(r+=" "),r+=t);return r}var sg={},lg={},RA;function AR(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(lg)),lg}var cg={},IA;function Q2(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(cg)),cg}var ug={},LA;function Z2(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(ug)),ug}var dg={},$A;function rv(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",p=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const f=n[s];u?f==="\\"&&s+1<i?(s++,l+=n[s]):f===u?u="":l+=f:p?f==='"'||f==="'"?u=f:f==="]"?(p=!1,r.push(l),l=""):l+=f:f==="["?(p=!0,l&&(r.push(l),l="")):f==="."?l&&(r.push(l),l=""):l+=f,s++}return l&&r.push(l),r}e.toPath=t})(dg)),dg}var BA;function av(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AR(),n=Q2(),r=Z2(),i=rv();function s(u,p,f){if(u==null)return f;switch(typeof p){case"string":{if(t.isUnsafeProperty(p))return f;const h=u[p];return h===void 0?n.isDeepKey(p)?s(u,i.toPath(p),f):f:h}case"number":case"symbol":{typeof p=="number"&&(p=r.toKey(p));const h=u[p];return h===void 0?f:h}default:{if(Array.isArray(p))return l(u,p,f);if(Object.is(p?.valueOf(),-0)?p="-0":p=String(p),t.isUnsafeProperty(p))return f;const h=u[p];return h===void 0?f:h}}}function l(u,p,f){if(p.length===0)return f;let h=u;for(let m=0;m<p.length;m++){if(h==null||t.isUnsafeProperty(p[m]))return f;h=h[p[m]]}return h===void 0?f:h}e.get=s})(sg)),sg}var fg,UA;function ER(){return UA||(UA=1,fg=av().get),fg}var CR=ER();const zo=Hr(CR);var pg={exports:{}},st={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA;function PR(){if(zA)return st;zA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var C=A.$$typeof;switch(C){case e:switch(A=A.type,A){case n:case i:case r:case p:case f:case g:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case h:return A;case s:return A;default:return C}}case t:return C}}}return st.ContextConsumer=s,st.ContextProvider=l,st.Element=e,st.ForwardRef=u,st.Fragment=n,st.Lazy=m,st.Memo=h,st.Portal=t,st.Profiler=i,st.StrictMode=r,st.Suspense=p,st.SuspenseList=f,st.isContextConsumer=function(A){return S(A)===s},st.isContextProvider=function(A){return S(A)===l},st.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},st.isForwardRef=function(A){return S(A)===u},st.isFragment=function(A){return S(A)===n},st.isLazy=function(A){return S(A)===m},st.isMemo=function(A){return S(A)===h},st.isPortal=function(A){return S(A)===t},st.isProfiler=function(A){return S(A)===i},st.isStrictMode=function(A){return S(A)===r},st.isSuspense=function(A){return S(A)===p},st.isSuspenseList=function(A){return S(A)===f},st.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===p||A===f||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===h||A.$$typeof===l||A.$$typeof===s||A.$$typeof===u||A.$$typeof===b||A.getModuleId!==void 0)},st.typeOf=S,st}var GA;function wR(){return GA||(GA=1,pg.exports=PR()),pg.exports}var OR=wR(),Jt=e=>e===0?0:e>0?1:-1,tr=e=>typeof e=="number"&&e!=+e,Mo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Oe=e=>(typeof e=="number"||e instanceof Number)&&!tr(e),sa=e=>Oe(e)||typeof e=="string",TR=0,qc=e=>{var t=++TR;return"".concat(e||"").concat(t)},bn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Oe(t)&&typeof t!="string")return r;var s;if(Mo(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return tr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},J2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function pn(e,t,n){return Oe(e)&&Oe(t)?e+n*(t-e):t}function _R(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):zo(r,t))===n)}var en=e=>e===null||typeof e>"u",eu=e=>en(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),DR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function iv(e){if(typeof e!="string")return!1;var t=DR;return t.includes(e)}var NR=["viewBox","children"],HA=["points","pathLength"],hg={svg:NR,polygon:HA,polyline:HA},kR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{iv(i)&&(r[i]=(s=>n[i](n,s)))}),r},MR=(e,t,n)=>r=>(e(t,n,r),null),tu=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];iv(i)&&typeof s=="function"&&(r||(r={}),r[i]=MR(s,t,n))}),r},jR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function eO(e){if(typeof e!="string")return!1;var t=jR;return t.includes(e)}function Wo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return eO(r)});return Object.fromEntries(t)}var qA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",YA=null,mg=null,tO=e=>{if(e===YA&&Array.isArray(mg))return mg;var t=[];return E.Children.forEach(e,n=>{en(n)||(OR.isFragment(n)?t=t.concat(tO(n.props.children)):t.push(n))}),mg=t,YA=e,t};function ov(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>qA(i)):r=[qA(t)],tO(e).forEach(i=>{var s=zo(i,"type.displayName")||zo(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var RR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&hg?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||eO(t)),p=!!n&&iv(t);return l||u||p},$t=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;RR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},IR=["children","width","height","viewBox","className","style","title","desc"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(null,arguments)}function LR(e,t){if(e==null)return{};var n,r,i=$R(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $R(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var sv=E.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:p,desc:f}=e,h=LR(e,IR),m=s||{width:r,height:i,x:0,y:0},g=nt("recharts-surface",l);return E.createElement("svg",Zy({},$t(h,!0,"svg"),{className:g,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),E.createElement("title",null,p),E.createElement("desc",null,f),n)}),BR=["children","className"];function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jy.apply(null,arguments)}function UR(e,t){if(e==null)return{};var n,r,i=zR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Gn=E.forwardRef((e,t)=>{var{children:n,className:r}=e,i=UR(e,BR),s=nt("recharts-layer",r);return E.createElement("g",Jy({className:s},$t(i,!0),{ref:t}),n)}),nO=Bw(),rO=E.createContext(null),GR=()=>E.useContext(rO);function ft(e){return function(){return e}}const aO=Math.cos,yf=Math.sin,qr=Math.sqrt,vf=Math.PI,rp=2*vf,e0=Math.PI,t0=2*e0,Do=1e-6,HR=t0-Do;function iO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function qR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iO;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class YR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iO:qR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,p=r-t,f=i-n,h=l-t,m=u-n,g=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Do)if(!(Math.abs(m*p-f*h)>Do)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let b=r-l,S=i-u,A=p*p+f*f,C=b*b+S*S,P=Math.sqrt(A),T=Math.sqrt(g),O=s*Math.tan((e0-Math.acos((A+g-C)/(2*P*T)))/2),M=O/T,N=O/P;Math.abs(M-1)>Do&&this._append`L${t+M*h},${n+M*m}`,this._append`A${s},${s},0,0,${+(m*b>h*S)},${this._x1=t+N*p},${this._y1=n+N*f}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),p=r*Math.sin(i),f=t+u,h=n+p,m=1^l,g=l?i-s:s-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>Do||Math.abs(this._y1-h)>Do)&&this._append`L${f},${h}`,r&&(g<0&&(g=g%t0+t0),g>HR?this._append`A${r},${r},0,1,${m},${t-u},${n-p}A${r},${r},0,1,${m},${this._x1=f},${this._y1=h}`:g>Do&&this._append`A${r},${r},0,${+(g>=e0)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function lv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new YR(t)}function cv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oO(e){this._context=e}oO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ap(e){return new oO(e)}function sO(e){return e[0]}function lO(e){return e[1]}function cO(e,t){var n=ft(!0),r=null,i=ap,s=null,l=lv(u);e=typeof e=="function"?e:e===void 0?sO:ft(e),t=typeof t=="function"?t:t===void 0?lO:ft(t);function u(p){var f,h=(p=cv(p)).length,m,g=!1,b;for(r==null&&(s=i(b=l())),f=0;f<=h;++f)!(f<h&&n(m=p[f],f,p))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+e(m,f,p),+t(m,f,p));if(b)return s=null,b+""||null}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:ft(+p),u):e},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:ft(+p),u):t},u.defined=function(p){return arguments.length?(n=typeof p=="function"?p:ft(!!p),u):n},u.curve=function(p){return arguments.length?(i=p,r!=null&&(s=i(r)),u):i},u.context=function(p){return arguments.length?(p==null?r=s=null:s=i(r=p),u):r},u}function Bd(e,t,n){var r=null,i=ft(!0),s=null,l=ap,u=null,p=lv(f);e=typeof e=="function"?e:e===void 0?sO:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?lO:ft(+n);function f(m){var g,b,S,A=(m=cv(m)).length,C,P=!1,T,O=new Array(A),M=new Array(A);for(s==null&&(u=l(T=p())),g=0;g<=A;++g){if(!(g<A&&i(C=m[g],g,m))===P)if(P=!P)b=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=g-1;S>=b;--S)u.point(O[S],M[S]);u.lineEnd(),u.areaEnd()}P&&(O[g]=+e(C,g,m),M[g]=+t(C,g,m),u.point(r?+r(C,g,m):O[g],n?+n(C,g,m):M[g]))}if(T)return u=null,T+""||null}function h(){return cO().defined(i).curve(l).context(s)}return f.x=function(m){return arguments.length?(e=typeof m=="function"?m:ft(+m),r=null,f):e},f.x0=function(m){return arguments.length?(e=typeof m=="function"?m:ft(+m),f):e},f.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:ft(+m),f):r},f.y=function(m){return arguments.length?(t=typeof m=="function"?m:ft(+m),n=null,f):t},f.y0=function(m){return arguments.length?(t=typeof m=="function"?m:ft(+m),f):t},f.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:ft(+m),f):n},f.lineX0=f.lineY0=function(){return h().x(e).y(t)},f.lineY1=function(){return h().x(e).y(n)},f.lineX1=function(){return h().x(r).y(t)},f.defined=function(m){return arguments.length?(i=typeof m=="function"?m:ft(!!m),f):i},f.curve=function(m){return arguments.length?(l=m,s!=null&&(u=l(s)),f):l},f.context=function(m){return arguments.length?(m==null?s=u=null:u=l(s=m),f):s},f}class uO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function FR(e){return new uO(e,!0)}function VR(e){return new uO(e,!1)}const uv={draw(e,t){const n=qr(t/vf);e.moveTo(n,0),e.arc(0,0,n,0,rp)}},KR={draw(e,t){const n=qr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},dO=qr(1/3),WR=dO*2,XR={draw(e,t){const n=qr(t/WR),r=n*dO;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},QR={draw(e,t){const n=qr(t),r=-n/2;e.rect(r,r,n,n)}},ZR=.8908130915292852,fO=yf(vf/10)/yf(7*vf/10),JR=yf(rp/10)*fO,eI=-aO(rp/10)*fO,tI={draw(e,t){const n=qr(t*ZR),r=JR*n,i=eI*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=rp*s/5,u=aO(l),p=yf(l);e.lineTo(p*n,-u*n),e.lineTo(u*r-p*i,p*r+u*i)}e.closePath()}},gg=qr(3),nI={draw(e,t){const n=-qr(t/(gg*3));e.moveTo(0,n*2),e.lineTo(-gg*n,-n),e.lineTo(gg*n,-n),e.closePath()}},br=-.5,xr=qr(3)/2,n0=1/qr(12),rI=(n0/2+1)*3,aI={draw(e,t){const n=qr(t/rI),r=n/2,i=n*n0,s=r,l=n*n0+n,u=-s,p=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,p),e.lineTo(br*r-xr*i,xr*r+br*i),e.lineTo(br*s-xr*l,xr*s+br*l),e.lineTo(br*u-xr*p,xr*u+br*p),e.lineTo(br*r+xr*i,br*i-xr*r),e.lineTo(br*s+xr*l,br*l-xr*s),e.lineTo(br*u+xr*p,br*p-xr*u),e.closePath()}};function iI(e,t){let n=null,r=lv(i);e=typeof e=="function"?e:ft(e||uv),t=typeof t=="function"?t:ft(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:ft(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:ft(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function bf(){}function xf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function pO(e){this._context=e}pO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oI(e){return new pO(e)}function hO(e){this._context=e}hO.prototype={areaStart:bf,areaEnd:bf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sI(e){return new hO(e)}function mO(e){this._context=e}mO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lI(e){return new mO(e)}function gO(e){this._context=e}gO.prototype={areaStart:bf,areaEnd:bf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function cI(e){return new gO(e)}function FA(e){return e<0?-1:1}function VA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(FA(s)+FA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function KA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function yg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function Sf(e){this._context=e}Sf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yg(this,this._t0,KA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yg(this,KA(this,n=VA(this,e,t)),n);break;default:yg(this,this._t0,n=VA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function yO(e){this._context=new vO(e)}(yO.prototype=Object.create(Sf.prototype)).point=function(e,t){Sf.prototype.point.call(this,t,e)};function vO(e){this._context=e}vO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function uI(e){return new Sf(e)}function dI(e){return new yO(e)}function bO(e){this._context=e}bO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=WA(e),i=WA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function WA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function fI(e){return new bO(e)}function ip(e,t){this._context=e,this._t=t}ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function pI(e){return new ip(e,.5)}function hI(e){return new ip(e,0)}function mI(e){return new ip(e,1)}function rl(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function r0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function gI(e,t){return e[t]}function yI(e){const t=[];return t.key=e,t}function vI(){var e=ft([]),t=r0,n=rl,r=gI;function i(s){var l=Array.from(e.apply(this,arguments),yI),u,p=l.length,f=-1,h;for(const m of s)for(u=0,++f;u<p;++u)(l[u][f]=[0,+r(m,l[u].key,f,s)]).data=m;for(u=0,h=cv(t(l));u<p;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:ft(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:ft(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?r0:typeof s=="function"?s:ft(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??rl,i):n},i}function bI(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}rl(e,t)}}function xI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}rl(e,t)}}function SI(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,p=0,f=0;u<l;++u){for(var h=e[t[u]],m=h[r][1]||0,g=h[r-1][1]||0,b=(m-g)/2,S=0;S<u;++S){var A=e[t[S]],C=A[r][1]||0,P=A[r-1][1]||0;b+=C-P}p+=m,f+=b*m}i[r-1][1]+=i[r-1][0]=n,p&&(n-=f/p)}i[r-1][1]+=i[r-1][0]=n,rl(e,t)}}var AI=["type","size","sizeType"];function a0(){return a0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a0.apply(null,arguments)}function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(r){EI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EI(e,t,n){return(t=CI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CI(e){var t=PI(e,"string");return typeof t=="symbol"?t:t+""}function PI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wI(e,t){if(e==null)return{};var n,r,i=OI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var xO={symbolCircle:uv,symbolCross:KR,symbolDiamond:XR,symbolSquare:QR,symbolStar:tI,symbolTriangle:nI,symbolWye:aI},TI=Math.PI/180,_I=e=>{var t="symbol".concat(eu(e));return xO[t]||uv},DI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*TI;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},NI=(e,t)=>{xO["symbol".concat(eu(e))]=t},dv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=wI(e,AI),s=QA(QA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var g=_I(l),b=iI().type(g).size(DI(n,r,l));return b()},{className:p,cx:f,cy:h}=s,m=$t(s,!0);return f===+f&&h===+h&&n===+n?E.createElement("path",a0({},m,{className:nt("recharts-symbols",p),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};dv.registerSymbol=NI;function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i0.apply(null,arguments)}function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(r){fv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fv(e,t,n){return(t=MI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MI(e){var t=jI(e,"string");return typeof t=="symbol"?t:t+""}function jI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sr=32;class pv extends E.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Sr/2,s=Sr/6,l=Sr/3,u=t.inactive?r:t.color,p=n??t.type;if(p==="none")return null;if(p==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Sr,y2:i,className:"recharts-legend-icon"});if(p==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Sr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(p==="rect")return E.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Sr/8,"h").concat(Sr,"v").concat(Sr*3/4,"h").concat(-Sr,"z"),className:"recharts-legend-icon"});if(E.isValidElement(t.legendIcon)){var f=kI({},t);return delete f.legendIcon,E.cloneElement(t.legendIcon,f)}return E.createElement(dv,{fill:u,cx:i,cy:i,size:Sr,sizeType:"diameter",type:p})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Sr,height:Sr},p={display:r==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,m)=>{var g=h.formatter||i,b=nt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:h.inactive});if(h.type==="none")return null;var S=h.inactive?s:h.color,A=g?g(h.value,h,m):h.value;return E.createElement("li",i0({className:b,style:p,key:"legend-item-".concat(m)},tu(this.props,h,m)),E.createElement(sv,{width:n,height:n,viewBox:u,style:f,"aria-label":"".concat(A," legend icon")},this.renderIcon(h,l)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}fv(pv,"displayName","Legend");fv(pv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var vg={},bg={},JA;function RI(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(bg)),bg}var xg={},eE;function SO(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(xg)),xg}var Sg={},Ag={},Eg={},tE;function II(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Eg)),Eg}var nE;function hv(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=II();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Ag)),Ag}var Cg={},rE;function LI(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Cg)),Cg}var aE;function $I(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hv(),n=LI();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(Sg)),Sg}var Pg={},wg={},iE;function BI(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=av();function n(r){return function(i){return t.get(i,r)}}e.property=n})(wg)),wg}var Og={},Tg={},_g={},Dg={},oE;function AO(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Dg)),Dg}var Ng={},sE;function EO(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Ng)),Ng}var kg={},lE;function CO(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(kg)),kg}var cE;function UI(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mv(),n=AO(),r=EO(),i=CO();function s(m,g,b){return typeof b!="function"?t.isMatch(m,g):l(m,g,function S(A,C,P,T,O,M){const N=b(A,C,P,T,O,M);return N!==void 0?!!N:l(A,C,S,M)},new Map)}function l(m,g,b,S){if(g===m)return!0;switch(typeof g){case"object":return u(m,g,b,S);case"function":return Object.keys(g).length>0?l(m,{...g},b,S):i.eq(m,g);default:return n.isObject(m)?typeof g=="string"?g==="":!0:i.eq(m,g)}}function u(m,g,b,S){if(g==null)return!0;if(Array.isArray(g))return f(m,g,b,S);if(g instanceof Map)return p(m,g,b,S);if(g instanceof Set)return h(m,g,b,S);const A=Object.keys(g);if(m==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(g))return S.get(g)===m;S&&S.set(g,m);try{for(let C=0;C<A.length;C++){const P=A[C];if(!r.isPrimitive(m)&&!(P in m)||g[P]===void 0&&m[P]!==void 0||g[P]===null&&m[P]!==null||!b(m[P],g[P],P,m,g,S))return!1}return!0}finally{S&&S.delete(g)}}function p(m,g,b,S){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,C]of g.entries()){const P=m.get(A);if(b(P,C,A,m,g,S)===!1)return!1}return!0}function f(m,g,b,S){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let C=0;C<g.length;C++){const P=g[C];let T=!1;for(let O=0;O<m.length;O++){if(A.has(O))continue;const M=m[O];let N=!1;if(b(M,P,C,m,g,S)&&(N=!0),N){A.add(O),T=!0;break}}if(!T)return!1}return!0}function h(m,g,b,S){return g.size===0?!0:m instanceof Set?f([...m],[...g],b,S):!1}e.isMatchWith=s,e.isSetMatch=h})(_g)),_g}var uE;function mv(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Tg)),Tg}var Mg={},jg={},Rg={},dE;function zI(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Rg)),Rg}var Ig={},fE;function PO(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Ig)),Ig}var Lg={},pE;function wO(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",p="[object Map]",f="[object Set]",h="[object Array]",m="[object Function]",g="[object ArrayBuffer]",b="[object Object]",S="[object Error]",A="[object DataView]",C="[object Uint8Array]",P="[object Uint8ClampedArray]",T="[object Uint16Array]",O="[object Uint32Array]",M="[object BigUint64Array]",N="[object Int8Array]",D="[object Int16Array]",k="[object Int32Array]",R="[object BigInt64Array]",U="[object Float32Array]",H="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=g,e.arrayTag=h,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=M,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=U,e.float64ArrayTag=H,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=k,e.int8ArrayTag=N,e.mapTag=p,e.numberTag=r,e.objectTag=b,e.regexpTag=t,e.setTag=f,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=T,e.uint32ArrayTag=O,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=P})(Lg)),Lg}var $g={},hE;function GI(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})($g)),$g}var mE;function OO(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zI(),n=PO(),r=wO(),i=EO(),s=GI();function l(h,m){return u(h,void 0,h,new Map,m)}function u(h,m,g,b=new Map,S=void 0){const A=S?.(h,m,g,b);if(A!==void 0)return A;if(i.isPrimitive(h))return h;if(b.has(h))return b.get(h);if(Array.isArray(h)){const C=new Array(h.length);b.set(h,C);for(let P=0;P<h.length;P++)C[P]=u(h[P],P,g,b,S);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;b.set(h,C);for(const[P,T]of h)C.set(P,u(T,P,g,b,S));return C}if(h instanceof Set){const C=new Set;b.set(h,C);for(const P of h)C.add(u(P,void 0,g,b,S));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);b.set(h,C);for(let P=0;P<h.length;P++)C[P]=u(h[P],P,g,b,S);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return b.set(h,C),p(C,h,g,b,S),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return b.set(h,C),p(C,h,g,b,S),C}if(h instanceof Blob){const C=new Blob([h],{type:h.type});return b.set(h,C),p(C,h,g,b,S),C}if(h instanceof Error){const C=new h.constructor;return b.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,p(C,h,g,b,S),C}if(typeof h=="object"&&f(h)){const C=Object.create(Object.getPrototypeOf(h));return b.set(h,C),p(C,h,g,b,S),C}return h}function p(h,m,g=h,b,S){const A=[...Object.keys(m),...t.getSymbols(m)];for(let C=0;C<A.length;C++){const P=A[C],T=Object.getOwnPropertyDescriptor(h,P);(T==null||T.writable)&&(h[P]=u(m[P],P,g,b,S))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=p})(jg)),jg}var gE;function HI(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OO();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Mg)),Mg}var yE;function qI(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mv(),n=HI();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Og)),Og}var Bg={},Ug={},zg={},vE;function YI(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OO(),n=wO();function r(i,s){return t.cloneDeepWith(i,(l,u,p,f)=>{const h=s?.(l,u,p,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(zg)),zg}var bE;function FI(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YI();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Ug)),Ug}var Gg={},Hg={},xE;function TO(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Hg)),Hg}var qg={},SE;function VI(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PO();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(qg)),qg}var AE;function KI(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q2(),n=TO(),r=VI(),i=rv();function s(l,u){let p;if(Array.isArray(u)?p=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?p=i.toPath(u):p=[u],p.length===0)return!1;let f=l;for(let h=0;h<p.length;h++){const m=p[h];if((f==null||!Object.hasOwn(f,m))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(m)&&m<f.length))return!1;f=f[m]}return!0}e.has=s})(Gg)),Gg}var EE;function WI(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mv(),n=Z2(),r=FI(),i=av(),s=KI();function l(u,p){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return p=r.cloneDeep(p),function(f){const h=i.get(f,u);return h===void 0?s.has(f,u):p===void 0?h===void 0:t.isMatch(h,p)}}e.matchesProperty=l})(Bg)),Bg}var CE;function XI(){return CE||(CE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SO(),n=BI(),r=qI(),i=WI();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Pg)),Pg}var PE;function QI(){return PE||(PE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RI(),n=SO(),r=$I(),i=XI();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(vg)),vg}var Yg,wE;function ZI(){return wE||(wE=1,Yg=QI().uniqBy),Yg}var JI=ZI();const OE=Hr(JI);function _O(e,t,n){return t===!0?OE(e,n):typeof t=="function"?OE(e,t):e}var Fg={exports:{}},Vg={},Kg={exports:{}},Wg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function e3(){if(TE)return Wg;TE=1;var e=hl();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(m,g){var b=g(),S=r({inst:{value:b,getSnapshot:g}}),A=S[0].inst,C=S[1];return s(function(){A.value=b,A.getSnapshot=g,p(A)&&C({inst:A})},[m,b,g]),i(function(){return p(A)&&C({inst:A}),m(function(){p(A)&&C({inst:A})})},[m]),l(b),b}function p(m){var g=m.getSnapshot;m=m.value;try{var b=g();return!n(m,b)}catch{return!0}}function f(m,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Wg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Wg}var _E;function t3(){return _E||(_E=1,Kg.exports=e3()),Kg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function n3(){if(DE)return Vg;DE=1;var e=hl(),t=t3();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,p=e.useDebugValue;return Vg.useSyncExternalStoreWithSelector=function(f,h,m,g,b){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function P(D){if(!T){if(T=!0,O=D,D=g(D),b!==void 0&&A.hasValue){var k=A.value;if(b(k,D))return M=k}return M=D}if(k=M,r(O,D))return k;var R=g(D);return b!==void 0&&b(k,R)?(O=D,k):(O=D,M=R)}var T=!1,O,M,N=m===void 0?null:m;return[function(){return P(h())},N===null?void 0:function(){return P(N())}]},[h,m,g,b]);var C=i(f,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=C},[C]),p(C),C},Vg}var NE;function r3(){return NE||(NE=1,Fg.exports=n3()),Fg.exports}var a3=r3(),gv=E.createContext(null),i3=e=>e,Et=()=>{var e=E.useContext(gv);return e?e.store.dispatch:i3},uf=()=>{},o3=()=>uf,s3=(e,t)=>e===t;function Pe(e){var t=E.useContext(gv);return a3.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:o3,t?t.store.getState:uf,t?t.store.getState:uf,t?e:uf,s3)}function l3(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function c3(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function u3(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var kE=e=>Array.isArray(e)?e:[e];function d3(e){const t=Array.isArray(e[0])?e[0]:e;return u3(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function f3(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var p3=class{constructor(e){this.value=e}deref(){return this.value}},h3=typeof WeakRef<"u"?WeakRef:p3,m3=0,ME=1;function Ud(){return{s:m3,v:void 0,o:null,p:null}}function DO(e,t={}){let n=Ud();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:p}=arguments;for(let m=0,g=p;m<g;m++){const b=arguments[m];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(b);A===void 0?(u=Ud(),S.set(b,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(b);A===void 0?(u=Ud(),S.set(b,u)):u=A}}const f=u;let h;if(u.s===ME)h=u.v;else if(h=e.apply(null,arguments),s++,r){const m=i?.deref?.()??i;m!=null&&r(m,h)&&(h=m,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new h3(h):h}return f.s=ME,f.v=h,h}return l.clearCache=()=>{n=Ud(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function g3(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,p={},f=i.pop();typeof f=="object"&&(p=f,f=i.pop()),l3(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...p},{memoize:m,memoizeOptions:g=[],argsMemoize:b=DO,argsMemoizeOptions:S=[]}=h,A=kE(g),C=kE(S),P=d3(i),T=m(function(){return s++,f.apply(null,arguments)},...A),O=b(function(){l++;const N=f3(P,arguments);return u=T.apply(null,N),u},...C);return Object.assign(O,{resultFunc:f,memoizedResultFunc:T,dependencies:P,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var ee=g3(DO),y3=Object.assign((e,t=ee)=>{c3(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,p)=>(l[n[p]]=u,l),{}))},{withTypes:()=>y3}),Xg={},Qg={},Zg={},jE;function v3(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(Zg)),Zg}var Jg={},ey={},RE;function NO(){return RE||(RE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(ey)),ey}var IE;function b3(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Jg)),Jg}var LE;function x3(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v3(),n=b3(),r=rv();function i(s,l,u,p){if(s==null)return[];u=p?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(b=>String(b));const f=(b,S)=>{let A=b;for(let C=0;C<S.length&&A!=null;++C)A=A[S[C]];return A},h=(b,S)=>S==null||b==null?S:typeof b=="object"&&"key"in b?Object.hasOwn(S,b.key)?S[b.key]:f(S,b.path):typeof b=="function"?b(S):Array.isArray(b)?f(S,b):typeof S=="object"?S[b]:S,m=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return s.map(b=>({original:b,criteria:m.map(S=>h(S,b))})).slice().sort((b,S)=>{for(let A=0;A<m.length;A++){const C=t.compareValues(b.criteria[A],S.criteria[A],u[A]);if(C!==0)return C}return 0}).map(b=>b.original)}e.orderBy=i})(Qg)),Qg}var ty={},$E;function S3(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,p)=>{for(let f=0;f<u.length;f++){const h=u[f];Array.isArray(h)&&p<s?l(h,p+1):i.push(h)}};return l(n,0),i}e.flatten=t})(ty)),ty}var ny={},BE;function kO(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TO(),n=hv(),r=AO(),i=CO();function s(l,u,p){return r.isObject(p)&&(typeof u=="number"&&n.isArrayLike(p)&&t.isIndex(u)&&u<p.length||typeof u=="string"&&u in p)?i.eq(p[u],l):!1}e.isIterateeCall=s})(ny)),ny}var UE;function A3(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x3(),n=S3(),r=kO();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(Xg)),Xg}var ry,zE;function E3(){return zE||(zE=1,ry=A3().sortBy),ry}var C3=E3();const op=Hr(C3);var MO=e=>e.legend.settings,P3=e=>e.legend.size,w3=e=>e.legend.payload,O3=ee([w3,MO],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?op(r,n):r});function T3(){return Pe(O3)}var zd=1;function jO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>zd||Math.abs(l.left-t.left)>zd||Math.abs(l.top-t.top)>zd||Math.abs(l.width-t.width)>zd)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function dn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _3=typeof Symbol=="function"&&Symbol.observable||"@@observable",GE=_3,ay=()=>Math.random().toString(36).substring(7).split("").join("."),D3={INIT:`@@redux/INIT${ay()}`,REPLACE:`@@redux/REPLACE${ay()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ay()}`},Af=D3;function yv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function RO(e,t,n){if(typeof e!="function")throw new Error(dn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(dn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(dn(1));return n(RO)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,p=!1;function f(){l===s&&(l=new Map,s.forEach((C,P)=>{l.set(P,C)}))}function h(){if(p)throw new Error(dn(3));return i}function m(C){if(typeof C!="function")throw new Error(dn(4));if(p)throw new Error(dn(5));let P=!0;f();const T=u++;return l.set(T,C),function(){if(P){if(p)throw new Error(dn(6));P=!1,f(),l.delete(T),s=null}}}function g(C){if(!yv(C))throw new Error(dn(7));if(typeof C.type>"u")throw new Error(dn(8));if(typeof C.type!="string")throw new Error(dn(17));if(p)throw new Error(dn(9));try{p=!0,i=r(i,C)}finally{p=!1}return(s=l).forEach(T=>{T()}),C}function b(C){if(typeof C!="function")throw new Error(dn(10));r=C,g({type:Af.REPLACE})}function S(){const C=m;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(dn(11));function T(){const M=P;M.next&&M.next(h())}return T(),{unsubscribe:C(T)}},[GE](){return this}}}return g({type:Af.INIT}),{dispatch:g,subscribe:m,getState:h,replaceReducer:b,[GE]:S}}function N3(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Af.INIT})>"u")throw new Error(dn(12));if(typeof n(void 0,{type:Af.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(dn(13))})}function IO(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{N3(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let p=!1;const f={};for(let h=0;h<r.length;h++){const m=r[h],g=n[m],b=l[m],S=g(b,u);if(typeof S>"u")throw u&&u.type,new Error(dn(14));f[m]=S,p=p||S!==b}return p=p||r.length!==Object.keys(l).length,p?f:l}}function Ef(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function k3(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(dn(15))};const l={getState:i.getState,dispatch:(p,...f)=>s(p,...f)},u=e.map(p=>p(l));return s=Ef(...u)(i.dispatch),{...i,dispatch:s}}}function LO(e){return yv(e)&&"type"in e&&typeof e.type=="string"}var $O=Symbol.for("immer-nothing"),HE=Symbol.for("immer-draftable"),nr=Symbol.for("immer-state");function zr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var al=Object.getPrototypeOf;function Go(e){return!!e&&!!e[nr]}function qa(e){return e?BO(e)||Array.isArray(e)||!!e[HE]||!!e.constructor?.[HE]||nu(e)||lp(e):!1}var M3=Object.prototype.constructor.toString();function BO(e){if(!e||typeof e!="object")return!1;const t=al(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===M3}function Cf(e,t){sp(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function sp(e){const t=e[nr];return t?t.type_:Array.isArray(e)?1:nu(e)?2:lp(e)?3:0}function o0(e,t){return sp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function UO(e,t,n){const r=sp(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function j3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function nu(e){return e instanceof Map}function lp(e){return e instanceof Set}function No(e){return e.copy_||e.base_}function s0(e,t){if(nu(e))return new Map(e);if(lp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=BO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[nr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(al(e),r)}else{const r=al(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function vv(e,t=!1){return cp(e)||Go(e)||!qa(e)||(sp(e)>1&&Object.defineProperties(e,{set:{value:Gd},add:{value:Gd},clear:{value:Gd},delete:{value:Gd}}),Object.freeze(e),t&&Object.values(e).forEach(n=>vv(n,!0))),e}function Gd(){zr(2)}function cp(e){return Object.isFrozen(e)}var R3={};function Ho(e){const t=R3[e];return t||zr(0,e),t}var Yc;function zO(){return Yc}function I3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qE(e,t){t&&(Ho("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function l0(e){c0(e),e.drafts_.forEach(L3),e.drafts_=null}function c0(e){e===Yc&&(Yc=e.parent_)}function YE(e){return Yc=I3(Yc,e)}function L3(e){const t=e[nr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function FE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[nr].modified_&&(l0(t),zr(4)),qa(e)&&(e=Pf(t,e),t.parent_||wf(t,e)),t.patches_&&Ho("Patches").generateReplacementPatches_(n[nr].base_,e,t.patches_,t.inversePatches_)):e=Pf(t,n,[]),l0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$O?e:void 0}function Pf(e,t,n){if(cp(t))return t;const r=t[nr];if(!r)return Cf(t,(i,s)=>VE(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return wf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),Cf(s,(u,p)=>VE(e,r,i,u,p,n,l)),wf(e,i,!1),n&&e.patches_&&Ho("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function VE(e,t,n,r,i,s,l){if(Go(i)){const u=s&&t&&t.type_!==3&&!o0(t.assigned_,r)?s.concat(r):void 0,p=Pf(e,i,u);if(UO(n,r,p),Go(p))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(qa(i)&&!cp(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Pf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(nu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&wf(e,i)}}function wf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&vv(t,n)}function $3(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:zO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=bv;n&&(i=[r],s=Fc);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var bv={get(e,t){if(t===nr)return e;const n=No(e);if(!o0(n,t))return B3(e,n,t);const r=n[t];return e.finalized_||!qa(r)?r:r===iy(e.base_,t)?(oy(e),e.copy_[t]=d0(r,e)):r},has(e,t){return t in No(e)},ownKeys(e){return Reflect.ownKeys(No(e))},set(e,t,n){const r=GO(No(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=iy(No(e),t),s=i?.[nr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(j3(n,i)&&(n!==void 0||o0(e.base_,t)))return!0;oy(e),u0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return iy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,oy(e),u0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=No(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){zr(11)},getPrototypeOf(e){return al(e.base_)},setPrototypeOf(){zr(12)}},Fc={};Cf(bv,(e,t)=>{Fc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Fc.deleteProperty=function(e,t){return Fc.set.call(this,e,t,void 0)};Fc.set=function(e,t,n){return bv.set.call(this,e[0],t,n,e[0])};function iy(e,t){const n=e[nr];return(n?No(n):e)[t]}function B3(e,t,n){const r=GO(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function GO(e,t){if(!(t in e))return;let n=al(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=al(n)}}function u0(e){e.modified_||(e.modified_=!0,e.parent_&&u0(e.parent_))}function oy(e){e.copy_||(e.copy_=s0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var U3=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(p=s,...f){return l.produce(p,h=>n.call(this,h,...f))}}typeof n!="function"&&zr(6),r!==void 0&&typeof r!="function"&&zr(7);let i;if(qa(t)){const s=YE(this),l=d0(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?l0(s):c0(s)}return qE(s,r),FE(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===$O&&(i=void 0),this.autoFreeze_&&vv(i,!0),r){const s=[],l=[];Ho("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else zr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,p=>t(p,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){qa(e)||zr(8),Go(e)&&(e=Ga(e));const t=YE(this),n=d0(e,void 0);return n[nr].isManual_=!0,c0(t),n}finishDraft(e,t){const n=e&&e[nr];(!n||!n.isManual_)&&zr(9);const{scope_:r}=n;return qE(r,t),FE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ho("Patches").applyPatches_;return Go(e)?r(e,t):this.produce(e,i=>r(i,t))}};function d0(e,t){const n=nu(e)?Ho("MapSet").proxyMap_(e,t):lp(e)?Ho("MapSet").proxySet_(e,t):$3(e,t);return(t?t.scope_:zO()).drafts_.push(n),n}function Ga(e){return Go(e)||zr(10,e),HO(e)}function HO(e){if(!qa(e)||cp(e))return e;const t=e[nr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=s0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=s0(e,!0);return Cf(n,(r,i)=>{UO(n,r,HO(i))}),t&&(t.finalized_=!1),n}var z3=new U3,qO=z3.produce;function YO(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var G3=YO(),H3=YO,q3=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ef:Ef.apply(null,arguments)};function wr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(er(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>LO(r)&&r.type===e,n}var FO=class Ic extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ic.prototype)}static get[Symbol.species](){return Ic}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ic(...t[0].concat(this)):new Ic(...t.concat(this))}};function KE(e){return qa(e)?qO(e,()=>{}):e}function Hd(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Y3(e){return typeof e=="boolean"}var F3=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new FO;return n&&(Y3(n)?l.push(G3):l.push(H3(n.extraArgument))),l},V3="RTK_autoBatch",WE=e=>t=>{setTimeout(t,e)},K3=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WE(10):e.type==="callback"?e.queueNotification:WE(e.timeout),f=()=>{l=!1,s&&(s=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),g=r.subscribe(m);return u.add(h),()=>{g(),u.delete(h)}},dispatch(h){try{return i=!h?.meta?.[V3],s=!i,s&&(l||(l=!0,p(f))),r.dispatch(h)}finally{i=!0}}})},W3=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new FO(e);return r&&i.push(K3(typeof r=="object"?r:void 0)),i};function X3(e){const t=F3(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(yv(n))u=IO(n);else throw new Error(er(1));let p;typeof r=="function"?p=r(t):p=t();let f=Ef;i&&(f=q3({trace:!1,...typeof i=="object"&&i}));const h=k3(...p),m=W3(h);let g=typeof l=="function"?l(m):m();const b=f(...g);return RO(u,s,b)}function VO(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(er(28));if(u in t)throw new Error(er(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Q3(e){return typeof e=="function"}function Z3(e,t){let[n,r,i]=VO(t),s;if(Q3(e))s=()=>KE(e());else{const u=KE(e);s=()=>u}function l(u=s(),p){let f=[n[p.type],...r.filter(({matcher:h})=>h(p)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,m)=>{if(m)if(Go(h)){const b=m(h,p);return b===void 0?h:b}else{if(qa(h))return qO(h,g=>m(g,p));{const g=m(h,p);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},u)}return l.getInitialState=s,l}var J3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",e5=(e=21)=>{let t="",n=e;for(;n--;)t+=J3[Math.random()*64|0];return t},t5=Symbol.for("rtk-slice-createasyncthunk");function n5(e,t){return`${e}/${t}`}function r5({creators:e}={}){const t=e?.asyncThunk?.[t5];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(er(11));const l=(typeof r.reducers=="function"?r.reducers(i5()):r.reducers)||{},u=Object.keys(l),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,M){const N=typeof O=="string"?O:O.type;if(!N)throw new Error(er(12));if(N in p.sliceCaseReducersByType)throw new Error(er(13));return p.sliceCaseReducersByType[N]=M,f},addMatcher(O,M){return p.sliceMatchers.push({matcher:O,reducer:M}),f},exposeAction(O,M){return p.actionCreators[O]=M,f},exposeCaseReducer(O,M){return p.sliceCaseReducersByName[O]=M,f}};u.forEach(O=>{const M=l[O],N={reducerName:O,type:n5(i,O),createNotation:typeof r.reducers=="function"};s5(M)?c5(N,M,f,t):o5(N,M,f)});function h(){const[O={},M=[],N=void 0]=typeof r.extraReducers=="function"?VO(r.extraReducers):[r.extraReducers],D={...O,...p.sliceCaseReducersByType};return Z3(r.initialState,k=>{for(let R in D)k.addCase(R,D[R]);for(let R of p.sliceMatchers)k.addMatcher(R.matcher,R.reducer);for(let R of M)k.addMatcher(R.matcher,R.reducer);N&&k.addDefaultCase(N)})}const m=O=>O,g=new Map,b=new WeakMap;let S;function A(O,M){return S||(S=h()),S(O,M)}function C(){return S||(S=h()),S.getInitialState()}function P(O,M=!1){function N(k){let R=k[O];return typeof R>"u"&&M&&(R=Hd(b,N,C)),R}function D(k=m){const R=Hd(g,M,()=>new WeakMap);return Hd(R,k,()=>{const U={};for(const[H,q]of Object.entries(r.selectors??{}))U[H]=a5(q,k,()=>Hd(b,k,C),M);return U})}return{reducerPath:O,getSelectors:D,get selectors(){return D(N)},selectSlice:N}}const T={name:i,reducer:A,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:C,...P(s),injectInto(O,{reducerPath:M,...N}={}){const D=M??s;return O.inject({reducerPath:D,reducer:A},N),{...T,...P(D,!0)}}};return T}}function a5(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var ar=r5();function i5(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function o5({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!l5(r))throw new Error(er(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?wr(e,l):wr(e))}function s5(e){return e._reducerDefinitionType==="asyncThunk"}function l5(e){return e._reducerDefinitionType==="reducerWithPrepare"}function c5({type:e,reducerName:t},n,r,i){if(!i)throw new Error(er(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:p,settled:f,options:h}=n,m=i(e,s,h);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),p&&r.addCase(m.rejected,p),f&&r.addMatcher(m.settled,f),r.exposeCaseReducer(t,{fulfilled:l||qd,pending:u||qd,rejected:p||qd,settled:f||qd})}function qd(){}var u5="task",KO="listener",WO="completed",xv="cancelled",d5=`task-${xv}`,f5=`task-${WO}`,f0=`${KO}-${xv}`,p5=`${KO}-${WO}`,up=class{constructor(e){this.code=e,this.message=`${u5} ${xv} (reason: ${e})`}name="TaskAbortError";message},Sv=(e,t)=>{if(typeof e!="function")throw new TypeError(er(32))},Of=()=>{},XO=(e,t=Of)=>(e.catch(t),e),QO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Lo=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},$o=e=>{if(e.aborted){const{reason:t}=e;throw new up(t)}};function ZO(e,t){let n=Of;return new Promise((r,i)=>{const s=()=>i(new up(e.reason));if(e.aborted){s();return}n=QO(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Of})}var h5=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof up?"cancelled":"rejected",error:n}}finally{t?.()}},Tf=e=>t=>XO(ZO(e,t).then(n=>($o(e),n))),JO=e=>{const t=Tf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:tl}=Object,XE={},dp="listenerMiddleware",m5=(e,t)=>{const n=r=>QO(e,()=>Lo(r,e.reason));return(r,i)=>{Sv(r);const s=new AbortController;n(s);const l=h5(async()=>{$o(e),$o(s.signal);const u=await r({pause:Tf(s.signal),delay:JO(s.signal),signal:s.signal});return $o(s.signal),u},()=>Lo(s,f5));return i?.autoJoin&&t.push(l.catch(Of)),{result:Tf(e)(l),cancel(){Lo(s,d5)}}}},g5=(e,t)=>{const n=async(r,i)=>{$o(t);let s=()=>{};const u=[new Promise((p,f)=>{let h=e({predicate:r,effect:(m,g)=>{g.unsubscribe(),p([m,g.getState(),g.getOriginalState()])}});s=()=>{h(),f()}})];i!=null&&u.push(new Promise(p=>setTimeout(p,i,null)));try{const p=await ZO(t,Promise.race(u));return $o(t),p}finally{s()}};return(r,i)=>XO(n(r,i))},eT=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=wr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(er(21));return Sv(s),{predicate:i,type:t,effect:s}},tT=tl(e=>{const{type:t,predicate:n,effect:r}=eT(e);return{id:e5(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(er(22))}}},{withTypes:()=>tT}),QE=(e,t)=>{const{type:n,effect:r,predicate:i}=eT(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},p0=e=>{e.pending.forEach(t=>{Lo(t,f0)})},y5=e=>()=>{e.forEach(p0),e.clear()},ZE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},nT=tl(wr(`${dp}/add`),{withTypes:()=>nT}),v5=wr(`${dp}/removeAll`),rT=tl(wr(`${dp}/remove`),{withTypes:()=>rT}),b5=(...e)=>{console.error(`${dp}/error`,...e)},ru=(e={})=>{const t=new Map,{extra:n,onError:r=b5}=e;Sv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),m=>{h.unsubscribe(),m?.cancelActive&&p0(h)}),s=h=>{const m=QE(t,h)??tT(h);return i(m)};tl(s,{withTypes:()=>s});const l=h=>{const m=QE(t,h);return m&&(m.unsubscribe(),h.cancelActive&&p0(m)),!!m};tl(l,{withTypes:()=>l});const u=async(h,m,g,b)=>{const S=new AbortController,A=g5(s,S.signal),C=[];try{h.pending.add(S),await Promise.resolve(h.effect(m,tl({},g,{getOriginalState:b,condition:(P,T)=>A(P,T).then(Boolean),take:A,delay:JO(S.signal),pause:Tf(S.signal),extra:n,signal:S.signal,fork:m5(S.signal,C),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((P,T,O)=>{P!==S&&(Lo(P,f0),O.delete(P))})},cancel:()=>{Lo(S,f0),h.pending.delete(S)},throwIfCancelled:()=>{$o(S.signal)}})))}catch(P){P instanceof up||ZE(r,P,{raisedBy:"effect"})}finally{await Promise.all(C),Lo(S,p5),h.pending.delete(S)}},p=y5(t);return{middleware:h=>m=>g=>{if(!LO(g))return m(g);if(nT.match(g))return s(g.payload);if(v5.match(g)){p();return}if(rT.match(g))return l(g.payload);let b=h.getState();const S=()=>{if(b===XE)throw new Error(er(23));return b};let A;try{if(A=m(g),t.size>0){const C=h.getState(),P=Array.from(t.values());for(const T of P){let O=!1;try{O=T.predicate(g,C,b)}catch(M){O=!1,ZE(r,M,{raisedBy:"predicate"})}O&&u(T,g,h,S)}}}finally{b=XE}return A},startListening:s,stopListening:l,clearListeners:p}};function er(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var x5={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},aT=ar({name:"chartLayout",initialState:x5,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:S5,setLayout:A5,setChartSize:E5,setScale:C5}=aT.actions,P5=aT.reducer;function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(r){w5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w5(e,t,n){return(t=O5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O5(e){var t=T5(e,"string");return typeof t=="symbol"?t:t+""}function T5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _f=Math.PI/180,_5=e=>e*180/Math.PI,Bt=(e,t,n,r)=>({x:e+Math.cos(-_f*r)*n,y:t+Math.sin(-_f*r)*n}),iT=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},D5=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},N5=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=D5({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,p=Math.acos(u);return r>s&&(p=2*Math.PI-p),{radius:l,angle:_5(p),angleInRadian:p}},k5=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},M5=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},j5=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=N5({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:p,endAngle:f}=k5(t),h=s,m;if(p<=f){for(;h>f;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=f}else{for(;h>p;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=p}return m?eC(eC({},t),{},{radius:i,angle:M5(h,t)}):null};function oT(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function tC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(n),!0).forEach(function(r){R5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R5(e,t,n){return(t=I5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I5(e){var t=L5(e,"string");return typeof t=="symbol"?t:t+""}function L5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yt(e,t,n){return en(e)||en(t)?n:sa(t)?zo(e,t,n):typeof t=="function"?t(e):n}var $5=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var p=0;p<u;p++){var f=p>0?n[p-1].coordinate:n[u-1].coordinate,h=n[p].coordinate,m=p>=u-1?n[0].coordinate:n[p+1].coordinate,g=void 0;if(Jt(h-f)!==Jt(m-h)){var b=[];if(Jt(m-h)===Jt(i[1]-i[0])){g=m;var S=h+i[1]-i[0];b[0]=Math.min(S,(S+f)/2),b[1]=Math.max(S,(S+f)/2)}else{g=f;var A=m+i[1]-i[0];b[0]=Math.min(h,(A+h)/2),b[1]=Math.max(h,(A+h)/2)}var C=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>C[0]&&e<=C[1]||e>=b[0]&&e<=b[1]){({index:l}=n[p]);break}}else{var P=Math.min(f,m),T=Math.max(f,m);if(e>(P+h)/2&&e<=(T+h)/2){({index:l}=n[p]);break}}}else if(t){for(var O=0;O<u;O++)if(O===0&&e<=(t[O].coordinate+t[O+1].coordinate)/2||O>0&&O<u-1&&e>(t[O].coordinate+t[O-1].coordinate)/2&&e<=(t[O].coordinate+t[O+1].coordinate)/2||O===u-1&&e>(t[O].coordinate+t[O-1].coordinate)/2){({index:l}=t[O]);break}}return l},B5=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&Oe(e[s]))return Er(Er({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&Oe(e[l]))return Er(Er({},e),{},{[l]:e[l]+(i||0)})}return e},Xo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",sT=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},lT=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:p,categoricalDomain:f,tickCount:h,ticks:m,niceTicks:g,axisType:b}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=b==="angleAxis"&&s&&s.length>=2?Jt(s[0]-s[1])*2*A:A,m||g){var C=(m||g||[]).map((P,T)=>{var O=r?r.indexOf(P):P;return{coordinate:l(O)+A,value:P,offset:A,index:T}});return C.filter(P=>!tr(P.coordinate))}return p&&f?f.map((P,T)=>({coordinate:l(P)+A,value:P,index:T,offset:A})):l.ticks&&h!=null?l.ticks(h).map((P,T)=>({coordinate:l(P)+A,value:P,offset:A,index:T})):l.domain().map((P,T)=>({coordinate:l(P)+A,value:r?r[P]:P,index:T,offset:A}))},nC=1e-4,U5=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-nC,s=Math.max(r[0],r[1])+nC,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},z5=(e,t)=>{if(!t||t.length!==2||!Oe(t[0])||!Oe(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Oe(e[0])||e[0]<n)&&(i[0]=n),(!Oe(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},G5=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=tr(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},H5=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=tr(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},q5={sign:G5,expand:bI,none:rl,silhouette:xI,wiggle:SI,positive:H5},Y5=(e,t,n)=>{var r=q5[n],i=vI().keys(t).value((s,l)=>+yt(s,l,0)).order(r0).offset(r);return i(e)};function F5(e){return e==null?void 0:String(e)}var rC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=yt(s,t.dataKey,t.scale.domain()[l]);return en(u)?null:t.scale(u)-i/2+r},V5=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},K5=e=>{var t=e.flat(2).filter(Oe);return[Math.min(...t),Math.max(...t)]},W5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],X5=(e,t,n)=>{if(e!=null)return W5(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((p,f)=>{var h=oT(f,t,n),m=K5(h);return[Math.min(p[0],m[0]),Math.max(p[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},aC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Av=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=op(t,h=>h.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var p=i[l],f=i[l-1];s=Math.min((p.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function oC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Er(Er({},t),{},{dataKey:n,payload:r,value:i,name:s})}function fp(e,t){if(e)return String(e);if(typeof t=="string")return t}function Q5(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?j5({x:e,y:t},r):null}var Z5=(e,t,n,r)=>{var i=t.find(f=>f&&f.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Er(Er(Er({},r),Bt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:p}=r;return Er(Er(Er({},r),Bt(r.cx,r.cy,u,p)),{},{angle:p,radius:u})}return{x:0,y:0}},J5=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Wa=e=>e.layout.width,Xa=e=>e.layout.height,eL=e=>e.layout.scale,cT=e=>e.layout.margin,pp=ee(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),hp=ee(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),uT="data-recharts-item-index",dT="data-recharts-item-data-key",au=60;function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(r){tL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tL(e,t,n){return(t=nL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nL(e){var t=rL(e,"string");return typeof t=="symbol"?t:t+""}function rL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aL=e=>e.brush.height;function iL(e){var t=hp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:au;return n+i}return n},0)}function oL(e){var t=hp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:au;return n+i}return n},0)}function sL(e){var t=pp(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function lL(e){var t=pp(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ft=ee([Wa,Xa,cT,aL,iL,oL,sL,lL,MO,P3],(e,t,n,r,i,s,l,u,p,f)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},g=Yd(Yd({},m),h),b=g.bottom;g.bottom+=r,g=B5(g,p,f);var S=e-g.left-g.right,A=t-g.top-g.bottom;return Yd(Yd({brushBottom:b},g),{},{width:Math.max(S,0),height:Math.max(A,0)})}),cL=ee(Ft,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ev=ee(Wa,Xa,(e,t)=>({x:0,y:0,width:e,height:t})),uL=E.createContext(null),Tr=()=>E.useContext(uL)!=null,mp=e=>e.brush,gp=ee([mp,Ft,cT],(e,t,n)=>({height:e.height,x:Oe(e.x)?e.x:t.left,y:Oe(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Oe(e.width)?e.width:t.width})),Cv=()=>{var e,t=Tr(),n=Pe(cL),r=Pe(gp),i=(e=Pe(mp))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},dL={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},fT=()=>{var e;return(e=Pe(Ft))!==null&&e!==void 0?e:dL},Pv=()=>Pe(Wa),wv=()=>Pe(Xa),fL=()=>Pe(e=>e.layout.margin),Ke=e=>e.layout.layoutType,Ov=()=>Pe(Ke),pL={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},pT=ar({name:"legend",initialState:pL,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Ga(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:lC,setLegendSettings:hL,addLegendPayload:hT,removeLegendPayload:mT}=pT.actions,mL=pT.reducer,gL=["contextPayload"];function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h0.apply(null,arguments)}function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){Tv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tv(e,t,n){return(t=yL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yL(e){var t=vL(e,"string");return typeof t=="symbol"?t:t+""}function vL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bL(e,t){if(e==null)return{};var n,r,i=xL(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xL(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function SL(e){return e.value}function AL(e){var{contextPayload:t}=e,n=bL(e,gL),r=_O(t,e.payloadUniqBy,SL),i=il(il({},n),{},{payload:r});return E.isValidElement(e.content)?E.cloneElement(e.content,i):typeof e.content=="function"?E.createElement(e.content,i):E.createElement(pv,i)}function EL(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:p}=t,f,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?f={left:((r||0)-s.width)/2}:f=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(p==="middle"?h={top:((i||0)-s.height)/2}:h=p==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),il(il({},f),h)}function CL(e){var t=Et();return E.useEffect(()=>{t(hL(e))},[t,e]),null}function PL(e){var t=Et();return E.useEffect(()=>(t(lC(e)),()=>{t(lC({width:0,height:0}))}),[t,e]),null}function wL(e){var t=T3(),n=GR(),r=fL(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[p,f]=jO([t]),h=Pv(),m=wv();if(h==null||m==null)return null;var g=h-(r.left||0)-(r.right||0),b=yp.getWidthOrHeight(e.layout,s,i,g),S=u?l:il(il({position:"absolute",width:b?.width||i||"auto",height:b?.height||s||"auto"},EL(l,e,r,h,m,p)),l),A=u??n;if(A==null)return null;var C=E.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:f},E.createElement(CL,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),E.createElement(PL,{width:p.width,height:p.height}),E.createElement(AL,h0({},e,b,{margin:r,chartWidth:h,chartHeight:m,contextPayload:t})));return nO.createPortal(C,A)}class yp extends E.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Oe(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return E.createElement(wL,this.props)}}Tv(yp,"displayName","Legend");Tv(yp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function m0(){return m0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m0.apply(null,arguments)}function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(n),!0).forEach(function(r){OL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OL(e,t,n){return(t=TL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TL(e){var t=_L(e,"string");return typeof t=="symbol"?t:t+""}function _L(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DL(e){return Array.isArray(e)&&sa(e[0])&&sa(e[1])?e.join(" ~ "):e}var NL=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:p,labelClassName:f,label:h,labelFormatter:m,accessibilityLayer:g=!1}=e,b=()=>{if(s&&s.length){var N={padding:0,margin:0},D=(u?op(s,u):s).map((k,R)=>{if(k.type==="none")return null;var U=k.formatter||l||DL,{value:H,name:q}=k,K=H,ce=q;if(U){var ue=U(H,q,k,R,s);if(Array.isArray(ue))[K,ce]=ue;else if(ue!=null)K=ue;else return null}var ne=sy({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:ne},sa(ce)?E.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,sa(ce)?E.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,E.createElement("span",{className:"recharts-tooltip-item-value"},K),E.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:N},D)}return null},S=sy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=sy({margin:0},i),C=!en(h),P=C?h:"",T=nt("recharts-default-tooltip",p),O=nt("recharts-tooltip-label",f);C&&m&&s!==void 0&&s!==null&&(P=m(h,s));var M=g?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",m0({className:T,style:S},M),E.createElement("p",{className:O,style:A},E.isValidElement(P)?P:"".concat(P)),b())},Oc="recharts-tooltip-wrapper",kL={visibility:"hidden"};function ML(e){var{coordinate:t,translateX:n,translateY:r}=e;return nt(Oc,{["".concat(Oc,"-right")]:Oe(n)&&t&&Oe(t.x)&&n>=t.x,["".concat(Oc,"-left")]:Oe(n)&&t&&Oe(t.x)&&n<t.x,["".concat(Oc,"-bottom")]:Oe(r)&&t&&Oe(t.y)&&r>=t.y,["".concat(Oc,"-top")]:Oe(r)&&t&&Oe(t.y)&&r<t.y})}function dC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:p,viewBoxDimension:f}=e;if(s&&Oe(s[r]))return s[r];var h=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?h:m;var g=p[r];if(g==null)return 0;if(l[r]){var b=h,S=g;return b<S?Math.max(m,g):Math.max(h,g)}if(f==null)return 0;var A=m+u,C=g+f;return A>C?Math.max(h,g):Math.max(m,g)}function jL(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function RL(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:p}=e,f,h,m;return l.height>0&&l.width>0&&n?(h=dC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:p,viewBoxDimension:p.width}),m=dC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:p,viewBoxDimension:p.height}),f=jL({translateX:h,translateY:m,useTranslate3d:u})):f=kL,{cssProperties:f,cssClasses:ML({translateX:h,translateY:m,coordinate:n})}}function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){g0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g0(e,t,n){return(t=IL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IL(e){var t=LL(e,"string");return typeof t=="symbol"?t:t+""}function LL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $L extends E.PureComponent{constructor(){super(...arguments),g0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),g0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:p,offset:f,position:h,reverseDirection:m,useTranslate3d:g,viewBox:b,wrapperStyle:S,lastBoundingBox:A,innerRef:C,hasPortalFromProps:P}=this.props,{cssClasses:T,cssProperties:O}=RL({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:f,position:h,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:g,viewBox:b}),M=P?{}:Fd(Fd({transition:p&&t?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),N=Fd(Fd({},M),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:N,ref:C},s)}}var BL=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),gl={isSsr:BL()},gT=()=>Pe(e=>e.rootProps.accessibilityLayer);function rr(e){return Number.isFinite(e)}function ol(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function y0(){return y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y0.apply(null,arguments)}function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(r){UL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UL(e,t,n){return(t=zL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zL(e){var t=GL(e,"string");return typeof t=="symbol"?t:t+""}function GL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mC={curveBasisClosed:sI,curveBasisOpen:lI,curveBasis:oI,curveBumpX:FR,curveBumpY:VR,curveLinearClosed:cI,curveLinear:ap,curveMonotoneX:uI,curveMonotoneY:dI,curveNatural:fI,curveStep:pI,curveStepAfter:mI,curveStepBefore:hI},Vd=e=>rr(e.x)&&rr(e.y),Tc=e=>e.x,_c=e=>e.y,HL=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(eu(e));return(n==="curveMonotone"||n==="curveBump")&&t?mC["".concat(n).concat(t==="vertical"?"Y":"X")]:mC[n]||ap},qL=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=HL(t,i),u=s?n.filter(Vd):n,p;if(Array.isArray(r)){var f=s?r.filter(m=>Vd(m)):r,h=u.map((m,g)=>hC(hC({},m),{},{base:f[g]}));return i==="vertical"?p=Bd().y(_c).x1(Tc).x0(m=>m.base.x):p=Bd().x(Tc).y1(_c).y0(m=>m.base.y),p.defined(Vd).curve(l),p(h)}return i==="vertical"&&Oe(r)?p=Bd().y(_c).x1(Tc).x0(r):Oe(r)?p=Bd().x(Tc).y1(_c).y0(r):p=cO().x(Tc).y(_c),p.defined(Vd).curve(l),p(u)},yT=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?qL(e):r;return E.createElement("path",y0({},Wo(e),kR(e),{className:nt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},YL=["x","y","top","left","width","height","className"];function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v0.apply(null,arguments)}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){VL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VL(e,t,n){return(t=KL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KL(e){var t=WL(e,"string");return typeof t=="symbol"?t:t+""}function WL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XL(e,t){if(e==null)return{};var n,r,i=QL(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function QL(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ZL=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),JL=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,p=XL(e,YL),f=FL({x:t,y:n,top:r,left:i,width:s,height:l},p);return!Oe(t)||!Oe(n)||!Oe(s)||!Oe(l)||!Oe(r)||!Oe(i)?null:E.createElement("path",v0({},$t(f,!0),{className:nt("recharts-cross",u),d:ZL(t,n,s,l,r,i)}))};function e4(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function t4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){n4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n4(e,t,n){return(t=r4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r4(e){var t=a4(e,"string");return typeof t=="symbol"?t:t+""}function a4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _r(e,t){var n=t4({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function i4(){}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(r){o4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o4(e,t,n){return(t=s4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s4(e){var t=l4(e,"string");return typeof t=="symbol"?t:t+""}function l4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c4=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vT=(e,t,n)=>e.map(r=>"".concat(c4(r)," ").concat(t,"ms ").concat(n)).join(","),u4=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Vc=(e,t)=>Object.keys(t).reduce((n,r)=>bC(bC({},n),{},{[r]:e(r,t[r])}),{});function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(r){d4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d4(e,t,n){return(t=f4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f4(e){var t=p4(e,"string");return typeof t=="symbol"?t:t+""}function p4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Df=(e,t,n)=>e+(t-e)*n,b0=e=>{var{from:t,to:n}=e;return t!==n},bT=(e,t,n)=>{var r=Vc((i,s)=>{if(b0(s)){var[l,u]=e(s.from,s.to,s.velocity);return fn(fn({},s),{},{from:l,velocity:u})}return s},t);return n<1?Vc((i,s)=>b0(s)?fn(fn({},s),{},{velocity:Df(s.velocity,r[i].velocity,n),from:Df(s.from,r[i].from,n)}):s,t):bT(e,r,n-1)};function h4(e,t,n,r,i,s){var l,u=r.reduce((g,b)=>fn(fn({},g),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),p=()=>Vc((g,b)=>b.from,u),f=()=>!Object.values(u).filter(b0).length,h=null,m=g=>{l||(l=g);var b=g-l,S=b/n.dt;u=bT(n,u,S),i(fn(fn(fn({},e),t),p())),l=g,f()||(h=s.setTimeout(m))};return()=>(h=s.setTimeout(m),()=>{h()})}function m4(e,t,n,r,i,s,l){var u=null,p=i.reduce((m,g)=>fn(fn({},m),{},{[g]:[e[g],t[g]]}),{}),f,h=m=>{f||(f=m);var g=(m-f)/r,b=Vc((A,C)=>Df(...C,n(g)),p);if(s(fn(fn(fn({},e),t),b)),g<1)u=l.setTimeout(h);else{var S=Vc((A,C)=>Df(...C,n(1)),p);s(fn(fn(fn({},e),t),S))}};return()=>(u=l.setTimeout(h),()=>{u()})}const g4=(e,t,n,r,i,s)=>{var l=u4(e,t);return n.isStepper===!0?h4(e,t,n,l,i,s):m4(e,t,n,r,l,i,s)};var Nf=1e-4,xT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ST=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),SC=(e,t)=>n=>{var r=xT(e,t);return ST(r,n)},y4=(e,t)=>n=>{var r=xT(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return ST(i,n)},AC=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var p=l[0].split("(");p[0]==="cubic-bezier"&&p[1].split(")")[0].split(",").length===4&&([t,r,n,i]=p[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var f=SC(t,n),h=SC(r,i),m=y4(t,n),g=S=>S>1?1:S<0?0:S,b=S=>{for(var A=S>1?1:S,C=A,P=0;P<8;++P){var T=f(C)-A,O=m(C);if(Math.abs(T-A)<Nf||O<Nf)return h(C);C=g(C-T/O)}return h(C)};return b.isStepper=!1,b},v4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,p)=>{var f=-(l-u)*n,h=p*r,m=p+(f-h)*i/1e3,g=p*i/1e3+l;return Math.abs(g-u)<Nf&&Math.abs(m)<Nf?[u,0]:[g,m]};return s.isStepper=!0,s.dt=i,s},b4=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return AC(e);case"spring":return v4();default:if(e.split("(")[0]==="cubic-bezier")return AC(e)}return typeof e=="function"?e:null};function x4(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[p,...f]=u;if(typeof p=="number"){i=e.setTimeout(s.bind(null,f),p);return}s(p),i=e.setTimeout(s.bind(null,f));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class S4{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function A4(){return x4(new S4)}var E4=E.createContext(A4);function C4(e,t){var n=E.useContext(E4);return E.useMemo(()=>t??n(e),[e,t,n])}var P4={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},EC={t:0},ly={t:1};function vp(e){var t=_r(e,P4),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:p,children:f}=t,h=C4(t.animationId,t.animationManager),[m,g]=E.useState(n?EC:ly),b=E.useRef(null);return E.useEffect(()=>{n||g(ly)},[n]),E.useEffect(()=>{if(!n||!r)return i4;var S=g4(EC,ly,b4(s),i,g,h.getTimeoutController()),A=()=>{b.current=S()};return h.start([p,l,A,i,u]),()=>{h.stop(),b.current&&b.current(),u()}},[n,r,i,s,l,p,u,h]),f(m.t)}function bp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(qc(t)),r=E.useRef(e);return r.current!==e&&(n.current=qc(t),r.current=e),n.current}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(n),!0).forEach(function(r){w4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w4(e,t,n){return(t=O4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O4(e){var t=T4(e,"string");return typeof t=="symbol"?t:t+""}function T4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kf(){return kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kf.apply(null,arguments)}var wC=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,p=r>=0&&n>=0||r<0&&n<0?1:0,f;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,g=4;m<g;m++)h[m]=i[m]>s?s:i[m];f="M".concat(e,",").concat(t+l*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(p,",").concat(e+u*h[0],",").concat(t)),f+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(p,`,
        `).concat(e+n,",").concat(t+l*h[1])),f+="L ".concat(e+n,",").concat(t+r-l*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(p,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),f+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(p,`,
        `).concat(e,",").concat(t+r-l*h[3])),f+="Z"}else if(s>0&&i===+i&&i>0){var b=Math.min(s,i);f="M ".concat(e,",").concat(t+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+u*b,",").concat(t,`
            L `).concat(e+n-u*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+n,",").concat(t+l*b,`
            L `).concat(e+n,",").concat(t+r-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+n-u*b,",").concat(t+r,`
            L `).concat(e+u*b,",").concat(t+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e,",").concat(t+r-l*b," Z")}else f="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},_4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},AT=e=>{var t=_r(e,_4),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ue=n.current.getTotalLength();ue&&i(ue)}catch{}},[]);var{x:s,y:l,width:u,height:p,radius:f,className:h}=t,{animationEasing:m,animationDuration:g,animationBegin:b,isAnimationActive:S,isUpdateAnimationActive:A}=t,C=E.useRef(u),P=E.useRef(p),T=E.useRef(s),O=E.useRef(l),M=E.useMemo(()=>({x:s,y:l,width:u,height:p,radius:f}),[s,l,u,p,f]),N=bp(M,"rectangle-");if(s!==+s||l!==+l||u!==+u||p!==+p||u===0||p===0)return null;var D=nt("recharts-rectangle",h);if(!A)return E.createElement("path",kf({},$t(t,!0),{className:D,d:wC(s,l,u,p,f)}));var k=C.current,R=P.current,U=T.current,H=O.current,q="0px ".concat(r===-1?1:r,"px"),K="".concat(r,"px 0px"),ce=vT(["strokeDasharray"],g,typeof m=="string"?m:void 0);return E.createElement(vp,{animationId:N,key:N,canBegin:r>0,duration:g,easing:m,isActive:A,begin:b},ue=>{var ne=pn(k,u,ue),I=pn(R,p,ue),X=pn(U,s,ue),se=pn(H,l,ue);n.current&&(C.current=ne,P.current=I,T.current=X,O.current=se);var ge;return S?ue>0?ge={transition:ce,strokeDasharray:K}:ge={strokeDasharray:q}:ge={strokeDasharray:K},E.createElement("path",kf({},$t(t,!0),{className:D,d:wC(X,se,ne,I,f),ref:n,style:PC(PC({},ge),t.style)}))})};function ET(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=Bt(t,n,r,i),u=Bt(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x0.apply(null,arguments)}var D4=(e,t)=>{var n=Jt(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Kd=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:p}=e,f=u*(l?1:-1)+r,h=Math.asin(u/f)/_f,m=p?i:i+s*h,g=Bt(t,n,f,m),b=Bt(t,n,r,m),S=p?i-s*h:i,A=Bt(t,n,f*Math.cos(h*_f),S);return{center:g,circleTangency:b,lineTangency:A,theta:h}},CT=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=D4(s,l),p=s+u,f=Bt(t,n,i,s),h=Bt(t,n,i,p),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>p),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var g=Bt(t,n,r,s),b=Bt(t,n,r,p);m+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=p),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},N4=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:p,endAngle:f}=e,h=Jt(f-p),{circleTangency:m,lineTangency:g,theta:b}=Kd({cx:t,cy:n,radius:i,angle:p,sign:h,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:C}=Kd({cx:t,cy:n,radius:i,angle:f,sign:-h,cornerRadius:s,cornerIsExternal:u}),P=u?Math.abs(p-f):Math.abs(p-f)-b-C;if(P<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):CT({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:p,endAngle:f});var T="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:O,lineTangency:M,theta:N}=Kd({cx:t,cy:n,radius:r,angle:p,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:k,theta:R}=Kd({cx:t,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),U=u?Math.abs(p-f):Math.abs(p-f)-N-R;if(U<0&&s===0)return"".concat(T,"L").concat(t,",").concat(n,"Z");T+="L".concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(U>180),",").concat(+(h>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,"Z")}else T+="L".concat(t,",").concat(n,"Z");return T},k4={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},PT=e=>{var t=_r(e,k4),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:p,startAngle:f,endAngle:h,className:m}=t;if(s<i||f===h)return null;var g=nt("recharts-sector",m),b=s-i,S=bn(l,b,0,!0),A;return S>0&&Math.abs(f-h)<360?A=N4({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,b/2),forceCornerRadius:u,cornerIsExternal:p,startAngle:f,endAngle:h}):A=CT({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:f,endAngle:h}),E.createElement("path",x0({},$t(t,!0),{className:g,d:A}))};function M4(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:p,innerRadius:f,outerRadius:h,angle:m}=t,g=Bt(u,p,f,m),b=Bt(u,p,h,m);r=g.x,i=g.y,s=b.x,l=b.y}else return ET(t);return[{x:r,y:i},{x:s,y:l}]}var cy={},uy={},dy={},OC;function j4(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NO();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(dy)),dy}var TC;function R4(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j4();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(uy)),uy}var _C;function I4(){return _C||(_C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kO(),n=R4();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),p=new Array(u);for(let f=0;f<u;f++)p[f]=i,i+=l;return p}e.range=r})(cy)),cy}var fy,DC;function L4(){return DC||(DC=1,fy=I4().range),fy}var $4=L4();const wT=Hr($4);function $i(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function B4(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _v(e){let t,n,r;e.length!==2?(t=$i,n=(u,p)=>$i(e(u),p),r=(u,p)=>e(u)-p):(t=e===$i||e===B4?e:U4,n=e,r=e);function i(u,p,f=0,h=u.length){if(f<h){if(t(p,p)!==0)return h;do{const m=f+h>>>1;n(u[m],p)<0?f=m+1:h=m}while(f<h)}return f}function s(u,p,f=0,h=u.length){if(f<h){if(t(p,p)!==0)return h;do{const m=f+h>>>1;n(u[m],p)<=0?f=m+1:h=m}while(f<h)}return f}function l(u,p,f=0,h=u.length){const m=i(u,p,f,h-1);return m>f&&r(u[m-1],p)>-r(u[m],p)?m-1:m}return{left:i,center:l,right:s}}function U4(){return 0}function OT(e){return e===null?NaN:+e}function*z4(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const G4=_v($i),iu=G4.right;_v(OT).center;class NC extends Map{constructor(t,n=Y4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(kC(this,t))}has(t){return super.has(kC(this,t))}set(t,n){return super.set(H4(this,t),n)}delete(t){return super.delete(q4(this,t))}}function kC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function H4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function q4({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Y4(e){return e!==null&&typeof e=="object"?e.valueOf():e}function F4(e=$i){if(e===$i)return TT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function TT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const V4=Math.sqrt(50),K4=Math.sqrt(10),W4=Math.sqrt(2);function Mf(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=V4?10:s>=K4?5:s>=W4?2:1;let u,p,f;return i<0?(f=Math.pow(10,-i)/l,u=Math.round(e*f),p=Math.round(t*f),u/f<e&&++u,p/f>t&&--p,f=-f):(f=Math.pow(10,i)*l,u=Math.round(e/f),p=Math.round(t/f),u*f<e&&++u,p*f>t&&--p),p<u&&.5<=n&&n<2?Mf(e,t,n*2):[u,p,f]}function S0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?Mf(t,e,n):Mf(e,t,n);if(!(s>=i))return[];const u=s-i+1,p=new Array(u);if(r)if(l<0)for(let f=0;f<u;++f)p[f]=(s-f)/-l;else for(let f=0;f<u;++f)p[f]=(s-f)*l;else if(l<0)for(let f=0;f<u;++f)p[f]=(i+f)/-l;else for(let f=0;f<u;++f)p[f]=(i+f)*l;return p}function A0(e,t,n){return t=+t,e=+e,n=+n,Mf(e,t,n)[2]}function E0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?A0(t,e,n):A0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function MC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function jC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function _T(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?TT:F4(i);r>n;){if(r-n>600){const p=r-n+1,f=t-n+1,h=Math.log(p),m=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*m*(p-m)/p)*(f-p/2<0?-1:1),b=Math.max(n,Math.floor(t-f*m/p+g)),S=Math.min(r,Math.floor(t+(p-f)*m/p+g));_T(e,t,b,S,i)}const s=e[t];let l=n,u=r;for(Dc(e,n,t),i(e[r],s)>0&&Dc(e,n,r);l<u;){for(Dc(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Dc(e,n,u):(++u,Dc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Dc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function X4(e,t,n){if(e=Float64Array.from(z4(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return jC(e);if(t>=1)return MC(e);var r,i=(r-1)*t,s=Math.floor(i),l=MC(_T(e,s).subarray(0,s+1)),u=jC(e.subarray(s+1));return l+(u-l)*(i-s)}}function Q4(e,t,n=OT){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function Z4(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Dr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const C0=Symbol("implicit");function Dv(){var e=new NC,t=[],n=[],r=C0;function i(s){let l=e.get(s);if(l===void 0){if(r!==C0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new NC;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Dv(t,n).unknown(r)},Dr.apply(i,arguments),i}function Nv(){var e=Dv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,p=0,f=0,h=.5;delete e.unknown;function m(){var g=t().length,b=i<r,S=b?i:r,A=b?r:i;s=(A-S)/Math.max(1,g-p+f*2),u&&(s=Math.floor(s)),S+=(A-S-s*(g-p))*h,l=s*(1-p),u&&(S=Math.round(S),l=Math.round(l));var C=Z4(g).map(function(P){return S+s*P});return n(b?C.reverse():C)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(g){return arguments.length?(u=!!g,m()):u},e.padding=function(g){return arguments.length?(p=Math.min(1,f=+g),m()):p},e.paddingInner=function(g){return arguments.length?(p=Math.min(1,g),m()):p},e.paddingOuter=function(g){return arguments.length?(f=+g,m()):f},e.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),m()):h},e.copy=function(){return Nv(t(),[r,i]).round(u).paddingInner(p).paddingOuter(f).align(h)},Dr.apply(m(),arguments)}function DT(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return DT(t())},e}function J4(){return DT(Nv.apply(null,arguments).paddingInner(1))}function kv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function NT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ou(){}var Kc=.7,jf=1/Kc,nl="\\s*([+-]?\\d+)\\s*",Wc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e$=/^#([0-9a-f]{3,8})$/,t$=new RegExp(`^rgb\\(${nl},${nl},${nl}\\)$`),n$=new RegExp(`^rgb\\(${oa},${oa},${oa}\\)$`),r$=new RegExp(`^rgba\\(${nl},${nl},${nl},${Wc}\\)$`),a$=new RegExp(`^rgba\\(${oa},${oa},${oa},${Wc}\\)$`),i$=new RegExp(`^hsl\\(${Wc},${oa},${oa}\\)$`),o$=new RegExp(`^hsla\\(${Wc},${oa},${oa},${Wc}\\)$`),RC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kv(ou,Xc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:IC,formatHex:IC,formatHex8:s$,formatHsl:l$,formatRgb:LC,toString:LC});function IC(){return this.rgb().formatHex()}function s$(){return this.rgb().formatHex8()}function l$(){return kT(this).formatHsl()}function LC(){return this.rgb().formatRgb()}function Xc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=e$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$C(t):n===3?new zn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=t$.exec(e))?new zn(t[1],t[2],t[3],1):(t=n$.exec(e))?new zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=r$.exec(e))?Wd(t[1],t[2],t[3],t[4]):(t=a$.exec(e))?Wd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=i$.exec(e))?zC(t[1],t[2]/100,t[3]/100,1):(t=o$.exec(e))?zC(t[1],t[2]/100,t[3]/100,t[4]):RC.hasOwnProperty(e)?$C(RC[e]):e==="transparent"?new zn(NaN,NaN,NaN,0):null}function $C(e){return new zn(e>>16&255,e>>8&255,e&255,1)}function Wd(e,t,n,r){return r<=0&&(e=t=n=NaN),new zn(e,t,n,r)}function c$(e){return e instanceof ou||(e=Xc(e)),e?(e=e.rgb(),new zn(e.r,e.g,e.b,e.opacity)):new zn}function P0(e,t,n,r){return arguments.length===1?c$(e):new zn(e,t,n,r??1)}function zn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}kv(zn,P0,NT(ou,{brighter(e){return e=e==null?jf:Math.pow(jf,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kc:Math.pow(Kc,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zn(Bo(this.r),Bo(this.g),Bo(this.b),Rf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BC,formatHex:BC,formatHex8:u$,formatRgb:UC,toString:UC}));function BC(){return`#${jo(this.r)}${jo(this.g)}${jo(this.b)}`}function u$(){return`#${jo(this.r)}${jo(this.g)}${jo(this.b)}${jo((isNaN(this.opacity)?1:this.opacity)*255)}`}function UC(){const e=Rf(this.opacity);return`${e===1?"rgb(":"rgba("}${Bo(this.r)}, ${Bo(this.g)}, ${Bo(this.b)}${e===1?")":`, ${e})`}`}function Rf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jo(e){return e=Bo(e),(e<16?"0":"")+e.toString(16)}function zC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gr(e,t,n,r)}function kT(e){if(e instanceof Gr)return new Gr(e.h,e.s,e.l,e.opacity);if(e instanceof ou||(e=Xc(e)),!e)return new Gr;if(e instanceof Gr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,p=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=p<.5?s+i:2-s-i,l*=60):u=p>0&&p<1?0:l,new Gr(l,u,p,e.opacity)}function d$(e,t,n,r){return arguments.length===1?kT(e):new Gr(e,t,n,r??1)}function Gr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}kv(Gr,d$,NT(ou,{brighter(e){return e=e==null?jf:Math.pow(jf,e),new Gr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kc:Math.pow(Kc,e),new Gr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new zn(py(e>=240?e-240:e+120,i,r),py(e,i,r),py(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Gr(GC(this.h),Xd(this.s),Xd(this.l),Rf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rf(this.opacity);return`${e===1?"hsl(":"hsla("}${GC(this.h)}, ${Xd(this.s)*100}%, ${Xd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function GC(e){return e=(e||0)%360,e<0?e+360:e}function Xd(e){return Math.max(0,Math.min(1,e||0))}function py(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Mv=e=>()=>e;function f$(e,t){return function(n){return e+n*t}}function p$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function h$(e){return(e=+e)==1?MT:function(t,n){return n-t?p$(t,n,e):Mv(isNaN(t)?n:t)}}function MT(e,t){var n=t-e;return n?f$(e,n):Mv(isNaN(e)?t:e)}const HC=(function e(t){var n=h$(t);function r(i,s){var l=n((i=P0(i)).r,(s=P0(s)).r),u=n(i.g,s.g),p=n(i.b,s.b),f=MT(i.opacity,s.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=p(h),i.opacity=f(h),i+""}}return r.gamma=e,r})(1);function m$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function g$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function y$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=yl(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function v$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function If(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function b$(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=yl(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var w0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hy=new RegExp(w0.source,"g");function x$(e){return function(){return e}}function S$(e){return function(t){return e(t)+""}}function A$(e,t){var n=w0.lastIndex=hy.lastIndex=0,r,i,s,l=-1,u=[],p=[];for(e=e+"",t=t+"";(r=w0.exec(e))&&(i=hy.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,p.push({i:l,x:If(r,i)})),n=hy.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?p[0]?S$(p[0].x):x$(t):(t=p.length,function(f){for(var h=0,m;h<t;++h)u[(m=p[h]).i]=m.x(f);return u.join("")})}function yl(e,t){var n=typeof t,r;return t==null||n==="boolean"?Mv(t):(n==="number"?If:n==="string"?(r=Xc(t))?(t=r,HC):A$:t instanceof Xc?HC:t instanceof Date?v$:g$(t)?m$:Array.isArray(t)?y$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?b$:If)(e,t)}function jv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function E$(e,t){t===void 0&&(t=e,e=yl);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function C$(e){return function(){return e}}function Lf(e){return+e}var qC=[0,1];function Dn(e){return e}function O0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:C$(isNaN(t)?NaN:.5)}function P$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function w$(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=O0(i,r),s=n(l,s)):(r=O0(r,i),s=n(s,l)),function(u){return s(r(u))}}function O$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=O0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var p=iu(e,u,1,r)-1;return s[p](i[p](u))}}function su(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xp(){var e=qC,t=qC,n=yl,r,i,s,l=Dn,u,p,f;function h(){var g=Math.min(e.length,t.length);return l!==Dn&&(l=P$(e[0],e[g-1])),u=g>2?O$:w$,p=f=null,m}function m(g){return g==null||isNaN(g=+g)?s:(p||(p=u(e.map(r),t,n)))(r(l(g)))}return m.invert=function(g){return l(i((f||(f=u(t,e.map(r),If)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,Lf),h()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),h()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),n=jv,h()},m.clamp=function(g){return arguments.length?(l=g?!0:Dn,h()):l!==Dn},m.interpolate=function(g){return arguments.length?(n=g,h()):n},m.unknown=function(g){return arguments.length?(s=g,m):s},function(g,b){return r=g,i=b,h()}}function Rv(){return xp()(Dn,Dn)}function T$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $f(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function sl(e){return e=$f(Math.abs(e)),e?e[1]:NaN}function _$(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],p=0;i>0&&u>0&&(p+u+1>r&&(u=Math.max(1,r-p)),s.push(n.substring(i-=u,i+u)),!((p+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function D$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var N$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qc(e){if(!(t=N$.exec(e)))throw new Error("invalid format: "+e);var t;return new Iv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qc.prototype=Iv.prototype;function Iv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Iv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k$(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var jT;function M$(e,t){var n=$f(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(jT=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+$f(e,Math.max(0,t+s-1))[0]}function YC(e,t){var n=$f(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const FC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:T$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YC(e*100,t),r:YC,s:M$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function VC(e){return e}var KC=Array.prototype.map,WC=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function j$(e){var t=e.grouping===void 0||e.thousands===void 0?VC:_$(KC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?VC:D$(KC.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function f(m){m=Qc(m);var g=m.fill,b=m.align,S=m.sign,A=m.symbol,C=m.zero,P=m.width,T=m.comma,O=m.precision,M=m.trim,N=m.type;N==="n"?(T=!0,N="g"):FC[N]||(O===void 0&&(O=12),M=!0,N="g"),(C||g==="0"&&b==="=")&&(C=!0,g="0",b="=");var D=A==="$"?n:A==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",k=A==="$"?r:/[%p]/.test(N)?l:"",R=FC[N],U=/[defgprs%]/.test(N);O=O===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function H(q){var K=D,ce=k,ue,ne,I;if(N==="c")ce=R(q)+ce,q="";else{q=+q;var X=q<0||1/q<0;if(q=isNaN(q)?p:R(Math.abs(q),O),M&&(q=k$(q)),X&&+q==0&&S!=="+"&&(X=!1),K=(X?S==="("?S:u:S==="-"||S==="("?"":S)+K,ce=(N==="s"?WC[8+jT/3]:"")+ce+(X&&S==="("?")":""),U){for(ue=-1,ne=q.length;++ue<ne;)if(I=q.charCodeAt(ue),48>I||I>57){ce=(I===46?i+q.slice(ue+1):q.slice(ue))+ce,q=q.slice(0,ue);break}}}T&&!C&&(q=t(q,1/0));var se=K.length+q.length+ce.length,ge=se<P?new Array(P-se+1).join(g):"";switch(T&&C&&(q=t(ge+q,ge.length?P-ce.length:1/0),ge=""),b){case"<":q=K+q+ce+ge;break;case"=":q=K+ge+q+ce;break;case"^":q=ge.slice(0,se=ge.length>>1)+K+q+ce+ge.slice(se);break;default:q=ge+K+q+ce;break}return s(q)}return H.toString=function(){return m+""},H}function h(m,g){var b=f((m=Qc(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(sl(g)/3)))*3,A=Math.pow(10,-S),C=WC[8+S/3];return function(P){return b(A*P)+C}}return{format:f,formatPrefix:h}}var Qd,Lv,RT;R$({thousands:",",grouping:[3],currency:["$",""]});function R$(e){return Qd=j$(e),Lv=Qd.format,RT=Qd.formatPrefix,Qd}function I$(e){return Math.max(0,-sl(Math.abs(e)))}function L$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sl(t)/3)))*3-sl(Math.abs(e)))}function $$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sl(t)-sl(e))+1}function IT(e,t,n,r){var i=E0(e,t,n),s;switch(r=Qc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=L$(i,l))&&(r.precision=s),RT(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=$$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=I$(i))&&(r.precision=s-(r.type==="%")*2);break}}return Lv(r)}function Hi(e){var t=e.domain;return e.ticks=function(n){var r=t();return S0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return IT(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],p,f,h=10;for(u<l&&(f=l,l=u,u=f,f=i,i=s,s=f);h-- >0;){if(f=A0(l,u,n),f===p)return r[i]=l,r[s]=u,t(r);if(f>0)l=Math.floor(l/f)*f,u=Math.ceil(u/f)*f;else if(f<0)l=Math.ceil(l*f)/f,u=Math.floor(u*f)/f;else break;p=f}return e},e}function LT(){var e=Rv();return e.copy=function(){return su(e,LT())},Dr.apply(e,arguments),Hi(e)}function $T(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Lf),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return $T(e).unknown(t)},e=arguments.length?Array.from(e,Lf):[0,1],Hi(n)}function BT(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function XC(e){return Math.log(e)}function QC(e){return Math.exp(e)}function B$(e){return-Math.log(-e)}function U$(e){return-Math.exp(-e)}function z$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function G$(e){return e===10?z$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function H$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ZC(e){return(t,n)=>-e(-t,n)}function $v(e){const t=e(XC,QC),n=t.domain;let r=10,i,s;function l(){return i=H$(r),s=G$(r),n()[0]<0?(i=ZC(i),s=ZC(s),e(B$,U$)):e(XC,QC),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const p=n();let f=p[0],h=p[p.length-1];const m=h<f;m&&([f,h]=[h,f]);let g=i(f),b=i(h),S,A;const C=u==null?10:+u;let P=[];if(!(r%1)&&b-g<C){if(g=Math.floor(g),b=Math.ceil(b),f>0){for(;g<=b;++g)for(S=1;S<r;++S)if(A=g<0?S/s(-g):S*s(g),!(A<f)){if(A>h)break;P.push(A)}}else for(;g<=b;++g)for(S=r-1;S>=1;--S)if(A=g>0?S/s(-g):S*s(g),!(A<f)){if(A>h)break;P.push(A)}P.length*2<C&&(P=S0(f,h,C))}else P=S0(g,b,Math.min(b-g,C)).map(s);return m?P.reverse():P},t.tickFormat=(u,p)=>{if(u==null&&(u=10),p==null&&(p=r===10?"s":","),typeof p!="function"&&(!(r%1)&&(p=Qc(p)).precision==null&&(p.trim=!0),p=Lv(p)),u===1/0)return p;const f=Math.max(1,r*u/t.ticks().length);return h=>{let m=h/s(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=f?p(h):""}},t.nice=()=>n(BT(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function UT(){const e=$v(xp()).domain([1,10]);return e.copy=()=>su(e,UT()).base(e.base()),Dr.apply(e,arguments),e}function JC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function eP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Bv(e){var t=1,n=e(JC(t),eP(t));return n.constant=function(r){return arguments.length?e(JC(t=+r),eP(t)):t},Hi(n)}function zT(){var e=Bv(xp());return e.copy=function(){return su(e,zT()).constant(e.constant())},Dr.apply(e,arguments)}function tP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function q$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Y$(e){return e<0?-e*e:e*e}function Uv(e){var t=e(Dn,Dn),n=1;function r(){return n===1?e(Dn,Dn):n===.5?e(q$,Y$):e(tP(n),tP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Hi(t)}function zv(){var e=Uv(xp());return e.copy=function(){return su(e,zv()).exponent(e.exponent())},Dr.apply(e,arguments),e}function F$(){return zv.apply(null,arguments).exponent(.5)}function nP(e){return Math.sign(e)*e*e}function V$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function GT(){var e=Rv(),t=[0,1],n=!1,r;function i(s){var l=V$(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(nP(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Lf)).map(nP)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return GT(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Dr.apply(i,arguments),Hi(i)}function HT(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=Q4(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[iu(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort($i),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return HT().domain(e).range(t).unknown(r)},Dr.apply(s,arguments)}function qT(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(p){return p!=null&&p<=p?i[iu(r,p,0,n)]:s}function u(){var p=-1;for(r=new Array(n);++p<n;)r[p]=((p+1)*t-(p-n)*e)/(n+1);return l}return l.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,u()):[e,t]},l.range=function(p){return arguments.length?(n=(i=Array.from(p)).length-1,u()):i.slice()},l.invertExtent=function(p){var f=i.indexOf(p);return f<0?[NaN,NaN]:f<1?[e,r[0]]:f>=n?[r[n-1],t]:[r[f-1],r[f]]},l.unknown=function(p){return arguments.length&&(s=p),l},l.thresholds=function(){return r.slice()},l.copy=function(){return qT().domain([e,t]).range(i).unknown(s)},Dr.apply(Hi(l),arguments)}function YT(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[iu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return YT().domain(e).range(t).unknown(n)},Dr.apply(i,arguments)}const my=new Date,gy=new Date;function Vt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const p=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return p;let f;do p.push(f=new Date(+s)),t(s,u),e(s);while(f<s&&s<l);return p},i.filter=s=>Vt(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(my.setTime(+s),gy.setTime(+l),e(my),e(gy),Math.floor(n(my,gy))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const Bf=Vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Bf);Bf.range;const Ua=1e3,Cr=Ua*60,za=Cr*60,Ya=za*24,Gv=Ya*7,rP=Ya*30,yy=Ya*365,Ro=Vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCSeconds());Ro.range;const Hv=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,t)=>{e.setTime(+e+t*Cr)},(e,t)=>(t-e)/Cr,e=>e.getMinutes());Hv.range;const qv=Vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Cr)},(e,t)=>(t-e)/Cr,e=>e.getUTCMinutes());qv.range;const Yv=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*Cr)},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getHours());Yv.range;const Fv=Vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getUTCHours());Fv.range;const lu=Vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Cr)/Ya,e=>e.getDate()-1);lu.range;const Sp=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ya,e=>e.getUTCDate()-1);Sp.range;const FT=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ya,e=>Math.floor(e/Ya));FT.range;function Qo(e){return Vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Cr)/Gv)}const Ap=Qo(0),Uf=Qo(1),K$=Qo(2),W$=Qo(3),ll=Qo(4),X$=Qo(5),Q$=Qo(6);Ap.range;Uf.range;K$.range;W$.range;ll.range;X$.range;Q$.range;function Zo(e){return Vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Gv)}const Ep=Zo(0),zf=Zo(1),Z$=Zo(2),J$=Zo(3),cl=Zo(4),e8=Zo(5),t8=Zo(6);Ep.range;zf.range;Z$.range;J$.range;cl.range;e8.range;t8.range;const Vv=Vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Vv.range;const Kv=Vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Kv.range;const Fa=Vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Fa.range;const Va=Vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Va.range;function VT(e,t,n,r,i,s){const l=[[Ro,1,Ua],[Ro,5,5*Ua],[Ro,15,15*Ua],[Ro,30,30*Ua],[s,1,Cr],[s,5,5*Cr],[s,15,15*Cr],[s,30,30*Cr],[i,1,za],[i,3,3*za],[i,6,6*za],[i,12,12*za],[r,1,Ya],[r,2,2*Ya],[n,1,Gv],[t,1,rP],[t,3,3*rP],[e,1,yy]];function u(f,h,m){const g=h<f;g&&([f,h]=[h,f]);const b=m&&typeof m.range=="function"?m:p(f,h,m),S=b?b.range(f,+h+1):[];return g?S.reverse():S}function p(f,h,m){const g=Math.abs(h-f)/m,b=_v(([,,C])=>C).right(l,g);if(b===l.length)return e.every(E0(f/yy,h/yy,m));if(b===0)return Bf.every(Math.max(E0(f,h,m),1));const[S,A]=l[g/l[b-1][2]<l[b][2]/g?b-1:b];return S.every(A)}return[u,p]}const[n8,r8]=VT(Va,Kv,Ep,FT,Fv,qv),[a8,i8]=VT(Fa,Vv,Ap,lu,Yv,Hv);function vy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function by(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function o8(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,p=e.shortMonths,f=kc(i),h=Mc(i),m=kc(s),g=Mc(s),b=kc(l),S=Mc(l),A=kc(u),C=Mc(u),P=kc(p),T=Mc(p),O={a:X,A:se,b:ge,B:j,c:null,d:cP,e:cP,f:_8,g:B8,G:z8,H:w8,I:O8,j:T8,L:KT,m:D8,M:N8,p:V,q:Y,Q:fP,s:pP,S:k8,u:M8,U:j8,V:R8,w:I8,W:L8,x:null,X:null,y:$8,Y:U8,Z:G8,"%":dP},M={a:ie,A:ve,b:G,B:te,c:null,d:uP,e:uP,f:F8,g:nB,G:aB,H:H8,I:q8,j:Y8,L:XT,m:V8,M:K8,p:ye,q:pe,Q:fP,s:pP,S:W8,u:X8,U:Q8,V:Z8,w:J8,W:eB,x:null,X:null,y:tB,Y:rB,Z:iB,"%":dP},N={a:H,A:q,b:K,B:ce,c:ue,d:sP,e:sP,f:A8,g:oP,G:iP,H:lP,I:lP,j:v8,L:S8,m:y8,M:b8,p:U,q:g8,Q:C8,s:P8,S:x8,u:d8,U:f8,V:p8,w:u8,W:h8,x:ne,X:I,y:oP,Y:iP,Z:m8,"%":E8};O.x=D(n,O),O.X=D(r,O),O.c=D(t,O),M.x=D(n,M),M.X=D(r,M),M.c=D(t,M);function D(ae,de){return function(be){var fe=[],rt=-1,Ie=0,Ot=ae.length,Ct,pt,Yr;for(be instanceof Date||(be=new Date(+be));++rt<Ot;)ae.charCodeAt(rt)===37&&(fe.push(ae.slice(Ie,rt)),(pt=aP[Ct=ae.charAt(++rt)])!=null?Ct=ae.charAt(++rt):pt=Ct==="e"?" ":"0",(Yr=de[Ct])&&(Ct=Yr(be,pt)),fe.push(Ct),Ie=rt+1);return fe.push(ae.slice(Ie,rt)),fe.join("")}}function k(ae,de){return function(be){var fe=Nc(1900,void 0,1),rt=R(fe,ae,be+="",0),Ie,Ot;if(rt!=be.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(de&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Ie=by(Nc(fe.y,0,1)),Ot=Ie.getUTCDay(),Ie=Ot>4||Ot===0?zf.ceil(Ie):zf(Ie),Ie=Sp.offset(Ie,(fe.V-1)*7),fe.y=Ie.getUTCFullYear(),fe.m=Ie.getUTCMonth(),fe.d=Ie.getUTCDate()+(fe.w+6)%7):(Ie=vy(Nc(fe.y,0,1)),Ot=Ie.getDay(),Ie=Ot>4||Ot===0?Uf.ceil(Ie):Uf(Ie),Ie=lu.offset(Ie,(fe.V-1)*7),fe.y=Ie.getFullYear(),fe.m=Ie.getMonth(),fe.d=Ie.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Ot="Z"in fe?by(Nc(fe.y,0,1)).getUTCDay():vy(Nc(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Ot+5)%7:fe.w+fe.U*7-(Ot+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,by(fe)):vy(fe)}}function R(ae,de,be,fe){for(var rt=0,Ie=de.length,Ot=be.length,Ct,pt;rt<Ie;){if(fe>=Ot)return-1;if(Ct=de.charCodeAt(rt++),Ct===37){if(Ct=de.charAt(rt++),pt=N[Ct in aP?de.charAt(rt++):Ct],!pt||(fe=pt(ae,be,fe))<0)return-1}else if(Ct!=be.charCodeAt(fe++))return-1}return fe}function U(ae,de,be){var fe=f.exec(de.slice(be));return fe?(ae.p=h.get(fe[0].toLowerCase()),be+fe[0].length):-1}function H(ae,de,be){var fe=b.exec(de.slice(be));return fe?(ae.w=S.get(fe[0].toLowerCase()),be+fe[0].length):-1}function q(ae,de,be){var fe=m.exec(de.slice(be));return fe?(ae.w=g.get(fe[0].toLowerCase()),be+fe[0].length):-1}function K(ae,de,be){var fe=P.exec(de.slice(be));return fe?(ae.m=T.get(fe[0].toLowerCase()),be+fe[0].length):-1}function ce(ae,de,be){var fe=A.exec(de.slice(be));return fe?(ae.m=C.get(fe[0].toLowerCase()),be+fe[0].length):-1}function ue(ae,de,be){return R(ae,t,de,be)}function ne(ae,de,be){return R(ae,n,de,be)}function I(ae,de,be){return R(ae,r,de,be)}function X(ae){return l[ae.getDay()]}function se(ae){return s[ae.getDay()]}function ge(ae){return p[ae.getMonth()]}function j(ae){return u[ae.getMonth()]}function V(ae){return i[+(ae.getHours()>=12)]}function Y(ae){return 1+~~(ae.getMonth()/3)}function ie(ae){return l[ae.getUTCDay()]}function ve(ae){return s[ae.getUTCDay()]}function G(ae){return p[ae.getUTCMonth()]}function te(ae){return u[ae.getUTCMonth()]}function ye(ae){return i[+(ae.getUTCHours()>=12)]}function pe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var de=D(ae+="",O);return de.toString=function(){return ae},de},parse:function(ae){var de=k(ae+="",!1);return de.toString=function(){return ae},de},utcFormat:function(ae){var de=D(ae+="",M);return de.toString=function(){return ae},de},utcParse:function(ae){var de=k(ae+="",!0);return de.toString=function(){return ae},de}}}var aP={"-":"",_:" ",0:"0"},tn=/^\s*\d+/,s8=/^%/,l8=/[\\^$*+?|[\]().{}]/g;function Ve(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function c8(e){return e.replace(l8,"\\$&")}function kc(e){return new RegExp("^(?:"+e.map(c8).join("|")+")","i")}function Mc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function u8(e,t,n){var r=tn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function d8(e,t,n){var r=tn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function f8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function p8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function h8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function iP(e,t,n){var r=tn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function oP(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function m8(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function g8(e,t,n){var r=tn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function y8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sP(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function v8(e,t,n){var r=tn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lP(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function b8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function x8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function S8(e,t,n){var r=tn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function A8(e,t,n){var r=tn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function E8(e,t,n){var r=s8.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function C8(e,t,n){var r=tn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function P8(e,t,n){var r=tn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cP(e,t){return Ve(e.getDate(),t,2)}function w8(e,t){return Ve(e.getHours(),t,2)}function O8(e,t){return Ve(e.getHours()%12||12,t,2)}function T8(e,t){return Ve(1+lu.count(Fa(e),e),t,3)}function KT(e,t){return Ve(e.getMilliseconds(),t,3)}function _8(e,t){return KT(e,t)+"000"}function D8(e,t){return Ve(e.getMonth()+1,t,2)}function N8(e,t){return Ve(e.getMinutes(),t,2)}function k8(e,t){return Ve(e.getSeconds(),t,2)}function M8(e){var t=e.getDay();return t===0?7:t}function j8(e,t){return Ve(Ap.count(Fa(e)-1,e),t,2)}function WT(e){var t=e.getDay();return t>=4||t===0?ll(e):ll.ceil(e)}function R8(e,t){return e=WT(e),Ve(ll.count(Fa(e),e)+(Fa(e).getDay()===4),t,2)}function I8(e){return e.getDay()}function L8(e,t){return Ve(Uf.count(Fa(e)-1,e),t,2)}function $8(e,t){return Ve(e.getFullYear()%100,t,2)}function B8(e,t){return e=WT(e),Ve(e.getFullYear()%100,t,2)}function U8(e,t){return Ve(e.getFullYear()%1e4,t,4)}function z8(e,t){var n=e.getDay();return e=n>=4||n===0?ll(e):ll.ceil(e),Ve(e.getFullYear()%1e4,t,4)}function G8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ve(t/60|0,"0",2)+Ve(t%60,"0",2)}function uP(e,t){return Ve(e.getUTCDate(),t,2)}function H8(e,t){return Ve(e.getUTCHours(),t,2)}function q8(e,t){return Ve(e.getUTCHours()%12||12,t,2)}function Y8(e,t){return Ve(1+Sp.count(Va(e),e),t,3)}function XT(e,t){return Ve(e.getUTCMilliseconds(),t,3)}function F8(e,t){return XT(e,t)+"000"}function V8(e,t){return Ve(e.getUTCMonth()+1,t,2)}function K8(e,t){return Ve(e.getUTCMinutes(),t,2)}function W8(e,t){return Ve(e.getUTCSeconds(),t,2)}function X8(e){var t=e.getUTCDay();return t===0?7:t}function Q8(e,t){return Ve(Ep.count(Va(e)-1,e),t,2)}function QT(e){var t=e.getUTCDay();return t>=4||t===0?cl(e):cl.ceil(e)}function Z8(e,t){return e=QT(e),Ve(cl.count(Va(e),e)+(Va(e).getUTCDay()===4),t,2)}function J8(e){return e.getUTCDay()}function eB(e,t){return Ve(zf.count(Va(e)-1,e),t,2)}function tB(e,t){return Ve(e.getUTCFullYear()%100,t,2)}function nB(e,t){return e=QT(e),Ve(e.getUTCFullYear()%100,t,2)}function rB(e,t){return Ve(e.getUTCFullYear()%1e4,t,4)}function aB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?cl(e):cl.ceil(e),Ve(e.getUTCFullYear()%1e4,t,4)}function iB(){return"+0000"}function dP(){return"%"}function fP(e){return+e}function pP(e){return Math.floor(+e/1e3)}var Ks,ZT,JT;oB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oB(e){return Ks=o8(e),ZT=Ks.format,Ks.parse,JT=Ks.utcFormat,Ks.utcParse,Ks}function sB(e){return new Date(e)}function lB(e){return e instanceof Date?+e:+new Date(+e)}function Wv(e,t,n,r,i,s,l,u,p,f){var h=Rv(),m=h.invert,g=h.domain,b=f(".%L"),S=f(":%S"),A=f("%I:%M"),C=f("%I %p"),P=f("%a %d"),T=f("%b %d"),O=f("%B"),M=f("%Y");function N(D){return(p(D)<D?b:u(D)<D?S:l(D)<D?A:s(D)<D?C:r(D)<D?i(D)<D?P:T:n(D)<D?O:M)(D)}return h.invert=function(D){return new Date(m(D))},h.domain=function(D){return arguments.length?g(Array.from(D,lB)):g().map(sB)},h.ticks=function(D){var k=g();return e(k[0],k[k.length-1],D??10)},h.tickFormat=function(D,k){return k==null?N:f(k)},h.nice=function(D){var k=g();return(!D||typeof D.range!="function")&&(D=t(k[0],k[k.length-1],D??10)),D?g(BT(k,D)):h},h.copy=function(){return su(h,Wv(e,t,n,r,i,s,l,u,p,f))},h}function cB(){return Dr.apply(Wv(a8,i8,Fa,Vv,Ap,lu,Yv,Hv,Ro,ZT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uB(){return Dr.apply(Wv(n8,r8,Va,Kv,Ep,Sp,Fv,qv,Ro,JT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Cp(){var e=0,t=1,n,r,i,s,l=Dn,u=!1,p;function f(m){return m==null||isNaN(m=+m)?p:l(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(m){return arguments.length?(u=!!m,f):u},f.interpolator=function(m){return arguments.length?(l=m,f):l};function h(m){return function(g){var b,S;return arguments.length?([b,S]=g,l=m(b,S),f):[l(0),l(1)]}}return f.range=h(yl),f.rangeRound=h(jv),f.unknown=function(m){return arguments.length?(p=m,f):p},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),f}}function qi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function e_(){var e=Hi(Cp()(Dn));return e.copy=function(){return qi(e,e_())},Qa.apply(e,arguments)}function t_(){var e=$v(Cp()).domain([1,10]);return e.copy=function(){return qi(e,t_()).base(e.base())},Qa.apply(e,arguments)}function n_(){var e=Bv(Cp());return e.copy=function(){return qi(e,n_()).constant(e.constant())},Qa.apply(e,arguments)}function Xv(){var e=Uv(Cp());return e.copy=function(){return qi(e,Xv()).exponent(e.exponent())},Qa.apply(e,arguments)}function dB(){return Xv.apply(null,arguments).exponent(.5)}function r_(){var e=[],t=Dn;function n(r){if(r!=null&&!isNaN(r=+r))return t((iu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort($i),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>X4(e,s/r))},n.copy=function(){return r_(t).domain(e)},Qa.apply(n,arguments)}function Pp(){var e=0,t=.5,n=1,r=1,i,s,l,u,p,f=Dn,h,m=!1,g;function b(A){return isNaN(A=+A)?g:(A=.5+((A=+h(A))-s)*(r*A<r*s?u:p),f(m?Math.max(0,Math.min(1,A)):A))}b.domain=function(A){return arguments.length?([e,t,n]=A,i=h(e=+e),s=h(t=+t),l=h(n=+n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,b):[e,t,n]},b.clamp=function(A){return arguments.length?(m=!!A,b):m},b.interpolator=function(A){return arguments.length?(f=A,b):f};function S(A){return function(C){var P,T,O;return arguments.length?([P,T,O]=C,f=E$(A,[P,T,O]),b):[f(0),f(.5),f(1)]}}return b.range=S(yl),b.rangeRound=S(jv),b.unknown=function(A){return arguments.length?(g=A,b):g},function(A){return h=A,i=A(e),s=A(t),l=A(n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,b}}function a_(){var e=Hi(Pp()(Dn));return e.copy=function(){return qi(e,a_())},Qa.apply(e,arguments)}function i_(){var e=$v(Pp()).domain([.1,1,10]);return e.copy=function(){return qi(e,i_()).base(e.base())},Qa.apply(e,arguments)}function o_(){var e=Bv(Pp());return e.copy=function(){return qi(e,o_()).constant(e.constant())},Qa.apply(e,arguments)}function Qv(){var e=Uv(Pp());return e.copy=function(){return qi(e,Qv()).exponent(e.exponent())},Qa.apply(e,arguments)}function fB(){return Qv.apply(null,arguments).exponent(.5)}const Lc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Nv,scaleDiverging:a_,scaleDivergingLog:i_,scaleDivergingPow:Qv,scaleDivergingSqrt:fB,scaleDivergingSymlog:o_,scaleIdentity:$T,scaleImplicit:C0,scaleLinear:LT,scaleLog:UT,scaleOrdinal:Dv,scalePoint:J4,scalePow:zv,scaleQuantile:HT,scaleQuantize:qT,scaleRadial:GT,scaleSequential:e_,scaleSequentialLog:t_,scaleSequentialPow:Xv,scaleSequentialQuantile:r_,scaleSequentialSqrt:dB,scaleSequentialSymlog:n_,scaleSqrt:F$,scaleSymlog:zT,scaleThreshold:YT,scaleTime:cB,scaleUtc:uB,tickFormat:IT},Symbol.toStringTag,{value:"Module"}));var Yi=e=>e.chartData,Zv=ee([Yi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Jv=(e,t,n,r)=>r?Zv(e):Yi(e);function ul(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(rr(t)&&rr(n))return!0}return!1}function hP(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function pB(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(rr(n))i=n;else if(typeof n=="function")return;if(rr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(ul(l))return l}}function hB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(ul(r))return hP(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Oe(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&aC.test(i)){var p=aC.exec(i);if(p==null||t==null)l=void 0;else{var f=+p[1];l=t[0]-f}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(Oe(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&iC.test(s)){var h=iC.exec(s);if(h==null||t==null)u=void 0;else{var m=+h[1];u=t[1]+m}}else u=t?.[1];var g=[l,u];if(ul(g))return t==null?g:hP(g,t,n)}}}var vl=1e9,mB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},tb,vt=!0,Or="[DecimalError] ",Uo=Or+"Invalid argument: ",eb=Or+"Exponent out of range: ",bl=Math.floor,ko=Math.pow,gB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Jn,Zt=1e7,ht=7,s_=9007199254740991,Gf=bl(s_/ht),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*ht;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ae.dividedBy=Ae.div=function(e){return Ha(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,n=t.constructor;return ut(Ha(t,new n(e),0,1),n.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return Ut(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Jn))throw Error(Or+"NaN");if(n.s<1)throw Error(Or+(n.s?"NaN":"-Infinity"));return n.eq(Jn)?new r(0):(vt=!1,t=Ha(Zc(n,s),Zc(e,s),s),vt=!0,ut(t,i))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?u_(t,e):l_(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Or+"NaN");return n.s?(vt=!1,t=Ha(n,e,0,1).times(e),vt=!0,n.minus(t)):ut(new r(n),i)};Ae.naturalExponential=Ae.exp=function(){return c_(this)};Ae.naturalLogarithm=Ae.ln=function(){return Zc(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?l_(t,e):u_(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Uo+e);if(t=Ut(i)+1,r=i.d.length-1,n=r*ht+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ae.squareRoot=Ae.sqrt=function(){var e,t,n,r,i,s,l,u=this,p=u.constructor;if(u.s<1){if(!u.s)return new p(0);throw Error(Or+"NaN")}for(e=Ut(u),vt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ia(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=bl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new p(t)):r=new p(i.toString()),n=p.precision,i=l=n+3;;)if(s=r,r=s.plus(Ha(u,s,l+2)).times(.5),ia(s.d).slice(0,l)===(t=ia(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(ut(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return vt=!0,ut(r,n)};Ae.times=Ae.mul=function(e){var t,n,r,i,s,l,u,p,f,h=this,m=h.constructor,g=h.d,b=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,p=g.length,f=b.length,p<f&&(s=g,g=b,b=s,l=p,p=f,f=l),s=[],l=p+f,r=l;r--;)s.push(0);for(r=f;--r>=0;){for(t=0,i=p+r;i>r;)u=s[i]+b[r]*g[i-r-1]+t,s[i--]=u%Zt|0,t=u/Zt|0;s[i]=(s[i]+t)%Zt|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,vt?ut(e,m.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(la(e,0,vl),t===void 0?t=r.rounding:la(t,0,8),ut(n,e+Ut(n)+1,t))};Ae.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=qo(r,!0):(la(e,0,vl),t===void 0?t=i.rounding:la(t,0,8),r=ut(new i(r),e+1,t),n=qo(r,!0,e+1)),n};Ae.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?qo(i):(la(e,0,vl),t===void 0?t=s.rounding:la(t,0,8),r=ut(new s(i),e+Ut(i)+1,t),n=qo(r.abs(),!1,e+Ut(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return ut(new t(e),Ut(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,n,r,i,s,l,u=this,p=u.constructor,f=12,h=+(e=new p(e));if(!e.s)return new p(Jn);if(u=new p(u),!u.s){if(e.s<1)throw Error(Or+"Infinity");return u}if(u.eq(Jn))return u;if(r=p.precision,e.eq(Jn))return ut(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=h<0?-h:h)<=s_){for(i=new p(Jn),t=Math.ceil(r/ht+4),vt=!1;n%2&&(i=i.times(u),gP(i.d,t)),n=bl(n/2),n!==0;)u=u.times(u),gP(u.d,t);return vt=!0,e.s<0?new p(Jn).div(i):ut(i,r)}}else if(s<0)throw Error(Or+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,vt=!1,i=e.times(Zc(u,r+f)),vt=!0,i=c_(i),i.s=s,i};Ae.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Ut(i),r=qo(i,n<=s.toExpNeg||n>=s.toExpPos)):(la(e,1,vl),t===void 0?t=s.rounding:la(t,0,8),i=ut(new s(i),e,t),n=Ut(i),r=qo(i,e<=n||n<=s.toExpNeg,e)),r};Ae.toSignificantDigits=Ae.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(la(e,1,vl),t===void 0?t=r.rounding:la(t,0,8)),ut(new r(n),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ut(e),n=e.constructor;return qo(e,t<=n.toExpNeg||t>=n.toExpPos)};function l_(e,t){var n,r,i,s,l,u,p,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),vt?ut(t,m):t;if(p=e.d,f=t.d,l=e.e,i=t.e,p=p.slice(),s=l-i,s){for(s<0?(r=p,s=-s,u=f.length):(r=f,i=l,u=p.length),l=Math.ceil(m/ht),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=p.length,s=f.length,u-s<0&&(s=u,r=f,f=p,p=r),n=0;s;)n=(p[--s]=p[s]+f[s]+n)/Zt|0,p[s]%=Zt;for(n&&(p.unshift(n),++i),u=p.length;p[--u]==0;)p.pop();return t.d=p,t.e=i,vt?ut(t,m):t}function la(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Uo+e)}function ia(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=ht-r.length,n&&(s+=Mi(n)),s+=r;l=e[t],r=l+"",n=ht-r.length,n&&(s+=Mi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Ha=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%Zt|0,l=s/Zt|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,p;if(s!=l)p=s>l?1:-1;else for(u=p=0;u<s;u++)if(r[u]!=i[u]){p=r[u]>i[u]?1:-1;break}return p}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*Zt+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,p,f,h,m,g,b,S,A,C,P,T,O,M,N,D,k,R,U=r.constructor,H=r.s==i.s?1:-1,q=r.d,K=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Or+"Division by zero");for(p=r.e-i.e,k=K.length,N=q.length,b=new U(H),S=b.d=[],f=0;K[f]==(q[f]||0);)++f;if(K[f]>(q[f]||0)&&--p,s==null?T=s=U.precision:l?T=s+(Ut(r)-Ut(i))+1:T=s,T<0)return new U(0);if(T=T/ht+2|0,f=0,k==1)for(h=0,K=K[0],T++;(f<N||h)&&T--;f++)O=h*Zt+(q[f]||0),S[f]=O/K|0,h=O%K|0;else{for(h=Zt/(K[0]+1)|0,h>1&&(K=e(K,h),q=e(q,h),k=K.length,N=q.length),M=k,A=q.slice(0,k),C=A.length;C<k;)A[C++]=0;R=K.slice(),R.unshift(0),D=K[0],K[1]>=Zt/2&&++D;do h=0,u=t(K,A,k,C),u<0?(P=A[0],k!=C&&(P=P*Zt+(A[1]||0)),h=P/D|0,h>1?(h>=Zt&&(h=Zt-1),m=e(K,h),g=m.length,C=A.length,u=t(m,A,g,C),u==1&&(h--,n(m,k<g?R:K,g))):(h==0&&(u=h=1),m=K.slice()),g=m.length,g<C&&m.unshift(0),n(A,m,C),u==-1&&(C=A.length,u=t(K,A,k,C),u<1&&(h++,n(A,k<C?R:K,C))),C=A.length):u===0&&(h++,A=[0]),S[f++]=h,u&&A[0]?A[C++]=q[M]||0:(A=[q[M]],C=1);while((M++<N||A[0]!==void 0)&&T--)}return S[0]||S.shift(),b.e=p,ut(b,l?s+Ut(b)+1:s)}})();function c_(e,t){var n,r,i,s,l,u,p=0,f=0,h=e.constructor,m=h.precision;if(Ut(e)>16)throw Error(eb+Ut(e));if(!e.s)return new h(Jn);for(vt=!1,u=m,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(r=Math.log(ko(2,f))/Math.LN10*2+5|0,u+=r,n=i=s=new h(Jn),h.precision=u;;){if(i=ut(i.times(e),u),n=n.times(++p),l=s.plus(Ha(i,n,u)),ia(l.d).slice(0,u)===ia(s.d).slice(0,u)){for(;f--;)s=ut(s.times(s),u);return h.precision=m,t==null?(vt=!0,ut(s,m)):s}s=l}}function Ut(e){for(var t=e.e*ht,n=e.d[0];n>=10;n/=10)t++;return t}function xy(e,t,n){if(t>e.LN10.sd())throw vt=!0,n&&(e.precision=n),Error(Or+"LN10 precision limit exceeded");return ut(new e(e.LN10),t)}function Mi(e){for(var t="";e--;)t+="0";return t}function Zc(e,t){var n,r,i,s,l,u,p,f,h,m=1,g=10,b=e,S=b.d,A=b.constructor,C=A.precision;if(b.s<1)throw Error(Or+(b.s?"NaN":"-Infinity"));if(b.eq(Jn))return new A(0);if(t==null?(vt=!1,f=C):f=t,b.eq(10))return t==null&&(vt=!0),xy(A,f);if(f+=g,A.precision=f,n=ia(S),r=n.charAt(0),s=Ut(b),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(e),n=ia(b.d),r=n.charAt(0),m++;s=Ut(b),r>1?(b=new A("0."+n),s++):b=new A(r+"."+n.slice(1))}else return p=xy(A,f+2,C).times(s+""),b=Zc(new A(r+"."+n.slice(1)),f-g).plus(p),A.precision=C,t==null?(vt=!0,ut(b,C)):b;for(u=l=b=Ha(b.minus(Jn),b.plus(Jn),f),h=ut(b.times(b),f),i=3;;){if(l=ut(l.times(h),f),p=u.plus(Ha(l,new A(i),f)),ia(p.d).slice(0,f)===ia(u.d).slice(0,f))return u=u.times(2),s!==0&&(u=u.plus(xy(A,f+2,C).times(s+""))),u=Ha(u,new A(m),f),A.precision=C,t==null?(vt=!0,ut(u,C)):u;u=p,i+=2}}function mP(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=bl(n/ht),e.d=[],r=(n+1)%ht,n<0&&(r+=ht),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=ht;r<i;)e.d.push(+t.slice(r,r+=ht));t=t.slice(r),r=ht-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),vt&&(e.e>Gf||e.e<-Gf))throw Error(eb+n)}else e.s=0,e.e=0,e.d=[0];return e}function ut(e,t,n){var r,i,s,l,u,p,f,h,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=ht,i=t,f=m[h=0];else{if(h=Math.ceil((r+1)/ht),s=m.length,h>=s)return e;for(f=s=m[h],l=1;s>=10;s/=10)l++;r%=ht,i=r-ht+l}if(n!==void 0&&(s=ko(10,l-i-1),u=f/s%10|0,p=t<0||m[h+1]!==void 0||f%s,p=n<4?(u||p)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||p||n==6&&(r>0?i>0?f/ko(10,l-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return p?(s=Ut(e),m.length=1,t=t-s-1,m[0]=ko(10,(ht-t%ht)%ht),e.e=bl(-t/ht)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=h,s=1,h--):(m.length=h+1,s=ko(10,ht-r),m[h]=i>0?(f/ko(10,l-i)%ko(10,i)|0)*s:0),p)for(;;)if(h==0){(m[0]+=s)==Zt&&(m[0]=1,++e.e);break}else{if(m[h]+=s,m[h]!=Zt)break;m[h--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(vt&&(e.e>Gf||e.e<-Gf))throw Error(eb+Ut(e));return e}function u_(e,t){var n,r,i,s,l,u,p,f,h,m,g=e.constructor,b=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),vt?ut(t,b):t;if(p=e.d,m=t.d,r=t.e,f=e.e,p=p.slice(),l=f-r,l){for(h=l<0,h?(n=p,l=-l,u=m.length):(n=m,r=f,u=p.length),i=Math.max(Math.ceil(b/ht),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=p.length,u=m.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(p[i]!=m[i]){h=p[i]<m[i];break}l=0}for(h&&(n=p,p=m,m=n,t.s=-t.s),u=p.length,i=m.length-u;i>0;--i)p[u++]=0;for(i=m.length;i>l;){if(p[--i]<m[i]){for(s=i;s&&p[--s]===0;)p[s]=Zt-1;--p[s],p[i]+=Zt}p[i]-=m[i]}for(;p[--u]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=r,vt?ut(t,b):t):new g(0)}function qo(e,t,n){var r,i=Ut(e),s=ia(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+Mi(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Mi(-i-1)+s,n&&(r=n-l)>0&&(s+=Mi(r))):i>=l?(s+=Mi(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+Mi(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=Mi(r))),e.s<0?"-"+s:s}function gP(e,t){if(e.length>t)return e.length=t,!0}function d_(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Uo+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return mP(l,s.toString())}else if(typeof s!="string")throw Error(Uo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,gB.test(s))mP(l,s);else throw Error(Uo+s)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=d_,i.config=i.set=yB,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function yB(e){if(!e||typeof e!="object")throw Error(Or+"Object expected");var t,n,r,i=["precision",1,vl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(bl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Uo+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Uo+n+": "+r);return this}var tb=d_(mB);Jn=new tb(1);const tt=tb;var vB=e=>e,f_={},p_=e=>e===f_,yP=e=>function t(){return arguments.length===0||arguments.length===1&&p_(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},h_=(e,t)=>e===1?t:yP(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==f_).length;return s>=e?t(...r):h_(e-s,yP(function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];var f=r.map(h=>p_(h)?u.shift():h);return t(...f,...u)}))}),wp=e=>h_(e.length,e),T0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},bB=wp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),xB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return vB;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,p)=>p(u),s(...arguments))}},_0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),m_=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var p;return l===((p=t)===null||p===void 0?void 0:p[u])})||(t=i,n=e(...i)),n}};function g_(e){var t;return e===0?t=1:t=Math.floor(new tt(e).abs().log(10).toNumber())+1,t}function y_(e,t,n){for(var r=new tt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}wp((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});wp((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});wp((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var v_=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},b_=(e,t,n)=>{if(e.lte(0))return new tt(0);var r=g_(e.toNumber()),i=new tt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new tt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),p=u.mul(i);return t?new tt(p.toNumber()):new tt(Math.ceil(p.toNumber()))},SB=(e,t,n)=>{var r=new tt(1),i=new tt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new tt(10).pow(g_(e)-1),i=new tt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new tt(Math.floor(e)))}else e===0?i=new tt(Math.floor((t-1)/2)):n||(i=new tt(Math.floor(e)));var l=Math.floor((t-1)/2),u=xB(bB(p=>i.add(new tt(p-l).mul(r)).toNumber()),T0);return u(0,t)},x_=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new tt(0),tickMin:new tt(0),tickMax:new tt(0)};var l=b_(new tt(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new tt(0):(u=new tt(t).add(n).div(2),u=u.sub(new tt(u).mod(l)));var p=Math.ceil(u.sub(t).div(l).toNumber()),f=Math.ceil(new tt(n).sub(u).div(l).toNumber()),h=p+f+1;return h>r?x_(t,n,r,i,s+1):(h<r&&(f=n>0?f+(r-h):f,p=n>0?p:p+(r-h)),{step:l,tickMin:u.sub(new tt(p).mul(l)),tickMax:u.add(new tt(f).mul(l))})};function AB(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=v_([t,n]);if(l===-1/0||u===1/0){var p=u===1/0?[l,...T0(0,r-1).map(()=>1/0)]:[...T0(0,r-1).map(()=>-1/0),u];return t>n?_0(p):p}if(l===u)return SB(l,r,i);var{step:f,tickMin:h,tickMax:m}=x_(l,u,s,i,0),g=y_(h,m.add(new tt(.1).mul(f)),f);return t>n?_0(g):g}function EB(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=v_([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),p=b_(new tt(l).sub(s).div(u-1),i,0),f=[...y_(new tt(s),new tt(l),p),l];return i===!1&&(f=f.map(h=>Math.round(h))),n>r?_0(f):f}var CB=m_(AB),PB=m_(EB),S_=e=>e.rootProps.maxBarSize,wB=e=>e.rootProps.barGap,A_=e=>e.rootProps.barCategoryGap,OB=e=>e.rootProps.barSize,cu=e=>e.rootProps.stackOffset,nb=e=>e.options.chartName,rb=e=>e.rootProps.syncId,E_=e=>e.rootProps.syncMethod,ab=e=>e.options.eventEmitter,$a={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Zn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Op=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},TB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:$a.reversed,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:$a.type,unit:void 0},_B={allowDataOverflow:Zn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zn.scale,tick:Zn.tick,tickCount:Zn.tickCount,ticks:void 0,type:Zn.type,unit:void 0},DB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$a.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},NB={allowDataOverflow:Zn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zn.scale,tick:Zn.tick,tickCount:Zn.tickCount,ticks:void 0,type:"category",unit:void 0},ib=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?DB:TB,ob=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?NB:_B,Tp=e=>e.polarOptions,sb=ee([Wa,Xa,Ft],iT),C_=ee([Tp,sb],(e,t)=>{if(e!=null)return bn(e.innerRadius,t,0)}),P_=ee([Tp,sb],(e,t)=>{if(e!=null)return bn(e.outerRadius,t,t*.8)}),kB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},w_=ee([Tp],kB);ee([ib,w_],Op);var O_=ee([sb,C_,P_],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ee([ob,O_],Op);var T_=ee([Ke,Tp,C_,P_,Wa,Xa],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:p,endAngle:f}=t;return{cx:bn(l,i,i/2),cy:bn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:p,endAngle:f,clockWise:!1}}}),bt=(e,t)=>t,uu=(e,t,n)=>n;function lb(e){return e?.id}var Kt=e=>{var t=Ke(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},xl=e=>e.tooltip.settings.axisId,nn=e=>{var t=Kt(e),n=xl(e);return du(e,t,n)},__=ee([nn],e=>e?.dataKey);function D_(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var p,f=(p=u.data)!==null&&p!==void 0?p:r;if(!(f==null||f.length===0)){var h=lb(u);f.forEach((m,g)=>{var b=s==null||i?g:String(yt(m,s,null)),S=yt(m,u.dataKey,0),A;l.has(b)?A=l.get(b):A={},Object.assign(A,{[h]:S}),l.set(b,A)})}}),Array.from(l.values())}function _p(e){return e.stackId!=null&&e.dataKey!=null}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(r){MB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MB(e,t,n){return(t=jB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jB(e){var t=RB(e,"string");return typeof t=="symbol"?t:t+""}function RB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D0=[0,"auto"],Xn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},N_=(e,t)=>e.cartesianAxis.xAxis[t],Fi=(e,t)=>{var n=N_(e,t);return n??Xn},Qn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:D0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:au},k_=(e,t)=>e.cartesianAxis.yAxis[t],Vi=(e,t)=>{var n=k_(e,t);return n??Qn},IB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},cb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??IB},kt=(e,t,n)=>{switch(t){case"xAxis":return Fi(e,n);case"yAxis":return Vi(e,n);case"zAxis":return cb(e,n);case"angleAxis":return ib(e,n);case"radiusAxis":return ob(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},LB=(e,t,n)=>{switch(t){case"xAxis":return Fi(e,n);case"yAxis":return Vi(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},du=(e,t,n)=>{switch(t){case"xAxis":return Fi(e,n);case"yAxis":return Vi(e,n);case"angleAxis":return ib(e,n);case"radiusAxis":return ob(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},M_=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ub(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var db=e=>e.graphicalItems.cartesianItems,$B=ee([bt,uu],ub),fb=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),fu=ee([db,kt,$B],fb),j_=ee([fu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(_p)),R_=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),I_=ee([fu],R_),pb=e=>e.map(t=>t.data).filter(Boolean).flat(1),BB=ee([fu],pb),hb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},mb=ee([BB,Jv],hb),gb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:yt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:yt(i,r)}))):e.map(r=>({value:r})),Dp=ee([mb,kt,fu],gb);function L_(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Jo(e){return e.filter(t=>sa(t)||t instanceof Date).map(Number).filter(t=>tr(t)===!1)}function UB(e,t,n){return!n||typeof t!="number"||tr(t)?[]:n.length?Jo(n.flatMap(r=>{var i=yt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!rr(s)||!rr(l)))return[t-s,t+l]})):[]}var zB=ee([j_,Jv,nn],D_),$_=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,p=u.map(lb);return[l,{stackedData:Y5(e,p,n),graphicalItems:u}]}))},N0=ee([zB,j_,cu],$_),B_=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=X5(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},GB=ee([N0,Yi,bt],B_),U_=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,p,f=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>L_(i,m)),h=yt(s,(p=t.dataKey)!==null&&p!==void 0?p:l.dataKey);return{value:h,errorDomain:UB(s,h,f)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:yt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Np=e=>e.errorBars,z_=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>L_(n,r));ee([I_,Np,bt],z_);var HB=ee([mb,kt,I_,Np,bt],U_);function qB(e){var{value:t}=e;if(sa(t)||t instanceof Date)return t}var bP=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Jo(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},YB=(e,t,n)=>{var r=e.map(qB).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&J2(r))?wT(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},yb=e=>{var t;if(e==null||!("domain"in e))return D0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Jo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:D0},qf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},G_=e=>e.referenceElements.dots,Sl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),FB=ee([G_,bt,uu],Sl),H_=e=>e.referenceElements.areas,VB=ee([H_,bt,uu],Sl),q_=e=>e.referenceElements.lines,KB=ee([q_,bt,uu],Sl),Y_=(e,t)=>{var n=Jo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},WB=ee(FB,bt,Y_),F_=(e,t)=>{var n=Jo(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},XB=ee([VB,bt],F_),V_=(e,t)=>{var n=Jo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},QB=ee(KB,bt,V_),ZB=ee(WB,QB,XB,(e,t,n)=>qf(e,n,t)),K_=ee([kt],yb),vb=(e,t,n,r,i,s,l)=>{var u=pB(t,e.allowDataOverflow);if(u!=null)return u;var p=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",f=p?qf(n,i,bP(r)):qf(i,bP(r));return hB(t,f,e.allowDataOverflow)},JB=ee([kt,K_,GB,HB,ZB,Ke,bt],vb),e6=[0,1],bb=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:p}=e,f=Xo(t,s);return f&&u==null?wT(0,n.length):p==="category"?YB(r,e,f):i==="expand"?e6:l}},xb=ee([kt,Ke,mb,Dp,cu,bt,JB],bb),W_=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(eu(s));return u in Lc?u:"point"}}},Al=ee([kt,Ke,M_,nb,bt],W_);function t6(e){if(e!=null){if(e in Lc)return Lc[e]();var t="scale".concat(eu(e));if(t in Lc)return Lc[t]()}}function Sb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=t6(t);if(i!=null){var s=i.domain(n).range(r);return U5(s),s}}}var Ab=(e,t,n)=>{var r=yb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ul(e))return CB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ul(e))return PB(e,t.tickCount,t.allowDecimals)}},Eb=ee([xb,du,Al],Ab),Cb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&ul(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},n6=ee([kt,xb,Eb,bt],Cb),r6=ee(Dp,kt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Jo(e.map(u=>u.value))).sort((u,p)=>u-p);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),X_=ee(r6,Ke,A_,Ft,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!rr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=bn(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),a6=(e,t)=>{var n=Fi(e,t);return n==null||typeof n.padding!="string"?0:X_(e,"xAxis",t,n.padding)},i6=(e,t)=>{var n=Vi(e,t);return n==null||typeof n.padding!="string"?0:X_(e,"yAxis",t,n.padding)},o6=ee(Fi,a6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),s6=ee(Vi,i6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),l6=ee([Ft,o6,gp,mp,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),c6=ee([Ft,Ke,s6,gp,mp,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),pu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return l6(e,n,r);case"yAxis":return c6(e,n,r);case"zAxis":return(i=cb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return w_(e);case"radiusAxis":return O_(e,n);default:return}},Q_=ee([kt,pu],Op),El=ee([kt,Al,n6,Q_],Sb);ee([fu,Np,bt],z_);function Z_(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var kp=(e,t)=>t,Mp=(e,t,n)=>n,u6=ee(pp,kp,Mp,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Z_)),d6=ee(hp,kp,Mp,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Z_)),J_=(e,t)=>({width:e.width,height:t.height}),f6=(e,t)=>{var n=typeof t.width=="number"?t.width:au;return{width:n,height:e.height}},eD=ee(Ft,Fi,J_),p6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},h6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},m6=ee(Xa,Ft,u6,kp,Mp,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=J_(t,u);l==null&&(l=p6(t,r,e));var f=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(f)*p.height,l+=(f?-1:1)*p.height}),s}),g6=ee(Wa,Ft,d6,kp,Mp,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=f6(t,u);l==null&&(l=h6(t,r,e));var f=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(f)*p.width,l+=(f?-1:1)*p.width}),s}),y6=(e,t)=>{var n=Ft(e),r=Fi(e,t);if(r!=null){var i=m6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},v6=(e,t)=>{var n=Ft(e),r=Vi(e,t);if(r!=null){var i=g6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},tD=ee(Ft,Vi,(e,t)=>{var n=typeof t.width=="number"?t.width:au;return{width:n,height:e.height}}),xP=(e,t,n)=>{switch(t){case"xAxis":return eD(e,n).width;case"yAxis":return tD(e,n).height;default:return}},nD=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Xo(e,r),p=t.map(f=>f.value);if(l&&u&&s==="category"&&i&&J2(p))return p}},Pb=ee([Ke,Dp,kt,bt],nD),rD=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Xo(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},wb=ee([Ke,Dp,du,bt],rD),SP=ee([Ke,LB,Al,El,Pb,wb,pu,Eb,bt],(e,t,n,r,i,s,l,u,p)=>{if(t==null)return null;var f=Xo(e,p);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:p,categoricalDomain:s,duplicateDomain:i,isCategorical:f,niceTicks:u,range:l,realScaleType:n,scale:r}}),b6=(e,t,n,r,i,s,l,u,p)=>{if(!(t==null||r==null)){var f=Xo(e,p),{type:h,ticks:m,tickCount:g}=t,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=h==="category"&&r.bandwidth?r.bandwidth()/b:0;S=p==="angleAxis"&&s!=null&&s.length>=2?Jt(s[0]-s[1])*2*S:S;var A=m||i;if(A){var C=A.map((P,T)=>{var O=l?l.indexOf(P):P;return{index:T,coordinate:r(O)+S,value:P,offset:S}});return C.filter(P=>!tr(P.coordinate))}return f&&u?u.map((P,T)=>({coordinate:r(P)+S,value:P,index:T,offset:S})):r.ticks?r.ticks(g).map(P=>({coordinate:r(P)+S,value:P,offset:S})):r.domain().map((P,T)=>({coordinate:r(P)+S,value:l?l[P]:P,index:T,offset:S}))}},aD=ee([Ke,du,Al,El,Eb,pu,Pb,wb,bt],b6),x6=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Xo(e,l),{tickCount:p}=t,f=0;return f=l==="angleAxis"&&r?.length>=2?Jt(r[0]-r[1])*2*f:f,u&&s?s.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.ticks?n.ticks(p).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}},dl=ee([Ke,du,El,pu,Pb,wb,bt],x6),fl=ee(kt,El,(e,t)=>{if(!(e==null||t==null))return Hf(Hf({},e),{},{scale:t})}),S6=ee([kt,Al,xb,Q_],Sb);ee((e,t,n)=>cb(e,n),S6,(e,t)=>{if(!(e==null||t==null))return Hf(Hf({},e),{},{scale:t})});var A6=ee([Ke,pp,hp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),iD=e=>e.options.defaultTooltipEventType,oD=e=>e.options.validateTooltipEventTypes;function sD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Ob(e,t){var n=iD(e),r=oD(e);return sD(t,n,r)}function E6(e){return Pe(t=>Ob(t,e))}var lD=(e,t)=>{var n,r=Number(t);if(!(tr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},C6=e=>e.tooltip.settings,Ri={active:!1,index:null,dataKey:void 0,coordinate:void 0},P6={itemInteraction:{click:Ri,hover:Ri},axisInteraction:{click:Ri,hover:Ri},keyboardInteraction:Ri,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},cD=ar({name:"tooltip",initialState:P6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Ga(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:w6,removeTooltipEntrySettings:O6,setTooltipSettingsState:T6,setActiveMouseOverItemIndex:uD,mouseLeaveItem:_6,mouseLeaveChart:dD,setActiveClickItemIndex:D6,setMouseOverAxisIndex:fD,setMouseClickAxisIndex:N6,setSyncInteraction:k0,setKeyboardInteraction:M0}=cD.actions,k6=cD.reducer;function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){M6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M6(e,t,n){return(t=j6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j6(e){var t=R6(e,"string");return typeof t=="symbol"?t:t+""}function R6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function L6(e){return e.index!=null}var pD=(e,t,n,r)=>{if(t==null)return Ri;var i=I6(e,t,n);if(i==null)return Ri;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(L6(i)){if(s)return Zd(Zd({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Zd(Zd({},Ri),{},{coordinate:i.coordinate})},Tb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!rr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},hD=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var p=l[0],f=p==null?void 0:u(p.positions,s);if(f!=null)return f;var h=i?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},mD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},hu=e=>e.options.tooltipPayloadSearcher,Cl=e=>e.tooltip;function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(r){$6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $6(e,t,n){return(t=B6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B6(e){var t=U6(e,"string");return typeof t=="symbol"?t:t+""}function U6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z6(e,t){return e??t}var gD=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:p,dataStartIndex:f,dataEndIndex:h}=n,m=[];return e.reduce((g,b)=>{var S,{dataDefinedOnItem:A,settings:C}=b,P=z6(A,u),T=Array.isArray(P)?oT(P,f,h):P,O=(S=C?.dataKey)!==null&&S!==void 0?S:r,M=C?.nameKey,N;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&l==="axis"?N=_R(T,r,i):N=s(T,t,p,M),Array.isArray(N))N.forEach(k=>{var R=CP(CP({},C),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});g.push(oC({tooltipEntrySettings:R,dataKey:k.dataKey,payload:k.payload,value:yt(k.payload,k.dataKey),name:k.name}))});else{var D;g.push(oC({tooltipEntrySettings:C,dataKey:O,payload:N,value:yt(N,O),name:(D=yt(N,M))!==null&&D!==void 0?D:C?.name}))}return g},m)}},_b=ee([nn,Ke,M_,nb,Kt],W_),G6=ee([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),H6=ee([Kt,xl],ub),mu=ee([G6,nn,H6],fb),q6=ee([mu],e=>e.filter(_p)),Y6=ee([mu],pb),Pl=ee([Y6,Yi],hb),F6=ee([q6,Yi,nn],D_),Db=ee([Pl,nn,mu],gb),V6=ee([nn],yb),K6=ee([mu],e=>e.filter(_p)),W6=ee([F6,K6,cu],$_),X6=ee([W6,Yi,Kt],B_),Q6=ee([mu],R_),Z6=ee([Pl,nn,Q6,Np,Kt],U_),J6=ee([G_,Kt,xl],Sl),eU=ee([J6,Kt],Y_),tU=ee([H_,Kt,xl],Sl),nU=ee([tU,Kt],F_),rU=ee([q_,Kt,xl],Sl),aU=ee([rU,Kt],V_),iU=ee([eU,aU,nU],qf),oU=ee([nn,V6,X6,Z6,iU,Ke,Kt],vb),yD=ee([nn,Ke,Pl,Db,cu,Kt,oU],bb),sU=ee([yD,nn,_b],Ab),lU=ee([nn,yD,sU,Kt],Cb),vD=e=>{var t=Kt(e),n=xl(e),r=!1;return pu(e,t,n,r)},bD=ee([nn,vD],Op),xD=ee([nn,_b,lU,bD],Sb),cU=ee([Ke,Db,nn,Kt],nD),uU=ee([Ke,Db,nn,Kt],rD),dU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:p}=t,f=Xo(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=p==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?Jt(i[0]-i[1])*2*m:m,f&&l?l.map((g,b)=>({coordinate:r(g)+m,value:g,index:b,offset:m})):r.domain().map((g,b)=>({coordinate:r(g)+m,value:s?s[g]:g,index:b,offset:m}))}}},Za=ee([Ke,nn,_b,xD,vD,cU,uU,Kt],dU),Nb=ee([iD,oD,C6],(e,t,n)=>sD(n.shared,e,t)),SD=e=>e.tooltip.settings.trigger,kb=e=>e.tooltip.settings.defaultIndex,jp=ee([Cl,Nb,SD,kb],pD),Yo=ee([jp,Pl],Tb),AD=ee([Za,Yo],lD),ED=ee([jp],e=>{if(e)return e.dataKey}),CD=ee([Cl,Nb,SD,kb],mD),fU=ee([Wa,Xa,Ke,Ft,Za,kb,CD,hu],hD),pU=ee([jp,fU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),hU=ee([jp],e=>e.active),mU=ee([CD,Yo,Yi,__,AD,hu,Nb],gD);ee([mU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function PP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(n),!0).forEach(function(r){gU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gU(e,t,n){return(t=yU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yU(e){var t=vU(e,"string");return typeof t=="symbol"?t:t+""}function vU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bU=()=>Pe(nn),xU=()=>{var e=bU(),t=Pe(Za),n=Pe(xD);return Av(wP(wP({},e),{},{scale:n}),t)},SU=()=>Pe(nb),Mb=(e,t)=>t,PD=(e,t,n)=>n,jb=(e,t,n,r)=>r,AU=ee(Za,e=>op(e,t=>t.coordinate)),Rb=ee([Cl,Mb,PD,jb],pD),wD=ee([Rb,Pl],Tb),EU=(e,t,n)=>{if(t!=null){var r=Cl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},OD=ee([Cl,Mb,PD,jb],mD),Yf=ee([Wa,Xa,Ke,Ft,Za,jb,OD,hu],hD),CU=ee([Rb,Yf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),TD=ee(Za,wD,lD),PU=ee([OD,wD,Yi,__,TD,hu,Mb],gD),wU=ee([Rb],e=>({isActive:e.active,activeIndex:e.index})),OU=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var p=Q5(e.chartX,e.chartY,t,n,u);if(p){var f=J5(p,t),h=$5(f,l,s,r,i),m=Z5(t,s,h,p);return{activeIndex:String(h),activeCoordinate:m}}}};function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j0.apply(null,arguments)}function OP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(n),!0).forEach(function(r){TU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TU(e,t,n){return(t=_U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _U(e){var t=DU(e,"string");return typeof t=="symbol"?t:t+""}function DU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:p,chartName:f}=e,h=t,m=n,g=r;if(!u||!h||f!=="ScatterChart"&&p!=="axis")return null;var b,S;if(f==="ScatterChart")b=h,S=JL;else if(f==="BarChart")b=e4(l,h,i,s),S=AT;else if(l==="radial"){var{cx:A,cy:C,radius:P,startAngle:T,endAngle:O}=ET(h);b={cx:A,cy:C,startAngle:T,endAngle:O,innerRadius:P,outerRadius:P},S=PT}else b={points:M4(l,h,i)},S=yT;var M=typeof u=="object"&&"className"in u?u.className:void 0,N=Jd(Jd(Jd(Jd({stroke:"#ccc",pointerEvents:"none"},i),b),$t(u,!1)),{},{payload:m,payloadIndex:g,className:nt("recharts-tooltip-cursor",M)});return E.isValidElement(u)?E.cloneElement(u,N):E.createElement(S,N)}function kU(e){var t=xU(),n=fT(),r=Ov(),i=SU();return E.createElement(NU,j0({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var _D=E.createContext(null),MU=()=>E.useContext(_D),Sy={exports:{}},TP;function jU(){return TP||(TP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,f,h){this.fn=p,this.context=f,this.once=h||!1}function s(p,f,h,m,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var b=new i(h,m||p,g),S=n?n+f:f;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],b]:p._events[S].push(b):(p._events[S]=b,p._eventsCount++),p}function l(p,f){--p._eventsCount===0?p._events=new r:delete p._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,m;if(this._eventsCount===0)return f;for(m in h=this._events)t.call(h,m)&&f.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=n?n+f:f,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,b=m.length,S=new Array(b);g<b;g++)S[g]=m[g].fn;return S},u.prototype.listenerCount=function(f){var h=n?n+f:f,m=this._events[h];return m?m.fn?1:m.length:0},u.prototype.emit=function(f,h,m,g,b,S){var A=n?n+f:f;if(!this._events[A])return!1;var C=this._events[A],P=arguments.length,T,O;if(C.fn){switch(C.once&&this.removeListener(f,C.fn,void 0,!0),P){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,m),!0;case 4:return C.fn.call(C.context,h,m,g),!0;case 5:return C.fn.call(C.context,h,m,g,b),!0;case 6:return C.fn.call(C.context,h,m,g,b,S),!0}for(O=1,T=new Array(P-1);O<P;O++)T[O-1]=arguments[O];C.fn.apply(C.context,T)}else{var M=C.length,N;for(O=0;O<M;O++)switch(C[O].once&&this.removeListener(f,C[O].fn,void 0,!0),P){case 1:C[O].fn.call(C[O].context);break;case 2:C[O].fn.call(C[O].context,h);break;case 3:C[O].fn.call(C[O].context,h,m);break;case 4:C[O].fn.call(C[O].context,h,m,g);break;default:if(!T)for(N=1,T=new Array(P-1);N<P;N++)T[N-1]=arguments[N];C[O].fn.apply(C[O].context,T)}}return!0},u.prototype.on=function(f,h,m){return s(this,f,h,m,!1)},u.prototype.once=function(f,h,m){return s(this,f,h,m,!0)},u.prototype.removeListener=function(f,h,m,g){var b=n?n+f:f;if(!this._events[b])return this;if(!h)return l(this,b),this;var S=this._events[b];if(S.fn)S.fn===h&&(!g||S.once)&&(!m||S.context===m)&&l(this,b);else{for(var A=0,C=[],P=S.length;A<P;A++)(S[A].fn!==h||g&&!S[A].once||m&&S[A].context!==m)&&C.push(S[A]);C.length?this._events[b]=C.length===1?C[0]:C:l(this,b)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Sy)),Sy.exports}var RU=jU();const IU=Hr(RU);var Jc=new IU,R0="recharts.syncEvent.tooltip",_P="recharts.syncEvent.brush";function DD(e,t){if(t){var n=Number.parseInt(t,10);if(!tr(n))return e?.[n]}}var LU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ND=ar({name:"options",initialState:LU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),$U=ND.reducer,{createEventEmitter:BU}=ND.actions;function UU(e){return e.tooltip.syncInteraction}var zU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},kD=ar({name:"chartData",initialState:zU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:DP,setDataStartEndIndexes:GU,setComputedData:gV}=kD.actions,HU=kD.reducer,qU=["x","y"];function NP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(n),!0).forEach(function(r){YU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YU(e,t,n){return(t=FU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FU(e){var t=VU(e,"string");return typeof t=="symbol"?t:t+""}function VU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KU(e,t){if(e==null)return{};var n,r,i=WU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var MD=()=>{};function XU(){var e=Pe(rb),t=Pe(ab),n=Et(),r=Pe(E_),i=Pe(Za),s=Ov(),l=Cv(),u=Pe(p=>p.rootProps.className);E.useEffect(()=>{if(e==null)return MD;var p=(f,h,m)=>{if(t!==m&&e===f){if(r==="index"){var g;if(l&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate){var b=h.payload.coordinate,{x:S,y:A}=b,C=KU(b,qU),P=_o(_o(_o({},C),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),T=_o(_o({},h),{},{payload:_o(_o({},h.payload),{},{coordinate:P})});n(T)}else n(h);return}if(i!=null){var O;if(typeof r=="function"){var M={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},N=r(i,M);O=i[N]}else r==="value"&&(O=i.find(ce=>String(ce.value)===h.payload.label));var{coordinate:D}=h.payload;if(O==null||h.payload.active===!1||D==null||l==null){n(k0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:k,y:R}=D,U=Math.min(k,l.x+l.width),H=Math.min(R,l.y+l.height),q={x:s==="horizontal"?O.coordinate:U,y:s==="horizontal"?H:O.coordinate},K=k0({active:h.payload.active,coordinate:q,dataKey:h.payload.dataKey,index:String(O.index),label:h.payload.label});n(K)}}};return Jc.on(R0,p),()=>{Jc.off(R0,p)}},[u,n,t,e,r,i,s,l])}function QU(){var e=Pe(rb),t=Pe(ab),n=Et();E.useEffect(()=>{if(e==null)return MD;var r=(i,s,l)=>{t!==l&&e===i&&n(GU(s))};return Jc.on(_P,r),()=>{Jc.off(_P,r)}},[n,t,e])}function ZU(){var e=Et();E.useEffect(()=>{e(BU())},[e]),XU(),QU()}function JU(e,t,n,r,i,s){var l=Pe(g=>EU(g,e,t)),u=Pe(ab),p=Pe(rb),f=Pe(E_),h=Pe(UU),m=h?.active;E.useEffect(()=>{if(!m&&p!=null&&u!=null){var g=k0({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Jc.emit(R0,p,g,u)}},[m,n,l,i,r,u,p,f,s])}function kP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(n),!0).forEach(function(r){ez(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ez(e,t,n){return(t=tz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tz(e){var t=nz(e,"string");return typeof t=="symbol"?t:t+""}function nz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rz(e){return e.dataKey}function az(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(NL,t)}var jP=[],iz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!gl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Ay(e){var t=_r(e,iz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:p,offset:f,payloadUniqBy:h,position:m,reverseDirection:g,useTranslate3d:b,wrapperStyle:S,cursor:A,shared:C,trigger:P,defaultIndex:T,portal:O,axisId:M}=t,N=Et(),D=typeof T=="number"?String(T):T;E.useEffect(()=>{N(T6({shared:C,trigger:P,axisId:M,active:n,defaultIndex:D}))},[N,C,P,M,n,D]);var k=Cv(),R=gT(),U=E6(C),{activeIndex:H,isActive:q}=Pe(G=>wU(G,U,P,D)),K=Pe(G=>PU(G,U,P,D)),ce=Pe(G=>TD(G,U,P,D)),ue=Pe(G=>CU(G,U,P,D)),ne=K,I=MU(),X=n??q,[se,ge]=jO([ne,X]),j=U==="axis"?ce:void 0;JU(U,P,ue,j,H,X);var V=O??I;if(V==null)return null;var Y=ne??jP;X||(Y=jP),u&&Y.length&&(Y=_O(ne.filter(G=>G.value!=null&&(G.hide!==!0||t.includeHidden)),h,rz));var ie=Y.length>0,ve=E.createElement($L,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:p,active:X,coordinate:ue,hasPayload:ie,offset:f,position:m,reverseDirection:g,useTranslate3d:b,viewBox:k,wrapperStyle:S,lastBoundingBox:se,innerRef:ge,hasPortalFromProps:!!O},az(l,MP(MP({},t),{},{payload:Y,label:j,active:X,coordinate:ue,accessibilityLayer:R})));return E.createElement(E.Fragment,null,nO.createPortal(ve,V),X&&E.createElement(kU,{cursor:A,tooltipEventType:U,coordinate:ue,payload:ne,index:H}))}var Ey={},Cy={},Py={},RP;function oz(){return RP||(RP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const p=s!=null&&s.includes("leading"),f=s==null||s.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{f&&h(),A()};let g=null;const b=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},r)},S=()=>{g!==null&&(clearTimeout(g),g=null)},A=()=>{S(),l=void 0,u=null},C=()=>{h()},P=function(...T){if(i?.aborted)return;l=this,u=T;const O=g==null;b(),p&&O&&h()};return P.schedule=b,P.cancel=A,P.flush=C,i?.addEventListener("abort",A,{once:!0}),P}e.debounce=t})(Py)),Py}var IP;function sz(){return IP||(IP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:p}=s,f=Array(2);l&&(f[0]="leading"),u&&(f[1]="trailing");let h,m=null;const g=t.debounce(function(...A){h=r.apply(this,A),m=null},i,{edges:f}),b=function(...A){return p!=null&&(m===null&&(m=Date.now()),Date.now()-m>=p)?(h=r.apply(this,A),m=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,A),h)},S=()=>(g.flush(),h);return b.cancel=g.cancel,b.flush=S,b}e.debounce=n})(Cy)),Cy}var LP;function lz(){return LP||(LP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sz();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Ey)),Ey}var wy,$P;function cz(){return $P||($P=1,wy=lz().throttle),wy}var uz=cz();const dz=Hr(uz);var Uc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function BP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(n),!0).forEach(function(r){fz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fz(e,t,n){return(t=pz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pz(e){var t=hz(e,"string");return typeof t=="symbol"?t:t+""}function hz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ty=E.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:p,children:f,debounce:h=0,id:m,className:g,onResize:b,style:S={}}=e,A=E.useRef(null),C=E.useRef();C.current=b,E.useImperativeHandle(t,()=>A.current);var[P,T]=E.useState({containerWidth:r.width,containerHeight:r.height}),O=E.useCallback((N,D)=>{T(k=>{var R=Math.round(N),U=Math.round(D);return k.containerWidth===R&&k.containerHeight===U?k:{containerWidth:R,containerHeight:U}})},[]);E.useEffect(()=>{var N=U=>{var H,{width:q,height:K}=U[0].contentRect;O(q,K),(H=C.current)===null||H===void 0||H.call(C,q,K)};h>0&&(N=dz(N,h,{trailing:!0,leading:!1}));var D=new ResizeObserver(N),{width:k,height:R}=A.current.getBoundingClientRect();return O(k,R),D.observe(A.current),()=>{D.disconnect()}},[O,h]);var M=E.useMemo(()=>{var{containerWidth:N,containerHeight:D}=P;if(N<0||D<0)return null;Uc(Mo(i)||Mo(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Uc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=Mo(i)?N:i,R=Mo(s)?D:s;return n&&n>0&&(k?R=k/n:R&&(k=R*n),p&&R>p&&(R=p)),Uc(k>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,R,i,s,l,u,n),E.Children.map(f,U=>E.cloneElement(U,{width:k,height:R,style:Oy({width:k,height:R},U.props.style)}))},[n,f,s,p,u,l,P,i]);return E.createElement("div",{id:m?"".concat(m):void 0,className:nt("recharts-responsive-container",g),style:Oy(Oy({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:p}),ref:A},E.createElement("div",{style:{width:0,height:0,overflow:"visible"}},M))}),pl=e=>null;pl.displayName="Cell";function mz(e,t,n){return(t=gz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gz(e){var t=yz(e,"string");return typeof t=="symbol"?t:t+""}function yz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class vz{constructor(t){mz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function UP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(n),!0).forEach(function(r){xz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xz(e,t,n){return(t=Sz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sz(e){var t=Az(e,"string");return typeof t=="symbol"?t:t+""}function Az(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ez={cacheSize:2e3,enableCache:!0},jD=bz({},Ez),zP=new vz(jD.cacheSize),Cz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},GP="recharts_measurement_span";function Pz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var HP=(e,t)=>{try{var n=document.getElementById(GP);n||(n=document.createElement("span"),n.setAttribute("id",GP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Cz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},zc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||gl.isSsr)return{width:0,height:0};if(!jD.enableCache)return HP(t,n);var r=Pz(t,n),i=zP.get(r);if(i)return i;var s=HP(t,n);return zP.set(r,s),s},qP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Oz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tz=Object.keys(RD),Qs="NaN";function _z(e,t){return e*RD[t]}class Bn{static parse(t){var n,[,r,i]=(n=Oz.exec(t))!==null&&n!==void 0?n:[];return new Bn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,tr(t)&&(this.unit=""),n!==""&&!wz.test(n)&&(this.num=NaN,this.unit=""),Tz.includes(n)&&(this.num=_z(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Bn(NaN,""):new Bn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Bn(NaN,""):new Bn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Bn(NaN,""):new Bn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Bn(NaN,""):new Bn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return tr(this.num)}}function ID(e){if(e.includes(Qs))return Qs;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=qP.exec(t))!==null&&n!==void 0?n:[],l=Bn.parse(r??""),u=Bn.parse(s??""),p=i==="*"?l.multiply(u):l.divide(u);if(p.isNaN())return Qs;t=t.replace(qP,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,h,m,g]=(f=YP.exec(t))!==null&&f!==void 0?f:[],b=Bn.parse(h??""),S=Bn.parse(g??""),A=m==="+"?b.add(S):b.subtract(S);if(A.isNaN())return Qs;t=t.replace(YP,A.toString())}return t}var FP=/\(([^()]*)\)/;function Dz(e){for(var t=e,n;(n=FP.exec(t))!=null;){var[,r]=n;t=t.replace(FP,ID(r))}return t}function Nz(e){var t=e.replace(/\s+/g,"");return t=Dz(t),t=ID(t),t}function kz(e){try{return Nz(e)}catch{return Qs}}function _y(e){var t=kz(e.slice(5,-1));return t===Qs?"":t}var Mz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jz=["dx","dy","angle","className","breakAll"];function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I0.apply(null,arguments)}function VP(e,t){if(e==null)return{};var n,r,i=Rz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Rz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LD=/[ \f\n\r\t\v\u2028\u2029]+/,$D=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];en(t)||(n?i=t.toString().split(""):i=t.toString().split(LD));var s=i.map(u=>({word:u,width:zc(u,r).width})),l=n?0:zc(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},Iz=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:p}=e,f=Oe(s),h=l,m=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce((K,ce)=>{var{word:ue,width:ne}=ce,I=K[K.length-1];if(I&&(r==null||i||I.width+ne+n<Number(r)))I.words.push(ue),I.width+=ne+n;else{var X={words:[ue],width:ne};K.push(X)}return K},[])},g=m(t),b=H=>H.reduce((q,K)=>q.width>K.width?q:K);if(!f||i)return g;var S=g.length>s||b(g).width>Number(r);if(!S)return g;for(var A="…",C=H=>{var q=h.slice(0,H),K=$D({breakAll:p,style:u,children:q+A}).wordsWithComputedWidth,ce=m(K),ue=ce.length>s||b(ce).width>Number(r);return[ue,ce]},P=0,T=h.length-1,O=0,M;P<=T&&O<=h.length-1;){var N=Math.floor((P+T)/2),D=N-1,[k,R]=C(D),[U]=C(N);if(!k&&!U&&(P=N+1),k&&U&&(T=N-1),!k&&U){M=R;break}O++}return M||g},KP=e=>{var t=en(e)?[]:e.toString().split(LD);return[{words:t}]},Lz=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!gl.isSsr){var u,p,f=$D({breakAll:s,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:m}=f;u=h,p=m}else return KP(r);return Iz({breakAll:s,children:r,maxLines:l,style:i},u,p,t,n)}return KP(r)},WP="#808080",Rp=E.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:p="end",fill:f=WP}=e,h=VP(e,Mz),m=E.useMemo(()=>Lz({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:b,angle:S,className:A,breakAll:C}=h,P=VP(h,jz);if(!sa(n)||!sa(r)||m.length===0)return null;var T=n+(Oe(g)?g:0),O=r+(Oe(b)?b:0),M;switch(p){case"start":M=_y("calc(".concat(s,")"));break;case"middle":M=_y("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:M=_y("calc(".concat(m.length-1," * -").concat(i,")"));break}var N=[];if(l){var D=m[0].width,{width:k}=h;N.push("scale(".concat(Oe(k)?k/D:1,")"))}return S&&N.push("rotate(".concat(S,", ").concat(T,", ").concat(O,")")),N.length&&(P.transform=N.join(" ")),E.createElement("text",I0({},$t(P,!0),{ref:t,x:T,y:O,className:nt("recharts-text",A),textAnchor:u,fill:f.includes("url")?WP:f}),m.map((R,U)=>{var H=R.words.join(C?"":" ");return E.createElement("tspan",{x:T,dy:U===0?M:i,key:"".concat(H,"-").concat(U)},H)}))});Rp.displayName="Text";var $z=["labelRef"];function Bz(e,t){if(e==null)return{};var n,r,i=Uz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Uz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function XP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(n),!0).forEach(function(r){zz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zz(e,t,n){return(t=Gz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gz(e){var t=Hz(e,"string");return typeof t=="symbol"?t:t+""}function Hz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ba.apply(null,arguments)}var BD=E.createContext(null),qz=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=E.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return E.createElement(BD.Provider,{value:l},s)},UD=()=>{var e=E.useContext(BD),t=Cv();return e||t},Yz=E.createContext(null),Fz=()=>{var e=E.useContext(Yz),t=Pe(T_);return e||t},Vz=e=>{var{value:t,formatter:n}=e,r=en(e.children)?t:e.children;return typeof n=="function"?n(r):r},Ib=e=>e!=null&&typeof e=="function",Kz=(e,t)=>{var n=Jt(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Wz=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:p,innerRadius:f,outerRadius:h,startAngle:m,endAngle:g,clockWise:b}=i,S=(f+h)/2,A=Kz(m,g),C=A>=0?1:-1,P,T;switch(t){case"insideStart":P=m+C*s,T=b;break;case"insideEnd":P=g-C*s,T=!b;break;case"end":P=g+C*s,T=b;break;default:throw new Error("Unsupported position ".concat(t))}T=A<=0?T:!T;var O=Bt(u,p,S,P),M=Bt(u,p,S,P+(T?1:-1)*359),N="M".concat(O.x,",").concat(O.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(T?0:1,`,
    `).concat(M.x,",").concat(M.y),D=en(e.id)?qc("recharts-radial-line-"):e.id;return E.createElement("text",Ba({},r,{dominantBaseline:"central",className:nt("recharts-radial-bar-label",l)}),E.createElement("defs",null,E.createElement("path",{id:D,d:N})),E.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Xz=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:p}=e,f=(u+p)/2;if(n==="outside"){var{x:h,y:m}=Bt(r,i,l+t,f);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+l)/2,{x:b,y:S}=Bt(r,i,g,f);return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},zD=e=>"cx"in e&&Oe(e.cx),Qz=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!zD(n)&&(s=n);var{x:l,y:u,width:p,height:f}=t,h=f>=0?1:-1,m=h*r,g=h>0?"end":"start",b=h>0?"start":"end",S=p>=0?1:-1,A=S*r,C=S>0?"end":"start",P=S>0?"start":"end";if(i==="top"){var T={x:l+p/2,y:u-h*r,textAnchor:"middle",verticalAnchor:g};return Nt(Nt({},T),s?{height:Math.max(u-s.y,0),width:p}:{})}if(i==="bottom"){var O={x:l+p/2,y:u+f+m,textAnchor:"middle",verticalAnchor:b};return Nt(Nt({},O),s?{height:Math.max(s.y+s.height-(u+f),0),width:p}:{})}if(i==="left"){var M={x:l-A,y:u+f/2,textAnchor:C,verticalAnchor:"middle"};return Nt(Nt({},M),s?{width:Math.max(M.x-s.x,0),height:f}:{})}if(i==="right"){var N={x:l+p+A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return Nt(Nt({},N),s?{width:Math.max(s.x+s.width-N.x,0),height:f}:{})}var D=s?{width:p,height:f}:{};return i==="insideLeft"?Nt({x:l+A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},D):i==="insideRight"?Nt({x:l+p-A,y:u+f/2,textAnchor:C,verticalAnchor:"middle"},D):i==="insideTop"?Nt({x:l+p/2,y:u+m,textAnchor:"middle",verticalAnchor:b},D):i==="insideBottom"?Nt({x:l+p/2,y:u+f-m,textAnchor:"middle",verticalAnchor:g},D):i==="insideTopLeft"?Nt({x:l+A,y:u+m,textAnchor:P,verticalAnchor:b},D):i==="insideTopRight"?Nt({x:l+p-A,y:u+m,textAnchor:C,verticalAnchor:b},D):i==="insideBottomLeft"?Nt({x:l+A,y:u+f-m,textAnchor:P,verticalAnchor:g},D):i==="insideBottomRight"?Nt({x:l+p-A,y:u+f-m,textAnchor:C,verticalAnchor:g},D):i&&typeof i=="object"&&(Oe(i.x)||Mo(i.x))&&(Oe(i.y)||Mo(i.y))?Nt({x:l+bn(i.x,p),y:u+bn(i.y,f),textAnchor:"end",verticalAnchor:"end"},D):Nt({x:l+p/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},D)},Zz={offset:5};function ji(e){var t=_r(e,Zz),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:p,labelRef:f}=t,h=Fz(),m=UD(),g=r==="center"?m:h??m,b=n||g;if(!b||en(i)&&en(s)&&!E.isValidElement(l)&&typeof l!="function")return null;var S=Nt(Nt({},t),{},{viewBox:b});if(E.isValidElement(l)){var{labelRef:A}=S,C=Bz(S,$z);return E.cloneElement(l,C)}var P;if(typeof l=="function"){if(P=E.createElement(l,S),E.isValidElement(P))return P}else P=Vz(t);var T=zD(b),O=$t(t,!0);if(T&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Wz(t,r,P,O,b);var M=T?Xz(b,t.offset,t.position):Qz(t,b);return E.createElement(Rp,Ba({ref:f,className:nt("recharts-label",u)},O,M,{breakAll:p}),P)}ji.displayName="Label";var Jz=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?E.createElement(ji,Ba({key:"label-implicit"},r)):sa(e)?E.createElement(ji,Ba({key:"label-implicit",value:e},r)):E.isValidElement(e)?e.type===ji?E.cloneElement(e,Nt({key:"label-implicit"},r)):E.createElement(ji,Ba({key:"label-implicit",content:e},r)):Ib(e)?E.createElement(ji,Ba({key:"label-implicit",content:e},r)):e&&typeof e=="object"?E.createElement(ji,Ba({},e,{key:"label-implicit"},r)):null};function eG(e){var{label:t}=e,n=UD();return Jz(t,n)||null}var Dy={},Ny={},QP;function tG(){return QP||(QP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Ny)),Ny}var ky={},ZP;function nG(){return ZP||(ZP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(ky)),ky}var JP;function rG(){return JP||(JP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tG(),n=nG(),r=hv();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Dy)),Dy}var My,ew;function aG(){return ew||(ew=1,My=rG().last),My}var iG=aG();const oG=Hr(iG);var sG=["valueAccessor"],lG=["dataKey","clockWise","id","textBreakAll"];function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ff.apply(null,arguments)}function tw(e,t){if(e==null)return{};var n,r,i=cG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uG=e=>Array.isArray(e.value)?oG(e.value):e.value,GD=E.createContext(void 0),dG=GD.Provider,HD=E.createContext(void 0),fG=HD.Provider;function pG(){return E.useContext(GD)}function hG(){return E.useContext(HD)}function df(e){var{valueAccessor:t=uG}=e,n=tw(e,sG),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=tw(n,lG),p=pG(),f=hG(),h=p||f;return!h||!h.length?null:E.createElement(Gn,{className:"recharts-label-list"},h.map((m,g)=>{var b,S=en(r)?t(m,g):yt(m&&m.payload,r),A=en(s)?{}:{id:"".concat(s,"-").concat(g)};return E.createElement(ji,Ff({},$t(m,!0),u,A,{fill:(b=n.fill)!==null&&b!==void 0?b:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(g),index:g}))}))}df.displayName="LabelList";function qD(e){var{label:t}=e;return t?t===!0?E.createElement(df,{key:"labelList-implicit"}):E.isValidElement(t)||Ib(t)?E.createElement(df,{key:"labelList-implicit",content:t}):typeof t=="object"?E.createElement(df,Ff({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var YD=e=>e.graphicalItems.polarItems,mG=ee([bt,uu],ub),Lb=ee([YD,kt,mG],fb),gG=ee([Lb],pb),$b=ee([gG,Zv],hb),yG=ee([$b,kt,Lb],gb),vG=ee([$b,kt,Lb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=yt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:yt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),nw=()=>{},bG=ee([kt,K_,nw,vG,nw,Ke,bt],vb),FD=ee([kt,Ke,$b,yG,cu,bt,bG],bb),xG=ee([FD,kt,Al],Ab);ee([kt,FD,xG,bt],Cb);var SG={radiusAxis:{},angleAxis:{}},VD=ar({name:"polarAxis",initialState:SG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:yV,removeRadiusAxis:vV,addAngleAxis:bV,removeAngleAxis:xV}=VD.actions,AG=VD.reducer;function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rw(Object(n),!0).forEach(function(r){EG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EG(e,t,n){return(t=CG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CG(e){var t=PG(e,"string");return typeof t=="symbol"?t:t+""}function PG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wG=(e,t)=>t,Bb=ee([YD,wG],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),OG=[],Ub=(e,t,n)=>n?.length===0?OG:n,KD=ee([Zv,Bb,Ub],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>aw(aw({},t.presentationProps),s.props))),i!=null)return i}}),TG=ee([KD,Bb,Ub],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=yt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:fp(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),_G=ee([KD,Bb,Ub,Ft],(e,t,n,r)=>{if(!(t==null||e==null))return T7({offset:r,pieSettings:t,displayedData:e,cells:n})}),jy={},iw;function DG(){return iw||(iw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(jy)),jy}var Ry,ow;function NG(){return ow||(ow=1,Ry=DG().isPlainObject),Ry}var kG=NG();const MG=Hr(kG);function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(n),!0).forEach(function(r){jG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jG(e,t,n){return(t=RG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RG(e){var t=IG(e,"string");return typeof t=="symbol"?t:t+""}function IG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vf(){return Vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vf.apply(null,arguments)}var cw=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},LG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$G=e=>{var t=_r(e,LG),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:p,animationDuration:f,animationBegin:h,isUpdateAnimationActive:m}=t,g=E.useRef(),[b,S]=E.useState(-1),A=E.useRef(i),C=E.useRef(s),P=E.useRef(l),T=E.useRef(n),O=E.useRef(r),M=bp(e,"trapezoid-");if(E.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var ue=g.current.getTotalLength();ue&&S(ue)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var N=nt("recharts-trapezoid",u);if(!m)return E.createElement("g",null,E.createElement("path",Vf({},$t(t,!0),{className:N,d:cw(n,r,i,s,l)})));var D=A.current,k=C.current,R=P.current,U=T.current,H=O.current,q="0px ".concat(b===-1?1:b,"px"),K="".concat(b,"px 0px"),ce=vT(["strokeDasharray"],f,p);return E.createElement(vp,{animationId:M,key:M,canBegin:b>0,duration:f,easing:p,isActive:m,begin:h},ue=>{var ne=pn(D,i,ue),I=pn(k,s,ue),X=pn(R,l,ue),se=pn(U,n,ue),ge=pn(H,r,ue);g.current&&(A.current=ne,C.current=I,P.current=X,T.current=se,O.current=ge);var j=ue>0?{transition:ce,strokeDasharray:K}:{strokeDasharray:q};return E.createElement("path",Vf({},$t(t,!0),{className:N,d:cw(se,ge,ne,I,X),ref:g,style:lw(lw({},j),t.style)}))})},BG=["option","shapeType","propTransformer","activeClassName","isActive"];function UG(e,t){if(e==null)return{};var n,r,i=zG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uw(Object(n),!0).forEach(function(r){GG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GG(e,t,n){return(t=HG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HG(e){var t=qG(e,"string");return typeof t=="symbol"?t:t+""}function qG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YG(e,t){return Kf(Kf({},t),e)}function FG(e,t){return e==="symbols"}function dw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return E.createElement(AT,n);case"trapezoid":return E.createElement($G,n);case"sector":return E.createElement(PT,n);case"symbols":if(FG(t))return E.createElement(dv,n);break;default:return null}}function VG(e){return E.isValidElement(e)?e.props:e}function WD(e){var{option:t,shapeType:n,propTransformer:r=YG,activeClassName:i="recharts-active-shape",isActive:s}=e,l=UG(e,BG),u;if(E.isValidElement(t))u=E.cloneElement(t,Kf(Kf({},l),VG(t)));else if(typeof t=="function")u=t(l);else if(MG(t)&&typeof t!="boolean"){var p=r(t,l);u=E.createElement(dw,{shapeType:n,elementProps:p})}else{var f=l;u=E.createElement(dw,{shapeType:n,elementProps:f})}return s?E.createElement(Gn,{className:i},u):u}var zb=(e,t)=>{var n=Et();return(r,i)=>s=>{e?.(r,i,s),n(uD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Gb=e=>{var t=Et();return(n,r)=>i=>{e?.(n,r,i),t(_6())}},Hb=(e,t)=>{var n=Et();return(r,i)=>s=>{e?.(r,i,s),n(D6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function XD(e){var{fn:t,args:n}=e,r=Et(),i=Tr();return E.useEffect(()=>{if(!i){var s=t(n);return r(w6(s)),()=>{r(O6(s))}}},[t,n,r,i]),null}var QD=()=>{};function KG(e){var{legendPayload:t}=e,n=Et(),r=Tr();return E.useEffect(()=>r?QD:(n(hT(t)),()=>{n(mT(t))}),[n,r,t]),null}function WG(e){var{legendPayload:t}=e,n=Et(),r=Pe(Ke);return E.useEffect(()=>r!=="centric"&&r!=="radial"?QD:(n(hT(t)),()=>{n(mT(t))}),[n,r,t]),null}var Iy,XG=()=>{var[e]=E.useState(()=>qc("uid-"));return e},QG=(Iy=Xk.useId)!==null&&Iy!==void 0?Iy:XG;function ZG(e,t){var n=QG();return t||(e?"".concat(e,"-").concat(n):n)}var JG=E.createContext(void 0),ZD=e=>{var{id:t,type:n,children:r}=e,i=ZG("recharts-".concat(n),t);return E.createElement(JG.Provider,{value:i},r(i))},e7={cartesianItems:[],polarItems:[]},JD=ar({name:"graphicalItems",initialState:e7,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Ga(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Ga(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Ga(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:t7,replaceCartesianGraphicalItem:n7,removeCartesianGraphicalItem:r7,addPolarGraphicalItem:a7,removePolarGraphicalItem:i7}=JD.actions,o7=JD.reducer;function s7(e){var t=Et(),n=E.useRef(null);return E.useEffect(()=>{n.current===null?t(t7(e)):n.current!==e&&t(n7({prev:n.current,next:e})),n.current=e},[t,e]),E.useEffect(()=>()=>{n.current&&(t(r7(n.current)),n.current=null)},[t]),null}function l7(e){var t=Et();return E.useEffect(()=>(t(a7(e)),()=>{t(i7(e))}),[t,e]),null}var c7=["onMouseEnter","onClick","onMouseLeave"],u7=["id"],d7=["id"];function qb(e,t){if(e==null)return{};var n,r,i=f7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(n),!0).forEach(function(r){p7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p7(e,t,n){return(t=h7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h7(e){var t=m7(e,"string");return typeof t=="symbol"?t:t+""}function m7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ui(){return Ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ui.apply(null,arguments)}function g7(e){var t=E.useMemo(()=>ov(e.children,pl),[e.children]),n=Pe(r=>TG(r,e.id,t));return n==null?null:E.createElement(WG,{legendPayload:n})}function y7(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:p,tooltipType:f}=e;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:fp(u,t),hide:p,type:f,color:l,unit:""}}}var v7=(e,t)=>e>t?"start":e<t?"end":"middle",b7=(e,t,n)=>bn(typeof t=="function"?t(e):t,n,n*.8),x7=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=iT(s,l),p=i+bn(e.cx,s,s/2),f=r+bn(e.cy,l,l/2),h=bn(e.innerRadius,u,0),m=b7(n,e.outerRadius,u),g=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:p,cy:f,innerRadius:h,outerRadius:m,maxRadius:g}},S7=(e,t)=>{var n=Jt(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function A7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var E7=(e,t)=>{if(E.isValidElement(e))return E.cloneElement(e,t);if(typeof e=="function")return e(t);var n=nt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return E.createElement(yT,Ui({},t,{type:"linear",className:n}))},C7=(e,t,n)=>{if(E.isValidElement(e))return E.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),E.isValidElement(r)))return r;var i=nt("recharts-pie-label-text",A7(e));return E.createElement(Rp,Ui({},t,{alignmentBaseline:"middle",className:i}),r)};function P7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=Wo(n),p=$t(i,!1),f=$t(s,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((g,b)=>{var S=(g.startAngle+g.endAngle)/2,A=Bt(g.cx,g.cy,g.outerRadius+h,S),C=gt(gt(gt(gt({},u),g),{},{stroke:"none"},p),{},{index:b,textAnchor:v7(A.x,g.cx)},A),P=gt(gt(gt(gt({},u),g),{},{fill:"none",stroke:g.fill},f),{},{index:b,points:[Bt(g.cx,g.cy,g.outerRadius,S),A],key:"line"});return E.createElement(Gn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(b)},s&&E7(s,P),C7(i,C,yt(g,l)))});return E.createElement(Gn,{className:"recharts-pie-labels"},m)}function w7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(qD,{label:n.label}):E.createElement(P7,{sectors:t,props:n,showLabels:r})}function O7(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=Pe(Yo),{onMouseEnter:l,onClick:u,onMouseLeave:p}=i,f=qb(i,c7),h=zb(l,i.dataKey),m=Gb(p),g=Hb(u,i.dataKey);return t==null||t.length===0?null:E.createElement(E.Fragment,null,t.map((b,S)=>{if(b?.startAngle===0&&b?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===s,C=s?r:null,P=A?n:C,T=gt(gt({},b),{},{stroke:b.stroke,tabIndex:-1,[uT]:S,[dT]:i.dataKey});return E.createElement(Gn,Ui({tabIndex:-1,className:"recharts-pie-sector"},tu(f,b,S),{onMouseEnter:h(b,S),onMouseLeave:m(b,S),onClick:g(b,S),key:"sector-".concat(b?.startAngle,"-").concat(b?.endAngle,"-").concat(b.midAngle,"-").concat(S)}),E.createElement(WD,Ui({option:P,isActive:A,shapeType:"sector"},T)))}))}function T7(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:p,dataKey:f,nameKey:h,tooltipType:m}=n,g=Math.abs(n.minAngle),b=S7(u,p),S=Math.abs(b),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(D=>yt(D,f,0)!==0).length,P=(S>=360?C:C-1)*A,T=S-C*g-P,O=r.reduce((D,k)=>{var R=yt(k,f,0);return D+(Oe(R)?R:0)},0),M;if(O>0){var N;M=r.map((D,k)=>{var R=yt(D,f,0),U=yt(D,h,k),H=x7(n,s,D),q=(Oe(R)?R:0)/O,K,ce=gt(gt({},D),i&&i[k]&&i[k].props);k?K=N.endAngle+Jt(b)*A*(R!==0?1:0):K=u;var ue=K+Jt(b)*((R!==0?g:0)+q*T),ne=(K+ue)/2,I=(H.innerRadius+H.outerRadius)/2,X=[{name:U,value:R,payload:ce,dataKey:f,type:m}],se=Bt(H.cx,H.cy,I,ne);return N=gt(gt(gt(gt({},n.presentationProps),{},{percent:q,cornerRadius:l,name:U,tooltipPayload:X,midAngle:ne,middleRadius:I,tooltipPosition:se},ce),H),{},{value:yt(D,f),startAngle:K,endAngle:ue,payload:ce,paddingAngle:Jt(b)*A}),N})}return M}function _7(e){var{showLabels:t,sectors:n,children:r}=e,i=E.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return E.createElement(fG,{value:t?i:void 0},r)}function D7(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:p,inactiveShape:f,onAnimationStart:h,onAnimationEnd:m}=t,g=bp(t,"recharts-pie-"),b=n.current,[S,A]=E.useState(!1),C=E.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),P=E.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return E.createElement(_7,{showLabels:!S,sectors:r},E.createElement(vp,{animationId:g,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:P,onAnimationEnd:C,key:g},T=>{var O=[],M=r&&r[0],N=M?.startAngle;return r?.forEach((D,k)=>{var R=b&&b[k],U=k>0?zo(D,"paddingAngle",0):0;if(R){var H=pn(R.endAngle-R.startAngle,D.endAngle-D.startAngle,T),q=gt(gt({},D),{},{startAngle:N+U,endAngle:N+H+U});O.push(q),N=q.endAngle}else{var{endAngle:K,startAngle:ce}=D,ue=pn(0,K-ce,T),ne=gt(gt({},D),{},{startAngle:N+U,endAngle:N+ue+U});O.push(ne),N=ne.endAngle}}),n.current=O,E.createElement(Gn,null,E.createElement(O7,{sectors:O,activeShape:p,inactiveShape:f,allOtherPieProps:t}))}),E.createElement(w7,{showLabels:!S,sectors:r,props:t}),t.children)}var N7={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!gl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function k7(e){var{id:t}=e,n=qb(e,u7),{hide:r,className:i,rootTabIndex:s}=e,l=E.useMemo(()=>ov(e.children,pl),[e.children]),u=Pe(h=>_G(h,t,l)),p=E.useRef(null),f=nt("recharts-pie",i);return r||u==null?(p.current=null,E.createElement(Gn,{tabIndex:s,className:f})):E.createElement(E.Fragment,null,E.createElement(XD,{fn:y7,args:gt(gt({},e),{},{sectors:u})}),E.createElement(Gn,{tabIndex:s,className:f},E.createElement(D7,{props:gt(gt({},n),{},{sectors:u}),previousSectorsRef:p})))}function L0(e){var t=_r(e,N7),{id:n}=t,r=qb(t,d7),i=Wo(r);return E.createElement(ZD,{id:n,type:"pie"},s=>E.createElement(E.Fragment,null,E.createElement(l7,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),E.createElement(g7,Ui({},r,{id:s})),E.createElement(k7,Ui({},r,{id:s}))))}L0.displayName="Pie";function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){M7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M7(e,t,n){return(t=j7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j7(e){var t=R7(e,"string");return typeof t=="symbol"?t:t+""}function R7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I7={xAxis:{},yAxis:{},zAxis:{}},eN=ar({name:"cartesianAxis",initialState:I7,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=hw(hw({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:L7,removeXAxis:$7,addYAxis:B7,removeYAxis:U7,addZAxis:SV,removeZAxis:AV,updateYAxisWidth:z7}=eN.actions,G7=eN.reducer,H7=ee([Ft],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),q7=ee([H7,Wa,Xa],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),tN=()=>Pe(q7),Y7="Invariant failed";function F7(e,t){throw new Error(Y7)}var V7=["x","y"];function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$0.apply(null,arguments)}function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){K7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K7(e,t,n){return(t=W7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W7(e){var t=X7(e,"string");return typeof t=="symbol"?t:t+""}function X7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q7(e,t){if(e==null)return{};var n,r,i=Z7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function J7(e,t){var{x:n,y:r}=e,i=Q7(e,V7),s="".concat(n),l=parseInt(s,10),u="".concat(r),p=parseInt(u,10),f="".concat(t.height||i.height),h=parseInt(f,10),m="".concat(t.width||i.width),g=parseInt(m,10);return jc(jc(jc(jc(jc({},t),i),l?{x:l}:{}),p?{y:p}:{}),{},{height:h,width:g,name:t.name,radius:t.radius})}function Yb(e){return E.createElement(WD,$0({shapeType:"rectangle",propTransformer:J7,activeClassName:"recharts-active-bar"},e))}var e9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Oe(t))return t;var s=Oe(r)||en(r);return s?t(r,i):(s||F7(),n)}},t9={},nN=ar({name:"errorBars",initialState:t9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:EV,replaceErrorBar:CV,removeErrorBar:PV}=nN.actions,n9=nN.reducer,r9=["children"];function a9(e,t){if(e==null)return{};var n,r,i=i9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var o9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},s9=E.createContext(o9);function l9(e){var{children:t}=e,n=a9(e,r9);return E.createElement(s9.Provider,{value:n},t)}function rN(e,t){var n,r,i=Pe(f=>Fi(f,e)),s=Pe(f=>Vi(f,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Xn.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Qn.allowDataOverflow,p=l||u;return{needClip:p,needClipX:l,needClipY:u}}function c9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=tN(),{needClipX:s,needClipY:l,needClip:u}=rN(t,n);if(!u)return null;var{x:p,y:f,width:h,height:m}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:s?p:p-h/2,y:l?f:f-m/2,width:s?h:h*2,height:l?m:m*2}))}var u9=["onMouseEnter","onMouseLeave","onClick"],d9=["value","background","tooltipPosition"],f9=["id"],p9=["onMouseEnter","onClick","onMouseLeave"];function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi.apply(null,arguments)}function gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gw(Object(n),!0).forEach(function(r){h9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h9(e,t,n){return(t=m9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m9(e){var t=g9(e,"string");return typeof t=="symbol"?t:t+""}function g9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wf(e,t){if(e==null)return{};var n,r,i=y9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var v9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:fp(n,t),payload:e}]};function b9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:fp(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function x9(e){var t=Pe(Yo),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:p}=s,f=Wf(s,u9),h=zb(l,r),m=Gb(u),g=Hb(p,r);if(!i||n==null)return null;var b=$t(i,!1);return E.createElement(E.Fragment,null,n.map((S,A)=>{var{value:C,background:P,tooltipPosition:T}=S,O=Wf(S,d9);if(!P)return null;var M=h(S,A),N=m(S,A),D=g(S,A),k=Tn(Tn(Tn(Tn(Tn({option:i,isActive:String(A)===t},O),{},{fill:"#eee"},P),b),tu(f,S,A)),{},{onMouseEnter:M,onMouseLeave:N,onClick:D,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return E.createElement(Yb,zi({key:"background-bar-".concat(A)},k))}))}function S9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Tn(Tn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return E.createElement(dG,{value:t?i:void 0},n)}function A9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=Pe(Yo),p=Pe(ED),f=n&&String(s)===u&&(p==null||l===p),h=f?n:t;return E.createElement(Yb,zi({},r,i,{isActive:f,option:h,index:s,dataKey:l}))}function E9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return E.createElement(Yb,zi({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function C9(e){var{data:t,props:n}=e,r=Wo(n),{id:i}=r,s=Wf(r,f9),{shape:l,dataKey:u,activeBar:p}=n,{onMouseEnter:f,onClick:h,onMouseLeave:m}=n,g=Wf(n,p9),b=zb(f,u),S=Gb(m),A=Hb(h,u);return t?E.createElement(E.Fragment,null,t.map((C,P)=>E.createElement(Gn,zi({className:"recharts-bar-rectangle"},tu(g,C,P),{onMouseEnter:b(C,P),onMouseLeave:S(C,P),onClick:A(C,P),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(P)}),p?E.createElement(A9,{shape:l,activeBar:p,baseProps:s,entry:C,index:P,dataKey:u}):E.createElement(E9,{shape:l,baseProps:s,entry:C,index:P,dataKey:u})))):null}function P9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:p,onAnimationEnd:f,onAnimationStart:h}=t,m=n.current,g=bp(t,"recharts-bar-"),[b,S]=E.useState(!1),A=!b,C=E.useCallback(()=>{typeof f=="function"&&f(),S(!1)},[f]),P=E.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return E.createElement(S9,{showLabels:A,rects:r},E.createElement(vp,{animationId:g,begin:l,duration:u,isActive:s,easing:p,onAnimationEnd:C,onAnimationStart:P,key:g},T=>{var O=T===1?r:r?.map((M,N)=>{var D=m&&m[N];if(D)return Tn(Tn({},M),{},{x:pn(D.x,M.x,T),y:pn(D.y,M.y,T),width:pn(D.width,M.width,T),height:pn(D.height,M.height,T)});if(i==="horizontal"){var k=pn(0,M.height,T);return Tn(Tn({},M),{},{y:M.y+M.height-k,height:k})}var R=pn(0,M.width,T);return Tn(Tn({},M),{},{width:R})});return T>0&&(n.current=O??null),O==null?null:E.createElement(Gn,null,E.createElement(C9,{props:t,data:O}))}),E.createElement(qD,{label:t.label}),t.children)}function w9(e){var t=E.useRef(null);return E.createElement(P9,{previousRectanglesRef:t,props:e})}var aN=0,O9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:yt(e,t)}};class T9 extends E.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:p,id:f}=this.props;if(t||n==null)return null;var h=nt("recharts-bar",i),m=f;return E.createElement(Gn,{className:h,id:f},u&&E.createElement("defs",null,E.createElement(c9,{clipPathId:m,xAxisId:s,yAxisId:l})),E.createElement(Gn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},E.createElement(x9,{data:n,dataKey:r,background:p,allOtherBarProps:this.props}),E.createElement(w9,this.props)))}}var _9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!gl.isSsr,legendType:"rect",minPointSize:aN,xAxisId:0,yAxisId:0};function D9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:f,isAnimationActive:h}=e,{needClip:m}=rN(t,n),g=Ov(),b=Tr(),S=ov(e.children,pl),A=Pe(T=>rH(T,t,n,b,e.id,S));if(g!=="vertical"&&g!=="horizontal")return null;var C,P=A?.[0];return P==null||P.height==null||P.width==null?C=0:C=g==="vertical"?P.height/2:P.width/2,E.createElement(l9,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:O9,errorBarOffset:C},E.createElement(T9,zi({},e,{layout:g,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:f,isAnimationActive:h})))}function N9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:p,yAxisTicks:f,stackedData:h,displayedData:m,offset:g,cells:b,parentViewBox:S}=e,A=t==="horizontal"?u:l,C=h?A.scale.domain():null,P=V5({numericAxis:A});return m.map((T,O)=>{var M,N,D,k,R,U;h?M=z5(h[O],C):(M=yt(T,n),Array.isArray(M)||(M=[P,M]));var H=e9(r,aN)(M[1],O);if(t==="horizontal"){var q,[K,ce]=[u.scale(M[0]),u.scale(M[1])];N=rC({axis:l,ticks:p,bandSize:s,offset:i.offset,entry:T,index:O}),D=(q=ce??K)!==null&&q!==void 0?q:void 0,k=i.size;var ue=K-ce;if(R=tr(ue)?0:ue,U={x:N,y:g.top,width:k,height:g.height},Math.abs(H)>0&&Math.abs(R)<Math.abs(H)){var ne=Jt(R||H)*(Math.abs(H)-Math.abs(R));D-=ne,R+=ne}}else{var[I,X]=[l.scale(M[0]),l.scale(M[1])];if(N=I,D=rC({axis:u,ticks:f,bandSize:s,offset:i.offset,entry:T,index:O}),k=X-I,R=i.size,U={x:g.left,y:D,width:g.width,height:R},Math.abs(H)>0&&Math.abs(k)<Math.abs(H)){var se=Jt(k||H)*(Math.abs(H)-Math.abs(k));k+=se}}if(N==null||D==null||k==null||R==null)return null;var ge=Tn(Tn({},T),{},{x:N,y:D,width:k,height:R,value:h?M:M[1],payload:T,background:U,tooltipPosition:{x:N+k/2,y:D+R/2},parentViewBox:S},b&&b[O]&&b[O].props);return ge}).filter(Boolean)}function iN(e){var t=_r(e,_9),n=Tr();return E.createElement(ZD,{id:t.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(KG,{legendPayload:v9(t)}),E.createElement(XD,{fn:b9,args:t}),E.createElement(s7,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:F5(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),E.createElement(D9,zi({},t,{id:r}))))}iN.displayName="Bar";function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(r){k9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k9(e,t,n){return(t=M9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M9(e){var t=j9(e,"string");return typeof t=="symbol"?t:t+""}function j9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R9=(e,t)=>t,I9=(e,t,n)=>n,L9=(e,t,n,r)=>r,$9=(e,t,n,r,i)=>i,gu=ee([db,$9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),B9=ee([gu],e=>e?.maxBarSize),U9=(e,t,n,r,i,s)=>s,vw=(e,t,n)=>{var r=n??e;if(!en(r))return bn(r,t,0)},z9=ee([Ke,db,R9,I9,L9],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),G9=(e,t,n,r)=>{var i=Ke(e);return i==="horizontal"?N0(e,"yAxis",n,r):N0(e,"xAxis",t,r)},H9=(e,t,n)=>{var r=Ke(e);return r==="horizontal"?xP(e,"xAxis",t):xP(e,"yAxis",n)},q9=(e,t,n)=>{var r={},i=e.filter(_p),s=e.filter(f=>f.stackId==null),l=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),u=Object.entries(l).map(f=>{var[h,m]=f,g=m.map(S=>S.dataKey),b=vw(t,n,m[0].barSize);return{stackId:h,dataKeys:g,barSize:b}}),p=s.map(f=>{var h=[f.dataKey].filter(g=>g!=null),m=vw(t,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:m}});return[...u,...p]},Y9=ee([z9,OB,H9],q9),F9=(e,t,n,r,i)=>{var s,l,u=gu(e,t,n,r,i);if(u!=null){var p=Ke(e),f=S_(e),{maxBarSize:h}=u,m=en(h)?f:h,g,b;return p==="horizontal"?(g=fl(e,"xAxis",t,r),b=dl(e,"xAxis",t,r)):(g=fl(e,"yAxis",n,r),b=dl(e,"yAxis",n,r)),(s=(l=Av(g,b,!0))!==null&&l!==void 0?l:m)!==null&&s!==void 0?s:0}},oN=(e,t,n,r)=>{var i=Ke(e),s,l;return i==="horizontal"?(s=fl(e,"xAxis",t,r),l=dl(e,"xAxis",t,r)):(s=fl(e,"yAxis",n,r),l=dl(e,"yAxis",n,r)),Av(s,l)};function V9(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=bn(e,n,0,!0),u,p=[];if(rr(r[0].barSize)){var f=!1,h=n/s,m=r.reduce((P,T)=>P+(T.barSize||0),0);m+=(s-1)*l,m>=n&&(m-=(s-1)*l,l=0),m>=n&&h>0&&(f=!0,h*=.9,m=s*h);var g=(n-m)/2>>0,b={offset:g-l,size:0};u=r.reduce((P,T)=>{var O,M={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b.offset+b.size+l,size:f?h:(O=T.barSize)!==null&&O!==void 0?O:0}},N=[...P,M];return b=N[N.length-1].position,N},p)}else{var S=bn(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var A=(n-2*S-(s-1)*l)/s;A>1&&(A>>=0);var C=rr(i)?Math.min(A,i):A;u=r.reduce((P,T,O)=>[...P,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:S+(A+l)*O+(A-C)/2,size:C}}],p)}return u}}var K9=(e,t,n,r,i,s,l)=>{var u=en(l)?t:l,p=V9(n,r,i!==s?i:s,e,u);return i!==s&&p!=null&&(p=p.map(f=>ef(ef({},f),{},{position:ef(ef({},f.position),{},{offset:f.position.offset-i/2})}))),p},W9=ee([Y9,S_,wB,A_,F9,oN,B9],K9),X9=(e,t,n,r)=>fl(e,"xAxis",t,r),Q9=(e,t,n,r)=>fl(e,"yAxis",n,r),Z9=(e,t,n,r)=>dl(e,"xAxis",t,r),J9=(e,t,n,r)=>dl(e,"yAxis",n,r),eH=ee([W9,gu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),tH=(e,t)=>{var n=lb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},nH=ee([G9,gu],tH),rH=ee([Ft,Ev,X9,Q9,Z9,J9,eH,Ke,Jv,oN,nH,gu,U9],(e,t,n,r,i,s,l,u,p,f,h,m,g)=>{var{chartData:b,dataStartIndex:S,dataEndIndex:A}=p;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||f==null)){var{data:C}=m,P;if(C!=null&&C.length>0?P=C:P=b?.slice(S,A+1),P!=null)return N9({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:P,offset:e,cells:g})}}),sN=e=>{var{chartData:t}=e,n=Et(),r=Tr();return E.useEffect(()=>r?()=>{}:(n(DP(t)),()=>{n(DP(void 0))}),[t,n,r]),null},bw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},lN=ar({name:"brush",initialState:bw,reducers:{setBrushSettings(e,t){return t.payload==null?bw:t.payload}}}),{setBrushSettings:wV}=lN.actions,aH=lN.reducer;function iH(e,t,n){return(t=oH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oH(e){var t=sH(e,"string");return typeof t=="symbol"?t:t+""}function sH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Fb{static create(t){return new Fb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}iH(Fb,"EPS",1e-4);function lH(e){return(e%180+180)%180}var cH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=lH(i),l=s*Math.PI/180,u=Math.atan(r/n),p=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(p)},uH={dots:[],areas:[],lines:[]},cN=ar({name:"referenceElements",initialState:uH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ga(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ga(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ga(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:OV,removeDot:TV,addArea:_V,removeArea:DV,addLine:NV,removeLine:kV}=cN.actions,dH=cN.reducer,fH=E.createContext(void 0),pH=e=>{var{children:t}=e,[n]=E.useState("".concat(qc("recharts"),"-clip")),r=tN();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return E.createElement(fH.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function Ly(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function uN(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function hH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return cH(r,n)}function mH(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Xf(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function gH(e,t){return uN(e,t+1)}function yH(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,p=0,f=1,h=l,m=function(){var S=r?.[p];if(S===void 0)return{v:uN(r,f)};var A=p,C,P=()=>(C===void 0&&(C=n(S,A)),C),T=S.coordinate,O=p===0||Xf(e,T,P,h,u);O||(p=0,h=l,f+=1),O&&(h=T+e*(P()/2+i),p+=f)},g;f<=s.length;)if(g=m(),g)return g.v;return[]}function xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(n),!0).forEach(function(r){vH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vH(e,t,n){return(t=bH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bH(e){var t=xH(e,"string");return typeof t=="symbol"?t:t+""}function xH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SH(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:p}=t,f=function(g){var b=s[g],S,A=()=>(S===void 0&&(S=n(b,g)),S);if(g===l-1){var C=e*(b.coordinate+e*A()/2-p);s[g]=b=gn(gn({},b),{},{tickCoord:C>0?b.coordinate-C*e:b.coordinate})}else s[g]=b=gn(gn({},b),{},{tickCoord:b.coordinate});var P=Xf(e,b.tickCoord,A,u,p);P&&(p=b.tickCoord-e*(A()/2+i),s[g]=gn(gn({},b),{},{isShow:!0}))},h=l-1;h>=0;h--)f(h);return s}function AH(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:p,end:f}=t;if(s){var h=r[u-1],m=n(h,u-1),g=e*(h.coordinate+e*m/2-f);l[u-1]=h=gn(gn({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate});var b=Xf(e,h.tickCoord,()=>m,p,f);b&&(f=h.tickCoord-e*(m/2+i),l[u-1]=gn(gn({},h),{},{isShow:!0}))}for(var S=s?u-1:u,A=function(T){var O=l[T],M,N=()=>(M===void 0&&(M=n(O,T)),M);if(T===0){var D=e*(O.coordinate-e*N()/2-p);l[T]=O=gn(gn({},O),{},{tickCoord:D<0?O.coordinate-D*e:O.coordinate})}else l[T]=O=gn(gn({},O),{},{tickCoord:O.coordinate});var k=Xf(e,O.tickCoord,N,p,f);k&&(p=O.tickCoord+e*(N()/2+i),l[T]=gn(gn({},O),{},{isShow:!0}))},C=0;C<S;C++)A(C);return l}function Vb(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:p,tickFormatter:f,unit:h,angle:m}=e;if(!i||!i.length||!r)return[];if(Oe(p)||gl.isSsr){var g;return(g=gH(i,Oe(p)?p:0))!==null&&g!==void 0?g:[]}var b=[],S=u==="top"||u==="bottom"?"width":"height",A=h&&S==="width"?zc(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(O,M)=>{var N=typeof f=="function"?f(O.value,M):O.value;return S==="width"?hH(zc(N,{fontSize:t,letterSpacing:n}),A,m):zc(N,{fontSize:t,letterSpacing:n})[S]},P=i.length>=2?Jt(i[1].coordinate-i[0].coordinate):1,T=mH(s,P,S);return p==="equidistantPreserveStart"?yH(P,T,C,i,l):(p==="preserveStart"||p==="preserveStartEnd"?b=AH(P,T,C,i,l,p==="preserveStartEnd"):b=SH(P,T,C,i,l),b.filter(O=>O.isShow))}var EH=["viewBox"],CH=["viewBox"];function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(null,arguments)}function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(r){Kb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Aw(e,t){if(e==null)return{};var n,r,i=PH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function PH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Kb(e,t,n){return(t=wH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wH(e){var t=OH(e,"string");return typeof t=="symbol"?t:t+""}function OH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ki extends E.Component{constructor(t){super(t),this.tickRefs=E.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=Aw(t,EH),s=this.props,{viewBox:l}=s,u=Aw(s,CH);return!Ly(r,l)||!Ly(i,u)||!Ly(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:p,tickMargin:f}=this.props,h,m,g,b,S,A,C=p?-1:1,P=t.tickSize||u,T=Oe(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":h=m=t.coordinate,b=r+ +!p*s,g=b-C*P,A=g-C*f,S=T;break;case"left":g=b=t.coordinate,m=n+ +!p*i,h=m-C*P,S=h-C*f,A=T;break;case"right":g=b=t.coordinate,m=n+ +p*i,h=m+C*P,S=h+C*f,A=T;break;default:h=m=t.coordinate,b=r+ +p*s,g=b+C*P,A=g+C*f,S=T;break}return{line:{x1:h,y1:g,x2:m,y2:b},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,p=qt(qt(qt({},$t(this.props,!1)),$t(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!l||s==="bottom"&&l);p=qt(qt({},p),{},{x1:t,y1:n+f*i,x2:t+r,y2:n+f*i})}else{var h=+(s==="left"&&!l||s==="right"&&l);p=qt(qt({},p),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return E.createElement("line",Zs({},p,{className:nt("recharts-cartesian-axis-line",zo(u,"className"))}))}static renderTickItem(t,n,r){var i,s=nt(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(t))i=E.cloneElement(t,qt(qt({},n),{},{className:s}));else if(typeof t=="function")i=t(qt(qt({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=nt(l,t.className)),i=E.createElement(Rp,Zs({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:p,padding:f,tickTextProps:h}=this.props,m=Vb(qt(qt({},this.props),{},{ticks:r}),t,n),g=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),S=Wo(this.props),A=$t(l,!1),C=qt(qt({},S),{},{fill:"none"},$t(i,!1)),P=m.map((T,O)=>{var{line:M,tick:N}=this.getTickLineCoord(T),D=qt(qt(qt(qt({textAnchor:g,verticalAnchor:b},S),{},{stroke:"none",fill:s},A),N),{},{index:O,payload:T,visibleTicksCount:m.length,tickFormatter:u,padding:f},h);return E.createElement(Gn,Zs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},tu(this.props,T,O)),i&&E.createElement("line",Zs({},C,M,{className:nt("recharts-cartesian-axis-tick-line",zo(i,"className"))})),l&&Ki.renderTickItem(l,D,"".concat(typeof u=="function"?u(T.value,O):T.value).concat(p||"")))});return P.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:E.createElement(Gn,{className:nt("recharts-cartesian-axis",i),ref:u=>{if(u){var p=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(p);var f=p[0];if(f){var h=window.getComputedStyle(f).fontSize,m=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),E.createElement(qz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},E.createElement(eG,{label:this.props.label}),this.props.children))}}Kb(Ki,"displayName","CartesianAxis");Kb(Ki,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var TH=["x1","y1","x2","y2","key"],_H=["offset"],DH=["xAxisId","yAxisId"],NH=["xAxisId","yAxisId"];function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(n),!0).forEach(function(r){kH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kH(e,t,n){return(t=MH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MH(e){var t=jH(e,"string");return typeof t=="symbol"?t:t+""}function jH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Io(){return Io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Io.apply(null,arguments)}function Qf(e,t){if(e==null)return{};var n,r,i=RH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function RH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var IH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return E.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function dN(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,p=Qf(t,TH),f=Wo(p),{offset:h}=f,m=Qf(f,_H);n=E.createElement("line",Io({},m,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function LH(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Qf(e,DH),p=i.map((f,h)=>{var m=vn(vn({},u),{},{x1:t,y1:f,x2:t+n,y2:f,key:"line-".concat(h),index:h});return dN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function $H(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Qf(e,NH),p=i.map((f,h)=>{var m=vn(vn({},u),{},{x1:f,y1:t,x2:f,y2:t+n,key:"line-".concat(h),index:h});return dN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function BH(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:p=!0}=e;if(!p||!t||!t.length)return null;var f=u.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var h=f.map((m,g)=>{var b=!f[g+1],S=b?i+l-m:f[g+1]-m;if(S<=0)return null;var A=g%t.length;return E.createElement("rect",{key:"react-".concat(g),y:m,x:r,height:S,width:s,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function UH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:p}=e;if(!t||!n||!n.length)return null;var f=p.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var h=f.map((m,g)=>{var b=!f[g+1],S=b?i+l-m:f[g+1]-m;if(S<=0)return null;var A=g%n.length;return E.createElement("rect",{key:"react-".concat(g),x:m,y:s,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var zH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return sT(Vb(vn(vn(vn({},Ki.defaultProps),n),{},{ticks:lT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},GH=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return sT(Vb(vn(vn(vn({},Ki.defaultProps),n),{},{ticks:lT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},HH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function fN(e){var t=Pv(),n=wv(),r=fT(),i=vn(vn({},_r(e,HH)),{},{x:Oe(e.x)?e.x:r.left,y:Oe(e.y)?e.y:r.top,width:Oe(e.width)?e.width:r.width,height:Oe(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:p,width:f,height:h,syncWithTicks:m,horizontalValues:g,verticalValues:b}=i,S=Tr(),A=Pe(U=>SP(U,"xAxis",s,S)),C=Pe(U=>SP(U,"yAxis",l,S));if(!Oe(f)||f<=0||!Oe(h)||h<=0||!Oe(u)||u!==+u||!Oe(p)||p!==+p)return null;var P=i.verticalCoordinatesGenerator||zH,T=i.horizontalCoordinatesGenerator||GH,{horizontalPoints:O,verticalPoints:M}=i;if((!O||!O.length)&&typeof T=="function"){var N=g&&g.length,D=T({yAxis:C?vn(vn({},C),{},{ticks:N?g:C.ticks}):void 0,width:t,height:n,offset:r},N?!0:m);Uc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(O=D)}if((!M||!M.length)&&typeof P=="function"){var k=b&&b.length,R=P({xAxis:A?vn(vn({},A),{},{ticks:k?b:A.ticks}):void 0,width:t,height:n,offset:r},k?!0:m);Uc(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(M=R)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(IH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(BH,Io({},i,{horizontalPoints:O})),E.createElement(UH,Io({},i,{verticalPoints:M})),E.createElement(LH,Io({},i,{offset:r,horizontalPoints:O,xAxis:A,yAxis:C})),E.createElement($H,Io({},i,{offset:r,verticalPoints:M,xAxis:A,yAxis:C})))}fN.displayName="CartesianGrid";var qH=["children"],YH=["dangerouslySetInnerHTML","ticks"],FH=["id"];function pN(e,t,n){return(t=VH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VH(e){var t=KH(e,"string");return typeof t=="symbol"?t:t+""}function KH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B0.apply(null,arguments)}function U0(e,t){if(e==null)return{};var n,r,i=WH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function XH(e){var t=Et(),n=E.useMemo(()=>{var{children:r}=e,i=U0(e,qH);return i},[e]);return E.useEffect(()=>(t(L7(n)),()=>{t($7(n))}),[n,t]),e.children}var QH=e=>{var{xAxisId:t,className:n}=e,r=Pe(Ev),i=Tr(),s="xAxis",l=Pe(C=>El(C,s,t,i)),u=Pe(C=>aD(C,s,t,i)),p=Pe(C=>eD(C,t)),f=Pe(C=>y6(C,t)),h=Pe(C=>N_(C,t));if(p==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:g}=e,b=U0(e,YH),{id:S}=h,A=U0(h,FH);return E.createElement(Ki,B0({},b,A,{scale:l,x:f.x,y:f.y,width:p.width,height:p.height,className:nt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},ZH=e=>{var t,n,r,i,s;return E.createElement(XH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},E.createElement(QH,e))};class Wb extends E.Component{render(){return E.createElement(ZH,this.props)}}pN(Wb,"displayName","XAxis");pN(Wb,"defaultProps",{allowDataOverflow:Xn.allowDataOverflow,allowDecimals:Xn.allowDecimals,allowDuplicatedCategory:Xn.allowDuplicatedCategory,height:Xn.height,hide:!1,mirror:Xn.mirror,orientation:Xn.orientation,padding:Xn.padding,reversed:Xn.reversed,scale:Xn.scale,tickCount:Xn.tickCount,type:Xn.type,xAxisId:0});var JH=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,p=i+s,f=l+p+u+(n?r:0);return Math.round(f)}return 0},eq=["dangerouslySetInnerHTML","ticks"],tq=["id"];function hN(e,t,n){return(t=nq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nq(e){var t=rq(e,"string");return typeof t=="symbol"?t:t+""}function rq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z0.apply(null,arguments)}function Cw(e,t){if(e==null)return{};var n,r,i=aq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function iq(e){var t=Et();return E.useEffect(()=>(t(B7(e)),()=>{t(U7(e))}),[e,t]),null}var oq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=E.useRef(null),u=E.useRef(null),p=Pe(Ev),f=Tr(),h=Et(),m="yAxis",g=Pe(D=>El(D,m,n,f)),b=Pe(D=>tD(D,n)),S=Pe(D=>v6(D,n)),A=Pe(D=>aD(D,m,n,f)),C=Pe(D=>k_(D,n));if(E.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!b||Ib(s)||E.isValidElement(s)||C==null)){var k=l.current,R=k==null||(D=k.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:U,tickMargin:H}=k.props,q=JH({ticks:R,label:u.current,labelGapWithTick:5,tickSize:U,tickMargin:H});Math.round(b.width)!==Math.round(q)&&h(z7({id:n,width:q}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,b?.width,b,h,s,n,i]),b==null||S==null||C==null)return null;var{dangerouslySetInnerHTML:P,ticks:T}=e,O=Cw(e,eq),{id:M}=C,N=Cw(C,tq);return E.createElement(Ki,z0({},O,N,{ref:l,labelRef:u,scale:g,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:b.width,height:b.height,className:nt("recharts-".concat(m," ").concat(m),r),viewBox:p,ticks:A}))},sq=e=>{var t,n,r,i,s;return E.createElement(E.Fragment,null,E.createElement(iq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),E.createElement(oq,e))},lq={allowDataOverflow:Qn.allowDataOverflow,allowDecimals:Qn.allowDecimals,allowDuplicatedCategory:Qn.allowDuplicatedCategory,hide:!1,mirror:Qn.mirror,orientation:Qn.orientation,padding:Qn.padding,reversed:Qn.reversed,scale:Qn.scale,tickCount:Qn.tickCount,type:Qn.type,width:Qn.width,yAxisId:0};class Xb extends E.Component{render(){return E.createElement(sq,this.props)}}hN(Xb,"displayName","YAxis");hN(Xb,"defaultProps",lq);var $y={exports:{}},By={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw;function cq(){if(Pw)return By;Pw=1;var e=hl();function t(p,f){return p===f&&(p!==0||1/p===1/f)||p!==p&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return By.useSyncExternalStoreWithSelector=function(p,f,h,m,g){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function C(N){if(!P){if(P=!0,T=N,N=m(N),g!==void 0&&S.hasValue){var D=S.value;if(g(D,N))return O=D}return O=N}if(D=O,n(T,N))return D;var k=m(N);return g!==void 0&&g(D,k)?(T=N,D):(T=N,O=k)}var P=!1,T,O,M=h===void 0?null:h;return[function(){return C(f())},M===null?void 0:function(){return C(M())}]},[f,h,m,g]);var A=r(p,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},By}var ww;function uq(){return ww||(ww=1,$y.exports=cq()),$y.exports}uq();function dq(e){e()}function fq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Ow={notify(){},get:()=>[]};function pq(e,t){let n,r=Ow,i=0,s=!1;function l(A){h();const C=r.subscribe(A);let P=!1;return()=>{P||(P=!0,C(),m())}}function u(){r.notify()}function p(){S.onStateChange&&S.onStateChange()}function f(){return s}function h(){i++,n||(n=e.subscribe(p),r=fq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Ow)}function g(){s||(s=!0,h())}function b(){s&&(s=!1,m())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:p,isSubscribed:f,trySubscribe:g,tryUnsubscribe:b,getListeners:()=>r};return S}var hq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mq=hq(),gq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",yq=gq(),vq=()=>mq||yq?E.useLayoutEffect:E.useEffect,bq=vq(),xq=Symbol.for("react-redux-context"),Sq=typeof globalThis<"u"?globalThis:{};function Aq(){if(!E.createContext)return{};const e=Sq[xq]??=new Map;let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var Eq=Aq();function Cq(e){const{children:t,context:n,serverState:r,store:i}=e,s=E.useMemo(()=>{const p=pq(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);bq(()=>{const{subscription:p}=s;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),l!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[s,l]);const u=n||Eq;return E.createElement(u.Provider,{value:s},t)}var Pq=Cq,wq=(e,t)=>t,Qb=ee([wq,Ke,T_,Kt,bD,Za,AU,Ft],OU),Zb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},mN=wr("mouseClick"),gN=ru();gN.startListening({actionCreator:mN,effect:(e,t)=>{var n=e.payload,r=Qb(t.getState(),Zb(n));r?.activeIndex!=null&&t.dispatch(N6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var G0=wr("mouseMove"),yN=ru();yN.startListening({actionCreator:G0,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Ob(r,r.tooltip.settings.shared),s=Qb(r,Zb(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(fD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(dD()))}});function Oq(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Tw={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},vN=ar({name:"rootProps",initialState:Tw,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:Tw.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Tq=vN.reducer,{updateOptions:_q}=vN.actions,bN=ar({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Dq}=bN.actions,Nq=bN.reducer,xN=wr("keyDown"),SN=wr("focus"),Jb=ru();Jb.startListening({actionCreator:xN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(Tb(i,Pl(n))),u=Za(n);if(s==="Enter"){var p=Yf(n,"axis","hover",String(i.index));t.dispatch(M0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:p}));return}var f=A6(n),h=f==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=l+m*h;if(!(u==null||g>=u.length||g<0)){var b=Yf(n,"axis","hover",String(g));t.dispatch(M0({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});Jb.startListening({actionCreator:SN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=Yf(n,"axis","hover",String(s));t.dispatch(M0({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Ar=wr("externalEvent"),AN=ru();AN.startListening({actionCreator:Ar,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:pU(n),activeDataKey:ED(n),activeIndex:Yo(n),activeLabel:AD(n),activeTooltipIndex:Yo(n),isTooltipActive:hU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var kq=ee([Cl],e=>e.tooltipItemPayloads),Mq=ee([kq,hu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),EN=wr("touchMove"),CN=ru();CN.startListening({actionCreator:EN,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Ob(r,r.tooltip.settings.shared);if(i==="axis"){var s=Qb(r,Zb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(fD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],p=document.elementFromPoint(u.clientX,u.clientY);if(!p||!p.getAttribute)return;var f=p.getAttribute(uT),h=(l=p.getAttribute(dT))!==null&&l!==void 0?l:void 0,m=Mq(t.getState(),f,h);t.dispatch(uD({activeDataKey:h,activeIndex:f,activeCoordinate:m}))}}});var jq=IO({brush:aH,cartesianAxis:G7,chartData:HU,errorBars:n9,graphicalItems:o7,layout:P5,legend:mL,options:$U,polarAxis:AG,polarOptions:Nq,referenceElements:dH,rootProps:Tq,tooltip:k6}),Rq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return X3({reducer:jq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([gN.middleware,yN.middleware,Jb.middleware,AN.middleware,CN.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Oq},name:"recharts-".concat(n)}})};function PN(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Tr(),s=E.useRef(null);if(i)return n;s.current==null&&(s.current=Rq(t,r));var l=gv;return E.createElement(Pq,{context:l,store:s.current},n)}function wN(e){var{layout:t,width:n,height:r,margin:i}=e,s=Et(),l=Tr();return E.useEffect(()=>{l||(s(A5(t)),s(E5({width:n,height:r})),s(S5(i)))},[s,l,t,n,r,i]),null}function ON(e){var t=Et();return E.useEffect(()=>{t(_q(e))},[t,e]),null}var Iq=["children"];function Lq(e,t){if(e==null)return{};var n,r,i=$q(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $q(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Zf(){return Zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zf.apply(null,arguments)}var Bq={width:"100%",height:"100%"},Uq=E.forwardRef((e,t)=>{var n=Pv(),r=wv(),i=gT();if(!ol(n)||!ol(r))return null;var{children:s,otherAttributes:l,title:u,desc:p}=e,f,h;return typeof l.tabIndex=="number"?f=l.tabIndex:f=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,E.createElement(sv,Zf({},l,{title:u,desc:p,role:h,tabIndex:f,width:n,height:r,style:Bq,ref:t}),s)}),zq=e=>{var{children:t}=e,n=Pe(gp);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return E.createElement(sv,{width:r,height:i,x:l,y:s},t)},_w=E.forwardRef((e,t)=>{var{children:n}=e,r=Lq(e,Iq),i=Tr();return i?E.createElement(zq,null,n):E.createElement(Uq,Zf({ref:t},r),n)});function Gq(){var e=Et(),[t,n]=E.useState(null),r=Pe(eL);return E.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;rr(s)&&s!==r&&e(C5(s))}},[t,e,r]),n}function Dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dw(Object(n),!0).forEach(function(r){qq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qq(e,t,n){return(t=Yq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yq(e){var t=Fq(e,"string");return typeof t=="symbol"?t:t+""}function Fq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vq=E.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:p,onMouseEnter:f,onMouseLeave:h,onMouseMove:m,onMouseUp:g,onTouchEnd:b,onTouchMove:S,onTouchStart:A,style:C,width:P}=e,T=Et(),[O,M]=E.useState(null),[N,D]=E.useState(null);ZU();var k=Gq(),R=E.useCallback(Y=>{k(Y),typeof t=="function"&&t(Y),M(Y),D(Y)},[k,t,M,D]),U=E.useCallback(Y=>{T(mN(Y)),T(Ar({handler:s,reactEvent:Y}))},[T,s]),H=E.useCallback(Y=>{T(G0(Y)),T(Ar({handler:f,reactEvent:Y}))},[T,f]),q=E.useCallback(Y=>{T(dD()),T(Ar({handler:h,reactEvent:Y}))},[T,h]),K=E.useCallback(Y=>{T(G0(Y)),T(Ar({handler:m,reactEvent:Y}))},[T,m]),ce=E.useCallback(()=>{T(SN())},[T]),ue=E.useCallback(Y=>{T(xN(Y.key))},[T]),ne=E.useCallback(Y=>{T(Ar({handler:l,reactEvent:Y}))},[T,l]),I=E.useCallback(Y=>{T(Ar({handler:u,reactEvent:Y}))},[T,u]),X=E.useCallback(Y=>{T(Ar({handler:p,reactEvent:Y}))},[T,p]),se=E.useCallback(Y=>{T(Ar({handler:g,reactEvent:Y}))},[T,g]),ge=E.useCallback(Y=>{T(Ar({handler:A,reactEvent:Y}))},[T,A]),j=E.useCallback(Y=>{T(EN(Y)),T(Ar({handler:S,reactEvent:Y}))},[T,S]),V=E.useCallback(Y=>{T(Ar({handler:b,reactEvent:Y}))},[T,b]);return E.createElement(_D.Provider,{value:O},E.createElement(rO.Provider,{value:N},E.createElement("div",{className:nt("recharts-wrapper",r),style:Hq({position:"relative",cursor:"default",width:P,height:i},C),onClick:U,onContextMenu:ne,onDoubleClick:I,onFocus:ce,onKeyDown:ue,onMouseDown:X,onMouseEnter:H,onMouseLeave:q,onMouseMove:K,onMouseUp:se,onTouchEnd:V,onTouchMove:j,onTouchStart:ge,ref:R},n)))}),Kq=["children","className","width","height","style","compact","title","desc"];function Wq(e,t){if(e==null)return{};var n,r,i=Xq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var TN=E.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:p,desc:f}=e,h=Wq(e,Kq),m=Wo(h);return u?E.createElement(_w,{otherAttributes:m,title:p,desc:f},n):E.createElement(Vq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},E.createElement(_w,{otherAttributes:m,title:p,desc:f,ref:t},E.createElement(pH,null,n)))}),Qq=["width","height"];function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H0.apply(null,arguments)}function Zq(e,t){if(e==null)return{};var n,r,i=Jq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Jq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var eY={top:5,right:5,bottom:5,left:5},tY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:eY,reverseStackOrder:!1,syncMethod:"index"},nY=E.forwardRef(function(t,n){var r,i=_r(t.categoricalChartProps,tY),{width:s,height:l}=i,u=Zq(i,Qq);if(!ol(s)||!ol(l))return null;var{chartName:p,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,categoricalChartProps:g}=t,b={chartName:p,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return E.createElement(PN,{preloadedState:{options:b},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:p},E.createElement(sN,{chartData:g.data}),E.createElement(wN,{width:s,height:l,layout:i.layout,margin:i.margin}),E.createElement(ON,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(TN,H0({},u,{width:s,height:l,ref:n})))}),rY=["axis","item"],aY=E.forwardRef((e,t)=>E.createElement(nY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:rY,tooltipPayloadSearcher:DD,categoricalChartProps:e,ref:t}));function iY(e){var t=Et();return E.useEffect(()=>{t(Dq(e))},[t,e]),null}var oY=["width","height","layout"];function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q0.apply(null,arguments)}function sY(e,t){if(e==null)return{};var n,r,i=lY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var cY={top:5,right:5,bottom:5,left:5},uY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:cY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},dY=E.forwardRef(function(t,n){var r,i=_r(t.categoricalChartProps,uY),{width:s,height:l,layout:u}=i,p=sY(i,oY);if(!ol(s)||!ol(l))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g}=t,b={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return E.createElement(PN,{preloadedState:{options:b},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},E.createElement(sN,{chartData:i.data}),E.createElement(wN,{width:s,height:l,layout:u,margin:i.margin}),E.createElement(ON,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(iY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(TN,q0({width:s,height:l},p,{ref:n})))}),fY=["item"],pY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Nw=E.forwardRef((e,t)=>{var n=_r(e,pY);return E.createElement(dY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:fY,tooltipPayloadSearcher:DD,categoricalChartProps:n,ref:t})});const hY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80 transform scale-150",onClick:n=>n.stopPropagation(),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Hc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})}):null,mY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:s})=>{const[l,u]=E.useState(null),[p,f]=E.useState(!1),[h,m]=E.useState(!1),[g,b]=E.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,A]=E.useState(!1),C=E.useRef(null),[P,T]=E.useState({key:"name",direction:"ascending"}),[O,M]=E.useState("cost"),[N,D]=E.useState(!0),k=E.useMemo(()=>{const G=te=>te?te.replace(/_/g," ").toLowerCase().split(" ").map(pe=>pe.charAt(0).toUpperCase()+pe.slice(1)).join(" "):"";return t.map(te=>{const ye=[],pe=te.effect;if(pe.type==="REPEATING_EFFECT")ye.push(G(pe.type)),pe.effects&&Array.isArray(pe.effects)&&pe.effects.forEach(de=>{de.type&&ye.push(G(de.type))});else if(pe.type==="MODIFY_DRONE_BASE"&&pe.mod){const de=pe.mod.stat,be=pe.mod.value;de==="attack"?ye.push(be>0?"Attack Buff":"Attack Debuff"):de==="speed"?ye.push(be>0?"Speed Buff":"Speed Debuff"):de==="shields"?ye.push(be>0?"Shield Buff":"Shield Debuff"):de==="cost"?ye.push(be<0?"Cost Reduction":"Cost Increase"):de==="limit"?ye.push(be>0?"Limit Buff":"Limit Debuff"):de==="ability"?(ye.push("Ability Grant"),pe.mod.abilityToAdd&&pe.mod.abilityToAdd.name&&ye.push(pe.mod.abilityToAdd.name)):ye.push(G(`${de} Modification`))}else if(pe.type==="MODIFY_STAT"&&pe.mod){const de=pe.mod.stat,be=pe.mod.value;pe.mod.type,de==="attack"?ye.push(be>0?"Attack Buff":"Attack Debuff"):de==="speed"?ye.push(be>0?"Speed Buff":"Speed Debuff"):de==="shields"?ye.push(be>0?"Shield Buff":"Shield Debuff"):ye.push(be>0?`${de} Buff`:`${de} Debuff`)}else pe.type==="SEARCH_AND_DRAW"?(ye.push(G(pe.type)),ye.push("Draw")):pe.type&&ye.push(G(pe.type));pe.goAgain&&ye.push("Go Again"),pe.damageType==="PIERCING"&&ye.push("Piercing"),pe.mod?.type&&ye.push(G(pe.mod.type));const ae=(()=>{if(te.targeting){const de=G(te.targeting.type);if(te.targeting.affinity){const be=te.targeting.affinity.charAt(0)+te.targeting.affinity.slice(1).toLowerCase();return`${de} (${be})`}return de}else if(pe.type==="MULTI_MOVE"&&pe.source){const de=pe.source.location||"Any",be=pe.source.affinity||"Any",fe=be.charAt(0).toUpperCase()+be.slice(1).toLowerCase();return`${G(de)} (${fe})`}else if(pe.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...te,keywords:ye,targetingText:ae}})},[t]),R=E.useMemo(()=>{const G=new Set,te=new Set,ye=new Set;k.forEach(ae=>{G.add(ae.cost),te.add(ae.targetingText),ae.keywords.forEach(de=>ye.add(de))});const pe=Array.from(G);return{minCost:Math.min(...pe),maxCost:Math.max(...pe),targets:["all",...Array.from(te).sort()],abilities:Array.from(ye).sort()}},[k]);E.useEffect(()=>{R.minCost!==1/0&&R.maxCost!==-1/0&&b(G=>({...G,cost:{min:R.minCost,max:R.maxCost}}))},[R.minCost,R.maxCost]);const{cardCount:U,deckListForDisplay:H,baseCardCounts:q}=E.useMemo(()=>{const G={};let te=0;Object.entries(n).forEach(([pe,ae])=>{if(ae>0){te+=ae;const de=k.find(be=>be.id===pe);if(de){const be=de.baseCardId;G[be]=(G[be]||0)+ae}}});const ye=Object.entries(n).filter(([,pe])=>pe>0).map(([pe,ae])=>({...k.find(be=>be.id===pe),quantity:ae})).sort((pe,ae)=>pe.name.localeCompare(ae.name));return{cardCount:te,deckListForDisplay:ye,baseCardCounts:G}},[n,k]),K=U>=40,ce=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],ue=E.useMemo(()=>{const G={};H.forEach(ae=>{const de=ae.cost||0;G[de]=(G[de]||0)+ae.quantity});const te=Object.entries(G).map(([ae,de])=>({name:`${ae}`,count:de})).sort((ae,de)=>parseInt(ae.name)-parseInt(de.name)),ye={};H.forEach(ae=>{ae.keywords&&ae.keywords.forEach(de=>{ye[de]=(ye[de]||0)+ae.quantity})});const pe=Object.entries(ye).map(([ae,de])=>({name:ae,value:de})).sort((ae,de)=>de.value-ae.value);return{barChartData:te,pieChartData:pe}},[H]),ne=E.useMemo(()=>{let G=[...k].filter(te=>te.cost<g.cost.min||te.cost>g.cost.max||g.target!=="all"&&te.targetingText!==g.target||g.type!=="all"&&te.type!==g.type?!1:g.abilities.length>0?g.abilities.every(ye=>te.keywords.includes(ye)):!(g.hideEnhanced&&te.id.endsWith("_ENHANCED")));return P.key!==null&&G.sort((te,ye)=>{const pe=te[P.key],ae=ye[P.key];if(pe==null&&ae==null)return 0;if(pe==null)return 1;if(ae==null)return-1;const de=String(pe).toLowerCase(),be=String(ae).toLowerCase();return de<be?P.direction==="ascending"?-1:1:de>be?P.direction==="ascending"?1:-1:te.id.localeCompare(ye.id)}),G},[k,g,P]),I=G=>{let te="ascending";P.key===G&&P.direction==="ascending"&&(te="descending"),T({key:G,direction:te})},X=(G,te)=>{b(ye=>({...ye,[G]:te}))},se=G=>{b(te=>{const ye=te.abilities.includes(G)?te.abilities.filter(pe=>pe!==G):[...te.abilities,G];return{...te,abilities:ye}})},ge=()=>{b({cost:{min:R.minCost,max:R.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),A(!1)},j=()=>{Object.keys(n).forEach(G=>{n[G]>0&&r(G,0)})};E.useEffect(()=>{const G=te=>{C.current&&!C.current.contains(te.target)&&A(!1)};return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[]);const V=Math.PI/180,Y=({cx:G,cy:te,midAngle:ye,outerRadius:pe,fill:ae,name:de,value:be})=>{const fe=Math.sin(-V*ye),rt=Math.cos(-V*ye),Ie=G+(pe+5)*rt,Ot=te+(pe+5)*fe,Ct=G+(pe+15)*rt,pt=te+(pe+15)*fe,Yr=Ct+(rt>=0?1:-1)*12,ca=pt,ts=rt>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${Ie},${Ot}L${Ct},${pt}L${Yr},${ca}`,stroke:ae,fill:"none"}),v.jsx("circle",{cx:Yr,cy:ca,r:2,fill:ae,stroke:"none"}),v.jsx("text",{x:Yr+(rt>=0?1:-1)*8,y:ca,dy:4,textAnchor:ts,fill:"#9CA3AF",fontSize:"11px",children:`${de} (${be})`})]})},ie=()=>{const[G,te]=E.useState(""),ye=E.useRef(null),pe=E.useMemo(()=>Object.entries(n).map(([de,be])=>`${de}:${be}`).join(","),[n]),ae=()=>{ye.current.select(),document.execCommand("copy"),te("Copied!"),setTimeout(()=>te(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>f(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:de=>de.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:ye,readOnly:!0,value:pe,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:G}),v.jsxs("button",{onClick:ae,className:"flex items-center gap-2 bg-cyan-600 text-white font-bold py-2 px-4 rounded hover:bg-cyan-700",children:[v.jsx(tv,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>f(!1),className:"flex items-center gap-2 bg-pink-600 text-white font-bold py-2 px-4 rounded hover:bg-pink-700",children:[v.jsx(kn,{size:16})," Close"]})]})]})})},ve=()=>{const[G,te]=E.useState(""),[ye,pe]=E.useState(""),ae=()=>{pe("");const de=s(G);de.success?m(!1):pe(de.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:de=>de.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:G,onChange:de=>te(de.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),ye&&v.jsx("p",{className:"text-red-500 mt-2",children:ye}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-700",children:"Cancel"}),v.jsx("button",{onClick:ae,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded hover:bg-purple-700",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[l&&v.jsx(hY,{card:l,onClose:()=>u(null)}),p&&v.jsx(ie,{}),h&&v.jsx(ve,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(dR,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(Fj,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:ge,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",g.cost.min," - ",g.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:R.minCost,max:R.maxCost,value:g.cost.min,onChange:G=>X("cost",{...g.cost,min:Math.min(parseInt(G.target.value),g.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:R.minCost,max:R.maxCost,value:g.cost.max,onChange:G=>X("cost",{...g.cost,max:Math.max(parseInt(G.target.value),g.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:C,children:[v.jsx("button",{onClick:()=>A(!S),className:"filter-select w-full text-left h-full",children:g.abilities.length===0?"Select Abilities":`${g.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:R.abilities.map(G=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.abilities.includes(G),onChange:()=>se(G),className:"mr-2"}),G]},G))})]}),v.jsxs("select",{onChange:G=>X("type",G.target.value),value:g.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.hideEnhanced,onChange:G=>X("hideEnhanced",G.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>I("name"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",P.key==="name"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>I("type"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",P.key==="type"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>I("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",P.key==="cost"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>I("description"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",P.key==="description"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:ne.map((G,te)=>{const ye=n[G.id]||0,pe=q[G.baseCardId]||0,ae=G.maxInDeck;return v.jsxs("tr",{className:G.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(G),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(NA,{size:18})})}),v.jsx("td",{className:"font-bold",children:G.name}),v.jsx("td",{className:`font-semibold ${G.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:G.type}),v.jsx("td",{children:G.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:G.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:G.keywords.map(de=>v.jsx("span",{className:"ability-chip",children:de},de))})}),v.jsx("td",{className:"text-xs",children:G.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):G.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:ae+1}).map((de,be)=>{const fe=be===ye,rt=ae-(pe-ye),Ie=be>rt;return v.jsx("button",{onClick:()=>r(G.id,be),className:`quantity-btn ${fe?"selected":""}`,disabled:Ie,children:be},be)})})})]},`${G.id}-${te}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${K?"text-green-400":"text-white"}`,children:["Your Deck (",U,"/40)"]}),v.jsx("button",{onClick:j,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:H.length>0?H.map(G=>{const te=q[G.baseCardId]>=G.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(G),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(NA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:G.name,children:G.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(G.id,G.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",G.quantity]}),v.jsx("button",{onClick:()=>r(G.id,G.quantity+1),disabled:te,className:"deck-edit-btn",children:"+"})]})]},G.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),U>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!N),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(cf,{size:20,className:`transition-transform duration-300 ${N?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${N?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>M("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>M("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>M("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[O==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(Ty,{width:"100%",height:"100%",children:v.jsxs(aY,{data:ue.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(fN,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(Wb,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(Xb,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(Ay,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(iN,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),O==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(Ty,{width:"100%",height:"100%",children:v.jsxs(Nw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(L0,{data:[{name:"Action Cards",value:H.filter(G=>G.type==="Action").reduce((G,te)=>G+te.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:H.filter(G=>G.type==="Upgrade").reduce((G,te)=>G+te.quantity,0),color:"#c084fc"}].filter(G=>G.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:G,value:te,percent:ye})=>`${G}: ${te} (${(ye*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:H.filter(G=>G.type==="Action").reduce((G,te)=>G+te.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:H.filter(G=>G.type==="Upgrade").reduce((G,te)=>G+te.quantity,0),color:"#c084fc"}].filter(G=>G.value>0).map((G,te)=>v.jsx(pl,{fill:G.color},`cell-${te}`))}),v.jsx(Ay,{}),v.jsx(yp,{})]})})]}),O==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(Ty,{width:"100%",height:"100%",children:v.jsxs(Nw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(L0,{data:ue.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:Y,outerRadius:60,dataKey:"value",children:ue.pieChartData.map((G,te)=>v.jsx(pl,{fill:ce[te%ce.length]},`cell-${te}`))}),v.jsx(Ay,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!K,className:"w-full p-4 mt-4 text-lg font-bold font-orbitron rounded-lg bg-purple-600 text-white transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed enabled:hover:bg-purple-500",children:"Confirm Deck"})]})]})]})};function gY(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getOpponentPlayerState:s,addLogEntry:l}=Gi(),{turnPhase:u}=e,p=i();s();const[f,h]=E.useState(!1),[m,g]=E.useState({}),b=async N=>{if(u==="deckSelection")if(console.log("🔧 handleDeckChoice called with:",N),N==="standard"){const D=t(),k=Me.buildDeckFromList(Xs),R={phase:"deckSelection",playerId:D,actionData:{deck:k}};if(e.gameMode==="guest"){console.log("[GUEST] Sending deck selection commitment to host"),_n.sendActionToHost("commitment",R);return}const U=await Re.actionProcessor.processCommitment(R);if(!U.success){console.error("❌ Deck selection submission failed:",U.error);return}console.log("✅ Standard deck selection submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else N==="custom"&&(console.log("🔧 Opening custom deck builder"),h(!0))},S=(N,D)=>{g(k=>({...k,[N]:D}))},A=async()=>{console.log("🔧 Confirming custom deck:",m);const N=[];Object.entries(m).forEach(([H,q])=>{for(let K=0;K<q;K++){const ce=tf.find(ue=>ue.id===H);ce&&N.push(ce)}});const D=N.sort(()=>.5-Math.random());console.log(`🔀 Custom deck shuffled: ${D.length} cards`);const R={phase:"deckSelection",playerId:t(),actionData:{deck:D}};if(e.gameMode==="guest"){console.log("[GUEST] Sending custom deck commitment to host"),_n.sendActionToHost("commitment",R),h(!1);return}const U=await Re.actionProcessor.processCommitment(R);if(!U.success){console.error("❌ Custom deck submission failed:",U.error);return}console.log("✅ Custom deck submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected a Custom Deck."},"handleConfirmDeck"),h(!1)},C=N=>{try{const D={},k=N.split(",");for(const R of k){const[U,H]=R.split(":"),q=parseInt(H,10);if(!U||isNaN(q))return{success:!1,message:"Invalid deck code format."};if(!tf.find(ce=>ce.id===U))return{success:!1,message:`Card ${U} not found.`};D[U]=q}return g(D),{success:!0}}catch(D){return console.error("Error importing deck:",D),{success:!1,message:"Failed to parse deck code."}}};E.useEffect(()=>{e.gameMode==="guest"&&Re.emit("render_complete")},[e,Re]);const P=t(),T=n(),O=e.commitments?.deckSelection?.[P]?.completed||!1,M=e.commitments?.deckSelection?.[T]?.completed||!1;return console.log("🔍 [DECK SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:P,opponentPlayerId:T,localPlayerCompleted:O,opponentCompleted:M,fullCommitmentsObject:e.commitments?.deckSelection,turnPhase:u,localPlayerDeckLength:p.deck?.length,willShowWaiting:r()&&O&&!M}),r()&&O&&!M?v.jsx(nv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):f?v.jsx(mY,{selectedDrones:p.dronePool,fullCardCollection:tf,deck:m,onDeckChange:S,onConfirmDeck:A,onImportDeck:C}):v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>b("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"mt-6 bg-cyan-600 text-white font-bold px-6 py-2 rounded-full hover:bg-cyan-700 transition-colors duration-200",children:"Select"})]}),v.jsxs("div",{onClick:()=>b("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const yY=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Jf=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:p,isHovered:f,onMouseEnter:h,onMouseLeave:m,isCardTarget:g,isInMiddleLane:b,reallocationState:S,gameEngine:A,turnPhase:C,isMyTurn:P,passInfo:T,getLocalPlayerId:O,localPlayerState:M,shipAbilityMode:N,sectionRef:D})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const k=A.getShipStatus(t),R=k==="critical"?"bg-red-900/60":k==="damaged"?"bg-yellow-900/50":"bg-black/60";let U=k==="critical"?"border-red-500":k==="damaged"?"border-yellow-500":p?"border-pink-500":"border-cyan-500";const H=p?"shadow-pink-500/20":"shadow-cyan-500/20",q=f?"scale-105 shadow-xl":"";let K="";if(S)switch(S){case"can-remove":U="border-orange-400",K="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":U="border-orange-600",K="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":U="border-gray-600",K="opacity-50";break;case"can-add":U="border-green-400",K="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":U="border-green-600",K="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":U="border-gray-600",K="opacity-50";break}const ce=g?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",ue=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,I=>I.toUpperCase()),ne={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{ref:D,className:`
        relative rounded-xl shadow-lg ${H} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${U}
        ${u?`cursor-pointer ${q}`:""}
        ${ce}
        ${K}
      `,style:ne,onClick:s,onMouseEnter:h,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${R}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-2 h-full",children:[v.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:ue}),v.jsx("div",{className:`flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${k==="healthy"?"bg-green-500/20 text-green-300":k==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:k.charAt(0).toUpperCase()+k.slice(1)})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([I,X])=>{const se=b&&t.middleLaneBonus&&t.middleLaneBonus[I];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[I,":"]}),v.jsx("span",{className:se?"text-green-400 font-bold":"",children:X})]},I)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((I,X)=>v.jsx("div",{children:X<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},X))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((I,X)=>{const se=X+1,{critical:ge,damaged:j}=t.thresholds;let V;se<=ge?V="bg-red-500":se<=j?V="bg-orange-500":V="bg-green-500";const Y=X<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${Y?V:"bg-gray-400"} border border-black/50`},X)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(yY,{ability:t.ability,isUsable:C==="action"&&P()&&!T[`${O()}Passed`]&&M.energy>=t.ability.cost.energy,isSelected:N?.ability.id===t.ability.id,onClick:I=>l(I,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function vY(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getLocalPlacedSections:s}=Gi(),{turnPhase:l,unplacedSections:u}=e,p=i(),f=s(),[h,m]=E.useState(null),[g,b]=E.useState(f||[null,null,null]),[S,A]=E.useState(u||["bridge","powerCell","droneControlHub"]),C=R=>{if(l==="placement")if(console.log("🔧 handleSelectSectionForPlacement called with:",R,"gameMode:",e.gameMode),S.includes(R))m(U=>U===R?null:R);else{const U=g.indexOf(R),H=[...g];H[U]=null,b(H),A(q=>[...q,R]),m(null)}},P=R=>{if(l==="placement")if(console.log("🔧 handleLaneSelectForPlacement called with lane:",R,"gameMode:",e.gameMode),h){if(g[R]){const U=g[R],H=[...g];H[R]=h;const q=S.indexOf(h),K=[...S];K.splice(q,1,U),b(H),A(K)}else{const U=[...g];U[R]=h,b(U),A(H=>H.filter(q=>q!==h))}m(null)}else g[R]&&C(g[R])},T=async()=>{if(l!=="placement")return;if(console.log("🔧 handleConfirmPlacement called"),g.some(H=>H==null)){console.warn("⚠️ Cannot confirm placement: All ship sections must be placed");return}console.log("🔧 Submitting placement to PhaseManager:",g);const U={phase:"placement",playerId:t(),actionData:{placedSections:g}};if(e.gameMode==="guest"){console.log("[GUEST] Sending ship placement commitment to host"),_n.sendActionToHost("commitment",U);return}try{const H=await Re.actionProcessor.processCommitment(U);if(!H.success){console.error("❌ Placement submission failed:",H.error);return}console.log("✅ Placement submitted to PhaseManager")}catch(H){console.error("❌ Error submitting placement:",H)}};E.useEffect(()=>{e.gameMode==="guest"&&Re.emit("render_complete")},[e,Re]);const O=t(),M=n(),N=e.commitments?.placement?.[O]?.completed||!1,D=e.commitments?.placement?.[M]?.completed||!1;if(console.log("🔍 [SHIP PLACEMENT] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:O,opponentPlayerId:M,localPlayerCompleted:N,opponentCompleted:D,fullCommitmentsObject:e.commitments?.placement,turnPhase:l,willShowWaiting:r()&&N&&!D}),r()&&N&&!D){const R=g.map((U,H)=>U?U.name:"Empty").join(", ");return v.jsx(nv,{phase:"placement",localPlayerStatus:`Your ship layout: ${R}`})}const k=g.every(R=>R!==null);return console.log("🔥 ShipPlacementScreen rendered:",{allPlaced:k,placed:g,unplaced:u,selected:h}),v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(R=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes(R)&&v.jsx("div",{onClick:()=>C(R),className:`h-full transition-all duration-300 rounded-xl ${h===R?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(Jf,{section:R,stats:p.shipSections[R],effectiveStatsForDisplay:p.shipSections[R].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:Me,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null})})},R))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(R=>{const U=g[R],H=h&&!g[R];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>P(R),children:U?v.jsx(Jf,{section:U,stats:p.shipSections[U],effectiveStatsForDisplay:p.shipSections[U].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:R===1,gameEngine:Me,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${H?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:R===1?"Lane 2 (Center Bonus)":`Lane ${R+1}`})})},R)})})]}),v.jsx("button",{onClick:()=>{console.log(`🔥 Confirm Layout button clicked! allPlaced: ${k}`),T()},disabled:!k,className:"mt-12 bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 disabled:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed enabled:hover:bg-green-500 shadow-lg",children:"Confirm Layout"})]})]})}const bY=()=>{const e=E.useRef(null);return E.useEffect(()=>{const t=e.current,n=t.getContext("2d");let r;const i=Array.from({length:500},()=>{const f=Math.random();let h;return f<.9?h="rgba(255, 255, 255, ":f<.94?h="rgba(100, 150, 255, ":f<.98?h="rgba(255, 200, 100, ":h="rgba(255, 100, 100, ",{x:0,y:0,radius:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,twinkleSpeed:.005+Math.random()*.01,twinklePhase:Math.random()*Math.PI*2,color:h}}),s=["rgba(147, 51, 234, ","rgba(59, 130, 246, ","rgba(236, 72, 153, ","rgba(16, 185, 129, ","rgba(6, 182, 212, ","rgba(139, 92, 246, ","rgba(34, 211, 238, "],l=Array.from({length:4},()=>({x:0,y:0,radius:180+Math.random()*150,color:s[Math.floor(Math.random()*s.length)],pulsePhase:Math.random()*Math.PI*2,pulseSpeed:.004+Math.random()*.003})),u=()=>{t.width=window.innerWidth,t.height=window.innerHeight,i.forEach(f=>{f.x=Math.random()*t.width,f.y=Math.random()*(t.height*.75)}),l.forEach(f=>{f.x=Math.random()*t.width,f.y=Math.random()*(t.height*.75)})};u(),window.addEventListener("resize",u);const p=()=>{n.fillStyle="#0a0a1a",n.fillRect(0,0,t.width,t.height),l.forEach(f=>{f.pulsePhase+=f.pulseSpeed;const h=.08+Math.sin(f.pulsePhase)*.04;for(let m=0;m<3;m++){const g=Math.sin(f.pulsePhase*.5+m)*30,b=Math.cos(f.pulsePhase*.3+m)*30,S=h*(.4+m*.3),A=n.createRadialGradient(f.x+g,f.y+b,0,f.x+g,f.y+b,f.radius*(.7+m*.15));A.addColorStop(0,f.color+S+")"),A.addColorStop(.3,f.color+S*.6+")"),A.addColorStop(.7,f.color+S*.2+")"),A.addColorStop(1,f.color+"0)"),n.fillStyle=A,n.fillRect(0,0,t.width,t.height)}}),i.forEach(f=>{f.twinklePhase+=f.twinkleSpeed;const h=.3+Math.sin(f.twinklePhase)*.7;n.beginPath(),n.arc(f.x,f.y,f.radius,0,Math.PI*2),n.fillStyle=f.color+f.opacity*h+")",n.fill(),f.radius>1&&(n.beginPath(),n.arc(f.x,f.y,f.radius*2,0,Math.PI*2),n.fillStyle=f.color+f.opacity*h*.1+")",n.fill())}),r=requestAnimationFrame(p)};return p(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(r)}},[]),v.jsx("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"#0a0a1a"}})},es=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),aa=({icon:e,value:t,max:n,iconColor:r,isPlayer:i})=>{const s=i?"from-cyan-400/30 via-blue-400/30 to-blue-500/30":"from-pink-400/30 via-pink-500/30 to-pink-600/30";return v.jsx("div",{className:`relative p-[1px] bg-gradient-to-br ${s}`,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:v.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 px-3 py-1 flex items-center gap-2",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[v.jsx(e,{size:18,className:r}),v.jsxs("span",{className:"font-bold text-base text-white whitespace-nowrap",children:[t,n!==void 0&&v.jsxs("span",{className:"hidden xl:inline",children:[" / ",n]})]})]})})};function xY({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:p,opponentShieldsToAllocate:f,shieldsToRemove:h,shieldsToAdd:m,reallocationPhase:g,totalLocalPlayerDrones:b,totalOpponentPlayerDrones:S,getLocalPlayerId:A,getOpponentPlayerId:C,isMyTurn:P,currentPlayer:T,isMultiplayer:O,handlePlayerPass:M,handleReset:N,handleResetShields:D,handleConfirmShields:k,handleCancelReallocation:R,handleResetReallocation:U,handleContinueToAddPhase:H,handleConfirmReallocation:q,mandatoryAction:K,multiSelectState:ce,AI_HAND_DEBUG_MODE:ue,setShowAiHandModal:ne,onShowDebugModal:I}){const[X,se]=E.useState(!1),ge=E.useRef(null);return E.useEffect(()=>{const j=V=>{ge.current&&!ge.current.contains(V.target)&&se(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]),v.jsxs("header",{className:"w-full flex justify-between items-start mb-2 flex-shrink-0 px-5 pt-2",children:[v.jsxs("div",{className:"flex flex-col gap-1.5",children:[v.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Opponent",(i==="deployment"||i==="action")&&u===C()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${C()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(aa,{icon:Hc,value:t.energy,max:r.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!1}),v.jsx("div",{onClick:()=>ue&&setTimeout(()=>ne(!0),100),className:ue?"cursor-pointer":"",children:v.jsx(aa,{icon:Qj,value:t.hand.length,max:r.totals.handLimit,iconColor:"text-gray-400",isPlayer:!1})}),i==="deployment"&&v.jsx(aa,{icon:Qy,value:s===1?t.initialDeploymentBudget:t.deploymentBudget,iconColor:"text-purple-400",isPlayer:!1}),v.jsx(aa,{icon:DA,value:S,max:r.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!1})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[v.jsxs("h2",{className:"text-xl font-bold uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #6b7280, #9ca3af)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[Tj(i),i==="allocateShields"&&v.jsxs("span",{className:"text-base font-semibold text-cyan-300 ml-2",children:["(",p," shields to assign)"]}),g==="removing"&&v.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",h," shields to remove)"]}),g==="adding"&&v.jsxs("span",{className:"text-base font-semibold text-green-300 ml-2",children:["(",m," shields to add)"]})]}),(i==="deployment"||i==="action"||g)&&v.jsxs("div",{className:"flex items-center gap-3",children:[P()?v.jsx("div",{className:"flex items-center gap-2",children:v.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Your Turn"})}):v.jsx("div",{className:"flex items-center gap-2",children:v.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest phase-announcement-shine animate-pulse",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(236, 72, 153, 0.5), 0 0 60px rgba(244, 114, 182, 0.3)",filter:"drop-shadow(0 0 20px rgba(236, 72, 153, 0.4))",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:O()?"Opponent's Turn":"AI Thinking"})}),P()&&!K&&!ce&&!g&&v.jsx("button",{onClick:M,disabled:l[`${A()}Passed`],className:"relative p-[1px] transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:l[`${A()}Passed`]?"linear-gradient(45deg, rgba(75, 85, 99, 0.6), rgba(107, 114, 128, 0.6))":"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:l[`${A()}Passed`]?"#9ca3af":"#fca5a5"},children:"Pass"})}),g==="removing"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:R,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),v.jsx("button",{onClick:U,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),v.jsx("button",{onClick:H,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Continue"})})]}),g==="adding"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:R,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),v.jsx("button",{onClick:U,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),v.jsx("button",{onClick:q,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}),i==="allocateShields"&&v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:D,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),v.jsx("button",{onClick:k,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}),v.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[v.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Your Resources",(i==="deployment"||i==="action")&&u===A()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(aa,{icon:Hc,value:e.energy,max:n.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!0}),i==="deployment"&&v.jsx(aa,{icon:Qy,value:s===1?e.initialDeploymentBudget:e.deploymentBudget,iconColor:"text-purple-400",isPlayer:!0}),v.jsx(aa,{icon:DA,value:b,max:n.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!0}),i==="allocateShields"&&v.jsx(aa,{icon:og,value:p,iconColor:"text-cyan-300",isPlayer:!0}),g==="removing"&&v.jsx(aa,{icon:og,value:h,iconColor:"text-orange-300",isPlayer:!0}),g==="adding"&&v.jsx(aa,{icon:og,value:m,iconColor:"text-green-300",isPlayer:!0}),v.jsx("button",{onClick:N,className:"relative p-[2px] bg-gradient-to-br from-pink-400 to-pink-600",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Reset Game",children:v.jsx("div",{className:"bg-pink-700 hover:bg-pink-600 p-1.5 transition-colors",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:v.jsx(rR,{size:20,className:"text-white"})})}),v.jsxs("div",{className:"relative",ref:ge,children:[v.jsx("button",{onClick:()=>se(!X),className:"relative p-[2px] bg-gradient-to-br from-gray-500 to-gray-700",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Settings",children:v.jsxs("div",{className:"bg-slate-700 hover:bg-slate-600 p-1.5 transition-colors flex items-center gap-1",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[v.jsx(kA,{size:20,className:"text-white"}),v.jsx(zj,{size:16,className:"text-white"})]})}),X&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:v.jsxs("button",{onClick:()=>{I&&I(),se(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[v.jsx(kA,{size:16}),"Debug View"]})})]})]})]})]})}const Ip=()=>{const{gameStateManager:e}=Gi(),t=E.useMemo(()=>e?Yt.getInstance(e):null,[e]),[n,r]=E.useState(null);return E.useEffect(()=>{if(!t)return;const h=()=>{r(t.getCacheStats())};h();const m=setInterval(h,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(h,m)=>t?t.getEffectiveStats(h,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(h,m=[])=>t?t.getEffectiveShipStats(h,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:h=>t?t.getLaneData(h):{lane:h,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(h,m=null)=>t?t.hasGuardianInLane(h,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},kw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:p,gameEngine:f,turnPhase:h,isMyTurn:m,passInfo:g,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:A,hoveredTarget:C,setHoveredTarget:P,sectionRefs:T})=>{const{getEffectiveShipStats:O}=Ip(),M=O(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(N=>{const D=n[N];if(!D)return console.log(`🚨 [DEBUG] Lane ${N} rendering EMPTY div - no hover possible:`,{sectionName:D,sectionNameType:typeof D,sectionNameValue:JSON.stringify(D),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},N);const k=e.shipSections[D],R=u.some(H=>H.id===D);let U=null;if(p&&t){if(p==="removing")k.allocatedShields>0?U="can-remove":U="cannot-remove";else if(p==="adding"){const H=f.getEffectiveSectionMaxShields(D,e,n);k.allocatedShields<H?U="can-add":U="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0 max-h-[120px]",children:v.jsx(Jf,{section:D,stats:k,effectiveStatsForDisplay:M.bySection[D],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(D):s&&s({id:D,name:D,...k},"section",t)},onAbilityClick:i,isInteractive:l||h==="action"&&t&&k.ability&&S.energy>=k.ability.cost.energy,isCardTarget:R,isInMiddleLane:N===1,isHovered:C?.type==="section"&&C?.target.name===D&&C?.isOpponent===!t,onMouseEnter:()=>!t&&P({target:{name:D,...k},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&P(null),reallocationState:U,gameEngine:f,turnPhase:h,isMyTurn:m,passInfo:g,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:A,sectionRef:H=>{if(T&&H){const q=`${t?"local":"opponent"}-${D}`;T.current[q]=H}}})},N)})})},SY=({droneId:e,timestamp:t,duration:n=2e3})=>{const[r,i]=E.useState(!0);return E.useEffect(()=>{const s=setTimeout(()=>{i(!1)},n);return()=>clearTimeout(s)},[t,n]),r?v.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:v.jsx("div",{className:"bg-red-600/90 rounded-lg px-4 py-2 shadow-2xl border-2 border-red-400 animate-pulse",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(sR,{className:"w-5 h-5 text-white"}),v.jsx("span",{className:"text-white font-bold text-lg tracking-wide drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]",children:"Intercepted!"})]})})}):null},Mw=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),AY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),ff=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:p,lane:f,onAbilityClick:h,isActionTarget:m,droneRefs:g,mandatoryAction:b,localPlayerState:S,interceptedBadge:A,enableFloatAnimation:C=!1})=>{const{getEffectiveStats:P}=Ip(),T=E.useMemo(()=>xn.find(te=>te.name===e.name),[e.name]),O=P(e,f),{maxShields:M}=O,N=e.currentShields??M,D=T.abilities.filter(te=>te.type==="ACTIVE"),k=n?"border-cyan-400":"border-pink-500",R=n?"bg-cyan-900":"bg-pink-950",U=n?"text-cyan-100":"text-pink-100",H=n?"bg-cyan-900":"bg-pink-950",q=n?"text-cyan-400":"text-pink-500",K=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",ce=O.attack>O.baseAttack,ue=O.attack<O.baseAttack,ne=ce?"text-green-400":ue?"text-red-400":"text-white",I=O.speed>O.baseSpeed,X=O.speed<O.baseSpeed,se=I?"text-green-400":X?"text-red-400":"text-white",ge=e.isExhausted?"grayscale opacity-60":"",j=s?"animate-shake":"",V=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",Y=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",ie=b?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",ve=te=>!(e.isExhausted&&te.cost.exhausts!==!1||te.cost.energy&&S.energy<te.cost.energy),G=e.isTeleporting?"opacity-0 pointer-events-none":"";return v.jsxs("div",{ref:te=>g.current[e.id]=te,onClick:te=>t&&t(te,e,n),onMouseEnter:u,onMouseLeave:p,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ge} ${j} ${V} ${Y} ${ie} ${G} ${C?"drone-float":""}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${k} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:M}).map((te,ye)=>ye<N?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:q,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ye):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:K,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ye))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:T.hull}).map((te,ye)=>{const pe=ye<e.hull,ae=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${pe?ae:"bg-gray-400"} border border-black/50`},ye)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${R} flex items-center justify-center border-t ${k}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${U} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(Mw,{value:O.attack,isFlat:!1,bgColor:H,textColor:ne})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:v.jsx(Mw,{value:O.speed,isFlat:!0,bgColor:H,textColor:se})}),n&&D.length>0&&ve(D[0])&&v.jsx(AY,{onClick:te=>h&&h(te,e,D[0])}),A&&A.droneId===e.id&&v.jsx(SY,{droneId:e.id,timestamp:A.timestamp})]})},EY=(e,t,n,r,i,s,l,u,p,f,h,m,g,b,S,A,C,P,T,O,M)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(N=>v.jsx(ff,{drone:N,lane:n,isPlayer:t,onClick:f,onAbilityClick:h,isSelected:m&&m.id===N.id,isSelectedForMove:g?.phase==="select_drones"&&g.selectedDrones.some(D=>D.id===N.id),isHit:b.includes(N.id),isPotentialInterceptor:S.includes(N.id),droneRefs:A,mandatoryAction:C,localPlayerState:r,isActionTarget:P.some(D=>D.id===N.id)||T.some(D=>D.id===N.id),onMouseEnter:()=>!t&&O({target:N,type:"drone",lane:n}),onMouseLeave:()=>!t&&O(null),interceptedBadge:M,enableFloatAnimation:!0},N.id))}),jw=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:p,multiSelectState:f,turnPhase:h,localPlayerState:m,opponentPlayerState:g,localPlacedSections:b,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:C,handleTokenClick:P,handleAbilityIconClick:T,selectedDrone:O,recentlyHitDrones:M,potentialInterceptors:N,droneRefs:D,mandatoryAction:k,setHoveredTarget:R,interceptedBadge:U})=>(Ip(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(H=>{const q=t?r():i(),K=s&&l.some(ne=>ne.id===H&&ne.owner===q)||u&&p.some(ne=>ne.id===H&&ne.owner===q)||f&&p.some(ne=>ne.id===H&&ne.owner===q),ce=t&&(h==="deployment"||h==="action"),ue=t?"bg-cyan-400/10":"bg-pink-500/10";return v.jsx("div",{onClick:ne=>n(ne,H,t),className:`flex-1 rounded-lg transition-all duration-200 p-2
              ${K?"bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":ue}
              ${ce?"cursor-pointer hover:bg-cyan-900/20":""}
            `,children:EY(e.dronesOnBoard[H],t,H,m,g,b,S,A,C,P,T,O,f,M,N,D,k,l,p,R,U)},H)})}));function CY({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:p,turnPhase:f,reallocationPhase:h,shipAbilityMode:m,hoveredTarget:g,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,sectionRefs:P,mandatoryAction:T,gameEngine:O,getLocalPlayerId:M,getOpponentPlayerId:N,isMyTurn:D,getPlacedSectionsForEngine:k,passInfo:R,handleTargetClick:U,handleLaneClick:H,handleShipSectionClick:q,handleShipAbilityClick:K,handleTokenClick:ce,handleAbilityIconClick:ue,setHoveredTarget:ne,interceptedBadge:I}){return v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(kw,{player:t,isPlayer:!1,placedSections:r,onTargetClick:U,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:O,turnPhase:f,isMyTurn:D,passInfo:R,getLocalPlayerId:M,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:ne,sectionRefs:P}),v.jsx(jw,{player:t,isPlayer:!1,onLaneClick:H,getLocalPlayerId:M,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:k,handleTokenClick:ce,handleAbilityIconClick:ue,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:T,setHoveredTarget:ne,interceptedBadge:I}),v.jsx(jw,{player:e,isPlayer:!0,onLaneClick:H,getLocalPlayerId:M,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:k,handleTokenClick:ce,handleAbilityIconClick:ue,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:T,setHoveredTarget:ne,interceptedBadge:I}),v.jsx(kw,{player:e,isPlayer:!0,placedSections:n,onSectionClick:q,onAbilityClick:K,onTargetClick:U,isInteractive:f==="allocateShields"||h,selectedCard:i,validCardTargets:s,reallocationPhase:h,gameEngine:O,turnPhase:f,isMyTurn:D,passInfo:R,getLocalPlayerId:M,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:ne,sectionRefs:P})]})})}const yu=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i,scale:s=1})=>{const{name:l,cost:u,image:p,description:f,type:h,effect:m}=e,g=m?.goAgain,b=s!==1?{transform:`scale(${s})`,transformOrigin:"center center"}:{};return v.jsx("div",{onClick:S=>{S.stopPropagation(),(n||i)&&t(e)},className:`
        w-[225px] h-[275px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${n||i?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"opacity-60":""}
        ${i?"ring-4 ring-red-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...b},children:v.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-purple-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("div",{className:"absolute inset-0 bg-slate-900"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center py-1 px-3 bg-black/40 flex-shrink-0 h-8",children:[v.jsx("div",{className:"overflow-hidden text-center min-w-0",children:v.jsx("span",{className:"font-orbitron text-sm uppercase tracking-widest text-white inline-block truncate max-w-full",children:l})}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full flex-shrink-0",children:[v.jsx(Hc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:u})]})]}),v.jsx("div",{className:"p-1 flex-shrink-0",children:v.jsx("div",{className:"relative h-20 rounded border border-purple-400/50 overflow-hidden",children:v.jsx("img",{src:p,alt:l,className:"w-full h-full object-cover object-center",style:{objectFit:"cover"}})})}),v.jsx("div",{className:"mx-1 mb-1 flex-grow bg-black/60 backdrop-blur-sm border border-purple-800/70 p-2 overflow-y-auto rounded-md",children:v.jsx("p",{className:"text-sm text-gray-400 leading-tight text-center font-exo font-normal",children:f})}),v.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] gap-2 items-center px-2 border-t border-purple-800/70 flex-shrink-0 h-6 mt-auto",children:[v.jsx("div",{className:"w-4"}),v.jsx("div",{className:"flex items-center justify-center",children:v.jsxs("span",{className:"text-[10px] text-purple-400 uppercase tracking-widest font-semibold",children:[h," Card"]})}),v.jsx("div",{className:"w-4 flex items-center justify-center",children:g&&v.jsx(eR,{size:14,className:"text-cyan-400"})})]})]})]})})},PY="_footer_1yvc1_15",wY="_tabContainer_1yvc1_21",OY="_contentContainer_1yvc1_25",TY="_contentOpen_1yvc1_29",_Y="_contentClosed_1yvc1_34",DY="_contentWrapper_1yvc1_38",NY="_tabButton_1yvc1_44",kY="_tabButtonActive_1yvc1_48",MY="_tabButtonInactive_1yvc1_52",jY="_tabIcon_1yvc1_56",RY="_multiSelectOverlay_1yvc1_62",IY="_multiSelectText_1yvc1_66",LY="_handContainer_1yvc1_72",$Y="_cardPile_1yvc1_76",BY="_deckCard_1yvc1_80",UY="_deckCardText_1yvc1_88",zY="_discardCard_1yvc1_93",GY="_discardCardText_1yvc1_101",HY="_pileLabel_1yvc1_106",qY="_handSection_1yvc1_110",YY="_mandatoryDiscardWarning_1yvc1_130",FY="_handCardsContainer_1yvc1_134",VY="_handCardsWrapper_1yvc1_139",KY="_handCardsWrapperGap_1yvc1_143",WY="_cardWrapper_1yvc1_148",XY="_optionalDiscardControls_1yvc1_170",QY="_optionalDiscardCounter_1yvc1_174",ZY="_finishDiscardButton_1yvc1_178",JY="_droneContainer_1yvc1_185",eF="_droneGrid_1yvc1_189",tF="_logContainer_1yvc1_216",nF="_logHeader_1yvc1_220",rF="_logTitle_1yvc1_224",aF="_downloadButton_1yvc1_228",iF="_logTableWrapper_1yvc1_233",oF="_logTable_1yvc1_233",sF="_logTableHeader_1yvc1_241",lF="_logTableHeaderCell_1yvc1_245",cF="_logTableDebugHeader_1yvc1_249",uF="_logTableRow_1yvc1_253",dF="_logTableCell_1yvc1_257",fF="_logTableCellBold_1yvc1_261",pF="_logTableCellGray_1yvc1_265",hF="_logTableCellCyan_1yvc1_269",mF="_logTableCellYellow_1yvc1_273",gF="_logTableCellGrayText_1yvc1_277",yF="_logTableCellDebug_1yvc1_281",vF="_logTableCellCenter_1yvc1_285",bF="_aiDecisionButton_1yvc1_289",xF="_buttonDanger_1yvc1_300",SF="_buttonSuccess_1yvc1_305",AF="_buttonDisabled_1yvc1_310",xe={footer:PY,tabContainer:wY,contentContainer:OY,contentOpen:TY,contentClosed:_Y,contentWrapper:DY,tabButton:NY,tabButtonActive:kY,tabButtonInactive:MY,tabIcon:jY,multiSelectOverlay:RY,multiSelectText:IY,handContainer:LY,cardPile:$Y,deckCard:BY,deckCardText:UY,discardCard:zY,discardCardText:GY,pileLabel:HY,handSection:qY,mandatoryDiscardWarning:YY,handCardsContainer:FY,handCardsWrapper:VY,handCardsWrapperGap:KY,cardWrapper:WY,optionalDiscardControls:XY,optionalDiscardCounter:QY,finishDiscardButton:ZY,droneContainer:JY,droneGrid:eF,logContainer:tF,logHeader:nF,logTitle:rF,downloadButton:aF,logTableWrapper:iF,logTable:oF,logTableHeader:sF,logTableHeaderCell:lF,logTableDebugHeader:cF,logTableRow:uF,logTableCell:dF,logTableCellBold:fF,logTableCellGray:pF,logTableCellCyan:hF,logTableCellYellow:mF,logTableCellGrayText:gF,logTableCellDebug:yF,logTableCellCenter:vF,aiDecisionButton:bF,buttonDanger:xF,buttonSuccess:SF,buttonDisabled:AF};function EF({localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleCardClick:s,getLocalPlayerId:l,isMyTurn:u,hoveredCardId:p,setHoveredCardId:f,setIsViewDiscardModalOpen:h,setIsViewDeckModalOpen:m,optionalDiscardCount:g,handleRoundStartDraw:b,checkBothPlayersHandLimitComplete:S,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:C,setConfirmationModal:P,passInfo:T,validCardTargets:O,gameEngine:M,opponentPlayerState:N}){const U=e.hand.length>6,H=1410,q=e.hand.length;let K=0;return q>1&&U&&(K=(H-225)/(q-1)-225),v.jsxs("div",{className:xe.handContainer,children:[v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>h(!0),className:xe.discardCard,children:v.jsx("p",{className:xe.discardCardText,children:e.discardPile.length})}),v.jsx("p",{className:xe.pileLabel,children:"Discard Pile"})]}),v.jsxs("div",{className:xe.handSection,children:[i?.type==="discard"&&i.fromAbility&&v.jsxs("p",{className:xe.mandatoryDiscardWarning,children:["You must discard ",i.count," card(s)."]}),v.jsx("div",{className:xe.handCardsContainer,style:U?{width:`${H}px`}:{},children:v.jsx("div",{className:`${xe.handCardsWrapper} ${U?"":xe.handCardsWrapperGap}`,children:e.hand.map((ce,ue)=>{const ne=p?e.hand.findIndex(se=>se.instanceId===p):-1;let I="",X={zIndex:ue};return U&&ne!==-1&&(ue<ne?I="transform -translate-x-12":ue>ne?I="transform translate-x-12":(I="transform -translate-y-8 scale-105",X.zIndex=50)),U&&ue>0&&(X.marginLeft=`${K}px`),v.jsx("div",{className:`${xe.cardWrapper} ${I}`,style:X,onMouseEnter:()=>f(ce.instanceId),onMouseLeave:()=>f(null),children:v.jsx(yu,{card:ce,isSelected:n?.instanceId===ce.instanceId,isPlayable:r==="action"&&u()&&!T[`${l()}Passed`]&&e.energy>=ce.cost&&(!ce.targeting||M.getValidTargets(l(),null,ce,e,N).length>0)||r==="optionalDiscard"&&g<t.totals.discardLimit,isMandatoryTarget:i?.type==="discard",onClick:i?.type==="discard"?se=>P({type:"discard",target:se,onConfirm:()=>A(se),onCancel:()=>P(null),text:`Are you sure you want to discard ${se.name}?`}):r==="optionalDiscard"?se=>P({type:"discard",target:se,onConfirm:()=>C(se),onCancel:()=>P(null),text:`Are you sure you want to discard ${se.name}?`}):s})},ce.instanceId)})})})]}),v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>m(!0),className:xe.deckCard,children:v.jsx("p",{className:xe.deckCardText,children:e.deck.length})}),v.jsx("p",{className:xe.pileLabel,children:"Deck"}),r==="optionalDiscard"&&v.jsxs("div",{className:xe.optionalDiscardControls,children:[v.jsxs("p",{className:xe.optionalDiscardCounter,children:["Discarded: ",g," / ",t.discardLimit]}),v.jsx("button",{onClick:()=>{b(),S()},className:xe.finishDiscardButton,children:"Finish Discarding"})]})]})]})}function CF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:p,isMyTurn:f,turn:h,passInfo:m,validCardTargets:g}){return v.jsx("div",{className:xe.droneContainer,children:v.jsx("div",{className:xe.droneGrid,children:t.map((b,S)=>{const C=(h===1?e.initialDeploymentBudget+e.energy:e.energy)>=b.class,P=n?.type==="Upgrade"&&g.some(T=>T.id===b.name);return v.jsx(gf,{drone:b,onClick:s,isSelected:l&&l.name===b.name,isSelectable:r==="deployment"&&f()&&!m[`${p()}Passed`]&&C&&!i||P,deployedCount:e.deployedDroneCounts[b.name]||0,appliedUpgrades:e.appliedUpgrades[b.name]||[],isUpgradeTarget:P,onViewUpgrades:(T,O)=>u({droneName:T.name,upgrades:O})},S)})})})}function PF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return v.jsxs("div",{className:xe.logContainer,children:[v.jsxs("div",{className:xe.logHeader,children:[v.jsx("h3",{className:xe.logTitle,children:"Game Log"}),v.jsx("button",{onClick:t,className:xe.downloadButton,children:"Download CSV"})]}),v.jsx("div",{className:xe.logTableWrapper,children:v.jsxs("table",{className:xe.logTable,children:[v.jsx("thead",{className:xe.logTableHeader,children:v.jsxs("tr",{children:[v.jsx("th",{className:xe.logTableHeaderCell,children:"Rnd"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Timestamp (UTC)"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Player"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Action"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Source"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Target"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Outcome"}),v.jsx("th",{className:xe.logTableDebugHeader,children:"Debug Source"}),v.jsx("th",{className:xe.logTableHeaderCell})]})}),v.jsx("tbody",{children:e.map((r,i)=>v.jsxs("tr",{className:xe.logTableRow,children:[v.jsx("td",{className:xe.logTableCellBold,children:r.round}),v.jsx("td",{className:xe.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:xe.logTableCellCyan,children:r.player}),v.jsx("td",{className:xe.logTableCellYellow,children:r.actionType}),v.jsx("td",{className:xe.logTableCell,children:r.source}),v.jsx("td",{className:xe.logTableCell,children:r.target}),v.jsx("td",{className:xe.logTableCellGrayText,children:r.outcome}),v.jsx("td",{className:xe.logTableCellDebug,children:r.debugSource}),v.jsx("td",{className:xe.logTableCellCenter,children:r.aiDecisionContext&&v.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:xe.aiDecisionButton,title:"Show AI Decision Logic",children:"ℹ️"})})]},i)).reverse()})]})})]})}function wF({localPlayerState:e,localPlayerEffectiveStats:t,sortedLocalActivePool:n,gameLog:r,footerView:i,isFooterOpen:s,multiSelectState:l,selectedCard:u,turnPhase:p,mandatoryAction:f,handleFooterButtonClick:h,handleCardClick:m,cancelCardSelection:g,downloadLogAsCSV:b,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:T,setIsViewDeckModalOpen:O,optionalDiscardCount:M,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleToggleDroneSelection:k,selectedDrone:R,setViewUpgradesModal:U,handleConfirmMandatoryDiscard:H,handleRoundStartDiscard:q,setConfirmationModal:K,turn:ce,passInfo:ue,validCardTargets:ne,gameEngine:I,opponentPlayerState:X,setAiDecisionLogToShow:se}){return v.jsxs("footer",{className:xe.footer,children:[v.jsxs("div",{className:xe.tabContainer,children:[v.jsx("button",{onClick:()=>h("hand"),className:`${xe.tabButton} ${s&&i==="hand"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="hand"&&v.jsx(cf,{size:16}),"Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>h("drones"),className:`${xe.tabButton} ${s&&i==="drones"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="drones"&&v.jsx(cf,{size:16}),"Drones"]})}),v.jsx("button",{onClick:()=>h("log"),className:`${xe.tabButton} ${s&&i==="log"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="log"&&v.jsx(cf,{size:16}),"Log (",r.length,")"]})})]}),v.jsx("div",{className:`${xe.contentContainer} ${s?xe.contentOpen:xe.contentClosed}`,children:v.jsxs("div",{className:xe.contentWrapper,children:[l&&v.jsxs("div",{className:xe.multiSelectOverlay,children:[v.jsxs("span",{className:xe.multiSelectText,children:[l.phase==="select_source_lane"&&"Reposition: Select a source lane",l.phase==="select_drones"&&`Select Drones (${l.selectedDrones.length} / ${l.maxSelection})`,l.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:ge=>{ge.stopPropagation(),g()},className:xe.buttonDanger,children:"Cancel"}),l.phase==="select_drones"&&v.jsx("button",{onClick:ge=>{ge.stopPropagation(),l.selectedDrones.length>0&&console.log("Confirm drones clicked")},disabled:l.selectedDrones.length===0,className:`${xe.buttonSuccess} ${l.selectedDrones.length===0?xe.buttonDisabled:""}`,children:"Confirm Drones"})]}),i==="hand"&&v.jsx("div",{className:xe.viewContent,children:v.jsx(EF,{localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:u,turnPhase:p,mandatoryAction:f,handleCardClick:m,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:T,setIsViewDeckModalOpen:O,optionalDiscardCount:M,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleConfirmMandatoryDiscard:H,handleRoundStartDiscard:q,setConfirmationModal:K,passInfo:ue,validCardTargets:ne,gameEngine:I,opponentPlayerState:X})}),i==="drones"&&v.jsx("div",{className:xe.viewContent,children:v.jsx(CF,{localPlayerState:e,sortedLocalActivePool:n,selectedCard:u,turnPhase:p,mandatoryAction:f,handleToggleDroneSelection:k,selectedDrone:R,setViewUpgradesModal:U,getLocalPlayerId:S,isMyTurn:A,turn:ce,passInfo:ue,validCardTargets:ne})}),i==="log"&&v.jsx("div",{className:xe.viewContent,children:v.jsx(PF,{gameLog:r,downloadLogAsCSV:b,setAiDecisionLogToShow:se})})]})})]})}const OF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(es,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},TF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=E.useState(null);return v.jsxs(es,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(p=>{const f=s.appliedUpgrades[p.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",p.name]}),v.jsx("div",{className:"space-y-2",children:f.map(h=>v.jsx("div",{onClick:()=>u({droneName:p.name,instanceId:h.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===h.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:h.name})},h.instanceId))})]},p.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},_F=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=E.useState(null);return v.jsxs(es,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(yu,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},DF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:p})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(OF,{modalData:e,onClose:()=>t(null)}),n&&v.jsx(TF,{selectionData:n,onConfirm:async(f,h)=>{await l(f,h,u()),r(null)},onCancel:()=>{r(null),p()}}),i&&v.jsx(_F,{selectionData:i,onConfirm:async(f,h)=>{await l(f,h,u()),s(null)},onCancel:()=>{s(null),p()}})]}),NF=({visible:e,start:t,end:n,lineRef:r})=>e?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,kF=({top:e,left:t,size:n="large"})=>{const[r,i]=E.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return E.useEffect(()=>{const u=[];for(let p=0;p<l.particleCount;p++){const f=Math.PI*2*p/l.particleCount,h=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),m=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:p,x:Math.cos(f)*h,y:Math.sin(f)*h,size:m,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),v.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>v.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},MF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const p=n!=="local";return v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:p?"Opponent Thinking":"AI Thinking"})})},jF=({card:e})=>v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80",children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),Rw=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(kn,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(jF,{card:l})},`${l.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},RF=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:"✓"})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),IF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=E.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:p,filter:f}=r,h=S=>{s(A=>{const C=S.instanceId||`${S.id}-${S.name}`;return A.some(T=>(T.instanceId||`${T.id}-${T.name}`)===C)?A.filter(T=>(T.instanceId||`${T.id}-${T.name}`)!==C):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),s([]))},g=()=>{s([]),t()},b=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:g,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(kn,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:p==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:f?`Select ${u} ${f.type} card${u>1?"s":""} from ${l.length} found ${f.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${b?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>v.jsx(RF,{card:S,isSelected:i.some(C=>{const P=S.instanceId||`${S.id}-${S.name}`;return(C.instanceId||`${C.id}-${C.name}`)===P}),onClick:h},S.instanceId||`${S.id}-${A}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:g,className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!b,className:`font-bold py-3 px-8 rounded-full transition-colors ${b?"bg-green-600 text-white hover:bg-green-700":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"Confirm Selection"})]})]})})},LF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return v.jsxs(es,{title:"AI Action: Card Played",text:"",onClose:t,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:n.name}),r&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:r}),i&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(yu,{card:n,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},$F=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(gf,{drone:t,isSelectable:!1,deployedCount:0})})]})}),BF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return v.jsx(es,{title:"Deployment Complete",text:u,onClose:s,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},UF=({show:e,onContinue:t})=>e?v.jsx(es,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,zF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=s=>{switch(s){case"determineFirstPlayer":return"Waiting for Opponent";case"mandatoryDiscard":return"Opponent Discarding";case"allocateShields":return"Opponent Allocating Shields";case"mandatoryDroneRemoval":return"Opponent Removing Drones";case"deploymentComplete":return"Waiting for Opponent";default:return"Waiting for Opponent"}};return v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:i(t)})})},GF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&v.jsx("button",{onClick:e.onCancel,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"modal-title",children:n}),v.jsx("p",{className:"modal-text",children:e.text}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},HF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"modal-title",children:s}),v.jsx("p",{className:"modal-text",children:l})]})})},qF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{const i=e===t;if(!n)return null;const s=()=>{r()},l=()=>{Re.setState({appState:"menu"})};return v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-center justify-center",children:v.jsxs("div",{className:"flex flex-col items-center gap-12",children:[i?v.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"VICTORY"}):v.jsxs("div",{className:"relative w-full h-full flex items-center justify-center screen-flicker",children:[v.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center defeat-glow screen-distort z-10",style:{color:"#ff3232",textShadow:"0 0 30px rgba(255, 50, 50, 1), 0 0 60px rgba(255, 50, 50, 0.8), 0 0 90px rgba(255, 50, 50, 0.6)",filter:"drop-shadow(0 0 30px rgba(255, 50, 50, 0.6))"},children:"DEFEAT"}),v.jsx("div",{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent scanline-shutdown",style:{boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)"}}),v.jsx("div",{className:"absolute inset-0 bg-red-900/20 defeat-glow",style:{mixBlendMode:"multiply"}})]}),v.jsxs("div",{className:"flex gap-6 z-20",children:[v.jsx("button",{onClick:s,className:"px-8 py-4 bg-cyan-600 hover:bg-cyan-700 text-white font-bold text-xl rounded-lg transition-colors shadow-lg shadow-cyan-500/50",children:"View Board"}),v.jsx("button",{onClick:l,className:"px-8 py-4 bg-gray-600 hover:bg-gray-700 text-white font-bold text-xl rounded-lg transition-colors shadow-lg",children:"Exit to Menu"})]})]})})},YF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,p=>p.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),v.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),v.jsx("td",{className:"p-2 text-center",children:s.isChosen&&v.jsx("span",{className:"text-yellow-400",children:"✔"})})]},l))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},FF=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[v.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),v.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsx("div",{className:"bg-gray-900/95 p-8 text-center",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsxs("div",{className:"space-y-8",children:[v.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Deploy Drone?"}),v.jsxs("div",{className:"flex items-center justify-center gap-8",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-5xl font-bold text-cyan-400 mb-2",children:i}),v.jsx("div",{className:"text-cyan-300/50 uppercase text-xs tracking-widest",children:"Deployment"})]}),v.jsx("div",{className:"text-4xl text-cyan-500/30 font-light",children:"|"}),v.jsxs("div",{children:[v.jsx("div",{className:"text-5xl font-bold text-blue-400 mb-2",children:s}),v.jsx("div",{className:"text-blue-300/50 uppercase text-xs tracking-widest",children:"Energy"})]})]}),v.jsxs("div",{className:"flex justify-center gap-6 pt-4",children:[v.jsx("button",{onClick:n,className:"w-32 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Cancel"}),v.jsx("button",{onClick:r,className:"w-32 py-3 border-2 rounded uppercase text-sm tracking-wider font-semibold transition-all hover:scale-110 hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",style:{borderColor:"#00ff88",background:"linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 136, 255, 0.2))",color:"#00ff88",boxShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"Confirm"})]}),v.jsx("div",{className:"h-px w-80 mx-auto bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})})]})},VF=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Move"}),v.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},KF=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:f,shipAbilityMode:h,droneRefs:m,mandatoryAction:g})=>{if(!t||!e)return null;const{attackDetails:b,interceptors:S}=e,{attacker:A,target:C,targetType:P,lane:T}=b;return v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),v.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500 max-w-4xl w-full",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsxs("div",{className:"bg-gray-900/95 p-8",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:[v.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center mb-2",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Interception!"}),v.jsxs("p",{className:"text-center text-cyan-300/60 uppercase text-sm tracking-widest mb-8",children:["Combat in ",T?.replace("lane","Lane ")||"Unknown Lane"]}),v.jsx("div",{className:"mb-6 py-8",children:v.jsxs("div",{className:"flex items-start justify-center gap-6",children:[v.jsxs("div",{className:"flex flex-col items-center gap-4",children:[v.jsx("div",{className:"text-xs uppercase tracking-widest text-pink-400/60",children:"Attacker"}),v.jsx("div",{className:"transform scale-150 origin-top",children:v.jsx(ff,{drone:A,isPlayer:!1,lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})})]}),v.jsx("div",{className:"text-5xl font-light text-cyan-500/30 px-4 pt-16",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center gap-4",children:[v.jsx("div",{className:"text-xs uppercase tracking-widest text-cyan-400/60",children:"Target"}),P==="drone"?v.jsx("div",{className:"transform scale-150 origin-top",children:v.jsx(ff,{drone:C,isPlayer:!0,lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})}):v.jsx("div",{className:"transform scale-[0.95] origin-top",style:{width:"400px"},children:v.jsx(Jf,{section:C.name,stats:f.shipSections[C.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:f,shipAbilityMode:h})})]})]})}),v.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-4"}),v.jsx("h3",{className:"text-center text-2xl font-bold uppercase tracking-wider mb-1",style:{background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Choose Interceptor"}),v.jsx("p",{className:"text-center text-cyan-300/50 text-sm mb-4",children:"Select a drone to intercept the attack"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-12 mb-6",children:S.map(O=>v.jsx("div",{className:"cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_20px_rgba(0,255,136,0.4)]",children:v.jsx(ff,{drone:O,isPlayer:!0,onClick:()=>n(O),lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})},O.id))}),v.jsx("div",{className:"flex justify-center gap-6 pt-4",children:v.jsx("button",{onClick:r,className:"w-40 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Decline"})}),v.jsx("div",{className:"h-px w-80 mx-auto mt-8 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})]})},WF=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),v.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},XF=({show:e,opponentName:t="Opponent"})=>e?v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Opponent Deciding Interception"})}):null,QF=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},ZF=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},JF=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase());let p="";return l&&(p=l.name),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${p}`:"","? This will cost ",i.cost.energy," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},eV=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),v.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>v.jsx(yu,{card:i,isPlayable:!1},i.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),tV=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=E.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(g,b)=>{navigator.clipboard.writeText(JSON.stringify(g,null,2)).then(()=>console.log(`${b} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},p=g=>g===null?"null":g===void 0?"undefined":typeof g=="boolean"?g.toString():typeof g=="string"?`"${g}"`:typeof g=="number"?g.toString():Array.isArray(g)?g.length===0?"[]":`[${g.length} items]`:typeof g=="object"?Object.keys(g).length===0?"{}":`{${Object.keys(g).length} properties}`:String(g),f=(g,b,S="")=>v.jsxs("div",{className:`mb-6 ${S}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-white",children:b}),v.jsxs("button",{onClick:()=>u(g,b),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[v.jsx(tv,{size:12}),"Copy"]})]}),v.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-800",children:[v.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),v.jsx("tbody",{children:Object.entries(g).map(([A,C],P)=>v.jsxs("tr",{className:P%2===0?"bg-gray-900":"bg-gray-800",children:[v.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),v.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:p(C)}),v.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof C=="object"&&C!==null?Array.isArray(C)?"array":"object":typeof C})]},A))})]})})]}),h=()=>{const g={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return v.jsxs("div",{className:"p-4 space-y-6",children:[f(g,"Core Game Info"),f(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),f(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),f({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),f({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&f(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return v.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const g=r.getEffectiveShipStats(l.player1,l.placedSections),b=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(P=>{S[P]=l.player1.dronesOnBoard[P].map(T=>({drone:T.name,effectiveStats:r.getEffectiveStats(T,P)})),A[P]=l.player2.dronesOnBoard[P].map(T=>({drone:T.name,effectiveStats:r.getEffectiveStats(T,P)}))});const C=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return v.jsxs("div",{className:"p-4 space-y-6",children:[f(g,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),f(b,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),f(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),f(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),f(C,"GameDataService Cache Statistics")]})}catch(g){return v.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",g.message]})}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(kn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Game Debug View"}),v.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[v.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),v.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),v.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?h():m()}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},nV=(e,t)=>{const[n,r]=E.useState([]),i=E.useCallback((s,l=null,u="large")=>{console.log("🔥 [EXPLOSION] triggerExplosion called:",{targetId:s,capturedPosition:l,size:u});const p=Me.createExplosionEffect(s);let f=l;if(!f){const h=e.current[s];console.log("🔥 [EXPLOSION] Looking for drone element:",{targetId:s,found:!!h}),f=Xy(h,t.current)}if(console.log("🔥 [EXPLOSION] Position calculated:",f),f){const h=`${p.timestamp}-${Math.random()}`;console.log("🔥 [EXPLOSION] Adding explosion to state:",{explosionId:h,top:f.y,left:f.x,size:u}),r(m=>[...m,{id:h,top:f.y,left:f.x,size:u}]),setTimeout(()=>{r(m=>m.filter(g=>g.id!==h))},p.duration)}else console.warn("🔥 [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class rV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_REVEAL:{duration:1e3,type:"CARD_REVEAL_EFFECT",config:{}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},PHASE_ANNOUNCEMENT:{duration:1500,type:"PHASE_ANNOUNCEMENT_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{revealAt:.7}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t){if(console.log("[ANIMATION EVENTS] AnimationManager executing:",t),t.forEach((n,r)=>{console.log(`[ANIMATION EVENTS] Animation ${r+1}:`,{name:n.animationName,type:this.animations[n.animationName]?.type,duration:this.animations[n.animationName]?.duration,payload:n.payload})}),console.log("🎬 [AI ANIMATION DEBUG] AnimationManager.executeAnimations() called:",{effectCount:t?.length||0,effects:t?.map(n=>n.animationName)}),!t||t.length===0){console.log("🎬 [AI ANIMATION DEBUG] No effects to execute, returning early");return}this.setBlocking(!0);try{const n=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED"];let r=0;for(;r<t.length;){const i=t[r];if(n.includes(i.animationName)){const s=[];for(;r<t.length&&n.includes(t[r].animationName);)s.push(t[r]),r++;console.log("🎬 [ANIMATION DEBUG] Playing damage effects in parallel:",s.map(l=>l.animationName)),await Promise.all(s.map(async l=>{const u=this.animations[l.animationName];if(!u){console.warn(`❌ [ANIMATION DEBUG] Unknown animation: ${l.animationName}`);return}const p=this.visualHandlers.get(u.type);if(!p){console.warn(`❌ [ANIMATION DEBUG] No visual handler for: ${u.type}`);return}return new Promise(f=>{p({...l.payload,config:u.config,onComplete:f}),setTimeout(f,u.duration)})})),console.log("🎬 [ANIMATION DEBUG] All damage effects completed")}else{console.log("🎬 [ANIMATION DEBUG] Processing sequential effect:",i.animationName);const s=this.animations[i.animationName];if(!s){console.warn(`❌ [ANIMATION DEBUG] Unknown animation: ${i.animationName}`),r++;continue}const l=this.visualHandlers.get(s.type);if(!l){console.warn(`❌ [ANIMATION DEBUG] No visual handler for: ${s.type}`),r++;continue}await new Promise(u=>{l({...i.payload,config:s.config,onComplete:u}),setTimeout(u,s.duration)}),console.log("🎬 [ANIMATION DEBUG] Animation completed:",i.animationName),r++}}}finally{await new Promise(n=>setTimeout(n,200)),this.setBlocking(!1),console.log("🎬 [AI ANIMATION DEBUG] All animations completed, blocking released")}}setBlocking(t){console.log(`🔒 [ANIMATION BLOCKING] Setting blocking to: ${t}`),this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const aV=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,s]=E.useState(0);return E.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,p=150;setTimeout(()=>s(n),10),setTimeout(()=>s(0),l+u),setTimeout(()=>{r?.()},l+u+p)},[n,r,e]),e?v.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},iV=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[s,l]=E.useState(!1);if(E.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!s||!t||!n)return null;switch(e){case"LASER_BLAST":return v.jsx(oV,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return v.jsx(sV,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return v.jsx(lV,{endPos:n,duration:r});default:return null}},oV=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return v.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},sV=({startPos:e,duration:t})=>v.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),lV=({endPos:e,duration:t})=>v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),v.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function cV(e,t,n,r,i,s,l,u,p,f,h,m,g,b,S,A){E.useEffect(()=>{r(),i();const C=new rV(e),P=(O,M,N,D)=>{if(D==="drone")return t.current[N]||null;if(D==="section"){const k=e.getLocalPlayerId(),R=O===k?"local":"opponent";return n.current[`${R}-${N}`]||null}return null};C.registerVisualHandler("DRONE_FLY",O=>{const{droneId:M,sourcePlayer:N,sourceLane:D,targetId:k,targetPlayer:R,targetLane:U,targetType:H,config:q,attackValue:K,onComplete:ce}=O;if(q.isReturn){ce?.();return}console.log("🔫 [LASER DEBUG] DRONE_FLY handler called:",{droneId:M,sourcePlayer:N,sourceLane:D,targetId:k,targetPlayer:R,targetType:H,attackValue:K,config:q});const ue=P(N,D,M,"drone"),ne=P(R,U,k,H);if(!ue||!ne){console.warn("⚠️ [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!ue,hasTarget:!!ne,sourcePlayer:N,sourceLane:D,targetPlayer:R,targetType:H,targetId:k}),ce?.();return}console.log("✅ [LASER DEBUG] Creating laser effect with attack:",K);const I=l(ue,u.current),X=l(ne,u.current),se=`laser-${M}-${Date.now()}`;S(ge=>[...ge,{id:se,startPos:I,endPos:X,attackValue:K||1,duration:500,onComplete:()=>{S(j=>j.filter(V=>V.id!==se)),ce?.()}}])}),C.registerVisualHandler("EXPLOSION_EFFECT",O=>{const{targetId:M,targetPlayer:N,targetLane:D,targetType:k,config:R,onComplete:U}=O,H=P(N,D,M,k);if(H){const q=l(H,u.current);s(M,q,R?.size||"large")}else console.warn("⚠️ [EXPLOSION DEBUG] Target element not found:",{targetId:M,targetPlayer:N,targetLane:D,targetType:k});U?.()}),C.registerVisualHandler("FLASH_EFFECT",O=>{const{targetId:M,targetPlayer:N,targetLane:D,targetType:k,config:R,onComplete:U}=O,H=P(N,D,M,k);if(!H){console.warn("⚠️ [FLASH DEBUG] Target element not found:",{targetId:M,targetPlayer:N,targetLane:D,targetType:k}),U?.();return}const q=H.getBoundingClientRect(),K=`flash-${M}-${Date.now()}`;h(ce=>[...ce,{id:K,position:{left:q.left,top:q.top,width:q.width,height:q.height},color:R.color,intensity:R.intensity,onComplete:()=>{h(ue=>ue.filter(ne=>ne.id!==K)),U?.()}}])}),C.registerVisualHandler("CARD_VISUAL_EFFECT",O=>{const{visualType:M,sourcePlayer:N,targetId:D,targetPlayer:k,targetLane:R,targetType:U,duration:H,onComplete:q}=O,K=u.current?.getBoundingClientRect();if(!K){q?.();return}const ce=e.getLocalPlayerId(),ue=N===ce?K.bottom-100:K.top+100,ne=K.left+K.width/2;let I;if(U==="lane")if(k==="center")I={x:K.left+K.width/2,y:K.top+K.height/2};else{const se=N===ce?k:k===ce?ce:k,Y=(e.getState()[se]?.dronesOnBoard||{})[R]||[];if(Y.length>0){const ie=Y[0],ve=t.current[ie.id];if(ve){const G=ve.getBoundingClientRect();I={x:G.left+G.width/2,y:G.top+G.height/2}}else I={x:K.left+K.width/2,y:K.top+K.height/2}}else{const ie=R==="lane1"?0:R==="lane2"?1:2,ve=se===ce?K.bottom-200:K.top+200;I={x:K.left+K.width/4*(ie+1),y:ve}}}else{const se=P(k,R,D,U);if(!se){console.warn("⚠️ [CARD VISUAL DEBUG] Target element not found:",{targetId:D,targetPlayer:k,targetLane:R,targetType:U}),q?.();return}const ge=se.getBoundingClientRect();I={x:ge.left+ge.width/2,y:ge.top+ge.height/2}}const X=`cardvisual-${Date.now()}`;m(se=>[...se,{id:X,visualType:M||"LASER_BLAST",startPos:{x:ne,y:ue},endPos:I,duration:H||800,onComplete:()=>{m(ge=>ge.filter(j=>j.id!==X)),q?.()}}])}),C.registerVisualHandler("CARD_REVEAL_EFFECT",O=>{const{cardData:M,actingPlayerId:N,onComplete:D}=O;console.log("🃏 [CARD REVEAL DEBUG] CARD_REVEAL_EFFECT handler called:",{cardName:M?.name,actingPlayerId:N});const k=e.getLocalPlayerId(),R=N===k,U=`cardreveal-${Date.now()}`;g(H=>[...H,{id:U,card:M,label:R?"You Played":"Opponent Played",onComplete:()=>{g(q=>q.filter(K=>K.id!==U)),D?.()}}])}),C.registerVisualHandler("PHASE_ANNOUNCEMENT_EFFECT",O=>{const{phaseText:M,phaseName:N,firstPlayerId:D,onComplete:k}=O;let R=null;if(D){const H=e.getLocalPlayerId();R=D===H?"You Go First":"Opponent Goes First"}console.log("📢 [PHASE ANNOUNCEMENT DEBUG] PHASE_ANNOUNCEMENT_EFFECT handler called:",{phaseName:N,phaseText:M,firstPlayerId:D,localPlayerId:e.getLocalPlayerId(),calculatedSubtitle:R});const U=`phaseannouncement-${Date.now()}`;b(H=>[...H,{id:U,phaseText:M,subtitle:R,onComplete:()=>{b(q=>q.filter(K=>K.id!==U)),k?.()}}])}),C.registerVisualHandler("SHAKE_EFFECT",O=>{const{targetId:M,config:N,onComplete:D}=O,k=t.current[M];k?(k.classList.add("animate-shake-damage"),setTimeout(()=>{k.classList.remove("animate-shake-damage"),D?.()},N?.duration||500)):D?.()}),C.registerVisualHandler("TELEPORT_EFFECT",O=>{const{targetId:M,laneId:N,playerId:D,onComplete:k}=O;console.log("✨ [TELEPORT DEBUG] TELEPORT_EFFECT handler called:",{targetId:M,laneId:N,playerId:D});const R=t.current[M];if(!R){console.warn("⚠️ [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",M),k?.();return}const U=l(R,u.current);console.log("✨ [TELEPORT DEBUG] Using exact drone placeholder position:",U);const H=e.getLocalPlayerId(),K=D===H?"#00ffff":"#ec4899",ce=`teleport-${M}-${Date.now()}`;A(ue=>[...ue,{id:ce,top:U.y,left:U.x,color:K,duration:600,onComplete:()=>{A(ne=>ne.filter(I=>I.id!==ce)),k?.()}}])});const T=e.subscribe(O=>{O.type==="animationStateChange"&&f(O.blocking)});return e.actionProcessor.setAnimationManager(C),T},[r,i,e,s,t,n,l,u,p,f,h,m,g,b,S,A])}const uV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=E.useState(t),[u,p]=E.useState([]),f=E.useRef(),h=E.useRef(Date.now());return E.useEffect(()=>{const m=r.duration||800,g=()=>{const b=Date.now()-h.current,S=Math.min(b/m,1),A=S<.5?2*S*S:-1+(4-2*S)*S,C=t.x+(n.x-t.x)*A,P=t.y+(n.y-t.y)*A;l({x:C,y:P}),r.trail&&p(T=>[...T.slice(-8),{id:Date.now(),x:C,y:P}]),S<1?f.current=requestAnimationFrame(g):i?.()};return f.current=requestAnimationFrame(g),()=>{f.current&&cancelAnimationFrame(f.current)}},[t,n,r,i]),v.jsxs(v.Fragment,{children:[u.map((m,g)=>v.jsx("div",{style:{position:"fixed",left:m.x+35,top:m.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+g*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},m.id)),v.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:v.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},dV=({card:e,label:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),v.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[v.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),v.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[v.jsx("h2",{className:`
            text-4xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
            card-reveal-label
            ${r?"card-reveal-label-show":""}
          `,children:t}),v.jsx("div",{className:`
            transform scale-110 card-reveal-card
            ${r?"":"card-reveal-dissolve"}
          `,children:v.jsx(yu,{card:e,isPlayable:!1})}),v.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            card-reveal-scanline
            ${r?"card-reveal-scanline-active":""}
          `})]})]})},fV=({phaseText:e,subtitle:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1500);return()=>clearTimeout(s)},[n]),v.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[v.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),v.jsxs("div",{className:`
          relative flex flex-col items-center
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[v.jsx("h1",{className:`
            text-6xl font-orbitron font-black uppercase tracking-widest text-center
            phase-announcement-text
            ${r?"phase-announcement-shine":""}
          `,style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:e}),t&&v.jsx("p",{className:`
              text-2xl font-orbitron font-medium uppercase tracking-wider text-center
              text-cyan-300/80 mt-4
              transition-all duration-300
              ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
            `,children:t}),v.jsx("div",{className:`
            mt-8 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent
            transition-all duration-500
            ${r?"w-96 opacity-100":"w-0 opacity-0"}
          `}),v.jsx("div",{className:`
            absolute inset-0 pointer-events-none overflow-hidden
          `,children:v.jsx("div",{className:`
              absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent
              phase-announcement-scanline
              ${r?"phase-announcement-scanline-active":""}
            `})})]})]})},pV=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=E.useState(0);E.useEffect(()=>{setTimeout(()=>l(1),50);const g=r*.7;setTimeout(()=>l(0),g);const b=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(b)}},[r,i]);const u=t.x-e.x,p=t.y-e.y,f=Math.sqrt(u*u+p*p),h=Math.atan2(p,u)*(180/Math.PI),m=Math.max(3,2+n*1.5);return v.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${f}px`,height:`${m}px`,transformOrigin:"0 50%",transform:`rotate(${h}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[v.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${m*2}px rgba(255, 0, 0, 0.8), 0 0 ${m*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),v.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},hV=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=E.useState([]);return E.useEffect(()=>{const u=[];for(let h=0;h<16;h++){const m=Math.PI*2*h/16;u.push({id:h,angle:m,delay:h/16*200})}l(u);const f=setTimeout(()=>{i?.()},n);return()=>clearTimeout(f)},[n,i]),v.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},Iw=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:p,addLogEntry:f,resetGame:h,processAction:m,gameStateManager:g,p2pManager:b}=Gi(),{getEffectiveStats:S,getEffectiveShipStats:A,gameDataService:C}=Ip(),P=!0,[T,O]=E.useState(!1),[M,N]=E.useState(!1),[D,k]=E.useState([]),[R,U]=E.useState([]),[H,q]=E.useState([]),[K,ce]=E.useState([]),[ue,ne]=E.useState([]),[I,X]=E.useState([]),[se,ge]=E.useState([]),[j,V]=E.useState(!1),[Y,ie]=E.useState(null),[ve,G]=E.useState(null),[te,ye]=E.useState(null),[pe,ae]=E.useState(null),[de,be]=E.useState(!1),[fe,rt]=E.useState(!1),[Ie,Ot]=E.useState(null),[Ct,pt]=E.useState(!1),[Yr,ca]=E.useState(!1),[ts,Wi]=E.useState(!1),[We,zt]=E.useState(null),[Lp,vu]=E.useState(null),[Xi,An]=E.useState(null),[ir,Mn]=E.useState(null),[ns,Qi]=E.useState(null),[$p,Zi]=E.useState([]),[rs,Fr]=E.useState(!1),[as,Ji]=E.useState(null),[ua,is]=E.useState(null),[wl,os]=E.useState(null),[Ja,Ol]=E.useState("drones"),[Tl,ss]=E.useState(!0),[_l,bu]=E.useState([]),[ei,xu]=E.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[da,rn]=E.useState({}),[He,En]=E.useState(null),[fa,Dl]=E.useState([]),[or,Vr]=E.useState(null),[Nr,kr]=E.useState(null),[Mt,Cn]=E.useState(null),[Hn,Kr]=E.useState([]),[xt,sr]=E.useState(null),[ti,lr]=E.useState(null),[Xe,Mr]=E.useState(null),[Su,Nl]=E.useState(null),[Bp,eo]=E.useState(null),[ls,cr]=E.useState(null),[ur,ni]=E.useState(null),[ri,cs]=E.useState(!1),[us,pa]=E.useState(null),[to,an]=E.useState(null),[Wr,kl]=E.useState(null),[ai,ha]=E.useState(0),[ii,ds]=E.useState(0),[Pn,fs]=E.useState(null),[Au,ps]=E.useState(null),[no,Up]=E.useState(null),[hs,ma]=E.useState(null),[ex,zp]=E.useState(null),[Eu,ms]=E.useState(0),gs=E.useRef(null),ro=E.useRef({}),ao=E.useRef({}),jr=E.useRef(null),Rr=E.useRef(!1),{explosions:oi,triggerExplosion:ga}=nV(ro,jr);cV(g,ro,ao,s,l,ga,Xy,jr,k,V,U,q,ce,ne,X,ge),E.useEffect(()=>{mf.initialize(g,g.actionProcessor,()=>e.gameMode!=="local",Ur),console.log("🔧 GameFlowManager initialized")},[]),E.useEffect(()=>{const B=me=>{const{type:he,phase:Se,playerId:Le,data:ke}=me;if(console.log(`🔔 App.jsx received PhaseManager event: ${he}`,{phase:Se,playerId:Le}),he==="phaseTransition"){const{newPhase:Ye,previousPhase:jn,firstPlayerResult:Zr}=me;console.log(`🔄 App.jsx handling phase transition: ${jn} → ${Ye}`),Ie===jn&&Ot(null),Ye==="deploymentComplete"&&(console.log("🎯 Deployment complete phase started, showing modal"),be(!0))}else he==="phaseComplete"&&(console.log(`🎯 App.jsx handling phase completion: ${Se}`),Ie===Se&&Ot(null),Se==="determineFirstPlayer"&&console.log("✅ Both players acknowledged first player determination"),Se==="deploymentComplete"&&console.log("✅ Both players acknowledged deployment complete"))},J=mf.subscribe(B);return()=>{J()}},[i,n,ie,Ie]);const{turnPhase:lt,turn:ya,currentPlayer:va,firstPlayerOfRound:si,firstPasserOfPreviousRound:Xr,firstPlayerOverride:Cu,passInfo:Tt,winner:jt,unplacedSections:Pu,shieldsToAllocate:ys,opponentShieldsToAllocate:wu,gameLog:li,placedSections:Ml}=e,[Gp,wn]=E.useState(va),ba=E.useRef(Tt),vs=E.useRef(lt),io=E.useRef(jt);E.useEffect(()=>{ba.current=Tt},[Tt]),E.useEffect(()=>{vs.current=lt},[lt]),E.useEffect(()=>{io.current=jt},[jt]);const De=s(),Ue=l(),xa=u(),Qr=p();if(!De||!Ue)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});E.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]);const oo=E.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);E.useEffect(()=>{if(!i())return;const B=me=>{if(console.log("🔥 P2P Event received in App:",me),me.type==="PHASE_COMPLETED"){const{phase:he}=me.data||me;console.log(`🔥 Opponent completed phase: ${he}`)}};return b.subscribe(B)},[i,b]);const so=De?A(De,xa):null,Ou=Ue?A(Ue,Qr):null,Tu=E.useMemo(()=>De?Object.values(De.dronesOnBoard).flat().length:0,[De?.dronesOnBoard]),_u=E.useMemo(()=>Ue?Object.values(Ue.dronesOnBoard).flat().length:0,[Ue?.dronesOnBoard]),jl=E.useMemo(()=>[...De.activeDronePool].sort((B,J)=>B.class!==J.class?B.class-J.class:B.name.localeCompare(J.name)),[De.activeDronePool]);E.useMemo(()=>De?Object.keys(De.shipSections).some(B=>De.shipSections[B].allocatedShields<C.getEffectiveSectionMaxShields(B,De,xa)):!1,[De.shipSections,xa,C]);const Ze=E.useCallback(async(B,J)=>e.gameMode==="guest"?(console.log("[GUEST] Sending action to host:",B,J),b.sendActionToHost(B,J),{success:!0,isGuest:!0}):await m(B,J),[e.gameMode,m]);E.useCallback(B=>{if(console.log(`🔥 sendPhaseCompletion called for phase: ${B}`),i()){const J={type:"PHASE_COMPLETED",data:{phase:B}};console.log("🔥 Sending phase completion message:",J),b.sendData(J),console.log(`🔥 Sent phase completion: ${B}`)}else console.log("🔥 Not multiplayer, skipping network send")},[i,b]),E.useCallback(async()=>{ua&&!ua.card.effect.goAgain?await Ze("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):ua&&ua.card.effect.goAgain&&!jt&&await Ze("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),is(null)},[m,n,r,ua,jt]);const Hp=E.useCallback(async()=>{await Ze("resetShields",{playerId:n()})},[Ze,n]),qp=E.useCallback(async()=>{await Ze("commitment",{playerId:n(),phase:"allocateShields",actionData:{committed:!0}})},[Ze,n]);E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:J}=Me.calculateAllValidTargets(He,or,Xe,Mt,De,Ue);Dl(B),Kr(J),He&&(Cn(null),Vr(null))},[He,or,Mt,De,Ue,Xe]);const Sa=()=>{He&&(En(null),zt(null))},on=()=>{Cn(null),Mr(null)},lo=E.useCallback(async B=>{if(Rr.current){console.warn("Attack already in progress. Aborting duplicate call.");return}Rr.current=!0;try{await new Promise(me=>setTimeout(me,250));const J=await Ze("attack",{attackDetails:B});if(J?.needsInterceptionDecision){console.log("🛡️ [APP] Interception decision needed, showing modal..."),Qi(J.interceptionData),Rr.current=!1;return}}catch(J){console.error("Error in resolveAttack:",J)}finally{Rr.current=!1}},[ga,m,n,r]),Du=E.useCallback(async(B,J,me)=>{try{const he=await Ze("ability",{droneId:J.id,abilityIndex:J.abilities.findIndex(Se=>Se.name===B.name),targetId:me?.id||null});Sa()}catch(he){console.error("Error in resolveAbility:",he),Sa()}},[m,n]),Yp=E.useCallback(async(B,J,me)=>{const he=await Ze("shipAbility",{ability:B,sectionName:J,targetId:me?.id||null,playerId:n()});if(he.mandatoryAction){ni(he.mandatoryAction),Ol("hand"),ss(!0),Vr(null),kr(null);return}if(he.requiresShieldReallocation){Vr(null),kr(null);return}return Vr(null),kr(null),he},[m,n]),Rl=E.useCallback(async(B,J,me,he=null)=>{if(me===r()){let Le="",ke="";if(J)if(J.name){if(Le=J.name,J.id&&J.owner){const Ye=J.owner===n()?De:Ue;for(const[jn,Zr]of Object.entries(Ye.dronesOnBoard))if(Zr.some(fo=>fo.id===J.id)){ke=jn.replace("lane","Lane ");break}}}else J.id.startsWith("lane")?(Le=`Lane ${J.id.slice(-1)}`,ke=`Lane ${J.id.slice(-1)}`):Le=J.id.replace(/([A-Z])/g," $1").replace(/^./,Ye=>Ye.toUpperCase());is({card:B,targetName:Le,targetLane:ke})}const Se=await Ze("cardPlay",{card:B,targetId:J?.id||null,playerId:me});if(Se.needsCardSelection){if(Se.needsCardSelection.type==="single_move"||Se.needsCardSelection.type==="multi_move"){Mr({card:Se.needsCardSelection.card,phase:Se.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}an({...Se.needsCardSelection,onConfirm:Le=>{Fp(Le,Se.needsCardSelection,B,J,me,he,Se.newPlayerStates),an(null)},onCancel:()=>{an(null),me===n()&&(on(),sr(null))}});return}return me===n()&&(on(),sr(null)),Se},[m,n,De,Ue]),Fp=E.useCallback((B,J,me,he,Se,Le,ke=null)=>{const{searchedCards:Ye,remainingDeck:jn,discardPile:Zr,shuffleAfter:fo}=J,Aa=Ye.filter(di=>{const Bu=di.instanceId||`${di.id}-${di.name}`;return!B.some(po=>(po.instanceId||`${po.id}-${po.name}`)===Bu)}),ui=ke||{player1:De,player2:Ue},Ea=Se===n()?ui[n()]:ui[r()],ch=[...Ea.hand,...B];let sn=[...jn,...Aa];fo&&(sn=sn.sort(()=>.5-Math.random()));const dr={...Ea,deck:sn,hand:ch,discardPile:Zr};f({player:Ea.name,actionType:"CARD_SELECTION",source:me.name,target:`Selected ${B.length} cards`,outcome:`Drew: ${B.map(di=>di.name).join(", ")}`},"handleCardSelection",Se===r()?Le:null);const $u={[n()]:Se===n()?{...Ea,deck:dr.deck,hand:dr.hand,discardPile:dr.discardPile}:ui[n()],[r()]:Se===r()?{...Ea,deck:dr.deck,hand:dr.hand,discardPile:dr.discardPile}:ui[r()]},$l=Me.finishCardPlay(me,Se,$u);g.setPlayerStates($l.newPlayerStates.player1,$l.newPlayerStates.player2),Se===n()&&(on(),sr(null))},[De,Ue,f]),Il=E.useCallback(async(B,J,me,he)=>{await Ze("movementCompletion",{card:B,movementType:"multi_move",drones:J,fromLane:me,toLane:he,playerId:n()}),Mr(null),on()},[m,n]),Vp=E.useCallback(async(B,J,me,he)=>{await Ze("movementCompletion",{card:B,movementType:"single_move",drones:[J],fromLane:me,toLane:he,playerId:n()}),Mr(null),on()},[m,n]),Kp=B=>{Tl?Ja===B?ss(!1):Ol(B):(ss(!0),Ol(B))};E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:J}=Me.calculateAllValidTargets(He,or,Xe,Mt,De,Ue);Dl(B),Kr(J),He&&(Cn(null),Vr(null))},[He,or,Mt,De,Ue,Xe]),E.useEffect(()=>{jt&&!Ct&&pt(!0)},[jt,Ct]),E.useEffect(()=>{if(lt==="action"){const B=Me.calculatePotentialInterceptors(We,De,Ue,oo());Zi(B)}else Zi([])},[We,lt,De,Ue,Me,xa,Qr]),E.useEffect(()=>{const B=n();if(e.interceptionPending){const{attackingPlayerId:J,defendingPlayerId:me,attackDetails:he,interceptors:Se}=e.interceptionPending;J===B?Fr(!0):me===B&&Qi({attackDetails:he,interceptors:Se})}else Fr(!1),Qi(null)},[e.interceptionPending,n]),E.useEffect(()=>{if(e.lastInterception){const{interceptor:B,timestamp:J}=e.lastInterception;Ji({droneId:B.id,timestamp:J})}},[e.lastInterception]),E.useEffect(()=>{vu(null)},[We]),E.useEffect(()=>{if(We&&!He&&lt==="action"){const B=Xy(ro.current[We.id],jr.current);B&&xu({visible:!0,start:B,end:{x:B.x,y:B.y}})}else xu(B=>({...B,visible:!1}))},[We,lt,He]),E.useEffect(()=>{const B=me=>{if(ei.visible&&gs.current&&jr.current){const he=jr.current.getBoundingClientRect(),Se=me.clientX-he.left,Le=me.clientY-he.top;gs.current.setAttribute("x2",Se),gs.current.setAttribute("y2",Le)}},J=jr.current;return J?.addEventListener("mousemove",B),()=>{J?.removeEventListener("mousemove",B)}},[ei.visible]),E.useEffect(()=>{jt&&Rr.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),Rr.current=!1)},[jt,lt,va]),E.useEffect(()=>{e.gameMode==="guest"&&(console.log("✅ [GUEST RENDER] Emitting render_complete event"),g.emit("render_complete"))},[e,g]);const Wp=()=>{h(),Rr.current=!1,zt(null),ie(null),En(null),Dl([]),ni(null),cs(!1),pa(null),Cn(null),Kr([]),sr(null),pt(!1)},Nu=async B=>{const{turnPhase:J}=e;J==="allocateShields"?await Ze("addShield",{sectionName:B,playerId:n()}):await Ze("reallocateShields",{action:"add",sectionName:B,playerId:n()})},Xp=async B=>{if(ii<=0||De.shipSections[B].allocatedShields<=0)return;(await Ze("reallocateShields",{action:"remove",sectionName:B,playerId:n()})).success&&(ds(he=>he-1),ha(he=>he+1))},Qp=async B=>{if(ai<=0)return;(await Ze("reallocateShields",{action:"add",sectionName:B,playerId:n()})).success&&ha(me=>me-1)},Zp=()=>{ps(JSON.parse(JSON.stringify(De.shipSections))),kl("adding")},Jp=async()=>{Wr==="removing"?(await Ze("reallocateShields",{action:"restore",originalShipSections:Pn,playerId:n()}),ds(hs.ability.effect.value.maxShields),ha(0)):Wr==="adding"&&(await Ze("reallocateShields",{action:"restore",originalShipSections:Au,playerId:n()}),ha(ii+ai))},eh=async()=>{await Ze("reallocateShields",{action:"restore",originalShipSections:Pn,playerId:n()}),kl(null),ds(0),ha(0),fs(null),ps(null),ma(null)},th=()=>{kr({ability:hs.ability,sectionName:hs.sectionName,target:null})},nh=async()=>{console.log("🎯 App.jsx: Acknowledging deployment complete");const B=n(),J=await Ze("acknowledgeDeploymentComplete",{playerId:B});J.success&&(be(!1),J.data?.bothPlayersComplete||Ot("deploymentComplete"))},rh=B=>{if(Wr){Wr==="removing"?Xp(B):Wr==="adding"&&Qp(B);return}lt==="allocateShields"&&Nu(B)},ah=B=>{Tt[n()+"Passed"]||(We&&We.name===B.name?zt(null):(zt(B),En(null),on()))},bs=async B=>{try{const J=await Ze("deployment",{droneData:We,laneId:B,playerId:n(),turn:ya});J.success?zt(null):ie({title:J.error,text:J.message,isBlocking:!0})}catch(J){console.error("Error executing deployment:",J),ie({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},co=B=>{if(!(!We||va!==n()||Tt[n()+"Passed"])){if(ya===1){const J=Me.validateDeployment(De,We,ya,Tu,so);if(!J.isValid){ie({title:J.reason,text:J.message,isBlocking:!0});return}const{budgetCost:me,energyCost:he}=J;if(he>0){G({lane:B,budgetCost:me,energyCost:he});return}}bs(B)}},ih=async()=>{Tt[`${n()}Passed`]||await Ze("playerPass",{playerId:n(),playerName:De.name,turnPhase:lt,passInfo:Tt,opponentPlayerId:r()})},ku=(B,J,me)=>{if(B.stopPropagation(),lt!=="action"||va!==n()||Tt[n()+"Passed"])return;const he=me.cost||{};if(J.isExhausted&&he.exhausts!==!1){ie({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(he.energy&&De.energy<he.energy){ie({title:"Not Enough Energy",text:`This ability costs ${he.energy} energy, but you only have ${De.energy}.`,isBlocking:!0});return}if(me.targeting?.type==="LANE"&&me.targeting?.location==="SAME_LANE"){const Se=Me.getLaneOfDrone(J.id,De);if(Se){lr({ability:me,drone:J,target:{id:Se,owner:n()}});return}}He&&He.drone.id===J.id?Sa():(En({drone:J,ability:me}),zt(J),on())},Mu=(B,J,me)=>{if(B.stopPropagation(),!(lt!=="action"||!t()||Tt[`${n()}Passed`])){if(De.energy<me.cost.energy){ie({title:"Not Enough Energy",text:`This ability costs ${me.cost.energy} energy, but you only have ${De.energy}.`,isBlocking:!0});return}or?.ability.id===me.id?Vr(null):me.targeting?(Vr({sectionName:J.name,ability:me}),zt(null),Sa(),on()):me.effect.type==="REALLOCATE_SHIELDS"?(kl("removing"),ds(me.effect.value.maxShields),ha(0),fs(JSON.parse(JSON.stringify(De.shipSections))),ma({ability:me,sectionName:J.name})):kr({ability:me,sectionName:J.name,target:null})}},ju=(B,J,me)=>{if(B.stopPropagation(),console.log(`--- handleTokenClick triggered for ${J.name} (isPlayer: ${me}) ---`),Xe&&Xe.phase==="select_drones"&&me){console.log("Action: Multi-move drone selection.");const{selectedDrones:he,maxSelection:Se}=Xe;he.some(ke=>ke.id===J.id)?Mr(ke=>({...ke,selectedDrones:ke.selectedDrones.filter(Ye=>Ye.id!==J.id)})):he.length<Se&&Mr(ke=>({...ke,selectedDrones:[...ke.selectedDrones,J]}));return}if(fa.some(he=>he.id===J.id)||Hn.some(he=>he.id===J.id)){console.log("Action: Targeting for an active card/ability."),Ll(J,"drone",me);return}if(lt==="action"&&t()&&We&&!We.isExhausted&&!me){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",We.name,`(ID: ${We.id})`),console.log("Target clicked:",J.name,`(ID: ${J.id})`);const[he]=Object.entries(De.dronesOnBoard).find(([Le,ke])=>ke.some(Ye=>Ye.id===We.id))||[],[Se]=Object.entries(Ue.dronesOnBoard).find(([Le,ke])=>ke.some(Ye=>Ye.id===J.id))||[];if(console.log("Calculated Attacker Lane:",he),console.log("Calculated Target Lane:",Se),he&&Se&&he===Se)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),Ue.dronesOnBoard[Se].some(Ye=>S(Ye,Se).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),ie({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Processing attack...");const Ye={attacker:We,target:J,targetType:"drone",lane:he,attackingPlayer:n()};lo(Ye),zt(null)}else console.log("FAILURE: Lanes do not match or could not be found."),ie({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(Xe&&Xe.phase==="select_drones"&&me){console.log("Action: Multi-move drone selection.");const{selectedDrones:he,maxSelection:Se}=Xe;he.some(ke=>ke.id===J.id)?Mr(ke=>({...ke,selectedDrones:ke.selectedDrones.filter(Ye=>Ye.id!==J.id)})):he.length<Se&&Mr(ke=>({...ke,selectedDrones:[...ke.selectedDrones,J]}));return}if(ur?.type==="destroy"&&me){console.log("Action: Mandatory destruction."),pa({type:"destroy",target:J,onConfirm:()=>Lu(J),onCancel:()=>pa(null),text:`Are you sure you want to destroy your ${J.name}?`});return}if(me&&lt==="action"&&t()&&!Tt[`${n()}Passed`]){if(J.isExhausted){console.log("Action prevented: Drone is exhausted.");return}We?.id===J.id?(console.log("Action: Deselecting drone",J.name),zt(null)):(console.log("Action: Selecting drone",J.name),zt(J),Sa(),on());return}console.log("Action: Fallback - showing drone details."),ae(J)},Ll=(B,J,me)=>{if(or&&fa.some(he=>he.id===B.id)){kr({ability:or.ability,sectionName:or.sectionName,target:B});return}if(He&&fa.some(he=>he.id===B.id)){Du(He.ability,He.drone,B);return}if(Mt&&Hn.some(he=>he.id===B.id)){const he=me?n():r();sr({card:Mt,target:{...B,owner:he}});return}if(lt==="action"&&t()&&We&&!We.isExhausted&&!me&&J==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",We.name,`(ID: ${We.id})`),console.log("Target clicked:",B.name,`(Type: ${J})`);const[he]=Object.entries(De.dronesOnBoard).find(([Se,Le])=>Le.some(ke=>ke.id===We.id))||[];if(console.log("Calculated Attacker Lane:",he),he){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const Se=Ue.dronesOnBoard[he];if(Se&&Se.some(ke=>S(ke,he).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),ie({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Processing attack...");const ke={attacker:We,target:B,targetType:"section",lane:he,attackingPlayer:n()};lo(ke),zt(null)}}else console.log("FAILURE: Could not determine attacker lane."),ie({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}J==="drone"&&ae(B)},Ru=(B,J,me)=>{if(B.stopPropagation(),He&&He.ability.targeting.type==="LANE"){const he=me?n():r();if(fa.some(Se=>Se.id===J&&Se.owner===he)){lr({ability:He.ability,drone:He.drone,target:{id:J,owner:he}});return}}if(Xe&&me&&Hn.some(he=>he.id===J)){const{phase:he,sourceLane:Se,selectedDrones:Le}=Xe;if(he==="select_source_lane"){Mr(ke=>({...ke,phase:"select_drones",sourceLane:J}));return}if(he==="select_destination_lane"){Il(Xe.card,Le,Se,J);return}}if(Xe&&Xe.card.effect.type==="SINGLE_MOVE"&&Xe.phase==="select_destination"&&me){Hn.some(he=>he.id===J)&&Vp(Xe.card,Xe.selectedDrone,Xe.sourceLane,J);return}if(Mt&&Mt.targeting.type==="LANE"){const he=me?n():r();if(Hn.some(Se=>Se.id===J&&Se.owner===he)){sr({card:Mt,target:{id:J,owner:he}});return}}if(Mt){on();return}if(He){Sa();return}if(lt==="deployment"&&me)co(J);else if(lt==="action"&&me&&We){const[he]=Object.entries(De.dronesOnBoard).find(([ke,Ye])=>Ye.some(jn=>jn.id===We.id))||[];if(!he)return;const Se=parseInt(he.replace("lane",""),10),Le=parseInt(J.replace("lane",""),10);Math.abs(Se-Le)===1?ye({drone:We,from:he,to:J}):ie({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},ci=async B=>{if(!(lt!=="action"||!t()||Tt[`${n()}Passed`])&&!(De.energy<B.cost)){if(B.effect.type==="MULTI_MOVE"||B.effect.type==="SINGLE_MOVE"){Xe&&Xe.card.instanceId===B.instanceId?on():await Rl(B,null,n());return}if(Mt?.instanceId===B.instanceId)on();else if(B.name==="System Sabotage"){const J=Me.getValidTargets(n(),null,B,De,Ue);Nl({card:B,targets:J,opponentState:Ue}),Cn(null),En(null),zt(null)}else if(B.type==="Upgrade"){const J=Me.getValidTargets(n(),null,B,De,Ue);J.length>0?(eo({card:B,targets:J}),Cn(null),En(null),zt(null)):ie({title:"No Valid Targets",text:`There are no drone types that can accept the '${B.name}' upgrade right now.`,isBlocking:!0})}else B.targeting?(Cn(B),zt(null),En(null)):(sr({card:B,target:null}),Cn(null),En(null),zt(null))}},oh=async B=>{const J=ur;await Ze("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!0}),pa(null);const me=J.count-1;me<=0?(ni(null),J.fromAbility):ni(he=>({...he,count:me}))},sh=async B=>{await Ze("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!1}),ms(J=>J+1),pa(null)},lh=async()=>{console.log("[OPTIONAL DISCARD] Player completing optional discard phase"),ms(0),await Ze("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}})},Iu=()=>{const B=g.actionProcessor?.getPhaseCommitmentStatus("optionalDiscard");return console.log("[OPTIONAL DISCARD] Commitment status:",B),B?.bothComplete||!1},Lu=async B=>{const J=await Ze("destroyDrone",{droneId:B.id,playerId:n()});if(!J.success){console.error("Failed to destroy drone:",J.error);return}ni(me=>{const he=me.count-1;if(he<=0){if(_u>Ou.totals.cpuLimit&&e.gameMode==="local"){const Le=Object.values(Ue.dronesOnBoard).flat().length-A(Ue,Qr).totals.cpuLimit;for(let ke=0;ke<Le;ke++){const Ye=Object.entries(Ue.dronesOnBoard).flatMap(([Aa,ui])=>ui.map(Ea=>({...Ea,lane:Aa})));if(Ye.length===0)break;const jn=Math.min(...Ye.map(Aa=>Aa.class)),Zr=Ye.filter(Aa=>Aa.class===jn),fo=Zr[Math.floor(Math.random()*Zr.length)];Ze("destroyDrone",{droneId:fo.id,playerId:r()})}}return null}return{...me,count:he}}),pa(null)},uo=()=>{if(li.length===0){alert("The game log is empty.");return}const B=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],J=li.map(Le=>[Le.round,Le.player,Le.actionType,Le.source,Le.target,Le.outcome,Le.debugSource||"N/A"].map(Ye=>`"${String(Ye).replace(/"/g,'""')}"`).join(",")),me=[B.join(","),...J].join(`
`),he=new Blob([me],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a");if(Se.download!==void 0){const Le=URL.createObjectURL(he);Se.setAttribute("href",Le),Se.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Se.style.visibility="hidden",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)}};return v.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col relative",ref:jr,onClick:()=>{Sa(),on()},children:[v.jsx(bY,{}),v.jsx(NF,{visible:ei.visible,start:ei.start,end:ei.end,lineRef:gs}),oi.map(B=>v.jsx(kF,{top:B.top,left:B.left,size:B.size},B.id)),D.map(B=>v.jsx(uV,{droneData:B.droneData,startPos:B.startPos,endPos:B.endPos,config:B.config,onComplete:B.onComplete},B.id)),R.map(B=>v.jsx(aV,{position:B.position,color:B.color,intensity:B.intensity,onComplete:B.onComplete},B.id)),H.map(B=>v.jsx(iV,{visualType:B.visualType,startPos:B.startPos,endPos:B.endPos,duration:B.duration,onComplete:B.onComplete},B.id)),K.map(B=>v.jsx(dV,{card:B.card,label:B.label,onComplete:B.onComplete},B.id)),ue.map(B=>v.jsx(fV,{phaseText:B.phaseText,subtitle:B.subtitle,onComplete:B.onComplete},B.id)),I.map(B=>v.jsx(pV,{startPos:B.startPos,endPos:B.endPos,attackValue:B.attackValue,duration:B.duration,onComplete:B.onComplete},B.id)),se.map(B=>v.jsx(hV,{top:B.top,left:B.left,color:B.color,duration:B.duration,onComplete:B.onComplete},B.id)),j&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),v.jsx(xY,{localPlayerState:De,opponentPlayerState:Ue,localPlayerEffectiveStats:so,opponentPlayerEffectiveStats:Ou,turnPhase:lt,turn:ya,passInfo:Tt,firstPlayerOfRound:si,shieldsToAllocate:ys,opponentShieldsToAllocate:wu,shieldsToRemove:ii,shieldsToAdd:ai,reallocationPhase:Wr,totalLocalPlayerDrones:Tu,totalOpponentPlayerDrones:_u,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:va,isMultiplayer:i,handlePlayerPass:ih,handleReset:Wp,handleResetShields:Hp,handleConfirmShields:qp,handleCancelReallocation:eh,handleResetReallocation:Jp,handleContinueToAddPhase:Zp,handleConfirmReallocation:th,mandatoryAction:ur,multiSelectState:Xe,AI_HAND_DEBUG_MODE:P,setShowAiHandModal:O,onShowDebugModal:()=>N(!0)}),!t()&&(lt==="deployment"||lt==="action")&&v.jsx("div",{style:{position:"fixed",inset:0,background:"transparent",zIndex:40,cursor:"not-allowed"},onClick:B=>B.stopPropagation()}),v.jsx(CY,{localPlayerState:De,opponentPlayerState:Ue,localPlacedSections:xa,opponentPlacedSections:Qr,selectedCard:Mt,validCardTargets:Hn,abilityMode:He,validAbilityTargets:fa,multiSelectState:Xe,turnPhase:lt,reallocationPhase:Wr,shipAbilityMode:or,hoveredTarget:Lp,selectedDrone:We,recentlyHitDrones:_l,potentialInterceptors:$p,droneRefs:ro,sectionRefs:ao,mandatoryAction:ur,gameEngine:Me,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:oo,passInfo:Tt,handleTargetClick:Ll,handleLaneClick:Ru,handleShipSectionClick:rh,handleShipAbilityClick:Mu,handleTokenClick:ju,handleAbilityIconClick:ku,setHoveredTarget:vu,interceptedBadge:as}),v.jsx(wF,{localPlayerState:De,localPlayerEffectiveStats:so,sortedLocalActivePool:jl,gameLog:li,footerView:Ja,isFooterOpen:Tl,multiSelectState:Xe,selectedCard:Mt,turnPhase:lt,mandatoryAction:ur,handleFooterButtonClick:Kp,handleCardClick:ci,cancelCardSelection:on,downloadLogAsCSV:uo,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Xi,setHoveredCardId:An,setIsViewDiscardModalOpen:Wi,setIsViewDeckModalOpen:ca,handleToggleDroneSelection:ah,selectedDrone:We,setViewUpgradesModal:cr,handleConfirmMandatoryDiscard:oh,setConfirmationModal:pa,turn:ya,passInfo:Tt,validCardTargets:Hn,gameEngine:Me,opponentPlayerState:Ue,setAiDecisionLogToShow:os,optionalDiscardCount:Eu,handleRoundStartDraw:lh,handleRoundStartDiscard:sh,checkBothPlayersHandLimitComplete:Iu}),Y&&v.jsx(es,{title:Y.title,text:Y.text,onClose:Y.onClose===null?null:Y.onClose||(()=>ie(null)),children:Y.children}),v.jsx(BF,{show:de,firstPlayerOfRound:si,localPlayerId:n(),localPlayerName:De.name,opponentPlayerName:Ue.name,onContinue:nh}),v.jsx(UF,{show:fe,onContinue:()=>rt(!1)}),v.jsx(zF,{show:!!Ie,phase:Ie,opponentName:Ue.name,roomCode:b.roomCode}),v.jsx(FF,{deploymentConfirmation:ve,show:!!ve,onCancel:()=>G(null),onConfirm:async()=>{if(!ve)return;const{lane:B}=ve;G(null),await bs(B)}}),v.jsx(VF,{moveConfirmation:te,show:!!te,onCancel:()=>ye(null),onConfirm:async()=>{if(!te)return;const{drone:B,from:J,to:me}=te;await Ze("move",{droneId:B.id,fromLane:J,toLane:me,playerId:n()}),ye(null),zt(null)}}),v.jsx(WF,{interceptionModal:ir,show:!!ir,onClose:ir?.onClose}),v.jsx(KF,{choiceData:ns,show:!!ns,onIntercept:async B=>{const J={...ns.attackDetails,interceptor:B};Qi(null),setTimeout(async()=>{await lo(J)},400)},onDecline:async()=>{const B={...ns.attackDetails,interceptor:null};Qi(null),setTimeout(async()=>{await lo(B)},400)},gameEngine:Me,turnPhase:lt,isMyTurn:t,passInfo:Tt,getLocalPlayerId:n,localPlayerState:De,shipAbilityMode:or,droneRefs:ro,mandatoryAction:ur}),v.jsx(XF,{show:rs,opponentName:Ue?.name||"Opponent"}),v.jsx($F,{isOpen:!!pe,drone:pe,onClose:()=>ae(null)}),ua&&v.jsx(LF,{report:ua,onClose:()=>is(null)}),v.jsx(YF,{decisionLog:wl,show:!!wl,onClose:()=>os(null),getLocalPlayerId:n}),v.jsx(qF,{winner:jt,localPlayerId:n(),show:jt&&Ct,onClose:()=>pt(!1)}),v.jsx(HF,{mandatoryAction:ur,effectiveStats:so,show:ur&&ri,onClose:()=>cs(!1)}),v.jsx(GF,{confirmationModal:us,show:!!us}),v.jsx(DF,{viewUpgradesModal:ls,setViewUpgradesModal:cr,destroyUpgradeModal:Su,setDestroyUpgradeModal:Nl,upgradeSelectionModal:Bp,setUpgradeSelectionModal:eo,resolveCardPlay:Rl,getLocalPlayerId:n,cancelCardSelection:on}),v.jsx(QF,{cardConfirmation:xt,show:!!xt,onCancel:()=>sr(null),onConfirm:async()=>{const B=xt.card,J=xt.target;sr(null),setTimeout(async()=>{await Rl(B,J,n())},400)}}),v.jsx(ZF,{abilityConfirmation:ti,show:!!ti,onCancel:()=>lr(null),onConfirm:()=>{Du(ti.ability,ti.drone,ti.target),lr(null)}}),v.jsx(eV,{opponentPlayerState:Ue,show:T,debugMode:P,onClose:()=>O(!1)}),v.jsx(tV,{show:M,onClose:()=>N(!1),gameStateManager:g,gameDataService:C}),v.jsx(Rw,{isOpen:Yr,onClose:()=>ca(!1),cards:De.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(Rw,{isOpen:ts,onClose:()=>Wi(!1),cards:De.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(IF,{isOpen:!!to,onClose:to?.onCancel||(()=>an(null)),onConfirm:to?.onConfirm||(()=>{}),selectionData:to}),v.jsx(JF,{shipAbilityConfirmation:Nr,show:!!Nr,onCancel:()=>kr(null),onConfirm:async()=>await Yp(Nr.ability,Nr.sectionName,Nr.target)}),v.jsx(MF,{isVisible:!1,currentPlayer:va,gameMode:e.gameMode,roomCode:b.roomCode,lastAction:null,localPlayerState:De,opponentPlayerState:Ue,getLocalPlayerId:n})]})};function mV(){const{gameState:e}=Gi(),[t,n]=E.useState(!0),r=E.useRef(!1);if(E.useEffect(()=>{const i=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(i)},[]),E.useEffect(()=>{if(e.gameMode==="guest"){console.log("🔄 Guest mode detected - skipping manager initialization");return}r.current?console.log("🔄 GameFlowManager already initialized, skipping..."):(mf.initialize(Re,Re.actionProcessor,()=>e.gameMode!=="local",Ur),Re.setGameFlowManager(mf),r.current=!0,console.log("🔄 GameFlowManager initialized in AppRouter (host/local mode)"))},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading EREMOS..."})});switch(e.appState){case"menu":return v.jsx(OA,{});case"lobby":return v.jsx(bR,{});case"inGame":switch(e.turnPhase){case"droneSelection":return v.jsx(SR,{});case"deckSelection":return v.jsx(gY,{});case"placement":return v.jsx(vY,{});case"gameInitializing":return v.jsx(Iw,{});default:return v.jsx(Iw,{})}default:return console.warn("Unknown app state:",e.appState,"defaulting to menu"),v.jsx(OA,{})}}rM.createRoot(document.getElementById("root")).render(v.jsx($w.StrictMode,{children:v.jsx(mV,{})}));export{Yt as G,xn as f};
