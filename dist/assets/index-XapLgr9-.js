function Tw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rm={exports:{}},uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1;function VN(){if(V1)return uc;V1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return uc.Fragment=t,uc.jsx=n,uc.jsxs=n,uc}var X1;function XN(){return X1||(X1=1,Rm.exports=VN()),Rm.exports}var v=XN(),Im={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function WN(){if(W1)return Le;W1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=m&&I[m]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function P(I,V,q){this.props=I,this.context=V,this.refs=A,this.updater=q||x}P.prototype.isReactComponent={},P.prototype.setState=function(I,V){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,V,"setState")},P.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function E(){}E.prototype=P.prototype;function O(I,V,q){this.props=I,this.context=V,this.refs=A,this.updater=q||x}var _=O.prototype=new E;_.constructor=O,S(_,P.prototype),_.isPureReactComponent=!0;var N=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function R(I,V,q,le,ve,z){return q=z.ref,{$$typeof:e,type:I,key:V,ref:q!==void 0?q:null,props:z}}function k(I,V){return R(I.type,V,void 0,void 0,void 0,I.props)}function B(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function J(I){var V={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(q){return V[q]})}var Y=/\/+/g;function Z(I,V){return typeof I=="object"&&I!==null&&I.key!=null?J(""+I.key):V.toString(36)}function ue(){}function se(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(ue,ue):(I.status="pending",I.then(function(V){I.status==="pending"&&(I.status="fulfilled",I.value=V)},function(V){I.status==="pending"&&(I.status="rejected",I.reason=V)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function te(I,V,q,le,ve){var z=typeof I;(z==="undefined"||z==="boolean")&&(I=null);var re=!1;if(I===null)re=!0;else switch(z){case"bigint":case"string":case"number":re=!0;break;case"object":switch(I.$$typeof){case e:case t:re=!0;break;case p:return re=I._init,te(re(I._payload),V,q,le,ve)}}if(re)return ve=ve(I),re=le===""?"."+Z(I,0):le,N(ve)?(q="",re!=null&&(q=re.replace(Y,"$&/")+"/"),te(ve,V,q,"",function(ae){return ae})):ve!=null&&(B(ve)&&(ve=k(ve,q+(ve.key==null||I&&I.key===ve.key?"":(""+ve.key).replace(Y,"$&/")+"/")+re)),V.push(ve)),1;re=0;var be=le===""?".":le+":";if(N(I))for(var me=0;me<I.length;me++)le=I[me],z=be+Z(le,me),re+=te(le,V,q,z,ve);else if(me=y(I),typeof me=="function")for(I=me.call(I),me=0;!(le=I.next()).done;)le=le.value,z=be+Z(le,me++),re+=te(le,V,q,z,ve);else if(z==="object"){if(typeof I.then=="function")return te(se(I),V,q,le,ve);throw V=String(I),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return re}function $(I,V,q){if(I==null)return I;var le=[],ve=0;return te(I,le,"","",function(z){return V.call(q,z,ve++)}),le}function ee(I){if(I._status===-1){var V=I._result;V=V(),V.then(function(q){(I._status===0||I._status===-1)&&(I._status=1,I._result=q)},function(q){(I._status===0||I._status===-1)&&(I._status=2,I._result=q)}),I._status===-1&&(I._status=0,I._result=V)}if(I._status===1)return I._result.default;throw I._result}var pe=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function he(){}return Le.Children={map:$,forEach:function(I,V,q){$(I,function(){V.apply(this,arguments)},q)},count:function(I){var V=0;return $(I,function(){V++}),V},toArray:function(I){return $(I,function(V){return V})||[]},only:function(I){if(!B(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Le.Component=P,Le.Fragment=n,Le.Profiler=i,Le.PureComponent=O,Le.StrictMode=r,Le.Suspense=d,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Le.__COMPILER_RUNTIME={__proto__:null,c:function(I){return j.H.useMemoCache(I)}},Le.cache=function(I){return function(){return I.apply(null,arguments)}},Le.cloneElement=function(I,V,q){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var le=S({},I.props),ve=I.key,z=void 0;if(V!=null)for(re in V.ref!==void 0&&(z=void 0),V.key!==void 0&&(ve=""+V.key),V)!D.call(V,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&V.ref===void 0||(le[re]=V[re]);var re=arguments.length-2;if(re===1)le.children=q;else if(1<re){for(var be=Array(re),me=0;me<re;me++)be[me]=arguments[me+2];le.children=be}return R(I.type,ve,void 0,void 0,z,le)},Le.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:s,_context:I},I},Le.createElement=function(I,V,q){var le,ve={},z=null;if(V!=null)for(le in V.key!==void 0&&(z=""+V.key),V)D.call(V,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ve[le]=V[le]);var re=arguments.length-2;if(re===1)ve.children=q;else if(1<re){for(var be=Array(re),me=0;me<re;me++)be[me]=arguments[me+2];ve.children=be}if(I&&I.defaultProps)for(le in re=I.defaultProps,re)ve[le]===void 0&&(ve[le]=re[le]);return R(I,z,void 0,void 0,null,ve)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(I){return{$$typeof:u,render:I}},Le.isValidElement=B,Le.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:ee}},Le.memo=function(I,V){return{$$typeof:h,type:I,compare:V===void 0?null:V}},Le.startTransition=function(I){var V=j.T,q={};j.T=q;try{var le=I(),ve=j.S;ve!==null&&ve(q,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(he,pe)}catch(z){pe(z)}finally{j.T=V}},Le.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Le.use=function(I){return j.H.use(I)},Le.useActionState=function(I,V,q){return j.H.useActionState(I,V,q)},Le.useCallback=function(I,V){return j.H.useCallback(I,V)},Le.useContext=function(I){return j.H.useContext(I)},Le.useDebugValue=function(){},Le.useDeferredValue=function(I,V){return j.H.useDeferredValue(I,V)},Le.useEffect=function(I,V,q){var le=j.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(I,V)},Le.useId=function(){return j.H.useId()},Le.useImperativeHandle=function(I,V,q){return j.H.useImperativeHandle(I,V,q)},Le.useInsertionEffect=function(I,V){return j.H.useInsertionEffect(I,V)},Le.useLayoutEffect=function(I,V){return j.H.useLayoutEffect(I,V)},Le.useMemo=function(I,V){return j.H.useMemo(I,V)},Le.useOptimistic=function(I,V){return j.H.useOptimistic(I,V)},Le.useReducer=function(I,V,q){return j.H.useReducer(I,V,q)},Le.useRef=function(I){return j.H.useRef(I)},Le.useState=function(I){return j.H.useState(I)},Le.useSyncExternalStore=function(I,V,q){return j.H.useSyncExternalStore(I,V,q)},Le.useTransition=function(){return j.H.useTransition()},Le.version="19.1.1",Le}var Q1;function Xs(){return Q1||(Q1=1,Im.exports=WN()),Im.exports}var C=Xs();const Dw=Xr(C),QN=Tw({__proto__:null,default:Dw},[C]);var Lm={exports:{}},fc={},$m={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function ZN(){return Z1||(Z1=1,(function(e){function t($,ee){var pe=$.length;$.push(ee);e:for(;0<pe;){var he=pe-1>>>1,I=$[he];if(0<i(I,ee))$[he]=ee,$[pe]=I,pe=he;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ee=$[0],pe=$.pop();if(pe!==ee){$[0]=pe;e:for(var he=0,I=$.length,V=I>>>1;he<V;){var q=2*(he+1)-1,le=$[q],ve=q+1,z=$[ve];if(0>i(le,pe))ve<I&&0>i(z,le)?($[he]=z,$[ve]=pe,he=ve):($[he]=le,$[q]=pe,he=q);else if(ve<I&&0>i(z,pe))$[he]=z,$[ve]=pe,he=ve;else break e}}return ee}function i($,ee){var pe=$.sortIndex-ee.sortIndex;return pe!==0?pe:$.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,y=3,x=!1,S=!1,A=!1,P=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function N($){for(var ee=n(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=$)r(h),ee.sortIndex=ee.expirationTime,t(d,ee);else break;ee=n(h)}}function j($){if(A=!1,N($),!S)if(n(d)!==null)S=!0,D||(D=!0,Z());else{var ee=n(h);ee!==null&&te(j,ee.startTime-$)}}var D=!1,R=-1,k=5,B=-1;function J(){return P?!0:!(e.unstable_now()-B<k)}function Y(){if(P=!1,D){var $=e.unstable_now();B=$;var ee=!0;try{e:{S=!1,A&&(A=!1,O(R),R=-1),x=!0;var pe=y;try{t:{for(N($),m=n(d);m!==null&&!(m.expirationTime>$&&J());){var he=m.callback;if(typeof he=="function"){m.callback=null,y=m.priorityLevel;var I=he(m.expirationTime<=$);if($=e.unstable_now(),typeof I=="function"){m.callback=I,N($),ee=!0;break t}m===n(d)&&r(d),N($)}else r(d);m=n(d)}if(m!==null)ee=!0;else{var V=n(h);V!==null&&te(j,V.startTime-$),ee=!1}}break e}finally{m=null,y=pe,x=!1}ee=void 0}}finally{ee?Z():D=!1}}}var Z;if(typeof _=="function")Z=function(){_(Y)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,se=ue.port2;ue.port1.onmessage=Y,Z=function(){se.postMessage(null)}}else Z=function(){E(Y,0)};function te($,ee){R=E(function(){$(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function($){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var pe=y;y=ee;try{return $()}finally{y=pe}},e.unstable_requestPaint=function(){P=!0},e.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var pe=y;y=$;try{return ee()}finally{y=pe}},e.unstable_scheduleCallback=function($,ee,pe){var he=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?he+pe:he):pe=he,$){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=pe+I,$={id:p++,callback:ee,priorityLevel:$,startTime:pe,expirationTime:I,sortIndex:-1},pe>he?($.sortIndex=pe,t(h,$),n(d)===null&&$===n(h)&&(A?(O(R),R=-1):A=!0,te(j,pe-he))):($.sortIndex=I,t(d,$),S||x||(S=!0,D||(D=!0,Z()))),$},e.unstable_shouldYield=J,e.unstable_wrapCallback=function($){var ee=y;return function(){var pe=y;y=ee;try{return $.apply(this,arguments)}finally{y=pe}}}})(Bm)),Bm}var J1;function JN(){return J1||(J1=1,$m.exports=ZN()),$m.exports}var Um={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA;function ek(){if(eA)return Cn;eA=1;var e=Xs();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(d,h,null,p)},Cn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},Cn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Cn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Cn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Cn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Cn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Cn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Cn.requestFormReset=function(d){r.d.r(d)},Cn.unstable_batchedUpdates=function(d,h){return d(h)},Cn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},Cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Cn.version="19.1.1",Cn}var tA;function jw(){if(tA)return Um.exports;tA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Um.exports=ek(),Um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA;function tk(){if(nA)return fc;nA=1;var e=JN(),t=Xs(),n=jw();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function d(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,f=o;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return u(g),a;if(b===f)return u(g),o;b=b.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=b;else{for(var w=!1,T=g.child;T;){if(T===c){w=!0,c=g,f=b;break}if(T===f){w=!0,f=g,c=b;break}T=T.sibling}if(!w){for(T=b.child;T;){if(T===c){w=!0,c=b,f=g;break}if(T===f){w=!0,f=b,c=g;break}T=T.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function h(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=h(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),_=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function Z(a){return a===null||typeof a!="object"?null:(a=Y&&a[Y]||a["@@iterator"],typeof a=="function"?a:null)}var ue=Symbol.for("react.client.reference");function se(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ue?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case P:return"Profiler";case A:return"StrictMode";case j:return"Suspense";case D:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case _:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case N:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case R:return o=a.displayName||null,o!==null?o:se(a.type)||"Memo";case k:o=a._payload,a=a._init;try{return se(a(o))}catch{}}return null}var te=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},he=[],I=-1;function V(a){return{current:a}}function q(a){0>I||(a.current=he[I],he[I]=null,I--)}function le(a,o){I++,he[I]=a.current,a.current=o}var ve=V(null),z=V(null),re=V(null),be=V(null);function me(a,o){switch(le(re,o),le(z,a),le(ve,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?A1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=A1(o),a=C1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}q(ve),le(ve,a)}function ae(){q(ve),q(z),q(re)}function fe(a){a.memoizedState!==null&&le(be,a);var o=ve.current,c=C1(o,a.type);o!==c&&(le(z,a),le(ve,c))}function ye(a){z.current===a&&(q(ve),q(z)),be.current===a&&(q(be),ic._currentValue=pe)}var de=Object.prototype.hasOwnProperty,Je=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,jt=e.unstable_shouldYield,je=e.unstable_requestPaint,Re=e.unstable_now,Qr=e.unstable_getCurrentPriorityLevel,ga=e.unstable_ImmediatePriority,qo=e.unstable_UserBlockingPriority,Yo=e.unstable_NormalPriority,Hi=e.unstable_LowPriority,sl=e.unstable_IdlePriority,ll=e.log,Fo=e.unstable_setDisableYieldValue,Zr=null,an=null;function Jr(a){if(typeof ll=="function"&&Fo(a),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Zr,a)}catch{}}var yn=Math.clz32?Math.clz32:ya,lu=Math.log,qi=Math.LN2;function ya(a){return a>>>=0,a===0?32:31-(lu(a)/qi|0)|0}var Qa=256,Yi=4194304;function ea(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Fi(a,o,c){var f=a.pendingLanes;if(f===0)return 0;var g=0,b=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var T=f&134217727;return T!==0?(f=T&~b,f!==0?g=ea(f):(w&=T,w!==0?g=ea(w):c||(c=T&~a,c!==0&&(g=ea(c))))):(T=f&~b,T!==0?g=ea(T):w!==0?g=ea(w):c||(c=f&~a,c!==0&&(g=ea(c)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:g}function va(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function cu(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ko(){var a=Qa;return Qa<<=1,(Qa&4194048)===0&&(Qa=256),a}function uu(){var a=Yi;return Yi<<=1,(Yi&62914560)===0&&(Yi=4194304),a}function Vo(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Ur(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function fu(a,o,c,f,g,b){var w=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var T=a.entanglements,M=a.expirationTimes,H=a.hiddenUpdates;for(c=w&~c;0<c;){var ne=31-yn(c),oe=1<<ne;T[ne]=0,M[ne]=-1;var F=H[ne];if(F!==null)for(H[ne]=null,ne=0;ne<F.length;ne++){var X=F[ne];X!==null&&(X.lane&=-536870913)}c&=~oe}f!==0&&Sh(a,f,0),b!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=b&~(w&~o))}function Sh(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-yn(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|c&4194090}function Ah(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var f=31-yn(c),g=1<<f;g&o|a[f]&o&&(a[f]|=o),c&=~g}}function ht(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function $n(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Za(){var a=ee.p;return a!==0?a:(a=window.event,a===void 0?32:G1(a.type))}function cl(a,o){var c=ee.p;try{return ee.p=a,o()}finally{ee.p=c}}var zt=Math.random().toString(36).slice(2),pt="__reactFiber$"+zt,Nt="__reactProps$"+zt,Wn="__reactContainer$"+zt,on="__reactEvents$"+zt,hr="__reactListeners$"+zt,ba="__reactHandles$"+zt,Xo="__reactResources$"+zt,pr="__reactMarker$"+zt;function mr(a){delete a[pt],delete a[Nt],delete a[on],delete a[hr],delete a[ba]}function gr(a){var o=a[pt];if(o)return o;for(var c=a.parentNode;c;){if(o=c[Wn]||c[pt]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=O1(a);a!==null;){if(c=a[pt])return c;a=O1(a)}return o}a=c,c=a.parentNode}return null}function zr(a){if(a=a[pt]||a[Wn]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function Ve(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function sn(a){var o=a[Xo];return o||(o=a[Xo]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function kt(a){a[pr]=!0}var ul=new Set,du={};function ta(a,o){Ja(a,o),Ja(a+"Capture",o)}function Ja(a,o){for(du[a]=o,a=0;a<o.length;a++)ul.add(o[a])}var hu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gr={},ei={};function Ch(a){return de.call(ei,a)?!0:de.call(Gr,a)?!1:hu.test(a)?ei[a]=!0:(Gr[a]=!0,!1)}function Ki(a,o,c){if(Ch(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function Vi(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function vn(a,o,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+f)}}var ti,Xi;function yr(a){if(ti===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);ti=o&&o[1]||"",Xi=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ti+a+Xi}var fl=!1;function Wo(a,o){if(!a||fl)return"";fl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(X){var F=X}Reflect.construct(a,[],oe)}else{try{oe.call()}catch(X){F=X}a.call(oe.prototype)}}else{try{throw Error()}catch(X){F=X}(oe=a())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(X){if(X&&F&&typeof X.stack=="string")return[X.stack,F.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),w=b[0],T=b[1];if(w&&T){var M=w.split(`
`),H=T.split(`
`);for(g=f=0;f<M.length&&!M[f].includes("DetermineComponentFrameRoot");)f++;for(;g<H.length&&!H[g].includes("DetermineComponentFrameRoot");)g++;if(f===M.length||g===H.length)for(f=M.length-1,g=H.length-1;1<=f&&0<=g&&M[f]!==H[g];)g--;for(;1<=f&&0<=g;f--,g--)if(M[f]!==H[g]){if(f!==1||g!==1)do if(f--,g--,0>g||M[f]!==H[g]){var ne=`
`+M[f].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=f&&0<=g);break}}}finally{fl=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?yr(c):""}function dl(a){switch(a.tag){case 26:case 27:case 5:return yr(a.type);case 16:return yr("Lazy");case 13:return yr("Suspense");case 19:return yr("SuspenseList");case 0:case 15:return Wo(a.type,!1);case 11:return Wo(a.type.render,!1);case 1:return Wo(a.type,!0);case 31:return yr("Activity");default:return""}}function hl(a){try{var o="";do o+=dl(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function jn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ph(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Eh(a){var o=Ph(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),f=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,b=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,b.call(this,w)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function pl(a){a._valueTracker||(a._valueTracker=Eh(a))}function wh(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return a&&(f=Ph(a)?a.checked?"true":"false":a.value),a=f,a!==c?(o.setValue(a),!0):!1}function ml(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Oh=/[\n"\\]/g;function ln(a){return a.replace(Oh,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ni(a,o,c,f,g,b,w,T){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),o!=null?w==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+jn(o)):a.value!==""+jn(o)&&(a.value=""+jn(o)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),o!=null?na(a,w,jn(o)):c!=null?na(a,w,jn(c)):f!=null&&a.removeAttribute("value"),g==null&&b!=null&&(a.defaultChecked=!!b),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.name=""+jn(T):a.removeAttribute("name")}function xa(a,o,c,f,g,b,w,T){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;c=c!=null?""+jn(c):"",o=o!=null?""+jn(o):c,T||o===a.value||(a.value=o),a.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=T?a.checked:!!f,a.defaultChecked=!!f,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function na(a,o,c){o==="number"&&ml(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function ri(a,o,c,f){if(a=a.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<a.length;c++)g=o.hasOwnProperty("$"+a[c].value),a[c].selected!==g&&(a[c].selected=g),g&&f&&(a[c].defaultSelected=!0)}else{for(c=""+jn(c),o=null,g=0;g<a.length;g++){if(a[g].value===c){a[g].selected=!0,f&&(a[g].defaultSelected=!0);return}o!==null||a[g].disabled||(o=a[g])}o!==null&&(o.selected=!0)}}function gl(a,o,c){if(o!=null&&(o=""+jn(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+jn(c):""}function Ke(a,o,c,f){if(o==null){if(f!=null){if(c!=null)throw Error(r(92));if(te(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),o=c}c=jn(o),a.defaultValue=c,f=a.textContent,f===c&&f!==""&&f!==null&&(a.value=f)}function Bn(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var Hr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qo(a,o,c){var f=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,c):typeof c!="number"||c===0||Hr.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function pu(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&c[g]!==f&&Qo(a,g,f)}else for(var b in o)o.hasOwnProperty(b)&&Qo(a,b,o[b])}function mu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yl(a){return Nn.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var vl=null;function Wi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Qi=null,ra=null;function gu(a){var o=zr(a);if(o&&(a=o.stateNode)){var c=a[Nt]||null;e:switch(a=o.stateNode,o.type){case"input":if(ni(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ln(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==a&&f.form===a.form){var g=f[Nt]||null;if(!g)throw Error(r(90));ni(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)f=c[o],f.form===a.form&&wh(f)}break e;case"textarea":gl(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&ri(a,!!c.multiple,o,!1)}}}var bl=!1;function yu(a,o,c){if(bl)return a(o,c);bl=!0;try{var f=a(o);return f}finally{if(bl=!1,(Qi!==null||ra!==null)&&(rf(),Qi&&(o=Qi,a=ra,ra=Qi=null,gu(o),a)))for(o=0;o<a.length;o++)gu(a[o])}}function Zi(a,o){var c=a.stateNode;if(c===null)return null;var f=c[Nt]||null;if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Ae=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$e=!1;if(Ae)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){$e=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{$e=!1}var bn=null,Zo=null,vr=null;function Ji(){if(vr)return vr;var a,o=Zo,c=o.length,f,g="value"in bn?bn.value:bn.textContent,b=g.length;for(a=0;a<c&&o[a]===g[a];a++);var w=c-a;for(f=1;f<=w&&o[c-f]===g[b-f];f++);return vr=g.slice(a,1<f?1-f:void 0)}function eo(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function to(){return!0}function xl(){return!1}function xn(a){function o(c,f,g,b,w){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var T in a)a.hasOwnProperty(T)&&(c=a[T],this[T]=c?c(b):b[T]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?to:xl,this.isPropagationStopped=xl,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=to)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=to)},persist:function(){},isPersistent:to}),o}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wt=xn(kn),zn=p({},kn,{view:0,detail:0}),vu=xn(zn),Sl,Jo,no,es=p({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==no&&(no&&a.type==="mousemove"?(Sl=a.screenX-no.screenX,Jo=a.screenY-no.screenY):Jo=Sl=0,no=a),Sl)},movementY:function(a){return"movementY"in a?a.movementY:Jo}}),bu=xn(es),_h=p({},es,{dataTransfer:0}),Th=xn(_h),Dh=p({},zn,{relatedTarget:0}),Al=xn(Dh),jh=p({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Nh=xn(jh),kh=p({},kn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Mh=xn(kh),Rh=p({},kn,{data:0}),Cl=xn(Rh),Ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$h={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bh(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=$h[a])?!!o[a]:!1}function Pl(){return Bh}var xu=p({},zn,{key:function(a){if(a.key){var o=Ih[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=eo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Lh[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pl,charCode:function(a){return a.type==="keypress"?eo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?eo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Uh=xn(xu),zh=p({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Su=xn(zh),Gh=p({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pl}),Hh=xn(Gh),K=p({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q=xn(K),ge=p({},es,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=xn(ge),Se=p({},kn,{newState:0,oldState:0}),Me=xn(Se),Ie=[9,13,27,32],qe=Ae&&"CompositionEvent"in window,St=null;Ae&&"documentMode"in document&&(St=document.documentMode);var un=Ae&&"TextEvent"in window&&!St,Gt=Ae&&(!qe||St&&8<St&&11>=St),Mt=" ",Gn=!1;function Sn(a,o){switch(a){case"keyup":return Ie.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ts(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var br=!1;function ai(a,o){switch(a){case"compositionend":return ts(o);case"keypress":return o.which!==32?null:(Gn=!0,Mt);case"textInput":return a=o.data,a===Mt&&Gn?null:a;default:return null}}function qh(a,o){if(br)return a==="compositionend"||!qe&&Sn(a,o)?(a=Ji(),vr=Zo=bn=null,br=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Gt&&o.locale!=="ko"?null:o.data;default:return null}}var Au={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ii(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Au[a.type]:o==="textarea"}function Cu(a,o,c,f){Qi?ra?ra.push(f):ra=[f]:Qi=f,o=uf(o,"onChange"),0<o.length&&(c=new wt("onChange","change",null,c,f),a.push({event:c,listeners:o}))}var Sa=null,ns=null;function Cj(a){y1(a,0)}function Pu(a){var o=Ve(a);if(wh(o))return a}function $b(a,o){if(a==="change")return o}var Bb=!1;if(Ae){var Yh;if(Ae){var Fh="oninput"in document;if(!Fh){var Ub=document.createElement("div");Ub.setAttribute("oninput","return;"),Fh=typeof Ub.oninput=="function"}Yh=Fh}else Yh=!1;Bb=Yh&&(!document.documentMode||9<document.documentMode)}function zb(){Sa&&(Sa.detachEvent("onpropertychange",Gb),ns=Sa=null)}function Gb(a){if(a.propertyName==="value"&&Pu(ns)){var o=[];Cu(o,ns,a,Wi(a)),yu(Cj,o)}}function Pj(a,o,c){a==="focusin"?(zb(),Sa=o,ns=c,Sa.attachEvent("onpropertychange",Gb)):a==="focusout"&&zb()}function Ej(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Pu(ns)}function wj(a,o){if(a==="click")return Pu(o)}function Oj(a,o){if(a==="input"||a==="change")return Pu(o)}function _j(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Qn=typeof Object.is=="function"?Object.is:_j;function El(a,o){if(Qn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!de.call(o,g)||!Qn(a[g],o[g]))return!1}return!0}function Hb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function qb(a,o){var c=Hb(a);a=0;for(var f;c;){if(c.nodeType===3){if(f=a+c.textContent.length,a<=o&&f>=o)return{node:c,offset:o-a};a=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Hb(c)}}function Yb(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Yb(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Fb(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=ml(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=ml(a.document)}return o}function Kh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Tj=Ae&&"documentMode"in document&&11>=document.documentMode,rs=null,Vh=null,wl=null,Xh=!1;function Kb(a,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Xh||rs==null||rs!==ml(f)||(f=rs,"selectionStart"in f&&Kh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),wl&&El(wl,f)||(wl=f,f=uf(Vh,"onSelect"),0<f.length&&(o=new wt("onSelect","select",null,o,c),a.push({event:o,listeners:f}),o.target=rs)))}function ro(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var as={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionrun:ro("Transition","TransitionRun"),transitionstart:ro("Transition","TransitionStart"),transitioncancel:ro("Transition","TransitionCancel"),transitionend:ro("Transition","TransitionEnd")},Wh={},Vb={};Ae&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function ao(a){if(Wh[a])return Wh[a];if(!as[a])return a;var o=as[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in Vb)return Wh[a]=o[c];return a}var Xb=ao("animationend"),Wb=ao("animationiteration"),Qb=ao("animationstart"),Dj=ao("transitionrun"),jj=ao("transitionstart"),Nj=ao("transitioncancel"),Zb=ao("transitionend"),Jb=new Map,Qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qh.push("scrollEnd");function qr(a,o){Jb.set(a,o),ta(o,[a])}var ex=new WeakMap;function xr(a,o){if(typeof a=="object"&&a!==null){var c=ex.get(a);return c!==void 0?c:(o={value:a,source:o,stack:hl(o)},ex.set(a,o),o)}return{value:a,source:o,stack:hl(o)}}var Sr=[],is=0,Zh=0;function Eu(){for(var a=is,o=Zh=is=0;o<a;){var c=Sr[o];Sr[o++]=null;var f=Sr[o];Sr[o++]=null;var g=Sr[o];Sr[o++]=null;var b=Sr[o];if(Sr[o++]=null,f!==null&&g!==null){var w=f.pending;w===null?g.next=g:(g.next=w.next,w.next=g),f.pending=g}b!==0&&tx(c,g,b)}}function wu(a,o,c,f){Sr[is++]=a,Sr[is++]=o,Sr[is++]=c,Sr[is++]=f,Zh|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function Jh(a,o,c,f){return wu(a,o,c,f),Ou(a)}function os(a,o){return wu(a,null,null,o),Ou(a)}function tx(a,o,c){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c);for(var g=!1,b=a.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(g=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,g&&o!==null&&(g=31-yn(c),a=b.hiddenUpdates,f=a[g],f===null?a[g]=[o]:f.push(o),o.lane=c|536870912),b):null}function Ou(a){if(50<Ql)throw Ql=0,im=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ss={};function kj(a,o,c,f){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(a,o,c,f){return new kj(a,o,c,f)}function ep(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Aa(a,o){var c=a.alternate;return c===null?(c=Zn(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function nx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function _u(a,o,c,f,g,b){var w=0;if(f=a,typeof a=="function")ep(a)&&(w=1);else if(typeof a=="string")w=RN(a,c,ve.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=Zn(31,c,o,g),a.elementType=B,a.lanes=b,a;case S:return io(c.children,g,b,o);case A:w=8,g|=24;break;case P:return a=Zn(12,c,o,g|2),a.elementType=P,a.lanes=b,a;case j:return a=Zn(13,c,o,g),a.elementType=j,a.lanes=b,a;case D:return a=Zn(19,c,o,g),a.elementType=D,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case _:w=10;break e;case O:w=9;break e;case N:w=11;break e;case R:w=14;break e;case k:w=16,f=null;break e}w=29,c=Error(r(130,a===null?"null":typeof a,"")),f=null}return o=Zn(w,c,o,g),o.elementType=a,o.type=f,o.lanes=b,o}function io(a,o,c,f){return a=Zn(7,a,f,o),a.lanes=c,a}function tp(a,o,c){return a=Zn(6,a,null,o),a.lanes=c,a}function np(a,o,c){return o=Zn(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var ls=[],cs=0,Tu=null,Du=0,Ar=[],Cr=0,oo=null,Ca=1,Pa="";function so(a,o){ls[cs++]=Du,ls[cs++]=Tu,Tu=a,Du=o}function rx(a,o,c){Ar[Cr++]=Ca,Ar[Cr++]=Pa,Ar[Cr++]=oo,oo=a;var f=Ca;a=Pa;var g=32-yn(f)-1;f&=~(1<<g),c+=1;var b=32-yn(o)+g;if(30<b){var w=g-g%5;b=(f&(1<<w)-1).toString(32),f>>=w,g-=w,Ca=1<<32-yn(o)+g|c<<g|f,Pa=b+a}else Ca=1<<b|c<<g|f,Pa=a}function rp(a){a.return!==null&&(so(a,1),rx(a,1,0))}function ap(a){for(;a===Tu;)Tu=ls[--cs],ls[cs]=null,Du=ls[--cs],ls[cs]=null;for(;a===oo;)oo=Ar[--Cr],Ar[Cr]=null,Pa=Ar[--Cr],Ar[Cr]=null,Ca=Ar[--Cr],Ar[Cr]=null}var Mn=null,Pt=null,Ze=!1,lo=null,aa=!1,ip=Error(r(519));function co(a){var o=Error(r(418,""));throw Tl(xr(o,a)),ip}function ax(a){var o=a.stateNode,c=a.type,f=a.memoizedProps;switch(o[pt]=a,o[Nt]=f,c){case"dialog":Ge("cancel",o),Ge("close",o);break;case"iframe":case"object":case"embed":Ge("load",o);break;case"video":case"audio":for(c=0;c<Jl.length;c++)Ge(Jl[c],o);break;case"source":Ge("error",o);break;case"img":case"image":case"link":Ge("error",o),Ge("load",o);break;case"details":Ge("toggle",o);break;case"input":Ge("invalid",o),xa(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),pl(o);break;case"select":Ge("invalid",o);break;case"textarea":Ge("invalid",o),Ke(o,f.value,f.defaultValue,f.children),pl(o)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||f.suppressHydrationWarning===!0||S1(o.textContent,c)?(f.popover!=null&&(Ge("beforetoggle",o),Ge("toggle",o)),f.onScroll!=null&&Ge("scroll",o),f.onScrollEnd!=null&&Ge("scrollend",o),f.onClick!=null&&(o.onclick=ff),o=!0):o=!1,o||co(a)}function ix(a){for(Mn=a.return;Mn;)switch(Mn.tag){case 5:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:Mn=Mn.return}}function Ol(a){if(a!==Mn)return!1;if(!Ze)return ix(a),Ze=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Sm(a.type,a.memoizedProps)),c=!c),c&&Pt&&co(a),ix(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){Pt=Fr(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}Pt=null}}else o===27?(o=Pt,Si(a.type)?(a=Em,Em=null,Pt=a):Pt=o):Pt=Mn?Fr(a.stateNode.nextSibling):null;return!0}function _l(){Pt=Mn=null,Ze=!1}function ox(){var a=lo;return a!==null&&(Yn===null?Yn=a:Yn.push.apply(Yn,a),lo=null),a}function Tl(a){lo===null?lo=[a]:lo.push(a)}var op=V(null),uo=null,Ea=null;function oi(a,o,c){le(op,o._currentValue),o._currentValue=c}function wa(a){a._currentValue=op.current,q(op)}function sp(a,o,c){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===c)break;a=a.return}}function lp(a,o,c,f){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var b=g.dependencies;if(b!==null){var w=g.child;b=b.firstContext;e:for(;b!==null;){var T=b;b=g;for(var M=0;M<o.length;M++)if(T.context===o[M]){b.lanes|=c,T=b.alternate,T!==null&&(T.lanes|=c),sp(b.return,c,a),f||(w=null);break e}b=T.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(r(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),sp(w,c,a),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===a){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function Dl(a,o,c,f){a=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var T=g.type;Qn(g.pendingProps.value,w.value)||(a!==null?a.push(T):a=[T])}}else if(g===be.current){if(w=g.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(ic):a=[ic])}g=g.return}a!==null&&lp(o,a,c,f),o.flags|=262144}function ju(a){for(a=a.firstContext;a!==null;){if(!Qn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function fo(a){uo=a,Ea=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function An(a){return sx(uo,a)}function Nu(a,o){return uo===null&&fo(a),sx(a,o)}function sx(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ea===null){if(a===null)throw Error(r(308));Ea=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Ea=Ea.next=o;return c}var Mj=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},Rj=e.unstable_scheduleCallback,Ij=e.unstable_NormalPriority,Ht={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cp(){return{controller:new Mj,data:new Map,refCount:0}}function jl(a){a.refCount--,a.refCount===0&&Rj(Ij,function(){a.controller.abort()})}var Nl=null,up=0,us=0,fs=null;function Lj(a,o){if(Nl===null){var c=Nl=[];up=0,us=dm(),fs={status:"pending",value:void 0,then:function(f){c.push(f)}}}return up++,o.then(lx,lx),o}function lx(){if(--up===0&&Nl!==null){fs!==null&&(fs.status="fulfilled");var a=Nl;Nl=null,us=0,fs=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function $j(a,o){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var cx=$.S;$.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Lj(a,o),cx!==null&&cx(a,o)};var ho=V(null);function fp(){var a=ho.current;return a!==null?a:ut.pooledCache}function ku(a,o){o===null?le(ho,ho.current):le(ho,o.pool)}function ux(){var a=fp();return a===null?null:{parent:Ht._currentValue,pool:a}}var kl=Error(r(460)),fx=Error(r(474)),Mu=Error(r(542)),dp={then:function(){}};function dx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ru(){}function hx(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Ru,Ru),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,mx(a),a;default:if(typeof o.status=="string")o.then(Ru,Ru);else{if(a=ut,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,mx(a),a}throw Ml=o,kl}}var Ml=null;function px(){if(Ml===null)throw Error(r(459));var a=Ml;return Ml=null,a}function mx(a){if(a===kl||a===Mu)throw Error(r(483))}var si=!1;function hp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pp(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function li(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ci(a,o,c){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(et&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=Ou(a),tx(a,null,c),o}return wu(a,f,o,c),Ou(a)}function Rl(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,c|=f,o.lanes=c,Ah(a,c)}}function mp(a,o){var c=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?g=b=o:b=b.next=o}else g=b=o;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var gp=!1;function Il(){if(gp){var a=fs;if(a!==null)throw a}}function Ll(a,o,c,f){gp=!1;var g=a.updateQueue;si=!1;var b=g.firstBaseUpdate,w=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var M=T,H=M.next;M.next=null,w===null?b=H:w.next=H,w=M;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==w&&(T===null?ne.firstBaseUpdate=H:T.next=H,ne.lastBaseUpdate=M))}if(b!==null){var oe=g.baseState;w=0,ne=H=M=null,T=b;do{var F=T.lane&-536870913,X=F!==T.lane;if(X?(Ye&F)===F:(f&F)===F){F!==0&&F===us&&(gp=!0),ne!==null&&(ne=ne.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ke=a,De=T;F=o;var ot=c;switch(De.tag){case 1:if(ke=De.payload,typeof ke=="function"){oe=ke.call(ot,oe,F);break e}oe=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=De.payload,F=typeof ke=="function"?ke.call(ot,oe,F):ke,F==null)break e;oe=p({},oe,F);break e;case 2:si=!0}}F=T.callback,F!==null&&(a.flags|=64,X&&(a.flags|=8192),X=g.callbacks,X===null?g.callbacks=[F]:X.push(F))}else X={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(H=ne=X,M=oe):ne=ne.next=X,w|=F;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;X=T,T=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);ne===null&&(M=oe),g.baseState=M,g.firstBaseUpdate=H,g.lastBaseUpdate=ne,b===null&&(g.shared.lanes=0),yi|=w,a.lanes=w,a.memoizedState=oe}}function gx(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function yx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)gx(c[a],o)}var ds=V(null),Iu=V(0);function vx(a,o){a=ka,le(Iu,a),le(ds,o),ka=a|o.baseLanes}function yp(){le(Iu,ka),le(ds,ds.current)}function vp(){ka=Iu.current,q(ds),q(Iu)}var ui=0,Be=null,at=null,Rt=null,Lu=!1,hs=!1,po=!1,$u=0,$l=0,ps=null,Bj=0;function Ot(){throw Error(r(321))}function bp(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!Qn(a[c],o[c]))return!1;return!0}function xp(a,o,c,f,g,b){return ui=b,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=a===null||a.memoizedState===null?tS:nS,po=!1,b=c(f,g),po=!1,hs&&(b=xx(o,c,f,g)),bx(a),b}function bx(a){$.H=qu;var o=at!==null&&at.next!==null;if(ui=0,Rt=at=Be=null,Lu=!1,$l=0,ps=null,o)throw Error(r(300));a===null||Wt||(a=a.dependencies,a!==null&&ju(a)&&(Wt=!0))}function xx(a,o,c,f){Be=a;var g=0;do{if(hs&&(ps=null),$l=0,hs=!1,25<=g)throw Error(r(301));if(g+=1,Rt=at=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=Fj,b=o(c,f)}while(hs);return b}function Uj(){var a=$.H,o=a.useState()[0];return o=typeof o.then=="function"?Bl(o):o,a=a.useState()[0],(at!==null?at.memoizedState:null)!==a&&(Be.flags|=1024),o}function Sp(){var a=$u!==0;return $u=0,a}function Ap(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function Cp(a){if(Lu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Lu=!1}ui=0,Rt=at=Be=null,hs=!1,$l=$u=0,ps=null}function Hn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Be.memoizedState=Rt=a:Rt=Rt.next=a,Rt}function It(){if(at===null){var a=Be.alternate;a=a!==null?a.memoizedState:null}else a=at.next;var o=Rt===null?Be.memoizedState:Rt.next;if(o!==null)Rt=o,at=a;else{if(a===null)throw Be.alternate===null?Error(r(467)):Error(r(310));at=a,a={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Rt===null?Be.memoizedState=Rt=a:Rt=Rt.next=a}return Rt}function Pp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bl(a){var o=$l;return $l+=1,ps===null&&(ps=[]),a=hx(ps,a,o),o=Be,(Rt===null?o.memoizedState:Rt.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?tS:nS),a}function Bu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Bl(a);if(a.$$typeof===_)return An(a)}throw Error(r(438,String(a)))}function Ep(a){var o=null,c=Be.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var f=Be.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Pp(),Be.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),f=0;f<a;f++)c[f]=J;return o.index++,c}function Oa(a,o){return typeof o=="function"?o(a):o}function Uu(a){var o=It();return wp(o,at,a)}function wp(a,o,c){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=a.baseQueue,b=f.pending;if(b!==null){if(g!==null){var w=g.next;g.next=b.next,b.next=w}o.baseQueue=g=b,f.pending=null}if(b=a.baseState,g===null)a.memoizedState=b;else{o=g.next;var T=w=null,M=null,H=o,ne=!1;do{var oe=H.lane&-536870913;if(oe!==H.lane?(Ye&oe)===oe:(ui&oe)===oe){var F=H.revertLane;if(F===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),oe===us&&(ne=!0);else if((ui&F)===F){H=H.next,F===us&&(ne=!0);continue}else oe={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},M===null?(T=M=oe,w=b):M=M.next=oe,Be.lanes|=F,yi|=F;oe=H.action,po&&c(b,oe),b=H.hasEagerState?H.eagerState:c(b,oe)}else F={lane:oe,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},M===null?(T=M=F,w=b):M=M.next=F,Be.lanes|=oe,yi|=oe;H=H.next}while(H!==null&&H!==o);if(M===null?w=b:M.next=T,!Qn(b,a.memoizedState)&&(Wt=!0,ne&&(c=fs,c!==null)))throw c;a.memoizedState=b,a.baseState=w,a.baseQueue=M,f.lastRenderedState=b}return g===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function Op(a){var o=It(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=c.dispatch,g=c.pending,b=o.memoizedState;if(g!==null){c.pending=null;var w=g=g.next;do b=a(b,w.action),w=w.next;while(w!==g);Qn(b,o.memoizedState)||(Wt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,f]}function Sx(a,o,c){var f=Be,g=It(),b=Ze;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!Qn((at||g).memoizedState,c);w&&(g.memoizedState=c,Wt=!0),g=g.queue;var T=Px.bind(null,f,g,a);if(Ul(2048,8,T,[a]),g.getSnapshot!==o||w||Rt!==null&&Rt.memoizedState.tag&1){if(f.flags|=2048,ms(9,zu(),Cx.bind(null,f,g,c,o),null),ut===null)throw Error(r(349));b||(ui&124)!==0||Ax(f,o,c)}return c}function Ax(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=Be.updateQueue,o===null?(o=Pp(),Be.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function Cx(a,o,c,f){o.value=c,o.getSnapshot=f,Ex(o)&&wx(a)}function Px(a,o,c){return c(function(){Ex(o)&&wx(a)})}function Ex(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!Qn(a,c)}catch{return!0}}function wx(a){var o=os(a,2);o!==null&&rr(o,a,2)}function _p(a){var o=Hn();if(typeof a=="function"){var c=a;if(a=c(),po){Jr(!0);try{c()}finally{Jr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:a},o}function Ox(a,o,c,f){return a.baseState=c,wp(a,at,typeof f=="function"?f:Oa)}function zj(a,o,c,f,g){if(Hu(a))throw Error(r(485));if(a=o.action,a!==null){var b={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};$.T!==null?c(!0):b.isTransition=!1,f(b),c=o.pending,c===null?(b.next=o.pending=b,_x(o,b)):(b.next=c.next,o.pending=c.next=b)}}function _x(a,o){var c=o.action,f=o.payload,g=a.state;if(o.isTransition){var b=$.T,w={};$.T=w;try{var T=c(g,f),M=$.S;M!==null&&M(w,T),Tx(a,o,T)}catch(H){Tp(a,o,H)}finally{$.T=b}}else try{b=c(g,f),Tx(a,o,b)}catch(H){Tp(a,o,H)}}function Tx(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Dx(a,o,f)},function(f){return Tp(a,o,f)}):Dx(a,o,c)}function Dx(a,o,c){o.status="fulfilled",o.value=c,jx(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,_x(a,c)))}function Tp(a,o,c){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=c,jx(o),o=o.next;while(o!==f)}a.action=null}function jx(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Nx(a,o){return o}function kx(a,o){if(Ze){var c=ut.formState;if(c!==null){e:{var f=Be;if(Ze){if(Pt){t:{for(var g=Pt,b=aa;g.nodeType!==8;){if(!b){g=null;break t}if(g=Fr(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Pt=Fr(g.nextSibling),f=g.data==="F!";break e}}co(f)}f=!1}f&&(o=c[0])}}return c=Hn(),c.memoizedState=c.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nx,lastRenderedState:o},c.queue=f,c=Zx.bind(null,Be,f),f.dispatch=c,f=_p(!1),b=Mp.bind(null,Be,!1,f.queue),f=Hn(),g={state:o,dispatch:null,action:a,pending:null},f.queue=g,c=zj.bind(null,Be,g,b,c),g.dispatch=c,f.memoizedState=a,[o,c,!1]}function Mx(a){var o=It();return Rx(o,at,a)}function Rx(a,o,c){if(o=wp(a,o,Nx)[0],a=Uu(Oa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Bl(o)}catch(w){throw w===kl?Mu:w}else f=o;o=It();var g=o.queue,b=g.dispatch;return c!==o.memoizedState&&(Be.flags|=2048,ms(9,zu(),Gj.bind(null,g,c),null)),[f,b,a]}function Gj(a,o){a.action=o}function Ix(a){var o=It(),c=at;if(c!==null)return Rx(o,c,a);It(),o=o.memoizedState,c=It();var f=c.queue.dispatch;return c.memoizedState=a,[o,f,!1]}function ms(a,o,c,f){return a={tag:a,create:c,deps:f,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Pp(),Be.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(f=c.next,c.next=a,a.next=f,o.lastEffect=a),a}function zu(){return{destroy:void 0,resource:void 0}}function Lx(){return It().memoizedState}function Gu(a,o,c,f){var g=Hn();f=f===void 0?null:f,Be.flags|=a,g.memoizedState=ms(1|o,zu(),c,f)}function Ul(a,o,c,f){var g=It();f=f===void 0?null:f;var b=g.memoizedState.inst;at!==null&&f!==null&&bp(f,at.memoizedState.deps)?g.memoizedState=ms(o,b,c,f):(Be.flags|=a,g.memoizedState=ms(1|o,b,c,f))}function $x(a,o){Gu(8390656,8,a,o)}function Bx(a,o){Ul(2048,8,a,o)}function Ux(a,o){return Ul(4,2,a,o)}function zx(a,o){return Ul(4,4,a,o)}function Gx(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Hx(a,o,c){c=c!=null?c.concat([a]):null,Ul(4,4,Gx.bind(null,o,a),c)}function Dp(){}function qx(a,o){var c=It();o=o===void 0?null:o;var f=c.memoizedState;return o!==null&&bp(o,f[1])?f[0]:(c.memoizedState=[a,o],a)}function Yx(a,o){var c=It();o=o===void 0?null:o;var f=c.memoizedState;if(o!==null&&bp(o,f[1]))return f[0];if(f=a(),po){Jr(!0);try{a()}finally{Jr(!1)}}return c.memoizedState=[f,o],f}function jp(a,o,c){return c===void 0||(ui&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=VS(),Be.lanes|=a,yi|=a,c)}function Fx(a,o,c,f){return Qn(c,o)?c:ds.current!==null?(a=jp(a,c,f),Qn(a,o)||(Wt=!0),a):(ui&42)===0?(Wt=!0,a.memoizedState=c):(a=VS(),Be.lanes|=a,yi|=a,o)}function Kx(a,o,c,f,g){var b=ee.p;ee.p=b!==0&&8>b?b:8;var w=$.T,T={};$.T=T,Mp(a,!1,o,c);try{var M=g(),H=$.S;if(H!==null&&H(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=$j(M,f);zl(a,o,ne,nr(a))}else zl(a,o,f,nr(a))}catch(oe){zl(a,o,{then:function(){},status:"rejected",reason:oe},nr())}finally{ee.p=b,$.T=w}}function Hj(){}function Np(a,o,c,f){if(a.tag!==5)throw Error(r(476));var g=Vx(a).queue;Kx(a,g,o,pe,c===null?Hj:function(){return Xx(a),c(f)})}function Vx(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:pe},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function Xx(a){var o=Vx(a).next.queue;zl(a,o,{},nr())}function kp(){return An(ic)}function Wx(){return It().memoizedState}function Qx(){return It().memoizedState}function qj(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=nr();a=li(c);var f=ci(o,a,c);f!==null&&(rr(f,o,c),Rl(f,o,c)),o={cache:cp()},a.payload=o;return}o=o.return}}function Yj(a,o,c){var f=nr();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Hu(a)?Jx(o,c):(c=Jh(a,o,c,f),c!==null&&(rr(c,a,f),eS(c,o,f)))}function Zx(a,o,c){var f=nr();zl(a,o,c,f)}function zl(a,o,c,f){var g={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hu(a))Jx(o,g);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var w=o.lastRenderedState,T=b(w,c);if(g.hasEagerState=!0,g.eagerState=T,Qn(T,w))return wu(a,o,g,0),ut===null&&Eu(),!1}catch{}finally{}if(c=Jh(a,o,g,f),c!==null)return rr(c,a,f),eS(c,o,f),!0}return!1}function Mp(a,o,c,f){if(f={lane:2,revertLane:dm(),action:f,hasEagerState:!1,eagerState:null,next:null},Hu(a)){if(o)throw Error(r(479))}else o=Jh(a,c,f,2),o!==null&&rr(o,a,2)}function Hu(a){var o=a.alternate;return a===Be||o!==null&&o===Be}function Jx(a,o){hs=Lu=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function eS(a,o,c){if((c&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,c|=f,o.lanes=c,Ah(a,c)}}var qu={readContext:An,use:Bu,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},tS={readContext:An,use:Bu,useCallback:function(a,o){return Hn().memoizedState=[a,o===void 0?null:o],a},useContext:An,useEffect:$x,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Gu(4194308,4,Gx.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Gu(4194308,4,a,o)},useInsertionEffect:function(a,o){Gu(4,2,a,o)},useMemo:function(a,o){var c=Hn();o=o===void 0?null:o;var f=a();if(po){Jr(!0);try{a()}finally{Jr(!1)}}return c.memoizedState=[f,o],f},useReducer:function(a,o,c){var f=Hn();if(c!==void 0){var g=c(o);if(po){Jr(!0);try{c(o)}finally{Jr(!1)}}}else g=o;return f.memoizedState=f.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},f.queue=a,a=a.dispatch=Yj.bind(null,Be,a),[f.memoizedState,a]},useRef:function(a){var o=Hn();return a={current:a},o.memoizedState=a},useState:function(a){a=_p(a);var o=a.queue,c=Zx.bind(null,Be,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:Dp,useDeferredValue:function(a,o){var c=Hn();return jp(c,a,o)},useTransition:function(){var a=_p(!1);return a=Kx.bind(null,Be,a.queue,!0,!1),Hn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var f=Be,g=Hn();if(Ze){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),ut===null)throw Error(r(349));(Ye&124)!==0||Ax(f,o,c)}g.memoizedState=c;var b={value:c,getSnapshot:o};return g.queue=b,$x(Px.bind(null,f,b,a),[a]),f.flags|=2048,ms(9,zu(),Cx.bind(null,f,b,c,o),null),c},useId:function(){var a=Hn(),o=ut.identifierPrefix;if(Ze){var c=Pa,f=Ca;c=(f&~(1<<32-yn(f)-1)).toString(32)+c,o=""+o+"R"+c,c=$u++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=Bj++,o=""+o+"r"+c.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:kp,useFormState:kx,useActionState:kx,useOptimistic:function(a){var o=Hn();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Mp.bind(null,Be,!0,c),c.dispatch=o,[a,o]},useMemoCache:Ep,useCacheRefresh:function(){return Hn().memoizedState=qj.bind(null,Be)}},nS={readContext:An,use:Bu,useCallback:qx,useContext:An,useEffect:Bx,useImperativeHandle:Hx,useInsertionEffect:Ux,useLayoutEffect:zx,useMemo:Yx,useReducer:Uu,useRef:Lx,useState:function(){return Uu(Oa)},useDebugValue:Dp,useDeferredValue:function(a,o){var c=It();return Fx(c,at.memoizedState,a,o)},useTransition:function(){var a=Uu(Oa)[0],o=It().memoizedState;return[typeof a=="boolean"?a:Bl(a),o]},useSyncExternalStore:Sx,useId:Wx,useHostTransitionStatus:kp,useFormState:Mx,useActionState:Mx,useOptimistic:function(a,o){var c=It();return Ox(c,at,a,o)},useMemoCache:Ep,useCacheRefresh:Qx},Fj={readContext:An,use:Bu,useCallback:qx,useContext:An,useEffect:Bx,useImperativeHandle:Hx,useInsertionEffect:Ux,useLayoutEffect:zx,useMemo:Yx,useReducer:Op,useRef:Lx,useState:function(){return Op(Oa)},useDebugValue:Dp,useDeferredValue:function(a,o){var c=It();return at===null?jp(c,a,o):Fx(c,at.memoizedState,a,o)},useTransition:function(){var a=Op(Oa)[0],o=It().memoizedState;return[typeof a=="boolean"?a:Bl(a),o]},useSyncExternalStore:Sx,useId:Wx,useHostTransitionStatus:kp,useFormState:Ix,useActionState:Ix,useOptimistic:function(a,o){var c=It();return at!==null?Ox(c,at,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Ep,useCacheRefresh:Qx},gs=null,Gl=0;function Yu(a){var o=Gl;return Gl+=1,gs===null&&(gs=[]),hx(gs,a,o)}function Hl(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Fu(a,o){throw o.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function rS(a){var o=a._init;return o(a._payload)}function aS(a){function o(U,L){if(a){var G=U.deletions;G===null?(U.deletions=[L],U.flags|=16):G.push(L)}}function c(U,L){if(!a)return null;for(;L!==null;)o(U,L),L=L.sibling;return null}function f(U){for(var L=new Map;U!==null;)U.key!==null?L.set(U.key,U):L.set(U.index,U),U=U.sibling;return L}function g(U,L){return U=Aa(U,L),U.index=0,U.sibling=null,U}function b(U,L,G){return U.index=G,a?(G=U.alternate,G!==null?(G=G.index,G<L?(U.flags|=67108866,L):G):(U.flags|=67108866,L)):(U.flags|=1048576,L)}function w(U){return a&&U.alternate===null&&(U.flags|=67108866),U}function T(U,L,G,ie){return L===null||L.tag!==6?(L=tp(G,U.mode,ie),L.return=U,L):(L=g(L,G),L.return=U,L)}function M(U,L,G,ie){var Pe=G.type;return Pe===S?ne(U,L,G.props.children,ie,G.key):L!==null&&(L.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===k&&rS(Pe)===L.type)?(L=g(L,G.props),Hl(L,G),L.return=U,L):(L=_u(G.type,G.key,G.props,null,U.mode,ie),Hl(L,G),L.return=U,L)}function H(U,L,G,ie){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=np(G,U.mode,ie),L.return=U,L):(L=g(L,G.children||[]),L.return=U,L)}function ne(U,L,G,ie,Pe){return L===null||L.tag!==7?(L=io(G,U.mode,ie,Pe),L.return=U,L):(L=g(L,G),L.return=U,L)}function oe(U,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=tp(""+L,U.mode,G),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case y:return G=_u(L.type,L.key,L.props,null,U.mode,G),Hl(G,L),G.return=U,G;case x:return L=np(L,U.mode,G),L.return=U,L;case k:var ie=L._init;return L=ie(L._payload),oe(U,L,G)}if(te(L)||Z(L))return L=io(L,U.mode,G,null),L.return=U,L;if(typeof L.then=="function")return oe(U,Yu(L),G);if(L.$$typeof===_)return oe(U,Nu(U,L),G);Fu(U,L)}return null}function F(U,L,G,ie){var Pe=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Pe!==null?null:T(U,L,""+G,ie);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return G.key===Pe?M(U,L,G,ie):null;case x:return G.key===Pe?H(U,L,G,ie):null;case k:return Pe=G._init,G=Pe(G._payload),F(U,L,G,ie)}if(te(G)||Z(G))return Pe!==null?null:ne(U,L,G,ie,null);if(typeof G.then=="function")return F(U,L,Yu(G),ie);if(G.$$typeof===_)return F(U,L,Nu(U,G),ie);Fu(U,G)}return null}function X(U,L,G,ie,Pe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return U=U.get(G)||null,T(L,U,""+ie,Pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return U=U.get(ie.key===null?G:ie.key)||null,M(L,U,ie,Pe);case x:return U=U.get(ie.key===null?G:ie.key)||null,H(L,U,ie,Pe);case k:var Ue=ie._init;return ie=Ue(ie._payload),X(U,L,G,ie,Pe)}if(te(ie)||Z(ie))return U=U.get(G)||null,ne(L,U,ie,Pe,null);if(typeof ie.then=="function")return X(U,L,G,Yu(ie),Pe);if(ie.$$typeof===_)return X(U,L,G,Nu(L,ie),Pe);Fu(L,ie)}return null}function ke(U,L,G,ie){for(var Pe=null,Ue=null,Oe=L,Ne=L=0,Zt=null;Oe!==null&&Ne<G.length;Ne++){Oe.index>Ne?(Zt=Oe,Oe=null):Zt=Oe.sibling;var Xe=F(U,Oe,G[Ne],ie);if(Xe===null){Oe===null&&(Oe=Zt);break}a&&Oe&&Xe.alternate===null&&o(U,Oe),L=b(Xe,L,Ne),Ue===null?Pe=Xe:Ue.sibling=Xe,Ue=Xe,Oe=Zt}if(Ne===G.length)return c(U,Oe),Ze&&so(U,Ne),Pe;if(Oe===null){for(;Ne<G.length;Ne++)Oe=oe(U,G[Ne],ie),Oe!==null&&(L=b(Oe,L,Ne),Ue===null?Pe=Oe:Ue.sibling=Oe,Ue=Oe);return Ze&&so(U,Ne),Pe}for(Oe=f(Oe);Ne<G.length;Ne++)Zt=X(Oe,U,Ne,G[Ne],ie),Zt!==null&&(a&&Zt.alternate!==null&&Oe.delete(Zt.key===null?Ne:Zt.key),L=b(Zt,L,Ne),Ue===null?Pe=Zt:Ue.sibling=Zt,Ue=Zt);return a&&Oe.forEach(function(wi){return o(U,wi)}),Ze&&so(U,Ne),Pe}function De(U,L,G,ie){if(G==null)throw Error(r(151));for(var Pe=null,Ue=null,Oe=L,Ne=L=0,Zt=null,Xe=G.next();Oe!==null&&!Xe.done;Ne++,Xe=G.next()){Oe.index>Ne?(Zt=Oe,Oe=null):Zt=Oe.sibling;var wi=F(U,Oe,Xe.value,ie);if(wi===null){Oe===null&&(Oe=Zt);break}a&&Oe&&wi.alternate===null&&o(U,Oe),L=b(wi,L,Ne),Ue===null?Pe=wi:Ue.sibling=wi,Ue=wi,Oe=Zt}if(Xe.done)return c(U,Oe),Ze&&so(U,Ne),Pe;if(Oe===null){for(;!Xe.done;Ne++,Xe=G.next())Xe=oe(U,Xe.value,ie),Xe!==null&&(L=b(Xe,L,Ne),Ue===null?Pe=Xe:Ue.sibling=Xe,Ue=Xe);return Ze&&so(U,Ne),Pe}for(Oe=f(Oe);!Xe.done;Ne++,Xe=G.next())Xe=X(Oe,U,Ne,Xe.value,ie),Xe!==null&&(a&&Xe.alternate!==null&&Oe.delete(Xe.key===null?Ne:Xe.key),L=b(Xe,L,Ne),Ue===null?Pe=Xe:Ue.sibling=Xe,Ue=Xe);return a&&Oe.forEach(function(KN){return o(U,KN)}),Ze&&so(U,Ne),Pe}function ot(U,L,G,ie){if(typeof G=="object"&&G!==null&&G.type===S&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case y:e:{for(var Pe=G.key;L!==null;){if(L.key===Pe){if(Pe=G.type,Pe===S){if(L.tag===7){c(U,L.sibling),ie=g(L,G.props.children),ie.return=U,U=ie;break e}}else if(L.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===k&&rS(Pe)===L.type){c(U,L.sibling),ie=g(L,G.props),Hl(ie,G),ie.return=U,U=ie;break e}c(U,L);break}else o(U,L);L=L.sibling}G.type===S?(ie=io(G.props.children,U.mode,ie,G.key),ie.return=U,U=ie):(ie=_u(G.type,G.key,G.props,null,U.mode,ie),Hl(ie,G),ie.return=U,U=ie)}return w(U);case x:e:{for(Pe=G.key;L!==null;){if(L.key===Pe)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){c(U,L.sibling),ie=g(L,G.children||[]),ie.return=U,U=ie;break e}else{c(U,L);break}else o(U,L);L=L.sibling}ie=np(G,U.mode,ie),ie.return=U,U=ie}return w(U);case k:return Pe=G._init,G=Pe(G._payload),ot(U,L,G,ie)}if(te(G))return ke(U,L,G,ie);if(Z(G)){if(Pe=Z(G),typeof Pe!="function")throw Error(r(150));return G=Pe.call(G),De(U,L,G,ie)}if(typeof G.then=="function")return ot(U,L,Yu(G),ie);if(G.$$typeof===_)return ot(U,L,Nu(U,G),ie);Fu(U,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(c(U,L.sibling),ie=g(L,G),ie.return=U,U=ie):(c(U,L),ie=tp(G,U.mode,ie),ie.return=U,U=ie),w(U)):c(U,L)}return function(U,L,G,ie){try{Gl=0;var Pe=ot(U,L,G,ie);return gs=null,Pe}catch(Oe){if(Oe===kl||Oe===Mu)throw Oe;var Ue=Zn(29,Oe,null,U.mode);return Ue.lanes=ie,Ue.return=U,Ue}finally{}}}var ys=aS(!0),iS=aS(!1),Pr=V(null),ia=null;function fi(a){var o=a.alternate;le(qt,qt.current&1),le(Pr,a),ia===null&&(o===null||ds.current!==null||o.memoizedState!==null)&&(ia=a)}function oS(a){if(a.tag===22){if(le(qt,qt.current),le(Pr,a),ia===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(ia=a)}}else di()}function di(){le(qt,qt.current),le(Pr,Pr.current)}function _a(a){q(Pr),ia===a&&(ia=null),q(qt)}var qt=V(0);function Ku(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Pm(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Rp(a,o,c,f){o=a.memoizedState,c=c(f,o),c=c==null?o:p({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Ip={enqueueSetState:function(a,o,c){a=a._reactInternals;var f=nr(),g=li(f);g.payload=o,c!=null&&(g.callback=c),o=ci(a,g,f),o!==null&&(rr(o,a,f),Rl(o,a,f))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var f=nr(),g=li(f);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=ci(a,g,f),o!==null&&(rr(o,a,f),Rl(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=nr(),f=li(c);f.tag=2,o!=null&&(f.callback=o),o=ci(a,f,c),o!==null&&(rr(o,a,c),Rl(o,a,c))}};function sS(a,o,c,f,g,b,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,b,w):o.prototype&&o.prototype.isPureReactComponent?!El(c,f)||!El(g,b):!0}function lS(a,o,c,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==a&&Ip.enqueueReplaceState(o,o.state,null)}function mo(a,o){var c=o;if("ref"in o){c={};for(var f in o)f!=="ref"&&(c[f]=o[f])}if(a=a.defaultProps){c===o&&(c=p({},c));for(var g in a)c[g]===void 0&&(c[g]=a[g])}return c}var Vu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function cS(a){Vu(a)}function uS(a){console.error(a)}function fS(a){Vu(a)}function Xu(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function dS(a,o,c){try{var f=a.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Lp(a,o,c){return c=li(c),c.tag=3,c.payload={element:null},c.callback=function(){Xu(a,o)},c}function hS(a){return a=li(a),a.tag=3,a}function pS(a,o,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;a.payload=function(){return g(b)},a.callback=function(){dS(o,c,f)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){dS(o,c,f),typeof g!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var T=f.stack;this.componentDidCatch(f.value,{componentStack:T!==null?T:""})})}function Kj(a,o,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=c.alternate,o!==null&&Dl(o,c,g,!0),c=Pr.current,c!==null){switch(c.tag){case 13:return ia===null?sm():c.alternate===null&&Et===0&&(Et=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===dp?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([f]):o.add(f),cm(a,f,g)),!1;case 22:return c.flags|=65536,f===dp?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([f]):c.add(f)),cm(a,f,g)),!1}throw Error(r(435,c.tag))}return cm(a,f,g),sm(),!1}if(Ze)return o=Pr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==ip&&(a=Error(r(422),{cause:f}),Tl(xr(a,c)))):(f!==ip&&(o=Error(r(423),{cause:f}),Tl(xr(o,c))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,f=xr(f,c),g=Lp(a.stateNode,f,g),mp(a,g),Et!==4&&(Et=2)),!1;var b=Error(r(520),{cause:f});if(b=xr(b,c),Wl===null?Wl=[b]:Wl.push(b),Et!==4&&(Et=2),o===null)return!0;f=xr(f,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=g&-g,c.lanes|=a,a=Lp(c.stateNode,f,a),mp(c,a),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vi===null||!vi.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=hS(g),pS(g,a,c,f),mp(c,g),!1}c=c.return}while(c!==null);return!1}var mS=Error(r(461)),Wt=!1;function fn(a,o,c,f){o.child=a===null?iS(o,null,c,f):ys(o,a.child,c,f)}function gS(a,o,c,f,g){c=c.render;var b=o.ref;if("ref"in f){var w={};for(var T in f)T!=="ref"&&(w[T]=f[T])}else w=f;return fo(o),f=xp(a,o,c,w,b,g),T=Sp(),a!==null&&!Wt?(Ap(a,o,g),Ta(a,o,g)):(Ze&&T&&rp(o),o.flags|=1,fn(a,o,f,g),o.child)}function yS(a,o,c,f,g){if(a===null){var b=c.type;return typeof b=="function"&&!ep(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,vS(a,o,b,f,g)):(a=_u(c.type,null,f,o,o.mode,g),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!Yp(a,g)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:El,c(w,f)&&a.ref===o.ref)return Ta(a,o,g)}return o.flags|=1,a=Aa(b,f),a.ref=o.ref,a.return=o,o.child=a}function vS(a,o,c,f,g){if(a!==null){var b=a.memoizedProps;if(El(b,f)&&a.ref===o.ref)if(Wt=!1,o.pendingProps=f=b,Yp(a,g))(a.flags&131072)!==0&&(Wt=!0);else return o.lanes=a.lanes,Ta(a,o,g)}return $p(a,o,c,f,g)}function bS(a,o,c){var f=o.pendingProps,g=f.children,b=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=b!==null?b.baseLanes|c:c,a!==null){for(g=o.child=a.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;o.childLanes=b&~f}else o.childLanes=0,o.child=null;return xS(a,o,f,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&ku(o,b!==null?b.cachePool:null),b!==null?vx(o,b):yp(),oS(o);else return o.lanes=o.childLanes=536870912,xS(a,o,b!==null?b.baseLanes|c:c,c)}else b!==null?(ku(o,b.cachePool),vx(o,b),di(),o.memoizedState=null):(a!==null&&ku(o,null),yp(),di());return fn(a,o,g,c),o.child}function xS(a,o,c,f){var g=fp();return g=g===null?null:{parent:Ht._currentValue,pool:g},o.memoizedState={baseLanes:c,cachePool:g},a!==null&&ku(o,null),yp(),oS(o),a!==null&&Dl(a,o,f,!0),null}function Wu(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function $p(a,o,c,f,g){return fo(o),c=xp(a,o,c,f,void 0,g),f=Sp(),a!==null&&!Wt?(Ap(a,o,g),Ta(a,o,g)):(Ze&&f&&rp(o),o.flags|=1,fn(a,o,c,g),o.child)}function SS(a,o,c,f,g,b){return fo(o),o.updateQueue=null,c=xx(o,f,c,g),bx(a),f=Sp(),a!==null&&!Wt?(Ap(a,o,b),Ta(a,o,b)):(Ze&&f&&rp(o),o.flags|=1,fn(a,o,c,b),o.child)}function AS(a,o,c,f,g){if(fo(o),o.stateNode===null){var b=ss,w=c.contextType;typeof w=="object"&&w!==null&&(b=An(w)),b=new c(f,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Ip,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=f,b.state=o.memoizedState,b.refs={},hp(o),w=c.contextType,b.context=typeof w=="object"&&w!==null?An(w):ss,b.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Rp(o,c,w,f),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&Ip.enqueueReplaceState(b,b.state,null),Ll(o,f,b,g),Il(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){b=o.stateNode;var T=o.memoizedProps,M=mo(c,T);b.props=M;var H=b.context,ne=c.contextType;w=ss,typeof ne=="object"&&ne!==null&&(w=An(ne));var oe=c.getDerivedStateFromProps;ne=typeof oe=="function"||typeof b.getSnapshotBeforeUpdate=="function",T=o.pendingProps!==T,ne||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T||H!==w)&&lS(o,b,f,w),si=!1;var F=o.memoizedState;b.state=F,Ll(o,f,b,g),Il(),H=o.memoizedState,T||F!==H||si?(typeof oe=="function"&&(Rp(o,c,oe,f),H=o.memoizedState),(M=si||sS(o,c,M,f,F,H,w))?(ne||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=H),b.props=f,b.state=H,b.context=w,f=M):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,pp(a,o),w=o.memoizedProps,ne=mo(c,w),b.props=ne,oe=o.pendingProps,F=b.context,H=c.contextType,M=ss,typeof H=="object"&&H!==null&&(M=An(H)),T=c.getDerivedStateFromProps,(H=typeof T=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==oe||F!==M)&&lS(o,b,f,M),si=!1,F=o.memoizedState,b.state=F,Ll(o,f,b,g),Il();var X=o.memoizedState;w!==oe||F!==X||si||a!==null&&a.dependencies!==null&&ju(a.dependencies)?(typeof T=="function"&&(Rp(o,c,T,f),X=o.memoizedState),(ne=si||sS(o,c,ne,f,F,X,M)||a!==null&&a.dependencies!==null&&ju(a.dependencies))?(H||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,X,M),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,X,M)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=X),b.props=f,b.state=X,b.context=M,f=ne):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(o.flags|=1024),f=!1)}return b=f,Wu(a,o),f=(o.flags&128)!==0,b||f?(b=o.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&f?(o.child=ys(o,a.child,null,g),o.child=ys(o,null,c,g)):fn(a,o,c,g),o.memoizedState=b.state,a=o.child):a=Ta(a,o,g),a}function CS(a,o,c,f){return _l(),o.flags|=256,fn(a,o,c,f),o.child}var Bp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Up(a){return{baseLanes:a,cachePool:ux()}}function zp(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=Er),a}function PS(a,o,c){var f=o.pendingProps,g=!1,b=(o.flags&128)!==0,w;if((w=b)||(w=a!==null&&a.memoizedState===null?!1:(qt.current&2)!==0),w&&(g=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,a===null){if(Ze){if(g?fi(o):di(),Ze){var T=Pt,M;if(M=T){e:{for(M=T,T=aa;M.nodeType!==8;){if(!T){T=null;break e}if(M=Fr(M.nextSibling),M===null){T=null;break e}}T=M}T!==null?(o.memoizedState={dehydrated:T,treeContext:oo!==null?{id:Ca,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},M=Zn(18,null,null,0),M.stateNode=T,M.return=o,o.child=M,Mn=o,Pt=null,M=!0):M=!1}M||co(o)}if(T=o.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Pm(T)?o.lanes=32:o.lanes=536870912,null;_a(o)}return T=f.children,f=f.fallback,g?(di(),g=o.mode,T=Qu({mode:"hidden",children:T},g),f=io(f,g,c,null),T.return=o,f.return=o,T.sibling=f,o.child=T,g=o.child,g.memoizedState=Up(c),g.childLanes=zp(a,w,c),o.memoizedState=Bp,f):(fi(o),Gp(o,T))}if(M=a.memoizedState,M!==null&&(T=M.dehydrated,T!==null)){if(b)o.flags&256?(fi(o),o.flags&=-257,o=Hp(a,o,c)):o.memoizedState!==null?(di(),o.child=a.child,o.flags|=128,o=null):(di(),g=f.fallback,T=o.mode,f=Qu({mode:"visible",children:f.children},T),g=io(g,T,c,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,ys(o,a.child,null,c),f=o.child,f.memoizedState=Up(c),f.childLanes=zp(a,w,c),o.memoizedState=Bp,o=g);else if(fi(o),Pm(T)){if(w=T.nextSibling&&T.nextSibling.dataset,w)var H=w.dgst;w=H,f=Error(r(419)),f.stack="",f.digest=w,Tl({value:f,source:null,stack:null}),o=Hp(a,o,c)}else if(Wt||Dl(a,o,c,!1),w=(c&a.childLanes)!==0,Wt||w){if(w=ut,w!==null&&(f=c&-c,f=(f&42)!==0?1:ht(f),f=(f&(w.suspendedLanes|c))!==0?0:f,f!==0&&f!==M.retryLane))throw M.retryLane=f,os(a,f),rr(w,a,f),mS;T.data==="$?"||sm(),o=Hp(a,o,c)}else T.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=M.treeContext,Pt=Fr(T.nextSibling),Mn=o,Ze=!0,lo=null,aa=!1,a!==null&&(Ar[Cr++]=Ca,Ar[Cr++]=Pa,Ar[Cr++]=oo,Ca=a.id,Pa=a.overflow,oo=o),o=Gp(o,f.children),o.flags|=4096);return o}return g?(di(),g=f.fallback,T=o.mode,M=a.child,H=M.sibling,f=Aa(M,{mode:"hidden",children:f.children}),f.subtreeFlags=M.subtreeFlags&65011712,H!==null?g=Aa(H,g):(g=io(g,T,c,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,T=a.child.memoizedState,T===null?T=Up(c):(M=T.cachePool,M!==null?(H=Ht._currentValue,M=M.parent!==H?{parent:H,pool:H}:M):M=ux(),T={baseLanes:T.baseLanes|c,cachePool:M}),g.memoizedState=T,g.childLanes=zp(a,w,c),o.memoizedState=Bp,f):(fi(o),c=a.child,a=c.sibling,c=Aa(c,{mode:"visible",children:f.children}),c.return=o,c.sibling=null,a!==null&&(w=o.deletions,w===null?(o.deletions=[a],o.flags|=16):w.push(a)),o.child=c,o.memoizedState=null,c)}function Gp(a,o){return o=Qu({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Qu(a,o){return a=Zn(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Hp(a,o,c){return ys(o,a.child,null,c),a=Gp(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function ES(a,o,c){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),sp(a.return,o,c)}function qp(a,o,c,f,g){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=c,b.tailMode=g)}function wS(a,o,c){var f=o.pendingProps,g=f.revealOrder,b=f.tail;if(fn(a,o,f.children,c),f=qt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ES(a,c,o);else if(a.tag===19)ES(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(le(qt,f),g){case"forwards":for(c=o.child,g=null;c!==null;)a=c.alternate,a!==null&&Ku(a)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),qp(o,!1,g,c,b);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(a=g.alternate,a!==null&&Ku(a)===null){o.child=g;break}a=g.sibling,g.sibling=c,c=g,g=a}qp(o,!0,c,null,b);break;case"together":qp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ta(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),yi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(Dl(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Aa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Aa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function Yp(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&ju(a)))}function Vj(a,o,c){switch(o.tag){case 3:me(o,o.stateNode.containerInfo),oi(o,Ht,a.memoizedState.cache),_l();break;case 27:case 5:fe(o);break;case 4:me(o,o.stateNode.containerInfo);break;case 10:oi(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(fi(o),o.flags|=128,null):(c&o.child.childLanes)!==0?PS(a,o,c):(fi(o),a=Ta(a,o,c),a!==null?a.sibling:null);fi(o);break;case 19:var g=(a.flags&128)!==0;if(f=(c&o.childLanes)!==0,f||(Dl(a,o,c,!1),f=(c&o.childLanes)!==0),g){if(f)return wS(a,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(qt,qt.current),f)break;return null;case 22:case 23:return o.lanes=0,bS(a,o,c);case 24:oi(o,Ht,a.memoizedState.cache)}return Ta(a,o,c)}function OS(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)Wt=!0;else{if(!Yp(a,c)&&(o.flags&128)===0)return Wt=!1,Vj(a,o,c);Wt=(a.flags&131072)!==0}else Wt=!1,Ze&&(o.flags&1048576)!==0&&rx(o,Du,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")ep(f)?(a=mo(f,a),o.tag=1,o=AS(null,o,f,a,c)):(o.tag=0,o=$p(null,o,f,a,c));else{if(f!=null){if(g=f.$$typeof,g===N){o.tag=11,o=gS(null,o,f,a,c);break e}else if(g===R){o.tag=14,o=yS(null,o,f,a,c);break e}}throw o=se(f)||f,Error(r(306,o,""))}}return o;case 0:return $p(a,o,o.type,o.pendingProps,c);case 1:return f=o.type,g=mo(f,o.pendingProps),AS(a,o,f,g,c);case 3:e:{if(me(o,o.stateNode.containerInfo),a===null)throw Error(r(387));f=o.pendingProps;var b=o.memoizedState;g=b.element,pp(a,o),Ll(o,f,null,c);var w=o.memoizedState;if(f=w.cache,oi(o,Ht,f),f!==b.cache&&lp(o,[Ht],c,!0),Il(),f=w.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=CS(a,o,f,c);break e}else if(f!==g){g=xr(Error(r(424)),o),Tl(g),o=CS(a,o,f,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Pt=Fr(a.firstChild),Mn=o,Ze=!0,lo=null,aa=!0,c=iS(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(_l(),f===g){o=Ta(a,o,c);break e}fn(a,o,f,c)}o=o.child}return o;case 26:return Wu(a,o),a===null?(c=j1(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ze||(c=o.type,a=o.pendingProps,f=df(re.current).createElement(c),f[pt]=o,f[Nt]=a,hn(f,c,a),kt(f),o.stateNode=f):o.memoizedState=j1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return fe(o),a===null&&Ze&&(f=o.stateNode=_1(o.type,o.pendingProps,re.current),Mn=o,aa=!0,g=Pt,Si(o.type)?(Em=g,Pt=Fr(f.firstChild)):Pt=g),fn(a,o,o.pendingProps.children,c),Wu(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Ze&&((g=f=Pt)&&(f=AN(f,o.type,o.pendingProps,aa),f!==null?(o.stateNode=f,Mn=o,Pt=Fr(f.firstChild),aa=!1,g=!0):g=!1),g||co(o)),fe(o),g=o.type,b=o.pendingProps,w=a!==null?a.memoizedProps:null,f=b.children,Sm(g,b)?f=null:w!==null&&Sm(g,w)&&(o.flags|=32),o.memoizedState!==null&&(g=xp(a,o,Uj,null,null,c),ic._currentValue=g),Wu(a,o),fn(a,o,f,c),o.child;case 6:return a===null&&Ze&&((a=c=Pt)&&(c=CN(c,o.pendingProps,aa),c!==null?(o.stateNode=c,Mn=o,Pt=null,a=!0):a=!1),a||co(o)),null;case 13:return PS(a,o,c);case 4:return me(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=ys(o,null,f,c):fn(a,o,f,c),o.child;case 11:return gS(a,o,o.type,o.pendingProps,c);case 7:return fn(a,o,o.pendingProps,c),o.child;case 8:return fn(a,o,o.pendingProps.children,c),o.child;case 12:return fn(a,o,o.pendingProps.children,c),o.child;case 10:return f=o.pendingProps,oi(o,o.type,f.value),fn(a,o,f.children,c),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,fo(o),g=An(g),f=f(g),o.flags|=1,fn(a,o,f,c),o.child;case 14:return yS(a,o,o.type,o.pendingProps,c);case 15:return vS(a,o,o.type,o.pendingProps,c);case 19:return wS(a,o,c);case 31:return f=o.pendingProps,c=o.mode,f={mode:f.mode,children:f.children},a===null?(c=Qu(f,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Aa(a.child,f),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return bS(a,o,c);case 24:return fo(o),f=An(Ht),a===null?(g=fp(),g===null&&(g=ut,b=cp(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),o.memoizedState={parent:f,cache:g},hp(o),oi(o,Ht,g)):((a.lanes&c)!==0&&(pp(a,o),Ll(o,null,null,c),Il()),g=a.memoizedState,b=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),oi(o,Ht,f)):(f=b.cache,oi(o,Ht,f),f!==g.cache&&lp(o,[Ht],c,!0))),fn(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Da(a){a.flags|=4}function _S(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!I1(o)){if(o=Pr.current,o!==null&&((Ye&4194048)===Ye?ia!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||o!==ia))throw Ml=dp,fx;a.flags|=8192}}function Zu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?uu():536870912,a.lanes|=o,Ss|=o)}function ql(a,o){if(!Ze)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function At(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,f=0;if(o)for(var g=a.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=f,a.childLanes=c,o}function Xj(a,o,c){var f=o.pendingProps;switch(ap(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return At(o),null;case 3:return c=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),wa(Ht),ae(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Ol(o)?Da(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ox())),At(o),null;case 26:return c=o.memoizedState,a===null?(Da(o),c!==null?(At(o),_S(o,c)):(At(o),o.flags&=-16777217)):c?c!==a.memoizedState?(Da(o),At(o),_S(o,c)):(At(o),o.flags&=-16777217):(a.memoizedProps!==f&&Da(o),At(o),o.flags&=-16777217),null;case 27:ye(o),c=re.current;var g=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==f&&Da(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return At(o),null}a=ve.current,Ol(o)?ax(o):(a=_1(g,f,c),o.stateNode=a,Da(o))}return At(o),null;case 5:if(ye(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&Da(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return At(o),null}if(a=ve.current,Ol(o))ax(o);else{switch(g=df(re.current),a){case 1:a=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?g.createElement(c,{is:f.is}):g.createElement(c)}}a[pt]=o,a[Nt]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=a;e:switch(hn(a,c,f),c){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Da(o)}}return At(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&Da(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(a=re.current,Ol(o)){if(a=o.stateNode,c=o.memoizedProps,f=null,g=Mn,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}a[pt]=o,a=!!(a.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||S1(a.nodeValue,c)),a||co(o)}else a=df(a).createTextNode(f),a[pt]=o,o.stateNode=a}return At(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=Ol(o),f!==null&&f.dehydrated!==null){if(a===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[pt]=o}else _l(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),g=!1}else g=ox(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(_a(o),o):(_a(o),null)}if(_a(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=f!==null,a=a!==null&&a.memoizedState!==null,c){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),Zu(o,o.updateQueue),At(o),null;case 4:return ae(),a===null&&gm(o.stateNode.containerInfo),At(o),null;case 10:return wa(o.type),At(o),null;case 19:if(q(qt),g=o.memoizedState,g===null)return At(o),null;if(f=(o.flags&128)!==0,b=g.rendering,b===null)if(f)ql(g,!1);else{if(Et!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=Ku(a),b!==null){for(o.flags|=128,ql(g,!1),a=b.updateQueue,o.updateQueue=a,Zu(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)nx(c,a),c=c.sibling;return le(qt,qt.current&1|2),o.child}a=a.sibling}g.tail!==null&&Re()>tf&&(o.flags|=128,f=!0,ql(g,!1),o.lanes=4194304)}else{if(!f)if(a=Ku(b),a!==null){if(o.flags|=128,f=!0,a=a.updateQueue,o.updateQueue=a,Zu(o,a),ql(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Ze)return At(o),null}else 2*Re()-g.renderingStartTime>tf&&c!==536870912&&(o.flags|=128,f=!0,ql(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(a=g.last,a!==null?a.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Re(),o.sibling=null,a=qt.current,le(qt,f?a&1|2:a&1),o):(At(o),null);case 22:case 23:return _a(o),vp(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(c&536870912)!==0&&(o.flags&128)===0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),c=o.updateQueue,c!==null&&Zu(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048),a!==null&&q(ho),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),wa(Ht),At(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Wj(a,o){switch(ap(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return wa(Ht),ae(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return ye(o),null;case 13:if(_a(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));_l()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return q(qt),null;case 4:return ae(),null;case 10:return wa(o.type),null;case 22:case 23:return _a(o),vp(),a!==null&&q(ho),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return wa(Ht),null;case 25:return null;default:return null}}function TS(a,o){switch(ap(o),o.tag){case 3:wa(Ht),ae();break;case 26:case 27:case 5:ye(o);break;case 4:ae();break;case 13:_a(o);break;case 19:q(qt);break;case 10:wa(o.type);break;case 22:case 23:_a(o),vp(),a!==null&&q(ho);break;case 24:wa(Ht)}}function Yl(a,o){try{var c=o.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&a)===a){f=void 0;var b=c.create,w=c.inst;f=b(),w.destroy=f}c=c.next}while(c!==g)}}catch(T){lt(o,o.return,T)}}function hi(a,o,c){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&a)===a){var w=f.inst,T=w.destroy;if(T!==void 0){w.destroy=void 0,g=o;var M=c,H=T;try{H()}catch(ne){lt(g,M,ne)}}}f=f.next}while(f!==b)}}catch(ne){lt(o,o.return,ne)}}function DS(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{yx(o,c)}catch(f){lt(a,a.return,f)}}}function jS(a,o,c){c.props=mo(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(f){lt(a,o,f)}}function Fl(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof c=="function"?a.refCleanup=c(f):c.current=f}}catch(g){lt(a,o,g)}}function oa(a,o){var c=a.ref,f=a.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){lt(a,o,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){lt(a,o,g)}else c.current=null}function NS(a){var o=a.type,c=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){lt(a,a.return,g)}}function Fp(a,o,c){try{var f=a.stateNode;yN(f,a.type,c,o),f[Nt]=o}catch(g){lt(a,a.return,g)}}function kS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Si(a.type)||a.tag===4}function Kp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||kS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Si(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Vp(a,o,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=ff));else if(f!==4&&(f===27&&Si(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(Vp(a,o,c),a=a.sibling;a!==null;)Vp(a,o,c),a=a.sibling}function Ju(a,o,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(f!==4&&(f===27&&Si(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Ju(a,o,c),a=a.sibling;a!==null;)Ju(a,o,c),a=a.sibling}function MS(a){var o=a.stateNode,c=a.memoizedProps;try{for(var f=a.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);hn(o,f,c),o[pt]=a,o[Nt]=c}catch(b){lt(a,a.return,b)}}var ja=!1,_t=!1,Xp=!1,RS=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function Qj(a,o){if(a=a.containerInfo,bm=vf,a=Fb(a),Kh(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var w=0,T=-1,M=-1,H=0,ne=0,oe=a,F=null;t:for(;;){for(var X;oe!==c||g!==0&&oe.nodeType!==3||(T=w+g),oe!==b||f!==0&&oe.nodeType!==3||(M=w+f),oe.nodeType===3&&(w+=oe.nodeValue.length),(X=oe.firstChild)!==null;)F=oe,oe=X;for(;;){if(oe===a)break t;if(F===c&&++H===g&&(T=w),F===b&&++ne===f&&(M=w),(X=oe.nextSibling)!==null)break;oe=F,F=oe.parentNode}oe=X}c=T===-1||M===-1?null:{start:T,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(xm={focusedElem:a,selectionRange:c},vf=!1,Qt=o;Qt!==null;)if(o=Qt,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,Qt=a;else for(;Qt!==null;){switch(o=Qt,b=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,c=o,g=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var ke=mo(c.type,g,c.elementType===c.type);a=f.getSnapshotBeforeUpdate(ke,b),f.__reactInternalSnapshotBeforeUpdate=a}catch(De){lt(c,c.return,De)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)Cm(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Cm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Qt=a;break}Qt=o.return}}function IS(a,o,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:pi(a,c),f&4&&Yl(5,c);break;case 1:if(pi(a,c),f&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(w){lt(c,c.return,w)}else{var g=mo(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(g,o,a.__reactInternalSnapshotBeforeUpdate)}catch(w){lt(c,c.return,w)}}f&64&&DS(c),f&512&&Fl(c,c.return);break;case 3:if(pi(a,c),f&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{yx(a,o)}catch(w){lt(c,c.return,w)}}break;case 27:o===null&&f&4&&MS(c);case 26:case 5:pi(a,c),o===null&&f&4&&NS(c),f&512&&Fl(c,c.return);break;case 12:pi(a,c);break;case 13:pi(a,c),f&4&&BS(a,c),f&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=oN.bind(null,c),PN(a,c))));break;case 22:if(f=c.memoizedState!==null||ja,!f){o=o!==null&&o.memoizedState!==null||_t,g=ja;var b=_t;ja=f,(_t=o)&&!b?mi(a,c,(c.subtreeFlags&8772)!==0):pi(a,c),ja=g,_t=b}break;case 30:break;default:pi(a,c)}}function LS(a){var o=a.alternate;o!==null&&(a.alternate=null,LS(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&mr(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var mt=null,qn=!1;function Na(a,o,c){for(c=c.child;c!==null;)$S(a,o,c),c=c.sibling}function $S(a,o,c){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Zr,c)}catch{}switch(c.tag){case 26:_t||oa(c,o),Na(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:_t||oa(c,o);var f=mt,g=qn;Si(c.type)&&(mt=c.stateNode,qn=!1),Na(a,o,c),tc(c.stateNode),mt=f,qn=g;break;case 5:_t||oa(c,o);case 6:if(f=mt,g=qn,mt=null,Na(a,o,c),mt=f,qn=g,mt!==null)if(qn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(c.stateNode)}catch(b){lt(c,o,b)}else try{mt.removeChild(c.stateNode)}catch(b){lt(c,o,b)}break;case 18:mt!==null&&(qn?(a=mt,w1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),cc(a)):w1(mt,c.stateNode));break;case 4:f=mt,g=qn,mt=c.stateNode.containerInfo,qn=!0,Na(a,o,c),mt=f,qn=g;break;case 0:case 11:case 14:case 15:_t||hi(2,c,o),_t||hi(4,c,o),Na(a,o,c);break;case 1:_t||(oa(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"&&jS(c,o,f)),Na(a,o,c);break;case 21:Na(a,o,c);break;case 22:_t=(f=_t)||c.memoizedState!==null,Na(a,o,c),_t=f;break;default:Na(a,o,c)}}function BS(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{cc(a)}catch(c){lt(o,o.return,c)}}function Zj(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new RS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new RS),o;default:throw Error(r(435,a.tag))}}function Wp(a,o){var c=Zj(a);o.forEach(function(f){var g=sN.bind(null,a,f);c.has(f)||(c.add(f),f.then(g,g))})}function Jn(a,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],b=a,w=o,T=w;e:for(;T!==null;){switch(T.tag){case 27:if(Si(T.type)){mt=T.stateNode,qn=!1;break e}break;case 5:mt=T.stateNode,qn=!1;break e;case 3:case 4:mt=T.stateNode.containerInfo,qn=!0;break e}T=T.return}if(mt===null)throw Error(r(160));$S(b,w,g),mt=null,qn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)US(o,a),o=o.sibling}var Yr=null;function US(a,o){var c=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Jn(o,a),er(a),f&4&&(hi(3,a,a.return),Yl(3,a),hi(5,a,a.return));break;case 1:Jn(o,a),er(a),f&512&&(_t||c===null||oa(c,c.return)),f&64&&ja&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=Yr;if(Jn(o,a),er(a),f&512&&(_t||c===null||oa(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=a.memoizedState,c===null)if(f===null)if(a.stateNode===null){e:{f=a.type,c=a.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[pr]||b[pt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),hn(b,f,c),b[pt]=a,kt(b),f=b;break e;case"link":var w=M1("link","href",g).get(f+(c.href||""));if(w){for(var T=0;T<w.length;T++)if(b=w[T],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(T,1);break t}}b=g.createElement(f),hn(b,f,c),g.head.appendChild(b);break;case"meta":if(w=M1("meta","content",g).get(f+(c.content||""))){for(T=0;T<w.length;T++)if(b=w[T],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(T,1);break t}}b=g.createElement(f),hn(b,f,c),g.head.appendChild(b);break;default:throw Error(r(468,f))}b[pt]=a,kt(b),f=b}a.stateNode=f}else R1(g,a.type,a.stateNode);else a.stateNode=k1(g,f,a.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?R1(g,a.type,a.stateNode):k1(g,f,a.memoizedProps)):f===null&&a.stateNode!==null&&Fp(a,a.memoizedProps,c.memoizedProps)}break;case 27:Jn(o,a),er(a),f&512&&(_t||c===null||oa(c,c.return)),c!==null&&f&4&&Fp(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Jn(o,a),er(a),f&512&&(_t||c===null||oa(c,c.return)),a.flags&32){g=a.stateNode;try{Bn(g,"")}catch(X){lt(a,a.return,X)}}f&4&&a.stateNode!=null&&(g=a.memoizedProps,Fp(a,g,c!==null?c.memoizedProps:g)),f&1024&&(Xp=!0);break;case 6:if(Jn(o,a),er(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,c=a.stateNode;try{c.nodeValue=f}catch(X){lt(a,a.return,X)}}break;case 3:if(mf=null,g=Yr,Yr=hf(o.containerInfo),Jn(o,a),Yr=g,er(a),f&4&&c!==null&&c.memoizedState.isDehydrated)try{cc(o.containerInfo)}catch(X){lt(a,a.return,X)}Xp&&(Xp=!1,zS(a));break;case 4:f=Yr,Yr=hf(a.stateNode.containerInfo),Jn(o,a),er(a),Yr=f;break;case 12:Jn(o,a),er(a);break;case 13:Jn(o,a),er(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(nm=Re()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Wp(a,f)));break;case 22:g=a.memoizedState!==null;var M=c!==null&&c.memoizedState!==null,H=ja,ne=_t;if(ja=H||g,_t=ne||M,Jn(o,a),_t=ne,ja=H,er(a),f&8192)e:for(o=a.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||M||ja||_t||go(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){M=c=o;try{if(b=M.stateNode,g)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{T=M.stateNode;var oe=M.memoizedProps.style,F=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(X){lt(M,M.return,X)}}}else if(o.tag===6){if(c===null){M=o;try{M.stateNode.nodeValue=g?"":M.memoizedProps}catch(X){lt(M,M.return,X)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Wp(a,c))));break;case 19:Jn(o,a),er(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Wp(a,f)));break;case 30:break;case 21:break;default:Jn(o,a),er(a)}}function er(a){var o=a.flags;if(o&2){try{for(var c,f=a.return;f!==null;){if(kS(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,b=Kp(a);Ju(a,b,g);break;case 5:var w=c.stateNode;c.flags&32&&(Bn(w,""),c.flags&=-33);var T=Kp(a);Ju(a,T,w);break;case 3:case 4:var M=c.stateNode.containerInfo,H=Kp(a);Vp(a,H,M);break;default:throw Error(r(161))}}catch(ne){lt(a,a.return,ne)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function zS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;zS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function pi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)IS(a,o.alternate,o),o=o.sibling}function go(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:hi(4,o,o.return),go(o);break;case 1:oa(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&jS(o,o.return,c),go(o);break;case 27:tc(o.stateNode);case 26:case 5:oa(o,o.return),go(o);break;case 22:o.memoizedState===null&&go(o);break;case 30:go(o);break;default:go(o)}a=a.sibling}}function mi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=a,b=o,w=b.flags;switch(b.tag){case 0:case 11:case 15:mi(g,b,c),Yl(4,b);break;case 1:if(mi(g,b,c),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(H){lt(f,f.return,H)}if(f=b,g=f.updateQueue,g!==null){var T=f.stateNode;try{var M=g.shared.hiddenCallbacks;if(M!==null)for(g.shared.hiddenCallbacks=null,g=0;g<M.length;g++)gx(M[g],T)}catch(H){lt(f,f.return,H)}}c&&w&64&&DS(b),Fl(b,b.return);break;case 27:MS(b);case 26:case 5:mi(g,b,c),c&&f===null&&w&4&&NS(b),Fl(b,b.return);break;case 12:mi(g,b,c);break;case 13:mi(g,b,c),c&&w&4&&BS(g,b);break;case 22:b.memoizedState===null&&mi(g,b,c),Fl(b,b.return);break;case 30:break;default:mi(g,b,c)}o=o.sibling}}function Qp(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&jl(c))}function Zp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&jl(a))}function sa(a,o,c,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)GS(a,o,c,f),o=o.sibling}function GS(a,o,c,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:sa(a,o,c,f),g&2048&&Yl(9,o);break;case 1:sa(a,o,c,f);break;case 3:sa(a,o,c,f),g&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&jl(a)));break;case 12:if(g&2048){sa(a,o,c,f),a=o.stateNode;try{var b=o.memoizedProps,w=b.id,T=b.onPostCommit;typeof T=="function"&&T(w,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(M){lt(o,o.return,M)}}else sa(a,o,c,f);break;case 13:sa(a,o,c,f);break;case 23:break;case 22:b=o.stateNode,w=o.alternate,o.memoizedState!==null?b._visibility&2?sa(a,o,c,f):Kl(a,o):b._visibility&2?sa(a,o,c,f):(b._visibility|=2,vs(a,o,c,f,(o.subtreeFlags&10256)!==0)),g&2048&&Qp(w,o);break;case 24:sa(a,o,c,f),g&2048&&Zp(o.alternate,o);break;default:sa(a,o,c,f)}}function vs(a,o,c,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=a,w=o,T=c,M=f,H=w.flags;switch(w.tag){case 0:case 11:case 15:vs(b,w,T,M,g),Yl(8,w);break;case 23:break;case 22:var ne=w.stateNode;w.memoizedState!==null?ne._visibility&2?vs(b,w,T,M,g):Kl(b,w):(ne._visibility|=2,vs(b,w,T,M,g)),g&&H&2048&&Qp(w.alternate,w);break;case 24:vs(b,w,T,M,g),g&&H&2048&&Zp(w.alternate,w);break;default:vs(b,w,T,M,g)}o=o.sibling}}function Kl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,f=o,g=f.flags;switch(f.tag){case 22:Kl(c,f),g&2048&&Qp(f.alternate,f);break;case 24:Kl(c,f),g&2048&&Zp(f.alternate,f);break;default:Kl(c,f)}o=o.sibling}}var Vl=8192;function bs(a){if(a.subtreeFlags&Vl)for(a=a.child;a!==null;)HS(a),a=a.sibling}function HS(a){switch(a.tag){case 26:bs(a),a.flags&Vl&&a.memoizedState!==null&&LN(Yr,a.memoizedState,a.memoizedProps);break;case 5:bs(a);break;case 3:case 4:var o=Yr;Yr=hf(a.stateNode.containerInfo),bs(a),Yr=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Vl,Vl=16777216,bs(a),Vl=o):bs(a));break;default:bs(a)}}function qS(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Xl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];Qt=f,FS(f,a)}qS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)YS(a),a=a.sibling}function YS(a){switch(a.tag){case 0:case 11:case 15:Xl(a),a.flags&2048&&hi(9,a,a.return);break;case 3:Xl(a);break;case 12:Xl(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,ef(a)):Xl(a);break;default:Xl(a)}}function ef(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];Qt=f,FS(f,a)}qS(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:hi(8,o,o.return),ef(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,ef(o));break;default:ef(o)}a=a.sibling}}function FS(a,o){for(;Qt!==null;){var c=Qt;switch(c.tag){case 0:case 11:case 15:hi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:jl(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Qt=f;else e:for(c=a;Qt!==null;){f=Qt;var g=f.sibling,b=f.return;if(LS(f),f===c){Qt=null;break e}if(g!==null){g.return=b,Qt=g;break e}Qt=b}}}var Jj={getCacheForType:function(a){var o=An(Ht),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},eN=typeof WeakMap=="function"?WeakMap:Map,et=0,ut=null,ze=null,Ye=0,tt=0,tr=null,gi=!1,xs=!1,Jp=!1,ka=0,Et=0,yi=0,yo=0,em=0,Er=0,Ss=0,Wl=null,Yn=null,tm=!1,nm=0,tf=1/0,nf=null,vi=null,dn=0,bi=null,As=null,Cs=0,rm=0,am=null,KS=null,Ql=0,im=null;function nr(){if((et&2)!==0&&Ye!==0)return Ye&-Ye;if($.T!==null){var a=us;return a!==0?a:dm()}return Za()}function VS(){Er===0&&(Er=(Ye&536870912)===0||Ze?Ko():536870912);var a=Pr.current;return a!==null&&(a.flags|=32),Er}function rr(a,o,c){(a===ut&&(tt===2||tt===9)||a.cancelPendingCommit!==null)&&(Ps(a,0),xi(a,Ye,Er,!1)),Ur(a,c),((et&2)===0||a!==ut)&&(a===ut&&((et&2)===0&&(yo|=c),Et===4&&xi(a,Ye,Er,!1)),la(a))}function XS(a,o,c){if((et&6)!==0)throw Error(r(327));var f=!c&&(o&124)===0&&(o&a.expiredLanes)===0||va(a,o),g=f?rN(a,o):lm(a,o,!0),b=f;do{if(g===0){xs&&!f&&xi(a,o,0,!1);break}else{if(c=a.current.alternate,b&&!tN(c)){g=lm(a,o,!1),b=!1;continue}if(g===2){if(b=o,a.errorRecoveryDisabledLanes&b)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var T=a;g=Wl;var M=T.current.memoizedState.isDehydrated;if(M&&(Ps(T,w).flags|=256),w=lm(T,w,!1),w!==2){if(Jp&&!M){T.errorRecoveryDisabledLanes|=b,yo|=b,g=4;break e}b=Yn,Yn=g,b!==null&&(Yn===null?Yn=b:Yn.push.apply(Yn,b))}g=w}if(b=!1,g!==2)continue}}if(g===1){Ps(a,0),xi(a,o,0,!0);break}e:{switch(f=a,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:xi(f,o,Er,!gi);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=nm+300-Re(),10<g)){if(xi(f,o,Er,!gi),Fi(f,0,!0)!==0)break e;f.timeoutHandle=P1(WS.bind(null,f,c,Yn,nf,tm,o,Er,yo,Ss,gi,b,2,-0,0),g);break e}WS(f,c,Yn,nf,tm,o,Er,yo,Ss,gi,b,0,-0,0)}}break}while(!0);la(a)}function WS(a,o,c,f,g,b,w,T,M,H,ne,oe,F,X){if(a.timeoutHandle=-1,oe=o.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(ac={stylesheets:null,count:0,unsuspend:IN},HS(o),oe=$N(),oe!==null)){a.cancelPendingCommit=oe(r1.bind(null,a,o,b,c,f,g,w,T,M,ne,1,F,X)),xi(a,b,w,!H);return}r1(a,o,b,c,f,g,w,T,M)}function tN(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],b=g.getSnapshot;g=g.value;try{if(!Qn(b(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function xi(a,o,c,f){o&=~em,o&=~yo,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var g=o;0<g;){var b=31-yn(g),w=1<<b;f[b]=-1,g&=~w}c!==0&&Sh(a,c,o)}function rf(){return(et&6)===0?(Zl(0),!1):!0}function om(){if(ze!==null){if(tt===0)var a=ze.return;else a=ze,Ea=uo=null,Cp(a),gs=null,Gl=0,a=ze;for(;a!==null;)TS(a.alternate,a),a=a.return;ze=null}}function Ps(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,bN(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),om(),ut=a,ze=c=Aa(a.current,null),Ye=o,tt=0,tr=null,gi=!1,xs=va(a,o),Jp=!1,Ss=Er=em=yo=yi=Et=0,Yn=Wl=null,tm=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var g=31-yn(f),b=1<<g;o|=a[g],f&=~b}return ka=o,Eu(),c}function QS(a,o){Be=null,$.H=qu,o===kl||o===Mu?(o=px(),tt=3):o===fx?(o=px(),tt=4):tt=o===mS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,tr=o,ze===null&&(Et=1,Xu(a,xr(o,a.current)))}function ZS(){var a=$.H;return $.H=qu,a===null?qu:a}function JS(){var a=$.A;return $.A=Jj,a}function sm(){Et=4,gi||(Ye&4194048)!==Ye&&Pr.current!==null||(xs=!0),(yi&134217727)===0&&(yo&134217727)===0||ut===null||xi(ut,Ye,Er,!1)}function lm(a,o,c){var f=et;et|=2;var g=ZS(),b=JS();(ut!==a||Ye!==o)&&(nf=null,Ps(a,o)),o=!1;var w=Et;e:do try{if(tt!==0&&ze!==null){var T=ze,M=tr;switch(tt){case 8:om(),w=6;break e;case 3:case 2:case 9:case 6:Pr.current===null&&(o=!0);var H=tt;if(tt=0,tr=null,Es(a,T,M,H),c&&xs){w=0;break e}break;default:H=tt,tt=0,tr=null,Es(a,T,M,H)}}nN(),w=Et;break}catch(ne){QS(a,ne)}while(!0);return o&&a.shellSuspendCounter++,Ea=uo=null,et=f,$.H=g,$.A=b,ze===null&&(ut=null,Ye=0,Eu()),w}function nN(){for(;ze!==null;)e1(ze)}function rN(a,o){var c=et;et|=2;var f=ZS(),g=JS();ut!==a||Ye!==o?(nf=null,tf=Re()+500,Ps(a,o)):xs=va(a,o);e:do try{if(tt!==0&&ze!==null){o=ze;var b=tr;t:switch(tt){case 1:tt=0,tr=null,Es(a,o,b,1);break;case 2:case 9:if(dx(b)){tt=0,tr=null,t1(o);break}o=function(){tt!==2&&tt!==9||ut!==a||(tt=7),la(a)},b.then(o,o);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:dx(b)?(tt=0,tr=null,t1(o)):(tt=0,tr=null,Es(a,o,b,7));break;case 5:var w=null;switch(ze.tag){case 26:w=ze.memoizedState;case 5:case 27:var T=ze;if(!w||I1(w)){tt=0,tr=null;var M=T.sibling;if(M!==null)ze=M;else{var H=T.return;H!==null?(ze=H,af(H)):ze=null}break t}}tt=0,tr=null,Es(a,o,b,5);break;case 6:tt=0,tr=null,Es(a,o,b,6);break;case 8:om(),Et=6;break e;default:throw Error(r(462))}}aN();break}catch(ne){QS(a,ne)}while(!0);return Ea=uo=null,$.H=f,$.A=g,et=c,ze!==null?0:(ut=null,Ye=0,Eu(),Et)}function aN(){for(;ze!==null&&!jt();)e1(ze)}function e1(a){var o=OS(a.alternate,a,ka);a.memoizedProps=a.pendingProps,o===null?af(a):ze=o}function t1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=SS(c,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=SS(c,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:Cp(o);default:TS(c,o),o=ze=nx(o,ka),o=OS(c,o,ka)}a.memoizedProps=a.pendingProps,o===null?af(a):ze=o}function Es(a,o,c,f){Ea=uo=null,Cp(o),gs=null,Gl=0;var g=o.return;try{if(Kj(a,g,o,c,Ye)){Et=1,Xu(a,xr(c,a.current)),ze=null;return}}catch(b){if(g!==null)throw ze=g,b;Et=1,Xu(a,xr(c,a.current)),ze=null;return}o.flags&32768?(Ze||f===1?a=!0:xs||(Ye&536870912)!==0?a=!1:(gi=a=!0,(f===2||f===9||f===3||f===6)&&(f=Pr.current,f!==null&&f.tag===13&&(f.flags|=16384))),n1(o,a)):af(o)}function af(a){var o=a;do{if((o.flags&32768)!==0){n1(o,gi);return}a=o.return;var c=Xj(o.alternate,o,ka);if(c!==null){ze=c;return}if(o=o.sibling,o!==null){ze=o;return}ze=o=a}while(o!==null);Et===0&&(Et=5)}function n1(a,o){do{var c=Wj(a.alternate,a);if(c!==null){c.flags&=32767,ze=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){ze=a;return}ze=a=c}while(a!==null);Et=6,ze=null}function r1(a,o,c,f,g,b,w,T,M){a.cancelPendingCommit=null;do of();while(dn!==0);if((et&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=Zh,fu(a,c,b,w,T,M),a===ut&&(ze=ut=null,Ye=0),As=o,bi=a,Cs=c,rm=b,am=g,KS=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,lN(Yo,function(){return l1(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=$.T,$.T=null,g=ee.p,ee.p=2,w=et,et|=4;try{Qj(a,o,c)}finally{et=w,ee.p=g,$.T=f}}dn=1,a1(),i1(),o1()}}function a1(){if(dn===1){dn=0;var a=bi,o=As,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var f=ee.p;ee.p=2;var g=et;et|=4;try{US(o,a);var b=xm,w=Fb(a.containerInfo),T=b.focusedElem,M=b.selectionRange;if(w!==T&&T&&T.ownerDocument&&Yb(T.ownerDocument.documentElement,T)){if(M!==null&&Kh(T)){var H=M.start,ne=M.end;if(ne===void 0&&(ne=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(ne,T.value.length);else{var oe=T.ownerDocument||document,F=oe&&oe.defaultView||window;if(F.getSelection){var X=F.getSelection(),ke=T.textContent.length,De=Math.min(M.start,ke),ot=M.end===void 0?De:Math.min(M.end,ke);!X.extend&&De>ot&&(w=ot,ot=De,De=w);var U=qb(T,De),L=qb(T,ot);if(U&&L&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var G=oe.createRange();G.setStart(U.node,U.offset),X.removeAllRanges(),De>ot?(X.addRange(G),X.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),X.addRange(G))}}}}for(oe=[],X=T;X=X.parentNode;)X.nodeType===1&&oe.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<oe.length;T++){var ie=oe[T];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}vf=!!bm,xm=bm=null}finally{et=g,ee.p=f,$.T=c}}a.current=o,dn=2}}function i1(){if(dn===2){dn=0;var a=bi,o=As,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var f=ee.p;ee.p=2;var g=et;et|=4;try{IS(a,o.alternate,o)}finally{et=g,ee.p=f,$.T=c}}dn=3}}function o1(){if(dn===4||dn===3){dn=0,je();var a=bi,o=As,c=Cs,f=KS;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?dn=5:(dn=0,As=bi=null,s1(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(vi=null),$n(c),o=o.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Zr,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=$.T,g=ee.p,ee.p=2,$.T=null;try{for(var b=a.onRecoverableError,w=0;w<f.length;w++){var T=f[w];b(T.value,{componentStack:T.stack})}}finally{$.T=o,ee.p=g}}(Cs&3)!==0&&of(),la(a),g=a.pendingLanes,(c&4194090)!==0&&(g&42)!==0?a===im?Ql++:(Ql=0,im=a):Ql=0,Zl(0)}}function s1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,jl(o)))}function of(a){return a1(),i1(),o1(),l1()}function l1(){if(dn!==5)return!1;var a=bi,o=rm;rm=0;var c=$n(Cs),f=$.T,g=ee.p;try{ee.p=32>c?32:c,$.T=null,c=am,am=null;var b=bi,w=Cs;if(dn=0,As=bi=null,Cs=0,(et&6)!==0)throw Error(r(331));var T=et;if(et|=4,YS(b.current),GS(b,b.current,w,c),et=T,Zl(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Zr,b)}catch{}return!0}finally{ee.p=g,$.T=f,s1(a,o)}}function c1(a,o,c){o=xr(c,o),o=Lp(a.stateNode,o,2),a=ci(a,o,2),a!==null&&(Ur(a,2),la(a))}function lt(a,o,c){if(a.tag===3)c1(a,a,c);else for(;o!==null;){if(o.tag===3){c1(o,a,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(vi===null||!vi.has(f))){a=xr(c,a),c=hS(2),f=ci(o,c,2),f!==null&&(pS(c,f,o,a),Ur(f,2),la(f));break}}o=o.return}}function cm(a,o,c){var f=a.pingCache;if(f===null){f=a.pingCache=new eN;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(c)||(Jp=!0,g.add(c),a=iN.bind(null,a,o,c),o.then(a,a))}function iN(a,o,c){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,ut===a&&(Ye&c)===c&&(Et===4||Et===3&&(Ye&62914560)===Ye&&300>Re()-nm?(et&2)===0&&Ps(a,0):em|=c,Ss===Ye&&(Ss=0)),la(a)}function u1(a,o){o===0&&(o=uu()),a=os(a,o),a!==null&&(Ur(a,o),la(a))}function oN(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),u1(a,c)}function sN(a,o){var c=0;switch(a.tag){case 13:var f=a.stateNode,g=a.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(o),u1(a,c)}function lN(a,o){return Je(a,o)}var sf=null,ws=null,um=!1,lf=!1,fm=!1,vo=0;function la(a){a!==ws&&a.next===null&&(ws===null?sf=ws=a:ws=ws.next=a),lf=!0,um||(um=!0,uN())}function Zl(a,o){if(!fm&&lf){fm=!0;do for(var c=!1,f=sf;f!==null;){if(a!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var w=f.suspendedLanes,T=f.pingedLanes;b=(1<<31-yn(42|a)+1)-1,b&=g&~(w&~T),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,p1(f,b))}else b=Ye,b=Fi(f,f===ut?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||va(f,b)||(c=!0,p1(f,b));f=f.next}while(c);fm=!1}}function cN(){f1()}function f1(){lf=um=!1;var a=0;vo!==0&&(vN()&&(a=vo),vo=0);for(var o=Re(),c=null,f=sf;f!==null;){var g=f.next,b=d1(f,o);b===0?(f.next=null,c===null?sf=g:c.next=g,g===null&&(ws=c)):(c=f,(a!==0||(b&3)!==0)&&(lf=!0)),f=g}Zl(a)}function d1(a,o){for(var c=a.suspendedLanes,f=a.pingedLanes,g=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var w=31-yn(b),T=1<<w,M=g[w];M===-1?((T&c)===0||(T&f)!==0)&&(g[w]=cu(T,o)):M<=o&&(a.expiredLanes|=T),b&=~T}if(o=ut,c=Ye,c=Fi(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,c===0||a===o&&(tt===2||tt===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&He(f),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||va(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(f!==null&&He(f),$n(c)){case 2:case 8:c=qo;break;case 32:c=Yo;break;case 268435456:c=sl;break;default:c=Yo}return f=h1.bind(null,a),c=Je(c,f),a.callbackPriority=o,a.callbackNode=c,o}return f!==null&&f!==null&&He(f),a.callbackPriority=2,a.callbackNode=null,2}function h1(a,o){if(dn!==0&&dn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(of()&&a.callbackNode!==c)return null;var f=Ye;return f=Fi(a,a===ut?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(XS(a,f,o),d1(a,Re()),a.callbackNode!=null&&a.callbackNode===c?h1.bind(null,a):null)}function p1(a,o){if(of())return null;XS(a,o,!0)}function uN(){xN(function(){(et&6)!==0?Je(ga,cN):f1()})}function dm(){return vo===0&&(vo=Ko()),vo}function m1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:yl(""+a)}function g1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function fN(a,o,c,f,g){if(o==="submit"&&c&&c.stateNode===g){var b=m1((g[Nt]||null).action),w=f.submitter;w&&(o=(o=w[Nt]||null)?m1(o.formAction):w.getAttribute("formAction"),o!==null&&(b=o,w=null));var T=new wt("action","action",null,f,g);a.push({event:T,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(vo!==0){var M=w?g1(g,w):new FormData(g);Np(c,{pending:!0,data:M,method:g.method,action:b},null,M)}}else typeof b=="function"&&(T.preventDefault(),M=w?g1(g,w):new FormData(g),Np(c,{pending:!0,data:M,method:g.method,action:b},b,M))},currentTarget:g}]})}}for(var hm=0;hm<Qh.length;hm++){var pm=Qh[hm],dN=pm.toLowerCase(),hN=pm[0].toUpperCase()+pm.slice(1);qr(dN,"on"+hN)}qr(Xb,"onAnimationEnd"),qr(Wb,"onAnimationIteration"),qr(Qb,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(Dj,"onTransitionRun"),qr(jj,"onTransitionStart"),qr(Nj,"onTransitionCancel"),qr(Zb,"onTransitionEnd"),Ja("onMouseEnter",["mouseout","mouseover"]),Ja("onMouseLeave",["mouseout","mouseover"]),Ja("onPointerEnter",["pointerout","pointerover"]),Ja("onPointerLeave",["pointerout","pointerover"]),ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function y1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var f=a[c],g=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var w=f.length-1;0<=w;w--){var T=f[w],M=T.instance,H=T.currentTarget;if(T=T.listener,M!==b&&g.isPropagationStopped())break e;b=T,g.currentTarget=H;try{b(g)}catch(ne){Vu(ne)}g.currentTarget=null,b=M}else for(w=0;w<f.length;w++){if(T=f[w],M=T.instance,H=T.currentTarget,T=T.listener,M!==b&&g.isPropagationStopped())break e;b=T,g.currentTarget=H;try{b(g)}catch(ne){Vu(ne)}g.currentTarget=null,b=M}}}}function Ge(a,o){var c=o[on];c===void 0&&(c=o[on]=new Set);var f=a+"__bubble";c.has(f)||(v1(o,a,2,!1),c.add(f))}function mm(a,o,c){var f=0;o&&(f|=4),v1(c,a,f,o)}var cf="_reactListening"+Math.random().toString(36).slice(2);function gm(a){if(!a[cf]){a[cf]=!0,ul.forEach(function(c){c!=="selectionchange"&&(pN.has(c)||mm(c,!1,a),mm(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[cf]||(o[cf]=!0,mm("selectionchange",!1,o))}}function v1(a,o,c,f){switch(G1(o)){case 2:var g=zN;break;case 8:g=GN;break;default:g=Dm}c=g.bind(null,o,c,a),g=void 0,!$e||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?a.addEventListener(o,c,{capture:!0,passive:g}):a.addEventListener(o,c,!0):g!==void 0?a.addEventListener(o,c,{passive:g}):a.addEventListener(o,c,!1)}function ym(a,o,c,f,g){var b=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var T=f.stateNode.containerInfo;if(T===g)break;if(w===4)for(w=f.return;w!==null;){var M=w.tag;if((M===3||M===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;T!==null;){if(w=gr(T),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){f=b=w;continue e}T=T.parentNode}}f=f.return}yu(function(){var H=b,ne=Wi(c),oe=[];e:{var F=Jb.get(a);if(F!==void 0){var X=wt,ke=a;switch(a){case"keypress":if(eo(c)===0)break e;case"keydown":case"keyup":X=Uh;break;case"focusin":ke="focus",X=Al;break;case"focusout":ke="blur",X=Al;break;case"beforeblur":case"afterblur":X=Al;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Hh;break;case Xb:case Wb:case Qb:X=Nh;break;case Zb:X=Q;break;case"scroll":case"scrollend":X=vu;break;case"wheel":X=ce;break;case"copy":case"cut":case"paste":X=Mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Su;break;case"toggle":case"beforetoggle":X=Me}var De=(o&4)!==0,ot=!De&&(a==="scroll"||a==="scrollend"),U=De?F!==null?F+"Capture":null:F;De=[];for(var L=H,G;L!==null;){var ie=L;if(G=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||G===null||U===null||(ie=Zi(L,U),ie!=null&&De.push(ec(L,ie,G))),ot)break;L=L.return}0<De.length&&(F=new X(F,ke,null,c,ne),oe.push({event:F,listeners:De}))}}if((o&7)===0){e:{if(F=a==="mouseover"||a==="pointerover",X=a==="mouseout"||a==="pointerout",F&&c!==vl&&(ke=c.relatedTarget||c.fromElement)&&(gr(ke)||ke[Wn]))break e;if((X||F)&&(F=ne.window===ne?ne:(F=ne.ownerDocument)?F.defaultView||F.parentWindow:window,X?(ke=c.relatedTarget||c.toElement,X=H,ke=ke?gr(ke):null,ke!==null&&(ot=s(ke),De=ke.tag,ke!==ot||De!==5&&De!==27&&De!==6)&&(ke=null)):(X=null,ke=H),X!==ke)){if(De=bu,ie="onMouseLeave",U="onMouseEnter",L="mouse",(a==="pointerout"||a==="pointerover")&&(De=Su,ie="onPointerLeave",U="onPointerEnter",L="pointer"),ot=X==null?F:Ve(X),G=ke==null?F:Ve(ke),F=new De(ie,L+"leave",X,c,ne),F.target=ot,F.relatedTarget=G,ie=null,gr(ne)===H&&(De=new De(U,L+"enter",ke,c,ne),De.target=G,De.relatedTarget=ot,ie=De),ot=ie,X&&ke)t:{for(De=X,U=ke,L=0,G=De;G;G=Os(G))L++;for(G=0,ie=U;ie;ie=Os(ie))G++;for(;0<L-G;)De=Os(De),L--;for(;0<G-L;)U=Os(U),G--;for(;L--;){if(De===U||U!==null&&De===U.alternate)break t;De=Os(De),U=Os(U)}De=null}else De=null;X!==null&&b1(oe,F,X,De,!1),ke!==null&&ot!==null&&b1(oe,ot,ke,De,!0)}}e:{if(F=H?Ve(H):window,X=F.nodeName&&F.nodeName.toLowerCase(),X==="select"||X==="input"&&F.type==="file")var Pe=$b;else if(ii(F))if(Bb)Pe=Oj;else{Pe=Ej;var Ue=Pj}else X=F.nodeName,!X||X.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&mu(H.elementType)&&(Pe=$b):Pe=wj;if(Pe&&(Pe=Pe(a,H))){Cu(oe,Pe,c,ne);break e}Ue&&Ue(a,F,H),a==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&na(F,"number",F.value)}switch(Ue=H?Ve(H):window,a){case"focusin":(ii(Ue)||Ue.contentEditable==="true")&&(rs=Ue,Vh=H,wl=null);break;case"focusout":wl=Vh=rs=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,Kb(oe,c,ne);break;case"selectionchange":if(Tj)break;case"keydown":case"keyup":Kb(oe,c,ne)}var Oe;if(qe)e:{switch(a){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else br?Sn(a,c)&&(Ne="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Ne="onCompositionStart");Ne&&(Gt&&c.locale!=="ko"&&(br||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&br&&(Oe=Ji()):(bn=ne,Zo="value"in bn?bn.value:bn.textContent,br=!0)),Ue=uf(H,Ne),0<Ue.length&&(Ne=new Cl(Ne,a,null,c,ne),oe.push({event:Ne,listeners:Ue}),Oe?Ne.data=Oe:(Oe=ts(c),Oe!==null&&(Ne.data=Oe)))),(Oe=un?ai(a,c):qh(a,c))&&(Ne=uf(H,"onBeforeInput"),0<Ne.length&&(Ue=new Cl("onBeforeInput","beforeinput",null,c,ne),oe.push({event:Ue,listeners:Ne}),Ue.data=Oe)),fN(oe,a,H,c,ne)}y1(oe,o)})}function ec(a,o,c){return{instance:a,listener:o,currentTarget:c}}function uf(a,o){for(var c=o+"Capture",f=[];a!==null;){var g=a,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Zi(a,c),g!=null&&f.unshift(ec(a,g,b)),g=Zi(a,o),g!=null&&f.push(ec(a,g,b))),a.tag===3)return f;a=a.return}return[]}function Os(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function b1(a,o,c,f,g){for(var b=o._reactName,w=[];c!==null&&c!==f;){var T=c,M=T.alternate,H=T.stateNode;if(T=T.tag,M!==null&&M===f)break;T!==5&&T!==26&&T!==27||H===null||(M=H,g?(H=Zi(c,b),H!=null&&w.unshift(ec(c,H,M))):g||(H=Zi(c,b),H!=null&&w.push(ec(c,H,M)))),c=c.return}w.length!==0&&a.push({event:o,listeners:w})}var mN=/\r\n?/g,gN=/\u0000|\uFFFD/g;function x1(a){return(typeof a=="string"?a:""+a).replace(mN,`
`).replace(gN,"")}function S1(a,o){return o=x1(o),x1(a)===o}function ff(){}function it(a,o,c,f,g,b){switch(c){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Bn(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Bn(a,""+f);break;case"className":Vi(a,"class",f);break;case"tabIndex":Vi(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(a,c,f);break;case"style":pu(a,f,b);break;case"data":if(o!=="object"){Vi(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=yl(""+f),a.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&it(a,o,"name",g.name,g,null),it(a,o,"formEncType",g.formEncType,g,null),it(a,o,"formMethod",g.formMethod,g,null),it(a,o,"formTarget",g.formTarget,g,null)):(it(a,o,"encType",g.encType,g,null),it(a,o,"method",g.method,g,null),it(a,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=yl(""+f),a.setAttribute(c,f);break;case"onClick":f!=null&&(a.onclick=ff);break;case"onScroll":f!=null&&Ge("scroll",a);break;case"onScrollEnd":f!=null&&Ge("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}c=yl(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""+f):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":f===!0?a.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,f):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(c,f):a.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(c):a.setAttribute(c,f);break;case"popover":Ge("beforetoggle",a),Ge("toggle",a),Ki(a,"popover",f);break;case"xlinkActuate":vn(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":vn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":vn(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":vn(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":vn(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":vn(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":vn(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":vn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":vn(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ki(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=cn.get(c)||c,Ki(a,c,f))}}function vm(a,o,c,f,g,b){switch(c){case"style":pu(a,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof f=="string"?Bn(a,f):(typeof f=="number"||typeof f=="bigint")&&Bn(a,""+f);break;case"onScroll":f!=null&&Ge("scroll",a);break;case"onScrollEnd":f!=null&&Ge("scrollend",a);break;case"onClick":f!=null&&(a.onclick=ff);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!du.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),b=a[Nt]||null,b=b!=null?b[c]:null,typeof b=="function"&&a.removeEventListener(o,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,f,g);break e}c in a?a[c]=f:f===!0?a.setAttribute(c,""):Ki(a,c,f)}}}function hn(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",a),Ge("load",a);var f=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:it(a,o,b,w,c,null)}}g&&it(a,o,"srcSet",c.srcSet,c,null),f&&it(a,o,"src",c.src,c,null);return;case"input":Ge("invalid",a);var T=b=w=g=null,M=null,H=null;for(f in c)if(c.hasOwnProperty(f)){var ne=c[f];if(ne!=null)switch(f){case"name":g=ne;break;case"type":w=ne;break;case"checked":M=ne;break;case"defaultChecked":H=ne;break;case"value":b=ne;break;case"defaultValue":T=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:it(a,o,f,ne,c,null)}}xa(a,b,T,M,H,w,g,!1),pl(a);return;case"select":Ge("invalid",a),f=w=b=null;for(g in c)if(c.hasOwnProperty(g)&&(T=c[g],T!=null))switch(g){case"value":b=T;break;case"defaultValue":w=T;break;case"multiple":f=T;default:it(a,o,g,T,c,null)}o=b,c=w,a.multiple=!!f,o!=null?ri(a,!!f,o,!1):c!=null&&ri(a,!!f,c,!0);return;case"textarea":Ge("invalid",a),b=g=f=null;for(w in c)if(c.hasOwnProperty(w)&&(T=c[w],T!=null))switch(w){case"value":f=T;break;case"defaultValue":g=T;break;case"children":b=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:it(a,o,w,T,c,null)}Ke(a,f,g,b),pl(a);return;case"option":for(M in c)if(c.hasOwnProperty(M)&&(f=c[M],f!=null))switch(M){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:it(a,o,M,f,c,null)}return;case"dialog":Ge("beforetoggle",a),Ge("toggle",a),Ge("cancel",a),Ge("close",a);break;case"iframe":case"object":Ge("load",a);break;case"video":case"audio":for(f=0;f<Jl.length;f++)Ge(Jl[f],a);break;case"image":Ge("error",a),Ge("load",a);break;case"details":Ge("toggle",a);break;case"embed":case"source":case"link":Ge("error",a),Ge("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in c)if(c.hasOwnProperty(H)&&(f=c[H],f!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:it(a,o,H,f,c,null)}return;default:if(mu(o)){for(ne in c)c.hasOwnProperty(ne)&&(f=c[ne],f!==void 0&&vm(a,o,ne,f,c,void 0));return}}for(T in c)c.hasOwnProperty(T)&&(f=c[T],f!=null&&it(a,o,T,f,c,null))}function yN(a,o,c,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,w=null,T=null,M=null,H=null,ne=null;for(X in c){var oe=c[X];if(c.hasOwnProperty(X)&&oe!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":M=oe;default:f.hasOwnProperty(X)||it(a,o,X,null,f,oe)}}for(var F in f){var X=f[F];if(oe=c[F],f.hasOwnProperty(F)&&(X!=null||oe!=null))switch(F){case"type":b=X;break;case"name":g=X;break;case"checked":H=X;break;case"defaultChecked":ne=X;break;case"value":w=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,o));break;default:X!==oe&&it(a,o,F,X,f,oe)}}ni(a,w,T,M,H,ne,b,g);return;case"select":X=w=T=F=null;for(b in c)if(M=c[b],c.hasOwnProperty(b)&&M!=null)switch(b){case"value":break;case"multiple":X=M;default:f.hasOwnProperty(b)||it(a,o,b,null,f,M)}for(g in f)if(b=f[g],M=c[g],f.hasOwnProperty(g)&&(b!=null||M!=null))switch(g){case"value":F=b;break;case"defaultValue":T=b;break;case"multiple":w=b;default:b!==M&&it(a,o,g,b,f,M)}o=T,c=w,f=X,F!=null?ri(a,!!c,F,!1):!!f!=!!c&&(o!=null?ri(a,!!c,o,!0):ri(a,!!c,c?[]:"",!1));return;case"textarea":X=F=null;for(T in c)if(g=c[T],c.hasOwnProperty(T)&&g!=null&&!f.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:it(a,o,T,null,f,g)}for(w in f)if(g=f[w],b=c[w],f.hasOwnProperty(w)&&(g!=null||b!=null))switch(w){case"value":F=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&it(a,o,w,g,f,b)}gl(a,F,X);return;case"option":for(var ke in c)if(F=c[ke],c.hasOwnProperty(ke)&&F!=null&&!f.hasOwnProperty(ke))switch(ke){case"selected":a.selected=!1;break;default:it(a,o,ke,null,f,F)}for(M in f)if(F=f[M],X=c[M],f.hasOwnProperty(M)&&F!==X&&(F!=null||X!=null))switch(M){case"selected":a.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:it(a,o,M,F,f,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in c)F=c[De],c.hasOwnProperty(De)&&F!=null&&!f.hasOwnProperty(De)&&it(a,o,De,null,f,F);for(H in f)if(F=f[H],X=c[H],f.hasOwnProperty(H)&&F!==X&&(F!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,o));break;default:it(a,o,H,F,f,X)}return;default:if(mu(o)){for(var ot in c)F=c[ot],c.hasOwnProperty(ot)&&F!==void 0&&!f.hasOwnProperty(ot)&&vm(a,o,ot,void 0,f,F);for(ne in f)F=f[ne],X=c[ne],!f.hasOwnProperty(ne)||F===X||F===void 0&&X===void 0||vm(a,o,ne,F,f,X);return}}for(var U in c)F=c[U],c.hasOwnProperty(U)&&F!=null&&!f.hasOwnProperty(U)&&it(a,o,U,null,f,F);for(oe in f)F=f[oe],X=c[oe],!f.hasOwnProperty(oe)||F===X||F==null&&X==null||it(a,o,oe,F,f,X)}var bm=null,xm=null;function df(a){return a.nodeType===9?a:a.ownerDocument}function A1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Sm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Am=null;function vN(){var a=window.event;return a&&a.type==="popstate"?a===Am?!1:(Am=a,!0):(Am=null,!1)}var P1=typeof setTimeout=="function"?setTimeout:void 0,bN=typeof clearTimeout=="function"?clearTimeout:void 0,E1=typeof Promise=="function"?Promise:void 0,xN=typeof queueMicrotask=="function"?queueMicrotask:typeof E1<"u"?function(a){return E1.resolve(null).then(a).catch(SN)}:P1;function SN(a){setTimeout(function(){throw a})}function Si(a){return a==="head"}function w1(a,o){var c=o,f=0,g=0;do{var b=c.nextSibling;if(a.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<f&&8>f){c=f;var w=a.ownerDocument;if(c&1&&tc(w.documentElement),c&2&&tc(w.body),c&4)for(c=w.head,tc(c),w=c.firstChild;w;){var T=w.nextSibling,M=w.nodeName;w[pr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=T}}if(g===0){a.removeChild(b),cc(o);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:f=c.charCodeAt(0)-48;else f=0;c=b}while(c);cc(o)}function Cm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Cm(c),mr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function AN(a,o,c,f){for(;a.nodeType===1;){var g=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[pr])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Fr(a.nextSibling),a===null)break}return null}function CN(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=Fr(a.nextSibling),a===null))return null;return a}function Pm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function PN(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var f=function(){o(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Fr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var Em=null;function O1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function _1(a,o,c){switch(o=df(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function tc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);mr(a)}var wr=new Map,T1=new Set;function hf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ma=ee.d;ee.d={f:EN,r:wN,D:ON,C:_N,L:TN,m:DN,X:NN,S:jN,M:kN};function EN(){var a=Ma.f(),o=rf();return a||o}function wN(a){var o=zr(a);o!==null&&o.tag===5&&o.type==="form"?Xx(o):Ma.r(a)}var _s=typeof document>"u"?null:document;function D1(a,o,c){var f=_s;if(f&&typeof o=="string"&&o){var g=ln(o);g='link[rel="'+a+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),T1.has(g)||(T1.add(g),a={rel:a,crossOrigin:c,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),hn(o,"link",a),kt(o),f.head.appendChild(o)))}}function ON(a){Ma.D(a),D1("dns-prefetch",a,null)}function _N(a,o){Ma.C(a,o),D1("preconnect",a,o)}function TN(a,o,c){Ma.L(a,o,c);var f=_s;if(f&&a&&o){var g='link[rel="preload"][as="'+ln(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+ln(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+ln(c.imageSizes)+'"]')):g+='[href="'+ln(a)+'"]';var b=g;switch(o){case"style":b=Ts(a);break;case"script":b=Ds(a)}wr.has(b)||(a=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),wr.set(b,a),f.querySelector(g)!==null||o==="style"&&f.querySelector(nc(b))||o==="script"&&f.querySelector(rc(b))||(o=f.createElement("link"),hn(o,"link",a),kt(o),f.head.appendChild(o)))}}function DN(a,o){Ma.m(a,o);var c=_s;if(c&&a){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+ln(f)+'"][href="'+ln(a)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ds(a)}if(!wr.has(b)&&(a=p({rel:"modulepreload",href:a},o),wr.set(b,a),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(rc(b)))return}f=c.createElement("link"),hn(f,"link",a),kt(f),c.head.appendChild(f)}}}function jN(a,o,c){Ma.S(a,o,c);var f=_s;if(f&&a){var g=sn(f).hoistableStyles,b=Ts(a);o=o||"default";var w=g.get(b);if(!w){var T={loading:0,preload:null};if(w=f.querySelector(nc(b)))T.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},c),(c=wr.get(b))&&wm(a,c);var M=w=f.createElement("link");kt(M),hn(M,"link",a),M._p=new Promise(function(H,ne){M.onload=H,M.onerror=ne}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,pf(w,o,f)}w={type:"stylesheet",instance:w,count:1,state:T},g.set(b,w)}}}function NN(a,o){Ma.X(a,o);var c=_s;if(c&&a){var f=sn(c).hoistableScripts,g=Ds(a),b=f.get(g);b||(b=c.querySelector(rc(g)),b||(a=p({src:a,async:!0},o),(o=wr.get(g))&&Om(a,o),b=c.createElement("script"),kt(b),hn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function kN(a,o){Ma.M(a,o);var c=_s;if(c&&a){var f=sn(c).hoistableScripts,g=Ds(a),b=f.get(g);b||(b=c.querySelector(rc(g)),b||(a=p({src:a,async:!0,type:"module"},o),(o=wr.get(g))&&Om(a,o),b=c.createElement("script"),kt(b),hn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function j1(a,o,c,f){var g=(g=re.current)?hf(g):null;if(!g)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Ts(c.href),c=sn(g).hoistableStyles,f=c.get(o),f||(f={type:"style",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Ts(c.href);var b=sn(g).hoistableStyles,w=b.get(a);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,w),(b=g.querySelector(nc(a)))&&!b._p&&(w.instance=b,w.state.loading=5),wr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},wr.set(a,c),b||MN(g,a,c,w.state))),o&&f===null)throw Error(r(528,""));return w}if(o&&f!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ds(c),c=sn(g).hoistableScripts,f=c.get(o),f||(f={type:"script",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Ts(a){return'href="'+ln(a)+'"'}function nc(a){return'link[rel="stylesheet"]['+a+"]"}function N1(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function MN(a,o,c,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),hn(o,"link",c),kt(o),a.head.appendChild(o))}function Ds(a){return'[src="'+ln(a)+'"]'}function rc(a){return"script[async]"+a}function k1(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+ln(c.href)+'"]');if(f)return o.instance=f,kt(f),f;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),kt(f),hn(f,"style",g),pf(f,c.precedence,a),o.instance=f;case"stylesheet":g=Ts(c.href);var b=a.querySelector(nc(g));if(b)return o.state.loading|=4,o.instance=b,kt(b),b;f=N1(c),(g=wr.get(g))&&wm(f,g),b=(a.ownerDocument||a).createElement("link"),kt(b);var w=b;return w._p=new Promise(function(T,M){w.onload=T,w.onerror=M}),hn(b,"link",f),o.state.loading|=4,pf(b,c.precedence,a),o.instance=b;case"script":return b=Ds(c.src),(g=a.querySelector(rc(b)))?(o.instance=g,kt(g),g):(f=c,(g=wr.get(b))&&(f=p({},c),Om(f,g)),a=a.ownerDocument||a,g=a.createElement("script"),kt(g),hn(g,"link",f),a.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,pf(f,c.precedence,a));return o.instance}function pf(a,o,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,w=0;w<f.length;w++){var T=f[w];if(T.dataset.precedence===o)b=T;else if(b!==g)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function wm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Om(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var mf=null;function M1(a,o,c){if(mf===null){var f=new Map,g=mf=new Map;g.set(c,f)}else g=mf,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(a))return f;for(f.set(a,null),c=c.getElementsByTagName(a),g=0;g<c.length;g++){var b=c[g];if(!(b[pr]||b[pt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(o)||"";w=a+w;var T=f.get(w);T?T.push(b):f.set(w,[b])}}return f}function R1(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function RN(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function I1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var ac=null;function IN(){}function LN(a,o,c){if(ac===null)throw Error(r(475));var f=ac;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Ts(c.href),b=a.querySelector(nc(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=gf.bind(f),a.then(f,f)),o.state.loading|=4,o.instance=b,kt(b);return}b=a.ownerDocument||a,c=N1(c),(g=wr.get(g))&&wm(c,g),b=b.createElement("link"),kt(b);var w=b;w._p=new Promise(function(T,M){w.onload=T,w.onerror=M}),hn(b,"link",c),o.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=gf.bind(f),a.addEventListener("load",o),a.addEventListener("error",o))}}function $N(){if(ac===null)throw Error(r(475));var a=ac;return a.stylesheets&&a.count===0&&_m(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&_m(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function gf(){if(this.count--,this.count===0){if(this.stylesheets)_m(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var yf=null;function _m(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,yf=new Map,o.forEach(BN,a),yf=null,gf.call(a))}function BN(a,o){if(!(o.state.loading&4)){var c=yf.get(a);if(c)var f=c.get(null);else{c=new Map,yf.set(a,c);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var w=g[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),f=w)}f&&c.set(null,f)}g=o.instance,w=g.getAttribute("data-precedence"),b=c.get(w)||f,b===f&&c.set(null,g),c.set(w,g),this.count++,f=gf.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),o.state.loading|=4}}var ic={$$typeof:_,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function UN(a,o,c,f,g,b,w,T){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.hiddenUpdates=Vo(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function L1(a,o,c,f,g,b,w,T,M,H,ne,oe){return a=new UN(a,o,c,w,T,M,H,oe),o=1,b===!0&&(o|=24),b=Zn(3,null,null,o),a.current=b,b.stateNode=a,o=cp(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:o},hp(b),a}function $1(a){return a?(a=ss,a):ss}function B1(a,o,c,f,g,b){g=$1(g),f.context===null?f.context=g:f.pendingContext=g,f=li(o),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=ci(a,f,o),c!==null&&(rr(c,a,o),Rl(c,a,o))}function U1(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function Tm(a,o){U1(a,o),(a=a.alternate)&&U1(a,o)}function z1(a){if(a.tag===13){var o=os(a,67108864);o!==null&&rr(o,a,67108864),Tm(a,67108864)}}var vf=!0;function zN(a,o,c,f){var g=$.T;$.T=null;var b=ee.p;try{ee.p=2,Dm(a,o,c,f)}finally{ee.p=b,$.T=g}}function GN(a,o,c,f){var g=$.T;$.T=null;var b=ee.p;try{ee.p=8,Dm(a,o,c,f)}finally{ee.p=b,$.T=g}}function Dm(a,o,c,f){if(vf){var g=jm(f);if(g===null)ym(a,o,f,bf,c),H1(a,f);else if(qN(g,a,o,c,f))f.stopPropagation();else if(H1(a,f),o&4&&-1<HN.indexOf(a)){for(;g!==null;){var b=zr(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=ea(b.pendingLanes);if(w!==0){var T=b;for(T.pendingLanes|=2,T.entangledLanes|=2;w;){var M=1<<31-yn(w);T.entanglements[1]|=M,w&=~M}la(b),(et&6)===0&&(tf=Re()+500,Zl(0))}}break;case 13:T=os(b,2),T!==null&&rr(T,b,2),rf(),Tm(b,2)}if(b=jm(f),b===null&&ym(a,o,f,bf,c),b===g)break;g=b}g!==null&&f.stopPropagation()}else ym(a,o,f,null,c)}}function jm(a){return a=Wi(a),Nm(a)}var bf=null;function Nm(a){if(bf=null,a=gr(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return bf=a,null}function G1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qr()){case ga:return 2;case qo:return 8;case Yo:case Hi:return 32;case sl:return 268435456;default:return 32}default:return 32}}var km=!1,Ai=null,Ci=null,Pi=null,oc=new Map,sc=new Map,Ei=[],HN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H1(a,o){switch(a){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":sc.delete(o.pointerId)}}function lc(a,o,c,f,g,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},o!==null&&(o=zr(o),o!==null&&z1(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),a)}function qN(a,o,c,f,g){switch(o){case"focusin":return Ai=lc(Ai,a,o,c,f,g),!0;case"dragenter":return Ci=lc(Ci,a,o,c,f,g),!0;case"mouseover":return Pi=lc(Pi,a,o,c,f,g),!0;case"pointerover":var b=g.pointerId;return oc.set(b,lc(oc.get(b)||null,a,o,c,f,g)),!0;case"gotpointercapture":return b=g.pointerId,sc.set(b,lc(sc.get(b)||null,a,o,c,f,g)),!0}return!1}function q1(a){var o=gr(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,cl(a.priority,function(){if(c.tag===13){var f=nr();f=ht(f);var g=os(c,f);g!==null&&rr(g,c,f),Tm(c,f)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xf(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=jm(a.nativeEvent);if(c===null){c=a.nativeEvent;var f=new c.constructor(c.type,c);vl=f,c.target.dispatchEvent(f),vl=null}else return o=zr(c),o!==null&&z1(o),a.blockedOn=c,!1;o.shift()}return!0}function Y1(a,o,c){xf(a)&&c.delete(o)}function YN(){km=!1,Ai!==null&&xf(Ai)&&(Ai=null),Ci!==null&&xf(Ci)&&(Ci=null),Pi!==null&&xf(Pi)&&(Pi=null),oc.forEach(Y1),sc.forEach(Y1)}function Sf(a,o){a.blockedOn===o&&(a.blockedOn=null,km||(km=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,YN)))}var Af=null;function F1(a){Af!==a&&(Af=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Af===a&&(Af=null);for(var o=0;o<a.length;o+=3){var c=a[o],f=a[o+1],g=a[o+2];if(typeof f!="function"){if(Nm(f||c)===null)continue;break}var b=zr(c);b!==null&&(a.splice(o,3),o-=3,Np(b,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function cc(a){function o(M){return Sf(M,a)}Ai!==null&&Sf(Ai,a),Ci!==null&&Sf(Ci,a),Pi!==null&&Sf(Pi,a),oc.forEach(o),sc.forEach(o);for(var c=0;c<Ei.length;c++){var f=Ei[c];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Ei.length&&(c=Ei[0],c.blockedOn===null);)q1(c),c.blockedOn===null&&Ei.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],b=c[f+1],w=g[Nt]||null;if(typeof b=="function")w||F1(c);else if(w){var T=null;if(b&&b.hasAttribute("formAction")){if(g=b,w=b[Nt]||null)T=w.formAction;else if(Nm(g)!==null)continue}else T=w.action;typeof T=="function"?c[f+1]=T:(c.splice(f,3),f-=3),F1(c)}}}function Mm(a){this._internalRoot=a}Cf.prototype.render=Mm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,f=nr();B1(c,f,a,o,null,null)},Cf.prototype.unmount=Mm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;B1(a.current,2,null,a,null,null),rf(),o[Wn]=null}};function Cf(a){this._internalRoot=a}Cf.prototype.unstable_scheduleHydration=function(a){if(a){var o=Za();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Ei.length&&o!==0&&o<Ei[c].priority;c++);Ei.splice(c,0,a),c===0&&q1(a)}};var K1=t.version;if(K1!=="19.1.1")throw Error(r(527,K1,"19.1.1"));ee.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(o),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var FN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pf.isDisabled&&Pf.supportsFiber)try{Zr=Pf.inject(FN),an=Pf}catch{}}return fc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,f="",g=cS,b=uS,w=fS,T=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(T=o.unstable_transitionCallbacks)),o=L1(a,1,!1,null,null,c,f,g,b,w,T,null),a[Wn]=o.current,gm(a),new Mm(o)},fc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var f=!1,g="",b=cS,w=uS,T=fS,M=null,H=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(M=c.unstable_transitionCallbacks),c.formState!==void 0&&(H=c.formState)),o=L1(a,1,!0,o,c??null,f,g,b,w,T,M,H),o.context=$1(null),c=o.current,f=nr(),f=ht(f),g=li(f),g.callback=null,ci(c,g,f),c=f,o.current.lanes=c,Ur(o,c),la(o),a[Wn]=o.current,gm(a),new Cf(o)},fc.version="19.1.1",fc}var rA;function nk(){if(rA)return Lm.exports;rA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lm.exports=tk(),Lm.exports}var rk=nk();const ak=Xr(rk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ok=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),aA=e=>{const t=ok(e);return t.charAt(0).toUpperCase()+t.slice(1)},Nw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),sk=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},d)=>C.createElement("svg",{ref:d,...lk,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Nw("lucide",i),...!s&&!sk(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,p])=>C.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(e,t)=>{const n=C.forwardRef(({className:r,...i},s)=>C.createElement(ck,{ref:s,iconNode:t,className:Nw(`lucide-${ik(aA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=aA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],jc=bt("bolt",uk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],dk=bt("bomb",fk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pk=bt("chevron-down",hk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],iA=bt("chevron-right",mk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],wc=bt("chevron-up",gk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kw=bt("clock",yk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Mw=bt("copy",vk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],oA=bt("cpu",bk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Sk=bt("download",xk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sA=bt("eye",Ak);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Pk=bt("hand",Ck);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tv=bt("loader-circle",Ek);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Py=bt("rocket",wk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_k=bt("rotate-ccw",Ok);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lA=bt("settings",Tk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zf=bt("shield-check",Dk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zm=bt("shield",jk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],kk=bt("skull",Nk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Ey=bt("sword",Mk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ik=bt("target",Rk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$k=bt("upload",Lk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rw=bt("user",Bk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],cA=bt("wrench",Uk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ft=bt("x",zk),Tn=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",icon:zm,effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",icon:dk,effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",icon:cA,targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:2,image:"/img/Interceptor.png",abilities:[{name:"Vigilant",description:"Can always intercept attacks in this lane, regardless of speed.",type:"PASSIVE",icon:zf,effect:{type:"GRANT_KEYWORD",keyword:"ALWAYS_INTERCEPTS"}},{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",icon:zm,effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",icon:zm,scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",icon:kk,effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",icon:Ik,targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",icon:Ey,effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",icon:wc,effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",icon:Ey,effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",icon:iA,effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",icon:iA,effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",icon:cA,targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],Gk=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD022",baseCardId:"CARD022",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD023",baseCardId:"CARD023",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],uA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},ki=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Fa=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=ki(l),d={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const p in l.middleLaneBonus)d.hasOwnProperty(p)&&(d[p]+=l.middleLaneBonus[p]);r[s]=d}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},Mr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=Tn.find(y=>y.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,d=s.speed,h=s.shields,p=s.class;l.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(d+=y.mod.value),y.mod.stat==="shields"&&(h+=y.mod.value),y.mod.stat==="cost"&&(p+=y.mod.value)}),p=Math.max(0,p);let m={...e,attack:u,speed:d,maxShields:h,cost:p,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(m.attack+=y.value),y.stat==="speed"&&(m.speed+=y.value),y.stat==="cost"&&(m.cost=Math.max(0,m.cost+y.value))}),s.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&m.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:x,mod:S}=y.effect;let A=!1;if(x.type==="SHIP_SECTION_HULL_DAMAGED"&&x.location==="SAME_LANE"){const P=parseInt(t.slice(-1))-1,O=(n.name==="Player 1"?i.player1:i.player2)[P];if(O){const _=n.shipSections[O],N=ki(_);(N==="damaged"||N==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(m.attack+=S.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:x,mod:S}=y.effect;let A=0;if(x.type==="OWN_DAMAGED_SECTIONS")for(const P in n.shipSections){const E=n.shipSections[P],O=ki(E);(O==="damaged"||O==="critical")&&A++}A>0&&(S.stat==="attack"&&(m.attack+=S.value*A),S.stat==="speed"&&(m.speed+=S.value*A))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(x=>{x.stat==="attack"&&(m.attack+=x.value),x.stat==="speed"&&(m.speed+=x.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;Tn.find(S=>S.name===y.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:P}=S.effect;A==="shields"?m.maxShields+=P:A==="attack"?m.attack+=P:A==="speed"&&(m.speed+=P)}})}),l.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(x=>{if(x.type==="PASSIVE"&&(x.effect.type==="GRANT_KEYWORD"&&m.keywords.add(x.effect.keyword),x.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=x.effect;S==="attack"&&(m.attack+=A),S==="speed"&&(m.speed+=A),S==="shields"&&(m.maxShields+=A)}})}),m},Hk=(e,t)=>({...e,instanceId:t}),Ns=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],Iw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=Gk.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(Hk(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},Dv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},qk=(e,t)=>{const n=Fa({shipSections:uA},[]).totals;return{name:e,shipSections:uA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:Iw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Nc=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},Lw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},Ws=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=Mr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},pa=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},Oc=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],h=!(typeof n.cost=="number"),{type:p,affinity:m,location:y,custom:x}=n.targeting;let S=null;if(h&&Object.values(s.dronesOnBoard).flat().some(O=>O.id===t.id)&&(S=pa(t.id,s),!S))return[];const A=(E,O)=>{Object.entries(E.dronesOnBoard).forEach(([_,N])=>{let j=!1;y==="ANY_LANE"&&(j=!0),h&&y==="SAME_LANE"&&(j=_===S),j&&N.forEach(D=>{let R=!0;if(x?.includes("DAMAGED_HULL")){const k=Tn.find(B=>B.name===D.name);(!k||D.hull>=k.hull)&&(R=!1)}x?.includes("EXHAUSTED")&&(D.isExhausted||(R=!1)),R&&u.push({...D,lane:_,owner:O})})})},P=(E,O)=>{Object.keys(E.shipSections).forEach(_=>{u.push({id:_,owner:O,...E.shipSections[_]})})};if(p==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(s,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(p==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&P(s,e),(m==="ENEMY"||m==="ANY")&&P(l,e==="player1"?"player2":"player1");else if(p==="LANE")["lane1","lane2","lane3"].forEach(E=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:E,owner:e}),m==="ENEMY"||m==="ANY"){const O=e==="player1"?"player2":"player1";u.push({id:E,owner:O})}});else if(p==="DRONE_CARD"){const E=e==="player1"?r:i;E.activeDronePool.forEach(O=>{const _=Tn.find(R=>R.name===O.name),N=E.appliedUpgrades[O.name]||[],j=N.filter(R=>R.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;_&&N.length<_.upgradeSlots&&j<D&&u.push({...O,id:O.name,owner:e})})}else if(p==="APPLIED_UPGRADE"){const E=m==="ENEMY"?l:s,O=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(E.dronesOnBoard).flat().forEach(_=>{(E.appliedUpgrades[_.name]||[]).length>0&&u.push({..._,owner:O})})}return u},$w=(e,t,n,r,i)=>{const s=Tn.find(h=>h.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const d=s.abilities.filter(h=>h.type==="TRIGGERED"&&h.trigger==="ON_MOVE");if(d.length>0){const h=l.dronesOnBoard[r].findIndex(p=>p.id===t.id);if(h!==-1){const p=l.dronesOnBoard[r][h];d.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),p.statMods||(p.statMods=[]),m.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,p.statMods.push(y.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},Bw=(e,t)=>{const n=Tn.find(u=>u.name===t.name);if(!n?.abilities)return{newState:e,effects:[]};let r=JSON.parse(JSON.stringify(e));const i=[];let s=!1;return n.abilities.filter(u=>u.effect?.type==="AFTER_ATTACK").forEach(u=>{const{subEffect:d}=u.effect;if(d.type==="DESTROY_SELF")for(const h in r.dronesOnBoard){const p=r.dronesOnBoard[h].findIndex(m=>m.id===t.id);if(p!==-1){s=!0;const m=r.dronesOnBoard[h][p];i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', destroying itself.`}}),i.push({type:"EXPLOSION",payload:{targetId:t.id}}),r.dronesOnBoard[h]=r.dronesOnBoard[h].filter(y=>y.id!==t.id),Object.assign(r,Nc(r,m));break}}else if(d.type==="PERMANENT_STAT_MOD")for(const h in r.dronesOnBoard){const p=r.dronesOnBoard[h].findIndex(m=>m.id===t.id);if(p!==-1){s=!0,r.dronesOnBoard[h][p].statMods||(r.dronesOnBoard[h][p].statMods=[]),i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', gaining a permanent +${d.mod.value} ${d.mod.stat}.`}}),r.dronesOnBoard[h][p].statMods.push(d.mod);break}}}),{newState:s?r:e,effects:i}},wy=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>ki(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},Uw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=Tn.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const d=t.class;let h=0,p=0;return n===1?(p=Math.min(e.initialDeploymentBudget,d),h=d-p):(p=Math.min(e.deploymentBudget,d),h=d-p),e.energy<h?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${h} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:p,energyCost:h}},zw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},jv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=Dv(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},Yk=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},Fk=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")zw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=jv(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},Kk=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=jv(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},Vk=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Fa(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(d=>{l[d]={...n.shipSections[d],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},Xk=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,d=Fa(s,l).totals.shieldsPerTurn,h=JSON.parse(JSON.stringify(s.shipSections)),p=Object.keys(h);let m=d,y=0,x=0;for(;m>0&&x<100;){const E=p[y%p.length],O=h[E],_=Dv(E,s,l);O.allocatedShields<_&&(O.allocatedShields++,m--),y++,x++}const S={...s,shipSections:h},P={success:!0,newPhase:"deployment",firstPlayer:$d(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(P.player1State=i,P.player2State=S):(P.player1State=S,P.player2State=i),P},Wk=(e,t,n,r,i,s,l)=>{const{effect:u,cost:d}=e,h=r.player1;let p="",m="Ability effect applied.";e.targeting?.type==="LANE"?p=`Lane ${n.id.slice(-1)}`:n&&(p=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${p}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${p}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${p}.`),s&&s({player:h.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:p,outcome:m});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(d.energy&&(y.player1.energy-=d.energy),d.exhausts)for(const S in y.player1.dronesOnBoard){const A=y.player1.dronesOnBoard[S].findIndex(P=>P.id===t.id);if(A!==-1){y.player1.dronesOnBoard[S][A].isExhausted=!0;break}}const x=Vw(u,t,n,y,i,{resolveAttackCallback:l});return y.player1=x.newPlayerStates.player1,y.player2=x.newPlayerStates.player2,{newPlayerStates:y,shouldEndTurn:!u.goAgain}},Qk=(e,t,n,r,i,s,l)=>{const{cost:u,effect:d}=e,h=r.player1;s&&s({player:h.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const p={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.player1.energy-=u.energy,d.type==="REALLOCATE_SHIELDS")return{newPlayerStates:p,shouldEndTurn:!1,requiresShieldReallocation:!0};{const m=Xw(d,t,n,p,i,{resolveAttackCallback:l});if(p.player1=m.newPlayerStates.player1,p.player2=m.newPlayerStates.player2,m.needsDiscardSelection)return{newPlayerStates:p,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0}}}return{newPlayerStates:p,shouldEndTurn:!0}},Gw=(e,t,n,r,i,s,l)=>{const u=Uw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Fa(r,s.player1));if(!u.isValid)return{success:!1,error:u.reason,message:u.message,newPlayerState:r};const{budgetCost:d,energyCost:h}=u;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const p=JSON.parse(JSON.stringify(r)),m={...p.dronesOnBoard,[t]:[...p.dronesOnBoard[t],{...e,id:0}]},y={...p,dronesOnBoard:m},x=Mr(e,t,y,i,s),S={...e,id:Date.now(),statMods:[],currentShields:x.maxShields,currentMaxShields:x.maxShields,hull:e.hull,isExhausted:!1};return p.dronesOnBoard[t].push(S),p.deployedDroneCounts={...p.deployedDroneCounts,[e.name]:(p.deployedDroneCounts[e.name]||0)+1},n===1?p.initialDeploymentBudget-=d:p.deploymentBudget-=d,p.energy-=h,p.dronesOnBoard=Ws(p,i,s),{success:!0,newPlayerState:p,deployedDrone:S}},Zk=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return wy(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):wy(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},Jk=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=pa(e.id,t);if(!i)return[];const s=Mr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(d=>{const h=Mr(d,i,n,t,r);return!d.isExhausted&&(h.speed>s.speed||h.keywords.has("ALWAYS_INTERCEPTS"))}).map(d=>d.id)},eM=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,d=e.class;let h=0;n===1?h=Math.min(r.initialDeploymentBudget,d):h=Math.min(r.deploymentBudget,d);const p=d-h;if(r.energy<p)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-h:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-h:r.deploymentBudget,energy:r.energy-p};return y.dronesOnBoard=Ws(y,i,s),{success:!0,newPlayerState:y,deployedDrone:m,costs:{energy:p,budget:h}}},tM=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l}=e,u=Mr(r,l,t.player2,t.player1,n),d=t.player1.dronesOnBoard[l].filter(h=>{const p=Mr(h,l,t.player1,t.player2,n);return!h.isExhausted&&(p.speed>u.speed||p.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||h.id!==i.id)});return{hasInterceptors:d.length>0,interceptors:d,attackDetails:e}},Nv=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},nM=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},rM=(e,t)=>{const n=Nv(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},aM=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=$d(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},iM=(e,t,n,r)=>{const i=Oy(e.player1,t,n,e.player2,e.placedSections),s=Oy(e.player2,t,r,e.player1,e.opponentPlacedSections),l=_y(i,n.totals.handLimit),u=_y(s,r.totals.handLimit),d=$d(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),h={...e,turn:t,turnPhase:"deployment",currentPlayer:d,firstPlayerOfRound:d,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},p=[{type:"ROUND_START",turn:t,firstPlayer:d},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:h,uiEffects:p}},Hw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=Mr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},Oy=(e,t,n,r,i)=>({...Hw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),_y=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},oM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:d,opponentPlacedSections:h}=e,{addLogEntry:p,setPlayer2:m,setPendingAttack:y,endTurn:x,endDeploymentPhase:S,endActionPhase:A,setPassInfo:P}=n;let E;return l==="deployment"&&!u.player2Passed?E=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:h,placedSections:d,getShipStatus:ki,calculateEffectiveShipStats:Fa,calculateEffectiveStats:Mr,addLogEntry:p}):l==="action"&&!u.player2Passed&&(E=t.handleOpponentAction({player1:r,player2:i,placedSections:d,opponentPlacedSections:h,getShipStatus:ki,getLaneOfDrone:pa,getValidTargets:Oc,calculateEffectiveStats:Mr,addLogEntry:p})),E||null},sM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:d}=t,{addLogEntry:h,setPlayer2:p,setPendingAttack:m,endTurn:y,endDeploymentPhase:x,endActionPhase:S,setPassInfo:A,resolveCardPlay:P}=n;if(e.type==="pass"){const E=!t.passInfo.player1Passed,O={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(E?"player2":null)};return A(O),O.player1Passed?l==="deployment"?x():l==="action"&&S():y("player2"),{newPassInfo:O}}else if(e.type==="deploy"){const{droneToDeploy:E,targetLane:O,logContext:_}=e.payload;h({player:i.name,actionType:"DEPLOY",source:E.name,target:O,outcome:`Deployed to ${O}.`},"aiDeploymentDeploy",_);const N=Gw(E,O,i,r,s,{player1:u,player2:d});return N.success&&(p(N.newPlayerState),y("player2")),{deployedDrone:N.deployedDrone}}else if(e.type==="action"){const E=e.payload,{logContext:O}=e;switch(E.type){case"play_card":P(E.card,E.target,"player2",O);break;case"attack":m({attacker:E.attacker,target:E.target,targetType:E.targetType,lane:E.attacker.lane,attackingPlayer:"player2",aiContext:O});break;case"move":{const{drone:_,fromLane:N,toLane:j}=E;h({player:i.name,actionType:"MOVE",source:_.name,target:j,outcome:`Moved from ${N} to ${j}.`},"aiActionMove",O);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[N]=D.dronesOnBoard[N].filter(B=>B.id!==_.id);const R={..._,isExhausted:!0};D.dronesOnBoard[j].push(R);const{newState:k}=$w(D,R,N,j,h);k.dronesOnBoard=Ws(k,r,{player1:u,player2:d}),p(k),y("player2");break}default:y("player2");break}return{action:E}}return null},lM=(e,t,n,r,i,s,l,u)=>{const{cost:d,effect:h}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=d,x.hand=x.hand.filter(E=>E.instanceId!==e.instanceId),x.discardPile.push(e);const S=new Set(t.map(E=>E.id));x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(E=>!S.has(E.id));const A=t.map(E=>({...E,isExhausted:E.isExhausted||!h.properties?.includes("DO_NOT_EXHAUST")}));x.dronesOnBoard[r].push(...A),p({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(E=>E.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let P=x;return A.forEach(E=>{const{newState:O}=m(P,E,n,r,p);P=O}),P.dronesOnBoard=y(P,s,l),{newPlayerState:P,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},cM=(e,t,n,r,i,s,l,u)=>{const{cost:d,effect:h}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=d,x.hand=x.hand.filter(P=>P.instanceId!==e.instanceId),x.discardPile.push(e),x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(P=>P.id!==t.id);const S={...t,isExhausted:h.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};x.dronesOnBoard[r].push(S),p({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(x,S,n,r,p);return A.dronesOnBoard=y(A,s,l),{newPlayerState:A,shouldEndTurn:!1,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},uM=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},qw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=ki(i);(s==="damaged"||s==="critical")&&n++}return n},fM=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:d,resolveAttackCallback:h}=s,p=t?t.name||t.id:"N/A";let m="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(m=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(m=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(m=`Healed ${y.value} hull on ${p}.`),y.type==="HEAL_SHIELDS"&&(m=`Healed ${y.value} shields on ${p}.`),y.type==="READY_DRONE"&&(m=`Readied ${p}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?m=`Dealt ${y.value} damage to filtered targets in ${p}.`:m=`Dealt ${y.value} damage to ${p}.`),y.type==="MODIFY_STAT"){const A=y.mod,P=A.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${p} a ${A.value>0?"+":""}${A.value} ${A.stat} bonus${P}.`}if(y.type==="REPEATING_EFFECT"){const A=r[n],P=qw(y.condition,A);m=`Drew ${P} card(s) and gained ${P} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:p,outcome:m});let x=uM(e,n,r);const S=dM(e.effect,t,n,x,i,s,e);if(!S.needsCardSelection){const A=Yw(e,n,S.newPlayerStates);return{newPlayerStates:A.newPlayerStates,shouldEndTurn:A.shouldEndTurn,additionalEffects:S.additionalEffects||[],needsCardSelection:!1}}return{newPlayerStates:x,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],needsCardSelection:S.needsCardSelection}},Yw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},dM=(e,t,n,r,i,s,l=null)=>e.effects?hM(e,t,n,r,i,s,l):Fw(e,t,n,r,i,s,l),hM=(e,t,n,r,i,s,l=null)=>{let u=r,d=[];if(e.type==="REPEATING_EFFECT"){const h=qw(e.condition,u[n]);for(let p=0;p<h;p++)for(const m of e.effects){const y=Fw(m,t,n,u,i,s,l);u=y.newPlayerStates,y.additionalEffects&&d.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:d}},Fw=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return Mv(e,null,t,n,r);case"SEARCH_AND_DRAW":return Kw(e,null,t,n,r);case"GAIN_ENERGY":return pM(e,n,r,i);case"READY_DRONE":return mM(e,t,n,r);case"HEAL_HULL":return kv(e,null,t,n,r);case"HEAL_SHIELDS":return gM(e,t,n,r);case"DAMAGE":return Ld(e,null,t,n,r,i,s,l);case"DESTROY":return vM(e,t,n,r,s);case"MODIFY_STAT":return bM(e,t,n,r);case"MODIFY_DRONE_BASE":return xM(e,t,n,r);case"DESTROY_UPGRADE":return SM(e,t,n,r);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},pM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,d=Fa(l,u).totals,h=Math.min(d.maxEnergy,l.energy+e.value);return l.energy=h,{newPlayerStates:s,additionalEffects:[]}},mM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const d=l.dronesOnBoard[u].findIndex(h=>h.id===t.id);if(d!==-1){l.dronesOnBoard[u][d].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},gM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n];for(const u in l.dronesOnBoard){const d=l.dronesOnBoard[u].findIndex(h=>h.id===t.id);if(d!==-1){const h=l.dronesOnBoard[u][d];h.currentShields=Math.min(h.currentMaxShields||h.shields,h.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},yM=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,h=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[h].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${h} ${u}`),console.log(`[DEBUG] Drones in ${h} ${u}:`,m.map(O=>`${O.name}(${O.id}) [${O.hull}hp, ${O.speed}spd]`));const{stat:y,comparison:x,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},E=A[h].dronesOnBoard[u]||[];for(let O=E.length-1;O>=0;O--){const _=E[O];let N=!1;if(x==="GTE"&&_[y]>=S&&(N=!0),x==="LTE"&&_[y]<=S&&(N=!0),console.log(`[DEBUG] ${_.name} ${y}=${_[y]} ${x} ${S} = ${N}`),N){console.log(`[DEBUG] Applying ${e.value} damage to ${_.name}`);const j=_.currentShields||0;let D=e.value;const R=Math.min(D,j);_.currentShields=(_.currentShields||0)-R,D-=R,D>0&&(_.hull-=D),_.hull<=0&&(console.log(`[DEBUG] ${_.name} destroyed`),E.splice(O,1))}}return{newPlayerStates:A,additionalEffects:[]}}else{const u=r[t.owner],d=pa(t.id,u);if(d){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=h[t.owner].dronesOnBoard[d]||[],y=m.find(x=>x.id===t.id);if(y){let x=e.value,S=0,A=x;if(e.damageType!=="PIERCING"&&(S=Math.min(x,y.currentShields),A-=S,y.currentShields-=S),y.hull-=A,console.log(`[DEBUG] Applied ${A} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){console.log(`[DEBUG] ${y.name} destroyed`);const P=m.findIndex(E=>E.id===t.id);P>=0&&m.splice(P,1)}}return{newPlayerStates:h,additionalEffects:[]}}}return{newPlayerStates:r,additionalEffects:[]}},vM=(e,t,n,r,i)=>{const{explosionCallback:s}=i,l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},d=l[n==="player1"?"player2":"player1"];if(e.scope==="LANE"&&t.id){const h=t.id;(d.dronesOnBoard[h]||[]).forEach(m=>{s&&s(m.id);const y=Nc(d,m);d.deployedDroneCounts={...d.deployedDroneCounts||{},...y.deployedDroneCounts}}),d.dronesOnBoard[h]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const h=pa(t.id,d);if(h){const p=d.dronesOnBoard[h].find(m=>m.id===t.id);if(p){s&&s(p.id);const m=Nc(d,p);d.deployedDroneCounts={...d.deployedDroneCounts||{},...m.deployedDroneCounts},d.dronesOnBoard[h]=d.dronesOnBoard[h].filter(y=>y.id!==t.id)}}}return{newPlayerStates:l,additionalEffects:[]}},bM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&t.id.startsWith("lane")){const d=t.id;l.dronesOnBoard[d]&&l.dronesOnBoard[d].forEach(h=>{h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const d in l.dronesOnBoard){const h=l.dronesOnBoard[d].findIndex(p=>p.id===t.id);if(h!==-1){const p=l.dronesOnBoard[d][h];p.statMods||(p.statMods=[]),p.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},xM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,d=l.appliedUpgrades[u]||[],h={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(h.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...d,h]},{newPlayerStates:s,additionalEffects:[]}},SM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:d,instanceId:h}=t;if(u.appliedUpgrades[d]){const p=u.appliedUpgrades[d].filter(m=>m.instanceId!==h);p.length>0?u.appliedUpgrades[d]=p:delete u.appliedUpgrades[d]}return{newPlayerStates:s,additionalEffects:[]}},Ld=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:d}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return yM(e,n,r,i,l,u?.targeting);const h=n.owner==="player1"?i.player1:i.player2,p=pa(n.id,h);if(p&&d){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:p,damageType:e.damageType},y=Qw(m,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[]}}return{newPlayerStates:i,additionalEffects:[]}},kv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1";if(e.scope==="LANE"){const h=n.id;u[d].dronesOnBoard[h]&&u[d].dronesOnBoard[h].forEach(p=>{const m=Tn.find(y=>y.name===p.name);m&&p.hull<m.hull&&(p.hull=Math.min(m.hull,p.hull+e.value))})}else{const h=Tn.find(m=>m.name===n.name),p=pa(n.id,u[d]);if(p){const m=u[d].dronesOnBoard[p].findIndex(y=>y.id===n.id);m!==-1&&(u[d].dronesOnBoard[p][m].hull=Math.min(h.hull,u[d].dronesOnBoard[p][m].hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},Mv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1",h=u[d];let p=[...h.deck],m=[...h.hand],y=[...h.discardPile];const x=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<x;A++){if(p.length===0)if(y.length>0)p=[...y].sort(()=>.5-Math.random()),y=[];else break;p.length>0&&m.push(p.pop())}u[d]={...h,deck:p,hand:m,discardPile:y};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},AM=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),Kw=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1",h=u[d];let p=[...h.deck],m=[...h.discardPile],y,x;if(e.filter)p.length===0&&m.length>0&&(p=[...m.sort(()=>.5-Math.random())],m=[]),y=p.filter(A=>AM(A,e.filter)).slice(0,e.searchCount),x=p.filter(A=>!y.includes(A));else{const S=e.searchCount;p.length<S&&m.length>0&&(p=[...p,...m.sort(()=>.5-Math.random())],m=[]),y=p.slice(-e.searchCount).reverse(),x=p.slice(0,-e.searchCount)}if(d==="player2"){const S=CM(y,e.drawCount,u),A=y.filter(O=>!S.includes(O)),P=[...h.hand,...S];let E=[...x,...A];return e.shuffleAfter&&(E=E.sort(()=>.5-Math.random())),u[d]={...h,deck:E,hand:P,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:x,discardPile:m,filter:e.filter}}},CM=(e,t,n,r)=>e.map(s=>({card:s,score:PM(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),PM=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},Vw=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return kv(e,t,n,"player1",r);case"DAMAGE":return Ld(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},Xw=(e,t,n,r,i,s)=>{const l={name:t};switch(e.type){case"DAMAGE":return Ld(e,l,n,"player1",r,i,s);case"RECALL_DRONE":return Ww(e,t,n,r,i);case"DRAW_THEN_DISCARD":return Mv(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},Ww=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=pa(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(d=>d.id!==n.id),Object.assign(l.player1,Lw(l.player1,n)),l.player1.dronesOnBoard=Ws(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[]}},Qw=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:d,interceptor:h,attackingPlayer:p,abilityDamage:m,goAgain:y,damageType:x,lane:S}=e,A=m!==void 0,P=h||u,E=h?"drone":d,O=p,_=P.owner||(O==="player1"?"player2":"player1"),N=t[O],j=t[_];let D=null,R=null;!A&&l&&l.id&&(D=pa(l.id,N),R=Mr(l,D,N,j,n));let k=m??(R?Math.max(0,R.attack):0),B=x||(l?l.damageType:void 0);R&&R.keywords&&R.keywords.has("PIERCING")&&(B="PIERCING"),E==="section"&&!m&&l&&l.name&&Tn.find(q=>q.name===l.name)?.abilities?.forEach(q=>{q.type==="PASSIVE"&&q.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(k+=q.effect.value)});let J=0,Y=0,Z=!1,ue=0,se=0;if(E==="drone"){let V=null;for(const q in j.dronesOnBoard)if(V=j.dronesOnBoard[q].find(le=>le.id===P.id),V)break;if(V){let q=k;B!=="PIERCING"&&(J=Math.min(k,V.currentShields),q-=J),Y=Math.min(q,V.hull),Z=V.hull-Y<=0,ue=V.currentShields-J,se=Z?0:V.hull-Y}}else{const V=j.shipSections[P.name];if(V){let q=k;B!=="PIERCING"&&(J=Math.min(k,V.allocatedShields),q-=J),Y=Math.min(q,V.hull),Z=V.hull-Y<=0,ue=V.allocatedShields-J,se=Z?0:V.hull-Y}}const te=`Dealt ${J} shield and ${Y} hull damage to ${P.name}.`+(E==="drone"?Z?` ${P.name} Destroyed.`:` ${P.name} has ${ue} shields and ${se} hull left.`:""),$=D||(S?S.replace("lane","Lane "):null),ee=E==="drone"?`${P.name} (${$})`:P.name,pe=l&&l.name?`${l.name} (${$})`:"Card Effect";r&&r({player:t[O].name,actionType:"ATTACK",source:pe,target:ee,outcome:te});const he={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(E==="drone"){let V=!1;for(const q in he[_].dronesOnBoard){const le=he[_].dronesOnBoard[q].findIndex(ve=>ve.id===P.id);if(le!==-1){if(he[_].dronesOnBoard[q][le].hull-Y<=0){V=!0,i&&i(P.id);const ve=he[_].dronesOnBoard[q][le];he[_].dronesOnBoard[q]=he[_].dronesOnBoard[q].filter(z=>z.id!==P.id),Object.assign(he[_],Nc(he[_],ve))}else s&&s(P.id),he[_].dronesOnBoard[q][le].hull-=Y,he[_].dronesOnBoard[q][le].currentShields-=J;break}}if(V){const q=_==="player1"?he.player2:he.player1;he[_].dronesOnBoard=Ws(he[_],q,n)}}else{he[_].shipSections[P.name].hull-=Y,he[_].shipSections[P.name].allocatedShields-=J;const V=_==="player1"?n.player1:n.player2,q=Fa(he[_],V).totals;he[_].energy>q.maxEnergy&&(he[_].energy=q.maxEnergy)}let I=[];if(!A&&l&&l.id){let V=!1;for(const q in he[O].dronesOnBoard){const le=he[O].dronesOnBoard[q].findIndex(ve=>ve.id===l.id);if(le!==-1){he[O].dronesOnBoard[q][le].isExhausted=!0,V=!0;break}}if(V){const q=Bw(he[O],l);he[O]=q.newState,I=q.effects}}if(h){const V=O==="player1"?"player2":"player1";for(const q in he[V].dronesOnBoard){const le=he[V].dronesOnBoard[q].findIndex(ve=>ve.id===h.id);if(le!==-1){Mr(he[V].dronesOnBoard[q][le],q,he[V],he[O],n).keywords.has("DEFENDER")||(he[V].dronesOnBoard[q][le].isExhausted=!0);break}}}return{newPlayerStates:he,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:D||S,targetName:P.name,targetType:E,interceptorName:h?h.name:null,shieldDamage:J,hullDamage:Y,wasDestroyed:Z,remainingShields:ue,remainingHull:se,outcome:te,shouldEndTurn:!y},afterAttackEffects:I}},EM=(e,t)=>{const n=Fa(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},$d=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),wM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},OM=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},_M=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},TM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},DM=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(d=>d.instanceId===l.instanceId||d.name===l.name&&d.id===l.id);if(u!==-1&&s<t){const d=r.splice(u,1)[0];i.push(d),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),d=r.splice(u,1)[0];i.push(d),s++}return{...e,hand:r,discardPile:i,discardCount:s}},Zw=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const d=parseInt(u.replace("lane",""),10);Math.abs(l-d)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const d=parseInt(u.replace("lane",""),10);Math.abs(l-d)===1&&s.push({id:u,owner:"player1"})})}return s},Jw=(e,t)=>t.activeDronePool.map(n=>{const r=Tn.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),e2=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},jM=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=Oc("player1",e.drone,e.ability,i,s):t?l=Oc("player1",{id:t.sectionName},t.ability,i,s):n?u=Zw(n,i):r&&(r.type==="Upgrade"?u=Jw(r,i):r.effect.type==="MULTI_MOVE"?u=e2(n,i):u=Oc("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},NM=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),kM=(e,t,n,r)=>{const i=Nv(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},Te={initialPlayerState:qk,buildDeckFromList:Iw,getEffectiveSectionMaxShields:Dv,getShipStatus:ki,onDroneDestroyed:Nc,onDroneRecalled:Lw,checkWinCondition:wy,calculateAfterAttackStateAndEffects:Bw,applyOnMoveEffects:$w,updateAuras:Ws,getLaneOfDrone:pa,getValidTargets:Oc,calculateAllValidTargets:jM,calculateMultiSelectTargets:Zw,calculateUpgradeTargets:Jw,calculateMultiMoveTargets:e2,validateDeployment:Uw,validateShieldRemoval:zw,validateShieldAddition:jv,executeShieldReallocation:Yk,getValidShieldReallocationTargets:Fk,processShieldAllocation:Kk,processResetShieldAllocation:Vk,processEndShieldAllocation:Xk,resolveAttack:Qw,resolveAbility:Wk,resolveShipAbility:Qk,executeDeployment:Gw,resolveCardPlay:fM,finishCardPlay:Yw,resolveMultiMove:lM,resolveSingleMove:cM,checkGameStateForWinner:Zk,calculatePotentialInterceptors:Jk,calculateAiInterception:tM,calculateTurnTransition:Nv,calculatePassTransition:nM,readyDronesAndRestoreShields:Hw,calculateNewRoundPlayerState:Oy,drawToHandLimit:_y,drawPlayerCards:EM,determineFirstPlayer:$d,enforceHandLimit:wM,checkHandLimitCompliance:OM,checkHandLimitViolations:_M,enforceHandLimits:TM,processDiscardPhase:DM,processTurnTransition:rM,processPhaseChange:aM,processRoundStart:iM,createExplosionEffect:NM,createTurnEndEffects:kM,resolveUnifiedDamageEffect:Ld,resolveUnifiedHealEffect:kv,resolveUnifiedDrawEffect:Mv,resolveSearchAndDrawEffect:Kw,resolveDroneAbilityEffect:Vw,resolveShipAbilityEffect:Xw,resolveShipRecallEffect:Ww,executeAiDeployment:eM,executeAiTurn:oM,executeAiAction:sM},dc=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:Te,startingDecklist:Ns},Symbol.toStringTag,{value:"Module"})),MM="modulepreload",RM=function(e){return"/"+e},fA={},ca=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=d(n.map(h=>{if(h=RM(h),h in fA)return;fA[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":MM,p||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((x,S)=>{y.addEventListener("load",x),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class IM{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log(" GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(` Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(` Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const LM=new IM;class Pn{static instance=null;static getInstance(t){return Pn.instance||(Pn.instance=new Pn(t)),Pn.instance}static reset(){Pn.instance&&Pn.instance.stateSubscriptionCleanup&&Pn.instance.stateSubscriptionCleanup(),Pn.instance=null,console.log(" GameDataService singleton reset")}constructor(t){if(Pn.instance)return console.warn(" GameDataService already exists. Use getInstance() instead of new GameDataService()"),Pn.instance;this.gameStateManager=t,this.cache=LM,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log(" GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),d=s[l],h=s[u],p=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,d),S=Mr(t,n,m?d:h,m?h:d,p);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Fa(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(h=>({...h,effectiveStats:this.getEffectiveStats(h,t),isPlayer:!0})),d=(l.dronesOnBoard[t]||[]).map(h=>({...h,effectiveStats:this.getEffectiveStats(h,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:d,hasGuardian:this.hasGuardianInLane(t,d)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const $M=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"}));class BM{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){if(this.isInitialized){console.log(" AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=Pn.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,console.log(" AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log(" AIPhaseProcessor connected to ActionProcessor for execution"),s&&console.log(" AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const d=this.dronePool?.find(h=>h.name===u);return d||console.warn(` AI personality references unknown drone: ${u}`),d}).filter(u=>u),console.log(` Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const l=r.map(u=>u.name).join(", ");console.log(` Mapped drones: ${l}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(` Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error(" Not enough drones available for AI selection:",r.length),n&&n.dronePool){const l=n.dronePool.filter(u=>!this.dronePool?.find(d=>d.name===u));l.length>0&&console.error(` Missing drones from collection: ${l.join(", ")}`),console.error(` Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(` Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),s=i.map(l=>l.name).join(", ");return console.log(` AI selected drones: ${s}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(d=>n.preferredDrones.includes(d.name)),u=Math.min(3,l.length);r=l.slice(0,u),console.log(` AI selected ${r.length} preferred drones:`,r.map(d=>d.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((d,h)=>{const p=(d.energyCost||1)+(d.health||0)+(d.attack||0);return(h.energyCost||1)+(h.health||0)+(h.attack||0)-p});const l=r?.aggression||.5,u=r?.economy||.5;for(let d=0;d<n&&s.length>0;d++){let h=0;if(l>.7)h=s.findIndex(p=>(p.attack||0)>2),h===-1&&(h=0);else if(u>.7)h=s.findIndex(p=>(p.energyCost||1)<=2),h===-1&&(h=0);else{const p=Math.min(3,s.length);h=Math.floor(Math.random()*p)}i.push(s.splice(h,1)[0])}return console.log(` AI balanced selection (${n}):`,i.map(d=>d.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(` Using ${n.name} personality decklist`);const{gameEngine:i}=await ca(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>dc);return{gameEngine:s}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log(" Using standard deck as fallback");const{gameEngine:i,startingDecklist:s}=await ca(async()=>{const{gameEngine:l,startingDecklist:u}=await Promise.resolve().then(()=>dc);return{gameEngine:l,startingDecklist:u}},void 0);r=i.buildDeckFromList(s)}return console.log(` AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(` AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return console.log(` AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return console.log(" AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return console.log(" AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return console.log(" AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(console.log(" AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await ca(async()=>{const{aiBrain:s}=await import("./aiLogic-CJsE_NEr.js");return{aiBrain:s}},[]),{gameEngine:r}=await ca(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>dc);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log(" AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(console.log(" AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await ca(async()=>{const{aiBrain:s}=await import("./aiLogic-CJsE_NEr.js");return{aiBrain:s}},[]),{gameEngine:r}=await ca(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>dc);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log(" AIPhaseProcessor executing action decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(console.log(" AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await ca(async()=>{const{gameEngine:p}=await Promise.resolve().then(()=>dc);return{gameEngine:p}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return console.log(" AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},d=[];if(u.hand.length>l){const p=u.hand.length-l;d=u.hand.slice(0,p),u={...u,hand:u.hand.slice(p),discardPile:[...u.discardPile,...d]},console.log(` AI discarding ${p} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const h=u.hand.length-(r.hand.length-d.length);return h>0&&console.log(` AI drew ${h} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:d,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(console.log(" AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return console.log(" AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];return u=[...n.hand].sort((h,p)=>p.cost-h.cost).slice(0,l),console.log(` AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(console.log(" AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return console.log(" AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let d=[];const h=[];return Object.entries(n.dronesOnBoard||{}).forEach(([p,m])=>{m.forEach(y=>{h.push({...y,lane:p})})}),h.sort((p,m)=>{const y=this.gameDataService.getEffectiveStats(p,p.lane),x=this.gameDataService.getEffectiveStats(m,m.lane);return y.power-x.power}),d=h.slice(0,u),console.log(` AI removing ${d.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:d,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log(" AI has already passed"),!0):!1}async executePass(t){return console.log(` AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(console.log(` AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn(t)},1500)))}async executeTurn(t){if(this.isProcessing){console.log(" AIPhaseProcessor: Already processing a turn, skipping");return}this.isProcessing=!0;try{console.log(` AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let n;if(t.turnPhase==="deployment")n=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")n=await this.executeActionTurn(t);else{console.warn(` AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}const r=this.gameStateManager.getState();r.passInfo&&r.passInfo.player1Passed&&!r.passInfo.player2Passed&&r.currentPlayer==="player2"&&(console.log(" AIPhaseProcessor: Human has passed - AI continues taking turns"),setTimeout(()=>{this.checkForAITurn(r)},100))}catch(n){console.error(" AIPhaseProcessor: Error executing turn:",n)}finally{this.isProcessing=!1}}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,version:"1.2.0"}}}const jr=new BM;class Ra{static instance=null;static getInstance(t){return Ra.instance||(Ra.instance=new Ra(t)),Ra.instance}static reset(){Ra.instance=null,console.log(" ActionProcessor singleton reset")}constructor(t){if(Ra.instance)return console.warn(" ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),Ra.instance;this.gameStateManager=t,this.gameDataService=Pn.getInstance(t),this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},console.log(" ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const d=`${u}Passed`;if(s.passInfo[d])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return console.log(" Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return console.log(" Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return console.log(" Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);!i&&this.p2pManager&&this.p2pManager.isConnected&&this.gameStateManager.get("gameMode")!=="local"&&(console.log("[P2P ACTION] Sending action to peer:",{type:n,payload:r}),this.p2pManager.sendData({type:"ACTION",action:{type:n,payload:r},timestamp:Date.now()})),this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"aiTurn":return await this.processAiTurn(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeFirstPlayer":return await this.acknowledgeFirstPlayer(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections},s=h=>{this.gameStateManager.addLogEntry(h,"resolveAttack",n.attackingPlayer==="player2"?n.aiContext:null)},l=()=>{},u=()=>{},d=Te.resolveAttack(n,{player1:r.player1,player2:r.player2},i,s,l,u);return this.gameStateManager.setPlayerStates(d.newPlayerStates.player1,d.newPlayerStates.player2),d.attackResult&&d.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),d}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let d=null,h=null;if(Object.values(l).forEach(S=>{Object.values(S.dronesOnBoard).forEach(A=>{A.forEach(P=>{P.id===n&&(d=P),P.id===i&&(h=P)})})}),!d||!d.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const p=d.abilities[r],m=S=>{this.gameStateManager.addLogEntry(S,"resolveAbility")},y=async S=>await this.processAttack({attackDetails:S}),x=Te.resolveAbility(p,d,h,l,u,m,y);if(this.gameStateManager.setPlayerStates(x.newPlayerStates.player1,x.newPlayerStates.player2),x.shouldEndTurn){const S=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:S.currentPlayer==="player1"?"player2":"player1"})}return x}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,l=this.gameStateManager.getState(),u=l[i],h=l[i==="player1"?"player2":"player1"],p={player1:l.placedSections,player2:l.opponentPlacedSections},m=x=>{this.gameStateManager.addLogEntry(x)},y=Te.executeDeployment(n,r,s||l.turn,u,h,p,m);return y.success&&(i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState),await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})),y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections},d={logCallback:p=>this.gameStateManager.addLogEntry(p),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async p=>await this.processAttack(p)},h=Te.resolveCardPlay(n,r,i,l,u,d);if(this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const p=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:p.currentPlayer==="player1"?"player2":"player1"})}return h}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},d={player1:l.placedSections,player2:l.opponentPlacedSections},h={logCallback:m=>this.gameStateManager.addLogEntry(m),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async m=>await this.processAttack(m)},p=Te.resolveShipAbility(n,r,i,u,d,h);if(this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p.shouldEndTurn){const m=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:m.currentPlayer==="player1"?"player2":"player1"})}return p}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=Te.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let d=r;u.passInfo&&u.passInfo[`${r}Passed`]?(d=u.currentPlayer,console.log(`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${d}`)):console.log(`[TURN TRANSITION DEBUG] Setting new player: ${d}`),this.gameStateManager.setCurrentPlayer(d)}const l=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return console.log(`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(n==="allocateShields"){const u=this.gameStateManager.getLocalPlayerId(),d=i[u],p=this.gameDataService.getEffectiveShipStats(d,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=p,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${p}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1}),console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase}  ${n}`);const l=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:l.turnPhase,placedSections:l.placedSections,opponentPlacedSections:l.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||Te.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),d=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),h=Te.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),p=Te.calculateNewRoundPlayerState(s.player2,n,d,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(h,p),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:h,player2:p}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const d=u.shipSections[r];if(!d||d.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const h={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},p={...u,shipSections:h};return this.gameStateManager.updatePlayerState(s,p),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:p}}else if(n==="add"){const d=s==="player1"?l.placedSections:l.opponentPlacedSections,h=Te.getEffectiveSectionMaxShields(r,u,d),p=u.shipSections[r];if(!p||p.allocatedShields>=h)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:m};return this.gameStateManager.updatePlayerState(s,y),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const d={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,d),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:d}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return await this.processAttack({attackDetails:{attackerId:s.attacker.id,targetId:s.target.id,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":const l=this.gameStateManager.getState(),u={name:"AI Move",cost:0,effect:{type:"MOVE",properties:[]}},d=Te.resolveSingleMove(u,s.drone,s.fromLane,s.toLane,l.player2,l.player1,{player1:l.placedSections,player2:l.opponentPlacedSections},{logCallback:()=>{},applyOnMoveEffectsCallback:Te.applyOnMoveEffects,updateAurasCallback:Te.updateAuras});return this.gameStateManager.updatePlayerState("player2",d.newPlayerState),d;case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiTurn(t){const{turnPhase:n,playerId:r}=t;console.log(`[AI TURN DEBUG] Starting AI turn for ${r} in phase: ${n}`);const i=this.gameStateManager.getState(),s=i.passInfo;if(console.log("[AI TURN DEBUG] Current state:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn,passInfo:s}),s[r+"Passed"])return console.log("[AI TURN DEBUG] AI already passed, returning"),{success:!0,action:"already_passed"};let l;console.log(`[AI TURN DEBUG] Delegating to AIPhaseProcessor for phase: ${n}`),n==="deployment"?l=await jr.handleDeploymentTurn(i):n==="action"?l=await jr.handleActionTurn(i):(l={type:"pass"},console.log(`[AI TURN DEBUG] AI passing due to unknown phase: ${n}`)),console.log("[AI TURN DEBUG] AI decision from AIPhaseProcessor:",l),console.log("[AI TURN DEBUG] Processing AI decision:",l.type);const u=await this.processAiDecision(l,r);return console.log("[AI TURN DEBUG] AI decision result:",u),u}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",s),s.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attackerId:l.attacker.id,targetId:l.target.id,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove(l,n);break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u.shouldEndTurn!==!1&&await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const d=this.gameStateManager.getState(),h=!d.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",d.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:d.passInfo.firstPasser||(h?n:null)});const p=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",p),p.player1Passed&&p.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),d.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):d.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}async processMove(t,n){const r=this.gameStateManager.getState(),i={name:"AI Move",cost:0,effect:{type:"MOVE",properties:[]}},s=r[n],l=r[n==="player1"?"player2":"player1"],u=Te.resolveSingleMove(i,t.drone,t.fromLane,t.toLane,s,l,{player1:r.placedSections,player2:r.opponentPlacedSections},{logCallback:()=>{},applyOnMoveEffectsCallback:Te.applyOnMoveEffects,updateAurasCallback:Te.updateAuras});return this.gameStateManager.updatePlayerState(n,u.newPlayerState),u}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=`${l}Passed`,d=`${n}Passed`,h=!s[u],p={...s,[d]:!0,firstPasser:s.firstPasser||(h?n:null)};if(console.log("[PLAYER PASS DEBUG] Updating pass info:",p),this.gameStateManager.setPassInfo(p,"ActionProcessor"),p.player1Passed&&p.player2Passed)console.log("[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let y=null;n==="player1"&&!p.player2Passed?y="player2":n==="player2"&&!p.player1Passed&&(y="player1"),y&&(console.log(`[PLAYER PASS DEBUG] Switching turn to ${y} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:y},"TURN_SWITCH","playerPass"))}return this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("playerPass",{playerId:n,playerName:r,turnPhase:i,passInfo:p}),{success:!0,newPassInfo:p}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error(" CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error(" CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("aiShipPlacement",{placement:n,aiPersonality:r}),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r}=t,i=this.gameStateManager.getState();if(console.log(`[OPTIONAL DISCARD DEBUG] Processing optional discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const s=i[n];if(!s)throw new Error(`Player ${n} not found`);const l=s.hand.filter(d=>!r.some(h=>d.instanceId===h.instanceId)),u=[...s.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:l,discardPile:u}),console.log(`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){console.log(" ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await ca(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-C-yFl_SP.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),console.log(` First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeFirstPlayer(t){return console.log(` ActionProcessor: Processing first player acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"determineFirstPlayer",actionData:{acknowledged:!0}})}async acknowledgeDeploymentComplete(t){return console.log(` ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),console.log(` Cleared commitments for phase: ${t}`)):(n.commitments={},console.log(" Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;console.log(` ActionProcessor: Processing ${r} commitment for ${n}`);const s=this.gameStateManager.getState();s.commitments[r]||(s.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),s.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:s.commitments},"COMMITMENT_UPDATE");const l=s.commitments[r].player1.completed&&s.commitments[r].player2.completed;return console.log(` ${n} ${r} committed, both complete: ${l}`),n==="player1"&&s.gameMode==="local"&&(console.log(" Single-player mode: Auto-completing AI commitment"),jr&&setTimeout(async()=>{try{await this.handleAICommitment(r,s)}catch(u){console.error("AI commitment error:",u)}},100)),{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:l}}}async handleAICommitment(t,n){try{console.log(` Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await jr.processDroneSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"droneSelection",actionData:{drones:r}}});break;case"deckSelection":r=await jr.processDeckSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deckSelection",actionData:{deck:r}}});break;case"placement":r=await jr.processPlacement(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"placement",actionData:{placedSections:r}}});break;case"mandatoryDiscard":r=await jr.executeMandatoryDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"optionalDiscard":r=await jr.executeOptionalDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"allocateShields":await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"allocateShields",actionData:{shieldAllocation:[]}}});break;case"mandatoryDroneRemoval":r=await jr.executeMandatoryDroneRemovalTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}}});break;case"determineFirstPlayer":await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}});break;case"deploymentComplete":console.log(" AI will acknowledge deployment complete after 3 second delay (for testing)"),setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}}),console.log(" AI acknowledged deployment complete")},3e3);break;default:console.warn(` No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(` No commitments found for phase: ${t}`),{};console.log(` ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),console.log(" Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,discard:[]}),console.log(" Applied deck selections to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),console.log(" Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":console.log(" First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":console.log(" Discard commitments (handled via card actions)");break;case"allocateShields":console.log(" Shield allocation (handled separately)");break;default:console.warn(` No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return console.log(" ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r}=t;return console.log(" ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),{success:!0,message:"Energy reset completed",player1:n,player2:r}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}const t2=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(` Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(` Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},UM=(e,t=3)=>{if(!e||e.length===0)return console.warn(" No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(` Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(` Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class zM{constructor(){console.log(" GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.state={appState:"menu",isHost:!1,isGuest:!1,isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=Ra.getInstance(this),this.gameFlowManager=null,this.p2pIntegrationSetup=!1,console.log(" GAMESTATE INITIALIZATION: GameStateManager created"),console.log(" App State:",this.state.appState),console.log(" Game Active:",this.state.gameActive),console.log(" GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost);break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),d=l.some(A=>A.includes("App.jsx")),h=l.some(A=>A.includes("ActionProcessor")),p=l.some(A=>A.includes("PhaseManager")),m=h||p;d&&!m&&(console.error(" ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error(" App.jsx should only call ActionProcessor or PhaseManager methods"),console.error(" Stack trace:",s));const y=Object.keys(t),x=`${u.primaryCaller} in ${u.primaryFile}`;console.log(` GAMESTATE CHANGE [${n}] from ${x}:`,{changedKeys:y,allUpdates:t,architectureViolation:d&&!m});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,x,n),y.forEach(A=>{if(!["player1","player2"].includes(A)){const P=i[A],E=t[A];JSON.stringify(P)!==JSON.stringify(E)&&console.log(` STATE CHANGE: ${A}`,{before:P,after:E,caller:x,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(m=>m in t),d=i&&i.includes("GameFlowManager"),h=r==="phaseTransition"||t.turnPhase&&d;u&&!(h&&d)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:d,isPhaseTransition:h,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(d=>{i.has(d.id)&&console.error(`Duplicate drone ID detected: ${d.id} in player${l+1}`),i.add(d.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","roundEnd"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(console.log(" Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){console.log(" Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],d=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],h=Object.keys(t).filter(E=>u.includes(E)),p=Object.keys(t).filter(E=>d.includes(E)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const y=h.every(E=>["player1","player2"].includes(E)),x=h.every(E=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(E));if(m&&(y||x))return;const S=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),P=h.length===1&&h[0]==="passInfo";if(!(S&&A&&P)){if(h.length>0&&!r){const E=i?.split(`
`)||[],O=E.find(_=>_.includes(".jsx")&&!_.includes("GameStateManager"))||E[2]||"Unknown";console.warn(" ActionProcessor bypass detected: Critical game state updated directly",{updates:h,turnPhase:n.turnPhase,caller:O.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug(" ActionProcessor bypass debug info:",{stackTrace:E.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}p.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];console.log(` PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(h=>{const p=l?l[h]:void 0,m=u?u[h]:void 0;if(JSON.stringify(p)!==JSON.stringify(m))if(h==="energy"||h==="deploymentBudget"||h==="initialDeploymentBudget")console.log(`   ${h}: ${p}  ${m}`),(m==null||isNaN(m))&&console.error(`   WARNING: ${h} became ${m}!`);else if(h==="activeDronePool"){const y=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";let S,A;if(Array.isArray(p))try{S=p.map(P=>P?.name||"UNNAMED").join(",")}catch(P){S=`ERROR_MAPPING_OLD: ${P.message}`}else S="undefined";if(Array.isArray(m))try{A=m.map(P=>P?.name||"UNNAMED").join(",")}catch(P){A=`ERROR_MAPPING_NEW: ${P.message}`}else A="undefined";if(console.log(`   ${h}: [${y} drones]  [${x} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(console.log("     Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("     First drone object:",m[0])),y!==x||S!==A){const P=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`     Update source:
${P}`)}}else if(h==="hand"||h==="deck"){const y=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";console.log(`   ${h}: [${y} cards]  [${x} cards]`)}else if(h==="dronesOnBoard"){const y=p?`L1:${p.lane1?.length||0} L2:${p.lane2?.length||0} L3:${p.lane3?.length||0}`:"undefined",x=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`   ${h}: ${y}  ${x}`)}else console.log(`   ${h}:`,{before:p,after:m})}),console.log(` Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],d=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],h=l.functions.filter(m=>u.some(y=>m.toLowerCase().includes(y.toLowerCase()))),p=l.functions.filter(m=>d.some(y=>m.toLowerCase().includes(y.toLowerCase())));h.length>0&&p.length===0&&(console.warn(" Inappropriate function updating game state:",{inappropriateFunctions:h,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI  ActionProcessor  gameLogic.js  GameStateManager"}),console.debug(" Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:h,appropriateFound:p,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const d of r){const h=u[d];if(!h)continue;const p=Array.isArray(h)?h:[h];let m=!1;for(const y of p)(y==="GameFlowManager"&&i||y==="SequentialPhaseManager"&&s||y==="ActionProcessor"&&l)&&(m=!0);if(!m){const y=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(` OWNERSHIP VIOLATION: ${y} cannot update '${d}'`,{updateKey:d,currentManager:y,allowedOwners:p,updates:r,recommendation:`Only ${p.join(" or ")} should update '${d}'`})}}}reset(){const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:Te.initialPlayerState("Player 1",Ns),player2:Te.initialPlayerState("Player 2",Ns),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET")}startGame(t="local",n={},r={}){console.log(" GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...Te.initialPlayerState(n.name||"Player 1",n.decklist||Ns),...n},player2:{...Te.initialPlayerState(r.name||"Player 2",r.decklist||Ns),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{}},s=t2(Tn);i.droneSelectionPool=s.droneSelectionPool,i.droneSelectionTrio=s.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log(" Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log(" Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log(" GAME START: Game session initialized successfully")}endGame(){console.log(" GAME END: Ending current game session"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),console.log(" GAME END: Returned to menu state")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t,isHost:n&&t!=="local",isGuest:!n&&t!=="local"},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log(" [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Fe=new zM;class GM{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return HM(t).buffer}}function HM(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function n2(e){return new qM(e).unpack()}function r2(e){const t=new YM,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class qM{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class YM{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,d=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(d)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new GM,this._textEncoder=new TextEncoder}}let a2=!0,i2=!0;function Cc(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function Io(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const d=h=>{const p=n(h);p&&(u.handleEvent?u.handleEvent(p):u(p))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,d),i.apply(this,[l,d])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const d=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,d])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function FM(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(a2=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function KM(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(i2=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function o2(){if(typeof window=="object"){if(a2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Rv(e,t){i2&&console.warn(e+" is deprecated, please use "+t+" instead.")}function VM(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Cc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Cc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Cc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Cc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function dA(e){return Object.prototype.toString.call(e)==="[object Object]"}function s2(e){return dA(e)?Object.keys(e).reduce(function(t,n){const r=dA(e[n]),i=r?s2(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function Ty(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Ty(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Ty(e,e.get(i),n)})}))}function hA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&Ty(e,u,i)})}),i}const pA=o2;function l2(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const d={};return Object.keys(u).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const p=typeof u[h]=="object"?u[h]:{ideal:u[h]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const m=function(y,x){return y?y+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(p.ideal!==void 0){d.optional=d.optional||[];let y={};typeof p.ideal=="number"?(y[m("min",h)]=p.ideal,d.optional.push(y),y={},y[m("max",h)]=p.ideal,d.optional.push(y)):(y[m("",h)]=p.ideal,d.optional.push(y))}p.exact!==void 0&&typeof p.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[m("",h)]=p.exact):["min","max"].forEach(y=>{p[y]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[m(y,h)]=p[y])})}),u.advanced&&(d.optional=(d.optional||[]).concat(u.advanced)),d},i=function(u,d){if(t.version>=61)return d(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const h=function(p,m,y){m in p&&!(y in p)&&(p[y]=p[m],delete p[m])};u=JSON.parse(JSON.stringify(u)),h(u.audio,"autoGainControl","googAutoGainControl"),h(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let h=u.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const p=t.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete u.video.facingMode;let m;if(h.exact==="environment"||h.ideal==="environment"?m=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let x=y.find(S=>m.some(A=>S.label.toLowerCase().includes(A)));return!x&&y.length&&m.includes("back")&&(x=y[y.length-1]),x&&(u.video.deviceId=h.exact?{exact:x.deviceId}:{ideal:x.deviceId}),u.video=r(u.video),pA("chrome: "+JSON.stringify(u)),d(u)})}u.video=r(u.video)}return pA("chrome: "+JSON.stringify(u)),d(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,d,h){i(u,p=>{n.webkitGetUserMedia(p,d,m=>{h&&h(s(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return i(d,h=>u(h).then(p=>{if(h.audio&&!p.getAudioTracks().length||h.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(s(p))))}}}function c2(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function u2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Io(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function f2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,d){let h=i.apply(this,arguments);return h||(h=t(this,u),this._senders.push(h)),h};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const d=this._senders.indexOf(u);d!==-1&&this._senders.splice(d,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(d=>d.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function d2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>hA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Io(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>hA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function h2(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(d)===-1&&this._shimmedLocalStreams[u.id].push(d):this._shimmedLocalStreams[u.id]=[u,d],d};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(h=>{if(this.getSenders().find(m=>m.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(h=>u.indexOf(h)===-1);this._shimmedLocalStreams[l.id]=[l].concat(d)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const d=this._shimmedLocalStreams[u].indexOf(l);d!==-1&&this._shimmedLocalStreams[u].splice(d,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function p2(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return h2(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=n.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(m=>{if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const m=new e.MediaStream(p.getTracks());this._streams[p.id]=m,this._reverseStreams[m.id]=p,p=m}r.apply(this,[p])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(A=>A===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([p]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===p)};function s(h,p){let m=p.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const x=h._reverseStreams[y],S=h._streams[x.id];m=m.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:p.type,sdp:m})}function l(h,p){let m=p.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const x=h._reverseStreams[y],S=h._streams[x.id];m=m.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:p.type,sdp:m})}["createOffer","createAnswer"].forEach(function(h){const p=e.RTCPeerConnection.prototype[h],m={[h](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[S=>{const A=s(this,S);y[0].apply(null,[A])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):p.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[h]=m[h]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const h=d.get.apply(this);return h.type===""?h:s(this,h)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(A=>p.track===A)&&(y=this._streams[x])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Dy(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function m2(e,t){Io(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const mA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:m2,shimAddTrackRemoveTrack:p2,shimAddTrackRemoveTrackWithNative:h2,shimGetSendersWithDtmf:f2,shimGetUserMedia:l2,shimMediaStream:c2,shimOnTrack:u2,shimPeerConnection:Dy,shimSenderReceiverGetStats:d2},Symbol.toStringTag,{value:"Module"}));function g2(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){Rv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,d){u in l&&!(d in l)&&(l[d]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function XM(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function y2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function jy(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(d=>{if(t.version<53&&!l)try{d.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;d.forEach((p,m)=>{d.set(m,Object.assign({},p,{type:n[p.type]||p.type}))})}return d}).then(l,u)}}function v2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function b2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Io(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function x2(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Rv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function S2(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function A2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function C2(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function P2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function E2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const gA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:A2,shimCreateAnswer:E2,shimCreateOffer:P2,shimGetDisplayMedia:XM,shimGetParameters:C2,shimGetUserMedia:g2,shimOnTrack:y2,shimPeerConnection:jy,shimRTCDataChannel:S2,shimReceiverGetStats:b2,shimRemoveStream:x2,shimSenderGetStats:v2},Symbol.toStringTag,{value:"Module"}));function w2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function O2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function _2(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(h,p){const m=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[m]);return p?(y.then(h,p),Promise.resolve()):y},t.createAnswer=function(h,p){const m=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[m]);return p?(y.then(h,p),Promise.resolve()):y};let u=function(d,h,p){const m=i.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m};t.setLocalDescription=u,u=function(d,h,p){const m=s.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m},t.setRemoteDescription=u,u=function(d,h,p){const m=l.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m},t.addIceCandidate=u}function T2(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(D2(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function D2(e){return e&&e.video!==void 0?Object.assign({},e,{video:s2(e.video)}):e}function j2(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(Rv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function N2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function k2(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function M2(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const yA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:M2,shimCallbacksAPI:_2,shimConstraints:D2,shimCreateOfferLegacy:k2,shimGetUserMedia:T2,shimLocalStreamsAPI:w2,shimRTCIceServerUrls:j2,shimRemoteStreamsAPI:O2,shimTrackEventTransceiver:N2},Symbol.toStringTag,{value:"Module"}));var Gm={exports:{}},vA;function WM(){return vA||(vA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const d=s[u],h=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(h){const p=t.parseRtpMap(h),m=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(p.parameters=m.length?t.parseFmtp(m[0]):{},p.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),r.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(p.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(d=>{u.rtcpFeedback.find(p=>p.type===d.type&&p.parameter===d.parameter)||u.rtcpFeedback.push(d)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),d=u.length>0&&u[0].ssrc;let h;const p=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));p.length>0&&p[0].length>1&&p[0][0]===d&&(h=p[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let x={ssrc:d,codecPayloadType:parseInt(y.parameters.apt,10)};d&&h&&(x.rtx={ssrc:h}),r.push(x),s&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:d,mechanism:l?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&d&&r.push({ssrc:d});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(y=>{y.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const d=u[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(Gm)),Gm.exports}var R2=WM();const Rs=Xr(R2),QM=Tw({__proto__:null,default:Rs},[R2]);function Gf(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=Rs.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Io(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ny(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Io(e,"icecandidate",t=>{if(t.candidate){const n=Rs.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Hf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const d=Rs.splitSections(u.sdp);return d.shift(),d.some(h=>{const p=Rs.parseMLine(h);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},r=function(u){const d=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const h=parseInt(d[1],10);return h!==h?-1:h},i=function(u){let d=65536;return t.browser==="firefox"&&(t.version<57?u===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},s=function(u,d){let h=65536;t.browser==="firefox"&&t.version===57&&(h=65535);const p=Rs.matchPrefix(u.sdp,"a=max-message-size:");return p.length>0?h=parseInt(p[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(h=2147483637),h},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=r(arguments[0]),h=i(d),p=s(arguments[0],d);let m;h===0&&p===0?m=Number.POSITIVE_INFINITY:h===0||p===0?m=Math.max(h,p):m=Math.min(h,p);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return m}}),this._sctp=y}return l.apply(this,arguments)}}function qf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],d=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&d>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Io(e,"datachannel",r=>(t(r.channel,r.target),r))}function ky(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function My(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Yf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ff(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const ZM=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:My,shimAddIceCandidateNullOrEmpty:Yf,shimConnectionState:ky,shimMaxMessageSize:Hf,shimParameterlessSetLocalDescription:Ff,shimRTCIceCandidate:Gf,shimRTCIceCandidateRelayProtocol:Ny,shimSendThrowTypeError:qf},Symbol.toStringTag,{value:"Module"}));function JM({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=o2,r=VM(e),i={browserDetails:r,commonShim:ZM,extractVersion:Cc,disableLog:FM,disableWarnings:KM,sdp:QM};switch(r.browser){case"chrome":if(!mA||!Dy||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=mA,Yf(e,r),Ff(e),l2(e,r),c2(e),Dy(e,r),u2(e),p2(e,r),f2(e),d2(e),m2(e,r),Gf(e),Ny(e),ky(e),Hf(e,r),qf(e),My(e,r);break;case"firefox":if(!gA||!jy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=gA,Yf(e,r),Ff(e),g2(e,r),jy(e,r),y2(e),x2(e),v2(e),b2(e),S2(e),A2(e),C2(e),P2(e),E2(e),Gf(e),ky(e),Hf(e,r),qf(e);break;case"safari":if(!yA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=yA,Yf(e,r),Ff(e),j2(e),k2(e),_2(e),w2(e),O2(e),N2(e),T2(e),M2(e),Gf(e),Ny(e),Hf(e,r),qf(e),My(e,r);break;default:n("Unsupported browser!");break}return i}const bA=JM({window:typeof window>"u"?void 0:window});function Lo(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class I2{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),d=t.slice(l,u),h={__peerData:this._dataCount,n:s,data:d,total:i};n.push(h),l=u,s++}return this._dataCount++,n}}}function eR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const Hm=bA.default||bA,hc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Hm.browserDetails.browser}getVersion(){return Hm.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Hm.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},tR=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),L2=()=>Math.random().toString(36).slice(2),xA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class nR extends I2{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=xA,this.browser=hc.getBrowser(),this.browserVersion=hc.getVersion(),this.pack=r2,this.unpack=n2,this.supports=(function(){const n={browser:hc.isBrowserSupported(),webRTC:hc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(xA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!hc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=tR,this.randomToken=L2}}const Fn=new nR,rR="PeerJS: ";class aR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[rR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ee=new aR,Iv={},iR=Object.prototype.hasOwnProperty,Ln="~";function kc(){}Object.create&&(kc.prototype=Object.create(null),new kc().__proto__||(Ln=!1));function oR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function $2(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new oR(n,r||e,i),l=Ln?Ln+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function Kf(e,t){--e._eventsCount===0?e._events=new kc:delete e._events[t]}function Dn(){this._events=new kc,this._eventsCount=0}Dn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)iR.call(n,r)&&t.push(Ln?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Dn.prototype.listeners=function(t){var n=Ln?Ln+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};Dn.prototype.listenerCount=function(t){var n=Ln?Ln+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Dn.prototype.emit=function(t,n,r,i,s,l){var u=Ln?Ln+t:t;if(!this._events[u])return!1;var d=this._events[u],h=arguments.length,p,m;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,r),!0;case 4:return d.fn.call(d.context,n,r,i),!0;case 5:return d.fn.call(d.context,n,r,i,s),!0;case 6:return d.fn.call(d.context,n,r,i,s,l),!0}for(m=1,p=new Array(h-1);m<h;m++)p[m-1]=arguments[m];d.fn.apply(d.context,p)}else{var y=d.length,x;for(m=0;m<y;m++)switch(d[m].once&&this.removeListener(t,d[m].fn,void 0,!0),h){case 1:d[m].fn.call(d[m].context);break;case 2:d[m].fn.call(d[m].context,n);break;case 3:d[m].fn.call(d[m].context,n,r);break;case 4:d[m].fn.call(d[m].context,n,r,i);break;default:if(!p)for(x=1,p=new Array(h-1);x<h;x++)p[x-1]=arguments[x];d[m].fn.apply(d[m].context,p)}}return!0};Dn.prototype.on=function(t,n,r){return $2(this,t,n,r,!1)};Dn.prototype.once=function(t,n,r){return $2(this,t,n,r,!0)};Dn.prototype.removeListener=function(t,n,r,i){var s=Ln?Ln+t:t;if(!this._events[s])return this;if(!n)return Kf(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Kf(this,s);else{for(var u=0,d=[],h=l.length;u<h;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&d.push(l[u]);d.length?this._events[s]=d.length===1?d[0]:d:Kf(this,s)}return this};Dn.prototype.removeAllListeners=function(t){var n;return t?(n=Ln?Ln+t:t,this._events[n]&&Kf(this,n)):(this._events=new kc,this._eventsCount=0),this};Dn.prototype.off=Dn.prototype.removeListener;Dn.prototype.addListener=Dn.prototype.on;Dn.prefixed=Ln;Dn.EventEmitter=Dn;Iv=Dn;var $o={};Lo($o,"ConnectionType",()=>ji);Lo($o,"PeerErrorType",()=>Lt);Lo($o,"BaseConnectionErrorType",()=>Ry);Lo($o,"DataConnectionErrorType",()=>Lv);Lo($o,"SerializationType",()=>Bd);Lo($o,"SocketEventType",()=>Di);Lo($o,"ServerMessageType",()=>wn);var ji=(function(e){return e.Data="data",e.Media="media",e})({}),Lt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Ry=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Lv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Bd=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Di=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),wn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const B2="1.5.5";class sR extends Iv.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+B2),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Ee.log("Server message received:",s)}catch{Ee.log("Invalid server message",i.data);return}this.emit(Di.Message,s)},this._socket.onclose=i=>{this._disconnected||(Ee.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Di.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ee.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ee.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:wn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Di.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class U2{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===ji.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Ee.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Ee.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Ee.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:wn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Ee.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Ry.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Ee.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Ry.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Ee.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Ee.log("Listening for data channel"),t.ondatachannel=l=>{Ee.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},Ee.log("Listening for remote stream"),t.ontrack=l=>{Ee.log("Received remote stream");const u=l.streams[0],d=s.getConnection(n,r);if(d.type===ji.Media){const h=d;this._addStreamToMediaConnection(u,h)}}}cleanup(){Ee.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Ee.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ee.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===ji.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:wn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Lt.WebRTC,i),Ee.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Lt.WebRTC,r),Ee.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Ee.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ee.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:wn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Lt.WebRTC,i),Ee.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Lt.WebRTC,r),Ee.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Ee.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Ee.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Lt.WebRTC,l),Ee.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Ee.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Ee.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Lt.WebRTC,n),Ee.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Ee.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Ee.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Ee.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class z2 extends Iv.EventEmitter{emitError(t,n){Ee.error("Error:",n),this.emit("error",new lR(`${t}`,n))}}class lR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class G2 extends z2{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Qf extends G2{static#e=this.ID_PREFIX="mc_";get type(){return ji.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Qf.ID_PREFIX+Fn.randomToken(),this._negotiator=new U2(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ee.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ee.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Ee.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case wn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case wn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ee.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Ee.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class cR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",B2),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Ee.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Fn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Fn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Ee.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Zf extends G2{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return ji.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Zf.ID_PREFIX+L2(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new U2(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ee.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Ee.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Ee.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Lv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case wn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case wn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Ee.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class $v extends Zf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Zf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Ee.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class qm extends $v{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new I2,this.serialization=Bd.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=n2(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=eR(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=r2(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Ee.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class uR extends $v{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Bd.None}}class fR extends $v{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Fn.chunkedMTU){this.emitError(Lv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Bd.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Bv extends z2{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:uR,json:fR,binary:qm,"binary-utf8":qm,default:qm},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Fn.CLOUD_HOST,port:Fn.CLOUD_PORT,path:"/",key:Bv.DEFAULT_KEY,token:Fn.randomToken(),config:Fn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Fn.CLOUD_HOST?this._options.secure=Fn.isSecure():this._options.host==Fn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ee.setLogFunction(this._options.logFunction),Ee.logLevel=this._options.debug||0,this._api=new cR(n),this._socket=this._createServerConnection(),!Fn.supports.audioVideo&&!Fn.supports.data){this._delayedAbort(Lt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Fn.validateId(r)){this._delayedAbort(Lt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Lt.ServerError,i))}_createServerConnection(){const t=new sR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Di.Message,n=>{this._handleMessage(n)}),t.on(Di.Error,n=>{this._abort(Lt.SocketError,n)}),t.on(Di.Disconnected,()=>{this.disconnected||(this.emitError(Lt.Network,"Lost connection to server."),this.disconnect())}),t.on(Di.Close,()=>{this.disconnected||this._abort(Lt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case wn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case wn.Error:this._abort(Lt.ServerError,r.msg);break;case wn.IdTaken:this._abort(Lt.UnavailableID,`ID "${this.id}" is taken`);break;case wn.InvalidKey:this._abort(Lt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case wn.Leave:Ee.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case wn.Expire:this.emitError(Lt.PeerUnavailable,`Could not connect to peer ${i}`);break;case wn.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),Ee.warn(`Offer received for existing Connection ID:${s}`)),r.type===ji.Media){const d=new Qf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=d,this._addConnection(i,l),this.emit("call",d)}else if(r.type===ji.Data){const d=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=d,this._addConnection(i,l),this.emit("connection",d)}else{Ee.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const d of u)l.handleMessage(d);break}default:{if(!r){Ee.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):Ee.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Ee.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Lt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Ee.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Lt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Ee.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new Qf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Ee.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Ee.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ee.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Ee.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Ee.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ee.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Lt.ServerError,n))}}var SA=Bv;class dR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new SA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new SA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const pc=new dR,H2=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},hR=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Draw Phase",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,pR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],mR=["deployment","action"],gR=e=>pR.includes(e),AA=e=>mR.includes(e),Ii=()=>{const[e,t]=C.useState(Fe.getState()),[n,r]=C.useState(pc.getStatus());C.useEffect(()=>{Fe.setupP2PIntegration(pc)},[]),C.useEffect(()=>Fe.subscribe($=>{t(Fe.getState())}),[]),C.useEffect(()=>pc.subscribe($=>{r(pc.getStatus())}),[]);const i=C.useCallback(()=>Fe.isMyTurn(),[e.currentPlayer,e.gameMode]),s=C.useCallback(()=>Fe.getLocalPlayerId(),[e.gameMode]),l=C.useCallback(()=>Fe.getOpponentPlayerId(),[e.gameMode]),u=C.useCallback(()=>e.gameMode!=="local",[e.gameMode]),d=C.useCallback(()=>u()&&!i(),[u,i]),h=C.useCallback(()=>Fe.getLocalPlayerState(),[e.gameMode]),p=C.useCallback(()=>Fe.getOpponentPlayerState(),[e.gameMode]),m=C.useCallback(te=>Fe.isLocalPlayer(te),[e.gameMode]),y=C.useCallback(()=>Fe.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),x=C.useCallback(()=>{const te=Fe.getOpponentPlacedSections();return e.turnPhase==="placement"&&te.some($=>$!==null)&&console.error(" CRITICAL - getOpponentPlacedSections returning:",te,"from gameState:",e.opponentPlacedSections),te},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=C.useCallback((te,$)=>{Fe.updatePlayers(te,$)},[]),A=C.useCallback((te,$)=>{Fe.updatePlayerState(te,$)},[]),P=C.useCallback((te,$)=>{Fe.setPlayerStates(te,$)},[]),E=C.useCallback(te=>{Fe.setFirstPasserOfPreviousRound(te)},[]),O=C.useCallback(te=>{Fe.setFirstPlayerOverride(te)},[]),_=C.useCallback(te=>{Fe.setPassInfo(te)},[]),N=C.useCallback(te=>{Fe.updatePassInfo(te)},[]),j=C.useCallback((te,$,ee)=>{Fe.addLogEntry(te,$,ee)},[]),D=C.useCallback(()=>{Fe.reset()},[]),R=C.useCallback(te=>{Fe.setWinner(te)},[]),k=C.useCallback(async(te,$)=>await Fe.processAction(te,$),[]),B=C.useCallback(()=>Fe.isActionInProgress(),[]),J=C.useCallback(()=>Fe.getActionQueueLength(),[]),Y=C.useCallback(()=>{Fe.clearActionQueue()},[]),Z=C.useCallback(()=>gR(e.turnPhase),[e.turnPhase]),ue=C.useCallback(()=>AA(e.turnPhase),[e.turnPhase]),se=C.useCallback(async(te,$)=>{const ee=e.turnPhase,pe=AA(ee);return console.log(` useGameState.routeAction: ${te} in phase ${ee} (${pe?"sequential":"simultaneous"})`),pe?await k(te,$):(console.warn(` Simultaneous phase action ${te} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${te} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:ee,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,k]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:d,getLocalPlayerState:h,getOpponentPlayerState:p,isLocalPlayer:m,getLocalPlacedSections:y,getOpponentPlacedSections:x,updatePlayers:S,updatePlayerState:A,setPlayerStates:P,setFirstPasserOfPreviousRound:E,setFirstPlayerOverride:O,setPassInfo:_,updatePassInfo:N,addLogEntry:j,resetGame:D,setWinner:R,processAction:k,isActionInProgress:B,getActionQueueLength:J,clearActionQueue:Y,isSimultaneousPhase:Z,isSequentialPhase:ue,routeAction:se,gameStateManager:Fe,p2pManager:pc}},CA=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(` Initialized ship placement: ${e.length} sections available`),console.log(` Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class _c{constructor(){if(_c.instance)return _c.instance;_c.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,console.log(" GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){console.log(" GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=Pn.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&(i.initialize(u,l,s,n,t),console.log(" GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,console.log(" GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(` GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="droneSelection"){console.log(` GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let n={};if(t==="droneSelection"){console.log(" GameFlowManager initializing drone selection phase data");const r=t2(Tn),i=CA();n={...r,...i}}this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(n).length>0&&this.gameStateManager.setState(n,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(console.log(` GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const i=this.actionProcessor.applyPhaseCommitments(t);Object.keys(i).length>0&&(this.gameStateManager.setState(i,"COMMITMENT_APPLICATION",`${t}_completion`),console.log(` GameFlowManager: Applied ${t} commitments to game state`))}const r=this.getNextPhase(t);r?this.isSequentialPhase(r)?(console.log(` GameFlowManager: Handover to sequential phase '${r}'`),this.initiateSequentialPhase(r)):(console.log(` GameFlowManager: Continuing with simultaneous phase '${r}'`),await this.transitionToPhase(r)):console.log(" GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(console.log(` GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(n!=="COMMITMENT_UPDATE"||!t.commitments)return;console.log(" checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){console.log(" Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){console.log(" Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;console.log(" Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:s}),s&&(console.log(` GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){console.log(` GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(` GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="gameInitializing"?n=await this.processGameInitializingPhase():t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():console.warn(` No handler for automatic phase: ${t}`),n?(console.log(` GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),await this.transitionToPhase(n)):console.warn(` No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(){console.log(" GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await ca(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-CAUgKlK_.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error(" GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),console.log(" Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return console.log(" Automatic draw completed, returning next phase:",s),s}catch(n){console.error(" Error during automatic draw phase:",n)}}async processAutomaticEnergyResetPhase(){console.log(" GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error(" GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await ca(async()=>{const{default:p}=await Promise.resolve().then(()=>$M);return{default:p}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={...n.player1,energy:s.totals.energyPerTurn,deploymentBudget:s.totals.deploymentBudget},d={...n.player2,energy:l.totals.energyPerTurn,deploymentBudget:l.totals.deploymentBudget};await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:u,player2:d}}),console.log(` Energy reset complete - Player 1: ${u.energy} energy, Player 2: ${d.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const h=this.getNextPhase("energyReset");return console.log(" Automatic energy reset completed, returning next phase:",h),h}catch(n){console.error(" Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(){console.log(" GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:"placement",gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(n=>setTimeout(n,100));const t=this.getNextPhase("gameInitializing");return console.log(" Game initialization completed, returning next phase:",t),t}catch(t){throw console.error(" Error during game initialization:",t),t}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn(" GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return!1}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(` GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(` Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn(" ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1)),console.log(` GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"?(console.log(" GameFlowManager: Initializing placement phase data"),r=CA()):t==="determineFirstPlayer"&&(console.log(" GameFlowManager: Initializing first player determination phase"),this.actionProcessor&&(i=await this.actionProcessor.processFirstPlayerDetermination(),console.log(" First player determination completed:",i),i&&i.stateUpdates&&(r={...r,...i.stateUpdates},console.log(" GameFlowManager: Including first player state updates:",i.stateUpdates)))),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!0}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){console.log(` GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,console.log(` GameFlowManager: Starting round ${this.roundNumber}`);const t={player1Passed:!1,player2Passed:!1,firstPasser:null};this.gameStateManager.setPassInfo(t),console.log(" PassInfo reset for new round");const n=this.ROUND_PHASES.find(r=>this.isPhaseRequired(r));n?await this.transitionToPhase(n):(console.warn(" No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){console.log(` GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log(" GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const Mc=new _c;function PA(){const{gameStateManager:e}=Ii(),[t,n]=C.useState(!1),r=()=>{console.log(" Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{console.log(" Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},l=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#00ff88",color:"#000000",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 255, 136, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#00cc6a",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#00ff88",u.target.style.transform="translateY(0)"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#ff6b35",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 53, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#e55a2b",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#ff6b35",u.target.style.transform="translateY(0)"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"10px 20px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>{u.target.style.backgroundColor="#cccccc",u.target.style.color="#1a1a1a"},onMouseOut:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#cccccc"},children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"DRONE WARS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"Strategic Combat in the Digital Arena"}),v.jsx("button",{onClick:s,style:{fontSize:"1.5rem",padding:"15px 40px",backgroundColor:"#0088ff",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 136, 255, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#0066cc",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#0088ff",u.target.style.transform="translateY(0)"},children:"START GAME"})]})})}const EA=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];function yR(){const{gameState:e,gameStateManager:t}=Ii(),[n,r]=C.useState(null),i=e.gameMode==="local",s=e.gameMode==="multiplayer",l=()=>{console.log(" Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=h=>{console.log(" Selected AI:",h.name),r(h)},d=()=>{if(i&&n){console.log(" Starting single player game with AI:",n.name);const h=Tn.filter(m=>n.dronePool.includes(m.name)),p={};h.forEach(m=>{p[m.name]=0}),jr.initialize(EA,Tn,n,t.actionProcessor,t),console.log(" AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:h,deployedDroneCounts:p,aiPersonality:n})}else s&&(console.log(" Starting multiplayer game"),t.startGame("multiplayer",{name:"Player 1"},{name:"Player 2"}))};return v.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:EA.map(h=>v.jsxs("div",{onClick:()=>u(h),style:{padding:"20px",backgroundColor:n?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:p=>{n?.name!==h.name&&(p.target.style.backgroundColor="#333333",p.target.style.borderColor="#666666")},onMouseOut:p=>{n?.name!==h.name&&(p.target.style.backgroundColor="#2a2a2a",p.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),s&&v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[v.jsx("div",{style:{fontSize:"1.2rem",color:"#cccccc",marginBottom:"1rem"},children:"Multiplayer game ready to start"}),v.jsx("div",{style:{fontSize:"1rem",color:"#888888"},children:"Both players will customize their decks and drones in-game"})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"12px 24px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:h=>{h.target.style.backgroundColor="#cccccc",h.target.style.color="#1a1a1a"},onMouseOut:h=>{h.target.style.backgroundColor="transparent",h.target.style.color="#cccccc"},children:"BACK TO MENU"}),v.jsx("button",{onClick:d,disabled:i&&!n,style:{fontSize:"1.2rem",padding:"12px 30px",backgroundColor:i&&!n?"#444444":"#00ff88",color:i&&!n?"#888888":"#000000",border:"none",borderRadius:"8px",cursor:i&&!n?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:i&&!n?.5:1},onMouseOver:h=>{i&&!n||(h.target.style.backgroundColor="#00cc6a",h.target.style.transform="translateY(-2px)")},onMouseOut:h=>{i&&!n||(h.target.style.backgroundColor="#00ff88",h.target.style.transform="translateY(0)")},children:i?"START GAME":"START MULTIPLAYER"})]})]})}const wA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),vR=({text:e,className:t})=>{const n=C.useRef(null),r=C.useRef(null);return C.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,d;t.includes("font-orbitron")?(u=8,d=16):(u=8,d=12);let h=d;for(s.style.fontSize=h+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&h>u;)h-=.5,s.style.fontSize=h+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},Jf=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:d})=>{let h=e.limit;l.forEach(se=>{se.mod.stat==="limit"&&(h+=se.mod.value)});const p=i>=h,m=n&&(!p||s),y=C.useMemo(()=>{const se={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(te=>{te.mod.stat==="cost"?se.cost=Math.max(0,se.cost+te.mod.value):se.hasOwnProperty(te.mod.stat)&&(se[te.mod.stat]+=te.mod.value)}),se},[e,l]),x=y.cost,S=y.attack>e.attack,A=y.attack<e.attack,P=S?"text-green-400":A?"text-red-400":"text-white",E=y.speed>e.speed,O=y.speed<e.speed,_=E?"text-green-400":O?"text-red-400":"text-white",N=y.cost<e.class,j=y.cost>e.class,D=N?"text-green-400":j?"text-red-400":"text-white",k=h>e.limit?"text-green-400":"text-white",{name:B,image:J,hull:Y,shields:Z,abilities:ue}=e;return v.jsx("div",{onClick:m?()=>t(e):void 0,className:`
        w-60 h-[320px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${m?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${m?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:v.jsxs("div",{className:`
          w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden
        `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:J,alt:B,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(vR,{text:B,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(wA,{value:y.attack,isFlat:!1,icon:Ey,iconColor:"text-red-400",textColor:P})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:Z>0&&Array.from({length:Z}).map((se,te)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${te}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:Y}).map((se,te)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${te}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(wA,{value:y.speed,isFlat:!0,icon:Py,iconColor:"text-blue-400",textColor:_})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-40 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:ue&&ue.length>0?ue.map((se,te)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:se.name}),v.jsx("p",{className:"text-gray-400 text-xs leading-tight font-exo",children:se.description})]},te)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(jc,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${D}`,children:x})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:se=>{se.stopPropagation(),d&&d(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${p?"text-pink-500":k}`,children:[i,"/",h]})})]})]})]})]})})},Uv=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(Tv,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:" Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function bR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r}=Ii(),{droneSelectionPool:i,droneSelectionTrio:s,turnPhase:l}=e,u=r(),[d,h]=C.useState([]),[p,m]=C.useState(s),[y,x]=C.useState(i),[S,A]=C.useState({droneSelection:!1}),[P,E]=C.useState({droneSelection:!1});C.useEffect(()=>{const D=R=>{const{type:k,phase:B,playerId:J}=R.detail||R;console.log(` DroneSelectionScreen received PhaseManager event: ${k}`,{phase:B,playerId:J}),B==="droneSelection"&&(k==="playerCompleted"?J===t()?A(Z=>({...Z,droneSelection:!0})):n()&&E(Z=>({...Z,droneSelection:!0})):k==="phaseCompleted"&&(h([]),A(Y=>({...Y,droneSelection:!1})),E(Y=>({...Y,droneSelection:!1}))))};return window.addEventListener("phaseManagerEvent",D),()=>{window.removeEventListener("phaseManagerEvent",D)}},[t,n]);const O=D=>{if(l!=="droneSelection")return;console.log(" handleChooseDroneForSelection called with:",D.name);const R=[...d,D];if(h(R),R.length<5){const k=UM(y);m(k.droneSelectionTrio),x(k.droneSelectionPool),console.log(" Advanced to next trio locally, selected:",R.length,"of 5 drones")}else console.log(" All 5 drones selected, waiting for Continue button click")},_=()=>{if(l!=="droneSelection")return;console.log(" handleContinueDroneSelection called with:",d.length,"drones");const D=t();Fe.actionProcessor.queueAction({type:"commitment",payload:{playerId:D,phase:"droneSelection",actionData:{drones:d}}}).then(R=>{if(!R.success){console.error(" Drone selection submission failed:",R.error);return}console.log(" Drone selection submitted successfully")}).catch(R=>{console.error(" Drone selection submission error:",R)}),console.log(" Drone selection submitted to PhaseManager")},N=S.droneSelection;if(n()&&N&&!P.droneSelection){const R=Fe.actionProcessor.getPhaseCommitmentStatus("droneSelection").commitments?.player1?.drones||u.activeDronePool||d,k=R.length>0?R.map(B=>B.name).join(", "):"Selection complete";return v.jsx(Uv,{phase:"droneSelection",localPlayerStatus:`You selected: ${k}`})}const j=d.length===5;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((D,R)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${R<d.length?"bg-green-500":"bg-gray-600"}`},R)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[d.length,"/5 drones selected"]})]}),j?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:" Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",d.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),p&&p.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:p.map((D,R)=>v.jsx(Jf,{drone:D,onClick:()=>O(D),isSelectable:!0,deployedCount:0},D.name||R))})]}),v.jsx("button",{onClick:_,disabled:!j,className:`px-8 py-3 font-bold rounded-lg transition-all mb-8 ${j?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/25 hover:shadow-green-500/30 transform hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:j?"Continue to Deck Selection":`Continue (${d.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",d.length,"/5)",j&&v.jsx("span",{className:"text-green-400 ml-2",children:""})]}),d.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:d.map((D,R)=>v.jsx(Jf,{drone:D,isSelectable:!1,deployedCount:0},R))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function xR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getOpponentPlayerState:i,addLogEntry:s}=Ii(),{turnPhase:l}=e,u=r();i();const[d,h]=C.useState({deckSelection:!1}),[p,m]=C.useState({deckSelection:!1});C.useEffect(()=>{const S=A=>{const{type:P,phase:E,playerId:O}=A.detail||A;console.log(` DeckSelectionScreen received PhaseManager event: ${P}`,{phase:E,playerId:O}),E==="deckSelection"&&(P==="playerCompleted"?O===t()?h(N=>({...N,deckSelection:!0})):n()&&m(N=>({...N,deckSelection:!0})):P==="phaseCompleted"&&(h(_=>({..._,deckSelection:!1})),m(_=>({..._,deckSelection:!1}))))};return window.addEventListener("phaseManagerEvent",S),()=>{window.removeEventListener("phaseManagerEvent",S)}},[t,n]);const y=async S=>{if(l==="deckSelection")if(console.log(" handleDeckChoice called with:",S),S==="standard"){const A=t(),P=Te.buildDeckFromList(Ns),E=await Fe.actionProcessor.processCommitment({phase:"deckSelection",playerId:A,actionData:{deck:P}});if(!E.success){console.error(" Deck selection submission failed:",E.error);return}console.log(" Standard deck selection submitted to PhaseManager"),s({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else S==="custom"&&(console.log(" Transitioning to deck building phase"),Mc.transitionToPhase("deckBuilding"))},x=u.deck&&u.deck.length>0;return console.log("Deck selection render check:",{isMultiplayer:n(),localPlayerHasDeck:x,opponentPhaseCompletion_deckSelection:p.deckSelection,turnPhase:l,localPlayerDeckLength:u.deck?.length}),n()&&x&&!p.deckSelection?v.jsx(Uv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>y("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"mt-6 bg-cyan-600 text-white font-bold px-6 py-2 rounded-full hover:bg-cyan-700 transition-colors duration-200",children:"Select"})]}),v.jsxs("div",{onClick:()=>y("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const SR=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),ed=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:d,isHovered:h,onMouseEnter:p,onMouseLeave:m,isCardTarget:y,isInMiddleLane:x,reallocationState:S,gameEngine:A,turnPhase:P,isMyTurn:E,passInfo:O,getLocalPlayerId:_,localPlayerState:N,shipAbilityMode:j})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const D=A.getShipStatus(t),R=D==="critical"?"bg-red-900/60":D==="damaged"?"bg-yellow-900/50":"bg-black/60";let k=D==="critical"?"border-red-500":D==="damaged"?"border-yellow-500":d?"border-pink-500":"border-cyan-500";const B=d?"shadow-pink-500/20":"shadow-cyan-500/20",J=h?"scale-105 shadow-xl":"";let Y="";if(S)switch(S){case"can-remove":k="border-orange-400",Y="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":k="border-orange-600",Y="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":k="border-gray-600",Y="opacity-50";break;case"can-add":k="border-green-400",Y="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":k="border-green-600",Y="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":k="border-gray-600",Y="opacity-50";break}const Z=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",ue=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,te=>te.toUpperCase()),se={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{className:`
        relative rounded-xl shadow-lg ${B} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${k}
        ${u?`cursor-pointer ${J}`:""}
        ${Z}
        ${Y}
      `,style:se,onClick:s,onMouseEnter:p,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${R}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-4 h-full",children:[v.jsx("div",{className:`absolute top-2 right-2 flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${D==="healthy"?"bg-green-500/20 text-green-300":D==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:D.charAt(0).toUpperCase()+D.slice(1)}),v.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:ue}),v.jsx("p",{className:"text-xs text-gray-400 italic max-w-[200px]",children:t.description})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([te,$])=>{const ee=x&&t.middleLaneBonus&&t.middleLaneBonus[te];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[te,":"]}),v.jsx("span",{className:ee?"text-green-400 font-bold":"",children:$})]},te)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((te,$)=>v.jsx("div",{children:$<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},$))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((te,$)=>{const ee=$+1,{critical:pe,damaged:he}=t.thresholds;let I;ee<=pe?I="bg-red-500":ee<=he?I="bg-orange-500":I="bg-green-500";const V=$<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${V?I:"bg-gray-400"} border border-black/50`},$)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(SR,{ability:t.ability,isUsable:P==="action"&&E()&&!O[`${_()}Passed`]&&N.energy>=t.ability.cost.energy,isSelected:j?.ability.id===t.ability.id,onClick:te=>l(te,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function AR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getLocalPlacedSections:i,setModalContent:s}=Ii(),{turnPhase:l,unplacedSections:u}=e,d=r(),h=i(),[p,m]=C.useState(null),[y,x]=C.useState(h||[null,null,null]),[S,A]=C.useState(u||["bridge","powerCell","droneControlHub"]),[P,E]=C.useState({placement:!1}),[O,_]=C.useState({placement:!1});C.useEffect(()=>{const k=B=>{const{type:J,phase:Y,playerId:Z}=B.detail||B;console.log(` ShipPlacementScreen received PhaseManager event: ${J}`,{phase:Y,playerId:Z}),Y==="placement"&&(J==="playerCompleted"?Z===t()?E(se=>({...se,placement:!0})):n()&&_(se=>({...se,placement:!0})):J==="phaseCompleted"&&(E(ue=>({...ue,placement:!1})),_(ue=>({...ue,placement:!1}))))};return window.addEventListener("phaseManagerEvent",k),()=>{window.removeEventListener("phaseManagerEvent",k)}},[t,n]);const N=k=>{if(l==="placement")if(console.log(" handleSelectSectionForPlacement called with:",k,"gameMode:",e.gameMode),S.includes(k))m(B=>B===k?null:k);else{const B=y.indexOf(k),J=[...y];J[B]=null,x(J),A(Y=>[...Y,k]),m(null)}},j=k=>{if(l==="placement")if(console.log(" handleLaneSelectForPlacement called with lane:",k,"gameMode:",e.gameMode),p){if(y[k]){const B=y[k],J=[...y];J[k]=p;const Y=S.indexOf(p),Z=[...S];Z.splice(Y,1,B),x(J),A(Z)}else{const B=[...y];B[k]=p,x(B),A(J=>J.filter(Y=>Y!==p))}m(null)}else y[k]&&N(y[k])},D=async()=>{if(l!=="placement")return;if(console.log(" handleConfirmPlacement called"),y.some(B=>B==null)){s({title:"Incomplete Placement",text:"All ship sections must be placed before confirming placement.",onClose:()=>s(null),isBlocking:!1});return}console.log(" Submitting placement to PhaseManager:",y);try{const B=await Fe.actionProcessor.processCommitment({phase:"placement",playerId:t(),actionData:{placedSections:y}});if(!B.success){console.error(" Placement submission failed:",B.error),s({title:"Placement Error",text:B.error,onClose:()=>s(null),isBlocking:!1});return}console.log(" Placement submitted to PhaseManager"),n()&&!B.data.bothComplete&&s({title:"Placement Confirmed",text:"Your ship placement has been confirmed. Waiting for opponent to complete their placement...",onClose:()=>s(null),isBlocking:!1})}catch(B){console.error(" Error submitting placement:",B),s({title:"Placement Error",text:"An error occurred while submitting placement. Please try again.",onClose:()=>s(null),isBlocking:!1})}};if(y&&y.length===3&&y.every(k=>k!==null),n()&&P.placement&&!O.placement){const k=y.map((B,J)=>B?B.name:"Empty").join(", ");return v.jsx(Uv,{phase:"placement",localPlayerStatus:`Your ship layout: ${k}`})}const R=y.every(k=>k!==null);return console.log(" ShipPlacementScreen rendered:",{allPlaced:R,placed:y,unplaced:u,selected:p}),v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(k=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes(k)&&v.jsx("div",{onClick:()=>N(k),className:`h-full transition-all duration-300 rounded-xl ${p===k?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(ed,{section:k,stats:d.shipSections[k],effectiveStatsForDisplay:d.shipSections[k].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:Te,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:d,shipAbilityMode:null})})},k))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(k=>{const B=y[k],J=p&&!y[k];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>j(k),children:B?v.jsx(ed,{section:B,stats:d.shipSections[B],effectiveStatsForDisplay:d.shipSections[B].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:k===1,gameEngine:Te,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:d,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${J?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:k===1?"Lane 2 (Center Bonus)":`Lane ${k+1}`})})},k)})})]}),v.jsx("button",{onClick:()=>{console.log(` Confirm Layout button clicked! allPlaced: ${R}`),D()},disabled:!R,className:"mt-12 bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 disabled:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed enabled:hover:bg-green-500 shadow-lg",children:"Confirm Layout"})]})]})}function q2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=q2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function rt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=q2(e))&&(r&&(r+=" "),r+=t);return r}var Ym={},Fm={},OA;function CR(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Fm)),Fm}var Km={},_A;function Y2(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Km)),Km}var Vm={},TA;function F2(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Vm)),Vm}var Xm={},DA;function zv(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",d=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const h=n[s];u?h==="\\"&&s+1<i?(s++,l+=n[s]):h===u?u="":l+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,r.push(l),l=""):l+=h:h==="["?(d=!0,l&&(r.push(l),l="")):h==="."?l&&(r.push(l),l=""):l+=h,s++}return l&&r.push(l),r}e.toPath=t})(Xm)),Xm}var jA;function Gv(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CR(),n=Y2(),r=F2(),i=zv();function s(u,d,h){if(u==null)return h;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return h;const p=u[d];return p===void 0?n.isDeepKey(d)?s(u,i.toPath(d),h):h:p}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const p=u[d];return p===void 0?h:p}default:{if(Array.isArray(d))return l(u,d,h);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return h;const p=u[d];return p===void 0?h:p}}}function l(u,d,h){if(d.length===0)return h;let p=u;for(let m=0;m<d.length;m++){if(p==null||t.isUnsafeProperty(d[m]))return h;p=p[d[m]]}return p===void 0?h:p}e.get=s})(Ym)),Ym}var Wm,NA;function PR(){return NA||(NA=1,Wm=Gv().get),Wm}var ER=PR();const jo=Xr(ER);var Qm={exports:{}},st={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA;function wR(){if(kA)return st;kA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var P=A.$$typeof;switch(P){case e:switch(A=A.type,A){case n:case i:case r:case d:case h:case y:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case p:return A;case s:return A;default:return P}}case t:return P}}}return st.ContextConsumer=s,st.ContextProvider=l,st.Element=e,st.ForwardRef=u,st.Fragment=n,st.Lazy=m,st.Memo=p,st.Portal=t,st.Profiler=i,st.StrictMode=r,st.Suspense=d,st.SuspenseList=h,st.isContextConsumer=function(A){return S(A)===s},st.isContextProvider=function(A){return S(A)===l},st.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},st.isForwardRef=function(A){return S(A)===u},st.isFragment=function(A){return S(A)===n},st.isLazy=function(A){return S(A)===m},st.isMemo=function(A){return S(A)===p},st.isPortal=function(A){return S(A)===t},st.isProfiler=function(A){return S(A)===i},st.isStrictMode=function(A){return S(A)===r},st.isSuspense=function(A){return S(A)===d},st.isSuspenseList=function(A){return S(A)===h},st.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===d||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===p||A.$$typeof===l||A.$$typeof===s||A.$$typeof===u||A.$$typeof===x||A.getModuleId!==void 0)},st.typeOf=S,st}var MA;function OR(){return MA||(MA=1,Qm.exports=wR()),Qm.exports}var _R=OR(),en=e=>e===0?0:e>0?1:-1,cr=e=>typeof e=="number"&&e!=+e,Co=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,_e=e=>(typeof e=="number"||e instanceof Number)&&!cr(e),da=e=>_e(e)||typeof e=="string",TR=0,Rc=e=>{var t=++TR;return"".concat(e||"").concat(t)},_n=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_e(t)&&typeof t!="string")return r;var s;if(Co(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return cr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},K2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function gn(e,t,n){return _e(e)&&_e(t)?e+n*(t-e):t}function DR(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):jo(r,t))===n)}var tn=e=>e===null||typeof e>"u",Yc=e=>tn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),jR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Hv(e){if(typeof e!="string")return!1;var t=jR;return t.includes(e)}var NR=["viewBox","children"],RA=["points","pathLength"],Zm={svg:NR,polygon:RA,polyline:RA},kR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(C.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Hv(i)&&(r[i]=(s=>n[i](n,s)))}),r},MR=(e,t,n)=>r=>(e(t,n,r),null),Fc=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Hv(i)&&typeof s=="function"&&(r||(r={}),r[i]=MR(s,t,n))}),r},RR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function V2(e){if(typeof e!="string")return!1;var t=RR;return t.includes(e)}function Bo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return V2(r)});return Object.fromEntries(t)}var IA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",LA=null,Jm=null,X2=e=>{if(e===LA&&Array.isArray(Jm))return Jm;var t=[];return C.Children.forEach(e,n=>{tn(n)||(_R.isFragment(n)?t=t.concat(X2(n.props.children)):t.push(n))}),Jm=t,LA=e,t};function qv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>IA(i)):r=[IA(t)],X2(e).forEach(i=>{var s=jo(i,"type.displayName")||jo(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var IR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&Zm?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||V2(t)),d=!!n&&Hv(t);return l||u||d},$t=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(C.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;IR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},LR=["children","width","height","viewBox","className","style","title","desc"];function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iy.apply(null,arguments)}function $R(e,t){if(e==null)return{};var n,r,i=BR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Yv=C.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:d,desc:h}=e,p=$R(e,LR),m=s||{width:r,height:i,x:0,y:0},y=rt("recharts-surface",l);return C.createElement("svg",Iy({},$t(p,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),C.createElement("title",null,d),C.createElement("desc",null,h),n)}),UR=["children","className"];function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ly.apply(null,arguments)}function zR(e,t){if(e==null)return{};var n,r,i=GR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Xn=C.forwardRef((e,t)=>{var{children:n,className:r}=e,i=zR(e,UR),s=rt("recharts-layer",r);return C.createElement("g",Ly({className:s},$t(i,!0),{ref:t}),n)}),W2=jw(),Q2=C.createContext(null),HR=()=>C.useContext(Q2);function ft(e){return function(){return e}}const Z2=Math.cos,td=Math.sin,Wr=Math.sqrt,nd=Math.PI,Ud=2*nd,$y=Math.PI,By=2*$y,xo=1e-6,qR=By-xo;function J2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function YR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return J2;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class FR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?J2:YR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,d=r-t,h=i-n,p=l-t,m=u-n,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>xo)if(!(Math.abs(m*d-h*p)>xo)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,S=i-u,A=d*d+h*h,P=x*x+S*S,E=Math.sqrt(A),O=Math.sqrt(y),_=s*Math.tan(($y-Math.acos((A+y-P)/(2*E*O)))/2),N=_/O,j=_/E;Math.abs(N-1)>xo&&this._append`L${t+N*p},${n+N*m}`,this._append`A${s},${s},0,0,${+(m*x>p*S)},${this._x1=t+j*d},${this._y1=n+j*h}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),d=r*Math.sin(i),h=t+u,p=n+d,m=1^l,y=l?i-s:s-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>xo||Math.abs(this._y1-p)>xo)&&this._append`L${h},${p}`,r&&(y<0&&(y=y%By+By),y>qR?this._append`A${r},${r},0,1,${m},${t-u},${n-d}A${r},${r},0,1,${m},${this._x1=h},${this._y1=p}`:y>xo&&this._append`A${r},${r},0,${+(y>=$y)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Fv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new FR(t)}function Kv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eO(e){this._context=e}eO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function zd(e){return new eO(e)}function tO(e){return e[0]}function nO(e){return e[1]}function rO(e,t){var n=ft(!0),r=null,i=zd,s=null,l=Fv(u);e=typeof e=="function"?e:e===void 0?tO:ft(e),t=typeof t=="function"?t:t===void 0?nO:ft(t);function u(d){var h,p=(d=Kv(d)).length,m,y=!1,x;for(r==null&&(s=i(x=l())),h=0;h<=p;++h)!(h<p&&n(m=d[h],h,d))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(m,h,d),+t(m,h,d));if(x)return s=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:ft(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:ft(+d),u):t},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:ft(!!d),u):n},u.curve=function(d){return arguments.length?(i=d,r!=null&&(s=i(r)),u):i},u.context=function(d){return arguments.length?(d==null?r=s=null:s=i(r=d),u):r},u}function Ef(e,t,n){var r=null,i=ft(!0),s=null,l=zd,u=null,d=Fv(h);e=typeof e=="function"?e:e===void 0?tO:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?nO:ft(+n);function h(m){var y,x,S,A=(m=Kv(m)).length,P,E=!1,O,_=new Array(A),N=new Array(A);for(s==null&&(u=l(O=d())),y=0;y<=A;++y){if(!(y<A&&i(P=m[y],y,m))===E)if(E=!E)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=x;--S)u.point(_[S],N[S]);u.lineEnd(),u.areaEnd()}E&&(_[y]=+e(P,y,m),N[y]=+t(P,y,m),u.point(r?+r(P,y,m):_[y],n?+n(P,y,m):N[y]))}if(O)return u=null,O+""||null}function p(){return rO().defined(i).curve(l).context(s)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:ft(+m),r=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:ft(+m),h):e},h.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:ft(+m),h):r},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:ft(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:ft(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:ft(+m),h):n},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(n)},h.lineX1=function(){return p().x(r).y(t)},h.defined=function(m){return arguments.length?(i=typeof m=="function"?m:ft(!!m),h):i},h.curve=function(m){return arguments.length?(l=m,s!=null&&(u=l(s)),h):l},h.context=function(m){return arguments.length?(m==null?s=u=null:u=l(s=m),h):s},h}class aO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function KR(e){return new aO(e,!0)}function VR(e){return new aO(e,!1)}const Vv={draw(e,t){const n=Wr(t/nd);e.moveTo(n,0),e.arc(0,0,n,0,Ud)}},XR={draw(e,t){const n=Wr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},iO=Wr(1/3),WR=iO*2,QR={draw(e,t){const n=Wr(t/WR),r=n*iO;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},ZR={draw(e,t){const n=Wr(t),r=-n/2;e.rect(r,r,n,n)}},JR=.8908130915292852,oO=td(nd/10)/td(7*nd/10),eI=td(Ud/10)*oO,tI=-Z2(Ud/10)*oO,nI={draw(e,t){const n=Wr(t*JR),r=eI*n,i=tI*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=Ud*s/5,u=Z2(l),d=td(l);e.lineTo(d*n,-u*n),e.lineTo(u*r-d*i,d*r+u*i)}e.closePath()}},eg=Wr(3),rI={draw(e,t){const n=-Wr(t/(eg*3));e.moveTo(0,n*2),e.lineTo(-eg*n,-n),e.lineTo(eg*n,-n),e.closePath()}},Or=-.5,_r=Wr(3)/2,Uy=1/Wr(12),aI=(Uy/2+1)*3,iI={draw(e,t){const n=Wr(t/aI),r=n/2,i=n*Uy,s=r,l=n*Uy+n,u=-s,d=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,d),e.lineTo(Or*r-_r*i,_r*r+Or*i),e.lineTo(Or*s-_r*l,_r*s+Or*l),e.lineTo(Or*u-_r*d,_r*u+Or*d),e.lineTo(Or*r+_r*i,Or*i-_r*r),e.lineTo(Or*s+_r*l,Or*l-_r*s),e.lineTo(Or*u+_r*d,Or*d-_r*u),e.closePath()}};function oI(e,t){let n=null,r=Fv(i);e=typeof e=="function"?e:ft(e||Vv),t=typeof t=="function"?t:ft(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:ft(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:ft(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function rd(){}function ad(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function sO(e){this._context=e}sO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ad(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ad(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sI(e){return new sO(e)}function lO(e){this._context=e}lO.prototype={areaStart:rd,areaEnd:rd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ad(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lI(e){return new lO(e)}function cO(e){this._context=e}cO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ad(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cI(e){return new cO(e)}function uO(e){this._context=e}uO.prototype={areaStart:rd,areaEnd:rd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uI(e){return new uO(e)}function $A(e){return e<0?-1:1}function BA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return($A(s)+$A(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function UA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function tg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function id(e){this._context=e}id.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tg(this,this._t0,UA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tg(this,UA(this,n=BA(this,e,t)),n);break;default:tg(this,this._t0,n=BA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function fO(e){this._context=new dO(e)}(fO.prototype=Object.create(id.prototype)).point=function(e,t){id.prototype.point.call(this,t,e)};function dO(e){this._context=e}dO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function fI(e){return new id(e)}function dI(e){return new fO(e)}function hO(e){this._context=e}hO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=zA(e),i=zA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function zA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function hI(e){return new hO(e)}function Gd(e,t){this._context=e,this._t=t}Gd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function pI(e){return new Gd(e,.5)}function mI(e){return new Gd(e,0)}function gI(e){return new Gd(e,1)}function $s(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function zy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function yI(e,t){return e[t]}function vI(e){const t=[];return t.key=e,t}function bI(){var e=ft([]),t=zy,n=$s,r=yI;function i(s){var l=Array.from(e.apply(this,arguments),vI),u,d=l.length,h=-1,p;for(const m of s)for(u=0,++h;u<d;++u)(l[u][h]=[0,+r(m,l[u].key,h,s)]).data=m;for(u=0,p=Kv(t(l));u<d;++u)l[p[u]].index=u;return n(l,p),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:ft(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:ft(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?zy:typeof s=="function"?s:ft(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??$s,i):n},i}function xI(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}$s(e,t)}}function SI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}$s(e,t)}}function AI(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,d=0,h=0;u<l;++u){for(var p=e[t[u]],m=p[r][1]||0,y=p[r-1][1]||0,x=(m-y)/2,S=0;S<u;++S){var A=e[t[S]],P=A[r][1]||0,E=A[r-1][1]||0;x+=P-E}d+=m,h+=x*m}i[r-1][1]+=i[r-1][0]=n,d&&(n-=h/d)}i[r-1][1]+=i[r-1][0]=n,$s(e,t)}}var CI=["type","size","sizeType"];function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gy.apply(null,arguments)}function GA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function HA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GA(Object(n),!0).forEach(function(r){PI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PI(e,t,n){return(t=EI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EI(e){var t=wI(e,"string");return typeof t=="symbol"?t:t+""}function wI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OI(e,t){if(e==null)return{};var n,r,i=_I(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _I(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var pO={symbolCircle:Vv,symbolCross:XR,symbolDiamond:QR,symbolSquare:ZR,symbolStar:nI,symbolTriangle:rI,symbolWye:iI},TI=Math.PI/180,DI=e=>{var t="symbol".concat(Yc(e));return pO[t]||Vv},jI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*TI;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},NI=(e,t)=>{pO["symbol".concat(Yc(e))]=t},Xv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=OI(e,CI),s=HA(HA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=DI(l),x=oI().type(y).size(jI(n,r,l));return x()},{className:d,cx:h,cy:p}=s,m=$t(s,!0);return h===+h&&p===+p&&n===+n?C.createElement("path",Gy({},m,{className:rt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};Xv.registerSymbol=NI;function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hy.apply(null,arguments)}function qA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(n),!0).forEach(function(r){Wv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wv(e,t,n){return(t=MI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MI(e){var t=RI(e,"string");return typeof t=="symbol"?t:t+""}function RI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tr=32;class Qv extends C.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Tr/2,s=Tr/6,l=Tr/3,u=t.inactive?r:t.color,d=n??t.type;if(d==="none")return null;if(d==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Tr,y2:i,className:"recharts-legend-icon"});if(d==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Tr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return C.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Tr/8,"h").concat(Tr,"v").concat(Tr*3/4,"h").concat(-Tr,"z"),className:"recharts-legend-icon"});if(C.isValidElement(t.legendIcon)){var h=kI({},t);return delete h.legendIcon,C.cloneElement(t.legendIcon,h)}return C.createElement(Xv,{fill:u,cx:i,cy:i,size:Tr,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Tr,height:Tr},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,m)=>{var y=p.formatter||i,x=rt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:p.inactive});if(p.type==="none")return null;var S=p.inactive?s:p.color,A=y?y(p.value,p,m):p.value;return C.createElement("li",Hy({className:x,style:d,key:"legend-item-".concat(m)},Fc(this.props,p,m)),C.createElement(Yv,{width:n,height:n,viewBox:u,style:h,"aria-label":"".concat(A," legend icon")},this.renderIcon(p,l)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Wv(Qv,"displayName","Legend");Wv(Qv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var ng={},rg={},YA;function II(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(rg)),rg}var ag={},FA;function mO(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(ag)),ag}var ig={},og={},sg={},KA;function LI(){return KA||(KA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(sg)),sg}var VA;function Zv(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LI();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(og)),og}var lg={},XA;function $I(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(lg)),lg}var WA;function BI(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zv(),n=$I();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(ig)),ig}var cg={},ug={},QA;function UI(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gv();function n(r){return function(i){return t.get(i,r)}}e.property=n})(ug)),ug}var fg={},dg={},hg={},pg={},ZA;function gO(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(pg)),pg}var mg={},JA;function yO(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(mg)),mg}var gg={},eC;function vO(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(gg)),gg}var tC;function zI(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jv(),n=gO(),r=yO(),i=vO();function s(m,y,x){return typeof x!="function"?t.isMatch(m,y):l(m,y,function S(A,P,E,O,_,N){const j=x(A,P,E,O,_,N);return j!==void 0?!!j:l(A,P,S,N)},new Map)}function l(m,y,x,S){if(y===m)return!0;switch(typeof y){case"object":return u(m,y,x,S);case"function":return Object.keys(y).length>0?l(m,{...y},x,S):i.eq(m,y);default:return n.isObject(m)?typeof y=="string"?y==="":!0:i.eq(m,y)}}function u(m,y,x,S){if(y==null)return!0;if(Array.isArray(y))return h(m,y,x,S);if(y instanceof Map)return d(m,y,x,S);if(y instanceof Set)return p(m,y,x,S);const A=Object.keys(y);if(m==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(y))return S.get(y)===m;S&&S.set(y,m);try{for(let P=0;P<A.length;P++){const E=A[P];if(!r.isPrimitive(m)&&!(E in m)||y[E]===void 0&&m[E]!==void 0||y[E]===null&&m[E]!==null||!x(m[E],y[E],E,m,y,S))return!1}return!0}finally{S&&S.delete(y)}}function d(m,y,x,S){if(y.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,P]of y.entries()){const E=m.get(A);if(x(E,P,A,m,y,S)===!1)return!1}return!0}function h(m,y,x,S){if(y.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let P=0;P<y.length;P++){const E=y[P];let O=!1;for(let _=0;_<m.length;_++){if(A.has(_))continue;const N=m[_];let j=!1;if(x(N,E,P,m,y,S)&&(j=!0),j){A.add(_),O=!0;break}}if(!O)return!1}return!0}function p(m,y,x,S){return y.size===0?!0:m instanceof Set?h([...m],[...y],x,S):!1}e.isMatchWith=s,e.isSetMatch=p})(hg)),hg}var nC;function Jv(){return nC||(nC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(dg)),dg}var yg={},vg={},bg={},rC;function GI(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(bg)),bg}var xg={},aC;function bO(){return aC||(aC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(xg)),xg}var Sg={},iC;function xO(){return iC||(iC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",h="[object Set]",p="[object Array]",m="[object Function]",y="[object ArrayBuffer]",x="[object Object]",S="[object Error]",A="[object DataView]",P="[object Uint8Array]",E="[object Uint8ClampedArray]",O="[object Uint16Array]",_="[object Uint32Array]",N="[object BigUint64Array]",j="[object Int8Array]",D="[object Int16Array]",R="[object Int32Array]",k="[object BigInt64Array]",B="[object Float32Array]",J="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=p,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=N,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=B,e.float64ArrayTag=J,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=R,e.int8ArrayTag=j,e.mapTag=d,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=_,e.uint8ArrayTag=P,e.uint8ClampedArrayTag=E})(Sg)),Sg}var Ag={},oC;function HI(){return oC||(oC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(Ag)),Ag}var sC;function SO(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GI(),n=bO(),r=xO(),i=yO(),s=HI();function l(p,m){return u(p,void 0,p,new Map,m)}function u(p,m,y,x=new Map,S=void 0){const A=S?.(p,m,y,x);if(A!==void 0)return A;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const P=new Array(p.length);x.set(p,P);for(let E=0;E<p.length;E++)P[E]=u(p[E],E,y,x,S);return Object.hasOwn(p,"index")&&(P.index=p.index),Object.hasOwn(p,"input")&&(P.input=p.input),P}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const P=new RegExp(p.source,p.flags);return P.lastIndex=p.lastIndex,P}if(p instanceof Map){const P=new Map;x.set(p,P);for(const[E,O]of p)P.set(E,u(O,E,y,x,S));return P}if(p instanceof Set){const P=new Set;x.set(p,P);for(const E of p)P.add(u(E,void 0,y,x,S));return P}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const P=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,P);for(let E=0;E<p.length;E++)P[E]=u(p[E],E,y,x,S);return P}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const P=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,P),d(P,p,y,x,S),P}if(typeof File<"u"&&p instanceof File){const P=new File([p],p.name,{type:p.type});return x.set(p,P),d(P,p,y,x,S),P}if(p instanceof Blob){const P=new Blob([p],{type:p.type});return x.set(p,P),d(P,p,y,x,S),P}if(p instanceof Error){const P=new p.constructor;return x.set(p,P),P.message=p.message,P.name=p.name,P.stack=p.stack,P.cause=p.cause,d(P,p,y,x,S),P}if(typeof p=="object"&&h(p)){const P=Object.create(Object.getPrototypeOf(p));return x.set(p,P),d(P,p,y,x,S),P}return p}function d(p,m,y=p,x,S){const A=[...Object.keys(m),...t.getSymbols(m)];for(let P=0;P<A.length;P++){const E=A[P],O=Object.getOwnPropertyDescriptor(p,E);(O==null||O.writable)&&(p[E]=u(m[E],E,y,x,S))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(vg)),vg}var lC;function qI(){return lC||(lC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SO();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(yg)),yg}var cC;function YI(){return cC||(cC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jv(),n=qI();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(fg)),fg}var Cg={},Pg={},Eg={},uC;function FI(){return uC||(uC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SO(),n=xO();function r(i,s){return t.cloneDeepWith(i,(l,u,d,h)=>{const p=s?.(l,u,d,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(Eg)),Eg}var fC;function KI(){return fC||(fC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Pg)),Pg}var wg={},Og={},dC;function AO(){return dC||(dC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Og)),Og}var _g={},hC;function VI(){return hC||(hC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bO();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(_g)),_g}var pC;function XI(){return pC||(pC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y2(),n=AO(),r=VI(),i=zv();function s(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?d=i.toPath(u):d=[u],d.length===0)return!1;let h=l;for(let p=0;p<d.length;p++){const m=d[p];if((h==null||!Object.hasOwn(h,m))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(m)&&m<h.length))return!1;h=h[m]}return!0}e.has=s})(wg)),wg}var mC;function WI(){return mC||(mC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jv(),n=F2(),r=KI(),i=Gv(),s=XI();function l(u,d){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=r.cloneDeep(d),function(h){const p=i.get(h,u);return p===void 0?s.has(h,u):d===void 0?p===void 0:t.isMatch(p,d)}}e.matchesProperty=l})(Cg)),Cg}var gC;function QI(){return gC||(gC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mO(),n=UI(),r=YI(),i=WI();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(cg)),cg}var yC;function ZI(){return yC||(yC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=II(),n=mO(),r=BI(),i=QI();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(ng)),ng}var Tg,vC;function JI(){return vC||(vC=1,Tg=ZI().uniqBy),Tg}var e4=JI();const bC=Xr(e4);function CO(e,t,n){return t===!0?bC(e,n):typeof t=="function"?bC(e,t):e}var Dg={exports:{}},jg={},Ng={exports:{}},kg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xC;function t4(){if(xC)return kg;xC=1;var e=Xs();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(m,y){var x=y(),S=r({inst:{value:x,getSnapshot:y}}),A=S[0].inst,P=S[1];return s(function(){A.value=x,A.getSnapshot=y,d(A)&&P({inst:A})},[m,x,y]),i(function(){return d(A)&&P({inst:A}),m(function(){d(A)&&P({inst:A})})},[m]),l(x),x}function d(m){var y=m.getSnapshot;m=m.value;try{var x=y();return!n(m,x)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return kg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,kg}var SC;function n4(){return SC||(SC=1,Ng.exports=t4()),Ng.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function r4(){if(AC)return jg;AC=1;var e=Xs(),t=n4();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return jg.useSyncExternalStoreWithSelector=function(h,p,m,y,x){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function E(D){if(!O){if(O=!0,_=D,D=y(D),x!==void 0&&A.hasValue){var R=A.value;if(x(R,D))return N=R}return N=D}if(R=N,r(_,D))return R;var k=y(D);return x!==void 0&&x(R,k)?(_=D,R):(_=D,N=k)}var O=!1,_,N,j=m===void 0?null:m;return[function(){return E(p())},j===null?void 0:function(){return E(j())}]},[p,m,y,x]);var P=i(h,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=P},[P]),d(P),P},jg}var CC;function a4(){return CC||(CC=1,Dg.exports=r4()),Dg.exports}var i4=a4(),e0=C.createContext(null),o4=e=>e,Ct=()=>{var e=C.useContext(e0);return e?e.store.dispatch:o4},Vf=()=>{},s4=()=>Vf,l4=(e,t)=>e===t;function we(e){var t=C.useContext(e0);return i4.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:s4,t?t.store.getState:Vf,t?t.store.getState:Vf,t?e:Vf,l4)}function c4(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function u4(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function f4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var PC=e=>Array.isArray(e)?e:[e];function d4(e){const t=Array.isArray(e[0])?e[0]:e;return f4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function h4(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var p4=class{constructor(e){this.value=e}deref(){return this.value}},m4=typeof WeakRef<"u"?WeakRef:p4,g4=0,EC=1;function wf(){return{s:g4,v:void 0,o:null,p:null}}function PO(e,t={}){let n=wf();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:d}=arguments;for(let m=0,y=d;m<y;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(x);A===void 0?(u=wf(),S.set(x,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(x);A===void 0?(u=wf(),S.set(x,u)):u=A}}const h=u;let p;if(u.s===EC)p=u.v;else if(p=e.apply(null,arguments),s++,r){const m=i?.deref?.()??i;m!=null&&r(m,p)&&(p=m,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new m4(p):p}return h.s=EC,h.v=p,p}return l.clearCache=()=>{n=wf(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function y4(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,d={},h=i.pop();typeof h=="object"&&(d=h,h=i.pop()),c4(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...d},{memoize:m,memoizeOptions:y=[],argsMemoize:x=PO,argsMemoizeOptions:S=[]}=p,A=PC(y),P=PC(S),E=d4(i),O=m(function(){return s++,h.apply(null,arguments)},...A),_=x(function(){l++;const j=h4(E,arguments);return u=O.apply(null,j),u},...P);return Object.assign(_,{resultFunc:h,memoizedResultFunc:O,dependencies:E,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var W=y4(PO),v4=Object.assign((e,t=W)=>{u4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,d)=>(l[n[d]]=u,l),{}))},{withTypes:()=>v4}),Mg={},Rg={},Ig={},wC;function b4(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(Ig)),Ig}var Lg={},$g={},OC;function EO(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})($g)),$g}var _C;function x4(){return _C||(_C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Lg)),Lg}var TC;function S4(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b4(),n=x4(),r=zv();function i(s,l,u,d){if(s==null)return[];u=d?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,S)=>{let A=x;for(let P=0;P<S.length&&A!=null;++P)A=A[S[P]];return A},p=(x,S)=>S==null||x==null?S:typeof x=="object"&&"key"in x?Object.hasOwn(S,x.key)?S[x.key]:h(S,x.path):typeof x=="function"?x(S):Array.isArray(x)?h(S,x):typeof S=="object"?S[x]:S,m=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:m.map(S=>p(S,x))})).slice().sort((x,S)=>{for(let A=0;A<m.length;A++){const P=t.compareValues(x.criteria[A],S.criteria[A],u[A]);if(P!==0)return P}return 0}).map(x=>x.original)}e.orderBy=i})(Rg)),Rg}var Bg={},DC;function A4(){return DC||(DC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,d)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&d<s?l(p,d+1):i.push(p)}};return l(n,0),i}e.flatten=t})(Bg)),Bg}var Ug={},jC;function wO(){return jC||(jC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AO(),n=Zv(),r=gO(),i=vO();function s(l,u,d){return r.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?i.eq(d[u],l):!1}e.isIterateeCall=s})(Ug)),Ug}var NC;function C4(){return NC||(NC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S4(),n=A4(),r=wO();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(Mg)),Mg}var zg,kC;function P4(){return kC||(kC=1,zg=C4().sortBy),zg}var E4=P4();const Hd=Xr(E4);var OO=e=>e.legend.settings,w4=e=>e.legend.size,O4=e=>e.legend.payload,_4=W([O4,OO],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Hd(r,n):r});function T4(){return we(_4)}var Of=1;function _O(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=C.useState({height:0,left:0,top:0,width:0}),r=C.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Of||Math.abs(l.left-t.left)>Of||Math.abs(l.top-t.top)>Of||Math.abs(l.width-t.width)>Of)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function pn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var D4=typeof Symbol=="function"&&Symbol.observable||"@@observable",MC=D4,Gg=()=>Math.random().toString(36).substring(7).split("").join("."),j4={INIT:`@@redux/INIT${Gg()}`,REPLACE:`@@redux/REPLACE${Gg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gg()}`},od=j4;function t0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function TO(e,t,n){if(typeof e!="function")throw new Error(pn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(pn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(pn(1));return n(TO)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,d=!1;function h(){l===s&&(l=new Map,s.forEach((P,E)=>{l.set(E,P)}))}function p(){if(d)throw new Error(pn(3));return i}function m(P){if(typeof P!="function")throw new Error(pn(4));if(d)throw new Error(pn(5));let E=!0;h();const O=u++;return l.set(O,P),function(){if(E){if(d)throw new Error(pn(6));E=!1,h(),l.delete(O),s=null}}}function y(P){if(!t0(P))throw new Error(pn(7));if(typeof P.type>"u")throw new Error(pn(8));if(typeof P.type!="string")throw new Error(pn(17));if(d)throw new Error(pn(9));try{d=!0,i=r(i,P)}finally{d=!1}return(s=l).forEach(O=>{O()}),P}function x(P){if(typeof P!="function")throw new Error(pn(10));r=P,y({type:od.REPLACE})}function S(){const P=m;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(pn(11));function O(){const N=E;N.next&&N.next(p())}return O(),{unsubscribe:P(O)}},[MC](){return this}}}return y({type:od.INIT}),{dispatch:y,subscribe:m,getState:p,replaceReducer:x,[MC]:S}}function N4(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:od.INIT})>"u")throw new Error(pn(12));if(typeof n(void 0,{type:od.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pn(13))})}function DO(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{N4(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let d=!1;const h={};for(let p=0;p<r.length;p++){const m=r[p],y=n[m],x=l[m],S=y(x,u);if(typeof S>"u")throw u&&u.type,new Error(pn(14));h[m]=S,d=d||S!==x}return d=d||r.length!==Object.keys(l).length,d?h:l}}function sd(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function k4(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(pn(15))};const l={getState:i.getState,dispatch:(d,...h)=>s(d,...h)},u=e.map(d=>d(l));return s=sd(...u)(i.dispatch),{...i,dispatch:s}}}function jO(e){return t0(e)&&"type"in e&&typeof e.type=="string"}var NO=Symbol.for("immer-nothing"),RC=Symbol.for("immer-draftable"),ur=Symbol.for("immer-state");function Kr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Bs=Object.getPrototypeOf;function No(e){return!!e&&!!e[ur]}function Ga(e){return e?kO(e)||Array.isArray(e)||!!e[RC]||!!e.constructor?.[RC]||Kc(e)||Yd(e):!1}var M4=Object.prototype.constructor.toString();function kO(e){if(!e||typeof e!="object")return!1;const t=Bs(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===M4}function ld(e,t){qd(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function qd(e){const t=e[ur];return t?t.type_:Array.isArray(e)?1:Kc(e)?2:Yd(e)?3:0}function qy(e,t){return qd(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function MO(e,t,n){const r=qd(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function R4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Kc(e){return e instanceof Map}function Yd(e){return e instanceof Set}function So(e){return e.copy_||e.base_}function Yy(e,t){if(Kc(e))return new Map(e);if(Yd(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=kO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ur];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Bs(e),r)}else{const r=Bs(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function n0(e,t=!1){return Fd(e)||No(e)||!Ga(e)||(qd(e)>1&&Object.defineProperties(e,{set:{value:_f},add:{value:_f},clear:{value:_f},delete:{value:_f}}),Object.freeze(e),t&&Object.values(e).forEach(n=>n0(n,!0))),e}function _f(){Kr(2)}function Fd(e){return Object.isFrozen(e)}var I4={};function ko(e){const t=I4[e];return t||Kr(0,e),t}var Ic;function RO(){return Ic}function L4(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function IC(e,t){t&&(ko("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Fy(e){Ky(e),e.drafts_.forEach($4),e.drafts_=null}function Ky(e){e===Ic&&(Ic=e.parent_)}function LC(e){return Ic=L4(Ic,e)}function $4(e){const t=e[ur];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $C(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ur].modified_&&(Fy(t),Kr(4)),Ga(e)&&(e=cd(t,e),t.parent_||ud(t,e)),t.patches_&&ko("Patches").generateReplacementPatches_(n[ur].base_,e,t.patches_,t.inversePatches_)):e=cd(t,n,[]),Fy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NO?e:void 0}function cd(e,t,n){if(Fd(t))return t;const r=t[ur];if(!r)return ld(t,(i,s)=>BC(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ud(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),ld(s,(u,d)=>BC(e,r,i,u,d,n,l)),ud(e,i,!1),n&&e.patches_&&ko("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function BC(e,t,n,r,i,s,l){if(No(i)){const u=s&&t&&t.type_!==3&&!qy(t.assigned_,r)?s.concat(r):void 0,d=cd(e,i,u);if(MO(n,r,d),No(d))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Ga(i)&&!Fd(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;cd(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Kc(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&ud(e,i)}}function ud(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&n0(t,n)}function B4(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:RO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=r0;n&&(i=[r],s=Lc);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var r0={get(e,t){if(t===ur)return e;const n=So(e);if(!qy(n,t))return U4(e,n,t);const r=n[t];return e.finalized_||!Ga(r)?r:r===Hg(e.base_,t)?(qg(e),e.copy_[t]=Xy(r,e)):r},has(e,t){return t in So(e)},ownKeys(e){return Reflect.ownKeys(So(e))},set(e,t,n){const r=IO(So(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Hg(So(e),t),s=i?.[ur];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(R4(n,i)&&(n!==void 0||qy(e.base_,t)))return!0;qg(e),Vy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Hg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,qg(e),Vy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=So(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Kr(11)},getPrototypeOf(e){return Bs(e.base_)},setPrototypeOf(){Kr(12)}},Lc={};ld(r0,(e,t)=>{Lc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Lc.deleteProperty=function(e,t){return Lc.set.call(this,e,t,void 0)};Lc.set=function(e,t,n){return r0.set.call(this,e[0],t,n,e[0])};function Hg(e,t){const n=e[ur];return(n?So(n):e)[t]}function U4(e,t,n){const r=IO(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function IO(e,t){if(!(t in e))return;let n=Bs(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Bs(n)}}function Vy(e){e.modified_||(e.modified_=!0,e.parent_&&Vy(e.parent_))}function qg(e){e.copy_||(e.copy_=Yy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var z4=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(d=s,...h){return l.produce(d,p=>n.call(this,p,...h))}}typeof n!="function"&&Kr(6),r!==void 0&&typeof r!="function"&&Kr(7);let i;if(Ga(t)){const s=LC(this),l=Xy(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?Fy(s):Ky(s)}return IC(s,r),$C(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===NO&&(i=void 0),this.autoFreeze_&&n0(i,!0),r){const s=[],l=[];ko("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else Kr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ga(e)||Kr(8),No(e)&&(e=Ua(e));const t=LC(this),n=Xy(e,void 0);return n[ur].isManual_=!0,Ky(t),n}finishDraft(e,t){const n=e&&e[ur];(!n||!n.isManual_)&&Kr(9);const{scope_:r}=n;return IC(r,t),$C(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=ko("Patches").applyPatches_;return No(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Xy(e,t){const n=Kc(e)?ko("MapSet").proxyMap_(e,t):Yd(e)?ko("MapSet").proxySet_(e,t):B4(e,t);return(t?t.scope_:RO()).drafts_.push(n),n}function Ua(e){return No(e)||Kr(10,e),LO(e)}function LO(e){if(!Ga(e)||Fd(e))return e;const t=e[ur];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Yy(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Yy(e,!0);return ld(n,(r,i)=>{MO(n,r,LO(i))}),t&&(t.finalized_=!1),n}var G4=new z4,$O=G4.produce;function BO(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var H4=BO(),q4=BO,Y4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?sd:sd.apply(null,arguments)};function Rr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(lr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>jO(r)&&r.type===e,n}var UO=class Pc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Pc.prototype)}static get[Symbol.species](){return Pc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Pc(...t[0].concat(this)):new Pc(...t.concat(this))}};function UC(e){return Ga(e)?$O(e,()=>{}):e}function Tf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function F4(e){return typeof e=="boolean"}var K4=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new UO;return n&&(F4(n)?l.push(H4):l.push(q4(n.extraArgument))),l},V4="RTK_autoBatch",zC=e=>t=>{setTimeout(t,e)},X4=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:zC(10):e.type==="callback"?e.queueNotification:zC(e.timeout),h=()=>{l=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const m=()=>i&&p(),y=r.subscribe(m);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[V4],s=!i,s&&(l||(l=!0,d(h))),r.dispatch(p)}finally{i=!0}}})},W4=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new UO(e);return r&&i.push(X4(typeof r=="object"?r:void 0)),i};function Q4(e){const t=K4(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(t0(n))u=DO(n);else throw new Error(lr(1));let d;typeof r=="function"?d=r(t):d=t();let h=sd;i&&(h=Y4({trace:!1,...typeof i=="object"&&i}));const p=k4(...d),m=W4(p);let y=typeof l=="function"?l(m):m();const x=h(...y);return TO(u,s,x)}function zO(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(lr(28));if(u in t)throw new Error(lr(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Z4(e){return typeof e=="function"}function J4(e,t){let[n,r,i]=zO(t),s;if(Z4(e))s=()=>UC(e());else{const u=UC(e);s=()=>u}function l(u=s(),d){let h=[n[d.type],...r.filter(({matcher:p})=>p(d)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,m)=>{if(m)if(No(p)){const x=m(p,d);return x===void 0?p:x}else{if(Ga(p))return $O(p,y=>m(y,d));{const y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return l.getInitialState=s,l}var eL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tL=(e=21)=>{let t="",n=e;for(;n--;)t+=eL[Math.random()*64|0];return t},nL=Symbol.for("rtk-slice-createasyncthunk");function rL(e,t){return`${e}/${t}`}function aL({creators:e}={}){const t=e?.asyncThunk?.[nL];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(lr(11));const l=(typeof r.reducers=="function"?r.reducers(oL()):r.reducers)||{},u=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(_,N){const j=typeof _=="string"?_:_.type;if(!j)throw new Error(lr(12));if(j in d.sliceCaseReducersByType)throw new Error(lr(13));return d.sliceCaseReducersByType[j]=N,h},addMatcher(_,N){return d.sliceMatchers.push({matcher:_,reducer:N}),h},exposeAction(_,N){return d.actionCreators[_]=N,h},exposeCaseReducer(_,N){return d.sliceCaseReducersByName[_]=N,h}};u.forEach(_=>{const N=l[_],j={reducerName:_,type:rL(i,_),createNotation:typeof r.reducers=="function"};lL(N)?uL(j,N,h,t):sL(j,N,h)});function p(){const[_={},N=[],j=void 0]=typeof r.extraReducers=="function"?zO(r.extraReducers):[r.extraReducers],D={..._,...d.sliceCaseReducersByType};return J4(r.initialState,R=>{for(let k in D)R.addCase(k,D[k]);for(let k of d.sliceMatchers)R.addMatcher(k.matcher,k.reducer);for(let k of N)R.addMatcher(k.matcher,k.reducer);j&&R.addDefaultCase(j)})}const m=_=>_,y=new Map,x=new WeakMap;let S;function A(_,N){return S||(S=p()),S(_,N)}function P(){return S||(S=p()),S.getInitialState()}function E(_,N=!1){function j(R){let k=R[_];return typeof k>"u"&&N&&(k=Tf(x,j,P)),k}function D(R=m){const k=Tf(y,N,()=>new WeakMap);return Tf(k,R,()=>{const B={};for(const[J,Y]of Object.entries(r.selectors??{}))B[J]=iL(Y,R,()=>Tf(x,R,P),N);return B})}return{reducerPath:_,getSelectors:D,get selectors(){return D(j)},selectSlice:j}}const O={name:i,reducer:A,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:P,...E(s),injectInto(_,{reducerPath:N,...j}={}){const D=N??s;return _.inject({reducerPath:D,reducer:A},j),{...O,...E(D,!0)}}};return O}}function iL(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var dr=aL();function oL(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function sL({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!cL(r))throw new Error(lr(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Rr(e,l):Rr(e))}function lL(e){return e._reducerDefinitionType==="asyncThunk"}function cL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function uL({type:e,reducerName:t},n,r,i){if(!i)throw new Error(lr(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:d,settled:h,options:p}=n,m=i(e,s,p);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),d&&r.addCase(m.rejected,d),h&&r.addMatcher(m.settled,h),r.exposeCaseReducer(t,{fulfilled:l||Df,pending:u||Df,rejected:d||Df,settled:h||Df})}function Df(){}var fL="task",GO="listener",HO="completed",a0="cancelled",dL=`task-${a0}`,hL=`task-${HO}`,Wy=`${GO}-${a0}`,pL=`${GO}-${HO}`,Kd=class{constructor(e){this.code=e,this.message=`${fL} ${a0} (reason: ${e})`}name="TaskAbortError";message},i0=(e,t)=>{if(typeof e!="function")throw new TypeError(lr(32))},fd=()=>{},qO=(e,t=fd)=>(e.catch(t),e),YO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Oo=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},_o=e=>{if(e.aborted){const{reason:t}=e;throw new Kd(t)}};function FO(e,t){let n=fd;return new Promise((r,i)=>{const s=()=>i(new Kd(e.reason));if(e.aborted){s();return}n=YO(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=fd})}var mL=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Kd?"cancelled":"rejected",error:n}}finally{t?.()}},dd=e=>t=>qO(FO(e,t).then(n=>(_o(e),n))),KO=e=>{const t=dd(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Is}=Object,GC={},Vd="listenerMiddleware",gL=(e,t)=>{const n=r=>YO(e,()=>Oo(r,e.reason));return(r,i)=>{i0(r);const s=new AbortController;n(s);const l=mL(async()=>{_o(e),_o(s.signal);const u=await r({pause:dd(s.signal),delay:KO(s.signal),signal:s.signal});return _o(s.signal),u},()=>Oo(s,hL));return i?.autoJoin&&t.push(l.catch(fd)),{result:dd(e)(l),cancel(){Oo(s,dL)}}}},yL=(e,t)=>{const n=async(r,i)=>{_o(t);let s=()=>{};const u=[new Promise((d,h)=>{let p=e({predicate:r,effect:(m,y)=>{y.unsubscribe(),d([m,y.getState(),y.getOriginalState()])}});s=()=>{p(),h()}})];i!=null&&u.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await FO(t,Promise.race(u));return _o(t),d}finally{s()}};return(r,i)=>qO(n(r,i))},VO=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Rr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(lr(21));return i0(s),{predicate:i,type:t,effect:s}},XO=Is(e=>{const{type:t,predicate:n,effect:r}=VO(e);return{id:tL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(lr(22))}}},{withTypes:()=>XO}),HC=(e,t)=>{const{type:n,effect:r,predicate:i}=VO(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},Qy=e=>{e.pending.forEach(t=>{Oo(t,Wy)})},vL=e=>()=>{e.forEach(Qy),e.clear()},qC=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},WO=Is(Rr(`${Vd}/add`),{withTypes:()=>WO}),bL=Rr(`${Vd}/removeAll`),QO=Is(Rr(`${Vd}/remove`),{withTypes:()=>QO}),xL=(...e)=>{console.error(`${Vd}/error`,...e)},Vc=(e={})=>{const t=new Map,{extra:n,onError:r=xL}=e;i0(r);const i=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),m=>{p.unsubscribe(),m?.cancelActive&&Qy(p)}),s=p=>{const m=HC(t,p)??XO(p);return i(m)};Is(s,{withTypes:()=>s});const l=p=>{const m=HC(t,p);return m&&(m.unsubscribe(),p.cancelActive&&Qy(m)),!!m};Is(l,{withTypes:()=>l});const u=async(p,m,y,x)=>{const S=new AbortController,A=yL(s,S.signal),P=[];try{p.pending.add(S),await Promise.resolve(p.effect(m,Is({},y,{getOriginalState:x,condition:(E,O)=>A(E,O).then(Boolean),take:A,delay:KO(S.signal),pause:dd(S.signal),extra:n,signal:S.signal,fork:gL(S.signal,P),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((E,O,_)=>{E!==S&&(Oo(E,Wy),_.delete(E))})},cancel:()=>{Oo(S,Wy),p.pending.delete(S)},throwIfCancelled:()=>{_o(S.signal)}})))}catch(E){E instanceof Kd||qC(r,E,{raisedBy:"effect"})}finally{await Promise.all(P),Oo(S,pL),p.pending.delete(S)}},d=vL(t);return{middleware:p=>m=>y=>{if(!jO(y))return m(y);if(WO.match(y))return s(y.payload);if(bL.match(y)){d();return}if(QO.match(y))return l(y.payload);let x=p.getState();const S=()=>{if(x===GC)throw new Error(lr(23));return x};let A;try{if(A=m(y),t.size>0){const P=p.getState(),E=Array.from(t.values());for(const O of E){let _=!1;try{_=O.predicate(y,P,x)}catch(N){_=!1,qC(r,N,{raisedBy:"predicate"})}_&&u(O,y,p,S)}}}finally{x=GC}return A},startListening:s,stopListening:l,clearListeners:d}};function lr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var SL={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ZO=dr({name:"chartLayout",initialState:SL,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:AL,setLayout:CL,setChartSize:PL,setScale:EL}=ZO.actions,wL=ZO.reducer;function YC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(n),!0).forEach(function(r){OL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OL(e,t,n){return(t=_L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _L(e){var t=TL(e,"string");return typeof t=="symbol"?t:t+""}function TL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hd=Math.PI/180,DL=e=>e*180/Math.PI,Bt=(e,t,n,r)=>({x:e+Math.cos(-hd*r)*n,y:t+Math.sin(-hd*r)*n}),JO=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},jL=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},NL=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=jL({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,d=Math.acos(u);return r>s&&(d=2*Math.PI-d),{radius:l,angle:DL(d),angleInRadian:d}},kL=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},ML=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},RL=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=NL({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:d,endAngle:h}=kL(t),p=s,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?FC(FC({},t),{},{radius:i,angle:ML(p,t)}):null};function e_(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function KC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(n),!0).forEach(function(r){IL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IL(e,t,n){return(t=LL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LL(e){var t=$L(e,"string");return typeof t=="symbol"?t:t+""}function $L(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yt(e,t,n){return tn(e)||tn(t)?n:da(t)?jo(e,t,n):typeof t=="function"?t(e):n}var BL=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<u;d++){var h=d>0?n[d-1].coordinate:n[u-1].coordinate,p=n[d].coordinate,m=d>=u-1?n[0].coordinate:n[d+1].coordinate,y=void 0;if(en(p-h)!==en(m-p)){var x=[];if(en(m-p)===en(i[1]-i[0])){y=m;var S=p+i[1]-i[0];x[0]=Math.min(S,(S+h)/2),x[1]=Math.max(S,(S+h)/2)}else{y=h;var A=m+i[1]-i[0];x[0]=Math.min(p,(A+p)/2),x[1]=Math.max(p,(A+p)/2)}var P=[Math.min(p,(y+p)/2),Math.max(p,(y+p)/2)];if(e>P[0]&&e<=P[1]||e>=x[0]&&e<=x[1]){({index:l}=n[d]);break}}else{var E=Math.min(h,m),O=Math.max(h,m);if(e>(E+p)/2&&e<=(O+p)/2){({index:l}=n[d]);break}}}else if(t){for(var _=0;_<u;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:l}=t[_]);break}}return l},UL=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&_e(e[s]))return Nr(Nr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&_e(e[l]))return Nr(Nr({},e),{},{[l]:e[l]+(i||0)})}return e},Uo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",t_=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},n_=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:h,tickCount:p,ticks:m,niceTicks:y,axisType:x}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=x==="angleAxis"&&s&&s.length>=2?en(s[0]-s[1])*2*A:A,m||y){var P=(m||y||[]).map((E,O)=>{var _=r?r.indexOf(E):E;return{coordinate:l(_)+A,value:E,offset:A,index:O}});return P.filter(E=>!cr(E.coordinate))}return d&&h?h.map((E,O)=>({coordinate:l(E)+A,value:E,index:O,offset:A})):l.ticks&&p!=null?l.ticks(p).map((E,O)=>({coordinate:l(E)+A,value:E,offset:A,index:O})):l.domain().map((E,O)=>({coordinate:l(E)+A,value:r?r[E]:E,index:O,offset:A}))},VC=1e-4,zL=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-VC,s=Math.max(r[0],r[1])+VC,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},GL=(e,t)=>{if(!t||t.length!==2||!_e(t[0])||!_e(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!_e(e[0])||e[0]<n)&&(i[0]=n),(!_e(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},HL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=cr(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},qL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=cr(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},YL={sign:HL,expand:xI,none:$s,silhouette:SI,wiggle:AI,positive:qL},FL=(e,t,n)=>{var r=YL[n],i=bI().keys(t).value((s,l)=>+yt(s,l,0)).order(zy).offset(r);return i(e)};function KL(e){return e==null?void 0:String(e)}var XC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=yt(s,t.dataKey,t.scale.domain()[l]);return tn(u)?null:t.scale(u)-i/2+r},VL=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},XL=e=>{var t=e.flat(2).filter(_e);return[Math.min(...t),Math.max(...t)]},WL=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],QL=(e,t,n)=>{if(e!=null)return WL(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((d,h)=>{var p=e_(h,t,n),m=XL(p);return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},WC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,QC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,o0=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Hd(t,p=>p.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var d=i[l],h=i[l-1];s=Math.min((d.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function ZC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Nr(Nr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function Xd(e,t){if(e)return String(e);if(typeof t=="string")return t}function ZL(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?RL({x:e,y:t},r):null}var JL=(e,t,n,r)=>{var i=t.find(h=>h&&h.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Nr(Nr(Nr({},r),Bt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:d}=r;return Nr(Nr(Nr({},r),Bt(r.cx,r.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},e3=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Ka=e=>e.layout.width,Va=e=>e.layout.height,t3=e=>e.layout.scale,r_=e=>e.layout.margin,Wd=W(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Qd=W(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),a_="data-recharts-item-index",i_="data-recharts-item-data-key",Xc=60;function JC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(n),!0).forEach(function(r){n3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n3(e,t,n){return(t=r3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r3(e){var t=a3(e,"string");return typeof t=="symbol"?t:t+""}function a3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i3=e=>e.brush.height;function o3(e){var t=Qd(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Xc;return n+i}return n},0)}function s3(e){var t=Qd(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Xc;return n+i}return n},0)}function l3(e){var t=Wd(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function c3(e){var t=Wd(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Kt=W([Ka,Va,r_,i3,o3,s3,l3,c3,OO,w4],(e,t,n,r,i,s,l,u,d,h)=>{var p={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},y=jf(jf({},m),p),x=y.bottom;y.bottom+=r,y=UL(y,d,h);var S=e-y.left-y.right,A=t-y.top-y.bottom;return jf(jf({brushBottom:x},y),{},{width:Math.max(S,0),height:Math.max(A,0)})}),u3=W(Kt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),s0=W(Ka,Va,(e,t)=>({x:0,y:0,width:e,height:t})),f3=C.createContext(null),Lr=()=>C.useContext(f3)!=null,Zd=e=>e.brush,Jd=W([Zd,Kt,r_],(e,t,n)=>({height:e.height,x:_e(e.x)?e.x:t.left,y:_e(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:_e(e.width)?e.width:t.width})),l0=()=>{var e,t=Lr(),n=we(u3),r=we(Jd),i=(e=we(Zd))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},d3={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},o_=()=>{var e;return(e=we(Kt))!==null&&e!==void 0?e:d3},c0=()=>we(Ka),u0=()=>we(Va),h3=()=>we(e=>e.layout.margin),Qe=e=>e.layout.layoutType,f0=()=>we(Qe),p3={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},s_=dr({name:"legend",initialState:p3,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Ua(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:eP,setLegendSettings:m3,addLegendPayload:l_,removeLegendPayload:c_}=s_.actions,g3=s_.reducer,y3=["contextPayload"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(null,arguments)}function tP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Us(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(n),!0).forEach(function(r){d0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d0(e,t,n){return(t=v3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v3(e){var t=b3(e,"string");return typeof t=="symbol"?t:t+""}function b3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x3(e,t){if(e==null)return{};var n,r,i=S3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function A3(e){return e.value}function C3(e){var{contextPayload:t}=e,n=x3(e,y3),r=CO(t,e.payloadUniqBy,A3),i=Us(Us({},n),{},{payload:r});return C.isValidElement(e.content)?C.cloneElement(e.content,i):typeof e.content=="function"?C.createElement(e.content,i):C.createElement(Qv,i)}function P3(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:d}=t,h,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?h={left:((r||0)-s.width)/2}:h=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?p={top:((i||0)-s.height)/2}:p=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Us(Us({},h),p)}function E3(e){var t=Ct();return C.useEffect(()=>{t(m3(e))},[t,e]),null}function w3(e){var t=Ct();return C.useEffect(()=>(t(eP(e)),()=>{t(eP({width:0,height:0}))}),[t,e]),null}function O3(e){var t=T4(),n=HR(),r=h3(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[d,h]=_O([t]),p=c0(),m=u0();if(p==null||m==null)return null;var y=p-(r.left||0)-(r.right||0),x=eh.getWidthOrHeight(e.layout,s,i,y),S=u?l:Us(Us({position:"absolute",width:x?.width||i||"auto",height:x?.height||s||"auto"},P3(l,e,r,p,m,d)),l),A=u??n;if(A==null)return null;var P=C.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:h},C.createElement(E3,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),C.createElement(w3,{width:d.width,height:d.height}),C.createElement(C3,Zy({},e,x,{margin:r,chartWidth:p,chartHeight:m,contextPayload:t})));return W2.createPortal(P,A)}class eh extends C.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&_e(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return C.createElement(O3,this.props)}}d0(eh,"displayName","Legend");d0(eh,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jy.apply(null,arguments)}function nP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(n),!0).forEach(function(r){_3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _3(e,t,n){return(t=T3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T3(e){var t=D3(e,"string");return typeof t=="symbol"?t:t+""}function D3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j3(e){return Array.isArray(e)&&da(e[0])&&da(e[1])?e.join(" ~ "):e}var N3=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:h,label:p,labelFormatter:m,accessibilityLayer:y=!1}=e,x=()=>{if(s&&s.length){var j={padding:0,margin:0},D=(u?Hd(s,u):s).map((R,k)=>{if(R.type==="none")return null;var B=R.formatter||l||j3,{value:J,name:Y}=R,Z=J,ue=Y;if(B){var se=B(J,Y,R,k,s);if(Array.isArray(se))[Z,ue]=se;else if(se!=null)Z=se;else return null}var te=Yg({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},r);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:te},da(ue)?C.createElement("span",{className:"recharts-tooltip-item-name"},ue):null,da(ue)?C.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,C.createElement("span",{className:"recharts-tooltip-item-value"},Z),C.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:j},D)}return null},S=Yg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=Yg({margin:0},i),P=!tn(p),E=P?p:"",O=rt("recharts-default-tooltip",d),_=rt("recharts-tooltip-label",h);P&&m&&s!==void 0&&s!==null&&(E=m(p,s));var N=y?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",Jy({className:O,style:S},N),C.createElement("p",{className:_,style:A},C.isValidElement(E)?E:"".concat(E)),x())},mc="recharts-tooltip-wrapper",k3={visibility:"hidden"};function M3(e){var{coordinate:t,translateX:n,translateY:r}=e;return rt(mc,{["".concat(mc,"-right")]:_e(n)&&t&&_e(t.x)&&n>=t.x,["".concat(mc,"-left")]:_e(n)&&t&&_e(t.x)&&n<t.x,["".concat(mc,"-bottom")]:_e(r)&&t&&_e(t.y)&&r>=t.y,["".concat(mc,"-top")]:_e(r)&&t&&_e(t.y)&&r<t.y})}function rP(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:h}=e;if(s&&_e(s[r]))return s[r];var p=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?p:m;var y=d[r];if(y==null)return 0;if(l[r]){var x=p,S=y;return x<S?Math.max(m,y):Math.max(p,y)}if(h==null)return 0;var A=m+u,P=y+h;return A>P?Math.max(p,y):Math.max(m,y)}function R3(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function I3(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,h,p,m;return l.height>0&&l.width>0&&n?(p=rP({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),m=rP({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),h=R3({translateX:p,translateY:m,useTranslate3d:u})):h=k3,{cssProperties:h,cssClasses:M3({translateX:p,translateY:m,coordinate:n})}}function aP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(n),!0).forEach(function(r){ev(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ev(e,t,n){return(t=L3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L3(e){var t=$3(e,"string");return typeof t=="symbol"?t:t+""}function $3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class B3 extends C.PureComponent{constructor(){super(...arguments),ev(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ev(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:d,offset:h,position:p,reverseDirection:m,useTranslate3d:y,viewBox:x,wrapperStyle:S,lastBoundingBox:A,innerRef:P,hasPortalFromProps:E}=this.props,{cssClasses:O,cssProperties:_}=I3({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:y,viewBox:x}),N=E?{}:Nf(Nf({transition:d&&t?"transform ".concat(r,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),j=Nf(Nf({},N),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:j,ref:P},s)}}var U3=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qs={isSsr:U3()},u_=()=>we(e=>e.rootProps.accessibilityLayer);function fr(e){return Number.isFinite(e)}function zs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}function iP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(n),!0).forEach(function(r){z3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z3(e,t,n){return(t=G3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G3(e){var t=H3(e,"string");return typeof t=="symbol"?t:t+""}function H3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sP={curveBasisClosed:lI,curveBasisOpen:cI,curveBasis:sI,curveBumpX:KR,curveBumpY:VR,curveLinearClosed:uI,curveLinear:zd,curveMonotoneX:fI,curveMonotoneY:dI,curveNatural:hI,curveStep:pI,curveStepAfter:gI,curveStepBefore:mI},kf=e=>fr(e.x)&&fr(e.y),gc=e=>e.x,yc=e=>e.y,q3=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Yc(e));return(n==="curveMonotone"||n==="curveBump")&&t?sP["".concat(n).concat(t==="vertical"?"Y":"X")]:sP[n]||zd},Y3=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=q3(t,i),u=s?n.filter(kf):n,d;if(Array.isArray(r)){var h=s?r.filter(m=>kf(m)):r,p=u.map((m,y)=>oP(oP({},m),{},{base:h[y]}));return i==="vertical"?d=Ef().y(yc).x1(gc).x0(m=>m.base.x):d=Ef().x(gc).y1(yc).y0(m=>m.base.y),d.defined(kf).curve(l),d(p)}return i==="vertical"&&_e(r)?d=Ef().y(yc).x1(gc).x0(r):_e(r)?d=Ef().x(gc).y1(yc).y0(r):d=rO().x(gc).y(yc),d.defined(kf).curve(l),d(u)},f_=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?Y3(e):r;return C.createElement("path",tv({},Bo(e),kR(e),{className:rt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},F3=["x","y","top","left","width","height","className"];function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(null,arguments)}function lP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(n),!0).forEach(function(r){V3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V3(e,t,n){return(t=X3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X3(e){var t=W3(e,"string");return typeof t=="symbol"?t:t+""}function W3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q3(e,t){if(e==null)return{};var n,r,i=Z3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var J3=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),e$=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,d=Q3(e,F3),h=K3({x:t,y:n,top:r,left:i,width:s,height:l},d);return!_e(t)||!_e(n)||!_e(s)||!_e(l)||!_e(r)||!_e(i)?null:C.createElement("path",nv({},$t(h,!0),{className:rt("recharts-cross",u),d:J3(t,n,s,l,r,i)}))};function t$(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(r){r$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r$(e,t,n){return(t=a$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a$(e){var t=i$(e,"string");return typeof t=="symbol"?t:t+""}function i$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $r(e,t){var n=n$({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function o$(){}function uP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(n),!0).forEach(function(r){s$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s$(e,t,n){return(t=l$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l$(e){var t=c$(e,"string");return typeof t=="symbol"?t:t+""}function c$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u$=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),d_=(e,t,n)=>e.map(r=>"".concat(u$(r)," ").concat(t,"ms ").concat(n)).join(","),f$=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),$c=(e,t)=>Object.keys(t).reduce((n,r)=>fP(fP({},n),{},{[r]:e(r,t[r])}),{});function dP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(n),!0).forEach(function(r){d$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d$(e,t,n){return(t=h$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h$(e){var t=p$(e,"string");return typeof t=="symbol"?t:t+""}function p$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pd=(e,t,n)=>e+(t-e)*n,rv=e=>{var{from:t,to:n}=e;return t!==n},h_=(e,t,n)=>{var r=$c((i,s)=>{if(rv(s)){var[l,u]=e(s.from,s.to,s.velocity);return mn(mn({},s),{},{from:l,velocity:u})}return s},t);return n<1?$c((i,s)=>rv(s)?mn(mn({},s),{},{velocity:pd(s.velocity,r[i].velocity,n),from:pd(s.from,r[i].from,n)}):s,t):h_(e,r,n-1)};function m$(e,t,n,r,i,s){var l,u=r.reduce((y,x)=>mn(mn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>$c((y,x)=>x.from,u),h=()=>!Object.values(u).filter(rv).length,p=null,m=y=>{l||(l=y);var x=y-l,S=x/n.dt;u=h_(n,u,S),i(mn(mn(mn({},e),t),d())),l=y,h()||(p=s.setTimeout(m))};return()=>(p=s.setTimeout(m),()=>{p()})}function g$(e,t,n,r,i,s,l){var u=null,d=i.reduce((m,y)=>mn(mn({},m),{},{[y]:[e[y],t[y]]}),{}),h,p=m=>{h||(h=m);var y=(m-h)/r,x=$c((A,P)=>pd(...P,n(y)),d);if(s(mn(mn(mn({},e),t),x)),y<1)u=l.setTimeout(p);else{var S=$c((A,P)=>pd(...P,n(1)),d);s(mn(mn(mn({},e),t),S))}};return()=>(u=l.setTimeout(p),()=>{u()})}const y$=(e,t,n,r,i,s)=>{var l=f$(e,t);return n.isStepper===!0?m$(e,t,n,l,i,s):g$(e,t,n,r,l,i,s)};var md=1e-4,p_=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],m_=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),hP=(e,t)=>n=>{var r=p_(e,t);return m_(r,n)},v$=(e,t)=>n=>{var r=p_(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return m_(i,n)},pP=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,r,n,i]=d[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var h=hP(t,n),p=hP(r,i),m=v$(t,n),y=S=>S>1?1:S<0?0:S,x=S=>{for(var A=S>1?1:S,P=A,E=0;E<8;++E){var O=h(P)-A,_=m(P);if(Math.abs(O-A)<md||_<md)return p(P);P=y(P-O/_)}return p(P)};return x.isStepper=!1,x},b$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,d)=>{var h=-(l-u)*n,p=d*r,m=d+(h-p)*i/1e3,y=d*i/1e3+l;return Math.abs(y-u)<md&&Math.abs(m)<md?[u,0]:[y,m]};return s.isStepper=!0,s.dt=i,s},x$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return pP(e);case"spring":return b$();default:if(e.split("(")[0]==="cubic-bezier")return pP(e)}return typeof e=="function"?e:null};function S$(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...h]=u;if(typeof d=="number"){i=e.setTimeout(s.bind(null,h),d);return}s(d),i=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class A${setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function C$(){return S$(new A$)}var P$=C.createContext(C$);function E$(e,t){var n=C.useContext(P$);return C.useMemo(()=>t??n(e),[e,t,n])}var w$={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},mP={t:0},Fg={t:1};function th(e){var t=$r(e,w$),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:d,children:h}=t,p=E$(t.animationId,t.animationManager),[m,y]=C.useState(n?mP:Fg),x=C.useRef(null);return C.useEffect(()=>{n||y(Fg)},[n]),C.useEffect(()=>{if(!n||!r)return o$;var S=y$(mP,Fg,x$(s),i,y,p.getTimeoutController()),A=()=>{x.current=S()};return p.start([d,l,A,i,u]),()=>{p.stop(),x.current&&x.current(),u()}},[n,r,i,s,l,d,u,p]),h(m.t)}function nh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=C.useRef(Rc(t)),r=C.useRef(e);return r.current!==e&&(n.current=Rc(t),r.current=e),n.current}function gP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(n),!0).forEach(function(r){O$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O$(e,t,n){return(t=_$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _$(e){var t=T$(e,"string");return typeof t=="symbol"?t:t+""}function T$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gd(){return gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gd.apply(null,arguments)}var vP=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,h;if(s>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,y=4;m<y;m++)p[m]=i[m]>s?s:i[m];h="M".concat(e,",").concat(t+l*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+u*p[0],",").concat(t)),h+="L ".concat(e+n-u*p[1],",").concat(t),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+l*p[1])),h+="L ".concat(e+n,",").concat(t+r-l*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+n-u*p[2],",").concat(t+r)),h+="L ".concat(e+u*p[3],",").concat(t+r),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+r-l*p[3])),h+="Z"}else if(s>0&&i===+i&&i>0){var x=Math.min(s,i);h="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+r-l*x," Z")}else h="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},D$={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},g_=e=>{var t=$r(e,D$),n=C.useRef(null),[r,i]=C.useState(-1);C.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var se=n.current.getTotalLength();se&&i(se)}catch{}},[]);var{x:s,y:l,width:u,height:d,radius:h,className:p}=t,{animationEasing:m,animationDuration:y,animationBegin:x,isAnimationActive:S,isUpdateAnimationActive:A}=t,P=C.useRef(u),E=C.useRef(d),O=C.useRef(s),_=C.useRef(l),N=C.useMemo(()=>({x:s,y:l,width:u,height:d,radius:h}),[s,l,u,d,h]),j=nh(N,"rectangle-");if(s!==+s||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var D=rt("recharts-rectangle",p);if(!A)return C.createElement("path",gd({},$t(t,!0),{className:D,d:vP(s,l,u,d,h)}));var R=P.current,k=E.current,B=O.current,J=_.current,Y="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),ue=d_(["strokeDasharray"],y,typeof m=="string"?m:void 0);return C.createElement(th,{animationId:j,key:j,canBegin:r>0,duration:y,easing:m,isActive:A,begin:x},se=>{var te=gn(R,u,se),$=gn(k,d,se),ee=gn(B,s,se),pe=gn(J,l,se);n.current&&(P.current=te,E.current=$,O.current=ee,_.current=pe);var he;return S?se>0?he={transition:ue,strokeDasharray:Z}:he={strokeDasharray:Y}:he={strokeDasharray:Z},C.createElement("path",gd({},$t(t,!0),{className:D,d:vP(ee,pe,te,$,h),ref:n,style:yP(yP({},he),t.style)}))})};function y_(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=Bt(t,n,r,i),u=Bt(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},av.apply(null,arguments)}var j$=(e,t)=>{var n=en(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Mf=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,h=u*(l?1:-1)+r,p=Math.asin(u/h)/hd,m=d?i:i+s*p,y=Bt(t,n,h,m),x=Bt(t,n,r,m),S=d?i-s*p:i,A=Bt(t,n,h*Math.cos(p*hd),S);return{center:y,circleTangency:x,lineTangency:A,theta:p}},v_=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=j$(s,l),d=s+u,h=Bt(t,n,i,s),p=Bt(t,n,i,d),m="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var y=Bt(t,n,r,s),x=Bt(t,n,r,d);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},N$=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}=e,p=en(h-d),{circleTangency:m,lineTangency:y,theta:x}=Mf({cx:t,cy:n,radius:i,angle:d,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:P}=Mf({cx:t,cy:n,radius:i,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:u}),E=u?Math.abs(d-h):Math.abs(d-h)-x-P;if(E<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):v_({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:h});var O="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:_,lineTangency:N,theta:j}=Mf({cx:t,cy:n,radius:r,angle:d,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:R,theta:k}=Mf({cx:t,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),B=u?Math.abs(d-h):Math.abs(d-h)-j-k;if(B<0&&s===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(B>180),",").concat(+(p>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(N.x,",").concat(N.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},k$={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},b_=e=>{var t=$r(e,k$),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:p,className:m}=t;if(s<i||h===p)return null;var y=rt("recharts-sector",m),x=s-i,S=_n(l,x,0,!0),A;return S>0&&Math.abs(h-p)<360?A=N$({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:p}):A=v_({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:h,endAngle:p}),C.createElement("path",av({},$t(t,!0),{className:y,d:A}))};function M$(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:h,outerRadius:p,angle:m}=t,y=Bt(u,d,h,m),x=Bt(u,d,p,m);r=y.x,i=y.y,s=x.x,l=x.y}else return y_(t);return[{x:r,y:i},{x:s,y:l}]}var Kg={},Vg={},Xg={},bP;function R$(){return bP||(bP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EO();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(Xg)),Xg}var xP;function I$(){return xP||(xP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R$();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(Vg)),Vg}var SP;function L$(){return SP||(SP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wO(),n=I$();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),d=new Array(u);for(let h=0;h<u;h++)d[h]=i,i+=l;return d}e.range=r})(Kg)),Kg}var Wg,AP;function $$(){return AP||(AP=1,Wg=L$().range),Wg}var B$=$$();const x_=Xr(B$);function Ni(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U$(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function h0(e){let t,n,r;e.length!==2?(t=Ni,n=(u,d)=>Ni(e(u),d),r=(u,d)=>e(u)-d):(t=e===Ni||e===U$?e:z$,n=e,r=e);function i(u,d,h=0,p=u.length){if(h<p){if(t(d,d)!==0)return p;do{const m=h+p>>>1;n(u[m],d)<0?h=m+1:p=m}while(h<p)}return h}function s(u,d,h=0,p=u.length){if(h<p){if(t(d,d)!==0)return p;do{const m=h+p>>>1;n(u[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function l(u,d,h=0,p=u.length){const m=i(u,d,h,p-1);return m>h&&r(u[m-1],d)>-r(u[m],d)?m-1:m}return{left:i,center:l,right:s}}function z$(){return 0}function S_(e){return e===null?NaN:+e}function*G$(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const H$=h0(Ni),Wc=H$.right;h0(S_).center;class CP extends Map{constructor(t,n=F$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(PP(this,t))}has(t){return super.has(PP(this,t))}set(t,n){return super.set(q$(this,t),n)}delete(t){return super.delete(Y$(this,t))}}function PP({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function q$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Y$({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function F$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function K$(e=Ni){if(e===Ni)return A_;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function A_(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const V$=Math.sqrt(50),X$=Math.sqrt(10),W$=Math.sqrt(2);function yd(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=V$?10:s>=X$?5:s>=W$?2:1;let u,d,h;return i<0?(h=Math.pow(10,-i)/l,u=Math.round(e*h),d=Math.round(t*h),u/h<e&&++u,d/h>t&&--d,h=-h):(h=Math.pow(10,i)*l,u=Math.round(e/h),d=Math.round(t/h),u*h<e&&++u,d*h>t&&--d),d<u&&.5<=n&&n<2?yd(e,t,n*2):[u,d,h]}function iv(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?yd(t,e,n):yd(e,t,n);if(!(s>=i))return[];const u=s-i+1,d=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)d[h]=(s-h)/-l;else for(let h=0;h<u;++h)d[h]=(s-h)*l;else if(l<0)for(let h=0;h<u;++h)d[h]=(i+h)/-l;else for(let h=0;h<u;++h)d[h]=(i+h)*l;return d}function ov(e,t,n){return t=+t,e=+e,n=+n,yd(e,t,n)[2]}function sv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ov(t,e,n):ov(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function EP(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function wP(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function C_(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?A_:K$(i);r>n;){if(r-n>600){const d=r-n+1,h=t-n+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),x=Math.max(n,Math.floor(t-h*m/d+y)),S=Math.min(r,Math.floor(t+(d-h)*m/d+y));C_(e,t,x,S,i)}const s=e[t];let l=n,u=r;for(vc(e,n,t),i(e[r],s)>0&&vc(e,n,r);l<u;){for(vc(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?vc(e,n,u):(++u,vc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function vc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Q$(e,t,n){if(e=Float64Array.from(G$(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return wP(e);if(t>=1)return EP(e);var r,i=(r-1)*t,s=Math.floor(i),l=EP(C_(e,s).subarray(0,s+1)),u=wP(e.subarray(s+1));return l+(u-l)*(i-s)}}function Z$(e,t,n=S_){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function J$(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Br(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Xa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const lv=Symbol("implicit");function p0(){var e=new CP,t=[],n=[],r=lv;function i(s){let l=e.get(s);if(l===void 0){if(r!==lv)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new CP;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return p0(t,n).unknown(r)},Br.apply(i,arguments),i}function m0(){var e=p0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,d=0,h=0,p=.5;delete e.unknown;function m(){var y=t().length,x=i<r,S=x?i:r,A=x?r:i;s=(A-S)/Math.max(1,y-d+h*2),u&&(s=Math.floor(s)),S+=(A-S-s*(y-d))*p,l=s*(1-d),u&&(S=Math.round(S),l=Math.round(l));var P=J$(y).map(function(E){return S+s*E});return n(x?P.reverse():P)}return e.domain=function(y){return arguments.length?(t(y),m()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(u=!!y,m()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},e.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},e.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},e.copy=function(){return m0(t(),[r,i]).round(u).paddingInner(d).paddingOuter(h).align(p)},Br.apply(m(),arguments)}function P_(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return P_(t())},e}function e5(){return P_(m0.apply(null,arguments).paddingInner(1))}function g0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function E_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qc(){}var Bc=.7,vd=1/Bc,Ls="\\s*([+-]?\\d+)\\s*",Uc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t5=/^#([0-9a-f]{3,8})$/,n5=new RegExp(`^rgb\\(${Ls},${Ls},${Ls}\\)$`),r5=new RegExp(`^rgb\\(${fa},${fa},${fa}\\)$`),a5=new RegExp(`^rgba\\(${Ls},${Ls},${Ls},${Uc}\\)$`),i5=new RegExp(`^rgba\\(${fa},${fa},${fa},${Uc}\\)$`),o5=new RegExp(`^hsl\\(${Uc},${fa},${fa}\\)$`),s5=new RegExp(`^hsla\\(${Uc},${fa},${fa},${Uc}\\)$`),OP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};g0(Qc,zc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_P,formatHex:_P,formatHex8:l5,formatHsl:c5,formatRgb:TP,toString:TP});function _P(){return this.rgb().formatHex()}function l5(){return this.rgb().formatHex8()}function c5(){return w_(this).formatHsl()}function TP(){return this.rgb().formatRgb()}function zc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=t5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?DP(t):n===3?new Vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Rf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Rf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=n5.exec(e))?new Vn(t[1],t[2],t[3],1):(t=r5.exec(e))?new Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=a5.exec(e))?Rf(t[1],t[2],t[3],t[4]):(t=i5.exec(e))?Rf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o5.exec(e))?kP(t[1],t[2]/100,t[3]/100,1):(t=s5.exec(e))?kP(t[1],t[2]/100,t[3]/100,t[4]):OP.hasOwnProperty(e)?DP(OP[e]):e==="transparent"?new Vn(NaN,NaN,NaN,0):null}function DP(e){return new Vn(e>>16&255,e>>8&255,e&255,1)}function Rf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Vn(e,t,n,r)}function u5(e){return e instanceof Qc||(e=zc(e)),e?(e=e.rgb(),new Vn(e.r,e.g,e.b,e.opacity)):new Vn}function cv(e,t,n,r){return arguments.length===1?u5(e):new Vn(e,t,n,r??1)}function Vn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}g0(Vn,cv,E_(Qc,{brighter(e){return e=e==null?vd:Math.pow(vd,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bc:Math.pow(Bc,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vn(To(this.r),To(this.g),To(this.b),bd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jP,formatHex:jP,formatHex8:f5,formatRgb:NP,toString:NP}));function jP(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}`}function f5(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}${Po((isNaN(this.opacity)?1:this.opacity)*255)}`}function NP(){const e=bd(this.opacity);return`${e===1?"rgb(":"rgba("}${To(this.r)}, ${To(this.g)}, ${To(this.b)}${e===1?")":`, ${e})`}`}function bd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function To(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Po(e){return e=To(e),(e<16?"0":"")+e.toString(16)}function kP(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vr(e,t,n,r)}function w_(e){if(e instanceof Vr)return new Vr(e.h,e.s,e.l,e.opacity);if(e instanceof Qc||(e=zc(e)),!e)return new Vr;if(e instanceof Vr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,d=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?s+i:2-s-i,l*=60):u=d>0&&d<1?0:l,new Vr(l,u,d,e.opacity)}function d5(e,t,n,r){return arguments.length===1?w_(e):new Vr(e,t,n,r??1)}function Vr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}g0(Vr,d5,E_(Qc,{brighter(e){return e=e==null?vd:Math.pow(vd,e),new Vr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bc:Math.pow(Bc,e),new Vr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Vn(Qg(e>=240?e-240:e+120,i,r),Qg(e,i,r),Qg(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Vr(MP(this.h),If(this.s),If(this.l),bd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bd(this.opacity);return`${e===1?"hsl(":"hsla("}${MP(this.h)}, ${If(this.s)*100}%, ${If(this.l)*100}%${e===1?")":`, ${e})`}`}}));function MP(e){return e=(e||0)%360,e<0?e+360:e}function If(e){return Math.max(0,Math.min(1,e||0))}function Qg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const y0=e=>()=>e;function h5(e,t){return function(n){return e+n*t}}function p5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function m5(e){return(e=+e)==1?O_:function(t,n){return n-t?p5(t,n,e):y0(isNaN(t)?n:t)}}function O_(e,t){var n=t-e;return n?h5(e,n):y0(isNaN(e)?t:e)}const RP=(function e(t){var n=m5(t);function r(i,s){var l=n((i=cv(i)).r,(s=cv(s)).r),u=n(i.g,s.g),d=n(i.b,s.b),h=O_(i.opacity,s.opacity);return function(p){return i.r=l(p),i.g=u(p),i.b=d(p),i.opacity=h(p),i+""}}return r.gamma=e,r})(1);function g5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function y5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function v5(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Zs(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function b5(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function xd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function x5(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Zs(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var uv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zg=new RegExp(uv.source,"g");function S5(e){return function(){return e}}function A5(e){return function(t){return e(t)+""}}function C5(e,t){var n=uv.lastIndex=Zg.lastIndex=0,r,i,s,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=uv.exec(e))&&(i=Zg.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,d.push({i:l,x:xd(r,i)})),n=Zg.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?d[0]?A5(d[0].x):S5(t):(t=d.length,function(h){for(var p=0,m;p<t;++p)u[(m=d[p]).i]=m.x(h);return u.join("")})}function Zs(e,t){var n=typeof t,r;return t==null||n==="boolean"?y0(t):(n==="number"?xd:n==="string"?(r=zc(t))?(t=r,RP):C5:t instanceof zc?RP:t instanceof Date?b5:y5(t)?g5:Array.isArray(t)?v5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?x5:xd)(e,t)}function v0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function P5(e,t){t===void 0&&(t=e,e=Zs);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function E5(e){return function(){return e}}function Sd(e){return+e}var IP=[0,1];function In(e){return e}function fv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:E5(isNaN(t)?NaN:.5)}function w5(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function O5(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=fv(i,r),s=n(l,s)):(r=fv(r,i),s=n(s,l)),function(u){return s(r(u))}}function _5(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=fv(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var d=Wc(e,u,1,r)-1;return s[d](i[d](u))}}function Zc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rh(){var e=IP,t=IP,n=Zs,r,i,s,l=In,u,d,h;function p(){var y=Math.min(e.length,t.length);return l!==In&&(l=w5(e[0],e[y-1])),u=y>2?_5:O5,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?s:(d||(d=u(e.map(r),t,n)))(r(l(y)))}return m.invert=function(y){return l(i((h||(h=u(t,e.map(r),xd)))(y)))},m.domain=function(y){return arguments.length?(e=Array.from(y,Sd),p()):e.slice()},m.range=function(y){return arguments.length?(t=Array.from(y),p()):t.slice()},m.rangeRound=function(y){return t=Array.from(y),n=v0,p()},m.clamp=function(y){return arguments.length?(l=y?!0:In,p()):l!==In},m.interpolate=function(y){return arguments.length?(n=y,p()):n},m.unknown=function(y){return arguments.length?(s=y,m):s},function(y,x){return r=y,i=x,p()}}function b0(){return rh()(In,In)}function T5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ad(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Gs(e){return e=Ad(Math.abs(e)),e?e[1]:NaN}function D5(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],d=0;i>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),s.push(n.substring(i-=u,i+u)),!((d+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function j5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var N5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gc(e){if(!(t=N5.exec(e)))throw new Error("invalid format: "+e);var t;return new x0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Gc.prototype=x0.prototype;function x0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}x0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var __;function M5(e,t){var n=Ad(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(__=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Ad(e,Math.max(0,t+s-1))[0]}function LP(e,t){var n=Ad(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $P={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:T5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>LP(e*100,t),r:LP,s:M5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function BP(e){return e}var UP=Array.prototype.map,zP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function R5(e){var t=e.grouping===void 0||e.thousands===void 0?BP:D5(UP.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?BP:j5(UP.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(m){m=Gc(m);var y=m.fill,x=m.align,S=m.sign,A=m.symbol,P=m.zero,E=m.width,O=m.comma,_=m.precision,N=m.trim,j=m.type;j==="n"?(O=!0,j="g"):$P[j]||(_===void 0&&(_=12),N=!0,j="g"),(P||y==="0"&&x==="=")&&(P=!0,y="0",x="=");var D=A==="$"?n:A==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",R=A==="$"?r:/[%p]/.test(j)?l:"",k=$P[j],B=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function J(Y){var Z=D,ue=R,se,te,$;if(j==="c")ue=k(Y)+ue,Y="";else{Y=+Y;var ee=Y<0||1/Y<0;if(Y=isNaN(Y)?d:k(Math.abs(Y),_),N&&(Y=k5(Y)),ee&&+Y==0&&S!=="+"&&(ee=!1),Z=(ee?S==="("?S:u:S==="-"||S==="("?"":S)+Z,ue=(j==="s"?zP[8+__/3]:"")+ue+(ee&&S==="("?")":""),B){for(se=-1,te=Y.length;++se<te;)if($=Y.charCodeAt(se),48>$||$>57){ue=($===46?i+Y.slice(se+1):Y.slice(se))+ue,Y=Y.slice(0,se);break}}}O&&!P&&(Y=t(Y,1/0));var pe=Z.length+Y.length+ue.length,he=pe<E?new Array(E-pe+1).join(y):"";switch(O&&P&&(Y=t(he+Y,he.length?E-ue.length:1/0),he=""),x){case"<":Y=Z+Y+ue+he;break;case"=":Y=Z+he+Y+ue;break;case"^":Y=he.slice(0,pe=he.length>>1)+Z+Y+ue+he.slice(pe);break;default:Y=he+Z+Y+ue;break}return s(Y)}return J.toString=function(){return m+""},J}function p(m,y){var x=h((m=Gc(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(Gs(y)/3)))*3,A=Math.pow(10,-S),P=zP[8+S/3];return function(E){return x(A*E)+P}}return{format:h,formatPrefix:p}}var Lf,S0,T_;I5({thousands:",",grouping:[3],currency:["$",""]});function I5(e){return Lf=R5(e),S0=Lf.format,T_=Lf.formatPrefix,Lf}function L5(e){return Math.max(0,-Gs(Math.abs(e)))}function $5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gs(t)/3)))*3-Gs(Math.abs(e)))}function B5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gs(t)-Gs(e))+1}function D_(e,t,n,r){var i=sv(e,t,n),s;switch(r=Gc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=$5(i,l))&&(r.precision=s),T_(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=B5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=L5(i))&&(r.precision=s-(r.type==="%")*2);break}}return S0(r)}function Li(e){var t=e.domain;return e.ticks=function(n){var r=t();return iv(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return D_(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],d,h,p=10;for(u<l&&(h=l,l=u,u=h,h=i,i=s,s=h);p-- >0;){if(h=ov(l,u,n),h===d)return r[i]=l,r[s]=u,t(r);if(h>0)l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h;else if(h<0)l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h;else break;d=h}return e},e}function j_(){var e=b0();return e.copy=function(){return Zc(e,j_())},Br.apply(e,arguments),Li(e)}function N_(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Sd),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return N_(e).unknown(t)},e=arguments.length?Array.from(e,Sd):[0,1],Li(n)}function k_(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function GP(e){return Math.log(e)}function HP(e){return Math.exp(e)}function U5(e){return-Math.log(-e)}function z5(e){return-Math.exp(-e)}function G5(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H5(e){return e===10?G5:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q5(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function qP(e){return(t,n)=>-e(-t,n)}function A0(e){const t=e(GP,HP),n=t.domain;let r=10,i,s;function l(){return i=q5(r),s=H5(r),n()[0]<0?(i=qP(i),s=qP(s),e(U5,z5)):e(GP,HP),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const d=n();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=i(h),x=i(p),S,A;const P=u==null?10:+u;let E=[];if(!(r%1)&&x-y<P){if(y=Math.floor(y),x=Math.ceil(x),h>0){for(;y<=x;++y)for(S=1;S<r;++S)if(A=y<0?S/s(-y):S*s(y),!(A<h)){if(A>p)break;E.push(A)}}else for(;y<=x;++y)for(S=r-1;S>=1;--S)if(A=y>0?S/s(-y):S*s(y),!(A<h)){if(A>p)break;E.push(A)}E.length*2<P&&(E=iv(h,p,P))}else E=iv(y,x,Math.min(x-y,P)).map(s);return m?E.reverse():E},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=Gc(d)).precision==null&&(d.trim=!0),d=S0(d)),u===1/0)return d;const h=Math.max(1,r*u/t.ticks().length);return p=>{let m=p/s(Math.round(i(p)));return m*r<r-.5&&(m*=r),m<=h?d(p):""}},t.nice=()=>n(k_(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function M_(){const e=A0(rh()).domain([1,10]);return e.copy=()=>Zc(e,M_()).base(e.base()),Br.apply(e,arguments),e}function YP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function FP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function C0(e){var t=1,n=e(YP(t),FP(t));return n.constant=function(r){return arguments.length?e(YP(t=+r),FP(t)):t},Li(n)}function R_(){var e=C0(rh());return e.copy=function(){return Zc(e,R_()).constant(e.constant())},Br.apply(e,arguments)}function KP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Y5(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function F5(e){return e<0?-e*e:e*e}function P0(e){var t=e(In,In),n=1;function r(){return n===1?e(In,In):n===.5?e(Y5,F5):e(KP(n),KP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Li(t)}function E0(){var e=P0(rh());return e.copy=function(){return Zc(e,E0()).exponent(e.exponent())},Br.apply(e,arguments),e}function K5(){return E0.apply(null,arguments).exponent(.5)}function VP(e){return Math.sign(e)*e*e}function V5(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function I_(){var e=b0(),t=[0,1],n=!1,r;function i(s){var l=V5(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(VP(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Sd)).map(VP)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return I_(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Br.apply(i,arguments),Li(i)}function L_(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=Z$(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[Wc(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ni),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return L_().domain(e).range(t).unknown(r)},Br.apply(s,arguments)}function $_(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(d){return d!=null&&d<=d?i[Wc(r,d,0,n)]:s}function u(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,u()):i.slice()},l.invertExtent=function(d){var h=i.indexOf(d);return h<0?[NaN,NaN]:h<1?[e,r[0]]:h>=n?[r[n-1],t]:[r[h-1],r[h]]},l.unknown=function(d){return arguments.length&&(s=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return $_().domain([e,t]).range(i).unknown(s)},Br.apply(Li(l),arguments)}function B_(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Wc(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return B_().domain(e).range(t).unknown(n)},Br.apply(i,arguments)}const Jg=new Date,ey=new Date;function Vt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const d=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return d;let h;do d.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<l);return d},i.filter=s=>Vt(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(Jg.setTime(+s),ey.setTime(+l),e(Jg),e(ey),Math.floor(n(Jg,ey))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const Cd=Vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Cd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Cd);Cd.range;const $a=1e3,kr=$a*60,Ba=kr*60,Ha=Ba*24,w0=Ha*7,XP=Ha*30,ty=Ha*365,Eo=Vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getUTCSeconds());Eo.range;const O0=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$a)},(e,t)=>{e.setTime(+e+t*kr)},(e,t)=>(t-e)/kr,e=>e.getMinutes());O0.range;const _0=Vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*kr)},(e,t)=>(t-e)/kr,e=>e.getUTCMinutes());_0.range;const T0=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$a-e.getMinutes()*kr)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getHours());T0.range;const D0=Vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCHours());D0.range;const Jc=Vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kr)/Ha,e=>e.getDate()-1);Jc.range;const ah=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ha,e=>e.getUTCDate()-1);ah.range;const U_=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ha,e=>Math.floor(e/Ha));U_.range;function zo(e){return Vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*kr)/w0)}const ih=zo(0),Pd=zo(1),X5=zo(2),W5=zo(3),Hs=zo(4),Q5=zo(5),Z5=zo(6);ih.range;Pd.range;X5.range;W5.range;Hs.range;Q5.range;Z5.range;function Go(e){return Vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/w0)}const oh=Go(0),Ed=Go(1),J5=Go(2),eB=Go(3),qs=Go(4),tB=Go(5),nB=Go(6);oh.range;Ed.range;J5.range;eB.range;qs.range;tB.range;nB.range;const j0=Vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());j0.range;const N0=Vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());N0.range;const qa=Vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qa.range;const Ya=Vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ya.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ya.range;function z_(e,t,n,r,i,s){const l=[[Eo,1,$a],[Eo,5,5*$a],[Eo,15,15*$a],[Eo,30,30*$a],[s,1,kr],[s,5,5*kr],[s,15,15*kr],[s,30,30*kr],[i,1,Ba],[i,3,3*Ba],[i,6,6*Ba],[i,12,12*Ba],[r,1,Ha],[r,2,2*Ha],[n,1,w0],[t,1,XP],[t,3,3*XP],[e,1,ty]];function u(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const x=m&&typeof m.range=="function"?m:d(h,p,m),S=x?x.range(h,+p+1):[];return y?S.reverse():S}function d(h,p,m){const y=Math.abs(p-h)/m,x=h0(([,,P])=>P).right(l,y);if(x===l.length)return e.every(sv(h/ty,p/ty,m));if(x===0)return Cd.every(Math.max(sv(h,p,m),1));const[S,A]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return S.every(A)}return[u,d]}const[rB,aB]=z_(Ya,N0,oh,U_,D0,_0),[iB,oB]=z_(qa,j0,ih,Jc,T0,O0);function ny(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ry(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function bc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function sB(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,h=xc(i),p=Sc(i),m=xc(s),y=Sc(s),x=xc(l),S=Sc(l),A=xc(u),P=Sc(u),E=xc(d),O=Sc(d),_={a:ee,A:pe,b:he,B:I,c:null,d:tE,e:tE,f:DB,g:UB,G:GB,H:OB,I:_B,j:TB,L:G_,m:jB,M:NB,p:V,q,Q:aE,s:iE,S:kB,u:MB,U:RB,V:IB,w:LB,W:$B,x:null,X:null,y:BB,Y:zB,Z:HB,"%":rE},N={a:le,A:ve,b:z,B:re,c:null,d:nE,e:nE,f:KB,g:r8,G:i8,H:qB,I:YB,j:FB,L:q_,m:VB,M:XB,p:be,q:me,Q:aE,s:iE,S:WB,u:QB,U:ZB,V:JB,w:e8,W:t8,x:null,X:null,y:n8,Y:a8,Z:o8,"%":rE},j={a:J,A:Y,b:Z,B:ue,c:se,d:JP,e:JP,f:CB,g:ZP,G:QP,H:eE,I:eE,j:bB,L:AB,m:vB,M:xB,p:B,q:yB,Q:EB,s:wB,S:SB,u:dB,U:hB,V:pB,w:fB,W:mB,x:te,X:$,y:ZP,Y:QP,Z:gB,"%":PB};_.x=D(n,_),_.X=D(r,_),_.c=D(t,_),N.x=D(n,N),N.X=D(r,N),N.c=D(t,N);function D(ae,fe){return function(ye){var de=[],Je=-1,He=0,jt=ae.length,je,Re,Qr;for(ye instanceof Date||(ye=new Date(+ye));++Je<jt;)ae.charCodeAt(Je)===37&&(de.push(ae.slice(He,Je)),(Re=WP[je=ae.charAt(++Je)])!=null?je=ae.charAt(++Je):Re=je==="e"?" ":"0",(Qr=fe[je])&&(je=Qr(ye,Re)),de.push(je),He=Je+1);return de.push(ae.slice(He,Je)),de.join("")}}function R(ae,fe){return function(ye){var de=bc(1900,void 0,1),Je=k(de,ae,ye+="",0),He,jt;if(Je!=ye.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(fe&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(He=ry(bc(de.y,0,1)),jt=He.getUTCDay(),He=jt>4||jt===0?Ed.ceil(He):Ed(He),He=ah.offset(He,(de.V-1)*7),de.y=He.getUTCFullYear(),de.m=He.getUTCMonth(),de.d=He.getUTCDate()+(de.w+6)%7):(He=ny(bc(de.y,0,1)),jt=He.getDay(),He=jt>4||jt===0?Pd.ceil(He):Pd(He),He=Jc.offset(He,(de.V-1)*7),de.y=He.getFullYear(),de.m=He.getMonth(),de.d=He.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),jt="Z"in de?ry(bc(de.y,0,1)).getUTCDay():ny(bc(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(jt+5)%7:de.w+de.U*7-(jt+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,ry(de)):ny(de)}}function k(ae,fe,ye,de){for(var Je=0,He=fe.length,jt=ye.length,je,Re;Je<He;){if(de>=jt)return-1;if(je=fe.charCodeAt(Je++),je===37){if(je=fe.charAt(Je++),Re=j[je in WP?fe.charAt(Je++):je],!Re||(de=Re(ae,ye,de))<0)return-1}else if(je!=ye.charCodeAt(de++))return-1}return de}function B(ae,fe,ye){var de=h.exec(fe.slice(ye));return de?(ae.p=p.get(de[0].toLowerCase()),ye+de[0].length):-1}function J(ae,fe,ye){var de=x.exec(fe.slice(ye));return de?(ae.w=S.get(de[0].toLowerCase()),ye+de[0].length):-1}function Y(ae,fe,ye){var de=m.exec(fe.slice(ye));return de?(ae.w=y.get(de[0].toLowerCase()),ye+de[0].length):-1}function Z(ae,fe,ye){var de=E.exec(fe.slice(ye));return de?(ae.m=O.get(de[0].toLowerCase()),ye+de[0].length):-1}function ue(ae,fe,ye){var de=A.exec(fe.slice(ye));return de?(ae.m=P.get(de[0].toLowerCase()),ye+de[0].length):-1}function se(ae,fe,ye){return k(ae,t,fe,ye)}function te(ae,fe,ye){return k(ae,n,fe,ye)}function $(ae,fe,ye){return k(ae,r,fe,ye)}function ee(ae){return l[ae.getDay()]}function pe(ae){return s[ae.getDay()]}function he(ae){return d[ae.getMonth()]}function I(ae){return u[ae.getMonth()]}function V(ae){return i[+(ae.getHours()>=12)]}function q(ae){return 1+~~(ae.getMonth()/3)}function le(ae){return l[ae.getUTCDay()]}function ve(ae){return s[ae.getUTCDay()]}function z(ae){return d[ae.getUTCMonth()]}function re(ae){return u[ae.getUTCMonth()]}function be(ae){return i[+(ae.getUTCHours()>=12)]}function me(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var fe=D(ae+="",_);return fe.toString=function(){return ae},fe},parse:function(ae){var fe=R(ae+="",!1);return fe.toString=function(){return ae},fe},utcFormat:function(ae){var fe=D(ae+="",N);return fe.toString=function(){return ae},fe},utcParse:function(ae){var fe=R(ae+="",!0);return fe.toString=function(){return ae},fe}}}var WP={"-":"",_:" ",0:"0"},nn=/^\s*\d+/,lB=/^%/,cB=/[\\^$*+?|[\]().{}]/g;function We(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function uB(e){return e.replace(cB,"\\$&")}function xc(e){return new RegExp("^(?:"+e.map(uB).join("|")+")","i")}function Sc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fB(e,t,n){var r=nn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function dB(e,t,n){var r=nn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function hB(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function pB(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function mB(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function QP(e,t,n){var r=nn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ZP(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gB(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yB(e,t,n){var r=nn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function vB(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function JP(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function bB(e,t,n){var r=nn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function eE(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function xB(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function SB(e,t,n){var r=nn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function AB(e,t,n){var r=nn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function CB(e,t,n){var r=nn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PB(e,t,n){var r=lB.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function EB(e,t,n){var r=nn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function wB(e,t,n){var r=nn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function tE(e,t){return We(e.getDate(),t,2)}function OB(e,t){return We(e.getHours(),t,2)}function _B(e,t){return We(e.getHours()%12||12,t,2)}function TB(e,t){return We(1+Jc.count(qa(e),e),t,3)}function G_(e,t){return We(e.getMilliseconds(),t,3)}function DB(e,t){return G_(e,t)+"000"}function jB(e,t){return We(e.getMonth()+1,t,2)}function NB(e,t){return We(e.getMinutes(),t,2)}function kB(e,t){return We(e.getSeconds(),t,2)}function MB(e){var t=e.getDay();return t===0?7:t}function RB(e,t){return We(ih.count(qa(e)-1,e),t,2)}function H_(e){var t=e.getDay();return t>=4||t===0?Hs(e):Hs.ceil(e)}function IB(e,t){return e=H_(e),We(Hs.count(qa(e),e)+(qa(e).getDay()===4),t,2)}function LB(e){return e.getDay()}function $B(e,t){return We(Pd.count(qa(e)-1,e),t,2)}function BB(e,t){return We(e.getFullYear()%100,t,2)}function UB(e,t){return e=H_(e),We(e.getFullYear()%100,t,2)}function zB(e,t){return We(e.getFullYear()%1e4,t,4)}function GB(e,t){var n=e.getDay();return e=n>=4||n===0?Hs(e):Hs.ceil(e),We(e.getFullYear()%1e4,t,4)}function HB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+We(t/60|0,"0",2)+We(t%60,"0",2)}function nE(e,t){return We(e.getUTCDate(),t,2)}function qB(e,t){return We(e.getUTCHours(),t,2)}function YB(e,t){return We(e.getUTCHours()%12||12,t,2)}function FB(e,t){return We(1+ah.count(Ya(e),e),t,3)}function q_(e,t){return We(e.getUTCMilliseconds(),t,3)}function KB(e,t){return q_(e,t)+"000"}function VB(e,t){return We(e.getUTCMonth()+1,t,2)}function XB(e,t){return We(e.getUTCMinutes(),t,2)}function WB(e,t){return We(e.getUTCSeconds(),t,2)}function QB(e){var t=e.getUTCDay();return t===0?7:t}function ZB(e,t){return We(oh.count(Ya(e)-1,e),t,2)}function Y_(e){var t=e.getUTCDay();return t>=4||t===0?qs(e):qs.ceil(e)}function JB(e,t){return e=Y_(e),We(qs.count(Ya(e),e)+(Ya(e).getUTCDay()===4),t,2)}function e8(e){return e.getUTCDay()}function t8(e,t){return We(Ed.count(Ya(e)-1,e),t,2)}function n8(e,t){return We(e.getUTCFullYear()%100,t,2)}function r8(e,t){return e=Y_(e),We(e.getUTCFullYear()%100,t,2)}function a8(e,t){return We(e.getUTCFullYear()%1e4,t,4)}function i8(e,t){var n=e.getUTCDay();return e=n>=4||n===0?qs(e):qs.ceil(e),We(e.getUTCFullYear()%1e4,t,4)}function o8(){return"+0000"}function rE(){return"%"}function aE(e){return+e}function iE(e){return Math.floor(+e/1e3)}var js,F_,K_;s8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function s8(e){return js=sB(e),F_=js.format,js.parse,K_=js.utcFormat,js.utcParse,js}function l8(e){return new Date(e)}function c8(e){return e instanceof Date?+e:+new Date(+e)}function k0(e,t,n,r,i,s,l,u,d,h){var p=b0(),m=p.invert,y=p.domain,x=h(".%L"),S=h(":%S"),A=h("%I:%M"),P=h("%I %p"),E=h("%a %d"),O=h("%b %d"),_=h("%B"),N=h("%Y");function j(D){return(d(D)<D?x:u(D)<D?S:l(D)<D?A:s(D)<D?P:r(D)<D?i(D)<D?E:O:n(D)<D?_:N)(D)}return p.invert=function(D){return new Date(m(D))},p.domain=function(D){return arguments.length?y(Array.from(D,c8)):y().map(l8)},p.ticks=function(D){var R=y();return e(R[0],R[R.length-1],D??10)},p.tickFormat=function(D,R){return R==null?j:h(R)},p.nice=function(D){var R=y();return(!D||typeof D.range!="function")&&(D=t(R[0],R[R.length-1],D??10)),D?y(k_(R,D)):p},p.copy=function(){return Zc(p,k0(e,t,n,r,i,s,l,u,d,h))},p}function u8(){return Br.apply(k0(iB,oB,qa,j0,ih,Jc,T0,O0,Eo,F_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function f8(){return Br.apply(k0(rB,aB,Ya,N0,oh,ah,D0,_0,Eo,K_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sh(){var e=0,t=1,n,r,i,s,l=In,u=!1,d;function h(m){return m==null||isNaN(m=+m)?d:l(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),h):[e,t]},h.clamp=function(m){return arguments.length?(u=!!m,h):u},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(y){var x,S;return arguments.length?([x,S]=y,l=m(x,S),h):[l(0),l(1)]}}return h.range=p(Zs),h.rangeRound=p(v0),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),h}}function $i(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function V_(){var e=Li(sh()(In));return e.copy=function(){return $i(e,V_())},Xa.apply(e,arguments)}function X_(){var e=A0(sh()).domain([1,10]);return e.copy=function(){return $i(e,X_()).base(e.base())},Xa.apply(e,arguments)}function W_(){var e=C0(sh());return e.copy=function(){return $i(e,W_()).constant(e.constant())},Xa.apply(e,arguments)}function M0(){var e=P0(sh());return e.copy=function(){return $i(e,M0()).exponent(e.exponent())},Xa.apply(e,arguments)}function d8(){return M0.apply(null,arguments).exponent(.5)}function Q_(){var e=[],t=In;function n(r){if(r!=null&&!isNaN(r=+r))return t((Wc(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Ni),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Q$(e,s/r))},n.copy=function(){return Q_(t).domain(e)},Xa.apply(n,arguments)}function lh(){var e=0,t=.5,n=1,r=1,i,s,l,u,d,h=In,p,m=!1,y;function x(A){return isNaN(A=+A)?y:(A=.5+((A=+p(A))-s)*(r*A<r*s?u:d),h(m?Math.max(0,Math.min(1,A)):A))}x.domain=function(A){return arguments.length?([e,t,n]=A,i=p(e=+e),s=p(t=+t),l=p(n=+n),u=i===s?0:.5/(s-i),d=s===l?0:.5/(l-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(A){return arguments.length?(m=!!A,x):m},x.interpolator=function(A){return arguments.length?(h=A,x):h};function S(A){return function(P){var E,O,_;return arguments.length?([E,O,_]=P,h=P5(A,[E,O,_]),x):[h(0),h(.5),h(1)]}}return x.range=S(Zs),x.rangeRound=S(v0),x.unknown=function(A){return arguments.length?(y=A,x):y},function(A){return p=A,i=A(e),s=A(t),l=A(n),u=i===s?0:.5/(s-i),d=s===l?0:.5/(l-s),r=s<i?-1:1,x}}function Z_(){var e=Li(lh()(In));return e.copy=function(){return $i(e,Z_())},Xa.apply(e,arguments)}function J_(){var e=A0(lh()).domain([.1,1,10]);return e.copy=function(){return $i(e,J_()).base(e.base())},Xa.apply(e,arguments)}function eT(){var e=C0(lh());return e.copy=function(){return $i(e,eT()).constant(e.constant())},Xa.apply(e,arguments)}function R0(){var e=P0(lh());return e.copy=function(){return $i(e,R0()).exponent(e.exponent())},Xa.apply(e,arguments)}function h8(){return R0.apply(null,arguments).exponent(.5)}const Ec=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:m0,scaleDiverging:Z_,scaleDivergingLog:J_,scaleDivergingPow:R0,scaleDivergingSqrt:h8,scaleDivergingSymlog:eT,scaleIdentity:N_,scaleImplicit:lv,scaleLinear:j_,scaleLog:M_,scaleOrdinal:p0,scalePoint:e5,scalePow:E0,scaleQuantile:L_,scaleQuantize:$_,scaleRadial:I_,scaleSequential:V_,scaleSequentialLog:X_,scaleSequentialPow:M0,scaleSequentialQuantile:Q_,scaleSequentialSqrt:d8,scaleSequentialSymlog:W_,scaleSqrt:K5,scaleSymlog:R_,scaleThreshold:B_,scaleTime:u8,scaleUtc:f8,tickFormat:D_},Symbol.toStringTag,{value:"Module"}));var Bi=e=>e.chartData,I0=W([Bi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),L0=(e,t,n,r)=>r?I0(e):Bi(e);function Ys(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(fr(t)&&fr(n))return!0}return!1}function oE(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function p8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(fr(n))i=n;else if(typeof n=="function")return;if(fr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Ys(l))return l}}function m8(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Ys(r))return oE(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(_e(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&WC.test(i)){var d=WC.exec(i);if(d==null||t==null)l=void 0;else{var h=+d[1];l=t[0]-h}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(_e(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&QC.test(s)){var p=QC.exec(s);if(p==null||t==null)u=void 0;else{var m=+p[1];u=t[1]+m}}else u=t?.[1];var y=[l,u];if(Ys(y))return t==null?y:oE(y,t,n)}}}var Js=1e9,g8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},B0,vt=!0,Ir="[DecimalError] ",Do=Ir+"Invalid argument: ",$0=Ir+"Exponent out of range: ",el=Math.floor,Ao=Math.pow,y8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sr,Jt=1e7,dt=7,tT=9007199254740991,wd=el(tT/dt),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*dt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ce.dividedBy=Ce.div=function(e){return za(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,n=t.constructor;return ct(za(t,new n(e),0,1),n.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return Ut(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(sr))throw Error(Ir+"NaN");if(n.s<1)throw Error(Ir+(n.s?"NaN":"-Infinity"));return n.eq(sr)?new r(0):(vt=!1,t=za(Hc(n,s),Hc(e,s),s),vt=!0,ct(t,i))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aT(t,e):nT(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Ir+"NaN");return n.s?(vt=!1,t=za(n,e,0,1).times(e),vt=!0,n.minus(t)):ct(new r(n),i)};Ce.naturalExponential=Ce.exp=function(){return rT(this)};Ce.naturalLogarithm=Ce.ln=function(){return Hc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?nT(t,e):aT(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Do+e);if(t=Ut(i)+1,r=i.d.length-1,n=r*dt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ce.squareRoot=Ce.sqrt=function(){var e,t,n,r,i,s,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Ir+"NaN")}for(e=Ut(u),vt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ua(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=el((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new d(t)):r=new d(i.toString()),n=d.precision,i=l=n+3;;)if(s=r,r=s.plus(za(u,s,l+2)).times(.5),ua(s.d).slice(0,l)===(t=ua(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(ct(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return vt=!0,ct(r,n)};Ce.times=Ce.mul=function(e){var t,n,r,i,s,l,u,d,h,p=this,m=p.constructor,y=p.d,x=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,n=p.e+e.e,d=y.length,h=x.length,d<h&&(s=y,y=x,x=s,l=d,d=h,h=l),s=[],l=d+h,r=l;r--;)s.push(0);for(r=h;--r>=0;){for(t=0,i=d+r;i>r;)u=s[i]+x[r]*y[i-r-1]+t,s[i--]=u%Jt|0,t=u/Jt|0;s[i]=(s[i]+t)%Jt|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,vt?ct(e,m.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ha(e,0,Js),t===void 0?t=r.rounding:ha(t,0,8),ct(n,e+Ut(n)+1,t))};Ce.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Mo(r,!0):(ha(e,0,Js),t===void 0?t=i.rounding:ha(t,0,8),r=ct(new i(r),e+1,t),n=Mo(r,!0,e+1)),n};Ce.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Mo(i):(ha(e,0,Js),t===void 0?t=s.rounding:ha(t,0,8),r=ct(new s(i),e+Ut(i)+1,t),n=Mo(r.abs(),!1,e+Ut(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return ct(new t(e),Ut(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,n,r,i,s,l,u=this,d=u.constructor,h=12,p=+(e=new d(e));if(!e.s)return new d(sr);if(u=new d(u),!u.s){if(e.s<1)throw Error(Ir+"Infinity");return u}if(u.eq(sr))return u;if(r=d.precision,e.eq(sr))return ct(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=p<0?-p:p)<=tT){for(i=new d(sr),t=Math.ceil(r/dt+4),vt=!1;n%2&&(i=i.times(u),lE(i.d,t)),n=el(n/2),n!==0;)u=u.times(u),lE(u.d,t);return vt=!0,e.s<0?new d(sr).div(i):ct(i,r)}}else if(s<0)throw Error(Ir+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,vt=!1,i=e.times(Hc(u,r+h)),vt=!0,i=rT(i),i.s=s,i};Ce.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Ut(i),r=Mo(i,n<=s.toExpNeg||n>=s.toExpPos)):(ha(e,1,Js),t===void 0?t=s.rounding:ha(t,0,8),i=ct(new s(i),e,t),n=Ut(i),r=Mo(i,e<=n||n<=s.toExpNeg,e)),r};Ce.toSignificantDigits=Ce.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ha(e,1,Js),t===void 0?t=r.rounding:ha(t,0,8)),ct(new r(n),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ut(e),n=e.constructor;return Mo(e,t<=n.toExpNeg||t>=n.toExpPos)};function nT(e,t){var n,r,i,s,l,u,d,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),vt?ct(t,m):t;if(d=e.d,h=t.d,l=e.e,i=t.e,d=d.slice(),s=l-i,s){for(s<0?(r=d,s=-s,u=h.length):(r=h,i=l,u=d.length),l=Math.ceil(m/dt),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=d.length,s=h.length,u-s<0&&(s=u,r=h,h=d,d=r),n=0;s;)n=(d[--s]=d[s]+h[s]+n)/Jt|0,d[s]%=Jt;for(n&&(d.unshift(n),++i),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=i,vt?ct(t,m):t}function ha(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Do+e)}function ua(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=dt-r.length,n&&(s+=Oi(n)),s+=r;l=e[t],r=l+"",n=dt-r.length,n&&(s+=Oi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var za=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%Jt|0,l=s/Jt|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,d;if(s!=l)d=s>l?1:-1;else for(u=d=0;u<s;u++)if(r[u]!=i[u]){d=r[u]>i[u]?1:-1;break}return d}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*Jt+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,d,h,p,m,y,x,S,A,P,E,O,_,N,j,D,R,k,B=r.constructor,J=r.s==i.s?1:-1,Y=r.d,Z=i.d;if(!r.s)return new B(r);if(!i.s)throw Error(Ir+"Division by zero");for(d=r.e-i.e,R=Z.length,j=Y.length,x=new B(J),S=x.d=[],h=0;Z[h]==(Y[h]||0);)++h;if(Z[h]>(Y[h]||0)&&--d,s==null?O=s=B.precision:l?O=s+(Ut(r)-Ut(i))+1:O=s,O<0)return new B(0);if(O=O/dt+2|0,h=0,R==1)for(p=0,Z=Z[0],O++;(h<j||p)&&O--;h++)_=p*Jt+(Y[h]||0),S[h]=_/Z|0,p=_%Z|0;else{for(p=Jt/(Z[0]+1)|0,p>1&&(Z=e(Z,p),Y=e(Y,p),R=Z.length,j=Y.length),N=R,A=Y.slice(0,R),P=A.length;P<R;)A[P++]=0;k=Z.slice(),k.unshift(0),D=Z[0],Z[1]>=Jt/2&&++D;do p=0,u=t(Z,A,R,P),u<0?(E=A[0],R!=P&&(E=E*Jt+(A[1]||0)),p=E/D|0,p>1?(p>=Jt&&(p=Jt-1),m=e(Z,p),y=m.length,P=A.length,u=t(m,A,y,P),u==1&&(p--,n(m,R<y?k:Z,y))):(p==0&&(u=p=1),m=Z.slice()),y=m.length,y<P&&m.unshift(0),n(A,m,P),u==-1&&(P=A.length,u=t(Z,A,R,P),u<1&&(p++,n(A,R<P?k:Z,P))),P=A.length):u===0&&(p++,A=[0]),S[h++]=p,u&&A[0]?A[P++]=Y[N]||0:(A=[Y[N]],P=1);while((N++<j||A[0]!==void 0)&&O--)}return S[0]||S.shift(),x.e=d,ct(x,l?s+Ut(x)+1:s)}})();function rT(e,t){var n,r,i,s,l,u,d=0,h=0,p=e.constructor,m=p.precision;if(Ut(e)>16)throw Error($0+Ut(e));if(!e.s)return new p(sr);for(vt=!1,u=m,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(r=Math.log(Ao(2,h))/Math.LN10*2+5|0,u+=r,n=i=s=new p(sr),p.precision=u;;){if(i=ct(i.times(e),u),n=n.times(++d),l=s.plus(za(i,n,u)),ua(l.d).slice(0,u)===ua(s.d).slice(0,u)){for(;h--;)s=ct(s.times(s),u);return p.precision=m,t==null?(vt=!0,ct(s,m)):s}s=l}}function Ut(e){for(var t=e.e*dt,n=e.d[0];n>=10;n/=10)t++;return t}function ay(e,t,n){if(t>e.LN10.sd())throw vt=!0,n&&(e.precision=n),Error(Ir+"LN10 precision limit exceeded");return ct(new e(e.LN10),t)}function Oi(e){for(var t="";e--;)t+="0";return t}function Hc(e,t){var n,r,i,s,l,u,d,h,p,m=1,y=10,x=e,S=x.d,A=x.constructor,P=A.precision;if(x.s<1)throw Error(Ir+(x.s?"NaN":"-Infinity"));if(x.eq(sr))return new A(0);if(t==null?(vt=!1,h=P):h=t,x.eq(10))return t==null&&(vt=!0),ay(A,h);if(h+=y,A.precision=h,n=ua(S),r=n.charAt(0),s=Ut(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=ua(x.d),r=n.charAt(0),m++;s=Ut(x),r>1?(x=new A("0."+n),s++):x=new A(r+"."+n.slice(1))}else return d=ay(A,h+2,P).times(s+""),x=Hc(new A(r+"."+n.slice(1)),h-y).plus(d),A.precision=P,t==null?(vt=!0,ct(x,P)):x;for(u=l=x=za(x.minus(sr),x.plus(sr),h),p=ct(x.times(x),h),i=3;;){if(l=ct(l.times(p),h),d=u.plus(za(l,new A(i),h)),ua(d.d).slice(0,h)===ua(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(ay(A,h+2,P).times(s+""))),u=za(u,new A(m),h),A.precision=P,t==null?(vt=!0,ct(u,P)):u;u=d,i+=2}}function sE(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=el(n/dt),e.d=[],r=(n+1)%dt,n<0&&(r+=dt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=dt;r<i;)e.d.push(+t.slice(r,r+=dt));t=t.slice(r),r=dt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),vt&&(e.e>wd||e.e<-wd))throw Error($0+n)}else e.s=0,e.e=0,e.d=[0];return e}function ct(e,t,n){var r,i,s,l,u,d,h,p,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=dt,i=t,h=m[p=0];else{if(p=Math.ceil((r+1)/dt),s=m.length,p>=s)return e;for(h=s=m[p],l=1;s>=10;s/=10)l++;r%=dt,i=r-dt+l}if(n!==void 0&&(s=Ao(10,l-i-1),u=h/s%10|0,d=t<0||m[p+1]!==void 0||h%s,d=n<4?(u||d)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(r>0?i>0?h/Ao(10,l-i):0:m[p-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return d?(s=Ut(e),m.length=1,t=t-s-1,m[0]=Ao(10,(dt-t%dt)%dt),e.e=el(-t/dt)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=p,s=1,p--):(m.length=p+1,s=Ao(10,dt-r),m[p]=i>0?(h/Ao(10,l-i)%Ao(10,i)|0)*s:0),d)for(;;)if(p==0){(m[0]+=s)==Jt&&(m[0]=1,++e.e);break}else{if(m[p]+=s,m[p]!=Jt)break;m[p--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(vt&&(e.e>wd||e.e<-wd))throw Error($0+Ut(e));return e}function aT(e,t){var n,r,i,s,l,u,d,h,p,m,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),vt?ct(t,x):t;if(d=e.d,m=t.d,r=t.e,h=e.e,d=d.slice(),l=h-r,l){for(p=l<0,p?(n=d,l=-l,u=m.length):(n=m,r=h,u=d.length),i=Math.max(Math.ceil(x/dt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=d.length,u=m.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(d[i]!=m[i]){p=d[i]<m[i];break}l=0}for(p&&(n=d,d=m,m=n,t.s=-t.s),u=d.length,i=m.length-u;i>0;--i)d[u++]=0;for(i=m.length;i>l;){if(d[--i]<m[i]){for(s=i;s&&d[--s]===0;)d[s]=Jt-1;--d[s],d[i]+=Jt}d[i]-=m[i]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(t.d=d,t.e=r,vt?ct(t,x):t):new y(0)}function Mo(e,t,n){var r,i=Ut(e),s=ua(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+Oi(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Oi(-i-1)+s,n&&(r=n-l)>0&&(s+=Oi(r))):i>=l?(s+=Oi(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+Oi(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=Oi(r))),e.s<0?"-"+s:s}function lE(e,t){if(e.length>t)return e.length=t,!0}function iT(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Do+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return sE(l,s.toString())}else if(typeof s!="string")throw Error(Do+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,y8.test(s))sE(l,s);else throw Error(Do+s)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=iT,i.config=i.set=v8,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function v8(e){if(!e||typeof e!="object")throw Error(Ir+"Object expected");var t,n,r,i=["precision",1,Js,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(el(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Do+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Do+n+": "+r);return this}var B0=iT(g8);sr=new B0(1);const nt=B0;var b8=e=>e,oT={},sT=e=>e===oT,cE=e=>function t(){return arguments.length===0||arguments.length===1&&sT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},lT=(e,t)=>e===1?t:cE(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==oT).length;return s>=e?t(...r):lT(e-s,cE(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var h=r.map(p=>sT(p)?u.shift():p);return t(...h,...u)}))}),ch=e=>lT(e.length,e),dv=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},x8=ch((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),S8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return b8;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,d)=>d(u),s(...arguments))}},hv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),cT=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=i,n=e(...i)),n}};function uT(e){var t;return e===0?t=1:t=Math.floor(new nt(e).abs().log(10).toNumber())+1,t}function fT(e,t,n){for(var r=new nt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}ch((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});ch((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});ch((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var dT=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},hT=(e,t,n)=>{if(e.lte(0))return new nt(0);var r=uT(e.toNumber()),i=new nt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new nt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),d=u.mul(i);return t?new nt(d.toNumber()):new nt(Math.ceil(d.toNumber()))},A8=(e,t,n)=>{var r=new nt(1),i=new nt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new nt(10).pow(uT(e)-1),i=new nt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new nt(Math.floor(e)))}else e===0?i=new nt(Math.floor((t-1)/2)):n||(i=new nt(Math.floor(e)));var l=Math.floor((t-1)/2),u=S8(x8(d=>i.add(new nt(d-l).mul(r)).toNumber()),dv);return u(0,t)},pT=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new nt(0),tickMin:new nt(0),tickMax:new nt(0)};var l=hT(new nt(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new nt(0):(u=new nt(t).add(n).div(2),u=u.sub(new nt(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),h=Math.ceil(new nt(n).sub(u).div(l).toNumber()),p=d+h+1;return p>r?pT(t,n,r,i,s+1):(p<r&&(h=n>0?h+(r-p):h,d=n>0?d:d+(r-p)),{step:l,tickMin:u.sub(new nt(d).mul(l)),tickMax:u.add(new nt(h).mul(l))})};function C8(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=dT([t,n]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...dv(0,r-1).map(()=>1/0)]:[...dv(0,r-1).map(()=>-1/0),u];return t>n?hv(d):d}if(l===u)return A8(l,r,i);var{step:h,tickMin:p,tickMax:m}=pT(l,u,s,i,0),y=fT(p,m.add(new nt(.1).mul(h)),h);return t>n?hv(y):y}function P8(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=dT([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),d=hT(new nt(l).sub(s).div(u-1),i,0),h=[...fT(new nt(s),new nt(l),d),l];return i===!1&&(h=h.map(p=>Math.round(p))),n>r?hv(h):h}var E8=cT(C8),w8=cT(P8),mT=e=>e.rootProps.maxBarSize,O8=e=>e.rootProps.barGap,gT=e=>e.rootProps.barCategoryGap,_8=e=>e.rootProps.barSize,eu=e=>e.rootProps.stackOffset,U0=e=>e.options.chartName,z0=e=>e.rootProps.syncId,yT=e=>e.rootProps.syncMethod,G0=e=>e.options.eventEmitter,Ia={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},or={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},uh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},T8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ia.angleAxisId,includeHidden:!1,name:void 0,reversed:Ia.reversed,scale:Ia.scale,tick:Ia.tick,tickCount:void 0,ticks:void 0,type:Ia.type,unit:void 0},D8={allowDataOverflow:or.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:or.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:or.scale,tick:or.tick,tickCount:or.tickCount,ticks:void 0,type:or.type,unit:void 0},j8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ia.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ia.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ia.scale,tick:Ia.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},N8={allowDataOverflow:or.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:or.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:or.scale,tick:or.tick,tickCount:or.tickCount,ticks:void 0,type:"category",unit:void 0},H0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?j8:T8,q0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?N8:D8,fh=e=>e.polarOptions,Y0=W([Ka,Va,Kt],JO),vT=W([fh,Y0],(e,t)=>{if(e!=null)return _n(e.innerRadius,t,0)}),bT=W([fh,Y0],(e,t)=>{if(e!=null)return _n(e.outerRadius,t,t*.8)}),k8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},xT=W([fh],k8);W([H0,xT],uh);var ST=W([Y0,vT,bT],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});W([q0,ST],uh);var AT=W([Qe,fh,vT,bT,Ka,Va],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:d,endAngle:h}=t;return{cx:_n(l,i,i/2),cy:_n(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:h,clockWise:!1}}}),xt=(e,t)=>t,tu=(e,t,n)=>n;function F0(e){return e?.id}var Xt=e=>{var t=Qe(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},tl=e=>e.tooltip.settings.axisId,rn=e=>{var t=Xt(e),n=tl(e);return nu(e,t,n)},CT=W([rn],e=>e?.dataKey);function PT(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var d,h=(d=u.data)!==null&&d!==void 0?d:r;if(!(h==null||h.length===0)){var p=F0(u);h.forEach((m,y)=>{var x=s==null||i?y:String(yt(m,s,null)),S=yt(m,u.dataKey,0),A;l.has(x)?A=l.get(x):A={},Object.assign(A,{[p]:S}),l.set(x,A)})}}),Array.from(l.values())}function dh(e){return e.stackId!=null&&e.dataKey!=null}function uE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Od(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(n),!0).forEach(function(r){M8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M8(e,t,n){return(t=R8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R8(e){var t=I8(e,"string");return typeof t=="symbol"?t:t+""}function I8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pv=[0,"auto"],ar={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ET=(e,t)=>e.cartesianAxis.xAxis[t],Ui=(e,t)=>{var n=ET(e,t);return n??ar},ir={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:pv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Xc},wT=(e,t)=>e.cartesianAxis.yAxis[t],zi=(e,t)=>{var n=wT(e,t);return n??ir},L8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},K0=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??L8},Dt=(e,t,n)=>{switch(t){case"xAxis":return Ui(e,n);case"yAxis":return zi(e,n);case"zAxis":return K0(e,n);case"angleAxis":return H0(e,n);case"radiusAxis":return q0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},$8=(e,t,n)=>{switch(t){case"xAxis":return Ui(e,n);case"yAxis":return zi(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},nu=(e,t,n)=>{switch(t){case"xAxis":return Ui(e,n);case"yAxis":return zi(e,n);case"angleAxis":return H0(e,n);case"radiusAxis":return q0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},OT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function V0(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var X0=e=>e.graphicalItems.cartesianItems,B8=W([xt,tu],V0),W0=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),ru=W([X0,Dt,B8],W0),_T=W([ru],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(dh)),TT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),DT=W([ru],TT),Q0=e=>e.map(t=>t.data).filter(Boolean).flat(1),U8=W([ru],Q0),Z0=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},J0=W([U8,L0],Z0),eb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:yt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:yt(i,r)}))):e.map(r=>({value:r})),hh=W([J0,Dt,ru],eb);function jT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ho(e){return e.filter(t=>da(t)||t instanceof Date).map(Number).filter(t=>cr(t)===!1)}function z8(e,t,n){return!n||typeof t!="number"||cr(t)?[]:n.length?Ho(n.flatMap(r=>{var i=yt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!fr(s)||!fr(l)))return[t-s,t+l]})):[]}var G8=W([_T,L0,rn],PT),NT=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,d=u.map(F0);return[l,{stackedData:FL(e,d,n),graphicalItems:u}]}))},mv=W([G8,_T,eu],NT),kT=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=QL(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},H8=W([mv,Bi,xt],kT),MT=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,d,h=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>jT(i,m)),p=yt(s,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey);return{value:p,errorDomain:z8(s,p,h)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:yt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),ph=e=>e.errorBars,RT=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>jT(n,r));W([DT,ph,xt],RT);var q8=W([J0,Dt,DT,ph,xt],MT);function Y8(e){var{value:t}=e;if(da(t)||t instanceof Date)return t}var fE=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Ho(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},F8=(e,t,n)=>{var r=e.map(Y8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&K2(r))?x_(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},tb=e=>{var t;if(e==null||!("domain"in e))return pv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Ho(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:pv},_d=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},IT=e=>e.referenceElements.dots,nl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),K8=W([IT,xt,tu],nl),LT=e=>e.referenceElements.areas,V8=W([LT,xt,tu],nl),$T=e=>e.referenceElements.lines,X8=W([$T,xt,tu],nl),BT=(e,t)=>{var n=Ho(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},W8=W(K8,xt,BT),UT=(e,t)=>{var n=Ho(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Q8=W([V8,xt],UT),zT=(e,t)=>{var n=Ho(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Z8=W(X8,xt,zT),J8=W(W8,Z8,Q8,(e,t,n)=>_d(e,n,t)),GT=W([Dt],tb),nb=(e,t,n,r,i,s,l)=>{var u=p8(t,e.allowDataOverflow);if(u!=null)return u;var d=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",h=d?_d(n,i,fE(r)):_d(i,fE(r));return m8(t,h,e.allowDataOverflow)},e6=W([Dt,GT,H8,q8,J8,Qe,xt],nb),t6=[0,1],rb=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,h=Uo(t,s);return h&&u==null?x_(0,n.length):d==="category"?F8(r,e,h):i==="expand"?t6:l}},ab=W([Dt,Qe,J0,hh,eu,xt,e6],rb),HT=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Yc(s));return u in Ec?u:"point"}}},rl=W([Dt,Qe,OT,U0,xt],HT);function n6(e){if(e!=null){if(e in Ec)return Ec[e]();var t="scale".concat(Yc(e));if(t in Ec)return Ec[t]()}}function ib(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=n6(t);if(i!=null){var s=i.domain(n).range(r);return zL(s),s}}}var ob=(e,t,n)=>{var r=tb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ys(e))return E8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ys(e))return w8(e,t.tickCount,t.allowDecimals)}},sb=W([ab,nu,rl],ob),lb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Ys(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},r6=W([Dt,ab,sb,xt],lb),a6=W(hh,Dt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Ho(e.map(u=>u.value))).sort((u,d)=>u-d);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),qT=W(a6,Qe,gT,Kt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!fr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=_n(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),i6=(e,t)=>{var n=Ui(e,t);return n==null||typeof n.padding!="string"?0:qT(e,"xAxis",t,n.padding)},o6=(e,t)=>{var n=zi(e,t);return n==null||typeof n.padding!="string"?0:qT(e,"yAxis",t,n.padding)},s6=W(Ui,i6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),l6=W(zi,o6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),c6=W([Kt,s6,Jd,Zd,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),u6=W([Kt,Qe,l6,Jd,Zd,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),au=(e,t,n,r)=>{var i;switch(t){case"xAxis":return c6(e,n,r);case"yAxis":return u6(e,n,r);case"zAxis":return(i=K0(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return xT(e);case"radiusAxis":return ST(e,n);default:return}},YT=W([Dt,au],uh),al=W([Dt,rl,r6,YT],ib);W([ru,ph,xt],RT);function FT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var mh=(e,t)=>t,gh=(e,t,n)=>n,f6=W(Wd,mh,gh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(FT)),d6=W(Qd,mh,gh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(FT)),KT=(e,t)=>({width:e.width,height:t.height}),h6=(e,t)=>{var n=typeof t.width=="number"?t.width:Xc;return{width:n,height:e.height}},VT=W(Kt,Ui,KT),p6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},m6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},g6=W(Va,Kt,f6,mh,gh,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var d=KT(t,u);l==null&&(l=p6(t,r,e));var h=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(h)*d.height,l+=(h?-1:1)*d.height}),s}),y6=W(Ka,Kt,d6,mh,gh,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var d=h6(t,u);l==null&&(l=m6(t,r,e));var h=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(h)*d.width,l+=(h?-1:1)*d.width}),s}),v6=(e,t)=>{var n=Kt(e),r=Ui(e,t);if(r!=null){var i=g6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},b6=(e,t)=>{var n=Kt(e),r=zi(e,t);if(r!=null){var i=y6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},XT=W(Kt,zi,(e,t)=>{var n=typeof t.width=="number"?t.width:Xc;return{width:n,height:e.height}}),dE=(e,t,n)=>{switch(t){case"xAxis":return VT(e,n).width;case"yAxis":return XT(e,n).height;default:return}},WT=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Uo(e,r),d=t.map(h=>h.value);if(l&&u&&s==="category"&&i&&K2(d))return d}},cb=W([Qe,hh,Dt,xt],WT),QT=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Uo(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},ub=W([Qe,hh,nu,xt],QT),hE=W([Qe,$8,rl,al,cb,ub,au,sb,xt],(e,t,n,r,i,s,l,u,d)=>{if(t==null)return null;var h=Uo(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:l,realScaleType:n,scale:r}}),x6=(e,t,n,r,i,s,l,u,d)=>{if(!(t==null||r==null)){var h=Uo(e,d),{type:p,ticks:m,tickCount:y}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=p==="category"&&r.bandwidth?r.bandwidth()/x:0;S=d==="angleAxis"&&s!=null&&s.length>=2?en(s[0]-s[1])*2*S:S;var A=m||i;if(A){var P=A.map((E,O)=>{var _=l?l.indexOf(E):E;return{index:O,coordinate:r(_)+S,value:E,offset:S}});return P.filter(E=>!cr(E.coordinate))}return h&&u?u.map((E,O)=>({coordinate:r(E)+S,value:E,index:O,offset:S})):r.ticks?r.ticks(y).map(E=>({coordinate:r(E)+S,value:E,offset:S})):r.domain().map((E,O)=>({coordinate:r(E)+S,value:l?l[E]:E,index:O,offset:S}))}},ZT=W([Qe,nu,rl,al,sb,au,cb,ub,xt],x6),S6=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Uo(e,l),{tickCount:d}=t,h=0;return h=l==="angleAxis"&&r?.length>=2?en(r[0]-r[1])*2*h:h,u&&s?s.map((p,m)=>({coordinate:n(p)+h,value:p,index:m,offset:h})):n.ticks?n.ticks(d).map(p=>({coordinate:n(p)+h,value:p,offset:h})):n.domain().map((p,m)=>({coordinate:n(p)+h,value:i?i[p]:p,index:m,offset:h}))}},Fs=W([Qe,nu,al,au,cb,ub,xt],S6),Ks=W(Dt,al,(e,t)=>{if(!(e==null||t==null))return Od(Od({},e),{},{scale:t})}),A6=W([Dt,rl,ab,YT],ib);W((e,t,n)=>K0(e,n),A6,(e,t)=>{if(!(e==null||t==null))return Od(Od({},e),{},{scale:t})});var C6=W([Qe,Wd,Qd],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),JT=e=>e.options.defaultTooltipEventType,eD=e=>e.options.validateTooltipEventTypes;function tD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function fb(e,t){var n=JT(e),r=eD(e);return tD(t,n,r)}function P6(e){return we(t=>fb(t,e))}var nD=(e,t)=>{var n,r=Number(t);if(!(cr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},E6=e=>e.tooltip.settings,Ti={active:!1,index:null,dataKey:void 0,coordinate:void 0},w6={itemInteraction:{click:Ti,hover:Ti},axisInteraction:{click:Ti,hover:Ti},keyboardInteraction:Ti,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},rD=dr({name:"tooltip",initialState:w6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Ua(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:O6,removeTooltipEntrySettings:_6,setTooltipSettingsState:T6,setActiveMouseOverItemIndex:aD,mouseLeaveItem:D6,mouseLeaveChart:iD,setActiveClickItemIndex:j6,setMouseOverAxisIndex:oD,setMouseClickAxisIndex:N6,setSyncInteraction:gv,setKeyboardInteraction:yv}=rD.actions,k6=rD.reducer;function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pE(Object(n),!0).forEach(function(r){M6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M6(e,t,n){return(t=R6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e){var t=I6(e,"string");return typeof t=="symbol"?t:t+""}function I6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $6(e){return e.index!=null}var sD=(e,t,n,r)=>{if(t==null)return Ti;var i=L6(e,t,n);if(i==null)return Ti;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if($6(i)){if(s)return $f($f({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return $f($f({},Ti),{},{coordinate:i.coordinate})},db=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!fr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},lD=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var d=l[0],h=d==null?void 0:u(d.positions,s);if(h!=null)return h;var p=i?.[Number(s)];if(p)switch(n){case"horizontal":return{x:p.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:p.coordinate}}}},cD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},iu=e=>e.options.tooltipPayloadSearcher,il=e=>e.tooltip;function mE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(n),!0).forEach(function(r){B6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B6(e,t,n){return(t=U6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U6(e){var t=z6(e,"string");return typeof t=="symbol"?t:t+""}function z6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G6(e,t){return e??t}var uD=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:d,dataStartIndex:h,dataEndIndex:p}=n,m=[];return e.reduce((y,x)=>{var S,{dataDefinedOnItem:A,settings:P}=x,E=G6(A,u),O=Array.isArray(E)?e_(E,h,p):E,_=(S=P?.dataKey)!==null&&S!==void 0?S:r,N=P?.nameKey,j;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?j=DR(O,r,i):j=s(O,t,d,N),Array.isArray(j))j.forEach(R=>{var k=gE(gE({},P),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});y.push(ZC({tooltipEntrySettings:k,dataKey:R.dataKey,payload:R.payload,value:yt(R.payload,R.dataKey),name:R.name}))});else{var D;y.push(ZC({tooltipEntrySettings:P,dataKey:_,payload:j,value:yt(j,_),name:(D=yt(j,N))!==null&&D!==void 0?D:P?.name}))}return y},m)}},hb=W([rn,Qe,OT,U0,Xt],HT),H6=W([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),q6=W([Xt,tl],V0),ou=W([H6,rn,q6],W0),Y6=W([ou],e=>e.filter(dh)),F6=W([ou],Q0),ol=W([F6,Bi],Z0),K6=W([Y6,Bi,rn],PT),pb=W([ol,rn,ou],eb),V6=W([rn],tb),X6=W([ou],e=>e.filter(dh)),W6=W([K6,X6,eu],NT),Q6=W([W6,Bi,Xt],kT),Z6=W([ou],TT),J6=W([ol,rn,Z6,ph,Xt],MT),eU=W([IT,Xt,tl],nl),tU=W([eU,Xt],BT),nU=W([LT,Xt,tl],nl),rU=W([nU,Xt],UT),aU=W([$T,Xt,tl],nl),iU=W([aU,Xt],zT),oU=W([tU,iU,rU],_d),sU=W([rn,V6,Q6,J6,oU,Qe,Xt],nb),fD=W([rn,Qe,ol,pb,eu,Xt,sU],rb),lU=W([fD,rn,hb],ob),cU=W([rn,fD,lU,Xt],lb),dD=e=>{var t=Xt(e),n=tl(e),r=!1;return au(e,t,n,r)},hD=W([rn,dD],uh),pD=W([rn,hb,cU,hD],ib),uU=W([Qe,pb,rn,Xt],WT),fU=W([Qe,pb,rn,Xt],QT),dU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:d}=t,h=Uo(e,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=d==="category"&&r.bandwidth?r.bandwidth()/p:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?en(i[0]-i[1])*2*m:m,h&&l?l.map((y,x)=>({coordinate:r(y)+m,value:y,index:x,offset:m})):r.domain().map((y,x)=>({coordinate:r(y)+m,value:s?s[y]:y,index:x,offset:m}))}}},Wa=W([Qe,rn,hb,pD,dD,uU,fU,Xt],dU),mb=W([JT,eD,E6],(e,t,n)=>tD(n.shared,e,t)),mD=e=>e.tooltip.settings.trigger,gb=e=>e.tooltip.settings.defaultIndex,yh=W([il,mb,mD,gb],sD),Ro=W([yh,ol],db),gD=W([Wa,Ro],nD),yD=W([yh],e=>{if(e)return e.dataKey}),vD=W([il,mb,mD,gb],cD),hU=W([Ka,Va,Qe,Kt,Wa,gb,vD,iu],lD),pU=W([yh,hU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),mU=W([yh],e=>e.active),gU=W([vD,Ro,Bi,CT,gD,iu,mb],uD);W([gU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(n),!0).forEach(function(r){yU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yU(e,t,n){return(t=vU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vU(e){var t=bU(e,"string");return typeof t=="symbol"?t:t+""}function bU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xU=()=>we(rn),SU=()=>{var e=xU(),t=we(Wa),n=we(pD);return o0(vE(vE({},e),{},{scale:n}),t)},AU=()=>we(U0),yb=(e,t)=>t,bD=(e,t,n)=>n,vb=(e,t,n,r)=>r,CU=W(Wa,e=>Hd(e,t=>t.coordinate)),bb=W([il,yb,bD,vb],sD),xD=W([bb,ol],db),PU=(e,t,n)=>{if(t!=null){var r=il(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},SD=W([il,yb,bD,vb],cD),Td=W([Ka,Va,Qe,Kt,Wa,vb,SD,iu],lD),EU=W([bb,Td],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),AD=W(Wa,xD,nD),wU=W([SD,xD,Bi,CT,AD,iu,yb],uD),OU=W([bb],e=>({isActive:e.active,activeIndex:e.index})),_U=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var d=ZL(e.chartX,e.chartY,t,n,u);if(d){var h=e3(d,t),p=BL(h,l,s,r,i),m=JL(t,s,p,d);return{activeIndex:String(p),activeCoordinate:m}}}};function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vv.apply(null,arguments)}function bE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(n),!0).forEach(function(r){TU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TU(e,t,n){return(t=DU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DU(e){var t=jU(e,"string");return typeof t=="symbol"?t:t+""}function jU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:d,chartName:h}=e,p=t,m=n,y=r;if(!u||!p||h!=="ScatterChart"&&d!=="axis")return null;var x,S;if(h==="ScatterChart")x=p,S=e$;else if(h==="BarChart")x=t$(l,p,i,s),S=g_;else if(l==="radial"){var{cx:A,cy:P,radius:E,startAngle:O,endAngle:_}=y_(p);x={cx:A,cy:P,startAngle:O,endAngle:_,innerRadius:E,outerRadius:E},S=b_}else x={points:M$(l,p,i)},S=f_;var N=typeof u=="object"&&"className"in u?u.className:void 0,j=Bf(Bf(Bf(Bf({stroke:"#ccc",pointerEvents:"none"},i),x),$t(u,!1)),{},{payload:m,payloadIndex:y,className:rt("recharts-tooltip-cursor",N)});return C.isValidElement(u)?C.cloneElement(u,j):C.createElement(S,j)}function kU(e){var t=SU(),n=o_(),r=f0(),i=AU();return C.createElement(NU,vv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var CD=C.createContext(null),MU=()=>C.useContext(CD),iy={exports:{}},xE;function RU(){return xE||(xE=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function s(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,m||d,y),S=n?n+h:h;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],x]:d._events[S].push(x):(d._events[S]=x,d._eventsCount++),d}function l(d,h){--d._eventsCount===0?d._events=new r:delete d._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)t.call(p,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=n?n+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,x=m.length,S=new Array(x);y<x;y++)S[y]=m[y].fn;return S},u.prototype.listenerCount=function(h){var p=n?n+h:h,m=this._events[p];return m?m.fn?1:m.length:0},u.prototype.emit=function(h,p,m,y,x,S){var A=n?n+h:h;if(!this._events[A])return!1;var P=this._events[A],E=arguments.length,O,_;if(P.fn){switch(P.once&&this.removeListener(h,P.fn,void 0,!0),E){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,p),!0;case 3:return P.fn.call(P.context,p,m),!0;case 4:return P.fn.call(P.context,p,m,y),!0;case 5:return P.fn.call(P.context,p,m,y,x),!0;case 6:return P.fn.call(P.context,p,m,y,x,S),!0}for(_=1,O=new Array(E-1);_<E;_++)O[_-1]=arguments[_];P.fn.apply(P.context,O)}else{var N=P.length,j;for(_=0;_<N;_++)switch(P[_].once&&this.removeListener(h,P[_].fn,void 0,!0),E){case 1:P[_].fn.call(P[_].context);break;case 2:P[_].fn.call(P[_].context,p);break;case 3:P[_].fn.call(P[_].context,p,m);break;case 4:P[_].fn.call(P[_].context,p,m,y);break;default:if(!O)for(j=1,O=new Array(E-1);j<E;j++)O[j-1]=arguments[j];P[_].fn.apply(P[_].context,O)}}return!0},u.prototype.on=function(h,p,m){return s(this,h,p,m,!1)},u.prototype.once=function(h,p,m){return s(this,h,p,m,!0)},u.prototype.removeListener=function(h,p,m,y){var x=n?n+h:h;if(!this._events[x])return this;if(!p)return l(this,x),this;var S=this._events[x];if(S.fn)S.fn===p&&(!y||S.once)&&(!m||S.context===m)&&l(this,x);else{for(var A=0,P=[],E=S.length;A<E;A++)(S[A].fn!==p||y&&!S[A].once||m&&S[A].context!==m)&&P.push(S[A]);P.length?this._events[x]=P.length===1?P[0]:P:l(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&l(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(iy)),iy.exports}var IU=RU();const LU=Xr(IU);var qc=new LU,bv="recharts.syncEvent.tooltip",SE="recharts.syncEvent.brush";function PD(e,t){if(t){var n=Number.parseInt(t,10);if(!cr(n))return e?.[n]}}var $U={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ED=dr({name:"options",initialState:$U,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),BU=ED.reducer,{createEventEmitter:UU}=ED.actions;function zU(e){return e.tooltip.syncInteraction}var GU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},wD=dr({name:"chartData",initialState:GU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:AE,setDataStartEndIndexes:HU,setComputedData:oK}=wD.actions,qU=wD.reducer,YU=["x","y"];function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(r){FU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FU(e,t,n){return(t=KU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KU(e){var t=VU(e,"string");return typeof t=="symbol"?t:t+""}function VU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XU(e,t){if(e==null)return{};var n,r,i=WU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var OD=()=>{};function QU(){var e=we(z0),t=we(G0),n=Ct(),r=we(yT),i=we(Wa),s=f0(),l=l0(),u=we(d=>d.rootProps.className);C.useEffect(()=>{if(e==null)return OD;var d=(h,p,m)=>{if(t!==m&&e===h){if(r==="index"){var y;if(l&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate){var x=p.payload.coordinate,{x:S,y:A}=x,P=XU(x,YU),E=bo(bo(bo({},P),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),O=bo(bo({},p),{},{payload:bo(bo({},p.payload),{},{coordinate:E})});n(O)}else n(p);return}if(i!=null){var _;if(typeof r=="function"){var N={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},j=r(i,N);_=i[j]}else r==="value"&&(_=i.find(ue=>String(ue.value)===p.payload.label));var{coordinate:D}=p.payload;if(_==null||p.payload.active===!1||D==null||l==null){n(gv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:R,y:k}=D,B=Math.min(R,l.x+l.width),J=Math.min(k,l.y+l.height),Y={x:s==="horizontal"?_.coordinate:B,y:s==="horizontal"?J:_.coordinate},Z=gv({active:p.payload.active,coordinate:Y,dataKey:p.payload.dataKey,index:String(_.index),label:p.payload.label});n(Z)}}};return qc.on(bv,d),()=>{qc.off(bv,d)}},[u,n,t,e,r,i,s,l])}function ZU(){var e=we(z0),t=we(G0),n=Ct();C.useEffect(()=>{if(e==null)return OD;var r=(i,s,l)=>{t!==l&&e===i&&n(HU(s))};return qc.on(SE,r),()=>{qc.off(SE,r)}},[n,t,e])}function JU(){var e=Ct();C.useEffect(()=>{e(UU())},[e]),QU(),ZU()}function ez(e,t,n,r,i,s){var l=we(y=>PU(y,e,t)),u=we(G0),d=we(z0),h=we(yT),p=we(zU),m=p?.active;C.useEffect(()=>{if(!m&&d!=null&&u!=null){var y=gv({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});qc.emit(bv,d,y,u)}},[m,n,l,i,r,u,d,h,s])}function PE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PE(Object(n),!0).forEach(function(r){tz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tz(e,t,n){return(t=nz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nz(e){var t=rz(e,"string");return typeof t=="symbol"?t:t+""}function rz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function az(e){return e.dataKey}function iz(e,t){return C.isValidElement(e)?C.cloneElement(e,t):typeof e=="function"?C.createElement(e,t):C.createElement(N3,t)}var wE=[],oz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Qs.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function oy(e){var t=$r(e,oz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:p,position:m,reverseDirection:y,useTranslate3d:x,wrapperStyle:S,cursor:A,shared:P,trigger:E,defaultIndex:O,portal:_,axisId:N}=t,j=Ct(),D=typeof O=="number"?String(O):O;C.useEffect(()=>{j(T6({shared:P,trigger:E,axisId:N,active:n,defaultIndex:D}))},[j,P,E,N,n,D]);var R=l0(),k=u_(),B=P6(P),{activeIndex:J,isActive:Y}=we(z=>OU(z,B,E,D)),Z=we(z=>wU(z,B,E,D)),ue=we(z=>AD(z,B,E,D)),se=we(z=>EU(z,B,E,D)),te=Z,$=MU(),ee=n??Y,[pe,he]=_O([te,ee]),I=B==="axis"?ue:void 0;ez(B,E,se,I,J,ee);var V=_??$;if(V==null)return null;var q=te??wE;ee||(q=wE),u&&q.length&&(q=CO(te.filter(z=>z.value!=null&&(z.hide!==!0||t.includeHidden)),p,az));var le=q.length>0,ve=C.createElement(B3,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:d,active:ee,coordinate:se,hasPayload:le,offset:h,position:m,reverseDirection:y,useTranslate3d:x,viewBox:R,wrapperStyle:S,lastBoundingBox:pe,innerRef:he,hasPortalFromProps:!!_},iz(l,EE(EE({},t),{},{payload:q,label:I,active:ee,coordinate:se,accessibilityLayer:k})));return C.createElement(C.Fragment,null,W2.createPortal(ve,V),ee&&C.createElement(kU,{cursor:A,tooltipEventType:B,coordinate:se,payload:te,index:J}))}var sy={},ly={},cy={},OE;function sz(){return OE||(OE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const d=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{h&&p(),A()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,m()},r)},S=()=>{y!==null&&(clearTimeout(y),y=null)},A=()=>{S(),l=void 0,u=null},P=()=>{p()},E=function(...O){if(i?.aborted)return;l=this,u=O;const _=y==null;x(),d&&_&&p()};return E.schedule=x,E.cancel=A,E.flush=P,i?.addEventListener("abort",A,{once:!0}),E}e.debounce=t})(cy)),cy}var _E;function lz(){return _E||(_E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:d}=s,h=Array(2);l&&(h[0]="leading"),u&&(h[1]="trailing");let p,m=null;const y=t.debounce(function(...A){p=r.apply(this,A),m=null},i,{edges:h}),x=function(...A){return d!=null&&(m===null&&(m=Date.now()),Date.now()-m>=d)?(p=r.apply(this,A),m=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,A),p)},S=()=>(y.flush(),p);return x.cancel=y.cancel,x.flush=S,x}e.debounce=n})(ly)),ly}var TE;function cz(){return TE||(TE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lz();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(sy)),sy}var uy,DE;function uz(){return DE||(DE=1,uy=cz().throttle),uy}var fz=uz();const dz=Xr(fz);var Tc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(n),!0).forEach(function(r){hz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hz(e,t,n){return(t=pz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pz(e){var t=mz(e,"string");return typeof t=="symbol"?t:t+""}function mz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dy=C.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:d,children:h,debounce:p=0,id:m,className:y,onResize:x,style:S={}}=e,A=C.useRef(null),P=C.useRef();P.current=x,C.useImperativeHandle(t,()=>A.current);var[E,O]=C.useState({containerWidth:r.width,containerHeight:r.height}),_=C.useCallback((j,D)=>{O(R=>{var k=Math.round(j),B=Math.round(D);return R.containerWidth===k&&R.containerHeight===B?R:{containerWidth:k,containerHeight:B}})},[]);C.useEffect(()=>{var j=B=>{var J,{width:Y,height:Z}=B[0].contentRect;_(Y,Z),(J=P.current)===null||J===void 0||J.call(P,Y,Z)};p>0&&(j=dz(j,p,{trailing:!0,leading:!1}));var D=new ResizeObserver(j),{width:R,height:k}=A.current.getBoundingClientRect();return _(R,k),D.observe(A.current),()=>{D.disconnect()}},[_,p]);var N=C.useMemo(()=>{var{containerWidth:j,containerHeight:D}=E;if(j<0||D<0)return null;Tc(Co(i)||Co(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Tc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var R=Co(i)?j:i,k=Co(s)?D:s;return n&&n>0&&(R?k=R/n:k&&(R=k*n),d&&k>d&&(k=d)),Tc(R>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,k,i,s,l,u,n),C.Children.map(h,B=>C.cloneElement(B,{width:R,height:k,style:fy({width:R,height:k},B.props.style)}))},[n,h,s,d,u,l,E,i]);return C.createElement("div",{id:m?"".concat(m):void 0,className:rt("recharts-responsive-container",y),style:fy(fy({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:d}),ref:A},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},N))}),Vs=e=>null;Vs.displayName="Cell";function gz(e,t,n){return(t=yz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bz{constructor(t){gz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function NE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(n),!0).forEach(function(r){Sz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sz(e,t,n){return(t=Az(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Az(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pz={cacheSize:2e3,enableCache:!0},_D=xz({},Pz),kE=new bz(_D.cacheSize),Ez={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ME="recharts_measurement_span";function wz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var RE=(e,t)=>{try{var n=document.getElementById(ME);n||(n=document.createElement("span"),n.setAttribute("id",ME),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Ez,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Dc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Qs.isSsr)return{width:0,height:0};if(!_D.enableCache)return RE(t,n);var r=wz(t,n),i=kE.get(r);if(i)return i;var s=RE(t,n);return kE.set(r,s),s},IE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Oz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_z=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,TD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tz=Object.keys(TD),ks="NaN";function Dz(e,t){return e*TD[t]}class Kn{static parse(t){var n,[,r,i]=(n=_z.exec(t))!==null&&n!==void 0?n:[];return new Kn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,cr(t)&&(this.unit=""),n!==""&&!Oz.test(n)&&(this.num=NaN,this.unit=""),Tz.includes(n)&&(this.num=Dz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Kn(NaN,""):new Kn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Kn(NaN,""):new Kn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Kn(NaN,""):new Kn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Kn(NaN,""):new Kn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return cr(this.num)}}function DD(e){if(e.includes(ks))return ks;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=IE.exec(t))!==null&&n!==void 0?n:[],l=Kn.parse(r??""),u=Kn.parse(s??""),d=i==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return ks;t=t.replace(IE,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,m,y]=(h=LE.exec(t))!==null&&h!==void 0?h:[],x=Kn.parse(p??""),S=Kn.parse(y??""),A=m==="+"?x.add(S):x.subtract(S);if(A.isNaN())return ks;t=t.replace(LE,A.toString())}return t}var $E=/\(([^()]*)\)/;function jz(e){for(var t=e,n;(n=$E.exec(t))!=null;){var[,r]=n;t=t.replace($E,DD(r))}return t}function Nz(e){var t=e.replace(/\s+/g,"");return t=jz(t),t=DD(t),t}function kz(e){try{return Nz(e)}catch{return ks}}function hy(e){var t=kz(e.slice(5,-1));return t===ks?"":t}var Mz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rz=["dx","dy","angle","className","breakAll"];function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xv.apply(null,arguments)}function BE(e,t){if(e==null)return{};var n,r,i=Iz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Iz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jD=/[ \f\n\r\t\v\u2028\u2029]+/,ND=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];tn(t)||(n?i=t.toString().split(""):i=t.toString().split(jD));var s=i.map(u=>({word:u,width:Dc(u,r).width})),l=n?0:Dc("",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},Lz=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:d}=e,h=_e(s),p=l,m=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce((Z,ue)=>{var{word:se,width:te}=ue,$=Z[Z.length-1];if($&&(r==null||i||$.width+te+n<Number(r)))$.words.push(se),$.width+=te+n;else{var ee={words:[se],width:te};Z.push(ee)}return Z},[])},y=m(t),x=J=>J.reduce((Y,Z)=>Y.width>Z.width?Y:Z);if(!h||i)return y;var S=y.length>s||x(y).width>Number(r);if(!S)return y;for(var A="",P=J=>{var Y=p.slice(0,J),Z=ND({breakAll:d,style:u,children:Y+A}).wordsWithComputedWidth,ue=m(Z),se=ue.length>s||x(ue).width>Number(r);return[se,ue]},E=0,O=p.length-1,_=0,N;E<=O&&_<=p.length-1;){var j=Math.floor((E+O)/2),D=j-1,[R,k]=P(D),[B]=P(j);if(!R&&!B&&(E=j+1),R&&B&&(O=j-1),!R&&B){N=k;break}_++}return N||y},UE=e=>{var t=tn(e)?[]:e.toString().split(jD);return[{words:t}]},$z=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!Qs.isSsr){var u,d,h=ND({breakAll:s,children:r,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:m}=h;u=p,d=m}else return UE(r);return Lz({breakAll:s,children:r,maxLines:l,style:i},u,d,t,n)}return UE(r)},zE="#808080",vh=C.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:d="end",fill:h=zE}=e,p=BE(e,Mz),m=C.useMemo(()=>$z({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:l,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,l,p.style,p.width]),{dx:y,dy:x,angle:S,className:A,breakAll:P}=p,E=BE(p,Rz);if(!da(n)||!da(r)||m.length===0)return null;var O=n+(_e(y)?y:0),_=r+(_e(x)?x:0),N;switch(d){case"start":N=hy("calc(".concat(s,")"));break;case"middle":N=hy("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:N=hy("calc(".concat(m.length-1," * -").concat(i,")"));break}var j=[];if(l){var D=m[0].width,{width:R}=p;j.push("scale(".concat(_e(R)?R/D:1,")"))}return S&&j.push("rotate(".concat(S,", ").concat(O,", ").concat(_,")")),j.length&&(E.transform=j.join(" ")),C.createElement("text",xv({},$t(E,!0),{ref:t,x:O,y:_,className:rt("recharts-text",A),textAnchor:u,fill:h.includes("url")?zE:h}),m.map((k,B)=>{var J=k.words.join(P?"":" ");return C.createElement("tspan",{x:O,dy:B===0?N:i,key:"".concat(J,"-").concat(B)},J)}))});vh.displayName="Text";var Bz=["labelRef"];function Uz(e,t){if(e==null)return{};var n,r,i=zz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(n),!0).forEach(function(r){Gz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gz(e,t,n){return(t=Hz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hz(e){var t=qz(e,"string");return typeof t=="symbol"?t:t+""}function qz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},La.apply(null,arguments)}var kD=C.createContext(null),Yz=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=C.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return C.createElement(kD.Provider,{value:l},s)},MD=()=>{var e=C.useContext(kD),t=l0();return e||t},Fz=C.createContext(null),Kz=()=>{var e=C.useContext(Fz),t=we(AT);return e||t},Vz=e=>{var{value:t,formatter:n}=e,r=tn(e.children)?t:e.children;return typeof n=="function"?n(r):r},xb=e=>e!=null&&typeof e=="function",Xz=(e,t)=>{var n=en(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Wz=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:d,innerRadius:h,outerRadius:p,startAngle:m,endAngle:y,clockWise:x}=i,S=(h+p)/2,A=Xz(m,y),P=A>=0?1:-1,E,O;switch(t){case"insideStart":E=m+P*s,O=x;break;case"insideEnd":E=y-P*s,O=!x;break;case"end":E=y+P*s,O=x;break;default:throw new Error("Unsupported position ".concat(t))}O=A<=0?O:!O;var _=Bt(u,d,S,E),N=Bt(u,d,S,E+(O?1:-1)*359),j="M".concat(_.x,",").concat(_.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(O?0:1,`,
    `).concat(N.x,",").concat(N.y),D=tn(e.id)?Rc("recharts-radial-line-"):e.id;return C.createElement("text",La({},r,{dominantBaseline:"central",className:rt("recharts-radial-bar-label",l)}),C.createElement("defs",null,C.createElement("path",{id:D,d:j})),C.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Qz=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:d}=e,h=(u+d)/2;if(n==="outside"){var{x:p,y:m}=Bt(r,i,l+t,h);return{x:p,y:m,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x,y:S}=Bt(r,i,y,h);return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},RD=e=>"cx"in e&&_e(e.cx),Zz=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!RD(n)&&(s=n);var{x:l,y:u,width:d,height:h}=t,p=h>=0?1:-1,m=p*r,y=p>0?"end":"start",x=p>0?"start":"end",S=d>=0?1:-1,A=S*r,P=S>0?"end":"start",E=S>0?"start":"end";if(i==="top"){var O={x:l+d/2,y:u-p*r,textAnchor:"middle",verticalAnchor:y};return Tt(Tt({},O),s?{height:Math.max(u-s.y,0),width:d}:{})}if(i==="bottom"){var _={x:l+d/2,y:u+h+m,textAnchor:"middle",verticalAnchor:x};return Tt(Tt({},_),s?{height:Math.max(s.y+s.height-(u+h),0),width:d}:{})}if(i==="left"){var N={x:l-A,y:u+h/2,textAnchor:P,verticalAnchor:"middle"};return Tt(Tt({},N),s?{width:Math.max(N.x-s.x,0),height:h}:{})}if(i==="right"){var j={x:l+d+A,y:u+h/2,textAnchor:E,verticalAnchor:"middle"};return Tt(Tt({},j),s?{width:Math.max(s.x+s.width-j.x,0),height:h}:{})}var D=s?{width:d,height:h}:{};return i==="insideLeft"?Tt({x:l+A,y:u+h/2,textAnchor:E,verticalAnchor:"middle"},D):i==="insideRight"?Tt({x:l+d-A,y:u+h/2,textAnchor:P,verticalAnchor:"middle"},D):i==="insideTop"?Tt({x:l+d/2,y:u+m,textAnchor:"middle",verticalAnchor:x},D):i==="insideBottom"?Tt({x:l+d/2,y:u+h-m,textAnchor:"middle",verticalAnchor:y},D):i==="insideTopLeft"?Tt({x:l+A,y:u+m,textAnchor:E,verticalAnchor:x},D):i==="insideTopRight"?Tt({x:l+d-A,y:u+m,textAnchor:P,verticalAnchor:x},D):i==="insideBottomLeft"?Tt({x:l+A,y:u+h-m,textAnchor:E,verticalAnchor:y},D):i==="insideBottomRight"?Tt({x:l+d-A,y:u+h-m,textAnchor:P,verticalAnchor:y},D):i&&typeof i=="object"&&(_e(i.x)||Co(i.x))&&(_e(i.y)||Co(i.y))?Tt({x:l+_n(i.x,d),y:u+_n(i.y,h),textAnchor:"end",verticalAnchor:"end"},D):Tt({x:l+d/2,y:u+h/2,textAnchor:"middle",verticalAnchor:"middle"},D)},Jz={offset:5};function _i(e){var t=$r(e,Jz),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:d,labelRef:h}=t,p=Kz(),m=MD(),y=r==="center"?m:p??m,x=n||y;if(!x||tn(i)&&tn(s)&&!C.isValidElement(l)&&typeof l!="function")return null;var S=Tt(Tt({},t),{},{viewBox:x});if(C.isValidElement(l)){var{labelRef:A}=S,P=Uz(S,Bz);return C.cloneElement(l,P)}var E;if(typeof l=="function"){if(E=C.createElement(l,S),C.isValidElement(E))return E}else E=Vz(t);var O=RD(x),_=$t(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Wz(t,r,E,_,x);var N=O?Qz(x,t.offset,t.position):Zz(t,x);return C.createElement(vh,La({ref:h,className:rt("recharts-label",u)},_,N,{breakAll:d}),E)}_i.displayName="Label";var e7=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?C.createElement(_i,La({key:"label-implicit"},r)):da(e)?C.createElement(_i,La({key:"label-implicit",value:e},r)):C.isValidElement(e)?e.type===_i?C.cloneElement(e,Tt({key:"label-implicit"},r)):C.createElement(_i,La({key:"label-implicit",content:e},r)):xb(e)?C.createElement(_i,La({key:"label-implicit",content:e},r)):e&&typeof e=="object"?C.createElement(_i,La({},e,{key:"label-implicit"},r)):null};function t7(e){var{label:t}=e,n=MD();return e7(t,n)||null}var py={},my={},HE;function n7(){return HE||(HE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(my)),my}var gy={},qE;function r7(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(gy)),gy}var YE;function a7(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n7(),n=r7(),r=Zv();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(py)),py}var yy,FE;function i7(){return FE||(FE=1,yy=a7().last),yy}var o7=i7();const s7=Xr(o7);var l7=["valueAccessor"],c7=["dataKey","clockWise","id","textBreakAll"];function Dd(){return Dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dd.apply(null,arguments)}function KE(e,t){if(e==null)return{};var n,r,i=u7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var f7=e=>Array.isArray(e.value)?s7(e.value):e.value,ID=C.createContext(void 0),d7=ID.Provider,LD=C.createContext(void 0),h7=LD.Provider;function p7(){return C.useContext(ID)}function m7(){return C.useContext(LD)}function Xf(e){var{valueAccessor:t=f7}=e,n=KE(e,l7),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=KE(n,c7),d=p7(),h=m7(),p=d||h;return!p||!p.length?null:C.createElement(Xn,{className:"recharts-label-list"},p.map((m,y)=>{var x,S=tn(r)?t(m,y):yt(m&&m.payload,r),A=tn(s)?{}:{id:"".concat(s,"-").concat(y)};return C.createElement(_i,Dd({},$t(m,!0),u,A,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(y),index:y}))}))}Xf.displayName="LabelList";function $D(e){var{label:t}=e;return t?t===!0?C.createElement(Xf,{key:"labelList-implicit"}):C.isValidElement(t)||xb(t)?C.createElement(Xf,{key:"labelList-implicit",content:t}):typeof t=="object"?C.createElement(Xf,Dd({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var BD=e=>e.graphicalItems.polarItems,g7=W([xt,tu],V0),Sb=W([BD,Dt,g7],W0),y7=W([Sb],Q0),Ab=W([y7,I0],Z0),v7=W([Ab,Dt,Sb],eb),b7=W([Ab,Dt,Sb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=yt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:yt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),VE=()=>{},x7=W([Dt,GT,VE,b7,VE,Qe,xt],nb),UD=W([Dt,Qe,Ab,v7,eu,xt,x7],rb),S7=W([UD,Dt,rl],ob);W([Dt,UD,S7,xt],lb);var A7={radiusAxis:{},angleAxis:{}},zD=dr({name:"polarAxis",initialState:A7,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:sK,removeRadiusAxis:lK,addAngleAxis:cK,removeAngleAxis:uK}=zD.actions,C7=zD.reducer;function XE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XE(Object(n),!0).forEach(function(r){P7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P7(e,t,n){return(t=E7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E7(e){var t=w7(e,"string");return typeof t=="symbol"?t:t+""}function w7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O7=(e,t)=>t,Cb=W([BD,O7],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),_7=[],Pb=(e,t,n)=>n?.length===0?_7:n,GD=W([I0,Cb,Pb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>WE(WE({},t.presentationProps),s.props))),i!=null)return i}}),T7=W([GD,Cb,Pb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=yt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:Xd(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),D7=W([GD,Cb,Pb,Kt],(e,t,n,r)=>{if(!(t==null||e==null))return TG({offset:r,pieSettings:t,displayedData:e,cells:n})}),vy={},QE;function j7(){return QE||(QE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(vy)),vy}var by,ZE;function N7(){return ZE||(ZE=1,by=j7().isPlainObject),by}var k7=N7();const M7=Xr(k7);function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(r){R7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R7(e,t,n){return(t=I7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I7(e){var t=L7(e,"string");return typeof t=="symbol"?t:t+""}function L7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd.apply(null,arguments)}var tw=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},$7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},B7=e=>{var t=$r(e,$7),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:d,animationDuration:h,animationBegin:p,isUpdateAnimationActive:m}=t,y=C.useRef(),[x,S]=C.useState(-1),A=C.useRef(i),P=C.useRef(s),E=C.useRef(l),O=C.useRef(n),_=C.useRef(r),N=nh(e,"trapezoid-");if(C.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var se=y.current.getTotalLength();se&&S(se)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var j=rt("recharts-trapezoid",u);if(!m)return C.createElement("g",null,C.createElement("path",jd({},$t(t,!0),{className:j,d:tw(n,r,i,s,l)})));var D=A.current,R=P.current,k=E.current,B=O.current,J=_.current,Y="0px ".concat(x===-1?1:x,"px"),Z="".concat(x,"px 0px"),ue=d_(["strokeDasharray"],h,d);return C.createElement(th,{animationId:N,key:N,canBegin:x>0,duration:h,easing:d,isActive:m,begin:p},se=>{var te=gn(D,i,se),$=gn(R,s,se),ee=gn(k,l,se),pe=gn(B,n,se),he=gn(J,r,se);y.current&&(A.current=te,P.current=$,E.current=ee,O.current=pe,_.current=he);var I=se>0?{transition:ue,strokeDasharray:Z}:{strokeDasharray:Y};return C.createElement("path",jd({},$t(t,!0),{className:j,d:tw(pe,he,te,$,ee),ref:y,style:ew(ew({},I),t.style)}))})},U7=["option","shapeType","propTransformer","activeClassName","isActive"];function z7(e,t){if(e==null)return{};var n,r,i=G7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function G7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nw(Object(n),!0).forEach(function(r){H7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H7(e,t,n){return(t=q7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q7(e){var t=Y7(e,"string");return typeof t=="symbol"?t:t+""}function Y7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F7(e,t){return Nd(Nd({},t),e)}function K7(e,t){return e==="symbols"}function rw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return C.createElement(g_,n);case"trapezoid":return C.createElement(B7,n);case"sector":return C.createElement(b_,n);case"symbols":if(K7(t))return C.createElement(Xv,n);break;default:return null}}function V7(e){return C.isValidElement(e)?e.props:e}function HD(e){var{option:t,shapeType:n,propTransformer:r=F7,activeClassName:i="recharts-active-shape",isActive:s}=e,l=z7(e,U7),u;if(C.isValidElement(t))u=C.cloneElement(t,Nd(Nd({},l),V7(t)));else if(typeof t=="function")u=t(l);else if(M7(t)&&typeof t!="boolean"){var d=r(t,l);u=C.createElement(rw,{shapeType:n,elementProps:d})}else{var h=l;u=C.createElement(rw,{shapeType:n,elementProps:h})}return s?C.createElement(Xn,{className:i},u):u}var Eb=(e,t)=>{var n=Ct();return(r,i)=>s=>{e?.(r,i,s),n(aD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},wb=e=>{var t=Ct();return(n,r)=>i=>{e?.(n,r,i),t(D6())}},Ob=(e,t)=>{var n=Ct();return(r,i)=>s=>{e?.(r,i,s),n(j6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function qD(e){var{fn:t,args:n}=e,r=Ct(),i=Lr();return C.useEffect(()=>{if(!i){var s=t(n);return r(O6(s)),()=>{r(_6(s))}}},[t,n,r,i]),null}var YD=()=>{};function X7(e){var{legendPayload:t}=e,n=Ct(),r=Lr();return C.useEffect(()=>r?YD:(n(l_(t)),()=>{n(c_(t))}),[n,r,t]),null}function W7(e){var{legendPayload:t}=e,n=Ct(),r=we(Qe);return C.useEffect(()=>r!=="centric"&&r!=="radial"?YD:(n(l_(t)),()=>{n(c_(t))}),[n,r,t]),null}var xy,Q7=()=>{var[e]=C.useState(()=>Rc("uid-"));return e},Z7=(xy=QN.useId)!==null&&xy!==void 0?xy:Q7;function J7(e,t){var n=Z7();return t||(e?"".concat(e,"-").concat(n):n)}var eG=C.createContext(void 0),FD=e=>{var{id:t,type:n,children:r}=e,i=J7("recharts-".concat(n),t);return C.createElement(eG.Provider,{value:i},r(i))},tG={cartesianItems:[],polarItems:[]},KD=dr({name:"graphicalItems",initialState:tG,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Ua(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Ua(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Ua(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:nG,replaceCartesianGraphicalItem:rG,removeCartesianGraphicalItem:aG,addPolarGraphicalItem:iG,removePolarGraphicalItem:oG}=KD.actions,sG=KD.reducer;function lG(e){var t=Ct(),n=C.useRef(null);return C.useEffect(()=>{n.current===null?t(nG(e)):n.current!==e&&t(rG({prev:n.current,next:e})),n.current=e},[t,e]),C.useEffect(()=>()=>{n.current&&(t(aG(n.current)),n.current=null)},[t]),null}function cG(e){var t=Ct();return C.useEffect(()=>(t(iG(e)),()=>{t(oG(e))}),[t,e]),null}var uG=["onMouseEnter","onClick","onMouseLeave"],fG=["id"],dG=["id"];function _b(e,t){if(e==null)return{};var n,r,i=hG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(n),!0).forEach(function(r){pG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pG(e,t,n){return(t=mG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mG(e){var t=gG(e,"string");return typeof t=="symbol"?t:t+""}function gG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(null,arguments)}function yG(e){var t=C.useMemo(()=>qv(e.children,Vs),[e.children]),n=we(r=>T7(r,e.id,t));return n==null?null:C.createElement(W7,{legendPayload:n})}function vG(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:d,tooltipType:h}=e;return{dataDefinedOnItem:r.map(p=>p.tooltipPayload),positions:r.map(p=>p.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:Xd(u,t),hide:d,type:h,color:l,unit:""}}}var bG=(e,t)=>e>t?"start":e<t?"end":"middle",xG=(e,t,n)=>_n(typeof t=="function"?t(e):t,n,n*.8),SG=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=JO(s,l),d=i+_n(e.cx,s,s/2),h=r+_n(e.cy,l,l/2),p=_n(e.innerRadius,u,0),m=xG(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:d,cy:h,innerRadius:p,outerRadius:m,maxRadius:y}},AG=(e,t)=>{var n=en(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function CG(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var PG=(e,t)=>{if(C.isValidElement(e))return C.cloneElement(e,t);if(typeof e=="function")return e(t);var n=rt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return C.createElement(f_,Mi({},t,{type:"linear",className:n}))},EG=(e,t,n)=>{if(C.isValidElement(e))return C.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),C.isValidElement(r)))return r;var i=rt("recharts-pie-label-text",CG(e));return C.createElement(vh,Mi({},t,{alignmentBaseline:"middle",className:i}),r)};function wG(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=Bo(n),d=$t(i,!1),h=$t(s,!1),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((y,x)=>{var S=(y.startAngle+y.endAngle)/2,A=Bt(y.cx,y.cy,y.outerRadius+p,S),P=gt(gt(gt(gt({},u),y),{},{stroke:"none"},d),{},{index:x,textAnchor:bG(A.x,y.cx)},A),E=gt(gt(gt(gt({},u),y),{},{fill:"none",stroke:y.fill},h),{},{index:x,points:[Bt(y.cx,y.cy,y.outerRadius,S),A],key:"line"});return C.createElement(Xn,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(x)},s&&PG(s,E),EG(i,P,yt(y,l)))});return C.createElement(Xn,{className:"recharts-pie-labels"},m)}function OG(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?C.createElement($D,{label:n.label}):C.createElement(wG,{sectors:t,props:n,showLabels:r})}function _G(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=we(Ro),{onMouseEnter:l,onClick:u,onMouseLeave:d}=i,h=_b(i,uG),p=Eb(l,i.dataKey),m=wb(d),y=Ob(u,i.dataKey);return t==null||t.length===0?null:C.createElement(C.Fragment,null,t.map((x,S)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===s,P=s?r:null,E=A?n:P,O=gt(gt({},x),{},{stroke:x.stroke,tabIndex:-1,[a_]:S,[i_]:i.dataKey});return C.createElement(Xn,Mi({tabIndex:-1,className:"recharts-pie-sector"},Fc(h,x,S),{onMouseEnter:p(x,S),onMouseLeave:m(x,S),onClick:y(x,S),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(S)}),C.createElement(HD,Mi({option:E,isActive:A,shapeType:"sector"},O)))}))}function TG(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:d,dataKey:h,nameKey:p,tooltipType:m}=n,y=Math.abs(n.minAngle),x=AG(u,d),S=Math.abs(x),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,P=r.filter(D=>yt(D,h,0)!==0).length,E=(S>=360?P:P-1)*A,O=S-P*y-E,_=r.reduce((D,R)=>{var k=yt(R,h,0);return D+(_e(k)?k:0)},0),N;if(_>0){var j;N=r.map((D,R)=>{var k=yt(D,h,0),B=yt(D,p,R),J=SG(n,s,D),Y=(_e(k)?k:0)/_,Z,ue=gt(gt({},D),i&&i[R]&&i[R].props);R?Z=j.endAngle+en(x)*A*(k!==0?1:0):Z=u;var se=Z+en(x)*((k!==0?y:0)+Y*O),te=(Z+se)/2,$=(J.innerRadius+J.outerRadius)/2,ee=[{name:B,value:k,payload:ue,dataKey:h,type:m}],pe=Bt(J.cx,J.cy,$,te);return j=gt(gt(gt(gt({},n.presentationProps),{},{percent:Y,cornerRadius:l,name:B,tooltipPayload:ee,midAngle:te,middleRadius:$,tooltipPosition:pe},ue),J),{},{value:yt(D,h),startAngle:Z,endAngle:se,payload:ue,paddingAngle:en(x)*A}),j})}return N}function DG(e){var{showLabels:t,sectors:n,children:r}=e,i=C.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return C.createElement(h7,{value:t?i:void 0},r)}function jG(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:d,inactiveShape:h,onAnimationStart:p,onAnimationEnd:m}=t,y=nh(t,"recharts-pie-"),x=n.current,[S,A]=C.useState(!1),P=C.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),E=C.useCallback(()=>{typeof p=="function"&&p(),A(!0)},[p]);return C.createElement(DG,{showLabels:!S,sectors:r},C.createElement(th,{animationId:y,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:E,onAnimationEnd:P,key:y},O=>{var _=[],N=r&&r[0],j=N?.startAngle;return r?.forEach((D,R)=>{var k=x&&x[R],B=R>0?jo(D,"paddingAngle",0):0;if(k){var J=gn(k.endAngle-k.startAngle,D.endAngle-D.startAngle,O),Y=gt(gt({},D),{},{startAngle:j+B,endAngle:j+J+B});_.push(Y),j=Y.endAngle}else{var{endAngle:Z,startAngle:ue}=D,se=gn(0,Z-ue,O),te=gt(gt({},D),{},{startAngle:j+B,endAngle:j+se+B});_.push(te),j=te.endAngle}}),n.current=_,C.createElement(Xn,null,C.createElement(_G,{sectors:_,activeShape:d,inactiveShape:h,allOtherPieProps:t}))}),C.createElement(OG,{showLabels:!S,sectors:r,props:t}),t.children)}var NG={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Qs.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function kG(e){var{id:t}=e,n=_b(e,fG),{hide:r,className:i,rootTabIndex:s}=e,l=C.useMemo(()=>qv(e.children,Vs),[e.children]),u=we(p=>D7(p,t,l)),d=C.useRef(null),h=rt("recharts-pie",i);return r||u==null?(d.current=null,C.createElement(Xn,{tabIndex:s,className:h})):C.createElement(C.Fragment,null,C.createElement(qD,{fn:vG,args:gt(gt({},e),{},{sectors:u})}),C.createElement(Xn,{tabIndex:s,className:h},C.createElement(jG,{props:gt(gt({},n),{},{sectors:u}),previousSectorsRef:d})))}function Sv(e){var t=$r(e,NG),{id:n}=t,r=_b(t,dG),i=Bo(r);return C.createElement(FD,{id:n,type:"pie"},s=>C.createElement(C.Fragment,null,C.createElement(cG,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),C.createElement(yG,Mi({},r,{id:s})),C.createElement(kG,Mi({},r,{id:s}))))}Sv.displayName="Pie";function iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ow(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(n),!0).forEach(function(r){MG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MG(e,t,n){return(t=RG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RG(e){var t=IG(e,"string");return typeof t=="symbol"?t:t+""}function IG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LG={xAxis:{},yAxis:{},zAxis:{}},VD=dr({name:"cartesianAxis",initialState:LG,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=ow(ow({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:$G,removeXAxis:BG,addYAxis:UG,removeYAxis:zG,addZAxis:fK,removeZAxis:dK,updateYAxisWidth:GG}=VD.actions,HG=VD.reducer,qG=W([Kt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),YG=W([qG,Ka,Va],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),XD=()=>we(YG),FG="Invariant failed";function KG(e,t){throw new Error(FG)}var VG=["x","y"];function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Av.apply(null,arguments)}function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ac(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(n),!0).forEach(function(r){XG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XG(e,t,n){return(t=WG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WG(e){var t=QG(e,"string");return typeof t=="symbol"?t:t+""}function QG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZG(e,t){if(e==null)return{};var n,r,i=JG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function JG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function e9(e,t){var{x:n,y:r}=e,i=ZG(e,VG),s="".concat(n),l=parseInt(s,10),u="".concat(r),d=parseInt(u,10),h="".concat(t.height||i.height),p=parseInt(h,10),m="".concat(t.width||i.width),y=parseInt(m,10);return Ac(Ac(Ac(Ac(Ac({},t),i),l?{x:l}:{}),d?{y:d}:{}),{},{height:p,width:y,name:t.name,radius:t.radius})}function Tb(e){return C.createElement(HD,Av({shapeType:"rectangle",propTransformer:e9,activeClassName:"recharts-active-bar"},e))}var t9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(_e(t))return t;var s=_e(r)||tn(r);return s?t(r,i):(s||KG(),n)}},n9={},WD=dr({name:"errorBars",initialState:n9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:hK,replaceErrorBar:pK,removeErrorBar:mK}=WD.actions,r9=WD.reducer,a9=["children"];function i9(e,t){if(e==null)return{};var n,r,i=o9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var s9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},l9=C.createContext(s9);function c9(e){var{children:t}=e,n=i9(e,a9);return C.createElement(l9.Provider,{value:n},t)}function QD(e,t){var n,r,i=we(h=>Ui(h,e)),s=we(h=>zi(h,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:ar.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:ir.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function u9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=XD(),{needClipX:s,needClipY:l,needClip:u}=QD(t,n);if(!u)return null;var{x:d,y:h,width:p,height:m}=i;return C.createElement("clipPath",{id:"clipPath-".concat(r)},C.createElement("rect",{x:s?d:d-p/2,y:l?h:h-m/2,width:s?p:p*2,height:l?m:m*2}))}var f9=["onMouseEnter","onMouseLeave","onClick"],d9=["value","background","tooltipPosition"],h9=["id"],p9=["onMouseEnter","onClick","onMouseLeave"];function Ri(){return Ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ri.apply(null,arguments)}function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(r){m9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m9(e,t,n){return(t=g9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g9(e){var t=y9(e,"string");return typeof t=="symbol"?t:t+""}function y9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kd(e,t){if(e==null)return{};var n,r,i=v9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var b9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Xd(n,t),payload:e}]};function x9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Xd(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function S9(e){var t=we(Ro),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=s,h=kd(s,f9),p=Eb(l,r),m=wb(u),y=Ob(d,r);if(!i||n==null)return null;var x=$t(i,!1);return C.createElement(C.Fragment,null,n.map((S,A)=>{var{value:P,background:E,tooltipPosition:O}=S,_=kd(S,d9);if(!E)return null;var N=p(S,A),j=m(S,A),D=y(S,A),R=Rn(Rn(Rn(Rn(Rn({option:i,isActive:String(A)===t},_),{},{fill:"#eee"},E),x),Fc(h,S,A)),{},{onMouseEnter:N,onMouseLeave:j,onClick:D,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return C.createElement(Tb,Ri({key:"background-bar-".concat(A)},R))}))}function A9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Rn(Rn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return C.createElement(d7,{value:t?i:void 0},n)}function C9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=we(Ro),d=we(yD),h=n&&String(s)===u&&(d==null||l===d),p=h?n:t;return C.createElement(Tb,Ri({},r,i,{isActive:h,option:p,index:s,dataKey:l}))}function P9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return C.createElement(Tb,Ri({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function E9(e){var{data:t,props:n}=e,r=Bo(n),{id:i}=r,s=kd(r,h9),{shape:l,dataKey:u,activeBar:d}=n,{onMouseEnter:h,onClick:p,onMouseLeave:m}=n,y=kd(n,p9),x=Eb(h,u),S=wb(m),A=Ob(p,u);return t?C.createElement(C.Fragment,null,t.map((P,E)=>C.createElement(Xn,Ri({className:"recharts-bar-rectangle"},Fc(y,P,E),{onMouseEnter:x(P,E),onMouseLeave:S(P,E),onClick:A(P,E),key:"rectangle-".concat(P?.x,"-").concat(P?.y,"-").concat(P?.value,"-").concat(E)}),d?C.createElement(C9,{shape:l,activeBar:d,baseProps:s,entry:P,index:E,dataKey:u}):C.createElement(P9,{shape:l,baseProps:s,entry:P,index:E,dataKey:u})))):null}function w9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:h,onAnimationStart:p}=t,m=n.current,y=nh(t,"recharts-bar-"),[x,S]=C.useState(!1),A=!x,P=C.useCallback(()=>{typeof h=="function"&&h(),S(!1)},[h]),E=C.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return C.createElement(A9,{showLabels:A,rects:r},C.createElement(th,{animationId:y,begin:l,duration:u,isActive:s,easing:d,onAnimationEnd:P,onAnimationStart:E,key:y},O=>{var _=O===1?r:r?.map((N,j)=>{var D=m&&m[j];if(D)return Rn(Rn({},N),{},{x:gn(D.x,N.x,O),y:gn(D.y,N.y,O),width:gn(D.width,N.width,O),height:gn(D.height,N.height,O)});if(i==="horizontal"){var R=gn(0,N.height,O);return Rn(Rn({},N),{},{y:N.y+N.height-R,height:R})}var k=gn(0,N.width,O);return Rn(Rn({},N),{},{width:k})});return O>0&&(n.current=_??null),_==null?null:C.createElement(Xn,null,C.createElement(E9,{props:t,data:_}))}),C.createElement($D,{label:t.label}),t.children)}function O9(e){var t=C.useRef(null);return C.createElement(w9,{previousRectanglesRef:t,props:e})}var ZD=0,_9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:yt(e,t)}};class T9 extends C.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:d,id:h}=this.props;if(t||n==null)return null;var p=rt("recharts-bar",i),m=h;return C.createElement(Xn,{className:p,id:h},u&&C.createElement("defs",null,C.createElement(u9,{clipPathId:m,xAxisId:s,yAxisId:l})),C.createElement(Xn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},C.createElement(S9,{data:n,dataKey:r,background:d,allOtherBarProps:this.props}),C.createElement(O9,this.props)))}}var D9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Qs.isSsr,legendType:"rect",minPointSize:ZD,xAxisId:0,yAxisId:0};function j9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:h,isAnimationActive:p}=e,{needClip:m}=QD(t,n),y=f0(),x=Lr(),S=qv(e.children,Vs),A=we(O=>aH(O,t,n,x,e.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var P,E=A?.[0];return E==null||E.height==null||E.width==null?P=0:P=y==="vertical"?E.height/2:E.width/2,C.createElement(c9,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:_9,errorBarOffset:P},C.createElement(T9,Ri({},e,{layout:y,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:h,isAnimationActive:p})))}function N9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:h,stackedData:p,displayedData:m,offset:y,cells:x,parentViewBox:S}=e,A=t==="horizontal"?u:l,P=p?A.scale.domain():null,E=VL({numericAxis:A});return m.map((O,_)=>{var N,j,D,R,k,B;p?N=GL(p[_],P):(N=yt(O,n),Array.isArray(N)||(N=[E,N]));var J=t9(r,ZD)(N[1],_);if(t==="horizontal"){var Y,[Z,ue]=[u.scale(N[0]),u.scale(N[1])];j=XC({axis:l,ticks:d,bandSize:s,offset:i.offset,entry:O,index:_}),D=(Y=ue??Z)!==null&&Y!==void 0?Y:void 0,R=i.size;var se=Z-ue;if(k=cr(se)?0:se,B={x:j,y:y.top,width:R,height:y.height},Math.abs(J)>0&&Math.abs(k)<Math.abs(J)){var te=en(k||J)*(Math.abs(J)-Math.abs(k));D-=te,k+=te}}else{var[$,ee]=[l.scale(N[0]),l.scale(N[1])];if(j=$,D=XC({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:O,index:_}),R=ee-$,k=i.size,B={x:y.left,y:D,width:y.width,height:k},Math.abs(J)>0&&Math.abs(R)<Math.abs(J)){var pe=en(R||J)*(Math.abs(J)-Math.abs(R));R+=pe}}if(j==null||D==null||R==null||k==null)return null;var he=Rn(Rn({},O),{},{x:j,y:D,width:R,height:k,value:p?N:N[1],payload:O,background:B,tooltipPosition:{x:j+R/2,y:D+k/2},parentViewBox:S},x&&x[_]&&x[_].props);return he}).filter(Boolean)}function JD(e){var t=$r(e,D9),n=Lr();return C.createElement(FD,{id:t.id,type:"bar"},r=>C.createElement(C.Fragment,null,C.createElement(X7,{legendPayload:b9(t)}),C.createElement(qD,{fn:x9,args:t}),C.createElement(lG,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:KL(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),C.createElement(j9,Ri({},t,{id:r}))))}JD.displayName="Bar";function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Uf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(r){k9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k9(e,t,n){return(t=M9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M9(e){var t=R9(e,"string");return typeof t=="symbol"?t:t+""}function R9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I9=(e,t)=>t,L9=(e,t,n)=>n,$9=(e,t,n,r)=>r,B9=(e,t,n,r,i)=>i,su=W([X0,B9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),U9=W([su],e=>e?.maxBarSize),z9=(e,t,n,r,i,s)=>s,uw=(e,t,n)=>{var r=n??e;if(!tn(r))return _n(r,t,0)},G9=W([Qe,X0,I9,L9,$9],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),H9=(e,t,n,r)=>{var i=Qe(e);return i==="horizontal"?mv(e,"yAxis",n,r):mv(e,"xAxis",t,r)},q9=(e,t,n)=>{var r=Qe(e);return r==="horizontal"?dE(e,"xAxis",t):dE(e,"yAxis",n)},Y9=(e,t,n)=>{var r={},i=e.filter(dh),s=e.filter(h=>h.stackId==null),l=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),r),u=Object.entries(l).map(h=>{var[p,m]=h,y=m.map(S=>S.dataKey),x=uw(t,n,m[0].barSize);return{stackId:p,dataKeys:y,barSize:x}}),d=s.map(h=>{var p=[h.dataKey].filter(y=>y!=null),m=uw(t,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:m}});return[...u,...d]},F9=W([G9,_8,q9],Y9),K9=(e,t,n,r,i)=>{var s,l,u=su(e,t,n,r,i);if(u!=null){var d=Qe(e),h=mT(e),{maxBarSize:p}=u,m=tn(p)?h:p,y,x;return d==="horizontal"?(y=Ks(e,"xAxis",t,r),x=Fs(e,"xAxis",t,r)):(y=Ks(e,"yAxis",n,r),x=Fs(e,"yAxis",n,r)),(s=(l=o0(y,x,!0))!==null&&l!==void 0?l:m)!==null&&s!==void 0?s:0}},ej=(e,t,n,r)=>{var i=Qe(e),s,l;return i==="horizontal"?(s=Ks(e,"xAxis",t,r),l=Fs(e,"xAxis",t,r)):(s=Ks(e,"yAxis",n,r),l=Fs(e,"yAxis",n,r)),o0(s,l)};function V9(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=_n(e,n,0,!0),u,d=[];if(fr(r[0].barSize)){var h=!1,p=n/s,m=r.reduce((E,O)=>E+(O.barSize||0),0);m+=(s-1)*l,m>=n&&(m-=(s-1)*l,l=0),m>=n&&p>0&&(h=!0,p*=.9,m=s*p);var y=(n-m)/2>>0,x={offset:y-l,size:0};u=r.reduce((E,O)=>{var _,N={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:x.offset+x.size+l,size:h?p:(_=O.barSize)!==null&&_!==void 0?_:0}},j=[...E,N];return x=j[j.length-1].position,j},d)}else{var S=_n(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var A=(n-2*S-(s-1)*l)/s;A>1&&(A>>=0);var P=fr(i)?Math.min(A,i):A;u=r.reduce((E,O,_)=>[...E,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:S+(A+l)*_+(A-P)/2,size:P}}],d)}return u}}var X9=(e,t,n,r,i,s,l)=>{var u=tn(l)?t:l,d=V9(n,r,i!==s?i:s,e,u);return i!==s&&d!=null&&(d=d.map(h=>Uf(Uf({},h),{},{position:Uf(Uf({},h.position),{},{offset:h.position.offset-i/2})}))),d},W9=W([F9,mT,O8,gT,K9,ej,U9],X9),Q9=(e,t,n,r)=>Ks(e,"xAxis",t,r),Z9=(e,t,n,r)=>Ks(e,"yAxis",n,r),J9=(e,t,n,r)=>Fs(e,"xAxis",t,r),eH=(e,t,n,r)=>Fs(e,"yAxis",n,r),tH=W([W9,su],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),nH=(e,t)=>{var n=F0(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},rH=W([H9,su],nH),aH=W([Kt,s0,Q9,Z9,J9,eH,tH,Qe,L0,ej,rH,su,z9],(e,t,n,r,i,s,l,u,d,h,p,m,y)=>{var{chartData:x,dataStartIndex:S,dataEndIndex:A}=d;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||h==null)){var{data:P}=m,E;if(P!=null&&P.length>0?E=P:E=x?.slice(S,A+1),E!=null)return N9({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:E,offset:e,cells:y})}}),tj=e=>{var{chartData:t}=e,n=Ct(),r=Lr();return C.useEffect(()=>r?()=>{}:(n(AE(t)),()=>{n(AE(void 0))}),[t,n,r]),null},fw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},nj=dr({name:"brush",initialState:fw,reducers:{setBrushSettings(e,t){return t.payload==null?fw:t.payload}}}),{setBrushSettings:gK}=nj.actions,iH=nj.reducer;function oH(e,t,n){return(t=sH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sH(e){var t=lH(e,"string");return typeof t=="symbol"?t:t+""}function lH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Db{static create(t){return new Db(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}oH(Db,"EPS",1e-4);function cH(e){return(e%180+180)%180}var uH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=cH(i),l=s*Math.PI/180,u=Math.atan(r/n),d=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(d)},fH={dots:[],areas:[],lines:[]},rj=dr({name:"referenceElements",initialState:fH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ua(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ua(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ua(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:yK,removeDot:vK,addArea:bK,removeArea:xK,addLine:SK,removeLine:AK}=rj.actions,dH=rj.reducer,hH=C.createContext(void 0),pH=e=>{var{children:t}=e,[n]=C.useState("".concat(Rc("recharts"),"-clip")),r=XD();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return C.createElement(hH.Provider,{value:n},C.createElement("defs",null,C.createElement("clipPath",{id:n},C.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function Sy(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function aj(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function mH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return uH(r,n)}function gH(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Md(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function yH(e,t){return aj(e,t+1)}function vH(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,d=0,h=1,p=l,m=function(){var S=r?.[d];if(S===void 0)return{v:aj(r,h)};var A=d,P,E=()=>(P===void 0&&(P=n(S,A)),P),O=S.coordinate,_=d===0||Md(e,O,E,p,u);_||(d=0,p=l,h+=1),_&&(p=O+e*(E()/2+i),d+=h)},y;h<=s.length;)if(y=m(),y)return y.v;return[]}function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(r){bH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bH(e,t,n){return(t=xH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xH(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AH(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:d}=t,h=function(y){var x=s[y],S,A=()=>(S===void 0&&(S=n(x,y)),S);if(y===l-1){var P=e*(x.coordinate+e*A()/2-d);s[y]=x=En(En({},x),{},{tickCoord:P>0?x.coordinate-P*e:x.coordinate})}else s[y]=x=En(En({},x),{},{tickCoord:x.coordinate});var E=Md(e,x.tickCoord,A,u,d);E&&(d=x.tickCoord-e*(A()/2+i),s[y]=En(En({},x),{},{isShow:!0}))},p=l-1;p>=0;p--)h(p);return s}function CH(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:d,end:h}=t;if(s){var p=r[u-1],m=n(p,u-1),y=e*(p.coordinate+e*m/2-h);l[u-1]=p=En(En({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate});var x=Md(e,p.tickCoord,()=>m,d,h);x&&(h=p.tickCoord-e*(m/2+i),l[u-1]=En(En({},p),{},{isShow:!0}))}for(var S=s?u-1:u,A=function(O){var _=l[O],N,j=()=>(N===void 0&&(N=n(_,O)),N);if(O===0){var D=e*(_.coordinate-e*j()/2-d);l[O]=_=En(En({},_),{},{tickCoord:D<0?_.coordinate-D*e:_.coordinate})}else l[O]=_=En(En({},_),{},{tickCoord:_.coordinate});var R=Md(e,_.tickCoord,j,d,h);R&&(d=_.tickCoord+e*(j()/2+i),l[O]=En(En({},_),{},{isShow:!0}))},P=0;P<S;P++)A(P);return l}function jb(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:d,tickFormatter:h,unit:p,angle:m}=e;if(!i||!i.length||!r)return[];if(_e(d)||Qs.isSsr){var y;return(y=yH(i,_e(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],S=u==="top"||u==="bottom"?"width":"height",A=p&&S==="width"?Dc(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},P=(_,N)=>{var j=typeof h=="function"?h(_.value,N):_.value;return S==="width"?mH(Dc(j,{fontSize:t,letterSpacing:n}),A,m):Dc(j,{fontSize:t,letterSpacing:n})[S]},E=i.length>=2?en(i[1].coordinate-i[0].coordinate):1,O=gH(s,E,S);return d==="equidistantPreserveStart"?vH(E,O,P,i,l):(d==="preserveStart"||d==="preserveStartEnd"?x=CH(E,O,P,i,l,d==="preserveStartEnd"):x=AH(E,O,P,i,l),x.filter(_=>_.isShow))}var PH=["viewBox"],EH=["viewBox"];function Ms(){return Ms=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ms.apply(null,arguments)}function hw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(n),!0).forEach(function(r){Nb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pw(e,t){if(e==null)return{};var n,r,i=wH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Nb(e,t,n){return(t=OH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Gi extends C.Component{constructor(t){super(t),this.tickRefs=C.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=pw(t,PH),s=this.props,{viewBox:l}=s,u=pw(s,EH);return!Sy(r,l)||!Sy(i,u)||!Sy(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:d,tickMargin:h}=this.props,p,m,y,x,S,A,P=d?-1:1,E=t.tickSize||u,O=_e(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":p=m=t.coordinate,x=r+ +!d*s,y=x-P*E,A=y-P*h,S=O;break;case"left":y=x=t.coordinate,m=n+ +!d*i,p=m-P*E,S=p-P*h,A=O;break;case"right":y=x=t.coordinate,m=n+ +d*i,p=m+P*E,S=p+P*h,A=O;break;default:p=m=t.coordinate,x=r+ +d*s,y=x+P*E,A=y+P*h,S=O;break}return{line:{x1:p,y1:y,x2:m,y2:x},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,d=Yt(Yt(Yt({},$t(this.props,!1)),$t(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!l||s==="bottom"&&l);d=Yt(Yt({},d),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var p=+(s==="left"&&!l||s==="right"&&l);d=Yt(Yt({},d),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+i})}return C.createElement("line",Ms({},d,{className:rt("recharts-cartesian-axis-line",jo(u,"className"))}))}static renderTickItem(t,n,r){var i,s=rt(n.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(t))i=C.cloneElement(t,Yt(Yt({},n),{},{className:s}));else if(typeof t=="function")i=t(Yt(Yt({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=rt(l,t.className)),i=C.createElement(vh,Ms({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:d,padding:h,tickTextProps:p}=this.props,m=jb(Yt(Yt({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),S=Bo(this.props),A=$t(l,!1),P=Yt(Yt({},S),{},{fill:"none"},$t(i,!1)),E=m.map((O,_)=>{var{line:N,tick:j}=this.getTickLineCoord(O),D=Yt(Yt(Yt(Yt({textAnchor:y,verticalAnchor:x},S),{},{stroke:"none",fill:s},A),j),{},{index:_,payload:O,visibleTicksCount:m.length,tickFormatter:u,padding:h},p);return C.createElement(Xn,Ms({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Fc(this.props,O,_)),i&&C.createElement("line",Ms({},P,N,{className:rt("recharts-cartesian-axis-tick-line",jo(i,"className"))})),l&&Gi.renderTickItem(l,D,"".concat(typeof u=="function"?u(O.value,_):O.value).concat(d||"")))});return E.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},E):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:C.createElement(Xn,{className:rt("recharts-cartesian-axis",i),ref:u=>{if(u){var d=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var h=d[0];if(h){var p=window.getComputedStyle(h).fontSize,m=window.getComputedStyle(h).letterSpacing;(p!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(h).fontSize,letterSpacing:window.getComputedStyle(h).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),C.createElement(Yz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},C.createElement(t7,{label:this.props.label}),this.props.children))}}Nb(Gi,"displayName","CartesianAxis");Nb(Gi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var TH=["x1","y1","x2","y2","key"],DH=["offset"],jH=["xAxisId","yAxisId"],NH=["xAxisId","yAxisId"];function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){kH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kH(e,t,n){return(t=MH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MH(e){var t=RH(e,"string");return typeof t=="symbol"?t:t+""}function RH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wo.apply(null,arguments)}function Rd(e,t){if(e==null)return{};var n,r,i=IH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return C.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function ij(e,t){var n;if(C.isValidElement(e))n=C.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,d=Rd(t,TH),h=Bo(d),{offset:p}=h,m=Rd(h,DH);n=C.createElement("line",wo({},m,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function $H(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Rd(e,jH),d=i.map((h,p)=>{var m=On(On({},u),{},{x1:t,y1:h,x2:t+n,y2:h,key:"line-".concat(p),index:p});return ij(r,m)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function BH(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Rd(e,NH),d=i.map((h,p)=>{var m=On(On({},u),{},{x1:h,y1:t,x2:h,y2:t+n,key:"line-".concat(p),index:p});return ij(r,m)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function UH(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var h=u.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==h[0]&&h.unshift(0);var p=h.map((m,y)=>{var x=!h[y+1],S=x?i+l-m:h[y+1]-m;if(S<=0)return null;var A=y%t.length;return C.createElement("rect",{key:"react-".concat(y),y:m,x:r,height:S,width:s,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function zH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var h=d.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==h[0]&&h.unshift(0);var p=h.map((m,y)=>{var x=!h[y+1],S=x?i+l-m:h[y+1]-m;if(S<=0)return null;var A=y%n.length;return C.createElement("rect",{key:"react-".concat(y),x:m,y:s,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var GH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return t_(jb(On(On(On({},Gi.defaultProps),n),{},{ticks:n_(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},HH=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return t_(jb(On(On(On({},Gi.defaultProps),n),{},{ticks:n_(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},qH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function oj(e){var t=c0(),n=u0(),r=o_(),i=On(On({},$r(e,qH)),{},{x:_e(e.x)?e.x:r.left,y:_e(e.y)?e.y:r.top,width:_e(e.width)?e.width:r.width,height:_e(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:d,width:h,height:p,syncWithTicks:m,horizontalValues:y,verticalValues:x}=i,S=Lr(),A=we(B=>hE(B,"xAxis",s,S)),P=we(B=>hE(B,"yAxis",l,S));if(!_e(h)||h<=0||!_e(p)||p<=0||!_e(u)||u!==+u||!_e(d)||d!==+d)return null;var E=i.verticalCoordinatesGenerator||GH,O=i.horizontalCoordinatesGenerator||HH,{horizontalPoints:_,verticalPoints:N}=i;if((!_||!_.length)&&typeof O=="function"){var j=y&&y.length,D=O({yAxis:P?On(On({},P),{},{ticks:j?y:P.ticks}):void 0,width:t,height:n,offset:r},j?!0:m);Tc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(_=D)}if((!N||!N.length)&&typeof E=="function"){var R=x&&x.length,k=E({xAxis:A?On(On({},A),{},{ticks:R?x:A.ticks}):void 0,width:t,height:n,offset:r},R?!0:m);Tc(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(N=k)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(LH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),C.createElement(UH,wo({},i,{horizontalPoints:_})),C.createElement(zH,wo({},i,{verticalPoints:N})),C.createElement($H,wo({},i,{offset:r,horizontalPoints:_,xAxis:A,yAxis:P})),C.createElement(BH,wo({},i,{offset:r,verticalPoints:N,xAxis:A,yAxis:P})))}oj.displayName="CartesianGrid";var YH=["children"],FH=["dangerouslySetInnerHTML","ticks"],KH=["id"];function sj(e,t,n){return(t=VH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VH(e){var t=XH(e,"string");return typeof t=="symbol"?t:t+""}function XH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cv.apply(null,arguments)}function Pv(e,t){if(e==null)return{};var n,r,i=WH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function QH(e){var t=Ct(),n=C.useMemo(()=>{var{children:r}=e,i=Pv(e,YH);return i},[e]);return C.useEffect(()=>(t($G(n)),()=>{t(BG(n))}),[n,t]),e.children}var ZH=e=>{var{xAxisId:t,className:n}=e,r=we(s0),i=Lr(),s="xAxis",l=we(P=>al(P,s,t,i)),u=we(P=>ZT(P,s,t,i)),d=we(P=>VT(P,t)),h=we(P=>v6(P,t)),p=we(P=>ET(P,t));if(d==null||h==null||p==null)return null;var{dangerouslySetInnerHTML:m,ticks:y}=e,x=Pv(e,FH),{id:S}=p,A=Pv(p,KH);return C.createElement(Gi,Cv({},x,A,{scale:l,x:h.x,y:h.y,width:d.width,height:d.height,className:rt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},JH=e=>{var t,n,r,i,s;return C.createElement(QH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},C.createElement(ZH,e))};class kb extends C.Component{render(){return C.createElement(JH,this.props)}}sj(kb,"displayName","XAxis");sj(kb,"defaultProps",{allowDataOverflow:ar.allowDataOverflow,allowDecimals:ar.allowDecimals,allowDuplicatedCategory:ar.allowDuplicatedCategory,height:ar.height,hide:!1,mirror:ar.mirror,orientation:ar.orientation,padding:ar.padding,reversed:ar.reversed,scale:ar.scale,tickCount:ar.tickCount,type:ar.type,xAxisId:0});var eq=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(p=>{if(p){var m=p.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,d=i+s,h=l+d+u+(n?r:0);return Math.round(h)}return 0},tq=["dangerouslySetInnerHTML","ticks"],nq=["id"];function lj(e,t,n){return(t=rq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rq(e){var t=aq(e,"string");return typeof t=="symbol"?t:t+""}function aq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ev.apply(null,arguments)}function gw(e,t){if(e==null)return{};var n,r,i=iq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function oq(e){var t=Ct();return C.useEffect(()=>(t(UG(e)),()=>{t(zG(e))}),[e,t]),null}var sq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=C.useRef(null),u=C.useRef(null),d=we(s0),h=Lr(),p=Ct(),m="yAxis",y=we(D=>al(D,m,n,h)),x=we(D=>XT(D,n)),S=we(D=>b6(D,n)),A=we(D=>ZT(D,m,n,h)),P=we(D=>wT(D,n));if(C.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!x||xb(s)||C.isValidElement(s)||P==null)){var R=l.current,k=R==null||(D=R.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:B,tickMargin:J}=R.props,Y=eq({ticks:k,label:u.current,labelGapWithTick:5,tickSize:B,tickMargin:J});Math.round(x.width)!==Math.round(Y)&&p(GG({id:n,width:Y}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,p,s,n,i]),x==null||S==null||P==null)return null;var{dangerouslySetInnerHTML:E,ticks:O}=e,_=gw(e,tq),{id:N}=P,j=gw(P,nq);return C.createElement(Gi,Ev({},_,j,{ref:l,labelRef:u,scale:y,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:x.width,height:x.height,className:rt("recharts-".concat(m," ").concat(m),r),viewBox:d,ticks:A}))},lq=e=>{var t,n,r,i,s;return C.createElement(C.Fragment,null,C.createElement(oq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),C.createElement(sq,e))},cq={allowDataOverflow:ir.allowDataOverflow,allowDecimals:ir.allowDecimals,allowDuplicatedCategory:ir.allowDuplicatedCategory,hide:!1,mirror:ir.mirror,orientation:ir.orientation,padding:ir.padding,reversed:ir.reversed,scale:ir.scale,tickCount:ir.tickCount,type:ir.type,width:ir.width,yAxisId:0};class Mb extends C.Component{render(){return C.createElement(lq,this.props)}}lj(Mb,"displayName","YAxis");lj(Mb,"defaultProps",cq);var Ay={exports:{}},Cy={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw;function uq(){if(yw)return Cy;yw=1;var e=Xs();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Cy.useSyncExternalStoreWithSelector=function(d,h,p,m,y){var x=i(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function P(j){if(!E){if(E=!0,O=j,j=m(j),y!==void 0&&S.hasValue){var D=S.value;if(y(D,j))return _=D}return _=j}if(D=_,n(O,j))return D;var R=m(j);return y!==void 0&&y(D,R)?(O=j,D):(O=j,_=R)}var E=!1,O,_,N=p===void 0?null:p;return[function(){return P(h())},N===null?void 0:function(){return P(N())}]},[h,p,m,y]);var A=r(d,x[0],x[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},Cy}var vw;function fq(){return vw||(vw=1,Ay.exports=uq()),Ay.exports}fq();function dq(e){e()}function hq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var bw={notify(){},get:()=>[]};function pq(e,t){let n,r=bw,i=0,s=!1;function l(A){p();const P=r.subscribe(A);let E=!1;return()=>{E||(E=!0,P(),m())}}function u(){r.notify()}function d(){S.onStateChange&&S.onStateChange()}function h(){return s}function p(){i++,n||(n=e.subscribe(d),r=hq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=bw)}function y(){s||(s=!0,p())}function x(){s&&(s=!1,m())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:h,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return S}var mq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gq=mq(),yq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",vq=yq(),bq=()=>gq||vq?C.useLayoutEffect:C.useEffect,xq=bq(),Sq=Symbol.for("react-redux-context"),Aq=typeof globalThis<"u"?globalThis:{};function Cq(){if(!C.createContext)return{};const e=Aq[Sq]??=new Map;let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var Pq=Cq();function Eq(e){const{children:t,context:n,serverState:r,store:i}=e,s=C.useMemo(()=>{const d=pq(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=C.useMemo(()=>i.getState(),[i]);xq(()=>{const{subscription:d}=s;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[s,l]);const u=n||Pq;return C.createElement(u.Provider,{value:s},t)}var wq=Eq,Oq=(e,t)=>t,Rb=W([Oq,Qe,AT,Xt,hD,Wa,CU,Kt],_U),Ib=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},cj=Rr("mouseClick"),uj=Vc();uj.startListening({actionCreator:cj,effect:(e,t)=>{var n=e.payload,r=Rb(t.getState(),Ib(n));r?.activeIndex!=null&&t.dispatch(N6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var wv=Rr("mouseMove"),fj=Vc();fj.startListening({actionCreator:wv,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=fb(r,r.tooltip.settings.shared),s=Rb(r,Ib(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(oD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(iD()))}});function _q(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var xw={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},dj=dr({name:"rootProps",initialState:xw,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:xw.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Tq=dj.reducer,{updateOptions:Dq}=dj.actions,hj=dr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:jq}=hj.actions,Nq=hj.reducer,pj=Rr("keyDown"),mj=Rr("focus"),Lb=Vc();Lb.startListening({actionCreator:pj,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(db(i,ol(n))),u=Wa(n);if(s==="Enter"){var d=Td(n,"axis","hover",String(i.index));t.dispatch(yv({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=C6(n),p=h==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,y=l+m*p;if(!(u==null||y>=u.length||y<0)){var x=Td(n,"axis","hover",String(y));t.dispatch(yv({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Lb.startListening({actionCreator:mj,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=Td(n,"axis","hover",String(s));t.dispatch(yv({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Dr=Rr("externalEvent"),gj=Vc();gj.startListening({actionCreator:Dr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:pU(n),activeDataKey:yD(n),activeIndex:Ro(n),activeLabel:gD(n),activeTooltipIndex:Ro(n),isTooltipActive:mU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var kq=W([il],e=>e.tooltipItemPayloads),Mq=W([kq,iu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),yj=Rr("touchMove"),vj=Vc();vj.startListening({actionCreator:yj,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=fb(r,r.tooltip.settings.shared);if(i==="axis"){var s=Rb(r,Ib({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(oD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(a_),p=(l=d.getAttribute(i_))!==null&&l!==void 0?l:void 0,m=Mq(t.getState(),h,p);t.dispatch(aD({activeDataKey:p,activeIndex:h,activeCoordinate:m}))}}});var Rq=DO({brush:iH,cartesianAxis:HG,chartData:qU,errorBars:r9,graphicalItems:sG,layout:wL,legend:g3,options:BU,polarAxis:C7,polarOptions:Nq,referenceElements:dH,rootProps:Tq,tooltip:k6}),Iq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Q4({reducer:Rq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([uj.middleware,fj.middleware,Lb.middleware,gj.middleware,vj.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:_q},name:"recharts-".concat(n)}})};function bj(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Lr(),s=C.useRef(null);if(i)return n;s.current==null&&(s.current=Iq(t,r));var l=e0;return C.createElement(wq,{context:l,store:s.current},n)}function xj(e){var{layout:t,width:n,height:r,margin:i}=e,s=Ct(),l=Lr();return C.useEffect(()=>{l||(s(CL(t)),s(PL({width:n,height:r})),s(AL(i)))},[s,l,t,n,r,i]),null}function Sj(e){var t=Ct();return C.useEffect(()=>{t(Dq(e))},[t,e]),null}var Lq=["children"];function $q(e,t){if(e==null)return{};var n,r,i=Bq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Id(){return Id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Id.apply(null,arguments)}var Uq={width:"100%",height:"100%"},zq=C.forwardRef((e,t)=>{var n=c0(),r=u0(),i=u_();if(!zs(n)||!zs(r))return null;var{children:s,otherAttributes:l,title:u,desc:d}=e,h,p;return typeof l.tabIndex=="number"?h=l.tabIndex:h=i?0:void 0,typeof l.role=="string"?p=l.role:p=i?"application":void 0,C.createElement(Yv,Id({},l,{title:u,desc:d,role:p,tabIndex:h,width:n,height:r,style:Uq,ref:t}),s)}),Gq=e=>{var{children:t}=e,n=we(Jd);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return C.createElement(Yv,{width:r,height:i,x:l,y:s},t)},Sw=C.forwardRef((e,t)=>{var{children:n}=e,r=$q(e,Lq),i=Lr();return i?C.createElement(Gq,null,n):C.createElement(zq,Id({ref:t},r),n)});function Hq(){var e=Ct(),[t,n]=C.useState(null),r=we(t3);return C.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;fr(s)&&s!==r&&e(EL(s))}},[t,e,r]),n}function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(n),!0).forEach(function(r){Yq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yq(e,t,n){return(t=Fq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fq(e){var t=Kq(e,"string");return typeof t=="symbol"?t:t+""}function Kq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vq=C.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:h,onMouseLeave:p,onMouseMove:m,onMouseUp:y,onTouchEnd:x,onTouchMove:S,onTouchStart:A,style:P,width:E}=e,O=Ct(),[_,N]=C.useState(null),[j,D]=C.useState(null);JU();var R=Hq(),k=C.useCallback(q=>{R(q),typeof t=="function"&&t(q),N(q),D(q)},[R,t,N,D]),B=C.useCallback(q=>{O(cj(q)),O(Dr({handler:s,reactEvent:q}))},[O,s]),J=C.useCallback(q=>{O(wv(q)),O(Dr({handler:h,reactEvent:q}))},[O,h]),Y=C.useCallback(q=>{O(iD()),O(Dr({handler:p,reactEvent:q}))},[O,p]),Z=C.useCallback(q=>{O(wv(q)),O(Dr({handler:m,reactEvent:q}))},[O,m]),ue=C.useCallback(()=>{O(mj())},[O]),se=C.useCallback(q=>{O(pj(q.key))},[O]),te=C.useCallback(q=>{O(Dr({handler:l,reactEvent:q}))},[O,l]),$=C.useCallback(q=>{O(Dr({handler:u,reactEvent:q}))},[O,u]),ee=C.useCallback(q=>{O(Dr({handler:d,reactEvent:q}))},[O,d]),pe=C.useCallback(q=>{O(Dr({handler:y,reactEvent:q}))},[O,y]),he=C.useCallback(q=>{O(Dr({handler:A,reactEvent:q}))},[O,A]),I=C.useCallback(q=>{O(yj(q)),O(Dr({handler:S,reactEvent:q}))},[O,S]),V=C.useCallback(q=>{O(Dr({handler:x,reactEvent:q}))},[O,x]);return C.createElement(CD.Provider,{value:_},C.createElement(Q2.Provider,{value:j},C.createElement("div",{className:rt("recharts-wrapper",r),style:qq({position:"relative",cursor:"default",width:E,height:i},P),onClick:B,onContextMenu:te,onDoubleClick:$,onFocus:ue,onKeyDown:se,onMouseDown:ee,onMouseEnter:J,onMouseLeave:Y,onMouseMove:Z,onMouseUp:pe,onTouchEnd:V,onTouchMove:I,onTouchStart:he,ref:k},n)))}),Xq=["children","className","width","height","style","compact","title","desc"];function Wq(e,t){if(e==null)return{};var n,r,i=Qq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Aj=C.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:d,desc:h}=e,p=Wq(e,Xq),m=Bo(p);return u?C.createElement(Sw,{otherAttributes:m,title:d,desc:h},n):C.createElement(Vq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},C.createElement(Sw,{otherAttributes:m,title:d,desc:h,ref:t},C.createElement(pH,null,n)))}),Zq=["width","height"];function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ov.apply(null,arguments)}function Jq(e,t){if(e==null)return{};var n,r,i=eY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tY={top:5,right:5,bottom:5,left:5},nY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tY,reverseStackOrder:!1,syncMethod:"index"},rY=C.forwardRef(function(t,n){var r,i=$r(t.categoricalChartProps,nY),{width:s,height:l}=i,u=Jq(i,Zq);if(!zs(s)||!zs(l))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,categoricalChartProps:y}=t,x={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,eventEmitter:void 0};return C.createElement(bj,{preloadedState:{options:x},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:d},C.createElement(tj,{chartData:y.data}),C.createElement(xj,{width:s,height:l,layout:i.layout,margin:i.margin}),C.createElement(Sj,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(Aj,Ov({},u,{width:s,height:l,ref:n})))}),aY=["axis","item"],iY=C.forwardRef((e,t)=>C.createElement(rY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aY,tooltipPayloadSearcher:PD,categoricalChartProps:e,ref:t}));function oY(e){var t=Ct();return C.useEffect(()=>{t(jq(e))},[t,e]),null}var sY=["width","height","layout"];function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_v.apply(null,arguments)}function lY(e,t){if(e==null)return{};var n,r,i=cY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uY={top:5,right:5,bottom:5,left:5},fY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},dY=C.forwardRef(function(t,n){var r,i=$r(t.categoricalChartProps,fY),{width:s,height:l,layout:u}=i,d=lY(i,sY);if(!zs(s)||!zs(l))return null;var{chartName:h,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:y}=t,x={chartName:h,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:y,eventEmitter:void 0};return C.createElement(bj,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:h},C.createElement(tj,{chartData:i.data}),C.createElement(xj,{width:s,height:l,layout:u,margin:i.margin}),C.createElement(Sj,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(oY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),C.createElement(Aj,_v({width:s,height:l},d,{ref:n})))}),hY=["item"],pY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Cw=C.forwardRef((e,t)=>{var n=$r(e,pY);return C.createElement(dY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:hY,tooltipPayloadSearcher:PD,categoricalChartProps:n,ref:t})});const mY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80 transform scale-150",onClick:n=>n.stopPropagation(),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(jc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})}):null,gY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:s})=>{const[l,u]=C.useState(null),[d,h]=C.useState(!1),[p,m]=C.useState(!1),[y,x]=C.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,A]=C.useState(!1),P=C.useRef(null),[E,O]=C.useState({key:"name",direction:"ascending"}),[_,N]=C.useState("cost"),[j,D]=C.useState(!0),R=C.useMemo(()=>{const z=re=>re?re.replace(/_/g," ").toLowerCase().split(" ").map(me=>me.charAt(0).toUpperCase()+me.slice(1)).join(" "):"";return t.map(re=>{const be=[],me=re.effect;if(me.type==="REPEATING_EFFECT")be.push(z(me.type)),me.effects&&Array.isArray(me.effects)&&me.effects.forEach(fe=>{fe.type&&be.push(z(fe.type))});else if(me.type==="MODIFY_DRONE_BASE"&&me.mod){const fe=me.mod.stat,ye=me.mod.value;fe==="attack"?be.push(ye>0?"Attack Buff":"Attack Debuff"):fe==="speed"?be.push(ye>0?"Speed Buff":"Speed Debuff"):fe==="shields"?be.push(ye>0?"Shield Buff":"Shield Debuff"):fe==="cost"?be.push(ye<0?"Cost Reduction":"Cost Increase"):fe==="limit"?be.push(ye>0?"Limit Buff":"Limit Debuff"):fe==="ability"?(be.push("Ability Grant"),me.mod.abilityToAdd&&me.mod.abilityToAdd.name&&be.push(me.mod.abilityToAdd.name)):be.push(z(`${fe} Modification`))}else if(me.type==="MODIFY_STAT"&&me.mod){const fe=me.mod.stat,ye=me.mod.value;me.mod.type,fe==="attack"?be.push(ye>0?"Attack Buff":"Attack Debuff"):fe==="speed"?be.push(ye>0?"Speed Buff":"Speed Debuff"):fe==="shields"?be.push(ye>0?"Shield Buff":"Shield Debuff"):be.push(ye>0?`${fe} Buff`:`${fe} Debuff`)}else me.type==="SEARCH_AND_DRAW"?(be.push(z(me.type)),be.push("Draw")):me.type&&be.push(z(me.type));me.goAgain&&be.push("Go Again"),me.damageType==="PIERCING"&&be.push("Piercing"),me.mod?.type&&be.push(z(me.mod.type));const ae=(()=>{if(re.targeting){const fe=z(re.targeting.type);if(re.targeting.affinity){const ye=re.targeting.affinity.charAt(0)+re.targeting.affinity.slice(1).toLowerCase();return`${fe} (${ye})`}return fe}else if(me.type==="MULTI_MOVE"&&me.source){const fe=me.source.location||"Any",ye=me.source.affinity||"Any",de=ye.charAt(0).toUpperCase()+ye.slice(1).toLowerCase();return`${z(fe)} (${de})`}else if(me.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...re,keywords:be,targetingText:ae}})},[t]),k=C.useMemo(()=>{const z=new Set,re=new Set,be=new Set;R.forEach(ae=>{z.add(ae.cost),re.add(ae.targetingText),ae.keywords.forEach(fe=>be.add(fe))});const me=Array.from(z);return{minCost:Math.min(...me),maxCost:Math.max(...me),targets:["all",...Array.from(re).sort()],abilities:Array.from(be).sort()}},[R]);C.useEffect(()=>{k.minCost!==1/0&&k.maxCost!==-1/0&&x(z=>({...z,cost:{min:k.minCost,max:k.maxCost}}))},[k.minCost,k.maxCost]);const{cardCount:B,deckListForDisplay:J,baseCardCounts:Y}=C.useMemo(()=>{const z={};let re=0;Object.entries(n).forEach(([me,ae])=>{if(ae>0){re+=ae;const fe=R.find(ye=>ye.id===me);if(fe){const ye=fe.baseCardId;z[ye]=(z[ye]||0)+ae}}});const be=Object.entries(n).filter(([,me])=>me>0).map(([me,ae])=>({...R.find(ye=>ye.id===me),quantity:ae})).sort((me,ae)=>me.name.localeCompare(ae.name));return{cardCount:re,deckListForDisplay:be,baseCardCounts:z}},[n,R]),Z=B>=40,ue=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],se=C.useMemo(()=>{const z={};J.forEach(ae=>{const fe=ae.cost||0;z[fe]=(z[fe]||0)+ae.quantity});const re=Object.entries(z).map(([ae,fe])=>({name:`${ae}`,count:fe})).sort((ae,fe)=>parseInt(ae.name)-parseInt(fe.name)),be={};J.forEach(ae=>{ae.keywords&&ae.keywords.forEach(fe=>{be[fe]=(be[fe]||0)+ae.quantity})});const me=Object.entries(be).map(([ae,fe])=>({name:ae,value:fe})).sort((ae,fe)=>fe.value-ae.value);return{barChartData:re,pieChartData:me}},[J]),te=C.useMemo(()=>{let z=[...R].filter(re=>re.cost<y.cost.min||re.cost>y.cost.max||y.target!=="all"&&re.targetingText!==y.target||y.type!=="all"&&re.type!==y.type?!1:y.abilities.length>0?y.abilities.every(be=>re.keywords.includes(be)):!(y.hideEnhanced&&re.id.endsWith("_ENHANCED")));return E.key!==null&&z.sort((re,be)=>{const me=re[E.key],ae=be[E.key];if(me==null&&ae==null)return 0;if(me==null)return 1;if(ae==null)return-1;const fe=String(me).toLowerCase(),ye=String(ae).toLowerCase();return fe<ye?E.direction==="ascending"?-1:1:fe>ye?E.direction==="ascending"?1:-1:re.id.localeCompare(be.id)}),z},[R,y,E]),$=z=>{let re="ascending";E.key===z&&E.direction==="ascending"&&(re="descending"),O({key:z,direction:re})},ee=(z,re)=>{x(be=>({...be,[z]:re}))},pe=z=>{x(re=>{const be=re.abilities.includes(z)?re.abilities.filter(me=>me!==z):[...re.abilities,z];return{...re,abilities:be}})},he=()=>{x({cost:{min:k.minCost,max:k.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),A(!1)},I=()=>{Object.keys(n).forEach(z=>{n[z]>0&&r(z,0)})};C.useEffect(()=>{const z=re=>{P.current&&!P.current.contains(re.target)&&A(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const V=Math.PI/180,q=({cx:z,cy:re,midAngle:be,outerRadius:me,fill:ae,name:fe,value:ye})=>{const de=Math.sin(-V*be),Je=Math.cos(-V*be),He=z+(me+5)*Je,jt=re+(me+5)*de,je=z+(me+15)*Je,Re=re+(me+15)*de,Qr=je+(Je>=0?1:-1)*12,ga=Re,qo=Je>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${He},${jt}L${je},${Re}L${Qr},${ga}`,stroke:ae,fill:"none"}),v.jsx("circle",{cx:Qr,cy:ga,r:2,fill:ae,stroke:"none"}),v.jsx("text",{x:Qr+(Je>=0?1:-1)*8,y:ga,dy:4,textAnchor:qo,fill:"#9CA3AF",fontSize:"11px",children:`${fe} (${ye})`})]})},le=()=>{const[z,re]=C.useState(""),be=C.useRef(null),me=C.useMemo(()=>Object.entries(n).map(([fe,ye])=>`${fe}:${ye}`).join(","),[n]),ae=()=>{be.current.select(),document.execCommand("copy"),re("Copied!"),setTimeout(()=>re(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>h(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:fe=>fe.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:be,readOnly:!0,value:me,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:z}),v.jsxs("button",{onClick:ae,className:"flex items-center gap-2 bg-cyan-600 text-white font-bold py-2 px-4 rounded hover:bg-cyan-700",children:[v.jsx(Mw,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>h(!1),className:"flex items-center gap-2 bg-pink-600 text-white font-bold py-2 px-4 rounded hover:bg-pink-700",children:[v.jsx(Ft,{size:16})," Close"]})]})]})})},ve=()=>{const[z,re]=C.useState(""),[be,me]=C.useState(""),ae=()=>{me("");const fe=s(z);fe.success?m(!1):me(fe.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:fe=>fe.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:z,onChange:fe=>re(fe.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),be&&v.jsx("p",{className:"text-red-500 mt-2",children:be}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-700",children:"Cancel"}),v.jsx("button",{onClick:ae,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded hover:bg-purple-700",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[l&&v.jsx(mY,{card:l,onClose:()=>u(null)}),d&&v.jsx(le,{}),p&&v.jsx(ve,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx($k,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(Sk,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:he,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",y.cost.min," - ",y.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:k.minCost,max:k.maxCost,value:y.cost.min,onChange:z=>ee("cost",{...y.cost,min:Math.min(parseInt(z.target.value),y.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:k.minCost,max:k.maxCost,value:y.cost.max,onChange:z=>ee("cost",{...y.cost,max:Math.max(parseInt(z.target.value),y.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:P,children:[v.jsx("button",{onClick:()=>A(!S),className:"filter-select w-full text-left h-full",children:y.abilities.length===0?"Select Abilities":`${y.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:k.abilities.map(z=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:y.abilities.includes(z),onChange:()=>pe(z),className:"mr-2"}),z]},z))})]}),v.jsxs("select",{onChange:z=>ee("type",z.target.value),value:y.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:y.hideEnhanced,onChange:z=>ee("hideEnhanced",z.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("name"),className:`w-full text-left transition-colors underline cursor-pointer ${E.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",E.key==="name"&&(E.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("type"),className:`w-full text-left transition-colors underline cursor-pointer ${E.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",E.key==="type"&&(E.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${E.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",E.key==="cost"&&(E.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("description"),className:`w-full text-left transition-colors underline cursor-pointer ${E.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",E.key==="description"&&(E.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:te.map((z,re)=>{const be=n[z.id]||0,me=Y[z.baseCardId]||0,ae=z.maxInDeck;return v.jsxs("tr",{className:z.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(sA,{size:18})})}),v.jsx("td",{className:"font-bold",children:z.name}),v.jsx("td",{className:`font-semibold ${z.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:z.type}),v.jsx("td",{children:z.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:z.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:z.keywords.map(fe=>v.jsx("span",{className:"ability-chip",children:fe},fe))})}),v.jsx("td",{className:"text-xs",children:z.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):z.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:ae+1}).map((fe,ye)=>{const de=ye===be,Je=ae-(me-be),He=ye>Je;return v.jsx("button",{onClick:()=>r(z.id,ye),className:`quantity-btn ${de?"selected":""}`,disabled:He,children:ye},ye)})})})]},`${z.id}-${re}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${Z?"text-green-400":"text-white"}`,children:["Your Deck (",B,"/40)"]}),v.jsx("button",{onClick:I,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:J.length>0?J.map(z=>{const re=Y[z.baseCardId]>=z.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(sA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:z.name,children:z.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(z.id,z.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",z.quantity]}),v.jsx("button",{onClick:()=>r(z.id,z.quantity+1),disabled:re,className:"deck-edit-btn",children:"+"})]})]},z.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),B>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!j),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(wc,{size:20,className:`transition-transform duration-300 ${j?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${j?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>N("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>N("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>N("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[_==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(dy,{width:"100%",height:"100%",children:v.jsxs(iY,{data:se.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(oj,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(kb,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(Mb,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(oy,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(JD,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),_==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(dy,{width:"100%",height:"100%",children:v.jsxs(Cw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(Sv,{data:[{name:"Action Cards",value:J.filter(z=>z.type==="Action").reduce((z,re)=>z+re.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:J.filter(z=>z.type==="Upgrade").reduce((z,re)=>z+re.quantity,0),color:"#c084fc"}].filter(z=>z.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:z,value:re,percent:be})=>`${z}: ${re} (${(be*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:J.filter(z=>z.type==="Action").reduce((z,re)=>z+re.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:J.filter(z=>z.type==="Upgrade").reduce((z,re)=>z+re.quantity,0),color:"#c084fc"}].filter(z=>z.value>0).map((z,re)=>v.jsx(Vs,{fill:z.color},`cell-${re}`))}),v.jsx(oy,{}),v.jsx(eh,{})]})})]}),_==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(dy,{width:"100%",height:"100%",children:v.jsxs(Cw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(Sv,{data:se.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:q,outerRadius:60,dataKey:"value",children:se.pieChartData.map((z,re)=>v.jsx(Vs,{fill:ue[re%ue.length]},`cell-${re}`))}),v.jsx(oy,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!Z,className:"w-full p-4 mt-4 text-lg font-bold font-orbitron rounded-lg bg-purple-600 text-white transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed enabled:hover:bg-purple-500",children:"Confirm Deck"})]})]})]})},ma=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})});function yY({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:d,shieldsToRemove:h,shieldsToAdd:p,reallocationPhase:m,totalLocalPlayerDrones:y,totalOpponentPlayerDrones:x,getLocalPlayerId:S,getOpponentPlayerId:A,isMyTurn:P,handlePlayerPass:E,handleReset:O,mandatoryAction:_,multiSelectState:N,AI_HAND_DEBUG_MODE:j,setShowAiHandModal:D,onShowDebugModal:R}){const[k,B]=C.useState(!1),J=C.useRef(null);return C.useEffect(()=>{const Y=Z=>{J.current&&!J.current.contains(Z.target)&&B(!1)};return document.addEventListener("mousedown",Y),()=>{document.removeEventListener("mousedown",Y)}},[]),v.jsxs("header",{className:"w-full flex justify-between items-center mb-2 flex-shrink-0 px-5 pt-8",children:[v.jsxs("div",{className:"flex flex-col items-start gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-pink-300 flex items-center",children:["Opponent Resources",(i==="deployment"||i==="action")&&u===A()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${t.energy>r.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(jc,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.energy," / ",r.totals.maxEnergy]})]}),v.jsxs("div",{onClick:()=>j&&setTimeout(()=>D(!0),100),className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${j?"cursor-pointer hover:bg-gray-800":""} ${t.hand.length>r.totals.handLimit?"text-red-400":""}`,children:[v.jsx(Pk,{className:"text-gray-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.hand.length," / ",r.totals.handLimit]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50",children:[v.jsx(Py,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:s===1?t.initialDeploymentBudget:t.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${x>r.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(oA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[x," / ",r.totals.cpuLimit]})]})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center",children:[v.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-xl font-orbitron",style:{textShadow:"0 0 15px rgba(236, 72, 153, 0.5), 0 0 5px rgba(255, 255, 255, 0.5)"},children:"Drone Wars"}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-300 tracking-widest font-exo",children:hR(i)}),(i==="deployment"||i==="action")&&P()&&!_&&!N&&v.jsx("button",{onClick:E,disabled:l[`${S()}Passed`],className:`btn-clipped text-white font-bold py-1 px-6 transition-colors duration-200 ${l[`${S()}Passed`]?"bg-gray-700 cursor-not-allowed":"bg-red-600 hover:bg-red-500"}`,children:"Pass"})]})]}),v.jsxs("div",{className:"flex flex-col items-end gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-cyan-300 flex items-center",children:["Your Resources",(i==="deployment"||i==="action")&&u===S()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${S()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${e.energy>n.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(jc,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[e.energy," / ",n.totals.maxEnergy]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(Py,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:s===1?e.initialDeploymentBudget:e.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${y>n.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(oA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[y," / ",n.totals.cpuLimit]})]}),i==="allocateShields"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(zf,{className:"text-cyan-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:d})]}),m==="removing"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-orange-500/50",children:[v.jsx(zf,{className:"text-orange-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:h})]}),m==="adding"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-green-500/50",children:[v.jsx(zf,{className:"text-green-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:p})]}),v.jsx("button",{onClick:O,className:"bg-pink-700 text-white p-3 rounded-full shadow-lg hover:bg-pink-600 transition-colors duration-200","aria-label":"Reset Game",children:v.jsx(_k,{})}),v.jsxs("div",{className:"relative",ref:J,children:[v.jsxs("button",{onClick:()=>B(!k),className:"bg-slate-700 text-white p-3 rounded-full shadow-lg hover:bg-slate-600 transition-colors duration-200 flex items-center","aria-label":"Settings",children:[v.jsx(lA,{}),v.jsx(pk,{size:16,className:"ml-1"})]}),k&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:v.jsxs("button",{onClick:()=>{R&&R(),B(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[v.jsx(lA,{size:16}),"Debug View"]})})]})]})]})]})}const bh=()=>{const{gameStateManager:e}=Ii(),t=C.useMemo(()=>e?Pn.getInstance(e):null,[e]),[n,r]=C.useState(null);return C.useEffect(()=>{if(!t)return;const p=()=>{r(t.getCacheStats())};p();const m=setInterval(p,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(p,m)=>t?t.getEffectiveStats(p,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(p,m=[])=>t?t.getEffectiveShipStats(p,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:p=>t?t.getLaneData(p):{lane:p,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(p,m=null)=>t?t.hasGuardianInLane(p,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},Pw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:d,gameEngine:h,turnPhase:p,isMyTurn:m,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,hoveredTarget:P,setHoveredTarget:E})=>{const{getEffectiveShipStats:O}=bh(),_=O(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(N=>{const j=n[N];if(!j)return console.log(` [DEBUG] Lane ${N} rendering EMPTY div - no hover possible:`,{sectionName:j,sectionNameType:typeof j,sectionNameValue:JSON.stringify(j),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},N);const D=e.shipSections[j],R=u.some(B=>B.id===j);let k=null;if(d&&t){if(d==="removing")D.allocatedShields>0?k="can-remove":k="cannot-remove";else if(d==="adding"){const B=h.getEffectiveSectionMaxShields(j,e,n);D.allocatedShields<B?k="can-add":k="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0",children:v.jsx(ed,{section:j,stats:D,effectiveStatsForDisplay:_.bySection[j],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(j):s&&s({id:j,name:j,...D},"section",t)},onAbilityClick:i,isInteractive:l||p==="action"&&t&&D.ability&&S.energy>=D.ability.cost.energy,isCardTarget:R,isInMiddleLane:N===1,isHovered:P?.type==="section"&&P?.target.name===j,onMouseEnter:()=>!t&&E({target:{name:j,...D},type:"section"}),onMouseLeave:()=>!t&&E(null),reallocationState:k,gameEngine:h,turnPhase:p,isMyTurn:m,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A})},N)})})},Ew=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),vY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Wf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:d,lane:h,onAbilityClick:p,isActionTarget:m,droneRefs:y,mandatoryAction:x,localPlayerState:S})=>{const{getEffectiveStats:A}=bh(),P=C.useMemo(()=>Tn.find(le=>le.name===e.name),[e.name]),E=A(e,h),{maxShields:O}=E,_=e.currentShields??O,N=P.abilities.filter(le=>le.type==="ACTIVE"),j=n?"border-cyan-400":"border-pink-500",D=n?"bg-cyan-900":"bg-pink-950",R=n?"text-cyan-100":"text-pink-100",k=n?"bg-cyan-900":"bg-pink-950",B=n?"text-cyan-400":"text-pink-500",J=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",Y=E.attack>E.baseAttack,Z=E.attack<E.baseAttack,ue=Y?"text-green-400":Z?"text-red-400":"text-white",se=E.speed>E.baseSpeed,te=E.speed<E.baseSpeed,$=se?"text-green-400":te?"text-red-400":"text-white",ee=e.isExhausted?"grayscale opacity-60":"",pe=s?"animate-shake":"",he=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",I=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",V=x?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",q=le=>!(e.isExhausted&&le.cost.exhausts!==!1||le.cost.energy&&S.energy<le.cost.energy);return v.jsxs("div",{ref:le=>y.current[e.id]=le,onClick:le=>t&&t(le,e,n),onMouseEnter:u,onMouseLeave:d,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ee} ${pe} ${he} ${I} ${V}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${j} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:O}).map((le,ve)=>ve<_?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:B,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ve):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:J,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ve))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:P.hull}).map((le,ve)=>{const z=ve<e.hull,re=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${z?re:"bg-gray-400"} border border-black/50`},ve)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${D} flex items-center justify-center border-t ${j}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${R} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(Ew,{value:E.attack,isFlat:!1,bgColor:k,textColor:ue})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:v.jsx(Ew,{value:E.speed,isFlat:!0,bgColor:k,textColor:$})}),n&&N.length>0&&q(N[0])&&v.jsx(vY,{onClick:le=>p&&p(le,e,N[0])})]})},bY=(e,t,n,r,i,s,l,u,d,h,p,m,y,x,S,A,P,E,O,_)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(N=>v.jsx(Wf,{drone:N,lane:n,isPlayer:t,onClick:h,onAbilityClick:p,isSelected:m&&m.id===N.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(j=>j.id===N.id),isHit:x.includes(N.id),isPotentialInterceptor:S.includes(N.id),droneRefs:A,mandatoryAction:P,localPlayerState:r,isActionTarget:E.some(j=>j.id===N.id)||O.some(j=>j.id===N.id),onMouseEnter:()=>!t&&_({target:N,type:"drone",lane:n}),onMouseLeave:()=>!t&&_(null)},N.id))}),ww=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:d,multiSelectState:h,turnPhase:p,localPlayerState:m,opponentPlayerState:y,localPlacedSections:x,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:P,handleTokenClick:E,handleAbilityIconClick:O,selectedDrone:_,recentlyHitDrones:N,potentialInterceptors:j,droneRefs:D,mandatoryAction:R,setHoveredTarget:k})=>(bh(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(B=>{const J=t?r():i(),Y=s&&l.some(ue=>ue.id===B&&ue.owner===J)||u&&d.some(ue=>ue.id===B&&ue.owner===J)||h&&d.some(ue=>ue.id===B&&ue.owner===J),Z=t&&(p==="deployment"||p==="action");return v.jsx("div",{onClick:ue=>n(ue,B,t),className:`flex-1 rounded-lg border-2 transition-all duration-200 p-2 lane-background
              ${Y?"border-purple-500 bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":"border-gray-700/50 bg-black/20"}
              ${Z?"cursor-pointer hover:bg-cyan-900/50":""}
            `,children:bY(e.dronesOnBoard[B],t,B,m,y,x,S,A,P,E,O,_,h,N,j,D,R,l,d,k)},B)})}));function xY({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:d,turnPhase:h,reallocationPhase:p,shipAbilityMode:m,hoveredTarget:y,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:P,mandatoryAction:E,gameEngine:O,getLocalPlayerId:_,getOpponentPlayerId:N,isMyTurn:j,getPlacedSectionsForEngine:D,passInfo:R,handleTargetClick:k,handleLaneClick:B,handleShipSectionClick:J,handleShipAbilityClick:Y,handleTokenClick:Z,handleAbilityIconClick:ue,setHoveredTarget:se}){return v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(Pw,{player:t,isPlayer:!1,placedSections:r,onTargetClick:k,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:O,turnPhase:h,isMyTurn:j,passInfo:R,getLocalPlayerId:_,localPlayerState:e,shipAbilityMode:m,hoveredTarget:y,setHoveredTarget:se}),v.jsx(ww,{player:t,isPlayer:!1,onLaneClick:B,getLocalPlayerId:_,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:d,turnPhase:h,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:D,handleTokenClick:Z,handleAbilityIconClick:ue,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:P,mandatoryAction:E,setHoveredTarget:se}),v.jsx(ww,{player:e,isPlayer:!0,onLaneClick:B,getLocalPlayerId:_,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:d,turnPhase:h,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:D,handleTokenClick:Z,handleAbilityIconClick:ue,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:P,mandatoryAction:E,setHoveredTarget:se}),v.jsx(Pw,{player:e,isPlayer:!0,placedSections:n,onSectionClick:J,onAbilityClick:Y,onTargetClick:k,isInteractive:h==="allocateShields"||p,selectedCard:i,validCardTargets:s,reallocationPhase:p,gameEngine:O,turnPhase:h,isMyTurn:j,passInfo:R,getLocalPlayerId:_,localPlayerState:e,shipAbilityMode:m,hoveredTarget:y,setHoveredTarget:se})]})})}const xh=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i})=>{const{name:s,cost:l,image:u,description:d}=e;return v.jsx("div",{onClick:h=>{h.stopPropagation(),(n||i)&&t(e)},className:`
        w-52 h-72 rounded-lg p-1 relative group transition-all duration-200 flex-shrink-0
        ${n?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"grayscale":""}
        ${i?"cursor-pointer ring-2 ring-red-500 animate-pulse":""}
      `,children:v.jsxs("div",{className:`
          w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md
          transition-all duration-200
          ${n&&!r?"group-hover:bg-slate-800":""}
        `,children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:s}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(jc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:l})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:u,alt:s,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:d})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})},SY="_footer_js8yx_10",AY="_tabContainer_js8yx_14",CY="_contentContainer_js8yx_18",PY="_contentOpen_js8yx_22",EY="_contentClosed_js8yx_26",wY="_tabButton_js8yx_32",OY="_tabButtonActive_js8yx_36",_Y="_tabButtonInactive_js8yx_40",TY="_tabIcon_js8yx_44",DY="_multiSelectOverlay_js8yx_50",jY="_multiSelectText_js8yx_54",NY="_handContainer_js8yx_60",kY="_cardPile_js8yx_64",MY="_deckCard_js8yx_68",RY="_deckCardText_js8yx_74",IY="_discardCard_js8yx_78",LY="_discardCardText_js8yx_84",$Y="_pileLabel_js8yx_88",BY="_handSection_js8yx_92",UY="_handHeader_js8yx_96",zY="_handTitle_js8yx_100",GY="_handTitleOverLimit_js8yx_104",HY="_handTitleNormal_js8yx_108",qY="_mandatoryDiscardWarning_js8yx_112",YY="_handCardsContainer_js8yx_116",FY="_handCardsWrapper_js8yx_120",KY="_handCardsWrapperGap_js8yx_124",VY="_cardWrapper_js8yx_128",XY="_optionalDiscardControls_js8yx_133",WY="_optionalDiscardCounter_js8yx_137",QY="_finishDiscardButton_js8yx_141",ZY="_droneContainer_js8yx_148",JY="_droneGrid_js8yx_152",eF="_logContainer_js8yx_158",tF="_logHeader_js8yx_162",nF="_logTitle_js8yx_166",rF="_downloadButton_js8yx_170",aF="_logTableWrapper_js8yx_175",iF="_logTable_js8yx_175",oF="_logTableHeader_js8yx_183",sF="_logTableHeaderCell_js8yx_187",lF="_logTableDebugHeader_js8yx_191",cF="_logTableRow_js8yx_195",uF="_logTableCell_js8yx_199",fF="_logTableCellBold_js8yx_203",dF="_logTableCellGray_js8yx_207",hF="_logTableCellCyan_js8yx_211",pF="_logTableCellYellow_js8yx_215",mF="_logTableCellGrayText_js8yx_219",gF="_logTableCellDebug_js8yx_223",yF="_logTableCellCenter_js8yx_227",vF="_aiDecisionButton_js8yx_231",bF="_buttonDanger_js8yx_242",xF="_buttonSuccess_js8yx_247",SF="_buttonDisabled_js8yx_252",xe={footer:SY,tabContainer:AY,contentContainer:CY,contentOpen:PY,contentClosed:EY,tabButton:wY,tabButtonActive:OY,tabButtonInactive:_Y,tabIcon:TY,multiSelectOverlay:DY,multiSelectText:jY,handContainer:NY,cardPile:kY,deckCard:MY,deckCardText:RY,discardCard:IY,discardCardText:LY,pileLabel:$Y,handSection:BY,handHeader:UY,handTitle:zY,handTitleOverLimit:GY,handTitleNormal:HY,mandatoryDiscardWarning:qY,handCardsContainer:YY,handCardsWrapper:FY,handCardsWrapperGap:KY,cardWrapper:VY,optionalDiscardControls:XY,optionalDiscardCounter:WY,finishDiscardButton:QY,droneContainer:ZY,droneGrid:JY,logContainer:eF,logHeader:tF,logTitle:nF,downloadButton:rF,logTableWrapper:aF,logTable:iF,logTableHeader:oF,logTableHeaderCell:sF,logTableDebugHeader:lF,logTableRow:cF,logTableCell:uF,logTableCellBold:fF,logTableCellGray:dF,logTableCellCyan:hF,logTableCellYellow:pF,logTableCellGrayText:mF,logTableCellDebug:gF,logTableCellCenter:yF,aiDecisionButton:vF,buttonDanger:bF,buttonSuccess:xF,buttonDisabled:SF};function AF({localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleCardClick:s,getLocalPlayerId:l,isMyTurn:u,hoveredCardId:d,setHoveredCardId:h,setIsViewDiscardModalOpen:p,setIsViewDeckModalOpen:m,optionalDiscardCount:y,handleRoundStartDraw:x,checkBothPlayersHandLimitComplete:S,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:P,setConfirmationModal:E,passInfo:O,validCardTargets:_,gameEngine:N,opponentPlayerState:j}){const B=e.hand.length>7,J=1552,Y=e.hand.length;let Z=0;return Y>1&&(Z=(J-208)/(Y-1)-208),v.jsxs("div",{className:xe.handContainer,children:[v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>p(!0),className:xe.discardCard,children:v.jsx("p",{className:xe.discardCardText,children:e.discardPile.length})}),v.jsx("p",{className:xe.pileLabel,children:"Discard Pile"})]}),v.jsxs("div",{className:xe.handSection,children:[v.jsx("div",{className:xe.handHeader,children:v.jsxs("h3",{className:`${xe.handTitle} ${e.hand.length>t.totals.handLimit?xe.handTitleOverLimit:xe.handTitleNormal}`,children:["Your Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),i?.type==="discard"&&i.fromAbility&&v.jsxs("p",{className:xe.mandatoryDiscardWarning,children:["You must discard ",i.count," card(s)."]}),v.jsx("div",{className:xe.handCardsContainer,style:B?{width:`${J}px`}:{},children:v.jsx("div",{className:`${xe.handCardsWrapper} ${B?"":xe.handCardsWrapperGap}`,children:e.hand.map((ue,se)=>{const te=d?e.hand.findIndex(pe=>pe.instanceId===d):-1;let $="",ee={zIndex:se};return B&&te!==-1&&(se<te?$="transform -translate-x-12":se>te?$="transform translate-x-12":($="transform -translate-y-8 scale-105",ee.zIndex=50)),B&&se>0&&(ee.marginLeft=`${Z}px`),v.jsx("div",{className:`${xe.cardWrapper} ${$}`,style:ee,onMouseEnter:()=>h(ue.instanceId),onMouseLeave:()=>h(null),children:v.jsx(xh,{card:ue,isPlayable:r==="action"&&u()&&!O[`${l()}Passed`]&&e.energy>=ue.cost&&(!ue.targeting||N.getValidTargets(l(),null,ue,e,j).length>0)||r==="optionalDiscard"&&y<t.totals.discardLimit,isMandatoryTarget:i?.type==="discard",onClick:i?.type==="discard"?pe=>E({type:"discard",target:pe,onConfirm:()=>A(pe),onCancel:()=>E(null),text:`Are you sure you want to discard ${pe.name}?`}):r==="optionalDiscard"?pe=>E({type:"discard",target:pe,onConfirm:()=>P(pe),onCancel:()=>E(null),text:`Are you sure you want to discard ${pe.name}?`}):s})},ue.instanceId)})})})]}),v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>m(!0),className:xe.deckCard,children:v.jsx("p",{className:xe.deckCardText,children:e.deck.length})}),v.jsx("p",{className:xe.pileLabel,children:"Deck"}),r==="optionalDiscard"&&v.jsxs("div",{className:xe.optionalDiscardControls,children:[v.jsxs("p",{className:xe.optionalDiscardCounter,children:["Discarded: ",y," / ",t.discardLimit]}),v.jsx("button",{onClick:()=>{x(),S()},className:xe.finishDiscardButton,children:"Finish Discarding"})]})]})]})}function CF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:d,isMyTurn:h,turn:p,passInfo:m,validCardTargets:y}){return v.jsx("div",{className:xe.droneContainer,children:v.jsx("div",{className:xe.droneGrid,children:t.map((x,S)=>{const P=(p===1?e.initialDeploymentBudget+e.energy:e.energy)>=x.class,E=n?.type==="Upgrade"&&y.some(O=>O.id===x.name);return v.jsx(Jf,{drone:x,onClick:s,isSelected:l&&l.name===x.name,isSelectable:r==="deployment"&&h()&&!m[`${d()}Passed`]&&P&&!i||E,deployedCount:e.deployedDroneCounts[x.name]||0,appliedUpgrades:e.appliedUpgrades[x.name]||[],isUpgradeTarget:E,onViewUpgrades:(O,_)=>u({droneName:O.name,upgrades:_})},S)})})})}function PF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return v.jsxs("div",{className:xe.logContainer,children:[v.jsxs("div",{className:xe.logHeader,children:[v.jsx("h3",{className:xe.logTitle,children:"Game Log"}),v.jsx("button",{onClick:t,className:xe.downloadButton,children:"Download CSV"})]}),v.jsx("div",{className:xe.logTableWrapper,children:v.jsxs("table",{className:xe.logTable,children:[v.jsx("thead",{className:xe.logTableHeader,children:v.jsxs("tr",{children:[v.jsx("th",{className:xe.logTableHeaderCell,children:"Rnd"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Timestamp (UTC)"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Player"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Action"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Source"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Target"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Outcome"}),v.jsx("th",{className:xe.logTableDebugHeader,children:"Debug Source"}),v.jsx("th",{className:xe.logTableHeaderCell})]})}),v.jsx("tbody",{children:e.map((r,i)=>v.jsxs("tr",{className:xe.logTableRow,children:[v.jsx("td",{className:xe.logTableCellBold,children:r.round}),v.jsx("td",{className:xe.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:xe.logTableCellCyan,children:r.player}),v.jsx("td",{className:xe.logTableCellYellow,children:r.actionType}),v.jsx("td",{className:xe.logTableCell,children:r.source}),v.jsx("td",{className:xe.logTableCell,children:r.target}),v.jsx("td",{className:xe.logTableCellGrayText,children:r.outcome}),v.jsx("td",{className:xe.logTableCellDebug,children:r.debugSource}),v.jsx("td",{className:xe.logTableCellCenter,children:r.aiDecisionContext&&v.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:xe.aiDecisionButton,title:"Show AI Decision Logic",children:""})})]},i)).reverse()})]})})]})}function EF({localPlayerState:e,localPlayerEffectiveStats:t,sortedLocalActivePool:n,gameLog:r,footerView:i,isFooterOpen:s,multiSelectState:l,selectedCard:u,turnPhase:d,mandatoryAction:h,handleFooterButtonClick:p,handleCardClick:m,cancelCardSelection:y,downloadLogAsCSV:x,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:P,setHoveredCardId:E,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:_,optionalDiscardCount:N,handleRoundStartDraw:j,checkBothPlayersHandLimitComplete:D,handleToggleDroneSelection:R,selectedDrone:k,setViewUpgradesModal:B,handleConfirmMandatoryDiscard:J,handleRoundStartDiscard:Y,setConfirmationModal:Z,turn:ue,passInfo:se,validCardTargets:te,gameEngine:$,opponentPlayerState:ee,setAiDecisionLogToShow:pe}){return v.jsxs("footer",{className:xe.footer,children:[v.jsxs("div",{className:xe.tabContainer,children:[v.jsx("button",{onClick:()=>p("hand"),className:`${xe.tabButton} ${s&&i==="hand"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="hand"&&v.jsx(wc,{size:20}),"Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>p("drones"),className:`${xe.tabButton} ${s&&i==="drones"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="drones"&&v.jsx(wc,{size:20}),"Drones"]})}),v.jsx("button",{onClick:()=>p("log"),className:`${xe.tabButton} ${s&&i==="log"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="log"&&v.jsx(wc,{size:20}),"Log (",r.length,")"]})})]}),v.jsxs("div",{className:`${xe.contentContainer} ${s?xe.contentOpen:xe.contentClosed}`,children:[l&&v.jsxs("div",{className:xe.multiSelectOverlay,children:[v.jsxs("span",{className:xe.multiSelectText,children:[l.phase==="select_source_lane"&&"Reposition: Select a source lane",l.phase==="select_drones"&&`Select Drones (${l.selectedDrones.length} / ${l.maxSelection})`,l.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:he=>{he.stopPropagation(),y()},className:xe.buttonDanger,children:"Cancel"}),l.phase==="select_drones"&&v.jsx("button",{onClick:he=>{he.stopPropagation(),l.selectedDrones.length>0&&console.log("Confirm drones clicked")},disabled:l.selectedDrones.length===0,className:`${xe.buttonSuccess} ${l.selectedDrones.length===0?xe.buttonDisabled:""}`,children:"Confirm Drones"})]}),i==="hand"&&v.jsx(AF,{localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:u,turnPhase:d,mandatoryAction:h,handleCardClick:m,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:P,setHoveredCardId:E,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:_,optionalDiscardCount:N,handleRoundStartDraw:j,checkBothPlayersHandLimitComplete:D,handleConfirmMandatoryDiscard:J,handleRoundStartDiscard:Y,setConfirmationModal:Z,passInfo:se,validCardTargets:te,gameEngine:$,opponentPlayerState:ee}),i==="drones"&&v.jsx(CF,{localPlayerState:e,sortedLocalActivePool:n,selectedCard:u,turnPhase:d,mandatoryAction:h,handleToggleDroneSelection:R,selectedDrone:k,setViewUpgradesModal:B,getLocalPlayerId:S,isMyTurn:A,turn:ue,passInfo:se,validCardTargets:te}),i==="log"&&v.jsx(PF,{gameLog:r,downloadLogAsCSV:x,setAiDecisionLogToShow:pe})]})]})}const wF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(ma,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},OF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=C.useState(null);return v.jsxs(ma,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(d=>{const h=s.appliedUpgrades[d.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",d.name]}),v.jsx("div",{className:"space-y-2",children:h.map(p=>v.jsx("div",{onClick:()=>u({droneName:d.name,instanceId:p.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===p.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:p.name})},p.instanceId))})]},d.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},_F=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=C.useState(null);return v.jsxs(ma,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(xh,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},TF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:d})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(wF,{modalData:e,onClose:()=>t(null)}),n&&v.jsx(OF,{selectionData:n,onConfirm:async(h,p)=>{await l(h,p,u()),r(null)},onCancel:()=>{r(null),d()}}),i&&v.jsx(_F,{selectionData:i,onConfirm:async(h,p)=>{await l(h,p,u()),s(null)},onCancel:()=>{s(null),d()}})]}),DF=({visible:e,start:t,end:n,lineRef:r})=>e?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,jF=({top:e,left:t})=>v.jsx("div",{className:"explosion",style:{top:`${e}px`,left:`${t}px`}}),NF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const d=n!=="local",h=t===u()?s?.name||"You":l?.name||"Opponent";return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-6 shadow-2xl shadow-purple-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-400 mb-2",children:[v.jsx(Tv,{className:"w-6 h-6 animate-spin"}),v.jsx(kw,{className:"w-6 h-6"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:d?"Opponent's Turn":"AI Thinking..."}),v.jsx("p",{className:"text-gray-300 text-sm",children:d?`Waiting for ${h}`:"Processing AI actions..."})]}),d&&r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Rw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),i&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Recent action:"}),v.jsx("p",{className:"text-white text-sm",children:i})]}),v.jsx("div",{className:"flex justify-center mt-4",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},kF=({card:e})=>v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80",children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),Ow=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Ft,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(kF,{card:l})},`${l.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},MF=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:""})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),RF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=C.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:d,filter:h}=r,p=S=>{s(A=>{const P=S.instanceId||`${S.id}-${S.name}`;return A.some(O=>(O.instanceId||`${O.id}-${O.name}`)===P)?A.filter(O=>(O.instanceId||`${O.id}-${O.name}`)!==P):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),s([]))},y=()=>{s([]),t()},x=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Ft,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:d==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:h?`Select ${u} ${h.type} card${u>1?"s":""} from ${l.length} found ${h.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${x?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>v.jsx(MF,{card:S,isSelected:i.some(P=>{const E=S.instanceId||`${S.id}-${S.name}`;return(P.instanceId||`${P.id}-${P.name}`)===E}),onClick:p},S.instanceId||`${S.id}-${A}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:y,className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!x,className:`font-bold py-3 px-8 rounded-full transition-colors ${x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"Confirm Selection"})]})]})})},IF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return v.jsxs(ma,{title:"AI Action: Card Played",text:"",onClose:t,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:n.name}),r&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:r}),i&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(xh,{card:n,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},LF=({report:e,onClose:t})=>{if(!e)return null;const{attackerName:n,lane:r,targetName:i,targetType:s,interceptorName:l,shieldDamage:u,hullDamage:d,wasDestroyed:h,remainingShields:p,remainingHull:m}=e,y=s==="section"?i.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase()):i;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[t&&v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Action Report"}),v.jsxs("div",{className:"text-left text-gray-300 space-y-3 mt-4 text-center",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-pink-400",children:n})," attacked in"," ",v.jsx("strong",{children:r?.replace("lane","Lane ")||"Unknown Lane"}),"."]}),l?v.jsxs("p",{children:["Your ",v.jsx("strong",{className:"text-yellow-400",children:l})," intercepted the attack, which was targeting your ",v.jsx("strong",{className:"text-cyan-400",children:y}),"!"]}):v.jsxs("p",{children:["It targeted your ",v.jsx("strong",{className:"text-cyan-400",children:y}),"."]}),v.jsxs("p",{children:["The attack dealt ",v.jsx("strong",{className:"text-cyan-300",children:u})," damage to shields and ",v.jsx("strong",{className:"text-red-400",children:d})," damage to the hull."]}),h?v.jsx("p",{className:"font-bold text-red-500 text-lg",children:"The target was destroyed!"}):v.jsxs("p",{children:["The target has ",v.jsx("strong",{className:"text-cyan-300",children:p})," shields and ",v.jsx("strong",{className:"text-green-400",children:m})," hull remaining."]})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})})},$F=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(Jf,{drone:t,isSelectable:!1,deployedCount:0})})]})}),BF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,turn:s,firstPasserOfPreviousRound:l,onContinue:u})=>{if(!e)return null;const d=t===n?r:i;let h;s===1?h="The first player is determined randomly for the first round.":h=`${l===n?r:i} passed first in the previous round, securing the initiative.`;const p=`${d} will go first this round. ${h}`;return v.jsx(ma,{title:"First Player Determined",text:p,onClose:u,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:u,className:"btn-continue",children:"Continue"})})})},UF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return v.jsx(ma,{title:"Deployment Complete",text:u,onClose:s,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},zF=({show:e,onContinue:t})=>e?v.jsx(ma,{title:"Action Phase",text:"Deployment has ended. Prepare for action!",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})}):null,GF=({show:e,onContinue:t})=>e?v.jsx(ma,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,HF=({show:e,isMultiplayer:t,phase:n,actionType:r="action"})=>{if(!e)return null;const i=t?"Opponent's Turn":"AI Thinking...";let s;return r==="deploy"?s=t?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...":r==="another"?s="Your opponent takes another action!":n==="deployment"?s=t?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...":s=t?"Your opponent is taking their turn.":"AI is deciding on its next action...",v.jsx(ma,{title:i,text:s,onClose:null})},qF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=u=>{switch(u){case"determineFirstPlayer":return{title:"Waiting for Acknowledgment",message:`Waiting for ${n} to acknowledge first player determination`};case"mandatoryDiscard":return{title:"Waiting for Discard",message:`Waiting for ${n} to complete mandatory discard`};case"allocateShields":return{title:"Waiting for Shield Allocation",message:`Waiting for ${n} to allocate shields`};case"mandatoryDroneRemoval":return{title:"Waiting for Drone Removal",message:`Waiting for ${n} to remove excess drones`};default:return{title:"Waiting for Opponent",message:`Waiting for ${n} to complete their action`}}},{title:s,message:l}=i(t);return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-amber-500 p-6 shadow-2xl shadow-amber-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 mb-2",children:[v.jsx(kw,{className:"w-6 h-6"}),v.jsx(Tv,{className:"w-6 h-6 animate-spin"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:s}),v.jsx("p",{className:"text-gray-300 text-sm",children:l})]}),r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Rw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"You have completed your part:"}),v.jsx("p",{className:"text-white text-sm",children:"Waiting for opponent to finish"})]}),v.jsx("div",{className:"flex justify-center",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},YF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&v.jsx("button",{onClick:e.onCancel,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:n}),v.jsx("p",{className:"modal-text",children:e.text}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},FF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:s}),v.jsx("p",{className:"modal-text",children:l})]})})},KF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{if(!n)return null;const i=e===t;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:i?"Victory!":"Defeat!"}),v.jsx("p",{className:"modal-text",children:i?"You have crippled the enemy command ship.":"Your command ship has been crippled."}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"View Final Board"})})]})})},VF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),v.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),v.jsx("td",{className:"p-2 text-center",children:s.isChosen&&v.jsx("span",{className:"text-yellow-400",children:""})})]},l))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},XF=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Deployment"}),v.jsxs("p",{className:"modal-text",children:["This deployment will use ",i," Initial Deployment points and cost ",s," Energy. Proceed?"]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},WF=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Move"}),v.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},QF=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:d,localPlayerState:h,shipAbilityMode:p,droneRefs:m,mandatoryAction:y})=>{if(!t||!e)return null;const{attackDetails:x,interceptors:S}=e,{attacker:A,target:P,targetType:E,lane:O}=x;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-3xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Interception Opportunity!"}),v.jsxs("p",{className:"modal-text",children:["Combat in ",O?.replace("lane","Lane ")||"Unknown Lane"]}),v.jsxs("div",{className:"flex justify-around items-center my-4 p-4 bg-black/20 rounded-lg",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-pink-400 mb-2",children:"Attacker"}),v.jsx(Wf,{drone:A,isPlayer:!1,lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h})]}),v.jsx("div",{className:"text-4xl font-bold text-gray-500",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-cyan-400 mb-2",children:"Target"}),E==="drone"?v.jsx(Wf,{drone:P,isPlayer:!0,lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h}):v.jsx("div",{className:"transform scale-75",children:v.jsx(ed,{section:P.name,stats:h.shipSections[P.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:d,localPlayerState:h,shipAbilityMode:p})})]})]}),v.jsx("h3",{className:"text-center text-white text-xl font-semibold mt-6 mb-2",children:"Choose an Interceptor"}),v.jsx("p",{className:"text-center text-gray-400 mb-4",children:"Drones with higher speed or special abilities can intercept the attack."}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 my-4",children:S.map(_=>v.jsx(Wf,{drone:_,isPlayer:!0,onClick:()=>n(_),lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h},_.id))}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline Interception"})})]})})},ZF=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),v.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},JF=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},eK=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},tK=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,h=>h.toUpperCase());let d="";return l&&(d=l.name),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${d}`:"","? This will cost ",i.cost.energy," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},nK=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),v.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>v.jsx(xh,{card:i,isPlayable:!1},i.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),rK=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=C.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(y,x)=>{navigator.clipboard.writeText(JSON.stringify(y,null,2)).then(()=>console.log(`${x} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},d=y=>y===null?"null":y===void 0?"undefined":typeof y=="boolean"?y.toString():typeof y=="string"?`"${y}"`:typeof y=="number"?y.toString():Array.isArray(y)?y.length===0?"[]":`[${y.length} items]`:typeof y=="object"?Object.keys(y).length===0?"{}":`{${Object.keys(y).length} properties}`:String(y),h=(y,x,S="")=>v.jsxs("div",{className:`mb-6 ${S}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-white",children:x}),v.jsxs("button",{onClick:()=>u(y,x),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[v.jsx(Mw,{size:12}),"Copy"]})]}),v.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-800",children:[v.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),v.jsx("tbody",{children:Object.entries(y).map(([A,P],E)=>v.jsxs("tr",{className:E%2===0?"bg-gray-900":"bg-gray-800",children:[v.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),v.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:d(P)}),v.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof P=="object"&&P!==null?Array.isArray(P)?"array":"object":typeof P})]},A))})]})})]}),p=()=>{const y={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return v.jsxs("div",{className:"p-4 space-y-6",children:[h(y,"Core Game Info"),h(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),h(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),h({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),h({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&h(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return v.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const y=r.getEffectiveShipStats(l.player1,l.placedSections),x=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(E=>{S[E]=l.player1.dronesOnBoard[E].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,E)})),A[E]=l.player2.dronesOnBoard[E].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,E)}))});const P=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return v.jsxs("div",{className:"p-4 space-y-6",children:[h(y,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),h(x,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),h(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),h(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),h(P,"GameDataService Cache Statistics")]})}catch(y){return v.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",y.message]})}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Game Debug View"}),v.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[v.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),v.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),v.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?p():m()}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},aK=(e,t)=>{const[n,r]=C.useState([]),i=C.useCallback(s=>{const l=Te.createExplosionEffect(s),u=H2(e.current[s],t.current);if(u){const d=`${l.timestamp}-${Math.random()}`;r(h=>[...h,{id:d,top:u.y,left:u.x}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},l.duration)}},[e,t]);return{explosions:n,triggerExplosion:i}},_w=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:d,updatePlayerState:h,addLogEntry:p,resetGame:m,setWinner:y,processAction:x,gameStateManager:S,p2pManager:A}=Ii(),{getEffectiveStats:P,getEffectiveShipStats:E,gameDataService:O}=bh(),_=!0,[N,j]=C.useState(!1),[D,R]=C.useState(!1),[k,B]=C.useState(null),[J,Y]=C.useState(null),[Z,ue]=C.useState(null),[se,te]=C.useState(null),[$,ee]=C.useState(!1),[pe,he]=C.useState(!1),[I,V]=C.useState(!1),[q,le]=C.useState(!1),[ve,z]=C.useState(!1),[re,be]=C.useState(null),[me,ae]=C.useState({phase:"action",actionType:"action"}),[fe,ye]=C.useState(!1),[de,Je]=C.useState(!1),[He,jt]=C.useState(!1),[je,Re]=C.useState(null),[Qr,ga]=C.useState(null),[qo,Yo]=C.useState(null),[Hi,sl]=C.useState(null),[ll,Fo]=C.useState(null),[Zr,an]=C.useState(null),[Jr,yn]=C.useState([]),[lu,qi]=C.useState(null),[ya,Qa]=C.useState(null),[Yi,ea]=C.useState(null),[Fi,va]=C.useState("drones"),[cu,Ko]=C.useState(!0),[uu,Vo]=C.useState([]),[Ur,fu]=C.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[Sh,Ah]=C.useState({}),[ht,$n]=C.useState(null),[Za,cl]=C.useState([]),[zt,pt]=C.useState(null),[Nt,Wn]=C.useState(null),[on,hr]=C.useState(null),[ba,Xo]=C.useState([]),[pr,mr]=C.useState(null),[gr,zr]=C.useState(null),[Ve,sn]=C.useState(null),[kt,ul]=C.useState(null),[du,ta]=C.useState(null),[Ja,hu]=C.useState(null),[Gr,ei]=C.useState(null),[Ch,Ki]=C.useState(!1),[Vi,vn]=C.useState(null),[ti,Xi]=C.useState(null),[yr,fl]=C.useState(null),[Wo,dl]=C.useState(0),[hl,jn]=C.useState(0),[Ph,Eh]=C.useState(null),[pl,wh]=C.useState(null),[ml,Oh]=C.useState(null),ln=C.useRef(null),ni=C.useRef({}),xa=C.useRef(null),na=C.useRef(!1),{explosions:ri,triggerExplosion:gl}=aK(ni,xa);C.useEffect(()=>{Mc.initialize(S,S.actionProcessor,()=>e.gameMode!=="local",jr),console.log(" GameFlowManager initialized")},[]),C.useEffect(()=>{const K=ge=>{const{type:ce,phase:Se,playerId:Me,data:Ie}=ge;if(console.log(` App.jsx received PhaseManager event: ${ce}`,{phase:Se,playerId:Me}),ce==="phaseTransition"){const{newPhase:qe,previousPhase:St,firstPlayerResult:un}=ge;console.log(` App.jsx handling phase transition: ${St}  ${qe}`),z(!1),qe==="determineFirstPlayer"&&(console.log(" First player determination phase started, showing modal"),ee(!0)),qe==="deploymentComplete"&&(console.log(" Deployment complete phase started, showing modal"),he(!0))}else ce==="phaseComplete"&&(console.log(` App.jsx handling phase completion: ${Se}`),re===Se&&be(null),Se==="determineFirstPlayer"&&console.log(" Both players acknowledged first player determination"),Se==="deploymentComplete"&&console.log(" Both players acknowledged deployment complete"))},Q=Mc.subscribe(K);return()=>{Q()}},[i,n,B]);const{turnPhase:Ke,turn:Bn,currentPlayer:Hr,firstPlayerOfRound:Qo,firstPasserOfPreviousRound:pu,firstPlayerOverride:mu,passInfo:cn,winner:Nn,unplacedSections:yl,shieldsToAllocate:vl,gameLog:Wi,placedSections:Qi}=e,[ra,gu]=C.useState(Hr),bl=C.useRef(cn),yu=C.useRef(Ke),Zi=C.useRef(Nn);C.useEffect(()=>{bl.current=cn},[cn]),C.useEffect(()=>{yu.current=Ke},[Ke]),C.useEffect(()=>{Zi.current=Nn},[Nn]);const Ae=s(),$e=l(),Un=u(),bn=d();if(!Ae||!$e)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});const Zo=C.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]),vr=C.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);C.useEffect(()=>{if(!i())return;const K=ge=>{if(console.log(" P2P Event received in App:",ge),ge.type==="PHASE_COMPLETED"){const{phase:ce}=ge.data||ge;console.log(` Opponent completed phase: ${ce}`)}};return A.subscribe(K)},[i,A]);const Ji=Ae?E(Ae,Un):null,eo=$e?E($e,bn):null,to=C.useMemo(()=>Ae?Object.values(Ae.dronesOnBoard).flat().length:0,[Ae?.dronesOnBoard]),xl=C.useMemo(()=>$e?Object.values($e.dronesOnBoard).flat().length:0,[$e?.dronesOnBoard]),xn=C.useMemo(()=>[...Ae.activeDronePool].sort((K,Q)=>K.class!==Q.class?K.class-Q.class:K.name.localeCompare(Q.name)),[Ae.activeDronePool]);C.useMemo(()=>Ae?Object.keys(Ae.shipSections).some(K=>Ae.shipSections[K].allocatedShields<O.getEffectiveSectionMaxShields(K,Ae,Un)):!1,[Ae.shipSections,Un,O]),C.useCallback(K=>{if(console.log(` sendPhaseCompletion called for phase: ${K}`),i()){const Q={type:"PHASE_COMPLETED",data:{phase:K}};console.log(" Sending phase completion message:",Q),A.sendData(Q),console.log(` Sent phase completion: ${K}`)}else console.log(" Not multiplayer, skipping network send")},[i,A]),C.useCallback(async()=>{qi(null),await x("turnTransition",{newPlayer:n(),reason:"aiReportClosed"})},[x,n]),C.useCallback(async()=>{ya&&!ya.card.effect.goAgain?await x("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):ya&&ya.card.effect.goAgain&&!Nn&&(await x("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),ae({phase:Ke,actionType:"another"}),z(!0)),Qa(null)},[x,n,r,ya,Nn]),C.useEffect(()=>{const{validAbilityTargets:K,validCardTargets:Q}=Te.calculateAllValidTargets(ht,zt,Ve,on,Ae,$e);cl(K),Xo(Q),ht&&(hr(null),pt(null))},[ht,zt,on,Ae,$e,Ve]);const kn=()=>{ht&&($n(null),Re(null))},wt=()=>{hr(null),sn(null)},zn=C.useCallback(async K=>{if(na.current){console.warn("Attack already in progress. Aborting duplicate call.");return}na.current=!0;try{const Q=ce=>{Vo(Se=>[...Se,ce]),setTimeout(()=>Vo(Se=>Se.filter(Me=>Me!==ce)),500)},ge=await x("attack",{attackDetails:K});K.targetId&&Q(K.targetId),K.attackingPlayer===r()&&qi({...ge.attackResult,isBlocking:!0}),ge.afterAttackEffects&&ge.afterAttackEffects.forEach(ce=>{ce.type==="EXPLOSION"&&gl(ce.payload.targetId)}),sl(null)}catch(Q){console.error("Error in resolveAttack:",Q),sl(null),qi(null)}finally{na.current=!1}},[gl,x,n,r]),vu=C.useCallback(async(K,Q,ge)=>{try{const ce=await x("ability",{droneId:Q.id,abilityIndex:Q.abilities.indexOf(K),targetId:ge?.id||null});kn()}catch(ce){console.error("Error in resolveAbility:",ce),kn()}},[x,n]),Sl=C.useCallback(async(K,Q,ge)=>{const ce=await x("shipAbility",{ability:K,sectionName:Q,targetId:ge?.id||null,playerId:n()});if(ce.mandatoryAction){ei(ce.mandatoryAction),va("hand"),Ko(!0),pt(null),Wn(null);return}if(ce.requiresShieldReallocation){pt(null),Wn(null);return}return pt(null),Wn(null),ce},[x,n]),Jo=C.useCallback(async(K,Q,ge,ce=null)=>{if(ge===r()){let Me="",Ie="";if(Q)if(Q.name){if(Me=Q.name,Q.id&&Q.owner){const qe=Q.owner===n()?Ae:$e;for(const[St,un]of Object.entries(qe.dronesOnBoard))if(un.some(Gt=>Gt.id===Q.id)){Ie=St.replace("lane","Lane ");break}}}else Q.id.startsWith("lane")?(Me=`Lane ${Q.id.slice(-1)}`,Ie=`Lane ${Q.id.slice(-1)}`):Me=Q.id.replace(/([A-Z])/g," $1").replace(/^./,qe=>qe.toUpperCase());Qa({card:K,targetName:Me,targetLane:Ie})}const Se=await x("cardPlay",{card:K,targetId:Q?.id||null,playerId:ge});if(Se.needsCardSelection){Xi({...Se.needsCardSelection,onConfirm:Me=>{no(Me,Se.needsCardSelection,K,Q,ge,ce,Se.newPlayerStates),Xi(null)},onCancel:()=>{Xi(null),ge===n()&&(wt(),mr(null))}});return}return ge===n()&&(wt(),mr(null)),Se},[x,n,Ae,$e]),no=C.useCallback((K,Q,ge,ce,Se,Me,Ie=null)=>{const{searchedCards:qe,remainingDeck:St,discardPile:un,shuffleAfter:Gt}=Q,Mt=qe.filter(ii=>{const Cu=ii.instanceId||`${ii.id}-${ii.name}`;return!K.some(Sa=>(Sa.instanceId||`${Sa.id}-${Sa.name}`)===Cu)}),Gn=Ie||{player1:Ae,player2:$e},Sn=Se===n()?Gn[n()]:Gn[r()],ts=[...Sn.hand,...K];let br=[...St,...Mt];Gt&&(br=br.sort(()=>.5-Math.random()));const ai={...Sn,deck:br,hand:ts,discardPile:un};p({player:Sn.name,actionType:"CARD_SELECTION",source:ge.name,target:`Selected ${K.length} cards`,outcome:`Drew: ${K.map(ii=>ii.name).join(", ")}`},"handleCardSelection",Se===r()?Me:null);const qh={[n()]:Se===n()?{...Sn,deck:ai.deck,hand:ai.hand,discardPile:ai.discardPile}:Gn[n()],[r()]:Se===r()?{...Sn,deck:ai.deck,hand:ai.hand,discardPile:ai.discardPile}:Gn[r()]},Au=Te.finishCardPlay(ge,Se,qh);S.setPlayerStates(Au.newPlayerStates.player1,Au.newPlayerStates.player2),Se===n()&&(wt(),mr(null))},[Ae,$e,p]),es=C.useCallback((K,Q,ge,ce)=>{const Se=Te.resolveMultiMove(K,Q,ge,ce,Ae,l(),vr(),{logCallback:p,applyOnMoveEffectsCallback:Te.applyOnMoveEffects,updateAurasCallback:Te.updateAuras});h(n(),Se.newPlayerState),Se.shouldClearMultiSelectState&&sn(null),Se.shouldCancelCardSelection&&wt()},[Ae,p,Te,Un,bn]),bu=C.useCallback((K,Q,ge,ce)=>{const Se=Te.resolveSingleMove(K,Q,ge,ce,Ae,l(),vr(),{logCallback:p,applyOnMoveEffectsCallback:Te.applyOnMoveEffects,updateAurasCallback:Te.updateAuras});h(n(),Se.newPlayerState),Se.shouldClearMultiSelectState&&sn(null),Se.shouldCancelCardSelection&&wt()},[Ae,p,Te,Un,bn]),_h=K=>{cu?Fi===K?Ko(!1):va(K):(Ko(!0),va(K))};C.useEffect(()=>{const{validAbilityTargets:K,validCardTargets:Q}=Te.calculateAllValidTargets(ht,zt,Ve,on,Ae,$e);cl(K),Xo(Q),ht&&(hr(null),pt(null))},[ht,zt,on,Ae,$e,Ve]),C.useEffect(()=>{Nn||Te.checkGameStateForWinner(Zo(),{logCallback:p,setWinnerCallback:y,showWinnerModalCallback:ye})},[Ae?.shipSections,$e?.shipSections,Nn,p]),C.useEffect(()=>{if(Ke==="action"){const K=Te.calculatePotentialInterceptors(je,Ae,$e,vr());yn(K)}else yn([])},[je,Ke,Ae,$e,Te,Un,bn]),C.useEffect(()=>{ga(null)},[je]),C.useEffect(()=>{if(je&&!ht&&Ke==="action"){const K=H2(ni.current[je.id],xa.current);K&&fu({visible:!0,start:K,end:{x:K.x,y:K.y}})}else fu(K=>({...K,visible:!1}))},[je,Ke,ht]),C.useEffect(()=>{const K=ge=>{if(Ur.visible&&ln.current&&xa.current){const ce=xa.current.getBoundingClientRect(),Se=ge.clientX-ce.left,Me=ge.clientY-ce.top;ln.current.setAttribute("x2",Se),ln.current.setAttribute("y2",Me)}},Q=xa.current;return Q?.addEventListener("mousemove",K),()=>{Q?.removeEventListener("mousemove",K)}},[Ur.visible]),C.useEffect(()=>{Nn&&na.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),na.current=!1)},[Nn,Ke,Hr]),C.useEffect(()=>{if(Ke!=="deployment"&&Ke!=="action"||Nn||$||pe||I||q||J||Z||pr||Hr===ra)return;const K=t(),Q=i();console.log("[MODAL UPDATE] Turn change detected:",{currentPlayer:Hr,lastCurrentPlayer:ra,myTurn:K,turnPhase:Ke,isMultiplayerGame:Q,currentModalTitle:k?.title}),gu(Hr),K?Ke==="deployment"?(B(null),z(!1)):Ke==="action"&&(B({title:"Action Phase - Your Turn",text:"It's your turn to act. Select a drone to move or attack, play a card, or use an ability.",isBlocking:!0}),z(!1)):(ae({phase:Ke,actionType:"action"}),z(!0))},[Hr,Ke,t,i,Bn,Nn,$,pe,I,q,J,Z,pr,ra,k?.title]);const Th=()=>{m(),na.current=!1,Re(null),B(null),qi(null),$n(null),cl([]),ei(null),Ki(!1),vn(null),hr(null),Xo([]),mr(null),ye(!1)},Dh=async K=>{const{turnPhase:Q}=e;Q==="allocateShields"?await x("allocateShield",{sectionName:K,playerId:n()}):await x("reallocateShields",{action:"add",sectionName:K,playerId:n()})},Al=async K=>{if(hl<=0||Ae.shipSections[K].allocatedShields<=0)return;(await x("reallocateShields",{action:"remove",sectionName:K,playerId:n()})).success&&(jn(ce=>ce-1),dl(ce=>ce+1))},jh=async K=>{if(Wo<=0)return;(await x("reallocateShields",{action:"add",sectionName:K,playerId:n()})).success&&dl(ge=>ge-1)},Nh=async()=>{console.log(" App.jsx: Acknowledging first player determination");const K=n();if((await x("acknowledgeFirstPlayer",{playerId:K})).success){ee(!1);const ge=e.commitments?.determineFirstPlayer||{};!(Object.keys(ge).length===2)&&e.gameMode!=="local"&&be("determineFirstPlayer")}},kh=async()=>{console.log(" App.jsx: Acknowledging deployment complete");const K=n();if((await x("acknowledgeDeploymentComplete",{playerId:K})).success){he(!1);const ge=e.commitments?.deploymentComplete||{};!(Object.keys(ge).length===2)&&e.gameMode!=="local"&&be("deploymentComplete")}},Mh=K=>{if(yr){yr==="removing"?Al(K):yr==="adding"&&jh(K);return}Ke==="allocateShields"&&Dh(K)},Rh=K=>{cn[n()+"Passed"]||(je&&je.name===K.name?Re(null):(Re(K),$n(null),wt()))},Cl=async K=>{try{const Q=await x("deployment",{droneData:je,laneId:K,playerId:n(),turn:Bn});Q.success?Re(null):B({title:Q.error,text:Q.message,isBlocking:!0})}catch(Q){console.error("Error executing deployment:",Q),B({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Ih=K=>{if(!(!je||Hr!==n()||cn[n()+"Passed"])){if(Bn===1){const Q=Te.validateDeployment(Ae,je,Bn,to,Ji);if(!Q.isValid){B({title:Q.reason,text:Q.message,isBlocking:!0});return}const{budgetCost:ge,energyCost:ce}=Q;if(ce>0){Y({lane:K,budgetCost:ge,energyCost:ce});return}}Cl(K)}},Lh=async()=>{cn[`${n()}Passed`]||await x("playerPass",{playerId:n(),playerName:Ae.name,turnPhase:Ke,passInfo:cn,opponentPlayerId:r()})};C.useEffect(()=>{if(!Hi||Hi.attackingPlayer!==r())return;const K=Te.calculateAiInterception(Hi,Zo(),vr());K.hasInterceptors?an({attackDetails:K.attackDetails,interceptors:K.interceptors}):zn(Hi)},[Hi,zn,Un,bn]);const $h=(K,Q,ge)=>{if(K.stopPropagation(),Ke!=="action"||Hr!==n()||cn[n()+"Passed"])return;const ce=ge.cost||{};if(Q.isExhausted&&ce.exhausts!==!1){B({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(ce.energy&&Ae.energy<ce.energy){B({title:"Not Enough Energy",text:`This ability costs ${ce.energy} energy, but you only have ${Ae.energy}.`,isBlocking:!0});return}if(ge.targeting?.type==="LANE"&&ge.targeting?.location==="SAME_LANE"){const Se=Te.getLaneOfDrone(Q.id,Ae);if(Se){zr({ability:ge,drone:Q,target:{id:Se,owner:n()}});return}}ht&&ht.drone.id===Q.id?kn():($n({drone:Q,ability:ge}),Re(Q),wt())},Bh=(K,Q,ge)=>{if(K.stopPropagation(),!(Ke!=="action"||!t()||cn[`${n()}Passed`])){if(Ae.energy<ge.cost.energy){B({title:"Not Enough Energy",text:`This ability costs ${ge.cost.energy} energy, but you only have ${Ae.energy}.`,isBlocking:!0});return}zt?.ability.id===ge.id?pt(null):ge.targeting?(pt({sectionName:Q.name,ability:ge}),Re(null),kn(),wt()):ge.effect.type==="REALLOCATE_SHIELDS"?(fl("removing"),jn(ge.effect.value.maxShields),dl(0),Eh(JSON.parse(JSON.stringify(Ae.shipSections))),Oh({ability:ge,sectionName:Q.name})):Wn({ability:ge,sectionName:Q.name,target:null})}},Pl=(K,Q,ge)=>{if(K.stopPropagation(),console.log(`--- handleTokenClick triggered for ${Q.name} (isPlayer: ${ge}) ---`),Ve&&Ve.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:ce,maxSelection:Se}=Ve;ce.some(Ie=>Ie.id===Q.id)?sn(Ie=>({...Ie,selectedDrones:Ie.selectedDrones.filter(qe=>qe.id!==Q.id)})):ce.length<Se&&sn(Ie=>({...Ie,selectedDrones:[...Ie.selectedDrones,Q]}));return}if(Za.some(ce=>ce.id===Q.id)||ba.some(ce=>ce.id===Q.id)){console.log("Action: Targeting for an active card/ability."),xu(Q,"drone",ge);return}if(Ke==="action"&&t()&&je&&!je.isExhausted&&!ge){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",je.name,`(ID: ${je.id})`),console.log("Target clicked:",Q.name,`(ID: ${Q.id})`);const[ce]=Object.entries(Ae.dronesOnBoard).find(([Me,Ie])=>Ie.some(qe=>qe.id===je.id))||[],[Se]=Object.entries($e.dronesOnBoard).find(([Me,Ie])=>Ie.some(qe=>qe.id===Q.id))||[];if(console.log("Calculated Attacker Lane:",ce),console.log("Calculated Target Lane:",Se),ce&&Se&&ce===Se)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),$e.dronesOnBoard[Se].some(qe=>P(qe,Se).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),B({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const qe={attacker:je,target:Q,targetType:"drone",lane:ce,attackingPlayer:n()},St=P(je,ce),un=$e.dronesOnBoard[ce].filter(Mt=>{const Gn=P(Mt,ce);return!Mt.isExhausted&&(Gn.speed>St.speed||Gn.keywords.has("ALWAYS_INTERCEPTS"))&&Mt.id!==Q.id}).sort((Mt,Gn)=>Mt.class-Gn.class);let Gt=null;un.length>0&&(Q.class===void 0||un[0].class<Q.class)&&(Gt=un[0]),Gt?Fo({interceptor:Gt,originalTarget:Q,onClose:()=>{zn({...qe,interceptor:Gt}),Fo(null),Re(null)}}):(zn(qe),Re(null))}else console.log("FAILURE: Lanes do not match or could not be found."),B({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(Ve&&Ve.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:ce,maxSelection:Se}=Ve;ce.some(Ie=>Ie.id===Q.id)?sn(Ie=>({...Ie,selectedDrones:Ie.selectedDrones.filter(qe=>qe.id!==Q.id)})):ce.length<Se&&sn(Ie=>({...Ie,selectedDrones:[...Ie.selectedDrones,Q]}));return}if(Gr?.type==="destroy"&&ge){console.log("Action: Mandatory destruction."),vn({type:"destroy",target:Q,onConfirm:()=>Gh(Q),onCancel:()=>vn(null),text:`Are you sure you want to destroy your ${Q.name}?`});return}if(ge&&Ke==="action"&&t()&&!cn[`${n()}Passed`]){if(Q.isExhausted){console.log("Action prevented: Drone is exhausted.");return}je?.id===Q.id?(console.log("Action: Deselecting drone",Q.name),Re(null)):(console.log("Action: Selecting drone",Q.name),Re(Q),kn(),wt());return}console.log("Action: Fallback - showing drone details."),te(Q)},xu=(K,Q,ge)=>{if(zt&&Za.some(ce=>ce.id===K.id)){Wn({ability:zt.ability,sectionName:zt.sectionName,target:K});return}if(ht&&Za.some(ce=>ce.id===K.id)){vu(ht.ability,ht.drone,K);return}if(on&&ba.some(ce=>ce.id===K.id)){const ce=ge?n():r();mr({card:on,target:{...K,owner:ce}});return}if(Ke==="action"&&t()&&je&&!je.isExhausted&&!ge&&Q==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",je.name,`(ID: ${je.id})`),console.log("Target clicked:",K.name,`(Type: ${Q})`);const[ce]=Object.entries(Ae.dronesOnBoard).find(([Se,Me])=>Me.some(Ie=>Ie.id===je.id))||[];if(console.log("Calculated Attacker Lane:",ce),ce){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const Se=$e.dronesOnBoard[ce];if(Se&&Se.some(Ie=>P(Ie,ce).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),B({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const Ie={attacker:je,target:K,targetType:"section",lane:ce,attackingPlayer:n()},qe=P(je,ce),St=$e.dronesOnBoard[ce].filter(Gt=>{const Mt=P(Gt,ce);return!Gt.isExhausted&&(Mt.speed>qe.speed||Mt.keywords.has("ALWAYS_INTERCEPTS"))}).sort((Gt,Mt)=>Gt.class-Mt.class);let un=null;St.length>0&&(un=St[0]),un?Fo({interceptor:un,originalTarget:K,onClose:()=>{zn({...Ie,interceptor:un}),Fo(null),Re(null)}}):(zn(Ie),Re(null))}}else console.log("FAILURE: Could not determine attacker lane."),B({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}Q==="drone"&&te(K)},Uh=(K,Q,ge)=>{if(K.stopPropagation(),ht&&ht.ability.targeting.type==="LANE"){const ce=ge?n():r();if(Za.some(Se=>Se.id===Q&&Se.owner===ce)){zr({ability:ht.ability,drone:ht.drone,target:{id:Q,owner:ce}});return}}if(Ve&&ge&&ba.some(ce=>ce.id===Q)){const{phase:ce,sourceLane:Se,selectedDrones:Me}=Ve;if(ce==="select_source_lane"){sn(Ie=>({...Ie,phase:"select_drones",sourceLane:Q}));return}if(ce==="select_destination_lane"){es(Ve.card,Me,Se,Q);return}}if(Ve&&Ve.card.effect.type==="SINGLE_MOVE"&&Ve.phase==="select_destination"&&ge){ba.some(ce=>ce.id===Q)&&bu(Ve.card,Ve.selectedDrone,Ve.sourceLane,Q);return}if(on&&on.targeting.type==="LANE"){const ce=ge?n():r();if(ba.some(Se=>Se.id===Q&&Se.owner===ce)){mr({card:on,target:{id:Q,owner:ce}});return}}if(on){wt();return}if(ht){kn();return}if(Ke==="deployment"&&ge)Ih(Q);else if(Ke==="action"&&ge&&je){const[ce]=Object.entries(Ae.dronesOnBoard).find(([Ie,qe])=>qe.some(St=>St.id===je.id))||[];if(!ce)return;const Se=parseInt(ce.replace("lane",""),10),Me=parseInt(Q.replace("lane",""),10);Math.abs(Se-Me)===1?ue({drone:je,from:ce,to:Q}):B({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},zh=K=>{if(!(Ke!=="action"||!t()||cn[`${n()}Passed`])&&!(Ae.energy<K.cost)){if(K.effect.type==="MULTI_MOVE"){Ve&&Ve.card.instanceId===K.instanceId?wt():(sn({card:K,phase:"select_source_lane",sourceLane:null,selectedDrones:[],maxSelection:K.effect.count}),hr(K),Re(null),$n(null));return}if(K.effect.type==="SINGLE_MOVE"){Ve&&Ve.card.instanceId===K.instanceId?wt():(sn({card:K,phase:"select_drone",selectedDrone:null,sourceLane:null}),hr(K),Re(null),$n(null));return}if(on?.instanceId===K.instanceId)wt();else if(K.name==="System Sabotage"){const Q=Te.getValidTargets(n(),null,K,Ae,$e);ul({card:K,targets:Q,opponentState:$e}),hr(null),$n(null),Re(null)}else if(K.type==="Upgrade"){const Q=Te.getValidTargets(n(),null,K,Ae,$e);Q.length>0?(ta({card:K,targets:Q}),hr(null),$n(null),Re(null)):B({title:"No Valid Targets",text:`There are no drone types that can accept the '${K.name}' upgrade right now.`,isBlocking:!0})}else K.targeting?(hr(K),Re(null),$n(null)):(mr({card:K,target:null}),hr(null),$n(null),Re(null))}},Su=async K=>{const Q=Gr;p({player:Ae.name,actionType:"DISCARD_MANDATORY",source:K.name,target:"N/A",outcome:`Discarded ${K.name}.`},"handleConfirmMandatoryDiscard"),await x("optionalDiscard",{playerId:n(),cardsToDiscard:[K]}),vn(null);const ge=Q.count-1;ge<=0?(ei(null),Q.fromAbility):ei(ce=>({...ce,count:ge}))},Gh=K=>{const Q=Te.getLaneOfDrone(K.id,Ae);if(Q){let ge={...Ae,dronesOnBoard:{...Ae.dronesOnBoard}};ge.dronesOnBoard[Q]=ge.dronesOnBoard[Q].filter(Se=>Se.id!==K.id);const ce=Te.onDroneDestroyed(ge,K);Object.assign(ge,ce),ge.dronesOnBoard=Te.updateAuras(ge,l(),vr()),h(n(),ge)}ei(ge=>{const ce=ge.count-1;if(ce<=0){if(xl>eo.totals.cpuLimit){let Me={...$e},Ie=Object.values($e.dronesOnBoard).flat().length-E($e,bn).totals.cpuLimit;for(let qe=0;qe<Ie;qe++){const St=Object.entries(Me.dronesOnBoard).flatMap(([Sn,ts])=>ts.map(br=>({...br,lane:Sn})));if(St.length===0)break;const un=Math.min(...St.map(Sn=>Sn.class)),Gt=St.filter(Sn=>Sn.class===un),Mt=Gt[Math.floor(Math.random()*Gt.length)];Me.dronesOnBoard[Mt.lane]=Me.dronesOnBoard[Mt.lane].filter(Sn=>Sn.id!==Mt.id);const Gn=Te.onDroneDestroyed(Me,Mt);Object.assign(Me,Gn)}Me.dronesOnBoard=Te.updateAuras(Me,s(),vr()),h(r(),Me)}return null}return{...ge,count:ce}}),vn(null)},Hh=()=>{if(Wi.length===0){alert("The game log is empty.");return}const K=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],Q=Wi.map(Me=>[Me.round,Me.player,Me.actionType,Me.source,Me.target,Me.outcome,Me.debugSource||"N/A"].map(qe=>`"${String(qe).replace(/"/g,'""')}"`).join(",")),ge=[K.join(","),...Q].join(`
`),ce=new Blob([ge],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a");if(Se.download!==void 0){const Me=URL.createObjectURL(ce);Se.setAttribute("href",Me),Se.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Se.style.visibility="hidden",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)}};return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",ref:xa,onClick:()=>{kn(),wt()},children:[v.jsx(DF,{visible:Ur.visible,start:Ur.start,end:Ur.end,lineRef:ln}),ri.map(K=>v.jsx(jF,{top:K.top,left:K.left},K.id)),v.jsx(yY,{localPlayerState:Ae,opponentPlayerState:$e,localPlayerEffectiveStats:Ji,opponentPlayerEffectiveStats:eo,turnPhase:Ke,turn:Bn,passInfo:cn,firstPlayerOfRound:Qo,shieldsToAllocate:vl,shieldsToRemove:hl,shieldsToAdd:Wo,reallocationPhase:yr,totalLocalPlayerDrones:to,totalOpponentPlayerDrones:xl,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,handlePlayerPass:Lh,handleReset:Th,mandatoryAction:Gr,multiSelectState:Ve,AI_HAND_DEBUG_MODE:_,setShowAiHandModal:j,onShowDebugModal:()=>R(!0)}),v.jsx(xY,{localPlayerState:Ae,opponentPlayerState:$e,localPlacedSections:Un,opponentPlacedSections:bn,selectedCard:on,validCardTargets:ba,abilityMode:ht,validAbilityTargets:Za,multiSelectState:Ve,turnPhase:Ke,reallocationPhase:yr,shipAbilityMode:zt,hoveredTarget:Qr,selectedDrone:je,recentlyHitDrones:uu,potentialInterceptors:Jr,droneRefs:ni,mandatoryAction:Gr,gameEngine:Te,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:vr,passInfo:cn,handleTargetClick:xu,handleLaneClick:Uh,handleShipSectionClick:Mh,handleShipAbilityClick:Bh,handleTokenClick:Pl,handleAbilityIconClick:$h,setHoveredTarget:ga}),v.jsx(EF,{localPlayerState:Ae,localPlayerEffectiveStats:Ji,sortedLocalActivePool:xn,gameLog:Wi,footerView:Fi,isFooterOpen:cu,multiSelectState:Ve,selectedCard:on,turnPhase:Ke,mandatoryAction:Gr,handleFooterButtonClick:_h,handleCardClick:zh,cancelCardSelection:wt,downloadLogAsCSV:Hh,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:qo,setHoveredCardId:Yo,setIsViewDiscardModalOpen:jt,setIsViewDeckModalOpen:Je,handleToggleDroneSelection:Rh,selectedDrone:je,setViewUpgradesModal:hu,handleConfirmMandatoryDiscard:Su,setConfirmationModal:vn,turn:Bn,passInfo:cn,validCardTargets:ba,gameEngine:Te,opponentPlayerState:$e,setAiDecisionLogToShow:ea}),k&&v.jsx(ma,{title:k.title,text:k.text,onClose:k.onClose===null?null:k.onClose||(()=>B(null)),children:k.children}),v.jsx(BF,{show:$,firstPlayerOfRound:Qo,localPlayerId:n(),localPlayerName:Ae.name,opponentPlayerName:$e.name,turn:Bn,firstPasserOfPreviousRound:pu,onContinue:Nh}),v.jsx(UF,{show:pe,firstPlayerOfRound:Qo,localPlayerId:n(),localPlayerName:Ae.name,opponentPlayerName:$e.name,onContinue:kh}),v.jsx(zF,{show:I,onContinue:()=>V(!1)}),v.jsx(GF,{show:q,onContinue:()=>le(!1)}),v.jsx(HF,{show:ve,isMultiplayer:i(),phase:me.phase,actionType:me.actionType}),v.jsx(qF,{show:!!re,phase:re,opponentName:$e.name,roomCode:null}),v.jsx(XF,{deploymentConfirmation:J,show:!!J,onCancel:()=>Y(null),onConfirm:async()=>{if(!J)return;const{lane:K}=J;await Cl(K),Y(null)}}),v.jsx(WF,{moveConfirmation:Z,show:!!Z,onCancel:()=>ue(null),onConfirm:async()=>{if(!Z)return;const{drone:K,from:Q,to:ge}=Z;await x("move",{droneId:K.id,fromLane:Q,toLane:ge,playerId:n()}),ue(null),Re(null)}}),v.jsx(ZF,{interceptionModal:ll,show:!!ll,onClose:ll?.onClose}),v.jsx(QF,{choiceData:Zr,show:!!Zr,onIntercept:K=>{zn({...Zr.attackDetails,interceptor:K}),an(null)},onDecline:()=>{zn(Zr.attackDetails),an(null)},gameEngine:Te,turnPhase:Ke,isMyTurn:t,passInfo:cn,getLocalPlayerId:n,localPlayerState:Ae,shipAbilityMode:zt,droneRefs:ni,mandatoryAction:Gr}),v.jsx($F,{isOpen:!!se,drone:se,onClose:()=>te(null)}),v.jsx(LF,{report:lu,show:!!lu,onClose:()=>qi(null)}),ya&&v.jsx(IF,{report:ya,onClose:()=>Qa(null)}),v.jsx(VF,{decisionLog:Yi,show:!!Yi,onClose:()=>ea(null),getLocalPlayerId:n}),v.jsx(KF,{winner:Nn,localPlayerId:n(),show:Nn&&fe,onClose:()=>ye(!1)}),v.jsx(FF,{mandatoryAction:Gr,effectiveStats:Ji,show:Gr&&Ch,onClose:()=>Ki(!1)}),v.jsx(YF,{confirmationModal:Vi,show:!!Vi}),v.jsx(TF,{viewUpgradesModal:Ja,setViewUpgradesModal:hu,destroyUpgradeModal:kt,setDestroyUpgradeModal:ul,upgradeSelectionModal:du,setUpgradeSelectionModal:ta,resolveCardPlay:Jo,getLocalPlayerId:n,cancelCardSelection:wt}),v.jsx(JF,{cardConfirmation:pr,show:!!pr,onCancel:()=>mr(null),onConfirm:async()=>await Jo(pr.card,pr.target,n())}),v.jsx(eK,{abilityConfirmation:gr,show:!!gr,onCancel:()=>zr(null),onConfirm:()=>{vu(gr.ability,gr.drone,gr.target),zr(null)}}),v.jsx(nK,{opponentPlayerState:$e,show:N,debugMode:_,onClose:()=>j(!1)}),v.jsx(rK,{show:D,onClose:()=>R(!1),gameStateManager:S,gameDataService:O}),v.jsx(Ow,{isOpen:de,onClose:()=>Je(!1),cards:Ae.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(Ow,{isOpen:He,onClose:()=>jt(!1),cards:Ae.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(RF,{isOpen:!!ti,onClose:ti?.onCancel||(()=>Xi(null)),onConfirm:ti?.onConfirm||(()=>{}),selectionData:ti}),v.jsx(tK,{shipAbilityConfirmation:Nt,show:!!Nt,onCancel:()=>Wn(null),onConfirm:async()=>await Sl(Nt.ability,Nt.sectionName,Nt.target)}),v.jsx(NF,{isVisible:!1,currentPlayer:Hr,gameMode:e.gameMode,roomCode:null,lastAction:null,localPlayerState:Ae,opponentPlayerState:$e,getLocalPlayerId:n})]})};function iK(){const{gameState:e}=Ii(),[t,n]=C.useState(!0),r=C.useRef(!1);if(C.useEffect(()=>{const i=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(i)},[]),C.useEffect(()=>{r.current?console.log(" GameFlowManager already initialized, skipping..."):(Mc.initialize(Fe,Fe.actionProcessor,()=>e.gameMode!=="local",jr),Fe.setGameFlowManager(Mc),r.current=!0,console.log(" GameFlowManager initialized in AppRouter"))},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading Drone Wars..."})});switch(e.appState){case"menu":return v.jsx(PA,{});case"lobby":return v.jsx(yR,{});case"inGame":switch(e.turnPhase){case"droneSelection":return v.jsx(bR,{});case"deckSelection":return v.jsx(xR,{});case"deckBuilding":return v.jsx(gY,{});case"placement":return v.jsx(AR,{});case"gameInitializing":return v.jsx(_w,{});default:return v.jsx(_w,{})}default:return console.warn("Unknown app state:",e.appState,"defaulting to menu"),v.jsx(PA,{})}}ak.createRoot(document.getElementById("root")).render(v.jsx(Dw.StrictMode,{children:v.jsx(iK,{})}));export{Pn as G,Tn as f};
