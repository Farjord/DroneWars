function $w(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Qr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eg={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA;function KN(){if(aA)return Ec;aA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:c,ref:i!==void 0?i:null,props:s}}return Ec.Fragment=t,Ec.jsx=n,Ec.jsxs=n,Ec}var iA;function VN(){return iA||(iA=1,eg.exports=KN()),eg.exports}var v=VN(),tg={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oA;function XN(){if(oA)return $e;oA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function y(j){return j===null||typeof j!="object"?null:(j=m&&j[m]||j["@@iterator"],typeof j=="function"?j:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,P={};function C(j,X,V){this.props=j,this.context=X,this.refs=P,this.updater=V||x}C.prototype.isReactComponent={},C.prototype.setState=function(j,X){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,X,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function w(){}w.prototype=C.prototype;function O(j,X,V){this.props=j,this.context=X,this.refs=P,this.updater=V||x}var _=O.prototype=new w;_.constructor=O,S(_,C.prototype),_.isPureReactComponent=!0;var M=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function L(j,X,V,ue,Ae,q){return V=q.ref,{$$typeof:e,type:j,key:X,ref:V!==void 0?V:null,props:q}}function $(j,X){return L(j.type,X,void 0,void 0,void 0,j.props)}function Z(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function ae(j){var X={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(V){return X[V]})}var H=/\/+/g;function re(j,X){return typeof j=="object"&&j!==null&&j.key!=null?ae(""+j.key):X.toString(36)}function me(){}function de(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(me,me):(j.status="pending",j.then(function(X){j.status==="pending"&&(j.status="fulfilled",j.value=X)},function(X){j.status==="pending"&&(j.status="rejected",j.reason=X)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ve(j,X,V,ue,Ae){var q=typeof j;(q==="undefined"||q==="boolean")&&(j=null);var se=!1;if(j===null)se=!0;else switch(q){case"bigint":case"string":case"number":se=!0;break;case"object":switch(j.$$typeof){case e:case t:se=!0;break;case h:return se=j._init,ve(se(j._payload),X,V,ue,Ae)}}if(se)return Ae=Ae(j),se=ue===""?"."+re(j,0):ue,M(Ae)?(V="",se!=null&&(V=se.replace(H,"$&/")+"/"),ve(Ae,X,V,"",function(le){return le})):Ae!=null&&(Z(Ae)&&(Ae=$(Ae,V+(Ae.key==null||j&&j.key===Ae.key?"":(""+Ae.key).replace(H,"$&/")+"/")+se)),X.push(Ae)),1;se=0;var Pe=ue===""?".":ue+":";if(M(j))for(var ge=0;ge<j.length;ge++)ue=j[ge],q=Pe+re(ue,ge),se+=ve(ue,X,V,q,Ae);else if(ge=y(j),typeof ge=="function")for(j=ge.call(j),ge=0;!(ue=j.next()).done;)ue=ue.value,q=Pe+re(ue,ge++),se+=ve(ue,X,V,q,Ae);else if(q==="object"){if(typeof j.then=="function")return ve(de(j),X,V,ue,Ae);throw X=String(j),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return se}function G(j,X,V){if(j==null)return j;var ue=[],Ae=0;return ve(j,ue,"","",function(q){return X.call(V,q,Ae++)}),ue}function oe(j){if(j._status===-1){var X=j._result;X=X(),X.then(function(V){(j._status===0||j._status===-1)&&(j._status=1,j._result=V)},function(V){(j._status===0||j._status===-1)&&(j._status=2,j._result=V)}),j._status===-1&&(j._status=0,j._result=X)}if(j._status===1)return j._result.default;throw j._result}var be=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function ne(){}return $e.Children={map:G,forEach:function(j,X,V){G(j,function(){X.apply(this,arguments)},V)},count:function(j){var X=0;return G(j,function(){X++}),X},toArray:function(j){return G(j,function(X){return X})||[]},only:function(j){if(!Z(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},$e.Component=C,$e.Fragment=n,$e.Profiler=i,$e.PureComponent=O,$e.StrictMode=r,$e.Suspense=d,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,$e.__COMPILER_RUNTIME={__proto__:null,c:function(j){return k.H.useMemoCache(j)}},$e.cache=function(j){return function(){return j.apply(null,arguments)}},$e.cloneElement=function(j,X,V){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ue=S({},j.props),Ae=j.key,q=void 0;if(X!=null)for(se in X.ref!==void 0&&(q=void 0),X.key!==void 0&&(Ae=""+X.key),X)!D.call(X,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&X.ref===void 0||(ue[se]=X[se]);var se=arguments.length-2;if(se===1)ue.children=V;else if(1<se){for(var Pe=Array(se),ge=0;ge<se;ge++)Pe[ge]=arguments[ge+2];ue.children=Pe}return L(j.type,Ae,void 0,void 0,q,ue)},$e.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:s,_context:j},j},$e.createElement=function(j,X,V){var ue,Ae={},q=null;if(X!=null)for(ue in X.key!==void 0&&(q=""+X.key),X)D.call(X,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ae[ue]=X[ue]);var se=arguments.length-2;if(se===1)Ae.children=V;else if(1<se){for(var Pe=Array(se),ge=0;ge<se;ge++)Pe[ge]=arguments[ge+2];Ae.children=Pe}if(j&&j.defaultProps)for(ue in se=j.defaultProps,se)Ae[ue]===void 0&&(Ae[ue]=se[ue]);return L(j,q,void 0,void 0,null,Ae)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(j){return{$$typeof:u,render:j}},$e.isValidElement=Z,$e.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:oe}},$e.memo=function(j,X){return{$$typeof:p,type:j,compare:X===void 0?null:X}},$e.startTransition=function(j){var X=k.T,V={};k.T=V;try{var ue=j(),Ae=k.S;Ae!==null&&Ae(V,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ne,be)}catch(q){be(q)}finally{k.T=X}},$e.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},$e.use=function(j){return k.H.use(j)},$e.useActionState=function(j,X,V){return k.H.useActionState(j,X,V)},$e.useCallback=function(j,X){return k.H.useCallback(j,X)},$e.useContext=function(j){return k.H.useContext(j)},$e.useDebugValue=function(){},$e.useDeferredValue=function(j,X){return k.H.useDeferredValue(j,X)},$e.useEffect=function(j,X,V){var ue=k.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(j,X)},$e.useId=function(){return k.H.useId()},$e.useImperativeHandle=function(j,X,V){return k.H.useImperativeHandle(j,X,V)},$e.useInsertionEffect=function(j,X){return k.H.useInsertionEffect(j,X)},$e.useLayoutEffect=function(j,X){return k.H.useLayoutEffect(j,X)},$e.useMemo=function(j,X){return k.H.useMemo(j,X)},$e.useOptimistic=function(j,X){return k.H.useOptimistic(j,X)},$e.useReducer=function(j,X,V){return k.H.useReducer(j,X,V)},$e.useRef=function(j){return k.H.useRef(j)},$e.useState=function(j){return k.H.useState(j)},$e.useSyncExternalStore=function(j,X,V){return k.H.useSyncExternalStore(j,X,V)},$e.useTransition=function(){return k.H.useTransition()},$e.version="19.1.1",$e}var sA;function fl(){return sA||(sA=1,tg.exports=XN()),tg.exports}var A=fl();const Bw=Qr(A),WN=$w({__proto__:null,default:Bw},[A]);var ng={exports:{}},wc={},rg={exports:{}},ag={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA;function QN(){return lA||(lA=1,(function(e){function t(G,oe){var be=G.length;G.push(oe);e:for(;0<be;){var ne=be-1>>>1,j=G[ne];if(0<i(j,oe))G[ne]=oe,G[be]=j,be=ne;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var oe=G[0],be=G.pop();if(be!==oe){G[0]=be;e:for(var ne=0,j=G.length,X=j>>>1;ne<X;){var V=2*(ne+1)-1,ue=G[V],Ae=V+1,q=G[Ae];if(0>i(ue,be))Ae<j&&0>i(q,ue)?(G[ne]=q,G[Ae]=be,ne=Ae):(G[ne]=ue,G[V]=be,ne=V);else if(Ae<j&&0>i(q,be))G[ne]=q,G[Ae]=be,ne=Ae;else break e}}return oe}function i(G,oe){var be=G.sortIndex-oe.sortIndex;return be!==0?be:G.id-oe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var d=[],p=[],h=1,m=null,y=3,x=!1,S=!1,P=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function M(G){for(var oe=n(p);oe!==null;){if(oe.callback===null)r(p);else if(oe.startTime<=G)r(p),oe.sortIndex=oe.expirationTime,t(d,oe);else break;oe=n(p)}}function k(G){if(P=!1,M(G),!S)if(n(d)!==null)S=!0,D||(D=!0,re());else{var oe=n(p);oe!==null&&ve(k,oe.startTime-G)}}var D=!1,L=-1,$=5,Z=-1;function ae(){return C?!0:!(e.unstable_now()-Z<$)}function H(){if(C=!1,D){var G=e.unstable_now();Z=G;var oe=!0;try{e:{S=!1,P&&(P=!1,O(L),L=-1),x=!0;var be=y;try{t:{for(M(G),m=n(d);m!==null&&!(m.expirationTime>G&&ae());){var ne=m.callback;if(typeof ne=="function"){m.callback=null,y=m.priorityLevel;var j=ne(m.expirationTime<=G);if(G=e.unstable_now(),typeof j=="function"){m.callback=j,M(G),oe=!0;break t}m===n(d)&&r(d),M(G)}else r(d);m=n(d)}if(m!==null)oe=!0;else{var X=n(p);X!==null&&ve(k,X.startTime-G),oe=!1}}break e}finally{m=null,y=be,x=!1}oe=void 0}}finally{oe?re():D=!1}}}var re;if(typeof _=="function")re=function(){_(H)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,de=me.port2;me.port1.onmessage=H,re=function(){de.postMessage(null)}}else re=function(){w(H,0)};function ve(G,oe){L=w(function(){G(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(G){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var be=y;y=oe;try{return G()}finally{y=be}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var be=y;y=G;try{return oe()}finally{y=be}},e.unstable_scheduleCallback=function(G,oe,be){var ne=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?ne+be:ne):be=ne,G){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=be+j,G={id:h++,callback:oe,priorityLevel:G,startTime:be,expirationTime:j,sortIndex:-1},be>ne?(G.sortIndex=be,t(p,G),n(d)===null&&G===n(p)&&(P?(O(L),L=-1):P=!0,ve(k,be-ne))):(G.sortIndex=j,t(d,G),S||x||(S=!0,D||(D=!0,re()))),G},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(G){var oe=y;return function(){var be=y;y=oe;try{return G.apply(this,arguments)}finally{y=be}}}})(ag)),ag}var cA;function ZN(){return cA||(cA=1,rg.exports=QN()),rg.exports}var ig={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA;function JN(){if(uA)return kn;uA=1;var e=fl();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)p+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(d,p,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:p,implementation:h}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(d,p){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return s(d,p,null,h)},kn.flushSync=function(d){var p=c.T,h=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=p,r.p=h,r.d.f()}},kn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},kn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},kn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var h=p.as,m=u(h,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;h==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):h==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},kn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var h=u(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:h,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},kn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var h=p.as,m=u(h,p.crossOrigin);r.d.L(d,h,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},kn.preloadModule=function(d,p){if(typeof d=="string")if(p){var h=u(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:h,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},kn.requestFormReset=function(d){r.d.r(d)},kn.unstable_batchedUpdates=function(d,p){return d(p)},kn.useFormState=function(d,p,h){return c.H.useFormState(d,p,h)},kn.useFormStatus=function(){return c.H.useHostTransitionStatus()},kn.version="19.1.1",kn}var fA;function Uw(){if(fA)return ig.exports;fA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ig.exports=JN(),ig.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA;function eM(){if(dA)return wc;dA=1;var e=ZN(),t=fl(),n=Uw();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function d(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var l=a,f=o;;){var g=l.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){l=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===l)return u(g),a;if(b===f)return u(g),o;b=b.sibling}throw Error(r(188))}if(l.return!==f.return)l=g,f=b;else{for(var E=!1,T=g.child;T;){if(T===l){E=!0,l=g,f=b;break}if(T===f){E=!0,f=g,l=b;break}T=T.sibling}if(!E){for(T=b.child;T;){if(T===l){E=!0,l=b,f=g;break}if(T===f){E=!0,f=b,l=g;break}T=T.sibling}if(!E)throw Error(r(189))}}if(l.alternate!==f)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),_=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function re(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var me=Symbol.for("react.client.reference");function de(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===me?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case C:return"Profiler";case P:return"StrictMode";case k:return"Suspense";case D:return"SuspenseList";case Z:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case _:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case M:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return o=a.displayName||null,o!==null?o:de(a.type)||"Memo";case $:o=a._payload,a=a._init;try{return de(a(o))}catch{}}return null}var ve=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},ne=[],j=-1;function X(a){return{current:a}}function V(a){0>j||(a.current=ne[j],ne[j]=null,j--)}function ue(a,o){j++,ne[j]=a.current,a.current=o}var Ae=X(null),q=X(null),se=X(null),Pe=X(null);function ge(a,o){switch(ue(se,o),ue(q,a),ue(Ae,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?N1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=N1(o),a=M1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}V(Ae),ue(Ae,a)}function le(){V(Ae),V(q),V(se)}function he(a){a.memoizedState!==null&&ue(Pe,a);var o=Ae.current,l=M1(o,a.type);o!==l&&(ue(q,a),ue(Ae,l))}function xe(a){q.current===a&&(V(Ae),V(q)),Pe.current===a&&(V(Pe),xc._currentValue=be)}var W=Object.prototype.hasOwnProperty,ze=e.unstable_scheduleCallback,Ie=e.unstable_cancelCallback,Pt=e.unstable_shouldYield,qt=e.unstable_requestPaint,Rt=e.unstable_now,nt=e.unstable_getCurrentPriorityLevel,Tt=e.unstable_ImmediatePriority,Cl=e.unstable_UserBlockingPriority,Zi=e.unstable_NormalPriority,Zo=e.unstable_LowPriority,qh=e.unstable_IdlePriority,ye=e.log,je=e.unstable_setDisableYieldValue,Jt=null,bt=null;function Le(a){if(typeof ye=="function"&&je(a),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Jt,a)}catch{}}var Ye=Math.clz32?Math.clz32:Cu,Pu=Math.log,Ji=Math.LN2;function Cu(a){return a>>>=0,a===0?32:31-(Pu(a)/Ji|0)|0}var eo=256,Jr=4194304;function ea(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ta(a,o,l){var f=a.pendingLanes;if(f===0)return 0;var g=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var T=f&134217727;return T!==0?(f=T&~b,f!==0?g=ea(f):(E&=T,E!==0?g=ea(E):l||(l=T&~a,l!==0&&(g=ea(l))))):(T=f&~b,T!==0?g=ea(T):E!==0?g=ea(E):l||(l=f&~a,l!==0&&(g=ea(l)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,l=o&-o,b>=l||b===32&&(l&4194048)!==0)?o:g}function na(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Jo(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function es(){var a=eo;return eo<<=1,(eo&4194048)===0&&(eo=256),a}function El(){var a=Jr;return Jr<<=1,(Jr&62914560)===0&&(Jr=4194304),a}function ts(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function ci(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ns(a,o,l,f,g,b){var E=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var T=a.entanglements,I=a.expirationTimes,K=a.hiddenUpdates;for(l=E&~l;0<l;){var ie=31-Ye(l),fe=1<<ie;T[ie]=0,I[ie]=-1;var Q=K[ie];if(Q!==null)for(K[ie]=null,ie=0;ie<Q.length;ie++){var ee=Q[ie];ee!==null&&(ee.lane&=-536870913)}l&=~fe}f!==0&&ra(a,f,0),b!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~o))}function ra(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-Ye(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|l&4194090}function wl(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var f=31-Ye(l),g=1<<f;g&o|a[f]&o&&(a[f]|=o),l&=~g}}function Eu(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ol(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function _l(){var a=oe.p;return a!==0?a:(a=window.event,a===void 0?32:Z1(a.type))}function wu(a,o){var l=oe.p;try{return oe.p=a,o()}finally{oe.p=l}}var ln=Math.random().toString(36).slice(2),Yt="__reactFiber$"+ln,Dt="__reactProps$"+ln,aa="__reactContainer$"+ln,rs="__reactEvents$"+ln,Ou="__reactListeners$"+ln,Yh="__reactHandles$"+ln,Tl="__reactResources$"+ln,Br="__reactMarker$"+ln;function as(a){delete a[Yt],delete a[Dt],delete a[rs],delete a[Ou],delete a[Yh]}function to(a){var o=a[Yt];if(o)return o;for(var l=a.parentNode;l;){if(o=l[aa]||l[Yt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=L1(a);a!==null;){if(l=a[Yt])return l;a=L1(a)}return o}a=l,l=a.parentNode}return null}function no(a){if(a=a[Yt]||a[aa]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function ia(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function qn(a){var o=a[Tl];return o||(o=a[Tl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function xt(a){a[Br]=!0}var Aa=new Set,Dl={};function oa(a,o){Pa(a,o),Pa(a+"Capture",o)}function Pa(a,o){for(Dl[a]=o,a=0;a<o.length;a++)Aa.add(o[a])}var is=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$n={},os={};function ss(a){return W.call(os,a)?!0:W.call($n,a)?!1:is.test(a)?os[a]=!0:($n[a]=!0,!1)}function kt(a,o,l){if(ss(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function yn(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function On(a,o,l,f){if(f===null)a.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+f)}}var ls,yr;function er(a){if(ls===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);ls=o&&o[1]||"",yr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ls+a+yr}var cs=!1;function vr(a,o){if(!a||cs)return"";cs=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ee){var Q=ee}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(ee){Q=ee}a.call(fe.prototype)}}else{try{throw Error()}catch(ee){Q=ee}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ee){if(ee&&Q&&typeof ee.stack=="string")return[ee.stack,Q.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),E=b[0],T=b[1];if(E&&T){var I=E.split(`
`),K=T.split(`
`);for(g=f=0;f<I.length&&!I[f].includes("DetermineComponentFrameRoot");)f++;for(;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;if(f===I.length||g===K.length)for(f=I.length-1,g=K.length-1;1<=f&&0<=g&&I[f]!==K[g];)g--;for(;1<=f&&0<=g;f--,g--)if(I[f]!==K[g]){if(f!==1||g!==1)do if(f--,g--,0>g||I[f]!==K[g]){var ie=`
`+I[f].replace(" at new "," at ");return a.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",a.displayName)),ie}while(1<=f&&0<=g);break}}}finally{cs=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?er(l):""}function _n(a){switch(a.tag){case 26:case 27:case 5:return er(a.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 15:return vr(a.type,!1);case 11:return vr(a.type.render,!1);case 1:return vr(a.type,!0);case 31:return er("Activity");default:return""}}function Yn(a){try{var o="";do o+=_n(a),a=a.return;while(a);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Nt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function kl(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Tn(a){var o=kl(a)?"checked":"value",l=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),f=""+a[o];if(!a.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,b=l.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return g.call(this)},set:function(E){f=""+E,b.call(this,E)}}),Object.defineProperty(a,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(E){f=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Fn(a){a._valueTracker||(a._valueTracker=Tn(a))}function Nl(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return a&&(f=kl(a)?a.checked?"true":"false":a.value),a=f,a!==l?(o.setValue(a),!0):!1}function sa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Fe=/[\n"\\]/g;function St(a){return a.replace(Fe,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function us(a,o,l,f,g,b,E,T){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Nt(o)):a.value!==""+Nt(o)&&(a.value=""+Nt(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?ds(a,E,Nt(o)):l!=null?ds(a,E,Nt(l)):f!=null&&a.removeAttribute("value"),g==null&&b!=null&&(a.defaultChecked=!!b),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.name=""+Nt(T):a.removeAttribute("name")}function fs(a,o,l,f,g,b,E,T){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;l=l!=null?""+Nt(l):"",o=o!=null?""+Nt(o):l,T||o===a.value||(a.value=o),a.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=T?a.checked:!!f,a.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E)}function ds(a,o,l){o==="number"&&sa(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function la(a,o,l,f){if(a=a.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<a.length;l++)g=o.hasOwnProperty("$"+a[l].value),a[l].selected!==g&&(a[l].selected=g),g&&f&&(a[l].defaultSelected=!0)}else{for(l=""+Nt(l),o=null,g=0;g<a.length;g++){if(a[g].value===l){a[g].selected=!0,f&&(a[g].defaultSelected=!0);return}o!==null||a[g].disabled||(o=a[g])}o!==null&&(o.selected=!0)}}function Ml(a,o,l){if(o!=null&&(o=""+Nt(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+Nt(l):""}function jl(a,o,l,f){if(o==null){if(f!=null){if(l!=null)throw Error(r(92));if(ve(f)){if(1<f.length)throw Error(r(93));f=f[0]}l=f}l==null&&(l=""),o=l}l=Nt(o),a.defaultValue=l,f=a.textContent,f===l&&f!==""&&f!==null&&(a.value=f)}function gt(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var Ca=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _u(a,o,l){var f=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,l):typeof l!="number"||l===0||Ca.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function ro(a,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&l[g]!==f&&_u(a,g,f)}else for(var b in o)o.hasOwnProperty(b)&&_u(a,b,o[b])}function ca(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ur=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ao(a){return Tu.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var ui=null;function fi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var vn=null,zr=null;function hs(a){var o=no(a);if(o&&(a=o.stateNode)){var l=a[Dt]||null;e:switch(a=o.stateNode,o.type){case"input":if(us(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+St(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==a&&f.form===a.form){var g=f[Dt]||null;if(!g)throw Error(r(90));us(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<l.length;o++)f=l[o],f.form===a.form&&Nl(f)}break e;case"textarea":Ml(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&la(a,!!l.multiple,o,!1)}}}var di=!1;function Ea(a,o,l){if(di)return a(o,l);di=!0;try{var f=a(o);return f}finally{if(di=!1,(vn!==null||zr!==null)&&(wf(),vn&&(o=vn,a=zr,zr=vn=null,hs(o),a)))for(o=0;o<a.length;o++)hs(a[o])}}function Gr(a,o){var l=a.stateNode;if(l===null)return null;var f=l[Dt]||null;if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ps=!1;if(br)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){ps=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{ps=!1}var ua=null,io=null,oo=null;function $t(){if(oo)return oo;var a,o=io,l=o.length,f,g="value"in ua?ua.value:ua.textContent,b=g.length;for(a=0;a<l&&o[a]===g[a];a++);var E=l-a;for(f=1;f<=E&&o[l-f]===g[b-f];f++);return oo=g.slice(a,1<f?1-f:void 0)}function Bn(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function fa(){return!0}function so(){return!1}function bn(a){function o(l,f,g,b,E){this._reactName=l,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var T in a)a.hasOwnProperty(T)&&(l=a[T],this[T]=l?l(b):b[T]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?fa:so,this.isPropagationStopped=so,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),o}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bt=bn(wa),tr=h({},wa,{view:0,detail:0}),en=bn(tr),xn,gs,lo,hi=h({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==lo&&(lo&&a.type==="mousemove"?(xn=a.screenX-lo.screenX,gs=a.screenY-lo.screenY):gs=xn=0,lo=a),xn)},movementY:function(a){return"movementY"in a?a.movementY:gs}}),Du=bn(hi),Fh=h({},hi,{dataTransfer:0}),Kh=bn(Fh),ku=h({},tr,{relatedTarget:0}),co=bn(ku),Vh=h({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),Xh=bn(Vh),Ft=h({},wa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Wh=bn(Ft),Qh=h({},wa,{data:0}),Nu=bn(Qh),Zh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jh(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=ju[a])?!!o[a]:!1}function ys(){return Jh}var Rl=h({},tr,{key:function(a){if(a.key){var o=Zh[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Bn(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Mu[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(a){return a.type==="keypress"?Bn(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Bn(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ep=bn(Rl),tp=h({},hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=bn(tp),Ru=h({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),np=bn(Ru),rp=h({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ap=bn(rp),ip=h({},hi,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),op=bn(ip),sp=h({},wa,{newState:0,oldState:0}),lp=bn(sp),cp=[9,13,27,32],Ll=br&&"CompositionEvent"in window,uo=null;br&&"documentMode"in document&&(uo=document.documentMode);var up=br&&"TextEvent"in window&&!uo,Iu=br&&(!Ll||uo&&8<uo&&11>=uo),vs=" ",Lu=!1;function $l(a,o){switch(a){case"keyup":return cp.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $u(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Oa=!1;function fp(a,o){switch(a){case"compositionend":return $u(o);case"keypress":return o.which!==32?null:(Lu=!0,vs);case"textInput":return a=o.data,a===vs&&Lu?null:a;default:return null}}function dp(a,o){if(Oa)return a==="compositionend"||!Ll&&$l(a,o)?(a=$t(),oo=io=ua=null,Oa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Iu&&o.locale!=="ko"?null:o.data;default:return null}}var hp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bl(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!hp[a.type]:o==="textarea"}function Bu(a,o,l,f){vn?zr?zr.push(f):zr=[f]:vn=f,o=Nf(o,"onChange"),0<o.length&&(l=new Bt("onChange","change",null,l,f),a.push({event:l,listeners:o}))}var pi=null,_a=null;function Uu(a){O1(a,0)}function bs(a){var o=ia(a);if(Nl(o))return a}function zu(a,o){if(a==="change")return o}var Gu=!1;if(br){var Ul;if(br){var zl="oninput"in document;if(!zl){var Hu=document.createElement("div");Hu.setAttribute("oninput","return;"),zl=typeof Hu.oninput=="function"}Ul=zl}else Ul=!1;Gu=Ul&&(!document.documentMode||9<document.documentMode)}function qu(){pi&&(pi.detachEvent("onpropertychange",Yu),_a=pi=null)}function Yu(a){if(a.propertyName==="value"&&bs(_a)){var o=[];Bu(o,_a,a,fi(a)),Ea(Uu,o)}}function pp(a,o,l){a==="focusin"?(qu(),pi=o,_a=l,pi.attachEvent("onpropertychange",Yu)):a==="focusout"&&qu()}function N(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return bs(_a)}function R(a,o){if(a==="click")return bs(o)}function Y(a,o){if(a==="input"||a==="change")return bs(o)}function U(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var J=typeof Object.is=="function"?Object.is:U;function pe(a,o){if(J(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var g=l[f];if(!W.call(o,g)||!J(a[g],o[g]))return!1}return!0}function Se(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ke(a,o){var l=Se(a);a=0;for(var f;l;){if(l.nodeType===3){if(f=a+l.textContent.length,a<=o&&f>=o)return{node:l,offset:o-a};a=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Se(l)}}function Be(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Be(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Xe(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=sa(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=sa(a.document)}return o}function Qe(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var rt=br&&"documentMode"in document&&11>=document.documentMode,We=null,ht=null,Hr=null,qr=!1;function Ta(a,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;qr||We==null||We!==sa(f)||(f=We,"selectionStart"in f&&Qe(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Hr&&pe(Hr,f)||(Hr=f,f=Nf(ht,"onSelect"),0<f.length&&(o=new Bt("onSelect","select",null,o,l),a.push({event:o,listeners:f}),o.target=We)))}function Da(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var ka={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Na={},Fu={};br&&(Fu=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Yr(a){if(Na[a])return Na[a];if(!ka[a])return a;var o=ka[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in Fu)return Na[a]=o[l];return a}var mp=Yr("animationend"),ox=Yr("animationiteration"),sx=Yr("animationstart"),Tk=Yr("transitionrun"),Dk=Yr("transitionstart"),kk=Yr("transitioncancel"),lx=Yr("transitionend"),cx=new Map,gp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gp.push("scrollEnd");function Fr(a,o){cx.set(a,o),oa(o,[a])}var ux=new WeakMap;function xr(a,o){if(typeof a=="object"&&a!==null){var l=ux.get(a);return l!==void 0?l:(o={value:a,source:o,stack:Yn(o)},ux.set(a,o),o)}return{value:a,source:o,stack:Yn(o)}}var Sr=[],xs=0,yp=0;function Ku(){for(var a=xs,o=yp=xs=0;o<a;){var l=Sr[o];Sr[o++]=null;var f=Sr[o];Sr[o++]=null;var g=Sr[o];Sr[o++]=null;var b=Sr[o];if(Sr[o++]=null,f!==null&&g!==null){var E=f.pending;E===null?g.next=g:(g.next=E.next,E.next=g),f.pending=g}b!==0&&fx(l,g,b)}}function Vu(a,o,l,f){Sr[xs++]=a,Sr[xs++]=o,Sr[xs++]=l,Sr[xs++]=f,yp|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function vp(a,o,l,f){return Vu(a,o,l,f),Xu(a)}function Ss(a,o){return Vu(a,null,null,o),Xu(a)}function fx(a,o,l){a.lanes|=l;var f=a.alternate;f!==null&&(f.lanes|=l);for(var g=!1,b=a.return;b!==null;)b.childLanes|=l,f=b.alternate,f!==null&&(f.childLanes|=l),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(g=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,g&&o!==null&&(g=31-Ye(l),a=b.hiddenUpdates,f=a[g],f===null?a[g]=[o]:f.push(o),o.lane=l|536870912),b):null}function Xu(a){if(50<dc)throw dc=0,Cm=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var As={};function Nk(a,o,l,f){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(a,o,l,f){return new Nk(a,o,l,f)}function bp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ma(a,o){var l=a.alternate;return l===null?(l=nr(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function dx(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Wu(a,o,l,f,g,b){var E=0;if(f=a,typeof a=="function")bp(a)&&(E=1);else if(typeof a=="string")E=jN(a,l,Ae.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Z:return a=nr(31,l,o,g),a.elementType=Z,a.lanes=b,a;case S:return fo(l.children,g,b,o);case P:E=8,g|=24;break;case C:return a=nr(12,l,o,g|2),a.elementType=C,a.lanes=b,a;case k:return a=nr(13,l,o,g),a.elementType=k,a.lanes=b,a;case D:return a=nr(19,l,o,g),a.elementType=D,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case w:case _:E=10;break e;case O:E=9;break e;case M:E=11;break e;case L:E=14;break e;case $:E=16,f=null;break e}E=29,l=Error(r(130,a===null?"null":typeof a,"")),f=null}return o=nr(E,l,o,g),o.elementType=a,o.type=f,o.lanes=b,o}function fo(a,o,l,f){return a=nr(7,a,f,o),a.lanes=l,a}function xp(a,o,l){return a=nr(6,a,null,o),a.lanes=l,a}function Sp(a,o,l){return o=nr(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Ps=[],Cs=0,Qu=null,Zu=0,Ar=[],Pr=0,ho=null,ja=1,Ra="";function po(a,o){Ps[Cs++]=Zu,Ps[Cs++]=Qu,Qu=a,Zu=o}function hx(a,o,l){Ar[Pr++]=ja,Ar[Pr++]=Ra,Ar[Pr++]=ho,ho=a;var f=ja;a=Ra;var g=32-Ye(f)-1;f&=~(1<<g),l+=1;var b=32-Ye(o)+g;if(30<b){var E=g-g%5;b=(f&(1<<E)-1).toString(32),f>>=E,g-=E,ja=1<<32-Ye(o)+g|l<<g|f,Ra=b+a}else ja=1<<b|l<<g|f,Ra=a}function Ap(a){a.return!==null&&(po(a,1),hx(a,1,0))}function Pp(a){for(;a===Qu;)Qu=Ps[--Cs],Ps[Cs]=null,Zu=Ps[--Cs],Ps[Cs]=null;for(;a===ho;)ho=Ar[--Pr],Ar[Pr]=null,Ra=Ar[--Pr],Ar[Pr]=null,ja=Ar[--Pr],Ar[Pr]=null}var Un=null,It=null,tt=!1,mo=null,da=!1,Cp=Error(r(519));function go(a){var o=Error(r(418,""));throw ql(xr(o,a)),Cp}function px(a){var o=a.stateNode,l=a.type,f=a.memoizedProps;switch(o[Yt]=a,o[Dt]=f,l){case"dialog":qe("cancel",o),qe("close",o);break;case"iframe":case"object":case"embed":qe("load",o);break;case"video":case"audio":for(l=0;l<pc.length;l++)qe(pc[l],o);break;case"source":qe("error",o);break;case"img":case"image":case"link":qe("error",o),qe("load",o);break;case"details":qe("toggle",o);break;case"input":qe("invalid",o),fs(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Fn(o);break;case"select":qe("invalid",o);break;case"textarea":qe("invalid",o),jl(o,f.value,f.defaultValue,f.children),Fn(o)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||f.suppressHydrationWarning===!0||k1(o.textContent,l)?(f.popover!=null&&(qe("beforetoggle",o),qe("toggle",o)),f.onScroll!=null&&qe("scroll",o),f.onScrollEnd!=null&&qe("scrollend",o),f.onClick!=null&&(o.onclick=Mf),o=!0):o=!1,o||go(a)}function mx(a){for(Un=a.return;Un;)switch(Un.tag){case 5:case 13:da=!1;return;case 27:case 3:da=!0;return;default:Un=Un.return}}function Gl(a){if(a!==Un)return!1;if(!tt)return mx(a),tt=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||Um(a.type,a.memoizedProps)),l=!l),l&&It&&go(a),mx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(l=a.data,l==="/$"){if(o===0){It=Vr(a.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;a=a.nextSibling}It=null}}else o===27?(o=It,Di(a.type)?(a=qm,qm=null,It=a):It=o):It=Un?Vr(a.stateNode.nextSibling):null;return!0}function Hl(){It=Un=null,tt=!1}function gx(){var a=mo;return a!==null&&(Xn===null?Xn=a:Xn.push.apply(Xn,a),mo=null),a}function ql(a){mo===null?mo=[a]:mo.push(a)}var Ep=X(null),yo=null,Ia=null;function mi(a,o,l){ue(Ep,o._currentValue),o._currentValue=l}function La(a){a._currentValue=Ep.current,V(Ep)}function wp(a,o,l){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===l)break;a=a.return}}function Op(a,o,l,f){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var b=g.dependencies;if(b!==null){var E=g.child;b=b.firstContext;e:for(;b!==null;){var T=b;b=g;for(var I=0;I<o.length;I++)if(T.context===o[I]){b.lanes|=l,T=b.alternate,T!==null&&(T.lanes|=l),wp(b.return,l,a),f||(E=null);break e}b=T.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=l,b=E.alternate,b!==null&&(b.lanes|=l),wp(E,l,a),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===a){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Yl(a,o,l,f){a=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var T=g.type;J(g.pendingProps.value,E.value)||(a!==null?a.push(T):a=[T])}}else if(g===Pe.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(xc):a=[xc])}g=g.return}a!==null&&Op(o,a,l,f),o.flags|=262144}function Ju(a){for(a=a.firstContext;a!==null;){if(!J(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function vo(a){yo=a,Ia=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Dn(a){return yx(yo,a)}function ef(a,o){return yo===null&&vo(a),yx(a,o)}function yx(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Ia===null){if(a===null)throw Error(r(308));Ia=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Ia=Ia.next=o;return l}var Mk=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},jk=e.unstable_scheduleCallback,Rk=e.unstable_NormalPriority,tn={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _p(){return{controller:new Mk,data:new Map,refCount:0}}function Fl(a){a.refCount--,a.refCount===0&&jk(Rk,function(){a.controller.abort()})}var Kl=null,Tp=0,Es=0,ws=null;function Ik(a,o){if(Kl===null){var l=Kl=[];Tp=0,Es=km(),ws={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Tp++,o.then(vx,vx),o}function vx(){if(--Tp===0&&Kl!==null){ws!==null&&(ws.status="fulfilled");var a=Kl;Kl=null,Es=0,ws=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function Lk(a,o){var l=[],f={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<l.length;g++)(0,l[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),f}var bx=G.S;G.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Ik(a,o),bx!==null&&bx(a,o)};var bo=X(null);function Dp(){var a=bo.current;return a!==null?a:yt.pooledCache}function tf(a,o){o===null?ue(bo,bo.current):ue(bo,o.pool)}function xx(){var a=Dp();return a===null?null:{parent:tn._currentValue,pool:a}}var Vl=Error(r(460)),Sx=Error(r(474)),nf=Error(r(542)),kp={then:function(){}};function Ax(a){return a=a.status,a==="fulfilled"||a==="rejected"}function rf(){}function Px(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(rf,rf),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ex(a),a;default:if(typeof o.status=="string")o.then(rf,rf);else{if(a=yt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ex(a),a}throw Xl=o,Vl}}var Xl=null;function Cx(){if(Xl===null)throw Error(r(459));var a=Xl;return Xl=null,a}function Ex(a){if(a===Vl||a===nf)throw Error(r(483))}var gi=!1;function Np(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mp(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function yi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function vi(a,o,l){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(at&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=Xu(a),fx(a,null,l),o}return Vu(a,f,o,l),Xu(a)}function Wl(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,l|=f,o.lanes=l,wl(a,l)}}function jp(a,o){var l=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var g=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?g=b=E:b=b.next=E,l=l.next}while(l!==null);b===null?g=b=o:b=b.next=o}else g=b=o;l={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var Rp=!1;function Ql(){if(Rp){var a=ws;if(a!==null)throw a}}function Zl(a,o,l,f){Rp=!1;var g=a.updateQueue;gi=!1;var b=g.firstBaseUpdate,E=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var I=T,K=I.next;I.next=null,E===null?b=K:E.next=K,E=I;var ie=a.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==E&&(T===null?ie.firstBaseUpdate=K:T.next=K,ie.lastBaseUpdate=I))}if(b!==null){var fe=g.baseState;E=0,ie=K=I=null,T=b;do{var Q=T.lane&-536870913,ee=Q!==T.lane;if(ee?(Ve&Q)===Q:(f&Q)===Q){Q!==0&&Q===Es&&(Rp=!0),ie!==null&&(ie=ie.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Re=a,Ne=T;Q=o;var ut=l;switch(Ne.tag){case 1:if(Re=Ne.payload,typeof Re=="function"){fe=Re.call(ut,fe,Q);break e}fe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ne.payload,Q=typeof Re=="function"?Re.call(ut,fe,Q):Re,Q==null)break e;fe=h({},fe,Q);break e;case 2:gi=!0}}Q=T.callback,Q!==null&&(a.flags|=64,ee&&(a.flags|=8192),ee=g.callbacks,ee===null?g.callbacks=[Q]:ee.push(Q))}else ee={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(K=ie=ee,I=fe):ie=ie.next=ee,E|=Q;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;ee=T,T=ee.next,ee.next=null,g.lastBaseUpdate=ee,g.shared.pending=null}}while(!0);ie===null&&(I=fe),g.baseState=I,g.firstBaseUpdate=K,g.lastBaseUpdate=ie,b===null&&(g.shared.lanes=0),wi|=E,a.lanes=E,a.memoizedState=fe}}function wx(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Ox(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)wx(l[a],o)}var Os=X(null),af=X(0);function _x(a,o){a=qa,ue(af,a),ue(Os,o),qa=a|o.baseLanes}function Ip(){ue(af,qa),ue(Os,Os.current)}function Lp(){qa=af.current,V(Os),V(af)}var bi=0,Ue=null,lt=null,Kt=null,of=!1,_s=!1,xo=!1,sf=0,Jl=0,Ts=null,$k=0;function Ut(){throw Error(r(321))}function $p(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!J(a[l],o[l]))return!1;return!0}function Bp(a,o,l,f,g,b){return bi=b,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=a===null||a.memoizedState===null?fS:dS,xo=!1,b=l(f,g),xo=!1,_s&&(b=Dx(o,l,f,g)),Tx(a),b}function Tx(a){G.H=hf;var o=lt!==null&&lt.next!==null;if(bi=0,Kt=lt=Ue=null,of=!1,Jl=0,Ts=null,o)throw Error(r(300));a===null||cn||(a=a.dependencies,a!==null&&Ju(a)&&(cn=!0))}function Dx(a,o,l,f){Ue=a;var g=0;do{if(_s&&(Ts=null),Jl=0,_s=!1,25<=g)throw Error(r(301));if(g+=1,Kt=lt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}G.H=Yk,b=o(l,f)}while(_s);return b}function Bk(){var a=G.H,o=a.useState()[0];return o=typeof o.then=="function"?ec(o):o,a=a.useState()[0],(lt!==null?lt.memoizedState:null)!==a&&(Ue.flags|=1024),o}function Up(){var a=sf!==0;return sf=0,a}function zp(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function Gp(a){if(of){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}of=!1}bi=0,Kt=lt=Ue=null,_s=!1,Jl=sf=0,Ts=null}function Kn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ue.memoizedState=Kt=a:Kt=Kt.next=a,Kt}function Vt(){if(lt===null){var a=Ue.alternate;a=a!==null?a.memoizedState:null}else a=lt.next;var o=Kt===null?Ue.memoizedState:Kt.next;if(o!==null)Kt=o,lt=a;else{if(a===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));lt=a,a={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Kt===null?Ue.memoizedState=Kt=a:Kt=Kt.next=a}return Kt}function Hp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(a){var o=Jl;return Jl+=1,Ts===null&&(Ts=[]),a=Px(Ts,a,o),o=Ue,(Kt===null?o.memoizedState:Kt.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?fS:dS),a}function lf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ec(a);if(a.$$typeof===_)return Dn(a)}throw Error(r(438,String(a)))}function qp(a){var o=null,l=Ue.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var f=Ue.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Hp(),Ue.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),f=0;f<a;f++)l[f]=ae;return o.index++,l}function $a(a,o){return typeof o=="function"?o(a):o}function cf(a){var o=Vt();return Yp(o,lt,a)}function Yp(a,o,l){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var g=a.baseQueue,b=f.pending;if(b!==null){if(g!==null){var E=g.next;g.next=b.next,b.next=E}o.baseQueue=g=b,f.pending=null}if(b=a.baseState,g===null)a.memoizedState=b;else{o=g.next;var T=E=null,I=null,K=o,ie=!1;do{var fe=K.lane&-536870913;if(fe!==K.lane?(Ve&fe)===fe:(bi&fe)===fe){var Q=K.revertLane;if(Q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),fe===Es&&(ie=!0);else if((bi&Q)===Q){K=K.next,Q===Es&&(ie=!0);continue}else fe={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(T=I=fe,E=b):I=I.next=fe,Ue.lanes|=Q,wi|=Q;fe=K.action,xo&&l(b,fe),b=K.hasEagerState?K.eagerState:l(b,fe)}else Q={lane:fe,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(T=I=Q,E=b):I=I.next=Q,Ue.lanes|=fe,wi|=fe;K=K.next}while(K!==null&&K!==o);if(I===null?E=b:I.next=T,!J(b,a.memoizedState)&&(cn=!0,ie&&(l=ws,l!==null)))throw l;a.memoizedState=b,a.baseState=E,a.baseQueue=I,f.lastRenderedState=b}return g===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function Fp(a){var o=Vt(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=l.dispatch,g=l.pending,b=o.memoizedState;if(g!==null){l.pending=null;var E=g=g.next;do b=a(b,E.action),E=E.next;while(E!==g);J(b,o.memoizedState)||(cn=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,f]}function kx(a,o,l){var f=Ue,g=Vt(),b=tt;if(b){if(l===void 0)throw Error(r(407));l=l()}else l=o();var E=!J((lt||g).memoizedState,l);E&&(g.memoizedState=l,cn=!0),g=g.queue;var T=jx.bind(null,f,g,a);if(tc(2048,8,T,[a]),g.getSnapshot!==o||E||Kt!==null&&Kt.memoizedState.tag&1){if(f.flags|=2048,Ds(9,uf(),Mx.bind(null,f,g,l,o),null),yt===null)throw Error(r(349));b||(bi&124)!==0||Nx(f,o,l)}return l}function Nx(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=Ue.updateQueue,o===null?(o=Hp(),Ue.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function Mx(a,o,l,f){o.value=l,o.getSnapshot=f,Rx(o)&&Ix(a)}function jx(a,o,l){return l(function(){Rx(o)&&Ix(a)})}function Rx(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!J(a,l)}catch{return!0}}function Ix(a){var o=Ss(a,2);o!==null&&sr(o,a,2)}function Kp(a){var o=Kn();if(typeof a=="function"){var l=a;if(a=l(),xo){Le(!0);try{l()}finally{Le(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:a},o}function Lx(a,o,l,f){return a.baseState=l,Yp(a,lt,typeof f=="function"?f:$a)}function Uk(a,o,l,f,g){if(df(a))throw Error(r(485));if(a=o.action,a!==null){var b={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};G.T!==null?l(!0):b.isTransition=!1,f(b),l=o.pending,l===null?(b.next=o.pending=b,$x(o,b)):(b.next=l.next,o.pending=l.next=b)}}function $x(a,o){var l=o.action,f=o.payload,g=a.state;if(o.isTransition){var b=G.T,E={};G.T=E;try{var T=l(g,f),I=G.S;I!==null&&I(E,T),Bx(a,o,T)}catch(K){Vp(a,o,K)}finally{G.T=b}}else try{b=l(g,f),Bx(a,o,b)}catch(K){Vp(a,o,K)}}function Bx(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){Ux(a,o,f)},function(f){return Vp(a,o,f)}):Ux(a,o,l)}function Ux(a,o,l){o.status="fulfilled",o.value=l,zx(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,$x(a,l)))}function Vp(a,o,l){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=l,zx(o),o=o.next;while(o!==f)}a.action=null}function zx(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Gx(a,o){return o}function Hx(a,o){if(tt){var l=yt.formState;if(l!==null){e:{var f=Ue;if(tt){if(It){t:{for(var g=It,b=da;g.nodeType!==8;){if(!b){g=null;break t}if(g=Vr(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){It=Vr(g.nextSibling),f=g.data==="F!";break e}}go(f)}f=!1}f&&(o=l[0])}}return l=Kn(),l.memoizedState=l.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gx,lastRenderedState:o},l.queue=f,l=lS.bind(null,Ue,f),f.dispatch=l,f=Kp(!1),b=Jp.bind(null,Ue,!1,f.queue),f=Kn(),g={state:o,dispatch:null,action:a,pending:null},f.queue=g,l=Uk.bind(null,Ue,g,b,l),g.dispatch=l,f.memoizedState=a,[o,l,!1]}function qx(a){var o=Vt();return Yx(o,lt,a)}function Yx(a,o,l){if(o=Yp(a,o,Gx)[0],a=cf($a)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=ec(o)}catch(E){throw E===Vl?nf:E}else f=o;o=Vt();var g=o.queue,b=g.dispatch;return l!==o.memoizedState&&(Ue.flags|=2048,Ds(9,uf(),zk.bind(null,g,l),null)),[f,b,a]}function zk(a,o){a.action=o}function Fx(a){var o=Vt(),l=lt;if(l!==null)return Yx(o,l,a);Vt(),o=o.memoizedState,l=Vt();var f=l.queue.dispatch;return l.memoizedState=a,[o,f,!1]}function Ds(a,o,l,f){return a={tag:a,create:l,deps:f,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=Hp(),Ue.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(f=l.next,l.next=a,a.next=f,o.lastEffect=a),a}function uf(){return{destroy:void 0,resource:void 0}}function Kx(){return Vt().memoizedState}function ff(a,o,l,f){var g=Kn();f=f===void 0?null:f,Ue.flags|=a,g.memoizedState=Ds(1|o,uf(),l,f)}function tc(a,o,l,f){var g=Vt();f=f===void 0?null:f;var b=g.memoizedState.inst;lt!==null&&f!==null&&$p(f,lt.memoizedState.deps)?g.memoizedState=Ds(o,b,l,f):(Ue.flags|=a,g.memoizedState=Ds(1|o,b,l,f))}function Vx(a,o){ff(8390656,8,a,o)}function Xx(a,o){tc(2048,8,a,o)}function Wx(a,o){return tc(4,2,a,o)}function Qx(a,o){return tc(4,4,a,o)}function Zx(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Jx(a,o,l){l=l!=null?l.concat([a]):null,tc(4,4,Zx.bind(null,o,a),l)}function Xp(){}function eS(a,o){var l=Vt();o=o===void 0?null:o;var f=l.memoizedState;return o!==null&&$p(o,f[1])?f[0]:(l.memoizedState=[a,o],a)}function tS(a,o){var l=Vt();o=o===void 0?null:o;var f=l.memoizedState;if(o!==null&&$p(o,f[1]))return f[0];if(f=a(),xo){Le(!0);try{a()}finally{Le(!1)}}return l.memoizedState=[f,o],f}function Wp(a,o,l){return l===void 0||(bi&1073741824)!==0?a.memoizedState=o:(a.memoizedState=l,a=a1(),Ue.lanes|=a,wi|=a,l)}function nS(a,o,l,f){return J(l,o)?l:Os.current!==null?(a=Wp(a,l,f),J(a,o)||(cn=!0),a):(bi&42)===0?(cn=!0,a.memoizedState=l):(a=a1(),Ue.lanes|=a,wi|=a,o)}function rS(a,o,l,f,g){var b=oe.p;oe.p=b!==0&&8>b?b:8;var E=G.T,T={};G.T=T,Jp(a,!1,o,l);try{var I=g(),K=G.S;if(K!==null&&K(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ie=Lk(I,f);nc(a,o,ie,or(a))}else nc(a,o,f,or(a))}catch(fe){nc(a,o,{then:function(){},status:"rejected",reason:fe},or())}finally{oe.p=b,G.T=E}}function Gk(){}function Qp(a,o,l,f){if(a.tag!==5)throw Error(r(476));var g=aS(a).queue;rS(a,g,o,be,l===null?Gk:function(){return iS(a),l(f)})}function aS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:be},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function iS(a){var o=aS(a).next.queue;nc(a,o,{},or())}function Zp(){return Dn(xc)}function oS(){return Vt().memoizedState}function sS(){return Vt().memoizedState}function Hk(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=or();a=yi(l);var f=vi(o,a,l);f!==null&&(sr(f,o,l),Wl(f,o,l)),o={cache:_p()},a.payload=o;return}o=o.return}}function qk(a,o,l){var f=or();l={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},df(a)?cS(o,l):(l=vp(a,o,l,f),l!==null&&(sr(l,a,f),uS(l,o,f)))}function lS(a,o,l){var f=or();nc(a,o,l,f)}function nc(a,o,l,f){var g={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(df(a))cS(o,g);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,T=b(E,l);if(g.hasEagerState=!0,g.eagerState=T,J(T,E))return Vu(a,o,g,0),yt===null&&Ku(),!1}catch{}finally{}if(l=vp(a,o,g,f),l!==null)return sr(l,a,f),uS(l,o,f),!0}return!1}function Jp(a,o,l,f){if(f={lane:2,revertLane:km(),action:f,hasEagerState:!1,eagerState:null,next:null},df(a)){if(o)throw Error(r(479))}else o=vp(a,l,f,2),o!==null&&sr(o,a,2)}function df(a){var o=a.alternate;return a===Ue||o!==null&&o===Ue}function cS(a,o){_s=of=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function uS(a,o,l){if((l&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,l|=f,o.lanes=l,wl(a,l)}}var hf={readContext:Dn,use:lf,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},fS={readContext:Dn,use:lf,useCallback:function(a,o){return Kn().memoizedState=[a,o===void 0?null:o],a},useContext:Dn,useEffect:Vx,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,ff(4194308,4,Zx.bind(null,o,a),l)},useLayoutEffect:function(a,o){return ff(4194308,4,a,o)},useInsertionEffect:function(a,o){ff(4,2,a,o)},useMemo:function(a,o){var l=Kn();o=o===void 0?null:o;var f=a();if(xo){Le(!0);try{a()}finally{Le(!1)}}return l.memoizedState=[f,o],f},useReducer:function(a,o,l){var f=Kn();if(l!==void 0){var g=l(o);if(xo){Le(!0);try{l(o)}finally{Le(!1)}}}else g=o;return f.memoizedState=f.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},f.queue=a,a=a.dispatch=qk.bind(null,Ue,a),[f.memoizedState,a]},useRef:function(a){var o=Kn();return a={current:a},o.memoizedState=a},useState:function(a){a=Kp(a);var o=a.queue,l=lS.bind(null,Ue,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:Xp,useDeferredValue:function(a,o){var l=Kn();return Wp(l,a,o)},useTransition:function(){var a=Kp(!1);return a=rS.bind(null,Ue,a.queue,!0,!1),Kn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var f=Ue,g=Kn();if(tt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),yt===null)throw Error(r(349));(Ve&124)!==0||Nx(f,o,l)}g.memoizedState=l;var b={value:l,getSnapshot:o};return g.queue=b,Vx(jx.bind(null,f,b,a),[a]),f.flags|=2048,Ds(9,uf(),Mx.bind(null,f,b,l,o),null),l},useId:function(){var a=Kn(),o=yt.identifierPrefix;if(tt){var l=Ra,f=ja;l=(f&~(1<<32-Ye(f)-1)).toString(32)+l,o=""+o+"R"+l,l=sf++,0<l&&(o+="H"+l.toString(32)),o+=""}else l=$k++,o=""+o+"r"+l.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:Zp,useFormState:Hx,useActionState:Hx,useOptimistic:function(a){var o=Kn();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Jp.bind(null,Ue,!0,l),l.dispatch=o,[a,o]},useMemoCache:qp,useCacheRefresh:function(){return Kn().memoizedState=Hk.bind(null,Ue)}},dS={readContext:Dn,use:lf,useCallback:eS,useContext:Dn,useEffect:Xx,useImperativeHandle:Jx,useInsertionEffect:Wx,useLayoutEffect:Qx,useMemo:tS,useReducer:cf,useRef:Kx,useState:function(){return cf($a)},useDebugValue:Xp,useDeferredValue:function(a,o){var l=Vt();return nS(l,lt.memoizedState,a,o)},useTransition:function(){var a=cf($a)[0],o=Vt().memoizedState;return[typeof a=="boolean"?a:ec(a),o]},useSyncExternalStore:kx,useId:oS,useHostTransitionStatus:Zp,useFormState:qx,useActionState:qx,useOptimistic:function(a,o){var l=Vt();return Lx(l,lt,a,o)},useMemoCache:qp,useCacheRefresh:sS},Yk={readContext:Dn,use:lf,useCallback:eS,useContext:Dn,useEffect:Xx,useImperativeHandle:Jx,useInsertionEffect:Wx,useLayoutEffect:Qx,useMemo:tS,useReducer:Fp,useRef:Kx,useState:function(){return Fp($a)},useDebugValue:Xp,useDeferredValue:function(a,o){var l=Vt();return lt===null?Wp(l,a,o):nS(l,lt.memoizedState,a,o)},useTransition:function(){var a=Fp($a)[0],o=Vt().memoizedState;return[typeof a=="boolean"?a:ec(a),o]},useSyncExternalStore:kx,useId:oS,useHostTransitionStatus:Zp,useFormState:Fx,useActionState:Fx,useOptimistic:function(a,o){var l=Vt();return lt!==null?Lx(l,lt,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:qp,useCacheRefresh:sS},ks=null,rc=0;function pf(a){var o=rc;return rc+=1,ks===null&&(ks=[]),Px(ks,a,o)}function ac(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function mf(a,o){throw o.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function hS(a){var o=a._init;return o(a._payload)}function pS(a){function o(z,B){if(a){var F=z.deletions;F===null?(z.deletions=[B],z.flags|=16):F.push(B)}}function l(z,B){if(!a)return null;for(;B!==null;)o(z,B),B=B.sibling;return null}function f(z){for(var B=new Map;z!==null;)z.key!==null?B.set(z.key,z):B.set(z.index,z),z=z.sibling;return B}function g(z,B){return z=Ma(z,B),z.index=0,z.sibling=null,z}function b(z,B,F){return z.index=F,a?(F=z.alternate,F!==null?(F=F.index,F<B?(z.flags|=67108866,B):F):(z.flags|=67108866,B)):(z.flags|=1048576,B)}function E(z){return a&&z.alternate===null&&(z.flags|=67108866),z}function T(z,B,F,ce){return B===null||B.tag!==6?(B=xp(F,z.mode,ce),B.return=z,B):(B=g(B,F),B.return=z,B)}function I(z,B,F,ce){var we=F.type;return we===S?ie(z,B,F.props.children,ce,F.key):B!==null&&(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===$&&hS(we)===B.type)?(B=g(B,F.props),ac(B,F),B.return=z,B):(B=Wu(F.type,F.key,F.props,null,z.mode,ce),ac(B,F),B.return=z,B)}function K(z,B,F,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==F.containerInfo||B.stateNode.implementation!==F.implementation?(B=Sp(F,z.mode,ce),B.return=z,B):(B=g(B,F.children||[]),B.return=z,B)}function ie(z,B,F,ce,we){return B===null||B.tag!==7?(B=fo(F,z.mode,ce,we),B.return=z,B):(B=g(B,F),B.return=z,B)}function fe(z,B,F){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=xp(""+B,z.mode,F),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case y:return F=Wu(B.type,B.key,B.props,null,z.mode,F),ac(F,B),F.return=z,F;case x:return B=Sp(B,z.mode,F),B.return=z,B;case $:var ce=B._init;return B=ce(B._payload),fe(z,B,F)}if(ve(B)||re(B))return B=fo(B,z.mode,F,null),B.return=z,B;if(typeof B.then=="function")return fe(z,pf(B),F);if(B.$$typeof===_)return fe(z,ef(z,B),F);mf(z,B)}return null}function Q(z,B,F,ce){var we=B!==null?B.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return we!==null?null:T(z,B,""+F,ce);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case y:return F.key===we?I(z,B,F,ce):null;case x:return F.key===we?K(z,B,F,ce):null;case $:return we=F._init,F=we(F._payload),Q(z,B,F,ce)}if(ve(F)||re(F))return we!==null?null:ie(z,B,F,ce,null);if(typeof F.then=="function")return Q(z,B,pf(F),ce);if(F.$$typeof===_)return Q(z,B,ef(z,F),ce);mf(z,F)}return null}function ee(z,B,F,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return z=z.get(F)||null,T(B,z,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return z=z.get(ce.key===null?F:ce.key)||null,I(B,z,ce,we);case x:return z=z.get(ce.key===null?F:ce.key)||null,K(B,z,ce,we);case $:var Ge=ce._init;return ce=Ge(ce._payload),ee(z,B,F,ce,we)}if(ve(ce)||re(ce))return z=z.get(F)||null,ie(B,z,ce,we,null);if(typeof ce.then=="function")return ee(z,B,F,pf(ce),we);if(ce.$$typeof===_)return ee(z,B,F,ef(B,ce),we);mf(B,ce)}return null}function Re(z,B,F,ce){for(var we=null,Ge=null,Te=B,Me=B=0,fn=null;Te!==null&&Me<F.length;Me++){Te.index>Me?(fn=Te,Te=null):fn=Te.sibling;var Ze=Q(z,Te,F[Me],ce);if(Ze===null){Te===null&&(Te=fn);break}a&&Te&&Ze.alternate===null&&o(z,Te),B=b(Ze,B,Me),Ge===null?we=Ze:Ge.sibling=Ze,Ge=Ze,Te=fn}if(Me===F.length)return l(z,Te),tt&&po(z,Me),we;if(Te===null){for(;Me<F.length;Me++)Te=fe(z,F[Me],ce),Te!==null&&(B=b(Te,B,Me),Ge===null?we=Te:Ge.sibling=Te,Ge=Te);return tt&&po(z,Me),we}for(Te=f(Te);Me<F.length;Me++)fn=ee(Te,z,Me,F[Me],ce),fn!==null&&(a&&fn.alternate!==null&&Te.delete(fn.key===null?Me:fn.key),B=b(fn,B,Me),Ge===null?we=fn:Ge.sibling=fn,Ge=fn);return a&&Te.forEach(function(Ri){return o(z,Ri)}),tt&&po(z,Me),we}function Ne(z,B,F,ce){if(F==null)throw Error(r(151));for(var we=null,Ge=null,Te=B,Me=B=0,fn=null,Ze=F.next();Te!==null&&!Ze.done;Me++,Ze=F.next()){Te.index>Me?(fn=Te,Te=null):fn=Te.sibling;var Ri=Q(z,Te,Ze.value,ce);if(Ri===null){Te===null&&(Te=fn);break}a&&Te&&Ri.alternate===null&&o(z,Te),B=b(Ri,B,Me),Ge===null?we=Ri:Ge.sibling=Ri,Ge=Ri,Te=fn}if(Ze.done)return l(z,Te),tt&&po(z,Me),we;if(Te===null){for(;!Ze.done;Me++,Ze=F.next())Ze=fe(z,Ze.value,ce),Ze!==null&&(B=b(Ze,B,Me),Ge===null?we=Ze:Ge.sibling=Ze,Ge=Ze);return tt&&po(z,Me),we}for(Te=f(Te);!Ze.done;Me++,Ze=F.next())Ze=ee(Te,z,Me,Ze.value,ce),Ze!==null&&(a&&Ze.alternate!==null&&Te.delete(Ze.key===null?Me:Ze.key),B=b(Ze,B,Me),Ge===null?we=Ze:Ge.sibling=Ze,Ge=Ze);return a&&Te.forEach(function(FN){return o(z,FN)}),tt&&po(z,Me),we}function ut(z,B,F,ce){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case y:e:{for(var we=F.key;B!==null;){if(B.key===we){if(we=F.type,we===S){if(B.tag===7){l(z,B.sibling),ce=g(B,F.props.children),ce.return=z,z=ce;break e}}else if(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===$&&hS(we)===B.type){l(z,B.sibling),ce=g(B,F.props),ac(ce,F),ce.return=z,z=ce;break e}l(z,B);break}else o(z,B);B=B.sibling}F.type===S?(ce=fo(F.props.children,z.mode,ce,F.key),ce.return=z,z=ce):(ce=Wu(F.type,F.key,F.props,null,z.mode,ce),ac(ce,F),ce.return=z,z=ce)}return E(z);case x:e:{for(we=F.key;B!==null;){if(B.key===we)if(B.tag===4&&B.stateNode.containerInfo===F.containerInfo&&B.stateNode.implementation===F.implementation){l(z,B.sibling),ce=g(B,F.children||[]),ce.return=z,z=ce;break e}else{l(z,B);break}else o(z,B);B=B.sibling}ce=Sp(F,z.mode,ce),ce.return=z,z=ce}return E(z);case $:return we=F._init,F=we(F._payload),ut(z,B,F,ce)}if(ve(F))return Re(z,B,F,ce);if(re(F)){if(we=re(F),typeof we!="function")throw Error(r(150));return F=we.call(F),Ne(z,B,F,ce)}if(typeof F.then=="function")return ut(z,B,pf(F),ce);if(F.$$typeof===_)return ut(z,B,ef(z,F),ce);mf(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,B!==null&&B.tag===6?(l(z,B.sibling),ce=g(B,F),ce.return=z,z=ce):(l(z,B),ce=xp(F,z.mode,ce),ce.return=z,z=ce),E(z)):l(z,B)}return function(z,B,F,ce){try{rc=0;var we=ut(z,B,F,ce);return ks=null,we}catch(Te){if(Te===Vl||Te===nf)throw Te;var Ge=nr(29,Te,null,z.mode);return Ge.lanes=ce,Ge.return=z,Ge}finally{}}}var Ns=pS(!0),mS=pS(!1),Cr=X(null),ha=null;function xi(a){var o=a.alternate;ue(nn,nn.current&1),ue(Cr,a),ha===null&&(o===null||Os.current!==null||o.memoizedState!==null)&&(ha=a)}function gS(a){if(a.tag===22){if(ue(nn,nn.current),ue(Cr,a),ha===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(ha=a)}}else Si()}function Si(){ue(nn,nn.current),ue(Cr,Cr.current)}function Ba(a){V(Cr),ha===a&&(ha=null),V(nn)}var nn=X(0);function gf(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Hm(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function em(a,o,l,f){o=a.memoizedState,l=l(f,o),l=l==null?o:h({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var tm={enqueueSetState:function(a,o,l){a=a._reactInternals;var f=or(),g=yi(f);g.payload=o,l!=null&&(g.callback=l),o=vi(a,g,f),o!==null&&(sr(o,a,f),Wl(o,a,f))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var f=or(),g=yi(f);g.tag=1,g.payload=o,l!=null&&(g.callback=l),o=vi(a,g,f),o!==null&&(sr(o,a,f),Wl(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=or(),f=yi(l);f.tag=2,o!=null&&(f.callback=o),o=vi(a,f,l),o!==null&&(sr(o,a,l),Wl(o,a,l))}};function yS(a,o,l,f,g,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,b,E):o.prototype&&o.prototype.isPureReactComponent?!pe(l,f)||!pe(g,b):!0}function vS(a,o,l,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==a&&tm.enqueueReplaceState(o,o.state,null)}function So(a,o){var l=o;if("ref"in o){l={};for(var f in o)f!=="ref"&&(l[f]=o[f])}if(a=a.defaultProps){l===o&&(l=h({},l));for(var g in a)l[g]===void 0&&(l[g]=a[g])}return l}var yf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function bS(a){yf(a)}function xS(a){console.error(a)}function SS(a){yf(a)}function vf(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function AS(a,o,l){try{var f=a.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function nm(a,o,l){return l=yi(l),l.tag=3,l.payload={element:null},l.callback=function(){vf(a,o)},l}function PS(a){return a=yi(a),a.tag=3,a}function CS(a,o,l,f){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;a.payload=function(){return g(b)},a.callback=function(){AS(o,l,f)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){AS(o,l,f),typeof g!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var T=f.stack;this.componentDidCatch(f.value,{componentStack:T!==null?T:""})})}function Fk(a,o,l,f,g){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=l.alternate,o!==null&&Yl(o,l,g,!0),l=Cr.current,l!==null){switch(l.tag){case 13:return ha===null?wm():l.alternate===null&&Lt===0&&(Lt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,f===kp?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([f]):o.add(f),_m(a,f,g)),!1;case 22:return l.flags|=65536,f===kp?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([f]):l.add(f)),_m(a,f,g)),!1}throw Error(r(435,l.tag))}return _m(a,f,g),wm(),!1}if(tt)return o=Cr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==Cp&&(a=Error(r(422),{cause:f}),ql(xr(a,l)))):(f!==Cp&&(o=Error(r(423),{cause:f}),ql(xr(o,l))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,f=xr(f,l),g=nm(a.stateNode,f,g),jp(a,g),Lt!==4&&(Lt=2)),!1;var b=Error(r(520),{cause:f});if(b=xr(b,l),fc===null?fc=[b]:fc.push(b),Lt!==4&&(Lt=2),o===null)return!0;f=xr(f,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=g&-g,l.lanes|=a,a=nm(l.stateNode,f,a),jp(l,a),!1;case 1:if(o=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Oi===null||!Oi.has(b))))return l.flags|=65536,g&=-g,l.lanes|=g,g=PS(g),CS(g,a,l,f),jp(l,g),!1}l=l.return}while(l!==null);return!1}var ES=Error(r(461)),cn=!1;function Sn(a,o,l,f){o.child=a===null?mS(o,null,l,f):Ns(o,a.child,l,f)}function wS(a,o,l,f,g){l=l.render;var b=o.ref;if("ref"in f){var E={};for(var T in f)T!=="ref"&&(E[T]=f[T])}else E=f;return vo(o),f=Bp(a,o,l,E,b,g),T=Up(),a!==null&&!cn?(zp(a,o,g),Ua(a,o,g)):(tt&&T&&Ap(o),o.flags|=1,Sn(a,o,f,g),o.child)}function OS(a,o,l,f,g){if(a===null){var b=l.type;return typeof b=="function"&&!bp(b)&&b.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=b,_S(a,o,b,f,g)):(a=Wu(l.type,null,f,o,o.mode,g),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!um(a,g)){var E=b.memoizedProps;if(l=l.compare,l=l!==null?l:pe,l(E,f)&&a.ref===o.ref)return Ua(a,o,g)}return o.flags|=1,a=Ma(b,f),a.ref=o.ref,a.return=o,o.child=a}function _S(a,o,l,f,g){if(a!==null){var b=a.memoizedProps;if(pe(b,f)&&a.ref===o.ref)if(cn=!1,o.pendingProps=f=b,um(a,g))(a.flags&131072)!==0&&(cn=!0);else return o.lanes=a.lanes,Ua(a,o,g)}return rm(a,o,l,f,g)}function TS(a,o,l){var f=o.pendingProps,g=f.children,b=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=b!==null?b.baseLanes|l:l,a!==null){for(g=o.child=a.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;o.childLanes=b&~f}else o.childLanes=0,o.child=null;return DS(a,o,f,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&tf(o,b!==null?b.cachePool:null),b!==null?_x(o,b):Ip(),gS(o);else return o.lanes=o.childLanes=536870912,DS(a,o,b!==null?b.baseLanes|l:l,l)}else b!==null?(tf(o,b.cachePool),_x(o,b),Si(),o.memoizedState=null):(a!==null&&tf(o,null),Ip(),Si());return Sn(a,o,g,l),o.child}function DS(a,o,l,f){var g=Dp();return g=g===null?null:{parent:tn._currentValue,pool:g},o.memoizedState={baseLanes:l,cachePool:g},a!==null&&tf(o,null),Ip(),gS(o),a!==null&&Yl(a,o,f,!0),null}function bf(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function rm(a,o,l,f,g){return vo(o),l=Bp(a,o,l,f,void 0,g),f=Up(),a!==null&&!cn?(zp(a,o,g),Ua(a,o,g)):(tt&&f&&Ap(o),o.flags|=1,Sn(a,o,l,g),o.child)}function kS(a,o,l,f,g,b){return vo(o),o.updateQueue=null,l=Dx(o,f,l,g),Tx(a),f=Up(),a!==null&&!cn?(zp(a,o,b),Ua(a,o,b)):(tt&&f&&Ap(o),o.flags|=1,Sn(a,o,l,b),o.child)}function NS(a,o,l,f,g){if(vo(o),o.stateNode===null){var b=As,E=l.contextType;typeof E=="object"&&E!==null&&(b=Dn(E)),b=new l(f,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=tm,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=f,b.state=o.memoizedState,b.refs={},Np(o),E=l.contextType,b.context=typeof E=="object"&&E!==null?Dn(E):As,b.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(em(o,l,E,f),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&tm.enqueueReplaceState(b,b.state,null),Zl(o,f,b,g),Ql(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){b=o.stateNode;var T=o.memoizedProps,I=So(l,T);b.props=I;var K=b.context,ie=l.contextType;E=As,typeof ie=="object"&&ie!==null&&(E=Dn(ie));var fe=l.getDerivedStateFromProps;ie=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",T=o.pendingProps!==T,ie||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T||K!==E)&&vS(o,b,f,E),gi=!1;var Q=o.memoizedState;b.state=Q,Zl(o,f,b,g),Ql(),K=o.memoizedState,T||Q!==K||gi?(typeof fe=="function"&&(em(o,l,fe,f),K=o.memoizedState),(I=gi||yS(o,l,I,f,Q,K,E))?(ie||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=K),b.props=f,b.state=K,b.context=E,f=I):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,Mp(a,o),E=o.memoizedProps,ie=So(l,E),b.props=ie,fe=o.pendingProps,Q=b.context,K=l.contextType,I=As,typeof K=="object"&&K!==null&&(I=Dn(K)),T=l.getDerivedStateFromProps,(K=typeof T=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==fe||Q!==I)&&vS(o,b,f,I),gi=!1,Q=o.memoizedState,b.state=Q,Zl(o,f,b,g),Ql();var ee=o.memoizedState;E!==fe||Q!==ee||gi||a!==null&&a.dependencies!==null&&Ju(a.dependencies)?(typeof T=="function"&&(em(o,l,T,f),ee=o.memoizedState),(ie=gi||yS(o,l,ie,f,Q,ee,I)||a!==null&&a.dependencies!==null&&Ju(a.dependencies))?(K||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ee,I),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ee,I)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Q===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Q===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ee),b.props=f,b.state=ee,b.context=I,f=ie):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Q===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Q===a.memoizedState||(o.flags|=1024),f=!1)}return b=f,bf(a,o),f=(o.flags&128)!==0,b||f?(b=o.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&f?(o.child=Ns(o,a.child,null,g),o.child=Ns(o,null,l,g)):Sn(a,o,l,g),o.memoizedState=b.state,a=o.child):a=Ua(a,o,g),a}function MS(a,o,l,f){return Hl(),o.flags|=256,Sn(a,o,l,f),o.child}var am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function im(a){return{baseLanes:a,cachePool:xx()}}function om(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=Er),a}function jS(a,o,l){var f=o.pendingProps,g=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(nn.current&2)!==0),E&&(g=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(tt){if(g?xi(o):Si(),tt){var T=It,I;if(I=T){e:{for(I=T,T=da;I.nodeType!==8;){if(!T){T=null;break e}if(I=Vr(I.nextSibling),I===null){T=null;break e}}T=I}T!==null?(o.memoizedState={dehydrated:T,treeContext:ho!==null?{id:ja,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},I=nr(18,null,null,0),I.stateNode=T,I.return=o,o.child=I,Un=o,It=null,I=!0):I=!1}I||go(o)}if(T=o.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Hm(T)?o.lanes=32:o.lanes=536870912,null;Ba(o)}return T=f.children,f=f.fallback,g?(Si(),g=o.mode,T=xf({mode:"hidden",children:T},g),f=fo(f,g,l,null),T.return=o,f.return=o,T.sibling=f,o.child=T,g=o.child,g.memoizedState=im(l),g.childLanes=om(a,E,l),o.memoizedState=am,f):(xi(o),sm(o,T))}if(I=a.memoizedState,I!==null&&(T=I.dehydrated,T!==null)){if(b)o.flags&256?(xi(o),o.flags&=-257,o=lm(a,o,l)):o.memoizedState!==null?(Si(),o.child=a.child,o.flags|=128,o=null):(Si(),g=f.fallback,T=o.mode,f=xf({mode:"visible",children:f.children},T),g=fo(g,T,l,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,Ns(o,a.child,null,l),f=o.child,f.memoizedState=im(l),f.childLanes=om(a,E,l),o.memoizedState=am,o=g);else if(xi(o),Hm(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var K=E.dgst;E=K,f=Error(r(419)),f.stack="",f.digest=E,ql({value:f,source:null,stack:null}),o=lm(a,o,l)}else if(cn||Yl(a,o,l,!1),E=(l&a.childLanes)!==0,cn||E){if(E=yt,E!==null&&(f=l&-l,f=(f&42)!==0?1:Eu(f),f=(f&(E.suspendedLanes|l))!==0?0:f,f!==0&&f!==I.retryLane))throw I.retryLane=f,Ss(a,f),sr(E,a,f),ES;T.data==="$?"||wm(),o=lm(a,o,l)}else T.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=I.treeContext,It=Vr(T.nextSibling),Un=o,tt=!0,mo=null,da=!1,a!==null&&(Ar[Pr++]=ja,Ar[Pr++]=Ra,Ar[Pr++]=ho,ja=a.id,Ra=a.overflow,ho=o),o=sm(o,f.children),o.flags|=4096);return o}return g?(Si(),g=f.fallback,T=o.mode,I=a.child,K=I.sibling,f=Ma(I,{mode:"hidden",children:f.children}),f.subtreeFlags=I.subtreeFlags&65011712,K!==null?g=Ma(K,g):(g=fo(g,T,l,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,T=a.child.memoizedState,T===null?T=im(l):(I=T.cachePool,I!==null?(K=tn._currentValue,I=I.parent!==K?{parent:K,pool:K}:I):I=xx(),T={baseLanes:T.baseLanes|l,cachePool:I}),g.memoizedState=T,g.childLanes=om(a,E,l),o.memoizedState=am,f):(xi(o),l=a.child,a=l.sibling,l=Ma(l,{mode:"visible",children:f.children}),l.return=o,l.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=l,o.memoizedState=null,l)}function sm(a,o){return o=xf({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function xf(a,o){return a=nr(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function lm(a,o,l){return Ns(o,a.child,null,l),a=sm(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function RS(a,o,l){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),wp(a.return,o,l)}function cm(a,o,l,f,g){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=l,b.tailMode=g)}function IS(a,o,l){var f=o.pendingProps,g=f.revealOrder,b=f.tail;if(Sn(a,o,f.children,l),f=nn.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&RS(a,l,o);else if(a.tag===19)RS(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(ue(nn,f),g){case"forwards":for(l=o.child,g=null;l!==null;)a=l.alternate,a!==null&&gf(a)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),cm(o,!1,g,l,b);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(a=g.alternate,a!==null&&gf(a)===null){o.child=g;break}a=g.sibling,g.sibling=l,l=g,g=a}cm(o,!0,l,null,b);break;case"together":cm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ua(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),wi|=o.lanes,(l&o.childLanes)===0)if(a!==null){if(Yl(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,l=Ma(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=Ma(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function um(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Ju(a)))}function Kk(a,o,l){switch(o.tag){case 3:ge(o,o.stateNode.containerInfo),mi(o,tn,a.memoizedState.cache),Hl();break;case 27:case 5:he(o);break;case 4:ge(o,o.stateNode.containerInfo);break;case 10:mi(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(xi(o),o.flags|=128,null):(l&o.child.childLanes)!==0?jS(a,o,l):(xi(o),a=Ua(a,o,l),a!==null?a.sibling:null);xi(o);break;case 19:var g=(a.flags&128)!==0;if(f=(l&o.childLanes)!==0,f||(Yl(a,o,l,!1),f=(l&o.childLanes)!==0),g){if(f)return IS(a,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(nn,nn.current),f)break;return null;case 22:case 23:return o.lanes=0,TS(a,o,l);case 24:mi(o,tn,a.memoizedState.cache)}return Ua(a,o,l)}function LS(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)cn=!0;else{if(!um(a,l)&&(o.flags&128)===0)return cn=!1,Kk(a,o,l);cn=(a.flags&131072)!==0}else cn=!1,tt&&(o.flags&1048576)!==0&&hx(o,Zu,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")bp(f)?(a=So(f,a),o.tag=1,o=NS(null,o,f,a,l)):(o.tag=0,o=rm(null,o,f,a,l));else{if(f!=null){if(g=f.$$typeof,g===M){o.tag=11,o=wS(null,o,f,a,l);break e}else if(g===L){o.tag=14,o=OS(null,o,f,a,l);break e}}throw o=de(f)||f,Error(r(306,o,""))}}return o;case 0:return rm(a,o,o.type,o.pendingProps,l);case 1:return f=o.type,g=So(f,o.pendingProps),NS(a,o,f,g,l);case 3:e:{if(ge(o,o.stateNode.containerInfo),a===null)throw Error(r(387));f=o.pendingProps;var b=o.memoizedState;g=b.element,Mp(a,o),Zl(o,f,null,l);var E=o.memoizedState;if(f=E.cache,mi(o,tn,f),f!==b.cache&&Op(o,[tn],l,!0),Ql(),f=E.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=MS(a,o,f,l);break e}else if(f!==g){g=xr(Error(r(424)),o),ql(g),o=MS(a,o,f,l);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(It=Vr(a.firstChild),Un=o,tt=!0,mo=null,da=!0,l=mS(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Hl(),f===g){o=Ua(a,o,l);break e}Sn(a,o,f,l)}o=o.child}return o;case 26:return bf(a,o),a===null?(l=z1(o.type,null,o.pendingProps,null))?o.memoizedState=l:tt||(l=o.type,a=o.pendingProps,f=jf(se.current).createElement(l),f[Yt]=o,f[Dt]=a,Pn(f,l,a),xt(f),o.stateNode=f):o.memoizedState=z1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return he(o),a===null&&tt&&(f=o.stateNode=$1(o.type,o.pendingProps,se.current),Un=o,da=!0,g=It,Di(o.type)?(qm=g,It=Vr(f.firstChild)):It=g),Sn(a,o,o.pendingProps.children,l),bf(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&tt&&((g=f=It)&&(f=SN(f,o.type,o.pendingProps,da),f!==null?(o.stateNode=f,Un=o,It=Vr(f.firstChild),da=!1,g=!0):g=!1),g||go(o)),he(o),g=o.type,b=o.pendingProps,E=a!==null?a.memoizedProps:null,f=b.children,Um(g,b)?f=null:E!==null&&Um(g,E)&&(o.flags|=32),o.memoizedState!==null&&(g=Bp(a,o,Bk,null,null,l),xc._currentValue=g),bf(a,o),Sn(a,o,f,l),o.child;case 6:return a===null&&tt&&((a=l=It)&&(l=AN(l,o.pendingProps,da),l!==null?(o.stateNode=l,Un=o,It=null,a=!0):a=!1),a||go(o)),null;case 13:return jS(a,o,l);case 4:return ge(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=Ns(o,null,f,l):Sn(a,o,f,l),o.child;case 11:return wS(a,o,o.type,o.pendingProps,l);case 7:return Sn(a,o,o.pendingProps,l),o.child;case 8:return Sn(a,o,o.pendingProps.children,l),o.child;case 12:return Sn(a,o,o.pendingProps.children,l),o.child;case 10:return f=o.pendingProps,mi(o,o.type,f.value),Sn(a,o,f.children,l),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,vo(o),g=Dn(g),f=f(g),o.flags|=1,Sn(a,o,f,l),o.child;case 14:return OS(a,o,o.type,o.pendingProps,l);case 15:return _S(a,o,o.type,o.pendingProps,l);case 19:return IS(a,o,l);case 31:return f=o.pendingProps,l=o.mode,f={mode:f.mode,children:f.children},a===null?(l=xf(f,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=Ma(a.child,f),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return TS(a,o,l);case 24:return vo(o),f=Dn(tn),a===null?(g=Dp(),g===null&&(g=yt,b=_p(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=l),g=b),o.memoizedState={parent:f,cache:g},Np(o),mi(o,tn,g)):((a.lanes&l)!==0&&(Mp(a,o),Zl(o,null,null,l),Ql()),g=a.memoizedState,b=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),mi(o,tn,f)):(f=b.cache,mi(o,tn,f),f!==g.cache&&Op(o,[tn],l,!0))),Sn(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function za(a){a.flags|=4}function $S(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!F1(o)){if(o=Cr.current,o!==null&&((Ve&4194048)===Ve?ha!==null:(Ve&62914560)!==Ve&&(Ve&536870912)===0||o!==ha))throw Xl=kp,Sx;a.flags|=8192}}function Sf(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?El():536870912,a.lanes|=o,Is|=o)}function ic(a,o){if(!tt)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Mt(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,f=0;if(o)for(var g=a.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=f,a.childLanes=l,o}function Vk(a,o,l){var f=o.pendingProps;switch(Pp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(o),null;case 1:return Mt(o),null;case 3:return l=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),La(tn),le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(Gl(o)?za(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gx())),Mt(o),null;case 26:return l=o.memoizedState,a===null?(za(o),l!==null?(Mt(o),$S(o,l)):(Mt(o),o.flags&=-16777217)):l?l!==a.memoizedState?(za(o),Mt(o),$S(o,l)):(Mt(o),o.flags&=-16777217):(a.memoizedProps!==f&&za(o),Mt(o),o.flags&=-16777217),null;case 27:xe(o),l=se.current;var g=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==f&&za(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Mt(o),null}a=Ae.current,Gl(o)?px(o):(a=$1(g,f,l),o.stateNode=a,za(o))}return Mt(o),null;case 5:if(xe(o),l=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&za(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Mt(o),null}if(a=Ae.current,Gl(o))px(o);else{switch(g=jf(se.current),a){case 1:a=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:a=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":a=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":a=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?g.createElement(l,{is:f.is}):g.createElement(l)}}a[Yt]=o,a[Dt]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=a;e:switch(Pn(a,l,f),l){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&za(o)}}return Mt(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&za(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(a=se.current,Gl(o)){if(a=o.stateNode,l=o.memoizedProps,f=null,g=Un,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}a[Yt]=o,a=!!(a.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||k1(a.nodeValue,l)),a||go(o)}else a=jf(a).createTextNode(f),a[Yt]=o,o.stateNode=a}return Mt(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=Gl(o),f!==null&&f.dehydrated!==null){if(a===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Yt]=o}else Hl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Mt(o),g=!1}else g=gx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Ba(o),o):(Ba(o),null)}if(Ba(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=f!==null,a=a!==null&&a.memoizedState!==null,l){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)}return l!==a&&l&&(o.child.flags|=8192),Sf(o,o.updateQueue),Mt(o),null;case 4:return le(),a===null&&Rm(o.stateNode.containerInfo),Mt(o),null;case 10:return La(o.type),Mt(o),null;case 19:if(V(nn),g=o.memoizedState,g===null)return Mt(o),null;if(f=(o.flags&128)!==0,b=g.rendering,b===null)if(f)ic(g,!1);else{if(Lt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=gf(a),b!==null){for(o.flags|=128,ic(g,!1),a=b.updateQueue,o.updateQueue=a,Sf(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)dx(l,a),l=l.sibling;return ue(nn,nn.current&1|2),o.child}a=a.sibling}g.tail!==null&&Rt()>Cf&&(o.flags|=128,f=!0,ic(g,!1),o.lanes=4194304)}else{if(!f)if(a=gf(b),a!==null){if(o.flags|=128,f=!0,a=a.updateQueue,o.updateQueue=a,Sf(o,a),ic(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!tt)return Mt(o),null}else 2*Rt()-g.renderingStartTime>Cf&&l!==536870912&&(o.flags|=128,f=!0,ic(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(a=g.last,a!==null?a.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Rt(),o.sibling=null,a=nn.current,ue(nn,f?a&1|2:a&1),o):(Mt(o),null);case 22:case 23:return Ba(o),Lp(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(l&536870912)!==0&&(o.flags&128)===0&&(Mt(o),o.subtreeFlags&6&&(o.flags|=8192)):Mt(o),l=o.updateQueue,l!==null&&Sf(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==l&&(o.flags|=2048),a!==null&&V(bo),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),La(tn),Mt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Xk(a,o){switch(Pp(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return La(tn),le(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return xe(o),null;case 13:if(Ba(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Hl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return V(nn),null;case 4:return le(),null;case 10:return La(o.type),null;case 22:case 23:return Ba(o),Lp(),a!==null&&V(bo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return La(tn),null;case 25:return null;default:return null}}function BS(a,o){switch(Pp(o),o.tag){case 3:La(tn),le();break;case 26:case 27:case 5:xe(o);break;case 4:le();break;case 13:Ba(o);break;case 19:V(nn);break;case 10:La(o.type);break;case 22:case 23:Ba(o),Lp(),a!==null&&V(bo);break;case 24:La(tn)}}function oc(a,o){try{var l=o.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var g=f.next;l=g;do{if((l.tag&a)===a){f=void 0;var b=l.create,E=l.inst;f=b(),E.destroy=f}l=l.next}while(l!==g)}}catch(T){pt(o,o.return,T)}}function Ai(a,o,l){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&a)===a){var E=f.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,g=o;var I=l,K=T;try{K()}catch(ie){pt(g,I,ie)}}}f=f.next}while(f!==b)}}catch(ie){pt(o,o.return,ie)}}function US(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{Ox(o,l)}catch(f){pt(a,a.return,f)}}}function zS(a,o,l){l.props=So(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(f){pt(a,o,f)}}function sc(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof l=="function"?a.refCleanup=l(f):l.current=f}}catch(g){pt(a,o,g)}}function pa(a,o){var l=a.ref,f=a.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(g){pt(a,o,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){pt(a,o,g)}else l.current=null}function GS(a){var o=a.type,l=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(g){pt(a,a.return,g)}}function fm(a,o,l){try{var f=a.stateNode;gN(f,a.type,l,o),f[Dt]=o}catch(g){pt(a,a.return,g)}}function HS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Di(a.type)||a.tag===4}function dm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||HS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Di(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function hm(a,o,l){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Mf));else if(f!==4&&(f===27&&Di(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(hm(a,o,l),a=a.sibling;a!==null;)hm(a,o,l),a=a.sibling}function Af(a,o,l){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(f!==4&&(f===27&&Di(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Af(a,o,l),a=a.sibling;a!==null;)Af(a,o,l),a=a.sibling}function qS(a){var o=a.stateNode,l=a.memoizedProps;try{for(var f=a.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Pn(o,f,l),o[Yt]=a,o[Dt]=l}catch(b){pt(a,a.return,b)}}var Ga=!1,zt=!1,pm=!1,YS=typeof WeakSet=="function"?WeakSet:Set,un=null;function Wk(a,o){if(a=a.containerInfo,$m=Uf,a=Xe(a),Qe(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var E=0,T=-1,I=-1,K=0,ie=0,fe=a,Q=null;t:for(;;){for(var ee;fe!==l||g!==0&&fe.nodeType!==3||(T=E+g),fe!==b||f!==0&&fe.nodeType!==3||(I=E+f),fe.nodeType===3&&(E+=fe.nodeValue.length),(ee=fe.firstChild)!==null;)Q=fe,fe=ee;for(;;){if(fe===a)break t;if(Q===l&&++K===g&&(T=E),Q===b&&++ie===f&&(I=E),(ee=fe.nextSibling)!==null)break;fe=Q,Q=fe.parentNode}fe=ee}l=T===-1||I===-1?null:{start:T,end:I}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bm={focusedElem:a,selectionRange:l},Uf=!1,un=o;un!==null;)if(o=un,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,un=a;else for(;un!==null;){switch(o=un,b=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,l=o,g=b.memoizedProps,b=b.memoizedState,f=l.stateNode;try{var Re=So(l.type,g,l.elementType===l.type);a=f.getSnapshotBeforeUpdate(Re,b),f.__reactInternalSnapshotBeforeUpdate=a}catch(Ne){pt(l,l.return,Ne)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)Gm(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Gm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,un=a;break}un=o.return}}function FS(a,o,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Pi(a,l),f&4&&oc(5,l);break;case 1:if(Pi(a,l),f&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(E){pt(l,l.return,E)}else{var g=So(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(g,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){pt(l,l.return,E)}}f&64&&US(l),f&512&&sc(l,l.return);break;case 3:if(Pi(a,l),f&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Ox(a,o)}catch(E){pt(l,l.return,E)}}break;case 27:o===null&&f&4&&qS(l);case 26:case 5:Pi(a,l),o===null&&f&4&&GS(l),f&512&&sc(l,l.return);break;case 12:Pi(a,l);break;case 13:Pi(a,l),f&4&&XS(a,l),f&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=iN.bind(null,l),PN(a,l))));break;case 22:if(f=l.memoizedState!==null||Ga,!f){o=o!==null&&o.memoizedState!==null||zt,g=Ga;var b=zt;Ga=f,(zt=o)&&!b?Ci(a,l,(l.subtreeFlags&8772)!==0):Pi(a,l),Ga=g,zt=b}break;case 30:break;default:Pi(a,l)}}function KS(a){var o=a.alternate;o!==null&&(a.alternate=null,KS(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&as(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ct=null,Vn=!1;function Ha(a,o,l){for(l=l.child;l!==null;)VS(a,o,l),l=l.sibling}function VS(a,o,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Jt,l)}catch{}switch(l.tag){case 26:zt||pa(l,o),Ha(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zt||pa(l,o);var f=Ct,g=Vn;Di(l.type)&&(Ct=l.stateNode,Vn=!1),Ha(a,o,l),gc(l.stateNode),Ct=f,Vn=g;break;case 5:zt||pa(l,o);case 6:if(f=Ct,g=Vn,Ct=null,Ha(a,o,l),Ct=f,Vn=g,Ct!==null)if(Vn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(l.stateNode)}catch(b){pt(l,o,b)}else try{Ct.removeChild(l.stateNode)}catch(b){pt(l,o,b)}break;case 18:Ct!==null&&(Vn?(a=Ct,I1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),Cc(a)):I1(Ct,l.stateNode));break;case 4:f=Ct,g=Vn,Ct=l.stateNode.containerInfo,Vn=!0,Ha(a,o,l),Ct=f,Vn=g;break;case 0:case 11:case 14:case 15:zt||Ai(2,l,o),zt||Ai(4,l,o),Ha(a,o,l);break;case 1:zt||(pa(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"&&zS(l,o,f)),Ha(a,o,l);break;case 21:Ha(a,o,l);break;case 22:zt=(f=zt)||l.memoizedState!==null,Ha(a,o,l),zt=f;break;default:Ha(a,o,l)}}function XS(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Cc(a)}catch(l){pt(o,o.return,l)}}function Qk(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new YS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new YS),o;default:throw Error(r(435,a.tag))}}function mm(a,o){var l=Qk(a);o.forEach(function(f){var g=oN.bind(null,a,f);l.has(f)||(l.add(f),f.then(g,g))})}function rr(a,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var g=l[f],b=a,E=o,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(Di(T.type)){Ct=T.stateNode,Vn=!1;break e}break;case 5:Ct=T.stateNode,Vn=!1;break e;case 3:case 4:Ct=T.stateNode.containerInfo,Vn=!0;break e}T=T.return}if(Ct===null)throw Error(r(160));VS(b,E,g),Ct=null,Vn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)WS(o,a),o=o.sibling}var Kr=null;function WS(a,o){var l=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:rr(o,a),ar(a),f&4&&(Ai(3,a,a.return),oc(3,a),Ai(5,a,a.return));break;case 1:rr(o,a),ar(a),f&512&&(zt||l===null||pa(l,l.return)),f&64&&Ga&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var g=Kr;if(rr(o,a),ar(a),f&512&&(zt||l===null||pa(l,l.return)),f&4){var b=l!==null?l.memoizedState:null;if(f=a.memoizedState,l===null)if(f===null)if(a.stateNode===null){e:{f=a.type,l=a.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Br]||b[Yt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),Pn(b,f,l),b[Yt]=a,xt(b),f=b;break e;case"link":var E=q1("link","href",g).get(f+(l.href||""));if(E){for(var T=0;T<E.length;T++)if(b=E[T],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(T,1);break t}}b=g.createElement(f),Pn(b,f,l),g.head.appendChild(b);break;case"meta":if(E=q1("meta","content",g).get(f+(l.content||""))){for(T=0;T<E.length;T++)if(b=E[T],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(T,1);break t}}b=g.createElement(f),Pn(b,f,l),g.head.appendChild(b);break;default:throw Error(r(468,f))}b[Yt]=a,xt(b),f=b}a.stateNode=f}else Y1(g,a.type,a.stateNode);else a.stateNode=H1(g,f,a.memoizedProps);else b!==f?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,f===null?Y1(g,a.type,a.stateNode):H1(g,f,a.memoizedProps)):f===null&&a.stateNode!==null&&fm(a,a.memoizedProps,l.memoizedProps)}break;case 27:rr(o,a),ar(a),f&512&&(zt||l===null||pa(l,l.return)),l!==null&&f&4&&fm(a,a.memoizedProps,l.memoizedProps);break;case 5:if(rr(o,a),ar(a),f&512&&(zt||l===null||pa(l,l.return)),a.flags&32){g=a.stateNode;try{gt(g,"")}catch(ee){pt(a,a.return,ee)}}f&4&&a.stateNode!=null&&(g=a.memoizedProps,fm(a,g,l!==null?l.memoizedProps:g)),f&1024&&(pm=!0);break;case 6:if(rr(o,a),ar(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,l=a.stateNode;try{l.nodeValue=f}catch(ee){pt(a,a.return,ee)}}break;case 3:if(Lf=null,g=Kr,Kr=Rf(o.containerInfo),rr(o,a),Kr=g,ar(a),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Cc(o.containerInfo)}catch(ee){pt(a,a.return,ee)}pm&&(pm=!1,QS(a));break;case 4:f=Kr,Kr=Rf(a.stateNode.containerInfo),rr(o,a),ar(a),Kr=f;break;case 12:rr(o,a),ar(a);break;case 13:rr(o,a),ar(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Sm=Rt()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,mm(a,f)));break;case 22:g=a.memoizedState!==null;var I=l!==null&&l.memoizedState!==null,K=Ga,ie=zt;if(Ga=K||g,zt=ie||I,rr(o,a),zt=ie,Ga=K,ar(a),f&8192)e:for(o=a.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(l===null||I||Ga||zt||Ao(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){I=l=o;try{if(b=I.stateNode,g)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=I.stateNode;var fe=I.memoizedProps.style,Q=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ee){pt(I,I.return,ee)}}}else if(o.tag===6){if(l===null){I=o;try{I.stateNode.nodeValue=g?"":I.memoizedProps}catch(ee){pt(I,I.return,ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,mm(a,l))));break;case 19:rr(o,a),ar(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,mm(a,f)));break;case 30:break;case 21:break;default:rr(o,a),ar(a)}}function ar(a){var o=a.flags;if(o&2){try{for(var l,f=a.return;f!==null;){if(HS(f)){l=f;break}f=f.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,b=dm(a);Af(a,b,g);break;case 5:var E=l.stateNode;l.flags&32&&(gt(E,""),l.flags&=-33);var T=dm(a);Af(a,T,E);break;case 3:case 4:var I=l.stateNode.containerInfo,K=dm(a);hm(a,K,I);break;default:throw Error(r(161))}}catch(ie){pt(a,a.return,ie)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function QS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;QS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Pi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)FS(a,o.alternate,o),o=o.sibling}function Ao(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ai(4,o,o.return),Ao(o);break;case 1:pa(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&zS(o,o.return,l),Ao(o);break;case 27:gc(o.stateNode);case 26:case 5:pa(o,o.return),Ao(o);break;case 22:o.memoizedState===null&&Ao(o);break;case 30:Ao(o);break;default:Ao(o)}a=a.sibling}}function Ci(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=a,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:Ci(g,b,l),oc(4,b);break;case 1:if(Ci(g,b,l),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(K){pt(f,f.return,K)}if(f=b,g=f.updateQueue,g!==null){var T=f.stateNode;try{var I=g.shared.hiddenCallbacks;if(I!==null)for(g.shared.hiddenCallbacks=null,g=0;g<I.length;g++)wx(I[g],T)}catch(K){pt(f,f.return,K)}}l&&E&64&&US(b),sc(b,b.return);break;case 27:qS(b);case 26:case 5:Ci(g,b,l),l&&f===null&&E&4&&GS(b),sc(b,b.return);break;case 12:Ci(g,b,l);break;case 13:Ci(g,b,l),l&&E&4&&XS(g,b);break;case 22:b.memoizedState===null&&Ci(g,b,l),sc(b,b.return);break;case 30:break;default:Ci(g,b,l)}o=o.sibling}}function gm(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&Fl(l))}function ym(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Fl(a))}function ma(a,o,l,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ZS(a,o,l,f),o=o.sibling}function ZS(a,o,l,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ma(a,o,l,f),g&2048&&oc(9,o);break;case 1:ma(a,o,l,f);break;case 3:ma(a,o,l,f),g&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Fl(a)));break;case 12:if(g&2048){ma(a,o,l,f),a=o.stateNode;try{var b=o.memoizedProps,E=b.id,T=b.onPostCommit;typeof T=="function"&&T(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(I){pt(o,o.return,I)}}else ma(a,o,l,f);break;case 13:ma(a,o,l,f);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?ma(a,o,l,f):lc(a,o):b._visibility&2?ma(a,o,l,f):(b._visibility|=2,Ms(a,o,l,f,(o.subtreeFlags&10256)!==0)),g&2048&&gm(E,o);break;case 24:ma(a,o,l,f),g&2048&&ym(o.alternate,o);break;default:ma(a,o,l,f)}}function Ms(a,o,l,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=a,E=o,T=l,I=f,K=E.flags;switch(E.tag){case 0:case 11:case 15:Ms(b,E,T,I,g),oc(8,E);break;case 23:break;case 22:var ie=E.stateNode;E.memoizedState!==null?ie._visibility&2?Ms(b,E,T,I,g):lc(b,E):(ie._visibility|=2,Ms(b,E,T,I,g)),g&&K&2048&&gm(E.alternate,E);break;case 24:Ms(b,E,T,I,g),g&&K&2048&&ym(E.alternate,E);break;default:Ms(b,E,T,I,g)}o=o.sibling}}function lc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,f=o,g=f.flags;switch(f.tag){case 22:lc(l,f),g&2048&&gm(f.alternate,f);break;case 24:lc(l,f),g&2048&&ym(f.alternate,f);break;default:lc(l,f)}o=o.sibling}}var cc=8192;function js(a){if(a.subtreeFlags&cc)for(a=a.child;a!==null;)JS(a),a=a.sibling}function JS(a){switch(a.tag){case 26:js(a),a.flags&cc&&a.memoizedState!==null&&IN(Kr,a.memoizedState,a.memoizedProps);break;case 5:js(a);break;case 3:case 4:var o=Kr;Kr=Rf(a.stateNode.containerInfo),js(a),Kr=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=cc,cc=16777216,js(a),cc=o):js(a));break;default:js(a)}}function e1(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function uc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];un=f,n1(f,a)}e1(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)t1(a),a=a.sibling}function t1(a){switch(a.tag){case 0:case 11:case 15:uc(a),a.flags&2048&&Ai(9,a,a.return);break;case 3:uc(a);break;case 12:uc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Pf(a)):uc(a);break;default:uc(a)}}function Pf(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];un=f,n1(f,a)}e1(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ai(8,o,o.return),Pf(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Pf(o));break;default:Pf(o)}a=a.sibling}}function n1(a,o){for(;un!==null;){var l=un;switch(l.tag){case 0:case 11:case 15:Ai(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Fl(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,un=f;else e:for(l=a;un!==null;){f=un;var g=f.sibling,b=f.return;if(KS(f),f===l){un=null;break e}if(g!==null){g.return=b,un=g;break e}un=b}}}var Zk={getCacheForType:function(a){var o=Dn(tn),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l}},Jk=typeof WeakMap=="function"?WeakMap:Map,at=0,yt=null,He=null,Ve=0,it=0,ir=null,Ei=!1,Rs=!1,vm=!1,qa=0,Lt=0,wi=0,Po=0,bm=0,Er=0,Is=0,fc=null,Xn=null,xm=!1,Sm=0,Cf=1/0,Ef=null,Oi=null,An=0,_i=null,Ls=null,$s=0,Am=0,Pm=null,r1=null,dc=0,Cm=null;function or(){if((at&2)!==0&&Ve!==0)return Ve&-Ve;if(G.T!==null){var a=Es;return a!==0?a:km()}return _l()}function a1(){Er===0&&(Er=(Ve&536870912)===0||tt?es():536870912);var a=Cr.current;return a!==null&&(a.flags|=32),Er}function sr(a,o,l){(a===yt&&(it===2||it===9)||a.cancelPendingCommit!==null)&&(Bs(a,0),Ti(a,Ve,Er,!1)),ci(a,l),((at&2)===0||a!==yt)&&(a===yt&&((at&2)===0&&(Po|=l),Lt===4&&Ti(a,Ve,Er,!1)),ga(a))}function i1(a,o,l){if((at&6)!==0)throw Error(r(327));var f=!l&&(o&124)===0&&(o&a.expiredLanes)===0||na(a,o),g=f?nN(a,o):Om(a,o,!0),b=f;do{if(g===0){Rs&&!f&&Ti(a,o,0,!1);break}else{if(l=a.current.alternate,b&&!eN(l)){g=Om(a,o,!1),b=!1;continue}if(g===2){if(b=o,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var T=a;g=fc;var I=T.current.memoizedState.isDehydrated;if(I&&(Bs(T,E).flags|=256),E=Om(T,E,!1),E!==2){if(vm&&!I){T.errorRecoveryDisabledLanes|=b,Po|=b,g=4;break e}b=Xn,Xn=g,b!==null&&(Xn===null?Xn=b:Xn.push.apply(Xn,b))}g=E}if(b=!1,g!==2)continue}}if(g===1){Bs(a,0),Ti(a,o,0,!0);break}e:{switch(f=a,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ti(f,o,Er,!Ei);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=Sm+300-Rt(),10<g)){if(Ti(f,o,Er,!Ei),ta(f,0,!0)!==0)break e;f.timeoutHandle=j1(o1.bind(null,f,l,Xn,Ef,xm,o,Er,Po,Is,Ei,b,2,-0,0),g);break e}o1(f,l,Xn,Ef,xm,o,Er,Po,Is,Ei,b,0,-0,0)}}break}while(!0);ga(a)}function o1(a,o,l,f,g,b,E,T,I,K,ie,fe,Q,ee){if(a.timeoutHandle=-1,fe=o.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(bc={stylesheets:null,count:0,unsuspend:RN},JS(o),fe=LN(),fe!==null)){a.cancelPendingCommit=fe(h1.bind(null,a,o,b,l,f,g,E,T,I,ie,1,Q,ee)),Ti(a,b,E,!K);return}h1(a,o,b,l,f,g,E,T,I)}function eN(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var g=l[f],b=g.getSnapshot;g=g.value;try{if(!J(b(),g))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ti(a,o,l,f){o&=~bm,o&=~Po,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var g=o;0<g;){var b=31-Ye(g),E=1<<b;f[b]=-1,g&=~E}l!==0&&ra(a,l,o)}function wf(){return(at&6)===0?(hc(0),!1):!0}function Em(){if(He!==null){if(it===0)var a=He.return;else a=He,Ia=yo=null,Gp(a),ks=null,rc=0,a=He;for(;a!==null;)BS(a.alternate,a),a=a.return;He=null}}function Bs(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,vN(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Em(),yt=a,He=l=Ma(a.current,null),Ve=o,it=0,ir=null,Ei=!1,Rs=na(a,o),vm=!1,Is=Er=bm=Po=wi=Lt=0,Xn=fc=null,xm=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var g=31-Ye(f),b=1<<g;o|=a[g],f&=~b}return qa=o,Ku(),l}function s1(a,o){Ue=null,G.H=hf,o===Vl||o===nf?(o=Cx(),it=3):o===Sx?(o=Cx(),it=4):it=o===ES?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ir=o,He===null&&(Lt=1,vf(a,xr(o,a.current)))}function l1(){var a=G.H;return G.H=hf,a===null?hf:a}function c1(){var a=G.A;return G.A=Zk,a}function wm(){Lt=4,Ei||(Ve&4194048)!==Ve&&Cr.current!==null||(Rs=!0),(wi&134217727)===0&&(Po&134217727)===0||yt===null||Ti(yt,Ve,Er,!1)}function Om(a,o,l){var f=at;at|=2;var g=l1(),b=c1();(yt!==a||Ve!==o)&&(Ef=null,Bs(a,o)),o=!1;var E=Lt;e:do try{if(it!==0&&He!==null){var T=He,I=ir;switch(it){case 8:Em(),E=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(o=!0);var K=it;if(it=0,ir=null,Us(a,T,I,K),l&&Rs){E=0;break e}break;default:K=it,it=0,ir=null,Us(a,T,I,K)}}tN(),E=Lt;break}catch(ie){s1(a,ie)}while(!0);return o&&a.shellSuspendCounter++,Ia=yo=null,at=f,G.H=g,G.A=b,He===null&&(yt=null,Ve=0,Ku()),E}function tN(){for(;He!==null;)u1(He)}function nN(a,o){var l=at;at|=2;var f=l1(),g=c1();yt!==a||Ve!==o?(Ef=null,Cf=Rt()+500,Bs(a,o)):Rs=na(a,o);e:do try{if(it!==0&&He!==null){o=He;var b=ir;t:switch(it){case 1:it=0,ir=null,Us(a,o,b,1);break;case 2:case 9:if(Ax(b)){it=0,ir=null,f1(o);break}o=function(){it!==2&&it!==9||yt!==a||(it=7),ga(a)},b.then(o,o);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Ax(b)?(it=0,ir=null,f1(o)):(it=0,ir=null,Us(a,o,b,7));break;case 5:var E=null;switch(He.tag){case 26:E=He.memoizedState;case 5:case 27:var T=He;if(!E||F1(E)){it=0,ir=null;var I=T.sibling;if(I!==null)He=I;else{var K=T.return;K!==null?(He=K,Of(K)):He=null}break t}}it=0,ir=null,Us(a,o,b,5);break;case 6:it=0,ir=null,Us(a,o,b,6);break;case 8:Em(),Lt=6;break e;default:throw Error(r(462))}}rN();break}catch(ie){s1(a,ie)}while(!0);return Ia=yo=null,G.H=f,G.A=g,at=l,He!==null?0:(yt=null,Ve=0,Ku(),Lt)}function rN(){for(;He!==null&&!Pt();)u1(He)}function u1(a){var o=LS(a.alternate,a,qa);a.memoizedProps=a.pendingProps,o===null?Of(a):He=o}function f1(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=kS(l,o,o.pendingProps,o.type,void 0,Ve);break;case 11:o=kS(l,o,o.pendingProps,o.type.render,o.ref,Ve);break;case 5:Gp(o);default:BS(l,o),o=He=dx(o,qa),o=LS(l,o,qa)}a.memoizedProps=a.pendingProps,o===null?Of(a):He=o}function Us(a,o,l,f){Ia=yo=null,Gp(o),ks=null,rc=0;var g=o.return;try{if(Fk(a,g,o,l,Ve)){Lt=1,vf(a,xr(l,a.current)),He=null;return}}catch(b){if(g!==null)throw He=g,b;Lt=1,vf(a,xr(l,a.current)),He=null;return}o.flags&32768?(tt||f===1?a=!0:Rs||(Ve&536870912)!==0?a=!1:(Ei=a=!0,(f===2||f===9||f===3||f===6)&&(f=Cr.current,f!==null&&f.tag===13&&(f.flags|=16384))),d1(o,a)):Of(o)}function Of(a){var o=a;do{if((o.flags&32768)!==0){d1(o,Ei);return}a=o.return;var l=Vk(o.alternate,o,qa);if(l!==null){He=l;return}if(o=o.sibling,o!==null){He=o;return}He=o=a}while(o!==null);Lt===0&&(Lt=5)}function d1(a,o){do{var l=Xk(a.alternate,a);if(l!==null){l.flags&=32767,He=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){He=a;return}He=a=l}while(a!==null);Lt=6,He=null}function h1(a,o,l,f,g,b,E,T,I){a.cancelPendingCommit=null;do _f();while(An!==0);if((at&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=yp,ns(a,l,b,E,T,I),a===yt&&(He=yt=null,Ve=0),Ls=o,_i=a,$s=l,Am=b,Pm=g,r1=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,sN(Zi,function(){return v1(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=G.T,G.T=null,g=oe.p,oe.p=2,E=at,at|=4;try{Wk(a,o,l)}finally{at=E,oe.p=g,G.T=f}}An=1,p1(),m1(),g1()}}function p1(){if(An===1){An=0;var a=_i,o=Ls,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=G.T,G.T=null;var f=oe.p;oe.p=2;var g=at;at|=4;try{WS(o,a);var b=Bm,E=Xe(a.containerInfo),T=b.focusedElem,I=b.selectionRange;if(E!==T&&T&&T.ownerDocument&&Be(T.ownerDocument.documentElement,T)){if(I!==null&&Qe(T)){var K=I.start,ie=I.end;if(ie===void 0&&(ie=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(ie,T.value.length);else{var fe=T.ownerDocument||document,Q=fe&&fe.defaultView||window;if(Q.getSelection){var ee=Q.getSelection(),Re=T.textContent.length,Ne=Math.min(I.start,Re),ut=I.end===void 0?Ne:Math.min(I.end,Re);!ee.extend&&Ne>ut&&(E=ut,ut=Ne,Ne=E);var z=ke(T,Ne),B=ke(T,ut);if(z&&B&&(ee.rangeCount!==1||ee.anchorNode!==z.node||ee.anchorOffset!==z.offset||ee.focusNode!==B.node||ee.focusOffset!==B.offset)){var F=fe.createRange();F.setStart(z.node,z.offset),ee.removeAllRanges(),Ne>ut?(ee.addRange(F),ee.extend(B.node,B.offset)):(F.setEnd(B.node,B.offset),ee.addRange(F))}}}}for(fe=[],ee=T;ee=ee.parentNode;)ee.nodeType===1&&fe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<fe.length;T++){var ce=fe[T];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Uf=!!$m,Bm=$m=null}finally{at=g,oe.p=f,G.T=l}}a.current=o,An=2}}function m1(){if(An===2){An=0;var a=_i,o=Ls,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=G.T,G.T=null;var f=oe.p;oe.p=2;var g=at;at|=4;try{FS(a,o.alternate,o)}finally{at=g,oe.p=f,G.T=l}}An=3}}function g1(){if(An===4||An===3){An=0,qt();var a=_i,o=Ls,l=$s,f=r1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?An=5:(An=0,Ls=_i=null,y1(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(Oi=null),Ol(l),o=o.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Jt,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=G.T,g=oe.p,oe.p=2,G.T=null;try{for(var b=a.onRecoverableError,E=0;E<f.length;E++){var T=f[E];b(T.value,{componentStack:T.stack})}}finally{G.T=o,oe.p=g}}($s&3)!==0&&_f(),ga(a),g=a.pendingLanes,(l&4194090)!==0&&(g&42)!==0?a===Cm?dc++:(dc=0,Cm=a):dc=0,hc(0)}}function y1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Fl(o)))}function _f(a){return p1(),m1(),g1(),v1()}function v1(){if(An!==5)return!1;var a=_i,o=Am;Am=0;var l=Ol($s),f=G.T,g=oe.p;try{oe.p=32>l?32:l,G.T=null,l=Pm,Pm=null;var b=_i,E=$s;if(An=0,Ls=_i=null,$s=0,(at&6)!==0)throw Error(r(331));var T=at;if(at|=4,t1(b.current),ZS(b,b.current,E,l),at=T,hc(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Jt,b)}catch{}return!0}finally{oe.p=g,G.T=f,y1(a,o)}}function b1(a,o,l){o=xr(l,o),o=nm(a.stateNode,o,2),a=vi(a,o,2),a!==null&&(ci(a,2),ga(a))}function pt(a,o,l){if(a.tag===3)b1(a,a,l);else for(;o!==null;){if(o.tag===3){b1(o,a,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Oi===null||!Oi.has(f))){a=xr(l,a),l=PS(2),f=vi(o,l,2),f!==null&&(CS(l,f,o,a),ci(f,2),ga(f));break}}o=o.return}}function _m(a,o,l){var f=a.pingCache;if(f===null){f=a.pingCache=new Jk;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(l)||(vm=!0,g.add(l),a=aN.bind(null,a,o,l),o.then(a,a))}function aN(a,o,l){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,yt===a&&(Ve&l)===l&&(Lt===4||Lt===3&&(Ve&62914560)===Ve&&300>Rt()-Sm?(at&2)===0&&Bs(a,0):bm|=l,Is===Ve&&(Is=0)),ga(a)}function x1(a,o){o===0&&(o=El()),a=Ss(a,o),a!==null&&(ci(a,o),ga(a))}function iN(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),x1(a,l)}function oN(a,o){var l=0;switch(a.tag){case 13:var f=a.stateNode,g=a.memoizedState;g!==null&&(l=g.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(o),x1(a,l)}function sN(a,o){return ze(a,o)}var Tf=null,zs=null,Tm=!1,Df=!1,Dm=!1,Co=0;function ga(a){a!==zs&&a.next===null&&(zs===null?Tf=zs=a:zs=zs.next=a),Df=!0,Tm||(Tm=!0,cN())}function hc(a,o){if(!Dm&&Df){Dm=!0;do for(var l=!1,f=Tf;f!==null;){if(a!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var E=f.suspendedLanes,T=f.pingedLanes;b=(1<<31-Ye(42|a)+1)-1,b&=g&~(E&~T),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,C1(f,b))}else b=Ve,b=ta(f,f===yt?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||na(f,b)||(l=!0,C1(f,b));f=f.next}while(l);Dm=!1}}function lN(){S1()}function S1(){Df=Tm=!1;var a=0;Co!==0&&(yN()&&(a=Co),Co=0);for(var o=Rt(),l=null,f=Tf;f!==null;){var g=f.next,b=A1(f,o);b===0?(f.next=null,l===null?Tf=g:l.next=g,g===null&&(zs=l)):(l=f,(a!==0||(b&3)!==0)&&(Df=!0)),f=g}hc(a)}function A1(a,o){for(var l=a.suspendedLanes,f=a.pingedLanes,g=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-Ye(b),T=1<<E,I=g[E];I===-1?((T&l)===0||(T&f)!==0)&&(g[E]=Jo(T,o)):I<=o&&(a.expiredLanes|=T),b&=~T}if(o=yt,l=Ve,l=ta(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,l===0||a===o&&(it===2||it===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Ie(f),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||na(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(f!==null&&Ie(f),Ol(l)){case 2:case 8:l=Cl;break;case 32:l=Zi;break;case 268435456:l=qh;break;default:l=Zi}return f=P1.bind(null,a),l=ze(l,f),a.callbackPriority=o,a.callbackNode=l,o}return f!==null&&f!==null&&Ie(f),a.callbackPriority=2,a.callbackNode=null,2}function P1(a,o){if(An!==0&&An!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(_f()&&a.callbackNode!==l)return null;var f=Ve;return f=ta(a,a===yt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(i1(a,f,o),A1(a,Rt()),a.callbackNode!=null&&a.callbackNode===l?P1.bind(null,a):null)}function C1(a,o){if(_f())return null;i1(a,o,!0)}function cN(){bN(function(){(at&6)!==0?ze(Tt,lN):S1()})}function km(){return Co===0&&(Co=es()),Co}function E1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ao(""+a)}function w1(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function uN(a,o,l,f,g){if(o==="submit"&&l&&l.stateNode===g){var b=E1((g[Dt]||null).action),E=f.submitter;E&&(o=(o=E[Dt]||null)?E1(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var T=new Bt("action","action",null,f,g);a.push({event:T,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Co!==0){var I=E?w1(g,E):new FormData(g);Qp(l,{pending:!0,data:I,method:g.method,action:b},null,I)}}else typeof b=="function"&&(T.preventDefault(),I=E?w1(g,E):new FormData(g),Qp(l,{pending:!0,data:I,method:g.method,action:b},b,I))},currentTarget:g}]})}}for(var Nm=0;Nm<gp.length;Nm++){var Mm=gp[Nm],fN=Mm.toLowerCase(),dN=Mm[0].toUpperCase()+Mm.slice(1);Fr(fN,"on"+dN)}Fr(mp,"onAnimationEnd"),Fr(ox,"onAnimationIteration"),Fr(sx,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(Tk,"onTransitionRun"),Fr(Dk,"onTransitionStart"),Fr(kk,"onTransitionCancel"),Fr(lx,"onTransitionEnd"),Pa("onMouseEnter",["mouseout","mouseover"]),Pa("onMouseLeave",["mouseout","mouseover"]),Pa("onPointerEnter",["pointerout","pointerover"]),Pa("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function O1(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var f=a[l],g=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var E=f.length-1;0<=E;E--){var T=f[E],I=T.instance,K=T.currentTarget;if(T=T.listener,I!==b&&g.isPropagationStopped())break e;b=T,g.currentTarget=K;try{b(g)}catch(ie){yf(ie)}g.currentTarget=null,b=I}else for(E=0;E<f.length;E++){if(T=f[E],I=T.instance,K=T.currentTarget,T=T.listener,I!==b&&g.isPropagationStopped())break e;b=T,g.currentTarget=K;try{b(g)}catch(ie){yf(ie)}g.currentTarget=null,b=I}}}}function qe(a,o){var l=o[rs];l===void 0&&(l=o[rs]=new Set);var f=a+"__bubble";l.has(f)||(_1(o,a,2,!1),l.add(f))}function jm(a,o,l){var f=0;o&&(f|=4),_1(l,a,f,o)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Rm(a){if(!a[kf]){a[kf]=!0,Aa.forEach(function(l){l!=="selectionchange"&&(hN.has(l)||jm(l,!1,a),jm(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[kf]||(o[kf]=!0,jm("selectionchange",!1,o))}}function _1(a,o,l,f){switch(Z1(o)){case 2:var g=UN;break;case 8:g=zN;break;default:g=Xm}l=g.bind(null,o,l,a),g=void 0,!ps||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?a.addEventListener(o,l,{capture:!0,passive:g}):a.addEventListener(o,l,!0):g!==void 0?a.addEventListener(o,l,{passive:g}):a.addEventListener(o,l,!1)}function Im(a,o,l,f,g){var b=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var T=f.stateNode.containerInfo;if(T===g)break;if(E===4)for(E=f.return;E!==null;){var I=E.tag;if((I===3||I===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;T!==null;){if(E=to(T),E===null)return;if(I=E.tag,I===5||I===6||I===26||I===27){f=b=E;continue e}T=T.parentNode}}f=f.return}Ea(function(){var K=b,ie=fi(l),fe=[];e:{var Q=cx.get(a);if(Q!==void 0){var ee=Bt,Re=a;switch(a){case"keypress":if(Bn(l)===0)break e;case"keydown":case"keyup":ee=ep;break;case"focusin":Re="focus",ee=co;break;case"focusout":Re="blur",ee=co;break;case"beforeblur":case"afterblur":ee=co;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=np;break;case mp:case ox:case sx:ee=Xh;break;case lx:ee=ap;break;case"scroll":case"scrollend":ee=en;break;case"wheel":ee=op;break;case"copy":case"cut":case"paste":ee=Wh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Il;break;case"toggle":case"beforetoggle":ee=lp}var Ne=(o&4)!==0,ut=!Ne&&(a==="scroll"||a==="scrollend"),z=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var B=K,F;B!==null;){var ce=B;if(F=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||F===null||z===null||(ce=Gr(B,z),ce!=null&&Ne.push(mc(B,ce,F))),ut)break;B=B.return}0<Ne.length&&(Q=new ee(Q,Re,null,l,ie),fe.push({event:Q,listeners:Ne}))}}if((o&7)===0){e:{if(Q=a==="mouseover"||a==="pointerover",ee=a==="mouseout"||a==="pointerout",Q&&l!==ui&&(Re=l.relatedTarget||l.fromElement)&&(to(Re)||Re[aa]))break e;if((ee||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,ee?(Re=l.relatedTarget||l.toElement,ee=K,Re=Re?to(Re):null,Re!==null&&(ut=s(Re),Ne=Re.tag,Re!==ut||Ne!==5&&Ne!==27&&Ne!==6)&&(Re=null)):(ee=null,Re=K),ee!==Re)){if(Ne=Du,ce="onMouseLeave",z="onMouseEnter",B="mouse",(a==="pointerout"||a==="pointerover")&&(Ne=Il,ce="onPointerLeave",z="onPointerEnter",B="pointer"),ut=ee==null?Q:ia(ee),F=Re==null?Q:ia(Re),Q=new Ne(ce,B+"leave",ee,l,ie),Q.target=ut,Q.relatedTarget=F,ce=null,to(ie)===K&&(Ne=new Ne(z,B+"enter",Re,l,ie),Ne.target=F,Ne.relatedTarget=ut,ce=Ne),ut=ce,ee&&Re)t:{for(Ne=ee,z=Re,B=0,F=Ne;F;F=Gs(F))B++;for(F=0,ce=z;ce;ce=Gs(ce))F++;for(;0<B-F;)Ne=Gs(Ne),B--;for(;0<F-B;)z=Gs(z),F--;for(;B--;){if(Ne===z||z!==null&&Ne===z.alternate)break t;Ne=Gs(Ne),z=Gs(z)}Ne=null}else Ne=null;ee!==null&&T1(fe,Q,ee,Ne,!1),Re!==null&&ut!==null&&T1(fe,ut,Re,Ne,!0)}}e:{if(Q=K?ia(K):window,ee=Q.nodeName&&Q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Q.type==="file")var we=zu;else if(Bl(Q))if(Gu)we=Y;else{we=N;var Ge=pp}else ee=Q.nodeName,!ee||ee.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&ca(K.elementType)&&(we=zu):we=R;if(we&&(we=we(a,K))){Bu(fe,we,l,ie);break e}Ge&&Ge(a,Q,K),a==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&ds(Q,"number",Q.value)}switch(Ge=K?ia(K):window,a){case"focusin":(Bl(Ge)||Ge.contentEditable==="true")&&(We=Ge,ht=K,Hr=null);break;case"focusout":Hr=ht=We=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":qr=!1,Ta(fe,l,ie);break;case"selectionchange":if(rt)break;case"keydown":case"keyup":Ta(fe,l,ie)}var Te;if(Ll)e:{switch(a){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Oa?$l(a,l)&&(Me="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(Iu&&l.locale!=="ko"&&(Oa||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Oa&&(Te=$t()):(ua=ie,io="value"in ua?ua.value:ua.textContent,Oa=!0)),Ge=Nf(K,Me),0<Ge.length&&(Me=new Nu(Me,a,null,l,ie),fe.push({event:Me,listeners:Ge}),Te?Me.data=Te:(Te=$u(l),Te!==null&&(Me.data=Te)))),(Te=up?fp(a,l):dp(a,l))&&(Me=Nf(K,"onBeforeInput"),0<Me.length&&(Ge=new Nu("onBeforeInput","beforeinput",null,l,ie),fe.push({event:Ge,listeners:Me}),Ge.data=Te)),uN(fe,a,K,l,ie)}O1(fe,o)})}function mc(a,o,l){return{instance:a,listener:o,currentTarget:l}}function Nf(a,o){for(var l=o+"Capture",f=[];a!==null;){var g=a,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Gr(a,l),g!=null&&f.unshift(mc(a,g,b)),g=Gr(a,o),g!=null&&f.push(mc(a,g,b))),a.tag===3)return f;a=a.return}return[]}function Gs(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function T1(a,o,l,f,g){for(var b=o._reactName,E=[];l!==null&&l!==f;){var T=l,I=T.alternate,K=T.stateNode;if(T=T.tag,I!==null&&I===f)break;T!==5&&T!==26&&T!==27||K===null||(I=K,g?(K=Gr(l,b),K!=null&&E.unshift(mc(l,K,I))):g||(K=Gr(l,b),K!=null&&E.push(mc(l,K,I)))),l=l.return}E.length!==0&&a.push({event:o,listeners:E})}var pN=/\r\n?/g,mN=/\u0000|\uFFFD/g;function D1(a){return(typeof a=="string"?a:""+a).replace(pN,`
`).replace(mN,"")}function k1(a,o){return o=D1(o),D1(a)===o}function Mf(){}function ct(a,o,l,f,g,b){switch(l){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||gt(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&gt(a,""+f);break;case"className":yn(a,"class",f);break;case"tabIndex":yn(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":yn(a,l,f);break;case"style":ro(a,f,b);break;case"data":if(o!=="object"){yn(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(l);break}f=ao(""+f),a.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(o!=="input"&&ct(a,o,"name",g.name,g,null),ct(a,o,"formEncType",g.formEncType,g,null),ct(a,o,"formMethod",g.formMethod,g,null),ct(a,o,"formTarget",g.formTarget,g,null)):(ct(a,o,"encType",g.encType,g,null),ct(a,o,"method",g.method,g,null),ct(a,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(l);break}f=ao(""+f),a.setAttribute(l,f);break;case"onClick":f!=null&&(a.onclick=Mf);break;case"onScroll":f!=null&&qe("scroll",a);break;case"onScrollEnd":f!=null&&qe("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=l}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}l=ao(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,""+f):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":f===!0?a.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,f):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(l,f):a.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(l):a.setAttribute(l,f);break;case"popover":qe("beforetoggle",a),qe("toggle",a),kt(a,"popover",f);break;case"xlinkActuate":On(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":On(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":On(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":On(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":On(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":On(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":On(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":On(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":On(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":kt(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ur.get(l)||l,kt(a,l,f))}}function Lm(a,o,l,f,g,b){switch(l){case"style":ro(a,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=l}}break;case"children":typeof f=="string"?gt(a,f):(typeof f=="number"||typeof f=="bigint")&&gt(a,""+f);break;case"onScroll":f!=null&&qe("scroll",a);break;case"onScrollEnd":f!=null&&qe("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Mf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),o=l.slice(2,g?l.length-7:void 0),b=a[Dt]||null,b=b!=null?b[l]:null,typeof b=="function"&&a.removeEventListener(o,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,f,g);break e}l in a?a[l]=f:f===!0?a.setAttribute(l,""):kt(a,l,f)}}}function Pn(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",a),qe("load",a);var f=!1,g=!1,b;for(b in l)if(l.hasOwnProperty(b)){var E=l[b];if(E!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ct(a,o,b,E,l,null)}}g&&ct(a,o,"srcSet",l.srcSet,l,null),f&&ct(a,o,"src",l.src,l,null);return;case"input":qe("invalid",a);var T=b=E=g=null,I=null,K=null;for(f in l)if(l.hasOwnProperty(f)){var ie=l[f];if(ie!=null)switch(f){case"name":g=ie;break;case"type":E=ie;break;case"checked":I=ie;break;case"defaultChecked":K=ie;break;case"value":b=ie;break;case"defaultValue":T=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:ct(a,o,f,ie,l,null)}}fs(a,b,T,I,K,E,g,!1),Fn(a);return;case"select":qe("invalid",a),f=E=b=null;for(g in l)if(l.hasOwnProperty(g)&&(T=l[g],T!=null))switch(g){case"value":b=T;break;case"defaultValue":E=T;break;case"multiple":f=T;default:ct(a,o,g,T,l,null)}o=b,l=E,a.multiple=!!f,o!=null?la(a,!!f,o,!1):l!=null&&la(a,!!f,l,!0);return;case"textarea":qe("invalid",a),b=g=f=null;for(E in l)if(l.hasOwnProperty(E)&&(T=l[E],T!=null))switch(E){case"value":f=T;break;case"defaultValue":g=T;break;case"children":b=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ct(a,o,E,T,l,null)}jl(a,f,g,b),Fn(a);return;case"option":for(I in l)if(l.hasOwnProperty(I)&&(f=l[I],f!=null))switch(I){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ct(a,o,I,f,l,null)}return;case"dialog":qe("beforetoggle",a),qe("toggle",a),qe("cancel",a),qe("close",a);break;case"iframe":case"object":qe("load",a);break;case"video":case"audio":for(f=0;f<pc.length;f++)qe(pc[f],a);break;case"image":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"embed":case"source":case"link":qe("error",a),qe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(f=l[K],f!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ct(a,o,K,f,l,null)}return;default:if(ca(o)){for(ie in l)l.hasOwnProperty(ie)&&(f=l[ie],f!==void 0&&Lm(a,o,ie,f,l,void 0));return}}for(T in l)l.hasOwnProperty(T)&&(f=l[T],f!=null&&ct(a,o,T,f,l,null))}function gN(a,o,l,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,E=null,T=null,I=null,K=null,ie=null;for(ee in l){var fe=l[ee];if(l.hasOwnProperty(ee)&&fe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":I=fe;default:f.hasOwnProperty(ee)||ct(a,o,ee,null,f,fe)}}for(var Q in f){var ee=f[Q];if(fe=l[Q],f.hasOwnProperty(Q)&&(ee!=null||fe!=null))switch(Q){case"type":b=ee;break;case"name":g=ee;break;case"checked":K=ee;break;case"defaultChecked":ie=ee;break;case"value":E=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:ee!==fe&&ct(a,o,Q,ee,f,fe)}}us(a,E,T,I,K,ie,b,g);return;case"select":ee=E=T=Q=null;for(b in l)if(I=l[b],l.hasOwnProperty(b)&&I!=null)switch(b){case"value":break;case"multiple":ee=I;default:f.hasOwnProperty(b)||ct(a,o,b,null,f,I)}for(g in f)if(b=f[g],I=l[g],f.hasOwnProperty(g)&&(b!=null||I!=null))switch(g){case"value":Q=b;break;case"defaultValue":T=b;break;case"multiple":E=b;default:b!==I&&ct(a,o,g,b,f,I)}o=T,l=E,f=ee,Q!=null?la(a,!!l,Q,!1):!!f!=!!l&&(o!=null?la(a,!!l,o,!0):la(a,!!l,l?[]:"",!1));return;case"textarea":ee=Q=null;for(T in l)if(g=l[T],l.hasOwnProperty(T)&&g!=null&&!f.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ct(a,o,T,null,f,g)}for(E in f)if(g=f[E],b=l[E],f.hasOwnProperty(E)&&(g!=null||b!=null))switch(E){case"value":Q=g;break;case"defaultValue":ee=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&ct(a,o,E,g,f,b)}Ml(a,Q,ee);return;case"option":for(var Re in l)if(Q=l[Re],l.hasOwnProperty(Re)&&Q!=null&&!f.hasOwnProperty(Re))switch(Re){case"selected":a.selected=!1;break;default:ct(a,o,Re,null,f,Q)}for(I in f)if(Q=f[I],ee=l[I],f.hasOwnProperty(I)&&Q!==ee&&(Q!=null||ee!=null))switch(I){case"selected":a.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ct(a,o,I,Q,f,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)Q=l[Ne],l.hasOwnProperty(Ne)&&Q!=null&&!f.hasOwnProperty(Ne)&&ct(a,o,Ne,null,f,Q);for(K in f)if(Q=f[K],ee=l[K],f.hasOwnProperty(K)&&Q!==ee&&(Q!=null||ee!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,o));break;default:ct(a,o,K,Q,f,ee)}return;default:if(ca(o)){for(var ut in l)Q=l[ut],l.hasOwnProperty(ut)&&Q!==void 0&&!f.hasOwnProperty(ut)&&Lm(a,o,ut,void 0,f,Q);for(ie in f)Q=f[ie],ee=l[ie],!f.hasOwnProperty(ie)||Q===ee||Q===void 0&&ee===void 0||Lm(a,o,ie,Q,f,ee);return}}for(var z in l)Q=l[z],l.hasOwnProperty(z)&&Q!=null&&!f.hasOwnProperty(z)&&ct(a,o,z,null,f,Q);for(fe in f)Q=f[fe],ee=l[fe],!f.hasOwnProperty(fe)||Q===ee||Q==null&&ee==null||ct(a,o,fe,Q,f,ee)}var $m=null,Bm=null;function jf(a){return a.nodeType===9?a:a.ownerDocument}function N1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Um(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var zm=null;function yN(){var a=window.event;return a&&a.type==="popstate"?a===zm?!1:(zm=a,!0):(zm=null,!1)}var j1=typeof setTimeout=="function"?setTimeout:void 0,vN=typeof clearTimeout=="function"?clearTimeout:void 0,R1=typeof Promise=="function"?Promise:void 0,bN=typeof queueMicrotask=="function"?queueMicrotask:typeof R1<"u"?function(a){return R1.resolve(null).then(a).catch(xN)}:j1;function xN(a){setTimeout(function(){throw a})}function Di(a){return a==="head"}function I1(a,o){var l=o,f=0,g=0;do{var b=l.nextSibling;if(a.removeChild(l),b&&b.nodeType===8)if(l=b.data,l==="/$"){if(0<f&&8>f){l=f;var E=a.ownerDocument;if(l&1&&gc(E.documentElement),l&2&&gc(E.body),l&4)for(l=E.head,gc(l),E=l.firstChild;E;){var T=E.nextSibling,I=E.nodeName;E[Br]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&E.rel.toLowerCase()==="stylesheet"||l.removeChild(E),E=T}}if(g===0){a.removeChild(b),Cc(o);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:f=l.charCodeAt(0)-48;else f=0;l=b}while(l);Cc(o)}function Gm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Gm(l),as(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function SN(a,o,l,f){for(;a.nodeType===1;){var g=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Br])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Vr(a.nextSibling),a===null)break}return null}function AN(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Vr(a.nextSibling),a===null))return null;return a}function Hm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function PN(a,o){var l=a.ownerDocument;if(a.data!=="$?"||l.readyState==="complete")o();else{var f=function(){o(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Vr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var qm=null;function L1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return a;o--}else l==="/$"&&o++}a=a.previousSibling}return null}function $1(a,o,l){switch(o=jf(l),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function gc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);as(a)}var wr=new Map,B1=new Set;function Rf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ya=oe.d;oe.d={f:CN,r:EN,D:wN,C:ON,L:_N,m:TN,X:kN,S:DN,M:NN};function CN(){var a=Ya.f(),o=wf();return a||o}function EN(a){var o=no(a);o!==null&&o.tag===5&&o.type==="form"?iS(o):Ya.r(a)}var Hs=typeof document>"u"?null:document;function U1(a,o,l){var f=Hs;if(f&&typeof o=="string"&&o){var g=St(o);g='link[rel="'+a+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),B1.has(g)||(B1.add(g),a={rel:a,crossOrigin:l,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),Pn(o,"link",a),xt(o),f.head.appendChild(o)))}}function wN(a){Ya.D(a),U1("dns-prefetch",a,null)}function ON(a,o){Ya.C(a,o),U1("preconnect",a,o)}function _N(a,o,l){Ya.L(a,o,l);var f=Hs;if(f&&a&&o){var g='link[rel="preload"][as="'+St(o)+'"]';o==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+St(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+St(l.imageSizes)+'"]')):g+='[href="'+St(a)+'"]';var b=g;switch(o){case"style":b=qs(a);break;case"script":b=Ys(a)}wr.has(b)||(a=h({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),wr.set(b,a),f.querySelector(g)!==null||o==="style"&&f.querySelector(yc(b))||o==="script"&&f.querySelector(vc(b))||(o=f.createElement("link"),Pn(o,"link",a),xt(o),f.head.appendChild(o)))}}function TN(a,o){Ya.m(a,o);var l=Hs;if(l&&a){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+St(f)+'"][href="'+St(a)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ys(a)}if(!wr.has(b)&&(a=h({rel:"modulepreload",href:a},o),wr.set(b,a),l.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(vc(b)))return}f=l.createElement("link"),Pn(f,"link",a),xt(f),l.head.appendChild(f)}}}function DN(a,o,l){Ya.S(a,o,l);var f=Hs;if(f&&a){var g=qn(f).hoistableStyles,b=qs(a);o=o||"default";var E=g.get(b);if(!E){var T={loading:0,preload:null};if(E=f.querySelector(yc(b)))T.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},l),(l=wr.get(b))&&Ym(a,l);var I=E=f.createElement("link");xt(I),Pn(I,"link",a),I._p=new Promise(function(K,ie){I.onload=K,I.onerror=ie}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,If(E,o,f)}E={type:"stylesheet",instance:E,count:1,state:T},g.set(b,E)}}}function kN(a,o){Ya.X(a,o);var l=Hs;if(l&&a){var f=qn(l).hoistableScripts,g=Ys(a),b=f.get(g);b||(b=l.querySelector(vc(g)),b||(a=h({src:a,async:!0},o),(o=wr.get(g))&&Fm(a,o),b=l.createElement("script"),xt(b),Pn(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function NN(a,o){Ya.M(a,o);var l=Hs;if(l&&a){var f=qn(l).hoistableScripts,g=Ys(a),b=f.get(g);b||(b=l.querySelector(vc(g)),b||(a=h({src:a,async:!0,type:"module"},o),(o=wr.get(g))&&Fm(a,o),b=l.createElement("script"),xt(b),Pn(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function z1(a,o,l,f){var g=(g=se.current)?Rf(g):null;if(!g)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=qs(l.href),l=qn(g).hoistableStyles,f=l.get(o),f||(f={type:"style",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=qs(l.href);var b=qn(g).hoistableStyles,E=b.get(a);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=g.querySelector(yc(a)))&&!b._p&&(E.instance=b,E.state.loading=5),wr.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},wr.set(a,l),b||MN(g,a,l,E.state))),o&&f===null)throw Error(r(528,""));return E}if(o&&f!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ys(l),l=qn(g).hoistableScripts,f=l.get(o),f||(f={type:"script",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function qs(a){return'href="'+St(a)+'"'}function yc(a){return'link[rel="stylesheet"]['+a+"]"}function G1(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function MN(a,o,l,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Pn(o,"link",l),xt(o),a.head.appendChild(o))}function Ys(a){return'[src="'+St(a)+'"]'}function vc(a){return"script[async]"+a}function H1(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+St(l.href)+'"]');if(f)return o.instance=f,xt(f),f;var g=h({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),xt(f),Pn(f,"style",g),If(f,l.precedence,a),o.instance=f;case"stylesheet":g=qs(l.href);var b=a.querySelector(yc(g));if(b)return o.state.loading|=4,o.instance=b,xt(b),b;f=G1(l),(g=wr.get(g))&&Ym(f,g),b=(a.ownerDocument||a).createElement("link"),xt(b);var E=b;return E._p=new Promise(function(T,I){E.onload=T,E.onerror=I}),Pn(b,"link",f),o.state.loading|=4,If(b,l.precedence,a),o.instance=b;case"script":return b=Ys(l.src),(g=a.querySelector(vc(b)))?(o.instance=g,xt(g),g):(f=l,(g=wr.get(b))&&(f=h({},l),Fm(f,g)),a=a.ownerDocument||a,g=a.createElement("script"),xt(g),Pn(g,"link",f),a.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,If(f,l.precedence,a));return o.instance}function If(a,o,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,E=0;E<f.length;E++){var T=f[E];if(T.dataset.precedence===o)b=T;else if(b!==g)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function Ym(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Fm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Lf=null;function q1(a,o,l){if(Lf===null){var f=new Map,g=Lf=new Map;g.set(l,f)}else g=Lf,f=g.get(l),f||(f=new Map,g.set(l,f));if(f.has(a))return f;for(f.set(a,null),l=l.getElementsByTagName(a),g=0;g<l.length;g++){var b=l[g];if(!(b[Br]||b[Yt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=a+E;var T=f.get(E);T?T.push(b):f.set(E,[b])}}return f}function Y1(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function jN(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function F1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var bc=null;function RN(){}function IN(a,o,l){if(bc===null)throw Error(r(475));var f=bc;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=qs(l.href),b=a.querySelector(yc(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=$f.bind(f),a.then(f,f)),o.state.loading|=4,o.instance=b,xt(b);return}b=a.ownerDocument||a,l=G1(l),(g=wr.get(g))&&Ym(l,g),b=b.createElement("link"),xt(b);var E=b;E._p=new Promise(function(T,I){E.onload=T,E.onerror=I}),Pn(b,"link",l),o.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=$f.bind(f),a.addEventListener("load",o),a.addEventListener("error",o))}}function LN(){if(bc===null)throw Error(r(475));var a=bc;return a.stylesheets&&a.count===0&&Km(a,a.stylesheets),0<a.count?function(o){var l=setTimeout(function(){if(a.stylesheets&&Km(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(l)}}:null}function $f(){if(this.count--,this.count===0){if(this.stylesheets)Km(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Bf=null;function Km(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Bf=new Map,o.forEach($N,a),Bf=null,$f.call(a))}function $N(a,o){if(!(o.state.loading&4)){var l=Bf.get(a);if(l)var f=l.get(null);else{l=new Map,Bf.set(a,l);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var E=g[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),f=E)}f&&l.set(null,f)}g=o.instance,E=g.getAttribute("data-precedence"),b=l.get(E)||f,b===f&&l.set(null,g),l.set(E,g),this.count++,f=$f.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),o.state.loading|=4}}var xc={$$typeof:_,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function BN(a,o,l,f,g,b,E,T){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.hiddenUpdates=ts(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function K1(a,o,l,f,g,b,E,T,I,K,ie,fe){return a=new BN(a,o,l,E,T,I,K,fe),o=1,b===!0&&(o|=24),b=nr(3,null,null,o),a.current=b,b.stateNode=a,o=_p(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:f,isDehydrated:l,cache:o},Np(b),a}function V1(a){return a?(a=As,a):As}function X1(a,o,l,f,g,b){g=V1(g),f.context===null?f.context=g:f.pendingContext=g,f=yi(o),f.payload={element:l},b=b===void 0?null:b,b!==null&&(f.callback=b),l=vi(a,f,o),l!==null&&(sr(l,a,o),Wl(l,a,o))}function W1(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function Vm(a,o){W1(a,o),(a=a.alternate)&&W1(a,o)}function Q1(a){if(a.tag===13){var o=Ss(a,67108864);o!==null&&sr(o,a,67108864),Vm(a,67108864)}}var Uf=!0;function UN(a,o,l,f){var g=G.T;G.T=null;var b=oe.p;try{oe.p=2,Xm(a,o,l,f)}finally{oe.p=b,G.T=g}}function zN(a,o,l,f){var g=G.T;G.T=null;var b=oe.p;try{oe.p=8,Xm(a,o,l,f)}finally{oe.p=b,G.T=g}}function Xm(a,o,l,f){if(Uf){var g=Wm(f);if(g===null)Im(a,o,f,zf,l),J1(a,f);else if(HN(g,a,o,l,f))f.stopPropagation();else if(J1(a,f),o&4&&-1<GN.indexOf(a)){for(;g!==null;){var b=no(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=ea(b.pendingLanes);if(E!==0){var T=b;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var I=1<<31-Ye(E);T.entanglements[1]|=I,E&=~I}ga(b),(at&6)===0&&(Cf=Rt()+500,hc(0))}}break;case 13:T=Ss(b,2),T!==null&&sr(T,b,2),wf(),Vm(b,2)}if(b=Wm(f),b===null&&Im(a,o,f,zf,l),b===g)break;g=b}g!==null&&f.stopPropagation()}else Im(a,o,f,null,l)}}function Wm(a){return a=fi(a),Qm(a)}var zf=null;function Qm(a){if(zf=null,a=to(a),a!==null){var o=s(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=c(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return zf=a,null}function Z1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case Tt:return 2;case Cl:return 8;case Zi:case Zo:return 32;case qh:return 268435456;default:return 32}default:return 32}}var Zm=!1,ki=null,Ni=null,Mi=null,Sc=new Map,Ac=new Map,ji=[],GN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J1(a,o){switch(a){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Sc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(o.pointerId)}}function Pc(a,o,l,f,g,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},o!==null&&(o=no(o),o!==null&&Q1(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),a)}function HN(a,o,l,f,g){switch(o){case"focusin":return ki=Pc(ki,a,o,l,f,g),!0;case"dragenter":return Ni=Pc(Ni,a,o,l,f,g),!0;case"mouseover":return Mi=Pc(Mi,a,o,l,f,g),!0;case"pointerover":var b=g.pointerId;return Sc.set(b,Pc(Sc.get(b)||null,a,o,l,f,g)),!0;case"gotpointercapture":return b=g.pointerId,Ac.set(b,Pc(Ac.get(b)||null,a,o,l,f,g)),!0}return!1}function eA(a){var o=to(a.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){a.blockedOn=o,wu(a.priority,function(){if(l.tag===13){var f=or();f=Eu(f);var g=Ss(l,f);g!==null&&sr(g,l,f),Vm(l,f)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Gf(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=Wm(a.nativeEvent);if(l===null){l=a.nativeEvent;var f=new l.constructor(l.type,l);ui=f,l.target.dispatchEvent(f),ui=null}else return o=no(l),o!==null&&Q1(o),a.blockedOn=l,!1;o.shift()}return!0}function tA(a,o,l){Gf(a)&&l.delete(o)}function qN(){Zm=!1,ki!==null&&Gf(ki)&&(ki=null),Ni!==null&&Gf(Ni)&&(Ni=null),Mi!==null&&Gf(Mi)&&(Mi=null),Sc.forEach(tA),Ac.forEach(tA)}function Hf(a,o){a.blockedOn===o&&(a.blockedOn=null,Zm||(Zm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qN)))}var qf=null;function nA(a){qf!==a&&(qf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qf===a&&(qf=null);for(var o=0;o<a.length;o+=3){var l=a[o],f=a[o+1],g=a[o+2];if(typeof f!="function"){if(Qm(f||l)===null)continue;break}var b=no(l);b!==null&&(a.splice(o,3),o-=3,Qp(b,{pending:!0,data:g,method:l.method,action:f},f,g))}}))}function Cc(a){function o(I){return Hf(I,a)}ki!==null&&Hf(ki,a),Ni!==null&&Hf(Ni,a),Mi!==null&&Hf(Mi,a),Sc.forEach(o),Ac.forEach(o);for(var l=0;l<ji.length;l++){var f=ji[l];f.blockedOn===a&&(f.blockedOn=null)}for(;0<ji.length&&(l=ji[0],l.blockedOn===null);)eA(l),l.blockedOn===null&&ji.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var g=l[f],b=l[f+1],E=g[Dt]||null;if(typeof b=="function")E||nA(l);else if(E){var T=null;if(b&&b.hasAttribute("formAction")){if(g=b,E=b[Dt]||null)T=E.formAction;else if(Qm(g)!==null)continue}else T=E.action;typeof T=="function"?l[f+1]=T:(l.splice(f,3),f-=3),nA(l)}}}function Jm(a){this._internalRoot=a}Yf.prototype.render=Jm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,f=or();X1(l,f,a,o,null,null)},Yf.prototype.unmount=Jm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;X1(a.current,2,null,a,null,null),wf(),o[aa]=null}};function Yf(a){this._internalRoot=a}Yf.prototype.unstable_scheduleHydration=function(a){if(a){var o=_l();a={blockedOn:null,target:a,priority:o};for(var l=0;l<ji.length&&o!==0&&o<ji[l].priority;l++);ji.splice(l,0,a),l===0&&eA(a)}};var rA=t.version;if(rA!=="19.1.1")throw Error(r(527,rA,"19.1.1"));oe.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var YN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ff.isDisabled&&Ff.supportsFiber)try{Jt=Ff.inject(YN),bt=Ff}catch{}}return wc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var l=!1,f="",g=bS,b=xS,E=SS,T=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(T=o.unstable_transitionCallbacks)),o=K1(a,1,!1,null,null,l,f,g,b,E,T,null),a[aa]=o.current,Rm(a),new Jm(o)},wc.hydrateRoot=function(a,o,l){if(!i(a))throw Error(r(299));var f=!1,g="",b=bS,E=xS,T=SS,I=null,K=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(I=l.unstable_transitionCallbacks),l.formState!==void 0&&(K=l.formState)),o=K1(a,1,!0,o,l??null,f,g,b,E,T,I,K),o.context=V1(null),l=o.current,f=or(),f=Eu(f),g=yi(f),g.callback=null,vi(l,g,f),l=f,o.current.lanes=l,ci(o,l),ga(o),a[aa]=o.current,Rm(a),new Yf(o)},wc.version="19.1.1",wc}var hA;function tM(){if(hA)return ng.exports;hA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ng.exports=eM(),ng.exports}var nM=tM();const rM=Qr(nM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),pA=e=>{const t=iM(e);return t.charAt(0).toUpperCase()+t.slice(1)},zw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),oM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:c,...u},d)=>A.createElement("svg",{ref:d,...sM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:zw("lucide",i),...!s&&!oM(u)&&{"aria-hidden":"true"},...u},[...c.map(([p,h])=>A.createElement(p,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(e,t)=>{const n=A.forwardRef(({className:r,...i},s)=>A.createElement(lM,{ref:s,iconNode:t,className:zw(`lucide-${aM(pA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=pA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Fc=dt("bolt",cM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],fM=dt("bomb",uM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hM=dt("check",dM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mA=dt("chevron-right",pM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Bc=dt("chevron-up",mM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yM=dt("clock",gM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Gw=dt("copy",vM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],gA=dt("cpu",bM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],SM=dt("download",xM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yA=dt("eye",AM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],CM=dt("gamepad",PM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],wM=dt("hand",EM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Do=dt("loader-circle",OM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Hy=dt("rocket",_M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DM=dt("rotate-ccw",TM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],NM=dt("settings",kM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wo=dt("shield-check",MM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],og=dt("shield",jM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],IM=dt("skull",RM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],qy=dt("sword",LM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],BM=dt("target",$M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],zM=dt("upload",UM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],HM=dt("user",GM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],YM=dt("users",qM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],KM=dt("wifi-off",FM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],vA=dt("wifi",VM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],bA=dt("wrench",XM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dl=dt("x",WM),In=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",icon:og,effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",icon:fM,effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",icon:bA,targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:2,image:"/img/Interceptor.png",abilities:[{name:"Vigilant",description:"Can always intercept attacks in this lane, regardless of speed.",type:"PASSIVE",icon:wo,effect:{type:"GRANT_KEYWORD",keyword:"ALWAYS_INTERCEPTS"}},{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",icon:og,effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",icon:og,scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",icon:IM,effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",icon:BM,targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",icon:qy,effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",icon:Bc,effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",icon:qy,effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",icon:mA,effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",icon:mA,effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",icon:bA,targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],QM=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD022",baseCardId:"CARD022",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD023",baseCardId:"CARD023",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],xA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},Yy=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",ai=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const c=e.shipSections[s],u=Yy(c),d={...c.stats[u]};if(t.indexOf(s)===1&&c.middleLaneBonus)for(const h in c.middleLaneBonus)d.hasOwnProperty(h)&&(d[h]+=c.middleLaneBonus[h]);r[s]=d}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},Mr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=In.find(y=>y.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const c=n.appliedUpgrades[e.name]||[];let u=s.attack,d=s.speed,p=s.shields,h=s.class;c.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(d+=y.mod.value),y.mod.stat==="shields"&&(p+=y.mod.value),y.mod.stat==="cost"&&(h+=y.mod.value)}),h=Math.max(0,h);let m={...e,attack:u,speed:d,maxShields:p,cost:h,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(m.attack+=y.value),y.stat==="speed"&&(m.speed+=y.value),y.stat==="cost"&&(m.cost=Math.max(0,m.cost+y.value))}),s.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&m.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:x,mod:S}=y.effect;let P=!1;if(x.type==="SHIP_SECTION_HULL_DAMAGED"&&x.location==="SAME_LANE"){const C=parseInt(t.slice(-1))-1,O=(n.name==="Player 1"?i.player1:i.player2)[C];if(O){const _=n.shipSections[O],M=Yy(_);(M==="damaged"||M==="critical")&&(P=!0)}}P&&S.stat==="attack"&&(m.attack+=S.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:x,mod:S}=y.effect;let P=0;if(x.type==="OWN_DAMAGED_SECTIONS")for(const C in n.shipSections){const w=n.shipSections[C],O=Yy(w);(O==="damaged"||O==="critical")&&P++}P>0&&(S.stat==="attack"&&(m.attack+=S.value*P),S.stat==="speed"&&(m.speed+=S.value*P))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(x=>{x.stat==="attack"&&(m.attack+=x.value),x.stat==="speed"&&(m.speed+=x.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;In.find(S=>S.name===y.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:P,value:C}=S.effect;P==="shields"?m.maxShields+=C:P==="attack"?m.attack+=C:P==="speed"&&(m.speed+=C)}})}),c.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(x=>{if(x.type==="PASSIVE"&&(x.effect.type==="GRANT_KEYWORD"&&m.keywords.add(x.effect.keyword),x.effect.type==="MODIFY_STAT")){const{stat:S,value:P}=x.effect;S==="attack"&&(m.attack+=P),S==="speed"&&(m.speed+=P),S==="shields"&&(m.maxShields+=P)}})}),m},ZM=(e,t)=>({...e,instanceId:t}),Ks=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],Hw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=QM.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(ZM(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},Q0=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},JM=(e,t)=>{const n=ai({shipSections:xA},[]).totals;return{name:e,shipSections:xA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:Hw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Kc=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Vc=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},qw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},hl=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const c=s.currentMaxShields,{maxShields:u}=Mr(s,i,e,t,n);u>c&&(s.currentShields+=u-c),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},Sa=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},Uc=(e,t,n,r,i)=>{const s=e==="player1"?r:i,c=e==="player1"?i:r,u=[],p=!(typeof n.cost=="number"),{type:h,affinity:m,location:y,custom:x}=n.targeting;let S=null;if(p&&Object.values(s.dronesOnBoard).flat().some(O=>O.id===t.id)&&(S=Sa(t.id,s),!S))return[];const P=(w,O)=>{Object.entries(w.dronesOnBoard).forEach(([_,M])=>{let k=!1;y==="ANY_LANE"&&(k=!0),p&&y==="SAME_LANE"&&(k=_===S),k&&M.forEach(D=>{let L=!0;if(x?.includes("DAMAGED_HULL")){const $=In.find(Z=>Z.name===D.name);(!$||D.hull>=$.hull)&&(L=!1)}x?.includes("EXHAUSTED")&&(D.isExhausted||(L=!1)),L&&u.push({...D,lane:_,owner:O})})})},C=(w,O)=>{Object.keys(w.shipSections).forEach(_=>{u.push({id:_,owner:O,...w.shipSections[_]})})};if(h==="DRONE")(m==="FRIENDLY"||m==="ANY")&&P(s,e),(m==="ENEMY"||m==="ANY")&&P(c,e==="player1"?"player2":"player1");else if(h==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&C(s,e),(m==="ENEMY"||m==="ANY")&&C(c,e==="player1"?"player2":"player1");else if(h==="LANE")["lane1","lane2","lane3"].forEach(w=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:w,owner:e}),m==="ENEMY"||m==="ANY"){const O=e==="player1"?"player2":"player1";u.push({id:w,owner:O})}});else if(h==="DRONE_CARD"){const w=e==="player1"?r:i;w.activeDronePool.forEach(O=>{const _=In.find(L=>L.name===O.name),M=w.appliedUpgrades[O.name]||[],k=M.filter(L=>L.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;_&&M.length<_.upgradeSlots&&k<D&&u.push({...O,id:O.name,owner:e})})}else if(h==="APPLIED_UPGRADE"){const w=m==="ENEMY"?c:s,O=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(w.dronesOnBoard).flat().forEach(_=>{(w.appliedUpgrades[_.name]||[]).length>0&&u.push({..._,owner:O})})}return u},Yw=(e,t,n,r,i)=>{const s=In.find(p=>p.name===t.name);if(!s?.abilities)return{newState:e};let c=JSON.parse(JSON.stringify(e)),u=!1;const d=s.abilities.filter(p=>p.type==="TRIGGERED"&&p.trigger==="ON_MOVE");if(d.length>0){const p=c.dronesOnBoard[r].findIndex(h=>h.id===t.id);if(p!==-1){const h=c.dronesOnBoard[r][p];d.forEach(m=>{i({player:c.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),h.statMods||(h.statMods=[]),m.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,h.statMods.push(y.mod),i({player:c.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?c:e}},Fw=(e,t)=>{const n=In.find(u=>u.name===t.name);if(!n?.abilities)return{newState:e,effects:[]};let r=JSON.parse(JSON.stringify(e));const i=[];let s=!1;return n.abilities.filter(u=>u.effect?.type==="AFTER_ATTACK").forEach(u=>{const{subEffect:d}=u.effect;if(d.type==="DESTROY_SELF")for(const p in r.dronesOnBoard){const h=r.dronesOnBoard[p].findIndex(m=>m.id===t.id);if(h!==-1){s=!0;const m=r.dronesOnBoard[p][h];i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', destroying itself.`}}),i.push({type:"EXPLOSION",payload:{targetId:t.id}}),r.dronesOnBoard[p]=r.dronesOnBoard[p].filter(y=>y.id!==t.id),Object.assign(r,Vc(r,m));break}}else if(d.type==="PERMANENT_STAT_MOD")for(const p in r.dronesOnBoard){const h=r.dronesOnBoard[p].findIndex(m=>m.id===t.id);if(h!==-1){s=!0,r.dronesOnBoard[p][h].statMods||(r.dronesOnBoard[p][h].statMods=[]),i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', gaining a permanent +${d.mod.value} ${d.mod.stat}.`}}),r.dronesOnBoard[p][h].statMods.push(d.mod);break}}}),{newState:s?r:e,effects:i}},Fy=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>Kc(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},Kw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=In.find(m=>m.name===t.name),c=e.appliedUpgrades[t.name]||[];let u=s.limit;if(c.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const d=t.class;let p=0,h=0;return n===1?(h=Math.min(e.initialDeploymentBudget,d),p=d-h):(h=Math.min(e.deploymentBudget,d),p=d-h),e.energy<p?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${p} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:h,energyCost:p}},Vw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},Z0=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=Q0(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},ej=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:c,count:u})=>{s.shipSections[c]={...s.shipSections[c],allocatedShields:s.shipSections[c].allocatedShields-u}}),i.forEach(({section:c,count:u})=>{s.shipSections[c]={...s.shipSections[c],allocatedShields:s.shipSections[c].allocatedShields+u}}),s},tj=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")Vw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=Z0(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},nj=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Z0(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},rj=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=ai(n,r).totals.shieldsPerTurn,c={};return Object.keys(n.shipSections).forEach(d=>{c[d]={...n.shipSections[d],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:c},newShieldsToAllocate:s,playerId:t}},aj=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],c=r==="player1"?e.placedSections:e.opponentPlacedSections,d=ai(s,c).totals.shieldsPerTurn,p=JSON.parse(JSON.stringify(s.shipSections)),h=Object.keys(p);let m=d,y=0,x=0;for(;m>0&&x<100;){const w=h[y%h.length],O=p[w],_=Q0(w,s,c);O.allocatedShields<_&&(O.allocatedShields++,m--),y++,x++}const S={...s,shipSections:p},C={success:!0,newPhase:"deployment",firstPlayer:sh(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(C.player1State=i,C.player2State=S):(C.player1State=S,C.player2State=i),C},ij=(e,t,n,r,i,s,c)=>{const{effect:u,cost:d}=e,p=r.player1;let h="",m="Ability effect applied.";e.targeting?.type==="LANE"?h=`Lane ${n.id.slice(-1)}`:n&&(h=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${h}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${h}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${h}.`),s&&s({player:p.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:h,outcome:m});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(d.energy&&(y.player1.energy-=d.energy),d.exhausts)for(const S in y.player1.dronesOnBoard){const P=y.player1.dronesOnBoard[S].findIndex(C=>C.id===t.id);if(P!==-1){y.player1.dronesOnBoard[S][P].isExhausted=!0;break}}const x=t2(u,t,n,y,i,{resolveAttackCallback:c});return y.player1=x.newPlayerStates.player1,y.player2=x.newPlayerStates.player2,{newPlayerStates:y,shouldEndTurn:!u.goAgain}},oj=(e,t,n,r,i,s,c)=>{const{cost:u,effect:d}=e,p=r.player1;s&&s({player:p.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(h.player1.energy-=u.energy,d.type==="REALLOCATE_SHIELDS")return{newPlayerStates:h,shouldEndTurn:!1,requiresShieldReallocation:!0};{const m=n2(d,t,n,h,i,{resolveAttackCallback:c});if(h.player1=m.newPlayerStates.player1,h.player2=m.newPlayerStates.player2,m.needsDiscardSelection)return{newPlayerStates:h,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0}}}return{newPlayerStates:h,shouldEndTurn:!0}},Xw=(e,t,n,r,i,s,c)=>{const u=Kw(r,e,n,Object.values(r.dronesOnBoard).flat().length,ai(r,s.player1));if(!u.isValid)return{success:!1,error:u.reason,message:u.message,newPlayerState:r};const{budgetCost:d,energyCost:p}=u;c&&c({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const h=JSON.parse(JSON.stringify(r)),m={...h.dronesOnBoard,[t]:[...h.dronesOnBoard[t],{...e,id:0}]},y={...h,dronesOnBoard:m},x=Mr(e,t,y,i,s),S={...e,id:Date.now(),statMods:[],currentShields:x.maxShields,currentMaxShields:x.maxShields,hull:e.hull,isExhausted:!1};return h.dronesOnBoard[t].push(S),h.deployedDroneCounts={...h.deployedDroneCounts,[e.name]:(h.deployedDroneCounts[e.name]||0)+1},n===1?h.initialDeploymentBudget-=d:h.deploymentBudget-=d,h.energy-=p,h.dronesOnBoard=hl(h,i,s),{success:!0,newPlayerState:h,deployedDrone:S}},sj=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return Fy(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):Fy(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},lj=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=Sa(e.id,t);if(!i)return[];const s=Mr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(d=>{const p=Mr(d,i,n,t,r);return!d.isExhausted&&(p.speed>s.speed||p.keywords.has("ALWAYS_INTERCEPTS"))}).map(d=>d.id)},cj=(e,t,n,r,i,s,c)=>{const{addLogEntry:u}=c,d=e.class;let p=0;n===1?p=Math.min(r.initialDeploymentBudget,d):p=Math.min(r.deploymentBudget,d);const h=d-p;if(r.energy<h)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-p:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-p:r.deploymentBudget,energy:r.energy-h};return y.dronesOnBoard=hl(y,i,s),{success:!0,newPlayerState:y,deployedDrone:m,costs:{energy:h,budget:p}}},uj=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:c}=e,u=Mr(r,c,t.player2,t.player1,n),d=t.player1.dronesOnBoard[c].filter(p=>{const h=Mr(p,c,t.player1,t.player2,n);return!p.isExhausted&&(h.speed>u.speed||h.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||p.id!==i.id)});return{hasInterceptors:d.length>0,interceptors:d,attackDetails:e}},J0=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},fj=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},dj=(e,t)=>{const n=J0(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},hj=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=sh(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const c=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=c,i.push({type:"PHASE_START",phase:"action",firstPlayer:c});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},pj=(e,t,n,r)=>{const i=Ky(e.player1,t,n,e.player2,e.placedSections),s=Ky(e.player2,t,r,e.player1,e.opponentPlacedSections),c=Vy(i,n.totals.handLimit),u=Vy(s,r.totals.handLimit),d=sh(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),p={...e,turn:t,turnPhase:"deployment",currentPlayer:d,firstPlayerOfRound:d,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:c,player2:u},h=[{type:"ROUND_START",turn:t,firstPlayer:d},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:p,uiEffects:h}},Ww=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const c=Mr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:c.maxShields}});return{...e,dronesOnBoard:r}},Ky=(e,t,n,r,i)=>({...Ww(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),Vy=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},mj=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:c,passInfo:u,placedSections:d,opponentPlacedSections:p}=e,{addLogEntry:h,setPlayer2:m,setPendingAttack:y,endTurn:x,endDeploymentPhase:S,endActionPhase:P,setPassInfo:C}=n;let w;return c==="deployment"&&!u.player2Passed?w=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:p,placedSections:d,getShipStatus:Kc,calculateEffectiveShipStats:ai,calculateEffectiveStats:Mr,addLogEntry:h}):c==="action"&&!u.player2Passed&&(w=t.handleOpponentAction({player1:r,player2:i,placedSections:d,opponentPlacedSections:p,getShipStatus:Kc,getLaneOfDrone:Sa,getValidTargets:Uc,calculateEffectiveStats:Mr,addLogEntry:h})),w||null},gj=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:c,placedSections:u,opponentPlacedSections:d}=t,{addLogEntry:p,setPlayer2:h,setPendingAttack:m,endTurn:y,endDeploymentPhase:x,endActionPhase:S,setPassInfo:P,resolveCardPlay:C}=n;if(e.type==="pass"){const w=!t.passInfo.player1Passed,O={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(w?"player2":null)};return P(O),O.player1Passed?c==="deployment"?x():c==="action"&&S():y("player2"),{newPassInfo:O}}else if(e.type==="deploy"){const{droneToDeploy:w,targetLane:O,logContext:_}=e.payload;p({player:i.name,actionType:"DEPLOY",source:w.name,target:O,outcome:`Deployed to ${O}.`},"aiDeploymentDeploy",_);const M=Xw(w,O,i,r,s,{player1:u,player2:d});return M.success&&(h(M.newPlayerState),y("player2")),{deployedDrone:M.deployedDrone}}else if(e.type==="action"){const w=e.payload,{logContext:O}=e;switch(w.type){case"play_card":C(w.card,w.target,"player2",O);break;case"attack":m({attacker:w.attacker,target:w.target,targetType:w.targetType,lane:w.attacker.lane,attackingPlayer:"player2",aiContext:O});break;case"move":{const{drone:_,fromLane:M,toLane:k}=w;p({player:i.name,actionType:"MOVE",source:_.name,target:k,outcome:`Moved from ${M} to ${k}.`},"aiActionMove",O);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[M]=D.dronesOnBoard[M].filter(Z=>Z.id!==_.id);const L={..._,isExhausted:!0};D.dronesOnBoard[k].push(L);const{newState:$}=Yw(D,L,M,k,p);$.dronesOnBoard=hl($,r,{player1:u,player2:d}),h($),y("player2");break}default:y("player2");break}return{action:w}}return null},yj=(e,t,n,r,i,s,c,u)=>{const{cost:d,effect:p}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=d,x.hand=x.hand.filter(w=>w.instanceId!==e.instanceId),x.discardPile.push(e);const S=new Set(t.map(w=>w.id));x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(w=>!S.has(w.id));const P=t.map(w=>({...w,isExhausted:w.isExhausted||!p.properties?.includes("DO_NOT_EXHAUST")}));x.dronesOnBoard[r].push(...P),h({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(w=>w.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let C=x;return P.forEach(w=>{const{newState:O}=m(C,w,n,r,h);C=O}),C.dronesOnBoard=y(C,s,c),{newPlayerState:C,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},vj=(e,t,n,r,i,s,c,u)=>{const{cost:d,effect:p}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=d,x.hand=x.hand.filter(C=>C.instanceId!==e.instanceId),x.discardPile.push(e),x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(C=>C.id!==t.id);const S={...t,isExhausted:p.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};x.dronesOnBoard[r].push(S),h({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:P}=m(x,S,n,r,h);return P.dronesOnBoard=y(P,s,c),{newPlayerState:P,shouldEndTurn:!1,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},bj=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Qw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=Kc(i);(s==="damaged"||s==="critical")&&n++}return n},xj=(e,t,n,r,i,s)=>{const{logCallback:c,explosionCallback:u,hitAnimationCallback:d,resolveAttackCallback:p}=s,h=t?t.name||t.id:"N/A";let m="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(m=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(m=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(m=`Healed ${y.value} hull on ${h}.`),y.type==="HEAL_SHIELDS"&&(m=`Healed ${y.value} shields on ${h}.`),y.type==="READY_DRONE"&&(m=`Readied ${h}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?m=`Dealt ${y.value} damage to filtered targets in ${h}.`:m=`Dealt ${y.value} damage to ${h}.`),y.type==="MODIFY_STAT"){const P=y.mod,C=P.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${h} a ${P.value>0?"+":""}${P.value} ${P.stat} bonus${C}.`}if(y.type==="REPEATING_EFFECT"){const P=r[n],C=Qw(y.condition,P);m=`Drew ${C} card(s) and gained ${C} energy based on damaged sections.`}c&&c({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:h,outcome:m});let x=bj(e,n,r);const S=Sj(e.effect,t,n,x,i,s,e);if(!S.needsCardSelection){const P=Zw(e,n,S.newPlayerStates);return{newPlayerStates:P.newPlayerStates,shouldEndTurn:P.shouldEndTurn,additionalEffects:S.additionalEffects||[],needsCardSelection:!1}}return{newPlayerStates:x,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],needsCardSelection:S.needsCardSelection}},Zw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(c=>c.instanceId!==e.instanceId),i.discardPile.push(e);const s=t==="player1"&&!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},Sj=(e,t,n,r,i,s,c=null)=>e.effects?Aj(e,t,n,r,i,s,c):Jw(e,t,n,r,i,s,c),Aj=(e,t,n,r,i,s,c=null)=>{let u=r,d=[];if(e.type==="REPEATING_EFFECT"){const p=Qw(e.condition,u[n]);for(let h=0;h<p;h++)for(const m of e.effects){const y=Jw(m,t,n,u,i,s,c);u=y.newPlayerStates,y.additionalEffects&&d.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:d}},Jw=(e,t,n,r,i,s,c=null)=>{switch(e.type){case"DRAW":return tv(e,null,t,n,r);case"SEARCH_AND_DRAW":return e2(e,null,t,n,r);case"GAIN_ENERGY":return Pj(e,n,r,i);case"READY_DRONE":return Cj(e,t,n,r);case"HEAL_HULL":return ev(e,null,t,n,r);case"HEAL_SHIELDS":return Ej(e,t,n,r);case"DAMAGE":return oh(e,null,t,n,r,i,s,c);case"DESTROY":return Oj(e,t,n,r,s);case"MODIFY_STAT":return _j(e,t,n,r);case"MODIFY_DRONE_BASE":return Tj(e,t,n,r);case"DESTROY_UPGRADE":return Dj(e,t,n,r);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},Pj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},c=s[t],u=t==="player1"?r.player1:r.player2,d=ai(c,u).totals,p=Math.min(d.maxEnergy,c.energy+e.value);return c.energy=p,{newPlayerStates:s,additionalEffects:[]}},Cj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},c=s[n];for(const u in c.dronesOnBoard){const d=c.dronesOnBoard[u].findIndex(p=>p.id===t.id);if(d!==-1){c.dronesOnBoard[u][d].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},Ej=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},c=s[t.owner||n];for(const u in c.dronesOnBoard){const d=c.dronesOnBoard[u].findIndex(p=>p.id===t.id);if(d!==-1){const p=c.dronesOnBoard[u][d];p.currentShields=Math.min(p.currentMaxShields||p.shields,p.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},wj=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:c}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,p=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[p].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${p} ${u}`),console.log(`[DEBUG] Drones in ${p} ${u}:`,m.map(O=>`${O.name}(${O.id}) [${O.hull}hp, ${O.speed}spd]`));const{stat:y,comparison:x,value:S}=e.filter,P={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},w=P[p].dronesOnBoard[u]||[];for(let O=w.length-1;O>=0;O--){const _=w[O];let M=!1;if(x==="GTE"&&_[y]>=S&&(M=!0),x==="LTE"&&_[y]<=S&&(M=!0),console.log(`[DEBUG] ${_.name} ${y}=${_[y]} ${x} ${S} = ${M}`),M){console.log(`[DEBUG] Applying ${e.value} damage to ${_.name}`);const k=_.currentShields||0;let D=e.value;const L=Math.min(D,k);_.currentShields=(_.currentShields||0)-L,D-=L,D>0&&(_.hull-=D),_.hull<=0&&(console.log(`[DEBUG] ${_.name} destroyed`),w.splice(O,1))}}return{newPlayerStates:P,additionalEffects:[]}}else{const u=r[t.owner],d=Sa(t.id,u);if(d){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const p={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=p[t.owner].dronesOnBoard[d]||[],y=m.find(x=>x.id===t.id);if(y){let x=e.value,S=0,P=x;if(e.damageType!=="PIERCING"&&(S=Math.min(x,y.currentShields),P-=S,y.currentShields-=S),y.hull-=P,console.log(`[DEBUG] Applied ${P} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){console.log(`[DEBUG] ${y.name} destroyed`);const C=m.findIndex(w=>w.id===t.id);C>=0&&m.splice(C,1)}}return{newPlayerStates:p,additionalEffects:[]}}}return{newPlayerStates:r,additionalEffects:[]}},Oj=(e,t,n,r,i)=>{const{explosionCallback:s}=i,c={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},d=c[n==="player1"?"player2":"player1"];if(e.scope==="LANE"&&t.id){const p=t.id;(d.dronesOnBoard[p]||[]).forEach(m=>{s&&s(m.id);const y=Vc(d,m);d.deployedDroneCounts={...d.deployedDroneCounts||{},...y.deployedDroneCounts}}),d.dronesOnBoard[p]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const p=Sa(t.id,d);if(p){const h=d.dronesOnBoard[p].find(m=>m.id===t.id);if(h){s&&s(h.id);const m=Vc(d,h);d.deployedDroneCounts={...d.deployedDroneCounts||{},...m.deployedDroneCounts},d.dronesOnBoard[p]=d.dronesOnBoard[p].filter(y=>y.id!==t.id)}}}return{newPlayerStates:c,additionalEffects:[]}},_j=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},c=s[t.owner||n],u=e.mod;if(t.id&&t.id.startsWith("lane")){const d=t.id;c.dronesOnBoard[d]&&c.dronesOnBoard[d].forEach(p=>{p.statMods||(p.statMods=[]),p.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const d in c.dronesOnBoard){const p=c.dronesOnBoard[d].findIndex(h=>h.id===t.id);if(p!==-1){const h=c.dronesOnBoard[d][p];h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},Tj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},c=s[n],u=t.name,d=c.appliedUpgrades[u]||[],p={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(p.grantedAbilities=[e.mod.abilityToAdd]),c.appliedUpgrades={...c.appliedUpgrades,[u]:[...d,p]},{newPlayerStates:s,additionalEffects:[]}},Dj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:d,instanceId:p}=t;if(u.appliedUpgrades[d]){const h=u.appliedUpgrades[d].filter(m=>m.instanceId!==p);h.length>0?u.appliedUpgrades[d]=h:delete u.appliedUpgrades[d]}return{newPlayerStates:s,additionalEffects:[]}},oh=(e,t,n,r,i,s,c,u=null)=>{const{resolveAttackCallback:d}=c;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return wj(e,n,r,i,c,u?.targeting);const p=n.owner==="player1"?i.player1:i.player2,h=Sa(n.id,p);if(h&&d){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:h,damageType:e.damageType},y=a2(m,i,s,c.logCallback,c.explosionCallback,c.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[]}}return{newPlayerStates:i,additionalEffects:[]}},ev=(e,t,n,r,i,s,c)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1";if(e.scope==="LANE"){const p=n.id;u[d].dronesOnBoard[p]&&u[d].dronesOnBoard[p].forEach(h=>{const m=In.find(y=>y.name===h.name);m&&h.hull<m.hull&&(h.hull=Math.min(m.hull,h.hull+e.value))})}else{const p=In.find(m=>m.name===n.name),h=Sa(n.id,u[d]);if(h){const m=u[d].dronesOnBoard[h].findIndex(y=>y.id===n.id);m!==-1&&(u[d].dronesOnBoard[h][m].hull=Math.min(p.hull,u[d].dronesOnBoard[h][m].hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},tv=(e,t,n,r,i,s,c)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1",p=u[d];let h=[...p.deck],m=[...p.hand],y=[...p.discardPile];const x=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let P=0;P<x;P++){if(h.length===0)if(y.length>0)h=[...y].sort(()=>.5-Math.random()),y=[];else break;h.length>0&&m.push(h.pop())}u[d]={...p,deck:h,hand:m,discardPile:y};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},kj=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),e2=(e,t,n,r,i,s,c)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1",p=u[d];let h=[...p.deck],m=[...p.discardPile],y,x;if(e.filter)h.length===0&&m.length>0&&(h=[...m.sort(()=>.5-Math.random())],m=[]),y=h.filter(P=>kj(P,e.filter)).slice(0,e.searchCount),x=h.filter(P=>!y.includes(P));else{const S=e.searchCount;h.length<S&&m.length>0&&(h=[...h,...m.sort(()=>.5-Math.random())],m=[]),y=h.slice(-e.searchCount).reverse(),x=h.slice(0,-e.searchCount)}if(d==="player2"){const S=Nj(y,e.drawCount,u),P=y.filter(O=>!S.includes(O)),C=[...p.hand,...S];let w=[...x,...P];return e.shuffleAfter&&(w=w.sort(()=>.5-Math.random())),u[d]={...p,deck:w,hand:C,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:x,discardPile:m,filter:e.filter}}},Nj=(e,t,n,r)=>e.map(s=>({card:s,score:Mj(s,n.player2,n.player1)})).sort((s,c)=>c.score-s.score).slice(0,t).map(s=>s.card),Mj=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},t2=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return ev(e,t,n,"player1",r);case"DAMAGE":return oh(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},n2=(e,t,n,r,i,s)=>{const c={name:t};switch(e.type){case"DAMAGE":return oh(e,c,n,"player1",r,i,s);case"RECALL_DRONE":return r2(e,t,n,r,i);case"DRAW_THEN_DISCARD":return tv(e,c,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},r2=(e,t,n,r,i,s)=>{const c={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=Sa(n.id,c.player1);return u&&(c.player1.dronesOnBoard[u]=c.player1.dronesOnBoard[u].filter(d=>d.id!==n.id),Object.assign(c.player1,qw(c.player1,n)),c.player1.dronesOnBoard=hl(c.player1,c.player2,i)),{newPlayerStates:c,additionalEffects:[]}},a2=(e,t,n,r,i,s)=>{const{attacker:c,target:u,targetType:d,interceptor:p,attackingPlayer:h,abilityDamage:m,goAgain:y,damageType:x,lane:S}=e,P=m!==void 0,C=p||u,w=p?"drone":d,O=h,_=C.owner||(O==="player1"?"player2":"player1"),M=t[O],k=t[_];let D=null,L=null;!P&&c&&c.id&&(D=Sa(c.id,M),L=Mr(c,D,M,k,n));let $=m??(L?Math.max(0,L.attack):0),Z=x||(c?c.damageType:void 0);L&&L.keywords&&L.keywords.has("PIERCING")&&(Z="PIERCING"),w==="section"&&!m&&c&&c.name&&In.find(V=>V.name===c.name)?.abilities?.forEach(V=>{V.type==="PASSIVE"&&V.effect.type==="BONUS_DAMAGE_VS_SHIP"&&($+=V.effect.value)});let ae=0,H=0,re=!1,me=0,de=0;if(w==="drone"){let X=null;for(const V in k.dronesOnBoard)if(X=k.dronesOnBoard[V].find(ue=>ue.id===C.id),X)break;if(X){let V=$;Z!=="PIERCING"&&(ae=Math.min($,X.currentShields),V-=ae),H=Math.min(V,X.hull),re=X.hull-H<=0,me=X.currentShields-ae,de=re?0:X.hull-H}}else{const X=k.shipSections[C.name];if(X){let V=$;Z!=="PIERCING"&&(ae=Math.min($,X.allocatedShields),V-=ae),H=Math.min(V,X.hull),re=X.hull-H<=0,me=X.allocatedShields-ae,de=re?0:X.hull-H}}const ve=`Dealt ${ae} shield and ${H} hull damage to ${C.name}.`+(w==="drone"?re?` ${C.name} Destroyed.`:` ${C.name} has ${me} shields and ${de} hull left.`:""),G=D||(S?S.replace("lane","Lane "):null),oe=w==="drone"?`${C.name} (${G})`:C.name,be=c&&c.name?`${c.name} (${G})`:"Card Effect";r&&r({player:t[O].name,actionType:"ATTACK",source:be,target:oe,outcome:ve});const ne={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(w==="drone"){let X=!1;for(const V in ne[_].dronesOnBoard){const ue=ne[_].dronesOnBoard[V].findIndex(Ae=>Ae.id===C.id);if(ue!==-1){if(ne[_].dronesOnBoard[V][ue].hull-H<=0){X=!0,i&&i(C.id);const Ae=ne[_].dronesOnBoard[V][ue];ne[_].dronesOnBoard[V]=ne[_].dronesOnBoard[V].filter(q=>q.id!==C.id),Object.assign(ne[_],Vc(ne[_],Ae))}else s&&s(C.id),ne[_].dronesOnBoard[V][ue].hull-=H,ne[_].dronesOnBoard[V][ue].currentShields-=ae;break}}if(X){const V=_==="player1"?ne.player2:ne.player1;ne[_].dronesOnBoard=hl(ne[_],V,n)}}else{ne[_].shipSections[C.name].hull-=H,ne[_].shipSections[C.name].allocatedShields-=ae;const X=_==="player1"?n.player1:n.player2,V=ai(ne[_],X).totals;ne[_].energy>V.maxEnergy&&(ne[_].energy=V.maxEnergy)}let j=[];if(!P&&c&&c.id){let X=!1;for(const V in ne[O].dronesOnBoard){const ue=ne[O].dronesOnBoard[V].findIndex(Ae=>Ae.id===c.id);if(ue!==-1){ne[O].dronesOnBoard[V][ue].isExhausted=!0,X=!0;break}}if(X){const V=Fw(ne[O],c);ne[O]=V.newState,j=V.effects}}if(p){const X=O==="player1"?"player2":"player1";for(const V in ne[X].dronesOnBoard){const ue=ne[X].dronesOnBoard[V].findIndex(Ae=>Ae.id===p.id);if(ue!==-1){Mr(ne[X].dronesOnBoard[V][ue],V,ne[X],ne[O],n).keywords.has("DEFENDER")||(ne[X].dronesOnBoard[V][ue].isExhausted=!0);break}}}return{newPlayerStates:ne,attackResult:{attackerName:c&&c.name?c.name:"Card Effect",lane:D||S,targetName:C.name,targetType:w,interceptorName:p?p.name:null,shieldDamage:ae,hullDamage:H,wasDestroyed:re,remainingShields:me,remainingHull:de,outcome:ve,shouldEndTurn:O==="player1"&&!y},afterAttackEffects:j}},jj=(e,t)=>{const n=ai(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const c=n.handLimit;for(;i.length<c;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},sh=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),Rj=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const c=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(c)}return{...e,hand:n,discardPile:r,discardCount:i}},Ij=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},Lj=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],c=i.hand.length>s.totals.handLimit,u=c?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:c,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},$j=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const c=Math.floor(Math.random()*n.length),u=n.splice(c,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},Bj=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(c=>{const u=r.findIndex(d=>d.instanceId===c.instanceId||d.name===c.name&&d.id===c.id);if(u!==-1&&s<t){const d=r.splice(u,1)[0];i.push(d),s++}});else for(let c=0;c<t&&r.length>0;c++){const u=Math.floor(Math.random()*r.length),d=r.splice(u,1)[0];i.push(d),s++}return{...e,hand:r,discardPile:i,discardCount:s}},i2=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(c=>{c.isExhausted||s.push({...c,owner:"player1"})});else if(n==="select_destination"){const c=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const d=parseInt(u.replace("lane",""),10);Math.abs(c-d)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(c=>{t.dronesOnBoard[c].length>0&&s.push({id:c,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(c=>!c.isExhausted).forEach(c=>{s.push({...c,owner:"player1"})});else if(n==="select_destination_lane"){const c=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const d=parseInt(u.replace("lane",""),10);Math.abs(c-d)===1&&s.push({id:u,owner:"player1"})})}return s},o2=(e,t,n)=>t.activeDronePool.map(r=>{const i=n.find(d=>d.name===r.name),s=t.appliedUpgrades[r.name]||[],c=s.filter(d=>d.id===e.id).length,u=e.maxApplications===void 0?1:e.maxApplications;return i&&s.length<i.upgradeSlots&&c<u?{...r,id:r.name}:null}).filter(Boolean),s2=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},Uj=(e,t,n,r,i,s,c)=>{let u=[],d=[];return e?u=Uc("player1",e.drone,e.ability,i,s):t?u=Uc("player1",{id:t.sectionName},t.ability,i,s):n?d=i2(n,i):r&&(r.type==="Upgrade"?d=o2(r,i,c):r.effect.type==="MULTI_MOVE"?d=s2(n,i):d=Uc("player1",null,r,i,s)),{validAbilityTargets:u,validCardTargets:d}},zj=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),Gj=(e,t,n,r)=>{const i=J0(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},Ce={initialPlayerState:JM,buildDeckFromList:Hw,getEffectiveSectionMaxShields:Q0,getShipStatus:Kc,onDroneDestroyed:Vc,onDroneRecalled:qw,checkWinCondition:Fy,calculateAfterAttackStateAndEffects:Fw,applyOnMoveEffects:Yw,updateAuras:hl,getLaneOfDrone:Sa,getValidTargets:Uc,calculateAllValidTargets:Uj,calculateMultiSelectTargets:i2,calculateUpgradeTargets:o2,calculateMultiMoveTargets:s2,validateDeployment:Kw,validateShieldRemoval:Vw,validateShieldAddition:Z0,executeShieldReallocation:ej,getValidShieldReallocationTargets:tj,processShieldAllocation:nj,processResetShieldAllocation:rj,processEndShieldAllocation:aj,resolveAttack:a2,resolveAbility:ij,resolveShipAbility:oj,executeDeployment:Xw,resolveCardPlay:xj,finishCardPlay:Zw,resolveMultiMove:yj,resolveSingleMove:vj,checkGameStateForWinner:sj,calculatePotentialInterceptors:lj,calculateAiInterception:uj,calculateTurnTransition:J0,calculatePassTransition:fj,readyDronesAndRestoreShields:Ww,calculateNewRoundPlayerState:Ky,drawToHandLimit:Vy,drawPlayerCards:jj,determineFirstPlayer:sh,enforceHandLimit:Rj,checkHandLimitCompliance:Ij,checkHandLimitViolations:Lj,enforceHandLimits:$j,processDiscardPhase:Bj,processTurnTransition:dj,processPhaseChange:hj,processRoundStart:pj,createExplosionEffect:zj,createTurnEndEffects:Gj,resolveUnifiedDamageEffect:oh,resolveUnifiedHealEffect:ev,resolveUnifiedDrawEffect:tv,resolveSearchAndDrawEffect:e2,resolveDroneAbilityEffect:t2,resolveShipAbilityEffect:n2,resolveShipRecallEffect:r2,executeAiDeployment:cj,executeAiTurn:mj,executeAiAction:gj},Kf=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:Ce,startingDecklist:Ks},Symbol.toStringTag,{value:"Module"})),Hj="modulepreload",qj=function(e){return"/"+e},SA={},Fa=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=d(n.map(p=>{if(p=qj(p),p in SA)return;SA[p]=!0;const h=p.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":Hj,h||(y.as="script"),y.crossOrigin="",y.href=p,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((x,S)=>{y.addEventListener("load",x),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class Yj{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log(" GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(` Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(` Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const Fj=new Yj;class lh{constructor(t){this.gameStateManager=t,this.cache=Fj,this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log(" GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),c=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),d=s[c],p=s[u],h=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,d),S=Mr(t,n,m?d:p,m?p:d,h);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),c=this.cache.get(s);if(c)return c;const u=ai(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],c=n[i],u=(s.dronesOnBoard[t]||[]).map(p=>({...p,effectiveStats:this.getEffectiveStats(p,t),isPlayer:!0})),d=(c.dronesOnBoard[t]||[]).map(p=>({...p,effectiveStats:this.getEffectiveStats(p,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:d,hasGuardian:this.hasGuardianInLane(t,d)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const Kj=Object.freeze(Object.defineProperty({__proto__:null,default:lh},Symbol.toStringTag,{value:"Module"}));class Vj{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null}initialize(t,n,r,i=null,s=null){this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&(this.gameDataService=new lh(s),this.effectiveShipStatsWrapper=(c,u)=>this.gameDataService.getEffectiveShipStats(c,u)),console.log(" AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log(" AIPhaseProcessor connected to ActionProcessor for execution")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const d=this.dronePool?.find(p=>p.name===u);return d||console.warn(` AI personality references unknown drone: ${u}`),d}).filter(u=>u),console.log(` Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const c=r.map(u=>u.name).join(", ");console.log(` Mapped drones: ${c}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(` Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error(" Not enough drones available for AI selection:",r.length),n&&n.dronePool){const c=n.dronePool.filter(u=>!this.dronePool?.find(d=>d.name===u));c.length>0&&console.error(` Missing drones from collection: ${c.join(", ")}`),console.error(` Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(` Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),s=i.map(c=>c.name).join(", ");return console.log(` AI selected drones: ${s}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const c=t.filter(d=>n.preferredDrones.includes(d.name)),u=Math.min(3,c.length);r=c.slice(0,u),console.log(` AI selected ${r.length} preferred drones:`,r.map(d=>d.name).join(", "))}const i=t.filter(c=>!r.includes(c)),s=5-r.length;if(s>0){const c=this.selectBalancedDrones(i,s,n);r=[...r,...c]}for(;r.length<5&&i.length>0;){const c=Math.floor(Math.random()*i.length),u=i.splice(c,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((d,p)=>{const h=(d.energyCost||1)+(d.health||0)+(d.attack||0);return(p.energyCost||1)+(p.health||0)+(p.attack||0)-h});const c=r?.aggression||.5,u=r?.economy||.5;for(let d=0;d<n&&s.length>0;d++){let p=0;if(c>.7)p=s.findIndex(h=>(h.attack||0)>2),p===-1&&(p=0);else if(u>.7)p=s.findIndex(h=>(h.energyCost||1)<=2),p===-1&&(p=0);else{const h=Math.min(3,s.length);p=Math.floor(Math.random()*h)}i.push(s.splice(p,1)[0])}return console.log(` AI balanced selection (${n}):`,i.map(d=>d.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(` Using ${n.name} personality decklist`);const{gameEngine:i}=await Fa(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>Kf);return{gameEngine:s}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log(" Using standard deck as fallback");const{gameEngine:i,startingDecklist:s}=await Fa(async()=>{const{gameEngine:c,startingDecklist:u}=await Promise.resolve().then(()=>Kf);return{gameEngine:c,startingDecklist:u}},void 0);r=i.buildDeckFromList(s)}return console.log(` AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(` AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return console.log(` AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return console.log(" AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return console.log(" AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return console.log(" AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let c=0;c<i.length&&c<r.length;c++){const u=r.findIndex(d=>d===i[c]);u!==-1&&(n[s[c]]=r.splice(u,1)[0])}for(let c=0;c<n.length;c++)!n[c]&&r.length>0&&(n[c]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let c=0;c<i.length&&c<r.length;c++){const u=r.findIndex(d=>d===i[c]);u!==-1&&(n[s[c]]=r.splice(u,1)[0])}for(let c=0;c<n.length;c++)!n[c]&&r.length>0&&(n[c]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let c=0;c<i.length&&c<r.length;c++){const u=r.findIndex(d=>d===i[c]);u!==-1&&(n[s[c]]=r.splice(u,1)[0])}for(let c=0;c<n.length;c++)!n[c]&&r.length>0&&(n[c]=r.shift());return n}async executeDeploymentTurn(t){if(console.log(" AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment"))return await this.executePass("deployment");if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Fa(async()=>{const{aiBrain:c}=await import("./aiLogic-ChsLl_kk.js");return{aiBrain:c}},[]),{gameEngine:r}=await Fa(async()=>{const{gameEngine:c}=await Promise.resolve().then(()=>Kf);return{gameEngine:c}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(c,u,d)=>{this.gameStateManager?.addLogEntry(c,u,d)}});console.log(" AIPhaseProcessor executing deployment decision:",i);const s=await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}});return{success:!0,action:"executed",phase:"deployment",playerId:"player2",decision:i,result:s}}async executeActionTurn(t){if(console.log(" AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action"))return await this.executePass("action");if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Fa(async()=>{const{aiBrain:c}=await import("./aiLogic-ChsLl_kk.js");return{aiBrain:c}},[]),{gameEngine:r}=await Fa(async()=>{const{gameEngine:c}=await Promise.resolve().then(()=>Kf);return{gameEngine:c}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(c,u,d)=>{this.gameStateManager?.addLogEntry(c,u,d)}});console.log(" AIPhaseProcessor executing action decision:",i);const s=await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}});return{success:!0,action:"executed",phase:"action",playerId:"player2",decision:i,result:s}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log(" AI has already passed"),!0):!1}async executePass(t){if(!this.gameStateManager)throw new Error("AIPhaseProcessor not properly initialized - missing gameStateManager");console.log(` AIPhaseProcessor: Executing pass for ${t} phase`);const n=this.gameStateManager.getState(),r="player2",i=!n.passInfo.player1Passed&&!n.passInfo.player2Passed,s={...n.passInfo,[r+"Passed"]:!0,firstPasser:n.passInfo.firstPasser||(i?r:null)};return this.gameStateManager.setPassInfo(s),console.log(` AI passed in ${t} phase, firstPasser: ${s.firstPasser}`),{success:!0,action:"pass",phase:t,playerId:r,passInfo:s}}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,version:"1.2.0"}}}const Ws=new Vj;class Xj{constructor(t){this.gameStateManager=t,this.gameDataService=new lh(t),this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1}}setP2PManager(t){this.p2pManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const d=`${u}Passed`;if(s.passInfo[d])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(n==="allocateShield"&&s.turnPhase==="allocateShields")throw new Error("Round start shield allocation should use direct updates, not ActionProcessor");if(n==="resetShieldAllocation"&&s.turnPhase==="allocateShields")throw new Error("Round start shield allocation reset should use direct updates, not ActionProcessor");if(n==="endShieldAllocation"&&s.turnPhase==="allocateShields")throw new Error("Round start shield allocation completion should use direct updates, not ActionProcessor");if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);!i&&this.p2pManager&&this.p2pManager.isConnected&&this.gameStateManager.get("gameMode")!=="local"&&(console.log("[P2P ACTION] Sending action to peer:",{type:n,payload:r}),this.p2pManager.sendData({type:"ACTION",action:{type:n,payload:r},timestamp:Date.now()})),this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"aiTurn":return await this.processAiTurn(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections},s=p=>{this.gameStateManager.addLogEntry(p,"resolveAttack",n.attackingPlayer==="player2"?n.aiContext:null)},c=()=>{},u=()=>{},d=Ce.resolveAttack(n,{player1:r.player1,player2:r.player2},i,s,c,u);return this.gameStateManager.setPlayerStates(d.newPlayerStates.player1,d.newPlayerStates.player2),d}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),c={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let d=null,p=null;if(Object.values(c).forEach(S=>{Object.values(S.dronesOnBoard).forEach(P=>{P.forEach(C=>{C.id===n&&(d=C),C.id===i&&(p=C)})})}),!d||!d.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const h=d.abilities[r],m=S=>{this.gameStateManager.addLogEntry(S,"resolveAbility")},y=async S=>await this.processAttack({attackDetails:S}),x=Ce.resolveAbility(h,d,p,c,u,m,y);return this.gameStateManager.setPlayerStates(x.newPlayerStates.player1,x.newPlayerStates.player2),x}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,c=this.gameStateManager.getState(),u=c[i],p=c[i==="player1"?"player2":"player1"],h={player1:c.placedSections,player2:c.opponentPlacedSections},m=x=>{this.gameStateManager.addLogEntry(x)},y=Ce.executeDeployment(n,r,s||c.turn,u,p,h,m);return y.success&&(i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState)),y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),c={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections},d={logCallback:h=>this.gameStateManager.addLogEntry(h),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async h=>await this.processAttack(h)},p=Ce.resolveCardPlay(n,r,i,c,u,d);return this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=Ce.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r&&(console.log(`[TURN TRANSITION DEBUG] Setting new player: ${r}`),this.gameStateManager.setCurrentPlayer(r));const c=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:c.turnPhase,currentPlayer:c.currentPlayer,turn:c.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t;console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`);const i=this.gameStateManager.getState();console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(n==="allocateShields"){const d=this.gameStateManager.getLocalPlayerId(),p=i[d],m=this.gameDataService.getEffectiveShipStats(p,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=m,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${m}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));const c=Ce.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);s.turnPhase=n,this.gameStateManager.setState(s),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1}),console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase}  ${n}`);const u=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:u.turnPhase,placedSections:u.placedSections,opponentPlacedSections:u.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n,transitionType:c.type}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),c=i||Ce.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),d=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),p=Ce.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),h=Ce.calculateNewRoundPlayerState(s.player2,n,d,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:c,firstPlayerOfRound:c,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(p,h),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${c}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:c,playerStates:{player1:p,player2:h}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,c=this.gameStateManager.getState();if(c.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${c.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=c[s];if(n==="remove"){const d=u.shipSections[r];if(!d||d.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const p={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},h={...u,shipSections:p};return this.gameStateManager.updatePlayerState(s,h),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:h}}else if(n==="add"){const d=s==="player1"?c.placedSections:c.opponentPlacedSections,p=Ce.getEffectiveSectionMaxShields(r,u,d),h=u.shipSections[r];if(!h||h.allocatedShields>=p)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:m};return this.gameStateManager.updatePlayerState(s,y),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const d={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,d),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:d}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return await this.processAttack({attackDetails:{attackerId:s.attacker.id,targetId:s.target.id,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":const c=this.gameStateManager.getState(),u={name:"AI Move",cost:0,effect:{type:"MOVE",properties:[]}},d=Ce.resolveSingleMove(u,s.drone,s.fromLane,s.toLane,c.player2,c.player1,{player1:c.placedSections,player2:c.opponentPlacedSections},{logCallback:()=>{},applyOnMoveEffectsCallback:Ce.applyOnMoveEffects,updateAurasCallback:Ce.updateAuras});return this.gameStateManager.updatePlayerState("player2",d.newPlayerState),d;case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiTurn(t){const{turnPhase:n,playerId:r}=t;console.log(`[AI TURN DEBUG] Starting AI turn for ${r} in phase: ${n}`);const i=this.gameStateManager.getState(),s=i.passInfo;if(console.log("[AI TURN DEBUG] Current state:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn,passInfo:s}),s[r+"Passed"])return console.log("[AI TURN DEBUG] AI already passed, returning"),{success:!0,action:"already_passed"};let c;console.log(`[AI TURN DEBUG] Delegating to AIPhaseProcessor for phase: ${n}`),n==="deployment"?c=await Ws.handleDeploymentTurn(i):n==="action"?c=await Ws.handleActionTurn(i):(c={type:"pass"},console.log(`[AI TURN DEBUG] AI passing due to unknown phase: ${n}`)),console.log("[AI TURN DEBUG] AI decision from AIPhaseProcessor:",c),console.log("[AI TURN DEBUG] Processing AI decision:",c.type);const u=await this.processAiDecision(c,r);return console.log("[AI TURN DEBUG] AI decision result:",u),u}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",s),s.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const c=t.payload;let u;switch(c.type){case"attack":u=await this.processAttack({attackDetails:{attackerId:c.attacker.id,targetId:c.target.id,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:c.card,targetId:c.target?.id,playerId:n});break;case"move":u=await this.processMove(c,n);break;case"ability":u=await this.processAbility({droneId:c.drone.id,abilityIndex:c.abilityIndex,targetId:c.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${c.type}`)}return u.shouldEndTurn!==!1&&await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const d=this.gameStateManager.getState(),p=!d.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",d.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:d.passInfo.firstPasser||(p?n:null)});const h=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",h),h.player1Passed&&h.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),d.turnPhase==="deployment"?await this.processTurnTransition({newPhase:"action"}):d.turnPhase==="action"&&await this.processTurnTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}async processMove(t,n){const r=this.gameStateManager.getState(),i={name:"AI Move",cost:0,effect:{type:"MOVE",properties:[]}},s=r[n],c=r[n==="player1"?"player2":"player1"],u=Ce.resolveSingleMove(i,t.drone,t.fromLane,t.toLane,s,c,{player1:r.placedSections,player2:r.opponentPlacedSections},{logCallback:()=>{},applyOnMoveEffectsCallback:Ce.applyOnMoveEffects,updateAurasCallback:Ce.updateAuras});return this.gameStateManager.updatePlayerState(n,u.newPlayerState),u}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:c}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=`${c}Passed`,d=`${n}Passed`,p=!s[u],h={...s,[d]:!0,firstPasser:s.firstPasser||(p?n:null)};return console.log("[PLAYER PASS DEBUG] Updating pass info:",h),this.gameStateManager.setPassInfo(h,"ActionProcessor"),h[c+"Passed"]?i==="deployment"?await this.processPhaseTransition({nextPhase:"action"}):i==="action"&&await this.processPhaseTransition({nextPhase:"endRound"}):await this.processTurnTransition({newPlayer:c}),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("playerPass",{playerId:n,playerName:r,turnPhase:i,passInfo:h}),{success:!0,newPassInfo:h}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error(" CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error(" CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("aiShipPlacement",{placement:n,aiPersonality:r}),{success:!0,placement:n}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}const l2=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(` Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(` Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},Wj=(e,t=3)=>{if(!e||e.length===0)return console.warn(" No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(` Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(` Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class Qj{constructor(){console.log(" GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.state={appState:"menu",isHost:!1,isGuest:!1,isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[]},this.actionProcessor=new Xj(this),this.gameFlowManager=null,this.p2pIntegrationSetup=!1,console.log(" GAMESTATE INITIALIZATION: GameStateManager created"),console.log(" App State:",this.state.appState),console.log(" Game Active:",this.state.gameActive),console.log(" GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost);break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE"){const r={...this.state},i=new Error().stack,s=i?i.split(`
`):[],c=this.extractCallerInfo(s),u=s.some(S=>S.includes("App.jsx")),d=s.some(S=>S.includes("ActionProcessor")),p=s.some(S=>S.includes("PhaseManager")),h=d||p;u&&!h&&(console.error(" ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error(" App.jsx should only call ActionProcessor or PhaseManager methods"),console.error(" Stack trace:",i));const m=Object.keys(t),y=`${c.primaryCaller} in ${c.primaryFile}`;console.log(` GAMESTATE CHANGE [${n}] from ${y}:`,{changedKeys:m,allUpdates:t,architectureViolation:u&&!h});const x=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!x&&this.logPlayerStateChanges(t,r,y,n),m.forEach(S=>{if(!["player1","player2"].includes(S)){const P=r[S],C=t[S];JSON.stringify(P)!==JSON.stringify(C)&&console.log(` STATE CHANGE: ${S}`,{before:P,after:C,caller:y,eventType:n})}}),this.validateStateUpdate(t,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:r})}validateStateUpdate(t,n){const r=new Error().stack,i=r&&r.includes("ActionProcessor");this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&(i||["player1","player2","turnPhase","currentPlayer"].some(u=>u in t)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),stack:r?.split(`
`).slice(0,5)})),this.validateActionProcessorUsage(t,n,i,r),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,c)=>{s.energy<0&&console.error(`Invalid state: ${c} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${c} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,c)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(d=>{i.has(d.id)&&console.error(`Duplicate drone ID detected: ${d.id} in player${c+1}`),i.add(d.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["energyReset","initialDraw","deployment"],energyReset:["mandatoryDiscard","draw","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","draw","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["energyReset","draw","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deployment"],draw:["determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["allocateShields","mandatoryDroneRemoval","deployment"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","roundEnd"],action:["deployment","roundEnd","energyReset","mandatoryDiscard","draw","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","gameEnd"],roundEnd:["energyReset","mandatoryDiscard","draw","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||["droneSelection","deckSelection","placement","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const c=["energyReset","draw","determineFirstPlayer"];if(c.includes(n.turnPhase)||c.includes(t.turnPhase)||this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase)return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],d=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],p=Object.keys(t).filter(m=>u.includes(m)),h=Object.keys(t).filter(m=>d.includes(m));if(p.length>0&&!r){const m=i?.split(`
`)||[],y=m.find(x=>x.includes(".jsx")&&!x.includes("GameStateManager"))||m[2]||"Unknown";console.warn(" ActionProcessor bypass detected: Critical game state updated directly",{updates:p,turnPhase:n.turnPhase,caller:y.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug(" ActionProcessor bypass debug info:",{stackTrace:m.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}h.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i)}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const c=n[s],u=t[s];console.log(` PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(p=>{const h=c?c[p]:void 0,m=u?u[p]:void 0;if(JSON.stringify(h)!==JSON.stringify(m))if(p==="energy"||p==="deploymentBudget"||p==="initialDeploymentBudget")console.log(`   ${p}: ${h}  ${m}`),(m==null||isNaN(m))&&console.error(`   WARNING: ${p} became ${m}!`);else if(p==="activeDronePool"){const y=Array.isArray(h)?h.length:"undefined",x=Array.isArray(m)?m.length:"undefined";let S,P;if(Array.isArray(h))try{S=h.map(C=>C?.name||"UNNAMED").join(",")}catch(C){S=`ERROR_MAPPING_OLD: ${C.message}`}else S="undefined";if(Array.isArray(m))try{P=m.map(C=>C?.name||"UNNAMED").join(",")}catch(C){P=`ERROR_MAPPING_NEW: ${C.message}`}else P="undefined";if(console.log(`   ${p}: [${y} drones]  [${x} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${P}`),(P.includes("ERROR")||P==="undefined")&&(console.log("     Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("     First drone object:",m[0])),y!==x||S!==P){const C=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`     Update source:
${C}`)}}else if(p==="hand"||p==="deck"){const y=Array.isArray(h)?h.length:"undefined",x=Array.isArray(m)?m.length:"undefined";console.log(`   ${p}: [${y} cards]  [${x} cards]`)}else if(p==="dronesOnBoard"){const y=h?`L1:${h.lane1?.length||0} L2:${h.lane2?.length||0} L3:${h.lane3?.length||0}`:"undefined",x=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`   ${p}: ${y}  ${x}`)}else console.log(`   ${p}:`,{before:h,after:m})}),console.log(` Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],c=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],d=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],p=c.functions.filter(m=>u.some(y=>m.toLowerCase().includes(y.toLowerCase()))),h=c.functions.filter(m=>d.some(y=>m.toLowerCase().includes(y.toLowerCase())));p.length>0&&h.length===0&&(console.warn(" Inappropriate function updating game state:",{inappropriateFunctions:p,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:c,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI  ActionProcessor  gameLogic.js  GameStateManager"}),console.debug(" Function validation debug info:",{allFunctionsInStack:c.functions,inappropriateFound:p,appropriateFound:h,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const c=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);c&&r.push(c[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}reset(){const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:Ce.initialPlayerState("Player 1",Ks),player2:Ce.initialPlayerState("Player 2",Ks),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[]};this.setState(t,"GAME_RESET")}startGame(t="local",n={},r={}){console.log(" GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...Ce.initialPlayerState(n.name||"Player 1",n.decklist||Ks),...n},player2:{...Ce.initialPlayerState(r.name||"Player 2",r.decklist||Ks),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[]},s=l2(In);i.droneSelectionPool=s.droneSelectionPool,i.droneSelectionTrio=s.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log(" Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log(" Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log(" GAME START: Game session initialized successfully")}endGame(){console.log(" GAME END: Ending current game session"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[]},"GAME_ENDED"),console.log(" GAME END: Returned to menu state")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t,isHost:n&&t!=="local",isGuest:!n&&t!=="local"},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?!0:this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log(" [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Ke=new Qj;class Zj{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return Jj(t).buffer}}function Jj(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function c2(e){return new eR(e).unpack()}function u2(e){const t=new tR,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class eR{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,c;for(;r<t;)s=n[r],s<160?(c=s,r++):(s^192)<32?(c=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(c=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(c=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(c);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,c=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*c}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class tR{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),c=2**32,u=n<<31|r+1023<<20|s/c&1048575,d=s%c;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(d)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const c=n[s];if(t.hasOwnProperty(c)){this.pack(c);const u=this.pack(t[c]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Zj,this._textEncoder=new TextEncoder}}let f2=!0,d2=!0;function Ic(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function qo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(c,u){if(c!==t)return i.apply(this,arguments);const d=p=>{const h=n(p);h&&(u.handleEvent?u.handleEvent(h):u(h))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,d),i.apply(this,[c,d])};const s=r.removeEventListener;r.removeEventListener=function(c,u){if(c!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const d=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[c,d])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(c){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),c&&this.addEventListener(t,this["_on"+t]=c)},enumerable:!0,configurable:!0})}function nR(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(f2=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function rR(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(d2=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function h2(){if(typeof window=="object"){if(f2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function nv(e,t){d2&&console.warn(e+" is deprecated, please use "+t+" instead.")}function aR(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Ic(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Ic(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Ic(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Ic(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function AA(e){return Object.prototype.toString.call(e)==="[object Object]"}function p2(e){return AA(e)?Object.keys(e).reduce(function(t,n){const r=AA(e[n]),i=r?p2(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function Xy(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Xy(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Xy(e,e.get(i),n)})}))}function PA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(c=>{c.type==="track"&&c.trackIdentifier===t.id&&s.push(c)}),s.forEach(c=>{e.forEach(u=>{u.type===r&&u.trackId===c.id&&Xy(e,u,i)})}),i}const CA=h2;function m2(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const d={};return Object.keys(u).forEach(p=>{if(p==="require"||p==="advanced"||p==="mediaSource")return;const h=typeof u[p]=="object"?u[p]:{ideal:u[p]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const m=function(y,x){return y?y+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(h.ideal!==void 0){d.optional=d.optional||[];let y={};typeof h.ideal=="number"?(y[m("min",p)]=h.ideal,d.optional.push(y),y={},y[m("max",p)]=h.ideal,d.optional.push(y)):(y[m("",p)]=h.ideal,d.optional.push(y))}h.exact!==void 0&&typeof h.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[m("",p)]=h.exact):["min","max"].forEach(y=>{h[y]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[m(y,p)]=h[y])})}),u.advanced&&(d.optional=(d.optional||[]).concat(u.advanced)),d},i=function(u,d){if(t.version>=61)return d(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const p=function(h,m,y){m in h&&!(y in h)&&(h[y]=h[m],delete h[m])};u=JSON.parse(JSON.stringify(u)),p(u.audio,"autoGainControl","googAutoGainControl"),p(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let p=u.video.facingMode;p=p&&(typeof p=="object"?p:{ideal:p});const h=t.version<66;if(p&&(p.exact==="user"||p.exact==="environment"||p.ideal==="user"||p.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete u.video.facingMode;let m;if(p.exact==="environment"||p.ideal==="environment"?m=["back","rear"]:(p.exact==="user"||p.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let x=y.find(S=>m.some(P=>S.label.toLowerCase().includes(P)));return!x&&y.length&&m.includes("back")&&(x=y[y.length-1]),x&&(u.video.deviceId=p.exact?{exact:x.deviceId}:{ideal:x.deviceId}),u.video=r(u.video),CA("chrome: "+JSON.stringify(u)),d(u)})}u.video=r(u.video)}return CA("chrome: "+JSON.stringify(u)),d(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(u,d,p){i(u,h=>{n.webkitGetUserMedia(h,d,m=>{p&&p(s(m))})})};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return i(d,p=>u(p).then(h=>{if(p.audio&&!h.getAudioTracks().length||p.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function g2(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function y2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const c=new Event("track");c.track=i.track,c.receiver=s,c.transceiver={receiver:s},c.streams=[r.stream],this.dispatchEvent(c)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const c=new Event("track");c.track=i,c.receiver=s,c.transceiver={receiver:s},c.streams=[r.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else qo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function v2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,d){let p=i.apply(this,arguments);return p||(p=t(this,u),this._senders.push(p)),p};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const d=this._senders.indexOf(u);d!==-1&&this._senders.splice(d,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(c=>{this._senders.push(t(this,c))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(c=>{const u=this._senders.find(d=>d.track===c);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function b2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(c=>c._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(c=>PA(c,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),qo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>PA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,c;return this.getSenders().forEach(u=>{u.track===r&&(i?c=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?c=!0:s=u),u.track===r)),c||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function x2(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(c,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(d)===-1&&this._shimmedLocalStreams[u.id].push(d):this._shimmedLocalStreams[u.id]=[u,d],d};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(p=>{if(this.getSenders().find(m=>m.track===p))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(p=>u.indexOf(p)===-1);this._shimmedLocalStreams[c.id]=[c].concat(d)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const d=this._shimmedLocalStreams[u].indexOf(c);d!==-1&&this._shimmedLocalStreams[u].splice(d,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function S2(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return x2(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(m=>{if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const m=new e.MediaStream(h.getTracks());this._streams[h.id]=m,this._reverseStreams[m.id]=h,h=m}r.apply(this,[h])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(P=>P===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(P=>P.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const P=new e.MediaStream([h]);this._streams[m.id]=P,this._reverseStreams[P.id]=m,this.addStream(P)}return this.getSenders().find(P=>P.track===h)};function s(p,h){let m=h.sdp;return Object.keys(p._reverseStreams||[]).forEach(y=>{const x=p._reverseStreams[y],S=p._streams[x.id];m=m.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:h.type,sdp:m})}function c(p,h){let m=h.sdp;return Object.keys(p._reverseStreams||[]).forEach(y=>{const x=p._reverseStreams[y],S=p._streams[x.id];m=m.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:m})}["createOffer","createAnswer"].forEach(function(p){const h=e.RTCPeerConnection.prototype[p],m={[p](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[S=>{const P=s(this,S);y[0].apply(null,[P])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):h.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[p]=m[p]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=c(this,arguments[0]),u.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const p=d.get.apply(this);return p.type===""?p:s(this,p)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(P=>h.track===P)&&(y=this._streams[x])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Wy(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function A2(e,t){qo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const EA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:A2,shimAddTrackRemoveTrack:S2,shimAddTrackRemoveTrackWithNative:x2,shimGetSendersWithDtmf:v2,shimGetUserMedia:m2,shimMediaStream:g2,shimOnTrack:y2,shimPeerConnection:Wy,shimSenderReceiverGetStats:b2},Symbol.toStringTag,{value:"Module"}));function P2(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,c){nv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,c)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(c,u,d){u in c&&!(d in c)&&(c[d]=c[u],delete c[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),i(c.audio,"autoGainControl","mozAutoGainControl"),i(c.audio,"noiseSuppression","mozNoiseSuppression")),s(c)},r&&r.prototype.getSettings){const c=r.prototype.getSettings;r.prototype.getSettings=function(){const u=c.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const c=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[u])}}}}function iR(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function C2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Qy(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],c={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=c[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,c,u]=arguments;return r.apply(this,[s||null]).then(d=>{if(t.version<53&&!c)try{d.forEach(p=>{p.type=n[p.type]||p.type})}catch(p){if(p.name!=="TypeError")throw p;d.forEach((h,m)=>{d.set(m,Object.assign({},h,{type:n[h.type]||h.type}))})}return d}).then(c,u)}}function E2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function w2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),qo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function O2(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){nv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function _2(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function T2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:c}=s,u=c.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,c.sendEncodings=r,this.setParametersPromises.push(c.setParameters(u).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return s})}function D2(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function k2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function N2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const wA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:T2,shimCreateAnswer:N2,shimCreateOffer:k2,shimGetDisplayMedia:iR,shimGetParameters:D2,shimGetUserMedia:P2,shimOnTrack:C2,shimPeerConnection:Qy,shimRTCDataChannel:_2,shimReceiverGetStats:w2,shimRemoveStream:O2,shimSenderGetStats:E2},Symbol.toStringTag,{value:"Module"}));function M2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function j2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const c=new Event("addstream");c.stream=s,r.dispatchEvent(c)})}),t.apply(r,arguments)}}}function R2(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(p,h){const m=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[m]);return h?(y.then(p,h),Promise.resolve()):y},t.createAnswer=function(p,h){const m=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[m]);return h?(y.then(p,h),Promise.resolve()):y};let u=function(d,p,h){const m=i.apply(this,[d]);return h?(m.then(p,h),Promise.resolve()):m};t.setLocalDescription=u,u=function(d,p,h){const m=s.apply(this,[d]);return h?(m.then(p,h),Promise.resolve()):m},t.setRemoteDescription=u,u=function(d,p,h){const m=c.apply(this,[d]);return h?(m.then(p,h),Promise.resolve()):m},t.addIceCandidate=u}function I2(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(L2(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function L2(e){return e&&e.video!==void 0?Object.assign({},e,{video:p2(e.video)}):e}function $2(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let c=0;c<r.iceServers.length;c++){let u=r.iceServers[c];u.urls===void 0&&u.url?(nv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[c])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function B2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function U2(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(c=>c.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function z2(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const OA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:z2,shimCallbacksAPI:R2,shimConstraints:L2,shimCreateOfferLegacy:U2,shimGetUserMedia:I2,shimLocalStreamsAPI:M2,shimRTCIceServerUrls:$2,shimRemoteStreamsAPI:j2,shimTrackEventTransceiver:B2},Symbol.toStringTag,{value:"Module"}));var sg={exports:{}},_A;function oR(){return _A||(_A=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let c=0;c<s.length;c++)i=s[c].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(c=>{n.parameters[c]!==void 0?s.push(c+"="+n.parameters[c]):s.push(c)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const d=s[u],p=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(p){const h=t.parseRtpMap(p),m=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(h.parameters=m.length?t.parseFmtp(m[0]):{},h.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const c=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{c.forEach(d=>{u.rtcpFeedback.find(h=>h.type===d.type&&h.parameter===d.parameter)||u.rtcpFeedback.push(d)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(c=>{i+=t.writeRtpMap(c),i+=t.writeFmtp(c),i+=t.writeRtcpFb(c)});let s=0;return r.codecs.forEach(c=>{c.maxptime>s&&(s=c.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(c=>{i+=t.writeExtmap(c)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,c=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),d=u.length>0&&u[0].ssrc;let p;const h=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));h.length>0&&h[0].length>1&&h[0][0]===d&&(p=h[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let x={ssrc:d,codecPayloadType:parseInt(y.parameters.apt,10)};d&&p&&(x.rtx={ssrc:p}),r.push(x),s&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:d,mechanism:c?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&d&&r.push({ssrc:d});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(y=>{y.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const c=t.matchPrefix(n,"a=rtcp-mux");return r.mux=c.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(c=>t.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const c=t.matchPrefix(n,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const d=u[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const c=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(sg)),sg.exports}var G2=oR();const Qs=Qr(G2),sR=$w({__proto__:null,default:Qs},[G2]);function ud(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=Qs.parseCandidate(r.candidate);for(const c in s)c in i||Object.defineProperty(i,c,{value:s[c]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,qo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Zy(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||qo(e,"icecandidate",t=>{if(t.candidate){const n=Qs.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function fd(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const d=Qs.splitSections(u.sdp);return d.shift(),d.some(p=>{const h=Qs.parseMLine(p);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(u){const d=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const p=parseInt(d[1],10);return p!==p?-1:p},i=function(u){let d=65536;return t.browser==="firefox"&&(t.version<57?u===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},s=function(u,d){let p=65536;t.browser==="firefox"&&t.version===57&&(p=65535);const h=Qs.matchPrefix(u.sdp,"a=max-message-size:");return h.length>0?p=parseInt(h[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(p=2147483637),p},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=r(arguments[0]),p=i(d),h=s(arguments[0],d);let m;p===0&&h===0?m=Number.POSITIVE_INFINITY:p===0||h===0?m=Math.max(p,h):m=Math.min(p,h);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return m}}),this._sctp=y}return c.apply(this,arguments)}}function dd(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],d=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&d>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},qo(e,"datachannel",r=>(t(r.channel,r.target),r))}function Jy(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const c=new Event("connectionstatechange",i);s.dispatchEvent(c)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function e0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function hd(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function pd(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>n.apply(this,[c]))})}const lR=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:e0,shimAddIceCandidateNullOrEmpty:hd,shimConnectionState:Jy,shimMaxMessageSize:fd,shimParameterlessSetLocalDescription:pd,shimRTCIceCandidate:ud,shimRTCIceCandidateRelayProtocol:Zy,shimSendThrowTypeError:dd},Symbol.toStringTag,{value:"Module"}));function cR({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=h2,r=aR(e),i={browserDetails:r,commonShim:lR,extractVersion:Ic,disableLog:nR,disableWarnings:rR,sdp:sR};switch(r.browser){case"chrome":if(!EA||!Wy||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=EA,hd(e,r),pd(e),m2(e,r),g2(e),Wy(e,r),y2(e),S2(e,r),v2(e),b2(e),A2(e,r),ud(e),Zy(e),Jy(e),fd(e,r),dd(e),e0(e,r);break;case"firefox":if(!wA||!Qy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=wA,hd(e,r),pd(e),P2(e,r),Qy(e,r),C2(e),O2(e),E2(e),w2(e),_2(e),T2(e),D2(e),k2(e),N2(e),ud(e),Jy(e),fd(e,r),dd(e);break;case"safari":if(!OA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=OA,hd(e,r),pd(e),$2(e),U2(e),R2(e),M2(e),j2(e),B2(e),I2(e),z2(e),ud(e),Zy(e),fd(e,r),dd(e),e0(e,r);break;default:n("Unsupported browser!");break}return i}const TA=cR({window:typeof window>"u"?void 0:window});function Yo(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class H2{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,c=0;for(;c<r;){const u=Math.min(r,c+this.chunkedMTU),d=t.slice(c,u),p={__peerData:this._dataCount,n:s,data:d,total:i};n.push(p),c=u,s++}return this._dataCount++,n}}}function uR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const lg=TA.default||TA,Oc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return lg.browserDetails.browser}getVersion(){return lg.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=lg.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},fR=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),q2=()=>Math.random().toString(36).slice(2),DA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class dR extends H2{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=DA,this.browser=Oc.getBrowser(),this.browserVersion=Oc.getVersion(),this.pack=u2,this.unpack=c2,this.supports=(function(){const n={browser:Oc.isBrowserSupported(),webRTC:Oc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(DA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Oc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=fR,this.randomToken=q2}}const Wn=new dR,hR="PeerJS: ";class pR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[hR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Oe=new pR,rv={},mR=Object.prototype.hasOwnProperty,Hn="~";function Xc(){}Object.create&&(Xc.prototype=Object.create(null),new Xc().__proto__||(Hn=!1));function gR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Y2(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new gR(n,r||e,i),c=Hn?Hn+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function md(e,t){--e._eventsCount===0?e._events=new Xc:delete e._events[t]}function Ln(){this._events=new Xc,this._eventsCount=0}Ln.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)mR.call(n,r)&&t.push(Hn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Ln.prototype.listeners=function(t){var n=Hn?Hn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,c=new Array(s);i<s;i++)c[i]=r[i].fn;return c};Ln.prototype.listenerCount=function(t){var n=Hn?Hn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Ln.prototype.emit=function(t,n,r,i,s,c){var u=Hn?Hn+t:t;if(!this._events[u])return!1;var d=this._events[u],p=arguments.length,h,m;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),p){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,r),!0;case 4:return d.fn.call(d.context,n,r,i),!0;case 5:return d.fn.call(d.context,n,r,i,s),!0;case 6:return d.fn.call(d.context,n,r,i,s,c),!0}for(m=1,h=new Array(p-1);m<p;m++)h[m-1]=arguments[m];d.fn.apply(d.context,h)}else{var y=d.length,x;for(m=0;m<y;m++)switch(d[m].once&&this.removeListener(t,d[m].fn,void 0,!0),p){case 1:d[m].fn.call(d[m].context);break;case 2:d[m].fn.call(d[m].context,n);break;case 3:d[m].fn.call(d[m].context,n,r);break;case 4:d[m].fn.call(d[m].context,n,r,i);break;default:if(!h)for(x=1,h=new Array(p-1);x<p;x++)h[x-1]=arguments[x];d[m].fn.apply(d[m].context,h)}}return!0};Ln.prototype.on=function(t,n,r){return Y2(this,t,n,r,!1)};Ln.prototype.once=function(t,n,r){return Y2(this,t,n,r,!0)};Ln.prototype.removeListener=function(t,n,r,i){var s=Hn?Hn+t:t;if(!this._events[s])return this;if(!n)return md(this,s),this;var c=this._events[s];if(c.fn)c.fn===n&&(!i||c.once)&&(!r||c.context===r)&&md(this,s);else{for(var u=0,d=[],p=c.length;u<p;u++)(c[u].fn!==n||i&&!c[u].once||r&&c[u].context!==r)&&d.push(c[u]);d.length?this._events[s]=d.length===1?d[0]:d:md(this,s)}return this};Ln.prototype.removeAllListeners=function(t){var n;return t?(n=Hn?Hn+t:t,this._events[n]&&md(this,n)):(this._events=new Xc,this._eventsCount=0),this};Ln.prototype.off=Ln.prototype.removeListener;Ln.prototype.addListener=Ln.prototype.on;Ln.prefixed=Hn;Ln.EventEmitter=Ln;rv=Ln;var Fo={};Yo(Fo,"ConnectionType",()=>Ui);Yo(Fo,"PeerErrorType",()=>Xt);Yo(Fo,"BaseConnectionErrorType",()=>t0);Yo(Fo,"DataConnectionErrorType",()=>av);Yo(Fo,"SerializationType",()=>ch);Yo(Fo,"SocketEventType",()=>Bi);Yo(Fo,"ServerMessageType",()=>Mn);var Ui=(function(e){return e.Data="data",e.Media="media",e})({}),Xt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),t0=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),av=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),ch=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Bi=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Mn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const F2="1.5.5";class yR extends rv.EventEmitter{constructor(t,n,r,i,s,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+F2),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Oe.log("Server message received:",s)}catch{Oe.log("Invalid server message",i.data);return}this.emit(Bi.Message,s)},this._socket.onclose=i=>{this._disconnected||(Oe.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Bi.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Oe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Oe.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Mn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Bi.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class K2{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ui.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Oe.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Oe.log("Listening for ICE candidates."),t.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||(Oe.log(`Received ICE candidates for ${n}:`,c.candidate),s.socket.send({type:Mn.Candidate,payload:{candidate:c.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Oe.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(t0.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Oe.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(t0.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Oe.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Oe.log("Listening for data channel"),t.ondatachannel=c=>{Oe.log("Received data channel");const u=c.channel;s.getConnection(n,r)._initializeDataChannel(u)},Oe.log("Listening for remote stream"),t.ontrack=c=>{Oe.log("Received remote stream");const u=c.streams[0],d=s.getConnection(n,r);if(d.type===Ui.Media){const p=d;this._addStreamToMediaConnection(u,p)}}}cleanup(){Oe.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Oe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Oe.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ui.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Mn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Xt.WebRTC,i),Oe.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Xt.WebRTC,r),Oe.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Oe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Oe.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Mn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Xt.WebRTC,i),Oe.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Xt.WebRTC,r),Oe.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Oe.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Oe.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(c){i.emitError(Xt.WebRTC,c),Oe.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(t){Oe.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Oe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Xt.WebRTC,n),Oe.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Oe.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Oe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Oe.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class V2 extends rv.EventEmitter{emitError(t,n){Oe.error("Error:",n),this.emit("error",new vR(`${t}`,n))}}class vR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class X2 extends V2{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class xd extends X2{static#e=this.ID_PREFIX="mc_";get type(){return Ui.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||xd.ID_PREFIX+Wn.randomToken(),this._negotiator=new K2(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Oe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Oe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Oe.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Mn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Mn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Oe.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Oe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class bR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:c}=this._options,u=new URL(`${n}://${r}:${i}${s}${c}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",F2),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Oe.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Wn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Wn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Oe.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Sd extends X2{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ui.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Sd.ID_PREFIX+q2(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new K2(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Oe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Oe.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Oe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(av.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Mn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Mn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Oe.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class iv extends Sd{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Sd.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Oe.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class cg extends iv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new H2,this.serialization=ch.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=c2(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=uR(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=u2(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Oe.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class xR extends iv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=ch.None}}class SR extends iv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Wn.chunkedMTU){this.emitError(av.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=ch.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class ov extends V2{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:xR,json:SR,binary:cg,"binary-utf8":cg,default:cg},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Wn.CLOUD_HOST,port:Wn.CLOUD_PORT,path:"/",key:ov.DEFAULT_KEY,token:Wn.randomToken(),config:Wn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Wn.CLOUD_HOST?this._options.secure=Wn.isSecure():this._options.host==Wn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Oe.setLogFunction(this._options.logFunction),Oe.logLevel=this._options.debug||0,this._api=new bR(n),this._socket=this._createServerConnection(),!Wn.supports.audioVideo&&!Wn.supports.data){this._delayedAbort(Xt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Wn.validateId(r)){this._delayedAbort(Xt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Xt.ServerError,i))}_createServerConnection(){const t=new yR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Bi.Message,n=>{this._handleMessage(n)}),t.on(Bi.Error,n=>{this._abort(Xt.SocketError,n)}),t.on(Bi.Disconnected,()=>{this.disconnected||(this.emitError(Xt.Network,"Lost connection to server."),this.disconnect())}),t.on(Bi.Close,()=>{this.disconnected||this._abort(Xt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case Mn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Mn.Error:this._abort(Xt.ServerError,r.msg);break;case Mn.IdTaken:this._abort(Xt.UnavailableID,`ID "${this.id}" is taken`);break;case Mn.InvalidKey:this._abort(Xt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Mn.Leave:Oe.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Mn.Expire:this.emitError(Xt.PeerUnavailable,`Could not connect to peer ${i}`);break;case Mn.Offer:{const s=r.connectionId;let c=this.getConnection(i,s);if(c&&(c.close(),Oe.warn(`Offer received for existing Connection ID:${s}`)),r.type===Ui.Media){const d=new xd(i,this,{connectionId:s,_payload:r,metadata:r.metadata});c=d,this._addConnection(i,c),this.emit("call",d)}else if(r.type===Ui.Data){const d=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});c=d,this._addConnection(i,c),this.emit("connection",d)}else{Oe.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const d of u)c.handleMessage(d);break}default:{if(!r){Oe.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,c=this.getConnection(i,s);c&&c.peerConnection?c.handleMessage(t):s?this._storeMessage(s,t):Oe.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Oe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Xt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Oe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Xt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Oe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new xd(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Oe.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Oe.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Oe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Oe.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Oe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Oe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Xt.ServerError,n))}}var kA=ov;class AR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new kA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new kA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const Ka=new AR,NA=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},PR=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Draw Phase",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,CR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],ER=["deployment","action"],wR=e=>CR.includes(e),MA=e=>ER.includes(e),Yi=()=>{const[e,t]=A.useState(Ke.getState()),[n,r]=A.useState(Ka.getStatus());A.useEffect(()=>{Ke.setupP2PIntegration(Ka)},[]),A.useEffect(()=>Ke.subscribe(j=>{t(Ke.getState())}),[]),A.useEffect(()=>Ka.subscribe(j=>{r(Ka.getStatus())}),[]);const i=A.useCallback(()=>Ke.isMyTurn(),[e.currentPlayer,e.gameMode]),s=A.useCallback(()=>Ke.getLocalPlayerId(),[e.gameMode]),c=A.useCallback(()=>Ke.getOpponentPlayerId(),[e.gameMode]),u=A.useCallback(()=>e.gameMode!=="local",[e.gameMode]),d=A.useCallback(()=>u()&&!i(),[u,i]),p=A.useCallback(()=>Ke.getLocalPlayerState(),[e.gameMode]),h=A.useCallback(()=>Ke.getOpponentPlayerState(),[e.gameMode]),m=A.useCallback(ne=>Ke.isLocalPlayer(ne),[e.gameMode]),y=A.useCallback(()=>Ke.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),x=A.useCallback(()=>{const ne=Ke.getOpponentPlacedSections();return e.turnPhase==="placement"&&ne.some(j=>j!==null)&&console.error(" CRITICAL - getOpponentPlacedSections returning:",ne,"from gameState:",e.opponentPlacedSections),ne},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=A.useCallback((ne,j)=>{Ke.setState(ne,j)},[]),P=A.useCallback((ne,j)=>{Ke.updatePlayers(ne,j)},[]),C=A.useCallback((ne,j)=>{Ke.updatePlayerState(ne,j)},[]),w=A.useCallback((ne,j)=>{Ke.setPlayerStates(ne,j)},[]),O=A.useCallback(ne=>{Ke.setCurrentPlayer(ne)},[]),_=A.useCallback(ne=>{Ke.setTurnPhase(ne)},[]),M=A.useCallback(ne=>{Ke.setFirstPlayerOfRound(ne)},[]),k=A.useCallback(ne=>{Ke.setFirstPasserOfPreviousRound(ne)},[]),D=A.useCallback(ne=>{Ke.setFirstPlayerOverride(ne)},[]),L=A.useCallback(ne=>{Ke.setPassInfo(ne)},[]),$=A.useCallback(ne=>{Ke.updatePassInfo(ne)},[]),Z=A.useCallback((ne,j,X)=>{Ke.addLogEntry(ne,j,X)},[]),ae=A.useCallback(()=>{Ke.reset()},[]),H=A.useCallback(ne=>{Ke.setWinner(ne)},[]),re=A.useCallback(async(ne,j)=>await Ke.processAction(ne,j),[]),me=A.useCallback(()=>Ke.isActionInProgress(),[]),de=A.useCallback(()=>Ke.getActionQueueLength(),[]),ve=A.useCallback(()=>{Ke.clearActionQueue()},[]),G=A.useCallback(()=>wR(e.turnPhase),[e.turnPhase]),oe=A.useCallback(()=>MA(e.turnPhase),[e.turnPhase]),be=A.useCallback(async(ne,j)=>{const X=e.turnPhase,V=MA(X);return console.log(` useGameState.routeAction: ${ne} in phase ${X} (${V?"sequential":"simultaneous"})`),V?await re(ne,j):(console.warn(` Simultaneous phase action ${ne} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${ne} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:X,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,re]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:c,isMultiplayer:u,isWaitingForOpponent:d,getLocalPlayerState:p,getOpponentPlayerState:h,isLocalPlayer:m,getLocalPlacedSections:y,getOpponentPlacedSections:x,updateGameState:S,updatePlayers:P,updatePlayerState:C,setPlayerStates:w,setCurrentPlayer:O,setTurnPhase:_,setFirstPlayerOfRound:M,setFirstPasserOfPreviousRound:k,setFirstPlayerOverride:D,setPassInfo:L,updatePassInfo:$,addLogEntry:Z,resetGame:ae,setWinner:H,processAction:re,isActionInProgress:me,getActionQueueLength:de,clearActionQueue:ve,isSimultaneousPhase:G,isSequentialPhase:oe,routeAction:be,gameStateManager:Ke,p2pManager:Ka}};class zc{constructor(){if(zc.instance)return zc.instance;zc.instance=this,this.listeners=[],this.phaseCommitments={droneSelection:{player1:{completed:!1,drones:[]},player2:{completed:!1,drones:[]}},deckSelection:{player1:{completed:!1,deck:[]},player2:{completed:!1,deck:[]}},placement:{player1:{completed:!1,placement:[]},player2:{completed:!1,placement:[]}},mandatoryDiscard:{player1:{completed:!1,discardedCards:[]},player2:{completed:!1,discardedCards:[]}},allocateShields:{player1:{completed:!1,shieldAllocation:[]},player2:{completed:!1,shieldAllocation:[]}},mandatoryDroneRemoval:{player1:{completed:!1,removedDrones:[]},player2:{completed:!1,removedDrones:[]}}},this.gameStateManager=null,this.aiPhaseProcessor=null,this.isMultiplayer=!1,console.log(" SimultaneousActionManager initialized")}initialize(t,n,r){this.gameStateManager=t,this.aiPhaseProcessor=n,this.isMultiplayer=r,console.log(" SimultaneousActionManager initialized with external systems")}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(` SimultaneousActionManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("SimultaneousActionManager listener error:",i)}})}submitDroneSelection(t,n){return console.log(` SimultaneousActionManager.submitDroneSelection: ${t} submitting ${n.length} drones`),this.commitPlayerAction(t,"droneSelection",{drones:n},{validate:r=>r.drones.length===5,errorMessage:"Must select exactly 5 drones"})}submitDeckSelection(t,n){return console.log(` SimultaneousActionManager.submitDeckSelection: ${t} submitting deck with ${n.length} cards`),this.commitPlayerAction(t,"deckSelection",{deck:n},{validate:r=>r.deck&&r.deck.length>0,errorMessage:"Must select a deck with at least 1 card"})}submitPlacement(t,n){return console.log(` SimultaneousActionManager.submitPlacement: ${t} submitting placement with ${n.length} sections`),this.commitPlayerAction(t,"placement",{placement:n},{validate:r=>!r.placement.some(i=>i==null),errorMessage:"All ship sections must be placed before confirming"})}submitMandatoryDiscard(t,n){return console.log(` SimultaneousActionManager.submitMandatoryDiscard: ${t} discarding ${n.length} cards`),this.commitPlayerAction(t,"mandatoryDiscard",{discardedCards:n},{validate:r=>Array.isArray(r.discardedCards),errorMessage:"Invalid discard data"})}submitShieldAllocation(t,n){return console.log(` SimultaneousActionManager.submitShieldAllocation: ${t} allocating shields`),this.commitPlayerAction(t,"allocateShields",{shieldAllocation:n},{validate:r=>Array.isArray(r.shieldAllocation),errorMessage:"Invalid shield allocation data"})}submitMandatoryDroneRemoval(t,n){return console.log(` SimultaneousActionManager.submitMandatoryDroneRemoval: ${t} removing ${n.length} drones`),this.commitPlayerAction(t,"mandatoryDroneRemoval",{removedDrones:n},{validate:r=>Array.isArray(r.removedDrones),errorMessage:"Invalid drone removal data"})}commitPlayerAction(t,n,r,i={}){if(i.validate&&!i.validate(r))return{success:!1,error:i.errorMessage||`Invalid data for ${n}`,data:r};if(!this.phaseCommitments[n])return console.error(` commitPlayerAction: Phase '${n}' does not exist in phaseCommitments`),console.log("Available phases:",Object.keys(this.phaseCommitments)),{success:!1,error:`Invalid phase: ${n}`,data:{playerId:t,phase:n}};if(!this.phaseCommitments[n][t])return console.error(` commitPlayerAction: Player '${t}' does not exist in phase '${n}'`),console.log(`Available players for ${n}:`,Object.keys(this.phaseCommitments[n])),{success:!1,error:`Invalid player ID: ${t}`,data:{playerId:t,phase:n}};this.phaseCommitments[n][t]={completed:!0,...r},console.log(` ${t} ${n} committed:`,r),this.updateGameStateForPhase(t,n,r),this.emit("playerCompleted",{phase:n,playerId:t,data:r}),t==="player1"&&!this.isMultiplayer()&&(console.log(" Single-player mode: Triggering AI auto-completion for player2"),this.handleAIPhaseCompletion(n));const s=this.areBothPlayersComplete(n);return s&&(console.log(` Both players completed ${n}, emitting completion event`),this.emit("phaseCompleted",{phase:n,data:this.phaseCommitments[n]})),{success:!0,data:{playerId:t,phase:n,actionData:r,bothPlayersComplete:s}}}updateGameStateForPhase(t,n,r){if(this.gameStateManager)switch(n){case"droneSelection":const i={};r.drones.forEach(c=>{i[c.name]=0}),this.gameStateManager.updatePlayerState(t,{activeDronePool:r.drones,deployedDroneCounts:i});break;case"deckSelection":this.gameStateManager.updatePlayerState(t,{deck:r.deck});break;case"placement":const s=t==="player1"?"placedSections":"opponentPlacedSections";console.log(`[PLACEMENT DATA DEBUG] SimultaneousActionManager storing placement for ${t}:`,{placementKey:s,placementData:r.placement}),this.gameStateManager.setState({[s]:r.placement});break;case"mandatoryDiscard":break;case"allocateShields":break;case"mandatoryDroneRemoval":break;default:console.warn(` No specific GameState update logic for phase: ${n}`)}}async handleAIPhaseCompletion(t){if(!this.aiPhaseProcessor){console.warn(" AI Phase Processor not available");return}try{console.log(` Processing AI completion for phase: ${t}`);let n;switch(t){case"droneSelection":n=await this.aiPhaseProcessor.processDroneSelection(),this.submitDroneSelection("player2",n);break;case"deckSelection":n=await this.aiPhaseProcessor.processDeckSelection(),this.submitDeckSelection("player2",n);break;case"placement":n=await this.aiPhaseProcessor.processPlacement(),this.submitPlacement("player2",n);break;case"mandatoryDiscard":this.submitMandatoryDiscard("player2",[]);break;case"allocateShields":this.submitShieldAllocation("player2",[]);break;case"mandatoryDroneRemoval":this.submitMandatoryDroneRemoval("player2",[]);break;default:console.warn(` No AI handler for phase: ${t}`)}}catch(n){console.error("AI phase completion error:",n)}}areBothPlayersComplete(t){const n=this.phaseCommitments[t];if(!n)return console.log(` No commitments found for phase: ${t}`),!1;const r=n.player1.completed,i=n.player2.completed,s=r&&i;return console.log(` Phase '${t}' completion check: player1=${r}, player2=${i}, both=${s}`),s}getPhaseCommitmentStatus(t){return{phase:t,commitments:this.phaseCommitments[t]||{},bothComplete:this.areBothPlayersComplete(t)}}resetPhaseCommitments(t=null){t?this.phaseCommitments[t]&&(this.phaseCommitments[t].player1={completed:!1},this.phaseCommitments[t].player2={completed:!1},console.log(` Reset commitments for phase: ${t}`)):(Object.keys(this.phaseCommitments).forEach(n=>{this.phaseCommitments[n].player1={completed:!1},this.phaseCommitments[n].player2={completed:!1}}),console.log(" Reset all phase commitments"))}getDebugInfo(){return{commitments:this.phaseCommitments,systemsConnected:{gameStateManager:!!this.gameStateManager,aiPhaseProcessor:!!this.aiPhaseProcessor},timestamp:new Date().toISOString()}}}const Gi=new zc,jA=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(` Initialized ship placement: ${e.length} sections available`),console.log(` Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class OR{constructor(){this.currentPhase=null,this.currentPlayer=null,this.isPhaseActive=!1,this.passInfo={player1Passed:!1,player2Passed:!1,firstPasser:null},this.isProcessingTurn=!1,this.turnTimer=null,this.gameStateManager=null,this.actionProcessor=null,this.aiPhaseProcessor=null,this.listeners=new Set,this.aiTurnDelay=1500,console.log(" SequentialPhaseManager initialized")}initialize(t,n,r){this.gameStateManager=t,this.actionProcessor=n,this.aiPhaseProcessor=r,this.gameStateManager&&this.gameStateManager.subscribe(i=>{this.handleStateChange(i)}),console.log(" SequentialPhaseManager connected to dependencies")}handleStateChange(t){const n=this.gameStateManager.getState(),i=["deployment","action"].includes(n.turnPhase);n.turnPhase!==this.currentPhase&&(i&&!this.isPhaseActive?this.initializePhase(n.turnPhase,n.currentPlayer):!i&&this.isPhaseActive&&this.cleanupPhase()),this.isPhaseActive&&n.currentPlayer!==this.currentPlayer&&this.onTurnChange(n.currentPlayer),this.isPhaseActive&&n.passInfo&&JSON.stringify(n.passInfo)!==JSON.stringify(this.passInfo)&&(this.passInfo={...n.passInfo},this.checkPhaseCompletion())}initializePhase(t,n){console.log(` SequentialPhaseManager: Initializing ${t} phase, first player: ${n}`),this.currentPhase=t,this.currentPlayer=n,this.isPhaseActive=!0,this.passInfo={player1Passed:!1,player2Passed:!1,firstPasser:null},this.emit({type:"phase_started",phase:t,firstPlayer:n}),this.checkForAITurn()}onTurnChange(t){console.log(` SequentialPhaseManager: Turn changed to ${t}`),this.turnTimer&&(clearTimeout(this.turnTimer),this.turnTimer=null),this.currentPlayer=t,this.emit({type:"turn_changed",player:t,phase:this.currentPhase}),this.checkForAITurn()}checkForAITurn(){if(!(!this.isPhaseActive||this.isProcessingTurn||this.gameStateManager.getState().gameMode!=="local"||!(this.currentPlayer==="player2"))){if(this.passInfo.player2Passed){console.log(" AI has already passed this phase");return}console.log(` Scheduling AI turn in ${this.aiTurnDelay}ms`),this.turnTimer=setTimeout(()=>{this.processAITurn()},this.aiTurnDelay)}}async processAITurn(){if(this.isProcessingTurn){console.log(" Already processing a turn, skipping AI turn");return}this.isProcessingTurn=!0;try{console.log(` SequentialPhaseManager: Triggering AI turn for ${this.currentPhase} phase`);const t=this.gameStateManager.getState();let n;this.currentPhase==="deployment"?n=await this.aiPhaseProcessor.executeDeploymentTurn(t):this.currentPhase==="action"?n=await this.aiPhaseProcessor.executeActionTurn(t):(console.error(` Unknown sequential phase: ${this.currentPhase}`),n=await this.aiPhaseProcessor.executePass(this.currentPhase)),console.log(" AI turn completed:",n),this.emit({type:"ai_turn_completed",phase:this.currentPhase,result:n})}catch(t){console.error(" Error processing AI turn:",t);try{await this.aiPhaseProcessor.executePass(this.currentPhase)}catch(n){console.error(" Failed to force AI pass:",n)}}finally{this.isProcessingTurn=!1}}async processPlayerPass(t){console.log(` SequentialPhaseManager: ${t} passed`);const n=!this.passInfo.player1Passed&&!this.passInfo.player2Passed;this.passInfo[t+"Passed"]=!0,n&&(this.passInfo.firstPasser=t),this.gameStateManager.setPassInfo(this.passInfo),this.emit({type:"player_passed",player:t,phase:this.currentPhase,firstPasser:this.passInfo.firstPasser}),await this.checkPhaseCompletion()}async checkPhaseCompletion(){if(this.passInfo.player1Passed&&this.passInfo.player2Passed){console.log(` Both players passed - ${this.currentPhase} phase complete`),this.emit({type:"phase_completed",phase:this.currentPhase,firstPasser:this.passInfo.firstPasser});let t;this.currentPhase==="deployment"?t="action":this.currentPhase==="action"&&(t="roundEnd"),t&&await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t}}),this.cleanupPhase()}else if(this.passInfo[this.currentPlayer+"Passed"]){const t=this.currentPlayer==="player1"?"player2":"player1";await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:t}})}}cleanupPhase(){console.log(` SequentialPhaseManager: Cleaning up ${this.currentPhase} phase`),this.turnTimer&&(clearTimeout(this.turnTimer),this.turnTimer=null),this.currentPhase=null,this.currentPlayer=null,this.isPhaseActive=!1,this.isProcessingTurn=!1,this.passInfo={player1Passed:!1,player2Passed:!1,firstPasser:null}}canPlayerAct(t){return!(!this.isPhaseActive||this.currentPlayer!==t||this.passInfo[t+"Passed"])}getStatus(){return{isActive:this.isPhaseActive,phase:this.currentPhase,currentPlayer:this.currentPlayer,passInfo:{...this.passInfo},isProcessingTurn:this.isProcessingTurn}}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t){this.listeners.forEach(n=>{try{n(t)}catch(r){console.error("Error in SequentialPhaseManager listener:",r)}})}forceEndPhase(){console.warn(" Force ending sequential phase"),this.cleanupPhase()}}const n0=new OR;class Gc{constructor(){if(Gc.instance)return Gc.instance;Gc.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement"],this.ROUND_PHASES=["energyReset","mandatoryDiscard","draw","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deployment","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.simultaneousActionManager=null,this.actionProcessor=null,this.isMultiplayer=!1,console.log(" GameFlowManager initialized")}initialize(t,n,r,i,s){if(this.gameStateManager=t,this.simultaneousActionManager=n,this.actionProcessor=r,this.isMultiplayer=i,s&&s.initialize){const c=s.currentAIPersonality,u=s.dronePool,d=s.aiPersonalities;s.initialize(d,u,c,r,t)}n0.initialize(t,r,s),this.setupEventListeners(),console.log(" GameFlowManager initialized with external systems")}setupEventListeners(){this.simultaneousActionManager&&this.simultaneousActionManager.subscribe(t=>{t.type==="phaseCompleted"&&this.onSimultaneousPhaseComplete(t.phase,t.data)}),n0.subscribe(t=>{t.type==="phase_completed"&&this.onSequentialPhaseComplete(t.phase,{firstPasser:t.firstPasser})}),this.actionProcessor&&typeof this.actionProcessor.subscribe=="function"?this.actionProcessor.subscribe(t=>{t.type==="sequentialPhaseComplete"&&this.onSequentialPhaseComplete(t.phase,t.data)}):this.actionProcessor&&console.log(" ActionProcessor available but no event subscription capability")}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(` GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}startGameFlow(t="droneSelection"){console.log(` GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage="preGame",this.roundNumber=0;let n={};if(t==="droneSelection"){console.log(" GameFlowManager initializing drone selection phase data");const r=l2(In),i=jA();n={...r,...i}}this.gameStateManager&&this.gameStateManager.setState({turnPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,...n}),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}onSimultaneousPhaseComplete(t,n){console.log(` GameFlowManager: Simultaneous phase '${t}' completed`,n);const r=this.getNextPhase(t);r?(this.isSequentialPhase(r)?(console.log(` GameFlowManager: Handover to sequential phase '${r}'`),this.initiateSequentialPhase(r)):(console.log(` GameFlowManager: Continuing with simultaneous phase '${r}'`),this.transitionToPhase(r)),this.simultaneousActionManager&&(this.simultaneousActionManager.resetPhaseCommitments(t),console.log(` GameFlowManager: Cleaned up completed phase '${t}' after transition`))):(console.log(" GameFlowManager: Game flow completed or needs special handling"),this.simultaneousActionManager&&(this.simultaneousActionManager.resetPhaseCommitments(t),console.log(` GameFlowManager: Cleaned up final phase '${t}'`)))}onSequentialPhaseComplete(t,n){console.log(` GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?this.transitionToPhase(r):t==="action"&&this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(` GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():t==="determineFirstPlayer"?n=await this.processAutomaticFirstPlayerPhase():console.warn(` No handler for automatic phase: ${t}`),n?(console.log(` GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),this.transitionToPhase(n)):console.warn(` No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticFirstPlayerPhase(){console.log(" GameFlowManager: Processing automatic first player determination phase");const t="determineFirstPlayer";try{const{processFirstPlayerDetermination:n}=await Fa(async()=>{const{processFirstPlayerDetermination:c}=await import("./firstPlayerUtils-D8_kW28T.js");return{processFirstPlayerDetermination:c}},[]);if(!this.gameStateManager){console.error(" GameStateManager not available for first player determination");return}const r=this.gameStateManager.getState(),i=n(r);this.gameStateManager.setState(i.stateUpdates),console.log(" Automatic first player determination completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0,firstPlayerResult:i});const s=this.getNextPhase("determineFirstPlayer");return console.log(" Automatic first player determination completed, returning next phase:",s),s}catch(n){console.error(" Error during automatic first player determination phase:",n)}}async processAutomaticDrawPhase(){console.log(" GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await Fa(async()=>{const{performAutomaticDraw:c}=await import("./cardDrawUtils-CW2inz3j.js");return{performAutomaticDraw:c}},[]);if(!this.gameStateManager){console.error(" GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);this.gameStateManager.setState({player1:i.player1,player2:i.player2}),console.log(" Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return console.log(" Automatic draw completed, returning next phase:",s),s}catch(n){console.error(" Error during automatic draw phase:",n)}}async processAutomaticEnergyResetPhase(){console.log(" GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error(" GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),r=(await Fa(async()=>{const{default:h}=await Promise.resolve().then(()=>Kj);return{default:h}},void 0)).default,i=new r(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),c=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={...n.player1,energy:s.totals.energyPerTurn,deploymentBudget:s.totals.deploymentBudget},d={...n.player2,energy:c.totals.energyPerTurn,deploymentBudget:c.totals.deploymentBudget};this.gameStateManager.setPlayerStates(u,d),console.log(` Energy reset complete - Player 1: ${u.energy} energy, Player 2: ${d.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const p=this.getNextPhase("energyReset");return console.log(" Automatic energy reset completed, returning next phase:",p),p}catch(n){console.error(" Error during automatic energy reset phase:",n)}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="placement"?"energyReset":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn(" GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;default:return!0}}anyPlayerExceedsHandLimit(t){return!1}anyPlayerHasShieldsToAllocate(t){return!1}anyPlayerExceedsDroneLimit(t){return!1}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(` GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(` Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn(" ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1)),console.log(` GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={};if(t==="placement"&&(console.log(" GameFlowManager: Initializing placement phase data"),r=jA()),this.gameStateManager&&this.gameStateManager.setState({turnPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,...r}),this.isAutomaticPhase(t)){console.log(` GameFlowManager: Auto-processing automatic phase '${t}'`),this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber})}startNewRound(){this.roundNumber++,console.log(` GameFlowManager: Starting round ${this.roundNumber}`);const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?this.transitionToPhase(t):(console.warn(" No required phases found for new round, defaulting to deployment"),this.transitionToPhase("deployment"))}endGame(t){console.log(` GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.gameStateManager&&this.gameStateManager.setState({turnPhase:"gameOver",gameStage:"gameOver",winner:t}),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log(" GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,simultaneousActionManager:!!this.simultaneousActionManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const Hc=new Gc,r0=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];function RA(){const{updateGameState:e}=Yi(),[t,n]=A.useState(!1),r=()=>{console.log(" Selected: Single Player"),e({appState:"lobby",gameMode:"local"})},i=()=>{console.log(" Selected: Multiplayer"),e({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},c=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#00ff88",color:"#000000",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 255, 136, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#00cc6a",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#00ff88",u.target.style.transform="translateY(0)"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#ff6b35",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 53, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#e55a2b",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#ff6b35",u.target.style.transform="translateY(0)"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:c,style:{fontSize:"1rem",padding:"10px 20px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>{u.target.style.backgroundColor="#cccccc",u.target.style.color="#1a1a1a"},onMouseOut:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#cccccc"},children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"DRONE WARS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"Strategic Combat in the Digital Arena"}),v.jsx("button",{onClick:s,style:{fontSize:"1.5rem",padding:"15px 40px",backgroundColor:"#0088ff",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 136, 255, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#0066cc",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#0088ff",u.target.style.transform="translateY(0)"},children:"START GAME"})]})})}function _R(){const{gameState:e,updateGameState:t,gameStateManager:n}=Yi(),[r,i]=A.useState(null),s=e.gameMode==="local",c=e.gameMode==="multiplayer",u=()=>{console.log(" Returning to main menu"),t({appState:"menu",gameMode:"local"})},d=h=>{console.log(" Selected AI:",h.name),i(h)},p=()=>{if(s&&r){console.log(" Starting single player game with AI:",r.name);const h=In.filter(y=>r.dronePool.includes(y.name)),m={};h.forEach(y=>{m[y.name]=0}),n.startGame("local",{name:"Player 1"},{name:r.name,decklist:r.decklist,activeDronePool:h,deployedDroneCounts:m,aiPersonality:r})}else c&&(console.log(" Starting multiplayer game"),n.startGame("multiplayer",{name:"Player 1"},{name:"Player 2"}))};return v.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:s?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),s&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:r0.map(h=>v.jsxs("div",{onClick:()=>d(h),style:{padding:"20px",backgroundColor:r?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${r?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:m=>{r?.name!==h.name&&(m.target.style.backgroundColor="#333333",m.target.style.borderColor="#666666")},onMouseOut:m=>{r?.name!==h.name&&(m.target.style.backgroundColor="#2a2a2a",m.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:r?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),c&&v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[v.jsx("div",{style:{fontSize:"1.2rem",color:"#cccccc",marginBottom:"1rem"},children:"Multiplayer game ready to start"}),v.jsx("div",{style:{fontSize:"1rem",color:"#888888"},children:"Both players will customize their decks and drones in-game"})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:u,style:{fontSize:"1rem",padding:"12px 24px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:h=>{h.target.style.backgroundColor="#cccccc",h.target.style.color="#1a1a1a"},onMouseOut:h=>{h.target.style.backgroundColor="transparent",h.target.style.color="#cccccc"},children:"BACK TO MENU"}),v.jsx("button",{onClick:p,disabled:s&&!r,style:{fontSize:"1.2rem",padding:"12px 30px",backgroundColor:s&&!r?"#444444":"#00ff88",color:s&&!r?"#888888":"#000000",border:"none",borderRadius:"8px",cursor:s&&!r?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:s&&!r?.5:1},onMouseOver:h=>{s&&!r||(h.target.style.backgroundColor="#00cc6a",h.target.style.transform="translateY(-2px)")},onMouseOut:h=>{s&&!r||(h.target.style.backgroundColor="#00ff88",h.target.style.transform="translateY(0)")},children:s?"START GAME":"START MULTIPLAYER"})]})]})}const IA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),TR=({text:e,className:t})=>{const n=A.useRef(null),r=A.useRef(null);return A.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const c=()=>{let u,d;t.includes("font-orbitron")?(u=8,d=16):(u=8,d=12);let p=d;for(s.style.fontSize=p+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&p>u;)p-=.5,s.style.fontSize=p+"px"};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},Ad=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:c=[],isUpgradeTarget:u=!1,onViewUpgrades:d})=>{let p=e.limit;c.forEach(de=>{de.mod.stat==="limit"&&(p+=de.mod.value)});const h=i>=p,m=n&&(!h||s),y=A.useMemo(()=>{const de={attack:e.attack,speed:e.speed,cost:e.class};return c.forEach(ve=>{ve.mod.stat==="cost"?de.cost=Math.max(0,de.cost+ve.mod.value):de.hasOwnProperty(ve.mod.stat)&&(de[ve.mod.stat]+=ve.mod.value)}),de},[e,c]),x=y.cost,S=y.attack>e.attack,P=y.attack<e.attack,C=S?"text-green-400":P?"text-red-400":"text-white",w=y.speed>e.speed,O=y.speed<e.speed,_=w?"text-green-400":O?"text-red-400":"text-white",M=y.cost<e.class,k=y.cost>e.class,D=M?"text-green-400":k?"text-red-400":"text-white",$=p>e.limit?"text-green-400":"text-white",{name:Z,image:ae,hull:H,shields:re,abilities:me}=e;return v.jsx("div",{onClick:m?()=>t(e):void 0,className:`
        w-60 h-[320px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${m?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${m?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:v.jsxs("div",{className:`
          w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden
        `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:ae,alt:Z,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(TR,{text:Z,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(IA,{value:y.attack,isFlat:!1,icon:qy,iconColor:"text-red-400",textColor:C})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:re>0&&Array.from({length:re}).map((de,ve)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${ve}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:H}).map((de,ve)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${ve}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(IA,{value:y.speed,isFlat:!0,icon:Hy,iconColor:"text-blue-400",textColor:_})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-40 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:me&&me.length>0?me.map((de,ve)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:de.name}),v.jsx("p",{className:"text-gray-400 text-xs leading-tight font-exo",children:de.description})]},ve)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Fc,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${D}`,children:x})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:de=>{de.stopPropagation(),d&&d(e,c)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[c.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${h?"text-pink-500":$}`,children:[i,"/",p]})})]})]})]})]})})},sv=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(Do,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:" Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function DR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r}=Yi(),{droneSelectionPool:i,droneSelectionTrio:s,turnPhase:c}=e,u=r(),[d,p]=A.useState([]),[h,m]=A.useState(s),[y,x]=A.useState(i),[S,P]=A.useState({droneSelection:!1}),[C,w]=A.useState({droneSelection:!1});A.useEffect(()=>{const D=L=>{const{type:$,phase:Z,playerId:ae}=L.detail||L;console.log(` DroneSelectionScreen received PhaseManager event: ${$}`,{phase:Z,playerId:ae}),Z==="droneSelection"&&($==="playerCompleted"?ae===t()?P(re=>({...re,droneSelection:!0})):n()&&w(re=>({...re,droneSelection:!0})):$==="phaseCompleted"&&(p([]),P(H=>({...H,droneSelection:!1})),w(H=>({...H,droneSelection:!1}))))};return window.addEventListener("phaseManagerEvent",D),()=>{window.removeEventListener("phaseManagerEvent",D)}},[t,n]);const O=D=>{if(c!=="droneSelection")return;console.log(" handleChooseDroneForSelection called with:",D.name);const L=[...d,D];if(p(L),L.length<5){const $=Wj(y);m($.droneSelectionTrio),x($.droneSelectionPool),console.log(" Advanced to next trio locally, selected:",L.length,"of 5 drones")}else console.log(" All 5 drones selected, waiting for Continue button click")},_=()=>{if(c!=="droneSelection")return;console.log(" handleContinueDroneSelection called with:",d.length,"drones");const D=t(),L=Gi.submitDroneSelection(D,d);if(!L.success){console.error(" Drone selection submission failed:",L.error);return}console.log(" Drone selection submitted to PhaseManager")},M=S.droneSelection;if(n()&&M&&!C.droneSelection){const L=Gi.getPhaseCommitmentStatus("droneSelection").commitments?.player1?.drones||u.activeDronePool||d,$=L.length>0?L.map(Z=>Z.name).join(", "):"Selection complete";return v.jsx(sv,{phase:"droneSelection",localPlayerStatus:`You selected: ${$}`})}const k=d.length===5;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((D,L)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${L<d.length?"bg-green-500":"bg-gray-600"}`},L)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[d.length,"/5 drones selected"]})]}),k?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:" Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",d.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),h&&h.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:h.map((D,L)=>v.jsx(Ad,{drone:D,onClick:()=>O(D),isSelectable:!0,deployedCount:0},D.name||L))})]}),v.jsx("button",{onClick:_,disabled:!k,className:`px-8 py-3 font-bold rounded-lg transition-all mb-8 ${k?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/25 hover:shadow-green-500/30 transform hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:k?"Continue to Deck Selection":`Continue (${d.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",d.length,"/5)",k&&v.jsx("span",{className:"text-green-400 ml-2",children:""})]}),d.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:d.map((D,L)=>v.jsx(Ad,{drone:D,isSelectable:!1,deployedCount:0},L))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function kR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getOpponentPlayerState:i,setTurnPhase:s,addLogEntry:c}=Yi(),{turnPhase:u}=e,d=r();i();const[p,h]=A.useState({deckSelection:!1}),[m,y]=A.useState({deckSelection:!1});A.useEffect(()=>{const P=C=>{const{type:w,phase:O,playerId:_}=C.detail||C;console.log(` DeckSelectionScreen received PhaseManager event: ${w}`,{phase:O,playerId:_}),O==="deckSelection"&&(w==="playerCompleted"?_===t()?h(k=>({...k,deckSelection:!0})):n()&&y(k=>({...k,deckSelection:!0})):w==="phaseCompleted"&&(h(M=>({...M,deckSelection:!1})),y(M=>({...M,deckSelection:!1}))))};return window.addEventListener("phaseManagerEvent",P),()=>{window.removeEventListener("phaseManagerEvent",P)}},[t,n]);const x=P=>{if(u==="deckSelection")if(console.log(" handleDeckChoice called with:",P),P==="standard"){const C=t(),w=Ce.buildDeckFromList(Ks),O=Gi.submitDeckSelection(C,w);if(!O.success){console.error(" Deck selection submission failed:",O.error);return}console.log(" Standard deck selection submitted to PhaseManager"),c({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else P==="custom"&&(console.log(" Transitioning to deck building phase"),s("deckBuilding"))},S=d.deck&&d.deck.length>0;return console.log("Deck selection render check:",{isMultiplayer:n(),localPlayerHasDeck:S,opponentPhaseCompletion_deckSelection:m.deckSelection,turnPhase:u,localPlayerDeckLength:d.deck?.length}),n()&&S&&!m.deckSelection?v.jsx(sv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>x("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"mt-6 bg-cyan-600 text-white font-bold px-6 py-2 rounded-full hover:bg-cyan-700 transition-colors duration-200",children:"Select"})]}),v.jsxs("div",{onClick:()=>x("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 bg-purple-600 text-white font-bold px-6 py-2 rounded-full hover:bg-purple-700 transition-colors duration-200",children:"Select"})]})]})]})]})}const NR=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Pd=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:c,isInteractive:u,isOpponent:d,isHovered:p,onMouseEnter:h,onMouseLeave:m,isCardTarget:y,isInMiddleLane:x,reallocationState:S,gameEngine:P,turnPhase:C,isMyTurn:w,passInfo:O,getLocalPlayerId:_,localPlayerState:M,shipAbilityMode:k})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const D=P.getShipStatus(t),L=D==="critical"?"bg-red-900/60":D==="damaged"?"bg-yellow-900/50":"bg-black/60";let $=D==="critical"?"border-red-500":D==="damaged"?"border-yellow-500":d?"border-pink-500":"border-cyan-500";const Z=d?"shadow-pink-500/20":"shadow-cyan-500/20",ae=p?"scale-105 shadow-xl":"";let H="";if(S)switch(S){case"can-remove":$="border-orange-400",H="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":$="border-orange-600",H="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":$="border-gray-600",H="opacity-50";break;case"can-add":$="border-green-400",H="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":$="border-green-600",H="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":$="border-gray-600",H="opacity-50";break}const re=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",me=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,ve=>ve.toUpperCase()),de={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{className:`
        relative rounded-xl shadow-lg ${Z} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${$}
        ${u?`cursor-pointer ${ae}`:""}
        ${re}
        ${H}
      `,style:de,onClick:s,onMouseEnter:h,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${L}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-4 h-full",children:[v.jsx("div",{className:`absolute top-2 right-2 flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${D==="healthy"?"bg-green-500/20 text-green-300":D==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:D.charAt(0).toUpperCase()+D.slice(1)}),v.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:me}),v.jsx("p",{className:"text-xs text-gray-400 italic max-w-[200px]",children:t.description})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([ve,G])=>{const oe=x&&t.middleLaneBonus&&t.middleLaneBonus[ve];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[ve,":"]}),v.jsx("span",{className:oe?"text-green-400 font-bold":"",children:G})]},ve)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((ve,G)=>v.jsx("div",{children:G<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},G))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((ve,G)=>{const oe=G+1,{critical:be,damaged:ne}=t.thresholds;let j;oe<=be?j="bg-red-500":oe<=ne?j="bg-orange-500":j="bg-green-500";const X=G<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${X?j:"bg-gray-400"} border border-black/50`},G)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(NR,{ability:t.ability,isUsable:C==="action"&&w()&&!O[`${_()}Passed`]&&M.energy>=t.ability.cost.energy,isSelected:k?.ability.id===t.ability.id,onClick:ve=>c(ve,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function MR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getLocalPlacedSections:i,setModalContent:s}=Yi(),{turnPhase:c,unplacedSections:u}=e,d=r(),p=i(),[h,m]=A.useState(null),[y,x]=A.useState(p||[null,null,null]),[S,P]=A.useState(u||["bridge","powerCell","droneControlHub"]),[C,w]=A.useState({placement:!1}),[O,_]=A.useState({placement:!1});A.useEffect(()=>{const $=Z=>{const{type:ae,phase:H,playerId:re}=Z.detail||Z;console.log(` ShipPlacementScreen received PhaseManager event: ${ae}`,{phase:H,playerId:re}),H==="placement"&&(ae==="playerCompleted"?re===t()?w(de=>({...de,placement:!0})):n()&&_(de=>({...de,placement:!0})):ae==="phaseCompleted"&&(w(me=>({...me,placement:!1})),_(me=>({...me,placement:!1}))))};return window.addEventListener("phaseManagerEvent",$),()=>{window.removeEventListener("phaseManagerEvent",$)}},[t,n]);const M=$=>{if(c==="placement")if(console.log(" handleSelectSectionForPlacement called with:",$,"gameMode:",e.gameMode),S.includes($))m(Z=>Z===$?null:$);else{const Z=y.indexOf($),ae=[...y];ae[Z]=null,x(ae),P(H=>[...H,$]),m(null)}},k=$=>{if(c==="placement")if(console.log(" handleLaneSelectForPlacement called with lane:",$,"gameMode:",e.gameMode),h){if(y[$]){const Z=y[$],ae=[...y];ae[$]=h;const H=S.indexOf(h),re=[...S];re.splice(H,1,Z),x(ae),P(re)}else{const Z=[...y];Z[$]=h,x(Z),P(ae=>ae.filter(H=>H!==h))}m(null)}else y[$]&&M(y[$])},D=async()=>{if(c!=="placement")return;if(console.log(" handleConfirmPlacement called"),y.some(Z=>Z==null)){s({title:"Incomplete Placement",text:"All ship sections must be placed before confirming placement.",onClose:()=>s(null),isBlocking:!1});return}console.log(" Submitting placement to PhaseManager:",y);try{const Z=await Gi.submitPlacement(t(),y);if(!Z.success){console.error(" Placement submission failed:",Z.error),s({title:"Placement Error",text:Z.error,onClose:()=>s(null),isBlocking:!1});return}console.log(" Placement submitted to PhaseManager"),n()&&!Z.data.bothComplete&&s({title:"Placement Confirmed",text:"Your ship placement has been confirmed. Waiting for opponent to complete their placement...",onClose:()=>s(null),isBlocking:!1})}catch(Z){console.error(" Error submitting placement:",Z),s({title:"Placement Error",text:"An error occurred while submitting placement. Please try again.",onClose:()=>s(null),isBlocking:!1})}};if(y&&y.length===3&&y.every($=>$!==null),n()&&C.placement&&!O.placement){const $=y.map((Z,ae)=>Z?Z.name:"Empty").join(", ");return v.jsx(sv,{phase:"placement",localPlayerStatus:`Your ship layout: ${$}`})}const L=y.every($=>$!==null);return console.log(" ShipPlacementScreen rendered:",{allPlaced:L,placed:y,unplaced:u,selected:h}),v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map($=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes($)&&v.jsx("div",{onClick:()=>M($),className:`h-full transition-all duration-300 rounded-xl ${h===$?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(Pd,{section:$,stats:d.shipSections[$],effectiveStatsForDisplay:d.shipSections[$].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:Ce,turnPhase:c,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:d,shipAbilityMode:null})})},$))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map($=>{const Z=y[$],ae=h&&!y[$];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>k($),children:Z?v.jsx(Pd,{section:Z,stats:d.shipSections[Z],effectiveStatsForDisplay:d.shipSections[Z].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:$===1,gameEngine:Ce,turnPhase:c,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:d,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${ae?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:$===1?"Lane 2 (Center Bonus)":`Lane ${$+1}`})})},$)})})]}),v.jsx("button",{onClick:()=>{console.log(` Confirm Layout button clicked! allPlaced: ${L}`),D()},disabled:!L,className:"mt-12 bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 disabled:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed enabled:hover:bg-green-500 shadow-lg",children:"Confirm Layout"})]})]})}function W2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=W2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function st(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=W2(e))&&(r&&(r+=" "),r+=t);return r}var ug={},fg={},LA;function jR(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(fg)),fg}var dg={},$A;function Q2(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(dg)),dg}var hg={},BA;function Z2(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(hg)),hg}var pg={},UA;function lv(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,c="",u="",d=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const p=n[s];u?p==="\\"&&s+1<i?(s++,c+=n[s]):p===u?u="":c+=p:d?p==='"'||p==="'"?u=p:p==="]"?(d=!1,r.push(c),c=""):c+=p:p==="["?(d=!0,c&&(r.push(c),c="")):p==="."?c&&(r.push(c),c=""):c+=p,s++}return c&&r.push(c),r}e.toPath=t})(pg)),pg}var zA;function cv(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jR(),n=Q2(),r=Z2(),i=lv();function s(u,d,p){if(u==null)return p;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return p;const h=u[d];return h===void 0?n.isDeepKey(d)?s(u,i.toPath(d),p):p:h}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const h=u[d];return h===void 0?p:h}default:{if(Array.isArray(d))return c(u,d,p);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return p;const h=u[d];return h===void 0?p:h}}}function c(u,d,p){if(d.length===0)return p;let h=u;for(let m=0;m<d.length;m++){if(h==null||t.isUnsafeProperty(d[m]))return p;h=h[d[m]]}return h===void 0?p:h}e.get=s})(ug)),ug}var mg,GA;function RR(){return GA||(GA=1,mg=cv().get),mg}var IR=RR();const Bo=Qr(IR);var gg={exports:{}},ft={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HA;function LR(){if(HA)return ft;HA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function S(P){if(typeof P=="object"&&P!==null){var C=P.$$typeof;switch(C){case e:switch(P=P.type,P){case n:case i:case r:case d:case p:case y:return P;default:switch(P=P&&P.$$typeof,P){case c:case u:case m:case h:return P;case s:return P;default:return C}}case t:return C}}}return ft.ContextConsumer=s,ft.ContextProvider=c,ft.Element=e,ft.ForwardRef=u,ft.Fragment=n,ft.Lazy=m,ft.Memo=h,ft.Portal=t,ft.Profiler=i,ft.StrictMode=r,ft.Suspense=d,ft.SuspenseList=p,ft.isContextConsumer=function(P){return S(P)===s},ft.isContextProvider=function(P){return S(P)===c},ft.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},ft.isForwardRef=function(P){return S(P)===u},ft.isFragment=function(P){return S(P)===n},ft.isLazy=function(P){return S(P)===m},ft.isMemo=function(P){return S(P)===h},ft.isPortal=function(P){return S(P)===t},ft.isProfiler=function(P){return S(P)===i},ft.isStrictMode=function(P){return S(P)===r},ft.isSuspense=function(P){return S(P)===d},ft.isSuspenseList=function(P){return S(P)===p},ft.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===n||P===i||P===r||P===d||P===p||typeof P=="object"&&P!==null&&(P.$$typeof===m||P.$$typeof===h||P.$$typeof===c||P.$$typeof===s||P.$$typeof===u||P.$$typeof===x||P.getModuleId!==void 0)},ft.typeOf=S,ft}var qA;function $R(){return qA||(qA=1,gg.exports=LR()),gg.exports}var BR=$R(),hn=e=>e===0?0:e>0?1:-1,hr=e=>typeof e=="number"&&e!=+e,ko=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,De=e=>(typeof e=="number"||e instanceof Number)&&!hr(e),ba=e=>De(e)||typeof e=="string",UR=0,Wc=e=>{var t=++UR;return"".concat(e||"").concat(t)},Rn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(t)&&typeof t!="string")return r;var s;if(ko(t)){if(n==null)return r;var c=t.indexOf("%");s=n*parseFloat(t.slice(0,c))/100}else s=+t;return hr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},J2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function wn(e,t,n){return De(e)&&De(t)?e+n*(t-e):t}function zR(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Bo(r,t))===n)}var pn=e=>e===null||typeof e>"u",ou=e=>pn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),GR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function uv(e){if(typeof e!="string")return!1;var t=GR;return t.includes(e)}var HR=["viewBox","children"],YA=["points","pathLength"],yg={svg:HR,polygon:YA,polyline:YA},qR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(A.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{uv(i)&&(r[i]=(s=>n[i](n,s)))}),r},YR=(e,t,n)=>r=>(e(t,n,r),null),su=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];uv(i)&&typeof s=="function"&&(r||(r={}),r[i]=YR(s,t,n))}),r},FR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function eO(e){if(typeof e!="string")return!1;var t=FR;return t.includes(e)}function Ko(e){var t=Object.entries(e).filter(n=>{var[r]=n;return eO(r)});return Object.fromEntries(t)}var FA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",KA=null,vg=null,tO=e=>{if(e===KA&&Array.isArray(vg))return vg;var t=[];return A.Children.forEach(e,n=>{pn(n)||(BR.isFragment(n)?t=t.concat(tO(n.props.children)):t.push(n))}),vg=t,KA=e,t};function fv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>FA(i)):r=[FA(t)],tO(e).forEach(i=>{var s=Bo(i,"type.displayName")||Bo(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var KR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&yg?.[r])!==null&&i!==void 0?i:[],c=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||eO(t)),d=!!n&&uv(t);return c||u||d},Wt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var c;KR((c=r)===null||c===void 0?void 0:c[s],s,t,n)&&(i[s]=r[s])}),i},VR=["children","width","height","viewBox","className","style","title","desc"];function a0(){return a0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a0.apply(null,arguments)}function XR(e,t){if(e==null)return{};var n,r,i=WR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dv=A.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:c,style:u,title:d,desc:p}=e,h=XR(e,VR),m=s||{width:r,height:i,x:0,y:0},y=st("recharts-surface",c);return A.createElement("svg",a0({},Wt(h,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),A.createElement("title",null,d),A.createElement("desc",null,p),n)}),QR=["children","className"];function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i0.apply(null,arguments)}function ZR(e,t){if(e==null)return{};var n,r,i=JR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function JR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Jn=A.forwardRef((e,t)=>{var{children:n,className:r}=e,i=ZR(e,QR),s=st("recharts-layer",r);return A.createElement("g",i0({className:s},Wt(i,!0),{ref:t}),n)}),nO=Uw(),rO=A.createContext(null),eI=()=>A.useContext(rO);function vt(e){return function(){return e}}const aO=Math.cos,Cd=Math.sin,Zr=Math.sqrt,Ed=Math.PI,uh=2*Ed,o0=Math.PI,s0=2*o0,Oo=1e-6,tI=s0-Oo;function iO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function nI(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iO;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class rI{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iO:nI(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,c){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,u=this._y1,d=r-t,p=i-n,h=c-t,m=u-n,y=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Oo)if(!(Math.abs(m*d-p*h)>Oo)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-c,S=i-u,P=d*d+p*p,C=x*x+S*S,w=Math.sqrt(P),O=Math.sqrt(y),_=s*Math.tan((o0-Math.acos((P+y-C)/(2*w*O)))/2),M=_/O,k=_/w;Math.abs(M-1)>Oo&&this._append`L${t+M*h},${n+M*m}`,this._append`A${s},${s},0,0,${+(m*x>h*S)},${this._x1=t+k*d},${this._y1=n+k*p}`}}arc(t,n,r,i,s,c){if(t=+t,n=+n,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),d=r*Math.sin(i),p=t+u,h=n+d,m=1^c,y=c?i-s:s-i;this._x1===null?this._append`M${p},${h}`:(Math.abs(this._x1-p)>Oo||Math.abs(this._y1-h)>Oo)&&this._append`L${p},${h}`,r&&(y<0&&(y=y%s0+s0),y>tI?this._append`A${r},${r},0,1,${m},${t-u},${n-d}A${r},${r},0,1,${m},${this._x1=p},${this._y1=h}`:y>Oo&&this._append`A${r},${r},0,${+(y>=o0)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function hv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new rI(t)}function pv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oO(e){this._context=e}oO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fh(e){return new oO(e)}function sO(e){return e[0]}function lO(e){return e[1]}function cO(e,t){var n=vt(!0),r=null,i=fh,s=null,c=hv(u);e=typeof e=="function"?e:e===void 0?sO:vt(e),t=typeof t=="function"?t:t===void 0?lO:vt(t);function u(d){var p,h=(d=pv(d)).length,m,y=!1,x;for(r==null&&(s=i(x=c())),p=0;p<=h;++p)!(p<h&&n(m=d[p],p,d))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(m,p,d),+t(m,p,d));if(x)return s=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:vt(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:vt(+d),u):t},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:vt(!!d),u):n},u.curve=function(d){return arguments.length?(i=d,r!=null&&(s=i(r)),u):i},u.context=function(d){return arguments.length?(d==null?r=s=null:s=i(r=d),u):r},u}function Vf(e,t,n){var r=null,i=vt(!0),s=null,c=fh,u=null,d=hv(p);e=typeof e=="function"?e:e===void 0?sO:vt(+e),t=typeof t=="function"?t:vt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?lO:vt(+n);function p(m){var y,x,S,P=(m=pv(m)).length,C,w=!1,O,_=new Array(P),M=new Array(P);for(s==null&&(u=c(O=d())),y=0;y<=P;++y){if(!(y<P&&i(C=m[y],y,m))===w)if(w=!w)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=x;--S)u.point(_[S],M[S]);u.lineEnd(),u.areaEnd()}w&&(_[y]=+e(C,y,m),M[y]=+t(C,y,m),u.point(r?+r(C,y,m):_[y],n?+n(C,y,m):M[y]))}if(O)return u=null,O+""||null}function h(){return cO().defined(i).curve(c).context(s)}return p.x=function(m){return arguments.length?(e=typeof m=="function"?m:vt(+m),r=null,p):e},p.x0=function(m){return arguments.length?(e=typeof m=="function"?m:vt(+m),p):e},p.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:vt(+m),p):r},p.y=function(m){return arguments.length?(t=typeof m=="function"?m:vt(+m),n=null,p):t},p.y0=function(m){return arguments.length?(t=typeof m=="function"?m:vt(+m),p):t},p.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:vt(+m),p):n},p.lineX0=p.lineY0=function(){return h().x(e).y(t)},p.lineY1=function(){return h().x(e).y(n)},p.lineX1=function(){return h().x(r).y(t)},p.defined=function(m){return arguments.length?(i=typeof m=="function"?m:vt(!!m),p):i},p.curve=function(m){return arguments.length?(c=m,s!=null&&(u=c(s)),p):c},p.context=function(m){return arguments.length?(m==null?s=u=null:u=c(s=m),p):s},p}class uO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function aI(e){return new uO(e,!0)}function iI(e){return new uO(e,!1)}const mv={draw(e,t){const n=Zr(t/Ed);e.moveTo(n,0),e.arc(0,0,n,0,uh)}},oI={draw(e,t){const n=Zr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},fO=Zr(1/3),sI=fO*2,lI={draw(e,t){const n=Zr(t/sI),r=n*fO;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},cI={draw(e,t){const n=Zr(t),r=-n/2;e.rect(r,r,n,n)}},uI=.8908130915292852,dO=Cd(Ed/10)/Cd(7*Ed/10),fI=Cd(uh/10)*dO,dI=-aO(uh/10)*dO,hI={draw(e,t){const n=Zr(t*uI),r=fI*n,i=dI*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const c=uh*s/5,u=aO(c),d=Cd(c);e.lineTo(d*n,-u*n),e.lineTo(u*r-d*i,d*r+u*i)}e.closePath()}},bg=Zr(3),pI={draw(e,t){const n=-Zr(t/(bg*3));e.moveTo(0,n*2),e.lineTo(-bg*n,-n),e.lineTo(bg*n,-n),e.closePath()}},Or=-.5,_r=Zr(3)/2,l0=1/Zr(12),mI=(l0/2+1)*3,gI={draw(e,t){const n=Zr(t/mI),r=n/2,i=n*l0,s=r,c=n*l0+n,u=-s,d=c;e.moveTo(r,i),e.lineTo(s,c),e.lineTo(u,d),e.lineTo(Or*r-_r*i,_r*r+Or*i),e.lineTo(Or*s-_r*c,_r*s+Or*c),e.lineTo(Or*u-_r*d,_r*u+Or*d),e.lineTo(Or*r+_r*i,Or*i-_r*r),e.lineTo(Or*s+_r*c,Or*c-_r*s),e.lineTo(Or*u+_r*d,Or*d-_r*u),e.closePath()}};function yI(e,t){let n=null,r=hv(i);e=typeof e=="function"?e:vt(e||mv),t=typeof t=="function"?t:vt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:vt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:vt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function wd(){}function Od(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function hO(e){this._context=e}hO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Od(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Od(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vI(e){return new hO(e)}function pO(e){this._context=e}pO.prototype={areaStart:wd,areaEnd:wd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Od(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bI(e){return new pO(e)}function mO(e){this._context=e}mO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Od(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xI(e){return new mO(e)}function gO(e){this._context=e}gO.prototype={areaStart:wd,areaEnd:wd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SI(e){return new gO(e)}function VA(e){return e<0?-1:1}function XA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),c=(n-e._y1)/(i||r<0&&-0),u=(s*i+c*r)/(r+i);return(VA(s)+VA(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(u))||0}function WA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function xg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,c=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,c-u*n,s,c)}function _d(e){this._context=e}_d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xg(this,this._t0,WA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xg(this,WA(this,n=XA(this,e,t)),n);break;default:xg(this,this._t0,n=XA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function yO(e){this._context=new vO(e)}(yO.prototype=Object.create(_d.prototype)).point=function(e,t){_d.prototype.point.call(this,t,e)};function vO(e){this._context=e}vO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function AI(e){return new _d(e)}function PI(e){return new yO(e)}function bO(e){this._context=e}bO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=QA(e),i=QA(t),s=0,c=1;c<n;++s,++c)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[c],t[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function QA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),c=new Array(n);for(i[0]=0,s[0]=2,c[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,c[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,c[t]-=r*c[t-1];for(i[n-1]=c[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(c[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function CI(e){return new bO(e)}function dh(e,t){this._context=e,this._t=t}dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function EI(e){return new dh(e,.5)}function wI(e){return new dh(e,0)}function OI(e){return new dh(e,1)}function el(e,t){if((c=e.length)>1)for(var n=1,r,i,s=e[t[0]],c,u=s.length;n<c;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function c0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function _I(e,t){return e[t]}function TI(e){const t=[];return t.key=e,t}function DI(){var e=vt([]),t=c0,n=el,r=_I;function i(s){var c=Array.from(e.apply(this,arguments),TI),u,d=c.length,p=-1,h;for(const m of s)for(u=0,++p;u<d;++u)(c[u][p]=[0,+r(m,c[u].key,p,s)]).data=m;for(u=0,h=pv(t(c));u<d;++u)c[h[u]].index=u;return n(c,h),c}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:vt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:vt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?c0:typeof s=="function"?s:vt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??el,i):n},i}function kI(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,c;i<s;++i){for(c=n=0;n<r;++n)c+=e[n][i][1]||0;if(c)for(n=0;n<r;++n)e[n][i][1]/=c}el(e,t)}}function NI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var c=0,u=0;c<i;++c)u+=e[c][n][1]||0;r[n][1]+=r[n][0]=-u/2}el(e,t)}}function MI(e,t){if(!(!((c=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,c;r<s;++r){for(var u=0,d=0,p=0;u<c;++u){for(var h=e[t[u]],m=h[r][1]||0,y=h[r-1][1]||0,x=(m-y)/2,S=0;S<u;++S){var P=e[t[S]],C=P[r][1]||0,w=P[r-1][1]||0;x+=C-w}d+=m,p+=x*m}i[r-1][1]+=i[r-1][0]=n,d&&(n-=p/d)}i[r-1][1]+=i[r-1][0]=n,el(e,t)}}var jI=["type","size","sizeType"];function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u0.apply(null,arguments)}function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(r){RI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RI(e,t,n){return(t=II(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function II(e){var t=LI(e,"string");return typeof t=="symbol"?t:t+""}function LI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $I(e,t){if(e==null)return{};var n,r,i=BI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var xO={symbolCircle:mv,symbolCross:oI,symbolDiamond:lI,symbolSquare:cI,symbolStar:hI,symbolTriangle:pI,symbolWye:gI},UI=Math.PI/180,zI=e=>{var t="symbol".concat(ou(e));return xO[t]||mv},GI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*UI;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},HI=(e,t)=>{xO["symbol".concat(ou(e))]=t},gv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=$I(e,jI),s=JA(JA({},i),{},{type:t,size:n,sizeType:r}),c="circle";typeof t=="string"&&(c=t);var u=()=>{var y=zI(c),x=yI().type(y).size(GI(n,r,c));return x()},{className:d,cx:p,cy:h}=s,m=Wt(s,!0);return p===+p&&h===+h&&n===+n?A.createElement("path",u0({},m,{className:st("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(h,")"),d:u()})):null};gv.registerSymbol=HI;function f0(){return f0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f0.apply(null,arguments)}function eP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(n),!0).forEach(function(r){yv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yv(e,t,n){return(t=YI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YI(e){var t=FI(e,"string");return typeof t=="symbol"?t:t+""}function FI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tr=32;class vv extends A.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Tr/2,s=Tr/6,c=Tr/3,u=t.inactive?r:t.color,d=n??t.type;if(d==="none")return null;if(d==="plainline")return A.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Tr,y2:i,className:"recharts-legend-icon"});if(d==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Tr,"M").concat(2*c,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return A.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Tr/8,"h").concat(Tr,"v").concat(Tr*3/4,"h").concat(-Tr,"z"),className:"recharts-legend-icon"});if(A.isValidElement(t.legendIcon)){var p=qI({},t);return delete p.legendIcon,A.cloneElement(t.legendIcon,p)}return A.createElement(gv,{fill:u,cx:i,cy:i,size:Tr,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:c}=this.props,u={x:0,y:0,width:Tr,height:Tr},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,m)=>{var y=h.formatter||i,x=st({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:h.inactive});if(h.type==="none")return null;var S=h.inactive?s:h.color,P=y?y(h.value,h,m):h.value;return A.createElement("li",f0({className:x,style:d,key:"legend-item-".concat(m)},su(this.props,h,m)),A.createElement(dv,{width:n,height:n,viewBox:u,style:p,"aria-label":"".concat(P," legend icon")},this.renderIcon(h,c)),A.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},P))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}yv(vv,"displayName","Legend");yv(vv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Sg={},Ag={},tP;function KI(){return tP||(tP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const c=n[s],u=r(c);i.has(u)||i.set(u,c)}return Array.from(i.values())}e.uniqBy=t})(Ag)),Ag}var Pg={},nP;function SO(){return nP||(nP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Pg)),Pg}var Cg={},Eg={},wg={},rP;function VI(){return rP||(rP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(wg)),wg}var aP;function bv(){return aP||(aP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VI();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Eg)),Eg}var Og={},iP;function XI(){return iP||(iP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Og)),Og}var oP;function WI(){return oP||(oP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bv(),n=XI();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(Cg)),Cg}var _g={},Tg={},sP;function QI(){return sP||(sP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cv();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Tg)),Tg}var Dg={},kg={},Ng={},Mg={},lP;function AO(){return lP||(lP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Mg)),Mg}var jg={},cP;function PO(){return cP||(cP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(jg)),jg}var Rg={},uP;function CO(){return uP||(uP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Rg)),Rg}var fP;function ZI(){return fP||(fP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xv(),n=AO(),r=PO(),i=CO();function s(m,y,x){return typeof x!="function"?t.isMatch(m,y):c(m,y,function S(P,C,w,O,_,M){const k=x(P,C,w,O,_,M);return k!==void 0?!!k:c(P,C,S,M)},new Map)}function c(m,y,x,S){if(y===m)return!0;switch(typeof y){case"object":return u(m,y,x,S);case"function":return Object.keys(y).length>0?c(m,{...y},x,S):i.eq(m,y);default:return n.isObject(m)?typeof y=="string"?y==="":!0:i.eq(m,y)}}function u(m,y,x,S){if(y==null)return!0;if(Array.isArray(y))return p(m,y,x,S);if(y instanceof Map)return d(m,y,x,S);if(y instanceof Set)return h(m,y,x,S);const P=Object.keys(y);if(m==null)return P.length===0;if(P.length===0)return!0;if(S&&S.has(y))return S.get(y)===m;S&&S.set(y,m);try{for(let C=0;C<P.length;C++){const w=P[C];if(!r.isPrimitive(m)&&!(w in m)||y[w]===void 0&&m[w]!==void 0||y[w]===null&&m[w]!==null||!x(m[w],y[w],w,m,y,S))return!1}return!0}finally{S&&S.delete(y)}}function d(m,y,x,S){if(y.size===0)return!0;if(!(m instanceof Map))return!1;for(const[P,C]of y.entries()){const w=m.get(P);if(x(w,C,P,m,y,S)===!1)return!1}return!0}function p(m,y,x,S){if(y.length===0)return!0;if(!Array.isArray(m))return!1;const P=new Set;for(let C=0;C<y.length;C++){const w=y[C];let O=!1;for(let _=0;_<m.length;_++){if(P.has(_))continue;const M=m[_];let k=!1;if(x(M,w,C,m,y,S)&&(k=!0),k){P.add(_),O=!0;break}}if(!O)return!1}return!0}function h(m,y,x,S){return y.size===0?!0:m instanceof Set?p([...m],[...y],x,S):!1}e.isMatchWith=s,e.isSetMatch=h})(Ng)),Ng}var dP;function xv(){return dP||(dP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(kg)),kg}var Ig={},Lg={},$g={},hP;function JI(){return hP||(hP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})($g)),$g}var Bg={},pP;function EO(){return pP||(pP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Bg)),Bg}var Ug={},mP;function wO(){return mP||(mP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",u="[object Date]",d="[object Map]",p="[object Set]",h="[object Array]",m="[object Function]",y="[object ArrayBuffer]",x="[object Object]",S="[object Error]",P="[object DataView]",C="[object Uint8Array]",w="[object Uint8ClampedArray]",O="[object Uint16Array]",_="[object Uint32Array]",M="[object BigUint64Array]",k="[object Int8Array]",D="[object Int16Array]",L="[object Int32Array]",$="[object BigInt64Array]",Z="[object Float32Array]",ae="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=h,e.bigInt64ArrayTag=$,e.bigUint64ArrayTag=M,e.booleanTag=i,e.dataViewTag=P,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=Z,e.float64ArrayTag=ae,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=L,e.int8ArrayTag=k,e.mapTag=d,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=p,e.stringTag=n,e.symbolTag=c,e.uint16ArrayTag=O,e.uint32ArrayTag=_,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=w})(Ug)),Ug}var zg={},gP;function e4(){return gP||(gP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(zg)),zg}var yP;function OO(){return yP||(yP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JI(),n=EO(),r=wO(),i=PO(),s=e4();function c(h,m){return u(h,void 0,h,new Map,m)}function u(h,m,y,x=new Map,S=void 0){const P=S?.(h,m,y,x);if(P!==void 0)return P;if(i.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const C=new Array(h.length);x.set(h,C);for(let w=0;w<h.length;w++)C[w]=u(h[w],w,y,x,S);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;x.set(h,C);for(const[w,O]of h)C.set(w,u(O,w,y,x,S));return C}if(h instanceof Set){const C=new Set;x.set(h,C);for(const w of h)C.add(u(w,void 0,y,x,S));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,C);for(let w=0;w<h.length;w++)C[w]=u(h[w],w,y,x,S);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,C),d(C,h,y,x,S),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return x.set(h,C),d(C,h,y,x,S),C}if(h instanceof Blob){const C=new Blob([h],{type:h.type});return x.set(h,C),d(C,h,y,x,S),C}if(h instanceof Error){const C=new h.constructor;return x.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,d(C,h,y,x,S),C}if(typeof h=="object"&&p(h)){const C=Object.create(Object.getPrototypeOf(h));return x.set(h,C),d(C,h,y,x,S),C}return h}function d(h,m,y=h,x,S){const P=[...Object.keys(m),...t.getSymbols(m)];for(let C=0;C<P.length;C++){const w=P[C],O=Object.getOwnPropertyDescriptor(h,w);(O==null||O.writable)&&(h[w]=u(m[w],w,y,x,S))}}function p(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=u,e.copyProperties=d})(Lg)),Lg}var vP;function t4(){return vP||(vP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OO();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Ig)),Ig}var bP;function n4(){return bP||(bP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xv(),n=t4();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Dg)),Dg}var Gg={},Hg={},qg={},xP;function r4(){return xP||(xP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OO(),n=wO();function r(i,s){return t.cloneDeepWith(i,(c,u,d,p)=>{const h=s?.(c,u,d,p);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(qg)),qg}var SP;function a4(){return SP||(SP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r4();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Hg)),Hg}var Yg={},Fg={},AP;function _O(){return AP||(AP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Fg)),Fg}var Kg={},PP;function i4(){return PP||(PP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EO();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Kg)),Kg}var CP;function o4(){return CP||(CP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q2(),n=_O(),r=i4(),i=lv();function s(c,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&c?.[u]==null?d=i.toPath(u):d=[u],d.length===0)return!1;let p=c;for(let h=0;h<d.length;h++){const m=d[h];if((p==null||!Object.hasOwn(p,m))&&!((Array.isArray(p)||r.isArguments(p))&&n.isIndex(m)&&m<p.length))return!1;p=p[m]}return!0}e.has=s})(Yg)),Yg}var EP;function s4(){return EP||(EP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xv(),n=Z2(),r=a4(),i=cv(),s=o4();function c(u,d){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=r.cloneDeep(d),function(p){const h=i.get(p,u);return h===void 0?s.has(p,u):d===void 0?h===void 0:t.isMatch(h,d)}}e.matchesProperty=c})(Gg)),Gg}var wP;function l4(){return wP||(wP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SO(),n=QI(),r=n4(),i=s4();function s(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):r.matches(c);case"string":case"symbol":case"number":return n.property(c)}}e.iteratee=s})(_g)),_g}var OP;function c4(){return OP||(OP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KI(),n=SO(),r=WI(),i=l4();function s(c,u=n.identity){return r.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(u)):[]}e.uniqBy=s})(Sg)),Sg}var Vg,_P;function u4(){return _P||(_P=1,Vg=c4().uniqBy),Vg}var f4=u4();const TP=Qr(f4);function TO(e,t,n){return t===!0?TP(e,n):typeof t=="function"?TP(e,t):e}var Xg={exports:{}},Wg={},Qg={exports:{}},Zg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DP;function d4(){if(DP)return Zg;DP=1;var e=fl();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function u(m,y){var x=y(),S=r({inst:{value:x,getSnapshot:y}}),P=S[0].inst,C=S[1];return s(function(){P.value=x,P.getSnapshot=y,d(P)&&C({inst:P})},[m,x,y]),i(function(){return d(P)&&C({inst:P}),m(function(){d(P)&&C({inst:P})})},[m]),c(x),x}function d(m){var y=m.getSnapshot;m=m.value;try{var x=y();return!n(m,x)}catch{return!0}}function p(m,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return Zg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Zg}var kP;function h4(){return kP||(kP=1,Qg.exports=d4()),Qg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP;function p4(){if(NP)return Wg;NP=1;var e=fl(),t=h4();function n(p,h){return p===h&&(p!==0||1/p===1/h)||p!==p&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Wg.useSyncExternalStoreWithSelector=function(p,h,m,y,x){var S=s(null);if(S.current===null){var P={hasValue:!1,value:null};S.current=P}else P=S.current;S=u(function(){function w(D){if(!O){if(O=!0,_=D,D=y(D),x!==void 0&&P.hasValue){var L=P.value;if(x(L,D))return M=L}return M=D}if(L=M,r(_,D))return L;var $=y(D);return x!==void 0&&x(L,$)?(_=D,L):(_=D,M=$)}var O=!1,_,M,k=m===void 0?null:m;return[function(){return w(h())},k===null?void 0:function(){return w(k())}]},[h,m,y,x]);var C=i(p,S[0],S[1]);return c(function(){P.hasValue=!0,P.value=C},[C]),d(C),C},Wg}var MP;function m4(){return MP||(MP=1,Xg.exports=p4()),Xg.exports}var g4=m4(),Sv=A.createContext(null),y4=e=>e,jt=()=>{var e=A.useContext(Sv);return e?e.store.dispatch:y4},gd=()=>{},v4=()=>gd,b4=(e,t)=>e===t;function _e(e){var t=A.useContext(Sv);return g4.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:v4,t?t.store.getState:gd,t?t.store.getState:gd,t?e:gd,b4)}function x4(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function S4(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function A4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var jP=e=>Array.isArray(e)?e:[e];function P4(e){const t=Array.isArray(e[0])?e[0]:e;return A4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function C4(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var E4=class{constructor(e){this.value=e}deref(){return this.value}},w4=typeof WeakRef<"u"?WeakRef:E4,O4=0,RP=1;function Xf(){return{s:O4,v:void 0,o:null,p:null}}function DO(e,t={}){let n=Xf();const{resultEqualityCheck:r}=t;let i,s=0;function c(){let u=n;const{length:d}=arguments;for(let m=0,y=d;m<y;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const P=S.get(x);P===void 0?(u=Xf(),S.set(x,u)):u=P}else{let S=u.p;S===null&&(u.p=S=new Map);const P=S.get(x);P===void 0?(u=Xf(),S.set(x,u)):u=P}}const p=u;let h;if(u.s===RP)h=u.v;else if(h=e.apply(null,arguments),s++,r){const m=i?.deref?.()??i;m!=null&&r(m,h)&&(h=m,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new w4(h):h}return p.s=RP,p.v=h,h}return c.clearCache=()=>{n=Xf(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function _4(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,c=0,u,d={},p=i.pop();typeof p=="object"&&(d=p,p=i.pop()),x4(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const h={...n,...d},{memoize:m,memoizeOptions:y=[],argsMemoize:x=DO,argsMemoizeOptions:S=[]}=h,P=jP(y),C=jP(S),w=P4(i),O=m(function(){return s++,p.apply(null,arguments)},...P),_=x(function(){c++;const k=C4(w,arguments);return u=O.apply(null,k),u},...C);return Object.assign(_,{resultFunc:p,memoizedResultFunc:O,dependencies:w,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var te=_4(DO),T4=Object.assign((e,t=te)=>{S4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((c,u,d)=>(c[n[d]]=u,c),{}))},{withTypes:()=>T4}),Jg={},ey={},ty={},IP;function D4(){return IP||(IP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const c=t(r),u=t(i);if(c===u&&c===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-c:c-u}return 0};e.compareValues=n})(ty)),ty}var ny={},ry={},LP;function kO(){return LP||(LP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(ry)),ry}var $P;function k4(){return $P||($P=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||c!=null&&Object.hasOwn(c,s)}e.isKey=i})(ny)),ny}var BP;function N4(){return BP||(BP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D4(),n=k4(),r=lv();function i(s,c,u,d){if(s==null)return[];u=d?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const p=(x,S)=>{let P=x;for(let C=0;C<S.length&&P!=null;++C)P=P[S[C]];return P},h=(x,S)=>S==null||x==null?S:typeof x=="object"&&"key"in x?Object.hasOwn(S,x.key)?S[x.key]:p(S,x.path):typeof x=="function"?x(S):Array.isArray(x)?p(S,x):typeof S=="object"?S[x]:S,m=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:m.map(S=>h(S,x))})).slice().sort((x,S)=>{for(let P=0;P<m.length;P++){const C=t.compareValues(x.criteria[P],S.criteria[P],u[P]);if(C!==0)return C}return 0}).map(x=>x.original)}e.orderBy=i})(ey)),ey}var ay={},UP;function M4(){return UP||(UP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),c=(u,d)=>{for(let p=0;p<u.length;p++){const h=u[p];Array.isArray(h)&&d<s?c(h,d+1):i.push(h)}};return c(n,0),i}e.flatten=t})(ay)),ay}var iy={},zP;function NO(){return zP||(zP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_O(),n=bv(),r=AO(),i=CO();function s(c,u,d){return r.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?i.eq(d[u],c):!1}e.isIterateeCall=s})(iy)),iy}var GP;function j4(){return GP||(GP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N4(),n=M4(),r=NO();function i(s,...c){const u=c.length;return u>1&&r.isIterateeCall(s,c[0],c[1])?c=[]:u>2&&r.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(s,n.flatten(c),["asc"])}e.sortBy=i})(Jg)),Jg}var oy,HP;function R4(){return HP||(HP=1,oy=j4().sortBy),oy}var I4=R4();const hh=Qr(I4);var MO=e=>e.legend.settings,L4=e=>e.legend.size,$4=e=>e.legend.payload,B4=te([$4,MO],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?hh(r,n):r});function U4(){return _e(B4)}var Wf=1;function jO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-t.height)>Wf||Math.abs(c.left-t.left)>Wf||Math.abs(c.top-t.top)>Wf||Math.abs(c.width-t.width)>Wf)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Cn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var z4=typeof Symbol=="function"&&Symbol.observable||"@@observable",qP=z4,sy=()=>Math.random().toString(36).substring(7).split("").join("."),G4={INIT:`@@redux/INIT${sy()}`,REPLACE:`@@redux/REPLACE${sy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sy()}`},Td=G4;function Av(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function RO(e,t,n){if(typeof e!="function")throw new Error(Cn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Cn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Cn(1));return n(RO)(e,t)}let r=e,i=t,s=new Map,c=s,u=0,d=!1;function p(){c===s&&(c=new Map,s.forEach((C,w)=>{c.set(w,C)}))}function h(){if(d)throw new Error(Cn(3));return i}function m(C){if(typeof C!="function")throw new Error(Cn(4));if(d)throw new Error(Cn(5));let w=!0;p();const O=u++;return c.set(O,C),function(){if(w){if(d)throw new Error(Cn(6));w=!1,p(),c.delete(O),s=null}}}function y(C){if(!Av(C))throw new Error(Cn(7));if(typeof C.type>"u")throw new Error(Cn(8));if(typeof C.type!="string")throw new Error(Cn(17));if(d)throw new Error(Cn(9));try{d=!0,i=r(i,C)}finally{d=!1}return(s=c).forEach(O=>{O()}),C}function x(C){if(typeof C!="function")throw new Error(Cn(10));r=C,y({type:Td.REPLACE})}function S(){const C=m;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Cn(11));function O(){const M=w;M.next&&M.next(h())}return O(),{unsubscribe:C(O)}},[qP](){return this}}}return y({type:Td.INIT}),{dispatch:y,subscribe:m,getState:h,replaceReducer:x,[qP]:S}}function H4(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Td.INIT})>"u")throw new Error(Cn(12));if(typeof n(void 0,{type:Td.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Cn(13))})}function IO(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const c=t[s];typeof e[c]=="function"&&(n[c]=e[c])}const r=Object.keys(n);let i;try{H4(n)}catch(s){i=s}return function(c={},u){if(i)throw i;let d=!1;const p={};for(let h=0;h<r.length;h++){const m=r[h],y=n[m],x=c[m],S=y(x,u);if(typeof S>"u")throw u&&u.type,new Error(Cn(14));p[m]=S,d=d||S!==x}return d=d||r.length!==Object.keys(c).length,d?p:c}}function Dd(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function q4(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Cn(15))};const c={getState:i.getState,dispatch:(d,...p)=>s(d,...p)},u=e.map(d=>d(c));return s=Dd(...u)(i.dispatch),{...i,dispatch:s}}}function LO(e){return Av(e)&&"type"in e&&typeof e.type=="string"}var $O=Symbol.for("immer-nothing"),YP=Symbol.for("immer-draftable"),pr=Symbol.for("immer-state");function Xr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var tl=Object.getPrototypeOf;function Uo(e){return!!e&&!!e[pr]}function ei(e){return e?BO(e)||Array.isArray(e)||!!e[YP]||!!e.constructor?.[YP]||lu(e)||mh(e):!1}var Y4=Object.prototype.constructor.toString();function BO(e){if(!e||typeof e!="object")return!1;const t=tl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Y4}function kd(e,t){ph(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function ph(e){const t=e[pr];return t?t.type_:Array.isArray(e)?1:lu(e)?2:mh(e)?3:0}function d0(e,t){return ph(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function UO(e,t,n){const r=ph(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function F4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function lu(e){return e instanceof Map}function mh(e){return e instanceof Set}function _o(e){return e.copy_||e.base_}function h0(e,t){if(lu(e))return new Map(e);if(mh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=BO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[pr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const c=i[s],u=r[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[c]})}return Object.create(tl(e),r)}else{const r=tl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Pv(e,t=!1){return gh(e)||Uo(e)||!ei(e)||(ph(e)>1&&Object.defineProperties(e,{set:{value:Qf},add:{value:Qf},clear:{value:Qf},delete:{value:Qf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Pv(n,!0))),e}function Qf(){Xr(2)}function gh(e){return Object.isFrozen(e)}var K4={};function zo(e){const t=K4[e];return t||Xr(0,e),t}var Qc;function zO(){return Qc}function V4(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function FP(e,t){t&&(zo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function p0(e){m0(e),e.drafts_.forEach(X4),e.drafts_=null}function m0(e){e===Qc&&(Qc=e.parent_)}function KP(e){return Qc=V4(Qc,e)}function X4(e){const t=e[pr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function VP(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[pr].modified_&&(p0(t),Xr(4)),ei(e)&&(e=Nd(t,e),t.parent_||Md(t,e)),t.patches_&&zo("Patches").generateReplacementPatches_(n[pr].base_,e,t.patches_,t.inversePatches_)):e=Nd(t,n,[]),p0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$O?e:void 0}function Nd(e,t,n){if(gh(t))return t;const r=t[pr];if(!r)return kd(t,(i,s)=>XP(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Md(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,c=!1;r.type_===3&&(s=new Set(i),i.clear(),c=!0),kd(s,(u,d)=>XP(e,r,i,u,d,n,c)),Md(e,i,!1),n&&e.patches_&&zo("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function XP(e,t,n,r,i,s,c){if(Uo(i)){const u=s&&t&&t.type_!==3&&!d0(t.assigned_,r)?s.concat(r):void 0,d=Nd(e,i,u);if(UO(n,r,d),Uo(d))e.canAutoFreeze_=!1;else return}else c&&n.add(i);if(ei(i)&&!gh(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Nd(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(lu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Md(e,i)}}function Md(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Pv(t,n)}function W4(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:zO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Cv;n&&(i=[r],s=Zc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=c,u}var Cv={get(e,t){if(t===pr)return e;const n=_o(e);if(!d0(n,t))return Q4(e,n,t);const r=n[t];return e.finalized_||!ei(r)?r:r===ly(e.base_,t)?(cy(e),e.copy_[t]=y0(r,e)):r},has(e,t){return t in _o(e)},ownKeys(e){return Reflect.ownKeys(_o(e))},set(e,t,n){const r=GO(_o(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=ly(_o(e),t),s=i?.[pr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(F4(n,i)&&(n!==void 0||d0(e.base_,t)))return!0;cy(e),g0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ly(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,cy(e),g0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=_o(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Xr(11)},getPrototypeOf(e){return tl(e.base_)},setPrototypeOf(){Xr(12)}},Zc={};kd(Cv,(e,t)=>{Zc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Zc.deleteProperty=function(e,t){return Zc.set.call(this,e,t,void 0)};Zc.set=function(e,t,n){return Cv.set.call(this,e[0],t,n,e[0])};function ly(e,t){const n=e[pr];return(n?_o(n):e)[t]}function Q4(e,t,n){const r=GO(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function GO(e,t){if(!(t in e))return;let n=tl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=tl(n)}}function g0(e){e.modified_||(e.modified_=!0,e.parent_&&g0(e.parent_))}function cy(e){e.copy_||(e.copy_=h0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Z4=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const c=this;return function(d=s,...p){return c.produce(d,h=>n.call(this,h,...p))}}typeof n!="function"&&Xr(6),r!==void 0&&typeof r!="function"&&Xr(7);let i;if(ei(t)){const s=KP(this),c=y0(t,void 0);let u=!0;try{i=n(c),u=!1}finally{u?p0(s):m0(s)}return FP(s,r),VP(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===$O&&(i=void 0),this.autoFreeze_&&Pv(i,!0),r){const s=[],c=[];zo("Patches").generateReplacementPatches_(t,i,s,c),r(s,c)}return i}else Xr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,d=>t(d,...u));let r,i;return[this.produce(t,n,(c,u)=>{r=c,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ei(e)||Xr(8),Uo(e)&&(e=Za(e));const t=KP(this),n=y0(e,void 0);return n[pr].isManual_=!0,m0(t),n}finishDraft(e,t){const n=e&&e[pr];(!n||!n.isManual_)&&Xr(9);const{scope_:r}=n;return FP(r,t),VP(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=zo("Patches").applyPatches_;return Uo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function y0(e,t){const n=lu(e)?zo("MapSet").proxyMap_(e,t):mh(e)?zo("MapSet").proxySet_(e,t):W4(e,t);return(t?t.scope_:zO()).drafts_.push(n),n}function Za(e){return Uo(e)||Xr(10,e),HO(e)}function HO(e){if(!ei(e)||gh(e))return e;const t=e[pr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=h0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=h0(e,!0);return kd(n,(r,i)=>{UO(n,r,HO(i))}),t&&(t.finalized_=!1),n}var J4=new Z4,qO=J4.produce;function YO(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var e3=YO(),t3=YO,n3=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Dd:Dd.apply(null,arguments)};function jr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(dr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>LO(r)&&r.type===e,n}var FO=class Lc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Lc.prototype)}static get[Symbol.species](){return Lc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Lc(...t[0].concat(this)):new Lc(...t.concat(this))}};function WP(e){return ei(e)?qO(e,()=>{}):e}function Zf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function r3(e){return typeof e=="boolean"}var a3=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let c=new FO;return n&&(r3(n)?c.push(e3):c.push(t3(n.extraArgument))),c},i3="RTK_autoBatch",QP=e=>t=>{setTimeout(t,e)},o3=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,c=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:QP(10):e.type==="callback"?e.queueNotification:QP(e.timeout),p=()=>{c=!1,s&&(s=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),y=r.subscribe(m);return u.add(h),()=>{y(),u.delete(h)}},dispatch(h){try{return i=!h?.meta?.[i3],s=!i,s&&(c||(c=!0,d(p))),r.dispatch(h)}finally{i=!0}}})},s3=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new FO(e);return r&&i.push(o3(typeof r=="object"?r:void 0)),i};function l3(e){const t=a3(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(Av(n))u=IO(n);else throw new Error(dr(1));let d;typeof r=="function"?d=r(t):d=t();let p=Dd;i&&(p=n3({trace:!1,...typeof i=="object"&&i}));const h=q4(...d),m=s3(h);let y=typeof c=="function"?c(m):m();const x=p(...y);return RO(u,s,x)}function KO(e){const t={},n=[];let r;const i={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(dr(28));if(u in t)throw new Error(dr(29));return t[u]=c,i},addAsyncThunk(s,c){return c.pending&&(t[s.pending.type]=c.pending),c.rejected&&(t[s.rejected.type]=c.rejected),c.fulfilled&&(t[s.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return n.push({matcher:s,reducer:c}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function c3(e){return typeof e=="function"}function u3(e,t){let[n,r,i]=KO(t),s;if(c3(e))s=()=>WP(e());else{const u=WP(e);s=()=>u}function c(u=s(),d){let p=[n[d.type],...r.filter(({matcher:h})=>h(d)).map(({reducer:h})=>h)];return p.filter(h=>!!h).length===0&&(p=[i]),p.reduce((h,m)=>{if(m)if(Uo(h)){const x=m(h,d);return x===void 0?h:x}else{if(ei(h))return qO(h,y=>m(y,d));{const y=m(h,d);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},u)}return c.getInitialState=s,c}var f3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",d3=(e=21)=>{let t="",n=e;for(;n--;)t+=f3[Math.random()*64|0];return t},h3=Symbol.for("rtk-slice-createasyncthunk");function p3(e,t){return`${e}/${t}`}function m3({creators:e}={}){const t=e?.asyncThunk?.[h3];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(dr(11));const c=(typeof r.reducers=="function"?r.reducers(y3()):r.reducers)||{},u=Object.keys(c),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(_,M){const k=typeof _=="string"?_:_.type;if(!k)throw new Error(dr(12));if(k in d.sliceCaseReducersByType)throw new Error(dr(13));return d.sliceCaseReducersByType[k]=M,p},addMatcher(_,M){return d.sliceMatchers.push({matcher:_,reducer:M}),p},exposeAction(_,M){return d.actionCreators[_]=M,p},exposeCaseReducer(_,M){return d.sliceCaseReducersByName[_]=M,p}};u.forEach(_=>{const M=c[_],k={reducerName:_,type:p3(i,_),createNotation:typeof r.reducers=="function"};b3(M)?S3(k,M,p,t):v3(k,M,p)});function h(){const[_={},M=[],k=void 0]=typeof r.extraReducers=="function"?KO(r.extraReducers):[r.extraReducers],D={..._,...d.sliceCaseReducersByType};return u3(r.initialState,L=>{for(let $ in D)L.addCase($,D[$]);for(let $ of d.sliceMatchers)L.addMatcher($.matcher,$.reducer);for(let $ of M)L.addMatcher($.matcher,$.reducer);k&&L.addDefaultCase(k)})}const m=_=>_,y=new Map,x=new WeakMap;let S;function P(_,M){return S||(S=h()),S(_,M)}function C(){return S||(S=h()),S.getInitialState()}function w(_,M=!1){function k(L){let $=L[_];return typeof $>"u"&&M&&($=Zf(x,k,C)),$}function D(L=m){const $=Zf(y,M,()=>new WeakMap);return Zf($,L,()=>{const Z={};for(const[ae,H]of Object.entries(r.selectors??{}))Z[ae]=g3(H,L,()=>Zf(x,L,C),M);return Z})}return{reducerPath:_,getSelectors:D,get selectors(){return D(k)},selectSlice:k}}const O={name:i,reducer:P,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:C,...w(s),injectInto(_,{reducerPath:M,...k}={}){const D=M??s;return _.inject({reducerPath:D,reducer:P},k),{...O,...w(D,!0)}}};return O}}function g3(e,t,n,r){function i(s,...c){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...c)}return i.unwrapped=e,i}var gr=m3();function y3(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function v3({type:e,reducerName:t,createNotation:n},r,i){let s,c;if("reducer"in r){if(n&&!x3(r))throw new Error(dr(17));s=r.reducer,c=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,c?jr(e,c):jr(e))}function b3(e){return e._reducerDefinitionType==="asyncThunk"}function x3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function S3({type:e,reducerName:t},n,r,i){if(!i)throw new Error(dr(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:d,settled:p,options:h}=n,m=i(e,s,h);r.exposeAction(t,m),c&&r.addCase(m.fulfilled,c),u&&r.addCase(m.pending,u),d&&r.addCase(m.rejected,d),p&&r.addMatcher(m.settled,p),r.exposeCaseReducer(t,{fulfilled:c||Jf,pending:u||Jf,rejected:d||Jf,settled:p||Jf})}function Jf(){}var A3="task",VO="listener",XO="completed",Ev="cancelled",P3=`task-${Ev}`,C3=`task-${XO}`,v0=`${VO}-${Ev}`,E3=`${VO}-${XO}`,yh=class{constructor(e){this.code=e,this.message=`${A3} ${Ev} (reason: ${e})`}name="TaskAbortError";message},wv=(e,t)=>{if(typeof e!="function")throw new TypeError(dr(32))},jd=()=>{},WO=(e,t=jd)=>(e.catch(t),e),QO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ro=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Io=e=>{if(e.aborted){const{reason:t}=e;throw new yh(t)}};function ZO(e,t){let n=jd;return new Promise((r,i)=>{const s=()=>i(new yh(e.reason));if(e.aborted){s();return}n=QO(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=jd})}var w3=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof yh?"cancelled":"rejected",error:n}}finally{t?.()}},Rd=e=>t=>WO(ZO(e,t).then(n=>(Io(e),n))),JO=e=>{const t=Rd(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Zs}=Object,ZP={},vh="listenerMiddleware",O3=(e,t)=>{const n=r=>QO(e,()=>Ro(r,e.reason));return(r,i)=>{wv(r);const s=new AbortController;n(s);const c=w3(async()=>{Io(e),Io(s.signal);const u=await r({pause:Rd(s.signal),delay:JO(s.signal),signal:s.signal});return Io(s.signal),u},()=>Ro(s,C3));return i?.autoJoin&&t.push(c.catch(jd)),{result:Rd(e)(c),cancel(){Ro(s,P3)}}}},_3=(e,t)=>{const n=async(r,i)=>{Io(t);let s=()=>{};const u=[new Promise((d,p)=>{let h=e({predicate:r,effect:(m,y)=>{y.unsubscribe(),d([m,y.getState(),y.getOriginalState()])}});s=()=>{h(),p()}})];i!=null&&u.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await ZO(t,Promise.race(u));return Io(t),d}finally{s()}};return(r,i)=>WO(n(r,i))},e_=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=jr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(dr(21));return wv(s),{predicate:i,type:t,effect:s}},t_=Zs(e=>{const{type:t,predicate:n,effect:r}=e_(e);return{id:d3(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(dr(22))}}},{withTypes:()=>t_}),JP=(e,t)=>{const{type:n,effect:r,predicate:i}=e_(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},b0=e=>{e.pending.forEach(t=>{Ro(t,v0)})},T3=e=>()=>{e.forEach(b0),e.clear()},eC=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},n_=Zs(jr(`${vh}/add`),{withTypes:()=>n_}),D3=jr(`${vh}/removeAll`),r_=Zs(jr(`${vh}/remove`),{withTypes:()=>r_}),k3=(...e)=>{console.error(`${vh}/error`,...e)},cu=(e={})=>{const t=new Map,{extra:n,onError:r=k3}=e;wv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),m=>{h.unsubscribe(),m?.cancelActive&&b0(h)}),s=h=>{const m=JP(t,h)??t_(h);return i(m)};Zs(s,{withTypes:()=>s});const c=h=>{const m=JP(t,h);return m&&(m.unsubscribe(),h.cancelActive&&b0(m)),!!m};Zs(c,{withTypes:()=>c});const u=async(h,m,y,x)=>{const S=new AbortController,P=_3(s,S.signal),C=[];try{h.pending.add(S),await Promise.resolve(h.effect(m,Zs({},y,{getOriginalState:x,condition:(w,O)=>P(w,O).then(Boolean),take:P,delay:JO(S.signal),pause:Rd(S.signal),extra:n,signal:S.signal,fork:O3(S.signal,C),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((w,O,_)=>{w!==S&&(Ro(w,v0),_.delete(w))})},cancel:()=>{Ro(S,v0),h.pending.delete(S)},throwIfCancelled:()=>{Io(S.signal)}})))}catch(w){w instanceof yh||eC(r,w,{raisedBy:"effect"})}finally{await Promise.all(C),Ro(S,E3),h.pending.delete(S)}},d=T3(t);return{middleware:h=>m=>y=>{if(!LO(y))return m(y);if(n_.match(y))return s(y.payload);if(D3.match(y)){d();return}if(r_.match(y))return c(y.payload);let x=h.getState();const S=()=>{if(x===ZP)throw new Error(dr(23));return x};let P;try{if(P=m(y),t.size>0){const C=h.getState(),w=Array.from(t.values());for(const O of w){let _=!1;try{_=O.predicate(y,C,x)}catch(M){_=!1,eC(r,M,{raisedBy:"predicate"})}_&&u(O,y,h,S)}}}finally{x=ZP}return P},startListening:s,stopListening:c,clearListeners:d}};function dr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var N3={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},a_=gr({name:"chartLayout",initialState:N3,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:M3,setLayout:j3,setChartSize:R3,setScale:I3}=a_.actions,L3=a_.reducer;function tC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(n),!0).forEach(function(r){$3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $3(e,t,n){return(t=B3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B3(e){var t=U3(e,"string");return typeof t=="symbol"?t:t+""}function U3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Id=Math.PI/180,z3=e=>e*180/Math.PI,Qt=(e,t,n,r)=>({x:e+Math.cos(-Id*r)*n,y:t+Math.sin(-Id*r)*n}),i_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},G3=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},H3=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,c=G3({x:n,y:r},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var u=(n-i)/c,d=Math.acos(u);return r>s&&(d=2*Math.PI-d),{radius:c,angle:z3(d),angleInRadian:d}},q3=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},Y3=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),c=Math.min(i,s);return e+c*360},F3=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=H3({x:n,y:r},t),{innerRadius:c,outerRadius:u}=t;if(i<c||i>u||i===0)return null;var{startAngle:d,endAngle:p}=q3(t),h=s,m;if(d<=p){for(;h>p;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=p}else{for(;h>d;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=d}return m?nC(nC({},t),{},{radius:i,angle:Y3(h,t)}):null};function o_(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(r){K3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K3(e,t,n){return(t=V3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V3(e){var t=X3(e,"string");return typeof t=="symbol"?t:t+""}function X3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wt(e,t,n){return pn(e)||pn(t)?n:ba(t)?Bo(e,t,n):typeof t=="function"?t(e):n}var W3=(e,t,n,r,i)=>{var s,c=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<u;d++){var p=d>0?n[d-1].coordinate:n[u-1].coordinate,h=n[d].coordinate,m=d>=u-1?n[0].coordinate:n[d+1].coordinate,y=void 0;if(hn(h-p)!==hn(m-h)){var x=[];if(hn(m-h)===hn(i[1]-i[0])){y=m;var S=h+i[1]-i[0];x[0]=Math.min(S,(S+p)/2),x[1]=Math.max(S,(S+p)/2)}else{y=p;var P=m+i[1]-i[0];x[0]=Math.min(h,(P+h)/2),x[1]=Math.max(h,(P+h)/2)}var C=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>C[0]&&e<=C[1]||e>=x[0]&&e<=x[1]){({index:c}=n[d]);break}}else{var w=Math.min(p,m),O=Math.max(p,m);if(e>(w+h)/2&&e<=(O+h)/2){({index:c}=n[d]);break}}}else if(t){for(var _=0;_<u;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:c}=t[_]);break}}return c},Q3=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:c,layout:u}=t;if((u==="vertical"||u==="horizontal"&&c==="middle")&&s!=="center"&&De(e[s]))return kr(kr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&c!=="middle"&&De(e[c]))return kr(kr({},e),{},{[c]:e[c]+(i||0)})}return e},Vo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",s_=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,c=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||c.push(t),s||c.push(n),c},l_=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:c,realScaleType:u,isCategorical:d,categoricalDomain:p,tickCount:h,ticks:m,niceTicks:y,axisType:x}=e;if(!c)return null;var S=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,P=i==="category"&&c.bandwidth?c.bandwidth()/S:0;if(P=x==="angleAxis"&&s&&s.length>=2?hn(s[0]-s[1])*2*P:P,m||y){var C=(m||y||[]).map((w,O)=>{var _=r?r.indexOf(w):w;return{coordinate:c(_)+P,value:w,offset:P,index:O}});return C.filter(w=>!hr(w.coordinate))}return d&&p?p.map((w,O)=>({coordinate:c(w)+P,value:w,index:O,offset:P})):c.ticks&&h!=null?c.ticks(h).map((w,O)=>({coordinate:c(w)+P,value:w,offset:P,index:O})):c.domain().map((w,O)=>({coordinate:c(w)+P,value:r?r[w]:w,index:O,offset:P}))},aC=1e-4,Z3=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-aC,s=Math.max(r[0],r[1])+aC,c=e(t[0]),u=e(t[n-1]);(c<i||c>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},J3=(e,t)=>{if(!t||t.length!==2||!De(t[0])||!De(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!De(e[0])||e[0]<n)&&(i[0]=n),(!De(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},eL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,c=0;c<t;++c){var u=hr(e[c][n][1])?e[c][n][0]:e[c][n][1];u>=0?(e[c][n][0]=i,e[c][n][1]=i+u,i=e[c][n][1]):(e[c][n][0]=s,e[c][n][1]=s+u,s=e[c][n][1])}},tL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var c=hr(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=i,e[s][n][1]=i+c,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},nL={sign:eL,expand:kI,none:el,silhouette:NI,wiggle:MI,positive:tL},rL=(e,t,n)=>{var r=nL[n],i=DI().keys(t).value((s,c)=>+wt(s,c,0)).order(c0).offset(r);return i(e)};function aL(e){return e==null?void 0:String(e)}var iC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:c}=e;if(t.type==="category")return n[c]?n[c].coordinate+r:null;var u=wt(s,t.dataKey,t.scale.domain()[c]);return pn(u)?null:t.scale(u)-i/2+r},iL=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},oL=e=>{var t=e.flat(2).filter(De);return[Math.min(...t),Math.max(...t)]},sL=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],lL=(e,t,n)=>{if(e!=null)return sL(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:c}=s,u=c.reduce((d,p)=>{var h=o_(p,t,n),m=oL(h);return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},oC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ov=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=hh(t,h=>h.coordinate),s=1/0,c=1,u=i.length;c<u;c++){var d=i[c],p=i[c-1];s=Math.min((d.coordinate||0)-(p.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function lC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return kr(kr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function bh(e,t){if(e)return String(e);if(typeof t=="string")return t}function cL(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?F3({x:e,y:t},r):null}var uL=(e,t,n,r)=>{var i=t.find(p=>p&&p.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:c}=r;return kr(kr(kr({},r),Qt(r.cx,r.cy,c,s)),{},{angle:s,radius:c})}var u=i.coordinate,{angle:d}=r;return kr(kr(kr({},r),Qt(r.cx,r.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},fL=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,ii=e=>e.layout.width,oi=e=>e.layout.height,dL=e=>e.layout.scale,c_=e=>e.layout.margin,xh=te(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Sh=te(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),u_="data-recharts-item-index",f_="data-recharts-item-data-key",uu=60;function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){hL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hL(e,t,n){return(t=pL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pL(e){var t=mL(e,"string");return typeof t=="symbol"?t:t+""}function mL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gL=e=>e.brush.height;function yL(e){var t=Sh(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:uu;return n+i}return n},0)}function vL(e){var t=Sh(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:uu;return n+i}return n},0)}function bL(e){var t=xh(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function xL(e){var t=xh(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var an=te([ii,oi,c_,gL,yL,vL,bL,xL,MO,L4],(e,t,n,r,i,s,c,u,d,p)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+c,bottom:(n.bottom||0)+u},y=ed(ed({},m),h),x=y.bottom;y.bottom+=r,y=Q3(y,d,p);var S=e-y.left-y.right,P=t-y.top-y.bottom;return ed(ed({brushBottom:x},y),{},{width:Math.max(S,0),height:Math.max(P,0)})}),SL=te(an,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),_v=te(ii,oi,(e,t)=>({x:0,y:0,width:e,height:t})),AL=A.createContext(null),Ir=()=>A.useContext(AL)!=null,Ah=e=>e.brush,Ph=te([Ah,an,c_],(e,t,n)=>({height:e.height,x:De(e.x)?e.x:t.left,y:De(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:De(e.width)?e.width:t.width})),Tv=()=>{var e,t=Ir(),n=_e(SL),r=_e(Ph),i=(e=_e(Ah))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},PL={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},d_=()=>{var e;return(e=_e(an))!==null&&e!==void 0?e:PL},Dv=()=>_e(ii),kv=()=>_e(oi),CL=()=>_e(e=>e.layout.margin),et=e=>e.layout.layoutType,Nv=()=>_e(et),EL={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},h_=gr({name:"legend",initialState:EL,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Za(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:uC,setLegendSettings:wL,addLegendPayload:p_,removeLegendPayload:m_}=h_.actions,OL=h_.reducer,_L=["contextPayload"];function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x0.apply(null,arguments)}function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){Mv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mv(e,t,n){return(t=TL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TL(e){var t=DL(e,"string");return typeof t=="symbol"?t:t+""}function DL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kL(e,t){if(e==null)return{};var n,r,i=NL(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function NL(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ML(e){return e.value}function jL(e){var{contextPayload:t}=e,n=kL(e,_L),r=TO(t,e.payloadUniqBy,ML),i=nl(nl({},n),{},{payload:r});return A.isValidElement(e.content)?A.cloneElement(e.content,i):typeof e.content=="function"?A.createElement(e.content,i):A.createElement(vv,i)}function RL(e,t,n,r,i,s){var{layout:c,align:u,verticalAlign:d}=t,p,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&c==="vertical"?p={left:((r||0)-s.width)/2}:p=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?h={top:((i||0)-s.height)/2}:h=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),nl(nl({},p),h)}function IL(e){var t=jt();return A.useEffect(()=>{t(wL(e))},[t,e]),null}function LL(e){var t=jt();return A.useEffect(()=>(t(uC(e)),()=>{t(uC({width:0,height:0}))}),[t,e]),null}function $L(e){var t=U4(),n=eI(),r=CL(),{width:i,height:s,wrapperStyle:c,portal:u}=e,[d,p]=jO([t]),h=Dv(),m=kv();if(h==null||m==null)return null;var y=h-(r.left||0)-(r.right||0),x=Ch.getWidthOrHeight(e.layout,s,i,y),S=u?c:nl(nl({position:"absolute",width:x?.width||i||"auto",height:x?.height||s||"auto"},RL(c,e,r,h,m,d)),c),P=u??n;if(P==null)return null;var C=A.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:p},A.createElement(IL,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),A.createElement(LL,{width:d.width,height:d.height}),A.createElement(jL,x0({},e,x,{margin:r,chartWidth:h,chartHeight:m,contextPayload:t})));return nO.createPortal(C,P)}class Ch extends A.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&De(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return A.createElement($L,this.props)}}Mv(Ch,"displayName","Legend");Mv(Ch,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function S0(){return S0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S0.apply(null,arguments)}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(r){BL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BL(e,t,n){return(t=UL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UL(e){var t=zL(e,"string");return typeof t=="symbol"?t:t+""}function zL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GL(e){return Array.isArray(e)&&ba(e[0])&&ba(e[1])?e.join(" ~ "):e}var HL=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:c,itemSorter:u,wrapperClassName:d,labelClassName:p,label:h,labelFormatter:m,accessibilityLayer:y=!1}=e,x=()=>{if(s&&s.length){var k={padding:0,margin:0},D=(u?hh(s,u):s).map((L,$)=>{if(L.type==="none")return null;var Z=L.formatter||c||GL,{value:ae,name:H}=L,re=ae,me=H;if(Z){var de=Z(ae,H,L,$,s);if(Array.isArray(de))[re,me]=de;else if(de!=null)re=de;else return null}var ve=uy({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:ve},ba(me)?A.createElement("span",{className:"recharts-tooltip-item-name"},me):null,ba(me)?A.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,A.createElement("span",{className:"recharts-tooltip-item-value"},re),A.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:k},D)}return null},S=uy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),P=uy({margin:0},i),C=!pn(h),w=C?h:"",O=st("recharts-default-tooltip",d),_=st("recharts-tooltip-label",p);C&&m&&s!==void 0&&s!==null&&(w=m(h,s));var M=y?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",S0({className:O,style:S},M),A.createElement("p",{className:_,style:P},A.isValidElement(w)?w:"".concat(w)),x())},_c="recharts-tooltip-wrapper",qL={visibility:"hidden"};function YL(e){var{coordinate:t,translateX:n,translateY:r}=e;return st(_c,{["".concat(_c,"-right")]:De(n)&&t&&De(t.x)&&n>=t.x,["".concat(_c,"-left")]:De(n)&&t&&De(t.x)&&n<t.x,["".concat(_c,"-bottom")]:De(r)&&t&&De(t.y)&&r>=t.y,["".concat(_c,"-top")]:De(r)&&t&&De(t.y)&&r<t.y})}function hC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:c,tooltipDimension:u,viewBox:d,viewBoxDimension:p}=e;if(s&&De(s[r]))return s[r];var h=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return c[r]?h:m;var y=d[r];if(y==null)return 0;if(c[r]){var x=h,S=y;return x<S?Math.max(m,y):Math.max(h,y)}if(p==null)return 0;var P=m+u,C=y+p;return P>C?Math.max(h,y):Math.max(m,y)}function FL(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function KL(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:c,useTranslate3d:u,viewBox:d}=e,p,h,m;return c.height>0&&c.width>0&&n?(h=hC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),m=hC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),p=FL({translateX:h,translateY:m,useTranslate3d:u})):p=qL,{cssProperties:p,cssClasses:YL({translateX:h,translateY:m,coordinate:n})}}function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function td(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(r){A0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function A0(e,t,n){return(t=VL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VL(e){var t=XL(e,"string");return typeof t=="symbol"?t:t+""}function XL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class WL extends A.PureComponent{constructor(){super(...arguments),A0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),A0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:c,hasPayload:u,isAnimationActive:d,offset:p,position:h,reverseDirection:m,useTranslate3d:y,viewBox:x,wrapperStyle:S,lastBoundingBox:P,innerRef:C,hasPortalFromProps:w}=this.props,{cssClasses:O,cssProperties:_}=KL({allowEscapeViewBox:n,coordinate:c,offsetTopLeft:p,position:h,reverseDirection:m,tooltipBox:{height:P.height,width:P.width},useTranslate3d:y,viewBox:x}),M=w?{}:td(td({transition:d&&t?"transform ".concat(r,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),k=td(td({},M),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:k,ref:C},s)}}var QL=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),pl={isSsr:QL()},g_=()=>_e(e=>e.rootProps.accessibilityLayer);function mr(e){return Number.isFinite(e)}function rl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P0.apply(null,arguments)}function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(n),!0).forEach(function(r){ZL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZL(e,t,n){return(t=JL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JL(e){var t=e5(e,"string");return typeof t=="symbol"?t:t+""}function e5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yC={curveBasisClosed:bI,curveBasisOpen:xI,curveBasis:vI,curveBumpX:aI,curveBumpY:iI,curveLinearClosed:SI,curveLinear:fh,curveMonotoneX:AI,curveMonotoneY:PI,curveNatural:CI,curveStep:EI,curveStepAfter:OI,curveStepBefore:wI},nd=e=>mr(e.x)&&mr(e.y),Tc=e=>e.x,Dc=e=>e.y,t5=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(ou(e));return(n==="curveMonotone"||n==="curveBump")&&t?yC["".concat(n).concat(t==="vertical"?"Y":"X")]:yC[n]||fh},n5=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,c=t5(t,i),u=s?n.filter(nd):n,d;if(Array.isArray(r)){var p=s?r.filter(m=>nd(m)):r,h=u.map((m,y)=>gC(gC({},m),{},{base:p[y]}));return i==="vertical"?d=Vf().y(Dc).x1(Tc).x0(m=>m.base.x):d=Vf().x(Tc).y1(Dc).y0(m=>m.base.y),d.defined(nd).curve(c),d(h)}return i==="vertical"&&De(r)?d=Vf().y(Dc).x1(Tc).x0(r):De(r)?d=Vf().x(Tc).y1(Dc).y0(r):d=cO().x(Tc).y(Dc),d.defined(nd).curve(c),d(u)},y_=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?n5(e):r;return A.createElement("path",P0({},Ko(e),qR(e),{className:st("recharts-curve",t),d:s===null?void 0:s,ref:i}))},r5=["x","y","top","left","width","height","className"];function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C0.apply(null,arguments)}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function a5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(r){i5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i5(e,t,n){return(t=o5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o5(e){var t=s5(e,"string");return typeof t=="symbol"?t:t+""}function s5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l5(e,t){if(e==null)return{};var n,r,i=c5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var u5=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),f5=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:c=0,className:u}=e,d=l5(e,r5),p=a5({x:t,y:n,top:r,left:i,width:s,height:c},d);return!De(t)||!De(n)||!De(s)||!De(c)||!De(r)||!De(i)?null:A.createElement("path",C0({},Wt(p,!0),{className:st("recharts-cross",u),d:u5(t,n,s,c,r,i)}))};function d5(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function h5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(n),!0).forEach(function(r){p5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p5(e,t,n){return(t=m5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m5(e){var t=g5(e,"string");return typeof t=="symbol"?t:t+""}function g5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lr(e,t){var n=h5({},e),r=t,i=Object.keys(t),s=i.reduce((c,u)=>(c[u]===void 0&&r[u]!==void 0&&(c[u]=r[u]),c),n);return s}function y5(){}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function SC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(r){v5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v5(e,t,n){return(t=b5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b5(e){var t=x5(e,"string");return typeof t=="symbol"?t:t+""}function x5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S5=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),v_=(e,t,n)=>e.map(r=>"".concat(S5(r)," ").concat(t,"ms ").concat(n)).join(","),A5=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Jc=(e,t)=>Object.keys(t).reduce((n,r)=>SC(SC({},n),{},{[r]:e(r,t[r])}),{});function AC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(n),!0).forEach(function(r){P5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P5(e,t,n){return(t=C5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C5(e){var t=E5(e,"string");return typeof t=="symbol"?t:t+""}function E5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ld=(e,t,n)=>e+(t-e)*n,E0=e=>{var{from:t,to:n}=e;return t!==n},b_=(e,t,n)=>{var r=Jc((i,s)=>{if(E0(s)){var[c,u]=e(s.from,s.to,s.velocity);return En(En({},s),{},{from:c,velocity:u})}return s},t);return n<1?Jc((i,s)=>E0(s)?En(En({},s),{},{velocity:Ld(s.velocity,r[i].velocity,n),from:Ld(s.from,r[i].from,n)}):s,t):b_(e,r,n-1)};function w5(e,t,n,r,i,s){var c,u=r.reduce((y,x)=>En(En({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Jc((y,x)=>x.from,u),p=()=>!Object.values(u).filter(E0).length,h=null,m=y=>{c||(c=y);var x=y-c,S=x/n.dt;u=b_(n,u,S),i(En(En(En({},e),t),d())),c=y,p()||(h=s.setTimeout(m))};return()=>(h=s.setTimeout(m),()=>{h()})}function O5(e,t,n,r,i,s,c){var u=null,d=i.reduce((m,y)=>En(En({},m),{},{[y]:[e[y],t[y]]}),{}),p,h=m=>{p||(p=m);var y=(m-p)/r,x=Jc((P,C)=>Ld(...C,n(y)),d);if(s(En(En(En({},e),t),x)),y<1)u=c.setTimeout(h);else{var S=Jc((P,C)=>Ld(...C,n(1)),d);s(En(En(En({},e),t),S))}};return()=>(u=c.setTimeout(h),()=>{u()})}const _5=(e,t,n,r,i,s)=>{var c=A5(e,t);return n.isStepper===!0?w5(e,t,n,c,i,s):O5(e,t,n,r,c,i,s)};var $d=1e-4,x_=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],S_=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),PC=(e,t)=>n=>{var r=x_(e,t);return S_(r,n)},T5=(e,t)=>n=>{var r=x_(e,t),i=[...r.map((s,c)=>s*c).slice(1),0];return S_(i,n)},CC=function(){for(var t,n,r,i,s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];if(c.length===1)switch(c[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var d=c[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,r,n,i]=d[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else c.length===4&&([t,r,n,i]=c);var p=PC(t,n),h=PC(r,i),m=T5(t,n),y=S=>S>1?1:S<0?0:S,x=S=>{for(var P=S>1?1:S,C=P,w=0;w<8;++w){var O=p(C)-P,_=m(C);if(Math.abs(O-P)<$d||_<$d)return h(C);C=y(C-O/_)}return h(C)};return x.isStepper=!1,x},D5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(c,u,d)=>{var p=-(c-u)*n,h=d*r,m=d+(p-h)*i/1e3,y=d*i/1e3+c;return Math.abs(y-u)<$d&&Math.abs(m)<$d?[u,0]:[y,m]};return s.isStepper=!0,s.dt=i,s},k5=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return CC(e);case"spring":return D5();default:if(e.split("(")[0]==="cubic-bezier")return CC(e)}return typeof e=="function"?e:null};function N5(e){var t,n=()=>null,r=!1,i=null,s=c=>{if(!r){if(Array.isArray(c)){if(!c.length)return;var u=c,[d,...p]=u;if(typeof d=="number"){i=e.setTimeout(s.bind(null,p),d);return}s(d),i=e.setTimeout(s.bind(null,p));return}typeof c=="string"&&(t=c,n(t)),typeof c=="object"&&(t=c,n(t)),typeof c=="function"&&c()}};return{stop:()=>{r=!0},start:c=>{r=!1,i&&(i(),i=null),s(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>e}}class M5{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=c=>{c-r>=n?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function j5(){return N5(new M5)}var R5=A.createContext(j5);function I5(e,t){var n=A.useContext(R5);return A.useMemo(()=>t??n(e),[e,t,n])}var L5={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},EC={t:0},fy={t:1};function Eh(e){var t=Lr(e,L5),{isActive:n,canBegin:r,duration:i,easing:s,begin:c,onAnimationEnd:u,onAnimationStart:d,children:p}=t,h=I5(t.animationId,t.animationManager),[m,y]=A.useState(n?EC:fy),x=A.useRef(null);return A.useEffect(()=>{n||y(fy)},[n]),A.useEffect(()=>{if(!n||!r)return y5;var S=_5(EC,fy,k5(s),i,y,h.getTimeoutController()),P=()=>{x.current=S()};return h.start([d,c,P,i,u]),()=>{h.stop(),x.current&&x.current(),u()}},[n,r,i,s,c,d,u,h]),p(m.t)}function wh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Wc(t)),r=A.useRef(e);return r.current!==e&&(n.current=Wc(t),r.current=e),n.current}function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(n),!0).forEach(function(r){$5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $5(e,t,n){return(t=B5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B5(e){var t=U5(e,"string");return typeof t=="symbol"?t:t+""}function U5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bd.apply(null,arguments)}var _C=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),c=r>=0?1:-1,u=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,p;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,y=4;m<y;m++)h[m]=i[m]>s?s:i[m];p="M".concat(e,",").concat(t+c*h[0]),h[0]>0&&(p+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+u*h[0],",").concat(t)),p+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(p+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+c*h[1])),p+="L ".concat(e+n,",").concat(t+r-c*h[2]),h[2]>0&&(p+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),p+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(p+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+r-c*h[3])),p+="Z"}else if(s>0&&i===+i&&i>0){var x=Math.min(s,i);p="M ".concat(e,",").concat(t+c*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n,",").concat(t+c*x,`
            L `).concat(e+n,",").concat(t+r-c*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+r-c*x," Z")}else p="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return p},z5={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},A_=e=>{var t=Lr(e,z5),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var de=n.current.getTotalLength();de&&i(de)}catch{}},[]);var{x:s,y:c,width:u,height:d,radius:p,className:h}=t,{animationEasing:m,animationDuration:y,animationBegin:x,isAnimationActive:S,isUpdateAnimationActive:P}=t,C=A.useRef(u),w=A.useRef(d),O=A.useRef(s),_=A.useRef(c),M=A.useMemo(()=>({x:s,y:c,width:u,height:d,radius:p}),[s,c,u,d,p]),k=wh(M,"rectangle-");if(s!==+s||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var D=st("recharts-rectangle",h);if(!P)return A.createElement("path",Bd({},Wt(t,!0),{className:D,d:_C(s,c,u,d,p)}));var L=C.current,$=w.current,Z=O.current,ae=_.current,H="0px ".concat(r===-1?1:r,"px"),re="".concat(r,"px 0px"),me=v_(["strokeDasharray"],y,typeof m=="string"?m:void 0);return A.createElement(Eh,{animationId:k,key:k,canBegin:r>0,duration:y,easing:m,isActive:P,begin:x},de=>{var ve=wn(L,u,de),G=wn($,d,de),oe=wn(Z,s,de),be=wn(ae,c,de);n.current&&(C.current=ve,w.current=G,O.current=oe,_.current=be);var ne;return S?de>0?ne={transition:me,strokeDasharray:re}:ne={strokeDasharray:H}:ne={strokeDasharray:re},A.createElement("path",Bd({},Wt(t,!0),{className:D,d:_C(oe,be,ve,G,p),ref:n,style:OC(OC({},ne),t.style)}))})};function P_(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,c=Qt(t,n,r,i),u=Qt(t,n,r,s);return{points:[c,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function w0(){return w0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w0.apply(null,arguments)}var G5=(e,t)=>{var n=hn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},rd=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:c,cornerRadius:u,cornerIsExternal:d}=e,p=u*(c?1:-1)+r,h=Math.asin(u/p)/Id,m=d?i:i+s*h,y=Qt(t,n,p,m),x=Qt(t,n,r,m),S=d?i-s*h:i,P=Qt(t,n,p*Math.cos(h*Id),S);return{center:y,circleTangency:x,lineTangency:P,theta:h}},C_=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:c}=e,u=G5(s,c),d=s+u,p=Qt(t,n,i,s),h=Qt(t,n,i,d),m="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var y=Qt(t,n,r,s),x=Qt(t,n,r,d);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},H5=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:p}=e,h=hn(p-d),{circleTangency:m,lineTangency:y,theta:x}=rd({cx:t,cy:n,radius:i,angle:d,sign:h,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:P,theta:C}=rd({cx:t,cy:n,radius:i,angle:p,sign:-h,cornerRadius:s,cornerIsExternal:u}),w=u?Math.abs(d-p):Math.abs(d-p)-x-C;if(w<0)return c?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):C_({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:p});var O="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
  `);if(r>0){var{circleTangency:_,lineTangency:M,theta:k}=rd({cx:t,cy:n,radius:r,angle:d,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:L,theta:$}=rd({cx:t,cy:n,radius:r,angle:p,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),Z=u?Math.abs(d-p):Math.abs(d-p)-k-$;if(Z<0&&s===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(Z>180),",").concat(+(h>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},q5={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},E_=e=>{var t=Lr(e,q5),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:d,startAngle:p,endAngle:h,className:m}=t;if(s<i||p===h)return null;var y=st("recharts-sector",m),x=s-i,S=Rn(c,x,0,!0),P;return S>0&&Math.abs(p-h)<360?P=H5({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:p,endAngle:h}):P=C_({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:p,endAngle:h}),A.createElement("path",w0({},Wt(t,!0),{className:y,d:P}))};function Y5(e,t,n){var r,i,s,c;if(e==="horizontal")r=t.x,s=r,i=n.top,c=n.top+n.height;else if(e==="vertical")i=t.y,c=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:p,outerRadius:h,angle:m}=t,y=Qt(u,d,p,m),x=Qt(u,d,h,m);r=y.x,i=y.y,s=x.x,c=x.y}else return P_(t);return[{x:r,y:i},{x:s,y:c}]}var dy={},hy={},py={},TC;function F5(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kO();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(py)),py}var DC;function K5(){return DC||(DC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F5();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(hy)),hy}var kC;function V5(){return kC||(kC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NO(),n=K5();function r(i,s,c){c&&typeof c!="number"&&t.isIterateeCall(i,s,c)&&(s=c=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),c=c===void 0?i<s?1:-1:n.toFinite(c);const u=Math.max(Math.ceil((s-i)/(c||1)),0),d=new Array(u);for(let p=0;p<u;p++)d[p]=i,i+=c;return d}e.range=r})(dy)),dy}var my,NC;function X5(){return NC||(NC=1,my=V5().range),my}var W5=X5();const w_=Qr(W5);function zi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Q5(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jv(e){let t,n,r;e.length!==2?(t=zi,n=(u,d)=>zi(e(u),d),r=(u,d)=>e(u)-d):(t=e===zi||e===Q5?e:Z5,n=e,r=e);function i(u,d,p=0,h=u.length){if(p<h){if(t(d,d)!==0)return h;do{const m=p+h>>>1;n(u[m],d)<0?p=m+1:h=m}while(p<h)}return p}function s(u,d,p=0,h=u.length){if(p<h){if(t(d,d)!==0)return h;do{const m=p+h>>>1;n(u[m],d)<=0?p=m+1:h=m}while(p<h)}return p}function c(u,d,p=0,h=u.length){const m=i(u,d,p,h-1);return m>p&&r(u[m-1],d)>-r(u[m],d)?m-1:m}return{left:i,center:c,right:s}}function Z5(){return 0}function O_(e){return e===null?NaN:+e}function*J5(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const e$=jv(zi),fu=e$.right;jv(O_).center;class MC extends Map{constructor(t,n=r$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(jC(this,t))}has(t){return super.has(jC(this,t))}set(t,n){return super.set(t$(this,t),n)}delete(t){return super.delete(n$(this,t))}}function jC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function t$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function n$({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function r$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function a$(e=zi){if(e===zi)return __;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function __(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const i$=Math.sqrt(50),o$=Math.sqrt(10),s$=Math.sqrt(2);function Ud(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),c=s>=i$?10:s>=o$?5:s>=s$?2:1;let u,d,p;return i<0?(p=Math.pow(10,-i)/c,u=Math.round(e*p),d=Math.round(t*p),u/p<e&&++u,d/p>t&&--d,p=-p):(p=Math.pow(10,i)*c,u=Math.round(e/p),d=Math.round(t/p),u*p<e&&++u,d*p>t&&--d),d<u&&.5<=n&&n<2?Ud(e,t,n*2):[u,d,p]}function O0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,c]=r?Ud(t,e,n):Ud(e,t,n);if(!(s>=i))return[];const u=s-i+1,d=new Array(u);if(r)if(c<0)for(let p=0;p<u;++p)d[p]=(s-p)/-c;else for(let p=0;p<u;++p)d[p]=(s-p)*c;else if(c<0)for(let p=0;p<u;++p)d[p]=(i+p)/-c;else for(let p=0;p<u;++p)d[p]=(i+p)*c;return d}function _0(e,t,n){return t=+t,e=+e,n=+n,Ud(e,t,n)[2]}function T0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?_0(t,e,n):_0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function RC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function IC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function T_(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?__:a$(i);r>n;){if(r-n>600){const d=r-n+1,p=t-n+1,h=Math.log(d),m=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*m*(d-m)/d)*(p-d/2<0?-1:1),x=Math.max(n,Math.floor(t-p*m/d+y)),S=Math.min(r,Math.floor(t+(d-p)*m/d+y));T_(e,t,x,S,i)}const s=e[t];let c=n,u=r;for(kc(e,n,t),i(e[r],s)>0&&kc(e,n,r);c<u;){for(kc(e,c,u),++c,--u;i(e[c],s)<0;)++c;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?kc(e,n,u):(++u,kc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function kc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function l$(e,t,n){if(e=Float64Array.from(J5(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return IC(e);if(t>=1)return RC(e);var r,i=(r-1)*t,s=Math.floor(i),c=RC(T_(e,s).subarray(0,s+1)),u=IC(e.subarray(s+1));return c+(u-c)*(i-s)}}function c$(e,t,n=O_){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),c=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return c+(u-c)*(i-s)}}function u$(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function $r(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function si(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const D0=Symbol("implicit");function Rv(){var e=new MC,t=[],n=[],r=D0;function i(s){let c=e.get(s);if(c===void 0){if(r!==D0)return r;e.set(s,c=t.push(s)-1)}return n[c%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new MC;for(const c of s)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Rv(t,n).unknown(r)},$r.apply(i,arguments),i}function Iv(){var e=Rv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,c,u=!1,d=0,p=0,h=.5;delete e.unknown;function m(){var y=t().length,x=i<r,S=x?i:r,P=x?r:i;s=(P-S)/Math.max(1,y-d+p*2),u&&(s=Math.floor(s)),S+=(P-S-s*(y-d))*h,c=s*(1-d),u&&(S=Math.round(S),c=Math.round(c));var C=u$(y).map(function(w){return S+s*w});return n(x?C.reverse():C)}return e.domain=function(y){return arguments.length?(t(y),m()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return c},e.step=function(){return s},e.round=function(y){return arguments.length?(u=!!y,m()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,p=+y),m()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},e.paddingOuter=function(y){return arguments.length?(p=+y,m()):p},e.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),m()):h},e.copy=function(){return Iv(t(),[r,i]).round(u).paddingInner(d).paddingOuter(p).align(h)},$r.apply(m(),arguments)}function D_(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return D_(t())},e}function f$(){return D_(Iv.apply(null,arguments).paddingInner(1))}function Lv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function k_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function du(){}var eu=.7,zd=1/eu,Js="\\s*([+-]?\\d+)\\s*",tu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",va="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d$=/^#([0-9a-f]{3,8})$/,h$=new RegExp(`^rgb\\(${Js},${Js},${Js}\\)$`),p$=new RegExp(`^rgb\\(${va},${va},${va}\\)$`),m$=new RegExp(`^rgba\\(${Js},${Js},${Js},${tu}\\)$`),g$=new RegExp(`^rgba\\(${va},${va},${va},${tu}\\)$`),y$=new RegExp(`^hsl\\(${tu},${va},${va}\\)$`),v$=new RegExp(`^hsla\\(${tu},${va},${va},${tu}\\)$`),LC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lv(du,nu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$C,formatHex:$C,formatHex8:b$,formatHsl:x$,formatRgb:BC,toString:BC});function $C(){return this.rgb().formatHex()}function b$(){return this.rgb().formatHex8()}function x$(){return N_(this).formatHsl()}function BC(){return this.rgb().formatRgb()}function nu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=d$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?UC(t):n===3?new Zn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ad(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ad(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=h$.exec(e))?new Zn(t[1],t[2],t[3],1):(t=p$.exec(e))?new Zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=m$.exec(e))?ad(t[1],t[2],t[3],t[4]):(t=g$.exec(e))?ad(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=y$.exec(e))?HC(t[1],t[2]/100,t[3]/100,1):(t=v$.exec(e))?HC(t[1],t[2]/100,t[3]/100,t[4]):LC.hasOwnProperty(e)?UC(LC[e]):e==="transparent"?new Zn(NaN,NaN,NaN,0):null}function UC(e){return new Zn(e>>16&255,e>>8&255,e&255,1)}function ad(e,t,n,r){return r<=0&&(e=t=n=NaN),new Zn(e,t,n,r)}function S$(e){return e instanceof du||(e=nu(e)),e?(e=e.rgb(),new Zn(e.r,e.g,e.b,e.opacity)):new Zn}function k0(e,t,n,r){return arguments.length===1?S$(e):new Zn(e,t,n,r??1)}function Zn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Lv(Zn,k0,k_(du,{brighter(e){return e=e==null?zd:Math.pow(zd,e),new Zn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?eu:Math.pow(eu,e),new Zn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zn(Lo(this.r),Lo(this.g),Lo(this.b),Gd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zC,formatHex:zC,formatHex8:A$,formatRgb:GC,toString:GC}));function zC(){return`#${No(this.r)}${No(this.g)}${No(this.b)}`}function A$(){return`#${No(this.r)}${No(this.g)}${No(this.b)}${No((isNaN(this.opacity)?1:this.opacity)*255)}`}function GC(){const e=Gd(this.opacity);return`${e===1?"rgb(":"rgba("}${Lo(this.r)}, ${Lo(this.g)}, ${Lo(this.b)}${e===1?")":`, ${e})`}`}function Gd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Lo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function No(e){return e=Lo(e),(e<16?"0":"")+e.toString(16)}function HC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wr(e,t,n,r)}function N_(e){if(e instanceof Wr)return new Wr(e.h,e.s,e.l,e.opacity);if(e instanceof du||(e=nu(e)),!e)return new Wr;if(e instanceof Wr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),c=NaN,u=s-i,d=(s+i)/2;return u?(t===s?c=(n-r)/u+(n<r)*6:n===s?c=(r-t)/u+2:c=(t-n)/u+4,u/=d<.5?s+i:2-s-i,c*=60):u=d>0&&d<1?0:c,new Wr(c,u,d,e.opacity)}function P$(e,t,n,r){return arguments.length===1?N_(e):new Wr(e,t,n,r??1)}function Wr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Lv(Wr,P$,k_(du,{brighter(e){return e=e==null?zd:Math.pow(zd,e),new Wr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eu:Math.pow(eu,e),new Wr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Zn(gy(e>=240?e-240:e+120,i,r),gy(e,i,r),gy(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Wr(qC(this.h),id(this.s),id(this.l),Gd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gd(this.opacity);return`${e===1?"hsl(":"hsla("}${qC(this.h)}, ${id(this.s)*100}%, ${id(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qC(e){return e=(e||0)%360,e<0?e+360:e}function id(e){return Math.max(0,Math.min(1,e||0))}function gy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $v=e=>()=>e;function C$(e,t){return function(n){return e+n*t}}function E$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function w$(e){return(e=+e)==1?M_:function(t,n){return n-t?E$(t,n,e):$v(isNaN(t)?n:t)}}function M_(e,t){var n=t-e;return n?C$(e,n):$v(isNaN(e)?t:e)}const YC=(function e(t){var n=w$(t);function r(i,s){var c=n((i=k0(i)).r,(s=k0(s)).r),u=n(i.g,s.g),d=n(i.b,s.b),p=M_(i.opacity,s.opacity);return function(h){return i.r=c(h),i.g=u(h),i.b=d(h),i.opacity=p(h),i+""}}return r.gamma=e,r})(1);function O$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function _$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function T$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),c;for(c=0;c<r;++c)i[c]=ml(e[c],t[c]);for(;c<n;++c)s[c]=t[c];return function(u){for(c=0;c<r;++c)s[c]=i[c](u);return s}}function D$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Hd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function k$(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ml(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var N0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yy=new RegExp(N0.source,"g");function N$(e){return function(){return e}}function M$(e){return function(t){return e(t)+""}}function j$(e,t){var n=N0.lastIndex=yy.lastIndex=0,r,i,s,c=-1,u=[],d=[];for(e=e+"",t=t+"";(r=N0.exec(e))&&(i=yy.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[c]?u[c]+=s:u[++c]=s),(r=r[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,d.push({i:c,x:Hd(r,i)})),n=yy.lastIndex;return n<t.length&&(s=t.slice(n),u[c]?u[c]+=s:u[++c]=s),u.length<2?d[0]?M$(d[0].x):N$(t):(t=d.length,function(p){for(var h=0,m;h<t;++h)u[(m=d[h]).i]=m.x(p);return u.join("")})}function ml(e,t){var n=typeof t,r;return t==null||n==="boolean"?$v(t):(n==="number"?Hd:n==="string"?(r=nu(t))?(t=r,YC):j$:t instanceof nu?YC:t instanceof Date?D$:_$(t)?O$:Array.isArray(t)?T$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?k$:Hd)(e,t)}function Bv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function R$(e,t){t===void 0&&(t=e,e=ml);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(c){var u=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return s[u](c-u)}}function I$(e){return function(){return e}}function qd(e){return+e}var FC=[0,1];function Gn(e){return e}function M0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:I$(isNaN(t)?NaN:.5)}function L$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function $$(e,t,n){var r=e[0],i=e[1],s=t[0],c=t[1];return i<r?(r=M0(i,r),s=n(c,s)):(r=M0(r,i),s=n(s,c)),function(u){return s(r(u))}}function B$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),c=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<r;)i[c]=M0(e[c],e[c+1]),s[c]=n(t[c],t[c+1]);return function(u){var d=fu(e,u,1,r)-1;return s[d](i[d](u))}}function hu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Oh(){var e=FC,t=FC,n=ml,r,i,s,c=Gn,u,d,p;function h(){var y=Math.min(e.length,t.length);return c!==Gn&&(c=L$(e[0],e[y-1])),u=y>2?B$:$$,d=p=null,m}function m(y){return y==null||isNaN(y=+y)?s:(d||(d=u(e.map(r),t,n)))(r(c(y)))}return m.invert=function(y){return c(i((p||(p=u(t,e.map(r),Hd)))(y)))},m.domain=function(y){return arguments.length?(e=Array.from(y,qd),h()):e.slice()},m.range=function(y){return arguments.length?(t=Array.from(y),h()):t.slice()},m.rangeRound=function(y){return t=Array.from(y),n=Bv,h()},m.clamp=function(y){return arguments.length?(c=y?!0:Gn,h()):c!==Gn},m.interpolate=function(y){return arguments.length?(n=y,h()):n},m.unknown=function(y){return arguments.length?(s=y,m):s},function(y,x){return r=y,i=x,h()}}function Uv(){return Oh()(Gn,Gn)}function U$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function al(e){return e=Yd(Math.abs(e)),e?e[1]:NaN}function z$(e,t){return function(n,r){for(var i=n.length,s=[],c=0,u=e[0],d=0;i>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),s.push(n.substring(i-=u,i+u)),!((d+=u+1)>r));)u=e[c=(c+1)%e.length];return s.reverse().join(t)}}function G$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var H$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ru(e){if(!(t=H$.exec(e)))throw new Error("invalid format: "+e);var t;return new zv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ru.prototype=zv.prototype;function zv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function q$(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var j_;function Y$(e,t){var n=Yd(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(j_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return s===c?r:s>c?r+new Array(s-c+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Yd(e,Math.max(0,t+s-1))[0]}function KC(e,t){var n=Yd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const VC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:U$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>KC(e*100,t),r:KC,s:Y$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function XC(e){return e}var WC=Array.prototype.map,QC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function F$(e){var t=e.grouping===void 0||e.thousands===void 0?XC:z$(WC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?XC:G$(WC.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function p(m){m=ru(m);var y=m.fill,x=m.align,S=m.sign,P=m.symbol,C=m.zero,w=m.width,O=m.comma,_=m.precision,M=m.trim,k=m.type;k==="n"?(O=!0,k="g"):VC[k]||(_===void 0&&(_=12),M=!0,k="g"),(C||y==="0"&&x==="=")&&(C=!0,y="0",x="=");var D=P==="$"?n:P==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",L=P==="$"?r:/[%p]/.test(k)?c:"",$=VC[k],Z=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function ae(H){var re=D,me=L,de,ve,G;if(k==="c")me=$(H)+me,H="";else{H=+H;var oe=H<0||1/H<0;if(H=isNaN(H)?d:$(Math.abs(H),_),M&&(H=q$(H)),oe&&+H==0&&S!=="+"&&(oe=!1),re=(oe?S==="("?S:u:S==="-"||S==="("?"":S)+re,me=(k==="s"?QC[8+j_/3]:"")+me+(oe&&S==="("?")":""),Z){for(de=-1,ve=H.length;++de<ve;)if(G=H.charCodeAt(de),48>G||G>57){me=(G===46?i+H.slice(de+1):H.slice(de))+me,H=H.slice(0,de);break}}}O&&!C&&(H=t(H,1/0));var be=re.length+H.length+me.length,ne=be<w?new Array(w-be+1).join(y):"";switch(O&&C&&(H=t(ne+H,ne.length?w-me.length:1/0),ne=""),x){case"<":H=re+H+me+ne;break;case"=":H=re+ne+H+me;break;case"^":H=ne.slice(0,be=ne.length>>1)+re+H+me+ne.slice(be);break;default:H=ne+re+H+me;break}return s(H)}return ae.toString=function(){return m+""},ae}function h(m,y){var x=p((m=ru(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(al(y)/3)))*3,P=Math.pow(10,-S),C=QC[8+S/3];return function(w){return x(P*w)+C}}return{format:p,formatPrefix:h}}var od,Gv,R_;K$({thousands:",",grouping:[3],currency:["$",""]});function K$(e){return od=F$(e),Gv=od.format,R_=od.formatPrefix,od}function V$(e){return Math.max(0,-al(Math.abs(e)))}function X$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(al(t)/3)))*3-al(Math.abs(e)))}function W$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,al(t)-al(e))+1}function I_(e,t,n,r){var i=T0(e,t,n),s;switch(r=ru(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=X$(i,c))&&(r.precision=s),R_(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=W$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=V$(i))&&(r.precision=s-(r.type==="%")*2);break}}return Gv(r)}function Fi(e){var t=e.domain;return e.ticks=function(n){var r=t();return O0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return I_(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,c=r[i],u=r[s],d,p,h=10;for(u<c&&(p=c,c=u,u=p,p=i,i=s,s=p);h-- >0;){if(p=_0(c,u,n),p===d)return r[i]=c,r[s]=u,t(r);if(p>0)c=Math.floor(c/p)*p,u=Math.ceil(u/p)*p;else if(p<0)c=Math.ceil(c*p)/p,u=Math.floor(u*p)/p;else break;d=p}return e},e}function L_(){var e=Uv();return e.copy=function(){return hu(e,L_())},$r.apply(e,arguments),Fi(e)}function $_(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,qd),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return $_(e).unknown(t)},e=arguments.length?Array.from(e,qd):[0,1],Fi(n)}function B_(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],c;return s<i&&(c=n,n=r,r=c,c=i,i=s,s=c),e[n]=t.floor(i),e[r]=t.ceil(s),e}function ZC(e){return Math.log(e)}function JC(e){return Math.exp(e)}function Q$(e){return-Math.log(-e)}function Z$(e){return-Math.exp(-e)}function J$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function e6(e){return e===10?J$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function t6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function eE(e){return(t,n)=>-e(-t,n)}function Hv(e){const t=e(ZC,JC),n=t.domain;let r=10,i,s;function c(){return i=t6(r),s=e6(r),n()[0]<0?(i=eE(i),s=eE(s),e(Q$,Z$)):e(ZC,JC),t}return t.base=function(u){return arguments.length?(r=+u,c()):r},t.domain=function(u){return arguments.length?(n(u),c()):n()},t.ticks=u=>{const d=n();let p=d[0],h=d[d.length-1];const m=h<p;m&&([p,h]=[h,p]);let y=i(p),x=i(h),S,P;const C=u==null?10:+u;let w=[];if(!(r%1)&&x-y<C){if(y=Math.floor(y),x=Math.ceil(x),p>0){for(;y<=x;++y)for(S=1;S<r;++S)if(P=y<0?S/s(-y):S*s(y),!(P<p)){if(P>h)break;w.push(P)}}else for(;y<=x;++y)for(S=r-1;S>=1;--S)if(P=y>0?S/s(-y):S*s(y),!(P<p)){if(P>h)break;w.push(P)}w.length*2<C&&(w=O0(p,h,C))}else w=O0(y,x,Math.min(x-y,C)).map(s);return m?w.reverse():w},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=ru(d)).precision==null&&(d.trim=!0),d=Gv(d)),u===1/0)return d;const p=Math.max(1,r*u/t.ticks().length);return h=>{let m=h/s(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=p?d(h):""}},t.nice=()=>n(B_(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function U_(){const e=Hv(Oh()).domain([1,10]);return e.copy=()=>hu(e,U_()).base(e.base()),$r.apply(e,arguments),e}function tE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function nE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function qv(e){var t=1,n=e(tE(t),nE(t));return n.constant=function(r){return arguments.length?e(tE(t=+r),nE(t)):t},Fi(n)}function z_(){var e=qv(Oh());return e.copy=function(){return hu(e,z_()).constant(e.constant())},$r.apply(e,arguments)}function rE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function n6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function r6(e){return e<0?-e*e:e*e}function Yv(e){var t=e(Gn,Gn),n=1;function r(){return n===1?e(Gn,Gn):n===.5?e(n6,r6):e(rE(n),rE(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Fi(t)}function Fv(){var e=Yv(Oh());return e.copy=function(){return hu(e,Fv()).exponent(e.exponent())},$r.apply(e,arguments),e}function a6(){return Fv.apply(null,arguments).exponent(.5)}function aE(e){return Math.sign(e)*e*e}function i6(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function G_(){var e=Uv(),t=[0,1],n=!1,r;function i(s){var c=i6(e(s));return isNaN(c)?r:n?Math.round(c):c}return i.invert=function(s){return e.invert(aE(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,qd)).map(aE)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return G_(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},$r.apply(i,arguments),Fi(i)}function H_(){var e=[],t=[],n=[],r;function i(){var c=0,u=Math.max(1,t.length);for(n=new Array(u-1);++c<u;)n[c-1]=c$(e,c/u);return s}function s(c){return c==null||isNaN(c=+c)?r:t[fu(n,c)]}return s.invertExtent=function(c){var u=t.indexOf(c);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let u of c)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(zi),i()},s.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},s.unknown=function(c){return arguments.length?(r=c,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return H_().domain(e).range(t).unknown(r)},$r.apply(s,arguments)}function q_(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function c(d){return d!=null&&d<=d?i[fu(r,d,0,n)]:s}function u(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return c}return c.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},c.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,u()):i.slice()},c.invertExtent=function(d){var p=i.indexOf(d);return p<0?[NaN,NaN]:p<1?[e,r[0]]:p>=n?[r[n-1],t]:[r[p-1],r[p]]},c.unknown=function(d){return arguments.length&&(s=d),c},c.thresholds=function(){return r.slice()},c.copy=function(){return q_().domain([e,t]).range(i).unknown(s)},$r.apply(Fi(c),arguments)}function Y_(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[fu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var c=t.indexOf(s);return[e[c-1],e[c]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Y_().domain(e).range(t).unknown(n)},$r.apply(i,arguments)}const vy=new Date,by=new Date;function on(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const c=i(s),u=i.ceil(s);return s-c<u-s?c:u},i.offset=(s,c)=>(t(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,u)=>{const d=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<c)||!(u>0))return d;let p;do d.push(p=new Date(+s)),t(s,u),e(s);while(p<s&&s<c);return d},i.filter=s=>on(c=>{if(c>=c)for(;e(c),!s(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;t(c,-1),!s(c););else for(;--u>=0;)for(;t(c,1),!s(c););}),n&&(i.count=(s,c)=>(vy.setTime(+s),by.setTime(+c),e(vy),e(by),Math.floor(n(vy,by))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?c=>r(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const Fd=on(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Fd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?on(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Fd);Fd.range;const Wa=1e3,Nr=Wa*60,Qa=Nr*60,ti=Qa*24,Kv=ti*7,iE=ti*30,xy=ti*365,Mo=on(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wa)},(e,t)=>(t-e)/Wa,e=>e.getUTCSeconds());Mo.range;const Vv=on(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wa)},(e,t)=>{e.setTime(+e+t*Nr)},(e,t)=>(t-e)/Nr,e=>e.getMinutes());Vv.range;const Xv=on(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Nr)},(e,t)=>(t-e)/Nr,e=>e.getUTCMinutes());Xv.range;const Wv=on(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wa-e.getMinutes()*Nr)},(e,t)=>{e.setTime(+e+t*Qa)},(e,t)=>(t-e)/Qa,e=>e.getHours());Wv.range;const Qv=on(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qa)},(e,t)=>(t-e)/Qa,e=>e.getUTCHours());Qv.range;const pu=on(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Nr)/ti,e=>e.getDate()-1);pu.range;const _h=on(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ti,e=>e.getUTCDate()-1);_h.range;const F_=on(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ti,e=>Math.floor(e/ti));F_.range;function Xo(e){return on(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Nr)/Kv)}const Th=Xo(0),Kd=Xo(1),o6=Xo(2),s6=Xo(3),il=Xo(4),l6=Xo(5),c6=Xo(6);Th.range;Kd.range;o6.range;s6.range;il.range;l6.range;c6.range;function Wo(e){return on(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Kv)}const Dh=Wo(0),Vd=Wo(1),u6=Wo(2),f6=Wo(3),ol=Wo(4),d6=Wo(5),h6=Wo(6);Dh.range;Vd.range;u6.range;f6.range;ol.range;d6.range;h6.range;const Zv=on(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Zv.range;const Jv=on(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Jv.range;const ni=on(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ni.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:on(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ni.range;const ri=on(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ri.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:on(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ri.range;function K_(e,t,n,r,i,s){const c=[[Mo,1,Wa],[Mo,5,5*Wa],[Mo,15,15*Wa],[Mo,30,30*Wa],[s,1,Nr],[s,5,5*Nr],[s,15,15*Nr],[s,30,30*Nr],[i,1,Qa],[i,3,3*Qa],[i,6,6*Qa],[i,12,12*Qa],[r,1,ti],[r,2,2*ti],[n,1,Kv],[t,1,iE],[t,3,3*iE],[e,1,xy]];function u(p,h,m){const y=h<p;y&&([p,h]=[h,p]);const x=m&&typeof m.range=="function"?m:d(p,h,m),S=x?x.range(p,+h+1):[];return y?S.reverse():S}function d(p,h,m){const y=Math.abs(h-p)/m,x=jv(([,,C])=>C).right(c,y);if(x===c.length)return e.every(T0(p/xy,h/xy,m));if(x===0)return Fd.every(Math.max(T0(p,h,m),1));const[S,P]=c[y/c[x-1][2]<c[x][2]/y?x-1:x];return S.every(P)}return[u,d]}const[p6,m6]=K_(ri,Jv,Dh,F_,Qv,Xv),[g6,y6]=K_(ni,Zv,Th,pu,Wv,Vv);function Sy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ay(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function v6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,c=e.shortDays,u=e.months,d=e.shortMonths,p=Mc(i),h=jc(i),m=Mc(s),y=jc(s),x=Mc(c),S=jc(c),P=Mc(u),C=jc(u),w=Mc(d),O=jc(d),_={a:oe,A:be,b:ne,B:j,c:null,d:fE,e:fE,f:z6,g:Q6,G:J6,H:$6,I:B6,j:U6,L:V_,m:G6,M:H6,p:X,q:V,Q:pE,s:mE,S:q6,u:Y6,U:F6,V:K6,w:V6,W:X6,x:null,X:null,y:W6,Y:Z6,Z:eB,"%":hE},M={a:ue,A:Ae,b:q,B:se,c:null,d:dE,e:dE,f:aB,g:pB,G:gB,H:tB,I:nB,j:rB,L:W_,m:iB,M:oB,p:Pe,q:ge,Q:pE,s:mE,S:sB,u:lB,U:cB,V:uB,w:fB,W:dB,x:null,X:null,y:hB,Y:mB,Z:yB,"%":hE},k={a:ae,A:H,b:re,B:me,c:de,d:cE,e:cE,f:j6,g:lE,G:sE,H:uE,I:uE,j:D6,L:M6,m:T6,M:k6,p:Z,q:_6,Q:I6,s:L6,S:N6,u:P6,U:C6,V:E6,w:A6,W:w6,x:ve,X:G,y:lE,Y:sE,Z:O6,"%":R6};_.x=D(n,_),_.X=D(r,_),_.c=D(t,_),M.x=D(n,M),M.X=D(r,M),M.c=D(t,M);function D(le,he){return function(xe){var W=[],ze=-1,Ie=0,Pt=le.length,qt,Rt,nt;for(xe instanceof Date||(xe=new Date(+xe));++ze<Pt;)le.charCodeAt(ze)===37&&(W.push(le.slice(Ie,ze)),(Rt=oE[qt=le.charAt(++ze)])!=null?qt=le.charAt(++ze):Rt=qt==="e"?" ":"0",(nt=he[qt])&&(qt=nt(xe,Rt)),W.push(qt),Ie=ze+1);return W.push(le.slice(Ie,ze)),W.join("")}}function L(le,he){return function(xe){var W=Nc(1900,void 0,1),ze=$(W,le,xe+="",0),Ie,Pt;if(ze!=xe.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(he&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(Ie=Ay(Nc(W.y,0,1)),Pt=Ie.getUTCDay(),Ie=Pt>4||Pt===0?Vd.ceil(Ie):Vd(Ie),Ie=_h.offset(Ie,(W.V-1)*7),W.y=Ie.getUTCFullYear(),W.m=Ie.getUTCMonth(),W.d=Ie.getUTCDate()+(W.w+6)%7):(Ie=Sy(Nc(W.y,0,1)),Pt=Ie.getDay(),Ie=Pt>4||Pt===0?Kd.ceil(Ie):Kd(Ie),Ie=pu.offset(Ie,(W.V-1)*7),W.y=Ie.getFullYear(),W.m=Ie.getMonth(),W.d=Ie.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),Pt="Z"in W?Ay(Nc(W.y,0,1)).getUTCDay():Sy(Nc(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(Pt+5)%7:W.w+W.U*7-(Pt+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,Ay(W)):Sy(W)}}function $(le,he,xe,W){for(var ze=0,Ie=he.length,Pt=xe.length,qt,Rt;ze<Ie;){if(W>=Pt)return-1;if(qt=he.charCodeAt(ze++),qt===37){if(qt=he.charAt(ze++),Rt=k[qt in oE?he.charAt(ze++):qt],!Rt||(W=Rt(le,xe,W))<0)return-1}else if(qt!=xe.charCodeAt(W++))return-1}return W}function Z(le,he,xe){var W=p.exec(he.slice(xe));return W?(le.p=h.get(W[0].toLowerCase()),xe+W[0].length):-1}function ae(le,he,xe){var W=x.exec(he.slice(xe));return W?(le.w=S.get(W[0].toLowerCase()),xe+W[0].length):-1}function H(le,he,xe){var W=m.exec(he.slice(xe));return W?(le.w=y.get(W[0].toLowerCase()),xe+W[0].length):-1}function re(le,he,xe){var W=w.exec(he.slice(xe));return W?(le.m=O.get(W[0].toLowerCase()),xe+W[0].length):-1}function me(le,he,xe){var W=P.exec(he.slice(xe));return W?(le.m=C.get(W[0].toLowerCase()),xe+W[0].length):-1}function de(le,he,xe){return $(le,t,he,xe)}function ve(le,he,xe){return $(le,n,he,xe)}function G(le,he,xe){return $(le,r,he,xe)}function oe(le){return c[le.getDay()]}function be(le){return s[le.getDay()]}function ne(le){return d[le.getMonth()]}function j(le){return u[le.getMonth()]}function X(le){return i[+(le.getHours()>=12)]}function V(le){return 1+~~(le.getMonth()/3)}function ue(le){return c[le.getUTCDay()]}function Ae(le){return s[le.getUTCDay()]}function q(le){return d[le.getUTCMonth()]}function se(le){return u[le.getUTCMonth()]}function Pe(le){return i[+(le.getUTCHours()>=12)]}function ge(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var he=D(le+="",_);return he.toString=function(){return le},he},parse:function(le){var he=L(le+="",!1);return he.toString=function(){return le},he},utcFormat:function(le){var he=D(le+="",M);return he.toString=function(){return le},he},utcParse:function(le){var he=L(le+="",!0);return he.toString=function(){return le},he}}}var oE={"-":"",_:" ",0:"0"},mn=/^\s*\d+/,b6=/^%/,x6=/[\\^$*+?|[\]().{}]/g;function Je(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function S6(e){return e.replace(x6,"\\$&")}function Mc(e){return new RegExp("^(?:"+e.map(S6).join("|")+")","i")}function jc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function A6(e,t,n){var r=mn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function P6(e,t,n){var r=mn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function C6(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function E6(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function w6(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function sE(e,t,n){var r=mn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function lE(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function O6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _6(e,t,n){var r=mn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function T6(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function cE(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function D6(e,t,n){var r=mn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function uE(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function k6(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function N6(e,t,n){var r=mn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function M6(e,t,n){var r=mn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function j6(e,t,n){var r=mn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function R6(e,t,n){var r=b6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function I6(e,t,n){var r=mn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function L6(e,t,n){var r=mn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function fE(e,t){return Je(e.getDate(),t,2)}function $6(e,t){return Je(e.getHours(),t,2)}function B6(e,t){return Je(e.getHours()%12||12,t,2)}function U6(e,t){return Je(1+pu.count(ni(e),e),t,3)}function V_(e,t){return Je(e.getMilliseconds(),t,3)}function z6(e,t){return V_(e,t)+"000"}function G6(e,t){return Je(e.getMonth()+1,t,2)}function H6(e,t){return Je(e.getMinutes(),t,2)}function q6(e,t){return Je(e.getSeconds(),t,2)}function Y6(e){var t=e.getDay();return t===0?7:t}function F6(e,t){return Je(Th.count(ni(e)-1,e),t,2)}function X_(e){var t=e.getDay();return t>=4||t===0?il(e):il.ceil(e)}function K6(e,t){return e=X_(e),Je(il.count(ni(e),e)+(ni(e).getDay()===4),t,2)}function V6(e){return e.getDay()}function X6(e,t){return Je(Kd.count(ni(e)-1,e),t,2)}function W6(e,t){return Je(e.getFullYear()%100,t,2)}function Q6(e,t){return e=X_(e),Je(e.getFullYear()%100,t,2)}function Z6(e,t){return Je(e.getFullYear()%1e4,t,4)}function J6(e,t){var n=e.getDay();return e=n>=4||n===0?il(e):il.ceil(e),Je(e.getFullYear()%1e4,t,4)}function eB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Je(t/60|0,"0",2)+Je(t%60,"0",2)}function dE(e,t){return Je(e.getUTCDate(),t,2)}function tB(e,t){return Je(e.getUTCHours(),t,2)}function nB(e,t){return Je(e.getUTCHours()%12||12,t,2)}function rB(e,t){return Je(1+_h.count(ri(e),e),t,3)}function W_(e,t){return Je(e.getUTCMilliseconds(),t,3)}function aB(e,t){return W_(e,t)+"000"}function iB(e,t){return Je(e.getUTCMonth()+1,t,2)}function oB(e,t){return Je(e.getUTCMinutes(),t,2)}function sB(e,t){return Je(e.getUTCSeconds(),t,2)}function lB(e){var t=e.getUTCDay();return t===0?7:t}function cB(e,t){return Je(Dh.count(ri(e)-1,e),t,2)}function Q_(e){var t=e.getUTCDay();return t>=4||t===0?ol(e):ol.ceil(e)}function uB(e,t){return e=Q_(e),Je(ol.count(ri(e),e)+(ri(e).getUTCDay()===4),t,2)}function fB(e){return e.getUTCDay()}function dB(e,t){return Je(Vd.count(ri(e)-1,e),t,2)}function hB(e,t){return Je(e.getUTCFullYear()%100,t,2)}function pB(e,t){return e=Q_(e),Je(e.getUTCFullYear()%100,t,2)}function mB(e,t){return Je(e.getUTCFullYear()%1e4,t,4)}function gB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ol(e):ol.ceil(e),Je(e.getUTCFullYear()%1e4,t,4)}function yB(){return"+0000"}function hE(){return"%"}function pE(e){return+e}function mE(e){return Math.floor(+e/1e3)}var Fs,Z_,J_;vB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vB(e){return Fs=v6(e),Z_=Fs.format,Fs.parse,J_=Fs.utcFormat,Fs.utcParse,Fs}function bB(e){return new Date(e)}function xB(e){return e instanceof Date?+e:+new Date(+e)}function eb(e,t,n,r,i,s,c,u,d,p){var h=Uv(),m=h.invert,y=h.domain,x=p(".%L"),S=p(":%S"),P=p("%I:%M"),C=p("%I %p"),w=p("%a %d"),O=p("%b %d"),_=p("%B"),M=p("%Y");function k(D){return(d(D)<D?x:u(D)<D?S:c(D)<D?P:s(D)<D?C:r(D)<D?i(D)<D?w:O:n(D)<D?_:M)(D)}return h.invert=function(D){return new Date(m(D))},h.domain=function(D){return arguments.length?y(Array.from(D,xB)):y().map(bB)},h.ticks=function(D){var L=y();return e(L[0],L[L.length-1],D??10)},h.tickFormat=function(D,L){return L==null?k:p(L)},h.nice=function(D){var L=y();return(!D||typeof D.range!="function")&&(D=t(L[0],L[L.length-1],D??10)),D?y(B_(L,D)):h},h.copy=function(){return hu(h,eb(e,t,n,r,i,s,c,u,d,p))},h}function SB(){return $r.apply(eb(g6,y6,ni,Zv,Th,pu,Wv,Vv,Mo,Z_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function AB(){return $r.apply(eb(p6,m6,ri,Jv,Dh,_h,Qv,Xv,Mo,J_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kh(){var e=0,t=1,n,r,i,s,c=Gn,u=!1,d;function p(m){return m==null||isNaN(m=+m)?d:c(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),p):[e,t]},p.clamp=function(m){return arguments.length?(u=!!m,p):u},p.interpolator=function(m){return arguments.length?(c=m,p):c};function h(m){return function(y){var x,S;return arguments.length?([x,S]=y,c=m(x,S),p):[c(0),c(1)]}}return p.range=h(ml),p.rangeRound=h(Bv),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),p}}function Ki(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function eT(){var e=Fi(kh()(Gn));return e.copy=function(){return Ki(e,eT())},si.apply(e,arguments)}function tT(){var e=Hv(kh()).domain([1,10]);return e.copy=function(){return Ki(e,tT()).base(e.base())},si.apply(e,arguments)}function nT(){var e=qv(kh());return e.copy=function(){return Ki(e,nT()).constant(e.constant())},si.apply(e,arguments)}function tb(){var e=Yv(kh());return e.copy=function(){return Ki(e,tb()).exponent(e.exponent())},si.apply(e,arguments)}function PB(){return tb.apply(null,arguments).exponent(.5)}function rT(){var e=[],t=Gn;function n(r){if(r!=null&&!isNaN(r=+r))return t((fu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(zi),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>l$(e,s/r))},n.copy=function(){return rT(t).domain(e)},si.apply(n,arguments)}function Nh(){var e=0,t=.5,n=1,r=1,i,s,c,u,d,p=Gn,h,m=!1,y;function x(P){return isNaN(P=+P)?y:(P=.5+((P=+h(P))-s)*(r*P<r*s?u:d),p(m?Math.max(0,Math.min(1,P)):P))}x.domain=function(P){return arguments.length?([e,t,n]=P,i=h(e=+e),s=h(t=+t),c=h(n=+n),u=i===s?0:.5/(s-i),d=s===c?0:.5/(c-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(P){return arguments.length?(m=!!P,x):m},x.interpolator=function(P){return arguments.length?(p=P,x):p};function S(P){return function(C){var w,O,_;return arguments.length?([w,O,_]=C,p=R$(P,[w,O,_]),x):[p(0),p(.5),p(1)]}}return x.range=S(ml),x.rangeRound=S(Bv),x.unknown=function(P){return arguments.length?(y=P,x):y},function(P){return h=P,i=P(e),s=P(t),c=P(n),u=i===s?0:.5/(s-i),d=s===c?0:.5/(c-s),r=s<i?-1:1,x}}function aT(){var e=Fi(Nh()(Gn));return e.copy=function(){return Ki(e,aT())},si.apply(e,arguments)}function iT(){var e=Hv(Nh()).domain([.1,1,10]);return e.copy=function(){return Ki(e,iT()).base(e.base())},si.apply(e,arguments)}function oT(){var e=qv(Nh());return e.copy=function(){return Ki(e,oT()).constant(e.constant())},si.apply(e,arguments)}function nb(){var e=Yv(Nh());return e.copy=function(){return Ki(e,nb()).exponent(e.exponent())},si.apply(e,arguments)}function CB(){return nb.apply(null,arguments).exponent(.5)}const $c=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Iv,scaleDiverging:aT,scaleDivergingLog:iT,scaleDivergingPow:nb,scaleDivergingSqrt:CB,scaleDivergingSymlog:oT,scaleIdentity:$_,scaleImplicit:D0,scaleLinear:L_,scaleLog:U_,scaleOrdinal:Rv,scalePoint:f$,scalePow:Fv,scaleQuantile:H_,scaleQuantize:q_,scaleRadial:G_,scaleSequential:eT,scaleSequentialLog:tT,scaleSequentialPow:tb,scaleSequentialQuantile:rT,scaleSequentialSqrt:PB,scaleSequentialSymlog:nT,scaleSqrt:a6,scaleSymlog:z_,scaleThreshold:Y_,scaleTime:SB,scaleUtc:AB,tickFormat:I_},Symbol.toStringTag,{value:"Module"}));var Vi=e=>e.chartData,rb=te([Vi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),ab=(e,t,n,r)=>r?rb(e):Vi(e);function sl(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(mr(t)&&mr(n))return!0}return!1}function gE(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function EB(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(mr(n))i=n;else if(typeof n=="function")return;if(mr(r))s=r;else if(typeof r=="function")return;var c=[i,s];if(sl(c))return c}}function wB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(sl(r))return gE(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,c,u;if(i==="auto")t!=null&&(c=Math.min(...t));else if(De(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&oC.test(i)){var d=oC.exec(i);if(d==null||t==null)c=void 0;else{var p=+d[1];c=t[0]-p}}else c=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(De(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&sC.test(s)){var h=sC.exec(s);if(h==null||t==null)u=void 0;else{var m=+h[1];u=t[1]+m}}else u=t?.[1];var y=[c,u];if(sl(y))return t==null?y:gE(y,t,n)}}}var gl=1e9,OB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ob,Ot=!0,Rr="[DecimalError] ",$o=Rr+"Invalid argument: ",ib=Rr+"Exponent out of range: ",yl=Math.floor,To=Math.pow,_B=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fr,dn=1e7,At=7,sT=9007199254740991,Xd=yl(sT/At),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ee.comparedTo=Ee.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*At;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ee.dividedBy=Ee.div=function(e){return Ja(this,new this.constructor(e))};Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,n=t.constructor;return mt(Ja(t,new n(e),0,1),n.precision)};Ee.equals=Ee.eq=function(e){return!this.cmp(e)};Ee.exponent=function(){return Zt(this)};Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0};Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2};Ee.isNegative=Ee.isneg=function(){return this.s<0};Ee.isPositive=Ee.ispos=function(){return this.s>0};Ee.isZero=function(){return this.s===0};Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0};Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1};Ee.logarithm=Ee.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(fr))throw Error(Rr+"NaN");if(n.s<1)throw Error(Rr+(n.s?"NaN":"-Infinity"));return n.eq(fr)?new r(0):(Ot=!1,t=Ja(au(n,s),au(e,s),s),Ot=!0,mt(t,i))};Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uT(t,e):lT(t,(e.s=-e.s,e))};Ee.modulo=Ee.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Rr+"NaN");return n.s?(Ot=!1,t=Ja(n,e,0,1).times(e),Ot=!0,n.minus(t)):mt(new r(n),i)};Ee.naturalExponential=Ee.exp=function(){return cT(this)};Ee.naturalLogarithm=Ee.ln=function(){return au(this)};Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lT(t,e):uT(t,(e.s=-e.s,e))};Ee.precision=Ee.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error($o+e);if(t=Zt(i)+1,r=i.d.length-1,n=r*At+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ee.squareRoot=Ee.sqrt=function(){var e,t,n,r,i,s,c,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Rr+"NaN")}for(e=Zt(u),Ot=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ya(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=yl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new d(t)):r=new d(i.toString()),n=d.precision,i=c=n+3;;)if(s=r,r=s.plus(Ja(u,s,c+2)).times(.5),ya(s.d).slice(0,c)===(t=ya(r.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(mt(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;c+=4}return Ot=!0,mt(r,n)};Ee.times=Ee.mul=function(e){var t,n,r,i,s,c,u,d,p,h=this,m=h.constructor,y=h.d,x=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,d=y.length,p=x.length,d<p&&(s=y,y=x,x=s,c=d,d=p,p=c),s=[],c=d+p,r=c;r--;)s.push(0);for(r=p;--r>=0;){for(t=0,i=d+r;i>r;)u=s[i]+x[r]*y[i-r-1]+t,s[i--]=u%dn|0,t=u/dn|0;s[i]=(s[i]+t)%dn|0}for(;!s[--c];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Ot?mt(e,m.precision):e};Ee.toDecimalPlaces=Ee.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(xa(e,0,gl),t===void 0?t=r.rounding:xa(t,0,8),mt(n,e+Zt(n)+1,t))};Ee.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Go(r,!0):(xa(e,0,gl),t===void 0?t=i.rounding:xa(t,0,8),r=mt(new i(r),e+1,t),n=Go(r,!0,e+1)),n};Ee.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Go(i):(xa(e,0,gl),t===void 0?t=s.rounding:xa(t,0,8),r=mt(new s(i),e+Zt(i)+1,t),n=Go(r.abs(),!1,e+Zt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return mt(new t(e),Zt(e)+1,t.rounding)};Ee.toNumber=function(){return+this};Ee.toPower=Ee.pow=function(e){var t,n,r,i,s,c,u=this,d=u.constructor,p=12,h=+(e=new d(e));if(!e.s)return new d(fr);if(u=new d(u),!u.s){if(e.s<1)throw Error(Rr+"Infinity");return u}if(u.eq(fr))return u;if(r=d.precision,e.eq(fr))return mt(u,r);if(t=e.e,n=e.d.length-1,c=t>=n,s=u.s,c){if((n=h<0?-h:h)<=sT){for(i=new d(fr),t=Math.ceil(r/At+4),Ot=!1;n%2&&(i=i.times(u),vE(i.d,t)),n=yl(n/2),n!==0;)u=u.times(u),vE(u.d,t);return Ot=!0,e.s<0?new d(fr).div(i):mt(i,r)}}else if(s<0)throw Error(Rr+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,Ot=!1,i=e.times(au(u,r+p)),Ot=!0,i=cT(i),i.s=s,i};Ee.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Zt(i),r=Go(i,n<=s.toExpNeg||n>=s.toExpPos)):(xa(e,1,gl),t===void 0?t=s.rounding:xa(t,0,8),i=mt(new s(i),e,t),n=Zt(i),r=Go(i,e<=n||n<=s.toExpNeg,e)),r};Ee.toSignificantDigits=Ee.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(xa(e,1,gl),t===void 0?t=r.rounding:xa(t,0,8)),mt(new r(n),e,t)};Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Zt(e),n=e.constructor;return Go(e,t<=n.toExpNeg||t>=n.toExpPos)};function lT(e,t){var n,r,i,s,c,u,d,p,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Ot?mt(t,m):t;if(d=e.d,p=t.d,c=e.e,i=t.e,d=d.slice(),s=c-i,s){for(s<0?(r=d,s=-s,u=p.length):(r=p,i=c,u=d.length),c=Math.ceil(m/At),u=c>u?c+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=d.length,s=p.length,u-s<0&&(s=u,r=p,p=d,d=r),n=0;s;)n=(d[--s]=d[s]+p[s]+n)/dn|0,d[s]%=dn;for(n&&(d.unshift(n),++i),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=i,Ot?mt(t,m):t}function xa(e,t,n){if(e!==~~e||e<t||e>n)throw Error($o+e)}function ya(e){var t,n,r,i=e.length-1,s="",c=e[0];if(i>0){for(s+=c,t=1;t<i;t++)r=e[t]+"",n=At-r.length,n&&(s+=Ii(n)),s+=r;c=e[t],r=c+"",n=At-r.length,n&&(s+=Ii(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var Ja=(function(){function e(r,i){var s,c=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+c,r[u]=s%dn|0,c=s/dn|0;return c&&r.unshift(c),r}function t(r,i,s,c){var u,d;if(s!=c)d=s>c?1:-1;else for(u=d=0;u<s;u++)if(r[u]!=i[u]){d=r[u]>i[u]?1:-1;break}return d}function n(r,i,s){for(var c=0;s--;)r[s]-=c,c=r[s]<i[s]?1:0,r[s]=c*dn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,c){var u,d,p,h,m,y,x,S,P,C,w,O,_,M,k,D,L,$,Z=r.constructor,ae=r.s==i.s?1:-1,H=r.d,re=i.d;if(!r.s)return new Z(r);if(!i.s)throw Error(Rr+"Division by zero");for(d=r.e-i.e,L=re.length,k=H.length,x=new Z(ae),S=x.d=[],p=0;re[p]==(H[p]||0);)++p;if(re[p]>(H[p]||0)&&--d,s==null?O=s=Z.precision:c?O=s+(Zt(r)-Zt(i))+1:O=s,O<0)return new Z(0);if(O=O/At+2|0,p=0,L==1)for(h=0,re=re[0],O++;(p<k||h)&&O--;p++)_=h*dn+(H[p]||0),S[p]=_/re|0,h=_%re|0;else{for(h=dn/(re[0]+1)|0,h>1&&(re=e(re,h),H=e(H,h),L=re.length,k=H.length),M=L,P=H.slice(0,L),C=P.length;C<L;)P[C++]=0;$=re.slice(),$.unshift(0),D=re[0],re[1]>=dn/2&&++D;do h=0,u=t(re,P,L,C),u<0?(w=P[0],L!=C&&(w=w*dn+(P[1]||0)),h=w/D|0,h>1?(h>=dn&&(h=dn-1),m=e(re,h),y=m.length,C=P.length,u=t(m,P,y,C),u==1&&(h--,n(m,L<y?$:re,y))):(h==0&&(u=h=1),m=re.slice()),y=m.length,y<C&&m.unshift(0),n(P,m,C),u==-1&&(C=P.length,u=t(re,P,L,C),u<1&&(h++,n(P,L<C?$:re,C))),C=P.length):u===0&&(h++,P=[0]),S[p++]=h,u&&P[0]?P[C++]=H[M]||0:(P=[H[M]],C=1);while((M++<k||P[0]!==void 0)&&O--)}return S[0]||S.shift(),x.e=d,mt(x,c?s+Zt(x)+1:s)}})();function cT(e,t){var n,r,i,s,c,u,d=0,p=0,h=e.constructor,m=h.precision;if(Zt(e)>16)throw Error(ib+Zt(e));if(!e.s)return new h(fr);for(Ot=!1,u=m,c=new h(.03125);e.abs().gte(.1);)e=e.times(c),p+=5;for(r=Math.log(To(2,p))/Math.LN10*2+5|0,u+=r,n=i=s=new h(fr),h.precision=u;;){if(i=mt(i.times(e),u),n=n.times(++d),c=s.plus(Ja(i,n,u)),ya(c.d).slice(0,u)===ya(s.d).slice(0,u)){for(;p--;)s=mt(s.times(s),u);return h.precision=m,t==null?(Ot=!0,mt(s,m)):s}s=c}}function Zt(e){for(var t=e.e*At,n=e.d[0];n>=10;n/=10)t++;return t}function Py(e,t,n){if(t>e.LN10.sd())throw Ot=!0,n&&(e.precision=n),Error(Rr+"LN10 precision limit exceeded");return mt(new e(e.LN10),t)}function Ii(e){for(var t="";e--;)t+="0";return t}function au(e,t){var n,r,i,s,c,u,d,p,h,m=1,y=10,x=e,S=x.d,P=x.constructor,C=P.precision;if(x.s<1)throw Error(Rr+(x.s?"NaN":"-Infinity"));if(x.eq(fr))return new P(0);if(t==null?(Ot=!1,p=C):p=t,x.eq(10))return t==null&&(Ot=!0),Py(P,p);if(p+=y,P.precision=p,n=ya(S),r=n.charAt(0),s=Zt(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=ya(x.d),r=n.charAt(0),m++;s=Zt(x),r>1?(x=new P("0."+n),s++):x=new P(r+"."+n.slice(1))}else return d=Py(P,p+2,C).times(s+""),x=au(new P(r+"."+n.slice(1)),p-y).plus(d),P.precision=C,t==null?(Ot=!0,mt(x,C)):x;for(u=c=x=Ja(x.minus(fr),x.plus(fr),p),h=mt(x.times(x),p),i=3;;){if(c=mt(c.times(h),p),d=u.plus(Ja(c,new P(i),p)),ya(d.d).slice(0,p)===ya(u.d).slice(0,p))return u=u.times(2),s!==0&&(u=u.plus(Py(P,p+2,C).times(s+""))),u=Ja(u,new P(m),p),P.precision=C,t==null?(Ot=!0,mt(u,C)):u;u=d,i+=2}}function yE(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=yl(n/At),e.d=[],r=(n+1)%At,n<0&&(r+=At),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=At;r<i;)e.d.push(+t.slice(r,r+=At));t=t.slice(r),r=At-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Ot&&(e.e>Xd||e.e<-Xd))throw Error(ib+n)}else e.s=0,e.e=0,e.d=[0];return e}function mt(e,t,n){var r,i,s,c,u,d,p,h,m=e.d;for(c=1,s=m[0];s>=10;s/=10)c++;if(r=t-c,r<0)r+=At,i=t,p=m[h=0];else{if(h=Math.ceil((r+1)/At),s=m.length,h>=s)return e;for(p=s=m[h],c=1;s>=10;s/=10)c++;r%=At,i=r-At+c}if(n!==void 0&&(s=To(10,c-i-1),u=p/s%10|0,d=t<0||m[h+1]!==void 0||p%s,d=n<4?(u||d)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(r>0?i>0?p/To(10,c-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return d?(s=Zt(e),m.length=1,t=t-s-1,m[0]=To(10,(At-t%At)%At),e.e=yl(-t/At)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=h,s=1,h--):(m.length=h+1,s=To(10,At-r),m[h]=i>0?(p/To(10,c-i)%To(10,i)|0)*s:0),d)for(;;)if(h==0){(m[0]+=s)==dn&&(m[0]=1,++e.e);break}else{if(m[h]+=s,m[h]!=dn)break;m[h--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(Ot&&(e.e>Xd||e.e<-Xd))throw Error(ib+Zt(e));return e}function uT(e,t){var n,r,i,s,c,u,d,p,h,m,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Ot?mt(t,x):t;if(d=e.d,m=t.d,r=t.e,p=e.e,d=d.slice(),c=p-r,c){for(h=c<0,h?(n=d,c=-c,u=m.length):(n=m,r=p,u=d.length),i=Math.max(Math.ceil(x/At),u)+2,c>i&&(c=i,n.length=1),n.reverse(),i=c;i--;)n.push(0);n.reverse()}else{for(i=d.length,u=m.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(d[i]!=m[i]){h=d[i]<m[i];break}c=0}for(h&&(n=d,d=m,m=n,t.s=-t.s),u=d.length,i=m.length-u;i>0;--i)d[u++]=0;for(i=m.length;i>c;){if(d[--i]<m[i]){for(s=i;s&&d[--s]===0;)d[s]=dn-1;--d[s],d[i]+=dn}d[i]-=m[i]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(t.d=d,t.e=r,Ot?mt(t,x):t):new y(0)}function Go(e,t,n){var r,i=Zt(e),s=ya(e.d),c=s.length;return t?(n&&(r=n-c)>0?s=s.charAt(0)+"."+s.slice(1)+Ii(r):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ii(-i-1)+s,n&&(r=n-c)>0&&(s+=Ii(r))):i>=c?(s+=Ii(i+1-c),n&&(r=n-i-1)>0&&(s=s+"."+Ii(r))):((r=i+1)<c&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-c)>0&&(i+1===c&&(s+="."),s+=Ii(r))),e.s<0?"-"+s:s}function vE(e,t){if(e.length>t)return e.length=t,!0}function fT(e){var t,n,r;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error($o+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return yE(c,s.toString())}else if(typeof s!="string")throw Error($o+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,_B.test(s))yE(c,s);else throw Error($o+s)}if(i.prototype=Ee,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=fT,i.config=i.set=TB,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function TB(e){if(!e||typeof e!="object")throw Error(Rr+"Object expected");var t,n,r,i=["precision",1,gl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(yl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error($o+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error($o+n+": "+r);return this}var ob=fT(OB);fr=new ob(1);const ot=ob;var DB=e=>e,dT={},hT=e=>e===dT,bE=e=>function t(){return arguments.length===0||arguments.length===1&&hT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},pT=(e,t)=>e===1?t:bE(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(c=>c!==dT).length;return s>=e?t(...r):pT(e-s,bE(function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];var p=r.map(h=>hT(h)?u.shift():h);return t(...p,...u)}))}),Mh=e=>pT(e.length,e),j0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},kB=Mh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),NB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return DB;var i=n.reverse(),s=i[0],c=i.slice(1);return function(){return c.reduce((u,d)=>d(u),s(...arguments))}},R0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),mT=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((c,u)=>{var d;return c===((d=t)===null||d===void 0?void 0:d[u])})||(t=i,n=e(...i)),n}};function gT(e){var t;return e===0?t=1:t=Math.floor(new ot(e).abs().log(10).toNumber())+1,t}function yT(e,t,n){for(var r=new ot(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Mh((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Mh((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Mh((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var vT=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},bT=(e,t,n)=>{if(e.lte(0))return new ot(0);var r=gT(e.toNumber()),i=new ot(10).pow(r),s=e.div(i),c=r!==1?.05:.1,u=new ot(Math.ceil(s.div(c).toNumber())).add(n).mul(c),d=u.mul(i);return t?new ot(d.toNumber()):new ot(Math.ceil(d.toNumber()))},MB=(e,t,n)=>{var r=new ot(1),i=new ot(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new ot(10).pow(gT(e)-1),i=new ot(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new ot(Math.floor(e)))}else e===0?i=new ot(Math.floor((t-1)/2)):n||(i=new ot(Math.floor(e)));var c=Math.floor((t-1)/2),u=NB(kB(d=>i.add(new ot(d-c).mul(r)).toNumber()),j0);return u(0,t)},xT=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new ot(0),tickMin:new ot(0),tickMax:new ot(0)};var c=bT(new ot(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new ot(0):(u=new ot(t).add(n).div(2),u=u.sub(new ot(u).mod(c)));var d=Math.ceil(u.sub(t).div(c).toNumber()),p=Math.ceil(new ot(n).sub(u).div(c).toNumber()),h=d+p+1;return h>r?xT(t,n,r,i,s+1):(h<r&&(p=n>0?p+(r-h):p,d=n>0?d:d+(r-h)),{step:c,tickMin:u.sub(new ot(d).mul(c)),tickMax:u.add(new ot(p).mul(c))})};function jB(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[c,u]=vT([t,n]);if(c===-1/0||u===1/0){var d=u===1/0?[c,...j0(0,r-1).map(()=>1/0)]:[...j0(0,r-1).map(()=>-1/0),u];return t>n?R0(d):d}if(c===u)return MB(c,r,i);var{step:p,tickMin:h,tickMax:m}=xT(c,u,s,i,0),y=yT(h,m.add(new ot(.1).mul(p)),p);return t>n?R0(y):y}function RB(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,c]=vT([n,r]);if(s===-1/0||c===1/0)return[n,r];if(s===c)return[s];var u=Math.max(t,2),d=bT(new ot(c).sub(s).div(u-1),i,0),p=[...yT(new ot(s),new ot(c),d),c];return i===!1&&(p=p.map(h=>Math.round(h))),n>r?R0(p):p}var IB=mT(jB),LB=mT(RB),ST=e=>e.rootProps.maxBarSize,$B=e=>e.rootProps.barGap,AT=e=>e.rootProps.barCategoryGap,BB=e=>e.rootProps.barSize,mu=e=>e.rootProps.stackOffset,sb=e=>e.options.chartName,lb=e=>e.rootProps.syncId,PT=e=>e.rootProps.syncMethod,cb=e=>e.options.eventEmitter,Va={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ur={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},jh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},UB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Va.angleAxisId,includeHidden:!1,name:void 0,reversed:Va.reversed,scale:Va.scale,tick:Va.tick,tickCount:void 0,ticks:void 0,type:Va.type,unit:void 0},zB={allowDataOverflow:ur.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ur.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ur.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ur.scale,tick:ur.tick,tickCount:ur.tickCount,ticks:void 0,type:ur.type,unit:void 0},GB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Va.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Va.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Va.scale,tick:Va.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},HB={allowDataOverflow:ur.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ur.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ur.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ur.scale,tick:ur.tick,tickCount:ur.tickCount,ticks:void 0,type:"category",unit:void 0},ub=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?GB:UB,fb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?HB:zB,Rh=e=>e.polarOptions,db=te([ii,oi,an],i_),CT=te([Rh,db],(e,t)=>{if(e!=null)return Rn(e.innerRadius,t,0)}),ET=te([Rh,db],(e,t)=>{if(e!=null)return Rn(e.outerRadius,t,t*.8)}),qB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},wT=te([Rh],qB);te([ub,wT],jh);var OT=te([db,CT,ET],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});te([fb,OT],jh);var _T=te([et,Rh,CT,ET,ii,oi],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:c,cy:u,startAngle:d,endAngle:p}=t;return{cx:Rn(c,i,i/2),cy:Rn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:p,clockWise:!1}}}),_t=(e,t)=>t,gu=(e,t,n)=>n;function hb(e){return e?.id}var sn=e=>{var t=et(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},vl=e=>e.tooltip.settings.axisId,gn=e=>{var t=sn(e),n=vl(e);return yu(e,t,n)},TT=te([gn],e=>e?.dataKey);function DT(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,c=new Map;return e.forEach(u=>{var d,p=(d=u.data)!==null&&d!==void 0?d:r;if(!(p==null||p.length===0)){var h=hb(u);p.forEach((m,y)=>{var x=s==null||i?y:String(wt(m,s,null)),S=wt(m,u.dataKey,0),P;c.has(x)?P=c.get(x):P={},Object.assign(P,{[h]:S}),c.set(x,P)})}}),Array.from(c.values())}function Ih(e){return e.stackId!=null&&e.dataKey!=null}function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(n),!0).forEach(function(r){YB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YB(e,t,n){return(t=FB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FB(e){var t=KB(e,"string");return typeof t=="symbol"?t:t+""}function KB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I0=[0,"auto"],lr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},kT=(e,t)=>e.cartesianAxis.xAxis[t],Xi=(e,t)=>{var n=kT(e,t);return n??lr},cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:I0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:uu},NT=(e,t)=>e.cartesianAxis.yAxis[t],Wi=(e,t)=>{var n=NT(e,t);return n??cr},VB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},pb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??VB},Ht=(e,t,n)=>{switch(t){case"xAxis":return Xi(e,n);case"yAxis":return Wi(e,n);case"zAxis":return pb(e,n);case"angleAxis":return ub(e,n);case"radiusAxis":return fb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},XB=(e,t,n)=>{switch(t){case"xAxis":return Xi(e,n);case"yAxis":return Wi(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},yu=(e,t,n)=>{switch(t){case"xAxis":return Xi(e,n);case"yAxis":return Wi(e,n);case"angleAxis":return ub(e,n);case"radiusAxis":return fb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},MT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function mb(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var gb=e=>e.graphicalItems.cartesianItems,WB=te([_t,gu],mb),yb=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),vu=te([gb,Ht,WB],yb),jT=te([vu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Ih)),RT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),IT=te([vu],RT),vb=e=>e.map(t=>t.data).filter(Boolean).flat(1),QB=te([vu],vb),bb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},xb=te([QB,ab],bb),Sb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:wt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:wt(i,r)}))):e.map(r=>({value:r})),Lh=te([xb,Ht,vu],Sb);function LT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Qo(e){return e.filter(t=>ba(t)||t instanceof Date).map(Number).filter(t=>hr(t)===!1)}function ZB(e,t,n){return!n||typeof t!="number"||hr(t)?[]:n.length?Qo(n.flatMap(r=>{var i=wt(e,r.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!mr(s)||!mr(c)))return[t-s,t+c]})):[]}var JB=te([jT,ab,gn],DT),$T=(e,t,n)=>{var r={},i=t.reduce((s,c)=>(c.stackId==null||(s[c.stackId]==null&&(s[c.stackId]=[]),s[c.stackId].push(c)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[c,u]=s,d=u.map(hb);return[c,{stackedData:rL(e,d,n),graphicalItems:u}]}))},L0=te([JB,jT,mu],$T),BT=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=lL(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},e8=te([L0,Vi,_t],BT),UT=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(c=>{var u,d,p=(u=r[c.id])===null||u===void 0?void 0:u.filter(m=>LT(i,m)),h=wt(s,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey);return{value:h,errorDomain:ZB(s,h,p)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:wt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),$h=e=>e.errorBars,zT=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>LT(n,r));te([IT,$h,_t],zT);var t8=te([xb,Ht,IT,$h,_t],UT);function n8(e){var{value:t}=e;if(ba(t)||t instanceof Date)return t}var SE=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Qo(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},r8=(e,t,n)=>{var r=e.map(n8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&J2(r))?w_(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},Ab=e=>{var t;if(e==null||!("domain"in e))return I0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Qo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:I0},Qd=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),u=Math.max(...s);return[c,u]}},GT=e=>e.referenceElements.dots,bl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),a8=te([GT,_t,gu],bl),HT=e=>e.referenceElements.areas,i8=te([HT,_t,gu],bl),qT=e=>e.referenceElements.lines,o8=te([qT,_t,gu],bl),YT=(e,t)=>{var n=Qo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},s8=te(a8,_t,YT),FT=(e,t)=>{var n=Qo(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},l8=te([i8,_t],FT),KT=(e,t)=>{var n=Qo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},c8=te(o8,_t,KT),u8=te(s8,c8,l8,(e,t,n)=>Qd(e,n,t)),VT=te([Ht],Ab),Pb=(e,t,n,r,i,s,c)=>{var u=EB(t,e.allowDataOverflow);if(u!=null)return u;var d=s==="vertical"&&c==="xAxis"||s==="horizontal"&&c==="yAxis",p=d?Qd(n,i,SE(r)):Qd(i,SE(r));return wB(t,p,e.allowDataOverflow)},f8=te([Ht,VT,e8,t8,u8,et,_t],Pb),d8=[0,1],Cb=(e,t,n,r,i,s,c)=>{if(!((e==null||n==null||n.length===0)&&c===void 0)){var{dataKey:u,type:d}=e,p=Vo(t,s);return p&&u==null?w_(0,n.length):d==="category"?r8(r,e,p):i==="expand"?d8:c}},Eb=te([Ht,et,xb,Lh,mu,_t,f8],Cb),XT=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:c}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(ou(s));return u in $c?u:"point"}}},xl=te([Ht,et,MT,sb,_t],XT);function h8(e){if(e!=null){if(e in $c)return $c[e]();var t="scale".concat(ou(e));if(t in $c)return $c[t]()}}function wb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=h8(t);if(i!=null){var s=i.domain(n).range(r);return Z3(s),s}}}var Ob=(e,t,n)=>{var r=Ab(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&sl(e))return IB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&sl(e))return LB(e,t.tickCount,t.allowDecimals)}},_b=te([Eb,yu,xl],Ob),Tb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&sl(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],c=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(c,u)]}return t},p8=te([Ht,Eb,_b,_t],Tb),m8=te(Lh,Ht,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Qo(e.map(u=>u.value))).sort((u,d)=>u-d);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var c=r[s+1]-r[s];n=Math.min(n,c)}return n/i}}),WT=te(m8,et,AT,an,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!mr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var c=Rn(n,e*s),u=e*s/2;return u-c-(u-c)/s*c}return 0}),g8=(e,t)=>{var n=Xi(e,t);return n==null||typeof n.padding!="string"?0:WT(e,"xAxis",t,n.padding)},y8=(e,t)=>{var n=Wi(e,t);return n==null||typeof n.padding!="string"?0:WT(e,"yAxis",t,n.padding)},v8=te(Xi,g8,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),b8=te(Wi,y8,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),x8=te([an,v8,Ph,Ah,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),S8=te([an,et,b8,Ph,Ah,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:c}=i;return s?[r.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),bu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return x8(e,n,r);case"yAxis":return S8(e,n,r);case"zAxis":return(i=pb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return wT(e);case"radiusAxis":return OT(e,n);default:return}},QT=te([Ht,bu],jh),Sl=te([Ht,xl,p8,QT],wb);te([vu,$h,_t],zT);function ZT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Bh=(e,t)=>t,Uh=(e,t,n)=>n,A8=te(xh,Bh,Uh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(ZT)),P8=te(Sh,Bh,Uh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(ZT)),JT=(e,t)=>({width:e.width,height:t.height}),C8=(e,t)=>{var n=typeof t.width=="number"?t.width:uu;return{width:n,height:e.height}},eD=te(an,Xi,JT),E8=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},w8=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},O8=te(oi,an,A8,Bh,Uh,(e,t,n,r,i)=>{var s={},c;return n.forEach(u=>{var d=JT(t,u);c==null&&(c=E8(t,r,e));var p=r==="top"&&!i||r==="bottom"&&i;s[u.id]=c-Number(p)*d.height,c+=(p?-1:1)*d.height}),s}),_8=te(ii,an,P8,Bh,Uh,(e,t,n,r,i)=>{var s={},c;return n.forEach(u=>{var d=C8(t,u);c==null&&(c=w8(t,r,e));var p=r==="left"&&!i||r==="right"&&i;s[u.id]=c-Number(p)*d.width,c+=(p?-1:1)*d.width}),s}),T8=(e,t)=>{var n=an(e),r=Xi(e,t);if(r!=null){var i=O8(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},D8=(e,t)=>{var n=an(e),r=Wi(e,t);if(r!=null){var i=_8(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},tD=te(an,Wi,(e,t)=>{var n=typeof t.width=="number"?t.width:uu;return{width:n,height:e.height}}),AE=(e,t,n)=>{switch(t){case"xAxis":return eD(e,n).width;case"yAxis":return tD(e,n).height;default:return}},nD=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=n,u=Vo(e,r),d=t.map(p=>p.value);if(c&&u&&s==="category"&&i&&J2(d))return d}},Db=te([et,Lh,Ht,_t],nD),rD=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,c=Vo(e,r);if(c&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},kb=te([et,Lh,yu,_t],rD),PE=te([et,XB,xl,Sl,Db,kb,bu,_b,_t],(e,t,n,r,i,s,c,u,d)=>{if(t==null)return null;var p=Vo(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:s,duplicateDomain:i,isCategorical:p,niceTicks:u,range:c,realScaleType:n,scale:r}}),k8=(e,t,n,r,i,s,c,u,d)=>{if(!(t==null||r==null)){var p=Vo(e,d),{type:h,ticks:m,tickCount:y}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=h==="category"&&r.bandwidth?r.bandwidth()/x:0;S=d==="angleAxis"&&s!=null&&s.length>=2?hn(s[0]-s[1])*2*S:S;var P=m||i;if(P){var C=P.map((w,O)=>{var _=c?c.indexOf(w):w;return{index:O,coordinate:r(_)+S,value:w,offset:S}});return C.filter(w=>!hr(w.coordinate))}return p&&u?u.map((w,O)=>({coordinate:r(w)+S,value:w,index:O,offset:S})):r.ticks?r.ticks(y).map(w=>({coordinate:r(w)+S,value:w,offset:S})):r.domain().map((w,O)=>({coordinate:r(w)+S,value:c?c[w]:w,index:O,offset:S}))}},aD=te([et,yu,xl,Sl,_b,bu,Db,kb,_t],k8),N8=(e,t,n,r,i,s,c)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Vo(e,c),{tickCount:d}=t,p=0;return p=c==="angleAxis"&&r?.length>=2?hn(r[0]-r[1])*2*p:p,u&&s?s.map((h,m)=>({coordinate:n(h)+p,value:h,index:m,offset:p})):n.ticks?n.ticks(d).map(h=>({coordinate:n(h)+p,value:h,offset:p})):n.domain().map((h,m)=>({coordinate:n(h)+p,value:i?i[h]:h,index:m,offset:p}))}},ll=te([et,yu,Sl,bu,Db,kb,_t],N8),cl=te(Ht,Sl,(e,t)=>{if(!(e==null||t==null))return Wd(Wd({},e),{},{scale:t})}),M8=te([Ht,xl,Eb,QT],wb);te((e,t,n)=>pb(e,n),M8,(e,t)=>{if(!(e==null||t==null))return Wd(Wd({},e),{},{scale:t})});var j8=te([et,xh,Sh],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),iD=e=>e.options.defaultTooltipEventType,oD=e=>e.options.validateTooltipEventTypes;function sD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Nb(e,t){var n=iD(e),r=oD(e);return sD(t,n,r)}function R8(e){return _e(t=>Nb(t,e))}var lD=(e,t)=>{var n,r=Number(t);if(!(hr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},I8=e=>e.tooltip.settings,$i={active:!1,index:null,dataKey:void 0,coordinate:void 0},L8={itemInteraction:{click:$i,hover:$i},axisInteraction:{click:$i,hover:$i},keyboardInteraction:$i,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},cD=gr({name:"tooltip",initialState:L8,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Za(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:$8,removeTooltipEntrySettings:B8,setTooltipSettingsState:U8,setActiveMouseOverItemIndex:uD,mouseLeaveItem:z8,mouseLeaveChart:fD,setActiveClickItemIndex:G8,setMouseOverAxisIndex:dD,setMouseClickAxisIndex:H8,setSyncInteraction:$0,setKeyboardInteraction:B0}=cD.actions,q8=cD.reducer;function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(r){Y8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y8(e,t,n){return(t=F8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F8(e){var t=K8(e,"string");return typeof t=="symbol"?t:t+""}function K8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V8(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function X8(e){return e.index!=null}var hD=(e,t,n,r)=>{if(t==null)return $i;var i=V8(e,t,n);if(i==null)return $i;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(X8(i)){if(s)return sd(sd({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return sd(sd({},$i),{},{coordinate:i.coordinate})},Mb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!mr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},pD=(e,t,n,r,i,s,c,u)=>{if(!(s==null||u==null)){var d=c[0],p=d==null?void 0:u(d.positions,s);if(p!=null)return p;var h=i?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},mD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var c;return((c=s.settings)===null||c===void 0?void 0:c.dataKey)===i})},xu=e=>e.options.tooltipPayloadSearcher,Al=e=>e.tooltip;function EE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(n),!0).forEach(function(r){W8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W8(e,t,n){return(t=Q8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q8(e){var t=Z8(e,"string");return typeof t=="symbol"?t:t+""}function Z8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J8(e,t){return e??t}var gD=(e,t,n,r,i,s,c)=>{if(!(t==null||s==null)){var{chartData:u,computedData:d,dataStartIndex:p,dataEndIndex:h}=n,m=[];return e.reduce((y,x)=>{var S,{dataDefinedOnItem:P,settings:C}=x,w=J8(P,u),O=Array.isArray(w)?o_(w,p,h):w,_=(S=C?.dataKey)!==null&&S!==void 0?S:r,M=C?.nameKey,k;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&c==="axis"?k=zR(O,r,i):k=s(O,t,d,M),Array.isArray(k))k.forEach(L=>{var $=wE(wE({},C),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});y.push(lC({tooltipEntrySettings:$,dataKey:L.dataKey,payload:L.payload,value:wt(L.payload,L.dataKey),name:L.name}))});else{var D;y.push(lC({tooltipEntrySettings:C,dataKey:_,payload:k,value:wt(k,_),name:(D=wt(k,M))!==null&&D!==void 0?D:C?.name}))}return y},m)}},jb=te([gn,et,MT,sb,sn],XT),eU=te([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),tU=te([sn,vl],mb),Su=te([eU,gn,tU],yb),nU=te([Su],e=>e.filter(Ih)),rU=te([Su],vb),Pl=te([rU,Vi],bb),aU=te([nU,Vi,gn],DT),Rb=te([Pl,gn,Su],Sb),iU=te([gn],Ab),oU=te([Su],e=>e.filter(Ih)),sU=te([aU,oU,mu],$T),lU=te([sU,Vi,sn],BT),cU=te([Su],RT),uU=te([Pl,gn,cU,$h,sn],UT),fU=te([GT,sn,vl],bl),dU=te([fU,sn],YT),hU=te([HT,sn,vl],bl),pU=te([hU,sn],FT),mU=te([qT,sn,vl],bl),gU=te([mU,sn],KT),yU=te([dU,gU,pU],Qd),vU=te([gn,iU,lU,uU,yU,et,sn],Pb),yD=te([gn,et,Pl,Rb,mu,sn,vU],Cb),bU=te([yD,gn,jb],Ob),xU=te([gn,yD,bU,sn],Tb),vD=e=>{var t=sn(e),n=vl(e),r=!1;return bu(e,t,n,r)},bD=te([gn,vD],jh),xD=te([gn,jb,xU,bD],wb),SU=te([et,Rb,gn,sn],nD),AU=te([et,Rb,gn,sn],rD),PU=(e,t,n,r,i,s,c,u)=>{if(t){var{type:d}=t,p=Vo(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=d==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?hn(i[0]-i[1])*2*m:m,p&&c?c.map((y,x)=>({coordinate:r(y)+m,value:y,index:x,offset:m})):r.domain().map((y,x)=>({coordinate:r(y)+m,value:s?s[y]:y,index:x,offset:m}))}}},li=te([et,gn,jb,xD,vD,SU,AU,sn],PU),Ib=te([iD,oD,I8],(e,t,n)=>sD(n.shared,e,t)),SD=e=>e.tooltip.settings.trigger,Lb=e=>e.tooltip.settings.defaultIndex,zh=te([Al,Ib,SD,Lb],hD),Ho=te([zh,Pl],Mb),AD=te([li,Ho],lD),PD=te([zh],e=>{if(e)return e.dataKey}),CD=te([Al,Ib,SD,Lb],mD),CU=te([ii,oi,et,an,li,Lb,CD,xu],pD),EU=te([zh,CU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),wU=te([zh],e=>e.active),OU=te([CD,Ho,Vi,TT,AD,xu,Ib],gD);te([OU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(n),!0).forEach(function(r){_U(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _U(e,t,n){return(t=TU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TU(e){var t=DU(e,"string");return typeof t=="symbol"?t:t+""}function DU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kU=()=>_e(gn),NU=()=>{var e=kU(),t=_e(li),n=_e(xD);return Ov(_E(_E({},e),{},{scale:n}),t)},MU=()=>_e(sb),$b=(e,t)=>t,ED=(e,t,n)=>n,Bb=(e,t,n,r)=>r,jU=te(li,e=>hh(e,t=>t.coordinate)),Ub=te([Al,$b,ED,Bb],hD),wD=te([Ub,Pl],Mb),RU=(e,t,n)=>{if(t!=null){var r=Al(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},OD=te([Al,$b,ED,Bb],mD),Zd=te([ii,oi,et,an,li,Bb,OD,xu],pD),IU=te([Ub,Zd],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),_D=te(li,wD,lD),LU=te([OD,wD,Vi,TT,_D,xu,$b],gD),$U=te([Ub],e=>({isActive:e.active,activeIndex:e.index})),BU=(e,t,n,r,i,s,c,u)=>{if(!(!e||!t||!r||!i||!s)){var d=cL(e.chartX,e.chartY,t,n,u);if(d){var p=fL(d,t),h=W3(p,c,s,r,i),m=uL(t,s,h,d);return{activeIndex:String(h),activeCoordinate:m}}}};function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U0.apply(null,arguments)}function TE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TE(Object(n),!0).forEach(function(r){UU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UU(e,t,n){return(t=zU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zU(e){var t=GU(e,"string");return typeof t=="symbol"?t:t+""}function GU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:c,cursor:u,tooltipEventType:d,chartName:p}=e,h=t,m=n,y=r;if(!u||!h||p!=="ScatterChart"&&d!=="axis")return null;var x,S;if(p==="ScatterChart")x=h,S=f5;else if(p==="BarChart")x=d5(c,h,i,s),S=A_;else if(c==="radial"){var{cx:P,cy:C,radius:w,startAngle:O,endAngle:_}=P_(h);x={cx:P,cy:C,startAngle:O,endAngle:_,innerRadius:w,outerRadius:w},S=E_}else x={points:Y5(c,h,i)},S=y_;var M=typeof u=="object"&&"className"in u?u.className:void 0,k=ld(ld(ld(ld({stroke:"#ccc",pointerEvents:"none"},i),x),Wt(u,!1)),{},{payload:m,payloadIndex:y,className:st("recharts-tooltip-cursor",M)});return A.isValidElement(u)?A.cloneElement(u,k):A.createElement(S,k)}function qU(e){var t=NU(),n=d_(),r=Nv(),i=MU();return A.createElement(HU,U0({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var TD=A.createContext(null),YU=()=>A.useContext(TD),Cy={exports:{}},DE;function FU(){return DE||(DE=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,p,h){this.fn=d,this.context=p,this.once=h||!1}function s(d,p,h,m,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,m||d,y),S=n?n+p:p;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],x]:d._events[S].push(x):(d._events[S]=x,d._eventsCount++),d}function c(d,p){--d._eventsCount===0?d._events=new r:delete d._events[p]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var p=[],h,m;if(this._eventsCount===0)return p;for(m in h=this._events)t.call(h,m)&&p.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},u.prototype.listeners=function(p){var h=n?n+p:p,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,x=m.length,S=new Array(x);y<x;y++)S[y]=m[y].fn;return S},u.prototype.listenerCount=function(p){var h=n?n+p:p,m=this._events[h];return m?m.fn?1:m.length:0},u.prototype.emit=function(p,h,m,y,x,S){var P=n?n+p:p;if(!this._events[P])return!1;var C=this._events[P],w=arguments.length,O,_;if(C.fn){switch(C.once&&this.removeListener(p,C.fn,void 0,!0),w){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,m),!0;case 4:return C.fn.call(C.context,h,m,y),!0;case 5:return C.fn.call(C.context,h,m,y,x),!0;case 6:return C.fn.call(C.context,h,m,y,x,S),!0}for(_=1,O=new Array(w-1);_<w;_++)O[_-1]=arguments[_];C.fn.apply(C.context,O)}else{var M=C.length,k;for(_=0;_<M;_++)switch(C[_].once&&this.removeListener(p,C[_].fn,void 0,!0),w){case 1:C[_].fn.call(C[_].context);break;case 2:C[_].fn.call(C[_].context,h);break;case 3:C[_].fn.call(C[_].context,h,m);break;case 4:C[_].fn.call(C[_].context,h,m,y);break;default:if(!O)for(k=1,O=new Array(w-1);k<w;k++)O[k-1]=arguments[k];C[_].fn.apply(C[_].context,O)}}return!0},u.prototype.on=function(p,h,m){return s(this,p,h,m,!1)},u.prototype.once=function(p,h,m){return s(this,p,h,m,!0)},u.prototype.removeListener=function(p,h,m,y){var x=n?n+p:p;if(!this._events[x])return this;if(!h)return c(this,x),this;var S=this._events[x];if(S.fn)S.fn===h&&(!y||S.once)&&(!m||S.context===m)&&c(this,x);else{for(var P=0,C=[],w=S.length;P<w;P++)(S[P].fn!==h||y&&!S[P].once||m&&S[P].context!==m)&&C.push(S[P]);C.length?this._events[x]=C.length===1?C[0]:C:c(this,x)}return this},u.prototype.removeAllListeners=function(p){var h;return p?(h=n?n+p:p,this._events[h]&&c(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Cy)),Cy.exports}var KU=FU();const VU=Qr(KU);var iu=new VU,z0="recharts.syncEvent.tooltip",kE="recharts.syncEvent.brush";function DD(e,t){if(t){var n=Number.parseInt(t,10);if(!hr(n))return e?.[n]}}var XU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},kD=gr({name:"options",initialState:XU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),WU=kD.reducer,{createEventEmitter:QU}=kD.actions;function ZU(e){return e.tooltip.syncInteraction}var JU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ND=gr({name:"chartData",initialState:JU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:NE,setDataStartEndIndexes:ez,setComputedData:zY}=ND.actions,tz=ND.reducer,nz=["x","y"];function ME(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(n),!0).forEach(function(r){rz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rz(e,t,n){return(t=az(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function az(e){var t=iz(e,"string");return typeof t=="symbol"?t:t+""}function iz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oz(e,t){if(e==null)return{};var n,r,i=sz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var MD=()=>{};function lz(){var e=_e(lb),t=_e(cb),n=jt(),r=_e(PT),i=_e(li),s=Nv(),c=Tv(),u=_e(d=>d.rootProps.className);A.useEffect(()=>{if(e==null)return MD;var d=(p,h,m)=>{if(t!==m&&e===p){if(r==="index"){var y;if(c&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate){var x=h.payload.coordinate,{x:S,y:P}=x,C=oz(x,nz),w=Eo(Eo(Eo({},C),typeof S=="number"&&{x:Math.max(c.x,Math.min(S,c.x+c.width))}),typeof P=="number"&&{y:Math.max(c.y,Math.min(P,c.y+c.height))}),O=Eo(Eo({},h),{},{payload:Eo(Eo({},h.payload),{},{coordinate:w})});n(O)}else n(h);return}if(i!=null){var _;if(typeof r=="function"){var M={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},k=r(i,M);_=i[k]}else r==="value"&&(_=i.find(me=>String(me.value)===h.payload.label));var{coordinate:D}=h.payload;if(_==null||h.payload.active===!1||D==null||c==null){n($0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:L,y:$}=D,Z=Math.min(L,c.x+c.width),ae=Math.min($,c.y+c.height),H={x:s==="horizontal"?_.coordinate:Z,y:s==="horizontal"?ae:_.coordinate},re=$0({active:h.payload.active,coordinate:H,dataKey:h.payload.dataKey,index:String(_.index),label:h.payload.label});n(re)}}};return iu.on(z0,d),()=>{iu.off(z0,d)}},[u,n,t,e,r,i,s,c])}function cz(){var e=_e(lb),t=_e(cb),n=jt();A.useEffect(()=>{if(e==null)return MD;var r=(i,s,c)=>{t!==c&&e===i&&n(ez(s))};return iu.on(kE,r),()=>{iu.off(kE,r)}},[n,t,e])}function uz(){var e=jt();A.useEffect(()=>{e(QU())},[e]),lz(),cz()}function fz(e,t,n,r,i,s){var c=_e(y=>RU(y,e,t)),u=_e(cb),d=_e(lb),p=_e(PT),h=_e(ZU),m=h?.active;A.useEffect(()=>{if(!m&&d!=null&&u!=null){var y=$0({active:s,coordinate:n,dataKey:c,index:i,label:typeof r=="number"?String(r):r});iu.emit(z0,d,y,u)}},[m,n,c,i,r,u,d,p,s])}function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(n),!0).forEach(function(r){dz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dz(e,t,n){return(t=hz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hz(e){var t=pz(e,"string");return typeof t=="symbol"?t:t+""}function pz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mz(e){return e.dataKey}function gz(e,t){return A.isValidElement(e)?A.cloneElement(e,t):typeof e=="function"?A.createElement(e,t):A.createElement(HL,t)}var IE=[],yz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!pl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Ey(e){var t=Lr(e,yz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:c,filterNull:u,isAnimationActive:d,offset:p,payloadUniqBy:h,position:m,reverseDirection:y,useTranslate3d:x,wrapperStyle:S,cursor:P,shared:C,trigger:w,defaultIndex:O,portal:_,axisId:M}=t,k=jt(),D=typeof O=="number"?String(O):O;A.useEffect(()=>{k(U8({shared:C,trigger:w,axisId:M,active:n,defaultIndex:D}))},[k,C,w,M,n,D]);var L=Tv(),$=g_(),Z=R8(C),{activeIndex:ae,isActive:H}=_e(q=>$U(q,Z,w,D)),re=_e(q=>LU(q,Z,w,D)),me=_e(q=>_D(q,Z,w,D)),de=_e(q=>IU(q,Z,w,D)),ve=re,G=YU(),oe=n??H,[be,ne]=jO([ve,oe]),j=Z==="axis"?me:void 0;fz(Z,w,de,j,ae,oe);var X=_??G;if(X==null)return null;var V=ve??IE;oe||(V=IE),u&&V.length&&(V=TO(ve.filter(q=>q.value!=null&&(q.hide!==!0||t.includeHidden)),h,mz));var ue=V.length>0,Ae=A.createElement(WL,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:d,active:oe,coordinate:de,hasPayload:ue,offset:p,position:m,reverseDirection:y,useTranslate3d:x,viewBox:L,wrapperStyle:S,lastBoundingBox:be,innerRef:ne,hasPortalFromProps:!!_},gz(c,RE(RE({},t),{},{payload:V,label:j,active:oe,coordinate:de,accessibilityLayer:$})));return A.createElement(A.Fragment,null,nO.createPortal(Ae,X),oe&&A.createElement(qU,{cursor:P,tooltipEventType:Z,coordinate:de,payload:ve,index:ae}))}var wy={},Oy={},_y={},LE;function vz(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let c,u=null;const d=s!=null&&s.includes("leading"),p=s==null||s.includes("trailing"),h=()=>{u!==null&&(n.apply(c,u),c=void 0,u=null)},m=()=>{p&&h(),P()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,m()},r)},S=()=>{y!==null&&(clearTimeout(y),y=null)},P=()=>{S(),c=void 0,u=null},C=()=>{h()},w=function(...O){if(i?.aborted)return;c=this,u=O;const _=y==null;x(),d&&_&&h()};return w.schedule=x,w.cancel=P,w.flush=C,i?.addEventListener("abort",P,{once:!0}),w}e.debounce=t})(_y)),_y}var $E;function bz(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:u=!0,maxWait:d}=s,p=Array(2);c&&(p[0]="leading"),u&&(p[1]="trailing");let h,m=null;const y=t.debounce(function(...P){h=r.apply(this,P),m=null},i,{edges:p}),x=function(...P){return d!=null&&(m===null&&(m=Date.now()),Date.now()-m>=d)?(h=r.apply(this,P),m=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,P),h)},S=()=>(y.flush(),h);return x.cancel=y.cancel,x.flush=S,x}e.debounce=n})(Oy)),Oy}var BE;function xz(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bz();function n(r,i=0,s={}){const{leading:c=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:c,maxWait:i,trailing:u})}e.throttle=n})(wy)),wy}var Ty,UE;function Sz(){return UE||(UE=1,Ty=xz().throttle),Ty}var Az=Sz();const Pz=Qr(Az);var qc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(n),!0).forEach(function(r){Cz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cz(e,t,n){return(t=Ez(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ez(e){var t=wz(e,"string");return typeof t=="symbol"?t:t+""}function wz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ky=A.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:c=0,minHeight:u,maxHeight:d,children:p,debounce:h=0,id:m,className:y,onResize:x,style:S={}}=e,P=A.useRef(null),C=A.useRef();C.current=x,A.useImperativeHandle(t,()=>P.current);var[w,O]=A.useState({containerWidth:r.width,containerHeight:r.height}),_=A.useCallback((k,D)=>{O(L=>{var $=Math.round(k),Z=Math.round(D);return L.containerWidth===$&&L.containerHeight===Z?L:{containerWidth:$,containerHeight:Z}})},[]);A.useEffect(()=>{var k=Z=>{var ae,{width:H,height:re}=Z[0].contentRect;_(H,re),(ae=C.current)===null||ae===void 0||ae.call(C,H,re)};h>0&&(k=Pz(k,h,{trailing:!0,leading:!1}));var D=new ResizeObserver(k),{width:L,height:$}=P.current.getBoundingClientRect();return _(L,$),D.observe(P.current),()=>{D.disconnect()}},[_,h]);var M=A.useMemo(()=>{var{containerWidth:k,containerHeight:D}=w;if(k<0||D<0)return null;qc(ko(i)||ko(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),qc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var L=ko(i)?k:i,$=ko(s)?D:s;return n&&n>0&&(L?$=L/n:$&&(L=$*n),d&&$>d&&($=d)),qc(L>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,$,i,s,c,u,n),A.Children.map(p,Z=>A.cloneElement(Z,{width:L,height:$,style:Dy({width:L,height:$},Z.props.style)}))},[n,p,s,d,u,c,w,i]);return A.createElement("div",{id:m?"".concat(m):void 0,className:st("recharts-responsive-container",y),style:Dy(Dy({},S),{},{width:i,height:s,minWidth:c,minHeight:u,maxHeight:d}),ref:P},A.createElement("div",{style:{width:0,height:0,overflow:"visible"}},M))}),ul=e=>null;ul.displayName="Cell";function Oz(e,t,n){return(t=_z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _z(e){var t=Tz(e,"string");return typeof t=="symbol"?t:t+""}function Tz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Dz{constructor(t){Oz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(n),!0).forEach(function(r){Nz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nz(e,t,n){return(t=Mz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mz(e){var t=jz(e,"string");return typeof t=="symbol"?t:t+""}function jz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rz={cacheSize:2e3,enableCache:!0},jD=kz({},Rz),HE=new Dz(jD.cacheSize),Iz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qE="recharts_measurement_span";function Lz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",c=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(u)}var YE=(e,t)=>{try{var n=document.getElementById(qE);n||(n=document.createElement("span"),n.setAttribute("id",qE),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Iz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Yc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||pl.isSsr)return{width:0,height:0};if(!jD.enableCache)return YE(t,n);var r=Lz(t,n),i=HE.get(r);if(i)return i;var s=YE(t,n);return HE.set(r,s),s},FE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$z=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Bz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Uz=Object.keys(RD),Vs="NaN";function zz(e,t){return e*RD[t]}class Qn{static parse(t){var n,[,r,i]=(n=Bz.exec(t))!==null&&n!==void 0?n:[];return new Qn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,hr(t)&&(this.unit=""),n!==""&&!$z.test(n)&&(this.num=NaN,this.unit=""),Uz.includes(n)&&(this.num=zz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Qn(NaN,""):new Qn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Qn(NaN,""):new Qn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qn(NaN,""):new Qn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qn(NaN,""):new Qn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return hr(this.num)}}function ID(e){if(e.includes(Vs))return Vs;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=FE.exec(t))!==null&&n!==void 0?n:[],c=Qn.parse(r??""),u=Qn.parse(s??""),d=i==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Vs;t=t.replace(FE,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,[,h,m,y]=(p=KE.exec(t))!==null&&p!==void 0?p:[],x=Qn.parse(h??""),S=Qn.parse(y??""),P=m==="+"?x.add(S):x.subtract(S);if(P.isNaN())return Vs;t=t.replace(KE,P.toString())}return t}var VE=/\(([^()]*)\)/;function Gz(e){for(var t=e,n;(n=VE.exec(t))!=null;){var[,r]=n;t=t.replace(VE,ID(r))}return t}function Hz(e){var t=e.replace(/\s+/g,"");return t=Gz(t),t=ID(t),t}function qz(e){try{return Hz(e)}catch{return Vs}}function Ny(e){var t=qz(e.slice(5,-1));return t===Vs?"":t}var Yz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Fz=["dx","dy","angle","className","breakAll"];function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G0.apply(null,arguments)}function XE(e,t){if(e==null)return{};var n,r,i=Kz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LD=/[ \f\n\r\t\v\u2028\u2029]+/,$D=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];pn(t)||(n?i=t.toString().split(""):i=t.toString().split(LD));var s=i.map(u=>({word:u,width:Yc(u,r).width})),c=n?0:Yc("",r).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},Vz=(e,t,n,r,i)=>{var{maxLines:s,children:c,style:u,breakAll:d}=e,p=De(s),h=c,m=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce((re,me)=>{var{word:de,width:ve}=me,G=re[re.length-1];if(G&&(r==null||i||G.width+ve+n<Number(r)))G.words.push(de),G.width+=ve+n;else{var oe={words:[de],width:ve};re.push(oe)}return re},[])},y=m(t),x=ae=>ae.reduce((H,re)=>H.width>re.width?H:re);if(!p||i)return y;var S=y.length>s||x(y).width>Number(r);if(!S)return y;for(var P="",C=ae=>{var H=h.slice(0,ae),re=$D({breakAll:d,style:u,children:H+P}).wordsWithComputedWidth,me=m(re),de=me.length>s||x(me).width>Number(r);return[de,me]},w=0,O=h.length-1,_=0,M;w<=O&&_<=h.length-1;){var k=Math.floor((w+O)/2),D=k-1,[L,$]=C(D),[Z]=C(k);if(!L&&!Z&&(w=k+1),L&&Z&&(O=k-1),!L&&Z){M=$;break}_++}return M||y},WE=e=>{var t=pn(e)?[]:e.toString().split(LD);return[{words:t}]},Xz=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:c}=e;if((t||n)&&!pl.isSsr){var u,d,p=$D({breakAll:s,children:r,style:i});if(p){var{wordsWithComputedWidth:h,spaceWidth:m}=p;u=h,d=m}else return WE(r);return Vz({breakAll:s,children:r,maxLines:c,style:i},u,d,t,n)}return WE(r)},QE="#808080",Gh=A.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:c=!1,textAnchor:u="start",verticalAnchor:d="end",fill:p=QE}=e,h=XE(e,Yz),m=A.useMemo(()=>Xz({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:y,dy:x,angle:S,className:P,breakAll:C}=h,w=XE(h,Fz);if(!ba(n)||!ba(r)||m.length===0)return null;var O=n+(De(y)?y:0),_=r+(De(x)?x:0),M;switch(d){case"start":M=Ny("calc(".concat(s,")"));break;case"middle":M=Ny("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:M=Ny("calc(".concat(m.length-1," * -").concat(i,")"));break}var k=[];if(c){var D=m[0].width,{width:L}=h;k.push("scale(".concat(De(L)?L/D:1,")"))}return S&&k.push("rotate(".concat(S,", ").concat(O,", ").concat(_,")")),k.length&&(w.transform=k.join(" ")),A.createElement("text",G0({},Wt(w,!0),{ref:t,x:O,y:_,className:st("recharts-text",P),textAnchor:u,fill:p.includes("url")?QE:p}),m.map(($,Z)=>{var ae=$.words.join(C?"":" ");return A.createElement("tspan",{x:O,dy:Z===0?M:i,key:"".concat(ae,"-").concat(Z)},ae)}))});Gh.displayName="Text";var Wz=["labelRef"];function Qz(e,t){if(e==null)return{};var n,r,i=Zz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Zz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(r){Jz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jz(e,t,n){return(t=e7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e7(e){var t=t7(e,"string");return typeof t=="symbol"?t:t+""}function t7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(null,arguments)}var BD=A.createContext(null),n7=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,c=A.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return A.createElement(BD.Provider,{value:c},s)},UD=()=>{var e=A.useContext(BD),t=Tv();return e||t},r7=A.createContext(null),a7=()=>{var e=A.useContext(r7),t=_e(_T);return e||t},i7=e=>{var{value:t,formatter:n}=e,r=pn(e.children)?t:e.children;return typeof n=="function"?n(r):r},zb=e=>e!=null&&typeof e=="function",o7=(e,t)=>{var n=hn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},s7=(e,t,n,r,i)=>{var{offset:s,className:c}=e,{cx:u,cy:d,innerRadius:p,outerRadius:h,startAngle:m,endAngle:y,clockWise:x}=i,S=(p+h)/2,P=o7(m,y),C=P>=0?1:-1,w,O;switch(t){case"insideStart":w=m+C*s,O=x;break;case"insideEnd":w=y-C*s,O=!x;break;case"end":w=y+C*s,O=x;break;default:throw new Error("Unsupported position ".concat(t))}O=P<=0?O:!O;var _=Qt(u,d,S,w),M=Qt(u,d,S,w+(O?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(O?0:1,`,
    `).concat(M.x,",").concat(M.y),D=pn(e.id)?Wc("recharts-radial-line-"):e.id;return A.createElement("text",Xa({},r,{dominantBaseline:"central",className:st("recharts-radial-bar-label",c)}),A.createElement("defs",null,A.createElement("path",{id:D,d:k})),A.createElement("textPath",{xlinkHref:"#".concat(D)},n))},l7=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:c,startAngle:u,endAngle:d}=e,p=(u+d)/2;if(n==="outside"){var{x:h,y:m}=Qt(r,i,c+t,p);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+c)/2,{x,y:S}=Qt(r,i,y,p);return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},zD=e=>"cx"in e&&De(e.cx),c7=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!zD(n)&&(s=n);var{x:c,y:u,width:d,height:p}=t,h=p>=0?1:-1,m=h*r,y=h>0?"end":"start",x=h>0?"start":"end",S=d>=0?1:-1,P=S*r,C=S>0?"end":"start",w=S>0?"start":"end";if(i==="top"){var O={x:c+d/2,y:u-h*r,textAnchor:"middle",verticalAnchor:y};return Gt(Gt({},O),s?{height:Math.max(u-s.y,0),width:d}:{})}if(i==="bottom"){var _={x:c+d/2,y:u+p+m,textAnchor:"middle",verticalAnchor:x};return Gt(Gt({},_),s?{height:Math.max(s.y+s.height-(u+p),0),width:d}:{})}if(i==="left"){var M={x:c-P,y:u+p/2,textAnchor:C,verticalAnchor:"middle"};return Gt(Gt({},M),s?{width:Math.max(M.x-s.x,0),height:p}:{})}if(i==="right"){var k={x:c+d+P,y:u+p/2,textAnchor:w,verticalAnchor:"middle"};return Gt(Gt({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:p}:{})}var D=s?{width:d,height:p}:{};return i==="insideLeft"?Gt({x:c+P,y:u+p/2,textAnchor:w,verticalAnchor:"middle"},D):i==="insideRight"?Gt({x:c+d-P,y:u+p/2,textAnchor:C,verticalAnchor:"middle"},D):i==="insideTop"?Gt({x:c+d/2,y:u+m,textAnchor:"middle",verticalAnchor:x},D):i==="insideBottom"?Gt({x:c+d/2,y:u+p-m,textAnchor:"middle",verticalAnchor:y},D):i==="insideTopLeft"?Gt({x:c+P,y:u+m,textAnchor:w,verticalAnchor:x},D):i==="insideTopRight"?Gt({x:c+d-P,y:u+m,textAnchor:C,verticalAnchor:x},D):i==="insideBottomLeft"?Gt({x:c+P,y:u+p-m,textAnchor:w,verticalAnchor:y},D):i==="insideBottomRight"?Gt({x:c+d-P,y:u+p-m,textAnchor:C,verticalAnchor:y},D):i&&typeof i=="object"&&(De(i.x)||ko(i.x))&&(De(i.y)||ko(i.y))?Gt({x:c+Rn(i.x,d),y:u+Rn(i.y,p),textAnchor:"end",verticalAnchor:"end"},D):Gt({x:c+d/2,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},D)},u7={offset:5};function Li(e){var t=Lr(e,u7),{viewBox:n,position:r,value:i,children:s,content:c,className:u="",textBreakAll:d,labelRef:p}=t,h=a7(),m=UD(),y=r==="center"?m:h??m,x=n||y;if(!x||pn(i)&&pn(s)&&!A.isValidElement(c)&&typeof c!="function")return null;var S=Gt(Gt({},t),{},{viewBox:x});if(A.isValidElement(c)){var{labelRef:P}=S,C=Qz(S,Wz);return A.cloneElement(c,C)}var w;if(typeof c=="function"){if(w=A.createElement(c,S),A.isValidElement(w))return w}else w=i7(t);var O=zD(x),_=Wt(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return s7(t,r,w,_,x);var M=O?l7(x,t.offset,t.position):c7(t,x);return A.createElement(Gh,Xa({ref:p,className:st("recharts-label",u)},_,M,{breakAll:d}),w)}Li.displayName="Label";var f7=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?A.createElement(Li,Xa({key:"label-implicit"},r)):ba(e)?A.createElement(Li,Xa({key:"label-implicit",value:e},r)):A.isValidElement(e)?e.type===Li?A.cloneElement(e,Gt({key:"label-implicit"},r)):A.createElement(Li,Xa({key:"label-implicit",content:e},r)):zb(e)?A.createElement(Li,Xa({key:"label-implicit",content:e},r)):e&&typeof e=="object"?A.createElement(Li,Xa({},e,{key:"label-implicit"},r)):null};function d7(e){var{label:t}=e,n=UD();return f7(t,n)||null}var My={},jy={},JE;function h7(){return JE||(JE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(jy)),jy}var Ry={},ew;function p7(){return ew||(ew=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Ry)),Ry}var tw;function m7(){return tw||(tw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h7(),n=p7(),r=bv();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(My)),My}var Iy,nw;function g7(){return nw||(nw=1,Iy=m7().last),Iy}var y7=g7();const v7=Qr(y7);var b7=["valueAccessor"],x7=["dataKey","clockWise","id","textBreakAll"];function Jd(){return Jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jd.apply(null,arguments)}function rw(e,t){if(e==null)return{};var n,r,i=S7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var A7=e=>Array.isArray(e.value)?v7(e.value):e.value,GD=A.createContext(void 0),P7=GD.Provider,HD=A.createContext(void 0),C7=HD.Provider;function E7(){return A.useContext(GD)}function w7(){return A.useContext(HD)}function yd(e){var{valueAccessor:t=A7}=e,n=rw(e,b7),{dataKey:r,clockWise:i,id:s,textBreakAll:c}=n,u=rw(n,x7),d=E7(),p=w7(),h=d||p;return!h||!h.length?null:A.createElement(Jn,{className:"recharts-label-list"},h.map((m,y)=>{var x,S=pn(r)?t(m,y):wt(m&&m.payload,r),P=pn(s)?{}:{id:"".concat(s,"-").concat(y)};return A.createElement(Li,Jd({},Wt(m,!0),u,P,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:c,viewBox:m.viewBox,key:"label-".concat(y),index:y}))}))}yd.displayName="LabelList";function qD(e){var{label:t}=e;return t?t===!0?A.createElement(yd,{key:"labelList-implicit"}):A.isValidElement(t)||zb(t)?A.createElement(yd,{key:"labelList-implicit",content:t}):typeof t=="object"?A.createElement(yd,Jd({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var YD=e=>e.graphicalItems.polarItems,O7=te([_t,gu],mb),Gb=te([YD,Ht,O7],yb),_7=te([Gb],vb),Hb=te([_7,rb],bb),T7=te([Hb,Ht,Gb],Sb),D7=te([Hb,Ht,Gb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,c=wt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:wt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),aw=()=>{},k7=te([Ht,VT,aw,D7,aw,et,_t],Pb),FD=te([Ht,et,Hb,T7,mu,_t,k7],Cb),N7=te([FD,Ht,xl],Ob);te([Ht,FD,N7,_t],Tb);var M7={radiusAxis:{},angleAxis:{}},KD=gr({name:"polarAxis",initialState:M7,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:GY,removeRadiusAxis:HY,addAngleAxis:qY,removeAngleAxis:YY}=KD.actions,j7=KD.reducer;function iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ow(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(n),!0).forEach(function(r){R7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R7(e,t,n){return(t=I7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I7(e){var t=L7(e,"string");return typeof t=="symbol"?t:t+""}function L7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $7=(e,t)=>t,qb=te([YD,$7],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),B7=[],Yb=(e,t,n)=>n?.length===0?B7:n,VD=te([rb,qb,Yb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>ow(ow({},t.presentationProps),s.props))),i!=null)return i}}),U7=te([VD,qb,Yb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,c=wt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:bh(c,t.dataKey),color:u,payload:r,type:t.legendType}})}),z7=te([VD,qb,Yb,an],(e,t,n,r)=>{if(!(t==null||e==null))return U9({offset:r,pieSettings:t,displayedData:e,cells:n})}),Ly={},sw;function G7(){return sw||(sw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Ly)),Ly}var $y,lw;function H7(){return lw||(lw=1,$y=G7().isPlainObject),$y}var q7=H7();const Y7=Qr(q7);function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(r){F7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F7(e,t,n){return(t=K7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K7(e){var t=V7(e,"string");return typeof t=="symbol"?t:t+""}function V7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eh(){return eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eh.apply(null,arguments)}var fw=(e,t,n,r,i)=>{var s=n-r,c;return c="M ".concat(e,",").concat(t),c+="L ".concat(e+n,",").concat(t),c+="L ".concat(e+n-s/2,",").concat(t+i),c+="L ".concat(e+n-s/2-r,",").concat(t+i),c+="L ".concat(e,",").concat(t," Z"),c},X7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},W7=e=>{var t=Lr(e,X7),{x:n,y:r,upperWidth:i,lowerWidth:s,height:c,className:u}=t,{animationEasing:d,animationDuration:p,animationBegin:h,isUpdateAnimationActive:m}=t,y=A.useRef(),[x,S]=A.useState(-1),P=A.useRef(i),C=A.useRef(s),w=A.useRef(c),O=A.useRef(n),_=A.useRef(r),M=wh(e,"trapezoid-");if(A.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var de=y.current.getTotalLength();de&&S(de)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var k=st("recharts-trapezoid",u);if(!m)return A.createElement("g",null,A.createElement("path",eh({},Wt(t,!0),{className:k,d:fw(n,r,i,s,c)})));var D=P.current,L=C.current,$=w.current,Z=O.current,ae=_.current,H="0px ".concat(x===-1?1:x,"px"),re="".concat(x,"px 0px"),me=v_(["strokeDasharray"],p,d);return A.createElement(Eh,{animationId:M,key:M,canBegin:x>0,duration:p,easing:d,isActive:m,begin:h},de=>{var ve=wn(D,i,de),G=wn(L,s,de),oe=wn($,c,de),be=wn(Z,n,de),ne=wn(ae,r,de);y.current&&(P.current=ve,C.current=G,w.current=oe,O.current=be,_.current=ne);var j=de>0?{transition:me,strokeDasharray:re}:{strokeDasharray:H};return A.createElement("path",eh({},Wt(t,!0),{className:k,d:fw(be,ne,ve,G,oe),ref:y,style:uw(uw({},j),t.style)}))})},Q7=["option","shapeType","propTransformer","activeClassName","isActive"];function Z7(e,t){if(e==null)return{};var n,r,i=J7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(r){e9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e9(e,t,n){return(t=t9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t9(e){var t=n9(e,"string");return typeof t=="symbol"?t:t+""}function n9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r9(e,t){return th(th({},t),e)}function a9(e,t){return e==="symbols"}function hw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return A.createElement(A_,n);case"trapezoid":return A.createElement(W7,n);case"sector":return A.createElement(E_,n);case"symbols":if(a9(t))return A.createElement(gv,n);break;default:return null}}function i9(e){return A.isValidElement(e)?e.props:e}function XD(e){var{option:t,shapeType:n,propTransformer:r=r9,activeClassName:i="recharts-active-shape",isActive:s}=e,c=Z7(e,Q7),u;if(A.isValidElement(t))u=A.cloneElement(t,th(th({},c),i9(t)));else if(typeof t=="function")u=t(c);else if(Y7(t)&&typeof t!="boolean"){var d=r(t,c);u=A.createElement(hw,{shapeType:n,elementProps:d})}else{var p=c;u=A.createElement(hw,{shapeType:n,elementProps:p})}return s?A.createElement(Jn,{className:i},u):u}var Fb=(e,t)=>{var n=jt();return(r,i)=>s=>{e?.(r,i,s),n(uD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Kb=e=>{var t=jt();return(n,r)=>i=>{e?.(n,r,i),t(z8())}},Vb=(e,t)=>{var n=jt();return(r,i)=>s=>{e?.(r,i,s),n(G8({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function WD(e){var{fn:t,args:n}=e,r=jt(),i=Ir();return A.useEffect(()=>{if(!i){var s=t(n);return r($8(s)),()=>{r(B8(s))}}},[t,n,r,i]),null}var QD=()=>{};function o9(e){var{legendPayload:t}=e,n=jt(),r=Ir();return A.useEffect(()=>r?QD:(n(p_(t)),()=>{n(m_(t))}),[n,r,t]),null}function s9(e){var{legendPayload:t}=e,n=jt(),r=_e(et);return A.useEffect(()=>r!=="centric"&&r!=="radial"?QD:(n(p_(t)),()=>{n(m_(t))}),[n,r,t]),null}var By,l9=()=>{var[e]=A.useState(()=>Wc("uid-"));return e},c9=(By=WN.useId)!==null&&By!==void 0?By:l9;function u9(e,t){var n=c9();return t||(e?"".concat(e,"-").concat(n):n)}var f9=A.createContext(void 0),ZD=e=>{var{id:t,type:n,children:r}=e,i=u9("recharts-".concat(n),t);return A.createElement(f9.Provider,{value:i},r(i))},d9={cartesianItems:[],polarItems:[]},JD=gr({name:"graphicalItems",initialState:d9,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Za(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Za(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Za(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:h9,replaceCartesianGraphicalItem:p9,removeCartesianGraphicalItem:m9,addPolarGraphicalItem:g9,removePolarGraphicalItem:y9}=JD.actions,v9=JD.reducer;function b9(e){var t=jt(),n=A.useRef(null);return A.useEffect(()=>{n.current===null?t(h9(e)):n.current!==e&&t(p9({prev:n.current,next:e})),n.current=e},[t,e]),A.useEffect(()=>()=>{n.current&&(t(m9(n.current)),n.current=null)},[t]),null}function x9(e){var t=jt();return A.useEffect(()=>(t(g9(e)),()=>{t(y9(e))}),[t,e]),null}var S9=["onMouseEnter","onClick","onMouseLeave"],A9=["id"],P9=["id"];function Xb(e,t){if(e==null)return{};var n,r,i=C9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function C9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){E9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E9(e,t,n){return(t=w9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w9(e){var t=O9(e,"string");return typeof t=="symbol"?t:t+""}function O9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hi.apply(null,arguments)}function _9(e){var t=A.useMemo(()=>fv(e.children,ul),[e.children]),n=_e(r=>U7(r,e.id,t));return n==null?null:A.createElement(s9,{legendPayload:n})}function T9(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:c,name:u,hide:d,tooltipType:p}=e;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:n,name:bh(u,t),hide:d,type:p,color:c,unit:""}}}var D9=(e,t)=>e>t?"start":e<t?"end":"middle",k9=(e,t,n)=>Rn(typeof t=="function"?t(e):t,n,n*.8),N9=(e,t,n)=>{var{top:r,left:i,width:s,height:c}=t,u=i_(s,c),d=i+Rn(e.cx,s,s/2),p=r+Rn(e.cy,c,c/2),h=Rn(e.innerRadius,u,0),m=k9(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:d,cy:p,innerRadius:h,outerRadius:m,maxRadius:y}},M9=(e,t)=>{var n=hn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function j9(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var R9=(e,t)=>{if(A.isValidElement(e))return A.cloneElement(e,t);if(typeof e=="function")return e(t);var n=st("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return A.createElement(y_,Hi({},t,{type:"linear",className:n}))},I9=(e,t,n)=>{if(A.isValidElement(e))return A.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),A.isValidElement(r)))return r;var i=st("recharts-pie-label-text",j9(e));return A.createElement(Gh,Hi({},t,{alignmentBaseline:"middle",className:i}),r)};function L9(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:c}=n;if(!r||!i||!t)return null;var u=Ko(n),d=Wt(i,!1),p=Wt(s,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((y,x)=>{var S=(y.startAngle+y.endAngle)/2,P=Qt(y.cx,y.cy,y.outerRadius+h,S),C=Et(Et(Et(Et({},u),y),{},{stroke:"none"},d),{},{index:x,textAnchor:D9(P.x,y.cx)},P),w=Et(Et(Et(Et({},u),y),{},{fill:"none",stroke:y.fill},p),{},{index:x,points:[Qt(y.cx,y.cy,y.outerRadius,S),P],key:"line"});return A.createElement(Jn,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(x)},s&&R9(s,w),I9(i,C,wt(y,c)))});return A.createElement(Jn,{className:"recharts-pie-labels"},m)}function $9(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(qD,{label:n.label}):A.createElement(L9,{sectors:t,props:n,showLabels:r})}function B9(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=_e(Ho),{onMouseEnter:c,onClick:u,onMouseLeave:d}=i,p=Xb(i,S9),h=Fb(c,i.dataKey),m=Kb(d),y=Vb(u,i.dataKey);return t==null||t.length===0?null:A.createElement(A.Fragment,null,t.map((x,S)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var P=n&&String(S)===s,C=s?r:null,w=P?n:C,O=Et(Et({},x),{},{stroke:x.stroke,tabIndex:-1,[u_]:S,[f_]:i.dataKey});return A.createElement(Jn,Hi({tabIndex:-1,className:"recharts-pie-sector"},su(p,x,S),{onMouseEnter:h(x,S),onMouseLeave:m(x,S),onClick:y(x,S),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(S)}),A.createElement(XD,Hi({option:w,isActive:P,shapeType:"sector"},O)))}))}function U9(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:c,startAngle:u,endAngle:d,dataKey:p,nameKey:h,tooltipType:m}=n,y=Math.abs(n.minAngle),x=M9(u,d),S=Math.abs(x),P=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(D=>wt(D,p,0)!==0).length,w=(S>=360?C:C-1)*P,O=S-C*y-w,_=r.reduce((D,L)=>{var $=wt(L,p,0);return D+(De($)?$:0)},0),M;if(_>0){var k;M=r.map((D,L)=>{var $=wt(D,p,0),Z=wt(D,h,L),ae=N9(n,s,D),H=(De($)?$:0)/_,re,me=Et(Et({},D),i&&i[L]&&i[L].props);L?re=k.endAngle+hn(x)*P*($!==0?1:0):re=u;var de=re+hn(x)*(($!==0?y:0)+H*O),ve=(re+de)/2,G=(ae.innerRadius+ae.outerRadius)/2,oe=[{name:Z,value:$,payload:me,dataKey:p,type:m}],be=Qt(ae.cx,ae.cy,G,ve);return k=Et(Et(Et(Et({},n.presentationProps),{},{percent:H,cornerRadius:c,name:Z,tooltipPayload:oe,midAngle:ve,middleRadius:G,tooltipPosition:be},me),ae),{},{value:wt(D,p),startAngle:re,endAngle:de,payload:me,paddingAngle:hn(x)*P}),k})}return M}function z9(e){var{showLabels:t,sectors:n,children:r}=e,i=A.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return A.createElement(C7,{value:t?i:void 0},r)}function G9(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:c,animationEasing:u,activeShape:d,inactiveShape:p,onAnimationStart:h,onAnimationEnd:m}=t,y=wh(t,"recharts-pie-"),x=n.current,[S,P]=A.useState(!1),C=A.useCallback(()=>{typeof m=="function"&&m(),P(!1)},[m]),w=A.useCallback(()=>{typeof h=="function"&&h(),P(!0)},[h]);return A.createElement(z9,{showLabels:!S,sectors:r},A.createElement(Eh,{animationId:y,begin:s,duration:c,isActive:i,easing:u,onAnimationStart:w,onAnimationEnd:C,key:y},O=>{var _=[],M=r&&r[0],k=M?.startAngle;return r?.forEach((D,L)=>{var $=x&&x[L],Z=L>0?Bo(D,"paddingAngle",0):0;if($){var ae=wn($.endAngle-$.startAngle,D.endAngle-D.startAngle,O),H=Et(Et({},D),{},{startAngle:k+Z,endAngle:k+ae+Z});_.push(H),k=H.endAngle}else{var{endAngle:re,startAngle:me}=D,de=wn(0,re-me,O),ve=Et(Et({},D),{},{startAngle:k+Z,endAngle:k+de+Z});_.push(ve),k=ve.endAngle}}),n.current=_,A.createElement(Jn,null,A.createElement(B9,{sectors:_,activeShape:d,inactiveShape:p,allOtherPieProps:t}))}),A.createElement($9,{showLabels:!S,sectors:r,props:t}),t.children)}var H9={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!pl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function q9(e){var{id:t}=e,n=Xb(e,A9),{hide:r,className:i,rootTabIndex:s}=e,c=A.useMemo(()=>fv(e.children,ul),[e.children]),u=_e(h=>z7(h,t,c)),d=A.useRef(null),p=st("recharts-pie",i);return r||u==null?(d.current=null,A.createElement(Jn,{tabIndex:s,className:p})):A.createElement(A.Fragment,null,A.createElement(WD,{fn:T9,args:Et(Et({},e),{},{sectors:u})}),A.createElement(Jn,{tabIndex:s,className:p},A.createElement(G9,{props:Et(Et({},n),{},{sectors:u}),previousSectorsRef:d})))}function H0(e){var t=Lr(e,H9),{id:n}=t,r=Xb(t,P9),i=Ko(r);return A.createElement(ZD,{id:n,type:"pie"},s=>A.createElement(A.Fragment,null,A.createElement(x9,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),A.createElement(_9,Hi({},r,{id:s})),A.createElement(q9,Hi({},r,{id:s}))))}H0.displayName="Pie";function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){Y9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y9(e,t,n){return(t=F9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F9(e){var t=K9(e,"string");return typeof t=="symbol"?t:t+""}function K9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V9={xAxis:{},yAxis:{},zAxis:{}},ek=gr({name:"cartesianAxis",initialState:V9,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=gw(gw({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:X9,removeXAxis:W9,addYAxis:Q9,removeYAxis:Z9,addZAxis:FY,removeZAxis:KY,updateYAxisWidth:J9}=ek.actions,eG=ek.reducer,tG=te([an],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),nG=te([tG,ii,oi],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),tk=()=>_e(nG),rG="Invariant failed";function aG(e,t){throw new Error(rG)}var iG=["x","y"];function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q0.apply(null,arguments)}function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(r){oG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oG(e,t,n){return(t=sG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sG(e){var t=lG(e,"string");return typeof t=="symbol"?t:t+""}function lG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cG(e,t){if(e==null)return{};var n,r,i=uG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function fG(e,t){var{x:n,y:r}=e,i=cG(e,iG),s="".concat(n),c=parseInt(s,10),u="".concat(r),d=parseInt(u,10),p="".concat(t.height||i.height),h=parseInt(p,10),m="".concat(t.width||i.width),y=parseInt(m,10);return Rc(Rc(Rc(Rc(Rc({},t),i),c?{x:c}:{}),d?{y:d}:{}),{},{height:h,width:y,name:t.name,radius:t.radius})}function Wb(e){return A.createElement(XD,q0({shapeType:"rectangle",propTransformer:fG,activeClassName:"recharts-active-bar"},e))}var dG=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(De(t))return t;var s=De(r)||pn(r);return s?t(r,i):(s||aG(),n)}},hG={},nk=gr({name:"errorBars",initialState:hG,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:VY,replaceErrorBar:XY,removeErrorBar:WY}=nk.actions,pG=nk.reducer,mG=["children"];function gG(e,t){if(e==null)return{};var n,r,i=yG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var vG={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},bG=A.createContext(vG);function xG(e){var{children:t}=e,n=gG(e,mG);return A.createElement(bG.Provider,{value:n},t)}function rk(e,t){var n,r,i=_e(p=>Xi(p,e)),s=_e(p=>Wi(p,t)),c=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:lr.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:cr.allowDataOverflow,d=c||u;return{needClip:d,needClipX:c,needClipY:u}}function SG(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=tk(),{needClipX:s,needClipY:c,needClip:u}=rk(t,n);if(!u)return null;var{x:d,y:p,width:h,height:m}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:s?d:d-h/2,y:c?p:p-m/2,width:s?h:h*2,height:c?m:m*2}))}var AG=["onMouseEnter","onMouseLeave","onClick"],PG=["value","background","tooltipPosition"],CG=["id"],EG=["onMouseEnter","onClick","onMouseLeave"];function qi(){return qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qi.apply(null,arguments)}function vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vw(Object(n),!0).forEach(function(r){wG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wG(e,t,n){return(t=OG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OG(e){var t=_G(e,"string");return typeof t=="symbol"?t:t+""}function _G(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nh(e,t){if(e==null)return{};var n,r,i=TG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function TG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var DG=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:bh(n,t),payload:e}]};function kG(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:c,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:bh(s,t),hide:c,type:e.tooltipType,color:e.fill,unit:u}}}function NG(e){var t=_e(Ho),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:u,onClick:d}=s,p=nh(s,AG),h=Fb(c,r),m=Kb(u),y=Vb(d,r);if(!i||n==null)return null;var x=Wt(i,!1);return A.createElement(A.Fragment,null,n.map((S,P)=>{var{value:C,background:w,tooltipPosition:O}=S,_=nh(S,PG);if(!w)return null;var M=h(S,P),k=m(S,P),D=y(S,P),L=zn(zn(zn(zn(zn({option:i,isActive:String(P)===t},_),{},{fill:"#eee"},w),x),su(p,S,P)),{},{onMouseEnter:M,onMouseLeave:k,onClick:D,dataKey:r,index:P,className:"recharts-bar-background-rectangle"});return A.createElement(Wb,qi({key:"background-bar-".concat(P)},L))}))}function MG(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var c={x:s.x,y:s.y,width:s.width,height:s.height};return zn(zn({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return A.createElement(P7,{value:t?i:void 0},n)}function jG(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:c}=e,u=_e(Ho),d=_e(PD),p=n&&String(s)===u&&(d==null||c===d),h=p?n:t;return A.createElement(Wb,qi({},r,i,{isActive:p,option:h,index:s,dataKey:c}))}function RG(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return A.createElement(Wb,qi({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function IG(e){var{data:t,props:n}=e,r=Ko(n),{id:i}=r,s=nh(r,CG),{shape:c,dataKey:u,activeBar:d}=n,{onMouseEnter:p,onClick:h,onMouseLeave:m}=n,y=nh(n,EG),x=Fb(p,u),S=Kb(m),P=Vb(h,u);return t?A.createElement(A.Fragment,null,t.map((C,w)=>A.createElement(Jn,qi({className:"recharts-bar-rectangle"},su(y,C,w),{onMouseEnter:x(C,w),onMouseLeave:S(C,w),onClick:P(C,w),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(w)}),d?A.createElement(jG,{shape:c,activeBar:d,baseProps:s,entry:C,index:w,dataKey:u}):A.createElement(RG,{shape:c,baseProps:s,entry:C,index:w,dataKey:u})))):null}function LG(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:d,onAnimationEnd:p,onAnimationStart:h}=t,m=n.current,y=wh(t,"recharts-bar-"),[x,S]=A.useState(!1),P=!x,C=A.useCallback(()=>{typeof p=="function"&&p(),S(!1)},[p]),w=A.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return A.createElement(MG,{showLabels:P,rects:r},A.createElement(Eh,{animationId:y,begin:c,duration:u,isActive:s,easing:d,onAnimationEnd:C,onAnimationStart:w,key:y},O=>{var _=O===1?r:r?.map((M,k)=>{var D=m&&m[k];if(D)return zn(zn({},M),{},{x:wn(D.x,M.x,O),y:wn(D.y,M.y,O),width:wn(D.width,M.width,O),height:wn(D.height,M.height,O)});if(i==="horizontal"){var L=wn(0,M.height,O);return zn(zn({},M),{},{y:M.y+M.height-L,height:L})}var $=wn(0,M.width,O);return zn(zn({},M),{},{width:$})});return O>0&&(n.current=_??null),_==null?null:A.createElement(Jn,null,A.createElement(IG,{props:t,data:_}))}),A.createElement(qD,{label:t.label}),t.children)}function $G(e){var t=A.useRef(null);return A.createElement(LG,{previousRectanglesRef:t,props:e})}var ak=0,BG=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:wt(e,t)}};class UG extends A.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:c,needClip:u,background:d,id:p}=this.props;if(t||n==null)return null;var h=st("recharts-bar",i),m=p;return A.createElement(Jn,{className:h,id:p},u&&A.createElement("defs",null,A.createElement(SG,{clipPathId:m,xAxisId:s,yAxisId:c})),A.createElement(Jn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},A.createElement(NG,{data:n,dataKey:r,background:d,allOtherBarProps:this.props}),A.createElement($G,this.props)))}}var zG={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!pl.isSsr,legendType:"rect",minPointSize:ak,xAxisId:0,yAxisId:0};function GG(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:d,animationEasing:p,isAnimationActive:h}=e,{needClip:m}=rk(t,n),y=Nv(),x=Ir(),S=fv(e.children,ul),P=_e(O=>mH(O,t,n,x,e.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var C,w=P?.[0];return w==null||w.height==null||w.width==null?C=0:C=y==="vertical"?w.height/2:w.width/2,A.createElement(xG,{xAxisId:t,yAxisId:n,data:P,dataPointFormatter:BG,errorBarOffset:C},A.createElement(UG,qi({},e,{layout:y,needClip:m,data:P,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:d,animationEasing:p,isAnimationActive:h})))}function HG(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:c,yAxis:u,xAxisTicks:d,yAxisTicks:p,stackedData:h,displayedData:m,offset:y,cells:x,parentViewBox:S}=e,P=t==="horizontal"?u:c,C=h?P.scale.domain():null,w=iL({numericAxis:P});return m.map((O,_)=>{var M,k,D,L,$,Z;h?M=J3(h[_],C):(M=wt(O,n),Array.isArray(M)||(M=[w,M]));var ae=dG(r,ak)(M[1],_);if(t==="horizontal"){var H,[re,me]=[u.scale(M[0]),u.scale(M[1])];k=iC({axis:c,ticks:d,bandSize:s,offset:i.offset,entry:O,index:_}),D=(H=me??re)!==null&&H!==void 0?H:void 0,L=i.size;var de=re-me;if($=hr(de)?0:de,Z={x:k,y:y.top,width:L,height:y.height},Math.abs(ae)>0&&Math.abs($)<Math.abs(ae)){var ve=hn($||ae)*(Math.abs(ae)-Math.abs($));D-=ve,$+=ve}}else{var[G,oe]=[c.scale(M[0]),c.scale(M[1])];if(k=G,D=iC({axis:u,ticks:p,bandSize:s,offset:i.offset,entry:O,index:_}),L=oe-G,$=i.size,Z={x:y.left,y:D,width:y.width,height:$},Math.abs(ae)>0&&Math.abs(L)<Math.abs(ae)){var be=hn(L||ae)*(Math.abs(ae)-Math.abs(L));L+=be}}if(k==null||D==null||L==null||$==null)return null;var ne=zn(zn({},O),{},{x:k,y:D,width:L,height:$,value:h?M:M[1],payload:O,background:Z,tooltipPosition:{x:k+L/2,y:D+$/2},parentViewBox:S},x&&x[_]&&x[_].props);return ne}).filter(Boolean)}function ik(e){var t=Lr(e,zG),n=Ir();return A.createElement(ZD,{id:t.id,type:"bar"},r=>A.createElement(A.Fragment,null,A.createElement(o9,{legendPayload:DG(t)}),A.createElement(WD,{fn:kG,args:t}),A.createElement(b9,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:aL(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),A.createElement(GG,qi({},t,{id:r}))))}ik.displayName="Bar";function bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(n),!0).forEach(function(r){qG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qG(e,t,n){return(t=YG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YG(e){var t=FG(e,"string");return typeof t=="symbol"?t:t+""}function FG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KG=(e,t)=>t,VG=(e,t,n)=>n,XG=(e,t,n,r)=>r,WG=(e,t,n,r,i)=>i,Au=te([gb,WG],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),QG=te([Au],e=>e?.maxBarSize),ZG=(e,t,n,r,i,s)=>s,xw=(e,t,n)=>{var r=n??e;if(!pn(r))return Rn(r,t,0)},JG=te([et,gb,KG,VG,XG],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),eH=(e,t,n,r)=>{var i=et(e);return i==="horizontal"?L0(e,"yAxis",n,r):L0(e,"xAxis",t,r)},tH=(e,t,n)=>{var r=et(e);return r==="horizontal"?AE(e,"xAxis",t):AE(e,"yAxis",n)},nH=(e,t,n)=>{var r={},i=e.filter(Ih),s=e.filter(p=>p.stackId==null),c=i.reduce((p,h)=>(p[h.stackId]||(p[h.stackId]=[]),p[h.stackId].push(h),p),r),u=Object.entries(c).map(p=>{var[h,m]=p,y=m.map(S=>S.dataKey),x=xw(t,n,m[0].barSize);return{stackId:h,dataKeys:y,barSize:x}}),d=s.map(p=>{var h=[p.dataKey].filter(y=>y!=null),m=xw(t,n,p.barSize);return{stackId:void 0,dataKeys:h,barSize:m}});return[...u,...d]},rH=te([JG,BB,tH],nH),aH=(e,t,n,r,i)=>{var s,c,u=Au(e,t,n,r,i);if(u!=null){var d=et(e),p=ST(e),{maxBarSize:h}=u,m=pn(h)?p:h,y,x;return d==="horizontal"?(y=cl(e,"xAxis",t,r),x=ll(e,"xAxis",t,r)):(y=cl(e,"yAxis",n,r),x=ll(e,"yAxis",n,r)),(s=(c=Ov(y,x,!0))!==null&&c!==void 0?c:m)!==null&&s!==void 0?s:0}},ok=(e,t,n,r)=>{var i=et(e),s,c;return i==="horizontal"?(s=cl(e,"xAxis",t,r),c=ll(e,"xAxis",t,r)):(s=cl(e,"yAxis",n,r),c=ll(e,"yAxis",n,r)),Ov(s,c)};function iH(e,t,n,r,i){var s=r.length;if(!(s<1)){var c=Rn(e,n,0,!0),u,d=[];if(mr(r[0].barSize)){var p=!1,h=n/s,m=r.reduce((w,O)=>w+(O.barSize||0),0);m+=(s-1)*c,m>=n&&(m-=(s-1)*c,c=0),m>=n&&h>0&&(p=!0,h*=.9,m=s*h);var y=(n-m)/2>>0,x={offset:y-c,size:0};u=r.reduce((w,O)=>{var _,M={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:x.offset+x.size+c,size:p?h:(_=O.barSize)!==null&&_!==void 0?_:0}},k=[...w,M];return x=k[k.length-1].position,k},d)}else{var S=Rn(t,n,0,!0);n-2*S-(s-1)*c<=0&&(c=0);var P=(n-2*S-(s-1)*c)/s;P>1&&(P>>=0);var C=mr(i)?Math.min(P,i):P;u=r.reduce((w,O,_)=>[...w,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:S+(P+c)*_+(P-C)/2,size:C}}],d)}return u}}var oH=(e,t,n,r,i,s,c)=>{var u=pn(c)?t:c,d=iH(n,r,i!==s?i:s,e,u);return i!==s&&d!=null&&(d=d.map(p=>cd(cd({},p),{},{position:cd(cd({},p.position),{},{offset:p.position.offset-i/2})}))),d},sH=te([rH,ST,$B,AT,aH,ok,QG],oH),lH=(e,t,n,r)=>cl(e,"xAxis",t,r),cH=(e,t,n,r)=>cl(e,"yAxis",n,r),uH=(e,t,n,r)=>ll(e,"xAxis",t,r),fH=(e,t,n,r)=>ll(e,"yAxis",n,r),dH=te([sH,Au],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),hH=(e,t)=>{var n=hb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===n)}}}},pH=te([eH,Au],hH),mH=te([an,_v,lH,cH,uH,fH,dH,et,ab,ok,pH,Au,ZG],(e,t,n,r,i,s,c,u,d,p,h,m,y)=>{var{chartData:x,dataStartIndex:S,dataEndIndex:P}=d;if(!(m==null||c==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||p==null)){var{data:C}=m,w;if(C!=null&&C.length>0?w=C:w=x?.slice(S,P+1),w!=null)return HG({layout:u,barSettings:m,pos:c,parentViewBox:t,bandSize:p,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:w,offset:e,cells:y})}}),sk=e=>{var{chartData:t}=e,n=jt(),r=Ir();return A.useEffect(()=>r?()=>{}:(n(NE(t)),()=>{n(NE(void 0))}),[t,n,r]),null},Sw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},lk=gr({name:"brush",initialState:Sw,reducers:{setBrushSettings(e,t){return t.payload==null?Sw:t.payload}}}),{setBrushSettings:QY}=lk.actions,gH=lk.reducer;function yH(e,t,n){return(t=vH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vH(e){var t=bH(e,"string");return typeof t=="symbol"?t:t+""}function bH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Qb{static create(t){return new Qb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}yH(Qb,"EPS",1e-4);function xH(e){return(e%180+180)%180}var SH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=xH(i),c=s*Math.PI/180,u=Math.atan(r/n),d=c>u&&c<Math.PI-u?r/Math.sin(c):n/Math.cos(c);return Math.abs(d)},AH={dots:[],areas:[],lines:[]},ck=gr({name:"referenceElements",initialState:AH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Za(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Za(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Za(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:ZY,removeDot:JY,addArea:eF,removeArea:tF,addLine:nF,removeLine:rF}=ck.actions,PH=ck.reducer,CH=A.createContext(void 0),EH=e=>{var{children:t}=e,[n]=A.useState("".concat(Wc("recharts"),"-clip")),r=tk();if(r==null)return null;var{x:i,y:s,width:c,height:u}=r;return A.createElement(CH.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:s,height:u,width:c}))),t)};function Uy(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function uk(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function wH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return SH(r,n)}function OH(e,t,n){var r=n==="width",{x:i,y:s,width:c,height:u}=e;return t===1?{start:r?i:s,end:r?i+c:s+u}:{start:r?i+c:s+u,end:r?i:s}}function rh(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function _H(e,t){return uk(e,t+1)}function TH(e,t,n,r,i){for(var s=(r||[]).slice(),{start:c,end:u}=t,d=0,p=1,h=c,m=function(){var S=r?.[d];if(S===void 0)return{v:uk(r,p)};var P=d,C,w=()=>(C===void 0&&(C=n(S,P)),C),O=S.coordinate,_=d===0||rh(e,O,w,h,u);_||(d=0,h=c,p+=1),_&&(h=O+e*(w()/2+i),d+=p)},y;p<=s.length;)if(y=m(),y)return y.v;return[]}function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(n),!0).forEach(function(r){DH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DH(e,t,n){return(t=kH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kH(e){var t=NH(e,"string");return typeof t=="symbol"?t:t+""}function NH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MH(e,t,n,r,i){for(var s=(r||[]).slice(),c=s.length,{start:u}=t,{end:d}=t,p=function(y){var x=s[y],S,P=()=>(S===void 0&&(S=n(x,y)),S);if(y===c-1){var C=e*(x.coordinate+e*P()/2-d);s[y]=x=Nn(Nn({},x),{},{tickCoord:C>0?x.coordinate-C*e:x.coordinate})}else s[y]=x=Nn(Nn({},x),{},{tickCoord:x.coordinate});var w=rh(e,x.tickCoord,P,u,d);w&&(d=x.tickCoord-e*(P()/2+i),s[y]=Nn(Nn({},x),{},{isShow:!0}))},h=c-1;h>=0;h--)p(h);return s}function jH(e,t,n,r,i,s){var c=(r||[]).slice(),u=c.length,{start:d,end:p}=t;if(s){var h=r[u-1],m=n(h,u-1),y=e*(h.coordinate+e*m/2-p);c[u-1]=h=Nn(Nn({},h),{},{tickCoord:y>0?h.coordinate-y*e:h.coordinate});var x=rh(e,h.tickCoord,()=>m,d,p);x&&(p=h.tickCoord-e*(m/2+i),c[u-1]=Nn(Nn({},h),{},{isShow:!0}))}for(var S=s?u-1:u,P=function(O){var _=c[O],M,k=()=>(M===void 0&&(M=n(_,O)),M);if(O===0){var D=e*(_.coordinate-e*k()/2-d);c[O]=_=Nn(Nn({},_),{},{tickCoord:D<0?_.coordinate-D*e:_.coordinate})}else c[O]=_=Nn(Nn({},_),{},{tickCoord:_.coordinate});var L=rh(e,_.tickCoord,k,d,p);L&&(d=_.tickCoord+e*(k()/2+i),c[O]=Nn(Nn({},_),{},{isShow:!0}))},C=0;C<S;C++)P(C);return c}function Zb(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:c,orientation:u,interval:d,tickFormatter:p,unit:h,angle:m}=e;if(!i||!i.length||!r)return[];if(De(d)||pl.isSsr){var y;return(y=_H(i,De(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],S=u==="top"||u==="bottom"?"width":"height",P=h&&S==="width"?Yc(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(_,M)=>{var k=typeof p=="function"?p(_.value,M):_.value;return S==="width"?wH(Yc(k,{fontSize:t,letterSpacing:n}),P,m):Yc(k,{fontSize:t,letterSpacing:n})[S]},w=i.length>=2?hn(i[1].coordinate-i[0].coordinate):1,O=OH(s,w,S);return d==="equidistantPreserveStart"?TH(w,O,C,i,c):(d==="preserveStart"||d==="preserveStartEnd"?x=jH(w,O,C,i,c,d==="preserveStartEnd"):x=MH(w,O,C,i,c),x.filter(_=>_.isShow))}var RH=["viewBox"],IH=["viewBox"];function Xs(){return Xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xs.apply(null,arguments)}function Pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(n),!0).forEach(function(r){Jb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cw(e,t){if(e==null)return{};var n,r,i=LH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function LH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Jb(e,t,n){return(t=$H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $H(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Qi extends A.Component{constructor(t){super(t),this.tickRefs=A.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=Cw(t,RH),s=this.props,{viewBox:c}=s,u=Cw(s,IH);return!Uy(r,c)||!Uy(i,u)||!Uy(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:c,tickSize:u,mirror:d,tickMargin:p}=this.props,h,m,y,x,S,P,C=d?-1:1,w=t.tickSize||u,O=De(t.tickCoord)?t.tickCoord:t.coordinate;switch(c){case"top":h=m=t.coordinate,x=r+ +!d*s,y=x-C*w,P=y-C*p,S=O;break;case"left":y=x=t.coordinate,m=n+ +!d*i,h=m-C*w,S=h-C*p,P=O;break;case"right":y=x=t.coordinate,m=n+ +d*i,h=m+C*w,S=h+C*p,P=O;break;default:h=m=t.coordinate,x=r+ +d*s,y=x+C*w,P=y+C*p,S=O;break}return{line:{x1:h,y1:y,x2:m,y2:x},tick:{x:S,y:P}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:c,axisLine:u}=this.props,d=rn(rn(rn({},Wt(this.props,!1)),Wt(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!c||s==="bottom"&&c);d=rn(rn({},d),{},{x1:t,y1:n+p*i,x2:t+r,y2:n+p*i})}else{var h=+(s==="left"&&!c||s==="right"&&c);d=rn(rn({},d),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return A.createElement("line",Xs({},d,{className:st("recharts-cartesian-axis-line",Bo(u,"className"))}))}static renderTickItem(t,n,r){var i,s=st(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(t))i=A.cloneElement(t,rn(rn({},n),{},{className:s}));else if(typeof t=="function")i=t(rn(rn({},n),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=st(c,t.className)),i=A.createElement(Gh,Xs({},n,{className:c}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:c,tickFormatter:u,unit:d,padding:p,tickTextProps:h}=this.props,m=Zb(rn(rn({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),S=Ko(this.props),P=Wt(c,!1),C=rn(rn({},S),{},{fill:"none"},Wt(i,!1)),w=m.map((O,_)=>{var{line:M,tick:k}=this.getTickLineCoord(O),D=rn(rn(rn(rn({textAnchor:y,verticalAnchor:x},S),{},{stroke:"none",fill:s},P),k),{},{index:_,payload:O,visibleTicksCount:m.length,tickFormatter:u,padding:p},h);return A.createElement(Jn,Xs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},su(this.props,O,_)),i&&A.createElement("line",Xs({},C,M,{className:st("recharts-cartesian-axis-tick-line",Bo(i,"className"))})),c&&Qi.renderTickItem(c,D,"".concat(typeof u=="function"?u(O.value,_):O.value).concat(d||"")))});return w.length>0?A.createElement("g",{className:"recharts-cartesian-axis-ticks"},w):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:c}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:A.createElement(Jn,{className:st("recharts-cartesian-axis",i),ref:u=>{if(u){var d=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var p=d[0];if(p){var h=window.getComputedStyle(p).fontSize,m=window.getComputedStyle(p).letterSpacing;(h!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(p).fontSize,letterSpacing:window.getComputedStyle(p).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,c),A.createElement(n7,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},A.createElement(d7,{label:this.props.label}),this.props.children))}}Jb(Qi,"displayName","CartesianAxis");Jb(Qi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var UH=["x1","y1","x2","y2","key"],zH=["offset"],GH=["xAxisId","yAxisId"],HH=["xAxisId","yAxisId"];function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(n),!0).forEach(function(r){qH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qH(e,t,n){return(t=YH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YH(e){var t=FH(e,"string");return typeof t=="symbol"?t:t+""}function FH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jo(){return jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jo.apply(null,arguments)}function ah(e,t){if(e==null)return{};var n,r,i=KH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function KH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var VH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:c,ry:u}=e;return A.createElement("rect",{x:r,y:i,ry:u,width:s,height:c,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function fk(e,t){var n;if(A.isValidElement(e))n=A.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:c,key:u}=t,d=ah(t,UH),p=Ko(d),{offset:h}=p,m=ah(p,zH);n=A.createElement("line",jo({},m,{x1:r,y1:i,x2:s,y2:c,fill:"none",key:u}))}return n}function XH(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=ah(e,GH),d=i.map((p,h)=>{var m=jn(jn({},u),{},{x1:t,y1:p,x2:t+n,y2:p,key:"line-".concat(h),index:h});return fk(r,m)});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function WH(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=ah(e,HH),d=i.map((p,h)=>{var m=jn(jn({},u),{},{x1:p,y1:t,x2:p,y2:t+n,key:"line-".concat(h),index:h});return fk(r,m)});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function QH(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:c,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var p=u.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==p[0]&&p.unshift(0);var h=p.map((m,y)=>{var x=!p[y+1],S=x?i+c-m:p[y+1]-m;if(S<=0)return null;var P=y%t.length;return A.createElement("rect",{key:"react-".concat(y),y:m,x:r,height:S,width:s,stroke:"none",fill:t[P],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function ZH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:c,height:u,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var p=d.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==p[0]&&p.unshift(0);var h=p.map((m,y)=>{var x=!p[y+1],S=x?i+c-m:p[y+1]-m;if(S<=0)return null;var P=y%n.length;return A.createElement("rect",{key:"react-".concat(y),x:m,y:s,width:S,height:u,stroke:"none",fill:n[P],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var JH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return s_(Zb(jn(jn(jn({},Qi.defaultProps),n),{},{ticks:l_(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},eq=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return s_(Zb(jn(jn(jn({},Qi.defaultProps),n),{},{ticks:l_(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},tq={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function dk(e){var t=Dv(),n=kv(),r=d_(),i=jn(jn({},Lr(e,tq)),{},{x:De(e.x)?e.x:r.left,y:De(e.y)?e.y:r.top,width:De(e.width)?e.width:r.width,height:De(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:c,x:u,y:d,width:p,height:h,syncWithTicks:m,horizontalValues:y,verticalValues:x}=i,S=Ir(),P=_e(Z=>PE(Z,"xAxis",s,S)),C=_e(Z=>PE(Z,"yAxis",c,S));if(!De(p)||p<=0||!De(h)||h<=0||!De(u)||u!==+u||!De(d)||d!==+d)return null;var w=i.verticalCoordinatesGenerator||JH,O=i.horizontalCoordinatesGenerator||eq,{horizontalPoints:_,verticalPoints:M}=i;if((!_||!_.length)&&typeof O=="function"){var k=y&&y.length,D=O({yAxis:C?jn(jn({},C),{},{ticks:k?y:C.ticks}):void 0,width:t,height:n,offset:r},k?!0:m);qc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(_=D)}if((!M||!M.length)&&typeof w=="function"){var L=x&&x.length,$=w({xAxis:P?jn(jn({},P),{},{ticks:L?x:P.ticks}):void 0,width:t,height:n,offset:r},L?!0:m);qc(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(M=$)}return A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(VH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(QH,jo({},i,{horizontalPoints:_})),A.createElement(ZH,jo({},i,{verticalPoints:M})),A.createElement(XH,jo({},i,{offset:r,horizontalPoints:_,xAxis:P,yAxis:C})),A.createElement(WH,jo({},i,{offset:r,verticalPoints:M,xAxis:P,yAxis:C})))}dk.displayName="CartesianGrid";var nq=["children"],rq=["dangerouslySetInnerHTML","ticks"],aq=["id"];function hk(e,t,n){return(t=iq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iq(e){var t=oq(e,"string");return typeof t=="symbol"?t:t+""}function oq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y0(){return Y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y0.apply(null,arguments)}function F0(e,t){if(e==null)return{};var n,r,i=sq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function lq(e){var t=jt(),n=A.useMemo(()=>{var{children:r}=e,i=F0(e,nq);return i},[e]);return A.useEffect(()=>(t(X9(n)),()=>{t(W9(n))}),[n,t]),e.children}var cq=e=>{var{xAxisId:t,className:n}=e,r=_e(_v),i=Ir(),s="xAxis",c=_e(C=>Sl(C,s,t,i)),u=_e(C=>aD(C,s,t,i)),d=_e(C=>eD(C,t)),p=_e(C=>T8(C,t)),h=_e(C=>kT(C,t));if(d==null||p==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:y}=e,x=F0(e,rq),{id:S}=h,P=F0(h,aq);return A.createElement(Qi,Y0({},x,P,{scale:c,x:p.x,y:p.y,width:d.width,height:d.height,className:st("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},uq=e=>{var t,n,r,i,s;return A.createElement(lq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},A.createElement(cq,e))};class ex extends A.Component{render(){return A.createElement(uq,this.props)}}hk(ex,"displayName","XAxis");hk(ex,"defaultProps",{allowDataOverflow:lr.allowDataOverflow,allowDecimals:lr.allowDecimals,allowDuplicatedCategory:lr.allowDuplicatedCategory,height:lr.height,hide:!1,mirror:lr.mirror,orientation:lr.orientation,padding:lr.padding,reversed:lr.reversed,scale:lr.scale,tickCount:lr.tickCount,type:lr.type,xAxisId:0});var fq=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,c=0;if(t){t.forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>c&&(c=m.width)}});var u=n?n.getBoundingClientRect().width:0,d=i+s,p=c+d+u+(n?r:0);return Math.round(p)}return 0},dq=["dangerouslySetInnerHTML","ticks"],hq=["id"];function pk(e,t,n){return(t=pq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pq(e){var t=mq(e,"string");return typeof t=="symbol"?t:t+""}function mq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K0.apply(null,arguments)}function ww(e,t){if(e==null)return{};var n,r,i=gq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yq(e){var t=jt();return A.useEffect(()=>(t(Q9(e)),()=>{t(Z9(e))}),[e,t]),null}var vq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,c=A.useRef(null),u=A.useRef(null),d=_e(_v),p=Ir(),h=jt(),m="yAxis",y=_e(D=>Sl(D,m,n,p)),x=_e(D=>tD(D,n)),S=_e(D=>D8(D,n)),P=_e(D=>aD(D,m,n,p)),C=_e(D=>NT(D,n));if(A.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!x||zb(s)||A.isValidElement(s)||C==null)){var L=c.current,$=L==null||(D=L.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:Z,tickMargin:ae}=L.props,H=fq({ticks:$,label:u.current,labelGapWithTick:5,tickSize:Z,tickMargin:ae});Math.round(x.width)!==Math.round(H)&&h(J9({id:n,width:H}))}},[c,c==null||(t=c.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,h,s,n,i]),x==null||S==null||C==null)return null;var{dangerouslySetInnerHTML:w,ticks:O}=e,_=ww(e,dq),{id:M}=C,k=ww(C,hq);return A.createElement(Qi,K0({},_,k,{ref:c,labelRef:u,scale:y,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:x.width,height:x.height,className:st("recharts-".concat(m," ").concat(m),r),viewBox:d,ticks:P}))},bq=e=>{var t,n,r,i,s;return A.createElement(A.Fragment,null,A.createElement(yq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),A.createElement(vq,e))},xq={allowDataOverflow:cr.allowDataOverflow,allowDecimals:cr.allowDecimals,allowDuplicatedCategory:cr.allowDuplicatedCategory,hide:!1,mirror:cr.mirror,orientation:cr.orientation,padding:cr.padding,reversed:cr.reversed,scale:cr.scale,tickCount:cr.tickCount,type:cr.type,width:cr.width,yAxisId:0};class tx extends A.Component{render(){return A.createElement(bq,this.props)}}pk(tx,"displayName","YAxis");pk(tx,"defaultProps",xq);var zy={exports:{}},Gy={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function Sq(){if(Ow)return Gy;Ow=1;var e=fl();function t(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,u=e.useDebugValue;return Gy.useSyncExternalStoreWithSelector=function(d,p,h,m,y){var x=i(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=c(function(){function C(k){if(!w){if(w=!0,O=k,k=m(k),y!==void 0&&S.hasValue){var D=S.value;if(y(D,k))return _=D}return _=k}if(D=_,n(O,k))return D;var L=m(k);return y!==void 0&&y(D,L)?(O=k,D):(O=k,_=L)}var w=!1,O,_,M=h===void 0?null:h;return[function(){return C(p())},M===null?void 0:function(){return C(M())}]},[p,h,m,y]);var P=r(d,x[0],x[1]);return s(function(){S.hasValue=!0,S.value=P},[P]),u(P),P},Gy}var _w;function Aq(){return _w||(_w=1,zy.exports=Sq()),zy.exports}Aq();function Pq(e){e()}function Cq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Pq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Tw={notify(){},get:()=>[]};function Eq(e,t){let n,r=Tw,i=0,s=!1;function c(P){h();const C=r.subscribe(P);let w=!1;return()=>{w||(w=!0,C(),m())}}function u(){r.notify()}function d(){S.onStateChange&&S.onStateChange()}function p(){return s}function h(){i++,n||(n=e.subscribe(d),r=Cq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Tw)}function y(){s||(s=!0,h())}function x(){s&&(s=!1,m())}const S={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:p,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return S}var wq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Oq=wq(),_q=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Tq=_q(),Dq=()=>Oq||Tq?A.useLayoutEffect:A.useEffect,kq=Dq(),Nq=Symbol.for("react-redux-context"),Mq=typeof globalThis<"u"?globalThis:{};function jq(){if(!A.createContext)return{};const e=Mq[Nq]??=new Map;let t=e.get(A.createContext);return t||(t=A.createContext(null),e.set(A.createContext,t)),t}var Rq=jq();function Iq(e){const{children:t,context:n,serverState:r,store:i}=e,s=A.useMemo(()=>{const d=Eq(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),c=A.useMemo(()=>i.getState(),[i]);kq(()=>{const{subscription:d}=s;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),c!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[s,c]);const u=n||Rq;return A.createElement(u.Provider,{value:s},t)}var Lq=Iq,$q=(e,t)=>t,nx=te([$q,et,_T,sn,bD,li,jU,an],BU),rx=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},mk=jr("mouseClick"),gk=cu();gk.startListening({actionCreator:mk,effect:(e,t)=>{var n=e.payload,r=nx(t.getState(),rx(n));r?.activeIndex!=null&&t.dispatch(H8({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var V0=jr("mouseMove"),yk=cu();yk.startListening({actionCreator:V0,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Nb(r,r.tooltip.settings.shared),s=nx(r,rx(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(dD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(fD()))}});function Bq(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Dw={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},vk=gr({name:"rootProps",initialState:Dw,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:Dw.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Uq=vk.reducer,{updateOptions:zq}=vk.actions,bk=gr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Gq}=bk.actions,Hq=bk.reducer,xk=jr("keyDown"),Sk=jr("focus"),ax=cu();ax.startListening({actionCreator:xk,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=Number(Mb(i,Pl(n))),u=li(n);if(s==="Enter"){var d=Zd(n,"axis","hover",String(i.index));t.dispatch(B0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var p=j8(n),h=p==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,y=c+m*h;if(!(u==null||y>=u.length||y<0)){var x=Zd(n,"axis","hover",String(y));t.dispatch(B0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});ax.startListening({actionCreator:Sk,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",c=Zd(n,"axis","hover",String(s));t.dispatch(B0({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:c}))}}}});var Dr=jr("externalEvent"),Ak=cu();Ak.startListening({actionCreator:Dr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:EU(n),activeDataKey:PD(n),activeIndex:Ho(n),activeLabel:AD(n),activeTooltipIndex:Ho(n),isTooltipActive:wU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var qq=te([Al],e=>e.tooltipItemPayloads),Yq=te([qq,xu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var c=t(s,n);return c}}}),Pk=jr("touchMove"),Ck=cu();Ck.startListening({actionCreator:Pk,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Nb(r,r.tooltip.settings.shared);if(i==="axis"){var s=nx(r,rx({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(dD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var c,u=n.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var p=d.getAttribute(u_),h=(c=d.getAttribute(f_))!==null&&c!==void 0?c:void 0,m=Yq(t.getState(),p,h);t.dispatch(uD({activeDataKey:h,activeIndex:p,activeCoordinate:m}))}}});var Fq=IO({brush:gH,cartesianAxis:eG,chartData:tz,errorBars:pG,graphicalItems:v9,layout:L3,legend:OL,options:WU,polarAxis:j7,polarOptions:Hq,referenceElements:PH,rootProps:Uq,tooltip:q8}),Kq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return l3({reducer:Fq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([gk.middleware,yk.middleware,ax.middleware,Ak.middleware,Ck.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Bq},name:"recharts-".concat(n)}})};function Ek(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Ir(),s=A.useRef(null);if(i)return n;s.current==null&&(s.current=Kq(t,r));var c=Sv;return A.createElement(Lq,{context:c,store:s.current},n)}function wk(e){var{layout:t,width:n,height:r,margin:i}=e,s=jt(),c=Ir();return A.useEffect(()=>{c||(s(j3(t)),s(R3({width:n,height:r})),s(M3(i)))},[s,c,t,n,r,i]),null}function Ok(e){var t=jt();return A.useEffect(()=>{t(zq(e))},[t,e]),null}var Vq=["children"];function Xq(e,t){if(e==null)return{};var n,r,i=Wq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ih(){return ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ih.apply(null,arguments)}var Qq={width:"100%",height:"100%"},Zq=A.forwardRef((e,t)=>{var n=Dv(),r=kv(),i=g_();if(!rl(n)||!rl(r))return null;var{children:s,otherAttributes:c,title:u,desc:d}=e,p,h;return typeof c.tabIndex=="number"?p=c.tabIndex:p=i?0:void 0,typeof c.role=="string"?h=c.role:h=i?"application":void 0,A.createElement(dv,ih({},c,{title:u,desc:d,role:h,tabIndex:p,width:n,height:r,style:Qq,ref:t}),s)}),Jq=e=>{var{children:t}=e,n=_e(Ph);if(!n)return null;var{width:r,height:i,y:s,x:c}=n;return A.createElement(dv,{width:r,height:i,x:c,y:s},t)},kw=A.forwardRef((e,t)=>{var{children:n}=e,r=Xq(e,Vq),i=Ir();return i?A.createElement(Jq,null,n):A.createElement(Zq,ih({ref:t},r),n)});function eY(){var e=jt(),[t,n]=A.useState(null),r=_e(dL);return A.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;mr(s)&&s!==r&&e(I3(s))}},[t,e,r]),n}function Nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nw(Object(n),!0).forEach(function(r){nY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nY(e,t,n){return(t=rY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rY(e){var t=aY(e,"string");return typeof t=="symbol"?t:t+""}function aY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iY=A.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:c,onDoubleClick:u,onMouseDown:d,onMouseEnter:p,onMouseLeave:h,onMouseMove:m,onMouseUp:y,onTouchEnd:x,onTouchMove:S,onTouchStart:P,style:C,width:w}=e,O=jt(),[_,M]=A.useState(null),[k,D]=A.useState(null);uz();var L=eY(),$=A.useCallback(V=>{L(V),typeof t=="function"&&t(V),M(V),D(V)},[L,t,M,D]),Z=A.useCallback(V=>{O(mk(V)),O(Dr({handler:s,reactEvent:V}))},[O,s]),ae=A.useCallback(V=>{O(V0(V)),O(Dr({handler:p,reactEvent:V}))},[O,p]),H=A.useCallback(V=>{O(fD()),O(Dr({handler:h,reactEvent:V}))},[O,h]),re=A.useCallback(V=>{O(V0(V)),O(Dr({handler:m,reactEvent:V}))},[O,m]),me=A.useCallback(()=>{O(Sk())},[O]),de=A.useCallback(V=>{O(xk(V.key))},[O]),ve=A.useCallback(V=>{O(Dr({handler:c,reactEvent:V}))},[O,c]),G=A.useCallback(V=>{O(Dr({handler:u,reactEvent:V}))},[O,u]),oe=A.useCallback(V=>{O(Dr({handler:d,reactEvent:V}))},[O,d]),be=A.useCallback(V=>{O(Dr({handler:y,reactEvent:V}))},[O,y]),ne=A.useCallback(V=>{O(Dr({handler:P,reactEvent:V}))},[O,P]),j=A.useCallback(V=>{O(Pk(V)),O(Dr({handler:S,reactEvent:V}))},[O,S]),X=A.useCallback(V=>{O(Dr({handler:x,reactEvent:V}))},[O,x]);return A.createElement(TD.Provider,{value:_},A.createElement(rO.Provider,{value:k},A.createElement("div",{className:st("recharts-wrapper",r),style:tY({position:"relative",cursor:"default",width:w,height:i},C),onClick:Z,onContextMenu:ve,onDoubleClick:G,onFocus:me,onKeyDown:de,onMouseDown:oe,onMouseEnter:ae,onMouseLeave:H,onMouseMove:re,onMouseUp:be,onTouchEnd:X,onTouchMove:j,onTouchStart:ne,ref:$},n)))}),oY=["children","className","width","height","style","compact","title","desc"];function sY(e,t){if(e==null)return{};var n,r,i=lY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _k=A.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:c,compact:u,title:d,desc:p}=e,h=sY(e,oY),m=Ko(h);return u?A.createElement(kw,{otherAttributes:m,title:d,desc:p},n):A.createElement(iY,{className:r,style:c,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},A.createElement(kw,{otherAttributes:m,title:d,desc:p,ref:t},A.createElement(EH,null,n)))}),cY=["width","height"];function X0(){return X0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X0.apply(null,arguments)}function uY(e,t){if(e==null)return{};var n,r,i=fY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dY={top:5,right:5,bottom:5,left:5},hY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:dY,reverseStackOrder:!1,syncMethod:"index"},pY=A.forwardRef(function(t,n){var r,i=Lr(t.categoricalChartProps,hY),{width:s,height:c}=i,u=uY(i,cY);if(!rl(s)||!rl(c))return null;var{chartName:d,defaultTooltipEventType:p,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,categoricalChartProps:y}=t,x={chartName:d,defaultTooltipEventType:p,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return A.createElement(Ek,{preloadedState:{options:x},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:d},A.createElement(sk,{chartData:y.data}),A.createElement(wk,{width:s,height:c,layout:i.layout,margin:i.margin}),A.createElement(Ok,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),A.createElement(_k,X0({},u,{width:s,height:c,ref:n})))}),mY=["axis","item"],gY=A.forwardRef((e,t)=>A.createElement(pY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mY,tooltipPayloadSearcher:DD,categoricalChartProps:e,ref:t}));function yY(e){var t=jt();return A.useEffect(()=>{t(Gq(e))},[t,e]),null}var vY=["width","height","layout"];function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W0.apply(null,arguments)}function bY(e,t){if(e==null)return{};var n,r,i=xY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var SY={top:5,right:5,bottom:5,left:5},AY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:SY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},PY=A.forwardRef(function(t,n){var r,i=Lr(t.categoricalChartProps,AY),{width:s,height:c,layout:u}=i,d=bY(i,vY);if(!rl(s)||!rl(c))return null;var{chartName:p,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:y}=t,x={chartName:p,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:y,eventEmitter:void 0};return A.createElement(Ek,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:p},A.createElement(sk,{chartData:i.data}),A.createElement(wk,{width:s,height:c,layout:u,margin:i.margin}),A.createElement(Ok,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),A.createElement(yY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(_k,W0({width:s,height:c},d,{ref:n})))}),CY=["item"],EY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Mw=A.forwardRef((e,t)=>{var n=Lr(e,EY);return A.createElement(PY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:CY,tooltipPayloadSearcher:DD,categoricalChartProps:n,ref:t})});const wY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80 transform scale-150",onClick:n=>n.stopPropagation(),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Fc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})}):null,OY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:s})=>{const[c,u]=A.useState(null),[d,p]=A.useState(!1),[h,m]=A.useState(!1),[y,x]=A.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,P]=A.useState(!1),C=A.useRef(null),[w,O]=A.useState({key:"name",direction:"ascending"}),[_,M]=A.useState("cost"),[k,D]=A.useState(!0),L=A.useMemo(()=>{const q=se=>se?se.replace(/_/g," ").toLowerCase().split(" ").map(ge=>ge.charAt(0).toUpperCase()+ge.slice(1)).join(" "):"";return t.map(se=>{const Pe=[],ge=se.effect;if(ge.type==="REPEATING_EFFECT")Pe.push(q(ge.type)),ge.effects&&Array.isArray(ge.effects)&&ge.effects.forEach(he=>{he.type&&Pe.push(q(he.type))});else if(ge.type==="MODIFY_DRONE_BASE"&&ge.mod){const he=ge.mod.stat,xe=ge.mod.value;he==="attack"?Pe.push(xe>0?"Attack Buff":"Attack Debuff"):he==="speed"?Pe.push(xe>0?"Speed Buff":"Speed Debuff"):he==="shields"?Pe.push(xe>0?"Shield Buff":"Shield Debuff"):he==="cost"?Pe.push(xe<0?"Cost Reduction":"Cost Increase"):he==="limit"?Pe.push(xe>0?"Limit Buff":"Limit Debuff"):he==="ability"?(Pe.push("Ability Grant"),ge.mod.abilityToAdd&&ge.mod.abilityToAdd.name&&Pe.push(ge.mod.abilityToAdd.name)):Pe.push(q(`${he} Modification`))}else if(ge.type==="MODIFY_STAT"&&ge.mod){const he=ge.mod.stat,xe=ge.mod.value;ge.mod.type,he==="attack"?Pe.push(xe>0?"Attack Buff":"Attack Debuff"):he==="speed"?Pe.push(xe>0?"Speed Buff":"Speed Debuff"):he==="shields"?Pe.push(xe>0?"Shield Buff":"Shield Debuff"):Pe.push(xe>0?`${he} Buff`:`${he} Debuff`)}else ge.type==="SEARCH_AND_DRAW"?(Pe.push(q(ge.type)),Pe.push("Draw")):ge.type&&Pe.push(q(ge.type));ge.goAgain&&Pe.push("Go Again"),ge.damageType==="PIERCING"&&Pe.push("Piercing"),ge.mod?.type&&Pe.push(q(ge.mod.type));const le=(()=>{if(se.targeting){const he=q(se.targeting.type);if(se.targeting.affinity){const xe=se.targeting.affinity.charAt(0)+se.targeting.affinity.slice(1).toLowerCase();return`${he} (${xe})`}return he}else if(ge.type==="MULTI_MOVE"&&ge.source){const he=ge.source.location||"Any",xe=ge.source.affinity||"Any",W=xe.charAt(0).toUpperCase()+xe.slice(1).toLowerCase();return`${q(he)} (${W})`}else if(ge.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...se,keywords:Pe,targetingText:le}})},[t]),$=A.useMemo(()=>{const q=new Set,se=new Set,Pe=new Set;L.forEach(le=>{q.add(le.cost),se.add(le.targetingText),le.keywords.forEach(he=>Pe.add(he))});const ge=Array.from(q);return{minCost:Math.min(...ge),maxCost:Math.max(...ge),targets:["all",...Array.from(se).sort()],abilities:Array.from(Pe).sort()}},[L]);A.useEffect(()=>{$.minCost!==1/0&&$.maxCost!==-1/0&&x(q=>({...q,cost:{min:$.minCost,max:$.maxCost}}))},[$.minCost,$.maxCost]);const{cardCount:Z,deckListForDisplay:ae,baseCardCounts:H}=A.useMemo(()=>{const q={};let se=0;Object.entries(n).forEach(([ge,le])=>{if(le>0){se+=le;const he=L.find(xe=>xe.id===ge);if(he){const xe=he.baseCardId;q[xe]=(q[xe]||0)+le}}});const Pe=Object.entries(n).filter(([,ge])=>ge>0).map(([ge,le])=>({...L.find(xe=>xe.id===ge),quantity:le})).sort((ge,le)=>ge.name.localeCompare(le.name));return{cardCount:se,deckListForDisplay:Pe,baseCardCounts:q}},[n,L]),re=Z>=40,me=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],de=A.useMemo(()=>{const q={};ae.forEach(le=>{const he=le.cost||0;q[he]=(q[he]||0)+le.quantity});const se=Object.entries(q).map(([le,he])=>({name:`${le}`,count:he})).sort((le,he)=>parseInt(le.name)-parseInt(he.name)),Pe={};ae.forEach(le=>{le.keywords&&le.keywords.forEach(he=>{Pe[he]=(Pe[he]||0)+le.quantity})});const ge=Object.entries(Pe).map(([le,he])=>({name:le,value:he})).sort((le,he)=>he.value-le.value);return{barChartData:se,pieChartData:ge}},[ae]),ve=A.useMemo(()=>{let q=[...L].filter(se=>se.cost<y.cost.min||se.cost>y.cost.max||y.target!=="all"&&se.targetingText!==y.target||y.type!=="all"&&se.type!==y.type?!1:y.abilities.length>0?y.abilities.every(Pe=>se.keywords.includes(Pe)):!(y.hideEnhanced&&se.id.endsWith("_ENHANCED")));return w.key!==null&&q.sort((se,Pe)=>{const ge=se[w.key],le=Pe[w.key];if(ge==null&&le==null)return 0;if(ge==null)return 1;if(le==null)return-1;const he=String(ge).toLowerCase(),xe=String(le).toLowerCase();return he<xe?w.direction==="ascending"?-1:1:he>xe?w.direction==="ascending"?1:-1:se.id.localeCompare(Pe.id)}),q},[L,y,w]),G=q=>{let se="ascending";w.key===q&&w.direction==="ascending"&&(se="descending"),O({key:q,direction:se})},oe=(q,se)=>{x(Pe=>({...Pe,[q]:se}))},be=q=>{x(se=>{const Pe=se.abilities.includes(q)?se.abilities.filter(ge=>ge!==q):[...se.abilities,q];return{...se,abilities:Pe}})},ne=()=>{x({cost:{min:$.minCost,max:$.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),P(!1)},j=()=>{Object.keys(n).forEach(q=>{n[q]>0&&r(q,0)})};A.useEffect(()=>{const q=se=>{C.current&&!C.current.contains(se.target)&&P(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]);const X=Math.PI/180,V=({cx:q,cy:se,midAngle:Pe,outerRadius:ge,fill:le,name:he,value:xe})=>{const W=Math.sin(-X*Pe),ze=Math.cos(-X*Pe),Ie=q+(ge+5)*ze,Pt=se+(ge+5)*W,qt=q+(ge+15)*ze,Rt=se+(ge+15)*W,nt=qt+(ze>=0?1:-1)*12,Tt=Rt,Cl=ze>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${Ie},${Pt}L${qt},${Rt}L${nt},${Tt}`,stroke:le,fill:"none"}),v.jsx("circle",{cx:nt,cy:Tt,r:2,fill:le,stroke:"none"}),v.jsx("text",{x:nt+(ze>=0?1:-1)*8,y:Tt,dy:4,textAnchor:Cl,fill:"#9CA3AF",fontSize:"11px",children:`${he} (${xe})`})]})},ue=()=>{const[q,se]=A.useState(""),Pe=A.useRef(null),ge=A.useMemo(()=>Object.entries(n).map(([he,xe])=>`${he}:${xe}`).join(","),[n]),le=()=>{Pe.current.select(),document.execCommand("copy"),se("Copied!"),setTimeout(()=>se(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>p(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:he=>he.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:Pe,readOnly:!0,value:ge,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:q}),v.jsxs("button",{onClick:le,className:"flex items-center gap-2 bg-cyan-600 text-white font-bold py-2 px-4 rounded hover:bg-cyan-700",children:[v.jsx(Gw,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>p(!1),className:"flex items-center gap-2 bg-pink-600 text-white font-bold py-2 px-4 rounded hover:bg-pink-700",children:[v.jsx(dl,{size:16})," Close"]})]})]})})},Ae=()=>{const[q,se]=A.useState(""),[Pe,ge]=A.useState(""),le=()=>{ge("");const he=s(q);he.success?m(!1):ge(he.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:he=>he.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:q,onChange:he=>se(he.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),Pe&&v.jsx("p",{className:"text-red-500 mt-2",children:Pe}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-700",children:"Cancel"}),v.jsx("button",{onClick:le,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded hover:bg-purple-700",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[c&&v.jsx(wY,{card:c,onClose:()=>u(null)}),d&&v.jsx(ue,{}),h&&v.jsx(Ae,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(zM,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(SM,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:ne,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",y.cost.min," - ",y.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:$.minCost,max:$.maxCost,value:y.cost.min,onChange:q=>oe("cost",{...y.cost,min:Math.min(parseInt(q.target.value),y.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:$.minCost,max:$.maxCost,value:y.cost.max,onChange:q=>oe("cost",{...y.cost,max:Math.max(parseInt(q.target.value),y.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:C,children:[v.jsx("button",{onClick:()=>P(!S),className:"filter-select w-full text-left h-full",children:y.abilities.length===0?"Select Abilities":`${y.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:$.abilities.map(q=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:y.abilities.includes(q),onChange:()=>be(q),className:"mr-2"}),q]},q))})]}),v.jsxs("select",{onChange:q=>oe("type",q.target.value),value:y.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:y.hideEnhanced,onChange:q=>oe("hideEnhanced",q.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>G("name"),className:`w-full text-left transition-colors underline cursor-pointer ${w.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",w.key==="name"&&(w.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>G("type"),className:`w-full text-left transition-colors underline cursor-pointer ${w.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",w.key==="type"&&(w.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>G("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${w.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",w.key==="cost"&&(w.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>G("description"),className:`w-full text-left transition-colors underline cursor-pointer ${w.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",w.key==="description"&&(w.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:ve.map((q,se)=>{const Pe=n[q.id]||0,ge=H[q.baseCardId]||0,le=q.maxInDeck;return v.jsxs("tr",{className:q.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(q),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(yA,{size:18})})}),v.jsx("td",{className:"font-bold",children:q.name}),v.jsx("td",{className:`font-semibold ${q.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:q.type}),v.jsx("td",{children:q.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:q.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:q.keywords.map(he=>v.jsx("span",{className:"ability-chip",children:he},he))})}),v.jsx("td",{className:"text-xs",children:q.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):q.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:le+1}).map((he,xe)=>{const W=xe===Pe,ze=le-(ge-Pe),Ie=xe>ze;return v.jsx("button",{onClick:()=>r(q.id,xe),className:`quantity-btn ${W?"selected":""}`,disabled:Ie,children:xe},xe)})})})]},`${q.id}-${se}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${re?"text-green-400":"text-white"}`,children:["Your Deck (",Z,"/40)"]}),v.jsx("button",{onClick:j,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:ae.length>0?ae.map(q=>{const se=H[q.baseCardId]>=q.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(q),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(yA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:q.name,children:q.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(q.id,q.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",q.quantity]}),v.jsx("button",{onClick:()=>r(q.id,q.quantity+1),disabled:se,className:"deck-edit-btn",children:"+"})]})]},q.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),Z>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!k),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(Bc,{size:20,className:`transition-transform duration-300 ${k?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${k?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>M("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>M("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>M("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[_==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(ky,{width:"100%",height:"100%",children:v.jsxs(gY,{data:de.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(dk,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(ex,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(tx,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(Ey,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(ik,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),_==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(ky,{width:"100%",height:"100%",children:v.jsxs(Mw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(H0,{data:[{name:"Action Cards",value:ae.filter(q=>q.type==="Action").reduce((q,se)=>q+se.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:ae.filter(q=>q.type==="Upgrade").reduce((q,se)=>q+se.quantity,0),color:"#c084fc"}].filter(q=>q.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:q,value:se,percent:Pe})=>`${q}: ${se} (${(Pe*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:ae.filter(q=>q.type==="Action").reduce((q,se)=>q+se.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:ae.filter(q=>q.type==="Upgrade").reduce((q,se)=>q+se.quantity,0),color:"#c084fc"}].filter(q=>q.value>0).map((q,se)=>v.jsx(ul,{fill:q.color},`cell-${se}`))}),v.jsx(Ey,{}),v.jsx(Ch,{})]})})]}),_==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(ky,{width:"100%",height:"100%",children:v.jsxs(Mw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(H0,{data:de.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:V,outerRadius:60,dataKey:"value",children:de.pieChartData.map((q,se)=>v.jsx(ul,{fill:me[se%me.length]},`cell-${se}`))}),v.jsx(Ey,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!re,className:"w-full p-4 mt-4 text-lg font-bold font-orbitron rounded-lg bg-purple-600 text-white transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed enabled:hover:bg-purple-500",children:"Confirm Deck"})]})]})]})},_Y=({card:e})=>v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80",children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),jw=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((c,u)=>c.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:c=>c.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(dl,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((c,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(_Y,{card:c})},`${c.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},TY=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:""})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),DY=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=A.useState([]);if(!e||!r)return null;const{searchedCards:c,drawCount:u,type:d,filter:p}=r,h=S=>{s(P=>{const C=S.instanceId||`${S.id}-${S.name}`;return P.some(O=>(O.instanceId||`${O.id}-${O.name}`)===C)?P.filter(O=>(O.instanceId||`${O.id}-${O.name}`)!==C):P.length<u?[...P,S]:[...P.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),s([]))},y=()=>{s([]),t()},x=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(dl,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:d==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:p?`Select ${u} ${p.type} card${u>1?"s":""} from ${c.length} found ${p.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${c.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${x?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:c.map((S,P)=>v.jsx(TY,{card:S,isSelected:i.some(C=>{const w=S.instanceId||`${S.id}-${S.name}`;return(C.instanceId||`${C.id}-${C.name}`)===w}),onClick:h},S.instanceId||`${S.id}-${P}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:y,className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!x,className:`font-bold py-3 px-8 rounded-full transition-colors ${x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"Confirm Selection"})]})]})})},kY=({onGameStart:e,onBack:t})=>{const[n,r]=A.useState("menu"),[i,s]=A.useState(""),[c,u]=A.useState(""),[d,p]=A.useState("disconnected"),[h,m]=A.useState(""),[y,x]=A.useState(!1),[S,P]=A.useState(!1);A.useEffect(()=>Ka.subscribe($=>{switch(console.log("P2P Event:",$),$.type){case"room_created":s($.data.roomCode),r("waiting"),p("waiting"),x(!1);break;case"joined_room":s($.data.roomCode),r("connected"),p("connected"),x(!1);break;case"connected":r("connected"),p("connected"),x(!1),m("");break;case"disconnected":p("disconnected"),r("menu"),s(""),m("");break;case"connection_error":m($.data.error),x(!1),r("menu");break}}),[]);const C=async()=>{x(!0),m(""),r("host");try{const L=await Ka.hostGame();console.log("Room created with code:",L)}catch(L){console.error("Failed to host game:",L),m(L.message),x(!1),r("menu")}},w=async()=>{if(c.length!==6){m("Please enter a 6-digit room code");return}x(!0),m(""),r("join");try{await Ka.joinGame(c)}catch(L){console.error("Failed to join game:",L),m(L.message),x(!1),r("menu")}},O=async()=>{try{await navigator.clipboard.writeText(i),P(!0),setTimeout(()=>P(!1),2e3)}catch(L){console.error("Failed to copy room code:",L)}},_=()=>{d==="connected"&&e()},M=()=>{Ka.disconnect(),r("menu"),s(""),u(""),m("")},k=()=>{d!=="disconnected"&&M(),t()},D=()=>{switch(d){case"waiting":return v.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[v.jsx(Do,{className:"w-4 h-4 animate-spin"}),v.jsx("span",{children:"Waiting for opponent..."})]});case"connected":return v.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[v.jsx(vA,{className:"w-4 h-4"}),v.jsx("span",{children:"Connected to opponent"})]});case"disconnected":default:return v.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[v.jsx(KM,{className:"w-4 h-4"}),v.jsx("span",{children:"Not connected"})]})}};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-md",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsxs("h2",{className:"text-3xl font-bold text-white mb-2 flex items-center justify-center gap-2",children:[v.jsx(YM,{className:"w-8 h-8 text-purple-400"}),"Multiplayer"]}),v.jsx("div",{className:"mb-4",children:D()})]}),h&&v.jsx("div",{className:"bg-red-900/50 border border-red-500 rounded-lg p-3 mb-4",children:v.jsx("p",{className:"text-red-300 text-sm",children:h})}),n==="menu"&&v.jsxs("div",{className:"space-y-4",children:[v.jsxs("button",{onClick:C,disabled:y,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[y?v.jsx(Do,{className:"w-5 h-5 animate-spin"}):v.jsx(CM,{className:"w-5 h-5"}),"Host Game"]}),v.jsx("div",{className:"text-center text-gray-400 text-sm",children:"or"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("input",{type:"text",placeholder:"Enter 6-digit room code",value:c,onChange:L=>u(L.target.value.replace(/[^0-9]/g,"").slice(0,6)),className:"w-full bg-slate-800 border border-gray-600 rounded-lg px-4 py-3 text-white text-center text-lg tracking-widest",maxLength:6}),v.jsxs("button",{onClick:w,disabled:y||c.length!==6,className:"w-full bg-cyan-600 hover:bg-cyan-700 disabled:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[y?v.jsx(Do,{className:"w-5 h-5 animate-spin"}):v.jsx(vA,{className:"w-5 h-5"}),"Join Game"]})]})]}),n==="waiting"&&v.jsxs("div",{className:"text-center space-y-4",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[v.jsx("p",{className:"text-gray-300 mb-2",children:"Share this room code:"}),v.jsxs("div",{className:"flex items-center justify-center gap-2",children:[v.jsx("code",{className:"text-2xl font-mono text-white bg-slate-700 px-4 py-2 rounded",children:i}),v.jsx("button",{onClick:O,className:"bg-purple-600 hover:bg-purple-700 text-white p-2 rounded transition-colors",children:S?v.jsx(hM,{className:"w-5 h-5"}):v.jsx(Gw,{className:"w-5 h-5"})})]})]}),v.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-400",children:[v.jsx(Do,{className:"w-5 h-5 animate-spin"}),v.jsx("span",{children:"Waiting for opponent to join..."})]})]}),n==="connected"&&v.jsxs("div",{className:"text-center space-y-4",children:[v.jsxs("div",{className:"bg-green-900/50 border border-green-500 rounded-lg p-4",children:[v.jsx("p",{className:"text-green-300",children:" Connected to opponent!"}),i&&v.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Room: ",i]})]}),v.jsx("button",{onClick:_,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Start Game"})]}),(n==="host"||n==="join")&&y&&v.jsxs("div",{className:"text-center",children:[v.jsx(Do,{className:"w-8 h-8 animate-spin text-purple-400 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-300",children:n==="host"?"Creating room...":"Joining room..."})]}),v.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:v.jsx("button",{onClick:k,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:d!=="disconnected"?"Disconnect & Back":"Back"})})]})})},NY=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:c,getLocalPlayerId:u})=>{if(!e)return null;const d=n!=="local",p=t===u()?s?.name||"You":c?.name||"Opponent";return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-6 shadow-2xl shadow-purple-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-400 mb-2",children:[v.jsx(Do,{className:"w-6 h-6 animate-spin"}),v.jsx(yM,{className:"w-6 h-6"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:d?"Opponent's Turn":"AI Thinking..."}),v.jsx("p",{className:"text-gray-300 text-sm",children:d?`Waiting for ${p}`:"Processing AI actions..."})]}),d&&r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(HM,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),i&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Recent action:"}),v.jsx("p",{className:"text-white text-sm",children:i})]}),v.jsx("div",{className:"flex justify-center mt-4",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},Hh=()=>{const{gameStateManager:e}=Yi(),t=A.useMemo(()=>e?new lh(e):null,[e]),[n,r]=A.useState(null);return A.useEffect(()=>{if(!t)return;const h=()=>{r(t.getCacheStats())};h();const m=setInterval(h,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(h,m)=>t?t.getEffectiveStats(h,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(h,m=[])=>t?t.getEffectiveShipStats(h,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:h=>t?t.getLaneData(h):{lane:h,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(h,m=null)=>t?t.hasGuardianInLane(h,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},vd=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i})=>{const{name:s,cost:c,image:u,description:d}=e;return v.jsx("div",{onClick:p=>{p.stopPropagation(),(n||i)&&t(e)},className:`
        w-52 h-72 rounded-lg p-1 relative group transition-all duration-200 flex-shrink-0
        ${n?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"grayscale":""}
        ${i?"cursor-pointer ring-2 ring-red-500 animate-pulse":""}
      `,children:v.jsxs("div",{className:`
          w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md
          transition-all duration-200
          ${n&&!r?"group-hover:bg-slate-800":""}
        `,children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:s}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Fc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:c})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:u,alt:s,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:d})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})},ix=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(dl,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),Rw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:c,validCardTargets:u,reallocationPhase:d,gameEngine:p,turnPhase:h,isMyTurn:m,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:P,hoveredTarget:C,setHoveredTarget:w})=>{const{getEffectiveShipStats:O}=Hh(),_=O(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(M=>{const k=n[M];if(!k)return console.log(` [DEBUG] Lane ${M} rendering EMPTY div - no hover possible:`,{sectionName:k,sectionNameType:typeof k,sectionNameValue:JSON.stringify(k),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},M);const D=e.shipSections[k],L=u.some(Z=>Z.id===k);let $=null;if(d&&t){if(d==="removing")D.allocatedShields>0?$="can-remove":$="cannot-remove";else if(d==="adding"){const Z=p.getEffectiveSectionMaxShields(k,e,n);D.allocatedShields<Z?$="can-add":$="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0",children:v.jsx(Pd,{section:k,stats:D,effectiveStatsForDisplay:_.bySection[k],isPlayer:t,isOpponent:!t,onClick:()=>{c&&r?r(k):s&&s({id:k,name:k,...D},"section",t)},onAbilityClick:i,isInteractive:c||h==="action"&&t&&D.ability&&S.energy>=D.ability.cost.energy,isCardTarget:L,isInMiddleLane:M===1,isHovered:C?.type==="section"&&C?.target.name===k,onMouseEnter:()=>!t&&w({target:{name:k,...D},type:"section"}),onMouseLeave:()=>!t&&w(null),reallocationState:$,gameEngine:p,turnPhase:h,isMyTurn:m,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:P})},M)})})},Iw=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),MY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),bd=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:c,onMouseEnter:u,onMouseLeave:d,lane:p,onAbilityClick:h,isActionTarget:m,droneRefs:y,mandatoryAction:x,localPlayerState:S})=>{const{getEffectiveStats:P}=Hh(),C=A.useMemo(()=>In.find(ue=>ue.name===e.name),[e.name]),w=P(e,p),{maxShields:O}=w,_=e.currentShields??O,M=C.abilities.filter(ue=>ue.type==="ACTIVE"),k=n?"border-cyan-400":"border-pink-500",D=n?"bg-cyan-900":"bg-pink-950",L=n?"text-cyan-100":"text-pink-100",$=n?"bg-cyan-900":"bg-pink-950",Z=n?"text-cyan-400":"text-pink-500",ae=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",H=w.attack>w.baseAttack,re=w.attack<w.baseAttack,me=H?"text-green-400":re?"text-red-400":"text-white",de=w.speed>w.baseSpeed,ve=w.speed<w.baseSpeed,G=de?"text-green-400":ve?"text-red-400":"text-white",oe=e.isExhausted?"grayscale opacity-60":"",be=s?"animate-shake":"",ne=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",j=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",X=x?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",V=ue=>!(e.isExhausted&&ue.cost.exhausts!==!1||ue.cost.energy&&S.energy<ue.cost.energy);return v.jsxs("div",{ref:ue=>y.current[e.id]=ue,onClick:ue=>t&&t(ue,e,n),onMouseEnter:u,onMouseLeave:d,className:`relative w-[90px] h-[135px] transition-all duration-200 ${oe} ${be} ${ne} ${j} ${X}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${k} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:O}).map((ue,Ae)=>Ae<_?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:Z,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},Ae):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:ae,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},Ae))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:C.hull}).map((ue,Ae)=>{const q=Ae<e.hull,se=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${q?se:"bg-gray-400"} border border-black/50`},Ae)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${D} flex items-center justify-center border-t ${k}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${L} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(Iw,{value:w.attack,isFlat:!1,bgColor:$,textColor:me})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${c?"interceptor-glow":""}`,children:v.jsx(Iw,{value:w.speed,isFlat:!0,bgColor:$,textColor:G})}),n&&M.length>0&&V(M[0])&&v.jsx(MY,{onClick:ue=>h&&h(ue,e,M[0])})]})},jY=(e,t,n,r,i,s,c,u,d,p,h,m,y,x,S,P,C,w,O,_)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(M=>v.jsx(bd,{drone:M,lane:n,isPlayer:t,onClick:p,onAbilityClick:h,isSelected:m&&m.id===M.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(k=>k.id===M.id),isHit:x.includes(M.id),isPotentialInterceptor:S.includes(M.id),droneRefs:P,mandatoryAction:C,localPlayerState:r,isActionTarget:w.some(k=>k.id===M.id)||O.some(k=>k.id===M.id),onMouseEnter:()=>!t&&_({target:M,type:"drone",lane:n}),onMouseLeave:()=>!t&&_(null)},M.id))}),Lw=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:c,selectedCard:u,validCardTargets:d,multiSelectState:p,turnPhase:h,localPlayerState:m,opponentPlayerState:y,localPlacedSections:x,opponentPlacedSections:S,gameEngine:P,getPlacedSectionsForEngine:C,handleTokenClick:w,handleAbilityIconClick:O,selectedDrone:_,recentlyHitDrones:M,potentialInterceptors:k,droneRefs:D,mandatoryAction:L,setHoveredTarget:$})=>(Hh(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(Z=>{const ae=t?r():i(),H=s&&c.some(me=>me.id===Z&&me.owner===ae)||u&&d.some(me=>me.id===Z&&me.owner===ae)||p&&d.some(me=>me.id===Z&&me.owner===ae),re=t&&(h==="deployment"||h==="action");return v.jsx("div",{onClick:me=>n(me,Z,t),className:`flex-1 rounded-lg border-2 transition-all duration-200 p-2 lane-background
              ${H?"border-purple-500 bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":"border-gray-700/50 bg-black/20"}
              ${re?"cursor-pointer hover:bg-cyan-900/50":""}
            `,children:jY(e.dronesOnBoard[Z],t,Z,m,y,x,S,P,C,w,O,_,p,M,k,D,L,c,d,$)},Z)})})),RY=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,c]=A.useState(null);return v.jsxs(ix,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(vd,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>c(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},IY=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(ix,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Close"})})]})},LY=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[c,u]=A.useState(null);return v.jsxs(ix,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(d=>{const p=s.appliedUpgrades[d.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",d.name]}),v.jsx("div",{className:"space-y-2",children:p.map(h=>v.jsx("div",{onClick:()=>u({droneName:d.name,instanceId:h.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${c?.instanceId===h.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:h.name})},h.instanceId))})]},d.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,c),disabled:!c,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},$Y=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(dl,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(Ad,{drone:t,isSelectable:!1,deployedCount:0})})]})}),BY=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:c,getLocalPlacedSections:u,getOpponentPlacedSections:d,updatePlayerState:p,setCurrentPlayer:h,setTurnPhase:m,setFirstPasserOfPreviousRound:y,addLogEntry:x,resetGame:S,setWinner:P,processAction:C,isActionInProgress:w,getActionQueueLength:O,gameStateManager:_,p2pManager:M}=Yi(),{getEffectiveStats:k,getEffectiveShipStats:D}=Hh(),L=!0;A.useEffect(()=>{{const R=setInterval(()=>{const Y=w(),U=O();(Y||U>0)&&console.log("[RACE DEBUG] Action processing state:",{actionInProgress:Y,queueLength:U,currentPlayer:e.currentPlayer,turnPhase:e.turnPhase,timestamp:Date.now()})},1e3);return()=>clearInterval(R)}},[w,O,e.currentPlayer,e.turnPhase]),A.useEffect(()=>{Hc.initialize(_,Gi,_.actionProcessor,()=>e.gameMode!=="local",Ws),console.log(" GameFlowManager initialized")},[]),A.useEffect(()=>{const N=n0.subscribe(R=>{switch(console.log(" SequentialPhaseManager event:",R),R.type){case"phase_started":console.log(` Sequential phase started: ${R.phase}, first player: ${R.firstPlayer}`);break;case"turn_changed":console.log(` Turn changed to ${R.player} in ${R.phase} phase`);break;case"player_passed":console.log(` ${R.player} passed in ${R.phase} phase`);break;case"phase_completed":console.log(` ${R.phase} phase completed, first passer: ${R.firstPasser}`);break;default:console.log(` Unknown sequential phase event: ${R.type}`)}});return()=>{N()}},[]);const[$,Z]=A.useState(!1),[ae,H]=A.useState(null);A.useEffect(()=>{const N=U=>{const{type:J,phase:pe,playerId:Se,data:ke}=U;if(console.log(` App.jsx received PhaseManager event: ${J}`,{phase:pe,playerId:Se}),J==="phaseTransition"){const{newPhase:Be,previousPhase:Xe,firstPlayerResult:Qe}=U;console.log(` App.jsx handling phase transition: ${Xe}  ${Be}`),Be==="determineFirstPlayer"&&Qe&&(console.log(" First player determined, showing modal"),ne(!0))}},R=Hc.subscribe(N),Y=Gi.subscribe(N);return()=>{R(),Y()}},[i,n,m,H]);const[re,me]=A.useState(null),[de,ve]=A.useState(null),[G,oe]=A.useState(null),[be,ne]=A.useState(!1),[j,X]=A.useState(!1),[V,ue]=A.useState(!1),[Ae,q]=A.useState(!1),[se,Pe]=A.useState(!1),[ge,le]=A.useState(!1),[he,xe]=A.useState(!1),{turnPhase:W,turn:ze,currentPlayer:Ie,firstPlayerOfRound:Pt,firstPasserOfPreviousRound:qt,firstPlayerOverride:Rt,passInfo:nt,winner:Tt,unplacedSections:Cl,shieldsToAllocate:Zi,gameLog:Zo,placedSections:qh}=e,ye=s(),je=c(),Jt=u(),bt=d();if(!ye||!je)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});const[Le,Ye]=A.useState(null),[Pu,Ji]=A.useState(null),[Cu,eo]=A.useState(null),[Jr,ea]=A.useState(null),[ta,na]=A.useState(null),[Jo,es]=A.useState(null),[El,ts]=A.useState([]),[ci,ns]=A.useState(null),[ra,wl]=A.useState(null),[Eu,Ol]=A.useState(0),[_l,wu]=A.useState(null),[ln,Yt]=A.useState("drones"),[Dt,aa]=A.useState(!0),[rs,Ou]=A.useState([]),[Yh,Tl]=A.useState([]),[Br,as]=A.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[to,no]=A.useState({}),ia=A.useRef(null),qn=A.useRef({}),xt=A.useRef(null),Aa=A.useRef(!1),Dl=A.useRef(nt),oa=A.useRef(W),Pa=A.useRef(Tt),is=A.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]),$n=A.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]),os=A.useCallback(N=>{_.setPlayerStates(N.player1,N.player2)},[]);A.useEffect(()=>{Dl.current=nt},[nt]),A.useEffect(()=>{oa.current=W},[W]),A.useEffect(()=>{Pa.current=Tt},[Tt]),A.useEffect(()=>{if(!i())return;const N=Y=>{if(console.log(" P2P Event received in App:",Y),Y.type==="PHASE_COMPLETED"){const{phase:U}=Y.data||Y;console.log(` Opponent completed phase: ${U}`),setOpponentPhaseCompletion(J=>{const pe={...J,[U]:!0};return console.log(" Opponent phase completion updated:",pe),pe})}};return M.subscribe(N)},[i,M]);const ss=A.useCallback(N=>{const R=Ce.createExplosionEffect(N),Y=NA(qn.current[N],xt.current);if(Y){const U=`${R.timestamp}-${Math.random()}`;Tl(J=>[...J,{id:U,top:Y.y,left:Y.x}]),setTimeout(()=>{Tl(J=>J.filter(pe=>pe.id!==U))},R.duration)}},[]),[kt,yn]=A.useState(null),[On,ls]=A.useState([]),[yr,er]=A.useState(null),[cs,vr]=A.useState(null),[_n,Yn]=A.useState(null),[Nt,kl]=A.useState([]),[Tn,Fn]=A.useState(null),[Nl,sa]=A.useState(null),[Fe,St]=A.useState(null),[us,fs]=A.useState(null),[ds,la]=A.useState(null),[Ml,jl]=A.useState(null),[gt,Ca]=A.useState(null),[_u,ro]=A.useState(!1),[ca,Ur]=A.useState(null),[Tu,ao]=A.useState(0),[ui,fi]=A.useState(null),[vn,zr]=A.useState(null),[hs,di]=A.useState(0),[Ea,Gr]=A.useState(0),[br,ps]=A.useState(null),[ms,ua]=A.useState(null),[io,oo]=A.useState(null),$t=ye?D(ye,Jt):null,Bn=je?D(je,bt):null,fa=A.useMemo(()=>ye?Object.values(ye.dronesOnBoard).flat().length:0,[ye?.dronesOnBoard]),so=A.useMemo(()=>je?Object.values(je.dronesOnBoard).flat().length:0,[je?.dronesOnBoard]);A.useCallback(N=>{if(console.log(` sendPhaseCompletion called for phase: ${N}`),setLocalPhaseCompletion(R=>{const Y={...R,[N]:!0};return console.log(" Local phase completion updated:",Y),Y}),i()){const R={type:"PHASE_COMPLETED",data:{phase:N}};console.log(" Sending phase completion message:",R),M.sendData(R),console.log(` Sent phase completion: ${N}`)}else console.log(" Not multiplayer, skipping network send")},[i,M]);const bn=A.useCallback(()=>{ue(!0)},[]),wa=()=>{X(!0)},Bt=A.useCallback(async N=>{const{transition:R,uiEffects:Y}=Ce.createTurnEndEffects(N,Dl.current,oa.current,Pa.current);switch(R.type){case"END_PHASE":R.phase==="deployment"&&wa(),R.phase==="action"&&bn();break;case"CONTINUE_TURN":await C("turnTransition",{newPlayer:R.nextPlayer,reason:"continueTurn"});break;case"CHANGE_PLAYER":await C("turnTransition",{newPlayer:R.nextPlayer,reason:"changePlayer"});break}Y.forEach(U=>{switch(U.type){case"CLOSE_MODAL":H(null);break;case"SHOW_MODAL":H(U.modal);break;case"TRIGGER_AI":Ol(J=>J+1);break}})},[bn]);A.useEffect(()=>{const{validAbilityTargets:N,validCardTargets:R}=Ce.calculateAllValidTargets(kt,yr,Fe,_n,ye,je,In);ls(N),kl(R),kt&&(Yn(null),er(null))},[kt,yr,_n,ye,je,Fe]);const tr=()=>{kt&&(yn(null),Ye(null))},en=()=>{Yn(null),St(null)},xn=A.useCallback(async N=>{if(Aa.current){console.warn("Attack already in progress. Aborting duplicate call.");return}Aa.current=!0;try{const R=U=>{Ou(J=>[...J,U]),setTimeout(()=>Ou(J=>J.filter(pe=>pe!==U)),500)},Y=await C("attack",{attackDetails:N});N.targetId&&R(N.targetId),N.attackingPlayer===r()&&ns({...Y.attackResult,isBlocking:!0}),Y.afterAttackEffects&&Y.afterAttackEffects.forEach(U=>{U.type==="EXPLOSION"&&ss(U.payload.targetId)}),Y.attackResult.shouldEndTurn&&Bt(n()),ea(null)}catch(R){console.error("Error in resolveAttack:",R),ea(null),ns(null)}finally{Aa.current=!1}},[Bt,ss,C,n,r]),gs=A.useCallback(async(N,R,Y)=>{try{const U=await C("ability",{droneId:R.id,abilityIndex:R.abilities.indexOf(N),targetId:Y?.id||null});tr(),U.shouldEndTurn&&Bt(n())}catch(U){console.error("Error in resolveAbility:",U),tr()}},[C,Bt,n]),lo=A.useCallback((N,R,Y)=>{const U=Ce.resolveShipAbility(N,R,Y,is(),$n(),J=>x(J,"resolveShipAbility"),xn);if(os(U.newPlayerStates),U.mandatoryAction){Ca(U.mandatoryAction),Yt("hand"),aa(!0),er(null),vr(null);return}if(U.requiresShieldReallocation){er(null),vr(null);return}er(null),vr(null),U.shouldEndTurn&&Bt(n())},[x,Bt,Jt,bt,xn]),hi=A.useCallback((N,R,Y,U=null)=>{if(Y===r()){let pe="",Se="";if(R)if(R.name){if(pe=R.name,R.id&&R.owner){const ke=R.owner===n()?ye:je;for(const[Be,Xe]of Object.entries(ke.dronesOnBoard))if(Xe.some(Qe=>Qe.id===R.id)){Se=Be.replace("lane","Lane ");break}}}else R.id.startsWith("lane")?(pe=`Lane ${R.id.slice(-1)}`,Se=`Lane ${R.id.slice(-1)}`):pe=R.id.replace(/([A-Z])/g," $1").replace(/^./,ke=>ke.toUpperCase());wl({card:N,targetName:pe,targetLane:Se})}if(R&&R.id&&R.owner){const pe=R.owner===n()?s():c();let Se=null;for(const[ke,Be]of Object.entries(pe.dronesOnBoard))if(Se=Be.find(Xe=>Xe.id===R.id),Se){console.log("[CARD PLAY DEBUG] Target drone before gameEngine:",{droneName:Se.name,hull:Se.hull,currentShields:Se.currentShields,cardDamage:N.effect?.value,cardType:N.effect?.type,cardDamageType:N.effect?.damageType});break}}const J=Ce.resolveCardPlay(N,R,Y,is(),$n(),{logCallback:pe=>x(pe,"resolveCardPlay",Y===r()?U:null),explosionCallback:ss,hitAnimationCallback:null,resolveAttackCallback:xn});if(console.log("[CARD PLAY DEBUG] Updating player states after card resolution:",{card:N.name,actingPlayer:Y,oldPlayer1Hull:ye.dronesOnBoard,oldPlayer2Hull:je.dronesOnBoard,newPlayer1Hull:J.newPlayerStates.player1?.dronesOnBoard,newPlayer2Hull:J.newPlayerStates.player2?.dronesOnBoard}),console.log("[CARD PLAY DEBUG] Using gameEngine integrated state (includes callback results)"),os(J.newPlayerStates),J.needsCardSelection){fi({...J.needsCardSelection,onConfirm:pe=>{Du(pe,J.needsCardSelection,N,R,Y,U,J.newPlayerStates),fi(null)},onCancel:()=>{fi(null),Y===n()&&(en(),Fn(null))}});return}J.additionalEffects&&J.additionalEffects.length>0&&(console.log(`[DEBUG] Processing ${J.additionalEffects.length} additional effects`),J.additionalEffects.forEach(pe=>{pe.type==="ATTACK"&&(console.warn("[WARNING] ATTACK effect in additionalEffects - this should be handled in gameLogic now"),xn(pe.attackDetails,!0))})),Y===n()&&(en(),Fn(null)),J.shouldEndTurn&&Bt(Y)},[ye,je,xn,Bt,ss,x,Ce,Jt,bt]),Du=A.useCallback((N,R,Y,U,J,pe,Se=null)=>{const{searchedCards:ke,remainingDeck:Be,discardPile:Xe,shuffleAfter:Qe}=R,rt=ke.filter(Na=>{const Fu=Na.instanceId||`${Na.id}-${Na.name}`;return!N.some(Yr=>(Yr.instanceId||`${Yr.id}-${Yr.name}`)===Fu)}),We=Se||{player1:ye,player2:je},ht=J===n()?We[n()]:We[r()],Hr=[...ht.hand,...N];let qr=[...Be,...rt];Qe&&(qr=qr.sort(()=>.5-Math.random()));const Ta={...ht,deck:qr,hand:Hr,discardPile:Xe};x({player:ht.name,actionType:"CARD_SELECTION",source:Y.name,target:`Selected ${N.length} cards`,outcome:`Drew: ${N.map(Na=>Na.name).join(", ")}`},"handleCardSelection",J===r()?pe:null);const Da={[n()]:J===n()?{...ht,deck:Ta.deck,hand:Ta.hand,discardPile:Ta.discardPile}:We[n()],[r()]:J===r()?{...ht,deck:Ta.deck,hand:Ta.hand,discardPile:Ta.discardPile}:We[r()]},ka=Ce.finishCardPlay(Y,J,Da);os(ka.newPlayerStates),J===n()&&(en(),Fn(null)),ka.shouldEndTurn&&Bt(J)},[ye,je,x,Bt]),Fh=A.useCallback((N,R,Y,U)=>{const J=Ce.resolveMultiMove(N,R,Y,U,ye,c(),$n(),{logCallback:x,applyOnMoveEffectsCallback:Ce.applyOnMoveEffects,updateAurasCallback:Ce.updateAuras});p(n(),J.newPlayerState),J.shouldClearMultiSelectState&&St(null),J.shouldCancelCardSelection&&en(),J.shouldEndTurn&&Bt(n())},[ye,Bt,x,Ce,Jt,bt]),Kh=A.useCallback((N,R,Y,U)=>{const J=Ce.resolveSingleMove(N,R,Y,U,ye,c(),$n(),{logCallback:x,applyOnMoveEffectsCallback:Ce.applyOnMoveEffects,updateAurasCallback:Ce.updateAuras});p(n(),J.newPlayerState),J.shouldClearMultiSelectState&&St(null),J.shouldCancelCardSelection&&en(),J.shouldEndTurn&&Bt(n())},[ye,x,Ce,Jt,bt]),ku=async()=>{const N=$t;ao(0),await C("phaseTransition",{newPhase:"optionalDiscard",trigger:"startOptionalDiscardPhase"}),H({title:"Optional Discard Phase",text:`You may discard up to ${N.totals.discardLimit} cards from your hand. Click a card to discard it, then press "Finish Discarding" when you are done.`,isBlocking:!0})},co=N=>{Dt?ln===N?aa(!1):Yt(N):(aa(!0),Yt(N))};A.useEffect(()=>{Tt||Ce.checkGameStateForWinner(is(),{logCallback:x,setWinnerCallback:P,showWinnerModalCallback:q})},[ye?.shipSections,je?.shipSections,Tt,x]),A.useEffect(()=>{if(W==="action"){const N=Ce.calculatePotentialInterceptors(Le,ye,je,$n());ts(N)}else ts([])},[Le,W,ye,je,Ce,Jt,bt]),A.useEffect(()=>{Ji(null)},[Le]),A.useEffect(()=>{if(Le&&!kt&&W==="action"){const N=NA(qn.current[Le.id],xt.current);N&&as({visible:!0,start:N,end:{x:N.x,y:N.y}})}else as(N=>({...N,visible:!1}))},[Le,W,kt]),A.useEffect(()=>{const N=Y=>{if(Br.visible&&ia.current&&xt.current){const U=xt.current.getBoundingClientRect(),J=Y.clientX-U.left,pe=Y.clientY-U.top;ia.current.setAttribute("x2",J),ia.current.setAttribute("y2",pe)}},R=xt.current;return R?.addEventListener("mousemove",N),()=>{R?.removeEventListener("mousemove",N)}},[Br.visible]);const Vh=({visible:N,start:R,end:Y,lineRef:U})=>N?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:U,x1:R.x,y1:R.y,x2:Y.x,y2:Y.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,Xh=({top:N,left:R})=>v.jsx("div",{className:"explosion",style:{top:`${N}px`,left:`${R}px`}}),Ft=({title:N,text:R,onClose:Y,children:U,maxWidthClass:J="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${J} relative`,children:[Y&&v.jsx("button",{onClick:Y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(dl,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:N}),v.jsx("p",{className:"text-center text-gray-400",children:R}),U]})}),Wh=({report:N,onClose:R})=>{if(!N)return null;const{attackerName:Y,lane:U,targetName:J,targetType:pe,interceptorName:Se,shieldDamage:ke,hullDamage:Be,wasDestroyed:Xe,remainingShields:Qe,remainingHull:rt}=N,We=pe==="section"?J.replace(/([A-Z])/g," $1").replace(/^./,ht=>ht.toUpperCase()):J;return v.jsxs(Ft,{title:"AI Action Report",text:"",onClose:R,children:[v.jsxs("div",{className:"text-left text-gray-300 space-y-3 mt-4 text-center",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-pink-400",children:Y})," attacked in ",v.jsx("strong",{children:U?.replace("lane","Lane ")||"Unknown Lane"}),"."]}),Se?v.jsxs("p",{children:["Your ",v.jsx("strong",{className:"text-yellow-400",children:Se})," intercepted the attack, which was targeting your ",v.jsx("strong",{className:"text-cyan-400",children:We}),"!"]}):v.jsxs("p",{children:["It targeted your ",v.jsx("strong",{className:"text-cyan-400",children:We}),"."]}),v.jsxs("p",{children:["The attack dealt ",v.jsx("strong",{className:"text-cyan-300",children:ke})," damage to shields and ",v.jsx("strong",{className:"text-red-400",children:Be})," damage to the hull."]}),Xe?v.jsx("p",{className:"font-bold text-red-500 text-lg",children:"The target was destroyed!"}):v.jsxs("p",{children:["The target has ",v.jsx("strong",{className:"text-cyan-300",children:Qe})," shields and ",v.jsx("strong",{className:"text-green-400",children:rt})," hull remaining."]})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:R,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Continue"})})]})},Qh=({report:N,onClose:R})=>{if(!N)return null;const{card:Y,targetName:U,targetLane:J}=N;return v.jsxs(Ft,{title:"AI Action: Card Played",text:"",onClose:R,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:Y.name}),U&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:U}),J&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:J})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(vd,{card:Y,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:R,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Continue"})})]})},Nu=({choiceData:N,onIntercept:R,onDecline:Y})=>{const{attackDetails:U,interceptors:J}=N,{attacker:pe,target:Se,targetType:ke,lane:Be}=U;return v.jsxs(Ft,{title:"Interception Opportunity!",text:`Combat in ${Be?.replace("lane","Lane ")||"Unknown Lane"}`,onClose:Y,maxWidthClass:"max-w-3xl",children:[v.jsxs("div",{className:"flex justify-around items-center my-4 p-4 bg-black/20 rounded-lg",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-pink-400 mb-2",children:"Attacker"}),v.jsx(bd,{drone:pe,isPlayer:!1,lane:Be,droneRefs:qn,mandatoryAction:gt,localPlayerState:ye})]}),v.jsx("div",{className:"text-4xl font-bold text-gray-500",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-cyan-400 mb-2",children:"Target"}),ke==="drone"?v.jsx(bd,{drone:Se,isPlayer:!0,lane:Be,droneRefs:qn,mandatoryAction:gt,localPlayerState:ye}):v.jsx("div",{className:"transform scale-75",children:v.jsx(Pd,{section:Se.name,stats:ye.shipSections[Se.name],isPlayer:!0,isInteractive:!1,gameEngine:Ce,turnPhase:W,isMyTurn:t,passInfo:nt,getLocalPlayerId:n,localPlayerState:ye,shipAbilityMode:yr})})]})]}),v.jsx("h3",{className:"text-center text-white text-xl font-semibold mt-6 mb-2",children:"Choose an Interceptor"}),v.jsx("p",{className:"text-center text-gray-400 mb-4",children:"Drones with higher speed or special abilities can intercept the attack."}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 my-4",children:J.map(Xe=>v.jsx(bd,{drone:Xe,isPlayer:!0,onClick:()=>R(Xe),lane:Be,droneRefs:qn,mandatoryAction:gt,localPlayerState:ye},Xe.id))}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:Y,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Decline Interception"})})]})},Zh=({decisionLog:N,onClose:R})=>{if(!N)return null;const Y=U=>{if(U.type==="deploy"||!U.target)return U.targetName;if(U.type==="attack")return`${U.target.name.replace(/([A-Z])/g," $1").replace(/^./,Se=>Se.toUpperCase())} (Lane ${U.attacker.lane.slice(-1)})`;const J=U.target.owner===n()?"Player":"AI";return String(U.target.id).startsWith("lane")?`${J} Lane ${U.target.id.slice(-1)}`:`${J}: ${U.targetName}`};return v.jsxs(Ft,{title:"AI Decision Matrix",text:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score.",onClose:R,maxWidthClass:"max-w-7xl",children:[v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:N.sort((U,J)=>J.score-U.score).map((U,J)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${U.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:U.type?U.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:U.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:Y(U)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:U.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:U.score}),v.jsx("td",{className:"p-2 text-center",children:U.isChosen&&v.jsx("span",{className:"text-yellow-400",children:""})})]},J))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:R,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Close"})})]})},Mu=()=>{H(null);const N={player1:e.player1,player2:e.player2},R={player1:{totals:$t.totals},player2:{totals:Bn.totals}},Y=Ce.checkHandLimitViolations(N,R),U=n();Y[U].needsDiscard?(Ca({type:"discard",player:U,count:Y[U].discardCount}),ro(!0)):ku()},ju=async()=>{ue(!1),Yn(null),Ye(null),yn(null),St(null),y(nt.firstPasser),await C("roundStart",{newTurn:ze+1,trigger:"roundEndModal"}),H({title:"Start of a New Round",text:"The new round has begun. You will now resolve any mandatory discards, followed by an optional discard phase. Afterwards, you will automatically draw cards to your hand limit.",onClose:Mu,isBlocking:!0,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:Mu,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Begin"})})})},Jh=()=>{ku()},ys=()=>{ne(!1);const N=fa>$t.totals.cpuLimit,R=so>Bn.totals.cpuLimit,Y=Pt===n()?[n(),r()]:[r(),n()],U=J=>{if(J===n()){if(N)return Ca({type:"destroy",player:n(),count:fa-$t.totals.cpuLimit}),ro(!0),!0}else if(R){let pe={...je},Se=Object.values(je.dronesOnBoard).flat().length-Bn.totals.cpuLimit;for(let ke=0;ke<Se;ke++){const Be=Object.entries(pe.dronesOnBoard).flatMap(([ht,Hr])=>Hr.map(qr=>({...qr,lane:ht})));if(Be.length===0)break;const Xe=Math.min(...Be.map(ht=>ht.class)),Qe=Be.filter(ht=>ht.class===Xe),rt=Qe[Math.floor(Math.random()*Qe.length)];pe.dronesOnBoard[rt.lane]=pe.dronesOnBoard[rt.lane].filter(ht=>ht.id!==rt.id);const We=Ce.onDroneDestroyed(pe,rt);Object.assign(pe,We)}pe.dronesOnBoard=Ce.updateAuras(pe,s(),$n()),p(r(),pe)}return!1};U(Y[0])||U(Y[1])||$l()};A.useEffect(()=>{Tt&&Aa.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),Aa.current=!1)},[Tt,W,Ie]);const[Rl,ep]=A.useState(Ie);A.useEffect(()=>{if(W!=="deployment"&&W!=="action"||Tt||be||j||V||re||de||Tn||Ie===Rl)return;const N=t(),R=i();console.log("[MODAL UPDATE] Turn change detected:",{currentPlayer:Ie,lastCurrentPlayer:Rl,myTurn:N,turnPhase:W,isMultiplayerGame:R,currentModalTitle:ae?.title}),ep(Ie),N?W==="deployment"?H({title:"Your Turn to Deploy",text:`Select a drone and a lane to deploy it. Drones cost ${ze===1?"Initial Deployment Points":"Energy"} this turn. Or, click "Pass" to end your deployment for this phase.`,isBlocking:!0}):W==="action"&&H({title:"Action Phase - Your Turn",text:"It's your turn to act. Select a drone to move or attack, play a card, or use an ability.",isBlocking:!0}):W==="deployment"?H({title:R?"Opponent's Turn":"AI Thinking...",text:R?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...",isBlocking:!1}):W==="action"&&H({title:R?"Opponent's Turn":"AI Thinking...",text:R?"Your opponent is taking their turn.":"AI is deciding on its next action...",isBlocking:!1})},[Ie,W,t,i,ze,Tt,be,j,V,re,de,Tn,Rl,ae?.title]);const tp=()=>{S(),Aa.current=!1,Ye(null),H(null),ns(null),yn(null),ls([]),Ca(null),ro(!1),Ur(null),Yn(null),kl([]),Fn(null),q(!1)},Il=async()=>{X(!1);const N=Pt;await C("phaseTransition",{newPhase:"action",resetPassInfo:!0}),await C("turnTransition",{newPlayer:N,reason:"startActionPhase"}),!Tt&&(N===n()?H({title:"Action Phase Begins",text:"It's your turn to act. Select a drone to move or attack, play a card, or use an ability.",isBlocking:!0}):H({title:"Opponent's Turn",text:"Your opponent is taking their turn.",isBlocking:!1}))},Ru=async()=>{Yn(null),Ye(null),yn(null);const N=$t.totals.shieldsPerTurn;ua(JSON.parse(JSON.stringify(ye.shipSections))),await C("phaseTransition",{newPhase:"allocateShields",trigger:"proceedToShieldAllocation"}),H({title:"Phase: Restore Shields",text:`You have ${N} shields to restore. Click on any of your damaged ship sections to add a shield. When finished, click "End Allocation" to continue.`,isBlocking:!0})},np=async N=>{const{turnPhase:R}=e;if(R==="allocateShields"){const Y=Ce.processShieldAllocation({sectionName:N},s());p(n(),Y.newPlayerState)}else await C("allocateShield",{sectionName:N,playerId:n()})},rp=async N=>{if(hs<=0||ye.shipSections[N].allocatedShields<=0)return;(await C("reallocateShields",{action:"remove",sectionName:N,playerId:n()})).success&&(di(U=>U-1),Gr(U=>U+1))},ap=async N=>{if(Ea<=0)return;const R=ye.shipSections[N],Y=Ce.getEffectiveSectionMaxShields(N,ye,Jt);if(R.allocatedShields>=Y)return;(await C("reallocateShields",{action:"add",sectionName:N,playerId:n()})).success&&Gr(J=>J-1)},ip=()=>{zr("adding")},op=()=>{p(n(),{...ye,shipSections:br}),di(io.ability.effect.value.maxShields),Gr(0),zr("removing")},sp=async()=>{await C("reallocateShields",{action:"restore",originalShipSections:br,playerId:n()}),zr(null),di(0),Gr(0),ps(null),oo(null)},lp=()=>{vr({ability:io.ability,sectionName:io.sectionName,target:null})},cp=N=>{if(vn){vn==="removing"?rp(N):vn==="adding"&&ap(N);return}W==="allocateShields"&&np(N)},Ll=async()=>{const{turnPhase:N}=e;if(N==="allocateShields"){const R=Ce.resetShieldAllocation(s());p(n(),R.newPlayerState)}else await C("resetShieldAllocation",{playerId:n()})},uo=async()=>{const{turnPhase:N}=e;if(N==="allocateShields"){const R=Ce.endShieldAllocation({trigger:"manualEndAllocation"},e);R.newGameState.player1&&p("player1",R.newGameState.player1),R.newGameState.player2&&p("player2",R.newGameState.player2),R.phaseTransition&&(m(R.phaseTransition.newPhase),R.phaseTransition.firstPlayer&&h(R.phaseTransition.firstPlayer))}else await C("endShieldAllocation",{trigger:"manualEndAllocation"});ne(!0)},up=N=>{const{turnPhase:R}=e;if(R==="optionalDiscard"){const Y=s(),U=Y.hand.filter(pe=>pe.id!==N.id),J=[...Y.discardPile,N];p(n(),{hand:U,discardPile:J}),ao(pe=>pe+1),x({player:Y.name,actionType:"DISCARD_OPTIONAL",card:N.name,timestamp:Date.now()}),vs()}},Iu=()=>{const{turnPhase:N}=e;if(N==="optionalDiscard"){const R=s(),Y=D(R,u()).totals;let U=[...R.deck],J=[...R.hand],pe=[...R.discardPile];const Se=Y.handLimit;for(;J.length<Se&&(U.length>0||pe.length>0);){U.length===0&&(U=[...pe].sort(()=>.5-Math.random()),pe=[]);const ke=U.shift();ke&&J.push(ke)}p(n(),{deck:U,hand:J,discardPile:pe}),x({player:R.name,actionType:"DRAW_TO_HAND_LIMIT",cardsDrawn:J.length-R.hand.length,timestamp:Date.now()}),vs()}},vs=()=>{const{turnPhase:N}=e;if(N==="optionalDiscard")if(i()){const R=s(),Y=D(R,u()).totals;R.hand.length<=Y.handLimit&&(M&&i()&&M.sendData({type:"PHASE_COMPLETED",phase:"optionalDiscard",playerId:n(),timestamp:Date.now()}),Ru())}else{const R=s(),Y=c(),U=D(R,u()).totals,J=D(Y,d()).totals;if(R.hand.length<=U.handLimit){if(Y.hand.length>J.handLimit){const Se=Y.hand.length-J.handLimit,ke=Y.hand.slice(0,Se);p(r(),{hand:Y.hand.slice(Se),discardPile:[...Y.discardPile,...ke]})}Lu(),Ru()}}},Lu=()=>{const N=c(),R=D(N,d()).totals;let Y=[...N.deck],U=[...N.hand],J=[...N.discardPile];const pe=R.handLimit;for(;U.length<pe&&(Y.length>0||J.length>0);){Y.length===0&&(Y=[...J].sort(()=>.5-Math.random()),J=[]);const Se=Y.shift();Se&&U.push(Se)}p(r(),{deck:Y,hand:U,discardPile:J}),x({player:N.name,actionType:"DRAW_TO_HAND_LIMIT",cardsDrawn:U.length-N.hand.length,timestamp:Date.now()})},$l=async()=>{if(await C("phaseTransition",{newPhase:"deployment",resetPassInfo:!0}),Tt)return;const N=ze===1?"Initial Deployment Points":"Energy";Pt===n()?H({title:"Your Turn to Deploy",text:`Select a drone and a lane to deploy it. Drones cost ${N} this turn. Or, click "Pass" to end your deployment for this phase.`,isBlocking:!0}):H({title:"Opponent's Turn",text:"Your opponent is deploying a drone. Wait for their turn to complete.",isBlocking:!1})},$u=N=>{nt[n()+"Passed"]||(Le&&Le.name===N.name?Ye(null):(Ye(N),yn(null),en()))},Oa=async N=>{try{const R=await C("deployment",{droneData:Le,laneId:N,playerId:n(),turn:ze});R.success?(Ye(null),Bt(n())):H({title:R.error,text:R.message,isBlocking:!0})}catch(R){console.error("Error executing deployment:",R),H({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},fp=N=>{if(!(!Le||Ie!==n()||nt[n()+"Passed"])){if(ze===1){const R=Ce.validateDeployment(ye,Le,ze,fa,$t);if(!R.isValid){H({title:R.reason,text:R.message,isBlocking:!0});return}const{budgetCost:Y,energyCost:U}=R;if(U>0){me({lane:N,budgetCost:Y,energyCost:U});return}}Oa(N)}},dp=()=>{if(!re)return;const{lane:N,budgetCost:R,energyCost:Y}=re;Oa(N),me(null)},hp=async()=>{nt[`${n()}Passed`]||await C("playerPass",{playerId:n(),playerName:ye.name,turnPhase:W,passInfo:nt,opponentPlayerId:r()})};A.useEffect(()=>{if(!Jr||Jr.attackingPlayer!==r())return;const N=Ce.calculateAiInterception(Jr,is(),$n());N.hasInterceptors?es({attackDetails:N.attackDetails,interceptors:N.interceptors}):xn(Jr)},[Jr,xn,Jt,bt]);const Bl=(N,R,Y)=>{if(N.stopPropagation(),W!=="action"||Ie!==n()||nt[n()+"Passed"])return;const U=Y.cost||{};if(R.isExhausted&&U.exhausts!==!1){H({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(U.energy&&ye.energy<U.energy){H({title:"Not Enough Energy",text:`This ability costs ${U.energy} energy, but you only have ${ye.energy}.`,isBlocking:!0});return}if(Y.targeting?.type==="LANE"&&Y.targeting?.location==="SAME_LANE"){const J=Ce.getLaneOfDrone(R.id,ye);if(J){sa({ability:Y,drone:R,target:{id:J,owner:n()}});return}}kt&&kt.drone.id===R.id?tr():(yn({drone:R,ability:Y}),Ye(R),en())},Bu=(N,R,Y)=>{if(N.stopPropagation(),!(W!=="action"||!t()||nt[`${n()}Passed`])){if(ye.energy<Y.cost.energy){H({title:"Not Enough Energy",text:`This ability costs ${Y.cost.energy} energy, but you only have ${ye.energy}.`,isBlocking:!0});return}yr?.ability.id===Y.id?er(null):Y.targeting?(er({sectionName:R.name,ability:Y}),Ye(null),tr(),en()):Y.effect.type==="REALLOCATE_SHIELDS"?(zr("removing"),di(Y.effect.value.maxShields),Gr(0),ps(JSON.parse(JSON.stringify(ye.shipSections))),oo({ability:Y,sectionName:R.name})):vr({ability:Y,sectionName:R.name,target:null})}},pi=(N,R,Y)=>{if(N.stopPropagation(),console.log(`--- handleTokenClick triggered for ${R.name} (isPlayer: ${Y}) ---`),Fe&&Fe.phase==="select_drones"&&Y){console.log("Action: Multi-move drone selection.");const{selectedDrones:U,maxSelection:J}=Fe;U.some(Se=>Se.id===R.id)?St(Se=>({...Se,selectedDrones:Se.selectedDrones.filter(ke=>ke.id!==R.id)})):U.length<J&&St(Se=>({...Se,selectedDrones:[...Se.selectedDrones,R]}));return}if(On.some(U=>U.id===R.id)||Nt.some(U=>U.id===R.id)){console.log("Action: Targeting for an active card/ability."),_a(R,"drone",Y);return}if(W==="action"&&t()&&Le&&!Le.isExhausted&&!Y){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",Le.name,`(ID: ${Le.id})`),console.log("Target clicked:",R.name,`(ID: ${R.id})`);const[U]=Object.entries(ye.dronesOnBoard).find(([pe,Se])=>Se.some(ke=>ke.id===Le.id))||[],[J]=Object.entries(je.dronesOnBoard).find(([pe,Se])=>Se.some(ke=>ke.id===R.id))||[];if(console.log("Calculated Attacker Lane:",U),console.log("Calculated Target Lane:",J),U&&J&&U===J)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),je.dronesOnBoard[J].some(ke=>k(ke,J).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),H({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const ke={attacker:Le,target:R,targetType:"drone",lane:U,attackingPlayer:n()},Be=k(Le,U),Xe=je.dronesOnBoard[U].filter(rt=>{const We=k(rt,U);return!rt.isExhausted&&(We.speed>Be.speed||We.keywords.has("ALWAYS_INTERCEPTS"))&&rt.id!==R.id}).sort((rt,We)=>rt.class-We.class);let Qe=null;Xe.length>0&&(R.class===void 0||Xe[0].class<R.class)&&(Qe=Xe[0]),Qe?na({interceptor:Qe,originalTarget:R,onClose:()=>{xn({...ke,interceptor:Qe}),na(null),Ye(null)}}):(xn(ke),Ye(null))}else console.log("FAILURE: Lanes do not match or could not be found."),H({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(Fe&&Fe.phase==="select_drones"&&Y){console.log("Action: Multi-move drone selection.");const{selectedDrones:U,maxSelection:J}=Fe;U.some(Se=>Se.id===R.id)?St(Se=>({...Se,selectedDrones:Se.selectedDrones.filter(ke=>ke.id!==R.id)})):U.length<J&&St(Se=>({...Se,selectedDrones:[...Se.selectedDrones,R]}));return}if(gt?.type==="destroy"&&Y){console.log("Action: Mandatory destruction."),Ur({type:"destroy",target:R,onConfirm:()=>Ul(R),onCancel:()=>Ur(null),text:`Are you sure you want to destroy your ${R.name}?`});return}if(Y&&W==="action"&&t()&&!nt[`${n()}Passed`]){if(R.isExhausted){console.log("Action prevented: Drone is exhausted.");return}Le?.id===R.id?(console.log("Action: Deselecting drone",R.name),Ye(null)):(console.log("Action: Selecting drone",R.name),Ye(R),tr(),en());return}console.log("Action: Fallback - showing drone details."),oe(R)},_a=(N,R,Y)=>{if(yr&&On.some(U=>U.id===N.id)){vr({ability:yr.ability,sectionName:yr.sectionName,target:N});return}if(kt&&On.some(U=>U.id===N.id)){gs(kt.ability,kt.drone,N);return}if(_n&&Nt.some(U=>U.id===N.id)){const U=Y?n():r();Fn({card:_n,target:{...N,owner:U}});return}if(W==="action"&&t()&&Le&&!Le.isExhausted&&!Y&&R==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",Le.name,`(ID: ${Le.id})`),console.log("Target clicked:",N.name,`(Type: ${R})`);const[U]=Object.entries(ye.dronesOnBoard).find(([J,pe])=>pe.some(Se=>Se.id===Le.id))||[];if(console.log("Calculated Attacker Lane:",U),U){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const J=je.dronesOnBoard[U];if(J&&J.some(Se=>k(Se,U).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),H({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const Se={attacker:Le,target:N,targetType:"section",lane:U,attackingPlayer:n()},ke=k(Le,U),Be=je.dronesOnBoard[U].filter(Qe=>{const rt=k(Qe,U);return!Qe.isExhausted&&(rt.speed>ke.speed||rt.keywords.has("ALWAYS_INTERCEPTS"))}).sort((Qe,rt)=>Qe.class-rt.class);let Xe=null;Be.length>0&&(Xe=Be[0]),Xe?na({interceptor:Xe,originalTarget:N,onClose:()=>{xn({...Se,interceptor:Xe}),na(null),Ye(null)}}):(xn(Se),Ye(null))}}else console.log("FAILURE: Could not determine attacker lane."),H({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}R==="drone"&&oe(N)},Uu=(N,R,Y)=>{if(N.stopPropagation(),kt&&kt.ability.targeting.type==="LANE"){const U=Y?n():r();if(On.some(J=>J.id===R&&J.owner===U)){sa({ability:kt.ability,drone:kt.drone,target:{id:R,owner:U}});return}}if(Fe&&Y&&Nt.some(U=>U.id===R)){const{phase:U,sourceLane:J,selectedDrones:pe}=Fe;if(U==="select_source_lane"){St(Se=>({...Se,phase:"select_drones",sourceLane:R}));return}if(U==="select_destination_lane"){Fh(Fe.card,pe,J,R);return}}if(Fe&&Fe.card.effect.type==="SINGLE_MOVE"&&Fe.phase==="select_destination"&&Y){Nt.some(U=>U.id===R)&&Kh(Fe.card,Fe.selectedDrone,Fe.sourceLane,R);return}if(_n&&_n.targeting.type==="LANE"){const U=Y?n():r();if(Nt.some(J=>J.id===R&&J.owner===U)){Fn({card:_n,target:{id:R,owner:U}});return}}if(_n){en();return}if(kt){tr();return}if(W==="deployment"&&Y)fp(R);else if(W==="action"&&Y&&Le){const[U]=Object.entries(ye.dronesOnBoard).find(([Se,ke])=>ke.some(Be=>Be.id===Le.id))||[];if(!U)return;const J=parseInt(U.replace("lane",""),10),pe=parseInt(R.replace("lane",""),10);Math.abs(J-pe)===1?ve({drone:Le,from:U,to:R}):H({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},bs=N=>{if(!(W!=="action"||!t()||nt[`${n()}Passed`])&&!(ye.energy<N.cost)){if(N.effect.type==="MULTI_MOVE"){Fe&&Fe.card.instanceId===N.instanceId?en():(St({card:N,phase:"select_source_lane",sourceLane:null,selectedDrones:[],maxSelection:N.effect.count}),Yn(N),Ye(null),yn(null));return}if(N.effect.type==="SINGLE_MOVE"){Fe&&Fe.card.instanceId===N.instanceId?en():(St({card:N,phase:"select_drone",selectedDrone:null,sourceLane:null}),Yn(N),Ye(null),yn(null));return}if(_n?.instanceId===N.instanceId)en();else if(N.name==="System Sabotage"){const R=Ce.getValidTargets(n(),null,N,ye,je);fs({card:N,targets:R,opponentState:je}),Yn(null),yn(null),Ye(null)}else if(N.type==="Upgrade"){const R=Ce.getValidTargets(n(),null,N,ye,je);R.length>0?(la({card:N,targets:R}),Yn(null),yn(null),Ye(null)):H({title:"No Valid Targets",text:`There are no drone types that can accept the '${N.name}' upgrade right now.`,isBlocking:!0})}else N.targeting?(Yn(N),Ye(null),yn(null)):(Fn({card:N,target:null}),Yn(null),yn(null),Ye(null))}},zu=()=>{if(!de)return;const{drone:N,from:R,to:Y}=de;x({player:ye.name,actionType:"MOVE",source:N.name,target:Y,outcome:`Moved from ${R} to ${Y}.`},"playerMove");let U=JSON.parse(JSON.stringify(ye));U.dronesOnBoard[R]=U.dronesOnBoard[R].filter(Se=>Se.id!==N.id);const J={...N,isExhausted:!0};U.dronesOnBoard[Y].push(J);const{newState:pe}=Ce.applyOnMoveEffects(U,J,R,Y,x);pe.dronesOnBoard=Ce.updateAuras(pe,je,$n()),p(n(),pe),ve(null),Ye(null),Bt(n())},Gu=N=>{const R=gt;x({player:ye.name,actionType:"DISCARD_MANDATORY",source:N.name,target:"N/A",outcome:`Discarded ${N.name}.`},"handleConfirmMandatoryDiscard"),p(n(),{...ye,hand:ye.hand.filter(U=>U.instanceId!==N.instanceId),discardPile:[...ye.discardPile,N]}),Ur(null);const Y=R.count-1;Y<=0?(Ca(null),R.fromAbility?Bt(n()):Jh()):Ca(U=>({...U,count:Y}))},Ul=N=>{const R=Ce.getLaneOfDrone(N.id,ye);if(R){let Y={...ye,dronesOnBoard:{...ye.dronesOnBoard}};Y.dronesOnBoard[R]=Y.dronesOnBoard[R].filter(J=>J.id!==N.id);const U=Ce.onDroneDestroyed(Y,N);Object.assign(Y,U),Y.dronesOnBoard=Ce.updateAuras(Y,c(),$n()),p(n(),Y)}Ca(Y=>{const U=Y.count-1;if(U<=0){if(so>Bn.totals.cpuLimit){let pe={...je},Se=Object.values(je.dronesOnBoard).flat().length-D(je,bt).totals.cpuLimit;for(let ke=0;ke<Se;ke++){const Be=Object.entries(pe.dronesOnBoard).flatMap(([ht,Hr])=>Hr.map(qr=>({...qr,lane:ht})));if(Be.length===0)break;const Xe=Math.min(...Be.map(ht=>ht.class)),Qe=Be.filter(ht=>ht.class===Xe),rt=Qe[Math.floor(Math.random()*Qe.length)];pe.dronesOnBoard[rt.lane]=pe.dronesOnBoard[rt.lane].filter(ht=>ht.id!==rt.id);const We=Ce.onDroneDestroyed(pe,rt);Object.assign(pe,We)}pe.dronesOnBoard=Ce.updateAuras(pe,s(),$n()),p(r(),pe)}return $l(),null}return{...Y,count:U}}),Ur(null)},zl=()=>{if(Zo.length===0){alert("The game log is empty.");return}const N=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],R=Zo.map(pe=>[pe.round,pe.player,pe.actionType,pe.source,pe.target,pe.outcome,pe.debugSource||"N/A"].map(ke=>`"${String(ke).replace(/"/g,'""')}"`).join(",")),Y=[N.join(","),...R].join(`
`),U=new Blob([Y],{type:"text/csv;charset=utf-8;"}),J=document.createElement("a");if(J.download!==void 0){const pe=URL.createObjectURL(U);J.setAttribute("href",pe),J.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),J.style.visibility="hidden",document.body.appendChild(J),J.click(),document.body.removeChild(J)}},Hu=A.useCallback(async()=>{ns(null),await C("turnTransition",{newPlayer:n(),reason:"aiReportClosed"})},[C,n]),qu=A.useCallback(async()=>{ra&&!ra.card.effect.goAgain?await C("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):ra&&ra.card.effect.goAgain&&!Tt&&(await C("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),H({title:"Opponent's Turn",text:"Your opponent takes another action!",isBlocking:!1})),wl(null)},[C,n,r,ra,Tt]),Yu=A.useMemo(()=>[...ye.activeDronePool].sort((N,R)=>N.class!==R.class?N.class-R.class:N.name.localeCompare(R.name)),[ye.activeDronePool]);A.useMemo(()=>ye?Object.keys(ye.shipSections).some(N=>ye.shipSections[N].allocatedShields<Ce.getEffectiveSectionMaxShields(N,ye,Jt)):!1,[ye.shipSections,Jt]);const pp=()=>ze===1?"The first player is determined randomly for the first round.":`${qt===n()?ye.name:je.name} passed first in the previous round, securing the initiative.`;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",ref:xt,onClick:()=>{tr(),en()},children:[v.jsx("style",{children:`
            @import url('https://fonts.googleapis.com/css2?family=Exo:wght@400;700&family=Orbitron:wght@400;700;900&display=swap');
           .font-orbitron { font-family: 'Orbitron', sans-serif; }
            .font-exo { font-family: 'Exo', sans-serif; }
            .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
            .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
            @keyframes pulse-glow {
                0%, 100% { filter: drop-shadow(0 0 2px rgba(255, 255, 0, 0.7)) drop-shadow(0 0 3px rgba(255, 0, 0, 0.6)); }
                50% { filter: drop-shadow(0 0 4px rgba(255, 255, 0, 1)) drop-shadow(0 0 7px rgba(255, 0, 0, 0.8)); }
            }
            .interceptor-glow { animation: pulse-glow 2s infinite ease-in-out; }
            @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } }
           .animate-shake { animation: shake 0.5s ease-in-out; }
            .explosion { position: absolute; width: 100px; height: 100px; background-image: radial-gradient(circle, rgba(255,159,64,1) 0%, rgba(255,87,34,0.8) 40%, rgba(255,255,255,0) 70%); border-radius: 50%; transform: translate(-50%, -50%) scale(0); animation: explode 1s ease-out forwards; pointer-events: none; z-index: 50; }
            @keyframes explode { 0% { transform: translate(-50%, -50%) scale(0); opacity: 1; } 50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.8; } 100% { transform: translate(-50%, -50%) scale(2); opacity: 0; } }
           .bg-grid-cyan { background-image: linear-gradient(rgba(34, 211, 238, 0.2) 1px, transparent 1px), linear-gradient(90deg, rgba(34, 211, 238, 0.2) 1px, transparent 1px); background-size: 20px 20px;             .bg-grid-cyan { background-image: linear-gradient(rgba(34, 211, 238, 0.2) 1px, transparent 1px), linear-gradient(90deg, rgba(34, 211, 238, 0.2) 1px, transparent 1px); background-size: 20px 20px; }
            
            /* --- ADD THESE STYLES --- */
            .no-scrollbar::-webkit-scrollbar {
              display: none;
            }
            .no-scrollbar {
              -ms-overflow-style: none;  /* IE and Edge */
              scrollbar-width: none;  /* Firefox */}
            `}),v.jsx(Vh,{visible:Br.visible,start:Br.start,end:Br.end,lineRef:ia}),Yh.map(N=>v.jsx(Xh,{top:N.top,left:N.left},N.id)),v.jsxs("header",{className:"w-full flex justify-between items-center mb-2 flex-shrink-0 px-5 pt-8",children:[v.jsxs("div",{className:"flex flex-col items-start gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-pink-300 flex items-center",children:["Opponent Resources",(W==="deployment"||W==="action")&&Pt===r()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(W==="deployment"||W==="action")&&nt[`${r()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${je.energy>Bn.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(Fc,{className:"text-yellow-300 mr-2"})," ",v.jsxs("span",{className:"font-bold text-lg",children:[je.energy," / ",Bn.totals.maxEnergy]})]}),v.jsxs("div",{onClick:()=>setTimeout(()=>Z(!0),100),className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 cursor-pointer hover:bg-gray-800 ${je.hand.length>Bn.totals.handLimit?"text-red-400":""}`,children:[v.jsx(wM,{className:"text-gray-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[je.hand.length," / ",Bn.totals.handLimit]})]}),W==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50",children:[v.jsx(Hy,{className:"text-purple-400 mr-2"})," ",v.jsx("span",{className:"font-bold text-lg",children:ze===1?je.initialDeploymentBudget:je.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${so>Bn.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(gA,{className:"text-cyan-400 mr-2"})," ",v.jsxs("span",{className:"font-bold text-lg",children:[so," / ",Bn.totals.cpuLimit]})]})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center",children:[v.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-xl font-orbitron",style:{textShadow:"0 0 15px rgba(236, 72, 153, 0.5), 0 0 5px rgba(255, 255, 255, 0.5)"},children:"Drone Wars"}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-300 tracking-widest font-exo",children:PR(W)}),(W==="deployment"||W==="action")&&t()&&!gt&&!Fe&&v.jsx("button",{onClick:hp,disabled:nt[`${n()}Passed`],className:`btn-clipped text-white font-bold py-1 px-6 transition-colors duration-200 ${nt[`${n()}Passed`]?"bg-gray-700 cursor-not-allowed":"bg-red-600 hover:bg-red-500"}`,children:"Pass"})]})]}),v.jsxs("div",{className:"flex flex-col items-end gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-cyan-300 flex items-center",children:["Your Resources",(W==="deployment"||W==="action")&&Pt===n()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(W==="deployment"||W==="action")&&nt[`${n()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${ye.energy>$t.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(Fc,{className:"text-yellow-300 mr-2"})," ",v.jsxs("span",{className:"font-bold text-lg",children:[ye.energy," / ",$t.totals.maxEnergy]})]}),W==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(Hy,{className:"text-purple-400 mr-2"})," ",v.jsx("span",{className:"font-bold text-lg",children:ze===1?ye.initialDeploymentBudget:ye.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${fa>$t.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(gA,{className:"text-cyan-400 mr-2"})," ",v.jsxs("span",{className:"font-bold text-lg",children:[fa," / ",$t.totals.cpuLimit]})]}),W==="allocateShields"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(wo,{className:"text-cyan-300 mr-2"})," ",v.jsx("span",{className:"font-bold text-lg",children:Zi})]}),vn==="removing"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-orange-500/50",children:[v.jsx(wo,{className:"text-orange-300 mr-2"})," ",v.jsx("span",{className:"font-bold text-lg",children:hs})]}),vn==="adding"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-green-500/50",children:[v.jsx(wo,{className:"text-green-300 mr-2"})," ",v.jsx("span",{className:"font-bold text-lg",children:Ea})]}),v.jsx("button",{onClick:tp,className:"bg-pink-700 text-white p-3 rounded-full shadow-lg hover:bg-pink-600 transition-colors duration-200","aria-label":"Reset Game",children:v.jsx(DM,{})}),v.jsx("button",{className:"bg-slate-700 text-white p-3 rounded-full shadow-lg hover:bg-slate-600 transition-colors duration-200",children:v.jsx(NM,{})})]})]})]}),v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsx(v.Fragment,{children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(Rw,{player:je,isPlayer:!1,placedSections:bt,onTargetClick:_a,isInteractive:!1,selectedCard:_n,validCardTargets:Nt,gameEngine:Ce,turnPhase:W,isMyTurn:t,passInfo:nt,getLocalPlayerId:n,localPlayerState:ye,shipAbilityMode:yr,hoveredTarget:Pu,setHoveredTarget:Ji}),v.jsx(Lw,{player:je,isPlayer:!1,onLaneClick:Uu,getLocalPlayerId:n,getOpponentPlayerId:r,abilityMode:kt,validAbilityTargets:On,selectedCard:_n,validCardTargets:Nt,multiSelectState:Fe,turnPhase:W,localPlayerState:ye,opponentPlayerState:je,localPlacedSections:Jt,opponentPlacedSections:bt,gameEngine:Ce,getPlacedSectionsForEngine:$n,handleTokenClick:pi,handleAbilityIconClick:Bl,selectedDrone:Le,recentlyHitDrones:rs,potentialInterceptors:El,droneRefs:qn,mandatoryAction:gt,setHoveredTarget:Ji}),v.jsx(Lw,{player:ye,isPlayer:!0,onLaneClick:Uu,getLocalPlayerId:n,getOpponentPlayerId:r,abilityMode:kt,validAbilityTargets:On,selectedCard:_n,validCardTargets:Nt,multiSelectState:Fe,turnPhase:W,localPlayerState:ye,opponentPlayerState:je,localPlacedSections:Jt,opponentPlacedSections:bt,gameEngine:Ce,getPlacedSectionsForEngine:$n,handleTokenClick:pi,handleAbilityIconClick:Bl,selectedDrone:Le,recentlyHitDrones:rs,potentialInterceptors:El,droneRefs:qn,mandatoryAction:gt,setHoveredTarget:Ji}),v.jsx(Rw,{player:ye,isPlayer:!0,placedSections:Jt,onSectionClick:cp,onAbilityClick:Bu,onTargetClick:_a,isInteractive:W==="allocateShields"||vn,selectedCard:_n,validCardTargets:Nt,reallocationPhase:vn,gameEngine:Ce,turnPhase:W,isMyTurn:t,passInfo:nt,getLocalPlayerId:n,localPlayerState:ye,shipAbilityMode:yr,hoveredTarget:Pu,setHoveredTarget:Ji})]})})}),v.jsxs("footer",{className:"w-full flex flex-col items-center flex-shrink-0",children:[v.jsxs("div",{className:"flex justify-center",children:[v.jsx("button",{onClick:()=>co("hand"),className:`px-8 py-2 rounded-t-lg font-bold transition-colors ${Dt&&ln==="hand"?"bg-slate-800 text-white":"bg-slate-900 hover:bg-slate-800 text-cyan-300"}`,children:v.jsxs("span",{className:"flex items-center gap-2",children:[Dt&&ln==="hand"&&v.jsx(Bc,{size:20}),"Hand (",ye.hand.length,"/",$t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>co("drones"),className:`px-8 py-2 rounded-t-lg font-bold transition-colors ${Dt&&ln==="drones"?"bg-slate-800 text-white":"bg-slate-900 hover:bg-slate-800 text-cyan-300"}`,children:v.jsxs("span",{className:"flex items-center gap-2",children:[Dt&&ln==="drones"&&v.jsx(Bc,{size:20}),"Drones"]})}),v.jsx("button",{onClick:()=>co("log"),className:`px-8 py-2 rounded-t-lg font-bold transition-colors ${Dt&&ln==="log"?"bg-slate-800 text-white":"bg-slate-900 hover:bg-slate-800 text-cyan-300"}`,children:v.jsxs("span",{className:"flex items-center gap-2",children:[Dt&&ln==="log"&&v.jsx(Bc,{size:20}),"Log (",Zo.length,")"]})})]}),v.jsxs("div",{className:`relative w-full bg-slate-800/80 backdrop-blur-sm transition-all duration-500 ease-in-out overflow-hidden ${Dt?"max-h-[500px] opacity-100 p-4":"max-h-0 opacity-0"}`,children:[Fe&&v.jsxs("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-4 bg-slate-900/80 p-2 rounded-lg border border-purple-500/50",children:[v.jsxs("span",{className:"text-white font-semibold text-sm w-48 text-center",children:[Fe.phase==="select_source_lane"&&"Reposition: Select a source lane",Fe.phase==="select_drones"&&`Select Drones (${Fe.selectedDrones.length} / ${Fe.maxSelection})`,Fe.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:N=>{N.stopPropagation(),en()},className:"bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded-full transition-colors duration-200",children:"Cancel"}),Fe.phase==="select_drones"&&v.jsx("button",{onClick:N=>{N.stopPropagation(),Fe.selectedDrones.length>0&&St(R=>({...R,phase:"select_destination_lane"}))},disabled:Fe.selectedDrones.length===0,className:`text-white font-bold py-2 px-4 rounded-full transition-colors duration-200 ${Fe.selectedDrones.length===0?"bg-gray-700 cursor-not-allowed":"bg-green-600 hover:bg-green-500"}`,children:"Confirm Drones"})]}),ln==="hand"?(()=>{const U=ye.hand.length>7,J=1552,pe=ye.hand.length;let Se=0;return pe>1&&(Se=(J-208)/(pe-1)-208),v.jsxs("div",{className:"flex flex-row justify-between w-full items-center",children:[v.jsxs("div",{className:"flex flex-col items-center w-32 min-w-32",children:[v.jsx("div",{onClick:()=>le(!0),className:"w-24 h-32 bg-gray-900/80 rounded-lg border-2 border-gray-700 flex items-center justify-center shadow-md cursor-pointer hover:bg-gray-800/80 transition-colors duration-200",children:v.jsx("p",{className:"font-bold text-sm text-gray-400",children:ye.discardPile.length})}),v.jsx("p",{className:"mt-2 text-xs text-gray-400 font-semibold",children:"Discard Pile"})]}),v.jsxs("div",{className:"flex flex-col items-center flex-grow min-w-0",children:[v.jsx("div",{className:"flex items-center gap-4 mb-2",children:v.jsxs("h3",{className:`text-lg font-semibold ${ye.hand.length>$t.totals.handLimit?"text-red-400":"text-white"}`,children:["Your Hand (",ye.hand.length,"/",$t.totals.handLimit,")"]})}),gt?.type==="discard"&&gt.fromAbility&&v.jsxs("p",{className:"text-yellow-400 font-bold mb-2",children:["You must discard ",gt.count," card(s)."]}),v.jsx("div",{className:"relative flex justify-center items-center h-[350px]",style:U?{width:`${J}px`}:{},children:v.jsx("div",{className:`flex justify-center items-center ${!U&&"gap-2"}`,children:ye.hand.map((ke,Be)=>{const Xe=Cu?ye.hand.findIndex(We=>We.instanceId===Cu):-1;let Qe="",rt={zIndex:Be};return U&&Xe!==-1&&(Be<Xe?Qe="transform -translate-x-12":Be>Xe?Qe="transform translate-x-12":(Qe="transform -translate-y-8 scale-105",rt.zIndex=50)),U&&Be>0&&(rt.marginLeft=`${Se}px`),v.jsx("div",{className:`transition-all duration-300 ease-in-out ${Qe}`,style:rt,onMouseEnter:()=>eo(ke.instanceId),onMouseLeave:()=>eo(null),children:v.jsx(vd,{card:ke,isPlayable:W==="action"&&t()&&!nt[`${n()}Passed`]&&ye.energy>=ke.cost&&(!ke.targeting||Ce.getValidTargets(n(),null,ke,ye,je).length>0)||W==="optionalDiscard"&&Tu<$t.totals.discardLimit,isMandatoryTarget:gt?.type==="discard",onClick:gt?.type==="discard"?We=>Ur({type:"discard",target:We,onConfirm:()=>Gu(We),onCancel:()=>Ur(null),text:`Are you sure you want to discard ${We.name}?`}):W==="optionalDiscard"?We=>Ur({type:"discard",target:We,onConfirm:()=>up(We),onCancel:()=>Ur(null),text:`Are you sure you want to discard ${We.name}?`}):bs})},ke.instanceId)})})})]}),v.jsxs("div",{className:"flex flex-col items-center w-32 min-w-32",children:[v.jsx("div",{onClick:()=>Pe(!0),className:"w-24 h-32 bg-indigo-900/50 rounded-lg border-2 border-purple-500 flex items-center justify-center shadow-md cursor-pointer hover:bg-indigo-800/50 transition-colors duration-200",children:v.jsx("p",{className:"font-bold text-sm text-white",children:ye.deck.length})}),v.jsx("p",{className:"mt-2 text-xs text-gray-400 font-semibold",children:"Deck"}),W==="optionalDiscard"&&v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Discarded: ",Tu," / ",$t.discardLimit]}),v.jsx("button",{onClick:()=>{Iu(),vs()},className:"mt-4 text-white font-bold py-2 px-4 rounded-full transition-colors duration-200 bg-purple-600 hover:bg-purple-700 shadow-lg shadow-purple-500/20",children:"Finish Discarding"})]})]})]})})():ln==="drones"?v.jsx("div",{className:"flex flex-col items-center mb-4 w-full",children:v.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:Yu.map((N,R)=>{const U=(ze===1?ye.initialDeploymentBudget+ye.energy:ye.energy)>=N.class,J=_n?.type==="Upgrade"&&Nt.some(pe=>pe.id===N.name);return v.jsx(Ad,{drone:N,onClick:$u,isSelected:Le&&Le.name===N.name,isSelectable:W==="deployment"&&t()&&!nt[`${n()}Passed`]&&U&&!gt||J,deployedCount:ye.deployedDroneCounts[N.name]||0,appliedUpgrades:ye.appliedUpgrades[N.name]||[],isUpgradeTarget:J,onViewUpgrades:(pe,Se)=>jl({droneName:pe.name,upgrades:Se})},R)})})}):v.jsxs("div",{className:"flex flex-col items-center w-full h-full max-h-[350px]",children:[v.jsxs("div",{className:"flex justify-between items-center w-full mb-2 px-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-white",children:"Game Log"}),v.jsx("button",{onClick:zl,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded-full hover:bg-purple-700 transition-colors",children:"Download CSV"})]}),v.jsx("div",{className:"w-full flex-grow bg-black/30 rounded-lg p-2 overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Rnd"}),v.jsx("th",{className:"p-2",children:"Timestamp (UTC)"}),v.jsx("th",{className:"p-2",children:"Player"}),v.jsx("th",{className:"p-2",children:"Action"}),v.jsx("th",{className:"p-2",children:"Source"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2",children:"Outcome"}),v.jsx("th",{className:"p-2 text-xs text-gray-500",children:"Debug Source"}),v.jsx("th",{className:"p-2"})]})}),v.jsx("tbody",{children:Zo.map((N,R)=>v.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-slate-700/50",children:[v.jsx("td",{className:"p-2 font-bold",children:N.round}),v.jsx("td",{className:"p-2 text-gray-500",children:new Date(N.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:"p-2 text-cyan-300",children:N.player}),v.jsx("td",{className:"p-2 text-yellow-300",children:N.actionType}),v.jsx("td",{className:"p-2",children:N.source}),v.jsx("td",{className:"p-2",children:N.target}),v.jsx("td",{className:"p-2 text-gray-400",children:N.outcome}),v.jsx("td",{className:"p-2 text-xs text-gray-500",children:N.debugSource}),v.jsx("td",{className:"p-2 text-center",children:N.aiDecisionContext&&v.jsx("button",{onClick:()=>wu(N.aiDecisionContext),className:"text-gray-400 hover:text-white",title:"Show AI Decision Logic",children:""})})]},R)).reverse()})]})})]}),W==="allocateShields"&&v.jsxs("div",{className:"flex justify-center items-center gap-4 mt-8",children:[v.jsx("button",{onClick:Ll,className:"text-white font-bold py-3 px-8 rounded-full transition-colors duration-200 bg-pink-600 hover:bg-pink-700 shadow-lg shadow-pink-500/30",children:"Reset Allocation"}),v.jsxs("div",{className:"flex items-center gap-3 text-white bg-slate-900/80 border border-cyan-500/50 px-6 py-2 rounded-full shadow-lg",children:[v.jsx(wo,{size:20,className:"text-cyan-300"}),v.jsxs("span",{className:"font-bold text-lg font-orbitron tracking-wider",children:[Zi," / ",$t.totals.shieldsPerTurn]}),v.jsx("span",{className:"text-sm text-gray-400",children:"Shields to Allocate"})]}),v.jsx("button",{onClick:uo,className:"text-white font-bold py-3 px-8 rounded-full transition-colors duration-200 bg-purple-600 hover:bg-purple-700 shadow-lg shadow-purple-500/30",children:"End Allocation"})]}),vn&&v.jsxs("div",{className:"flex justify-center items-center gap-4 mt-8",children:[v.jsx("button",{onClick:op,className:"text-white font-bold py-3 px-8 rounded-full transition-colors duration-200 bg-pink-600 hover:bg-pink-700 shadow-lg shadow-pink-500/30",children:"Reset Reallocation"}),vn==="removing"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex items-center gap-3 text-white bg-slate-900/80 border border-orange-500/50 px-6 py-2 rounded-full shadow-lg",children:[v.jsx(wo,{size:20,className:"text-orange-300"}),v.jsx("span",{className:"font-bold text-lg font-orbitron tracking-wider",children:hs}),v.jsx("span",{className:"text-sm text-gray-400",children:"Shields to Remove"})]}),Ea>0&&v.jsxs("button",{onClick:ip,className:"text-white font-bold py-3 px-8 rounded-full transition-colors duration-200 bg-green-600 hover:bg-green-700 shadow-lg shadow-green-500/30",children:["Continue to Add Phase (",Ea,")"]})]}),vn==="adding"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex items-center gap-3 text-white bg-slate-900/80 border border-green-500/50 px-6 py-2 rounded-full shadow-lg",children:[v.jsx(wo,{size:20,className:"text-green-300"}),v.jsx("span",{className:"font-bold text-lg font-orbitron tracking-wider",children:Ea}),v.jsx("span",{className:"text-sm text-gray-400",children:"Shields to Add"})]}),Ea===0&&v.jsx("button",{onClick:lp,className:"text-white font-bold py-3 px-8 rounded-full transition-colors duration-200 bg-purple-600 hover:bg-purple-700 shadow-lg shadow-purple-500/30",children:"Confirm Reallocation"})]}),v.jsx("button",{onClick:sp,className:"text-white font-bold py-3 px-8 rounded-full transition-colors duration-200 bg-gray-600 hover:bg-gray-700 shadow-lg shadow-gray-500/30",children:"Cancel"})]})]})]}),ae&&v.jsx(Ft,{title:ae.title,text:ae.text,onClose:ae.onClose===null?null:ae.onClose||(()=>H(null)),children:ae.children}),be&&v.jsx(Ft,{title:"First Player Determined",text:`${Pt===n()?ye.name:je.name} will go first this round. ${pp()}`,onClose:ys,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:ys,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Continue"})})}),j&&v.jsx(Ft,{title:"Action Phase",text:"Deployment has ended. Prepare for action!",onClose:Il,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:Il,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Continue"})})}),V&&v.jsx(Ft,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:ju,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:ju,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Begin Next Round"})})}),re&&v.jsx(Ft,{title:"Confirm Deployment",text:`This deployment will use ${re.budgetCost} Initial Deployment points and cost ${re.energyCost} Energy. Proceed?`,onClose:()=>me(null),children:v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:()=>me(null),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:dp,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full hover:bg-green-700 transition-colors",children:"Confirm"})]})}),de&&v.jsx(Ft,{title:"Confirm Move",text:`Move ${de.drone.name} from ${de.from} to ${de.to}? The drone will be exhausted.`,onClose:()=>ve(null),children:v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:()=>ve(null),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:zu,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full hover:bg-green-700 transition-colors",children:"Confirm"})]})}),ta&&v.jsx(Ft,{title:"Attack Intercepted!",text:`Your opponent used their ${ta.interceptor.name} to protect ${ta.originalTarget.name}!`,onClose:ta.onClose,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:ta.onClose,className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Continue"})})}),Jo&&v.jsx(Nu,{choiceData:Jo,onIntercept:N=>{xn({...Jo.attackDetails,interceptor:N}),es(null)},onDecline:()=>{xn(Jo.attackDetails),es(null)}}),v.jsx($Y,{isOpen:!!G,drone:G,onClose:()=>oe(null)}),ci&&v.jsx(Wh,{report:ci,onClose:Hu}),ra&&v.jsx(Qh,{report:ra,onClose:qu}),_l&&v.jsx(Zh,{decisionLog:_l,onClose:()=>wu(null)}),Tt&&Ae&&v.jsx(Ft,{title:Tt===n()?"Victory!":"Defeat!",text:Tt===n()?"You have crippled the enemy command ship.":"Your command ship has been crippled.",onClose:()=>q(!1),children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:()=>q(!1),className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"View Final Board"})})}),gt&&_u&&v.jsx(Ft,{title:gt.type==="discard"?"Hand Limit Exceeded":"CPU Limit Exceeded",text:gt.type==="discard"?`Your hand limit is now ${$t.handLimit}. Please select ${gt.count} card(s) to discard.`:`Your drone limit is now ${$t.cpuLimit}. Please select ${gt.count} drone(s) to destroy.`,onClose:()=>ro(!1)}),ca&&v.jsx(Ft,{title:`Confirm ${ca.type==="discard"?"Discard":"Destruction"}`,text:ca.text,onClose:ca.onCancel,children:v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:ca.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:ca.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})}),Ml&&v.jsx(IY,{modalData:Ml,onClose:()=>jl(null)}),us&&v.jsx(LY,{selectionData:us,onConfirm:(N,R)=>{hi(N,R,n()),fs(null)},onCancel:()=>{fs(null),en()}}),ds&&v.jsx(RY,{selectionData:ds,onConfirm:(N,R)=>{hi(N,R,n()),la(null)},onCancel:()=>{la(null),en()}}),Tn&&(()=>{let N="";return Tn.target&&(Tn.target.name?N=Tn.target.name:Tn.target.id.startsWith("lane")?N=`Lane ${Tn.target.id.slice(-1)}`:N=Tn.target.id.replace(/([A-Z])/g," $1").replace(/^./,R=>R.toUpperCase())),v.jsx(Ft,{title:`Confirm Action: ${Tn.card.name}`,text:`Use ${Tn.card.name}${N?` on ${N}`:""}? This will cost ${Tn.card.cost} energy.`,onClose:()=>Fn(null),children:v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:()=>Fn(null),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>hi(Tn.card,Tn.target,n()),className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full hover:bg-green-700 transition-colors",children:"Confirm"})]})})})(),Nl&&(()=>{const{ability:N,drone:R,target:Y}=Nl,U=`Lane ${Y.id.slice(-1)}`;return v.jsx(Ft,{title:`Confirm Ability: ${N.name}`,text:`Use ${R.name}'s ability on ${U}? This will cost ${N.cost.energy||0} energy and exhaust the drone.`,onClose:()=>sa(null),children:v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:()=>sa(null),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>{gs(N,R,Y),sa(null)},className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full hover:bg-green-700 transition-colors",children:"Confirm"})]})})})(),$&&L&&v.jsxs(Ft,{title:"Opponent's Hand (Debug View)",text:`The opponent is holding ${je.hand.length} card(s). This view is for debug purposes only.`,onClose:()=>Z(!1),maxWidthClass:"max-w-6xl",children:[v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:je.hand.length>0?je.hand.map(N=>v.jsx(vd,{card:N,isPlayable:!1},N.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:()=>Z(!1),className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-700 transition-colors",children:"Close"})})]}),v.jsx(jw,{isOpen:se,onClose:()=>Pe(!1),cards:ye.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(jw,{isOpen:ge,onClose:()=>le(!1),cards:ye.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(DY,{isOpen:!!ui,onClose:ui?.onCancel||(()=>fi(null)),onConfirm:ui?.onConfirm||(()=>{}),selectionData:ui}),cs&&(()=>{const{ability:N,sectionName:R,target:Y}=cs,U=R.replace(/([A-Z])/g," $1").replace(/^./,pe=>pe.toUpperCase());let J="";return Y&&(J=Y.name),v.jsx(Ft,{title:`Confirm Ability: ${N.name}`,text:`Use ${U}'s ability${Y?` on ${J}`:""}? This will cost ${N.cost.energy} energy.`,onClose:()=>vr(null),children:v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:()=>vr(null),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>lo(N,R,Y),className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full hover:bg-green-700 transition-colors",children:"Confirm"})]})})})(),he&&v.jsx(kY,{onGameStart:()=>{xe(!1),console.log(" Starting multiplayer game"),_.startGame(e.gameMode,{name:"Player 1",deck:[],activeDronePool:[]},{name:"Player 2",deck:[],activeDronePool:[]}),Hc.startGameFlow("droneSelection"),setTempSelectedDrones([]),H({title:"Phase 1: Choose Your Drones",text:"Select 5 drones from your full collection to add to your Active Drone Pool. These are the drones you can launch during the game. Your opponent is making their selections simultaneously.",isBlocking:!0})},onBack:()=>xe(!1)}),v.jsx(NY,{isVisible:!1,currentPlayer:Ie,gameMode:e.gameMode,roomCode:null,lastAction:null,localPlayerState:ye,opponentPlayerState:je,getLocalPlayerId:n})]})};function UY(){const{gameState:e}=Yi(),[t,n]=A.useState(!0);if(A.useEffect(()=>{const r=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(r)},[]),A.useEffect(()=>{Gi.initialize(Ke,Ws,()=>e.gameMode!=="local"),console.log(" SimultaneousActionManager initialized in AppRouter")},[e.gameMode]),A.useEffect(()=>{Ws.initialize(r0,In,e.selectedAIPersonality||r0[0]),console.log(" AIPhaseProcessor initialized in AppRouter")},[e.selectedAIPersonality]),A.useEffect(()=>{Hc.initialize(Ke,Gi,Ke.actionProcessor,()=>e.gameMode!=="local",Ws),Ke.setGameFlowManager(Hc),console.log(" GameFlowManager initialized in AppRouter")},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading Drone Wars..."})});switch(e.appState){case"menu":return v.jsx(RA,{});case"lobby":return v.jsx(_R,{});case"inGame":switch(e.turnPhase){case"droneSelection":return v.jsx(DR,{});case"deckSelection":return v.jsx(kR,{});case"deckBuilding":return v.jsx(OY,{});case"placement":return v.jsx(MR,{});default:return v.jsx(BY,{})}default:return console.warn("Unknown app state:",e.appState,"defaulting to menu"),v.jsx(RA,{})}}rM.createRoot(document.getElementById("root")).render(v.jsx(Bw.StrictMode,{children:v.jsx(UY,{})}));export{lh as G,In as f};
