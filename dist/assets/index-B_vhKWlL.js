function jw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function qr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jm={exports:{}},hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1;function WN(){if(Q1)return hc;Q1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:o}}return hc.Fragment=t,hc.jsx=n,hc.jsxs=n,hc}var Z1;function QN(){return Z1||(Z1=1,jm.exports=WN()),jm.exports}var v=QN(),Nm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function ZN(){if(J1)return Ie;J1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=m&&I[m]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function P(I,K,Y){this.props=I,this.context=K,this.refs=A,this.updater=Y||x}P.prototype.isReactComponent={},P.prototype.setState=function(I,K){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,K,"setState")},P.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function E(){}E.prototype=P.prototype;function O(I,K,Y){this.props=I,this.context=K,this.refs=A,this.updater=Y||x}var _=O.prototype=new E;_.constructor=O,S(_,P.prototype),_.isPureReactComponent=!0;var N=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function R(I,K,Y,le,ye,z){return Y=z.ref,{$$typeof:e,type:I,key:K,ref:Y!==void 0?Y:null,props:z}}function k(I,K){return R(I.type,K,void 0,void 0,void 0,I.props)}function U(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function Z(I){var K={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Y){return K[Y]})}var q=/\/+/g;function J(I,K){return typeof I=="object"&&I!==null&&I.key!=null?Z(""+I.key):K.toString(36)}function ce(){}function se(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(ce,ce):(I.status="pending",I.then(function(K){I.status==="pending"&&(I.status="fulfilled",I.value=K)},function(K){I.status==="pending"&&(I.status="rejected",I.reason=K)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function te(I,K,Y,le,ye){var z=typeof I;(z==="undefined"||z==="boolean")&&(I=null);var re=!1;if(I===null)re=!0;else switch(z){case"bigint":case"string":case"number":re=!0;break;case"object":switch(I.$$typeof){case e:case t:re=!0;break;case p:return re=I._init,te(re(I._payload),K,Y,le,ye)}}if(re)return ye=ye(I),re=le===""?"."+J(I,0):le,N(ye)?(Y="",re!=null&&(Y=re.replace(q,"$&/")+"/"),te(ye,K,Y,"",function(ie){return ie})):ye!=null&&(U(ye)&&(ye=k(ye,Y+(ye.key==null||I&&I.key===ye.key?"":(""+ye.key).replace(q,"$&/")+"/")+re)),K.push(ye)),1;re=0;var be=le===""?".":le+":";if(N(I))for(var me=0;me<I.length;me++)le=I[me],z=be+J(le,me),re+=te(le,K,Y,z,ye);else if(me=y(I),typeof me=="function")for(I=me.call(I),me=0;!(le=I.next()).done;)le=le.value,z=be+J(le,me++),re+=te(le,K,Y,z,ye);else if(z==="object"){if(typeof I.then=="function")return te(se(I),K,Y,le,ye);throw K=String(I),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return re}function $(I,K,Y){if(I==null)return I;var le=[],ye=0;return te(I,le,"","",function(z){return K.call(Y,z,ye++)}),le}function ee(I){if(I._status===-1){var K=I._result;K=K(),K.then(function(Y){(I._status===0||I._status===-1)&&(I._status=1,I._result=Y)},function(Y){(I._status===0||I._status===-1)&&(I._status=2,I._result=Y)}),I._status===-1&&(I._status=0,I._result=K)}if(I._status===1)return I._result.default;throw I._result}var pe=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function he(){}return Ie.Children={map:$,forEach:function(I,K,Y){$(I,function(){K.apply(this,arguments)},Y)},count:function(I){var K=0;return $(I,function(){K++}),K},toArray:function(I){return $(I,function(K){return K})||[]},only:function(I){if(!U(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ie.Component=P,Ie.Fragment=n,Ie.Profiler=i,Ie.PureComponent=O,Ie.StrictMode=r,Ie.Suspense=d,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(I){return j.H.useMemoCache(I)}},Ie.cache=function(I){return function(){return I.apply(null,arguments)}},Ie.cloneElement=function(I,K,Y){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var le=S({},I.props),ye=I.key,z=void 0;if(K!=null)for(re in K.ref!==void 0&&(z=void 0),K.key!==void 0&&(ye=""+K.key),K)!D.call(K,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&K.ref===void 0||(le[re]=K[re]);var re=arguments.length-2;if(re===1)le.children=Y;else if(1<re){for(var be=Array(re),me=0;me<re;me++)be[me]=arguments[me+2];le.children=be}return R(I.type,ye,void 0,void 0,z,le)},Ie.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},Ie.createElement=function(I,K,Y){var le,ye={},z=null;if(K!=null)for(le in K.key!==void 0&&(z=""+K.key),K)D.call(K,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=K[le]);var re=arguments.length-2;if(re===1)ye.children=Y;else if(1<re){for(var be=Array(re),me=0;me<re;me++)be[me]=arguments[me+2];ye.children=be}if(I&&I.defaultProps)for(le in re=I.defaultProps,re)ye[le]===void 0&&(ye[le]=re[le]);return R(I,z,void 0,void 0,null,ye)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(I){return{$$typeof:u,render:I}},Ie.isValidElement=U,Ie.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:ee}},Ie.memo=function(I,K){return{$$typeof:h,type:I,compare:K===void 0?null:K}},Ie.startTransition=function(I){var K=j.T,Y={};j.T=Y;try{var le=I(),ye=j.S;ye!==null&&ye(Y,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(he,pe)}catch(z){pe(z)}finally{j.T=K}},Ie.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ie.use=function(I){return j.H.use(I)},Ie.useActionState=function(I,K,Y){return j.H.useActionState(I,K,Y)},Ie.useCallback=function(I,K){return j.H.useCallback(I,K)},Ie.useContext=function(I){return j.H.useContext(I)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(I,K){return j.H.useDeferredValue(I,K)},Ie.useEffect=function(I,K,Y){var le=j.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(I,K)},Ie.useId=function(){return j.H.useId()},Ie.useImperativeHandle=function(I,K,Y){return j.H.useImperativeHandle(I,K,Y)},Ie.useInsertionEffect=function(I,K){return j.H.useInsertionEffect(I,K)},Ie.useLayoutEffect=function(I,K){return j.H.useLayoutEffect(I,K)},Ie.useMemo=function(I,K){return j.H.useMemo(I,K)},Ie.useOptimistic=function(I,K){return j.H.useOptimistic(I,K)},Ie.useReducer=function(I,K,Y){return j.H.useReducer(I,K,Y)},Ie.useRef=function(I){return j.H.useRef(I)},Ie.useState=function(I){return j.H.useState(I)},Ie.useSyncExternalStore=function(I,K,Y){return j.H.useSyncExternalStore(I,K,Y)},Ie.useTransition=function(){return j.H.useTransition()},Ie.version="19.1.1",Ie}var eA;function Qo(){return eA||(eA=1,Nm.exports=ZN()),Nm.exports}var C=Qo();const Nw=qr(C),JN=jw({__proto__:null,default:Nw},[C]);var Mm={exports:{}},pc={},km={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tA;function eM(){return tA||(tA=1,(function(e){function t($,ee){var pe=$.length;$.push(ee);e:for(;0<pe;){var he=pe-1>>>1,I=$[he];if(0<i(I,ee))$[he]=ee,$[pe]=I,pe=he;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ee=$[0],pe=$.pop();if(pe!==ee){$[0]=pe;e:for(var he=0,I=$.length,K=I>>>1;he<K;){var Y=2*(he+1)-1,le=$[Y],ye=Y+1,z=$[ye];if(0>i(le,pe))ye<I&&0>i(z,le)?($[he]=z,$[ye]=pe,he=ye):($[he]=le,$[Y]=pe,he=Y);else if(ye<I&&0>i(z,pe))$[he]=z,$[ye]=pe,he=ye;else break e}}return ee}function i($,ee){var pe=$.sortIndex-ee.sortIndex;return pe!==0?pe:$.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,y=3,x=!1,S=!1,A=!1,P=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function N($){for(var ee=n(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=$)r(h),ee.sortIndex=ee.expirationTime,t(d,ee);else break;ee=n(h)}}function j($){if(A=!1,N($),!S)if(n(d)!==null)S=!0,D||(D=!0,J());else{var ee=n(h);ee!==null&&te(j,ee.startTime-$)}}var D=!1,R=-1,k=5,U=-1;function Z(){return P?!0:!(e.unstable_now()-U<k)}function q(){if(P=!1,D){var $=e.unstable_now();U=$;var ee=!0;try{e:{S=!1,A&&(A=!1,O(R),R=-1),x=!0;var pe=y;try{t:{for(N($),m=n(d);m!==null&&!(m.expirationTime>$&&Z());){var he=m.callback;if(typeof he=="function"){m.callback=null,y=m.priorityLevel;var I=he(m.expirationTime<=$);if($=e.unstable_now(),typeof I=="function"){m.callback=I,N($),ee=!0;break t}m===n(d)&&r(d),N($)}else r(d);m=n(d)}if(m!==null)ee=!0;else{var K=n(h);K!==null&&te(j,K.startTime-$),ee=!1}}break e}finally{m=null,y=pe,x=!1}ee=void 0}}finally{ee?J():D=!1}}}var J;if(typeof _=="function")J=function(){_(q)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,se=ce.port2;ce.port1.onmessage=q,J=function(){se.postMessage(null)}}else J=function(){E(q,0)};function te($,ee){R=E(function(){$(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function($){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var pe=y;y=ee;try{return $()}finally{y=pe}},e.unstable_requestPaint=function(){P=!0},e.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var pe=y;y=$;try{return ee()}finally{y=pe}},e.unstable_scheduleCallback=function($,ee,pe){var he=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?he+pe:he):pe=he,$){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=pe+I,$={id:p++,callback:ee,priorityLevel:$,startTime:pe,expirationTime:I,sortIndex:-1},pe>he?($.sortIndex=pe,t(h,$),n(d)===null&&$===n(h)&&(A?(O(R),R=-1):A=!0,te(j,pe-he))):($.sortIndex=I,t(d,$),S||x||(S=!0,D||(D=!0,J()))),$},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function($){var ee=y;return function(){var pe=y;y=ee;try{return $.apply(this,arguments)}finally{y=pe}}}})(Rm)),Rm}var nA;function tM(){return nA||(nA=1,km.exports=eM()),km.exports}var Im={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function nM(){if(rA)return Sn;rA=1;var e=Qo();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Sn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,p)},Sn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},Sn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Sn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Sn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Sn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Sn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Sn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Sn.requestFormReset=function(d){r.d.r(d)},Sn.unstable_batchedUpdates=function(d,h){return d(h)},Sn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},Sn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Sn.version="19.1.1",Sn}var aA;function Mw(){if(aA)return Im.exports;aA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Im.exports=nM(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA;function rM(){if(iA)return pc;iA=1;var e=tM(),t=Qo(),n=Mw();function r(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,c=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(c=s.return),a=s.return;while(a)}return s.tag===3?c:null}function l(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function u(a){if(o(a)!==a)throw Error(r(188))}function d(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(r(188));return s!==a?null:a}for(var c=a,f=s;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return u(g),a;if(b===f)return u(g),s;b=b.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=b;else{for(var w=!1,T=g.child;T;){if(T===c){w=!0,c=g,f=b;break}if(T===f){w=!0,f=g,c=b;break}T=T.sibling}if(!w){for(T=b.child;T;){if(T===c){w=!0,c=b,f=g;break}if(T===f){w=!0,f=b,c=g;break}T=T.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:s}function h(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=h(a),s!==null)return s;a=a.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),_=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function J(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Symbol.for("react.client.reference");function se(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ce?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case P:return"Profiler";case A:return"StrictMode";case j:return"Suspense";case D:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case _:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case N:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case R:return s=a.displayName||null,s!==null?s:se(a.type)||"Memo";case k:s=a._payload,a=a._init;try{return se(a(s))}catch{}}return null}var te=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},he=[],I=-1;function K(a){return{current:a}}function Y(a){0>I||(a.current=he[I],he[I]=null,I--)}function le(a,s){I++,he[I]=a.current,a.current=s}var ye=K(null),z=K(null),re=K(null),be=K(null);function me(a,s){switch(le(re,s),le(z,a),le(ye,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?E1(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=E1(s),a=w1(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Y(ye),le(ye,a)}function ie(){Y(ye),Y(z),Y(re)}function ue(a){a.memoizedState!==null&&le(be,a);var s=ye.current,c=w1(s,a.type);s!==c&&(le(z,a),le(ye,c))}function ve(a){z.current===a&&(Y(ye),Y(z)),be.current===a&&(Y(be),lc._currentValue=pe)}var fe=Object.prototype.hasOwnProperty,rt=e.unstable_scheduleCallback,ze=e.unstable_cancelCallback,Me=e.unstable_shouldYield,Le=e.unstable_requestPaint,bt=e.unstable_now,Mr=e.unstable_getCurrentPriorityLevel,Qa=e.unstable_ImmediatePriority,qs=e.unstable_UserBlockingPriority,Fr=e.unstable_NormalPriority,hu=e.unstable_LowPriority,Ys=e.unstable_IdlePriority,Fs=e.log,Ks=e.unstable_setDisableYieldValue,ua=null,_n=null;function kr(a){if(typeof Fs=="function"&&Ks(a),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(ua,a)}catch{}}var mn=Math.clz32?Math.clz32:cl,Vi=Math.log,fa=Math.LN2;function cl(a){return a>>>=0,a===0?32:31-(Vi(a)/fa|0)|0}var Xi=256,Wi=4194304;function Kr(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Za(a,s,c){var f=a.pendingLanes;if(f===0)return 0;var g=0,b=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var T=f&134217727;return T!==0?(f=T&~b,f!==0?g=Kr(f):(w&=T,w!==0?g=Kr(w):c||(c=T&~a,c!==0&&(g=Kr(c))))):(T=f&~b,T!==0?g=Kr(T):w!==0?g=Kr(w):c||(c=f&~a,c!==0&&(g=Kr(c)))),g===0?0:s!==0&&s!==g&&(s&b)===0&&(b=g&-g,c=s&-s,b>=c||b===32&&(c&4194048)!==0)?s:g}function Ja(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function ul(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pu(){var a=Xi;return Xi<<=1,(Xi&4194048)===0&&(Xi=256),a}function fl(){var a=Wi;return Wi<<=1,(Wi&62914560)===0&&(Wi=4194304),a}function da(a){for(var s=[],c=0;31>c;c++)s.push(a);return s}function ei(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Ib(a,s,c,f,g,b){var w=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var T=a.entanglements,M=a.expirationTimes,H=a.hiddenUpdates;for(c=w&~c;0<c;){var ne=31-mn(c),oe=1<<ne;T[ne]=0,M[ne]=-1;var F=H[ne];if(F!==null)for(H[ne]=null,ne=0;ne<F.length;ne++){var W=F[ne];W!==null&&(W.lane&=-536870913)}c&=~oe}f!==0&&Eh(a,f,0),b!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=b&~(w&~s))}function Eh(a,s,c){a.pendingLanes|=s,a.suspendedLanes&=~s;var f=31-mn(s);a.entangledLanes|=s,a.entanglements[f]=a.entanglements[f]|1073741824|c&4194090}function xt(a,s){var c=a.entangledLanes|=s;for(a=a.entanglements;c;){var f=31-mn(c),g=1<<f;g&s|a[f]&s&&(a[f]|=s),c&=~g}}function Rn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ha(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Vs(){var a=ee.p;return a!==0?a:(a=window.event,a===void 0?32:Y1(a.type))}function fr(a,s){var c=ee.p;try{return ee.p=a,s()}finally{ee.p=c}}var gn=Math.random().toString(36).slice(2),Ct="__reactFiber$"+gn,wt="__reactProps$"+gn,kt="__reactContainer$"+gn,In="__reactEvents$"+gn,pa="__reactListeners$"+gn,dl="__reactHandles$"+gn,ma="__reactResources$"+gn,Ln="__reactMarker$"+gn;function ga(a){delete a[Ct],delete a[wt],delete a[In],delete a[pa],delete a[dl]}function Rr(a){var s=a[Ct];if(s)return s;for(var c=a.parentNode;c;){if(s=c[kt]||c[Ct]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(a=D1(a);a!==null;){if(c=a[Ct])return c;a=D1(a)}return s}a=c,c=a.parentNode}return null}function Ye(a){if(a=a[Ct]||a[kt]){var s=a.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return a}return null}function yn(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(r(33))}function ti(a){var s=a[ma];return s||(s=a[ma]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ot(a){a[Ln]=!0}var mu=new Set,hl={};function ya(a,s){va(a,s),va(a+"Capture",s)}function va(a,s){for(hl[a]=s,a=0;a<s.length;a++)mu.add(s[a])}var Vr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ni={},gu={};function yu(a){return fe.call(gu,a)?!0:fe.call(ni,a)?!1:Vr.test(a)?gu[a]=!0:(ni[a]=!0,!1)}function Qi(a,s,c){if(yu(s))if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+c)}}function Ir(a,s,c){if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+c)}}function $n(a,s,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(s,c,""+f)}}var ri,ai;function ii(a){if(ri===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ri=s&&s[1]||"",ai=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ri+a+ai}var Xs=!1;function Zi(a,s){if(!a||Xs)return"";Xs=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(W){var F=W}Reflect.construct(a,[],oe)}else{try{oe.call()}catch(W){F=W}a.call(oe.prototype)}}else{try{throw Error()}catch(W){F=W}(oe=a())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(W){if(W&&F&&typeof W.stack=="string")return[W.stack,F.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),w=b[0],T=b[1];if(w&&T){var M=w.split(`
`),H=T.split(`
`);for(g=f=0;f<M.length&&!M[f].includes("DetermineComponentFrameRoot");)f++;for(;g<H.length&&!H[g].includes("DetermineComponentFrameRoot");)g++;if(f===M.length||g===H.length)for(f=M.length-1,g=H.length-1;1<=f&&0<=g&&M[f]!==H[g];)g--;for(;1<=f&&0<=g;f--,g--)if(M[f]!==H[g]){if(f!==1||g!==1)do if(f--,g--,0>g||M[f]!==H[g]){var ne=`
`+M[f].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=f&&0<=g);break}}}finally{Xs=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?ii(c):""}function vu(a){switch(a.tag){case 26:case 27:case 5:return ii(a.type);case 16:return ii("Lazy");case 13:return ii("Suspense");case 19:return ii("SuspenseList");case 0:case 15:return Zi(a.type,!1);case 11:return Zi(a.type.render,!1);case 1:return Zi(a.type,!0);case 31:return ii("Activity");default:return""}}function pl(a){try{var s="";do s+=vu(a),a=a.return;while(a);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Kn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function bu(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Lb(a){var s=bu(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),f=""+a[s];if(!a.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,b=c.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,b.call(this,w)}}),Object.defineProperty(a,s,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function ml(a){a._valueTracker||(a._valueTracker=Lb(a))}function wh(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return a&&(f=bu(a)?a.checked?"true":"false":a.value),a=f,a!==c?(s.setValue(a),!0):!1}function Ws(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Qs=/[\n"\\]/g;function vn(a){return a.replace(Qs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ba(a,s,c,f,g,b,w,T){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),s!=null?w==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+Kn(s)):a.value!==""+Kn(s)&&(a.value=""+Kn(s)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),s!=null?gl(a,w,Kn(s)):c!=null?gl(a,w,Kn(c)):f!=null&&a.removeAttribute("value"),g==null&&b!=null&&(a.defaultChecked=!!b),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.name=""+Kn(T):a.removeAttribute("name")}function xa(a,s,c,f,g,b,w,T){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),s!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||s!=null))return;c=c!=null?""+Kn(c):"",s=s!=null?""+Kn(s):c,T||s===a.value||(a.value=s),a.defaultValue=s}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=T?a.checked:!!f,a.defaultChecked=!!f,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function gl(a,s,c){s==="number"&&Ws(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function si(a,s,c,f){if(a=a.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<a.length;c++)g=s.hasOwnProperty("$"+a[c].value),a[c].selected!==g&&(a[c].selected=g),g&&f&&(a[c].defaultSelected=!0)}else{for(c=""+Kn(c),s=null,g=0;g<a.length;g++){if(a[g].value===c){a[g].selected=!0,f&&(a[g].defaultSelected=!0);return}s!==null||a[g].disabled||(s=a[g])}s!==null&&(s.selected=!0)}}function xu(a,s,c){if(s!=null&&(s=""+Kn(s),s!==a.value&&(a.value=s),c==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=c!=null?""+Kn(c):""}function Fe(a,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(r(92));if(te(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=Kn(s),a.defaultValue=c,f=a.textContent,f===c&&f!==""&&f!==null&&(a.value=f)}function Bn(a,s){if(s){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=s;return}}a.textContent=s}var Lr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yl(a,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":f?a.setProperty(s,c):typeof c!="number"||c===0||Lr.has(s)?s==="float"?a.cssFloat=c:a[s]=(""+c).trim():a[s]=c+"px"}function Su(a,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(a=a.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var g in s)f=s[g],s.hasOwnProperty(g)&&c[g]!==f&&yl(a,g,f)}else for(var b in s)s.hasOwnProperty(b)&&yl(a,b,s[b])}function Au(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vl(a){return Tn.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var bl=null;function Ji(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var es=null,Ee=null;function Be(a){var s=Ye(a);if(s&&(a=s.stateNode)){var c=a[wt]||null;e:switch(a=s.stateNode,s.type){case"input":if(ba(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==a&&f.form===a.form){var g=f[wt]||null;if(!g)throw Error(r(90));ba(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===a.form&&wh(f)}break e;case"textarea":xu(a,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&si(a,!!c.multiple,s,!1)}}}var dr=!1;function Xr(a,s,c){if(dr)return a(s,c);dr=!0;try{var f=a(s);return f}finally{if(dr=!1,(es!==null||Ee!==null)&&(lf(),es&&(s=es,a=Ee,Ee=es=null,Be(s),a)))for(s=0;s<a.length;s++)Be(a[s])}}function oi(a,s){var c=a.stateNode;if(c===null)return null;var f=c[wt]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),li=!1;if(on)try{var ci={};Object.defineProperty(ci,"passive",{get:function(){li=!0}}),window.addEventListener("test",ci,ci),window.removeEventListener("test",ci,ci)}catch{li=!1}var $r=null,Zs=null,Js=null;function Wr(){if(Js)return Js;var a,s=Zs,c=s.length,f,g="value"in $r?$r.value:$r.textContent,b=g.length;for(a=0;a<c&&s[a]===g[a];a++);var w=c-a;for(f=1;f<=w&&s[c-f]===g[b-f];f++);return Js=g.slice(a,1<f?1-f:void 0)}function _t(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Vn(){return!0}function xl(){return!1}function bn(a){function s(c,f,g,b,w){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var T in a)a.hasOwnProperty(T)&&(c=a[T],this[T]=c?c(b):b[T]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Vn:xl,this.isPropagationStopped=xl,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Vn)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Vn)},persist:function(){},isPersistent:Vn}),s}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=bn(Qr),ts=p({},Qr,{view:0,detail:0}),Oh=bn(ts),Sl,ns,rs,to=p({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==rs&&(rs&&a.type==="mousemove"?(Sl=a.screenX-rs.screenX,ns=a.screenY-rs.screenY):ns=Sl=0,rs=a),Sl)},movementY:function(a){return"movementY"in a?a.movementY:ns}}),Cu=bn(to),_h=p({},to,{dataTransfer:0}),Th=bn(_h),Dh=p({},ts,{relatedTarget:0}),Al=bn(Dh),jh=p({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pu=bn(jh),Nh=p({},Qr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Mh=bn(Nh),kh=p({},Qr,{data:0}),Eu=bn(kh),Rh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lh(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=Ih[a])?!!s[a]:!1}function Cl(){return Lh}var $h=p({},ts,{key:function(a){if(a.key){var s=Rh[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=_t(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?wu[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cl,charCode:function(a){return a.type==="keypress"?_t(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?_t(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Bh=bn($h),V=p({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X=bn(V),ge=p({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cl}),de=bn(ge),Se=p({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=bn(Se),Re=p({},to,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Qe=bn(Re),Rt=p({},Qr,{newState:0,oldState:0}),Wt=bn(Rt),Gt=[9,13,27,32],Tt=on&&"CompositionEvent"in window,ln=null;on&&"documentMode"in document&&(ln=document.documentMode);var Dn=on&&"TextEvent"in window&&!ln,no=on&&(!Tt||ln&&8<ln&&11>=ln),ui=" ",Sa=!1;function Ou(a,s){switch(a){case"keyup":return Gt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pl(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var hr=!1;function Uh(a,s){switch(a){case"compositionend":return Pl(s);case"keypress":return s.which!==32?null:(Sa=!0,ui);case"textInput":return a=s.data,a===ui&&Sa?null:a;default:return null}}function El(a,s){if(hr)return a==="compositionend"||!Tt&&Ou(a,s)?(a=Wr(),Js=Zs=$r=null,hr=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return no&&s.locale!=="ko"?null:s.data;default:return null}}var $b={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bb(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!$b[a.type]:s==="textarea"}function Ub(a,s,c,f){es?Ee?Ee.push(f):Ee=[f]:es=f,s=pf(s,"onChange"),0<s.length&&(c=new eo("onChange","change",null,c,f),a.push({event:c,listeners:s}))}var wl=null,Ol=null;function Ej(a){x1(a,0)}function _u(a){var s=yn(a);if(wh(s))return a}function zb(a,s){if(a==="change")return s}var Gb=!1;if(on){var zh;if(on){var Gh="oninput"in document;if(!Gh){var Hb=document.createElement("div");Hb.setAttribute("oninput","return;"),Gh=typeof Hb.oninput=="function"}zh=Gh}else zh=!1;Gb=zh&&(!document.documentMode||9<document.documentMode)}function qb(){wl&&(wl.detachEvent("onpropertychange",Yb),Ol=wl=null)}function Yb(a){if(a.propertyName==="value"&&_u(Ol)){var s=[];Ub(s,Ol,a,Ji(a)),Xr(Ej,s)}}function wj(a,s,c){a==="focusin"?(qb(),wl=s,Ol=c,wl.attachEvent("onpropertychange",Yb)):a==="focusout"&&qb()}function Oj(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return _u(Ol)}function _j(a,s){if(a==="click")return _u(s)}function Tj(a,s){if(a==="input"||a==="change")return _u(s)}function Dj(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var Xn=typeof Object.is=="function"?Object.is:Dj;function _l(a,s){if(Xn(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var c=Object.keys(a),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!fe.call(s,g)||!Xn(a[g],s[g]))return!1}return!0}function Fb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Kb(a,s){var c=Fb(a);a=0;for(var f;c;){if(c.nodeType===3){if(f=a+c.textContent.length,a<=s&&f>=s)return{node:c,offset:s-a};a=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Fb(c)}}function Vb(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Vb(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function Xb(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=Ws(a.document);s instanceof a.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)a=s.contentWindow;else break;s=Ws(a.document)}return s}function Hh(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var jj=on&&"documentMode"in document&&11>=document.documentMode,ro=null,qh=null,Tl=null,Yh=!1;function Wb(a,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Yh||ro==null||ro!==Ws(f)||(f=ro,"selectionStart"in f&&Hh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Tl&&_l(Tl,f)||(Tl=f,f=pf(qh,"onSelect"),0<f.length&&(s=new eo("onSelect","select",null,s,c),a.push({event:s,listeners:f}),s.target=ro)))}function as(a,s){var c={};return c[a.toLowerCase()]=s.toLowerCase(),c["Webkit"+a]="webkit"+s,c["Moz"+a]="moz"+s,c}var ao={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionrun:as("Transition","TransitionRun"),transitionstart:as("Transition","TransitionStart"),transitioncancel:as("Transition","TransitionCancel"),transitionend:as("Transition","TransitionEnd")},Fh={},Qb={};on&&(Qb=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function is(a){if(Fh[a])return Fh[a];if(!ao[a])return a;var s=ao[a],c;for(c in s)if(s.hasOwnProperty(c)&&c in Qb)return Fh[a]=s[c];return a}var Zb=is("animationend"),Jb=is("animationiteration"),ex=is("animationstart"),Nj=is("transitionrun"),Mj=is("transitionstart"),kj=is("transitioncancel"),tx=is("transitionend"),nx=new Map,Kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kh.push("scrollEnd");function Br(a,s){nx.set(a,s),ya(s,[a])}var rx=new WeakMap;function pr(a,s){if(typeof a=="object"&&a!==null){var c=rx.get(a);return c!==void 0?c:(s={value:a,source:s,stack:pl(s)},rx.set(a,s),s)}return{value:a,source:s,stack:pl(s)}}var mr=[],io=0,Vh=0;function Tu(){for(var a=io,s=Vh=io=0;s<a;){var c=mr[s];mr[s++]=null;var f=mr[s];mr[s++]=null;var g=mr[s];mr[s++]=null;var b=mr[s];if(mr[s++]=null,f!==null&&g!==null){var w=f.pending;w===null?g.next=g:(g.next=w.next,w.next=g),f.pending=g}b!==0&&ax(c,g,b)}}function Du(a,s,c,f){mr[io++]=a,mr[io++]=s,mr[io++]=c,mr[io++]=f,Vh|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function Xh(a,s,c,f){return Du(a,s,c,f),ju(a)}function so(a,s){return Du(a,null,null,s),ju(a)}function ax(a,s,c){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c);for(var g=!1,b=a.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(g=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,g&&s!==null&&(g=31-mn(c),a=b.hiddenUpdates,f=a[g],f===null?a[g]=[s]:f.push(s),s.lane=c|536870912),b):null}function ju(a){if(50<ec)throw ec=0,tm=null,Error(r(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var oo={};function Rj(a,s,c,f){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(a,s,c,f){return new Rj(a,s,c,f)}function Wh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Aa(a,s){var c=a.alternate;return c===null?(c=Wn(a.tag,s,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=s,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,s=a.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function ix(a,s){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,s=c.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function Nu(a,s,c,f,g,b){var w=0;if(f=a,typeof a=="function")Wh(a)&&(w=1);else if(typeof a=="string")w=LN(a,c,ye.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=Wn(31,c,s,g),a.elementType=U,a.lanes=b,a;case S:return ss(c.children,g,b,s);case A:w=8,g|=24;break;case P:return a=Wn(12,c,s,g|2),a.elementType=P,a.lanes=b,a;case j:return a=Wn(13,c,s,g),a.elementType=j,a.lanes=b,a;case D:return a=Wn(19,c,s,g),a.elementType=D,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case _:w=10;break e;case O:w=9;break e;case N:w=11;break e;case R:w=14;break e;case k:w=16,f=null;break e}w=29,c=Error(r(130,a===null?"null":typeof a,"")),f=null}return s=Wn(w,c,s,g),s.elementType=a,s.type=f,s.lanes=b,s}function ss(a,s,c,f){return a=Wn(7,a,f,s),a.lanes=c,a}function Qh(a,s,c){return a=Wn(6,a,null,s),a.lanes=c,a}function Zh(a,s,c){return s=Wn(4,a.children!==null?a.children:[],a.key,s),s.lanes=c,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var lo=[],co=0,Mu=null,ku=0,gr=[],yr=0,os=null,Ca=1,Pa="";function ls(a,s){lo[co++]=ku,lo[co++]=Mu,Mu=a,ku=s}function sx(a,s,c){gr[yr++]=Ca,gr[yr++]=Pa,gr[yr++]=os,os=a;var f=Ca;a=Pa;var g=32-mn(f)-1;f&=~(1<<g),c+=1;var b=32-mn(s)+g;if(30<b){var w=g-g%5;b=(f&(1<<w)-1).toString(32),f>>=w,g-=w,Ca=1<<32-mn(s)+g|c<<g|f,Pa=b+a}else Ca=1<<b|c<<g|f,Pa=a}function Jh(a){a.return!==null&&(ls(a,1),sx(a,1,0))}function ep(a){for(;a===Mu;)Mu=lo[--co],lo[co]=null,ku=lo[--co],lo[co]=null;for(;a===os;)os=gr[--yr],gr[yr]=null,Pa=gr[--yr],gr[yr]=null,Ca=gr[--yr],gr[yr]=null}var jn=null,Pt=null,Ze=!1,cs=null,Zr=!1,tp=Error(r(519));function us(a){var s=Error(r(418,""));throw Nl(pr(s,a)),tp}function ox(a){var s=a.stateNode,c=a.type,f=a.memoizedProps;switch(s[Ct]=a,s[wt]=f,c){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(c=0;c<nc.length;c++)He(nc[c],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),xa(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ml(s);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),Fe(s,f.value,f.defaultValue,f.children),ml(s)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||P1(s.textContent,c)?(f.popover!=null&&(He("beforetoggle",s),He("toggle",s)),f.onScroll!=null&&He("scroll",s),f.onScrollEnd!=null&&He("scrollend",s),f.onClick!=null&&(s.onclick=mf),s=!0):s=!1,s||us(a)}function lx(a){for(jn=a.return;jn;)switch(jn.tag){case 5:case 13:Zr=!1;return;case 27:case 3:Zr=!0;return;default:jn=jn.return}}function Dl(a){if(a!==jn)return!1;if(!Ze)return lx(a),Ze=!0,!1;var s=a.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||ym(a.type,a.memoizedProps)),c=!c),c&&Pt&&us(a),lx(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(s===0){Pt=zr(a.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;a=a.nextSibling}Pt=null}}else s===27?(s=Pt,wi(a.type)?(a=Sm,Sm=null,Pt=a):Pt=s):Pt=jn?zr(a.stateNode.nextSibling):null;return!0}function jl(){Pt=jn=null,Ze=!1}function cx(){var a=cs;return a!==null&&(Gn===null?Gn=a:Gn.push.apply(Gn,a),cs=null),a}function Nl(a){cs===null?cs=[a]:cs.push(a)}var np=K(null),fs=null,Ea=null;function fi(a,s,c){le(np,s._currentValue),s._currentValue=c}function wa(a){a._currentValue=np.current,Y(np)}function rp(a,s,c){for(;a!==null;){var f=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),a===c)break;a=a.return}}function ap(a,s,c,f){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var b=g.dependencies;if(b!==null){var w=g.child;b=b.firstContext;e:for(;b!==null;){var T=b;b=g;for(var M=0;M<s.length;M++)if(T.context===s[M]){b.lanes|=c,T=b.alternate,T!==null&&(T.lanes|=c),rp(b.return,c,a),f||(w=null);break e}b=T.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(r(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),rp(w,c,a),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===a){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function Ml(a,s,c,f){a=null;for(var g=s,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var T=g.type;Xn(g.pendingProps.value,w.value)||(a!==null?a.push(T):a=[T])}}else if(g===be.current){if(w=g.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(lc):a=[lc])}g=g.return}a!==null&&ap(s,a,c,f),s.flags|=262144}function Ru(a){for(a=a.firstContext;a!==null;){if(!Xn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function ds(a){fs=a,Ea=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function xn(a){return ux(fs,a)}function Iu(a,s){return fs===null&&ds(a),ux(a,s)}function ux(a,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Ea===null){if(a===null)throw Error(r(308));Ea=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Ea=Ea.next=s;return c}var Ij=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(c,f){a.push(f)}};this.abort=function(){s.aborted=!0,a.forEach(function(c){return c()})}},Lj=e.unstable_scheduleCallback,$j=e.unstable_NormalPriority,Ht={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ip(){return{controller:new Ij,data:new Map,refCount:0}}function kl(a){a.refCount--,a.refCount===0&&Lj($j,function(){a.controller.abort()})}var Rl=null,sp=0,uo=0,fo=null;function Bj(a,s){if(Rl===null){var c=Rl=[];sp=0,uo=lm(),fo={status:"pending",value:void 0,then:function(f){c.push(f)}}}return sp++,s.then(fx,fx),s}function fx(){if(--sp===0&&Rl!==null){fo!==null&&(fo.status="fulfilled");var a=Rl;Rl=null,uo=0,fo=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function Uj(a,s){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return a.then(function(){f.status="fulfilled",f.value=s;for(var g=0;g<c.length;g++)(0,c[g])(s)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var dx=$.S;$.S=function(a,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Bj(a,s),dx!==null&&dx(a,s)};var hs=K(null);function op(){var a=hs.current;return a!==null?a:ut.pooledCache}function Lu(a,s){s===null?le(hs,hs.current):le(hs,s.pool)}function hx(){var a=op();return a===null?null:{parent:Ht._currentValue,pool:a}}var Il=Error(r(460)),px=Error(r(474)),$u=Error(r(542)),lp={then:function(){}};function mx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Bu(){}function gx(a,s,c){switch(c=a[c],c===void 0?a.push(s):c!==s&&(s.then(Bu,Bu),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,vx(a),a;default:if(typeof s.status=="string")s.then(Bu,Bu);else{if(a=ut,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=s,a.status="pending",a.then(function(f){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=f}},function(f){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,vx(a),a}throw Ll=s,Il}}var Ll=null;function yx(){if(Ll===null)throw Error(r(459));var a=Ll;return Ll=null,a}function vx(a){if(a===Il||a===$u)throw Error(r(483))}var di=!1;function cp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function up(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function hi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function pi(a,s,c){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(Je&2)!==0){var g=f.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),f.pending=s,s=ju(a),ax(a,null,c),s}return Du(a,f,s,c),ju(a)}function $l(a,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=a.pendingLanes,c|=f,s.lanes=c,xt(a,c)}}function fp(a,s){var c=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?g=b=s:b=b.next=s}else g=b=s;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=s:a.next=s,c.lastBaseUpdate=s}var dp=!1;function Bl(){if(dp){var a=fo;if(a!==null)throw a}}function Ul(a,s,c,f){dp=!1;var g=a.updateQueue;di=!1;var b=g.firstBaseUpdate,w=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var M=T,H=M.next;M.next=null,w===null?b=H:w.next=H,w=M;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==w&&(T===null?ne.firstBaseUpdate=H:T.next=H,ne.lastBaseUpdate=M))}if(b!==null){var oe=g.baseState;w=0,ne=H=M=null,T=b;do{var F=T.lane&-536870913,W=F!==T.lane;if(W?(qe&F)===F:(f&F)===F){F!==0&&F===uo&&(dp=!0),ne!==null&&(ne=ne.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ke=a,De=T;F=s;var st=c;switch(De.tag){case 1:if(ke=De.payload,typeof ke=="function"){oe=ke.call(st,oe,F);break e}oe=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=De.payload,F=typeof ke=="function"?ke.call(st,oe,F):ke,F==null)break e;oe=p({},oe,F);break e;case 2:di=!0}}F=T.callback,F!==null&&(a.flags|=64,W&&(a.flags|=8192),W=g.callbacks,W===null?g.callbacks=[F]:W.push(F))}else W={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(H=ne=W,M=oe):ne=ne.next=W,w|=F;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;W=T,T=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);ne===null&&(M=oe),g.baseState=M,g.firstBaseUpdate=H,g.lastBaseUpdate=ne,b===null&&(g.shared.lanes=0),Ai|=w,a.lanes=w,a.memoizedState=oe}}function bx(a,s){if(typeof a!="function")throw Error(r(191,a));a.call(s)}function xx(a,s){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)bx(c[a],s)}var ho=K(null),Uu=K(0);function Sx(a,s){a=Ma,le(Uu,a),le(ho,s),Ma=a|s.baseLanes}function hp(){le(Uu,Ma),le(ho,ho.current)}function pp(){Ma=Uu.current,Y(ho),Y(Uu)}var mi=0,$e=null,at=null,It=null,zu=!1,po=!1,ps=!1,Gu=0,zl=0,mo=null,zj=0;function Dt(){throw Error(r(321))}function mp(a,s){if(s===null)return!1;for(var c=0;c<s.length&&c<a.length;c++)if(!Xn(a[c],s[c]))return!1;return!0}function gp(a,s,c,f,g,b){return mi=b,$e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=a===null||a.memoizedState===null?aS:iS,ps=!1,b=c(f,g),ps=!1,po&&(b=Cx(s,c,f,g)),Ax(a),b}function Ax(a){$.H=Vu;var s=at!==null&&at.next!==null;if(mi=0,It=at=$e=null,zu=!1,zl=0,mo=null,s)throw Error(r(300));a===null||Qt||(a=a.dependencies,a!==null&&Ru(a)&&(Qt=!0))}function Cx(a,s,c,f){$e=a;var g=0;do{if(po&&(mo=null),zl=0,po=!1,25<=g)throw Error(r(301));if(g+=1,It=at=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=Vj,b=s(c,f)}while(po);return b}function Gj(){var a=$.H,s=a.useState()[0];return s=typeof s.then=="function"?Gl(s):s,a=a.useState()[0],(at!==null?at.memoizedState:null)!==a&&($e.flags|=1024),s}function yp(){var a=Gu!==0;return Gu=0,a}function vp(a,s,c){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~c}function bp(a){if(zu){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}zu=!1}mi=0,It=at=$e=null,po=!1,zl=Gu=0,mo=null}function Un(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?$e.memoizedState=It=a:It=It.next=a,It}function Lt(){if(at===null){var a=$e.alternate;a=a!==null?a.memoizedState:null}else a=at.next;var s=It===null?$e.memoizedState:It.next;if(s!==null)It=s,at=a;else{if(a===null)throw $e.alternate===null?Error(r(467)):Error(r(310));at=a,a={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},It===null?$e.memoizedState=It=a:It=It.next=a}return It}function xp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(a){var s=zl;return zl+=1,mo===null&&(mo=[]),a=gx(mo,a,s),s=$e,(It===null?s.memoizedState:It.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?aS:iS),a}function Hu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Gl(a);if(a.$$typeof===_)return xn(a)}throw Error(r(438,String(a)))}function Sp(a){var s=null,c=$e.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=$e.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=xp(),$e.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(a),f=0;f<a;f++)c[f]=Z;return s.index++,c}function Oa(a,s){return typeof s=="function"?s(a):s}function qu(a){var s=Lt();return Ap(s,at,a)}function Ap(a,s,c){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=a.baseQueue,b=f.pending;if(b!==null){if(g!==null){var w=g.next;g.next=b.next,b.next=w}s.baseQueue=g=b,f.pending=null}if(b=a.baseState,g===null)a.memoizedState=b;else{s=g.next;var T=w=null,M=null,H=s,ne=!1;do{var oe=H.lane&-536870913;if(oe!==H.lane?(qe&oe)===oe:(mi&oe)===oe){var F=H.revertLane;if(F===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),oe===uo&&(ne=!0);else if((mi&F)===F){H=H.next,F===uo&&(ne=!0);continue}else oe={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},M===null?(T=M=oe,w=b):M=M.next=oe,$e.lanes|=F,Ai|=F;oe=H.action,ps&&c(b,oe),b=H.hasEagerState?H.eagerState:c(b,oe)}else F={lane:oe,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},M===null?(T=M=F,w=b):M=M.next=F,$e.lanes|=oe,Ai|=oe;H=H.next}while(H!==null&&H!==s);if(M===null?w=b:M.next=T,!Xn(b,a.memoizedState)&&(Qt=!0,ne&&(c=fo,c!==null)))throw c;a.memoizedState=b,a.baseState=w,a.baseQueue=M,f.lastRenderedState=b}return g===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function Cp(a){var s=Lt(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=c.dispatch,g=c.pending,b=s.memoizedState;if(g!==null){c.pending=null;var w=g=g.next;do b=a(b,w.action),w=w.next;while(w!==g);Xn(b,s.memoizedState)||(Qt=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),c.lastRenderedState=b}return[b,f]}function Px(a,s,c){var f=$e,g=Lt(),b=Ze;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=s();var w=!Xn((at||g).memoizedState,c);w&&(g.memoizedState=c,Qt=!0),g=g.queue;var T=Ox.bind(null,f,g,a);if(Hl(2048,8,T,[a]),g.getSnapshot!==s||w||It!==null&&It.memoizedState.tag&1){if(f.flags|=2048,go(9,Yu(),wx.bind(null,f,g,c,s),null),ut===null)throw Error(r(349));b||(mi&124)!==0||Ex(f,s,c)}return c}function Ex(a,s,c){a.flags|=16384,a={getSnapshot:s,value:c},s=$e.updateQueue,s===null?(s=xp(),$e.updateQueue=s,s.stores=[a]):(c=s.stores,c===null?s.stores=[a]:c.push(a))}function wx(a,s,c,f){s.value=c,s.getSnapshot=f,_x(s)&&Tx(a)}function Ox(a,s,c){return c(function(){_x(s)&&Tx(a)})}function _x(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!Xn(a,c)}catch{return!0}}function Tx(a){var s=so(a,2);s!==null&&tr(s,a,2)}function Pp(a){var s=Un();if(typeof a=="function"){var c=a;if(a=c(),ps){kr(!0);try{c()}finally{kr(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:a},s}function Dx(a,s,c,f){return a.baseState=c,Ap(a,at,typeof f=="function"?f:Oa)}function Hj(a,s,c,f,g){if(Ku(a))throw Error(r(485));if(a=s.action,a!==null){var b={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};$.T!==null?c(!0):b.isTransition=!1,f(b),c=s.pending,c===null?(b.next=s.pending=b,jx(s,b)):(b.next=c.next,s.pending=c.next=b)}}function jx(a,s){var c=s.action,f=s.payload,g=a.state;if(s.isTransition){var b=$.T,w={};$.T=w;try{var T=c(g,f),M=$.S;M!==null&&M(w,T),Nx(a,s,T)}catch(H){Ep(a,s,H)}finally{$.T=b}}else try{b=c(g,f),Nx(a,s,b)}catch(H){Ep(a,s,H)}}function Nx(a,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Mx(a,s,f)},function(f){return Ep(a,s,f)}):Mx(a,s,c)}function Mx(a,s,c){s.status="fulfilled",s.value=c,kx(s),a.state=c,s=a.pending,s!==null&&(c=s.next,c===s?a.pending=null:(c=c.next,s.next=c,jx(a,c)))}function Ep(a,s,c){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,kx(s),s=s.next;while(s!==f)}a.action=null}function kx(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function Rx(a,s){return s}function Ix(a,s){if(Ze){var c=ut.formState;if(c!==null){e:{var f=$e;if(Ze){if(Pt){t:{for(var g=Pt,b=Zr;g.nodeType!==8;){if(!b){g=null;break t}if(g=zr(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Pt=zr(g.nextSibling),f=g.data==="F!";break e}}us(f)}f=!1}f&&(s=c[0])}}return c=Un(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rx,lastRenderedState:s},c.queue=f,c=tS.bind(null,$e,f),f.dispatch=c,f=Pp(!1),b=Dp.bind(null,$e,!1,f.queue),f=Un(),g={state:s,dispatch:null,action:a,pending:null},f.queue=g,c=Hj.bind(null,$e,g,b,c),g.dispatch=c,f.memoizedState=a,[s,c,!1]}function Lx(a){var s=Lt();return $x(s,at,a)}function $x(a,s,c){if(s=Ap(a,s,Rx)[0],a=qu(Oa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Gl(s)}catch(w){throw w===Il?$u:w}else f=s;s=Lt();var g=s.queue,b=g.dispatch;return c!==s.memoizedState&&($e.flags|=2048,go(9,Yu(),qj.bind(null,g,c),null)),[f,b,a]}function qj(a,s){a.action=s}function Bx(a){var s=Lt(),c=at;if(c!==null)return $x(s,c,a);Lt(),s=s.memoizedState,c=Lt();var f=c.queue.dispatch;return c.memoizedState=a,[s,f,!1]}function go(a,s,c,f){return a={tag:a,create:c,deps:f,inst:s,next:null},s=$e.updateQueue,s===null&&(s=xp(),$e.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=a.next=a:(f=c.next,c.next=a,a.next=f,s.lastEffect=a),a}function Yu(){return{destroy:void 0,resource:void 0}}function Ux(){return Lt().memoizedState}function Fu(a,s,c,f){var g=Un();f=f===void 0?null:f,$e.flags|=a,g.memoizedState=go(1|s,Yu(),c,f)}function Hl(a,s,c,f){var g=Lt();f=f===void 0?null:f;var b=g.memoizedState.inst;at!==null&&f!==null&&mp(f,at.memoizedState.deps)?g.memoizedState=go(s,b,c,f):($e.flags|=a,g.memoizedState=go(1|s,b,c,f))}function zx(a,s){Fu(8390656,8,a,s)}function Gx(a,s){Hl(2048,8,a,s)}function Hx(a,s){return Hl(4,2,a,s)}function qx(a,s){return Hl(4,4,a,s)}function Yx(a,s){if(typeof s=="function"){a=a();var c=s(a);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function Fx(a,s,c){c=c!=null?c.concat([a]):null,Hl(4,4,Yx.bind(null,s,a),c)}function wp(){}function Kx(a,s){var c=Lt();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&mp(s,f[1])?f[0]:(c.memoizedState=[a,s],a)}function Vx(a,s){var c=Lt();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&mp(s,f[1]))return f[0];if(f=a(),ps){kr(!0);try{a()}finally{kr(!1)}}return c.memoizedState=[f,s],f}function Op(a,s,c){return c===void 0||(mi&1073741824)!==0?a.memoizedState=s:(a.memoizedState=c,a=QS(),$e.lanes|=a,Ai|=a,c)}function Xx(a,s,c,f){return Xn(c,s)?c:ho.current!==null?(a=Op(a,c,f),Xn(a,s)||(Qt=!0),a):(mi&42)===0?(Qt=!0,a.memoizedState=c):(a=QS(),$e.lanes|=a,Ai|=a,s)}function Wx(a,s,c,f,g){var b=ee.p;ee.p=b!==0&&8>b?b:8;var w=$.T,T={};$.T=T,Dp(a,!1,s,c);try{var M=g(),H=$.S;if(H!==null&&H(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=Uj(M,f);ql(a,s,ne,er(a))}else ql(a,s,f,er(a))}catch(oe){ql(a,s,{then:function(){},status:"rejected",reason:oe},er())}finally{ee.p=b,$.T=w}}function Yj(){}function _p(a,s,c,f){if(a.tag!==5)throw Error(r(476));var g=Qx(a).queue;Wx(a,g,s,pe,c===null?Yj:function(){return Zx(a),c(f)})}function Qx(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:pe},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:c},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function Zx(a){var s=Qx(a).next.queue;ql(a,s,{},er())}function Tp(){return xn(lc)}function Jx(){return Lt().memoizedState}function eS(){return Lt().memoizedState}function Fj(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var c=er();a=hi(c);var f=pi(s,a,c);f!==null&&(tr(f,s,c),$l(f,s,c)),s={cache:ip()},a.payload=s;return}s=s.return}}function Kj(a,s,c){var f=er();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Ku(a)?nS(s,c):(c=Xh(a,s,c,f),c!==null&&(tr(c,a,f),rS(c,s,f)))}function tS(a,s,c){var f=er();ql(a,s,c,f)}function ql(a,s,c,f){var g={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ku(a))nS(s,g);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var w=s.lastRenderedState,T=b(w,c);if(g.hasEagerState=!0,g.eagerState=T,Xn(T,w))return Du(a,s,g,0),ut===null&&Tu(),!1}catch{}finally{}if(c=Xh(a,s,g,f),c!==null)return tr(c,a,f),rS(c,s,f),!0}return!1}function Dp(a,s,c,f){if(f={lane:2,revertLane:lm(),action:f,hasEagerState:!1,eagerState:null,next:null},Ku(a)){if(s)throw Error(r(479))}else s=Xh(a,c,f,2),s!==null&&tr(s,a,2)}function Ku(a){var s=a.alternate;return a===$e||s!==null&&s===$e}function nS(a,s){po=zu=!0;var c=a.pending;c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s}function rS(a,s,c){if((c&4194048)!==0){var f=s.lanes;f&=a.pendingLanes,c|=f,s.lanes=c,xt(a,c)}}var Vu={readContext:xn,use:Hu,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},aS={readContext:xn,use:Hu,useCallback:function(a,s){return Un().memoizedState=[a,s===void 0?null:s],a},useContext:xn,useEffect:zx,useImperativeHandle:function(a,s,c){c=c!=null?c.concat([a]):null,Fu(4194308,4,Yx.bind(null,s,a),c)},useLayoutEffect:function(a,s){return Fu(4194308,4,a,s)},useInsertionEffect:function(a,s){Fu(4,2,a,s)},useMemo:function(a,s){var c=Un();s=s===void 0?null:s;var f=a();if(ps){kr(!0);try{a()}finally{kr(!1)}}return c.memoizedState=[f,s],f},useReducer:function(a,s,c){var f=Un();if(c!==void 0){var g=c(s);if(ps){kr(!0);try{c(s)}finally{kr(!1)}}}else g=s;return f.memoizedState=f.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},f.queue=a,a=a.dispatch=Kj.bind(null,$e,a),[f.memoizedState,a]},useRef:function(a){var s=Un();return a={current:a},s.memoizedState=a},useState:function(a){a=Pp(a);var s=a.queue,c=tS.bind(null,$e,s);return s.dispatch=c,[a.memoizedState,c]},useDebugValue:wp,useDeferredValue:function(a,s){var c=Un();return Op(c,a,s)},useTransition:function(){var a=Pp(!1);return a=Wx.bind(null,$e,a.queue,!0,!1),Un().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,c){var f=$e,g=Un();if(Ze){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),ut===null)throw Error(r(349));(qe&124)!==0||Ex(f,s,c)}g.memoizedState=c;var b={value:c,getSnapshot:s};return g.queue=b,zx(Ox.bind(null,f,b,a),[a]),f.flags|=2048,go(9,Yu(),wx.bind(null,f,b,c,s),null),c},useId:function(){var a=Un(),s=ut.identifierPrefix;if(Ze){var c=Pa,f=Ca;c=(f&~(1<<32-mn(f)-1)).toString(32)+c,s="«"+s+"R"+c,c=Gu++,0<c&&(s+="H"+c.toString(32)),s+="»"}else c=zj++,s="«"+s+"r"+c.toString(32)+"»";return a.memoizedState=s},useHostTransitionStatus:Tp,useFormState:Ix,useActionState:Ix,useOptimistic:function(a){var s=Un();s.memoizedState=s.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Dp.bind(null,$e,!0,c),c.dispatch=s,[a,s]},useMemoCache:Sp,useCacheRefresh:function(){return Un().memoizedState=Fj.bind(null,$e)}},iS={readContext:xn,use:Hu,useCallback:Kx,useContext:xn,useEffect:Gx,useImperativeHandle:Fx,useInsertionEffect:Hx,useLayoutEffect:qx,useMemo:Vx,useReducer:qu,useRef:Ux,useState:function(){return qu(Oa)},useDebugValue:wp,useDeferredValue:function(a,s){var c=Lt();return Xx(c,at.memoizedState,a,s)},useTransition:function(){var a=qu(Oa)[0],s=Lt().memoizedState;return[typeof a=="boolean"?a:Gl(a),s]},useSyncExternalStore:Px,useId:Jx,useHostTransitionStatus:Tp,useFormState:Lx,useActionState:Lx,useOptimistic:function(a,s){var c=Lt();return Dx(c,at,a,s)},useMemoCache:Sp,useCacheRefresh:eS},Vj={readContext:xn,use:Hu,useCallback:Kx,useContext:xn,useEffect:Gx,useImperativeHandle:Fx,useInsertionEffect:Hx,useLayoutEffect:qx,useMemo:Vx,useReducer:Cp,useRef:Ux,useState:function(){return Cp(Oa)},useDebugValue:wp,useDeferredValue:function(a,s){var c=Lt();return at===null?Op(c,a,s):Xx(c,at.memoizedState,a,s)},useTransition:function(){var a=Cp(Oa)[0],s=Lt().memoizedState;return[typeof a=="boolean"?a:Gl(a),s]},useSyncExternalStore:Px,useId:Jx,useHostTransitionStatus:Tp,useFormState:Bx,useActionState:Bx,useOptimistic:function(a,s){var c=Lt();return at!==null?Dx(c,at,a,s):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Sp,useCacheRefresh:eS},yo=null,Yl=0;function Xu(a){var s=Yl;return Yl+=1,yo===null&&(yo=[]),gx(yo,a,s)}function Fl(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function Wu(a,s){throw s.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(s),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function sS(a){var s=a._init;return s(a._payload)}function oS(a){function s(B,L){if(a){var G=B.deletions;G===null?(B.deletions=[L],B.flags|=16):G.push(L)}}function c(B,L){if(!a)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function f(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function g(B,L){return B=Aa(B,L),B.index=0,B.sibling=null,B}function b(B,L,G){return B.index=G,a?(G=B.alternate,G!==null?(G=G.index,G<L?(B.flags|=67108866,L):G):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function w(B){return a&&B.alternate===null&&(B.flags|=67108866),B}function T(B,L,G,ae){return L===null||L.tag!==6?(L=Qh(G,B.mode,ae),L.return=B,L):(L=g(L,G),L.return=B,L)}function M(B,L,G,ae){var Ce=G.type;return Ce===S?ne(B,L,G.props.children,ae,G.key):L!==null&&(L.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===k&&sS(Ce)===L.type)?(L=g(L,G.props),Fl(L,G),L.return=B,L):(L=Nu(G.type,G.key,G.props,null,B.mode,ae),Fl(L,G),L.return=B,L)}function H(B,L,G,ae){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=Zh(G,B.mode,ae),L.return=B,L):(L=g(L,G.children||[]),L.return=B,L)}function ne(B,L,G,ae,Ce){return L===null||L.tag!==7?(L=ss(G,B.mode,ae,Ce),L.return=B,L):(L=g(L,G),L.return=B,L)}function oe(B,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Qh(""+L,B.mode,G),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case y:return G=Nu(L.type,L.key,L.props,null,B.mode,G),Fl(G,L),G.return=B,G;case x:return L=Zh(L,B.mode,G),L.return=B,L;case k:var ae=L._init;return L=ae(L._payload),oe(B,L,G)}if(te(L)||J(L))return L=ss(L,B.mode,G,null),L.return=B,L;if(typeof L.then=="function")return oe(B,Xu(L),G);if(L.$$typeof===_)return oe(B,Iu(B,L),G);Wu(B,L)}return null}function F(B,L,G,ae){var Ce=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ce!==null?null:T(B,L,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return G.key===Ce?M(B,L,G,ae):null;case x:return G.key===Ce?H(B,L,G,ae):null;case k:return Ce=G._init,G=Ce(G._payload),F(B,L,G,ae)}if(te(G)||J(G))return Ce!==null?null:ne(B,L,G,ae,null);if(typeof G.then=="function")return F(B,L,Xu(G),ae);if(G.$$typeof===_)return F(B,L,Iu(B,G),ae);Wu(B,G)}return null}function W(B,L,G,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return B=B.get(G)||null,T(L,B,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return B=B.get(ae.key===null?G:ae.key)||null,M(L,B,ae,Ce);case x:return B=B.get(ae.key===null?G:ae.key)||null,H(L,B,ae,Ce);case k:var Ue=ae._init;return ae=Ue(ae._payload),W(B,L,G,ae,Ce)}if(te(ae)||J(ae))return B=B.get(G)||null,ne(L,B,ae,Ce,null);if(typeof ae.then=="function")return W(B,L,G,Xu(ae),Ce);if(ae.$$typeof===_)return W(B,L,G,Iu(L,ae),Ce);Wu(L,ae)}return null}function ke(B,L,G,ae){for(var Ce=null,Ue=null,Oe=L,Ne=L=0,Jt=null;Oe!==null&&Ne<G.length;Ne++){Oe.index>Ne?(Jt=Oe,Oe=null):Jt=Oe.sibling;var Ke=F(B,Oe,G[Ne],ae);if(Ke===null){Oe===null&&(Oe=Jt);break}a&&Oe&&Ke.alternate===null&&s(B,Oe),L=b(Ke,L,Ne),Ue===null?Ce=Ke:Ue.sibling=Ke,Ue=Ke,Oe=Jt}if(Ne===G.length)return c(B,Oe),Ze&&ls(B,Ne),Ce;if(Oe===null){for(;Ne<G.length;Ne++)Oe=oe(B,G[Ne],ae),Oe!==null&&(L=b(Oe,L,Ne),Ue===null?Ce=Oe:Ue.sibling=Oe,Ue=Oe);return Ze&&ls(B,Ne),Ce}for(Oe=f(Oe);Ne<G.length;Ne++)Jt=W(Oe,B,Ne,G[Ne],ae),Jt!==null&&(a&&Jt.alternate!==null&&Oe.delete(Jt.key===null?Ne:Jt.key),L=b(Jt,L,Ne),Ue===null?Ce=Jt:Ue.sibling=Jt,Ue=Jt);return a&&Oe.forEach(function(ji){return s(B,ji)}),Ze&&ls(B,Ne),Ce}function De(B,L,G,ae){if(G==null)throw Error(r(151));for(var Ce=null,Ue=null,Oe=L,Ne=L=0,Jt=null,Ke=G.next();Oe!==null&&!Ke.done;Ne++,Ke=G.next()){Oe.index>Ne?(Jt=Oe,Oe=null):Jt=Oe.sibling;var ji=F(B,Oe,Ke.value,ae);if(ji===null){Oe===null&&(Oe=Jt);break}a&&Oe&&ji.alternate===null&&s(B,Oe),L=b(ji,L,Ne),Ue===null?Ce=ji:Ue.sibling=ji,Ue=ji,Oe=Jt}if(Ke.done)return c(B,Oe),Ze&&ls(B,Ne),Ce;if(Oe===null){for(;!Ke.done;Ne++,Ke=G.next())Ke=oe(B,Ke.value,ae),Ke!==null&&(L=b(Ke,L,Ne),Ue===null?Ce=Ke:Ue.sibling=Ke,Ue=Ke);return Ze&&ls(B,Ne),Ce}for(Oe=f(Oe);!Ke.done;Ne++,Ke=G.next())Ke=W(Oe,B,Ne,Ke.value,ae),Ke!==null&&(a&&Ke.alternate!==null&&Oe.delete(Ke.key===null?Ne:Ke.key),L=b(Ke,L,Ne),Ue===null?Ce=Ke:Ue.sibling=Ke,Ue=Ke);return a&&Oe.forEach(function(XN){return s(B,XN)}),Ze&&ls(B,Ne),Ce}function st(B,L,G,ae){if(typeof G=="object"&&G!==null&&G.type===S&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case y:e:{for(var Ce=G.key;L!==null;){if(L.key===Ce){if(Ce=G.type,Ce===S){if(L.tag===7){c(B,L.sibling),ae=g(L,G.props.children),ae.return=B,B=ae;break e}}else if(L.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===k&&sS(Ce)===L.type){c(B,L.sibling),ae=g(L,G.props),Fl(ae,G),ae.return=B,B=ae;break e}c(B,L);break}else s(B,L);L=L.sibling}G.type===S?(ae=ss(G.props.children,B.mode,ae,G.key),ae.return=B,B=ae):(ae=Nu(G.type,G.key,G.props,null,B.mode,ae),Fl(ae,G),ae.return=B,B=ae)}return w(B);case x:e:{for(Ce=G.key;L!==null;){if(L.key===Ce)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){c(B,L.sibling),ae=g(L,G.children||[]),ae.return=B,B=ae;break e}else{c(B,L);break}else s(B,L);L=L.sibling}ae=Zh(G,B.mode,ae),ae.return=B,B=ae}return w(B);case k:return Ce=G._init,G=Ce(G._payload),st(B,L,G,ae)}if(te(G))return ke(B,L,G,ae);if(J(G)){if(Ce=J(G),typeof Ce!="function")throw Error(r(150));return G=Ce.call(G),De(B,L,G,ae)}if(typeof G.then=="function")return st(B,L,Xu(G),ae);if(G.$$typeof===_)return st(B,L,Iu(B,G),ae);Wu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(c(B,L.sibling),ae=g(L,G),ae.return=B,B=ae):(c(B,L),ae=Qh(G,B.mode,ae),ae.return=B,B=ae),w(B)):c(B,L)}return function(B,L,G,ae){try{Yl=0;var Ce=st(B,L,G,ae);return yo=null,Ce}catch(Oe){if(Oe===Il||Oe===$u)throw Oe;var Ue=Wn(29,Oe,null,B.mode);return Ue.lanes=ae,Ue.return=B,Ue}finally{}}}var vo=oS(!0),lS=oS(!1),vr=K(null),Jr=null;function gi(a){var s=a.alternate;le(qt,qt.current&1),le(vr,a),Jr===null&&(s===null||ho.current!==null||s.memoizedState!==null)&&(Jr=a)}function cS(a){if(a.tag===22){if(le(qt,qt.current),le(vr,a),Jr===null){var s=a.alternate;s!==null&&s.memoizedState!==null&&(Jr=a)}}else yi()}function yi(){le(qt,qt.current),le(vr,vr.current)}function _a(a){Y(vr),Jr===a&&(Jr=null),Y(qt)}var qt=K(0);function Qu(a){for(var s=a;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||xm(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function jp(a,s,c,f){s=a.memoizedState,c=c(f,s),c=c==null?s:p({},s,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Np={enqueueSetState:function(a,s,c){a=a._reactInternals;var f=er(),g=hi(f);g.payload=s,c!=null&&(g.callback=c),s=pi(a,g,f),s!==null&&(tr(s,a,f),$l(s,a,f))},enqueueReplaceState:function(a,s,c){a=a._reactInternals;var f=er(),g=hi(f);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=pi(a,g,f),s!==null&&(tr(s,a,f),$l(s,a,f))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var c=er(),f=hi(c);f.tag=2,s!=null&&(f.callback=s),s=pi(a,f,c),s!==null&&(tr(s,a,c),$l(s,a,c))}};function uS(a,s,c,f,g,b,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,b,w):s.prototype&&s.prototype.isPureReactComponent?!_l(c,f)||!_l(g,b):!0}function fS(a,s,c,f){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==a&&Np.enqueueReplaceState(s,s.state,null)}function ms(a,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(a=a.defaultProps){c===s&&(c=p({},c));for(var g in a)c[g]===void 0&&(c[g]=a[g])}return c}var Zu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function dS(a){Zu(a)}function hS(a){console.error(a)}function pS(a){Zu(a)}function Ju(a,s){try{var c=a.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function mS(a,s,c){try{var f=a.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Mp(a,s,c){return c=hi(c),c.tag=3,c.payload={element:null},c.callback=function(){Ju(a,s)},c}function gS(a){return a=hi(a),a.tag=3,a}function yS(a,s,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;a.payload=function(){return g(b)},a.callback=function(){mS(s,c,f)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){mS(s,c,f),typeof g!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var T=f.stack;this.componentDidCatch(f.value,{componentStack:T!==null?T:""})})}function Xj(a,s,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&Ml(s,c,g,!0),c=vr.current,c!==null){switch(c.tag){case 13:return Jr===null?rm():c.alternate===null&&Et===0&&(Et=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===lp?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),im(a,f,g)),!1;case 22:return c.flags|=65536,f===lp?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),im(a,f,g)),!1}throw Error(r(435,c.tag))}return im(a,f,g),rm(),!1}if(Ze)return s=vr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,f!==tp&&(a=Error(r(422),{cause:f}),Nl(pr(a,c)))):(f!==tp&&(s=Error(r(423),{cause:f}),Nl(pr(s,c))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,f=pr(f,c),g=Mp(a.stateNode,f,g),fp(a,g),Et!==4&&(Et=2)),!1;var b=Error(r(520),{cause:f});if(b=pr(b,c),Jl===null?Jl=[b]:Jl.push(b),Et!==4&&(Et=2),s===null)return!0;f=pr(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,a=g&-g,c.lanes|=a,a=Mp(c.stateNode,f,a),fp(c,a),!1;case 1:if(s=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ci===null||!Ci.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=gS(g),yS(g,a,c,f),fp(c,g),!1}c=c.return}while(c!==null);return!1}var vS=Error(r(461)),Qt=!1;function cn(a,s,c,f){s.child=a===null?lS(s,null,c,f):vo(s,a.child,c,f)}function bS(a,s,c,f,g){c=c.render;var b=s.ref;if("ref"in f){var w={};for(var T in f)T!=="ref"&&(w[T]=f[T])}else w=f;return ds(s),f=gp(a,s,c,w,b,g),T=yp(),a!==null&&!Qt?(vp(a,s,g),Ta(a,s,g)):(Ze&&T&&Jh(s),s.flags|=1,cn(a,s,f,g),s.child)}function xS(a,s,c,f,g){if(a===null){var b=c.type;return typeof b=="function"&&!Wh(b)&&b.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=b,SS(a,s,b,f,g)):(a=Nu(c.type,null,f,s,s.mode,g),a.ref=s.ref,a.return=s,s.child=a)}if(b=a.child,!zp(a,g)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:_l,c(w,f)&&a.ref===s.ref)return Ta(a,s,g)}return s.flags|=1,a=Aa(b,f),a.ref=s.ref,a.return=s,s.child=a}function SS(a,s,c,f,g){if(a!==null){var b=a.memoizedProps;if(_l(b,f)&&a.ref===s.ref)if(Qt=!1,s.pendingProps=f=b,zp(a,g))(a.flags&131072)!==0&&(Qt=!0);else return s.lanes=a.lanes,Ta(a,s,g)}return kp(a,s,c,f,g)}function AS(a,s,c){var f=s.pendingProps,g=f.children,b=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((s.flags&128)!==0){if(f=b!==null?b.baseLanes|c:c,a!==null){for(g=s.child=a.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;s.childLanes=b&~f}else s.childLanes=0,s.child=null;return CS(a,s,f,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&Lu(s,b!==null?b.cachePool:null),b!==null?Sx(s,b):hp(),cS(s);else return s.lanes=s.childLanes=536870912,CS(a,s,b!==null?b.baseLanes|c:c,c)}else b!==null?(Lu(s,b.cachePool),Sx(s,b),yi(),s.memoizedState=null):(a!==null&&Lu(s,null),hp(),yi());return cn(a,s,g,c),s.child}function CS(a,s,c,f){var g=op();return g=g===null?null:{parent:Ht._currentValue,pool:g},s.memoizedState={baseLanes:c,cachePool:g},a!==null&&Lu(s,null),hp(),cS(s),a!==null&&Ml(a,s,f,!0),null}function ef(a,s){var c=s.ref;if(c===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(s.flags|=4194816)}}function kp(a,s,c,f,g){return ds(s),c=gp(a,s,c,f,void 0,g),f=yp(),a!==null&&!Qt?(vp(a,s,g),Ta(a,s,g)):(Ze&&f&&Jh(s),s.flags|=1,cn(a,s,c,g),s.child)}function PS(a,s,c,f,g,b){return ds(s),s.updateQueue=null,c=Cx(s,f,c,g),Ax(a),f=yp(),a!==null&&!Qt?(vp(a,s,b),Ta(a,s,b)):(Ze&&f&&Jh(s),s.flags|=1,cn(a,s,c,b),s.child)}function ES(a,s,c,f,g){if(ds(s),s.stateNode===null){var b=oo,w=c.contextType;typeof w=="object"&&w!==null&&(b=xn(w)),b=new c(f,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Np,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=f,b.state=s.memoizedState,b.refs={},cp(s),w=c.contextType,b.context=typeof w=="object"&&w!==null?xn(w):oo,b.state=s.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(jp(s,c,w,f),b.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&Np.enqueueReplaceState(b,b.state,null),Ul(s,f,b,g),Bl(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(a===null){b=s.stateNode;var T=s.memoizedProps,M=ms(c,T);b.props=M;var H=b.context,ne=c.contextType;w=oo,typeof ne=="object"&&ne!==null&&(w=xn(ne));var oe=c.getDerivedStateFromProps;ne=typeof oe=="function"||typeof b.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,ne||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T||H!==w)&&fS(s,b,f,w),di=!1;var F=s.memoizedState;b.state=F,Ul(s,f,b,g),Bl(),H=s.memoizedState,T||F!==H||di?(typeof oe=="function"&&(jp(s,c,oe,f),H=s.memoizedState),(M=di||uS(s,c,M,f,F,H,w))?(ne||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=H),b.props=f,b.state=H,b.context=w,f=M):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{b=s.stateNode,up(a,s),w=s.memoizedProps,ne=ms(c,w),b.props=ne,oe=s.pendingProps,F=b.context,H=c.contextType,M=oo,typeof H=="object"&&H!==null&&(M=xn(H)),T=c.getDerivedStateFromProps,(H=typeof T=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==oe||F!==M)&&fS(s,b,f,M),di=!1,F=s.memoizedState,b.state=F,Ul(s,f,b,g),Bl();var W=s.memoizedState;w!==oe||F!==W||di||a!==null&&a.dependencies!==null&&Ru(a.dependencies)?(typeof T=="function"&&(jp(s,c,T,f),W=s.memoizedState),(ne=di||uS(s,c,ne,f,F,W,M)||a!==null&&a.dependencies!==null&&Ru(a.dependencies))?(H||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,W,M),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,W,M)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=W),b.props=f,b.state=W,b.context=M,f=ne):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&F===a.memoizedState||(s.flags|=1024),f=!1)}return b=f,ef(a,s),f=(s.flags&128)!==0,b||f?(b=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,a!==null&&f?(s.child=vo(s,a.child,null,g),s.child=vo(s,null,c,g)):cn(a,s,c,g),s.memoizedState=b.state,a=s.child):a=Ta(a,s,g),a}function wS(a,s,c,f){return jl(),s.flags|=256,cn(a,s,c,f),s.child}var Rp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ip(a){return{baseLanes:a,cachePool:hx()}}function Lp(a,s,c){return a=a!==null?a.childLanes&~c:0,s&&(a|=br),a}function OS(a,s,c){var f=s.pendingProps,g=!1,b=(s.flags&128)!==0,w;if((w=b)||(w=a!==null&&a.memoizedState===null?!1:(qt.current&2)!==0),w&&(g=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,a===null){if(Ze){if(g?gi(s):yi(),Ze){var T=Pt,M;if(M=T){e:{for(M=T,T=Zr;M.nodeType!==8;){if(!T){T=null;break e}if(M=zr(M.nextSibling),M===null){T=null;break e}}T=M}T!==null?(s.memoizedState={dehydrated:T,treeContext:os!==null?{id:Ca,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},M=Wn(18,null,null,0),M.stateNode=T,M.return=s,s.child=M,jn=s,Pt=null,M=!0):M=!1}M||us(s)}if(T=s.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return xm(T)?s.lanes=32:s.lanes=536870912,null;_a(s)}return T=f.children,f=f.fallback,g?(yi(),g=s.mode,T=tf({mode:"hidden",children:T},g),f=ss(f,g,c,null),T.return=s,f.return=s,T.sibling=f,s.child=T,g=s.child,g.memoizedState=Ip(c),g.childLanes=Lp(a,w,c),s.memoizedState=Rp,f):(gi(s),$p(s,T))}if(M=a.memoizedState,M!==null&&(T=M.dehydrated,T!==null)){if(b)s.flags&256?(gi(s),s.flags&=-257,s=Bp(a,s,c)):s.memoizedState!==null?(yi(),s.child=a.child,s.flags|=128,s=null):(yi(),g=f.fallback,T=s.mode,f=tf({mode:"visible",children:f.children},T),g=ss(g,T,c,null),g.flags|=2,f.return=s,g.return=s,f.sibling=g,s.child=f,vo(s,a.child,null,c),f=s.child,f.memoizedState=Ip(c),f.childLanes=Lp(a,w,c),s.memoizedState=Rp,s=g);else if(gi(s),xm(T)){if(w=T.nextSibling&&T.nextSibling.dataset,w)var H=w.dgst;w=H,f=Error(r(419)),f.stack="",f.digest=w,Nl({value:f,source:null,stack:null}),s=Bp(a,s,c)}else if(Qt||Ml(a,s,c,!1),w=(c&a.childLanes)!==0,Qt||w){if(w=ut,w!==null&&(f=c&-c,f=(f&42)!==0?1:Rn(f),f=(f&(w.suspendedLanes|c))!==0?0:f,f!==0&&f!==M.retryLane))throw M.retryLane=f,so(a,f),tr(w,a,f),vS;T.data==="$?"||rm(),s=Bp(a,s,c)}else T.data==="$?"?(s.flags|=192,s.child=a.child,s=null):(a=M.treeContext,Pt=zr(T.nextSibling),jn=s,Ze=!0,cs=null,Zr=!1,a!==null&&(gr[yr++]=Ca,gr[yr++]=Pa,gr[yr++]=os,Ca=a.id,Pa=a.overflow,os=s),s=$p(s,f.children),s.flags|=4096);return s}return g?(yi(),g=f.fallback,T=s.mode,M=a.child,H=M.sibling,f=Aa(M,{mode:"hidden",children:f.children}),f.subtreeFlags=M.subtreeFlags&65011712,H!==null?g=Aa(H,g):(g=ss(g,T,c,null),g.flags|=2),g.return=s,f.return=s,f.sibling=g,s.child=f,f=g,g=s.child,T=a.child.memoizedState,T===null?T=Ip(c):(M=T.cachePool,M!==null?(H=Ht._currentValue,M=M.parent!==H?{parent:H,pool:H}:M):M=hx(),T={baseLanes:T.baseLanes|c,cachePool:M}),g.memoizedState=T,g.childLanes=Lp(a,w,c),s.memoizedState=Rp,f):(gi(s),c=a.child,a=c.sibling,c=Aa(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,a!==null&&(w=s.deletions,w===null?(s.deletions=[a],s.flags|=16):w.push(a)),s.child=c,s.memoizedState=null,c)}function $p(a,s){return s=tf({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function tf(a,s){return a=Wn(22,a,null,s),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Bp(a,s,c){return vo(s,a.child,null,c),a=$p(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function _S(a,s,c){a.lanes|=s;var f=a.alternate;f!==null&&(f.lanes|=s),rp(a.return,s,c)}function Up(a,s,c,f,g){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=c,b.tailMode=g)}function TS(a,s,c){var f=s.pendingProps,g=f.revealOrder,b=f.tail;if(cn(a,s,f.children,c),f=qt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&_S(a,c,s);else if(a.tag===19)_S(a,c,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(le(qt,f),g){case"forwards":for(c=s.child,g=null;c!==null;)a=c.alternate,a!==null&&Qu(a)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),Up(s,!1,g,c,b);break;case"backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(a=g.alternate,a!==null&&Qu(a)===null){s.child=g;break}a=g.sibling,g.sibling=c,c=g,g=a}Up(s,!0,c,null,b);break;case"together":Up(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ta(a,s,c){if(a!==null&&(s.dependencies=a.dependencies),Ai|=s.lanes,(c&s.childLanes)===0)if(a!==null){if(Ml(a,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(r(153));if(s.child!==null){for(a=s.child,c=Aa(a,a.pendingProps),s.child=c,c.return=s;a.sibling!==null;)a=a.sibling,c=c.sibling=Aa(a,a.pendingProps),c.return=s;c.sibling=null}return s.child}function zp(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&Ru(a)))}function Wj(a,s,c){switch(s.tag){case 3:me(s,s.stateNode.containerInfo),fi(s,Ht,a.memoizedState.cache),jl();break;case 27:case 5:ue(s);break;case 4:me(s,s.stateNode.containerInfo);break;case 10:fi(s,s.type,s.memoizedProps.value);break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(gi(s),s.flags|=128,null):(c&s.child.childLanes)!==0?OS(a,s,c):(gi(s),a=Ta(a,s,c),a!==null?a.sibling:null);gi(s);break;case 19:var g=(a.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(Ml(a,s,c,!1),f=(c&s.childLanes)!==0),g){if(f)return TS(a,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(qt,qt.current),f)break;return null;case 22:case 23:return s.lanes=0,AS(a,s,c);case 24:fi(s,Ht,a.memoizedState.cache)}return Ta(a,s,c)}function DS(a,s,c){if(a!==null)if(a.memoizedProps!==s.pendingProps)Qt=!0;else{if(!zp(a,c)&&(s.flags&128)===0)return Qt=!1,Wj(a,s,c);Qt=(a.flags&131072)!==0}else Qt=!1,Ze&&(s.flags&1048576)!==0&&sx(s,ku,s.index);switch(s.lanes=0,s.tag){case 16:e:{a=s.pendingProps;var f=s.elementType,g=f._init;if(f=g(f._payload),s.type=f,typeof f=="function")Wh(f)?(a=ms(f,a),s.tag=1,s=ES(null,s,f,a,c)):(s.tag=0,s=kp(null,s,f,a,c));else{if(f!=null){if(g=f.$$typeof,g===N){s.tag=11,s=bS(null,s,f,a,c);break e}else if(g===R){s.tag=14,s=xS(null,s,f,a,c);break e}}throw s=se(f)||f,Error(r(306,s,""))}}return s;case 0:return kp(a,s,s.type,s.pendingProps,c);case 1:return f=s.type,g=ms(f,s.pendingProps),ES(a,s,f,g,c);case 3:e:{if(me(s,s.stateNode.containerInfo),a===null)throw Error(r(387));f=s.pendingProps;var b=s.memoizedState;g=b.element,up(a,s),Ul(s,f,null,c);var w=s.memoizedState;if(f=w.cache,fi(s,Ht,f),f!==b.cache&&ap(s,[Ht],c,!0),Bl(),f=w.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=wS(a,s,f,c);break e}else if(f!==g){g=pr(Error(r(424)),s),Nl(g),s=wS(a,s,f,c);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Pt=zr(a.firstChild),jn=s,Ze=!0,cs=null,Zr=!0,c=lS(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(jl(),f===g){s=Ta(a,s,c);break e}cn(a,s,f,c)}s=s.child}return s;case 26:return ef(a,s),a===null?(c=k1(s.type,null,s.pendingProps,null))?s.memoizedState=c:Ze||(c=s.type,a=s.pendingProps,f=gf(re.current).createElement(c),f[Ct]=s,f[wt]=a,fn(f,c,a),Ot(f),s.stateNode=f):s.memoizedState=k1(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return ue(s),a===null&&Ze&&(f=s.stateNode=j1(s.type,s.pendingProps,re.current),jn=s,Zr=!0,g=Pt,wi(s.type)?(Sm=g,Pt=zr(f.firstChild)):Pt=g),cn(a,s,s.pendingProps.children,c),ef(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&Ze&&((g=f=Pt)&&(f=PN(f,s.type,s.pendingProps,Zr),f!==null?(s.stateNode=f,jn=s,Pt=zr(f.firstChild),Zr=!1,g=!0):g=!1),g||us(s)),ue(s),g=s.type,b=s.pendingProps,w=a!==null?a.memoizedProps:null,f=b.children,ym(g,b)?f=null:w!==null&&ym(g,w)&&(s.flags|=32),s.memoizedState!==null&&(g=gp(a,s,Gj,null,null,c),lc._currentValue=g),ef(a,s),cn(a,s,f,c),s.child;case 6:return a===null&&Ze&&((a=c=Pt)&&(c=EN(c,s.pendingProps,Zr),c!==null?(s.stateNode=c,jn=s,Pt=null,a=!0):a=!1),a||us(s)),null;case 13:return OS(a,s,c);case 4:return me(s,s.stateNode.containerInfo),f=s.pendingProps,a===null?s.child=vo(s,null,f,c):cn(a,s,f,c),s.child;case 11:return bS(a,s,s.type,s.pendingProps,c);case 7:return cn(a,s,s.pendingProps,c),s.child;case 8:return cn(a,s,s.pendingProps.children,c),s.child;case 12:return cn(a,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,fi(s,s.type,f.value),cn(a,s,f.children,c),s.child;case 9:return g=s.type._context,f=s.pendingProps.children,ds(s),g=xn(g),f=f(g),s.flags|=1,cn(a,s,f,c),s.child;case 14:return xS(a,s,s.type,s.pendingProps,c);case 15:return SS(a,s,s.type,s.pendingProps,c);case 19:return TS(a,s,c);case 31:return f=s.pendingProps,c=s.mode,f={mode:f.mode,children:f.children},a===null?(c=tf(f,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=Aa(a.child,f),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return AS(a,s,c);case 24:return ds(s),f=xn(Ht),a===null?(g=op(),g===null&&(g=ut,b=ip(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),s.memoizedState={parent:f,cache:g},cp(s),fi(s,Ht,g)):((a.lanes&c)!==0&&(up(a,s),Ul(s,null,null,c),Bl()),g=a.memoizedState,b=s.memoizedState,g.parent!==f?(g={parent:f,cache:f},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),fi(s,Ht,f)):(f=b.cache,fi(s,Ht,f),f!==g.cache&&ap(s,[Ht],c,!0))),cn(a,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Da(a){a.flags|=4}function jS(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!B1(s)){if(s=vr.current,s!==null&&((qe&4194048)===qe?Jr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||s!==Jr))throw Ll=lp,px;a.flags|=8192}}function nf(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?fl():536870912,a.lanes|=s,Ao|=s)}function Kl(a,s){if(!Ze)switch(a.tailMode){case"hidden":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function St(a){var s=a.alternate!==null&&a.alternate.child===a.child,c=0,f=0;if(s)for(var g=a.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=f,a.childLanes=c,s}function Qj(a,s,c){var f=s.pendingProps;switch(ep(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(s),null;case 1:return St(s),null;case 3:return c=s.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),wa(Ht),ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Dl(s)?Da(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,cx())),St(s),null;case 26:return c=s.memoizedState,a===null?(Da(s),c!==null?(St(s),jS(s,c)):(St(s),s.flags&=-16777217)):c?c!==a.memoizedState?(Da(s),St(s),jS(s,c)):(St(s),s.flags&=-16777217):(a.memoizedProps!==f&&Da(s),St(s),s.flags&=-16777217),null;case 27:ve(s),c=re.current;var g=s.type;if(a!==null&&s.stateNode!=null)a.memoizedProps!==f&&Da(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return St(s),null}a=ye.current,Dl(s)?ox(s):(a=j1(g,f,c),s.stateNode=a,Da(s))}return St(s),null;case 5:if(ve(s),c=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==f&&Da(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return St(s),null}if(a=ye.current,Dl(s))ox(s);else{switch(g=gf(re.current),a){case 1:a=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?g.createElement(c,{is:f.is}):g.createElement(c)}}a[Ct]=s,a[wt]=f;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=a;e:switch(fn(a,c,f),c){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Da(s)}}return St(s),s.flags&=-16777217,null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==f&&Da(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(r(166));if(a=re.current,Dl(s)){if(a=s.stateNode,c=s.memoizedProps,f=null,g=jn,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}a[Ct]=s,a=!!(a.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||P1(a.nodeValue,c)),a||us(s)}else a=gf(a).createTextNode(f),a[Ct]=s,s.stateNode=a}return St(s),null;case 13:if(f=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=Dl(s),f!==null&&f.dehydrated!==null){if(a===null){if(!g)throw Error(r(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Ct]=s}else jl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;St(s),g=!1}else g=cx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(_a(s),s):(_a(s),null)}if(_a(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=f!==null,a=a!==null&&a.memoizedState!==null,c){f=s.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)}return c!==a&&c&&(s.child.flags|=8192),nf(s,s.updateQueue),St(s),null;case 4:return ie(),a===null&&dm(s.stateNode.containerInfo),St(s),null;case 10:return wa(s.type),St(s),null;case 19:if(Y(qt),g=s.memoizedState,g===null)return St(s),null;if(f=(s.flags&128)!==0,b=g.rendering,b===null)if(f)Kl(g,!1);else{if(Et!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(b=Qu(a),b!==null){for(s.flags|=128,Kl(g,!1),a=b.updateQueue,s.updateQueue=a,nf(s,a),s.subtreeFlags=0,a=c,c=s.child;c!==null;)ix(c,a),c=c.sibling;return le(qt,qt.current&1|2),s.child}a=a.sibling}g.tail!==null&&bt()>sf&&(s.flags|=128,f=!0,Kl(g,!1),s.lanes=4194304)}else{if(!f)if(a=Qu(b),a!==null){if(s.flags|=128,f=!0,a=a.updateQueue,s.updateQueue=a,nf(s,a),Kl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Ze)return St(s),null}else 2*bt()-g.renderingStartTime>sf&&c!==536870912&&(s.flags|=128,f=!0,Kl(g,!1),s.lanes=4194304);g.isBackwards?(b.sibling=s.child,s.child=b):(a=g.last,a!==null?a.sibling=b:s.child=b,g.last=b)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=bt(),s.sibling=null,a=qt.current,le(qt,f?a&1|2:a&1),s):(St(s),null);case 22:case 23:return _a(s),pp(),f=s.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(St(s),s.subtreeFlags&6&&(s.flags|=8192)):St(s),c=s.updateQueue,c!==null&&nf(s,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),a!==null&&Y(hs),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),wa(Ht),St(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Zj(a,s){switch(ep(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return wa(Ht),ie(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return ve(s),null;case 13:if(_a(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(r(340));jl()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return Y(qt),null;case 4:return ie(),null;case 10:return wa(s.type),null;case 22:case 23:return _a(s),pp(),a!==null&&Y(hs),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return wa(Ht),null;case 25:return null;default:return null}}function NS(a,s){switch(ep(s),s.tag){case 3:wa(Ht),ie();break;case 26:case 27:case 5:ve(s);break;case 4:ie();break;case 13:_a(s);break;case 19:Y(qt);break;case 10:wa(s.type);break;case 22:case 23:_a(s),pp(),a!==null&&Y(hs);break;case 24:wa(Ht)}}function Vl(a,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&a)===a){f=void 0;var b=c.create,w=c.inst;f=b(),w.destroy=f}c=c.next}while(c!==g)}}catch(T){lt(s,s.return,T)}}function vi(a,s,c){try{var f=s.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&a)===a){var w=f.inst,T=w.destroy;if(T!==void 0){w.destroy=void 0,g=s;var M=c,H=T;try{H()}catch(ne){lt(g,M,ne)}}}f=f.next}while(f!==b)}}catch(ne){lt(s,s.return,ne)}}function MS(a){var s=a.updateQueue;if(s!==null){var c=a.stateNode;try{xx(s,c)}catch(f){lt(a,a.return,f)}}}function kS(a,s,c){c.props=ms(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(f){lt(a,s,f)}}function Xl(a,s){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof c=="function"?a.refCleanup=c(f):c.current=f}}catch(g){lt(a,s,g)}}function ea(a,s){var c=a.ref,f=a.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){lt(a,s,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){lt(a,s,g)}else c.current=null}function RS(a){var s=a.type,c=a.memoizedProps,f=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){lt(a,a.return,g)}}function Gp(a,s,c){try{var f=a.stateNode;bN(f,a.type,c,s),f[wt]=s}catch(g){lt(a,a.return,g)}}function IS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&wi(a.type)||a.tag===4}function Hp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||IS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&wi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function qp(a,s,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(a),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=mf));else if(f!==4&&(f===27&&wi(a.type)&&(c=a.stateNode,s=null),a=a.child,a!==null))for(qp(a,s,c),a=a.sibling;a!==null;)qp(a,s,c),a=a.sibling}function rf(a,s,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?c.insertBefore(a,s):c.appendChild(a);else if(f!==4&&(f===27&&wi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(rf(a,s,c),a=a.sibling;a!==null;)rf(a,s,c),a=a.sibling}function LS(a){var s=a.stateNode,c=a.memoizedProps;try{for(var f=a.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);fn(s,f,c),s[Ct]=a,s[wt]=c}catch(b){lt(a,a.return,b)}}var ja=!1,jt=!1,Yp=!1,$S=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function Jj(a,s){if(a=a.containerInfo,mm=Af,a=Xb(a),Hh(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var w=0,T=-1,M=-1,H=0,ne=0,oe=a,F=null;t:for(;;){for(var W;oe!==c||g!==0&&oe.nodeType!==3||(T=w+g),oe!==b||f!==0&&oe.nodeType!==3||(M=w+f),oe.nodeType===3&&(w+=oe.nodeValue.length),(W=oe.firstChild)!==null;)F=oe,oe=W;for(;;){if(oe===a)break t;if(F===c&&++H===g&&(T=w),F===b&&++ne===f&&(M=w),(W=oe.nextSibling)!==null)break;oe=F,F=oe.parentNode}oe=W}c=T===-1||M===-1?null:{start:T,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(gm={focusedElem:a,selectionRange:c},Af=!1,Zt=s;Zt!==null;)if(s=Zt,a=s.child,(s.subtreeFlags&1024)!==0&&a!==null)a.return=s,Zt=a;else for(;Zt!==null;){switch(s=Zt,b=s.alternate,a=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,c=s,g=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var ke=ms(c.type,g,c.elementType===c.type);a=f.getSnapshotBeforeUpdate(ke,b),f.__reactInternalSnapshotBeforeUpdate=a}catch(De){lt(c,c.return,De)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,c=a.nodeType,c===9)bm(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":bm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=s.sibling,a!==null){a.return=s.return,Zt=a;break}Zt=s.return}}function BS(a,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:bi(a,c),f&4&&Vl(5,c);break;case 1:if(bi(a,c),f&4)if(a=c.stateNode,s===null)try{a.componentDidMount()}catch(w){lt(c,c.return,w)}else{var g=ms(c.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(g,s,a.__reactInternalSnapshotBeforeUpdate)}catch(w){lt(c,c.return,w)}}f&64&&MS(c),f&512&&Xl(c,c.return);break;case 3:if(bi(a,c),f&64&&(a=c.updateQueue,a!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{xx(a,s)}catch(w){lt(c,c.return,w)}}break;case 27:s===null&&f&4&&LS(c);case 26:case 5:bi(a,c),s===null&&f&4&&RS(c),f&512&&Xl(c,c.return);break;case 12:bi(a,c);break;case 13:bi(a,c),f&4&&GS(a,c),f&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=lN.bind(null,c),wN(a,c))));break;case 22:if(f=c.memoizedState!==null||ja,!f){s=s!==null&&s.memoizedState!==null||jt,g=ja;var b=jt;ja=f,(jt=s)&&!b?xi(a,c,(c.subtreeFlags&8772)!==0):bi(a,c),ja=g,jt=b}break;case 30:break;default:bi(a,c)}}function US(a){var s=a.alternate;s!==null&&(a.alternate=null,US(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&ga(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ht=null,zn=!1;function Na(a,s,c){for(c=c.child;c!==null;)zS(a,s,c),c=c.sibling}function zS(a,s,c){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(ua,c)}catch{}switch(c.tag){case 26:jt||ea(c,s),Na(a,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:jt||ea(c,s);var f=ht,g=zn;wi(c.type)&&(ht=c.stateNode,zn=!1),Na(a,s,c),ac(c.stateNode),ht=f,zn=g;break;case 5:jt||ea(c,s);case 6:if(f=ht,g=zn,ht=null,Na(a,s,c),ht=f,zn=g,ht!==null)if(zn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(c.stateNode)}catch(b){lt(c,s,b)}else try{ht.removeChild(c.stateNode)}catch(b){lt(c,s,b)}break;case 18:ht!==null&&(zn?(a=ht,T1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),dc(a)):T1(ht,c.stateNode));break;case 4:f=ht,g=zn,ht=c.stateNode.containerInfo,zn=!0,Na(a,s,c),ht=f,zn=g;break;case 0:case 11:case 14:case 15:jt||vi(2,c,s),jt||vi(4,c,s),Na(a,s,c);break;case 1:jt||(ea(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&kS(c,s,f)),Na(a,s,c);break;case 21:Na(a,s,c);break;case 22:jt=(f=jt)||c.memoizedState!==null,Na(a,s,c),jt=f;break;default:Na(a,s,c)}}function GS(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{dc(a)}catch(c){lt(s,s.return,c)}}function eN(a){switch(a.tag){case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new $S),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new $S),s;default:throw Error(r(435,a.tag))}}function Fp(a,s){var c=eN(a);s.forEach(function(f){var g=cN.bind(null,a,f);c.has(f)||(c.add(f),f.then(g,g))})}function Qn(a,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],b=a,w=s,T=w;e:for(;T!==null;){switch(T.tag){case 27:if(wi(T.type)){ht=T.stateNode,zn=!1;break e}break;case 5:ht=T.stateNode,zn=!1;break e;case 3:case 4:ht=T.stateNode.containerInfo,zn=!0;break e}T=T.return}if(ht===null)throw Error(r(160));zS(b,w,g),ht=null,zn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)HS(s,a),s=s.sibling}var Ur=null;function HS(a,s){var c=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Qn(s,a),Zn(a),f&4&&(vi(3,a,a.return),Vl(3,a),vi(5,a,a.return));break;case 1:Qn(s,a),Zn(a),f&512&&(jt||c===null||ea(c,c.return)),f&64&&ja&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=Ur;if(Qn(s,a),Zn(a),f&512&&(jt||c===null||ea(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=a.memoizedState,c===null)if(f===null)if(a.stateNode===null){e:{f=a.type,c=a.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Ln]||b[Ct]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),fn(b,f,c),b[Ct]=a,Ot(b),f=b;break e;case"link":var w=L1("link","href",g).get(f+(c.href||""));if(w){for(var T=0;T<w.length;T++)if(b=w[T],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(T,1);break t}}b=g.createElement(f),fn(b,f,c),g.head.appendChild(b);break;case"meta":if(w=L1("meta","content",g).get(f+(c.content||""))){for(T=0;T<w.length;T++)if(b=w[T],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(T,1);break t}}b=g.createElement(f),fn(b,f,c),g.head.appendChild(b);break;default:throw Error(r(468,f))}b[Ct]=a,Ot(b),f=b}a.stateNode=f}else $1(g,a.type,a.stateNode);else a.stateNode=I1(g,f,a.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?$1(g,a.type,a.stateNode):I1(g,f,a.memoizedProps)):f===null&&a.stateNode!==null&&Gp(a,a.memoizedProps,c.memoizedProps)}break;case 27:Qn(s,a),Zn(a),f&512&&(jt||c===null||ea(c,c.return)),c!==null&&f&4&&Gp(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Qn(s,a),Zn(a),f&512&&(jt||c===null||ea(c,c.return)),a.flags&32){g=a.stateNode;try{Bn(g,"")}catch(W){lt(a,a.return,W)}}f&4&&a.stateNode!=null&&(g=a.memoizedProps,Gp(a,g,c!==null?c.memoizedProps:g)),f&1024&&(Yp=!0);break;case 6:if(Qn(s,a),Zn(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,c=a.stateNode;try{c.nodeValue=f}catch(W){lt(a,a.return,W)}}break;case 3:if(bf=null,g=Ur,Ur=yf(s.containerInfo),Qn(s,a),Ur=g,Zn(a),f&4&&c!==null&&c.memoizedState.isDehydrated)try{dc(s.containerInfo)}catch(W){lt(a,a.return,W)}Yp&&(Yp=!1,qS(a));break;case 4:f=Ur,Ur=yf(a.stateNode.containerInfo),Qn(s,a),Zn(a),Ur=f;break;case 12:Qn(s,a),Zn(a);break;case 13:Qn(s,a),Zn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Zp=bt()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Fp(a,f)));break;case 22:g=a.memoizedState!==null;var M=c!==null&&c.memoizedState!==null,H=ja,ne=jt;if(ja=H||g,jt=ne||M,Qn(s,a),jt=ne,ja=H,Zn(a),f&8192)e:for(s=a.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(c===null||M||ja||jt||gs(a)),c=null,s=a;;){if(s.tag===5||s.tag===26){if(c===null){M=c=s;try{if(b=M.stateNode,g)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{T=M.stateNode;var oe=M.memoizedProps.style,F=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(W){lt(M,M.return,W)}}}else if(s.tag===6){if(c===null){M=s;try{M.stateNode.nodeValue=g?"":M.memoizedProps}catch(W){lt(M,M.return,W)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=a.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Fp(a,c))));break;case 19:Qn(s,a),Zn(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Fp(a,f)));break;case 30:break;case 21:break;default:Qn(s,a),Zn(a)}}function Zn(a){var s=a.flags;if(s&2){try{for(var c,f=a.return;f!==null;){if(IS(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,b=Hp(a);rf(a,b,g);break;case 5:var w=c.stateNode;c.flags&32&&(Bn(w,""),c.flags&=-33);var T=Hp(a);rf(a,T,w);break;case 3:case 4:var M=c.stateNode.containerInfo,H=Hp(a);qp(a,H,M);break;default:throw Error(r(161))}}catch(ne){lt(a,a.return,ne)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function qS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;qS(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function bi(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)BS(a,s.alternate,s),s=s.sibling}function gs(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:vi(4,s,s.return),gs(s);break;case 1:ea(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&kS(s,s.return,c),gs(s);break;case 27:ac(s.stateNode);case 26:case 5:ea(s,s.return),gs(s);break;case 22:s.memoizedState===null&&gs(s);break;case 30:gs(s);break;default:gs(s)}a=a.sibling}}function xi(a,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,g=a,b=s,w=b.flags;switch(b.tag){case 0:case 11:case 15:xi(g,b,c),Vl(4,b);break;case 1:if(xi(g,b,c),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(H){lt(f,f.return,H)}if(f=b,g=f.updateQueue,g!==null){var T=f.stateNode;try{var M=g.shared.hiddenCallbacks;if(M!==null)for(g.shared.hiddenCallbacks=null,g=0;g<M.length;g++)bx(M[g],T)}catch(H){lt(f,f.return,H)}}c&&w&64&&MS(b),Xl(b,b.return);break;case 27:LS(b);case 26:case 5:xi(g,b,c),c&&f===null&&w&4&&RS(b),Xl(b,b.return);break;case 12:xi(g,b,c);break;case 13:xi(g,b,c),c&&w&4&&GS(g,b);break;case 22:b.memoizedState===null&&xi(g,b,c),Xl(b,b.return);break;case 30:break;default:xi(g,b,c)}s=s.sibling}}function Kp(a,s){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&kl(c))}function Vp(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&kl(a))}function ta(a,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)YS(a,s,c,f),s=s.sibling}function YS(a,s,c,f){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ta(a,s,c,f),g&2048&&Vl(9,s);break;case 1:ta(a,s,c,f);break;case 3:ta(a,s,c,f),g&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&kl(a)));break;case 12:if(g&2048){ta(a,s,c,f),a=s.stateNode;try{var b=s.memoizedProps,w=b.id,T=b.onPostCommit;typeof T=="function"&&T(w,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(M){lt(s,s.return,M)}}else ta(a,s,c,f);break;case 13:ta(a,s,c,f);break;case 23:break;case 22:b=s.stateNode,w=s.alternate,s.memoizedState!==null?b._visibility&2?ta(a,s,c,f):Wl(a,s):b._visibility&2?ta(a,s,c,f):(b._visibility|=2,bo(a,s,c,f,(s.subtreeFlags&10256)!==0)),g&2048&&Kp(w,s);break;case 24:ta(a,s,c,f),g&2048&&Vp(s.alternate,s);break;default:ta(a,s,c,f)}}function bo(a,s,c,f,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var b=a,w=s,T=c,M=f,H=w.flags;switch(w.tag){case 0:case 11:case 15:bo(b,w,T,M,g),Vl(8,w);break;case 23:break;case 22:var ne=w.stateNode;w.memoizedState!==null?ne._visibility&2?bo(b,w,T,M,g):Wl(b,w):(ne._visibility|=2,bo(b,w,T,M,g)),g&&H&2048&&Kp(w.alternate,w);break;case 24:bo(b,w,T,M,g),g&&H&2048&&Vp(w.alternate,w);break;default:bo(b,w,T,M,g)}s=s.sibling}}function Wl(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=a,f=s,g=f.flags;switch(f.tag){case 22:Wl(c,f),g&2048&&Kp(f.alternate,f);break;case 24:Wl(c,f),g&2048&&Vp(f.alternate,f);break;default:Wl(c,f)}s=s.sibling}}var Ql=8192;function xo(a){if(a.subtreeFlags&Ql)for(a=a.child;a!==null;)FS(a),a=a.sibling}function FS(a){switch(a.tag){case 26:xo(a),a.flags&Ql&&a.memoizedState!==null&&BN(Ur,a.memoizedState,a.memoizedProps);break;case 5:xo(a);break;case 3:case 4:var s=Ur;Ur=yf(a.stateNode.containerInfo),xo(a),Ur=s;break;case 22:a.memoizedState===null&&(s=a.alternate,s!==null&&s.memoizedState!==null?(s=Ql,Ql=16777216,xo(a),Ql=s):xo(a));break;default:xo(a)}}function KS(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function Zl(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Zt=f,XS(f,a)}KS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)VS(a),a=a.sibling}function VS(a){switch(a.tag){case 0:case 11:case 15:Zl(a),a.flags&2048&&vi(9,a,a.return);break;case 3:Zl(a);break;case 12:Zl(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,af(a)):Zl(a);break;default:Zl(a)}}function af(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Zt=f,XS(f,a)}KS(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:vi(8,s,s.return),af(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,af(s));break;default:af(s)}a=a.sibling}}function XS(a,s){for(;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:vi(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:kl(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Zt=f;else e:for(c=a;Zt!==null;){f=Zt;var g=f.sibling,b=f.return;if(US(f),f===c){Zt=null;break e}if(g!==null){g.return=b,Zt=g;break e}Zt=b}}}var tN={getCacheForType:function(a){var s=xn(Ht),c=s.data.get(a);return c===void 0&&(c=a(),s.data.set(a,c)),c}},nN=typeof WeakMap=="function"?WeakMap:Map,Je=0,ut=null,Ge=null,qe=0,et=0,Jn=null,Si=!1,So=!1,Xp=!1,Ma=0,Et=0,Ai=0,ys=0,Wp=0,br=0,Ao=0,Jl=null,Gn=null,Qp=!1,Zp=0,sf=1/0,of=null,Ci=null,un=0,Pi=null,Co=null,Po=0,Jp=0,em=null,WS=null,ec=0,tm=null;function er(){if((Je&2)!==0&&qe!==0)return qe&-qe;if($.T!==null){var a=uo;return a!==0?a:lm()}return Vs()}function QS(){br===0&&(br=(qe&536870912)===0||Ze?pu():536870912);var a=vr.current;return a!==null&&(a.flags|=32),br}function tr(a,s,c){(a===ut&&(et===2||et===9)||a.cancelPendingCommit!==null)&&(Eo(a,0),Ei(a,qe,br,!1)),ei(a,c),((Je&2)===0||a!==ut)&&(a===ut&&((Je&2)===0&&(ys|=c),Et===4&&Ei(a,qe,br,!1)),na(a))}function ZS(a,s,c){if((Je&6)!==0)throw Error(r(327));var f=!c&&(s&124)===0&&(s&a.expiredLanes)===0||Ja(a,s),g=f?iN(a,s):am(a,s,!0),b=f;do{if(g===0){So&&!f&&Ei(a,s,0,!1);break}else{if(c=a.current.alternate,b&&!rN(c)){g=am(a,s,!1),b=!1;continue}if(g===2){if(b=s,a.errorRecoveryDisabledLanes&b)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var T=a;g=Jl;var M=T.current.memoizedState.isDehydrated;if(M&&(Eo(T,w).flags|=256),w=am(T,w,!1),w!==2){if(Xp&&!M){T.errorRecoveryDisabledLanes|=b,ys|=b,g=4;break e}b=Gn,Gn=g,b!==null&&(Gn===null?Gn=b:Gn.push.apply(Gn,b))}g=w}if(b=!1,g!==2)continue}}if(g===1){Eo(a,0),Ei(a,s,0,!0);break}e:{switch(f=a,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ei(f,s,br,!Si);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(g=Zp+300-bt(),10<g)){if(Ei(f,s,br,!Si),Za(f,0,!0)!==0)break e;f.timeoutHandle=O1(JS.bind(null,f,c,Gn,of,Qp,s,br,ys,Ao,Si,b,2,-0,0),g);break e}JS(f,c,Gn,of,Qp,s,br,ys,Ao,Si,b,0,-0,0)}}break}while(!0);na(a)}function JS(a,s,c,f,g,b,w,T,M,H,ne,oe,F,W){if(a.timeoutHandle=-1,oe=s.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(oc={stylesheets:null,count:0,unsuspend:$N},FS(s),oe=UN(),oe!==null)){a.cancelPendingCommit=oe(s1.bind(null,a,s,b,c,f,g,w,T,M,ne,1,F,W)),Ei(a,b,w,!H);return}s1(a,s,b,c,f,g,w,T,M)}function rN(a){for(var s=a;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],b=g.getSnapshot;g=g.value;try{if(!Xn(b(),g))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ei(a,s,c,f){s&=~Wp,s&=~ys,a.suspendedLanes|=s,a.pingedLanes&=~s,f&&(a.warmLanes|=s),f=a.expirationTimes;for(var g=s;0<g;){var b=31-mn(g),w=1<<b;f[b]=-1,g&=~w}c!==0&&Eh(a,c,s)}function lf(){return(Je&6)===0?(tc(0),!1):!0}function nm(){if(Ge!==null){if(et===0)var a=Ge.return;else a=Ge,Ea=fs=null,bp(a),yo=null,Yl=0,a=Ge;for(;a!==null;)NS(a.alternate,a),a=a.return;Ge=null}}function Eo(a,s){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,SN(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),nm(),ut=a,Ge=c=Aa(a.current,null),qe=s,et=0,Jn=null,Si=!1,So=Ja(a,s),Xp=!1,Ao=br=Wp=ys=Ai=Et=0,Gn=Jl=null,Qp=!1,(s&8)!==0&&(s|=s&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=s;0<f;){var g=31-mn(f),b=1<<g;s|=a[g],f&=~b}return Ma=s,Tu(),c}function e1(a,s){$e=null,$.H=Vu,s===Il||s===$u?(s=yx(),et=3):s===px?(s=yx(),et=4):et=s===vS?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jn=s,Ge===null&&(Et=1,Ju(a,pr(s,a.current)))}function t1(){var a=$.H;return $.H=Vu,a===null?Vu:a}function n1(){var a=$.A;return $.A=tN,a}function rm(){Et=4,Si||(qe&4194048)!==qe&&vr.current!==null||(So=!0),(Ai&134217727)===0&&(ys&134217727)===0||ut===null||Ei(ut,qe,br,!1)}function am(a,s,c){var f=Je;Je|=2;var g=t1(),b=n1();(ut!==a||qe!==s)&&(of=null,Eo(a,s)),s=!1;var w=Et;e:do try{if(et!==0&&Ge!==null){var T=Ge,M=Jn;switch(et){case 8:nm(),w=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(s=!0);var H=et;if(et=0,Jn=null,wo(a,T,M,H),c&&So){w=0;break e}break;default:H=et,et=0,Jn=null,wo(a,T,M,H)}}aN(),w=Et;break}catch(ne){e1(a,ne)}while(!0);return s&&a.shellSuspendCounter++,Ea=fs=null,Je=f,$.H=g,$.A=b,Ge===null&&(ut=null,qe=0,Tu()),w}function aN(){for(;Ge!==null;)r1(Ge)}function iN(a,s){var c=Je;Je|=2;var f=t1(),g=n1();ut!==a||qe!==s?(of=null,sf=bt()+500,Eo(a,s)):So=Ja(a,s);e:do try{if(et!==0&&Ge!==null){s=Ge;var b=Jn;t:switch(et){case 1:et=0,Jn=null,wo(a,s,b,1);break;case 2:case 9:if(mx(b)){et=0,Jn=null,a1(s);break}s=function(){et!==2&&et!==9||ut!==a||(et=7),na(a)},b.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:mx(b)?(et=0,Jn=null,a1(s)):(et=0,Jn=null,wo(a,s,b,7));break;case 5:var w=null;switch(Ge.tag){case 26:w=Ge.memoizedState;case 5:case 27:var T=Ge;if(!w||B1(w)){et=0,Jn=null;var M=T.sibling;if(M!==null)Ge=M;else{var H=T.return;H!==null?(Ge=H,cf(H)):Ge=null}break t}}et=0,Jn=null,wo(a,s,b,5);break;case 6:et=0,Jn=null,wo(a,s,b,6);break;case 8:nm(),Et=6;break e;default:throw Error(r(462))}}sN();break}catch(ne){e1(a,ne)}while(!0);return Ea=fs=null,$.H=f,$.A=g,Je=c,Ge!==null?0:(ut=null,qe=0,Tu(),Et)}function sN(){for(;Ge!==null&&!Me();)r1(Ge)}function r1(a){var s=DS(a.alternate,a,Ma);a.memoizedProps=a.pendingProps,s===null?cf(a):Ge=s}function a1(a){var s=a,c=s.alternate;switch(s.tag){case 15:case 0:s=PS(c,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=PS(c,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:bp(s);default:NS(c,s),s=Ge=ix(s,Ma),s=DS(c,s,Ma)}a.memoizedProps=a.pendingProps,s===null?cf(a):Ge=s}function wo(a,s,c,f){Ea=fs=null,bp(s),yo=null,Yl=0;var g=s.return;try{if(Xj(a,g,s,c,qe)){Et=1,Ju(a,pr(c,a.current)),Ge=null;return}}catch(b){if(g!==null)throw Ge=g,b;Et=1,Ju(a,pr(c,a.current)),Ge=null;return}s.flags&32768?(Ze||f===1?a=!0:So||(qe&536870912)!==0?a=!1:(Si=a=!0,(f===2||f===9||f===3||f===6)&&(f=vr.current,f!==null&&f.tag===13&&(f.flags|=16384))),i1(s,a)):cf(s)}function cf(a){var s=a;do{if((s.flags&32768)!==0){i1(s,Si);return}a=s.return;var c=Qj(s.alternate,s,Ma);if(c!==null){Ge=c;return}if(s=s.sibling,s!==null){Ge=s;return}Ge=s=a}while(s!==null);Et===0&&(Et=5)}function i1(a,s){do{var c=Zj(a.alternate,a);if(c!==null){c.flags&=32767,Ge=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(a=a.sibling,a!==null)){Ge=a;return}Ge=a=c}while(a!==null);Et=6,Ge=null}function s1(a,s,c,f,g,b,w,T,M){a.cancelPendingCommit=null;do uf();while(un!==0);if((Je&6)!==0)throw Error(r(327));if(s!==null){if(s===a.current)throw Error(r(177));if(b=s.lanes|s.childLanes,b|=Vh,Ib(a,c,b,w,T,M),a===ut&&(Ge=ut=null,qe=0),Co=s,Pi=a,Po=c,Jp=b,em=g,WS=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,uN(Fr,function(){return f1(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=$.T,$.T=null,g=ee.p,ee.p=2,w=Je,Je|=4;try{Jj(a,s,c)}finally{Je=w,ee.p=g,$.T=f}}un=1,o1(),l1(),c1()}}function o1(){if(un===1){un=0;var a=Pi,s=Co,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var f=ee.p;ee.p=2;var g=Je;Je|=4;try{HS(s,a);var b=gm,w=Xb(a.containerInfo),T=b.focusedElem,M=b.selectionRange;if(w!==T&&T&&T.ownerDocument&&Vb(T.ownerDocument.documentElement,T)){if(M!==null&&Hh(T)){var H=M.start,ne=M.end;if(ne===void 0&&(ne=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(ne,T.value.length);else{var oe=T.ownerDocument||document,F=oe&&oe.defaultView||window;if(F.getSelection){var W=F.getSelection(),ke=T.textContent.length,De=Math.min(M.start,ke),st=M.end===void 0?De:Math.min(M.end,ke);!W.extend&&De>st&&(w=st,st=De,De=w);var B=Kb(T,De),L=Kb(T,st);if(B&&L&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var G=oe.createRange();G.setStart(B.node,B.offset),W.removeAllRanges(),De>st?(W.addRange(G),W.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),W.addRange(G))}}}}for(oe=[],W=T;W=W.parentNode;)W.nodeType===1&&oe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<oe.length;T++){var ae=oe[T];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Af=!!mm,gm=mm=null}finally{Je=g,ee.p=f,$.T=c}}a.current=s,un=2}}function l1(){if(un===2){un=0;var a=Pi,s=Co,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var f=ee.p;ee.p=2;var g=Je;Je|=4;try{BS(a,s.alternate,s)}finally{Je=g,ee.p=f,$.T=c}}un=3}}function c1(){if(un===4||un===3){un=0,Le();var a=Pi,s=Co,c=Po,f=WS;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,Co=Pi=null,u1(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(Ci=null),ha(c),s=s.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(ua,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=$.T,g=ee.p,ee.p=2,$.T=null;try{for(var b=a.onRecoverableError,w=0;w<f.length;w++){var T=f[w];b(T.value,{componentStack:T.stack})}}finally{$.T=s,ee.p=g}}(Po&3)!==0&&uf(),na(a),g=a.pendingLanes,(c&4194090)!==0&&(g&42)!==0?a===tm?ec++:(ec=0,tm=a):ec=0,tc(0)}}function u1(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,kl(s)))}function uf(a){return o1(),l1(),c1(),f1()}function f1(){if(un!==5)return!1;var a=Pi,s=Jp;Jp=0;var c=ha(Po),f=$.T,g=ee.p;try{ee.p=32>c?32:c,$.T=null,c=em,em=null;var b=Pi,w=Po;if(un=0,Co=Pi=null,Po=0,(Je&6)!==0)throw Error(r(331));var T=Je;if(Je|=4,VS(b.current),YS(b,b.current,w,c),Je=T,tc(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(ua,b)}catch{}return!0}finally{ee.p=g,$.T=f,u1(a,s)}}function d1(a,s,c){s=pr(c,s),s=Mp(a.stateNode,s,2),a=pi(a,s,2),a!==null&&(ei(a,2),na(a))}function lt(a,s,c){if(a.tag===3)d1(a,a,c);else for(;s!==null;){if(s.tag===3){d1(s,a,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ci===null||!Ci.has(f))){a=pr(c,a),c=gS(2),f=pi(s,c,2),f!==null&&(yS(c,f,s,a),ei(f,2),na(f));break}}s=s.return}}function im(a,s,c){var f=a.pingCache;if(f===null){f=a.pingCache=new nN;var g=new Set;f.set(s,g)}else g=f.get(s),g===void 0&&(g=new Set,f.set(s,g));g.has(c)||(Xp=!0,g.add(c),a=oN.bind(null,a,s,c),s.then(a,a))}function oN(a,s,c){var f=a.pingCache;f!==null&&f.delete(s),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,ut===a&&(qe&c)===c&&(Et===4||Et===3&&(qe&62914560)===qe&&300>bt()-Zp?(Je&2)===0&&Eo(a,0):Wp|=c,Ao===qe&&(Ao=0)),na(a)}function h1(a,s){s===0&&(s=fl()),a=so(a,s),a!==null&&(ei(a,s),na(a))}function lN(a){var s=a.memoizedState,c=0;s!==null&&(c=s.retryLane),h1(a,c)}function cN(a,s){var c=0;switch(a.tag){case 13:var f=a.stateNode,g=a.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(s),h1(a,c)}function uN(a,s){return rt(a,s)}var ff=null,Oo=null,sm=!1,df=!1,om=!1,vs=0;function na(a){a!==Oo&&a.next===null&&(Oo===null?ff=Oo=a:Oo=Oo.next=a),df=!0,sm||(sm=!0,dN())}function tc(a,s){if(!om&&df){om=!0;do for(var c=!1,f=ff;f!==null;){if(a!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var w=f.suspendedLanes,T=f.pingedLanes;b=(1<<31-mn(42|a)+1)-1,b&=g&~(w&~T),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,y1(f,b))}else b=qe,b=Za(f,f===ut?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Ja(f,b)||(c=!0,y1(f,b));f=f.next}while(c);om=!1}}function fN(){p1()}function p1(){df=sm=!1;var a=0;vs!==0&&(xN()&&(a=vs),vs=0);for(var s=bt(),c=null,f=ff;f!==null;){var g=f.next,b=m1(f,s);b===0?(f.next=null,c===null?ff=g:c.next=g,g===null&&(Oo=c)):(c=f,(a!==0||(b&3)!==0)&&(df=!0)),f=g}tc(a)}function m1(a,s){for(var c=a.suspendedLanes,f=a.pingedLanes,g=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var w=31-mn(b),T=1<<w,M=g[w];M===-1?((T&c)===0||(T&f)!==0)&&(g[w]=ul(T,s)):M<=s&&(a.expiredLanes|=T),b&=~T}if(s=ut,c=qe,c=Za(a,a===s?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,c===0||a===s&&(et===2||et===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&ze(f),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Ja(a,c)){if(s=c&-c,s===a.callbackPriority)return s;switch(f!==null&&ze(f),ha(c)){case 2:case 8:c=qs;break;case 32:c=Fr;break;case 268435456:c=Ys;break;default:c=Fr}return f=g1.bind(null,a),c=rt(c,f),a.callbackPriority=s,a.callbackNode=c,s}return f!==null&&f!==null&&ze(f),a.callbackPriority=2,a.callbackNode=null,2}function g1(a,s){if(un!==0&&un!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(uf()&&a.callbackNode!==c)return null;var f=qe;return f=Za(a,a===ut?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(ZS(a,f,s),m1(a,bt()),a.callbackNode!=null&&a.callbackNode===c?g1.bind(null,a):null)}function y1(a,s){if(uf())return null;ZS(a,s,!0)}function dN(){AN(function(){(Je&6)!==0?rt(Qa,fN):p1()})}function lm(){return vs===0&&(vs=pu()),vs}function v1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:vl(""+a)}function b1(a,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,a.id&&c.setAttribute("form",a.id),s.parentNode.insertBefore(c,s),a=new FormData(a),c.parentNode.removeChild(c),a}function hN(a,s,c,f,g){if(s==="submit"&&c&&c.stateNode===g){var b=v1((g[wt]||null).action),w=f.submitter;w&&(s=(s=w[wt]||null)?v1(s.formAction):w.getAttribute("formAction"),s!==null&&(b=s,w=null));var T=new eo("action","action",null,f,g);a.push({event:T,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(vs!==0){var M=w?b1(g,w):new FormData(g);_p(c,{pending:!0,data:M,method:g.method,action:b},null,M)}}else typeof b=="function"&&(T.preventDefault(),M=w?b1(g,w):new FormData(g),_p(c,{pending:!0,data:M,method:g.method,action:b},b,M))},currentTarget:g}]})}}for(var cm=0;cm<Kh.length;cm++){var um=Kh[cm],pN=um.toLowerCase(),mN=um[0].toUpperCase()+um.slice(1);Br(pN,"on"+mN)}Br(Zb,"onAnimationEnd"),Br(Jb,"onAnimationIteration"),Br(ex,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(Nj,"onTransitionRun"),Br(Mj,"onTransitionStart"),Br(kj,"onTransitionCancel"),Br(tx,"onTransitionEnd"),va("onMouseEnter",["mouseout","mouseover"]),va("onMouseLeave",["mouseout","mouseover"]),va("onPointerEnter",["pointerout","pointerover"]),va("onPointerLeave",["pointerout","pointerover"]),ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function x1(a,s){s=(s&4)!==0;for(var c=0;c<a.length;c++){var f=a[c],g=f.event;f=f.listeners;e:{var b=void 0;if(s)for(var w=f.length-1;0<=w;w--){var T=f[w],M=T.instance,H=T.currentTarget;if(T=T.listener,M!==b&&g.isPropagationStopped())break e;b=T,g.currentTarget=H;try{b(g)}catch(ne){Zu(ne)}g.currentTarget=null,b=M}else for(w=0;w<f.length;w++){if(T=f[w],M=T.instance,H=T.currentTarget,T=T.listener,M!==b&&g.isPropagationStopped())break e;b=T,g.currentTarget=H;try{b(g)}catch(ne){Zu(ne)}g.currentTarget=null,b=M}}}}function He(a,s){var c=s[In];c===void 0&&(c=s[In]=new Set);var f=a+"__bubble";c.has(f)||(S1(s,a,2,!1),c.add(f))}function fm(a,s,c){var f=0;s&&(f|=4),S1(c,a,f,s)}var hf="_reactListening"+Math.random().toString(36).slice(2);function dm(a){if(!a[hf]){a[hf]=!0,mu.forEach(function(c){c!=="selectionchange"&&(gN.has(c)||fm(c,!1,a),fm(c,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[hf]||(s[hf]=!0,fm("selectionchange",!1,s))}}function S1(a,s,c,f){switch(Y1(s)){case 2:var g=HN;break;case 8:g=qN;break;default:g=wm}c=g.bind(null,s,c,a),g=void 0,!li||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),f?g!==void 0?a.addEventListener(s,c,{capture:!0,passive:g}):a.addEventListener(s,c,!0):g!==void 0?a.addEventListener(s,c,{passive:g}):a.addEventListener(s,c,!1)}function hm(a,s,c,f,g){var b=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var T=f.stateNode.containerInfo;if(T===g)break;if(w===4)for(w=f.return;w!==null;){var M=w.tag;if((M===3||M===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;T!==null;){if(w=Rr(T),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){f=b=w;continue e}T=T.parentNode}}f=f.return}Xr(function(){var H=b,ne=Ji(c),oe=[];e:{var F=nx.get(a);if(F!==void 0){var W=eo,ke=a;switch(a){case"keypress":if(_t(c)===0)break e;case"keydown":case"keyup":W=Bh;break;case"focusin":ke="focus",W=Al;break;case"focusout":ke="blur",W=Al;break;case"beforeblur":case"afterblur":W=Al;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=de;break;case Zb:case Jb:case ex:W=Pu;break;case tx:W=je;break;case"scroll":case"scrollend":W=Oh;break;case"wheel":W=Qe;break;case"copy":case"cut":case"paste":W=Mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=X;break;case"toggle":case"beforetoggle":W=Wt}var De=(s&4)!==0,st=!De&&(a==="scroll"||a==="scrollend"),B=De?F!==null?F+"Capture":null:F;De=[];for(var L=H,G;L!==null;){var ae=L;if(G=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||G===null||B===null||(ae=oi(L,B),ae!=null&&De.push(rc(L,ae,G))),st)break;L=L.return}0<De.length&&(F=new W(F,ke,null,c,ne),oe.push({event:F,listeners:De}))}}if((s&7)===0){e:{if(F=a==="mouseover"||a==="pointerover",W=a==="mouseout"||a==="pointerout",F&&c!==bl&&(ke=c.relatedTarget||c.fromElement)&&(Rr(ke)||ke[kt]))break e;if((W||F)&&(F=ne.window===ne?ne:(F=ne.ownerDocument)?F.defaultView||F.parentWindow:window,W?(ke=c.relatedTarget||c.toElement,W=H,ke=ke?Rr(ke):null,ke!==null&&(st=o(ke),De=ke.tag,ke!==st||De!==5&&De!==27&&De!==6)&&(ke=null)):(W=null,ke=H),W!==ke)){if(De=Cu,ae="onMouseLeave",B="onMouseEnter",L="mouse",(a==="pointerout"||a==="pointerover")&&(De=X,ae="onPointerLeave",B="onPointerEnter",L="pointer"),st=W==null?F:yn(W),G=ke==null?F:yn(ke),F=new De(ae,L+"leave",W,c,ne),F.target=st,F.relatedTarget=G,ae=null,Rr(ne)===H&&(De=new De(B,L+"enter",ke,c,ne),De.target=G,De.relatedTarget=st,ae=De),st=ae,W&&ke)t:{for(De=W,B=ke,L=0,G=De;G;G=_o(G))L++;for(G=0,ae=B;ae;ae=_o(ae))G++;for(;0<L-G;)De=_o(De),L--;for(;0<G-L;)B=_o(B),G--;for(;L--;){if(De===B||B!==null&&De===B.alternate)break t;De=_o(De),B=_o(B)}De=null}else De=null;W!==null&&A1(oe,F,W,De,!1),ke!==null&&st!==null&&A1(oe,st,ke,De,!0)}}e:{if(F=H?yn(H):window,W=F.nodeName&&F.nodeName.toLowerCase(),W==="select"||W==="input"&&F.type==="file")var Ce=zb;else if(Bb(F))if(Gb)Ce=Tj;else{Ce=Oj;var Ue=wj}else W=F.nodeName,!W||W.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Au(H.elementType)&&(Ce=zb):Ce=_j;if(Ce&&(Ce=Ce(a,H))){Ub(oe,Ce,c,ne);break e}Ue&&Ue(a,F,H),a==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&gl(F,"number",F.value)}switch(Ue=H?yn(H):window,a){case"focusin":(Bb(Ue)||Ue.contentEditable==="true")&&(ro=Ue,qh=H,Tl=null);break;case"focusout":Tl=qh=ro=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,Wb(oe,c,ne);break;case"selectionchange":if(jj)break;case"keydown":case"keyup":Wb(oe,c,ne)}var Oe;if(Tt)e:{switch(a){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else hr?Ou(a,c)&&(Ne="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Ne="onCompositionStart");Ne&&(no&&c.locale!=="ko"&&(hr||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&hr&&(Oe=Wr()):($r=ne,Zs="value"in $r?$r.value:$r.textContent,hr=!0)),Ue=pf(H,Ne),0<Ue.length&&(Ne=new Eu(Ne,a,null,c,ne),oe.push({event:Ne,listeners:Ue}),Oe?Ne.data=Oe:(Oe=Pl(c),Oe!==null&&(Ne.data=Oe)))),(Oe=Dn?Uh(a,c):El(a,c))&&(Ne=pf(H,"onBeforeInput"),0<Ne.length&&(Ue=new Eu("onBeforeInput","beforeinput",null,c,ne),oe.push({event:Ue,listeners:Ne}),Ue.data=Oe)),hN(oe,a,H,c,ne)}x1(oe,s)})}function rc(a,s,c){return{instance:a,listener:s,currentTarget:c}}function pf(a,s){for(var c=s+"Capture",f=[];a!==null;){var g=a,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=oi(a,c),g!=null&&f.unshift(rc(a,g,b)),g=oi(a,s),g!=null&&f.push(rc(a,g,b))),a.tag===3)return f;a=a.return}return[]}function _o(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function A1(a,s,c,f,g){for(var b=s._reactName,w=[];c!==null&&c!==f;){var T=c,M=T.alternate,H=T.stateNode;if(T=T.tag,M!==null&&M===f)break;T!==5&&T!==26&&T!==27||H===null||(M=H,g?(H=oi(c,b),H!=null&&w.unshift(rc(c,H,M))):g||(H=oi(c,b),H!=null&&w.push(rc(c,H,M)))),c=c.return}w.length!==0&&a.push({event:s,listeners:w})}var yN=/\r\n?/g,vN=/\u0000|\uFFFD/g;function C1(a){return(typeof a=="string"?a:""+a).replace(yN,`
`).replace(vN,"")}function P1(a,s){return s=C1(s),C1(a)===s}function mf(){}function it(a,s,c,f,g,b){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||Bn(a,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&Bn(a,""+f);break;case"className":Ir(a,"class",f);break;case"tabIndex":Ir(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(a,c,f);break;case"style":Su(a,f,b);break;case"data":if(s!=="object"){Ir(a,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){a.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=vl(""+f),a.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(s!=="input"&&it(a,s,"name",g.name,g,null),it(a,s,"formEncType",g.formEncType,g,null),it(a,s,"formMethod",g.formMethod,g,null),it(a,s,"formTarget",g.formTarget,g,null)):(it(a,s,"encType",g.encType,g,null),it(a,s,"method",g.method,g,null),it(a,s,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=vl(""+f),a.setAttribute(c,f);break;case"onClick":f!=null&&(a.onclick=mf);break;case"onScroll":f!=null&&He("scroll",a);break;case"onScrollEnd":f!=null&&He("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}c=vl(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""+f):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":f===!0?a.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,f):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(c,f):a.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(c):a.setAttribute(c,f);break;case"popover":He("beforetoggle",a),He("toggle",a),Qi(a,"popover",f);break;case"xlinkActuate":$n(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":$n(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":$n(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":$n(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":$n(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":$n(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":$n(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":$n(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":$n(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Qi(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=sn.get(c)||c,Qi(a,c,f))}}function pm(a,s,c,f,g,b){switch(c){case"style":Su(a,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof f=="string"?Bn(a,f):(typeof f=="number"||typeof f=="bigint")&&Bn(a,""+f);break;case"onScroll":f!=null&&He("scroll",a);break;case"onScrollEnd":f!=null&&He("scrollend",a);break;case"onClick":f!=null&&(a.onclick=mf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),s=c.slice(2,g?c.length-7:void 0),b=a[wt]||null,b=b!=null?b[c]:null,typeof b=="function"&&a.removeEventListener(s,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(s,f,g);break e}c in a?a[c]=f:f===!0?a.setAttribute(c,""):Qi(a,c,f)}}}function fn(a,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",a),He("load",a);var f=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:it(a,s,b,w,c,null)}}g&&it(a,s,"srcSet",c.srcSet,c,null),f&&it(a,s,"src",c.src,c,null);return;case"input":He("invalid",a);var T=b=w=g=null,M=null,H=null;for(f in c)if(c.hasOwnProperty(f)){var ne=c[f];if(ne!=null)switch(f){case"name":g=ne;break;case"type":w=ne;break;case"checked":M=ne;break;case"defaultChecked":H=ne;break;case"value":b=ne;break;case"defaultValue":T=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,s));break;default:it(a,s,f,ne,c,null)}}xa(a,b,T,M,H,w,g,!1),ml(a);return;case"select":He("invalid",a),f=w=b=null;for(g in c)if(c.hasOwnProperty(g)&&(T=c[g],T!=null))switch(g){case"value":b=T;break;case"defaultValue":w=T;break;case"multiple":f=T;default:it(a,s,g,T,c,null)}s=b,c=w,a.multiple=!!f,s!=null?si(a,!!f,s,!1):c!=null&&si(a,!!f,c,!0);return;case"textarea":He("invalid",a),b=g=f=null;for(w in c)if(c.hasOwnProperty(w)&&(T=c[w],T!=null))switch(w){case"value":f=T;break;case"defaultValue":g=T;break;case"children":b=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:it(a,s,w,T,c,null)}Fe(a,f,g,b),ml(a);return;case"option":for(M in c)if(c.hasOwnProperty(M)&&(f=c[M],f!=null))switch(M){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:it(a,s,M,f,c,null)}return;case"dialog":He("beforetoggle",a),He("toggle",a),He("cancel",a),He("close",a);break;case"iframe":case"object":He("load",a);break;case"video":case"audio":for(f=0;f<nc.length;f++)He(nc[f],a);break;case"image":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"embed":case"source":case"link":He("error",a),He("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in c)if(c.hasOwnProperty(H)&&(f=c[H],f!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:it(a,s,H,f,c,null)}return;default:if(Au(s)){for(ne in c)c.hasOwnProperty(ne)&&(f=c[ne],f!==void 0&&pm(a,s,ne,f,c,void 0));return}}for(T in c)c.hasOwnProperty(T)&&(f=c[T],f!=null&&it(a,s,T,f,c,null))}function bN(a,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,w=null,T=null,M=null,H=null,ne=null;for(W in c){var oe=c[W];if(c.hasOwnProperty(W)&&oe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":M=oe;default:f.hasOwnProperty(W)||it(a,s,W,null,f,oe)}}for(var F in f){var W=f[F];if(oe=c[F],f.hasOwnProperty(F)&&(W!=null||oe!=null))switch(F){case"type":b=W;break;case"name":g=W;break;case"checked":H=W;break;case"defaultChecked":ne=W;break;case"value":w=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:W!==oe&&it(a,s,F,W,f,oe)}}ba(a,w,T,M,H,ne,b,g);return;case"select":W=w=T=F=null;for(b in c)if(M=c[b],c.hasOwnProperty(b)&&M!=null)switch(b){case"value":break;case"multiple":W=M;default:f.hasOwnProperty(b)||it(a,s,b,null,f,M)}for(g in f)if(b=f[g],M=c[g],f.hasOwnProperty(g)&&(b!=null||M!=null))switch(g){case"value":F=b;break;case"defaultValue":T=b;break;case"multiple":w=b;default:b!==M&&it(a,s,g,b,f,M)}s=T,c=w,f=W,F!=null?si(a,!!c,F,!1):!!f!=!!c&&(s!=null?si(a,!!c,s,!0):si(a,!!c,c?[]:"",!1));return;case"textarea":W=F=null;for(T in c)if(g=c[T],c.hasOwnProperty(T)&&g!=null&&!f.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:it(a,s,T,null,f,g)}for(w in f)if(g=f[w],b=c[w],f.hasOwnProperty(w)&&(g!=null||b!=null))switch(w){case"value":F=g;break;case"defaultValue":W=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&it(a,s,w,g,f,b)}xu(a,F,W);return;case"option":for(var ke in c)if(F=c[ke],c.hasOwnProperty(ke)&&F!=null&&!f.hasOwnProperty(ke))switch(ke){case"selected":a.selected=!1;break;default:it(a,s,ke,null,f,F)}for(M in f)if(F=f[M],W=c[M],f.hasOwnProperty(M)&&F!==W&&(F!=null||W!=null))switch(M){case"selected":a.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:it(a,s,M,F,f,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in c)F=c[De],c.hasOwnProperty(De)&&F!=null&&!f.hasOwnProperty(De)&&it(a,s,De,null,f,F);for(H in f)if(F=f[H],W=c[H],f.hasOwnProperty(H)&&F!==W&&(F!=null||W!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:it(a,s,H,F,f,W)}return;default:if(Au(s)){for(var st in c)F=c[st],c.hasOwnProperty(st)&&F!==void 0&&!f.hasOwnProperty(st)&&pm(a,s,st,void 0,f,F);for(ne in f)F=f[ne],W=c[ne],!f.hasOwnProperty(ne)||F===W||F===void 0&&W===void 0||pm(a,s,ne,F,f,W);return}}for(var B in c)F=c[B],c.hasOwnProperty(B)&&F!=null&&!f.hasOwnProperty(B)&&it(a,s,B,null,f,F);for(oe in f)F=f[oe],W=c[oe],!f.hasOwnProperty(oe)||F===W||F==null&&W==null||it(a,s,oe,F,f,W)}var mm=null,gm=null;function gf(a){return a.nodeType===9?a:a.ownerDocument}function E1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w1(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function ym(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var vm=null;function xN(){var a=window.event;return a&&a.type==="popstate"?a===vm?!1:(vm=a,!0):(vm=null,!1)}var O1=typeof setTimeout=="function"?setTimeout:void 0,SN=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,AN=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(a){return _1.resolve(null).then(a).catch(CN)}:O1;function CN(a){setTimeout(function(){throw a})}function wi(a){return a==="head"}function T1(a,s){var c=s,f=0,g=0;do{var b=c.nextSibling;if(a.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<f&&8>f){c=f;var w=a.ownerDocument;if(c&1&&ac(w.documentElement),c&2&&ac(w.body),c&4)for(c=w.head,ac(c),w=c.firstChild;w;){var T=w.nextSibling,M=w.nodeName;w[Ln]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=T}}if(g===0){a.removeChild(b),dc(s);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:f=c.charCodeAt(0)-48;else f=0;c=b}while(c);dc(s)}function bm(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":bm(c),ga(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function PN(a,s,c,f){for(;a.nodeType===1;){var g=c;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Ln])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=zr(a.nextSibling),a===null)break}return null}function EN(a,s,c){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=zr(a.nextSibling),a===null))return null;return a}function xm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function wN(a,s){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function zr(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return a}var Sm=null;function D1(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return a;s--}else c==="/$"&&s++}a=a.previousSibling}return null}function j1(a,s,c){switch(s=gf(c),a){case"html":if(a=s.documentElement,!a)throw Error(r(452));return a;case"head":if(a=s.head,!a)throw Error(r(453));return a;case"body":if(a=s.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function ac(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);ga(a)}var xr=new Map,N1=new Set;function yf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ka=ee.d;ee.d={f:ON,r:_N,D:TN,C:DN,L:jN,m:NN,X:kN,S:MN,M:RN};function ON(){var a=ka.f(),s=lf();return a||s}function _N(a){var s=Ye(a);s!==null&&s.tag===5&&s.type==="form"?Zx(s):ka.r(a)}var To=typeof document>"u"?null:document;function M1(a,s,c){var f=To;if(f&&typeof s=="string"&&s){var g=vn(s);g='link[rel="'+a+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),N1.has(g)||(N1.add(g),a={rel:a,crossOrigin:c,href:s},f.querySelector(g)===null&&(s=f.createElement("link"),fn(s,"link",a),Ot(s),f.head.appendChild(s)))}}function TN(a){ka.D(a),M1("dns-prefetch",a,null)}function DN(a,s){ka.C(a,s),M1("preconnect",a,s)}function jN(a,s,c){ka.L(a,s,c);var f=To;if(f&&a&&s){var g='link[rel="preload"][as="'+vn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+vn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+vn(c.imageSizes)+'"]')):g+='[href="'+vn(a)+'"]';var b=g;switch(s){case"style":b=Do(a);break;case"script":b=jo(a)}xr.has(b)||(a=p({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:a,as:s},c),xr.set(b,a),f.querySelector(g)!==null||s==="style"&&f.querySelector(ic(b))||s==="script"&&f.querySelector(sc(b))||(s=f.createElement("link"),fn(s,"link",a),Ot(s),f.head.appendChild(s)))}}function NN(a,s){ka.m(a,s);var c=To;if(c&&a){var f=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+vn(f)+'"][href="'+vn(a)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=jo(a)}if(!xr.has(b)&&(a=p({rel:"modulepreload",href:a},s),xr.set(b,a),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(sc(b)))return}f=c.createElement("link"),fn(f,"link",a),Ot(f),c.head.appendChild(f)}}}function MN(a,s,c){ka.S(a,s,c);var f=To;if(f&&a){var g=ti(f).hoistableStyles,b=Do(a);s=s||"default";var w=g.get(b);if(!w){var T={loading:0,preload:null};if(w=f.querySelector(ic(b)))T.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":s},c),(c=xr.get(b))&&Am(a,c);var M=w=f.createElement("link");Ot(M),fn(M,"link",a),M._p=new Promise(function(H,ne){M.onload=H,M.onerror=ne}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,vf(w,s,f)}w={type:"stylesheet",instance:w,count:1,state:T},g.set(b,w)}}}function kN(a,s){ka.X(a,s);var c=To;if(c&&a){var f=ti(c).hoistableScripts,g=jo(a),b=f.get(g);b||(b=c.querySelector(sc(g)),b||(a=p({src:a,async:!0},s),(s=xr.get(g))&&Cm(a,s),b=c.createElement("script"),Ot(b),fn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function RN(a,s){ka.M(a,s);var c=To;if(c&&a){var f=ti(c).hoistableScripts,g=jo(a),b=f.get(g);b||(b=c.querySelector(sc(g)),b||(a=p({src:a,async:!0,type:"module"},s),(s=xr.get(g))&&Cm(a,s),b=c.createElement("script"),Ot(b),fn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function k1(a,s,c,f){var g=(g=re.current)?yf(g):null;if(!g)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Do(c.href),c=ti(g).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Do(c.href);var b=ti(g).hoistableStyles,w=b.get(a);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,w),(b=g.querySelector(ic(a)))&&!b._p&&(w.instance=b,w.state.loading=5),xr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},xr.set(a,c),b||IN(g,a,c,w.state))),s&&f===null)throw Error(r(528,""));return w}if(s&&f!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=jo(c),c=ti(g).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Do(a){return'href="'+vn(a)+'"'}function ic(a){return'link[rel="stylesheet"]['+a+"]"}function R1(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function IN(a,s,c,f){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=a.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),fn(s,"link",c),Ot(s),a.head.appendChild(s))}function jo(a){return'[src="'+vn(a)+'"]'}function sc(a){return"script[async]"+a}function I1(a,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=a.querySelector('style[data-href~="'+vn(c.href)+'"]');if(f)return s.instance=f,Ot(f),f;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),Ot(f),fn(f,"style",g),vf(f,c.precedence,a),s.instance=f;case"stylesheet":g=Do(c.href);var b=a.querySelector(ic(g));if(b)return s.state.loading|=4,s.instance=b,Ot(b),b;f=R1(c),(g=xr.get(g))&&Am(f,g),b=(a.ownerDocument||a).createElement("link"),Ot(b);var w=b;return w._p=new Promise(function(T,M){w.onload=T,w.onerror=M}),fn(b,"link",f),s.state.loading|=4,vf(b,c.precedence,a),s.instance=b;case"script":return b=jo(c.src),(g=a.querySelector(sc(b)))?(s.instance=g,Ot(g),g):(f=c,(g=xr.get(b))&&(f=p({},c),Cm(f,g)),a=a.ownerDocument||a,g=a.createElement("script"),Ot(g),fn(g,"link",f),a.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,vf(f,c.precedence,a));return s.instance}function vf(a,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,w=0;w<f.length;w++){var T=f[w];if(T.dataset.precedence===s)b=T;else if(b!==g)break}b?b.parentNode.insertBefore(a,b.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(a,s.firstChild))}function Am(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function Cm(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var bf=null;function L1(a,s,c){if(bf===null){var f=new Map,g=bf=new Map;g.set(c,f)}else g=bf,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(a))return f;for(f.set(a,null),c=c.getElementsByTagName(a),g=0;g<c.length;g++){var b=c[g];if(!(b[Ln]||b[Ct]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(s)||"";w=a+w;var T=f.get(w);T?T.push(b):f.set(w,[b])}}return f}function $1(a,s,c){a=a.ownerDocument||a,a.head.insertBefore(c,s==="title"?a.querySelector("head > title"):null)}function LN(a,s,c){if(c===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function B1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var oc=null;function $N(){}function BN(a,s,c){if(oc===null)throw Error(r(475));var f=oc;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=Do(c.href),b=a.querySelector(ic(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=xf.bind(f),a.then(f,f)),s.state.loading|=4,s.instance=b,Ot(b);return}b=a.ownerDocument||a,c=R1(c),(g=xr.get(g))&&Am(c,g),b=b.createElement("link"),Ot(b);var w=b;w._p=new Promise(function(T,M){w.onload=T,w.onerror=M}),fn(b,"link",c),s.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(f.count++,s=xf.bind(f),a.addEventListener("load",s),a.addEventListener("error",s))}}function UN(){if(oc===null)throw Error(r(475));var a=oc;return a.stylesheets&&a.count===0&&Pm(a,a.stylesheets),0<a.count?function(s){var c=setTimeout(function(){if(a.stylesheets&&Pm(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=s,function(){a.unsuspend=null,clearTimeout(c)}}:null}function xf(){if(this.count--,this.count===0){if(this.stylesheets)Pm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Sf=null;function Pm(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Sf=new Map,s.forEach(zN,a),Sf=null,xf.call(a))}function zN(a,s){if(!(s.state.loading&4)){var c=Sf.get(a);if(c)var f=c.get(null);else{c=new Map,Sf.set(a,c);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var w=g[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),f=w)}f&&c.set(null,f)}g=s.instance,w=g.getAttribute("data-precedence"),b=c.get(w)||f,b===f&&c.set(null,g),c.set(w,g),this.count++,f=xf.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),s.state.loading|=4}}var lc={$$typeof:_,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function GN(a,s,c,f,g,b,w,T){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=da(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=da(0),this.hiddenUpdates=da(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function U1(a,s,c,f,g,b,w,T,M,H,ne,oe){return a=new GN(a,s,c,w,T,M,H,oe),s=1,b===!0&&(s|=24),b=Wn(3,null,null,s),a.current=b,b.stateNode=a,s=ip(),s.refCount++,a.pooledCache=s,s.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:s},cp(b),a}function z1(a){return a?(a=oo,a):oo}function G1(a,s,c,f,g,b){g=z1(g),f.context===null?f.context=g:f.pendingContext=g,f=hi(s),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=pi(a,f,s),c!==null&&(tr(c,a,s),$l(c,a,s))}function H1(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<s?c:s}}function Em(a,s){H1(a,s),(a=a.alternate)&&H1(a,s)}function q1(a){if(a.tag===13){var s=so(a,67108864);s!==null&&tr(s,a,67108864),Em(a,67108864)}}var Af=!0;function HN(a,s,c,f){var g=$.T;$.T=null;var b=ee.p;try{ee.p=2,wm(a,s,c,f)}finally{ee.p=b,$.T=g}}function qN(a,s,c,f){var g=$.T;$.T=null;var b=ee.p;try{ee.p=8,wm(a,s,c,f)}finally{ee.p=b,$.T=g}}function wm(a,s,c,f){if(Af){var g=Om(f);if(g===null)hm(a,s,f,Cf,c),F1(a,f);else if(FN(g,a,s,c,f))f.stopPropagation();else if(F1(a,f),s&4&&-1<YN.indexOf(a)){for(;g!==null;){var b=Ye(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=Kr(b.pendingLanes);if(w!==0){var T=b;for(T.pendingLanes|=2,T.entangledLanes|=2;w;){var M=1<<31-mn(w);T.entanglements[1]|=M,w&=~M}na(b),(Je&6)===0&&(sf=bt()+500,tc(0))}}break;case 13:T=so(b,2),T!==null&&tr(T,b,2),lf(),Em(b,2)}if(b=Om(f),b===null&&hm(a,s,f,Cf,c),b===g)break;g=b}g!==null&&f.stopPropagation()}else hm(a,s,f,null,c)}}function Om(a){return a=Ji(a),_m(a)}var Cf=null;function _m(a){if(Cf=null,a=Rr(a),a!==null){var s=o(a);if(s===null)a=null;else{var c=s.tag;if(c===13){if(a=l(s),a!==null)return a;a=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return Cf=a,null}function Y1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mr()){case Qa:return 2;case qs:return 8;case Fr:case hu:return 32;case Ys:return 268435456;default:return 32}default:return 32}}var Tm=!1,Oi=null,_i=null,Ti=null,cc=new Map,uc=new Map,Di=[],YN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function F1(a,s){switch(a){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":cc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(s.pointerId)}}function fc(a,s,c,f,g,b){return a===null||a.nativeEvent!==b?(a={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},s!==null&&(s=Ye(s),s!==null&&q1(s)),a):(a.eventSystemFlags|=f,s=a.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),a)}function FN(a,s,c,f,g){switch(s){case"focusin":return Oi=fc(Oi,a,s,c,f,g),!0;case"dragenter":return _i=fc(_i,a,s,c,f,g),!0;case"mouseover":return Ti=fc(Ti,a,s,c,f,g),!0;case"pointerover":var b=g.pointerId;return cc.set(b,fc(cc.get(b)||null,a,s,c,f,g)),!0;case"gotpointercapture":return b=g.pointerId,uc.set(b,fc(uc.get(b)||null,a,s,c,f,g)),!0}return!1}function K1(a){var s=Rr(a.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=l(c),s!==null){a.blockedOn=s,fr(a.priority,function(){if(c.tag===13){var f=er();f=Rn(f);var g=so(c,f);g!==null&&tr(g,c,f),Em(c,f)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Pf(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var c=Om(a.nativeEvent);if(c===null){c=a.nativeEvent;var f=new c.constructor(c.type,c);bl=f,c.target.dispatchEvent(f),bl=null}else return s=Ye(c),s!==null&&q1(s),a.blockedOn=c,!1;s.shift()}return!0}function V1(a,s,c){Pf(a)&&c.delete(s)}function KN(){Tm=!1,Oi!==null&&Pf(Oi)&&(Oi=null),_i!==null&&Pf(_i)&&(_i=null),Ti!==null&&Pf(Ti)&&(Ti=null),cc.forEach(V1),uc.forEach(V1)}function Ef(a,s){a.blockedOn===s&&(a.blockedOn=null,Tm||(Tm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KN)))}var wf=null;function X1(a){wf!==a&&(wf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){wf===a&&(wf=null);for(var s=0;s<a.length;s+=3){var c=a[s],f=a[s+1],g=a[s+2];if(typeof f!="function"){if(_m(f||c)===null)continue;break}var b=Ye(c);b!==null&&(a.splice(s,3),s-=3,_p(b,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function dc(a){function s(M){return Ef(M,a)}Oi!==null&&Ef(Oi,a),_i!==null&&Ef(_i,a),Ti!==null&&Ef(Ti,a),cc.forEach(s),uc.forEach(s);for(var c=0;c<Di.length;c++){var f=Di[c];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Di.length&&(c=Di[0],c.blockedOn===null);)K1(c),c.blockedOn===null&&Di.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],b=c[f+1],w=g[wt]||null;if(typeof b=="function")w||X1(c);else if(w){var T=null;if(b&&b.hasAttribute("formAction")){if(g=b,w=b[wt]||null)T=w.formAction;else if(_m(g)!==null)continue}else T=w.action;typeof T=="function"?c[f+1]=T:(c.splice(f,3),f-=3),X1(c)}}}function Dm(a){this._internalRoot=a}Of.prototype.render=Dm.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,f=er();G1(c,f,a,s,null,null)},Of.prototype.unmount=Dm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;G1(a.current,2,null,a,null,null),lf(),s[kt]=null}};function Of(a){this._internalRoot=a}Of.prototype.unstable_scheduleHydration=function(a){if(a){var s=Vs();a={blockedOn:null,target:a,priority:s};for(var c=0;c<Di.length&&s!==0&&s<Di[c].priority;c++);Di.splice(c,0,a),c===0&&K1(a)}};var W1=t.version;if(W1!=="19.1.1")throw Error(r(527,W1,"19.1.1"));ee.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(s),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var VN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{ua=_f.inject(VN),_n=_f}catch{}}return pc.createRoot=function(a,s){if(!i(a))throw Error(r(299));var c=!1,f="",g=dS,b=hS,w=pS,T=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks)),s=U1(a,1,!1,null,null,c,f,g,b,w,T,null),a[kt]=s.current,dm(a),new Dm(s)},pc.hydrateRoot=function(a,s,c){if(!i(a))throw Error(r(299));var f=!1,g="",b=dS,w=hS,T=pS,M=null,H=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(M=c.unstable_transitionCallbacks),c.formState!==void 0&&(H=c.formState)),s=U1(a,1,!0,s,c??null,f,g,b,w,T,M,H),s.context=z1(null),c=s.current,f=er(),f=Rn(f),g=hi(f),g.callback=null,pi(c,g,f),c=f,s.current.lanes=c,ei(s,c),na(s),a[kt]=s.current,dm(a),new Of(s)},pc.version="19.1.1",pc}var sA;function aM(){if(sA)return Mm.exports;sA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mm.exports=rM(),Mm.exports}var iM=aM();const sM=qr(iM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),oA=e=>{const t=lM(e);return t.charAt(0).toUpperCase()+t.slice(1)},kw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),cM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...u},d)=>C.createElement("svg",{ref:d,...uM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:kw("lucide",i),...!o&&!cM(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,p])=>C.createElement(h,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(e,t)=>{const n=C.forwardRef(({className:r,...i},o)=>C.createElement(fM,{ref:o,iconNode:t,className:kw(`lucide-${oM(oA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=oA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Rc=yt("bolt",dM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],pM=yt("bomb",hM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gM=yt("chevron-down",mM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lA=yt("chevron-right",yM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Tc=yt("chevron-up",vM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rw=yt("clock",bM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Iw=yt("copy",xM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],cA=yt("cpu",SM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],CM=yt("download",AM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uA=yt("eye",PM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],wM=yt("hand",EM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ov=yt("loader-circle",OM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],xy=yt("rocket",_M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DM=yt("rotate-ccw",TM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fA=yt("settings",jM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Yf=yt("shield-check",NM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Lm=yt("shield",MM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],RM=yt("skull",kM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Sy=yt("sword",IM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$M=yt("target",LM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],UM=yt("upload",BM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Lw=yt("user",zM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],dA=yt("wrench",GM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ft=yt("x",HM),wn=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",icon:Lm,effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",icon:pM,effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",icon:dA,targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:2,image:"/img/Interceptor.png",abilities:[{name:"Vigilant",description:"Can always intercept attacks in this lane, regardless of speed.",type:"PASSIVE",icon:Yf,effect:{type:"GRANT_KEYWORD",keyword:"ALWAYS_INTERCEPTS"}},{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",icon:Lm,effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",icon:Lm,scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",icon:RM,effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",icon:$M,targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",icon:Sy,effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",icon:Tc,effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",icon:Sy,effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",icon:lA,effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",icon:lA,effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",icon:dA,targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],qM=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD022",baseCardId:"CARD022",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD023",baseCardId:"CARD023",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],hA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},$i=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Ya=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const o in e.shipSections){const l=e.shipSections[o],u=$i(l),d={...l.stats[u]};if(t.indexOf(o)===1&&l.middleLaneBonus)for(const p in l.middleLaneBonus)d.hasOwnProperty(p)&&(d[p]+=l.middleLaneBonus[p]);r[o]=d}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const o of Object.values(r))i.handLimit+=o.Draw||0,i.discardLimit+=o.Discard||0,i.energyPerTurn+=o["Energy Per Turn"]||0,i.maxEnergy+=o["Max Energy"]||0,i.shieldsPerTurn+=o["Shields Per Turn"]||0,i.initialDeployment+=o["Initial Deployment"]||0,i.deploymentBudget+=o["Deployment Budget"]||0,i.cpuLimit+=o["CPU Control Value"]||0;return{totals:i,bySection:r}},Or=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const o=wn.find(y=>y.name===e.name);if(!o)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=o.attack,d=o.speed,h=o.shields,p=o.class;l.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(d+=y.mod.value),y.mod.stat==="shields"&&(h+=y.mod.value),y.mod.stat==="cost"&&(p+=y.mod.value)}),p=Math.max(0,p);let m={...e,attack:u,speed:d,maxShields:h,cost:p,baseAttack:o.attack,baseSpeed:o.speed,baseCost:o.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(m.attack+=y.value),y.stat==="speed"&&(m.speed+=y.value),y.stat==="cost"&&(m.cost=Math.max(0,m.cost+y.value))}),o.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&m.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:x,mod:S}=y.effect;let A=!1;if(x.type==="SHIP_SECTION_HULL_DAMAGED"&&x.location==="SAME_LANE"){const P=parseInt(t.slice(-1))-1,O=(n.name==="Player 1"?i.player1:i.player2)[P];if(O){const _=n.shipSections[O],N=$i(_);(N==="damaged"||N==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(m.attack+=S.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:x,mod:S}=y.effect;let A=0;if(x.type==="OWN_DAMAGED_SECTIONS")for(const P in n.shipSections){const E=n.shipSections[P],O=$i(E);(O==="damaged"||O==="critical")&&A++}A>0&&(S.stat==="attack"&&(m.attack+=S.value*A),S.stat==="speed"&&(m.speed+=S.value*A))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(x=>{x.stat==="attack"&&(m.attack+=x.value),x.stat==="speed"&&(m.speed+=x.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;wn.find(S=>S.name===y.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:P}=S.effect;A==="shields"?m.maxShields+=P:A==="attack"?m.attack+=P:A==="speed"&&(m.speed+=P)}})}),l.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(x=>{if(x.type==="PASSIVE"&&(x.effect.type==="GRANT_KEYWORD"&&m.keywords.add(x.effect.keyword),x.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=x.effect;S==="attack"&&(m.attack+=A),S==="speed"&&(m.speed+=A),S==="shields"&&(m.maxShields+=A)}})}),m},YM=(e,t)=>({...e,instanceId:t}),Mo=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],$w=e=>{const t=[];let n=0;return e.forEach(r=>{const i=qM.find(o=>o.id===r.id);if(i)for(let o=0;o<r.quantity;o++)t.push(YM(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},_v=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},FM=(e,t)=>{const n=Ya({shipSections:hA},[]).totals;return{name:e,shipSections:hA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:$w(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Ic=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},Bw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},Zo=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(o=>{const l=o.currentMaxShields,{maxShields:u}=Or(o,i,e,t,n);u>l&&(o.currentShields+=u-l),o.currentMaxShields=u,o.currentShields=Math.min(o.currentShields,u)});return r},ca=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},Dc=(e,t,n,r,i)=>{const o=e==="player1"?r:i,l=e==="player1"?i:r,u=[],h=!(typeof n.cost=="number"),{type:p,affinity:m,location:y,custom:x}=n.targeting;let S=null;if(h&&Object.values(o.dronesOnBoard).flat().some(O=>O.id===t.id)&&(S=ca(t.id,o),!S))return[];const A=(E,O)=>{Object.entries(E.dronesOnBoard).forEach(([_,N])=>{let j=!1;y==="ANY_LANE"&&(j=!0),h&&y==="SAME_LANE"&&(j=_===S),j&&N.forEach(D=>{let R=!0;if(x?.includes("DAMAGED_HULL")){const k=wn.find(U=>U.name===D.name);(!k||D.hull>=k.hull)&&(R=!1)}x?.includes("EXHAUSTED")&&(D.isExhausted||(R=!1)),R&&u.push({...D,lane:_,owner:O})})})},P=(E,O)=>{Object.keys(E.shipSections).forEach(_=>{u.push({id:_,owner:O,...E.shipSections[_]})})};if(p==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(o,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(p==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&P(o,e),(m==="ENEMY"||m==="ANY")&&P(l,e==="player1"?"player2":"player1");else if(p==="LANE")["lane1","lane2","lane3"].forEach(E=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:E,owner:e}),m==="ENEMY"||m==="ANY"){const O=e==="player1"?"player2":"player1";u.push({id:E,owner:O})}});else if(p==="DRONE_CARD"){const E=e==="player1"?r:i;E.activeDronePool.forEach(O=>{const _=wn.find(R=>R.name===O.name),N=E.appliedUpgrades[O.name]||[],j=N.filter(R=>R.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;_&&N.length<_.upgradeSlots&&j<D&&u.push({...O,id:O.name,owner:e})})}else if(p==="APPLIED_UPGRADE"){const E=m==="ENEMY"?l:o,O=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(E.dronesOnBoard).flat().forEach(_=>{(E.appliedUpgrades[_.name]||[]).length>0&&u.push({..._,owner:O})})}return u},Uw=(e,t,n,r,i)=>{const o=wn.find(h=>h.name===t.name);if(!o?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const d=o.abilities.filter(h=>h.type==="TRIGGERED"&&h.trigger==="ON_MOVE");if(d.length>0){const h=l.dronesOnBoard[r].findIndex(p=>p.id===t.id);if(h!==-1){const p=l.dronesOnBoard[r][h];d.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),p.statMods||(p.statMods=[]),m.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,p.statMods.push(y.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},zw=(e,t)=>{const n=wn.find(u=>u.name===t.name);if(!n?.abilities)return{newState:e,effects:[]};let r=JSON.parse(JSON.stringify(e));const i=[];let o=!1;return n.abilities.filter(u=>u.effect?.type==="AFTER_ATTACK").forEach(u=>{const{subEffect:d}=u.effect;if(d.type==="DESTROY_SELF")for(const h in r.dronesOnBoard){const p=r.dronesOnBoard[h].findIndex(m=>m.id===t.id);if(p!==-1){o=!0;const m=r.dronesOnBoard[h][p];i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', destroying itself.`}}),i.push({type:"EXPLOSION",payload:{targetId:t.id}}),r.dronesOnBoard[h]=r.dronesOnBoard[h].filter(y=>y.id!==t.id),Object.assign(r,Ic(r,m));break}}else if(d.type==="PERMANENT_STAT_MOD")for(const h in r.dronesOnBoard){const p=r.dronesOnBoard[h].findIndex(m=>m.id===t.id);if(p!==-1){o=!0,r.dronesOnBoard[h][p].statMods||(r.dronesOnBoard[h][p].statMods=[]),i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', gaining a permanent +${d.mod.value} ${d.mod.stat}.`}}),r.dronesOnBoard[h][p].statMods.push(d.mod);break}}}),{newState:o?r:e,effects:i}},Ay=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>$i(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},Gw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const o=wn.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=o.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const d=t.class;let h=0,p=0;return n===1?(p=Math.min(e.initialDeploymentBudget,d),h=d-p):(p=Math.min(e.deploymentBudget,d),h=d-p),e.energy<h?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${h} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:p,energyCost:h}},Hw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},Tv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const o=_v(t,e,n)-r.allocatedShields;return o<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:o}},KM=(e,t,n)=>{const{removals:r,additions:i}=t,o={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{o.shipSections[l]={...o.shipSections[l],allocatedShields:o.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{o.shipSections[l]={...o.shipSections[l],allocatedShields:o.shipSections[l].allocatedShields+u}}),o},VM=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")Hw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const o=Tv(e,i,n);o.valid&&r.push({id:i,name:i,maxAvailable:o.maxAvailable})}}),r},XM=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,o=Tv(r,n,i);return!o.valid||e.shieldsToAllocate<=0?{success:!1,error:o.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},WM=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,o=Ya(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(d=>{l[d]={...n.shipSections[d],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:o,playerId:t}},QM=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],o=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,d=Ya(o,l).totals.shieldsPerTurn,h=JSON.parse(JSON.stringify(o.shipSections)),p=Object.keys(h);let m=d,y=0,x=0;for(;m>0&&x<100;){const E=p[y%p.length],O=h[E],_=_v(E,o,l);O.allocatedShields<_&&(O.allocatedShields++,m--),y++,x++}const S={...o,shipSections:h},P={success:!0,newPhase:"deployment",firstPlayer:Gd(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(P.player1State=i,P.player2State=S):(P.player1State=S,P.player2State=i),P},ZM=(e,t,n,r,i,o,l)=>{const{effect:u,cost:d}=e,h=r.player1;let p="",m="Ability effect applied.";e.targeting?.type==="LANE"?p=`Lane ${n.id.slice(-1)}`:n&&(p=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${p}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${p}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${p}.`),o&&o({player:h.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:p,outcome:m});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(d.energy&&(y.player1.energy-=d.energy),d.exhausts)for(const S in y.player1.dronesOnBoard){const A=y.player1.dronesOnBoard[S].findIndex(P=>P.id===t.id);if(A!==-1){y.player1.dronesOnBoard[S][A].isExhausted=!0;break}}const x=Ww(u,t,n,y,i,{resolveAttackCallback:l});return y.player1=x.newPlayerStates.player1,y.player2=x.newPlayerStates.player2,{newPlayerStates:y,shouldEndTurn:!u.goAgain}},JM=(e,t,n,r,i,o,l)=>{const{cost:u,effect:d}=e,h=r.player1;o&&o({player:h.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const p={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.player1.energy-=u.energy,d.type==="REALLOCATE_SHIELDS")return{newPlayerStates:p,shouldEndTurn:!1,requiresShieldReallocation:!0};{const m=Qw(d,t,n,p,i,{resolveAttackCallback:l});if(p.player1=m.newPlayerStates.player1,p.player2=m.newPlayerStates.player2,m.needsDiscardSelection)return{newPlayerStates:p,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0}}}return{newPlayerStates:p,shouldEndTurn:!0}},qw=(e,t,n,r,i,o,l)=>{const u=Gw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Ya(r,o.player1));if(!u.isValid)return{success:!1,error:u.reason,message:u.message,newPlayerState:r};const{budgetCost:d,energyCost:h}=u;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const p=JSON.parse(JSON.stringify(r)),m={...p.dronesOnBoard,[t]:[...p.dronesOnBoard[t],{...e,id:0}]},y={...p,dronesOnBoard:m},x=Or(e,t,y,i,o),S={...e,id:Date.now(),statMods:[],currentShields:x.maxShields,currentMaxShields:x.maxShields,hull:e.hull,isExhausted:!1};return p.dronesOnBoard[t].push(S),p.deployedDroneCounts={...p.deployedDroneCounts,[e.name]:(p.deployedDroneCounts[e.name]||0)+1},n===1?p.initialDeploymentBudget-=d:p.deploymentBudget-=d,p.energy-=h,p.dronesOnBoard=Zo(p,i,o),{success:!0,newPlayerState:p,deployedDrone:S}},ek=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return Ay(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):Ay(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},tk=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=ca(e.id,t);if(!i)return[];const o=Or(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(d=>{const h=Or(d,i,n,t,r);return!d.isExhausted&&(h.speed>o.speed||h.keywords.has("ALWAYS_INTERCEPTS"))}).map(d=>d.id)},nk=(e,t,n,r,i,o,l)=>{const{addLogEntry:u}=l,d=e.class;let h=0;n===1?h=Math.min(r.initialDeploymentBudget,d):h=Math.min(r.deploymentBudget,d);const p=d-h;if(r.energy<p)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-h:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-h:r.deploymentBudget,energy:r.energy-p};return y.dronesOnBoard=Zo(y,i,o),{success:!0,newPlayerState:y,deployedDrone:m,costs:{energy:p,budget:h}}},rk=(e,t,n)=>{const{attacker:r,target:i,targetType:o,lane:l}=e,u=Or(r,l,t.player2,t.player1,n),d=t.player1.dronesOnBoard[l].filter(h=>{const p=Or(h,l,t.player1,t.player2,n);return!h.isExhausted&&(p.speed>u.speed||p.keywords.has("ALWAYS_INTERCEPTS"))&&(o!=="drone"||h.id!==i.id)});return{hasInterceptors:d.length>0,interceptors:d,attackDetails:e}},Dv=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},ak=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},ik=(e,t)=>{const n=Dv(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},sk=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const o=Gd(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=o,r.firstPlayerOfRound=o,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:o});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},ok=(e,t,n,r)=>{const i=Cy(e.player1,t,n,e.player2,e.placedSections),o=Cy(e.player2,t,r,e.player1,e.opponentPlacedSections),l=Py(i,n.totals.handLimit),u=Py(o,r.totals.handLimit),d=Gd(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),h={...e,turn:t,turnPhase:"deployment",currentPlayer:d,firstPlayerOfRound:d,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},p=[{type:"ROUND_START",turn:t,firstPlayer:d},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:h,uiEffects:p}},Yw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(o=>{const l=Or(o,i,e,t,n);return{...o,statMods:o.statMods?o.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},Cy=(e,t,n,r,i)=>({...Yw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),Py=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},lk=(e,t,n)=>{const{player1:r,player2:i,turn:o,turnPhase:l,passInfo:u,placedSections:d,opponentPlacedSections:h}=e,{addLogEntry:p,setPlayer2:m,setPendingAttack:y,endTurn:x,endDeploymentPhase:S,endActionPhase:A,setPassInfo:P}=n;let E;return l==="deployment"&&!u.player2Passed?E=t.handleOpponentTurn({player1:r,player2:i,turn:o,opponentPlacedSections:h,placedSections:d,getShipStatus:$i,calculateEffectiveShipStats:Ya,calculateEffectiveStats:Or,addLogEntry:p}):l==="action"&&!u.player2Passed&&(E=t.handleOpponentAction({player1:r,player2:i,placedSections:d,opponentPlacedSections:h,getShipStatus:$i,getLaneOfDrone:ca,getValidTargets:Dc,calculateEffectiveStats:Or,addLogEntry:p})),E||null},ck=(e,t,n)=>{const{player1:r,player2:i,turn:o,turnPhase:l,placedSections:u,opponentPlacedSections:d}=t,{addLogEntry:h,setPlayer2:p,setPendingAttack:m,endTurn:y,endDeploymentPhase:x,endActionPhase:S,setPassInfo:A,resolveCardPlay:P}=n;if(e.type==="pass"){const E=!t.passInfo.player1Passed,O={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(E?"player2":null)};return A(O),O.player1Passed?l==="deployment"?x():l==="action"&&S():y("player2"),{newPassInfo:O}}else if(e.type==="deploy"){const{droneToDeploy:E,targetLane:O,logContext:_}=e.payload;h({player:i.name,actionType:"DEPLOY",source:E.name,target:O,outcome:`Deployed to ${O}.`},"aiDeploymentDeploy",_);const N=qw(E,O,i,r,o,{player1:u,player2:d});return N.success&&(p(N.newPlayerState),y("player2")),{deployedDrone:N.deployedDrone}}else if(e.type==="action"){const E=e.payload,{logContext:O}=e;switch(E.type){case"play_card":P(E.card,E.target,"player2",O);break;case"attack":m({attacker:E.attacker,target:E.target,targetType:E.targetType,lane:E.attacker.lane,attackingPlayer:"player2",aiContext:O});break;case"move":{const{drone:_,fromLane:N,toLane:j}=E;h({player:i.name,actionType:"MOVE",source:_.name,target:j,outcome:`Moved from ${N} to ${j}.`},"aiActionMove",O);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[N]=D.dronesOnBoard[N].filter(U=>U.id!==_.id);const R={..._,isExhausted:!0};D.dronesOnBoard[j].push(R);const{newState:k}=Uw(D,R,N,j,h);k.dronesOnBoard=Zo(k,r,{player1:u,player2:d}),p(k),y("player2");break}default:y("player2");break}return{action:E}}return null},uk=(e,t,n,r,i,o,l,u)=>{const{cost:d,effect:h}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=d,x.hand=x.hand.filter(E=>E.instanceId!==e.instanceId),x.discardPile.push(e);const S=new Set(t.map(E=>E.id));x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(E=>!S.has(E.id));const A=t.map(E=>({...E,isExhausted:E.isExhausted||!h.properties?.includes("DO_NOT_EXHAUST")}));x.dronesOnBoard[r].push(...A),p({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(E=>E.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let P=x;return A.forEach(E=>{const{newState:O}=m(P,E,n,r,p);P=O}),P.dronesOnBoard=y(P,o,l),{newPlayerState:P,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},fk=(e,t,n,r,i,o,l,u)=>{const{cost:d,effect:h}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=d,x.hand=x.hand.filter(P=>P.instanceId!==e.instanceId),x.discardPile.push(e),x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(P=>P.id!==t.id);const S={...t,isExhausted:h.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};x.dronesOnBoard[r].push(S),p({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(x,S,n,r,p);return A.dronesOnBoard=y(A,o,l),{newPlayerState:A,shouldEndTurn:!1,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},dk=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Fw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],o=$i(i);(o==="damaged"||o==="critical")&&n++}return n},hk=(e,t,n,r,i,o)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:d,resolveAttackCallback:h}=o,p=t?t.name||t.id:"N/A";let m="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(m=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(m=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(m=`Healed ${y.value} hull on ${p}.`),y.type==="HEAL_SHIELDS"&&(m=`Healed ${y.value} shields on ${p}.`),y.type==="READY_DRONE"&&(m=`Readied ${p}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?m=`Dealt ${y.value} damage to filtered targets in ${p}.`:m=`Dealt ${y.value} damage to ${p}.`),y.type==="MODIFY_STAT"){const A=y.mod,P=A.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${p} a ${A.value>0?"+":""}${A.value} ${A.stat} bonus${P}.`}if(y.type==="REPEATING_EFFECT"){const A=r[n],P=Fw(y.condition,A);m=`Drew ${P} card(s) and gained ${P} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:p,outcome:m});let x=dk(e,n,r);const S=pk(e.effect,t,n,x,i,o,e);if(!S.needsCardSelection){const A=Kw(e,n,S.newPlayerStates);return{newPlayerStates:A.newPlayerStates,shouldEndTurn:A.shouldEndTurn,additionalEffects:S.additionalEffects||[],needsCardSelection:!1}}return{newPlayerStates:x,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],needsCardSelection:S.needsCardSelection}},Kw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const o=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:o}},pk=(e,t,n,r,i,o,l=null)=>e.effects?mk(e,t,n,r,i,o,l):Vw(e,t,n,r,i,o,l),mk=(e,t,n,r,i,o,l=null)=>{let u=r,d=[];if(e.type==="REPEATING_EFFECT"){const h=Fw(e.condition,u[n]);for(let p=0;p<h;p++)for(const m of e.effects){const y=Vw(m,t,n,u,i,o,l);u=y.newPlayerStates,y.additionalEffects&&d.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:d}},Vw=(e,t,n,r,i,o,l=null)=>{switch(e.type){case"DRAW":return Nv(e,null,t,n,r);case"SEARCH_AND_DRAW":return Xw(e,null,t,n,r);case"GAIN_ENERGY":return gk(e,n,r,i);case"READY_DRONE":return yk(e,t,n,r);case"HEAL_HULL":return jv(e,null,t,n,r);case"HEAL_SHIELDS":return vk(e,t,n,r);case"DAMAGE":return zd(e,null,t,n,r,i,o,l);case"DESTROY":return xk(e,t,n,r,o);case"MODIFY_STAT":return Sk(e,t,n,r);case"MODIFY_DRONE_BASE":return Ak(e,t,n,r);case"DESTROY_UPGRADE":return Ck(e,t,n,r);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},gk=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=o[t],u=t==="player1"?r.player1:r.player2,d=Ya(l,u).totals,h=Math.min(d.maxEnergy,l.energy+e.value);return l.energy=h,{newPlayerStates:o,additionalEffects:[]}},yk=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=o[n];for(const u in l.dronesOnBoard){const d=l.dronesOnBoard[u].findIndex(h=>h.id===t.id);if(d!==-1){l.dronesOnBoard[u][d].isExhausted=!1;break}}return{newPlayerStates:o,additionalEffects:[]}},vk=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=o[t.owner||n];for(const u in l.dronesOnBoard){const d=l.dronesOnBoard[u].findIndex(h=>h.id===t.id);if(d!==-1){const h=l.dronesOnBoard[u][d];h.currentShields=Math.min(h.currentMaxShields||h.shields,h.currentShields+e.value);break}}return{newPlayerStates:o,additionalEffects:[]}},bk=(e,t,n,r,i,o=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,h=(o?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[h].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${h} ${u}`),console.log(`[DEBUG] Drones in ${h} ${u}:`,m.map(O=>`${O.name}(${O.id}) [${O.hull}hp, ${O.speed}spd]`));const{stat:y,comparison:x,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},E=A[h].dronesOnBoard[u]||[];for(let O=E.length-1;O>=0;O--){const _=E[O];let N=!1;if(x==="GTE"&&_[y]>=S&&(N=!0),x==="LTE"&&_[y]<=S&&(N=!0),console.log(`[DEBUG] ${_.name} ${y}=${_[y]} ${x} ${S} = ${N}`),N){console.log(`[DEBUG] Applying ${e.value} damage to ${_.name}`);const j=_.currentShields||0;let D=e.value;const R=Math.min(D,j);_.currentShields=(_.currentShields||0)-R,D-=R,D>0&&(_.hull-=D),_.hull<=0&&(console.log(`[DEBUG] ${_.name} destroyed`),E.splice(O,1))}}return{newPlayerStates:A,additionalEffects:[]}}else{const u=r[t.owner],d=ca(t.id,u);if(d){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=h[t.owner].dronesOnBoard[d]||[],y=m.find(x=>x.id===t.id);if(y){let x=e.value,S=0,A=x;if(e.damageType!=="PIERCING"&&(S=Math.min(x,y.currentShields),A-=S,y.currentShields-=S),y.hull-=A,console.log(`[DEBUG] Applied ${A} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){console.log(`[DEBUG] ${y.name} destroyed`);const P=m.findIndex(E=>E.id===t.id);P>=0&&m.splice(P,1)}}return{newPlayerStates:h,additionalEffects:[]}}}return{newPlayerStates:r,additionalEffects:[]}},xk=(e,t,n,r,i)=>{const{explosionCallback:o}=i,l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},d=l[n==="player1"?"player2":"player1"];if(e.scope==="LANE"&&t.id){const h=t.id;(d.dronesOnBoard[h]||[]).forEach(m=>{o&&o(m.id);const y=Ic(d,m);d.deployedDroneCounts={...d.deployedDroneCounts||{},...y.deployedDroneCounts}}),d.dronesOnBoard[h]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const h=ca(t.id,d);if(h){const p=d.dronesOnBoard[h].find(m=>m.id===t.id);if(p){o&&o(p.id);const m=Ic(d,p);d.deployedDroneCounts={...d.deployedDroneCounts||{},...m.deployedDroneCounts},d.dronesOnBoard[h]=d.dronesOnBoard[h].filter(y=>y.id!==t.id)}}}return{newPlayerStates:l,additionalEffects:[]}},Sk=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=o[t.owner||n],u=e.mod;if(t.id&&t.id.startsWith("lane")){const d=t.id;l.dronesOnBoard[d]&&l.dronesOnBoard[d].forEach(h=>{h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const d in l.dronesOnBoard){const h=l.dronesOnBoard[d].findIndex(p=>p.id===t.id);if(h!==-1){const p=l.dronesOnBoard[d][h];p.statMods||(p.statMods=[]),p.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:o,additionalEffects:[]}},Ak=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=o[n],u=t.name,d=l.appliedUpgrades[u]||[],h={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(h.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...d,h]},{newPlayerStates:o,additionalEffects:[]}},Ck=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=o[n==="player1"?"player2":"player1"],{droneName:d,instanceId:h}=t;if(u.appliedUpgrades[d]){const p=u.appliedUpgrades[d].filter(m=>m.instanceId!==h);p.length>0?u.appliedUpgrades[d]=p:delete u.appliedUpgrades[d]}return{newPlayerStates:o,additionalEffects:[]}},zd=(e,t,n,r,i,o,l,u=null)=>{const{resolveAttackCallback:d}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return bk(e,n,r,i,l,u?.targeting);const h=n.owner==="player1"?i.player1:i.player2,p=ca(n.id,h);if(p&&d){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:p,damageType:e.damageType},y=Jw(m,i,o,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[]}}return{newPlayerStates:i,additionalEffects:[]}},jv=(e,t,n,r,i,o,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1";if(e.scope==="LANE"){const h=n.id;u[d].dronesOnBoard[h]&&u[d].dronesOnBoard[h].forEach(p=>{const m=wn.find(y=>y.name===p.name);m&&p.hull<m.hull&&(p.hull=Math.min(m.hull,p.hull+e.value))})}else{const h=wn.find(m=>m.name===n.name),p=ca(n.id,u[d]);if(p){const m=u[d].dronesOnBoard[p].findIndex(y=>y.id===n.id);m!==-1&&(u[d].dronesOnBoard[p][m].hull=Math.min(h.hull,u[d].dronesOnBoard[p][m].hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},Nv=(e,t,n,r,i,o,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1",h=u[d];let p=[...h.deck],m=[...h.hand],y=[...h.discardPile];const x=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<x;A++){if(p.length===0)if(y.length>0)p=[...y].sort(()=>.5-Math.random()),y=[];else break;p.length>0&&m.push(p.pop())}u[d]={...h,deck:p,hand:m,discardPile:y};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},Pk=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),Xw=(e,t,n,r,i,o,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},d=r||"player1",h=u[d];let p=[...h.deck],m=[...h.discardPile],y,x;if(e.filter)p.length===0&&m.length>0&&(p=[...m.sort(()=>.5-Math.random())],m=[]),y=p.filter(A=>Pk(A,e.filter)).slice(0,e.searchCount),x=p.filter(A=>!y.includes(A));else{const S=e.searchCount;p.length<S&&m.length>0&&(p=[...p,...m.sort(()=>.5-Math.random())],m=[]),y=p.slice(-e.searchCount).reverse(),x=p.slice(0,-e.searchCount)}if(d==="player2"){const S=Ek(y,e.drawCount,u),A=y.filter(O=>!S.includes(O)),P=[...h.hand,...S];let E=[...x,...A];return e.shuffleAfter&&(E=E.sort(()=>.5-Math.random())),u[d]={...h,deck:E,hand:P,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:x,discardPile:m,filter:e.filter}}},Ek=(e,t,n,r)=>e.map(o=>({card:o,score:wk(o,n.player2,n.player1)})).sort((o,l)=>l.score-o.score).slice(0,t).map(o=>o.card),wk=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},Ww=(e,t,n,r,i,o)=>{switch(e.type){case"HEAL":return jv(e,t,n,"player1",r);case"DAMAGE":return zd(e,t,n,"player1",r,i,o);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},Qw=(e,t,n,r,i,o)=>{const l={name:t};switch(e.type){case"DAMAGE":return zd(e,l,n,"player1",r,i,o);case"RECALL_DRONE":return Zw(e,t,n,r,i);case"DRAW_THEN_DISCARD":return Nv(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},Zw=(e,t,n,r,i,o)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=ca(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(d=>d.id!==n.id),Object.assign(l.player1,Bw(l.player1,n)),l.player1.dronesOnBoard=Zo(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[]}},Jw=(e,t,n,r,i,o)=>{const{attacker:l,target:u,targetType:d,interceptor:h,attackingPlayer:p,abilityDamage:m,goAgain:y,damageType:x,lane:S}=e,A=m!==void 0,P=h||u,E=h?"drone":d,O=p,_=P.owner||(O==="player1"?"player2":"player1"),N=t[O],j=t[_];let D=null,R=null;!A&&l&&l.id&&(D=ca(l.id,N),R=Or(l,D,N,j,n));let k=m??(R?Math.max(0,R.attack):0),U=x||(l?l.damageType:void 0);R&&R.keywords&&R.keywords.has("PIERCING")&&(U="PIERCING"),E==="section"&&!m&&l&&l.name&&wn.find(Y=>Y.name===l.name)?.abilities?.forEach(Y=>{Y.type==="PASSIVE"&&Y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(k+=Y.effect.value)});let Z=0,q=0,J=!1,ce=0,se=0;if(E==="drone"){let K=null;for(const Y in j.dronesOnBoard)if(K=j.dronesOnBoard[Y].find(le=>le.id===P.id),K)break;if(K){let Y=k;U!=="PIERCING"&&(Z=Math.min(k,K.currentShields),Y-=Z),q=Math.min(Y,K.hull),J=K.hull-q<=0,ce=K.currentShields-Z,se=J?0:K.hull-q}}else{const K=j.shipSections[P.name];if(K){let Y=k;U!=="PIERCING"&&(Z=Math.min(k,K.allocatedShields),Y-=Z),q=Math.min(Y,K.hull),J=K.hull-q<=0,ce=K.allocatedShields-Z,se=J?0:K.hull-q}}const te=`Dealt ${Z} shield and ${q} hull damage to ${P.name}.`+(E==="drone"?J?` ${P.name} Destroyed.`:` ${P.name} has ${ce} shields and ${se} hull left.`:""),$=D||(S?S.replace("lane","Lane "):null),ee=E==="drone"?`${P.name} (${$})`:P.name,pe=l&&l.name?`${l.name} (${$})`:"Card Effect";r&&r({player:t[O].name,actionType:"ATTACK",source:pe,target:ee,outcome:te});const he={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(E==="drone"){let K=!1;for(const Y in he[_].dronesOnBoard){const le=he[_].dronesOnBoard[Y].findIndex(ye=>ye.id===P.id);if(le!==-1){if(he[_].dronesOnBoard[Y][le].hull-q<=0){K=!0,i&&i(P.id);const ye=he[_].dronesOnBoard[Y][le];he[_].dronesOnBoard[Y]=he[_].dronesOnBoard[Y].filter(z=>z.id!==P.id),Object.assign(he[_],Ic(he[_],ye))}else o&&o(P.id),he[_].dronesOnBoard[Y][le].hull-=q,he[_].dronesOnBoard[Y][le].currentShields-=Z;break}}if(K){const Y=_==="player1"?he.player2:he.player1;he[_].dronesOnBoard=Zo(he[_],Y,n)}}else{he[_].shipSections[P.name].hull-=q,he[_].shipSections[P.name].allocatedShields-=Z;const K=_==="player1"?n.player1:n.player2,Y=Ya(he[_],K).totals;he[_].energy>Y.maxEnergy&&(he[_].energy=Y.maxEnergy)}let I=[];if(!A&&l&&l.id){let K=!1;for(const Y in he[O].dronesOnBoard){const le=he[O].dronesOnBoard[Y].findIndex(ye=>ye.id===l.id);if(le!==-1){he[O].dronesOnBoard[Y][le].isExhausted=!0,K=!0;break}}if(K){const Y=zw(he[O],l);he[O]=Y.newState,I=Y.effects}}if(h){const K=O==="player1"?"player2":"player1";for(const Y in he[K].dronesOnBoard){const le=he[K].dronesOnBoard[Y].findIndex(ye=>ye.id===h.id);if(le!==-1){Or(he[K].dronesOnBoard[Y][le],Y,he[K],he[O],n).keywords.has("DEFENDER")||(he[K].dronesOnBoard[Y][le].isExhausted=!0);break}}}return{newPlayerStates:he,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:D||S,targetName:P.name,targetType:E,interceptorName:h?h.name:null,shieldDamage:Z,hullDamage:q,wasDestroyed:J,remainingShields:ce,remainingHull:se,outcome:te,shouldEndTurn:!y},afterAttackEffects:I}},Ok=(e,t)=>{const n=Ya(e,t).totals;let r=[...e.deck],i=[...e.hand],o=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(o.length>0)r=[...o].sort(()=>.5-Math.random()),o=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:o}},Gd=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),_k=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let o=0;o<i;o++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},Tk=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,o=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:o,player2DiscardCount:o?t.hand.length-r.handLimit:0}},Dk=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],o=t[r],l=i.hand.length>o.totals.handLimit,u=l?i.hand.length-o.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:o.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},jk=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let o=0;o<i;o++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},Nk=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let o=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(d=>d.instanceId===l.instanceId||d.name===l.name&&d.id===l.id);if(u!==-1&&o<t){const d=r.splice(u,1)[0];i.push(d),o++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),d=r.splice(u,1)[0];i.push(d),o++}return{...e,hand:r,discardPile:i,discardCount:o}},e2=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let o=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||o.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const d=parseInt(u.replace("lane",""),10);Math.abs(l-d)===1&&o.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&o.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{o.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const d=parseInt(u.replace("lane",""),10);Math.abs(l-d)===1&&o.push({id:u,owner:"player1"})})}return o},t2=(e,t)=>t.activeDronePool.map(n=>{const r=wn.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],o=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&o<l?{...n,id:n.name}:null}).filter(Boolean),n2=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(o=>{t.dronesOnBoard[o].length>0&&n.push({id:o,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(o=>{n.push({...o,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(o=>{o!==i&&n.push({id:o,owner:"player1"})}),n},Mk=(e,t,n,r,i,o)=>{let l=[],u=[];return e?l=Dc("player1",e.drone,e.ability,i,o):t?l=Dc("player1",{id:t.sectionName},t.ability,i,o):n?u=e2(n,i):r&&(r.type==="Upgrade"?u=t2(r,i):r.effect.type==="MULTI_MOVE"?u=n2(n,i):u=Dc("player1",null,r,i,o)),{validAbilityTargets:l,validCardTargets:u}},kk=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),Rk=(e,t,n,r)=>{const i=Dv(e,t,n,r),o=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?o.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&o.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&o.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:o}},_e={initialPlayerState:FM,buildDeckFromList:$w,getEffectiveSectionMaxShields:_v,getShipStatus:$i,onDroneDestroyed:Ic,onDroneRecalled:Bw,checkWinCondition:Ay,calculateAfterAttackStateAndEffects:zw,applyOnMoveEffects:Uw,updateAuras:Zo,getLaneOfDrone:ca,getValidTargets:Dc,calculateAllValidTargets:Mk,calculateMultiSelectTargets:e2,calculateUpgradeTargets:t2,calculateMultiMoveTargets:n2,validateDeployment:Gw,validateShieldRemoval:Hw,validateShieldAddition:Tv,executeShieldReallocation:KM,getValidShieldReallocationTargets:VM,processShieldAllocation:XM,processResetShieldAllocation:WM,processEndShieldAllocation:QM,resolveAttack:Jw,resolveAbility:ZM,resolveShipAbility:JM,executeDeployment:qw,resolveCardPlay:hk,finishCardPlay:Kw,resolveMultiMove:uk,resolveSingleMove:fk,checkGameStateForWinner:ek,calculatePotentialInterceptors:tk,calculateAiInterception:rk,calculateTurnTransition:Dv,calculatePassTransition:ak,readyDronesAndRestoreShields:Yw,calculateNewRoundPlayerState:Cy,drawToHandLimit:Py,drawPlayerCards:Ok,determineFirstPlayer:Gd,enforceHandLimit:_k,checkHandLimitCompliance:Tk,checkHandLimitViolations:Dk,enforceHandLimits:jk,processDiscardPhase:Nk,processTurnTransition:ik,processPhaseChange:sk,processRoundStart:ok,createExplosionEffect:kk,createTurnEndEffects:Rk,resolveUnifiedDamageEffect:zd,resolveUnifiedHealEffect:jv,resolveUnifiedDrawEffect:Nv,resolveSearchAndDrawEffect:Xw,resolveDroneAbilityEffect:Ww,resolveShipAbilityEffect:Qw,resolveShipRecallEffect:Zw,executeAiDeployment:nk,executeAiTurn:lk,executeAiAction:ck},mc=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:_e,startingDecklist:Mo},Symbol.toStringTag,{value:"Module"})),Ik="modulepreload",Lk=function(e){return"/"+e},pA={},ra=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=d(n.map(h=>{if(h=Lk(h),h in pA)return;pA[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Ik,p||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((x,S)=>{y.addEventListener("load",x),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};class $k{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log("💾 GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(`💾 Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(`💾 Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const Bk=new $k;class Xc{constructor(t){this.gameStateManager=t,this.cache=Bk,this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log("🎯 GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const o=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),d=o[l],h=o[u],p=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,d),S=Or(t,n,m?d:h,m?h:d,p);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",o=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(o);if(l)return l;const u=Ya(t,n);return this.cache.set(o,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(o=>o.id===t.id||o.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),o=n[r],l=n[i],u=(o.dronesOnBoard[t]||[]).map(h=>({...h,effectiveStats:this.getEffectiveStats(h,t),isPlayer:!0})),d=(l.dronesOnBoard[t]||[]).map(h=>({...h,effectiveStats:this.getEffectiveStats(h,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:d,hasGuardian:this.hasGuardianInLane(t,d)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let o=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(o+=i.middleLaneBonus["Shields Per Turn"]),o}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const Uk=Object.freeze(Object.defineProperty({__proto__:null,default:Xc},Symbol.toStringTag,{value:"Module"}));class zk{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null}initialize(t,n,r,i=null,o=null){this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=o,o&&(this.gameDataService=new Xc(o),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),console.log("🤖 AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log("🔗 AIPhaseProcessor connected to ActionProcessor for execution")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const d=this.dronePool?.find(h=>h.name===u);return d||console.warn(`⚠️ AI personality references unknown drone: ${u}`),d}).filter(u=>u),console.log(`🎯 Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const l=r.map(u=>u.name).join(", ");console.log(`🎯 Mapped drones: ${l}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(`🎯 Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error("❌ Not enough drones available for AI selection:",r.length),n&&n.dronePool){const l=n.dronePool.filter(u=>!this.dronePool?.find(d=>d.name===u));l.length>0&&console.error(`❌ Missing drones from collection: ${l.join(", ")}`),console.error(`❌ Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(`❌ Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),o=i.map(l=>l.name).join(", ");return console.log(`🤖 AI selected drones: ${o}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(d=>n.preferredDrones.includes(d.name)),u=Math.min(3,l.length);r=l.slice(0,u),console.log(`🎯 AI selected ${r.length} preferred drones:`,r.map(d=>d.name).join(", "))}const i=t.filter(l=>!r.includes(l)),o=5-r.length;if(o>0){const l=this.selectBalancedDrones(i,o,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],o=[...t];o.sort((d,h)=>{const p=(d.energyCost||1)+(d.health||0)+(d.attack||0);return(h.energyCost||1)+(h.health||0)+(h.attack||0)-p});const l=r?.aggression||.5,u=r?.economy||.5;for(let d=0;d<n&&o.length>0;d++){let h=0;if(l>.7)h=o.findIndex(p=>(p.attack||0)>2),h===-1&&(h=0);else if(u>.7)h=o.findIndex(p=>(p.energyCost||1)<=2),h===-1&&(h=0);else{const p=Math.min(3,o.length);h=Math.floor(Math.random()*p)}i.push(o.splice(h,1)[0])}return console.log(`🎯 AI balanced selection (${n}):`,i.map(d=>d.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(`🎯 Using ${n.name} personality decklist`);const{gameEngine:i}=await ra(async()=>{const{gameEngine:o}=await Promise.resolve().then(()=>mc);return{gameEngine:o}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log("🎯 Using standard deck as fallback");const{gameEngine:i,startingDecklist:o}=await ra(async()=>{const{gameEngine:l,startingDecklist:u}=await Promise.resolve().then(()=>mc);return{gameEngine:l,startingDecklist:u}},void 0);r=i.buildDeckFromList(o)}return console.log(`✅ AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(`🎯 AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),o=i.join(", ");return console.log(`🤖 AI placement completed: ${o}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const o=this.arrangeAggressivePlacement(r);return console.log("🎯 AI using aggressive placement strategy"),o}else if(n.economy>.7){const o=this.arrangeEconomicPlacement(r);return console.log("🎯 AI using economic placement strategy"),o}}const i=this.arrangeBalancedPlacement(r);return console.log("🎯 AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],o=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[o[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],o=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[o[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],o=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(d=>d===i[l]);u!==-1&&(n[o[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(console.log("🤖 AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment"))return await this.executePass("deployment");if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await ra(async()=>{const{aiBrain:o}=await import("./aiLogic-B8vByGjS.js");return{aiBrain:o}},[]),{gameEngine:r}=await ra(async()=>{const{gameEngine:o}=await Promise.resolve().then(()=>mc);return{gameEngine:o}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(o,l,u)=>{this.gameStateManager?.addLogEntry(o,l,u)}});return console.log("🤖 AIPhaseProcessor returning deployment decision:",i),{type:"deployment",decision:i,playerId:"player2"}}async executeActionTurn(t){if(console.log("🤖 AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action"))return await this.executePass("action");if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await ra(async()=>{const{aiBrain:o}=await import("./aiLogic-B8vByGjS.js");return{aiBrain:o}},[]),{gameEngine:r}=await ra(async()=>{const{gameEngine:o}=await Promise.resolve().then(()=>mc);return{gameEngine:o}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(o,l,u)=>{this.gameStateManager?.addLogEntry(o,l,u)}});return console.log("🤖 AIPhaseProcessor returning action decision:",i),{type:"action",decision:i,playerId:"player2"}}async executeOptionalDiscardTurn(t){if(console.log("🤖 AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await ra(async()=>{const{gameEngine:p}=await Promise.resolve().then(()=>mc);return{gameEngine:p}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return console.log("🤖 AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},d=[];if(u.hand.length>l){const p=u.hand.length-l;d=u.hand.slice(0,p),u={...u,hand:u.hand.slice(p),discardPile:[...u.discardPile,...d]},console.log(`🤖 AI discarding ${p} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const h=u.hand.length-(r.hand.length-d.length);return h>0&&console.log(`🤖 AI drew ${h} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:d,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(console.log("🤖 AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,o=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=o)return console.log("🤖 AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-o;let u=[];return u=[...n.hand].sort((h,p)=>p.cost-h.cost).slice(0,l),console.log(`🤖 AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(console.log("🤖 AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,o=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=o)return console.log("🤖 AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-o;let d=[];const h=[];return Object.entries(n.dronesOnBoard||{}).forEach(([p,m])=>{m.forEach(y=>{h.push({...y,lane:p})})}),h.sort((p,m)=>{const y=this.gameDataService.getEffectiveStats(p,p.lane),x=this.gameDataService.getEffectiveStats(m,m.lane);return y.power-x.power}),d=h.slice(0,u),console.log(`🤖 AI removing ${d.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:d,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log("🤖 AI has already passed"),!0):!1}async executePass(t){return console.log(`🏳️ AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,version:"1.2.0"}}}const Io=new zk;class Gk{constructor(t){this.gameStateManager=t,this.gameDataService=new Xc(t),this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1}}setP2PManager(t){this.p2pManager=t}setSimultaneousActionManager(t){this.simultaneousActionManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,o=this.gameStateManager.getState();if(o.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||o.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const d=`${u}Passed`;if(o.passInfo[d])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(o.turnPhase==="allocateShields"){if(n==="allocateShield")return console.log("🛡️ Routing allocateShield to SimultaneousActionManager"),this.simultaneousActionManager.allocateShieldToSection(r.playerId,r.sectionName);if(n==="resetShieldAllocation")return console.log("🔄 Routing resetShieldAllocation to SimultaneousActionManager"),this.simultaneousActionManager.resetShieldAllocation(r.playerId);if(n==="endShieldAllocation")return console.log("🏁 Routing endShieldAllocation to SimultaneousActionManager"),this.simultaneousActionManager.endShieldAllocation(r.playerId)}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);!i&&this.p2pManager&&this.p2pManager.isConnected&&this.gameStateManager.get("gameMode")!=="local"&&(console.log("[P2P ACTION] Sending action to peer:",{type:n,payload:r}),this.p2pManager.sendData({type:"ACTION",action:{type:n,payload:r},timestamp:Date.now()})),this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"aiTurn":return await this.processAiTurn(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections},o=h=>{this.gameStateManager.addLogEntry(h,"resolveAttack",n.attackingPlayer==="player2"?n.aiContext:null)},l=()=>{},u=()=>{},d=_e.resolveAttack(n,{player1:r.player1,player2:r.player2},i,o,l,u);return this.gameStateManager.setPlayerStates(d.newPlayerStates.player1,d.newPlayerStates.player2),d.attackResult&&d.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),d}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,o=this.gameStateManager.getState(),l={player1:o.player1,player2:o.player2},u={player1:o.placedSections,player2:o.opponentPlacedSections};let d=null,h=null;if(Object.values(l).forEach(S=>{Object.values(S.dronesOnBoard).forEach(A=>{A.forEach(P=>{P.id===n&&(d=P),P.id===i&&(h=P)})})}),!d||!d.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const p=d.abilities[r],m=S=>{this.gameStateManager.addLogEntry(S,"resolveAbility")},y=async S=>await this.processAttack({attackDetails:S}),x=_e.resolveAbility(p,d,h,l,u,m,y);if(this.gameStateManager.setPlayerStates(x.newPlayerStates.player1,x.newPlayerStates.player2),x.shouldEndTurn){const S=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:S.currentPlayer==="player1"?"player2":"player1"})}return x}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:o}=t,l=this.gameStateManager.getState(),u=l[i],h=l[i==="player1"?"player2":"player1"],p={player1:l.placedSections,player2:l.opponentPlacedSections},m=x=>{this.gameStateManager.addLogEntry(x)},y=_e.executeDeployment(n,r,o||l.turn,u,h,p,m);return y.success&&(i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState),await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})),y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,o=this.gameStateManager.getState(),l={player1:o.player1,player2:o.player2},u={player1:o.placedSections,player2:o.opponentPlacedSections},d={logCallback:p=>this.gameStateManager.addLogEntry(p),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async p=>await this.processAttack(p)},h=_e.resolveCardPlay(n,r,i,l,u,d);if(this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const p=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:p.currentPlayer==="player1"?"player2":"player1"})}return h}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:o}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},d={player1:l.placedSections,player2:l.opponentPlacedSections},h={logCallback:m=>this.gameStateManager.addLogEntry(m),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async m=>await this.processAttack(m)},p=_e.resolveShipAbility(n,r,i,u,d,h);if(this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p.shouldEndTurn){const m=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:m.currentPlayer==="player1"?"player2":"player1"})}return p}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const o=_e.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let d=r;u.passInfo&&u.passInfo[`${r}Passed`]?(d=u.currentPlayer,console.log(`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${d}`)):console.log(`[TURN TRANSITION DEBUG] Setting new player: ${d}`),this.gameStateManager.setCurrentPlayer(d)}const l=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:o.type}),{success:!0,transitionType:o.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return console.log(`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const o={};if(n==="allocateShields"){const d=this.gameStateManager.getLocalPlayerId(),h=i[d],m=this.gameDataService.getEffectiveShipStats(h,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;o.shieldsToAllocate=m,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${m}`)}else n==="placement"&&(o.unplacedSections=["bridge","powerCell","droneControlHub"],o.placedSections=Array(3).fill(null),o.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));const l=_e.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);o.turnPhase=n,this.gameStateManager.setState(o),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1}),console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase} → ${n}`);const u=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:u.turnPhase,placedSections:u.placedSections,opponentPlacedSections:u.opponentPlacedSections,stateUpdatesApplied:o}),{success:!0,newPhase:n,transitionType:l.type}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const o=this.gameStateManager.getState(),l=i||_e.determineFirstPlayer(n,o.firstPlayerOverride,o.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(o.player1,o.placedSections),d=this.gameDataService.getEffectiveShipStats(o.player2,o.opponentPlacedSections),h=_e.calculateNewRoundPlayerState(o.player1,n,u,o.player2,o.placedSections),p=_e.calculateNewRoundPlayerState(o.player2,n,d,o.player1,o.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(h,p),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:h,player2:p}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:o=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:o});const u=l[o];if(n==="remove"){const d=u.shipSections[r];if(!d||d.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const h={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},p={...u,shipSections:h};return this.gameStateManager.updatePlayerState(o,p),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:p}}else if(n==="add"){const d=o==="player1"?l.placedSections:l.opponentPlacedSections,h=_e.getEffectiveSectionMaxShields(r,u,d),p=u.shipSections[r];if(!p||p.allocatedShields>=h)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:m};return this.gameStateManager.updatePlayerState(o,y),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const d={...u,shipSections:i};return this.gameStateManager.updatePlayerState(o,d),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:d}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const o=n.payload;switch(o.type){case"attack":return await this.processAttack({attackDetails:{attackerId:o.attacker.id,targetId:o.target.id,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:o.card,targetId:o.target?.id,playerId:"player2"});case"move":const l=this.gameStateManager.getState(),u={name:"AI Move",cost:0,effect:{type:"MOVE",properties:[]}},d=_e.resolveSingleMove(u,o.drone,o.fromLane,o.toLane,l.player2,l.player1,{player1:l.placedSections,player2:l.opponentPlacedSections},{logCallback:()=>{},applyOnMoveEffectsCallback:_e.applyOnMoveEffects,updateAurasCallback:_e.updateAuras});return this.gameStateManager.updatePlayerState("player2",d.newPlayerState),d;case"ability":return await this.processAbility({droneId:o.drone.id,abilityIndex:o.abilityIndex,targetId:o.target?.id});default:throw new Error(`Unknown AI action subtype: ${o.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiTurn(t){const{turnPhase:n,playerId:r}=t;console.log(`[AI TURN DEBUG] Starting AI turn for ${r} in phase: ${n}`);const i=this.gameStateManager.getState(),o=i.passInfo;if(console.log("[AI TURN DEBUG] Current state:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn,passInfo:o}),o[r+"Passed"])return console.log("[AI TURN DEBUG] AI already passed, returning"),{success:!0,action:"already_passed"};let l;console.log(`[AI TURN DEBUG] Delegating to AIPhaseProcessor for phase: ${n}`),n==="deployment"?l=await Io.handleDeploymentTurn(i):n==="action"?l=await Io.handleActionTurn(i):(l={type:"pass"},console.log(`[AI TURN DEBUG] AI passing due to unknown phase: ${n}`)),console.log("[AI TURN DEBUG] AI decision from AIPhaseProcessor:",l),console.log("[AI TURN DEBUG] Processing AI decision:",l.type);const u=await this.processAiDecision(l,r);return console.log("[AI TURN DEBUG] AI decision result:",u),u}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const o=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",o),o.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),o;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attackerId:l.attacker.id,targetId:l.target.id,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove(l,n);break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u.shouldEndTurn!==!1&&await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const d=this.gameStateManager.getState(),h=!d.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",d.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:d.passInfo.firstPasser||(h?n:null)});const p=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",p),p.player1Passed&&p.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),d.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):d.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}async processMove(t,n){const r=this.gameStateManager.getState(),i={name:"AI Move",cost:0,effect:{type:"MOVE",properties:[]}},o=r[n],l=r[n==="player1"?"player2":"player1"],u=_e.resolveSingleMove(i,t.drone,t.fromLane,t.toLane,o,l,{player1:r.placedSections,player2:r.opponentPlacedSections},{logCallback:()=>{},applyOnMoveEffectsCallback:_e.applyOnMoveEffects,updateAurasCallback:_e.updateAuras});return this.gameStateManager.updatePlayerState(n,u.newPlayerState),u}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:o,opponentPlayerId:l}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:o}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=`${l}Passed`,d=`${n}Passed`,h=!o[u],p={...o,[d]:!0,firstPasser:o.firstPasser||(h?n:null)};return console.log("[PLAYER PASS DEBUG] Updating pass info:",p),this.gameStateManager.setPassInfo(p,"ActionProcessor"),p[l+"Passed"]?i==="deployment"?await this.processPhaseTransition({newPhase:"action"}):i==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"}):await this.processTurnTransition({newPlayer:l}),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("playerPass",{playerId:n,playerName:r,turnPhase:i,passInfo:p}),{success:!0,newPassInfo:p}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error("🔥 CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error("🔥 CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("aiShipPlacement",{placement:n,aiPersonality:r}),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r}=t,i=this.gameStateManager.getState();if(console.log(`[OPTIONAL DISCARD DEBUG] Processing optional discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const o=i[n];if(!o)throw new Error(`Player ${n} not found`);const l=o.hand.filter(d=>!r.some(h=>d.instanceId===h.instanceId)),u=[...o.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:l,discardPile:u}),console.log(`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}acknowledgeFirstPlayer(t){return console.log(`🎯 ActionProcessor: Routing first player acknowledgment for ${t}`),this.simultaneousActionManager?this.simultaneousActionManager.acknowledgeFirstPlayer(t):(console.error("❌ SimultaneousActionManager not available"),{success:!1,error:"Manager not available"})}getPhaseCommitmentStatus(t){return this.simultaneousActionManager?this.simultaneousActionManager.getPhaseCommitmentStatus(t):null}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}const r2=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(`🎲 Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(`🎯 Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},Hk=(e,t=3)=>{if(!e||e.length===0)return console.warn("⚠️ No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(`🔄 Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(`📦 Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class qk{constructor(){console.log("🔄 GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.state={appState:"menu",isHost:!1,isGuest:!1,isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[]},this.actionProcessor=new Gk(this),this.gameFlowManager=null,this.p2pIntegrationSetup=!1,console.log("🔄 GAMESTATE INITIALIZATION: GameStateManager created"),console.log("📱 App State:",this.state.appState),console.log("🎮 Game Active:",this.state.gameActive),console.log("✅ GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost);break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE"){const r={...this.state},i=new Error().stack,o=i?i.split(`
`):[],l=this.extractCallerInfo(o),u=o.some(S=>S.includes("App.jsx")),d=o.some(S=>S.includes("ActionProcessor")),h=o.some(S=>S.includes("PhaseManager")),p=d||h;u&&!p&&(console.error("🚨 ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error("📋 App.jsx should only call ActionProcessor or PhaseManager methods"),console.error("🔍 Stack trace:",i));const m=Object.keys(t),y=`${l.primaryCaller} in ${l.primaryFile}`;console.log(`🔍 GAMESTATE CHANGE [${n}] from ${y}:`,{changedKeys:m,allUpdates:t,architectureViolation:u&&!p});const x=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!x&&this.logPlayerStateChanges(t,r,y,n),m.forEach(S=>{if(!["player1","player2"].includes(S)){const A=r[S],P=t[S];JSON.stringify(A)!==JSON.stringify(P)&&console.log(`🔍 STATE CHANGE: ${S}`,{before:A,after:P,caller:y,eventType:n})}}),this.validateStateUpdate(t,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:r})}validateStateUpdate(t,n){const r=new Error().stack,i=r&&r.includes("ActionProcessor");this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&(i||["player1","player2","turnPhase","currentPlayer"].some(u=>u in t)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),stack:r?.split(`
`).slice(0,5)})),this.validateActionProcessorUsage(t,n,i,r),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(o,l)=>{o.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${o.energy}`),o.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${o.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((o,l)=>{Object.values(o.dronesOnBoard).forEach(u=>{u.forEach(d=>{i.has(d.id)&&console.error(`Duplicate drone ID detected: ${d.id} in player${l+1}`),i.add(d.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","roundEnd"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(console.log("🔍 Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){console.log("✅ Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],d=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],h=Object.keys(t).filter(S=>u.includes(S)),p=Object.keys(t).filter(S=>d.includes(S)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const y=h.every(S=>["player1","player2"].includes(S)),x=h.every(S=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(S));if(!(m&&(y||x))){if(h.length>0&&!r){const S=i?.split(`
`)||[],A=S.find(P=>P.includes(".jsx")&&!P.includes("GameStateManager"))||S[2]||"Unknown";console.warn("⚠️ ActionProcessor bypass detected: Critical game state updated directly",{updates:h,turnPhase:n.turnPhase,caller:A.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug("🐛 ActionProcessor bypass debug info:",{stackTrace:S.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}p.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(o=>{if(t[o]){const l=n[o],u=t[o];console.log(`🚨 PLAYER STATE CHANGE [${o}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(h=>{const p=l?l[h]:void 0,m=u?u[h]:void 0;if(JSON.stringify(p)!==JSON.stringify(m))if(h==="energy"||h==="deploymentBudget"||h==="initialDeploymentBudget")console.log(`  💰 ${h}: ${p} → ${m}`),(m==null||isNaN(m))&&console.error(`  🚨 WARNING: ${h} became ${m}!`);else if(h==="activeDronePool"){const y=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";let S,A;if(Array.isArray(p))try{S=p.map(P=>P?.name||"UNNAMED").join(",")}catch(P){S=`ERROR_MAPPING_OLD: ${P.message}`}else S="undefined";if(Array.isArray(m))try{A=m.map(P=>P?.name||"UNNAMED").join(",")}catch(P){A=`ERROR_MAPPING_NEW: ${P.message}`}else A="undefined";if(console.log(`  🤖 ${h}: [${y} drones] → [${x} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(console.log("    🔍 Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("    🔍 First drone object:",m[0])),y!==x||S!==A){const P=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`    📍 Update source:
${P}`)}}else if(h==="hand"||h==="deck"){const y=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";console.log(`  🃏 ${h}: [${y} cards] → [${x} cards]`)}else if(h==="dronesOnBoard"){const y=p?`L1:${p.lane1?.length||0} L2:${p.lane2?.length||0} L3:${p.lane3?.length||0}`:"undefined",x=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`  🛸 ${h}: ${y} → ${x}`)}else console.log(`  📝 ${h}:`,{before:p,after:m})}),console.log(`🔍 Full ${o} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const o=i?.split(`
`)||[],l=this.extractCallerInfo(o),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],d=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],h=l.functions.filter(m=>u.some(y=>m.toLowerCase().includes(y.toLowerCase()))),p=l.functions.filter(m=>d.some(y=>m.toLowerCase().includes(y.toLowerCase())));h.length>0&&p.length===0&&(console.warn("🚨 Inappropriate function updating game state:",{inappropriateFunctions:h,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI → ActionProcessor → gameLogic.js → GameStateManager"}),console.debug("🔍 Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:h,appropriateFound:p,updateDetails:t,stackTrace:o.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const o=i.match(/at\s+([\w.$]+)\s*\(/);if(o){const u=o[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}reset(){const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:_e.initialPlayerState("Player 1",Mo),player2:_e.initialPlayerState("Player 2",Mo),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[]};this.setState(t,"GAME_RESET")}startGame(t="local",n={},r={}){console.log("🎮 GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{..._e.initialPlayerState(n.name||"Player 1",n.decklist||Mo),...n},player2:{..._e.initialPlayerState(r.name||"Player 2",r.decklist||Mo),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[]},o=r2(wn);i.droneSelectionPool=o.droneSelectionPool,i.droneSelectionTrio=o.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log("👤 Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log("👤 Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log("✅ GAME START: Game session initialized successfully")}endGame(){console.log("🎮 GAME END: Ending current game session"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[]},"GAME_ENDED"),console.log("✅ GAME END: Returned to menu state")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t,isHost:n&&t!=="local",isGuest:!n&&t!=="local"},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log("🔍 [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const o=[...this.state.gameLog,i];this.setState({gameLog:o},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Ve=new qk;class Yk{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return Fk(t).buffer}}function Fk(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(o,r),r+=i.byteLength}return n}function a2(e){return new Kk(e).unpack()}function i2(e){const t=new Vk,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class Kk{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",o,l;for(;r<t;)o=n[r],o<160?(l=o,r++):(o^192)<32?(l=(o&31)<<6|n[r+1]&63,r+=2):(o^224)<16?(l=(o&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(o&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class Vk{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const o=this.pack(t[i]);return o instanceof Promise?o.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,o=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|o/l&1048575,d=o%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(d)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=o=>{if(o<n.length){const l=n[o];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(o+1))}return i(o+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Yk,this._textEncoder=new TextEncoder}}let s2=!0,o2=!0;function wc(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function Is(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const d=h=>{const p=n(h);p&&(u.handleEvent?u.handleEvent(p):u(p))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,d),i.apply(this,[l,d])};const o=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(u))return o.apply(this,arguments);const d=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[l,d])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function Xk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(s2=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Wk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(o2=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function l2(){if(typeof window=="object"){if(s2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Mv(e,t){o2&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Qk(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(wc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(wc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(wc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=wc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function mA(e){return Object.prototype.toString.call(e)==="[object Object]"}function c2(e){return mA(e)?Object.keys(e).reduce(function(t,n){const r=mA(e[n]),i=r?c2(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[n]:i})},{}):e}function Ey(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Ey(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Ey(e,e.get(i),n)})}))}function gA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&o.push(l)}),o.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&Ey(e,u,i)})}),i}const yA=l2;function u2(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const d={};return Object.keys(u).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const p=typeof u[h]=="object"?u[h]:{ideal:u[h]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const m=function(y,x){return y?y+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(p.ideal!==void 0){d.optional=d.optional||[];let y={};typeof p.ideal=="number"?(y[m("min",h)]=p.ideal,d.optional.push(y),y={},y[m("max",h)]=p.ideal,d.optional.push(y)):(y[m("",h)]=p.ideal,d.optional.push(y))}p.exact!==void 0&&typeof p.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[m("",h)]=p.exact):["min","max"].forEach(y=>{p[y]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[m(y,h)]=p[y])})}),u.advanced&&(d.optional=(d.optional||[]).concat(u.advanced)),d},i=function(u,d){if(t.version>=61)return d(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const h=function(p,m,y){m in p&&!(y in p)&&(p[y]=p[m],delete p[m])};u=JSON.parse(JSON.stringify(u)),h(u.audio,"autoGainControl","googAutoGainControl"),h(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let h=u.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const p=t.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete u.video.facingMode;let m;if(h.exact==="environment"||h.ideal==="environment"?m=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let x=y.find(S=>m.some(A=>S.label.toLowerCase().includes(A)));return!x&&y.length&&m.includes("back")&&(x=y[y.length-1]),x&&(u.video.deviceId=h.exact?{exact:x.deviceId}:{ideal:x.deviceId}),u.video=r(u.video),yA("chrome: "+JSON.stringify(u)),d(u)})}u.video=r(u.video)}return yA("chrome: "+JSON.stringify(u)),d(u)},o=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,d,h){i(u,p=>{n.webkitGetUserMedia(p,d,m=>{h&&h(o(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return i(d,h=>u(h).then(p=>{if(h.audio&&!p.getAudioTracks().length||h.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(o(p))))}}}function f2(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function d2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):o={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=o,l.transceiver={receiver:o},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===i.id):o={track:i};const l=new Event("track");l.track=i,l.receiver=o,l.transceiver={receiver:o},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Is(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function h2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,d){let h=i.apply(this,arguments);return h||(h=t(this,u),this._senders.push(h)),h};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){o.apply(this,arguments);const d=this._senders.indexOf(u);d!==-1&&this._senders.splice(d,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(l=>{const u=this._senders.find(d=>d.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function p2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>gA(l,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Is(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>gA(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(o?l=!0:o=u),u.track===r)),l||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function m2(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(d)===-1&&this._shimmedLocalStreams[u.id].push(d):this._shimmedLocalStreams[u.id]=[u,d],d};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(h=>{if(this.getSenders().find(m=>m.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(h=>u.indexOf(h)===-1);this._shimmedLocalStreams[l.id]=[l].concat(d)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const d=this._shimmedLocalStreams[u].indexOf(l);d!==-1&&this._shimmedLocalStreams[u].splice(d,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function g2(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return m2(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=n.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(m=>{if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const m=new e.MediaStream(p.getTracks());this._streams[p.id]=m,this._reverseStreams[m.id]=p,p=m}r.apply(this,[p])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(A=>A===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([p]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===p)};function o(h,p){let m=p.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const x=h._reverseStreams[y],S=h._streams[x.id];m=m.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:p.type,sdp:m})}function l(h,p){let m=p.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const x=h._reverseStreams[y],S=h._streams[x.id];m=m.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:p.type,sdp:m})}["createOffer","createAnswer"].forEach(function(h){const p=e.RTCPeerConnection.prototype[h],m={[h](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[S=>{const A=o(this,S);y[0].apply(null,[A])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):p.apply(this,arguments).then(S=>o(this,S))}};e.RTCPeerConnection.prototype[h]=m[h]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const h=d.get.apply(this);return h.type===""?h:o(this,h)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(A=>p.track===A)&&(y=this._streams[x])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function wy(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function y2(e,t){Is(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const vA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:y2,shimAddTrackRemoveTrack:g2,shimAddTrackRemoveTrackWithNative:m2,shimGetSendersWithDtmf:h2,shimGetUserMedia:u2,shimMediaStream:f2,shimOnTrack:d2,shimPeerConnection:wy,shimSenderReceiverGetStats:p2},Symbol.toStringTag,{value:"Module"}));function v2(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,l){Mv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,d){u in l&&!(d in l)&&(l[d]=l[u],delete l[u])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),o(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function Zk(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function b2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Oy(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,l,u]=arguments;return r.apply(this,[o||null]).then(d=>{if(t.version<53&&!l)try{d.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;d.forEach((p,m)=>{d.set(m,Object.assign({},p,{type:n[p.type]||p.type}))})}return d}).then(l,u)}}function x2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function S2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Is(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function A2(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Mv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function C2(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function P2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:l}=o,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return o})}function E2(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function w2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function O2(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const bA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:P2,shimCreateAnswer:O2,shimCreateOffer:w2,shimGetDisplayMedia:Zk,shimGetParameters:E2,shimGetUserMedia:v2,shimOnTrack:b2,shimPeerConnection:Oy,shimRTCDataChannel:C2,shimReceiverGetStats:S2,shimRemoveStream:A2,shimSenderGetStats:x2},Symbol.toStringTag,{value:"Module"}));function _2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function T2(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function D2(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(h,p){const m=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[m]);return p?(y.then(h,p),Promise.resolve()):y},t.createAnswer=function(h,p){const m=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[m]);return p?(y.then(h,p),Promise.resolve()):y};let u=function(d,h,p){const m=i.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m};t.setLocalDescription=u,u=function(d,h,p){const m=o.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m},t.setRemoteDescription=u,u=function(d,h,p){const m=l.apply(this,[d]);return p?(m.then(h,p),Promise.resolve()):m},t.addIceCandidate=u}function j2(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(N2(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}).bind(t))}function N2(e){return e&&e.video!==void 0?Object.assign({},e,{video:c2(e.video)}):e}function M2(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(Mv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,o.push(u)):o.push(r.iceServers[l])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function k2(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function R2(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function I2(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const xA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:I2,shimCallbacksAPI:D2,shimConstraints:N2,shimCreateOfferLegacy:R2,shimGetUserMedia:j2,shimLocalStreamsAPI:_2,shimRTCIceServerUrls:M2,shimRemoteStreamsAPI:T2,shimTrackEventTransceiver:k2},Symbol.toStringTag,{value:"Module"}));var $m={exports:{}},SA;function Jk(){return SA||(SA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<o.length;l++)i=o[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?o.push(l+"="+n.parameters[l]):o.push(l)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(n)[0].split(" ");r.profile=o[2];for(let u=3;u<o.length;u++){const d=o[u],h=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(h){const p=t.parseRtpMap(h),m=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(p.parameters=m.length?t.parseFmtp(m[0]):{},p.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),r.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(p.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(d=>{u.rtcpFeedback.find(p=>p.type===d.type&&p.parameter===d.parameter)||u.rtcpFeedback.push(d)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let o=0;return r.codecs.forEach(l=>{l.maxptime>o&&(o=l.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),d=u.length>0&&u[0].ssrc;let h;const p=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));p.length>0&&p[0].length>1&&p[0][0]===d&&(h=p[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let x={ssrc:d,codecPayloadType:parseInt(y.parameters.apt,10)};d&&h&&(x.rtx={ssrc:h}),r.push(x),o&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:d,mechanism:l?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&d&&r.push({ssrc:d});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(y=>{y.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const d=u[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let o;const l=r!==void 0?r:2;return n?o=n:o=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})($m)),$m.exports}var L2=Jk();const Lo=qr(L2),eR=jw({__proto__:null,default:Lo},[L2]);function Ff(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),o=Lo.parseCandidate(r.candidate);for(const l in o)l in i||Object.defineProperty(i,l,{value:o[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Is(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function _y(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Is(e,"icecandidate",t=>{if(t.candidate){const n=Lo.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Kf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const d=Lo.splitSections(u.sdp);return d.shift(),d.some(h=>{const p=Lo.parseMLine(h);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},r=function(u){const d=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const h=parseInt(d[1],10);return h!==h?-1:h},i=function(u){let d=65536;return t.browser==="firefox"&&(t.version<57?u===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},o=function(u,d){let h=65536;t.browser==="firefox"&&t.version===57&&(h=65535);const p=Lo.matchPrefix(u.sdp,"a=max-message-size:");return p.length>0?h=parseInt(p[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(h=2147483637),h},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=r(arguments[0]),h=i(d),p=o(arguments[0],d);let m;h===0&&p===0?m=Number.POSITIVE_INFINITY:h===0||p===0?m=Math.max(h,p):m=Math.min(h,p);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return m}}),this._sctp=y}return l.apply(this,arguments)}}function Vf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const u=arguments[0],d=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&d>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Is(e,"datachannel",r=>(t(r.channel,r.target),r))}function Ty(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const l=new Event("connectionstatechange",i);o.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Dy(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Xf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Wf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const tR=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Dy,shimAddIceCandidateNullOrEmpty:Xf,shimConnectionState:Ty,shimMaxMessageSize:Kf,shimParameterlessSetLocalDescription:Wf,shimRTCIceCandidate:Ff,shimRTCIceCandidateRelayProtocol:_y,shimSendThrowTypeError:Vf},Symbol.toStringTag,{value:"Module"}));function nR({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=l2,r=Qk(e),i={browserDetails:r,commonShim:tR,extractVersion:wc,disableLog:Xk,disableWarnings:Wk,sdp:eR};switch(r.browser){case"chrome":if(!vA||!wy||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=vA,Xf(e,r),Wf(e),u2(e,r),f2(e),wy(e,r),d2(e),g2(e,r),h2(e),p2(e),y2(e,r),Ff(e),_y(e),Ty(e),Kf(e,r),Vf(e),Dy(e,r);break;case"firefox":if(!bA||!Oy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=bA,Xf(e,r),Wf(e),v2(e,r),Oy(e,r),b2(e),A2(e),x2(e),S2(e),C2(e),P2(e),E2(e),w2(e),O2(e),Ff(e),Ty(e),Kf(e,r),Vf(e);break;case"safari":if(!xA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=xA,Xf(e,r),Wf(e),M2(e),R2(e),D2(e),_2(e),T2(e),k2(e),j2(e),I2(e),Ff(e),_y(e),Kf(e,r),Vf(e),Dy(e,r);break;default:n("Unsupported browser!");break}return i}const AA=nR({window:typeof window>"u"?void 0:window});function Ls(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class $2{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let o=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),d=t.slice(l,u),h={__peerData:this._dataCount,n:o,data:d,total:i};n.push(h),l=u,o++}return this._dataCount++,n}}}function rR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const Bm=AA.default||AA,gc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Bm.browserDetails.browser}getVersion(){return Bm.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Bm.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},aR=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),B2=()=>Math.random().toString(36).slice(2),CA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class iR extends $2{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=CA,this.browser=gc.getBrowser(),this.browserVersion=gc.getVersion(),this.pack=i2,this.unpack=a2,this.supports=(function(){const n={browser:gc.isBrowserSupported(),webRTC:gc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(CA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!gc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=aR,this.randomToken=B2}}const Hn=new iR,sR="PeerJS: ";class oR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[sR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Pe=new oR,kv={},lR=Object.prototype.hasOwnProperty,kn="~";function Lc(){}Object.create&&(Lc.prototype=Object.create(null),new Lc().__proto__||(kn=!1));function cR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function U2(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new cR(n,r||e,i),l=kn?kn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function Qf(e,t){--e._eventsCount===0?e._events=new Lc:delete e._events[t]}function On(){this._events=new Lc,this._eventsCount=0}On.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)lR.call(n,r)&&t.push(kn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};On.prototype.listeners=function(t){var n=kn?kn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,l=new Array(o);i<o;i++)l[i]=r[i].fn;return l};On.prototype.listenerCount=function(t){var n=kn?kn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};On.prototype.emit=function(t,n,r,i,o,l){var u=kn?kn+t:t;if(!this._events[u])return!1;var d=this._events[u],h=arguments.length,p,m;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,r),!0;case 4:return d.fn.call(d.context,n,r,i),!0;case 5:return d.fn.call(d.context,n,r,i,o),!0;case 6:return d.fn.call(d.context,n,r,i,o,l),!0}for(m=1,p=new Array(h-1);m<h;m++)p[m-1]=arguments[m];d.fn.apply(d.context,p)}else{var y=d.length,x;for(m=0;m<y;m++)switch(d[m].once&&this.removeListener(t,d[m].fn,void 0,!0),h){case 1:d[m].fn.call(d[m].context);break;case 2:d[m].fn.call(d[m].context,n);break;case 3:d[m].fn.call(d[m].context,n,r);break;case 4:d[m].fn.call(d[m].context,n,r,i);break;default:if(!p)for(x=1,p=new Array(h-1);x<h;x++)p[x-1]=arguments[x];d[m].fn.apply(d[m].context,p)}}return!0};On.prototype.on=function(t,n,r){return U2(this,t,n,r,!1)};On.prototype.once=function(t,n,r){return U2(this,t,n,r,!0)};On.prototype.removeListener=function(t,n,r,i){var o=kn?kn+t:t;if(!this._events[o])return this;if(!n)return Qf(this,o),this;var l=this._events[o];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Qf(this,o);else{for(var u=0,d=[],h=l.length;u<h;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&d.push(l[u]);d.length?this._events[o]=d.length===1?d[0]:d:Qf(this,o)}return this};On.prototype.removeAllListeners=function(t){var n;return t?(n=kn?kn+t:t,this._events[n]&&Qf(this,n)):(this._events=new Lc,this._eventsCount=0),this};On.prototype.off=On.prototype.removeListener;On.prototype.addListener=On.prototype.on;On.prefixed=kn;On.EventEmitter=On;kv=On;var $s={};Ls($s,"ConnectionType",()=>Ii);Ls($s,"PeerErrorType",()=>$t);Ls($s,"BaseConnectionErrorType",()=>jy);Ls($s,"DataConnectionErrorType",()=>Rv);Ls($s,"SerializationType",()=>Hd);Ls($s,"SocketEventType",()=>Ri);Ls($s,"ServerMessageType",()=>Cn);var Ii=(function(e){return e.Data="data",e.Media="media",e})({}),$t=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),jy=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Rv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Hd=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Ri=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Cn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const z2="1.5.5";class uR extends kv.EventEmitter{constructor(t,n,r,i,o,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+o}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+z2),this._disconnected=!1,this._socket.onmessage=i=>{let o;try{o=JSON.parse(i.data),Pe.log("Server message received:",o)}catch{Pe.log("Invalid server message",i.data);return}this.emit(Ri.Message,o)},this._socket.onclose=i=>{this._disconnected||(Pe.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Ri.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Pe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Pe.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Cn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Ri.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class G2{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ii.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},o=n.createDataChannel(r.label,i);r._initializeDataChannel(o),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Pe.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,o=this.connection.provider;Pe.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Pe.log(`Received ICE candidates for ${n}:`,l.candidate),o.socket.send({type:Cn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Pe.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(jy.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Pe.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(jy.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Pe.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Pe.log("Listening for data channel"),t.ondatachannel=l=>{Pe.log("Received data channel");const u=l.channel;o.getConnection(n,r)._initializeDataChannel(u)},Pe.log("Listening for remote stream"),t.ontrack=l=>{Pe.log("Received remote stream");const u=l.streams[0],d=o.getConnection(n,r);if(d.type===Ii.Media){const h=d;this._addStreamToMediaConnection(u,h)}}}cleanup(){Pe.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Pe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Pe.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ii.Data){const o=this.connection;i={...i,label:o.label,reliable:o.reliable,serialization:o.serialization}}n.socket.send({type:Cn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError($t.WebRTC,i),Pe.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError($t.WebRTC,r),Pe.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Pe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Pe.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Cn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError($t.WebRTC,i),Pe.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError($t.WebRTC,r),Pe.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Pe.log("Setting remote description",n);const o=this;try{await r.setRemoteDescription(n),Pe.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await o._makeAnswer()}catch(l){i.emitError($t.WebRTC,l),Pe.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Pe.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Pe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError($t.WebRTC,n),Pe.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Pe.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Pe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Pe.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class H2 extends kv.EventEmitter{emitError(t,n){Pe.error("Error:",n),this.emit("error",new fR(`${t}`,n))}}class fR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class q2 extends H2{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class td extends q2{static#e=this.ID_PREFIX="mc_";get type(){return Ii.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||td.ID_PREFIX+Hn.randomToken(),this._negotiator=new G2(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Pe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Pe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Pe.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Cn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Cn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Pe.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Pe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class dR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:o,key:l}=this._options,u=new URL(`${n}://${r}:${i}${o}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",z2),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Pe.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Hn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Hn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Pe.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class nd extends q2{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ii.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||nd.ID_PREFIX+B2(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new G2(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Pe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Pe.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Pe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Rv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Cn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Cn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Pe.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Iv extends nd{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>nd.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Pe.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Um extends Iv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new $2,this.serialization=Hd.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=a2(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=rR(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=i2(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Pe.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class hR extends Iv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Hd.None}}class pR extends Iv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Hn.chunkedMTU){this.emitError(Rv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Hd.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Lv extends H2{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:hR,json:pR,binary:Um,"binary-utf8":Um,default:Um},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Hn.CLOUD_HOST,port:Hn.CLOUD_PORT,path:"/",key:Lv.DEFAULT_KEY,token:Hn.randomToken(),config:Hn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Hn.CLOUD_HOST?this._options.secure=Hn.isSecure():this._options.host==Hn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Pe.setLogFunction(this._options.logFunction),Pe.logLevel=this._options.debug||0,this._api=new dR(n),this._socket=this._createServerConnection(),!Hn.supports.audioVideo&&!Hn.supports.data){this._delayedAbort($t.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Hn.validateId(r)){this._delayedAbort($t.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort($t.ServerError,i))}_createServerConnection(){const t=new uR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Ri.Message,n=>{this._handleMessage(n)}),t.on(Ri.Error,n=>{this._abort($t.SocketError,n)}),t.on(Ri.Disconnected,()=>{this.disconnected||(this.emitError($t.Network,"Lost connection to server."),this.disconnect())}),t.on(Ri.Close,()=>{this.disconnected||this._abort($t.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case Cn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Cn.Error:this._abort($t.ServerError,r.msg);break;case Cn.IdTaken:this._abort($t.UnavailableID,`ID "${this.id}" is taken`);break;case Cn.InvalidKey:this._abort($t.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Cn.Leave:Pe.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Cn.Expire:this.emitError($t.PeerUnavailable,`Could not connect to peer ${i}`);break;case Cn.Offer:{const o=r.connectionId;let l=this.getConnection(i,o);if(l&&(l.close(),Pe.warn(`Offer received for existing Connection ID:${o}`)),r.type===Ii.Media){const d=new td(i,this,{connectionId:o,_payload:r,metadata:r.metadata});l=d,this._addConnection(i,l),this.emit("call",d)}else if(r.type===Ii.Data){const d=new this._serializers[r.serialization](i,this,{connectionId:o,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=d,this._addConnection(i,l),this.emit("connection",d)}else{Pe.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(o);for(const d of u)l.handleMessage(d);break}default:{if(!r){Pe.warn(`You received a malformed message from ${i} of type ${n}`);return}const o=r.connectionId,l=this.getConnection(i,o);l&&l.peerConnection?l.handleMessage(t):o?this._storeMessage(o,t):Pe.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Pe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($t.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Pe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($t.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Pe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new td(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Pe.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Pe.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Pe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Pe.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Pe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Pe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort($t.ServerError,n))}}var PA=Lv;class mR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new PA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new PA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",o=>{console.error("Connection error:",o),this.emit("connection_error",{error:o.message}),r(o)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const yc=new mR,Y2=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},gR=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Draw Phase",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,yR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],vR=["deployment","action"],bR=e=>yR.includes(e),EA=e=>vR.includes(e),zi=()=>{const[e,t]=C.useState(Ve.getState()),[n,r]=C.useState(yc.getStatus());C.useEffect(()=>{Ve.setupP2PIntegration(yc)},[]),C.useEffect(()=>Ve.subscribe($=>{t(Ve.getState())}),[]),C.useEffect(()=>yc.subscribe($=>{r(yc.getStatus())}),[]);const i=C.useCallback(()=>Ve.isMyTurn(),[e.currentPlayer,e.gameMode]),o=C.useCallback(()=>Ve.getLocalPlayerId(),[e.gameMode]),l=C.useCallback(()=>Ve.getOpponentPlayerId(),[e.gameMode]),u=C.useCallback(()=>e.gameMode!=="local",[e.gameMode]),d=C.useCallback(()=>u()&&!i(),[u,i]),h=C.useCallback(()=>Ve.getLocalPlayerState(),[e.gameMode]),p=C.useCallback(()=>Ve.getOpponentPlayerState(),[e.gameMode]),m=C.useCallback(te=>Ve.isLocalPlayer(te),[e.gameMode]),y=C.useCallback(()=>Ve.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),x=C.useCallback(()=>{const te=Ve.getOpponentPlacedSections();return e.turnPhase==="placement"&&te.some($=>$!==null)&&console.error("🔥 CRITICAL - getOpponentPlacedSections returning:",te,"from gameState:",e.opponentPlacedSections),te},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=C.useCallback((te,$)=>{Ve.updatePlayers(te,$)},[]),A=C.useCallback((te,$)=>{Ve.updatePlayerState(te,$)},[]),P=C.useCallback((te,$)=>{Ve.setPlayerStates(te,$)},[]),E=C.useCallback(te=>{Ve.setFirstPasserOfPreviousRound(te)},[]),O=C.useCallback(te=>{Ve.setFirstPlayerOverride(te)},[]),_=C.useCallback(te=>{Ve.setPassInfo(te)},[]),N=C.useCallback(te=>{Ve.updatePassInfo(te)},[]),j=C.useCallback((te,$,ee)=>{Ve.addLogEntry(te,$,ee)},[]),D=C.useCallback(()=>{Ve.reset()},[]),R=C.useCallback(te=>{Ve.setWinner(te)},[]),k=C.useCallback(async(te,$)=>await Ve.processAction(te,$),[]),U=C.useCallback(()=>Ve.isActionInProgress(),[]),Z=C.useCallback(()=>Ve.getActionQueueLength(),[]),q=C.useCallback(()=>{Ve.clearActionQueue()},[]),J=C.useCallback(()=>bR(e.turnPhase),[e.turnPhase]),ce=C.useCallback(()=>EA(e.turnPhase),[e.turnPhase]),se=C.useCallback(async(te,$)=>{const ee=e.turnPhase,pe=EA(ee);return console.log(`🔀 useGameState.routeAction: ${te} in phase ${ee} (${pe?"sequential":"simultaneous"})`),pe?await k(te,$):(console.warn(`⚠️ Simultaneous phase action ${te} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${te} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:ee,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,k]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:o,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:d,getLocalPlayerState:h,getOpponentPlayerState:p,isLocalPlayer:m,getLocalPlacedSections:y,getOpponentPlacedSections:x,updatePlayers:S,updatePlayerState:A,setPlayerStates:P,setFirstPasserOfPreviousRound:E,setFirstPlayerOverride:O,setPassInfo:_,updatePassInfo:N,addLogEntry:j,resetGame:D,setWinner:R,processAction:k,isActionInProgress:U,getActionQueueLength:Z,clearActionQueue:q,isSimultaneousPhase:J,isSequentialPhase:ce,routeAction:se,gameStateManager:Ve,p2pManager:yc}};class jc{constructor(){if(jc.instance)return jc.instance;jc.instance=this,this.listeners=[],this.phaseCommitments={droneSelection:{player1:{completed:!1,drones:[]},player2:{completed:!1,drones:[]}},deckSelection:{player1:{completed:!1,deck:[]},player2:{completed:!1,deck:[]}},placement:{player1:{completed:!1,placement:[]},player2:{completed:!1,placement:[]}},mandatoryDiscard:{player1:{completed:!1,discardedCards:[]},player2:{completed:!1,discardedCards:[]}},optionalDiscard:{player1:{completed:!1,discardedCards:[]},player2:{completed:!1,discardedCards:[]}},determineFirstPlayer:{player1:{completed:!1,acknowledged:!1},player2:{completed:!1,acknowledged:!1}},allocateShields:{player1:{completed:!1,shieldAllocation:[]},player2:{completed:!1,shieldAllocation:[]}},mandatoryDroneRemoval:{player1:{completed:!1,removedDrones:[]},player2:{completed:!1,removedDrones:[]}}},this.gameStateManager=null,this.aiPhaseProcessor=null,this.isMultiplayer=!1,console.log("🤝 SimultaneousActionManager initialized")}initialize(t,n,r){this.gameStateManager=t,this.aiPhaseProcessor=n,this.isMultiplayer=r,console.log("🔧 SimultaneousActionManager initialized with external systems")}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(`🔔 SimultaneousActionManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("SimultaneousActionManager listener error:",i)}})}submitDroneSelection(t,n){return console.log(`🚀 SimultaneousActionManager.submitDroneSelection: ${t} submitting ${n.length} drones`),this.commitPlayerAction(t,"droneSelection",{drones:n},{validate:r=>r.drones.length===5,errorMessage:"Must select exactly 5 drones"})}submitDeckSelection(t,n){return console.log(`🚀 SimultaneousActionManager.submitDeckSelection: ${t} submitting deck with ${n.length} cards`),this.commitPlayerAction(t,"deckSelection",{deck:n},{validate:r=>r.deck&&r.deck.length>0,errorMessage:"Must select a deck with at least 1 card"})}submitPlacement(t,n){return console.log(`🚀 SimultaneousActionManager.submitPlacement: ${t} submitting placement with ${n.length} sections`),this.commitPlayerAction(t,"placement",{placement:n},{validate:r=>!r.placement.some(i=>i==null),errorMessage:"All ship sections must be placed before confirming"})}submitMandatoryDiscard(t,n){return console.log(`🚀 SimultaneousActionManager.submitMandatoryDiscard: ${t} discarding ${n.length} cards`),this.commitPlayerAction(t,"mandatoryDiscard",{discardedCards:n},{validate:r=>Array.isArray(r.discardedCards),errorMessage:"Invalid discard data"})}submitOptionalDiscard(t,n){return console.log(`🚀 SimultaneousActionManager.submitOptionalDiscard: ${t} discarding ${n.length} cards`),this.commitPlayerAction(t,"optionalDiscard",{discardedCards:n},{validate:r=>Array.isArray(r.discardedCards),errorMessage:"Invalid optional discard data"})}submitShieldAllocation(t,n){return console.log(`🚀 SimultaneousActionManager.submitShieldAllocation: ${t} allocating shields`),this.commitPlayerAction(t,"allocateShields",{shieldAllocation:n},{validate:r=>Array.isArray(r.shieldAllocation),errorMessage:"Invalid shield allocation data"})}allocateShieldToSection(t,n){console.log(`🛡️ SimultaneousActionManager.allocateShieldToSection: ${t} allocating shield to ${n}`);const r=this.gameStateManager.getState(),i=_e.processShieldAllocation(r,t,n);return i.success?(this.gameStateManager.updatePlayerState(t,i.newPlayerState),this.gameStateManager.updateState({shieldsToAllocate:i.newShieldsToAllocate}),console.log(`✅ Shield allocated to ${n} for ${t}`),{success:!0,result:i}):(console.log(`❌ Shield allocation failed: ${i.error}`),{success:!1,error:i.error})}resetShieldAllocation(t){console.log(`🔄 SimultaneousActionManager.resetShieldAllocation: ${t} resetting shields`);const n=this.gameStateManager.getState(),r=_e.processResetShieldAllocation(n,t);return r.success?(this.gameStateManager.updatePlayerState(t,r.newPlayerState),this.gameStateManager.updateState({shieldsToAllocate:r.newShieldsToAllocate}),console.log(`✅ Shield allocation reset for ${t}`),{success:!0,result:r}):(console.log(`❌ Shield allocation reset failed: ${r.error}`),{success:!1,error:r.error})}endShieldAllocation(t){console.log(`🏁 SimultaneousActionManager.endShieldAllocation: ${t} ending allocation phase`);const n=this.gameStateManager.getState(),r=_e.processEndShieldAllocation(n,t);return r.success?(this.gameStateManager.setPlayerStates(r.player1State,r.player2State),r.newPhase&&this.gameStateManager.setTurnPhase(r.newPhase),r.firstPlayer&&this.gameStateManager.setCurrentPlayer(r.firstPlayer),console.log(`✅ Shield allocation ended, transitioning to ${r.newPhase||"next phase"}`),{success:!0,result:r}):(console.log(`❌ Shield allocation end failed: ${r.error}`),{success:!1,error:r.error})}submitMandatoryDroneRemoval(t,n){return console.log(`🚀 SimultaneousActionManager.submitMandatoryDroneRemoval: ${t} removing ${n.length} drones`),this.commitPlayerAction(t,"mandatoryDroneRemoval",{removedDrones:n},{validate:r=>Array.isArray(r.removedDrones),errorMessage:"Invalid drone removal data"})}acknowledgeFirstPlayer(t){return console.log(`🎯 SimultaneousActionManager.acknowledgeFirstPlayer: ${t} acknowledging first player`),this.commitPlayerAction(t,"determineFirstPlayer",{acknowledged:!0})}async initializeFirstPlayerPhase(){return console.log("🎯 SimultaneousActionManager.initializeFirstPlayerPhase: Processing first player determination"),await this.processFirstPlayerDetermination()}async processFirstPlayerDetermination(){try{const{processFirstPlayerDetermination:t}=await ra(async()=>{const{processFirstPlayerDetermination:i}=await import("./firstPlayerUtils-D8_kW28T.js");return{processFirstPlayerDetermination:i}},[]);if(!this.gameStateManager){console.error("❌ GameStateManager not available for first player determination");return}const n=this.gameStateManager.getState(),r=t(n);return this.gameStateManager.setState(r.stateUpdates),console.log("✅ First player determination completed"),r}catch(t){return console.error("❌ Error during first player determination:",t),null}}commitPlayerAction(t,n,r,i={}){if(i.validate&&!i.validate(r))return{success:!1,error:i.errorMessage||`Invalid data for ${n}`,data:r};if(!this.phaseCommitments[n])return console.error(`❌ commitPlayerAction: Phase '${n}' does not exist in phaseCommitments`),console.log("Available phases:",Object.keys(this.phaseCommitments)),{success:!1,error:`Invalid phase: ${n}`,data:{playerId:t,phase:n}};if(!this.phaseCommitments[n][t])return console.error(`❌ commitPlayerAction: Player '${t}' does not exist in phase '${n}'`),console.log(`Available players for ${n}:`,Object.keys(this.phaseCommitments[n])),{success:!1,error:`Invalid player ID: ${t}`,data:{playerId:t,phase:n}};this.phaseCommitments[n][t]={completed:!0,...r},console.log(`✅ ${t} ${n} committed:`,r),this.updateGameStateForPhase(t,n,r),this.emit("playerCompleted",{phase:n,playerId:t,data:r}),t==="player1"&&!this.isMultiplayer()&&(console.log("🤖 Single-player mode: Triggering AI auto-completion for player2"),this.handleAIPhaseCompletion(n));const o=this.areBothPlayersComplete(n);return o&&(console.log(`🎯 Both players completed ${n}, emitting completion event`),this.emit("phaseCompleted",{phase:n,data:this.phaseCommitments[n]})),{success:!0,data:{playerId:t,phase:n,actionData:r,bothPlayersComplete:o}}}updateGameStateForPhase(t,n,r){if(this.gameStateManager)switch(n){case"droneSelection":const i={};r.drones.forEach(l=>{i[l.name]=0}),this.gameStateManager.updatePlayerState(t,{activeDronePool:r.drones,deployedDroneCounts:i});break;case"deckSelection":this.gameStateManager.updatePlayerState(t,{deck:r.deck});break;case"placement":const o=t==="player1"?"placedSections":"opponentPlacedSections";console.log(`[PLACEMENT DATA DEBUG] SimultaneousActionManager storing placement for ${t}:`,{placementKey:o,placementData:r.placement}),this.gameStateManager.setState({[o]:r.placement});break;case"determineFirstPlayer":break;case"mandatoryDiscard":break;case"optionalDiscard":break;case"allocateShields":break;case"mandatoryDroneRemoval":break;default:console.warn(`⚠️ No specific GameState update logic for phase: ${n}`)}}async handleAIPhaseCompletion(t){if(!this.aiPhaseProcessor){console.warn("⚠️ AI Phase Processor not available");return}try{console.log(`🤖 Processing AI completion for phase: ${t}`);let n;switch(t){case"droneSelection":n=await this.aiPhaseProcessor.processDroneSelection(),this.submitDroneSelection("player2",n);break;case"deckSelection":n=await this.aiPhaseProcessor.processDeckSelection(),this.submitDeckSelection("player2",n);break;case"placement":n=await this.aiPhaseProcessor.processPlacement(),this.submitPlacement("player2",n);break;case"mandatoryDiscard":const r=this.gameStateManager.getState();n=await this.aiPhaseProcessor.executeMandatoryDiscardTurn(r),n.updatedPlayerState&&this.gameStateManager.updatePlayerState("player2",n.updatedPlayerState),this.submitMandatoryDiscard("player2",n.cardsToDiscard);break;case"optionalDiscard":const i=this.gameStateManager.getState();n=await this.aiPhaseProcessor.executeOptionalDiscardTurn(i),n.updatedPlayerState&&this.gameStateManager.updatePlayerState("player2",n.updatedPlayerState),this.submitOptionalDiscard("player2",n.cardsToDiscard);break;case"allocateShields":this.submitShieldAllocation("player2",[]);break;case"mandatoryDroneRemoval":const o=this.gameStateManager.getState();n=await this.aiPhaseProcessor.executeMandatoryDroneRemovalTurn(o),n.updatedPlayerState&&this.gameStateManager.updatePlayerState("player2",n.updatedPlayerState),this.submitMandatoryDroneRemoval("player2",n.dronesToRemove);break;case"determineFirstPlayer":this.acknowledgeFirstPlayer("player2");break;default:console.warn(`⚠️ No AI handler for phase: ${t}`)}}catch(n){console.error("AI phase completion error:",n)}}areBothPlayersComplete(t){const n=this.phaseCommitments[t];if(!n)return console.log(`❌ No commitments found for phase: ${t}`),!1;const r=n.player1.completed,i=n.player2.completed,o=r&&i;return console.log(`🔍 Phase '${t}' completion check: player1=${r}, player2=${i}, both=${o}`),o}getPhaseCommitmentStatus(t){return{phase:t,commitments:this.phaseCommitments[t]||{},bothComplete:this.areBothPlayersComplete(t)}}resetPhaseCommitments(t=null){t?this.phaseCommitments[t]&&(this.phaseCommitments[t].player1={completed:!1},this.phaseCommitments[t].player2={completed:!1},console.log(`🔄 Reset commitments for phase: ${t}`)):(Object.keys(this.phaseCommitments).forEach(n=>{this.phaseCommitments[n].player1={completed:!1},this.phaseCommitments[n].player2={completed:!1}}),console.log("🔄 Reset all phase commitments"))}getDebugInfo(){return{commitments:this.phaseCommitments,systemsConnected:{gameStateManager:!!this.gameStateManager,aiPhaseProcessor:!!this.aiPhaseProcessor},timestamp:new Date().toISOString()}}}const ia=new jc,wA=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(`🚢 Initialized ship placement: ${e.length} sections available`),console.log(`🎯 Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class xR{constructor(){this.currentPhase=null,this.currentPlayer=null,this.isPhaseActive=!1,this.passInfo={player1Passed:!1,player2Passed:!1,firstPasser:null},this.isProcessingTurn=!1,this.turnTimer=null,this.gameStateManager=null,this.actionProcessor=null,this.aiPhaseProcessor=null,this.listeners=new Set,this.aiTurnDelay=1500,console.log("🎮 SequentialPhaseManager initialized")}initialize(t,n,r){this.gameStateManager=t,this.actionProcessor=n,this.aiPhaseProcessor=r,this.gameStateManager&&this.gameStateManager.subscribe(i=>{this.handleStateChange(i)}),console.log("🔗 SequentialPhaseManager connected to dependencies")}handleStateChange(t){const n=this.gameStateManager.getState(),i=["deployment","action"].includes(n.turnPhase);n.turnPhase!==this.currentPhase&&(i&&!this.isPhaseActive?this.initializePhase(n.turnPhase,n.currentPlayer):!i&&this.isPhaseActive&&this.cleanupPhase()),this.isPhaseActive&&n.currentPlayer!==this.currentPlayer&&this.onTurnChange(n.currentPlayer),this.isPhaseActive&&n.passInfo&&JSON.stringify(n.passInfo)!==JSON.stringify(this.passInfo)&&(this.passInfo={...n.passInfo},this.checkPhaseCompletion())}initializePhase(t,n){console.log(`🎯 SequentialPhaseManager: Initializing ${t} phase, first player: ${n}`),this.currentPhase=t,this.currentPlayer=n,this.isPhaseActive=!0,this.passInfo={player1Passed:!1,player2Passed:!1,firstPasser:null},this.emit({type:"phase_started",phase:t,firstPlayer:n}),this.checkForAITurn()}onTurnChange(t){console.log(`🔄 SequentialPhaseManager: Turn changed to ${t}`),this.turnTimer&&(clearTimeout(this.turnTimer),this.turnTimer=null),this.currentPlayer=t,this.emit({type:"turn_changed",player:t,phase:this.currentPhase}),this.checkForAITurn()}checkForAITurn(){if(!(!this.isPhaseActive||this.isProcessingTurn||this.gameStateManager.getState().gameMode!=="local"||!(this.currentPlayer==="player2"))){if(this.passInfo.player2Passed){console.log("🤖 AI has already passed this phase");return}console.log(`⏰ Scheduling AI turn in ${this.aiTurnDelay}ms`),this.turnTimer=setTimeout(()=>{this.processAITurn()},this.aiTurnDelay)}}async processAITurn(){if(this.isProcessingTurn){console.log("⚠️ Already processing a turn, skipping AI turn");return}this.isProcessingTurn=!0;try{console.log(`🤖 SequentialPhaseManager: Triggering AI turn for ${this.currentPhase} phase`);const t=this.gameStateManager.getState();let n;if(this.currentPhase==="deployment"?n=await this.aiPhaseProcessor.executeDeploymentTurn(t):this.currentPhase==="action"?n=await this.aiPhaseProcessor.executeActionTurn(t):(console.error(`❌ Unknown sequential phase: ${this.currentPhase}`),n=await this.aiPhaseProcessor.executePass(this.currentPhase)),console.log("🤖 AI decision received:",n),n.type==="pass")await this.processPlayerPass("player2");else if(n.type==="deployment"&&n.decision?.type==="pass")await this.processPlayerPass("player2");else if(n.type==="deployment")(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:n.decision.payload.droneToDeploy,laneId:n.decision.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}});else if(n.type==="action"){const r=await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:n.decision}})}}catch(t){console.error("❌ Error processing AI turn:",t);try{await this.aiPhaseProcessor.executePass(this.currentPhase)}catch(n){console.error("❌ Failed to force AI pass:",n)}}finally{this.isProcessingTurn=!1,this.passInfo&&this.passInfo.player1Passed&&!this.passInfo.player2Passed&&(console.log("🔄 Human has passed - AI continues taking turns"),this.checkForAITurn())}}async processPlayerPass(t){console.log(`🏳️ SequentialPhaseManager: ${t} passed`);const n=!this.passInfo.player1Passed&&!this.passInfo.player2Passed;this.passInfo[t+"Passed"]=!0,n&&(this.passInfo.firstPasser=t),this.gameStateManager.setPassInfo(this.passInfo),this.emit({type:"player_passed",player:t,phase:this.currentPhase,firstPasser:this.passInfo.firstPasser}),await this.checkPhaseCompletion()}async checkPhaseCompletion(){if(this.passInfo.player1Passed&&this.passInfo.player2Passed){console.log(`✅ Both players passed - ${this.currentPhase} phase complete`),this.emit({type:"phase_completed",phase:this.currentPhase,firstPasser:this.passInfo.firstPasser});let t;this.currentPhase==="deployment"?t="action":this.currentPhase==="action"&&(t="roundEnd"),t&&await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t}}),this.cleanupPhase()}else if(this.passInfo[this.currentPlayer+"Passed"]){const t=this.currentPlayer==="player1"?"player2":"player1";await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:t}})}}cleanupPhase(){console.log(`🧹 SequentialPhaseManager: Cleaning up ${this.currentPhase} phase`),this.turnTimer&&(clearTimeout(this.turnTimer),this.turnTimer=null),this.currentPhase=null,this.currentPlayer=null,this.isPhaseActive=!1,this.isProcessingTurn=!1,this.passInfo={player1Passed:!1,player2Passed:!1,firstPasser:null}}canPlayerAct(t){return!(!this.isPhaseActive||this.currentPlayer!==t||this.passInfo[t+"Passed"])}getStatus(){return{isActive:this.isPhaseActive,phase:this.currentPhase,currentPlayer:this.currentPlayer,passInfo:{...this.passInfo},isProcessingTurn:this.isProcessingTurn}}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t){this.listeners.forEach(n=>{try{n(t)}catch(r){console.error("Error in SequentialPhaseManager listener:",r)}})}forceEndPhase(){console.warn("⚠️ Force ending sequential phase"),this.cleanupPhase()}}const Ny=new xR;class Nc{constructor(){if(Nc.instance)return Nc.instance;Nc.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","determineFirstPlayer","allocateShields","mandatoryDroneRemoval"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.simultaneousActionManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,console.log("🎮 GameFlowManager initialized")}initialize(t,n,r,i,o){if(this.gameStateManager=t,this.simultaneousActionManager=n,this.actionProcessor=r,this.isMultiplayer=i,this.gameDataService=new Xc(t),o&&o.initialize){const l=o.currentAIPersonality,u=o.dronePool,d=o.aiPersonalities;o.initialize(d,u,l,r,t)}Ny.initialize(t,r,o),this.setupEventListeners(),console.log("🔧 GameFlowManager initialized with external systems")}setupEventListeners(){this.simultaneousActionManager&&this.simultaneousActionManager.subscribe(t=>{t.type==="phaseCompleted"&&this.onSimultaneousPhaseComplete(t.phase,t.data)}),Ny.subscribe(t=>{t.type==="phase_completed"&&this.onSequentialPhaseComplete(t.phase,{firstPasser:t.firstPasser})}),this.actionProcessor&&typeof this.actionProcessor.subscribe=="function"?this.actionProcessor.subscribe(t=>{t.type==="sequentialPhaseComplete"&&this.onSequentialPhaseComplete(t.phase,t.data)}):this.actionProcessor&&console.log("🔄 ActionProcessor available but no event subscription capability")}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(`🔔 GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}startGameFlow(t="droneSelection"){console.log(`🚀 GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage="preGame",this.roundNumber=0;let n={};if(t==="droneSelection"){console.log("🎲 GameFlowManager initializing drone selection phase data");const r=r2(wn),i=wA();n={...r,...i}}this.gameStateManager&&this.gameStateManager.setState({turnPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,...n}),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){console.log(`✅ GameFlowManager: Simultaneous phase '${t}' completed`,n);const r=this.getNextPhase(t);r?(this.isSequentialPhase(r)?(console.log(`🔄 GameFlowManager: Handover to sequential phase '${r}'`),this.initiateSequentialPhase(r)):(console.log(`🔄 GameFlowManager: Continuing with simultaneous phase '${r}'`),await this.transitionToPhase(r)),this.simultaneousActionManager&&(this.simultaneousActionManager.resetPhaseCommitments(t),console.log(`🧹 GameFlowManager: Cleaned up completed phase '${t}' after transition`))):(console.log("🎯 GameFlowManager: Game flow completed or needs special handling"),this.simultaneousActionManager&&(this.simultaneousActionManager.resetPhaseCommitments(t),console.log(`🧹 GameFlowManager: Cleaned up final phase '${t}'`)))}async onSequentialPhaseComplete(t,n){console.log(`✅ GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(`🤖 GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="gameInitializing"?n=await this.processGameInitializingPhase():t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():console.warn(`⚠️ No handler for automatic phase: ${t}`),n?(console.log(`🔄 GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),await this.transitionToPhase(n)):console.warn(`⚠️ No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(){console.log("🃏 GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await ra(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-DxthsTlz.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error("❌ GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);this.gameStateManager.setState({player1:i.player1,player2:i.player2}),console.log("✅ Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const o=this.getNextPhase("draw");return console.log("✅ Automatic draw completed, returning next phase:",o),o}catch(n){console.error("❌ Error during automatic draw phase:",n)}}async processAutomaticEnergyResetPhase(){console.log("⚡ GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error("❌ GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),r=(await ra(async()=>{const{default:p}=await Promise.resolve().then(()=>Uk);return{default:p}},void 0)).default,i=new r(this.gameStateManager),o=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={...n.player1,energy:o.totals.energyPerTurn,deploymentBudget:o.totals.deploymentBudget},d={...n.player2,energy:l.totals.energyPerTurn,deploymentBudget:l.totals.deploymentBudget};this.gameStateManager.setPlayerStates(u,d),console.log(`✅ Energy reset complete - Player 1: ${u.energy} energy, Player 2: ${d.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const h=this.getNextPhase("energyReset");return console.log("✅ Automatic energy reset completed, returning next phase:",h),h}catch(n){console.error("❌ Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(){console.log("🎯 GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:"placement",gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(n=>setTimeout(n,100));const t=this.getNextPhase("gameInitializing");return console.log("✅ Game initialization completed, returning next phase:",t),t}catch(t){throw console.error("❌ Error during game initialization:",t),t}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn("⚠️ GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const o=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return o>u}anyPlayerHasShieldsToAllocate(t){return!1}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const o=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return o>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(`🎯 GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(`🔄 Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn("⚠️ ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1)),console.log(`🔄 GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"?(console.log("🚢 GameFlowManager: Initializing placement phase data"),r=wA()):t==="determineFirstPlayer"&&(console.log("🎯 GameFlowManager: Initializing first player determination phase"),this.simultaneousActionManager&&(i=await this.simultaneousActionManager.initializeFirstPlayerPhase(),console.log("🎯 First player determination completed:",i))),this.gameStateManager&&this.gameStateManager.setState({turnPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,...r}),this.isAutomaticPhase(t)){console.log(`🤖 GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,console.log(`🔄 GameFlowManager: Starting round ${this.roundNumber}`);const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn("⚠️ No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){console.log(`🏆 GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.gameStateManager&&this.gameStateManager.setState({turnPhase:"gameOver",gameStage:"gameOver",winner:t}),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log("🔄 GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,simultaneousActionManager:!!this.simultaneousActionManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const $c=new Nc,My=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];function OA(){const{gameStateManager:e}=zi(),[t,n]=C.useState(!1),r=()=>{console.log("🎮 Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{console.log("🎮 Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},o=()=>{n(!0)},l=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#00ff88",color:"#000000",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 255, 136, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#00cc6a",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#00ff88",u.target.style.transform="translateY(0)"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#ff6b35",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 53, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#e55a2b",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#ff6b35",u.target.style.transform="translateY(0)"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"10px 20px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>{u.target.style.backgroundColor="#cccccc",u.target.style.color="#1a1a1a"},onMouseOut:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#cccccc"},children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"DRONE WARS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"Strategic Combat in the Digital Arena"}),v.jsx("button",{onClick:o,style:{fontSize:"1.5rem",padding:"15px 40px",backgroundColor:"#0088ff",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 136, 255, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#0066cc",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#0088ff",u.target.style.transform="translateY(0)"},children:"START GAME"})]})})}function SR(){const{gameState:e,gameStateManager:t}=zi(),[n,r]=C.useState(null),i=e.gameMode==="local",o=e.gameMode==="multiplayer",l=()=>{console.log("🔙 Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=h=>{console.log("🤖 Selected AI:",h.name),r(h)},d=()=>{if(i&&n){console.log("🎮 Starting single player game with AI:",n.name);const h=wn.filter(m=>n.dronePool.includes(m.name)),p={};h.forEach(m=>{p[m.name]=0}),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:h,deployedDroneCounts:p,aiPersonality:n})}else o&&(console.log("🎮 Starting multiplayer game"),t.startGame("multiplayer",{name:"Player 1"},{name:"Player 2"}))};return v.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:My.map(h=>v.jsxs("div",{onClick:()=>u(h),style:{padding:"20px",backgroundColor:n?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:p=>{n?.name!==h.name&&(p.target.style.backgroundColor="#333333",p.target.style.borderColor="#666666")},onMouseOut:p=>{n?.name!==h.name&&(p.target.style.backgroundColor="#2a2a2a",p.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),o&&v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[v.jsx("div",{style:{fontSize:"1.2rem",color:"#cccccc",marginBottom:"1rem"},children:"Multiplayer game ready to start"}),v.jsx("div",{style:{fontSize:"1rem",color:"#888888"},children:"Both players will customize their decks and drones in-game"})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"12px 24px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:h=>{h.target.style.backgroundColor="#cccccc",h.target.style.color="#1a1a1a"},onMouseOut:h=>{h.target.style.backgroundColor="transparent",h.target.style.color="#cccccc"},children:"BACK TO MENU"}),v.jsx("button",{onClick:d,disabled:i&&!n,style:{fontSize:"1.2rem",padding:"12px 30px",backgroundColor:i&&!n?"#444444":"#00ff88",color:i&&!n?"#888888":"#000000",border:"none",borderRadius:"8px",cursor:i&&!n?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:i&&!n?.5:1},onMouseOver:h=>{i&&!n||(h.target.style.backgroundColor="#00cc6a",h.target.style.transform="translateY(-2px)")},onMouseOut:h=>{i&&!n||(h.target.style.backgroundColor="#00ff88",h.target.style.transform="translateY(0)")},children:i?"START GAME":"START MULTIPLAYER"})]})]})}const _A=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),AR=({text:e,className:t})=>{const n=C.useRef(null),r=C.useRef(null);return C.useEffect(()=>{const i=n.current,o=r.current;if(!i||!o||i.clientHeight===0)return;const l=()=>{let u,d;t.includes("font-orbitron")?(u=8,d=16):(u=8,d=12);let h=d;for(o.style.fontSize=h+"px";(o.scrollWidth>i.clientWidth||o.scrollHeight>i.clientHeight)&&h>u;)h-=.5,o.style.fontSize=h+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},rd=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:o=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:d})=>{let h=e.limit;l.forEach(se=>{se.mod.stat==="limit"&&(h+=se.mod.value)});const p=i>=h,m=n&&(!p||o),y=C.useMemo(()=>{const se={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(te=>{te.mod.stat==="cost"?se.cost=Math.max(0,se.cost+te.mod.value):se.hasOwnProperty(te.mod.stat)&&(se[te.mod.stat]+=te.mod.value)}),se},[e,l]),x=y.cost,S=y.attack>e.attack,A=y.attack<e.attack,P=S?"text-green-400":A?"text-red-400":"text-white",E=y.speed>e.speed,O=y.speed<e.speed,_=E?"text-green-400":O?"text-red-400":"text-white",N=y.cost<e.class,j=y.cost>e.class,D=N?"text-green-400":j?"text-red-400":"text-white",k=h>e.limit?"text-green-400":"text-white",{name:U,image:Z,hull:q,shields:J,abilities:ce}=e;return v.jsx("div",{onClick:m?()=>t(e):void 0,className:`
        w-60 h-[320px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${m?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${m?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:v.jsxs("div",{className:`
          w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden
        `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:Z,alt:U,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(AR,{text:U,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(_A,{value:y.attack,isFlat:!1,icon:Sy,iconColor:"text-red-400",textColor:P})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:J>0&&Array.from({length:J}).map((se,te)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${te}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:q}).map((se,te)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${te}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(_A,{value:y.speed,isFlat:!0,icon:xy,iconColor:"text-blue-400",textColor:_})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-40 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:ce&&ce.length>0?ce.map((se,te)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:se.name}),v.jsx("p",{className:"text-gray-400 text-xs leading-tight font-exo",children:se.description})]},te)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Rc,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${D}`,children:x})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:se=>{se.stopPropagation(),d&&d(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${p?"text-pink-500":k}`,children:[i,"/",h]})})]})]})]})]})})},$v=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(Ov,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"✅ Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function CR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r}=zi(),{droneSelectionPool:i,droneSelectionTrio:o,turnPhase:l}=e,u=r(),[d,h]=C.useState([]),[p,m]=C.useState(o),[y,x]=C.useState(i),[S,A]=C.useState({droneSelection:!1}),[P,E]=C.useState({droneSelection:!1});C.useEffect(()=>{const D=R=>{const{type:k,phase:U,playerId:Z}=R.detail||R;console.log(`🔔 DroneSelectionScreen received PhaseManager event: ${k}`,{phase:U,playerId:Z}),U==="droneSelection"&&(k==="playerCompleted"?Z===t()?A(J=>({...J,droneSelection:!0})):n()&&E(J=>({...J,droneSelection:!0})):k==="phaseCompleted"&&(h([]),A(q=>({...q,droneSelection:!1})),E(q=>({...q,droneSelection:!1}))))};return window.addEventListener("phaseManagerEvent",D),()=>{window.removeEventListener("phaseManagerEvent",D)}},[t,n]);const O=D=>{if(l!=="droneSelection")return;console.log("🔧 handleChooseDroneForSelection called with:",D.name);const R=[...d,D];if(h(R),R.length<5){const k=Hk(y);m(k.droneSelectionTrio),x(k.droneSelectionPool),console.log("🔧 Advanced to next trio locally, selected:",R.length,"of 5 drones")}else console.log("🔧 All 5 drones selected, waiting for Continue button click")},_=()=>{if(l!=="droneSelection")return;console.log("🔧 handleContinueDroneSelection called with:",d.length,"drones");const D=t(),R=ia.submitDroneSelection(D,d);if(!R.success){console.error("❌ Drone selection submission failed:",R.error);return}console.log("✅ Drone selection submitted to PhaseManager")},N=S.droneSelection;if(n()&&N&&!P.droneSelection){const R=ia.getPhaseCommitmentStatus("droneSelection").commitments?.player1?.drones||u.activeDronePool||d,k=R.length>0?R.map(U=>U.name).join(", "):"Selection complete";return v.jsx($v,{phase:"droneSelection",localPlayerStatus:`You selected: ${k}`})}const j=d.length===5;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((D,R)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${R<d.length?"bg-green-500":"bg-gray-600"}`},R)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[d.length,"/5 drones selected"]})]}),j?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:"✅ Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",d.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),p&&p.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:p.map((D,R)=>v.jsx(rd,{drone:D,onClick:()=>O(D),isSelectable:!0,deployedCount:0},D.name||R))})]}),v.jsx("button",{onClick:_,disabled:!j,className:`px-8 py-3 font-bold rounded-lg transition-all mb-8 ${j?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/25 hover:shadow-green-500/30 transform hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:j?"Continue to Deck Selection":`Continue (${d.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",d.length,"/5)",j&&v.jsx("span",{className:"text-green-400 ml-2",children:"✓"})]}),d.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:d.map((D,R)=>v.jsx(rd,{drone:D,isSelectable:!1,deployedCount:0},R))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function PR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getOpponentPlayerState:i,addLogEntry:o}=zi(),{turnPhase:l}=e,u=r();i();const[d,h]=C.useState({deckSelection:!1}),[p,m]=C.useState({deckSelection:!1});C.useEffect(()=>{const S=A=>{const{type:P,phase:E,playerId:O}=A.detail||A;console.log(`🔔 DeckSelectionScreen received PhaseManager event: ${P}`,{phase:E,playerId:O}),E==="deckSelection"&&(P==="playerCompleted"?O===t()?h(N=>({...N,deckSelection:!0})):n()&&m(N=>({...N,deckSelection:!0})):P==="phaseCompleted"&&(h(_=>({..._,deckSelection:!1})),m(_=>({..._,deckSelection:!1}))))};return window.addEventListener("phaseManagerEvent",S),()=>{window.removeEventListener("phaseManagerEvent",S)}},[t,n]);const y=S=>{if(l==="deckSelection")if(console.log("🔧 handleDeckChoice called with:",S),S==="standard"){const A=t(),P=_e.buildDeckFromList(Mo),E=ia.submitDeckSelection(A,P);if(!E.success){console.error("❌ Deck selection submission failed:",E.error);return}console.log("✅ Standard deck selection submitted to PhaseManager"),o({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else S==="custom"&&(console.log("🔧 Transitioning to deck building phase"),$c.transitionToPhase("deckBuilding"))},x=u.deck&&u.deck.length>0;return console.log("Deck selection render check:",{isMultiplayer:n(),localPlayerHasDeck:x,opponentPhaseCompletion_deckSelection:p.deckSelection,turnPhase:l,localPlayerDeckLength:u.deck?.length}),n()&&x&&!p.deckSelection?v.jsx($v,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>y("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"mt-6 bg-cyan-600 text-white font-bold px-6 py-2 rounded-full hover:bg-cyan-700 transition-colors duration-200",children:"Select"})]}),v.jsxs("div",{onClick:()=>y("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const ER=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),ad=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:o,onAbilityClick:l,isInteractive:u,isOpponent:d,isHovered:h,onMouseEnter:p,onMouseLeave:m,isCardTarget:y,isInMiddleLane:x,reallocationState:S,gameEngine:A,turnPhase:P,isMyTurn:E,passInfo:O,getLocalPlayerId:_,localPlayerState:N,shipAbilityMode:j})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:o,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const D=A.getShipStatus(t),R=D==="critical"?"bg-red-900/60":D==="damaged"?"bg-yellow-900/50":"bg-black/60";let k=D==="critical"?"border-red-500":D==="damaged"?"border-yellow-500":d?"border-pink-500":"border-cyan-500";const U=d?"shadow-pink-500/20":"shadow-cyan-500/20",Z=h?"scale-105 shadow-xl":"";let q="";if(S)switch(S){case"can-remove":k="border-orange-400",q="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":k="border-orange-600",q="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":k="border-gray-600",q="opacity-50";break;case"can-add":k="border-green-400",q="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":k="border-green-600",q="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":k="border-gray-600",q="opacity-50";break}const J=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",ce=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,te=>te.toUpperCase()),se={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{className:`
        relative rounded-xl shadow-lg ${U} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${k}
        ${u?`cursor-pointer ${Z}`:""}
        ${J}
        ${q}
      `,style:se,onClick:o,onMouseEnter:p,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${R}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-4 h-full",children:[v.jsx("div",{className:`absolute top-2 right-2 flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${D==="healthy"?"bg-green-500/20 text-green-300":D==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:D.charAt(0).toUpperCase()+D.slice(1)}),v.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:ce}),v.jsx("p",{className:"text-xs text-gray-400 italic max-w-[200px]",children:t.description})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([te,$])=>{const ee=x&&t.middleLaneBonus&&t.middleLaneBonus[te];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[te,":"]}),v.jsx("span",{className:ee?"text-green-400 font-bold":"",children:$})]},te)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((te,$)=>v.jsx("div",{children:$<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},$))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((te,$)=>{const ee=$+1,{critical:pe,damaged:he}=t.thresholds;let I;ee<=pe?I="bg-red-500":ee<=he?I="bg-orange-500":I="bg-green-500";const K=$<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${K?I:"bg-gray-400"} border border-black/50`},$)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(ER,{ability:t.ability,isUsable:P==="action"&&E()&&!O[`${_()}Passed`]&&N.energy>=t.ability.cost.energy,isSelected:j?.ability.id===t.ability.id,onClick:te=>l(te,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function wR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getLocalPlacedSections:i,setModalContent:o}=zi(),{turnPhase:l,unplacedSections:u}=e,d=r(),h=i(),[p,m]=C.useState(null),[y,x]=C.useState(h||[null,null,null]),[S,A]=C.useState(u||["bridge","powerCell","droneControlHub"]),[P,E]=C.useState({placement:!1}),[O,_]=C.useState({placement:!1});C.useEffect(()=>{const k=U=>{const{type:Z,phase:q,playerId:J}=U.detail||U;console.log(`🔔 ShipPlacementScreen received PhaseManager event: ${Z}`,{phase:q,playerId:J}),q==="placement"&&(Z==="playerCompleted"?J===t()?E(se=>({...se,placement:!0})):n()&&_(se=>({...se,placement:!0})):Z==="phaseCompleted"&&(E(ce=>({...ce,placement:!1})),_(ce=>({...ce,placement:!1}))))};return window.addEventListener("phaseManagerEvent",k),()=>{window.removeEventListener("phaseManagerEvent",k)}},[t,n]);const N=k=>{if(l==="placement")if(console.log("🔧 handleSelectSectionForPlacement called with:",k,"gameMode:",e.gameMode),S.includes(k))m(U=>U===k?null:k);else{const U=y.indexOf(k),Z=[...y];Z[U]=null,x(Z),A(q=>[...q,k]),m(null)}},j=k=>{if(l==="placement")if(console.log("🔧 handleLaneSelectForPlacement called with lane:",k,"gameMode:",e.gameMode),p){if(y[k]){const U=y[k],Z=[...y];Z[k]=p;const q=S.indexOf(p),J=[...S];J.splice(q,1,U),x(Z),A(J)}else{const U=[...y];U[k]=p,x(U),A(Z=>Z.filter(q=>q!==p))}m(null)}else y[k]&&N(y[k])},D=async()=>{if(l!=="placement")return;if(console.log("🔧 handleConfirmPlacement called"),y.some(U=>U==null)){o({title:"Incomplete Placement",text:"All ship sections must be placed before confirming placement.",onClose:()=>o(null),isBlocking:!1});return}console.log("🔧 Submitting placement to PhaseManager:",y);try{const U=await ia.submitPlacement(t(),y);if(!U.success){console.error("❌ Placement submission failed:",U.error),o({title:"Placement Error",text:U.error,onClose:()=>o(null),isBlocking:!1});return}console.log("✅ Placement submitted to PhaseManager"),n()&&!U.data.bothComplete&&o({title:"Placement Confirmed",text:"Your ship placement has been confirmed. Waiting for opponent to complete their placement...",onClose:()=>o(null),isBlocking:!1})}catch(U){console.error("❌ Error submitting placement:",U),o({title:"Placement Error",text:"An error occurred while submitting placement. Please try again.",onClose:()=>o(null),isBlocking:!1})}};if(y&&y.length===3&&y.every(k=>k!==null),n()&&P.placement&&!O.placement){const k=y.map((U,Z)=>U?U.name:"Empty").join(", ");return v.jsx($v,{phase:"placement",localPlayerStatus:`Your ship layout: ${k}`})}const R=y.every(k=>k!==null);return console.log("🔥 ShipPlacementScreen rendered:",{allPlaced:R,placed:y,unplaced:u,selected:p}),v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(k=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes(k)&&v.jsx("div",{onClick:()=>N(k),className:`h-full transition-all duration-300 rounded-xl ${p===k?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(ad,{section:k,stats:d.shipSections[k],effectiveStatsForDisplay:d.shipSections[k].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:_e,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:d,shipAbilityMode:null})})},k))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(k=>{const U=y[k],Z=p&&!y[k];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>j(k),children:U?v.jsx(ad,{section:U,stats:d.shipSections[U],effectiveStatsForDisplay:d.shipSections[U].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:k===1,gameEngine:_e,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:d,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${Z?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:k===1?"Lane 2 (Center Bonus)":`Lane ${k+1}`})})},k)})})]}),v.jsx("button",{onClick:()=>{console.log(`🔥 Confirm Layout button clicked! allPlaced: ${R}`),D()},disabled:!R,className:"mt-12 bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 disabled:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed enabled:hover:bg-green-500 shadow-lg",children:"Confirm Layout"})]})]})}function F2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=F2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function nt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=F2(e))&&(r&&(r+=" "),r+=t);return r}var zm={},Gm={},TA;function OR(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Gm)),Gm}var Hm={},DA;function K2(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Hm)),Hm}var qm={},jA;function V2(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(qm)),qm}var Ym={},NA;function Bv(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let o=0,l="",u="",d=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const h=n[o];u?h==="\\"&&o+1<i?(o++,l+=n[o]):h===u?u="":l+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,r.push(l),l=""):l+=h:h==="["?(d=!0,l&&(r.push(l),l="")):h==="."?l&&(r.push(l),l=""):l+=h,o++}return l&&r.push(l),r}e.toPath=t})(Ym)),Ym}var MA;function Uv(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OR(),n=K2(),r=V2(),i=Bv();function o(u,d,h){if(u==null)return h;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return h;const p=u[d];return p===void 0?n.isDeepKey(d)?o(u,i.toPath(d),h):h:p}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const p=u[d];return p===void 0?h:p}default:{if(Array.isArray(d))return l(u,d,h);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return h;const p=u[d];return p===void 0?h:p}}}function l(u,d,h){if(d.length===0)return h;let p=u;for(let m=0;m<d.length;m++){if(p==null||t.isUnsafeProperty(d[m]))return h;p=p[d[m]]}return p===void 0?h:p}e.get=o})(zm)),zm}var Fm,kA;function _R(){return kA||(kA=1,Fm=Uv().get),Fm}var TR=_R();const js=qr(TR);var Km={exports:{}},ot={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function DR(){if(RA)return ot;RA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var P=A.$$typeof;switch(P){case e:switch(A=A.type,A){case n:case i:case r:case d:case h:case y:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case p:return A;case o:return A;default:return P}}case t:return P}}}return ot.ContextConsumer=o,ot.ContextProvider=l,ot.Element=e,ot.ForwardRef=u,ot.Fragment=n,ot.Lazy=m,ot.Memo=p,ot.Portal=t,ot.Profiler=i,ot.StrictMode=r,ot.Suspense=d,ot.SuspenseList=h,ot.isContextConsumer=function(A){return S(A)===o},ot.isContextProvider=function(A){return S(A)===l},ot.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},ot.isForwardRef=function(A){return S(A)===u},ot.isFragment=function(A){return S(A)===n},ot.isLazy=function(A){return S(A)===m},ot.isMemo=function(A){return S(A)===p},ot.isPortal=function(A){return S(A)===t},ot.isProfiler=function(A){return S(A)===i},ot.isStrictMode=function(A){return S(A)===r},ot.isSuspense=function(A){return S(A)===d},ot.isSuspenseList=function(A){return S(A)===h},ot.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===d||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===p||A.$$typeof===l||A.$$typeof===o||A.$$typeof===u||A.$$typeof===x||A.getModuleId!==void 0)},ot.typeOf=S,ot}var IA;function jR(){return IA||(IA=1,Km.exports=DR()),Km.exports}var NR=jR(),tn=e=>e===0?0:e>0?1:-1,or=e=>typeof e=="number"&&e!=+e,Cs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Te=e=>(typeof e=="number"||e instanceof Number)&&!or(e),oa=e=>Te(e)||typeof e=="string",MR=0,Bc=e=>{var t=++MR;return"".concat(e||"").concat(t)},En=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Te(t)&&typeof t!="string")return r;var o;if(Cs(t)){if(n==null)return r;var l=t.indexOf("%");o=n*parseFloat(t.slice(0,l))/100}else o=+t;return or(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},X2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function pn(e,t,n){return Te(e)&&Te(t)?e+n*(t-e):t}function kR(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):js(r,t))===n)}var nn=e=>e===null||typeof e>"u",Wc=e=>nn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),RR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function zv(e){if(typeof e!="string")return!1;var t=RR;return t.includes(e)}var IR=["viewBox","children"],LA=["points","pathLength"],Vm={svg:IR,polygon:LA,polyline:LA},LR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(C.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{zv(i)&&(r[i]=(o=>n[i](n,o)))}),r},$R=(e,t,n)=>r=>(e(t,n,r),null),Qc=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var o=e[i];zv(i)&&typeof o=="function"&&(r||(r={}),r[i]=$R(o,t,n))}),r},BR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function W2(e){if(typeof e!="string")return!1;var t=BR;return t.includes(e)}function Bs(e){var t=Object.entries(e).filter(n=>{var[r]=n;return W2(r)});return Object.fromEntries(t)}var $A=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",BA=null,Xm=null,Q2=e=>{if(e===BA&&Array.isArray(Xm))return Xm;var t=[];return C.Children.forEach(e,n=>{nn(n)||(NR.isFragment(n)?t=t.concat(Q2(n.props.children)):t.push(n))}),Xm=t,BA=e,t};function Gv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>$A(i)):r=[$A(t)],Q2(e).forEach(i=>{var o=js(i,"type.displayName")||js(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var UR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var o=(i=r&&Vm?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&o.includes(t)||W2(t)),d=!!n&&zv(t);return l||u||d},Bt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(C.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var l;UR((l=r)===null||l===void 0?void 0:l[o],o,t,n)&&(i[o]=r[o])}),i},zR=["children","width","height","viewBox","className","style","title","desc"];function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ky.apply(null,arguments)}function GR(e,t){if(e==null)return{};var n,r,i=HR(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Hv=C.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:o,className:l,style:u,title:d,desc:h}=e,p=GR(e,zR),m=o||{width:r,height:i,x:0,y:0},y=nt("recharts-surface",l);return C.createElement("svg",ky({},Bt(p,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),C.createElement("title",null,d),C.createElement("desc",null,h),n)}),qR=["children","className"];function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ry.apply(null,arguments)}function YR(e,t){if(e==null)return{};var n,r,i=FR(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function FR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Fn=C.forwardRef((e,t)=>{var{children:n,className:r}=e,i=YR(e,qR),o=nt("recharts-layer",r);return C.createElement("g",Ry({className:o},Bt(i,!0),{ref:t}),n)}),Z2=Mw(),J2=C.createContext(null),KR=()=>C.useContext(J2);function ft(e){return function(){return e}}const eO=Math.cos,id=Math.sin,Yr=Math.sqrt,sd=Math.PI,qd=2*sd,Iy=Math.PI,Ly=2*Iy,xs=1e-6,VR=Ly-xs;function tO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function XR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tO;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class WR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tO:XR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,u=this._y1,d=r-t,h=i-n,p=l-t,m=u-n,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>xs)if(!(Math.abs(m*d-h*p)>xs)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,S=i-u,A=d*d+h*h,P=x*x+S*S,E=Math.sqrt(A),O=Math.sqrt(y),_=o*Math.tan((Iy-Math.acos((A+y-P)/(2*E*O)))/2),N=_/O,j=_/E;Math.abs(N-1)>xs&&this._append`L${t+N*p},${n+N*m}`,this._append`A${o},${o},0,0,${+(m*x>p*S)},${this._x1=t+j*d},${this._y1=n+j*h}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),d=r*Math.sin(i),h=t+u,p=n+d,m=1^l,y=l?i-o:o-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>xs||Math.abs(this._y1-p)>xs)&&this._append`L${h},${p}`,r&&(y<0&&(y=y%Ly+Ly),y>VR?this._append`A${r},${r},0,1,${m},${t-u},${n-d}A${r},${r},0,1,${m},${this._x1=h},${this._y1=p}`:y>xs&&this._append`A${r},${r},0,${+(y>=Iy)},${m},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function qv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new WR(t)}function Yv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nO(e){this._context=e}nO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Yd(e){return new nO(e)}function rO(e){return e[0]}function aO(e){return e[1]}function iO(e,t){var n=ft(!0),r=null,i=Yd,o=null,l=qv(u);e=typeof e=="function"?e:e===void 0?rO:ft(e),t=typeof t=="function"?t:t===void 0?aO:ft(t);function u(d){var h,p=(d=Yv(d)).length,m,y=!1,x;for(r==null&&(o=i(x=l())),h=0;h<=p;++h)!(h<p&&n(m=d[h],h,d))===y&&((y=!y)?o.lineStart():o.lineEnd()),y&&o.point(+e(m,h,d),+t(m,h,d));if(x)return o=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:ft(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:ft(+d),u):t},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:ft(!!d),u):n},u.curve=function(d){return arguments.length?(i=d,r!=null&&(o=i(r)),u):i},u.context=function(d){return arguments.length?(d==null?r=o=null:o=i(r=d),u):r},u}function Tf(e,t,n){var r=null,i=ft(!0),o=null,l=Yd,u=null,d=qv(h);e=typeof e=="function"?e:e===void 0?rO:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?aO:ft(+n);function h(m){var y,x,S,A=(m=Yv(m)).length,P,E=!1,O,_=new Array(A),N=new Array(A);for(o==null&&(u=l(O=d())),y=0;y<=A;++y){if(!(y<A&&i(P=m[y],y,m))===E)if(E=!E)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=x;--S)u.point(_[S],N[S]);u.lineEnd(),u.areaEnd()}E&&(_[y]=+e(P,y,m),N[y]=+t(P,y,m),u.point(r?+r(P,y,m):_[y],n?+n(P,y,m):N[y]))}if(O)return u=null,O+""||null}function p(){return iO().defined(i).curve(l).context(o)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:ft(+m),r=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:ft(+m),h):e},h.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:ft(+m),h):r},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:ft(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:ft(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:ft(+m),h):n},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(n)},h.lineX1=function(){return p().x(r).y(t)},h.defined=function(m){return arguments.length?(i=typeof m=="function"?m:ft(!!m),h):i},h.curve=function(m){return arguments.length?(l=m,o!=null&&(u=l(o)),h):l},h.context=function(m){return arguments.length?(m==null?o=u=null:u=l(o=m),h):o},h}class sO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function QR(e){return new sO(e,!0)}function ZR(e){return new sO(e,!1)}const Fv={draw(e,t){const n=Yr(t/sd);e.moveTo(n,0),e.arc(0,0,n,0,qd)}},JR={draw(e,t){const n=Yr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},oO=Yr(1/3),eI=oO*2,tI={draw(e,t){const n=Yr(t/eI),r=n*oO;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},nI={draw(e,t){const n=Yr(t),r=-n/2;e.rect(r,r,n,n)}},rI=.8908130915292852,lO=id(sd/10)/id(7*sd/10),aI=id(qd/10)*lO,iI=-eO(qd/10)*lO,sI={draw(e,t){const n=Yr(t*rI),r=aI*n,i=iI*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const l=qd*o/5,u=eO(l),d=id(l);e.lineTo(d*n,-u*n),e.lineTo(u*r-d*i,d*r+u*i)}e.closePath()}},Wm=Yr(3),oI={draw(e,t){const n=-Yr(t/(Wm*3));e.moveTo(0,n*2),e.lineTo(-Wm*n,-n),e.lineTo(Wm*n,-n),e.closePath()}},Sr=-.5,Ar=Yr(3)/2,$y=1/Yr(12),lI=($y/2+1)*3,cI={draw(e,t){const n=Yr(t/lI),r=n/2,i=n*$y,o=r,l=n*$y+n,u=-o,d=l;e.moveTo(r,i),e.lineTo(o,l),e.lineTo(u,d),e.lineTo(Sr*r-Ar*i,Ar*r+Sr*i),e.lineTo(Sr*o-Ar*l,Ar*o+Sr*l),e.lineTo(Sr*u-Ar*d,Ar*u+Sr*d),e.lineTo(Sr*r+Ar*i,Sr*i-Ar*r),e.lineTo(Sr*o+Ar*l,Sr*l-Ar*o),e.lineTo(Sr*u+Ar*d,Sr*d-Ar*u),e.closePath()}};function uI(e,t){let n=null,r=qv(i);e=typeof e=="function"?e:ft(e||Fv),t=typeof t=="function"?t:ft(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ft(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ft(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function od(){}function ld(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cO(e){this._context=e}cO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ld(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ld(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fI(e){return new cO(e)}function uO(e){this._context=e}uO.prototype={areaStart:od,areaEnd:od,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ld(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dI(e){return new uO(e)}function fO(e){this._context=e}fO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ld(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hI(e){return new fO(e)}function dO(e){this._context=e}dO.prototype={areaStart:od,areaEnd:od,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function pI(e){return new dO(e)}function UA(e){return e<0?-1:1}function zA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(o*i+l*r)/(r+i);return(UA(o)+UA(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(u))||0}function GA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Qm(e,t,n){var r=e._x0,i=e._y0,o=e._x1,l=e._y1,u=(o-r)/3;e._context.bezierCurveTo(r+u,i+u*t,o-u,l-u*n,o,l)}function cd(e){this._context=e}cd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qm(this,this._t0,GA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Qm(this,GA(this,n=zA(this,e,t)),n);break;default:Qm(this,this._t0,n=zA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function hO(e){this._context=new pO(e)}(hO.prototype=Object.create(cd.prototype)).point=function(e,t){cd.prototype.point.call(this,t,e)};function pO(e){this._context=e}pO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function mI(e){return new cd(e)}function gI(e){return new hO(e)}function mO(e){this._context=e}mO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=HA(e),i=HA(t),o=0,l=1;l<n;++o,++l)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function HA(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),l=new Array(n);for(i[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function yI(e){return new mO(e)}function Fd(e,t){this._context=e,this._t=t}Fd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function vI(e){return new Fd(e,.5)}function bI(e){return new Fd(e,0)}function xI(e){return new Fd(e,1)}function Uo(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,u=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<u;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function By(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function SI(e,t){return e[t]}function AI(e){const t=[];return t.key=e,t}function CI(){var e=ft([]),t=By,n=Uo,r=SI;function i(o){var l=Array.from(e.apply(this,arguments),AI),u,d=l.length,h=-1,p;for(const m of o)for(u=0,++h;u<d;++u)(l[u][h]=[0,+r(m,l[u].key,h,o)]).data=m;for(u=0,p=Yv(t(l));u<d;++u)l[p[u]].index=u;return n(l,p),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:ft(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:ft(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?By:typeof o=="function"?o:ft(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??Uo,i):n},i}function PI(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,l;i<o;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}Uo(e,t)}}function EI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}Uo(e,t)}}function wI(e,t){if(!(!((l=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,l;r<o;++r){for(var u=0,d=0,h=0;u<l;++u){for(var p=e[t[u]],m=p[r][1]||0,y=p[r-1][1]||0,x=(m-y)/2,S=0;S<u;++S){var A=e[t[S]],P=A[r][1]||0,E=A[r-1][1]||0;x+=P-E}d+=m,h+=x*m}i[r-1][1]+=i[r-1][0]=n,d&&(n-=h/d)}i[r-1][1]+=i[r-1][0]=n,Uo(e,t)}}var OI=["type","size","sizeType"];function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uy.apply(null,arguments)}function qA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(n),!0).forEach(function(r){_I(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _I(e,t,n){return(t=TI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TI(e){var t=DI(e,"string");return typeof t=="symbol"?t:t+""}function DI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jI(e,t){if(e==null)return{};var n,r,i=NI(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function NI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gO={symbolCircle:Fv,symbolCross:JR,symbolDiamond:tI,symbolSquare:nI,symbolStar:sI,symbolTriangle:oI,symbolWye:cI},MI=Math.PI/180,kI=e=>{var t="symbol".concat(Wc(e));return gO[t]||Fv},RI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*MI;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},II=(e,t)=>{gO["symbol".concat(Wc(e))]=t},Kv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=jI(e,OI),o=YA(YA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=kI(l),x=uI().type(y).size(RI(n,r,l));return x()},{className:d,cx:h,cy:p}=o,m=Bt(o,!0);return h===+h&&p===+p&&n===+n?C.createElement("path",Uy({},m,{className:nt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};Kv.registerSymbol=II;function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zy.apply(null,arguments)}function FA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(n),!0).forEach(function(r){Vv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vv(e,t,n){return(t=$I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $I(e){var t=BI(e,"string");return typeof t=="symbol"?t:t+""}function BI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cr=32;class Xv extends C.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Cr/2,o=Cr/6,l=Cr/3,u=t.inactive?r:t.color,d=n??t.type;if(d==="none")return null;if(d==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Cr,y2:i,className:"recharts-legend-icon"});if(d==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Cr,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return C.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Cr/8,"h").concat(Cr,"v").concat(Cr*3/4,"h").concat(-Cr,"z"),className:"recharts-legend-icon"});if(C.isValidElement(t.legendIcon)){var h=LI({},t);return delete h.legendIcon,C.cloneElement(t.legendIcon,h)}return C.createElement(Kv,{fill:u,cx:i,cy:i,size:Cr,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:o,iconType:l}=this.props,u={x:0,y:0,width:Cr,height:Cr},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,m)=>{var y=p.formatter||i,x=nt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:p.inactive});if(p.type==="none")return null;var S=p.inactive?o:p.color,A=y?y(p.value,p,m):p.value;return C.createElement("li",zy({className:x,style:d,key:"legend-item-".concat(m)},Qc(this.props,p,m)),C.createElement(Hv,{width:n,height:n,viewBox:u,style:h,"aria-label":"".concat(A," legend icon")},this.renderIcon(p,l)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Vv(Xv,"displayName","Legend");Vv(Xv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Zm={},Jm={},KA;function UI(){return KA||(KA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let o=0;o<n.length;o++){const l=n[o],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(Jm)),Jm}var eg={},VA;function yO(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(eg)),eg}var tg={},ng={},rg={},XA;function zI(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(rg)),rg}var WA;function Wv(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zI();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(ng)),ng}var ag={},QA;function GI(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(ag)),ag}var ZA;function HI(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wv(),n=GI();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(tg)),tg}var ig={},sg={},JA;function qI(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uv();function n(r){return function(i){return t.get(i,r)}}e.property=n})(sg)),sg}var og={},lg={},cg={},ug={},eC;function vO(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(ug)),ug}var fg={},tC;function bO(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(fg)),fg}var dg={},nC;function xO(){return nC||(nC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(dg)),dg}var rC;function YI(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qv(),n=vO(),r=bO(),i=xO();function o(m,y,x){return typeof x!="function"?t.isMatch(m,y):l(m,y,function S(A,P,E,O,_,N){const j=x(A,P,E,O,_,N);return j!==void 0?!!j:l(A,P,S,N)},new Map)}function l(m,y,x,S){if(y===m)return!0;switch(typeof y){case"object":return u(m,y,x,S);case"function":return Object.keys(y).length>0?l(m,{...y},x,S):i.eq(m,y);default:return n.isObject(m)?typeof y=="string"?y==="":!0:i.eq(m,y)}}function u(m,y,x,S){if(y==null)return!0;if(Array.isArray(y))return h(m,y,x,S);if(y instanceof Map)return d(m,y,x,S);if(y instanceof Set)return p(m,y,x,S);const A=Object.keys(y);if(m==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(y))return S.get(y)===m;S&&S.set(y,m);try{for(let P=0;P<A.length;P++){const E=A[P];if(!r.isPrimitive(m)&&!(E in m)||y[E]===void 0&&m[E]!==void 0||y[E]===null&&m[E]!==null||!x(m[E],y[E],E,m,y,S))return!1}return!0}finally{S&&S.delete(y)}}function d(m,y,x,S){if(y.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,P]of y.entries()){const E=m.get(A);if(x(E,P,A,m,y,S)===!1)return!1}return!0}function h(m,y,x,S){if(y.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let P=0;P<y.length;P++){const E=y[P];let O=!1;for(let _=0;_<m.length;_++){if(A.has(_))continue;const N=m[_];let j=!1;if(x(N,E,P,m,y,S)&&(j=!0),j){A.add(_),O=!0;break}}if(!O)return!1}return!0}function p(m,y,x,S){return y.size===0?!0:m instanceof Set?h([...m],[...y],x,S):!1}e.isMatchWith=o,e.isSetMatch=p})(cg)),cg}var aC;function Qv(){return aC||(aC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(lg)),lg}var hg={},pg={},mg={},iC;function FI(){return iC||(iC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(mg)),mg}var gg={},sC;function SO(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(gg)),gg}var yg={},oC;function AO(){return oC||(oC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",h="[object Set]",p="[object Array]",m="[object Function]",y="[object ArrayBuffer]",x="[object Object]",S="[object Error]",A="[object DataView]",P="[object Uint8Array]",E="[object Uint8ClampedArray]",O="[object Uint16Array]",_="[object Uint32Array]",N="[object BigUint64Array]",j="[object Int8Array]",D="[object Int16Array]",R="[object Int32Array]",k="[object BigInt64Array]",U="[object Float32Array]",Z="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=y,e.arrayTag=p,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=N,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=U,e.float64ArrayTag=Z,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=R,e.int8ArrayTag=j,e.mapTag=d,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=_,e.uint8ArrayTag=P,e.uint8ClampedArrayTag=E})(yg)),yg}var vg={},lC;function KI(){return lC||(lC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(vg)),vg}var cC;function CO(){return cC||(cC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI(),n=SO(),r=AO(),i=bO(),o=KI();function l(p,m){return u(p,void 0,p,new Map,m)}function u(p,m,y,x=new Map,S=void 0){const A=S?.(p,m,y,x);if(A!==void 0)return A;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const P=new Array(p.length);x.set(p,P);for(let E=0;E<p.length;E++)P[E]=u(p[E],E,y,x,S);return Object.hasOwn(p,"index")&&(P.index=p.index),Object.hasOwn(p,"input")&&(P.input=p.input),P}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const P=new RegExp(p.source,p.flags);return P.lastIndex=p.lastIndex,P}if(p instanceof Map){const P=new Map;x.set(p,P);for(const[E,O]of p)P.set(E,u(O,E,y,x,S));return P}if(p instanceof Set){const P=new Set;x.set(p,P);for(const E of p)P.add(u(E,void 0,y,x,S));return P}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(o.isTypedArray(p)){const P=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,P);for(let E=0;E<p.length;E++)P[E]=u(p[E],E,y,x,S);return P}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const P=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,P),d(P,p,y,x,S),P}if(typeof File<"u"&&p instanceof File){const P=new File([p],p.name,{type:p.type});return x.set(p,P),d(P,p,y,x,S),P}if(p instanceof Blob){const P=new Blob([p],{type:p.type});return x.set(p,P),d(P,p,y,x,S),P}if(p instanceof Error){const P=new p.constructor;return x.set(p,P),P.message=p.message,P.name=p.name,P.stack=p.stack,P.cause=p.cause,d(P,p,y,x,S),P}if(typeof p=="object"&&h(p)){const P=Object.create(Object.getPrototypeOf(p));return x.set(p,P),d(P,p,y,x,S),P}return p}function d(p,m,y=p,x,S){const A=[...Object.keys(m),...t.getSymbols(m)];for(let P=0;P<A.length;P++){const E=A[P],O=Object.getOwnPropertyDescriptor(p,E);(O==null||O.writable)&&(p[E]=u(m[E],E,y,x,S))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(pg)),pg}var uC;function VI(){return uC||(uC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CO();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(hg)),hg}var fC;function XI(){return fC||(fC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qv(),n=VI();function r(i){return i=n.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=r})(og)),og}var bg={},xg={},Sg={},dC;function WI(){return dC||(dC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CO(),n=AO();function r(i,o){return t.cloneDeepWith(i,(l,u,d,h)=>{const p=o?.(l,u,d,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(Sg)),Sg}var hC;function QI(){return hC||(hC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WI();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(xg)),xg}var Ag={},Cg={},pC;function PO(){return pC||(pC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Cg)),Cg}var Pg={},mC;function ZI(){return mC||(mC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SO();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Pg)),Pg}var gC;function JI(){return gC||(gC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K2(),n=PO(),r=ZI(),i=Bv();function o(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?d=i.toPath(u):d=[u],d.length===0)return!1;let h=l;for(let p=0;p<d.length;p++){const m=d[p];if((h==null||!Object.hasOwn(h,m))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(m)&&m<h.length))return!1;h=h[m]}return!0}e.has=o})(Ag)),Ag}var yC;function e4(){return yC||(yC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qv(),n=V2(),r=QI(),i=Uv(),o=JI();function l(u,d){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=r.cloneDeep(d),function(h){const p=i.get(h,u);return p===void 0?o.has(h,u):d===void 0?p===void 0:t.isMatch(p,d)}}e.matchesProperty=l})(bg)),bg}var vC;function t4(){return vC||(vC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yO(),n=qI(),r=XI(),i=e4();function o(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=o})(ig)),ig}var bC;function n4(){return bC||(bC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UI(),n=yO(),r=HI(),i=t4();function o(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=o})(Zm)),Zm}var Eg,xC;function r4(){return xC||(xC=1,Eg=n4().uniqBy),Eg}var a4=r4();const SC=qr(a4);function EO(e,t,n){return t===!0?SC(e,n):typeof t=="function"?SC(e,t):e}var wg={exports:{}},Og={},_g={exports:{}},Tg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function i4(){if(AC)return Tg;AC=1;var e=Qo();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function u(m,y){var x=y(),S=r({inst:{value:x,getSnapshot:y}}),A=S[0].inst,P=S[1];return o(function(){A.value=x,A.getSnapshot=y,d(A)&&P({inst:A})},[m,x,y]),i(function(){return d(A)&&P({inst:A}),m(function(){d(A)&&P({inst:A})})},[m]),l(x),x}function d(m){var y=m.getSnapshot;m=m.value;try{var x=y();return!n(m,x)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Tg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Tg}var CC;function s4(){return CC||(CC=1,_g.exports=i4()),_g.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC;function o4(){if(PC)return Og;PC=1;var e=Qo(),t=s4();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Og.useSyncExternalStoreWithSelector=function(h,p,m,y,x){var S=o(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function E(D){if(!O){if(O=!0,_=D,D=y(D),x!==void 0&&A.hasValue){var R=A.value;if(x(R,D))return N=R}return N=D}if(R=N,r(_,D))return R;var k=y(D);return x!==void 0&&x(R,k)?(_=D,R):(_=D,N=k)}var O=!1,_,N,j=m===void 0?null:m;return[function(){return E(p())},j===null?void 0:function(){return E(j())}]},[p,m,y,x]);var P=i(h,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=P},[P]),d(P),P},Og}var EC;function l4(){return EC||(EC=1,wg.exports=o4()),wg.exports}var c4=l4(),Zv=C.createContext(null),u4=e=>e,At=()=>{var e=C.useContext(Zv);return e?e.store.dispatch:u4},Zf=()=>{},f4=()=>Zf,d4=(e,t)=>e===t;function we(e){var t=C.useContext(Zv);return c4.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:f4,t?t.store.getState:Zf,t?t.store.getState:Zf,t?e:Zf,d4)}function h4(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function p4(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function m4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var wC=e=>Array.isArray(e)?e:[e];function g4(e){const t=Array.isArray(e[0])?e[0]:e;return m4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function y4(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var v4=class{constructor(e){this.value=e}deref(){return this.value}},b4=typeof WeakRef<"u"?WeakRef:v4,x4=0,OC=1;function Df(){return{s:x4,v:void 0,o:null,p:null}}function wO(e,t={}){let n=Df();const{resultEqualityCheck:r}=t;let i,o=0;function l(){let u=n;const{length:d}=arguments;for(let m=0,y=d;m<y;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(x);A===void 0?(u=Df(),S.set(x,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(x);A===void 0?(u=Df(),S.set(x,u)):u=A}}const h=u;let p;if(u.s===OC)p=u.v;else if(p=e.apply(null,arguments),o++,r){const m=i?.deref?.()??i;m!=null&&r(m,p)&&(p=m,o!==0&&o--),i=typeof p=="object"&&p!==null||typeof p=="function"?new b4(p):p}return h.s=OC,h.v=p,p}return l.clearCache=()=>{n=Df(),l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function S4(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,l=0,u,d={},h=i.pop();typeof h=="object"&&(d=h,h=i.pop()),h4(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...d},{memoize:m,memoizeOptions:y=[],argsMemoize:x=wO,argsMemoizeOptions:S=[]}=p,A=wC(y),P=wC(S),E=g4(i),O=m(function(){return o++,h.apply(null,arguments)},...A),_=x(function(){l++;const j=y4(E,arguments);return u=O.apply(null,j),u},...P);return Object.assign(_,{resultFunc:h,memoizedResultFunc:O,dependencies:E,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:m,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var Q=S4(wO),A4=Object.assign((e,t=Q)=>{p4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((l,u,d)=>(l[n[d]]=u,l),{}))},{withTypes:()=>A4}),Dg={},jg={},Ng={},_C;function C4(){return _C||(_C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?u-l:l-u}return 0};e.compareValues=n})(Ng)),Ng}var Mg={},kg={},TC;function OO(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(kg)),kg}var DC;function P4(){return DC||(DC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,l){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||l!=null&&Object.hasOwn(l,o)}e.isKey=i})(Mg)),Mg}var jC;function E4(){return jC||(jC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C4(),n=P4(),r=Bv();function i(o,l,u,d){if(o==null)return[];u=d?void 0:u,Array.isArray(o)||(o=Object.values(o)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,S)=>{let A=x;for(let P=0;P<S.length&&A!=null;++P)A=A[S[P]];return A},p=(x,S)=>S==null||x==null?S:typeof x=="object"&&"key"in x?Object.hasOwn(S,x.key)?S[x.key]:h(S,x.path):typeof x=="function"?x(S):Array.isArray(x)?h(S,x):typeof S=="object"?S[x]:S,m=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return o.map(x=>({original:x,criteria:m.map(S=>p(S,x))})).slice().sort((x,S)=>{for(let A=0;A<m.length;A++){const P=t.compareValues(x.criteria[A],S.criteria[A],u[A]);if(P!==0)return P}return 0}).map(x=>x.original)}e.orderBy=i})(jg)),jg}var Rg={},NC;function w4(){return NC||(NC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],o=Math.floor(r),l=(u,d)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&d<o?l(p,d+1):i.push(p)}};return l(n,0),i}e.flatten=t})(Rg)),Rg}var Ig={},MC;function _O(){return MC||(MC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PO(),n=Wv(),r=vO(),i=xO();function o(l,u,d){return r.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?i.eq(d[u],l):!1}e.isIterateeCall=o})(Ig)),Ig}var kC;function O4(){return kC||(kC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E4(),n=w4(),r=_O();function i(o,...l){const u=l.length;return u>1&&r.isIterateeCall(o,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(o,n.flatten(l),["asc"])}e.sortBy=i})(Dg)),Dg}var Lg,RC;function _4(){return RC||(RC=1,Lg=O4().sortBy),Lg}var T4=_4();const Kd=qr(T4);var TO=e=>e.legend.settings,D4=e=>e.legend.size,j4=e=>e.legend.payload,N4=Q([j4,TO],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Kd(r,n):r});function M4(){return we(N4)}var jf=1;function DO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=C.useState({height:0,left:0,top:0,width:0}),r=C.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),l={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(l.height-t.height)>jf||Math.abs(l.left-t.left)>jf||Math.abs(l.top-t.top)>jf||Math.abs(l.width-t.width)>jf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function dn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var k4=typeof Symbol=="function"&&Symbol.observable||"@@observable",IC=k4,$g=()=>Math.random().toString(36).substring(7).split("").join("."),R4={INIT:`@@redux/INIT${$g()}`,REPLACE:`@@redux/REPLACE${$g()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${$g()}`},ud=R4;function Jv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function jO(e,t,n){if(typeof e!="function")throw new Error(dn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(dn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(dn(1));return n(jO)(e,t)}let r=e,i=t,o=new Map,l=o,u=0,d=!1;function h(){l===o&&(l=new Map,o.forEach((P,E)=>{l.set(E,P)}))}function p(){if(d)throw new Error(dn(3));return i}function m(P){if(typeof P!="function")throw new Error(dn(4));if(d)throw new Error(dn(5));let E=!0;h();const O=u++;return l.set(O,P),function(){if(E){if(d)throw new Error(dn(6));E=!1,h(),l.delete(O),o=null}}}function y(P){if(!Jv(P))throw new Error(dn(7));if(typeof P.type>"u")throw new Error(dn(8));if(typeof P.type!="string")throw new Error(dn(17));if(d)throw new Error(dn(9));try{d=!0,i=r(i,P)}finally{d=!1}return(o=l).forEach(O=>{O()}),P}function x(P){if(typeof P!="function")throw new Error(dn(10));r=P,y({type:ud.REPLACE})}function S(){const P=m;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(dn(11));function O(){const N=E;N.next&&N.next(p())}return O(),{unsubscribe:P(O)}},[IC](){return this}}}return y({type:ud.INIT}),{dispatch:y,subscribe:m,getState:p,replaceReducer:x,[IC]:S}}function I4(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:ud.INIT})>"u")throw new Error(dn(12));if(typeof n(void 0,{type:ud.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(dn(13))})}function NO(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const l=t[o];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{I4(n)}catch(o){i=o}return function(l={},u){if(i)throw i;let d=!1;const h={};for(let p=0;p<r.length;p++){const m=r[p],y=n[m],x=l[m],S=y(x,u);if(typeof S>"u")throw u&&u.type,new Error(dn(14));h[m]=S,d=d||S!==x}return d=d||r.length!==Object.keys(l).length,d?h:l}}function fd(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function L4(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(dn(15))};const l={getState:i.getState,dispatch:(d,...h)=>o(d,...h)},u=e.map(d=>d(l));return o=fd(...u)(i.dispatch),{...i,dispatch:o}}}function MO(e){return Jv(e)&&"type"in e&&typeof e.type=="string"}var kO=Symbol.for("immer-nothing"),LC=Symbol.for("immer-draftable"),lr=Symbol.for("immer-state");function Gr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var zo=Object.getPrototypeOf;function Ns(e){return!!e&&!!e[lr]}function za(e){return e?RO(e)||Array.isArray(e)||!!e[LC]||!!e.constructor?.[LC]||Zc(e)||Xd(e):!1}var $4=Object.prototype.constructor.toString();function RO(e){if(!e||typeof e!="object")return!1;const t=zo(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===$4}function dd(e,t){Vd(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Vd(e){const t=e[lr];return t?t.type_:Array.isArray(e)?1:Zc(e)?2:Xd(e)?3:0}function Gy(e,t){return Vd(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function IO(e,t,n){const r=Vd(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function B4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Zc(e){return e instanceof Map}function Xd(e){return e instanceof Set}function Ss(e){return e.copy_||e.base_}function Hy(e,t){if(Zc(e))return new Map(e);if(Xd(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=RO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[lr];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const l=i[o],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(zo(e),r)}else{const r=zo(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function e0(e,t=!1){return Wd(e)||Ns(e)||!za(e)||(Vd(e)>1&&Object.defineProperties(e,{set:{value:Nf},add:{value:Nf},clear:{value:Nf},delete:{value:Nf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>e0(n,!0))),e}function Nf(){Gr(2)}function Wd(e){return Object.isFrozen(e)}var U4={};function Ms(e){const t=U4[e];return t||Gr(0,e),t}var Uc;function LO(){return Uc}function z4(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $C(e,t){t&&(Ms("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function qy(e){Yy(e),e.drafts_.forEach(G4),e.drafts_=null}function Yy(e){e===Uc&&(Uc=e.parent_)}function BC(e){return Uc=z4(Uc,e)}function G4(e){const t=e[lr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function UC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[lr].modified_&&(qy(t),Gr(4)),za(e)&&(e=hd(t,e),t.parent_||pd(t,e)),t.patches_&&Ms("Patches").generateReplacementPatches_(n[lr].base_,e,t.patches_,t.inversePatches_)):e=hd(t,n,[]),qy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==kO?e:void 0}function hd(e,t,n){if(Wd(t))return t;const r=t[lr];if(!r)return dd(t,(i,o)=>zC(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return pd(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),dd(o,(u,d)=>zC(e,r,i,u,d,n,l)),pd(e,i,!1),n&&e.patches_&&Ms("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function zC(e,t,n,r,i,o,l){if(Ns(i)){const u=o&&t&&t.type_!==3&&!Gy(t.assigned_,r)?o.concat(r):void 0,d=hd(e,i,u);if(IO(n,r,d),Ns(d))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(za(i)&&!Wd(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hd(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Zc(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&pd(e,i)}}function pd(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&e0(t,n)}function H4(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:LO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=t0;n&&(i=[r],o=zc);const{revoke:l,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=l,u}var t0={get(e,t){if(t===lr)return e;const n=Ss(e);if(!Gy(n,t))return q4(e,n,t);const r=n[t];return e.finalized_||!za(r)?r:r===Bg(e.base_,t)?(Ug(e),e.copy_[t]=Ky(r,e)):r},has(e,t){return t in Ss(e)},ownKeys(e){return Reflect.ownKeys(Ss(e))},set(e,t,n){const r=$O(Ss(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Bg(Ss(e),t),o=i?.[lr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(B4(n,i)&&(n!==void 0||Gy(e.base_,t)))return!0;Ug(e),Fy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Bg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ug(e),Fy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ss(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Gr(11)},getPrototypeOf(e){return zo(e.base_)},setPrototypeOf(){Gr(12)}},zc={};dd(t0,(e,t)=>{zc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zc.deleteProperty=function(e,t){return zc.set.call(this,e,t,void 0)};zc.set=function(e,t,n){return t0.set.call(this,e[0],t,n,e[0])};function Bg(e,t){const n=e[lr];return(n?Ss(n):e)[t]}function q4(e,t,n){const r=$O(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function $O(e,t){if(!(t in e))return;let n=zo(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=zo(n)}}function Fy(e){e.modified_||(e.modified_=!0,e.parent_&&Fy(e.parent_))}function Ug(e){e.copy_||(e.copy_=Hy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Y4=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const l=this;return function(d=o,...h){return l.produce(d,p=>n.call(this,p,...h))}}typeof n!="function"&&Gr(6),r!==void 0&&typeof r!="function"&&Gr(7);let i;if(za(t)){const o=BC(this),l=Ky(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?qy(o):Yy(o)}return $C(o,r),UC(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===kO&&(i=void 0),this.autoFreeze_&&e0(i,!0),r){const o=[],l=[];Ms("Patches").generateReplacementPatches_(t,i,o,l),r(o,l)}return i}else Gr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){za(e)||Gr(8),Ns(e)&&(e=Ba(e));const t=BC(this),n=Ky(e,void 0);return n[lr].isManual_=!0,Yy(t),n}finishDraft(e,t){const n=e&&e[lr];(!n||!n.isManual_)&&Gr(9);const{scope_:r}=n;return $C(r,t),UC(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ms("Patches").applyPatches_;return Ns(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Ky(e,t){const n=Zc(e)?Ms("MapSet").proxyMap_(e,t):Xd(e)?Ms("MapSet").proxySet_(e,t):H4(e,t);return(t?t.scope_:LO()).drafts_.push(n),n}function Ba(e){return Ns(e)||Gr(10,e),BO(e)}function BO(e){if(!za(e)||Wd(e))return e;const t=e[lr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Hy(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Hy(e,!0);return dd(n,(r,i)=>{IO(n,r,BO(i))}),t&&(t.finalized_=!1),n}var F4=new Y4,UO=F4.produce;function zO(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var K4=zO(),V4=zO,X4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fd:fd.apply(null,arguments)};function _r(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(sr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>MO(r)&&r.type===e,n}var GO=class Oc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Oc.prototype)}static get[Symbol.species](){return Oc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Oc(...t[0].concat(this)):new Oc(...t.concat(this))}};function GC(e){return za(e)?UO(e,()=>{}):e}function Mf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function W4(e){return typeof e=="boolean"}var Q4=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let l=new GO;return n&&(W4(n)?l.push(K4):l.push(V4(n.extraArgument))),l},Z4="RTK_autoBatch",HC=e=>t=>{setTimeout(t,e)},J4=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:HC(10):e.type==="callback"?e.queueNotification:HC(e.timeout),h=()=>{l=!1,o&&(o=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const m=()=>i&&p(),y=r.subscribe(m);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[Z4],o=!i,o&&(l||(l=!0,d(h))),r.dispatch(p)}finally{i=!0}}})},eL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new GO(e);return r&&i.push(J4(typeof r=="object"?r:void 0)),i};function tL(e){const t=Q4(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(Jv(n))u=NO(n);else throw new Error(sr(1));let d;typeof r=="function"?d=r(t):d=t();let h=fd;i&&(h=X4({trace:!1,...typeof i=="object"&&i}));const p=L4(...d),m=eL(p);let y=typeof l=="function"?l(m):m();const x=h(...y);return jO(u,o,x)}function HO(e){const t={},n=[];let r;const i={addCase(o,l){const u=typeof o=="string"?o:o.type;if(!u)throw new Error(sr(28));if(u in t)throw new Error(sr(29));return t[u]=l,i},addAsyncThunk(o,l){return l.pending&&(t[o.pending.type]=l.pending),l.rejected&&(t[o.rejected.type]=l.rejected),l.fulfilled&&(t[o.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:o.settled,reducer:l.settled}),i},addMatcher(o,l){return n.push({matcher:o,reducer:l}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function nL(e){return typeof e=="function"}function rL(e,t){let[n,r,i]=HO(t),o;if(nL(e))o=()=>GC(e());else{const u=GC(e);o=()=>u}function l(u=o(),d){let h=[n[d.type],...r.filter(({matcher:p})=>p(d)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,m)=>{if(m)if(Ns(p)){const x=m(p,d);return x===void 0?p:x}else{if(za(p))return UO(p,y=>m(y,d));{const y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return l.getInitialState=o,l}var aL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",iL=(e=21)=>{let t="",n=e;for(;n--;)t+=aL[Math.random()*64|0];return t},sL=Symbol.for("rtk-slice-createasyncthunk");function oL(e,t){return`${e}/${t}`}function lL({creators:e}={}){const t=e?.asyncThunk?.[sL];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(sr(11));const l=(typeof r.reducers=="function"?r.reducers(uL()):r.reducers)||{},u=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(_,N){const j=typeof _=="string"?_:_.type;if(!j)throw new Error(sr(12));if(j in d.sliceCaseReducersByType)throw new Error(sr(13));return d.sliceCaseReducersByType[j]=N,h},addMatcher(_,N){return d.sliceMatchers.push({matcher:_,reducer:N}),h},exposeAction(_,N){return d.actionCreators[_]=N,h},exposeCaseReducer(_,N){return d.sliceCaseReducersByName[_]=N,h}};u.forEach(_=>{const N=l[_],j={reducerName:_,type:oL(i,_),createNotation:typeof r.reducers=="function"};dL(N)?pL(j,N,h,t):fL(j,N,h)});function p(){const[_={},N=[],j=void 0]=typeof r.extraReducers=="function"?HO(r.extraReducers):[r.extraReducers],D={..._,...d.sliceCaseReducersByType};return rL(r.initialState,R=>{for(let k in D)R.addCase(k,D[k]);for(let k of d.sliceMatchers)R.addMatcher(k.matcher,k.reducer);for(let k of N)R.addMatcher(k.matcher,k.reducer);j&&R.addDefaultCase(j)})}const m=_=>_,y=new Map,x=new WeakMap;let S;function A(_,N){return S||(S=p()),S(_,N)}function P(){return S||(S=p()),S.getInitialState()}function E(_,N=!1){function j(R){let k=R[_];return typeof k>"u"&&N&&(k=Mf(x,j,P)),k}function D(R=m){const k=Mf(y,N,()=>new WeakMap);return Mf(k,R,()=>{const U={};for(const[Z,q]of Object.entries(r.selectors??{}))U[Z]=cL(q,R,()=>Mf(x,R,P),N);return U})}return{reducerPath:_,getSelectors:D,get selectors(){return D(j)},selectSlice:j}}const O={name:i,reducer:A,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:P,...E(o),injectInto(_,{reducerPath:N,...j}={}){const D=N??o;return _.inject({reducerPath:D,reducer:A},j),{...O,...E(D,!0)}}};return O}}function cL(e,t,n,r){function i(o,...l){let u=t(o);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var ur=lL();function uL(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function fL({type:e,reducerName:t,createNotation:n},r,i){let o,l;if("reducer"in r){if(n&&!hL(r))throw new Error(sr(17));o=r.reducer,l=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,l?_r(e,l):_r(e))}function dL(e){return e._reducerDefinitionType==="asyncThunk"}function hL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function pL({type:e,reducerName:t},n,r,i){if(!i)throw new Error(sr(18));const{payloadCreator:o,fulfilled:l,pending:u,rejected:d,settled:h,options:p}=n,m=i(e,o,p);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),d&&r.addCase(m.rejected,d),h&&r.addMatcher(m.settled,h),r.exposeCaseReducer(t,{fulfilled:l||kf,pending:u||kf,rejected:d||kf,settled:h||kf})}function kf(){}var mL="task",qO="listener",YO="completed",n0="cancelled",gL=`task-${n0}`,yL=`task-${YO}`,Vy=`${qO}-${n0}`,vL=`${qO}-${YO}`,Qd=class{constructor(e){this.code=e,this.message=`${mL} ${n0} (reason: ${e})`}name="TaskAbortError";message},r0=(e,t)=>{if(typeof e!="function")throw new TypeError(sr(32))},md=()=>{},FO=(e,t=md)=>(e.catch(t),e),KO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Os=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},_s=e=>{if(e.aborted){const{reason:t}=e;throw new Qd(t)}};function VO(e,t){let n=md;return new Promise((r,i)=>{const o=()=>i(new Qd(e.reason));if(e.aborted){o();return}n=KO(e,o),t.finally(()=>n()).then(r,i)}).finally(()=>{n=md})}var bL=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Qd?"cancelled":"rejected",error:n}}finally{t?.()}},gd=e=>t=>FO(VO(e,t).then(n=>(_s(e),n))),XO=e=>{const t=gd(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:$o}=Object,qC={},Zd="listenerMiddleware",xL=(e,t)=>{const n=r=>KO(e,()=>Os(r,e.reason));return(r,i)=>{r0(r);const o=new AbortController;n(o);const l=bL(async()=>{_s(e),_s(o.signal);const u=await r({pause:gd(o.signal),delay:XO(o.signal),signal:o.signal});return _s(o.signal),u},()=>Os(o,yL));return i?.autoJoin&&t.push(l.catch(md)),{result:gd(e)(l),cancel(){Os(o,gL)}}}},SL=(e,t)=>{const n=async(r,i)=>{_s(t);let o=()=>{};const u=[new Promise((d,h)=>{let p=e({predicate:r,effect:(m,y)=>{y.unsubscribe(),d([m,y.getState(),y.getOriginalState()])}});o=()=>{p(),h()}})];i!=null&&u.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await VO(t,Promise.race(u));return _s(t),d}finally{o()}};return(r,i)=>FO(n(r,i))},WO=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=_r(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(sr(21));return r0(o),{predicate:i,type:t,effect:o}},QO=$o(e=>{const{type:t,predicate:n,effect:r}=WO(e);return{id:iL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(sr(22))}}},{withTypes:()=>QO}),YC=(e,t)=>{const{type:n,effect:r,predicate:i}=WO(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},Xy=e=>{e.pending.forEach(t=>{Os(t,Vy)})},AL=e=>()=>{e.forEach(Xy),e.clear()},FC=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},ZO=$o(_r(`${Zd}/add`),{withTypes:()=>ZO}),CL=_r(`${Zd}/removeAll`),JO=$o(_r(`${Zd}/remove`),{withTypes:()=>JO}),PL=(...e)=>{console.error(`${Zd}/error`,...e)},Jc=(e={})=>{const t=new Map,{extra:n,onError:r=PL}=e;r0(r);const i=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),m=>{p.unsubscribe(),m?.cancelActive&&Xy(p)}),o=p=>{const m=YC(t,p)??QO(p);return i(m)};$o(o,{withTypes:()=>o});const l=p=>{const m=YC(t,p);return m&&(m.unsubscribe(),p.cancelActive&&Xy(m)),!!m};$o(l,{withTypes:()=>l});const u=async(p,m,y,x)=>{const S=new AbortController,A=SL(o,S.signal),P=[];try{p.pending.add(S),await Promise.resolve(p.effect(m,$o({},y,{getOriginalState:x,condition:(E,O)=>A(E,O).then(Boolean),take:A,delay:XO(S.signal),pause:gd(S.signal),extra:n,signal:S.signal,fork:xL(S.signal,P),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((E,O,_)=>{E!==S&&(Os(E,Vy),_.delete(E))})},cancel:()=>{Os(S,Vy),p.pending.delete(S)},throwIfCancelled:()=>{_s(S.signal)}})))}catch(E){E instanceof Qd||FC(r,E,{raisedBy:"effect"})}finally{await Promise.all(P),Os(S,vL),p.pending.delete(S)}},d=AL(t);return{middleware:p=>m=>y=>{if(!MO(y))return m(y);if(ZO.match(y))return o(y.payload);if(CL.match(y)){d();return}if(JO.match(y))return l(y.payload);let x=p.getState();const S=()=>{if(x===qC)throw new Error(sr(23));return x};let A;try{if(A=m(y),t.size>0){const P=p.getState(),E=Array.from(t.values());for(const O of E){let _=!1;try{_=O.predicate(y,P,x)}catch(N){_=!1,FC(r,N,{raisedBy:"predicate"})}_&&u(O,y,p,S)}}}finally{x=qC}return A},startListening:o,stopListening:l,clearListeners:d}};function sr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var EL={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},e_=ur({name:"chartLayout",initialState:EL,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:wL,setLayout:OL,setChartSize:_L,setScale:TL}=e_.actions,DL=e_.reducer;function KC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function VC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(n),!0).forEach(function(r){jL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jL(e,t,n){return(t=NL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NL(e){var t=ML(e,"string");return typeof t=="symbol"?t:t+""}function ML(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yd=Math.PI/180,kL=e=>e*180/Math.PI,Ut=(e,t,n,r)=>({x:e+Math.cos(-yd*r)*n,y:t+Math.sin(-yd*r)*n}),t_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},RL=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return Math.sqrt((n-i)**2+(r-o)**2)},IL=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:o}=t,l=RL({x:n,y:r},{x:i,y:o});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,d=Math.acos(u);return r>o&&(d=2*Math.PI-d),{radius:l,angle:kL(d),angleInRadian:d}},LL=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-o*360,endAngle:n-o*360}},$L=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),o=Math.floor(r/360),l=Math.min(i,o);return e+l*360},BL=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:o}=IL({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:d,endAngle:h}=LL(t),p=o,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?VC(VC({},t),{},{radius:i,angle:$L(p,t)}):null};function n_(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function XC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(n),!0).forEach(function(r){UL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UL(e,t,n){return(t=zL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zL(e){var t=GL(e,"string");return typeof t=="symbol"?t:t+""}function GL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mt(e,t,n){return nn(e)||nn(t)?n:oa(t)?js(e,t,n):typeof t=="function"?t(e):n}var HL=(e,t,n,r,i)=>{var o,l=-1,u=(o=t?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<u;d++){var h=d>0?n[d-1].coordinate:n[u-1].coordinate,p=n[d].coordinate,m=d>=u-1?n[0].coordinate:n[d+1].coordinate,y=void 0;if(tn(p-h)!==tn(m-p)){var x=[];if(tn(m-p)===tn(i[1]-i[0])){y=m;var S=p+i[1]-i[0];x[0]=Math.min(S,(S+h)/2),x[1]=Math.max(S,(S+h)/2)}else{y=h;var A=m+i[1]-i[0];x[0]=Math.min(p,(A+p)/2),x[1]=Math.max(p,(A+p)/2)}var P=[Math.min(p,(y+p)/2),Math.max(p,(y+p)/2)];if(e>P[0]&&e<=P[1]||e>=x[0]&&e<=x[1]){({index:l}=n[d]);break}}else{var E=Math.min(h,m),O=Math.max(h,m);if(e>(E+p)/2&&e<=(O+p)/2){({index:l}=n[d]);break}}}else if(t){for(var _=0;_<u;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:l}=t[_]);break}}return l},qL=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:o,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&o!=="center"&&Te(e[o]))return Er(Er({},e),{},{[o]:e[o]+(r||0)});if((u==="horizontal"||u==="vertical"&&o==="center")&&l!=="middle"&&Te(e[l]))return Er(Er({},e),{},{[l]:e[l]+(i||0)})}return e},Us=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",r_=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,o,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(o=!0),u.coordinate));return i||l.push(t),o||l.push(n),l},a_=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:o,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:h,tickCount:p,ticks:m,niceTicks:y,axisType:x}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=x==="angleAxis"&&o&&o.length>=2?tn(o[0]-o[1])*2*A:A,m||y){var P=(m||y||[]).map((E,O)=>{var _=r?r.indexOf(E):E;return{coordinate:l(_)+A,value:E,offset:A,index:O}});return P.filter(E=>!or(E.coordinate))}return d&&h?h.map((E,O)=>({coordinate:l(E)+A,value:E,index:O,offset:A})):l.ticks&&p!=null?l.ticks(p).map((E,O)=>({coordinate:l(E)+A,value:E,offset:A,index:O})):l.domain().map((E,O)=>({coordinate:l(E)+A,value:r?r[E]:E,index:O,offset:A}))},WC=1e-4,YL=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-WC,o=Math.max(r[0],r[1])+WC,l=e(t[0]),u=e(t[n-1]);(l<i||l>o||u<i||u>o)&&e.domain([t[0],t[n-1]])}},FL=(e,t)=>{if(!t||t.length!==2||!Te(t[0])||!Te(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Te(e[0])||e[0]<n)&&(i[0]=n),(!Te(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},KL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,l=0;l<t;++l){var u=or(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+u,o=e[l][n][1])}},VL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var l=or(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},XL={sign:KL,expand:PI,none:Uo,silhouette:EI,wiggle:wI,positive:VL},WL=(e,t,n)=>{var r=XL[n],i=CI().keys(t).value((o,l)=>+mt(o,l,0)).order(By).offset(r);return i(e)};function QL(e){return e==null?void 0:String(e)}var QC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:o,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=mt(o,t.dataKey,t.scale.domain()[l]);return nn(u)?null:t.scale(u)-i/2+r},ZL=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},JL=e=>{var t=e.flat(2).filter(Te);return[Math.min(...t),Math.max(...t)]},e3=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],t3=(e,t,n)=>{if(e!=null)return e3(Object.keys(e).reduce((r,i)=>{var o=e[i],{stackedData:l}=o,u=l.reduce((d,h)=>{var p=n_(h,t,n),m=JL(p);return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},ZC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,JC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a0=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Kd(t,p=>p.coordinate),o=1/0,l=1,u=i.length;l<u;l++){var d=i[l],h=i[l-1];o=Math.min((d.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function eP(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:o}=e;return Er(Er({},t),{},{dataKey:n,payload:r,value:i,name:o})}function Jd(e,t){if(e)return String(e);if(typeof t=="string")return t}function n3(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var o=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return o?{x:e,y:t}:null}return r?BL({x:e,y:t},r):null}var r3=(e,t,n,r)=>{var i=t.find(h=>h&&h.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,{radius:l}=r;return Er(Er(Er({},r),Ut(r.cx,r.cy,l,o)),{},{angle:o,radius:l})}var u=i.coordinate,{angle:d}=r;return Er(Er(Er({},r),Ut(r.cx,r.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},a3=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Fa=e=>e.layout.width,Ka=e=>e.layout.height,i3=e=>e.layout.scale,i_=e=>e.layout.margin,eh=Q(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),th=Q(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),s_="data-recharts-item-index",o_="data-recharts-item-data-key",eu=60;function tP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(n),!0).forEach(function(r){s3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s3(e,t,n){return(t=o3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o3(e){var t=l3(e,"string");return typeof t=="symbol"?t:t+""}function l3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c3=e=>e.brush.height;function u3(e){var t=th(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:eu;return n+i}return n},0)}function f3(e){var t=th(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:eu;return n+i}return n},0)}function d3(e){var t=eh(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function h3(e){var t=eh(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Kt=Q([Fa,Ka,i_,c3,u3,f3,d3,h3,TO,D4],(e,t,n,r,i,o,l,u,d,h)=>{var p={left:(n.left||0)+i,right:(n.right||0)+o},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},y=Rf(Rf({},m),p),x=y.bottom;y.bottom+=r,y=qL(y,d,h);var S=e-y.left-y.right,A=t-y.top-y.bottom;return Rf(Rf({brushBottom:x},y),{},{width:Math.max(S,0),height:Math.max(A,0)})}),p3=Q(Kt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),i0=Q(Fa,Ka,(e,t)=>({x:0,y:0,width:e,height:t})),m3=C.createContext(null),Dr=()=>C.useContext(m3)!=null,nh=e=>e.brush,rh=Q([nh,Kt,i_],(e,t,n)=>({height:e.height,x:Te(e.x)?e.x:t.left,y:Te(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Te(e.width)?e.width:t.width})),s0=()=>{var e,t=Dr(),n=we(p3),r=we(rh),i=(e=we(nh))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},g3={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},l_=()=>{var e;return(e=we(Kt))!==null&&e!==void 0?e:g3},o0=()=>we(Fa),l0=()=>we(Ka),y3=()=>we(e=>e.layout.margin),We=e=>e.layout.layoutType,c0=()=>we(We),v3={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},c_=ur({name:"legend",initialState:v3,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Ba(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:nP,setLegendSettings:b3,addLegendPayload:u_,removeLegendPayload:f_}=c_.actions,x3=c_.reducer,S3=["contextPayload"];function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wy.apply(null,arguments)}function rP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(n),!0).forEach(function(r){u0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u0(e,t,n){return(t=A3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A3(e){var t=C3(e,"string");return typeof t=="symbol"?t:t+""}function C3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P3(e,t){if(e==null)return{};var n,r,i=E3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function w3(e){return e.value}function O3(e){var{contextPayload:t}=e,n=P3(e,S3),r=EO(t,e.payloadUniqBy,w3),i=Go(Go({},n),{},{payload:r});return C.isValidElement(e.content)?C.cloneElement(e.content,i):typeof e.content=="function"?C.createElement(e.content,i):C.createElement(Xv,i)}function _3(e,t,n,r,i,o){var{layout:l,align:u,verticalAlign:d}=t,h,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?h={left:((r||0)-o.width)/2}:h=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?p={top:((i||0)-o.height)/2}:p=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Go(Go({},h),p)}function T3(e){var t=At();return C.useEffect(()=>{t(b3(e))},[t,e]),null}function D3(e){var t=At();return C.useEffect(()=>(t(nP(e)),()=>{t(nP({width:0,height:0}))}),[t,e]),null}function j3(e){var t=M4(),n=KR(),r=y3(),{width:i,height:o,wrapperStyle:l,portal:u}=e,[d,h]=DO([t]),p=o0(),m=l0();if(p==null||m==null)return null;var y=p-(r.left||0)-(r.right||0),x=ah.getWidthOrHeight(e.layout,o,i,y),S=u?l:Go(Go({position:"absolute",width:x?.width||i||"auto",height:x?.height||o||"auto"},_3(l,e,r,p,m,d)),l),A=u??n;if(A==null)return null;var P=C.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:h},C.createElement(T3,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),C.createElement(D3,{width:d.width,height:d.height}),C.createElement(O3,Wy({},e,x,{margin:r,chartWidth:p,chartHeight:m,contextPayload:t})));return Z2.createPortal(P,A)}class ah extends C.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Te(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return C.createElement(j3,this.props)}}u0(ah,"displayName","Legend");u0(ah,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qy.apply(null,arguments)}function aP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(n),!0).forEach(function(r){N3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N3(e,t,n){return(t=M3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M3(e){var t=k3(e,"string");return typeof t=="symbol"?t:t+""}function k3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R3(e){return Array.isArray(e)&&oa(e[0])&&oa(e[1])?e.join(" ~ "):e}var I3=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:h,label:p,labelFormatter:m,accessibilityLayer:y=!1}=e,x=()=>{if(o&&o.length){var j={padding:0,margin:0},D=(u?Kd(o,u):o).map((R,k)=>{if(R.type==="none")return null;var U=R.formatter||l||R3,{value:Z,name:q}=R,J=Z,ce=q;if(U){var se=U(Z,q,R,k,o);if(Array.isArray(se))[J,ce]=se;else if(se!=null)J=se;else return null}var te=zg({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},r);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:te},oa(ce)?C.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,oa(ce)?C.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,C.createElement("span",{className:"recharts-tooltip-item-value"},J),C.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:j},D)}return null},S=zg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=zg({margin:0},i),P=!nn(p),E=P?p:"",O=nt("recharts-default-tooltip",d),_=nt("recharts-tooltip-label",h);P&&m&&o!==void 0&&o!==null&&(E=m(p,o));var N=y?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",Qy({className:O,style:S},N),C.createElement("p",{className:_,style:A},C.isValidElement(E)?E:"".concat(E)),x())},vc="recharts-tooltip-wrapper",L3={visibility:"hidden"};function $3(e){var{coordinate:t,translateX:n,translateY:r}=e;return nt(vc,{["".concat(vc,"-right")]:Te(n)&&t&&Te(t.x)&&n>=t.x,["".concat(vc,"-left")]:Te(n)&&t&&Te(t.x)&&n<t.x,["".concat(vc,"-bottom")]:Te(r)&&t&&Te(t.y)&&r>=t.y,["".concat(vc,"-top")]:Te(r)&&t&&Te(t.y)&&r<t.y})}function iP(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:h}=e;if(o&&Te(o[r]))return o[r];var p=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?p:m;var y=d[r];if(y==null)return 0;if(l[r]){var x=p,S=y;return x<S?Math.max(m,y):Math.max(p,y)}if(h==null)return 0;var A=m+u,P=y+h;return A>P?Math.max(p,y):Math.max(m,y)}function B3(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function U3(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,h,p,m;return l.height>0&&l.width>0&&n?(p=iP({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),m=iP({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),h=B3({translateX:p,translateY:m,useTranslate3d:u})):h=L3,{cssProperties:h,cssClasses:$3({translateX:p,translateY:m,coordinate:n})}}function sP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function If(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(n),!0).forEach(function(r){Zy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zy(e,t,n){return(t=z3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z3(e){var t=G3(e,"string");return typeof t=="symbol"?t:t+""}function G3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class H3 extends C.PureComponent{constructor(){super(...arguments),Zy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Zy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:l,hasPayload:u,isAnimationActive:d,offset:h,position:p,reverseDirection:m,useTranslate3d:y,viewBox:x,wrapperStyle:S,lastBoundingBox:A,innerRef:P,hasPortalFromProps:E}=this.props,{cssClasses:O,cssProperties:_}=U3({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:y,viewBox:x}),N=E?{}:If(If({transition:d&&t?"transform ".concat(r,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),j=If(If({},N),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:j,ref:P},o)}}var q3=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Jo={isSsr:q3()},d_=()=>we(e=>e.rootProps.accessibilityLayer);function cr(e){return Number.isFinite(e)}function Ho(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jy.apply(null,arguments)}function oP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(n),!0).forEach(function(r){Y3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y3(e,t,n){return(t=F3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F3(e){var t=K3(e,"string");return typeof t=="symbol"?t:t+""}function K3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cP={curveBasisClosed:dI,curveBasisOpen:hI,curveBasis:fI,curveBumpX:QR,curveBumpY:ZR,curveLinearClosed:pI,curveLinear:Yd,curveMonotoneX:mI,curveMonotoneY:gI,curveNatural:yI,curveStep:vI,curveStepAfter:xI,curveStepBefore:bI},Lf=e=>cr(e.x)&&cr(e.y),bc=e=>e.x,xc=e=>e.y,V3=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Wc(e));return(n==="curveMonotone"||n==="curveBump")&&t?cP["".concat(n).concat(t==="vertical"?"Y":"X")]:cP[n]||Yd},X3=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=e,l=V3(t,i),u=o?n.filter(Lf):n,d;if(Array.isArray(r)){var h=o?r.filter(m=>Lf(m)):r,p=u.map((m,y)=>lP(lP({},m),{},{base:h[y]}));return i==="vertical"?d=Tf().y(xc).x1(bc).x0(m=>m.base.x):d=Tf().x(bc).y1(xc).y0(m=>m.base.y),d.defined(Lf).curve(l),d(p)}return i==="vertical"&&Te(r)?d=Tf().y(xc).x1(bc).x0(r):Te(r)?d=Tf().x(bc).y1(xc).y0(r):d=iO().x(bc).y(xc),d.defined(Lf).curve(l),d(u)},h_=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var o=n&&n.length?X3(e):r;return C.createElement("path",Jy({},Bs(e),LR(e),{className:nt("recharts-curve",t),d:o===null?void 0:o,ref:i}))},W3=["x","y","top","left","width","height","className"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function uP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(n),!0).forEach(function(r){Z3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Z3(e,t,n){return(t=J3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J3(e){var t=e$(e,"string");return typeof t=="symbol"?t:t+""}function e$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t$(e,t){if(e==null)return{};var n,r,i=n$(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function n$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var r$=(e,t,n,r,i,o)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n),a$=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:o=0,height:l=0,className:u}=e,d=t$(e,W3),h=Q3({x:t,y:n,top:r,left:i,width:o,height:l},d);return!Te(t)||!Te(n)||!Te(o)||!Te(l)||!Te(r)||!Te(i)?null:C.createElement("path",ev({},Bt(h,!0),{className:nt("recharts-cross",u),d:r$(t,n,o,l,r,i)}))};function i$(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function fP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function s$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(n),!0).forEach(function(r){o$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o$(e,t,n){return(t=l$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l$(e){var t=c$(e,"string");return typeof t=="symbol"?t:t+""}function c$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jr(e,t){var n=s$({},e),r=t,i=Object.keys(t),o=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return o}function u$(){}function dP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(n),!0).forEach(function(r){f$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f$(e,t,n){return(t=d$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d$(e){var t=h$(e,"string");return typeof t=="symbol"?t:t+""}function h$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p$=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),p_=(e,t,n)=>e.map(r=>"".concat(p$(r)," ").concat(t,"ms ").concat(n)).join(","),m$=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Gc=(e,t)=>Object.keys(t).reduce((n,r)=>hP(hP({},n),{},{[r]:e(r,t[r])}),{});function pP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(n),!0).forEach(function(r){g$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g$(e,t,n){return(t=y$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y$(e){var t=v$(e,"string");return typeof t=="symbol"?t:t+""}function v$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vd=(e,t,n)=>e+(t-e)*n,tv=e=>{var{from:t,to:n}=e;return t!==n},m_=(e,t,n)=>{var r=Gc((i,o)=>{if(tv(o)){var[l,u]=e(o.from,o.to,o.velocity);return hn(hn({},o),{},{from:l,velocity:u})}return o},t);return n<1?Gc((i,o)=>tv(o)?hn(hn({},o),{},{velocity:vd(o.velocity,r[i].velocity,n),from:vd(o.from,r[i].from,n)}):o,t):m_(e,r,n-1)};function b$(e,t,n,r,i,o){var l,u=r.reduce((y,x)=>hn(hn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Gc((y,x)=>x.from,u),h=()=>!Object.values(u).filter(tv).length,p=null,m=y=>{l||(l=y);var x=y-l,S=x/n.dt;u=m_(n,u,S),i(hn(hn(hn({},e),t),d())),l=y,h()||(p=o.setTimeout(m))};return()=>(p=o.setTimeout(m),()=>{p()})}function x$(e,t,n,r,i,o,l){var u=null,d=i.reduce((m,y)=>hn(hn({},m),{},{[y]:[e[y],t[y]]}),{}),h,p=m=>{h||(h=m);var y=(m-h)/r,x=Gc((A,P)=>vd(...P,n(y)),d);if(o(hn(hn(hn({},e),t),x)),y<1)u=l.setTimeout(p);else{var S=Gc((A,P)=>vd(...P,n(1)),d);o(hn(hn(hn({},e),t),S))}};return()=>(u=l.setTimeout(p),()=>{u()})}const S$=(e,t,n,r,i,o)=>{var l=m$(e,t);return n.isStepper===!0?b$(e,t,n,l,i,o):x$(e,t,n,r,l,i,o)};var bd=1e-4,g_=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],y_=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),mP=(e,t)=>n=>{var r=g_(e,t);return y_(r,n)},A$=(e,t)=>n=>{var r=g_(e,t),i=[...r.map((o,l)=>o*l).slice(1),0];return y_(i,n)},gP=function(){for(var t,n,r,i,o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,r,n,i]=d[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var h=mP(t,n),p=mP(r,i),m=A$(t,n),y=S=>S>1?1:S<0?0:S,x=S=>{for(var A=S>1?1:S,P=A,E=0;E<8;++E){var O=h(P)-A,_=m(P);if(Math.abs(O-A)<bd||_<bd)return p(P);P=y(P-O/_)}return p(P)};return x.isStepper=!1,x},C$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,o=(l,u,d)=>{var h=-(l-u)*n,p=d*r,m=d+(h-p)*i/1e3,y=d*i/1e3+l;return Math.abs(y-u)<bd&&Math.abs(m)<bd?[u,0]:[y,m]};return o.isStepper=!0,o.dt=i,o},P$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gP(e);case"spring":return C$();default:if(e.split("(")[0]==="cubic-bezier")return gP(e)}return typeof e=="function"?e:null};function E$(e){var t,n=()=>null,r=!1,i=null,o=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...h]=u;if(typeof d=="number"){i=e.setTimeout(o.bind(null,h),d);return}o(d),i=e.setTimeout(o.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),o(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class w${setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function O$(){return E$(new w$)}var _$=C.createContext(O$);function T$(e,t){var n=C.useContext(_$);return C.useMemo(()=>t??n(e),[e,t,n])}var D$={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},yP={t:0},Gg={t:1};function ih(e){var t=jr(e,D$),{isActive:n,canBegin:r,duration:i,easing:o,begin:l,onAnimationEnd:u,onAnimationStart:d,children:h}=t,p=T$(t.animationId,t.animationManager),[m,y]=C.useState(n?yP:Gg),x=C.useRef(null);return C.useEffect(()=>{n||y(Gg)},[n]),C.useEffect(()=>{if(!n||!r)return u$;var S=S$(yP,Gg,P$(o),i,y,p.getTimeoutController()),A=()=>{x.current=S()};return p.start([d,l,A,i,u]),()=>{p.stop(),x.current&&x.current(),u()}},[n,r,i,o,l,d,u,p]),h(m.t)}function sh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=C.useRef(Bc(t)),r=C.useRef(e);return r.current!==e&&(n.current=Bc(t),r.current=e),n.current}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(r){j$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j$(e,t,n){return(t=N$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N$(e){var t=M$(e,"string");return typeof t=="symbol"?t:t+""}function M$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xd.apply(null,arguments)}var xP=(e,t,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,h;if(o>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,y=4;m<y;m++)p[m]=i[m]>o?o:i[m];h="M".concat(e,",").concat(t+l*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+u*p[0],",").concat(t)),h+="L ".concat(e+n-u*p[1],",").concat(t),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+l*p[1])),h+="L ".concat(e+n,",").concat(t+r-l*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+n-u*p[2],",").concat(t+r)),h+="L ".concat(e+u*p[3],",").concat(t+r),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+r-l*p[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);h="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+r-l*x," Z")}else h="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},k$={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},v_=e=>{var t=jr(e,k$),n=C.useRef(null),[r,i]=C.useState(-1);C.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var se=n.current.getTotalLength();se&&i(se)}catch{}},[]);var{x:o,y:l,width:u,height:d,radius:h,className:p}=t,{animationEasing:m,animationDuration:y,animationBegin:x,isAnimationActive:S,isUpdateAnimationActive:A}=t,P=C.useRef(u),E=C.useRef(d),O=C.useRef(o),_=C.useRef(l),N=C.useMemo(()=>({x:o,y:l,width:u,height:d,radius:h}),[o,l,u,d,h]),j=sh(N,"rectangle-");if(o!==+o||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var D=nt("recharts-rectangle",p);if(!A)return C.createElement("path",xd({},Bt(t,!0),{className:D,d:xP(o,l,u,d,h)}));var R=P.current,k=E.current,U=O.current,Z=_.current,q="0px ".concat(r===-1?1:r,"px"),J="".concat(r,"px 0px"),ce=p_(["strokeDasharray"],y,typeof m=="string"?m:void 0);return C.createElement(ih,{animationId:j,key:j,canBegin:r>0,duration:y,easing:m,isActive:A,begin:x},se=>{var te=pn(R,u,se),$=pn(k,d,se),ee=pn(U,o,se),pe=pn(Z,l,se);n.current&&(P.current=te,E.current=$,O.current=ee,_.current=pe);var he;return S?se>0?he={transition:ce,strokeDasharray:J}:he={strokeDasharray:q}:he={strokeDasharray:J},C.createElement("path",xd({},Bt(t,!0),{className:D,d:xP(ee,pe,te,$,h),ref:n,style:bP(bP({},he),t.style)}))})};function b_(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:o}=e,l=Ut(t,n,r,i),u=Ut(t,n,r,o);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(null,arguments)}var R$=(e,t)=>{var n=tn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},$f=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:o,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,h=u*(l?1:-1)+r,p=Math.asin(u/h)/yd,m=d?i:i+o*p,y=Ut(t,n,h,m),x=Ut(t,n,r,m),S=d?i-o*p:i,A=Ut(t,n,h*Math.cos(p*yd),S);return{center:y,circleTangency:x,lineTangency:A,theta:p}},x_=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:l}=e,u=R$(o,l),d=o+u,h=Ut(t,n,i,o),p=Ut(t,n,i,d),m="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var y=Ut(t,n,r,o),x=Ut(t,n,r,d);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(o<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},I$=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}=e,p=tn(h-d),{circleTangency:m,lineTangency:y,theta:x}=$f({cx:t,cy:n,radius:i,angle:d,sign:p,cornerRadius:o,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:P}=$f({cx:t,cy:n,radius:i,angle:h,sign:-p,cornerRadius:o,cornerIsExternal:u}),E=u?Math.abs(d-h):Math.abs(d-h)-x-P;if(E<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):x_({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:h});var O="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:_,lineTangency:N,theta:j}=$f({cx:t,cy:n,radius:r,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),{circleTangency:D,lineTangency:R,theta:k}=$f({cx:t,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),U=u?Math.abs(d-h):Math.abs(d-h)-j-k;if(U<0&&o===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(U>180),",").concat(+(p>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(N.x,",").concat(N.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},L$={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},S_=e=>{var t=jr(e,L$),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:p,className:m}=t;if(o<i||h===p)return null;var y=nt("recharts-sector",m),x=o-i,S=En(l,x,0,!0),A;return S>0&&Math.abs(h-p)<360?A=I$({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(S,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:p}):A=x_({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:h,endAngle:p}),C.createElement("path",nv({},Bt(t,!0),{className:y,d:A}))};function $$(e,t,n){var r,i,o,l;if(e==="horizontal")r=t.x,o=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,o=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:h,outerRadius:p,angle:m}=t,y=Ut(u,d,h,m),x=Ut(u,d,p,m);r=y.x,i=y.y,o=x.x,l=x.y}else return b_(t);return[{x:r,y:i},{x:o,y:l}]}var Hg={},qg={},Yg={},SP;function B$(){return SP||(SP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OO();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(Yg)),Yg}var AP;function U$(){return AP||(AP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B$();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(qg)),qg}var CP;function z$(){return CP||(CP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_O(),n=U$();function r(i,o,l){l&&typeof l!="number"&&t.isIterateeCall(i,o,l)&&(o=l=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),l=l===void 0?i<o?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((o-i)/(l||1)),0),d=new Array(u);for(let h=0;h<u;h++)d[h]=i,i+=l;return d}e.range=r})(Hg)),Hg}var Fg,PP;function G$(){return PP||(PP=1,Fg=z$().range),Fg}var H$=G$();const A_=qr(H$);function Li(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function q$(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function f0(e){let t,n,r;e.length!==2?(t=Li,n=(u,d)=>Li(e(u),d),r=(u,d)=>e(u)-d):(t=e===Li||e===q$?e:Y$,n=e,r=e);function i(u,d,h=0,p=u.length){if(h<p){if(t(d,d)!==0)return p;do{const m=h+p>>>1;n(u[m],d)<0?h=m+1:p=m}while(h<p)}return h}function o(u,d,h=0,p=u.length){if(h<p){if(t(d,d)!==0)return p;do{const m=h+p>>>1;n(u[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function l(u,d,h=0,p=u.length){const m=i(u,d,h,p-1);return m>h&&r(u[m-1],d)>-r(u[m],d)?m-1:m}return{left:i,center:l,right:o}}function Y$(){return 0}function C_(e){return e===null?NaN:+e}function*F$(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const K$=f0(Li),tu=K$.right;f0(C_).center;class EP extends Map{constructor(t,n=W$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(wP(this,t))}has(t){return super.has(wP(this,t))}set(t,n){return super.set(V$(this,t),n)}delete(t){return super.delete(X$(this,t))}}function wP({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function V$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function X$({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function W$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Q$(e=Li){if(e===Li)return P_;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function P_(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Z$=Math.sqrt(50),J$=Math.sqrt(10),e5=Math.sqrt(2);function Sd(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=Z$?10:o>=J$?5:o>=e5?2:1;let u,d,h;return i<0?(h=Math.pow(10,-i)/l,u=Math.round(e*h),d=Math.round(t*h),u/h<e&&++u,d/h>t&&--d,h=-h):(h=Math.pow(10,i)*l,u=Math.round(e/h),d=Math.round(t/h),u*h<e&&++u,d*h>t&&--d),d<u&&.5<=n&&n<2?Sd(e,t,n*2):[u,d,h]}function rv(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?Sd(t,e,n):Sd(e,t,n);if(!(o>=i))return[];const u=o-i+1,d=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)d[h]=(o-h)/-l;else for(let h=0;h<u;++h)d[h]=(o-h)*l;else if(l<0)for(let h=0;h<u;++h)d[h]=(i+h)/-l;else for(let h=0;h<u;++h)d[h]=(i+h)*l;return d}function av(e,t,n){return t=+t,e=+e,n=+n,Sd(e,t,n)[2]}function iv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?av(t,e,n):av(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function OP(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function _P(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function E_(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?P_:Q$(i);r>n;){if(r-n>600){const d=r-n+1,h=t-n+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),x=Math.max(n,Math.floor(t-h*m/d+y)),S=Math.min(r,Math.floor(t+(d-h)*m/d+y));E_(e,t,x,S,i)}const o=e[t];let l=n,u=r;for(Sc(e,n,t),i(e[r],o)>0&&Sc(e,n,r);l<u;){for(Sc(e,l,u),++l,--u;i(e[l],o)<0;)++l;for(;i(e[u],o)>0;)--u}i(e[n],o)===0?Sc(e,n,u):(++u,Sc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Sc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function t5(e,t,n){if(e=Float64Array.from(F$(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return _P(e);if(t>=1)return OP(e);var r,i=(r-1)*t,o=Math.floor(i),l=OP(E_(e,o).subarray(0,o+1)),u=_P(e.subarray(o+1));return l+(u-l)*(i-o)}}function n5(e,t,n=C_){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),l=+n(e[o],o,e),u=+n(e[o+1],o+1,e);return l+(u-l)*(i-o)}}function r5(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Nr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Va(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const sv=Symbol("implicit");function d0(){var e=new EP,t=[],n=[],r=sv;function i(o){let l=e.get(o);if(l===void 0){if(r!==sv)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new EP;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return d0(t,n).unknown(r)},Nr.apply(i,arguments),i}function h0(){var e=d0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,l,u=!1,d=0,h=0,p=.5;delete e.unknown;function m(){var y=t().length,x=i<r,S=x?i:r,A=x?r:i;o=(A-S)/Math.max(1,y-d+h*2),u&&(o=Math.floor(o)),S+=(A-S-o*(y-d))*p,l=o*(1-d),u&&(S=Math.round(S),l=Math.round(l));var P=r5(y).map(function(E){return S+o*E});return n(x?P.reverse():P)}return e.domain=function(y){return arguments.length?(t(y),m()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(y){return arguments.length?(u=!!y,m()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},e.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},e.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},e.copy=function(){return h0(t(),[r,i]).round(u).paddingInner(d).paddingOuter(h).align(p)},Nr.apply(m(),arguments)}function w_(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return w_(t())},e}function a5(){return w_(h0.apply(null,arguments).paddingInner(1))}function p0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function O_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nu(){}var Hc=.7,Ad=1/Hc,Bo="\\s*([+-]?\\d+)\\s*",qc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i5=/^#([0-9a-f]{3,8})$/,s5=new RegExp(`^rgb\\(${Bo},${Bo},${Bo}\\)$`),o5=new RegExp(`^rgb\\(${sa},${sa},${sa}\\)$`),l5=new RegExp(`^rgba\\(${Bo},${Bo},${Bo},${qc}\\)$`),c5=new RegExp(`^rgba\\(${sa},${sa},${sa},${qc}\\)$`),u5=new RegExp(`^hsl\\(${qc},${sa},${sa}\\)$`),f5=new RegExp(`^hsla\\(${qc},${sa},${sa},${qc}\\)$`),TP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p0(nu,Yc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:DP,formatHex:DP,formatHex8:d5,formatHsl:h5,formatRgb:jP,toString:jP});function DP(){return this.rgb().formatHex()}function d5(){return this.rgb().formatHex8()}function h5(){return __(this).formatHsl()}function jP(){return this.rgb().formatRgb()}function Yc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=i5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?NP(t):n===3?new Yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=s5.exec(e))?new Yn(t[1],t[2],t[3],1):(t=o5.exec(e))?new Yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=l5.exec(e))?Bf(t[1],t[2],t[3],t[4]):(t=c5.exec(e))?Bf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=u5.exec(e))?RP(t[1],t[2]/100,t[3]/100,1):(t=f5.exec(e))?RP(t[1],t[2]/100,t[3]/100,t[4]):TP.hasOwnProperty(e)?NP(TP[e]):e==="transparent"?new Yn(NaN,NaN,NaN,0):null}function NP(e){return new Yn(e>>16&255,e>>8&255,e&255,1)}function Bf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Yn(e,t,n,r)}function p5(e){return e instanceof nu||(e=Yc(e)),e?(e=e.rgb(),new Yn(e.r,e.g,e.b,e.opacity)):new Yn}function ov(e,t,n,r){return arguments.length===1?p5(e):new Yn(e,t,n,r??1)}function Yn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}p0(Yn,ov,O_(nu,{brighter(e){return e=e==null?Ad:Math.pow(Ad,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hc:Math.pow(Hc,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yn(Ts(this.r),Ts(this.g),Ts(this.b),Cd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MP,formatHex:MP,formatHex8:m5,formatRgb:kP,toString:kP}));function MP(){return`#${Ps(this.r)}${Ps(this.g)}${Ps(this.b)}`}function m5(){return`#${Ps(this.r)}${Ps(this.g)}${Ps(this.b)}${Ps((isNaN(this.opacity)?1:this.opacity)*255)}`}function kP(){const e=Cd(this.opacity);return`${e===1?"rgb(":"rgba("}${Ts(this.r)}, ${Ts(this.g)}, ${Ts(this.b)}${e===1?")":`, ${e})`}`}function Cd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ts(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ps(e){return e=Ts(e),(e<16?"0":"")+e.toString(16)}function RP(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hr(e,t,n,r)}function __(e){if(e instanceof Hr)return new Hr(e.h,e.s,e.l,e.opacity);if(e instanceof nu||(e=Yc(e)),!e)return new Hr;if(e instanceof Hr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,u=o-i,d=(o+i)/2;return u?(t===o?l=(n-r)/u+(n<r)*6:n===o?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?o+i:2-o-i,l*=60):u=d>0&&d<1?0:l,new Hr(l,u,d,e.opacity)}function g5(e,t,n,r){return arguments.length===1?__(e):new Hr(e,t,n,r??1)}function Hr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}p0(Hr,g5,O_(nu,{brighter(e){return e=e==null?Ad:Math.pow(Ad,e),new Hr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hc:Math.pow(Hc,e),new Hr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Yn(Kg(e>=240?e-240:e+120,i,r),Kg(e,i,r),Kg(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hr(IP(this.h),Uf(this.s),Uf(this.l),Cd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cd(this.opacity);return`${e===1?"hsl(":"hsla("}${IP(this.h)}, ${Uf(this.s)*100}%, ${Uf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function IP(e){return e=(e||0)%360,e<0?e+360:e}function Uf(e){return Math.max(0,Math.min(1,e||0))}function Kg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const m0=e=>()=>e;function y5(e,t){return function(n){return e+n*t}}function v5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function b5(e){return(e=+e)==1?T_:function(t,n){return n-t?v5(t,n,e):m0(isNaN(t)?n:t)}}function T_(e,t){var n=t-e;return n?y5(e,n):m0(isNaN(e)?t:e)}const LP=(function e(t){var n=b5(t);function r(i,o){var l=n((i=ov(i)).r,(o=ov(o)).r),u=n(i.g,o.g),d=n(i.b,o.b),h=T_(i.opacity,o.opacity);return function(p){return i.r=l(p),i.g=u(p),i.b=d(p),i.opacity=h(p),i+""}}return r.gamma=e,r})(1);function x5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function S5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function A5(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=el(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(u){for(l=0;l<r;++l)o[l]=i[l](u);return o}}function C5(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Pd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function P5(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=el(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var lv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vg=new RegExp(lv.source,"g");function E5(e){return function(){return e}}function w5(e){return function(t){return e(t)+""}}function O5(e,t){var n=lv.lastIndex=Vg.lastIndex=0,r,i,o,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=lv.exec(e))&&(i=Vg.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),u[l]?u[l]+=o:u[++l]=o),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,d.push({i:l,x:Pd(r,i)})),n=Vg.lastIndex;return n<t.length&&(o=t.slice(n),u[l]?u[l]+=o:u[++l]=o),u.length<2?d[0]?w5(d[0].x):E5(t):(t=d.length,function(h){for(var p=0,m;p<t;++p)u[(m=d[p]).i]=m.x(h);return u.join("")})}function el(e,t){var n=typeof t,r;return t==null||n==="boolean"?m0(t):(n==="number"?Pd:n==="string"?(r=Yc(t))?(t=r,LP):O5:t instanceof Yc?LP:t instanceof Date?C5:S5(t)?x5:Array.isArray(t)?A5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?P5:Pd)(e,t)}function g0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function _5(e,t){t===void 0&&(t=e,e=el);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return o[u](l-u)}}function T5(e){return function(){return e}}function Ed(e){return+e}var $P=[0,1];function Mn(e){return e}function cv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:T5(isNaN(t)?NaN:.5)}function D5(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function j5(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=cv(i,r),o=n(l,o)):(r=cv(r,i),o=n(o,l)),function(u){return o(r(u))}}function N5(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=cv(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(u){var d=tu(e,u,1,r)-1;return o[d](i[d](u))}}function ru(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function oh(){var e=$P,t=$P,n=el,r,i,o,l=Mn,u,d,h;function p(){var y=Math.min(e.length,t.length);return l!==Mn&&(l=D5(e[0],e[y-1])),u=y>2?N5:j5,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?o:(d||(d=u(e.map(r),t,n)))(r(l(y)))}return m.invert=function(y){return l(i((h||(h=u(t,e.map(r),Pd)))(y)))},m.domain=function(y){return arguments.length?(e=Array.from(y,Ed),p()):e.slice()},m.range=function(y){return arguments.length?(t=Array.from(y),p()):t.slice()},m.rangeRound=function(y){return t=Array.from(y),n=g0,p()},m.clamp=function(y){return arguments.length?(l=y?!0:Mn,p()):l!==Mn},m.interpolate=function(y){return arguments.length?(n=y,p()):n},m.unknown=function(y){return arguments.length?(o=y,m):o},function(y,x){return r=y,i=x,p()}}function y0(){return oh()(Mn,Mn)}function M5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function qo(e){return e=wd(Math.abs(e)),e?e[1]:NaN}function k5(e,t){return function(n,r){for(var i=n.length,o=[],l=0,u=e[0],d=0;i>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),o.push(n.substring(i-=u,i+u)),!((d+=u+1)>r));)u=e[l=(l+1)%e.length];return o.reverse().join(t)}}function R5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var I5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fc(e){if(!(t=I5.exec(e)))throw new Error("invalid format: "+e);var t;return new v0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fc.prototype=v0.prototype;function v0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}v0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function L5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var D_;function $5(e,t){var n=wd(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(D_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+wd(e,Math.max(0,t+o-1))[0]}function BP(e,t){var n=wd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const UP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:M5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>BP(e*100,t),r:BP,s:$5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function zP(e){return e}var GP=Array.prototype.map,HP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function B5(e){var t=e.grouping===void 0||e.thousands===void 0?zP:k5(GP.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?zP:R5(GP.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(m){m=Fc(m);var y=m.fill,x=m.align,S=m.sign,A=m.symbol,P=m.zero,E=m.width,O=m.comma,_=m.precision,N=m.trim,j=m.type;j==="n"?(O=!0,j="g"):UP[j]||(_===void 0&&(_=12),N=!0,j="g"),(P||y==="0"&&x==="=")&&(P=!0,y="0",x="=");var D=A==="$"?n:A==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",R=A==="$"?r:/[%p]/.test(j)?l:"",k=UP[j],U=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function Z(q){var J=D,ce=R,se,te,$;if(j==="c")ce=k(q)+ce,q="";else{q=+q;var ee=q<0||1/q<0;if(q=isNaN(q)?d:k(Math.abs(q),_),N&&(q=L5(q)),ee&&+q==0&&S!=="+"&&(ee=!1),J=(ee?S==="("?S:u:S==="-"||S==="("?"":S)+J,ce=(j==="s"?HP[8+D_/3]:"")+ce+(ee&&S==="("?")":""),U){for(se=-1,te=q.length;++se<te;)if($=q.charCodeAt(se),48>$||$>57){ce=($===46?i+q.slice(se+1):q.slice(se))+ce,q=q.slice(0,se);break}}}O&&!P&&(q=t(q,1/0));var pe=J.length+q.length+ce.length,he=pe<E?new Array(E-pe+1).join(y):"";switch(O&&P&&(q=t(he+q,he.length?E-ce.length:1/0),he=""),x){case"<":q=J+q+ce+he;break;case"=":q=J+he+q+ce;break;case"^":q=he.slice(0,pe=he.length>>1)+J+q+ce+he.slice(pe);break;default:q=he+J+q+ce;break}return o(q)}return Z.toString=function(){return m+""},Z}function p(m,y){var x=h((m=Fc(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(qo(y)/3)))*3,A=Math.pow(10,-S),P=HP[8+S/3];return function(E){return x(A*E)+P}}return{format:h,formatPrefix:p}}var zf,b0,j_;U5({thousands:",",grouping:[3],currency:["$",""]});function U5(e){return zf=B5(e),b0=zf.format,j_=zf.formatPrefix,zf}function z5(e){return Math.max(0,-qo(Math.abs(e)))}function G5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qo(t)/3)))*3-qo(Math.abs(e)))}function H5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qo(t)-qo(e))+1}function N_(e,t,n,r){var i=iv(e,t,n),o;switch(r=Fc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=G5(i,l))&&(r.precision=o),j_(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=H5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=z5(i))&&(r.precision=o-(r.type==="%")*2);break}}return b0(r)}function Gi(e){var t=e.domain;return e.ticks=function(n){var r=t();return rv(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return N_(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],u=r[o],d,h,p=10;for(u<l&&(h=l,l=u,u=h,h=i,i=o,o=h);p-- >0;){if(h=av(l,u,n),h===d)return r[i]=l,r[o]=u,t(r);if(h>0)l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h;else if(h<0)l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h;else break;d=h}return e},e}function M_(){var e=y0();return e.copy=function(){return ru(e,M_())},Nr.apply(e,arguments),Gi(e)}function k_(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Ed),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return k_(e).unknown(t)},e=arguments.length?Array.from(e,Ed):[0,1],Gi(n)}function R_(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}function qP(e){return Math.log(e)}function YP(e){return Math.exp(e)}function q5(e){return-Math.log(-e)}function Y5(e){return-Math.exp(-e)}function F5(e){return isFinite(e)?+("1e"+e):e<0?0:e}function K5(e){return e===10?F5:e===Math.E?Math.exp:t=>Math.pow(e,t)}function V5(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function FP(e){return(t,n)=>-e(-t,n)}function x0(e){const t=e(qP,YP),n=t.domain;let r=10,i,o;function l(){return i=V5(r),o=K5(r),n()[0]<0?(i=FP(i),o=FP(o),e(q5,Y5)):e(qP,YP),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const d=n();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=i(h),x=i(p),S,A;const P=u==null?10:+u;let E=[];if(!(r%1)&&x-y<P){if(y=Math.floor(y),x=Math.ceil(x),h>0){for(;y<=x;++y)for(S=1;S<r;++S)if(A=y<0?S/o(-y):S*o(y),!(A<h)){if(A>p)break;E.push(A)}}else for(;y<=x;++y)for(S=r-1;S>=1;--S)if(A=y>0?S/o(-y):S*o(y),!(A<h)){if(A>p)break;E.push(A)}E.length*2<P&&(E=rv(h,p,P))}else E=rv(y,x,Math.min(x-y,P)).map(o);return m?E.reverse():E},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=Fc(d)).precision==null&&(d.trim=!0),d=b0(d)),u===1/0)return d;const h=Math.max(1,r*u/t.ticks().length);return p=>{let m=p/o(Math.round(i(p)));return m*r<r-.5&&(m*=r),m<=h?d(p):""}},t.nice=()=>n(R_(n(),{floor:u=>o(Math.floor(i(u))),ceil:u=>o(Math.ceil(i(u)))})),t}function I_(){const e=x0(oh()).domain([1,10]);return e.copy=()=>ru(e,I_()).base(e.base()),Nr.apply(e,arguments),e}function KP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function VP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function S0(e){var t=1,n=e(KP(t),VP(t));return n.constant=function(r){return arguments.length?e(KP(t=+r),VP(t)):t},Gi(n)}function L_(){var e=S0(oh());return e.copy=function(){return ru(e,L_()).constant(e.constant())},Nr.apply(e,arguments)}function XP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function X5(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function W5(e){return e<0?-e*e:e*e}function A0(e){var t=e(Mn,Mn),n=1;function r(){return n===1?e(Mn,Mn):n===.5?e(X5,W5):e(XP(n),XP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Gi(t)}function C0(){var e=A0(oh());return e.copy=function(){return ru(e,C0()).exponent(e.exponent())},Nr.apply(e,arguments),e}function Q5(){return C0.apply(null,arguments).exponent(.5)}function WP(e){return Math.sign(e)*e*e}function Z5(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function $_(){var e=y0(),t=[0,1],n=!1,r;function i(o){var l=Z5(e(o));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(o){return e.invert(WP(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,Ed)).map(WP)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return $_(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Nr.apply(i,arguments),Gi(i)}function B_(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=n5(e,l/u);return o}function o(l){return l==null||isNaN(l=+l)?r:t[tu(n,l)]}return o.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Li),i()},o.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return B_().domain(e).range(t).unknown(r)},Nr.apply(o,arguments)}function U_(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function l(d){return d!=null&&d<=d?i[tu(r,d,0,n)]:o}function u(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,u()):i.slice()},l.invertExtent=function(d){var h=i.indexOf(d);return h<0?[NaN,NaN]:h<1?[e,r[0]]:h>=n?[r[n-1],t]:[r[h-1],r[h]]},l.unknown=function(d){return arguments.length&&(o=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return U_().domain([e,t]).range(i).unknown(o)},Nr.apply(Gi(l),arguments)}function z_(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[tu(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return z_().domain(e).range(t).unknown(n)},Nr.apply(i,arguments)}const Xg=new Date,Wg=new Date;function Vt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),u=i.ceil(o);return o-l<u-o?l:u},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,u)=>{const d=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<l)||!(u>0))return d;let h;do d.push(h=new Date(+o)),t(o,u),e(o);while(h<o&&o<l);return d},i.filter=o=>Vt(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!o(l););else for(;--u>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>(Xg.setTime(+o),Wg.setTime(+l),e(Xg),e(Wg),Math.floor(n(Xg,Wg))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const Od=Vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Od.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Od);Od.range;const La=1e3,wr=La*60,$a=wr*60,Ga=$a*24,P0=Ga*7,QP=Ga*30,Qg=Ga*365,Es=Vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*La)},(e,t)=>(t-e)/La,e=>e.getUTCSeconds());Es.range;const E0=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*La)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getMinutes());E0.range;const w0=Vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getUTCMinutes());w0.range;const O0=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*La-e.getMinutes()*wr)},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getHours());O0.range;const _0=Vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getUTCHours());_0.range;const au=Vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wr)/Ga,e=>e.getDate()-1);au.range;const lh=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ga,e=>e.getUTCDate()-1);lh.range;const G_=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ga,e=>Math.floor(e/Ga));G_.range;function zs(e){return Vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wr)/P0)}const ch=zs(0),_d=zs(1),J5=zs(2),eB=zs(3),Yo=zs(4),tB=zs(5),nB=zs(6);ch.range;_d.range;J5.range;eB.range;Yo.range;tB.range;nB.range;function Gs(e){return Vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/P0)}const uh=Gs(0),Td=Gs(1),rB=Gs(2),aB=Gs(3),Fo=Gs(4),iB=Gs(5),sB=Gs(6);uh.range;Td.range;rB.range;aB.range;Fo.range;iB.range;sB.range;const T0=Vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());T0.range;const D0=Vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());D0.range;const Ha=Vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ha.range;const qa=Vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});qa.range;function H_(e,t,n,r,i,o){const l=[[Es,1,La],[Es,5,5*La],[Es,15,15*La],[Es,30,30*La],[o,1,wr],[o,5,5*wr],[o,15,15*wr],[o,30,30*wr],[i,1,$a],[i,3,3*$a],[i,6,6*$a],[i,12,12*$a],[r,1,Ga],[r,2,2*Ga],[n,1,P0],[t,1,QP],[t,3,3*QP],[e,1,Qg]];function u(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const x=m&&typeof m.range=="function"?m:d(h,p,m),S=x?x.range(h,+p+1):[];return y?S.reverse():S}function d(h,p,m){const y=Math.abs(p-h)/m,x=f0(([,,P])=>P).right(l,y);if(x===l.length)return e.every(iv(h/Qg,p/Qg,m));if(x===0)return Od.every(Math.max(iv(h,p,m),1));const[S,A]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return S.every(A)}return[u,d]}const[oB,lB]=H_(qa,D0,uh,G_,_0,w0),[cB,uB]=H_(Ha,T0,ch,au,O0,E0);function Zg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ac(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function fB(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,h=Cc(i),p=Pc(i),m=Cc(o),y=Pc(o),x=Cc(l),S=Pc(l),A=Cc(u),P=Pc(u),E=Cc(d),O=Pc(d),_={a:ee,A:pe,b:he,B:I,c:null,d:rE,e:rE,f:kB,g:qB,G:FB,H:jB,I:NB,j:MB,L:q_,m:RB,M:IB,p:K,q:Y,Q:sE,s:oE,S:LB,u:$B,U:BB,V:UB,w:zB,W:GB,x:null,X:null,y:HB,Y:YB,Z:KB,"%":iE},N={a:le,A:ye,b:z,B:re,c:null,d:aE,e:aE,f:QB,g:o8,G:c8,H:VB,I:XB,j:WB,L:F_,m:ZB,M:JB,p:be,q:me,Q:sE,s:oE,S:e8,u:t8,U:n8,V:r8,w:a8,W:i8,x:null,X:null,y:s8,Y:l8,Z:u8,"%":iE},j={a:Z,A:q,b:J,B:ce,c:se,d:tE,e:tE,f:OB,g:eE,G:JP,H:nE,I:nE,j:CB,L:wB,m:AB,M:PB,p:U,q:SB,Q:TB,s:DB,S:EB,u:gB,U:yB,V:vB,w:mB,W:bB,x:te,X:$,y:eE,Y:JP,Z:xB,"%":_B};_.x=D(n,_),_.X=D(r,_),_.c=D(t,_),N.x=D(n,N),N.X=D(r,N),N.c=D(t,N);function D(ie,ue){return function(ve){var fe=[],rt=-1,ze=0,Me=ie.length,Le,bt,Mr;for(ve instanceof Date||(ve=new Date(+ve));++rt<Me;)ie.charCodeAt(rt)===37&&(fe.push(ie.slice(ze,rt)),(bt=ZP[Le=ie.charAt(++rt)])!=null?Le=ie.charAt(++rt):bt=Le==="e"?" ":"0",(Mr=ue[Le])&&(Le=Mr(ve,bt)),fe.push(Le),ze=rt+1);return fe.push(ie.slice(ze,rt)),fe.join("")}}function R(ie,ue){return function(ve){var fe=Ac(1900,void 0,1),rt=k(fe,ie,ve+="",0),ze,Me;if(rt!=ve.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(ue&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(ze=Jg(Ac(fe.y,0,1)),Me=ze.getUTCDay(),ze=Me>4||Me===0?Td.ceil(ze):Td(ze),ze=lh.offset(ze,(fe.V-1)*7),fe.y=ze.getUTCFullYear(),fe.m=ze.getUTCMonth(),fe.d=ze.getUTCDate()+(fe.w+6)%7):(ze=Zg(Ac(fe.y,0,1)),Me=ze.getDay(),ze=Me>4||Me===0?_d.ceil(ze):_d(ze),ze=au.offset(ze,(fe.V-1)*7),fe.y=ze.getFullYear(),fe.m=ze.getMonth(),fe.d=ze.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Me="Z"in fe?Jg(Ac(fe.y,0,1)).getUTCDay():Zg(Ac(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Me+5)%7:fe.w+fe.U*7-(Me+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,Jg(fe)):Zg(fe)}}function k(ie,ue,ve,fe){for(var rt=0,ze=ue.length,Me=ve.length,Le,bt;rt<ze;){if(fe>=Me)return-1;if(Le=ue.charCodeAt(rt++),Le===37){if(Le=ue.charAt(rt++),bt=j[Le in ZP?ue.charAt(rt++):Le],!bt||(fe=bt(ie,ve,fe))<0)return-1}else if(Le!=ve.charCodeAt(fe++))return-1}return fe}function U(ie,ue,ve){var fe=h.exec(ue.slice(ve));return fe?(ie.p=p.get(fe[0].toLowerCase()),ve+fe[0].length):-1}function Z(ie,ue,ve){var fe=x.exec(ue.slice(ve));return fe?(ie.w=S.get(fe[0].toLowerCase()),ve+fe[0].length):-1}function q(ie,ue,ve){var fe=m.exec(ue.slice(ve));return fe?(ie.w=y.get(fe[0].toLowerCase()),ve+fe[0].length):-1}function J(ie,ue,ve){var fe=E.exec(ue.slice(ve));return fe?(ie.m=O.get(fe[0].toLowerCase()),ve+fe[0].length):-1}function ce(ie,ue,ve){var fe=A.exec(ue.slice(ve));return fe?(ie.m=P.get(fe[0].toLowerCase()),ve+fe[0].length):-1}function se(ie,ue,ve){return k(ie,t,ue,ve)}function te(ie,ue,ve){return k(ie,n,ue,ve)}function $(ie,ue,ve){return k(ie,r,ue,ve)}function ee(ie){return l[ie.getDay()]}function pe(ie){return o[ie.getDay()]}function he(ie){return d[ie.getMonth()]}function I(ie){return u[ie.getMonth()]}function K(ie){return i[+(ie.getHours()>=12)]}function Y(ie){return 1+~~(ie.getMonth()/3)}function le(ie){return l[ie.getUTCDay()]}function ye(ie){return o[ie.getUTCDay()]}function z(ie){return d[ie.getUTCMonth()]}function re(ie){return u[ie.getUTCMonth()]}function be(ie){return i[+(ie.getUTCHours()>=12)]}function me(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ue=D(ie+="",_);return ue.toString=function(){return ie},ue},parse:function(ie){var ue=R(ie+="",!1);return ue.toString=function(){return ie},ue},utcFormat:function(ie){var ue=D(ie+="",N);return ue.toString=function(){return ie},ue},utcParse:function(ie){var ue=R(ie+="",!0);return ue.toString=function(){return ie},ue}}}var ZP={"-":"",_:" ",0:"0"},rn=/^\s*\d+/,dB=/^%/,hB=/[\\^$*+?|[\]().{}]/g;function Xe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function pB(e){return e.replace(hB,"\\$&")}function Cc(e){return new RegExp("^(?:"+e.map(pB).join("|")+")","i")}function Pc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function mB(e,t,n){var r=rn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function gB(e,t,n){var r=rn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function yB(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function vB(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function bB(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function JP(e,t,n){var r=rn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function eE(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function xB(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function SB(e,t,n){var r=rn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function AB(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function tE(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function CB(e,t,n){var r=rn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function nE(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function PB(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function EB(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function wB(e,t,n){var r=rn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function OB(e,t,n){var r=rn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _B(e,t,n){var r=dB.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function TB(e,t,n){var r=rn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function DB(e,t,n){var r=rn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function rE(e,t){return Xe(e.getDate(),t,2)}function jB(e,t){return Xe(e.getHours(),t,2)}function NB(e,t){return Xe(e.getHours()%12||12,t,2)}function MB(e,t){return Xe(1+au.count(Ha(e),e),t,3)}function q_(e,t){return Xe(e.getMilliseconds(),t,3)}function kB(e,t){return q_(e,t)+"000"}function RB(e,t){return Xe(e.getMonth()+1,t,2)}function IB(e,t){return Xe(e.getMinutes(),t,2)}function LB(e,t){return Xe(e.getSeconds(),t,2)}function $B(e){var t=e.getDay();return t===0?7:t}function BB(e,t){return Xe(ch.count(Ha(e)-1,e),t,2)}function Y_(e){var t=e.getDay();return t>=4||t===0?Yo(e):Yo.ceil(e)}function UB(e,t){return e=Y_(e),Xe(Yo.count(Ha(e),e)+(Ha(e).getDay()===4),t,2)}function zB(e){return e.getDay()}function GB(e,t){return Xe(_d.count(Ha(e)-1,e),t,2)}function HB(e,t){return Xe(e.getFullYear()%100,t,2)}function qB(e,t){return e=Y_(e),Xe(e.getFullYear()%100,t,2)}function YB(e,t){return Xe(e.getFullYear()%1e4,t,4)}function FB(e,t){var n=e.getDay();return e=n>=4||n===0?Yo(e):Yo.ceil(e),Xe(e.getFullYear()%1e4,t,4)}function KB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Xe(t/60|0,"0",2)+Xe(t%60,"0",2)}function aE(e,t){return Xe(e.getUTCDate(),t,2)}function VB(e,t){return Xe(e.getUTCHours(),t,2)}function XB(e,t){return Xe(e.getUTCHours()%12||12,t,2)}function WB(e,t){return Xe(1+lh.count(qa(e),e),t,3)}function F_(e,t){return Xe(e.getUTCMilliseconds(),t,3)}function QB(e,t){return F_(e,t)+"000"}function ZB(e,t){return Xe(e.getUTCMonth()+1,t,2)}function JB(e,t){return Xe(e.getUTCMinutes(),t,2)}function e8(e,t){return Xe(e.getUTCSeconds(),t,2)}function t8(e){var t=e.getUTCDay();return t===0?7:t}function n8(e,t){return Xe(uh.count(qa(e)-1,e),t,2)}function K_(e){var t=e.getUTCDay();return t>=4||t===0?Fo(e):Fo.ceil(e)}function r8(e,t){return e=K_(e),Xe(Fo.count(qa(e),e)+(qa(e).getUTCDay()===4),t,2)}function a8(e){return e.getUTCDay()}function i8(e,t){return Xe(Td.count(qa(e)-1,e),t,2)}function s8(e,t){return Xe(e.getUTCFullYear()%100,t,2)}function o8(e,t){return e=K_(e),Xe(e.getUTCFullYear()%100,t,2)}function l8(e,t){return Xe(e.getUTCFullYear()%1e4,t,4)}function c8(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Fo(e):Fo.ceil(e),Xe(e.getUTCFullYear()%1e4,t,4)}function u8(){return"+0000"}function iE(){return"%"}function sE(e){return+e}function oE(e){return Math.floor(+e/1e3)}var No,V_,X_;f8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function f8(e){return No=fB(e),V_=No.format,No.parse,X_=No.utcFormat,No.utcParse,No}function d8(e){return new Date(e)}function h8(e){return e instanceof Date?+e:+new Date(+e)}function j0(e,t,n,r,i,o,l,u,d,h){var p=y0(),m=p.invert,y=p.domain,x=h(".%L"),S=h(":%S"),A=h("%I:%M"),P=h("%I %p"),E=h("%a %d"),O=h("%b %d"),_=h("%B"),N=h("%Y");function j(D){return(d(D)<D?x:u(D)<D?S:l(D)<D?A:o(D)<D?P:r(D)<D?i(D)<D?E:O:n(D)<D?_:N)(D)}return p.invert=function(D){return new Date(m(D))},p.domain=function(D){return arguments.length?y(Array.from(D,h8)):y().map(d8)},p.ticks=function(D){var R=y();return e(R[0],R[R.length-1],D??10)},p.tickFormat=function(D,R){return R==null?j:h(R)},p.nice=function(D){var R=y();return(!D||typeof D.range!="function")&&(D=t(R[0],R[R.length-1],D??10)),D?y(R_(R,D)):p},p.copy=function(){return ru(p,j0(e,t,n,r,i,o,l,u,d,h))},p}function p8(){return Nr.apply(j0(cB,uB,Ha,T0,ch,au,O0,E0,Es,V_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function m8(){return Nr.apply(j0(oB,lB,qa,D0,uh,lh,_0,w0,Es,X_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fh(){var e=0,t=1,n,r,i,o,l=Mn,u=!1,d;function h(m){return m==null||isNaN(m=+m)?d:l(i===0?.5:(m=(o(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),h):[e,t]},h.clamp=function(m){return arguments.length?(u=!!m,h):u},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(y){var x,S;return arguments.length?([x,S]=y,l=m(x,S),h):[l(0),l(1)]}}return h.range=p(el),h.rangeRound=p(g0),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return o=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),h}}function Hi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function W_(){var e=Gi(fh()(Mn));return e.copy=function(){return Hi(e,W_())},Va.apply(e,arguments)}function Q_(){var e=x0(fh()).domain([1,10]);return e.copy=function(){return Hi(e,Q_()).base(e.base())},Va.apply(e,arguments)}function Z_(){var e=S0(fh());return e.copy=function(){return Hi(e,Z_()).constant(e.constant())},Va.apply(e,arguments)}function N0(){var e=A0(fh());return e.copy=function(){return Hi(e,N0()).exponent(e.exponent())},Va.apply(e,arguments)}function g8(){return N0.apply(null,arguments).exponent(.5)}function J_(){var e=[],t=Mn;function n(r){if(r!=null&&!isNaN(r=+r))return t((tu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Li),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>t5(e,o/r))},n.copy=function(){return J_(t).domain(e)},Va.apply(n,arguments)}function dh(){var e=0,t=.5,n=1,r=1,i,o,l,u,d,h=Mn,p,m=!1,y;function x(A){return isNaN(A=+A)?y:(A=.5+((A=+p(A))-o)*(r*A<r*o?u:d),h(m?Math.max(0,Math.min(1,A)):A))}x.domain=function(A){return arguments.length?([e,t,n]=A,i=p(e=+e),o=p(t=+t),l=p(n=+n),u=i===o?0:.5/(o-i),d=o===l?0:.5/(l-o),r=o<i?-1:1,x):[e,t,n]},x.clamp=function(A){return arguments.length?(m=!!A,x):m},x.interpolator=function(A){return arguments.length?(h=A,x):h};function S(A){return function(P){var E,O,_;return arguments.length?([E,O,_]=P,h=_5(A,[E,O,_]),x):[h(0),h(.5),h(1)]}}return x.range=S(el),x.rangeRound=S(g0),x.unknown=function(A){return arguments.length?(y=A,x):y},function(A){return p=A,i=A(e),o=A(t),l=A(n),u=i===o?0:.5/(o-i),d=o===l?0:.5/(l-o),r=o<i?-1:1,x}}function eT(){var e=Gi(dh()(Mn));return e.copy=function(){return Hi(e,eT())},Va.apply(e,arguments)}function tT(){var e=x0(dh()).domain([.1,1,10]);return e.copy=function(){return Hi(e,tT()).base(e.base())},Va.apply(e,arguments)}function nT(){var e=S0(dh());return e.copy=function(){return Hi(e,nT()).constant(e.constant())},Va.apply(e,arguments)}function M0(){var e=A0(dh());return e.copy=function(){return Hi(e,M0()).exponent(e.exponent())},Va.apply(e,arguments)}function y8(){return M0.apply(null,arguments).exponent(.5)}const _c=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:h0,scaleDiverging:eT,scaleDivergingLog:tT,scaleDivergingPow:M0,scaleDivergingSqrt:y8,scaleDivergingSymlog:nT,scaleIdentity:k_,scaleImplicit:sv,scaleLinear:M_,scaleLog:I_,scaleOrdinal:d0,scalePoint:a5,scalePow:C0,scaleQuantile:B_,scaleQuantize:U_,scaleRadial:$_,scaleSequential:W_,scaleSequentialLog:Q_,scaleSequentialPow:N0,scaleSequentialQuantile:J_,scaleSequentialSqrt:g8,scaleSequentialSymlog:Z_,scaleSqrt:Q5,scaleSymlog:L_,scaleThreshold:z_,scaleTime:p8,scaleUtc:m8,tickFormat:N_},Symbol.toStringTag,{value:"Module"}));var qi=e=>e.chartData,k0=Q([qi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),R0=(e,t,n,r)=>r?k0(e):qi(e);function Ko(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(cr(t)&&cr(n))return!0}return!1}function lE(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function v8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,o;if(cr(n))i=n;else if(typeof n=="function")return;if(cr(r))o=r;else if(typeof r=="function")return;var l=[i,o];if(Ko(l))return l}}function b8(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Ko(r))return lE(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,o]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Te(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&ZC.test(i)){var d=ZC.exec(i);if(d==null||t==null)l=void 0;else{var h=+d[1];l=t[0]-h}}else l=t?.[0];if(o==="auto")t!=null&&(u=Math.max(...t));else if(Te(o))u=o;else if(typeof o=="function")try{t!=null&&(u=o(t?.[1]))}catch{}else if(typeof o=="string"&&JC.test(o)){var p=JC.exec(o);if(p==null||t==null)u=void 0;else{var m=+p[1];u=t[1]+m}}else u=t?.[1];var y=[l,u];if(Ko(y))return t==null?y:lE(y,t,n)}}}var tl=1e9,x8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},L0,gt=!0,Tr="[DecimalError] ",Ds=Tr+"Invalid argument: ",I0=Tr+"Exponent out of range: ",nl=Math.floor,As=Math.pow,S8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ir,en=1e7,dt=7,rT=9007199254740991,Dd=nl(rT/dt),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*dt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ae.dividedBy=Ae.div=function(e){return Ua(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,n=t.constructor;return ct(Ua(t,new n(e),0,1),n.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return zt(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ir))throw Error(Tr+"NaN");if(n.s<1)throw Error(Tr+(n.s?"NaN":"-Infinity"));return n.eq(ir)?new r(0):(gt=!1,t=Ua(Kc(n,o),Kc(e,o),o),gt=!0,ct(t,i))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sT(t,e):aT(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Tr+"NaN");return n.s?(gt=!1,t=Ua(n,e,0,1).times(e),gt=!0,n.minus(t)):ct(new r(n),i)};Ae.naturalExponential=Ae.exp=function(){return iT(this)};Ae.naturalLogarithm=Ae.ln=function(){return Kc(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aT(t,e):sT(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ds+e);if(t=zt(i)+1,r=i.d.length-1,n=r*dt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ae.squareRoot=Ae.sqrt=function(){var e,t,n,r,i,o,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Tr+"NaN")}for(e=zt(u),gt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=aa(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=nl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new d(t)):r=new d(i.toString()),n=d.precision,i=l=n+3;;)if(o=r,r=o.plus(Ua(u,o,l+2)).times(.5),aa(o.d).slice(0,l)===(t=aa(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(ct(o,n+1,0),o.times(o).eq(u)){r=o;break}}else if(t!="9999")break;l+=4}return gt=!0,ct(r,n)};Ae.times=Ae.mul=function(e){var t,n,r,i,o,l,u,d,h,p=this,m=p.constructor,y=p.d,x=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,n=p.e+e.e,d=y.length,h=x.length,d<h&&(o=y,y=x,x=o,l=d,d=h,h=l),o=[],l=d+h,r=l;r--;)o.push(0);for(r=h;--r>=0;){for(t=0,i=d+r;i>r;)u=o[i]+x[r]*y[i-r-1]+t,o[i--]=u%en|0,t=u/en|0;o[i]=(o[i]+t)%en|0}for(;!o[--l];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,gt?ct(e,m.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(la(e,0,tl),t===void 0?t=r.rounding:la(t,0,8),ct(n,e+zt(n)+1,t))};Ae.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=ks(r,!0):(la(e,0,tl),t===void 0?t=i.rounding:la(t,0,8),r=ct(new i(r),e+1,t),n=ks(r,!0,e+1)),n};Ae.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?ks(i):(la(e,0,tl),t===void 0?t=o.rounding:la(t,0,8),r=ct(new o(i),e+zt(i)+1,t),n=ks(r.abs(),!1,e+zt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return ct(new t(e),zt(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,n,r,i,o,l,u=this,d=u.constructor,h=12,p=+(e=new d(e));if(!e.s)return new d(ir);if(u=new d(u),!u.s){if(e.s<1)throw Error(Tr+"Infinity");return u}if(u.eq(ir))return u;if(r=d.precision,e.eq(ir))return ct(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,o=u.s,l){if((n=p<0?-p:p)<=rT){for(i=new d(ir),t=Math.ceil(r/dt+4),gt=!1;n%2&&(i=i.times(u),uE(i.d,t)),n=nl(n/2),n!==0;)u=u.times(u),uE(u.d,t);return gt=!0,e.s<0?new d(ir).div(i):ct(i,r)}}else if(o<0)throw Error(Tr+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,gt=!1,i=e.times(Kc(u,r+h)),gt=!0,i=iT(i),i.s=o,i};Ae.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?(n=zt(i),r=ks(i,n<=o.toExpNeg||n>=o.toExpPos)):(la(e,1,tl),t===void 0?t=o.rounding:la(t,0,8),i=ct(new o(i),e,t),n=zt(i),r=ks(i,e<=n||n<=o.toExpNeg,e)),r};Ae.toSignificantDigits=Ae.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(la(e,1,tl),t===void 0?t=r.rounding:la(t,0,8)),ct(new r(n),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=zt(e),n=e.constructor;return ks(e,t<=n.toExpNeg||t>=n.toExpPos)};function aT(e,t){var n,r,i,o,l,u,d,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),gt?ct(t,m):t;if(d=e.d,h=t.d,l=e.e,i=t.e,d=d.slice(),o=l-i,o){for(o<0?(r=d,o=-o,u=h.length):(r=h,i=l,u=d.length),l=Math.ceil(m/dt),u=l>u?l+1:u+1,o>u&&(o=u,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(u=d.length,o=h.length,u-o<0&&(o=u,r=h,h=d,d=r),n=0;o;)n=(d[--o]=d[o]+h[o]+n)/en|0,d[o]%=en;for(n&&(d.unshift(n),++i),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=i,gt?ct(t,m):t}function la(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ds+e)}function aa(e){var t,n,r,i=e.length-1,o="",l=e[0];if(i>0){for(o+=l,t=1;t<i;t++)r=e[t]+"",n=dt-r.length,n&&(o+=Ni(n)),o+=r;l=e[t],r=l+"",n=dt-r.length,n&&(o+=Ni(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var Ua=(function(){function e(r,i){var o,l=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+l,r[u]=o%en|0,l=o/en|0;return l&&r.unshift(l),r}function t(r,i,o,l){var u,d;if(o!=l)d=o>l?1:-1;else for(u=d=0;u<o;u++)if(r[u]!=i[u]){d=r[u]>i[u]?1:-1;break}return d}function n(r,i,o){for(var l=0;o--;)r[o]-=l,l=r[o]<i[o]?1:0,r[o]=l*en+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,l){var u,d,h,p,m,y,x,S,A,P,E,O,_,N,j,D,R,k,U=r.constructor,Z=r.s==i.s?1:-1,q=r.d,J=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Tr+"Division by zero");for(d=r.e-i.e,R=J.length,j=q.length,x=new U(Z),S=x.d=[],h=0;J[h]==(q[h]||0);)++h;if(J[h]>(q[h]||0)&&--d,o==null?O=o=U.precision:l?O=o+(zt(r)-zt(i))+1:O=o,O<0)return new U(0);if(O=O/dt+2|0,h=0,R==1)for(p=0,J=J[0],O++;(h<j||p)&&O--;h++)_=p*en+(q[h]||0),S[h]=_/J|0,p=_%J|0;else{for(p=en/(J[0]+1)|0,p>1&&(J=e(J,p),q=e(q,p),R=J.length,j=q.length),N=R,A=q.slice(0,R),P=A.length;P<R;)A[P++]=0;k=J.slice(),k.unshift(0),D=J[0],J[1]>=en/2&&++D;do p=0,u=t(J,A,R,P),u<0?(E=A[0],R!=P&&(E=E*en+(A[1]||0)),p=E/D|0,p>1?(p>=en&&(p=en-1),m=e(J,p),y=m.length,P=A.length,u=t(m,A,y,P),u==1&&(p--,n(m,R<y?k:J,y))):(p==0&&(u=p=1),m=J.slice()),y=m.length,y<P&&m.unshift(0),n(A,m,P),u==-1&&(P=A.length,u=t(J,A,R,P),u<1&&(p++,n(A,R<P?k:J,P))),P=A.length):u===0&&(p++,A=[0]),S[h++]=p,u&&A[0]?A[P++]=q[N]||0:(A=[q[N]],P=1);while((N++<j||A[0]!==void 0)&&O--)}return S[0]||S.shift(),x.e=d,ct(x,l?o+zt(x)+1:o)}})();function iT(e,t){var n,r,i,o,l,u,d=0,h=0,p=e.constructor,m=p.precision;if(zt(e)>16)throw Error(I0+zt(e));if(!e.s)return new p(ir);for(gt=!1,u=m,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(r=Math.log(As(2,h))/Math.LN10*2+5|0,u+=r,n=i=o=new p(ir),p.precision=u;;){if(i=ct(i.times(e),u),n=n.times(++d),l=o.plus(Ua(i,n,u)),aa(l.d).slice(0,u)===aa(o.d).slice(0,u)){for(;h--;)o=ct(o.times(o),u);return p.precision=m,t==null?(gt=!0,ct(o,m)):o}o=l}}function zt(e){for(var t=e.e*dt,n=e.d[0];n>=10;n/=10)t++;return t}function ey(e,t,n){if(t>e.LN10.sd())throw gt=!0,n&&(e.precision=n),Error(Tr+"LN10 precision limit exceeded");return ct(new e(e.LN10),t)}function Ni(e){for(var t="";e--;)t+="0";return t}function Kc(e,t){var n,r,i,o,l,u,d,h,p,m=1,y=10,x=e,S=x.d,A=x.constructor,P=A.precision;if(x.s<1)throw Error(Tr+(x.s?"NaN":"-Infinity"));if(x.eq(ir))return new A(0);if(t==null?(gt=!1,h=P):h=t,x.eq(10))return t==null&&(gt=!0),ey(A,h);if(h+=y,A.precision=h,n=aa(S),r=n.charAt(0),o=zt(x),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=aa(x.d),r=n.charAt(0),m++;o=zt(x),r>1?(x=new A("0."+n),o++):x=new A(r+"."+n.slice(1))}else return d=ey(A,h+2,P).times(o+""),x=Kc(new A(r+"."+n.slice(1)),h-y).plus(d),A.precision=P,t==null?(gt=!0,ct(x,P)):x;for(u=l=x=Ua(x.minus(ir),x.plus(ir),h),p=ct(x.times(x),h),i=3;;){if(l=ct(l.times(p),h),d=u.plus(Ua(l,new A(i),h)),aa(d.d).slice(0,h)===aa(u.d).slice(0,h))return u=u.times(2),o!==0&&(u=u.plus(ey(A,h+2,P).times(o+""))),u=Ua(u,new A(m),h),A.precision=P,t==null?(gt=!0,ct(u,P)):u;u=d,i+=2}}function cE(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=nl(n/dt),e.d=[],r=(n+1)%dt,n<0&&(r+=dt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=dt;r<i;)e.d.push(+t.slice(r,r+=dt));t=t.slice(r),r=dt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),gt&&(e.e>Dd||e.e<-Dd))throw Error(I0+n)}else e.s=0,e.e=0,e.d=[0];return e}function ct(e,t,n){var r,i,o,l,u,d,h,p,m=e.d;for(l=1,o=m[0];o>=10;o/=10)l++;if(r=t-l,r<0)r+=dt,i=t,h=m[p=0];else{if(p=Math.ceil((r+1)/dt),o=m.length,p>=o)return e;for(h=o=m[p],l=1;o>=10;o/=10)l++;r%=dt,i=r-dt+l}if(n!==void 0&&(o=As(10,l-i-1),u=h/o%10|0,d=t<0||m[p+1]!==void 0||h%o,d=n<4?(u||d)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(r>0?i>0?h/As(10,l-i):0:m[p-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return d?(o=zt(e),m.length=1,t=t-o-1,m[0]=As(10,(dt-t%dt)%dt),e.e=nl(-t/dt)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=p,o=1,p--):(m.length=p+1,o=As(10,dt-r),m[p]=i>0?(h/As(10,l-i)%As(10,i)|0)*o:0),d)for(;;)if(p==0){(m[0]+=o)==en&&(m[0]=1,++e.e);break}else{if(m[p]+=o,m[p]!=en)break;m[p--]=0,o=1}for(r=m.length;m[--r]===0;)m.pop();if(gt&&(e.e>Dd||e.e<-Dd))throw Error(I0+zt(e));return e}function sT(e,t){var n,r,i,o,l,u,d,h,p,m,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),gt?ct(t,x):t;if(d=e.d,m=t.d,r=t.e,h=e.e,d=d.slice(),l=h-r,l){for(p=l<0,p?(n=d,l=-l,u=m.length):(n=m,r=h,u=d.length),i=Math.max(Math.ceil(x/dt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=d.length,u=m.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(d[i]!=m[i]){p=d[i]<m[i];break}l=0}for(p&&(n=d,d=m,m=n,t.s=-t.s),u=d.length,i=m.length-u;i>0;--i)d[u++]=0;for(i=m.length;i>l;){if(d[--i]<m[i]){for(o=i;o&&d[--o]===0;)d[o]=en-1;--d[o],d[i]+=en}d[i]-=m[i]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(t.d=d,t.e=r,gt?ct(t,x):t):new y(0)}function ks(e,t,n){var r,i=zt(e),o=aa(e.d),l=o.length;return t?(n&&(r=n-l)>0?o=o.charAt(0)+"."+o.slice(1)+Ni(r):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Ni(-i-1)+o,n&&(r=n-l)>0&&(o+=Ni(r))):i>=l?(o+=Ni(i+1-l),n&&(r=n-i-1)>0&&(o=o+"."+Ni(r))):((r=i+1)<l&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(o+="."),o+=Ni(r))),e.s<0?"-"+o:o}function uE(e,t){if(e.length>t)return e.length=t,!0}function oT(e){var t,n,r;function i(o){var l=this;if(!(l instanceof i))return new i(o);if(l.constructor=i,o instanceof i){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ds+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return cE(l,o.toString())}else if(typeof o!="string")throw Error(Ds+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,S8.test(o))cE(l,o);else throw Error(Ds+o)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=oT,i.config=i.set=A8,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function A8(e){if(!e||typeof e!="object")throw Error(Tr+"Object expected");var t,n,r,i=["precision",1,tl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(nl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Ds+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ds+n+": "+r);return this}var L0=oT(x8);ir=new L0(1);const tt=L0;var C8=e=>e,lT={},cT=e=>e===lT,fE=e=>function t(){return arguments.length===0||arguments.length===1&&cT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},uT=(e,t)=>e===1?t:fE(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(l=>l!==lT).length;return o>=e?t(...r):uT(e-o,fE(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var h=r.map(p=>cT(p)?u.shift():p);return t(...h,...u)}))}),hh=e=>uT(e.length,e),uv=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},P8=hh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),E8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return C8;var i=n.reverse(),o=i[0],l=i.slice(1);return function(){return l.reduce((u,d)=>d(u),o(...arguments))}},fv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),fT=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=i,n=e(...i)),n}};function dT(e){var t;return e===0?t=1:t=Math.floor(new tt(e).abs().log(10).toNumber())+1,t}function hT(e,t,n){for(var r=new tt(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}hh((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});hh((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});hh((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var pT=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},mT=(e,t,n)=>{if(e.lte(0))return new tt(0);var r=dT(e.toNumber()),i=new tt(10).pow(r),o=e.div(i),l=r!==1?.05:.1,u=new tt(Math.ceil(o.div(l).toNumber())).add(n).mul(l),d=u.mul(i);return t?new tt(d.toNumber()):new tt(Math.ceil(d.toNumber()))},w8=(e,t,n)=>{var r=new tt(1),i=new tt(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new tt(10).pow(dT(e)-1),i=new tt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new tt(Math.floor(e)))}else e===0?i=new tt(Math.floor((t-1)/2)):n||(i=new tt(Math.floor(e)));var l=Math.floor((t-1)/2),u=E8(P8(d=>i.add(new tt(d-l).mul(r)).toNumber()),uv);return u(0,t)},gT=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new tt(0),tickMin:new tt(0),tickMax:new tt(0)};var l=mT(new tt(n).sub(t).div(r-1),i,o),u;t<=0&&n>=0?u=new tt(0):(u=new tt(t).add(n).div(2),u=u.sub(new tt(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),h=Math.ceil(new tt(n).sub(u).div(l).toNumber()),p=d+h+1;return p>r?gT(t,n,r,i,o+1):(p<r&&(h=n>0?h+(r-p):h,d=n>0?d:d+(r-p)),{step:l,tickMin:u.sub(new tt(d).mul(l)),tickMax:u.add(new tt(h).mul(l))})};function O8(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,u]=pT([t,n]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...uv(0,r-1).map(()=>1/0)]:[...uv(0,r-1).map(()=>-1/0),u];return t>n?fv(d):d}if(l===u)return w8(l,r,i);var{step:h,tickMin:p,tickMax:m}=gT(l,u,o,i,0),y=hT(p,m.add(new tt(.1).mul(h)),h);return t>n?fv(y):y}function _8(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=pT([n,r]);if(o===-1/0||l===1/0)return[n,r];if(o===l)return[o];var u=Math.max(t,2),d=mT(new tt(l).sub(o).div(u-1),i,0),h=[...hT(new tt(o),new tt(l),d),l];return i===!1&&(h=h.map(p=>Math.round(p))),n>r?fv(h):h}var T8=fT(O8),D8=fT(_8),yT=e=>e.rootProps.maxBarSize,j8=e=>e.rootProps.barGap,vT=e=>e.rootProps.barCategoryGap,N8=e=>e.rootProps.barSize,iu=e=>e.rootProps.stackOffset,$0=e=>e.options.chartName,B0=e=>e.rootProps.syncId,bT=e=>e.rootProps.syncMethod,U0=e=>e.options.eventEmitter,Ra={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ar={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ph=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},M8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ra.angleAxisId,includeHidden:!1,name:void 0,reversed:Ra.reversed,scale:Ra.scale,tick:Ra.tick,tickCount:void 0,ticks:void 0,type:Ra.type,unit:void 0},k8={allowDataOverflow:ar.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ar.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ar.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ar.scale,tick:ar.tick,tickCount:ar.tickCount,ticks:void 0,type:ar.type,unit:void 0},R8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ra.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ra.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ra.scale,tick:Ra.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},I8={allowDataOverflow:ar.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ar.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ar.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ar.scale,tick:ar.tick,tickCount:ar.tickCount,ticks:void 0,type:"category",unit:void 0},z0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?R8:M8,G0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?I8:k8,mh=e=>e.polarOptions,H0=Q([Fa,Ka,Kt],t_),xT=Q([mh,H0],(e,t)=>{if(e!=null)return En(e.innerRadius,t,0)}),ST=Q([mh,H0],(e,t)=>{if(e!=null)return En(e.outerRadius,t,t*.8)}),L8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},AT=Q([mh],L8);Q([z0,AT],ph);var CT=Q([H0,xT,ST],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});Q([G0,CT],ph);var PT=Q([We,mh,xT,ST,Fa,Ka],(e,t,n,r,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:d,endAngle:h}=t;return{cx:En(l,i,i/2),cy:En(u,o,o/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:h,clockWise:!1}}}),vt=(e,t)=>t,su=(e,t,n)=>n;function q0(e){return e?.id}var Xt=e=>{var t=We(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},rl=e=>e.tooltip.settings.axisId,an=e=>{var t=Xt(e),n=rl(e);return ou(e,t,n)},ET=Q([an],e=>e?.dataKey);function wT(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:o}=n,l=new Map;return e.forEach(u=>{var d,h=(d=u.data)!==null&&d!==void 0?d:r;if(!(h==null||h.length===0)){var p=q0(u);h.forEach((m,y)=>{var x=o==null||i?y:String(mt(m,o,null)),S=mt(m,u.dataKey,0),A;l.has(x)?A=l.get(x):A={},Object.assign(A,{[p]:S}),l.set(x,A)})}}),Array.from(l.values())}function gh(e){return e.stackId!=null&&e.dataKey!=null}function dE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(n),!0).forEach(function(r){$8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $8(e,t,n){return(t=B8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B8(e){var t=U8(e,"string");return typeof t=="symbol"?t:t+""}function U8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dv=[0,"auto"],nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},OT=(e,t)=>e.cartesianAxis.xAxis[t],Yi=(e,t)=>{var n=OT(e,t);return n??nr},rr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:dv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:eu},_T=(e,t)=>e.cartesianAxis.yAxis[t],Fi=(e,t)=>{var n=_T(e,t);return n??rr},z8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Y0=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??z8},Mt=(e,t,n)=>{switch(t){case"xAxis":return Yi(e,n);case"yAxis":return Fi(e,n);case"zAxis":return Y0(e,n);case"angleAxis":return z0(e,n);case"radiusAxis":return G0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},G8=(e,t,n)=>{switch(t){case"xAxis":return Yi(e,n);case"yAxis":return Fi(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ou=(e,t,n)=>{switch(t){case"xAxis":return Yi(e,n);case"yAxis":return Fi(e,n);case"angleAxis":return z0(e,n);case"radiusAxis":return G0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},TT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function F0(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var K0=e=>e.graphicalItems.cartesianItems,H8=Q([vt,su],F0),V0=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),lu=Q([K0,Mt,H8],V0),DT=Q([lu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(gh)),jT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),NT=Q([lu],jT),X0=e=>e.map(t=>t.data).filter(Boolean).flat(1),q8=Q([lu],X0),W0=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},Q0=Q([q8,R0],W0),Z0=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:mt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:mt(i,r)}))):e.map(r=>({value:r})),yh=Q([Q0,Mt,lu],Z0);function MT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Hs(e){return e.filter(t=>oa(t)||t instanceof Date).map(Number).filter(t=>or(t)===!1)}function Y8(e,t,n){return!n||typeof t!="number"||or(t)?[]:n.length?Hs(n.flatMap(r=>{var i=mt(e,r.dataKey),o,l;if(Array.isArray(i)?[o,l]=i:o=l=i,!(!cr(o)||!cr(l)))return[t-o,t+l]})):[]}var F8=Q([DT,R0,an],wT),kT=(e,t,n)=>{var r={},i=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,u]=o,d=u.map(q0);return[l,{stackedData:WL(e,d,n),graphicalItems:u}]}))},hv=Q([F8,DT,iu],kT),RT=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var o=t3(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},K8=Q([hv,qi,vt],RT),IT=(e,t,n,r,i)=>n.length>0?e.flatMap(o=>n.flatMap(l=>{var u,d,h=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>MT(i,m)),p=mt(o,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey);return{value:p,errorDomain:Y8(o,p,h)}})).filter(Boolean):t?.dataKey!=null?e.map(o=>({value:mt(o,t.dataKey),errorDomain:[]})):e.map(o=>({value:o,errorDomain:[]})),vh=e=>e.errorBars,LT=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>MT(n,r));Q([NT,vh,vt],LT);var V8=Q([Q0,Mt,NT,vh,vt],IT);function X8(e){var{value:t}=e;if(oa(t)||t instanceof Date)return t}var hE=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Hs(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},W8=(e,t,n)=>{var r=e.map(X8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&X2(r))?A_(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},J0=e=>{var t;if(e==null||!("domain"in e))return dv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Hs(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:dv},Nd=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),l=Math.min(...o),u=Math.max(...o);return[l,u]}},$T=e=>e.referenceElements.dots,al=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),Q8=Q([$T,vt,su],al),BT=e=>e.referenceElements.areas,Z8=Q([BT,vt,su],al),UT=e=>e.referenceElements.lines,J8=Q([UT,vt,su],al),zT=(e,t)=>{var n=Hs(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},e6=Q(Q8,vt,zT),GT=(e,t)=>{var n=Hs(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},t6=Q([Z8,vt],GT),HT=(e,t)=>{var n=Hs(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},n6=Q(J8,vt,HT),r6=Q(e6,n6,t6,(e,t,n)=>Nd(e,n,t)),qT=Q([Mt],J0),eb=(e,t,n,r,i,o,l)=>{var u=v8(t,e.allowDataOverflow);if(u!=null)return u;var d=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",h=d?Nd(n,i,hE(r)):Nd(i,hE(r));return b8(t,h,e.allowDataOverflow)},a6=Q([Mt,qT,K8,V8,r6,We,vt],eb),i6=[0,1],tb=(e,t,n,r,i,o,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,h=Us(t,o);return h&&u==null?A_(0,n.length):d==="category"?W8(r,e,h):i==="expand"?i6:l}},nb=Q([Mt,We,Q0,yh,iu,vt,a6],tb),YT=(e,t,n,r,i)=>{if(e!=null){var{scale:o,type:l}=e;if(o==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof o=="string"){var u="scale".concat(Wc(o));return u in _c?u:"point"}}},il=Q([Mt,We,TT,$0,vt],YT);function s6(e){if(e!=null){if(e in _c)return _c[e]();var t="scale".concat(Wc(e));if(t in _c)return _c[t]()}}function rb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=s6(t);if(i!=null){var o=i.domain(n).range(r);return YL(o),o}}}var ab=(e,t,n)=>{var r=J0(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ko(e))return T8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ko(e))return D8(e,t.tickCount,t.allowDecimals)}},ib=Q([nb,ou,il],ab),sb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Ko(t)&&Array.isArray(n)&&n.length>0){var i=t[0],o=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,o),Math.max(l,u)]}return t},o6=Q([Mt,nb,ib,vt],sb),l6=Q(yh,Mt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Hs(e.map(u=>u.value))).sort((u,d)=>u-d);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var l=r[o+1]-r[o];n=Math.min(n,l)}return n/i}}),FT=Q(l6,We,vT,Kt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!cr(e))return 0;var o=t==="vertical"?r.height:r.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var l=En(n,e*o),u=e*o/2;return u-l-(u-l)/o*l}return 0}),c6=(e,t)=>{var n=Yi(e,t);return n==null||typeof n.padding!="string"?0:FT(e,"xAxis",t,n.padding)},u6=(e,t)=>{var n=Fi(e,t);return n==null||typeof n.padding!="string"?0:FT(e,"yAxis",t,n.padding)},f6=Q(Yi,c6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),d6=Q(Fi,u6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),h6=Q([Kt,f6,rh,nh,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),p6=Q([Kt,We,d6,rh,nh,(e,t,n)=>n],(e,t,n,r,i,o)=>{var{padding:l}=i;return o?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),cu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return h6(e,n,r);case"yAxis":return p6(e,n,r);case"zAxis":return(i=Y0(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return AT(e);case"radiusAxis":return CT(e,n);default:return}},KT=Q([Mt,cu],ph),sl=Q([Mt,il,o6,KT],rb);Q([lu,vh,vt],LT);function VT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var bh=(e,t)=>t,xh=(e,t,n)=>n,m6=Q(eh,bh,xh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(VT)),g6=Q(th,bh,xh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(VT)),XT=(e,t)=>({width:e.width,height:t.height}),y6=(e,t)=>{var n=typeof t.width=="number"?t.width:eu;return{width:n,height:e.height}},WT=Q(Kt,Yi,XT),v6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},b6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},x6=Q(Ka,Kt,m6,bh,xh,(e,t,n,r,i)=>{var o={},l;return n.forEach(u=>{var d=XT(t,u);l==null&&(l=v6(t,r,e));var h=r==="top"&&!i||r==="bottom"&&i;o[u.id]=l-Number(h)*d.height,l+=(h?-1:1)*d.height}),o}),S6=Q(Fa,Kt,g6,bh,xh,(e,t,n,r,i)=>{var o={},l;return n.forEach(u=>{var d=y6(t,u);l==null&&(l=b6(t,r,e));var h=r==="left"&&!i||r==="right"&&i;o[u.id]=l-Number(h)*d.width,l+=(h?-1:1)*d.width}),o}),A6=(e,t)=>{var n=Kt(e),r=Yi(e,t);if(r!=null){var i=x6(e,r.orientation,r.mirror),o=i[t];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},C6=(e,t)=>{var n=Kt(e),r=Fi(e,t);if(r!=null){var i=S6(e,r.orientation,r.mirror),o=i[t];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},QT=Q(Kt,Fi,(e,t)=>{var n=typeof t.width=="number"?t.width:eu;return{width:n,height:e.height}}),pE=(e,t,n)=>{switch(t){case"xAxis":return WT(e,n).width;case"yAxis":return QT(e,n).height;default:return}},ZT=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:l}=n,u=Us(e,r),d=t.map(h=>h.value);if(l&&u&&o==="category"&&i&&X2(d))return d}},ob=Q([We,yh,Mt,vt],ZT),JT=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,l=Us(e,r);if(l&&(i==="number"||o!=="auto"))return t.map(u=>u.value)}},lb=Q([We,yh,ou,vt],JT),mE=Q([We,G8,il,sl,ob,lb,cu,ib,vt],(e,t,n,r,i,o,l,u,d)=>{if(t==null)return null;var h=Us(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:o,duplicateDomain:i,isCategorical:h,niceTicks:u,range:l,realScaleType:n,scale:r}}),P6=(e,t,n,r,i,o,l,u,d)=>{if(!(t==null||r==null)){var h=Us(e,d),{type:p,ticks:m,tickCount:y}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=p==="category"&&r.bandwidth?r.bandwidth()/x:0;S=d==="angleAxis"&&o!=null&&o.length>=2?tn(o[0]-o[1])*2*S:S;var A=m||i;if(A){var P=A.map((E,O)=>{var _=l?l.indexOf(E):E;return{index:O,coordinate:r(_)+S,value:E,offset:S}});return P.filter(E=>!or(E.coordinate))}return h&&u?u.map((E,O)=>({coordinate:r(E)+S,value:E,index:O,offset:S})):r.ticks?r.ticks(y).map(E=>({coordinate:r(E)+S,value:E,offset:S})):r.domain().map((E,O)=>({coordinate:r(E)+S,value:l?l[E]:E,index:O,offset:S}))}},eD=Q([We,ou,il,sl,ib,cu,ob,lb,vt],P6),E6=(e,t,n,r,i,o,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Us(e,l),{tickCount:d}=t,h=0;return h=l==="angleAxis"&&r?.length>=2?tn(r[0]-r[1])*2*h:h,u&&o?o.map((p,m)=>({coordinate:n(p)+h,value:p,index:m,offset:h})):n.ticks?n.ticks(d).map(p=>({coordinate:n(p)+h,value:p,offset:h})):n.domain().map((p,m)=>({coordinate:n(p)+h,value:i?i[p]:p,index:m,offset:h}))}},Vo=Q([We,ou,sl,cu,ob,lb,vt],E6),Xo=Q(Mt,sl,(e,t)=>{if(!(e==null||t==null))return jd(jd({},e),{},{scale:t})}),w6=Q([Mt,il,nb,KT],rb);Q((e,t,n)=>Y0(e,n),w6,(e,t)=>{if(!(e==null||t==null))return jd(jd({},e),{},{scale:t})});var O6=Q([We,eh,th],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),tD=e=>e.options.defaultTooltipEventType,nD=e=>e.options.validateTooltipEventTypes;function rD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function cb(e,t){var n=tD(e),r=nD(e);return rD(t,n,r)}function _6(e){return we(t=>cb(t,e))}var aD=(e,t)=>{var n,r=Number(t);if(!(or(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},T6=e=>e.tooltip.settings,ki={active:!1,index:null,dataKey:void 0,coordinate:void 0},D6={itemInteraction:{click:ki,hover:ki},axisInteraction:{click:ki,hover:ki},keyboardInteraction:ki,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},iD=ur({name:"tooltip",initialState:D6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Ba(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:j6,removeTooltipEntrySettings:N6,setTooltipSettingsState:M6,setActiveMouseOverItemIndex:sD,mouseLeaveItem:k6,mouseLeaveChart:oD,setActiveClickItemIndex:R6,setMouseOverAxisIndex:lD,setMouseClickAxisIndex:I6,setSyncInteraction:pv,setKeyboardInteraction:mv}=iD.actions,L6=iD.reducer;function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(n),!0).forEach(function(r){$6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $6(e,t,n){return(t=B6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B6(e){var t=U6(e,"string");return typeof t=="symbol"?t:t+""}function U6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function G6(e){return e.index!=null}var cD=(e,t,n,r)=>{if(t==null)return ki;var i=z6(e,t,n);if(i==null)return ki;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(G6(i)){if(o)return Gf(Gf({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Gf(Gf({},ki),{},{coordinate:i.coordinate})},ub=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!cr(r))return n;var i=0,o=1/0;return t.length>0&&(o=t.length-1),String(Math.max(i,Math.min(r,o)))},uD=(e,t,n,r,i,o,l,u)=>{if(!(o==null||u==null)){var d=l[0],h=d==null?void 0:u(d.positions,o);if(h!=null)return h;var p=i?.[Number(o)];if(p)switch(n){case"horizontal":return{x:p.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:p.coordinate}}}},fD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.dataKey)===i})},uu=e=>e.options.tooltipPayloadSearcher,ol=e=>e.tooltip;function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(n),!0).forEach(function(r){H6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H6(e,t,n){return(t=q6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q6(e){var t=Y6(e,"string");return typeof t=="symbol"?t:t+""}function Y6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F6(e,t){return e??t}var dD=(e,t,n,r,i,o,l)=>{if(!(t==null||o==null)){var{chartData:u,computedData:d,dataStartIndex:h,dataEndIndex:p}=n,m=[];return e.reduce((y,x)=>{var S,{dataDefinedOnItem:A,settings:P}=x,E=F6(A,u),O=Array.isArray(E)?n_(E,h,p):E,_=(S=P?.dataKey)!==null&&S!==void 0?S:r,N=P?.nameKey,j;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?j=kR(O,r,i):j=o(O,t,d,N),Array.isArray(j))j.forEach(R=>{var k=vE(vE({},P),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});y.push(eP({tooltipEntrySettings:k,dataKey:R.dataKey,payload:R.payload,value:mt(R.payload,R.dataKey),name:R.name}))});else{var D;y.push(eP({tooltipEntrySettings:P,dataKey:_,payload:j,value:mt(j,_),name:(D=mt(j,N))!==null&&D!==void 0?D:P?.name}))}return y},m)}},fb=Q([an,We,TT,$0,Xt],YT),K6=Q([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),V6=Q([Xt,rl],F0),fu=Q([K6,an,V6],V0),X6=Q([fu],e=>e.filter(gh)),W6=Q([fu],X0),ll=Q([W6,qi],W0),Q6=Q([X6,qi,an],wT),db=Q([ll,an,fu],Z0),Z6=Q([an],J0),J6=Q([fu],e=>e.filter(gh)),eU=Q([Q6,J6,iu],kT),tU=Q([eU,qi,Xt],RT),nU=Q([fu],jT),rU=Q([ll,an,nU,vh,Xt],IT),aU=Q([$T,Xt,rl],al),iU=Q([aU,Xt],zT),sU=Q([BT,Xt,rl],al),oU=Q([sU,Xt],GT),lU=Q([UT,Xt,rl],al),cU=Q([lU,Xt],HT),uU=Q([iU,cU,oU],Nd),fU=Q([an,Z6,tU,rU,uU,We,Xt],eb),hD=Q([an,We,ll,db,iu,Xt,fU],tb),dU=Q([hD,an,fb],ab),hU=Q([an,hD,dU,Xt],sb),pD=e=>{var t=Xt(e),n=rl(e),r=!1;return cu(e,t,n,r)},mD=Q([an,pD],ph),gD=Q([an,fb,hU,mD],rb),pU=Q([We,db,an,Xt],ZT),mU=Q([We,db,an,Xt],JT),gU=(e,t,n,r,i,o,l,u)=>{if(t){var{type:d}=t,h=Us(e,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=d==="category"&&r.bandwidth?r.bandwidth()/p:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?tn(i[0]-i[1])*2*m:m,h&&l?l.map((y,x)=>({coordinate:r(y)+m,value:y,index:x,offset:m})):r.domain().map((y,x)=>({coordinate:r(y)+m,value:o?o[y]:y,index:x,offset:m}))}}},Xa=Q([We,an,fb,gD,pD,pU,mU,Xt],gU),hb=Q([tD,nD,T6],(e,t,n)=>rD(n.shared,e,t)),yD=e=>e.tooltip.settings.trigger,pb=e=>e.tooltip.settings.defaultIndex,Sh=Q([ol,hb,yD,pb],cD),Rs=Q([Sh,ll],ub),vD=Q([Xa,Rs],aD),bD=Q([Sh],e=>{if(e)return e.dataKey}),xD=Q([ol,hb,yD,pb],fD),yU=Q([Fa,Ka,We,Kt,Xa,pb,xD,uu],uD),vU=Q([Sh,yU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),bU=Q([Sh],e=>e.active),xU=Q([xD,Rs,qi,ET,vD,uu,hb],dD);Q([xU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function bE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(n),!0).forEach(function(r){SU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SU(e,t,n){return(t=AU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AU(e){var t=CU(e,"string");return typeof t=="symbol"?t:t+""}function CU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PU=()=>we(an),EU=()=>{var e=PU(),t=we(Xa),n=we(gD);return a0(xE(xE({},e),{},{scale:n}),t)},wU=()=>we($0),mb=(e,t)=>t,SD=(e,t,n)=>n,gb=(e,t,n,r)=>r,OU=Q(Xa,e=>Kd(e,t=>t.coordinate)),yb=Q([ol,mb,SD,gb],cD),AD=Q([yb,ll],ub),_U=(e,t,n)=>{if(t!=null){var r=ol(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},CD=Q([ol,mb,SD,gb],fD),Md=Q([Fa,Ka,We,Kt,Xa,gb,CD,uu],uD),TU=Q([yb,Md],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),PD=Q(Xa,AD,aD),DU=Q([CD,AD,qi,ET,PD,uu,mb],dD),jU=Q([yb],e=>({isActive:e.active,activeIndex:e.index})),NU=(e,t,n,r,i,o,l,u)=>{if(!(!e||!t||!r||!i||!o)){var d=n3(e.chartX,e.chartY,t,n,u);if(d){var h=a3(d,t),p=HL(h,l,o,r,i),m=r3(t,o,p,d);return{activeIndex:String(p),activeCoordinate:m}}}};function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gv.apply(null,arguments)}function SE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(n),!0).forEach(function(r){MU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MU(e,t,n){return(t=kU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kU(e){var t=RU(e,"string");return typeof t=="symbol"?t:t+""}function RU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:u,tooltipEventType:d,chartName:h}=e,p=t,m=n,y=r;if(!u||!p||h!=="ScatterChart"&&d!=="axis")return null;var x,S;if(h==="ScatterChart")x=p,S=a$;else if(h==="BarChart")x=i$(l,p,i,o),S=v_;else if(l==="radial"){var{cx:A,cy:P,radius:E,startAngle:O,endAngle:_}=b_(p);x={cx:A,cy:P,startAngle:O,endAngle:_,innerRadius:E,outerRadius:E},S=S_}else x={points:$$(l,p,i)},S=h_;var N=typeof u=="object"&&"className"in u?u.className:void 0,j=Hf(Hf(Hf(Hf({stroke:"#ccc",pointerEvents:"none"},i),x),Bt(u,!1)),{},{payload:m,payloadIndex:y,className:nt("recharts-tooltip-cursor",N)});return C.isValidElement(u)?C.cloneElement(u,j):C.createElement(S,j)}function LU(e){var t=EU(),n=l_(),r=c0(),i=wU();return C.createElement(IU,gv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var ED=C.createContext(null),$U=()=>C.useContext(ED),ty={exports:{}},AE;function BU(){return AE||(AE=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function o(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,m||d,y),S=n?n+h:h;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],x]:d._events[S].push(x):(d._events[S]=x,d._eventsCount++),d}function l(d,h){--d._eventsCount===0?d._events=new r:delete d._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)t.call(p,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=n?n+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,x=m.length,S=new Array(x);y<x;y++)S[y]=m[y].fn;return S},u.prototype.listenerCount=function(h){var p=n?n+h:h,m=this._events[p];return m?m.fn?1:m.length:0},u.prototype.emit=function(h,p,m,y,x,S){var A=n?n+h:h;if(!this._events[A])return!1;var P=this._events[A],E=arguments.length,O,_;if(P.fn){switch(P.once&&this.removeListener(h,P.fn,void 0,!0),E){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,p),!0;case 3:return P.fn.call(P.context,p,m),!0;case 4:return P.fn.call(P.context,p,m,y),!0;case 5:return P.fn.call(P.context,p,m,y,x),!0;case 6:return P.fn.call(P.context,p,m,y,x,S),!0}for(_=1,O=new Array(E-1);_<E;_++)O[_-1]=arguments[_];P.fn.apply(P.context,O)}else{var N=P.length,j;for(_=0;_<N;_++)switch(P[_].once&&this.removeListener(h,P[_].fn,void 0,!0),E){case 1:P[_].fn.call(P[_].context);break;case 2:P[_].fn.call(P[_].context,p);break;case 3:P[_].fn.call(P[_].context,p,m);break;case 4:P[_].fn.call(P[_].context,p,m,y);break;default:if(!O)for(j=1,O=new Array(E-1);j<E;j++)O[j-1]=arguments[j];P[_].fn.apply(P[_].context,O)}}return!0},u.prototype.on=function(h,p,m){return o(this,h,p,m,!1)},u.prototype.once=function(h,p,m){return o(this,h,p,m,!0)},u.prototype.removeListener=function(h,p,m,y){var x=n?n+h:h;if(!this._events[x])return this;if(!p)return l(this,x),this;var S=this._events[x];if(S.fn)S.fn===p&&(!y||S.once)&&(!m||S.context===m)&&l(this,x);else{for(var A=0,P=[],E=S.length;A<E;A++)(S[A].fn!==p||y&&!S[A].once||m&&S[A].context!==m)&&P.push(S[A]);P.length?this._events[x]=P.length===1?P[0]:P:l(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&l(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(ty)),ty.exports}var UU=BU();const zU=qr(UU);var Vc=new zU,yv="recharts.syncEvent.tooltip",CE="recharts.syncEvent.brush";function wD(e,t){if(t){var n=Number.parseInt(t,10);if(!or(n))return e?.[n]}}var GU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},OD=ur({name:"options",initialState:GU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),HU=OD.reducer,{createEventEmitter:qU}=OD.actions;function YU(e){return e.tooltip.syncInteraction}var FU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_D=ur({name:"chartData",initialState:FU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:PE,setDataStartEndIndexes:KU,setComputedData:cK}=_D.actions,VU=_D.reducer,XU=["x","y"];function EE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(n),!0).forEach(function(r){WU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WU(e,t,n){return(t=QU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QU(e){var t=ZU(e,"string");return typeof t=="symbol"?t:t+""}function ZU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JU(e,t){if(e==null)return{};var n,r,i=ez(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ez(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var TD=()=>{};function tz(){var e=we(B0),t=we(U0),n=At(),r=we(bT),i=we(Xa),o=c0(),l=s0(),u=we(d=>d.rootProps.className);C.useEffect(()=>{if(e==null)return TD;var d=(h,p,m)=>{if(t!==m&&e===h){if(r==="index"){var y;if(l&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate){var x=p.payload.coordinate,{x:S,y:A}=x,P=JU(x,XU),E=bs(bs(bs({},P),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),O=bs(bs({},p),{},{payload:bs(bs({},p.payload),{},{coordinate:E})});n(O)}else n(p);return}if(i!=null){var _;if(typeof r=="function"){var N={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},j=r(i,N);_=i[j]}else r==="value"&&(_=i.find(ce=>String(ce.value)===p.payload.label));var{coordinate:D}=p.payload;if(_==null||p.payload.active===!1||D==null||l==null){n(pv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:R,y:k}=D,U=Math.min(R,l.x+l.width),Z=Math.min(k,l.y+l.height),q={x:o==="horizontal"?_.coordinate:U,y:o==="horizontal"?Z:_.coordinate},J=pv({active:p.payload.active,coordinate:q,dataKey:p.payload.dataKey,index:String(_.index),label:p.payload.label});n(J)}}};return Vc.on(yv,d),()=>{Vc.off(yv,d)}},[u,n,t,e,r,i,o,l])}function nz(){var e=we(B0),t=we(U0),n=At();C.useEffect(()=>{if(e==null)return TD;var r=(i,o,l)=>{t!==l&&e===i&&n(KU(o))};return Vc.on(CE,r),()=>{Vc.off(CE,r)}},[n,t,e])}function rz(){var e=At();C.useEffect(()=>{e(qU())},[e]),tz(),nz()}function az(e,t,n,r,i,o){var l=we(y=>_U(y,e,t)),u=we(U0),d=we(B0),h=we(bT),p=we(YU),m=p?.active;C.useEffect(()=>{if(!m&&d!=null&&u!=null){var y=pv({active:o,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Vc.emit(yv,d,y,u)}},[m,n,l,i,r,u,d,h,o])}function wE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(n),!0).forEach(function(r){iz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iz(e,t,n){return(t=sz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sz(e){var t=oz(e,"string");return typeof t=="symbol"?t:t+""}function oz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lz(e){return e.dataKey}function cz(e,t){return C.isValidElement(e)?C.cloneElement(e,t):typeof e=="function"?C.createElement(e,t):C.createElement(I3,t)}var _E=[],uz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Jo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ny(e){var t=jr(e,uz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:l,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:p,position:m,reverseDirection:y,useTranslate3d:x,wrapperStyle:S,cursor:A,shared:P,trigger:E,defaultIndex:O,portal:_,axisId:N}=t,j=At(),D=typeof O=="number"?String(O):O;C.useEffect(()=>{j(M6({shared:P,trigger:E,axisId:N,active:n,defaultIndex:D}))},[j,P,E,N,n,D]);var R=s0(),k=d_(),U=_6(P),{activeIndex:Z,isActive:q}=we(z=>jU(z,U,E,D)),J=we(z=>DU(z,U,E,D)),ce=we(z=>PD(z,U,E,D)),se=we(z=>TU(z,U,E,D)),te=J,$=$U(),ee=n??q,[pe,he]=DO([te,ee]),I=U==="axis"?ce:void 0;az(U,E,se,I,Z,ee);var K=_??$;if(K==null)return null;var Y=te??_E;ee||(Y=_E),u&&Y.length&&(Y=EO(te.filter(z=>z.value!=null&&(z.hide!==!0||t.includeHidden)),p,lz));var le=Y.length>0,ye=C.createElement(H3,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:d,active:ee,coordinate:se,hasPayload:le,offset:h,position:m,reverseDirection:y,useTranslate3d:x,viewBox:R,wrapperStyle:S,lastBoundingBox:pe,innerRef:he,hasPortalFromProps:!!_},cz(l,OE(OE({},t),{},{payload:Y,label:I,active:ee,coordinate:se,accessibilityLayer:k})));return C.createElement(C.Fragment,null,Z2.createPortal(ye,K),ee&&C.createElement(LU,{cursor:A,tooltipEventType:U,coordinate:se,payload:te,index:Z}))}var ry={},ay={},iy={},TE;function fz(){return TE||(TE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:o}={}){let l,u=null;const d=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),p=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{h&&p(),A()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,m()},r)},S=()=>{y!==null&&(clearTimeout(y),y=null)},A=()=>{S(),l=void 0,u=null},P=()=>{p()},E=function(...O){if(i?.aborted)return;l=this,u=O;const _=y==null;x(),d&&_&&p()};return E.schedule=x,E.cancel=A,E.flush=P,i?.addEventListener("abort",A,{once:!0}),E}e.debounce=t})(iy)),iy}var DE;function dz(){return DE||(DE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fz();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:l=!1,trailing:u=!0,maxWait:d}=o,h=Array(2);l&&(h[0]="leading"),u&&(h[1]="trailing");let p,m=null;const y=t.debounce(function(...A){p=r.apply(this,A),m=null},i,{edges:h}),x=function(...A){return d!=null&&(m===null&&(m=Date.now()),Date.now()-m>=d)?(p=r.apply(this,A),m=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,A),p)},S=()=>(y.flush(),p);return x.cancel=y.cancel,x.flush=S,x}e.debounce=n})(ay)),ay}var jE;function hz(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dz();function n(r,i=0,o={}){const{leading:l=!0,trailing:u=!0}=o;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(ry)),ry}var sy,NE;function pz(){return NE||(NE=1,sy=hz().throttle),sy}var mz=pz();const gz=qr(mz);var Mc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function ME(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(n),!0).forEach(function(r){yz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yz(e,t,n){return(t=vz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vz(e){var t=bz(e,"string");return typeof t=="symbol"?t:t+""}function bz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ly=C.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:l=0,minHeight:u,maxHeight:d,children:h,debounce:p=0,id:m,className:y,onResize:x,style:S={}}=e,A=C.useRef(null),P=C.useRef();P.current=x,C.useImperativeHandle(t,()=>A.current);var[E,O]=C.useState({containerWidth:r.width,containerHeight:r.height}),_=C.useCallback((j,D)=>{O(R=>{var k=Math.round(j),U=Math.round(D);return R.containerWidth===k&&R.containerHeight===U?R:{containerWidth:k,containerHeight:U}})},[]);C.useEffect(()=>{var j=U=>{var Z,{width:q,height:J}=U[0].contentRect;_(q,J),(Z=P.current)===null||Z===void 0||Z.call(P,q,J)};p>0&&(j=gz(j,p,{trailing:!0,leading:!1}));var D=new ResizeObserver(j),{width:R,height:k}=A.current.getBoundingClientRect();return _(R,k),D.observe(A.current),()=>{D.disconnect()}},[_,p]);var N=C.useMemo(()=>{var{containerWidth:j,containerHeight:D}=E;if(j<0||D<0)return null;Mc(Cs(i)||Cs(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),Mc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var R=Cs(i)?j:i,k=Cs(o)?D:o;return n&&n>0&&(R?k=R/n:k&&(R=k*n),d&&k>d&&(k=d)),Mc(R>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,k,i,o,l,u,n),C.Children.map(h,U=>C.cloneElement(U,{width:R,height:k,style:oy({width:R,height:k},U.props.style)}))},[n,h,o,d,u,l,E,i]);return C.createElement("div",{id:m?"".concat(m):void 0,className:nt("recharts-responsive-container",y),style:oy(oy({},S),{},{width:i,height:o,minWidth:l,minHeight:u,maxHeight:d}),ref:A},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},N))}),Wo=e=>null;Wo.displayName="Cell";function xz(e,t,n){return(t=Sz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sz(e){var t=Az(e,"string");return typeof t=="symbol"?t:t+""}function Az(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Cz{constructor(t){xz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function kE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(n),!0).forEach(function(r){Ez(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ez(e,t,n){return(t=wz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wz(e){var t=Oz(e,"string");return typeof t=="symbol"?t:t+""}function Oz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _z={cacheSize:2e3,enableCache:!0},DD=Pz({},_z),RE=new Cz(DD.cacheSize),Tz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IE="recharts_measurement_span";function Dz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",o=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l,"|").concat(u)}var LE=(e,t)=>{try{var n=document.getElementById(IE);n||(n=document.createElement("span"),n.setAttribute("id",IE),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Tz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},kc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Jo.isSsr)return{width:0,height:0};if(!DD.enableCache)return LE(t,n);var r=Dz(t,n),i=RE.get(r);if(i)return i;var o=LE(t,n);return RE.set(r,o),o},$E=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Mz=Object.keys(jD),ko="NaN";function kz(e,t){return e*jD[t]}class qn{static parse(t){var n,[,r,i]=(n=Nz.exec(t))!==null&&n!==void 0?n:[];return new qn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,or(t)&&(this.unit=""),n!==""&&!jz.test(n)&&(this.num=NaN,this.unit=""),Mz.includes(n)&&(this.num=kz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new qn(NaN,""):new qn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new qn(NaN,""):new qn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new qn(NaN,""):new qn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new qn(NaN,""):new qn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return or(this.num)}}function ND(e){if(e.includes(ko))return ko;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,o]=(n=$E.exec(t))!==null&&n!==void 0?n:[],l=qn.parse(r??""),u=qn.parse(o??""),d=i==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return ko;t=t.replace($E,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,m,y]=(h=BE.exec(t))!==null&&h!==void 0?h:[],x=qn.parse(p??""),S=qn.parse(y??""),A=m==="+"?x.add(S):x.subtract(S);if(A.isNaN())return ko;t=t.replace(BE,A.toString())}return t}var UE=/\(([^()]*)\)/;function Rz(e){for(var t=e,n;(n=UE.exec(t))!=null;){var[,r]=n;t=t.replace(UE,ND(r))}return t}function Iz(e){var t=e.replace(/\s+/g,"");return t=Rz(t),t=ND(t),t}function Lz(e){try{return Iz(e)}catch{return ko}}function cy(e){var t=Lz(e.slice(5,-1));return t===ko?"":t}var $z=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Bz=["dx","dy","angle","className","breakAll"];function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vv.apply(null,arguments)}function zE(e,t){if(e==null)return{};var n,r,i=Uz(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Uz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var MD=/[ \f\n\r\t\v\u2028\u2029]+/,kD=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];nn(t)||(n?i=t.toString().split(""):i=t.toString().split(MD));var o=i.map(u=>({word:u,width:kc(u,r).width})),l=n?0:kc(" ",r).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},zz=(e,t,n,r,i)=>{var{maxLines:o,children:l,style:u,breakAll:d}=e,h=Te(o),p=l,m=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce((J,ce)=>{var{word:se,width:te}=ce,$=J[J.length-1];if($&&(r==null||i||$.width+te+n<Number(r)))$.words.push(se),$.width+=te+n;else{var ee={words:[se],width:te};J.push(ee)}return J},[])},y=m(t),x=Z=>Z.reduce((q,J)=>q.width>J.width?q:J);if(!h||i)return y;var S=y.length>o||x(y).width>Number(r);if(!S)return y;for(var A="…",P=Z=>{var q=p.slice(0,Z),J=kD({breakAll:d,style:u,children:q+A}).wordsWithComputedWidth,ce=m(J),se=ce.length>o||x(ce).width>Number(r);return[se,ce]},E=0,O=p.length-1,_=0,N;E<=O&&_<=p.length-1;){var j=Math.floor((E+O)/2),D=j-1,[R,k]=P(D),[U]=P(j);if(!R&&!U&&(E=j+1),R&&U&&(O=j-1),!R&&U){N=k;break}_++}return N||y},GE=e=>{var t=nn(e)?[]:e.toString().split(MD);return[{words:t}]},Gz=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:l}=e;if((t||n)&&!Jo.isSsr){var u,d,h=kD({breakAll:o,children:r,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:m}=h;u=p,d=m}else return GE(r);return zz({breakAll:o,children:r,maxLines:l,style:i},u,d,t,n)}return GE(r)},HE="#808080",Ah=C.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:d="end",fill:h=HE}=e,p=zE(e,$z),m=C.useMemo(()=>Gz({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:l,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,l,p.style,p.width]),{dx:y,dy:x,angle:S,className:A,breakAll:P}=p,E=zE(p,Bz);if(!oa(n)||!oa(r)||m.length===0)return null;var O=n+(Te(y)?y:0),_=r+(Te(x)?x:0),N;switch(d){case"start":N=cy("calc(".concat(o,")"));break;case"middle":N=cy("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:N=cy("calc(".concat(m.length-1," * -").concat(i,")"));break}var j=[];if(l){var D=m[0].width,{width:R}=p;j.push("scale(".concat(Te(R)?R/D:1,")"))}return S&&j.push("rotate(".concat(S,", ").concat(O,", ").concat(_,")")),j.length&&(E.transform=j.join(" ")),C.createElement("text",vv({},Bt(E,!0),{ref:t,x:O,y:_,className:nt("recharts-text",A),textAnchor:u,fill:h.includes("url")?HE:h}),m.map((k,U)=>{var Z=k.words.join(P?"":" ");return C.createElement("tspan",{x:O,dy:U===0?N:i,key:"".concat(Z,"-").concat(U)},Z)}))});Ah.displayName="Text";var Hz=["labelRef"];function qz(e,t){if(e==null)return{};var n,r,i=Yz(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(n),!0).forEach(function(r){Fz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fz(e,t,n){return(t=Kz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kz(e){var t=Vz(e,"string");return typeof t=="symbol"?t:t+""}function Vz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ia.apply(null,arguments)}var RD=C.createContext(null),Xz=e=>{var{x:t,y:n,width:r,height:i,children:o}=e,l=C.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return C.createElement(RD.Provider,{value:l},o)},ID=()=>{var e=C.useContext(RD),t=s0();return e||t},Wz=C.createContext(null),Qz=()=>{var e=C.useContext(Wz),t=we(PT);return e||t},Zz=e=>{var{value:t,formatter:n}=e,r=nn(e.children)?t:e.children;return typeof n=="function"?n(r):r},vb=e=>e!=null&&typeof e=="function",Jz=(e,t)=>{var n=tn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},e7=(e,t,n,r,i)=>{var{offset:o,className:l}=e,{cx:u,cy:d,innerRadius:h,outerRadius:p,startAngle:m,endAngle:y,clockWise:x}=i,S=(h+p)/2,A=Jz(m,y),P=A>=0?1:-1,E,O;switch(t){case"insideStart":E=m+P*o,O=x;break;case"insideEnd":E=y-P*o,O=!x;break;case"end":E=y+P*o,O=x;break;default:throw new Error("Unsupported position ".concat(t))}O=A<=0?O:!O;var _=Ut(u,d,S,E),N=Ut(u,d,S,E+(O?1:-1)*359),j="M".concat(_.x,",").concat(_.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(O?0:1,`,
    `).concat(N.x,",").concat(N.y),D=nn(e.id)?Bc("recharts-radial-line-"):e.id;return C.createElement("text",Ia({},r,{dominantBaseline:"central",className:nt("recharts-radial-bar-label",l)}),C.createElement("defs",null,C.createElement("path",{id:D,d:j})),C.createElement("textPath",{xlinkHref:"#".concat(D)},n))},t7=(e,t,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:l,startAngle:u,endAngle:d}=e,h=(u+d)/2;if(n==="outside"){var{x:p,y:m}=Ut(r,i,l+t,h);return{x:p,y:m,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(o+l)/2,{x,y:S}=Ut(r,i,y,h);return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},LD=e=>"cx"in e&&Te(e.cx),n7=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,o;n!=null&&!LD(n)&&(o=n);var{x:l,y:u,width:d,height:h}=t,p=h>=0?1:-1,m=p*r,y=p>0?"end":"start",x=p>0?"start":"end",S=d>=0?1:-1,A=S*r,P=S>0?"end":"start",E=S>0?"start":"end";if(i==="top"){var O={x:l+d/2,y:u-p*r,textAnchor:"middle",verticalAnchor:y};return Nt(Nt({},O),o?{height:Math.max(u-o.y,0),width:d}:{})}if(i==="bottom"){var _={x:l+d/2,y:u+h+m,textAnchor:"middle",verticalAnchor:x};return Nt(Nt({},_),o?{height:Math.max(o.y+o.height-(u+h),0),width:d}:{})}if(i==="left"){var N={x:l-A,y:u+h/2,textAnchor:P,verticalAnchor:"middle"};return Nt(Nt({},N),o?{width:Math.max(N.x-o.x,0),height:h}:{})}if(i==="right"){var j={x:l+d+A,y:u+h/2,textAnchor:E,verticalAnchor:"middle"};return Nt(Nt({},j),o?{width:Math.max(o.x+o.width-j.x,0),height:h}:{})}var D=o?{width:d,height:h}:{};return i==="insideLeft"?Nt({x:l+A,y:u+h/2,textAnchor:E,verticalAnchor:"middle"},D):i==="insideRight"?Nt({x:l+d-A,y:u+h/2,textAnchor:P,verticalAnchor:"middle"},D):i==="insideTop"?Nt({x:l+d/2,y:u+m,textAnchor:"middle",verticalAnchor:x},D):i==="insideBottom"?Nt({x:l+d/2,y:u+h-m,textAnchor:"middle",verticalAnchor:y},D):i==="insideTopLeft"?Nt({x:l+A,y:u+m,textAnchor:E,verticalAnchor:x},D):i==="insideTopRight"?Nt({x:l+d-A,y:u+m,textAnchor:P,verticalAnchor:x},D):i==="insideBottomLeft"?Nt({x:l+A,y:u+h-m,textAnchor:E,verticalAnchor:y},D):i==="insideBottomRight"?Nt({x:l+d-A,y:u+h-m,textAnchor:P,verticalAnchor:y},D):i&&typeof i=="object"&&(Te(i.x)||Cs(i.x))&&(Te(i.y)||Cs(i.y))?Nt({x:l+En(i.x,d),y:u+En(i.y,h),textAnchor:"end",verticalAnchor:"end"},D):Nt({x:l+d/2,y:u+h/2,textAnchor:"middle",verticalAnchor:"middle"},D)},r7={offset:5};function Mi(e){var t=jr(e,r7),{viewBox:n,position:r,value:i,children:o,content:l,className:u="",textBreakAll:d,labelRef:h}=t,p=Qz(),m=ID(),y=r==="center"?m:p??m,x=n||y;if(!x||nn(i)&&nn(o)&&!C.isValidElement(l)&&typeof l!="function")return null;var S=Nt(Nt({},t),{},{viewBox:x});if(C.isValidElement(l)){var{labelRef:A}=S,P=qz(S,Hz);return C.cloneElement(l,P)}var E;if(typeof l=="function"){if(E=C.createElement(l,S),C.isValidElement(E))return E}else E=Zz(t);var O=LD(x),_=Bt(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return e7(t,r,E,_,x);var N=O?t7(x,t.offset,t.position):n7(t,x);return C.createElement(Ah,Ia({ref:h,className:nt("recharts-label",u)},_,N,{breakAll:d}),E)}Mi.displayName="Label";var a7=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?C.createElement(Mi,Ia({key:"label-implicit"},r)):oa(e)?C.createElement(Mi,Ia({key:"label-implicit",value:e},r)):C.isValidElement(e)?e.type===Mi?C.cloneElement(e,Nt({key:"label-implicit"},r)):C.createElement(Mi,Ia({key:"label-implicit",content:e},r)):vb(e)?C.createElement(Mi,Ia({key:"label-implicit",content:e},r)):e&&typeof e=="object"?C.createElement(Mi,Ia({},e,{key:"label-implicit"},r)):null};function i7(e){var{label:t}=e,n=ID();return a7(t,n)||null}var uy={},fy={},YE;function s7(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(fy)),fy}var dy={},FE;function o7(){return FE||(FE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(dy)),dy}var KE;function l7(){return KE||(KE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s7(),n=o7(),r=Wv();function i(o){if(r.isArrayLike(o))return t.last(n.toArray(o))}e.last=i})(uy)),uy}var hy,VE;function c7(){return VE||(VE=1,hy=l7().last),hy}var u7=c7();const f7=qr(u7);var d7=["valueAccessor"],h7=["dataKey","clockWise","id","textBreakAll"];function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kd.apply(null,arguments)}function XE(e,t){if(e==null)return{};var n,r,i=p7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var m7=e=>Array.isArray(e.value)?f7(e.value):e.value,$D=C.createContext(void 0),g7=$D.Provider,BD=C.createContext(void 0),y7=BD.Provider;function v7(){return C.useContext($D)}function b7(){return C.useContext(BD)}function Jf(e){var{valueAccessor:t=m7}=e,n=XE(e,d7),{dataKey:r,clockWise:i,id:o,textBreakAll:l}=n,u=XE(n,h7),d=v7(),h=b7(),p=d||h;return!p||!p.length?null:C.createElement(Fn,{className:"recharts-label-list"},p.map((m,y)=>{var x,S=nn(r)?t(m,y):mt(m&&m.payload,r),A=nn(o)?{}:{id:"".concat(o,"-").concat(y)};return C.createElement(Mi,kd({},Bt(m,!0),u,A,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(y),index:y}))}))}Jf.displayName="LabelList";function UD(e){var{label:t}=e;return t?t===!0?C.createElement(Jf,{key:"labelList-implicit"}):C.isValidElement(t)||vb(t)?C.createElement(Jf,{key:"labelList-implicit",content:t}):typeof t=="object"?C.createElement(Jf,kd({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var zD=e=>e.graphicalItems.polarItems,x7=Q([vt,su],F0),bb=Q([zD,Mt,x7],V0),S7=Q([bb],X0),xb=Q([S7,k0],W0),A7=Q([xb,Mt,bb],Z0),C7=Q([xb,Mt,bb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var o,l=mt(r,(o=t.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:mt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),WE=()=>{},P7=Q([Mt,qT,WE,C7,WE,We,vt],eb),GD=Q([Mt,We,xb,A7,iu,vt,P7],tb),E7=Q([GD,Mt,il],ab);Q([Mt,GD,E7,vt],sb);var w7={radiusAxis:{},angleAxis:{}},HD=ur({name:"polarAxis",initialState:w7,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:uK,removeRadiusAxis:fK,addAngleAxis:dK,removeAngleAxis:hK}=HD.actions,O7=HD.reducer;function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(n),!0).forEach(function(r){_7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _7(e,t,n){return(t=T7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T7(e){var t=D7(e,"string");return typeof t=="symbol"?t:t+""}function D7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j7=(e,t)=>t,Sb=Q([zD,j7],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),N7=[],Ab=(e,t,n)=>n?.length===0?N7:n,qD=Q([k0,Sb,Ab],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(o=>ZE(ZE({},t.presentationProps),o.props))),i!=null)return i}}),M7=Q([qD,Sb,Ab],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var o,l=mt(r,t.nameKey,t.name),u;return n!=null&&(o=n[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:Jd(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),k7=Q([qD,Sb,Ab,Kt],(e,t,n,r)=>{if(!(t==null||e==null))return MG({offset:r,pieSettings:t,displayedData:e,cells:n})}),py={},JE;function R7(){return JE||(JE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(py)),py}var my,ew;function I7(){return ew||(ew=1,my=R7().isPlainObject),my}var L7=I7();const $7=qr(L7);function tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tw(Object(n),!0).forEach(function(r){B7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B7(e,t,n){return(t=U7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U7(e){var t=z7(e,"string");return typeof t=="symbol"?t:t+""}function z7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rd(){return Rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rd.apply(null,arguments)}var rw=(e,t,n,r,i)=>{var o=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-o/2,",").concat(t+i),l+="L ".concat(e+n-o/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},G7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},H7=e=>{var t=jr(e,G7),{x:n,y:r,upperWidth:i,lowerWidth:o,height:l,className:u}=t,{animationEasing:d,animationDuration:h,animationBegin:p,isUpdateAnimationActive:m}=t,y=C.useRef(),[x,S]=C.useState(-1),A=C.useRef(i),P=C.useRef(o),E=C.useRef(l),O=C.useRef(n),_=C.useRef(r),N=sh(e,"trapezoid-");if(C.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var se=y.current.getTotalLength();se&&S(se)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||l!==+l||i===0&&o===0||l===0)return null;var j=nt("recharts-trapezoid",u);if(!m)return C.createElement("g",null,C.createElement("path",Rd({},Bt(t,!0),{className:j,d:rw(n,r,i,o,l)})));var D=A.current,R=P.current,k=E.current,U=O.current,Z=_.current,q="0px ".concat(x===-1?1:x,"px"),J="".concat(x,"px 0px"),ce=p_(["strokeDasharray"],h,d);return C.createElement(ih,{animationId:N,key:N,canBegin:x>0,duration:h,easing:d,isActive:m,begin:p},se=>{var te=pn(D,i,se),$=pn(R,o,se),ee=pn(k,l,se),pe=pn(U,n,se),he=pn(Z,r,se);y.current&&(A.current=te,P.current=$,E.current=ee,O.current=pe,_.current=he);var I=se>0?{transition:ce,strokeDasharray:J}:{strokeDasharray:q};return C.createElement("path",Rd({},Bt(t,!0),{className:j,d:rw(pe,he,te,$,ee),ref:y,style:nw(nw({},I),t.style)}))})},q7=["option","shapeType","propTransformer","activeClassName","isActive"];function Y7(e,t){if(e==null)return{};var n,r,i=F7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function F7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Id(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(n),!0).forEach(function(r){K7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K7(e,t,n){return(t=V7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V7(e){var t=X7(e,"string");return typeof t=="symbol"?t:t+""}function X7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W7(e,t){return Id(Id({},t),e)}function Q7(e,t){return e==="symbols"}function iw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return C.createElement(v_,n);case"trapezoid":return C.createElement(H7,n);case"sector":return C.createElement(S_,n);case"symbols":if(Q7(t))return C.createElement(Kv,n);break;default:return null}}function Z7(e){return C.isValidElement(e)?e.props:e}function YD(e){var{option:t,shapeType:n,propTransformer:r=W7,activeClassName:i="recharts-active-shape",isActive:o}=e,l=Y7(e,q7),u;if(C.isValidElement(t))u=C.cloneElement(t,Id(Id({},l),Z7(t)));else if(typeof t=="function")u=t(l);else if($7(t)&&typeof t!="boolean"){var d=r(t,l);u=C.createElement(iw,{shapeType:n,elementProps:d})}else{var h=l;u=C.createElement(iw,{shapeType:n,elementProps:h})}return o?C.createElement(Fn,{className:i},u):u}var Cb=(e,t)=>{var n=At();return(r,i)=>o=>{e?.(r,i,o),n(sD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Pb=e=>{var t=At();return(n,r)=>i=>{e?.(n,r,i),t(k6())}},Eb=(e,t)=>{var n=At();return(r,i)=>o=>{e?.(r,i,o),n(R6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function FD(e){var{fn:t,args:n}=e,r=At(),i=Dr();return C.useEffect(()=>{if(!i){var o=t(n);return r(j6(o)),()=>{r(N6(o))}}},[t,n,r,i]),null}var KD=()=>{};function J7(e){var{legendPayload:t}=e,n=At(),r=Dr();return C.useEffect(()=>r?KD:(n(u_(t)),()=>{n(f_(t))}),[n,r,t]),null}function eG(e){var{legendPayload:t}=e,n=At(),r=we(We);return C.useEffect(()=>r!=="centric"&&r!=="radial"?KD:(n(u_(t)),()=>{n(f_(t))}),[n,r,t]),null}var gy,tG=()=>{var[e]=C.useState(()=>Bc("uid-"));return e},nG=(gy=JN.useId)!==null&&gy!==void 0?gy:tG;function rG(e,t){var n=nG();return t||(e?"".concat(e,"-").concat(n):n)}var aG=C.createContext(void 0),VD=e=>{var{id:t,type:n,children:r}=e,i=rG("recharts-".concat(n),t);return C.createElement(aG.Provider,{value:i},r(i))},iG={cartesianItems:[],polarItems:[]},XD=ur({name:"graphicalItems",initialState:iG,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Ba(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Ba(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Ba(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:sG,replaceCartesianGraphicalItem:oG,removeCartesianGraphicalItem:lG,addPolarGraphicalItem:cG,removePolarGraphicalItem:uG}=XD.actions,fG=XD.reducer;function dG(e){var t=At(),n=C.useRef(null);return C.useEffect(()=>{n.current===null?t(sG(e)):n.current!==e&&t(oG({prev:n.current,next:e})),n.current=e},[t,e]),C.useEffect(()=>()=>{n.current&&(t(lG(n.current)),n.current=null)},[t]),null}function hG(e){var t=At();return C.useEffect(()=>(t(cG(e)),()=>{t(uG(e))}),[t,e]),null}var pG=["onMouseEnter","onClick","onMouseLeave"],mG=["id"],gG=["id"];function wb(e,t){if(e==null)return{};var n,r,i=yG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(n),!0).forEach(function(r){vG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vG(e,t,n){return(t=bG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bG(e){var t=xG(e,"string");return typeof t=="symbol"?t:t+""}function xG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bi.apply(null,arguments)}function SG(e){var t=C.useMemo(()=>Gv(e.children,Wo),[e.children]),n=we(r=>M7(r,e.id,t));return n==null?null:C.createElement(eG,{legendPayload:n})}function AG(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:o,fill:l,name:u,hide:d,tooltipType:h}=e;return{dataDefinedOnItem:r.map(p=>p.tooltipPayload),positions:r.map(p=>p.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:l,dataKey:t,nameKey:n,name:Jd(u,t),hide:d,type:h,color:l,unit:""}}}var CG=(e,t)=>e>t?"start":e<t?"end":"middle",PG=(e,t,n)=>En(typeof t=="function"?t(e):t,n,n*.8),EG=(e,t,n)=>{var{top:r,left:i,width:o,height:l}=t,u=t_(o,l),d=i+En(e.cx,o,o/2),h=r+En(e.cy,l,l/2),p=En(e.innerRadius,u,0),m=PG(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(o*o+l*l)/2;return{cx:d,cy:h,innerRadius:p,outerRadius:m,maxRadius:y}},wG=(e,t)=>{var n=tn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function OG(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var _G=(e,t)=>{if(C.isValidElement(e))return C.cloneElement(e,t);if(typeof e=="function")return e(t);var n=nt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return C.createElement(h_,Bi({},t,{type:"linear",className:n}))},TG=(e,t,n)=>{if(C.isValidElement(e))return C.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),C.isValidElement(r)))return r;var i=nt("recharts-pie-label-text",OG(e));return C.createElement(Ah,Bi({},t,{alignmentBaseline:"middle",className:i}),r)};function DG(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:o,dataKey:l}=n;if(!r||!i||!t)return null;var u=Bs(n),d=Bt(i,!1),h=Bt(o,!1),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((y,x)=>{var S=(y.startAngle+y.endAngle)/2,A=Ut(y.cx,y.cy,y.outerRadius+p,S),P=pt(pt(pt(pt({},u),y),{},{stroke:"none"},d),{},{index:x,textAnchor:CG(A.x,y.cx)},A),E=pt(pt(pt(pt({},u),y),{},{fill:"none",stroke:y.fill},h),{},{index:x,points:[Ut(y.cx,y.cy,y.outerRadius,S),A],key:"line"});return C.createElement(Fn,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(x)},o&&_G(o,E),TG(i,P,mt(y,l)))});return C.createElement(Fn,{className:"recharts-pie-labels"},m)}function jG(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?C.createElement(UD,{label:n.label}):C.createElement(DG,{sectors:t,props:n,showLabels:r})}function NG(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,o=we(Rs),{onMouseEnter:l,onClick:u,onMouseLeave:d}=i,h=wb(i,pG),p=Cb(l,i.dataKey),m=Pb(d),y=Eb(u,i.dataKey);return t==null||t.length===0?null:C.createElement(C.Fragment,null,t.map((x,S)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===o,P=o?r:null,E=A?n:P,O=pt(pt({},x),{},{stroke:x.stroke,tabIndex:-1,[s_]:S,[o_]:i.dataKey});return C.createElement(Fn,Bi({tabIndex:-1,className:"recharts-pie-sector"},Qc(h,x,S),{onMouseEnter:p(x,S),onMouseLeave:m(x,S),onClick:y(x,S),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(S)}),C.createElement(YD,Bi({option:E,isActive:A,shapeType:"sector"},O)))}))}function MG(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:o}=e,{cornerRadius:l,startAngle:u,endAngle:d,dataKey:h,nameKey:p,tooltipType:m}=n,y=Math.abs(n.minAngle),x=wG(u,d),S=Math.abs(x),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,P=r.filter(D=>mt(D,h,0)!==0).length,E=(S>=360?P:P-1)*A,O=S-P*y-E,_=r.reduce((D,R)=>{var k=mt(R,h,0);return D+(Te(k)?k:0)},0),N;if(_>0){var j;N=r.map((D,R)=>{var k=mt(D,h,0),U=mt(D,p,R),Z=EG(n,o,D),q=(Te(k)?k:0)/_,J,ce=pt(pt({},D),i&&i[R]&&i[R].props);R?J=j.endAngle+tn(x)*A*(k!==0?1:0):J=u;var se=J+tn(x)*((k!==0?y:0)+q*O),te=(J+se)/2,$=(Z.innerRadius+Z.outerRadius)/2,ee=[{name:U,value:k,payload:ce,dataKey:h,type:m}],pe=Ut(Z.cx,Z.cy,$,te);return j=pt(pt(pt(pt({},n.presentationProps),{},{percent:q,cornerRadius:l,name:U,tooltipPayload:ee,midAngle:te,middleRadius:$,tooltipPosition:pe},ce),Z),{},{value:mt(D,h),startAngle:J,endAngle:se,payload:ce,paddingAngle:tn(x)*A}),j})}return N}function kG(e){var{showLabels:t,sectors:n,children:r}=e,i=C.useMemo(()=>!t||!n?[]:n.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[n,t]);return C.createElement(y7,{value:t?i:void 0},r)}function RG(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:u,activeShape:d,inactiveShape:h,onAnimationStart:p,onAnimationEnd:m}=t,y=sh(t,"recharts-pie-"),x=n.current,[S,A]=C.useState(!1),P=C.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),E=C.useCallback(()=>{typeof p=="function"&&p(),A(!0)},[p]);return C.createElement(kG,{showLabels:!S,sectors:r},C.createElement(ih,{animationId:y,begin:o,duration:l,isActive:i,easing:u,onAnimationStart:E,onAnimationEnd:P,key:y},O=>{var _=[],N=r&&r[0],j=N?.startAngle;return r?.forEach((D,R)=>{var k=x&&x[R],U=R>0?js(D,"paddingAngle",0):0;if(k){var Z=pn(k.endAngle-k.startAngle,D.endAngle-D.startAngle,O),q=pt(pt({},D),{},{startAngle:j+U,endAngle:j+Z+U});_.push(q),j=q.endAngle}else{var{endAngle:J,startAngle:ce}=D,se=pn(0,J-ce,O),te=pt(pt({},D),{},{startAngle:j+U,endAngle:j+se+U});_.push(te),j=te.endAngle}}),n.current=_,C.createElement(Fn,null,C.createElement(NG,{sectors:_,activeShape:d,inactiveShape:h,allOtherPieProps:t}))}),C.createElement(jG,{showLabels:!S,sectors:r,props:t}),t.children)}var IG={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Jo.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function LG(e){var{id:t}=e,n=wb(e,mG),{hide:r,className:i,rootTabIndex:o}=e,l=C.useMemo(()=>Gv(e.children,Wo),[e.children]),u=we(p=>k7(p,t,l)),d=C.useRef(null),h=nt("recharts-pie",i);return r||u==null?(d.current=null,C.createElement(Fn,{tabIndex:o,className:h})):C.createElement(C.Fragment,null,C.createElement(FD,{fn:AG,args:pt(pt({},e),{},{sectors:u})}),C.createElement(Fn,{tabIndex:o,className:h},C.createElement(RG,{props:pt(pt({},n),{},{sectors:u}),previousSectorsRef:d})))}function bv(e){var t=jr(e,IG),{id:n}=t,r=wb(t,gG),i=Bs(r);return C.createElement(VD,{id:n,type:"pie"},o=>C.createElement(C.Fragment,null,C.createElement(hG,{type:"pie",id:o,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),C.createElement(SG,Bi({},r,{id:o})),C.createElement(LG,Bi({},r,{id:o}))))}bv.displayName="Pie";function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ow(Object(n),!0).forEach(function(r){$G(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $G(e,t,n){return(t=BG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BG(e){var t=UG(e,"string");return typeof t=="symbol"?t:t+""}function UG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zG={xAxis:{},yAxis:{},zAxis:{}},WD=ur({name:"cartesianAxis",initialState:zG,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=lw(lw({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:GG,removeXAxis:HG,addYAxis:qG,removeYAxis:YG,addZAxis:pK,removeZAxis:mK,updateYAxisWidth:FG}=WD.actions,KG=WD.reducer,VG=Q([Kt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),XG=Q([VG,Fa,Ka],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),QD=()=>we(XG),WG="Invariant failed";function QG(e,t){throw new Error(WG)}var ZG=["x","y"];function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xv.apply(null,arguments)}function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ec(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(r){JG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JG(e,t,n){return(t=e9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e9(e){var t=t9(e,"string");return typeof t=="symbol"?t:t+""}function t9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n9(e,t){if(e==null)return{};var n,r,i=r9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function r9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function a9(e,t){var{x:n,y:r}=e,i=n9(e,ZG),o="".concat(n),l=parseInt(o,10),u="".concat(r),d=parseInt(u,10),h="".concat(t.height||i.height),p=parseInt(h,10),m="".concat(t.width||i.width),y=parseInt(m,10);return Ec(Ec(Ec(Ec(Ec({},t),i),l?{x:l}:{}),d?{y:d}:{}),{},{height:p,width:y,name:t.name,radius:t.radius})}function Ob(e){return C.createElement(YD,xv({shapeType:"rectangle",propTransformer:a9,activeClassName:"recharts-active-bar"},e))}var i9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Te(t))return t;var o=Te(r)||nn(r);return o?t(r,i):(o||QG(),n)}},s9={},ZD=ur({name:"errorBars",initialState:s9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:gK,replaceErrorBar:yK,removeErrorBar:vK}=ZD.actions,o9=ZD.reducer,l9=["children"];function c9(e,t){if(e==null)return{};var n,r,i=u9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var f9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},d9=C.createContext(f9);function h9(e){var{children:t}=e,n=c9(e,l9);return C.createElement(d9.Provider,{value:n},t)}function JD(e,t){var n,r,i=we(h=>Yi(h,e)),o=we(h=>Fi(h,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:nr.allowDataOverflow,u=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:rr.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function p9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=QD(),{needClipX:o,needClipY:l,needClip:u}=JD(t,n);if(!u)return null;var{x:d,y:h,width:p,height:m}=i;return C.createElement("clipPath",{id:"clipPath-".concat(r)},C.createElement("rect",{x:o?d:d-p/2,y:l?h:h-m/2,width:o?p:p*2,height:l?m:m*2}))}var m9=["onMouseEnter","onMouseLeave","onClick"],g9=["value","background","tooltipPosition"],y9=["id"],v9=["onMouseEnter","onClick","onMouseLeave"];function Ui(){return Ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ui.apply(null,arguments)}function uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uw(Object(n),!0).forEach(function(r){b9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b9(e,t,n){return(t=x9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x9(e){var t=S9(e,"string");return typeof t=="symbol"?t:t+""}function S9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ld(e,t){if(e==null)return{};var n,r,i=A9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var C9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:Jd(n,t),payload:e}]};function P9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:o,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Jd(o,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function E9(e){var t=we(Rs),{data:n,dataKey:r,background:i,allOtherBarProps:o}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=o,h=Ld(o,m9),p=Cb(l,r),m=Pb(u),y=Eb(d,r);if(!i||n==null)return null;var x=Bt(i,!1);return C.createElement(C.Fragment,null,n.map((S,A)=>{var{value:P,background:E,tooltipPosition:O}=S,_=Ld(S,g9);if(!E)return null;var N=p(S,A),j=m(S,A),D=y(S,A),R=Nn(Nn(Nn(Nn(Nn({option:i,isActive:String(A)===t},_),{},{fill:"#eee"},E),x),Qc(h,S,A)),{},{onMouseEnter:N,onMouseLeave:j,onClick:D,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return C.createElement(Ob,Ui({key:"background-bar-".concat(A)},R))}))}function w9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(o=>{var l={x:o.x,y:o.y,width:o.width,height:o.height};return Nn(Nn({},l),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:l,fill:o.fill})});return C.createElement(g7,{value:t?i:void 0},n)}function O9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:o,dataKey:l}=e,u=we(Rs),d=we(bD),h=n&&String(o)===u&&(d==null||l===d),p=h?n:t;return C.createElement(Ob,Ui({},r,i,{isActive:h,option:p,index:o,dataKey:l}))}function _9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:o}=e;return C.createElement(Ob,Ui({},n,r,{isActive:!1,option:t,index:i,dataKey:o}))}function T9(e){var{data:t,props:n}=e,r=Bs(n),{id:i}=r,o=Ld(r,y9),{shape:l,dataKey:u,activeBar:d}=n,{onMouseEnter:h,onClick:p,onMouseLeave:m}=n,y=Ld(n,v9),x=Cb(h,u),S=Pb(m),A=Eb(p,u);return t?C.createElement(C.Fragment,null,t.map((P,E)=>C.createElement(Fn,Ui({className:"recharts-bar-rectangle"},Qc(y,P,E),{onMouseEnter:x(P,E),onMouseLeave:S(P,E),onClick:A(P,E),key:"rectangle-".concat(P?.x,"-").concat(P?.y,"-").concat(P?.value,"-").concat(E)}),d?C.createElement(O9,{shape:l,activeBar:d,baseProps:o,entry:P,index:E,dataKey:u}):C.createElement(_9,{shape:l,baseProps:o,entry:P,index:E,dataKey:u})))):null}function D9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:o,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:h,onAnimationStart:p}=t,m=n.current,y=sh(t,"recharts-bar-"),[x,S]=C.useState(!1),A=!x,P=C.useCallback(()=>{typeof h=="function"&&h(),S(!1)},[h]),E=C.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return C.createElement(w9,{showLabels:A,rects:r},C.createElement(ih,{animationId:y,begin:l,duration:u,isActive:o,easing:d,onAnimationEnd:P,onAnimationStart:E,key:y},O=>{var _=O===1?r:r?.map((N,j)=>{var D=m&&m[j];if(D)return Nn(Nn({},N),{},{x:pn(D.x,N.x,O),y:pn(D.y,N.y,O),width:pn(D.width,N.width,O),height:pn(D.height,N.height,O)});if(i==="horizontal"){var R=pn(0,N.height,O);return Nn(Nn({},N),{},{y:N.y+N.height-R,height:R})}var k=pn(0,N.width,O);return Nn(Nn({},N),{},{width:k})});return O>0&&(n.current=_??null),_==null?null:C.createElement(Fn,null,C.createElement(T9,{props:t,data:_}))}),C.createElement(UD,{label:t.label}),t.children)}function j9(e){var t=C.useRef(null);return C.createElement(D9,{previousRectanglesRef:t,props:e})}var ej=0,N9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:mt(e,t)}};class M9 extends C.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:l,needClip:u,background:d,id:h}=this.props;if(t||n==null)return null;var p=nt("recharts-bar",i),m=h;return C.createElement(Fn,{className:p,id:h},u&&C.createElement("defs",null,C.createElement(p9,{clipPathId:m,xAxisId:o,yAxisId:l})),C.createElement(Fn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},C.createElement(E9,{data:n,dataKey:r,background:d,allOtherBarProps:this.props}),C.createElement(j9,this.props)))}}var k9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Jo.isSsr,legendType:"rect",minPointSize:ej,xAxisId:0,yAxisId:0};function R9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:h,isAnimationActive:p}=e,{needClip:m}=JD(t,n),y=c0(),x=Dr(),S=Gv(e.children,Wo),A=we(O=>lH(O,t,n,x,e.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var P,E=A?.[0];return E==null||E.height==null||E.width==null?P=0:P=y==="vertical"?E.height/2:E.width/2,C.createElement(h9,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:N9,errorBarOffset:P},C.createElement(M9,Ui({},e,{layout:y,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:h,isAnimationActive:p})))}function I9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:h,stackedData:p,displayedData:m,offset:y,cells:x,parentViewBox:S}=e,A=t==="horizontal"?u:l,P=p?A.scale.domain():null,E=ZL({numericAxis:A});return m.map((O,_)=>{var N,j,D,R,k,U;p?N=FL(p[_],P):(N=mt(O,n),Array.isArray(N)||(N=[E,N]));var Z=i9(r,ej)(N[1],_);if(t==="horizontal"){var q,[J,ce]=[u.scale(N[0]),u.scale(N[1])];j=QC({axis:l,ticks:d,bandSize:o,offset:i.offset,entry:O,index:_}),D=(q=ce??J)!==null&&q!==void 0?q:void 0,R=i.size;var se=J-ce;if(k=or(se)?0:se,U={x:j,y:y.top,width:R,height:y.height},Math.abs(Z)>0&&Math.abs(k)<Math.abs(Z)){var te=tn(k||Z)*(Math.abs(Z)-Math.abs(k));D-=te,k+=te}}else{var[$,ee]=[l.scale(N[0]),l.scale(N[1])];if(j=$,D=QC({axis:u,ticks:h,bandSize:o,offset:i.offset,entry:O,index:_}),R=ee-$,k=i.size,U={x:y.left,y:D,width:y.width,height:k},Math.abs(Z)>0&&Math.abs(R)<Math.abs(Z)){var pe=tn(R||Z)*(Math.abs(Z)-Math.abs(R));R+=pe}}if(j==null||D==null||R==null||k==null)return null;var he=Nn(Nn({},O),{},{x:j,y:D,width:R,height:k,value:p?N:N[1],payload:O,background:U,tooltipPosition:{x:j+R/2,y:D+k/2},parentViewBox:S},x&&x[_]&&x[_].props);return he}).filter(Boolean)}function tj(e){var t=jr(e,k9),n=Dr();return C.createElement(VD,{id:t.id,type:"bar"},r=>C.createElement(C.Fragment,null,C.createElement(J7,{legendPayload:C9(t)}),C.createElement(FD,{fn:P9,args:t}),C.createElement(dG,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:QL(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),C.createElement(R9,Ui({},t,{id:r}))))}tj.displayName="Bar";function fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(n),!0).forEach(function(r){L9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L9(e,t,n){return(t=$9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $9(e){var t=B9(e,"string");return typeof t=="symbol"?t:t+""}function B9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U9=(e,t)=>t,z9=(e,t,n)=>n,G9=(e,t,n,r)=>r,H9=(e,t,n,r,i)=>i,du=Q([K0,H9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),q9=Q([du],e=>e?.maxBarSize),Y9=(e,t,n,r,i,o)=>o,dw=(e,t,n)=>{var r=n??e;if(!nn(r))return En(r,t,0)},F9=Q([We,K0,U9,z9,G9],(e,t,n,r,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),K9=(e,t,n,r)=>{var i=We(e);return i==="horizontal"?hv(e,"yAxis",n,r):hv(e,"xAxis",t,r)},V9=(e,t,n)=>{var r=We(e);return r==="horizontal"?pE(e,"xAxis",t):pE(e,"yAxis",n)},X9=(e,t,n)=>{var r={},i=e.filter(gh),o=e.filter(h=>h.stackId==null),l=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),r),u=Object.entries(l).map(h=>{var[p,m]=h,y=m.map(S=>S.dataKey),x=dw(t,n,m[0].barSize);return{stackId:p,dataKeys:y,barSize:x}}),d=o.map(h=>{var p=[h.dataKey].filter(y=>y!=null),m=dw(t,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:m}});return[...u,...d]},W9=Q([F9,N8,V9],X9),Q9=(e,t,n,r,i)=>{var o,l,u=du(e,t,n,r,i);if(u!=null){var d=We(e),h=yT(e),{maxBarSize:p}=u,m=nn(p)?h:p,y,x;return d==="horizontal"?(y=Xo(e,"xAxis",t,r),x=Vo(e,"xAxis",t,r)):(y=Xo(e,"yAxis",n,r),x=Vo(e,"yAxis",n,r)),(o=(l=a0(y,x,!0))!==null&&l!==void 0?l:m)!==null&&o!==void 0?o:0}},nj=(e,t,n,r)=>{var i=We(e),o,l;return i==="horizontal"?(o=Xo(e,"xAxis",t,r),l=Vo(e,"xAxis",t,r)):(o=Xo(e,"yAxis",n,r),l=Vo(e,"yAxis",n,r)),a0(o,l)};function Z9(e,t,n,r,i){var o=r.length;if(!(o<1)){var l=En(e,n,0,!0),u,d=[];if(cr(r[0].barSize)){var h=!1,p=n/o,m=r.reduce((E,O)=>E+(O.barSize||0),0);m+=(o-1)*l,m>=n&&(m-=(o-1)*l,l=0),m>=n&&p>0&&(h=!0,p*=.9,m=o*p);var y=(n-m)/2>>0,x={offset:y-l,size:0};u=r.reduce((E,O)=>{var _,N={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:x.offset+x.size+l,size:h?p:(_=O.barSize)!==null&&_!==void 0?_:0}},j=[...E,N];return x=j[j.length-1].position,j},d)}else{var S=En(t,n,0,!0);n-2*S-(o-1)*l<=0&&(l=0);var A=(n-2*S-(o-1)*l)/o;A>1&&(A>>=0);var P=cr(i)?Math.min(A,i):A;u=r.reduce((E,O,_)=>[...E,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:S+(A+l)*_+(A-P)/2,size:P}}],d)}return u}}var J9=(e,t,n,r,i,o,l)=>{var u=nn(l)?t:l,d=Z9(n,r,i!==o?i:o,e,u);return i!==o&&d!=null&&(d=d.map(h=>qf(qf({},h),{},{position:qf(qf({},h.position),{},{offset:h.position.offset-i/2})}))),d},eH=Q([W9,yT,j8,vT,Q9,nj,q9],J9),tH=(e,t,n,r)=>Xo(e,"xAxis",t,r),nH=(e,t,n,r)=>Xo(e,"yAxis",n,r),rH=(e,t,n,r)=>Vo(e,"xAxis",t,r),aH=(e,t,n,r)=>Vo(e,"yAxis",n,r),iH=Q([eH,du],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),sH=(e,t)=>{var n=q0(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:o}=i;if(o)return o.find(l=>l.key===n)}}}},oH=Q([K9,du],sH),lH=Q([Kt,i0,tH,nH,rH,aH,iH,We,R0,nj,oH,du,Y9],(e,t,n,r,i,o,l,u,d,h,p,m,y)=>{var{chartData:x,dataStartIndex:S,dataEndIndex:A}=d;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||o==null||h==null)){var{data:P}=m,E;if(P!=null&&P.length>0?E=P:E=x?.slice(S,A+1),E!=null)return I9({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:p,displayedData:E,offset:e,cells:y})}}),rj=e=>{var{chartData:t}=e,n=At(),r=Dr();return C.useEffect(()=>r?()=>{}:(n(PE(t)),()=>{n(PE(void 0))}),[t,n,r]),null},hw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},aj=ur({name:"brush",initialState:hw,reducers:{setBrushSettings(e,t){return t.payload==null?hw:t.payload}}}),{setBrushSettings:bK}=aj.actions,cH=aj.reducer;function uH(e,t,n){return(t=fH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fH(e){var t=dH(e,"string");return typeof t=="symbol"?t:t+""}function dH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _b{static create(t){return new _b(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}uH(_b,"EPS",1e-4);function hH(e){return(e%180+180)%180}var pH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=hH(i),l=o*Math.PI/180,u=Math.atan(r/n),d=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(d)},mH={dots:[],areas:[],lines:[]},ij=ur({name:"referenceElements",initialState:mH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ba(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ba(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ba(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:xK,removeDot:SK,addArea:AK,removeArea:CK,addLine:PK,removeLine:EK}=ij.actions,gH=ij.reducer,yH=C.createContext(void 0),vH=e=>{var{children:t}=e,[n]=C.useState("".concat(Bc("recharts"),"-clip")),r=QD();if(r==null)return null;var{x:i,y:o,width:l,height:u}=r;return C.createElement(yH.Provider,{value:n},C.createElement("defs",null,C.createElement("clipPath",{id:n},C.createElement("rect",{x:i,y:o,height:u,width:l}))),t)};function yy(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function sj(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function bH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return pH(r,n)}function xH(e,t,n){var r=n==="width",{x:i,y:o,width:l,height:u}=e;return t===1?{start:r?i:o,end:r?i+l:o+u}:{start:r?i+l:o+u,end:r?i:o}}function $d(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function SH(e,t){return sj(e,t+1)}function AH(e,t,n,r,i){for(var o=(r||[]).slice(),{start:l,end:u}=t,d=0,h=1,p=l,m=function(){var S=r?.[d];if(S===void 0)return{v:sj(r,h)};var A=d,P,E=()=>(P===void 0&&(P=n(S,A)),P),O=S.coordinate,_=d===0||$d(e,O,E,p,u);_||(d=0,p=l,h+=1),_&&(p=O+e*(E()/2+i),d+=h)},y;h<=o.length;)if(y=m(),y)return y.v;return[]}function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){CH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CH(e,t,n){return(t=PH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wH(e,t,n,r,i){for(var o=(r||[]).slice(),l=o.length,{start:u}=t,{end:d}=t,h=function(y){var x=o[y],S,A=()=>(S===void 0&&(S=n(x,y)),S);if(y===l-1){var P=e*(x.coordinate+e*A()/2-d);o[y]=x=An(An({},x),{},{tickCoord:P>0?x.coordinate-P*e:x.coordinate})}else o[y]=x=An(An({},x),{},{tickCoord:x.coordinate});var E=$d(e,x.tickCoord,A,u,d);E&&(d=x.tickCoord-e*(A()/2+i),o[y]=An(An({},x),{},{isShow:!0}))},p=l-1;p>=0;p--)h(p);return o}function OH(e,t,n,r,i,o){var l=(r||[]).slice(),u=l.length,{start:d,end:h}=t;if(o){var p=r[u-1],m=n(p,u-1),y=e*(p.coordinate+e*m/2-h);l[u-1]=p=An(An({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate});var x=$d(e,p.tickCoord,()=>m,d,h);x&&(h=p.tickCoord-e*(m/2+i),l[u-1]=An(An({},p),{},{isShow:!0}))}for(var S=o?u-1:u,A=function(O){var _=l[O],N,j=()=>(N===void 0&&(N=n(_,O)),N);if(O===0){var D=e*(_.coordinate-e*j()/2-d);l[O]=_=An(An({},_),{},{tickCoord:D<0?_.coordinate-D*e:_.coordinate})}else l[O]=_=An(An({},_),{},{tickCoord:_.coordinate});var R=$d(e,_.tickCoord,j,d,h);R&&(d=_.tickCoord+e*(j()/2+i),l[O]=An(An({},_),{},{isShow:!0}))},P=0;P<S;P++)A(P);return l}function Tb(e,t,n){var{tick:r,ticks:i,viewBox:o,minTickGap:l,orientation:u,interval:d,tickFormatter:h,unit:p,angle:m}=e;if(!i||!i.length||!r)return[];if(Te(d)||Jo.isSsr){var y;return(y=SH(i,Te(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],S=u==="top"||u==="bottom"?"width":"height",A=p&&S==="width"?kc(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},P=(_,N)=>{var j=typeof h=="function"?h(_.value,N):_.value;return S==="width"?bH(kc(j,{fontSize:t,letterSpacing:n}),A,m):kc(j,{fontSize:t,letterSpacing:n})[S]},E=i.length>=2?tn(i[1].coordinate-i[0].coordinate):1,O=xH(o,E,S);return d==="equidistantPreserveStart"?AH(E,O,P,i,l):(d==="preserveStart"||d==="preserveStartEnd"?x=OH(E,O,P,i,l,d==="preserveStartEnd"):x=wH(E,O,P,i,l),x.filter(_=>_.isShow))}var _H=["viewBox"],TH=["viewBox"];function Ro(){return Ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ro.apply(null,arguments)}function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){Db(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gw(e,t){if(e==null)return{};var n,r,i=DH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function DH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Db(e,t,n){return(t=jH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jH(e){var t=NH(e,"string");return typeof t=="symbol"?t:t+""}function NH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ki extends C.Component{constructor(t){super(t),this.tickRefs=C.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=gw(t,_H),o=this.props,{viewBox:l}=o,u=gw(o,TH);return!yy(r,l)||!yy(i,u)||!yy(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:o,orientation:l,tickSize:u,mirror:d,tickMargin:h}=this.props,p,m,y,x,S,A,P=d?-1:1,E=t.tickSize||u,O=Te(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":p=m=t.coordinate,x=r+ +!d*o,y=x-P*E,A=y-P*h,S=O;break;case"left":y=x=t.coordinate,m=n+ +!d*i,p=m-P*E,S=p-P*h,A=O;break;case"right":y=x=t.coordinate,m=n+ +d*i,p=m+P*E,S=p+P*h,A=O;break;default:p=m=t.coordinate,x=r+ +d*o,y=x+P*E,A=y+P*h,S=O;break}return{line:{x1:p,y1:y,x2:m,y2:x},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:o,mirror:l,axisLine:u}=this.props,d=Yt(Yt(Yt({},Bt(this.props,!1)),Bt(u,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var h=+(o==="top"&&!l||o==="bottom"&&l);d=Yt(Yt({},d),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var p=+(o==="left"&&!l||o==="right"&&l);d=Yt(Yt({},d),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+i})}return C.createElement("line",Ro({},d,{className:nt("recharts-cartesian-axis-line",js(u,"className"))}))}static renderTickItem(t,n,r){var i,o=nt(n.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(t))i=C.cloneElement(t,Yt(Yt({},n),{},{className:o}));else if(typeof t=="function")i=t(Yt(Yt({},n),{},{className:o}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=nt(l,t.className)),i=C.createElement(Ah,Ro({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:l,tickFormatter:u,unit:d,padding:h,tickTextProps:p}=this.props,m=Tb(Yt(Yt({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),S=Bs(this.props),A=Bt(l,!1),P=Yt(Yt({},S),{},{fill:"none"},Bt(i,!1)),E=m.map((O,_)=>{var{line:N,tick:j}=this.getTickLineCoord(O),D=Yt(Yt(Yt(Yt({textAnchor:y,verticalAnchor:x},S),{},{stroke:"none",fill:o},A),j),{},{index:_,payload:O,visibleTicksCount:m.length,tickFormatter:u,padding:h},p);return C.createElement(Fn,Ro({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Qc(this.props,O,_)),i&&C.createElement("line",Ro({},P,N,{className:nt("recharts-cartesian-axis-tick-line",js(i,"className"))})),l&&Ki.renderTickItem(l,D,"".concat(typeof u=="function"?u(O.value,_):O.value).concat(d||"")))});return E.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},E):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:C.createElement(Fn,{className:nt("recharts-cartesian-axis",i),ref:u=>{if(u){var d=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var h=d[0];if(h){var p=window.getComputedStyle(h).fontSize,m=window.getComputedStyle(h).letterSpacing;(p!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(h).fontSize,letterSpacing:window.getComputedStyle(h).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),C.createElement(Xz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},C.createElement(i7,{label:this.props.label}),this.props.children))}}Db(Ki,"displayName","CartesianAxis");Db(Ki,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var MH=["x1","y1","x2","y2","key"],kH=["offset"],RH=["xAxisId","yAxisId"],IH=["xAxisId","yAxisId"];function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(r){LH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LH(e,t,n){return(t=$H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $H(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ws(){return ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ws.apply(null,arguments)}function Bd(e,t){if(e==null)return{};var n,r,i=UH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var zH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:l,ry:u}=e;return C.createElement("rect",{x:r,y:i,ry:u,width:o,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function oj(e,t){var n;if(C.isValidElement(e))n=C.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:o,y2:l,key:u}=t,d=Bd(t,MH),h=Bs(d),{offset:p}=h,m=Bd(h,kH);n=C.createElement("line",ws({},m,{x1:r,y1:i,x2:o,y2:l,fill:"none",key:u}))}return n}function GH(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:l}=e,u=Bd(e,RH),d=i.map((h,p)=>{var m=Pn(Pn({},u),{},{x1:t,y1:h,x2:t+n,y2:h,key:"line-".concat(p),index:p});return oj(r,m)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function HH(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:l}=e,u=Bd(e,IH),d=i.map((h,p)=>{var m=Pn(Pn({},u),{},{x1:h,y1:t,x2:h,y2:t+n,key:"line-".concat(p),index:p});return oj(r,m)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function qH(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:o,height:l,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var h=u.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==h[0]&&h.unshift(0);var p=h.map((m,y)=>{var x=!h[y+1],S=x?i+l-m:h[y+1]-m;if(S<=0)return null;var A=y%t.length;return C.createElement("rect",{key:"react-".concat(y),y:m,x:r,height:S,width:o,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function YH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:l,height:u,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var h=d.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==h[0]&&h.unshift(0);var p=h.map((m,y)=>{var x=!h[y+1],S=x?i+l-m:h[y+1]-m;if(S<=0)return null;var A=y%n.length;return C.createElement("rect",{key:"react-".concat(y),x:m,y:o,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var FH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:o}=e;return r_(Tb(Pn(Pn(Pn({},Ki.defaultProps),n),{},{ticks:a_(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,t)},KH=(e,t)=>{var{yAxis:n,width:r,height:i,offset:o}=e;return r_(Tb(Pn(Pn(Pn({},Ki.defaultProps),n),{},{ticks:a_(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,t)},VH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function lj(e){var t=o0(),n=l0(),r=l_(),i=Pn(Pn({},jr(e,VH)),{},{x:Te(e.x)?e.x:r.left,y:Te(e.y)?e.y:r.top,width:Te(e.width)?e.width:r.width,height:Te(e.height)?e.height:r.height}),{xAxisId:o,yAxisId:l,x:u,y:d,width:h,height:p,syncWithTicks:m,horizontalValues:y,verticalValues:x}=i,S=Dr(),A=we(U=>mE(U,"xAxis",o,S)),P=we(U=>mE(U,"yAxis",l,S));if(!Te(h)||h<=0||!Te(p)||p<=0||!Te(u)||u!==+u||!Te(d)||d!==+d)return null;var E=i.verticalCoordinatesGenerator||FH,O=i.horizontalCoordinatesGenerator||KH,{horizontalPoints:_,verticalPoints:N}=i;if((!_||!_.length)&&typeof O=="function"){var j=y&&y.length,D=O({yAxis:P?Pn(Pn({},P),{},{ticks:j?y:P.ticks}):void 0,width:t,height:n,offset:r},j?!0:m);Mc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(_=D)}if((!N||!N.length)&&typeof E=="function"){var R=x&&x.length,k=E({xAxis:A?Pn(Pn({},A),{},{ticks:R?x:A.ticks}):void 0,width:t,height:n,offset:r},R?!0:m);Mc(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(N=k)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(zH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),C.createElement(qH,ws({},i,{horizontalPoints:_})),C.createElement(YH,ws({},i,{verticalPoints:N})),C.createElement(GH,ws({},i,{offset:r,horizontalPoints:_,xAxis:A,yAxis:P})),C.createElement(HH,ws({},i,{offset:r,verticalPoints:N,xAxis:A,yAxis:P})))}lj.displayName="CartesianGrid";var XH=["children"],WH=["dangerouslySetInnerHTML","ticks"],QH=["id"];function cj(e,t,n){return(t=ZH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZH(e){var t=JH(e,"string");return typeof t=="symbol"?t:t+""}function JH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sv.apply(null,arguments)}function Av(e,t){if(e==null)return{};var n,r,i=eq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function tq(e){var t=At(),n=C.useMemo(()=>{var{children:r}=e,i=Av(e,XH);return i},[e]);return C.useEffect(()=>(t(GG(n)),()=>{t(HG(n))}),[n,t]),e.children}var nq=e=>{var{xAxisId:t,className:n}=e,r=we(i0),i=Dr(),o="xAxis",l=we(P=>sl(P,o,t,i)),u=we(P=>eD(P,o,t,i)),d=we(P=>WT(P,t)),h=we(P=>A6(P,t)),p=we(P=>OT(P,t));if(d==null||h==null||p==null)return null;var{dangerouslySetInnerHTML:m,ticks:y}=e,x=Av(e,WH),{id:S}=p,A=Av(p,QH);return C.createElement(Ki,Sv({},x,A,{scale:l,x:h.x,y:h.y,width:d.width,height:d.height,className:nt("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:u}))},rq=e=>{var t,n,r,i,o;return C.createElement(tq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter},C.createElement(nq,e))};class jb extends C.Component{render(){return C.createElement(rq,this.props)}}cj(jb,"displayName","XAxis");cj(jb,"defaultProps",{allowDataOverflow:nr.allowDataOverflow,allowDecimals:nr.allowDecimals,allowDuplicatedCategory:nr.allowDuplicatedCategory,height:nr.height,hide:!1,mirror:nr.mirror,orientation:nr.orientation,padding:nr.padding,reversed:nr.reversed,scale:nr.scale,tickCount:nr.tickCount,type:nr.type,xAxisId:0});var aq=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=e,l=0;if(t){t.forEach(p=>{if(p){var m=p.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,d=i+o,h=l+d+u+(n?r:0);return Math.round(h)}return 0},iq=["dangerouslySetInnerHTML","ticks"],sq=["id"];function uj(e,t,n){return(t=oq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e){var t=lq(e,"string");return typeof t=="symbol"?t:t+""}function lq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cv.apply(null,arguments)}function vw(e,t){if(e==null)return{};var n,r,i=cq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function uq(e){var t=At();return C.useEffect(()=>(t(qG(e)),()=>{t(YG(e))}),[e,t]),null}var fq=e=>{var t,{yAxisId:n,className:r,width:i,label:o}=e,l=C.useRef(null),u=C.useRef(null),d=we(i0),h=Dr(),p=At(),m="yAxis",y=we(D=>sl(D,m,n,h)),x=we(D=>QT(D,n)),S=we(D=>C6(D,n)),A=we(D=>eD(D,m,n,h)),P=we(D=>_T(D,n));if(C.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!x||vb(o)||C.isValidElement(o)||P==null)){var R=l.current,k=R==null||(D=R.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:U,tickMargin:Z}=R.props,q=aq({ticks:k,label:u.current,labelGapWithTick:5,tickSize:U,tickMargin:Z});Math.round(x.width)!==Math.round(q)&&p(FG({id:n,width:q}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,p,o,n,i]),x==null||S==null||P==null)return null;var{dangerouslySetInnerHTML:E,ticks:O}=e,_=vw(e,iq),{id:N}=P,j=vw(P,sq);return C.createElement(Ki,Cv({},_,j,{ref:l,labelRef:u,scale:y,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:x.width,height:x.height,className:nt("recharts-".concat(m," ").concat(m),r),viewBox:d,ticks:A}))},dq=e=>{var t,n,r,i,o;return C.createElement(C.Fragment,null,C.createElement(uq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter}),C.createElement(fq,e))},hq={allowDataOverflow:rr.allowDataOverflow,allowDecimals:rr.allowDecimals,allowDuplicatedCategory:rr.allowDuplicatedCategory,hide:!1,mirror:rr.mirror,orientation:rr.orientation,padding:rr.padding,reversed:rr.reversed,scale:rr.scale,tickCount:rr.tickCount,type:rr.type,width:rr.width,yAxisId:0};class Nb extends C.Component{render(){return C.createElement(dq,this.props)}}uj(Nb,"displayName","YAxis");uj(Nb,"defaultProps",hq);var vy={exports:{}},by={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw;function pq(){if(bw)return by;bw=1;var e=Qo();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return by.useSyncExternalStoreWithSelector=function(d,h,p,m,y){var x=i(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function P(j){if(!E){if(E=!0,O=j,j=m(j),y!==void 0&&S.hasValue){var D=S.value;if(y(D,j))return _=D}return _=j}if(D=_,n(O,j))return D;var R=m(j);return y!==void 0&&y(D,R)?(O=j,D):(O=j,_=R)}var E=!1,O,_,N=p===void 0?null:p;return[function(){return P(h())},N===null?void 0:function(){return P(N())}]},[h,p,m,y]);var A=r(d,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},by}var xw;function mq(){return xw||(xw=1,vy.exports=pq()),vy.exports}mq();function gq(e){e()}function yq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){gq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Sw={notify(){},get:()=>[]};function vq(e,t){let n,r=Sw,i=0,o=!1;function l(A){p();const P=r.subscribe(A);let E=!1;return()=>{E||(E=!0,P(),m())}}function u(){r.notify()}function d(){S.onStateChange&&S.onStateChange()}function h(){return o}function p(){i++,n||(n=e.subscribe(d),r=yq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Sw)}function y(){o||(o=!0,p())}function x(){o&&(o=!1,m())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:h,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return S}var bq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xq=bq(),Sq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Aq=Sq(),Cq=()=>xq||Aq?C.useLayoutEffect:C.useEffect,Pq=Cq(),Eq=Symbol.for("react-redux-context"),wq=typeof globalThis<"u"?globalThis:{};function Oq(){if(!C.createContext)return{};const e=wq[Eq]??=new Map;let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var _q=Oq();function Tq(e){const{children:t,context:n,serverState:r,store:i}=e,o=C.useMemo(()=>{const d=vq(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=C.useMemo(()=>i.getState(),[i]);Pq(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,l]);const u=n||_q;return C.createElement(u.Provider,{value:o},t)}var Dq=Tq,jq=(e,t)=>t,Mb=Q([jq,We,PT,Xt,mD,Xa,OU,Kt],NU),kb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},fj=_r("mouseClick"),dj=Jc();dj.startListening({actionCreator:fj,effect:(e,t)=>{var n=e.payload,r=Mb(t.getState(),kb(n));r?.activeIndex!=null&&t.dispatch(I6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Pv=_r("mouseMove"),hj=Jc();hj.startListening({actionCreator:Pv,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=cb(r,r.tooltip.settings.shared),o=Mb(r,kb(n));i==="axis"&&(o?.activeIndex!=null?t.dispatch(lD({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(oD()))}});function Nq(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Aw={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},pj=ur({name:"rootProps",initialState:Aw,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:Aw.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Mq=pj.reducer,{updateOptions:kq}=pj.actions,mj=ur({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Rq}=mj.actions,Iq=mj.reducer,gj=_r("keyDown"),yj=_r("focus"),Rb=Jc();Rb.startListening({actionCreator:gj,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var l=Number(ub(i,ll(n))),u=Xa(n);if(o==="Enter"){var d=Md(n,"axis","hover",String(i.index));t.dispatch(mv({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=O6(n),p=h==="left-to-right"?1:-1,m=o==="ArrowRight"?1:-1,y=l+m*p;if(!(u==null||y>=u.length||y<0)){var x=Md(n,"axis","hover",String(y));t.dispatch(mv({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Rb.startListening({actionCreator:yj,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",l=Md(n,"axis","hover",String(o));t.dispatch(mv({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:l}))}}}});var Pr=_r("externalEvent"),vj=Jc();vj.startListening({actionCreator:Pr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:vU(n),activeDataKey:bD(n),activeIndex:Rs(n),activeLabel:vD(n),activeTooltipIndex:Rs(n),isTooltipActive:bU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var Lq=Q([ol],e=>e.tooltipItemPayloads),$q=Q([Lq,uu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var l=t(o,n);return l}}}),bj=_r("touchMove"),xj=Jc();xj.startListening({actionCreator:bj,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=cb(r,r.tooltip.settings.shared);if(i==="axis"){var o=Mb(r,kb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&t.dispatch(lD({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(s_),p=(l=d.getAttribute(o_))!==null&&l!==void 0?l:void 0,m=$q(t.getState(),h,p);t.dispatch(sD({activeDataKey:p,activeIndex:h,activeCoordinate:m}))}}});var Bq=NO({brush:cH,cartesianAxis:KG,chartData:VU,errorBars:o9,graphicalItems:fG,layout:DL,legend:x3,options:HU,polarAxis:O7,polarOptions:Iq,referenceElements:gH,rootProps:Mq,tooltip:L6}),Uq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return tL({reducer:Bq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([dj.middleware,hj.middleware,Rb.middleware,vj.middleware,xj.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Nq},name:"recharts-".concat(n)}})};function Sj(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Dr(),o=C.useRef(null);if(i)return n;o.current==null&&(o.current=Uq(t,r));var l=Zv;return C.createElement(Dq,{context:l,store:o.current},n)}function Aj(e){var{layout:t,width:n,height:r,margin:i}=e,o=At(),l=Dr();return C.useEffect(()=>{l||(o(OL(t)),o(_L({width:n,height:r})),o(wL(i)))},[o,l,t,n,r,i]),null}function Cj(e){var t=At();return C.useEffect(()=>{t(kq(e))},[t,e]),null}var zq=["children"];function Gq(e,t){if(e==null)return{};var n,r,i=Hq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ud(){return Ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ud.apply(null,arguments)}var qq={width:"100%",height:"100%"},Yq=C.forwardRef((e,t)=>{var n=o0(),r=l0(),i=d_();if(!Ho(n)||!Ho(r))return null;var{children:o,otherAttributes:l,title:u,desc:d}=e,h,p;return typeof l.tabIndex=="number"?h=l.tabIndex:h=i?0:void 0,typeof l.role=="string"?p=l.role:p=i?"application":void 0,C.createElement(Hv,Ud({},l,{title:u,desc:d,role:p,tabIndex:h,width:n,height:r,style:qq,ref:t}),o)}),Fq=e=>{var{children:t}=e,n=we(rh);if(!n)return null;var{width:r,height:i,y:o,x:l}=n;return C.createElement(Hv,{width:r,height:i,x:l,y:o},t)},Cw=C.forwardRef((e,t)=>{var{children:n}=e,r=Gq(e,zq),i=Dr();return i?C.createElement(Fq,null,n):C.createElement(Yq,Ud({ref:t},r),n)});function Kq(){var e=At(),[t,n]=C.useState(null),r=we(i3);return C.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;cr(o)&&o!==r&&e(TL(o))}},[t,e,r]),n}function Pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(n),!0).forEach(function(r){Xq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xq(e,t,n){return(t=Wq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wq(e){var t=Qq(e,"string");return typeof t=="symbol"?t:t+""}function Qq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zq=C.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:h,onMouseLeave:p,onMouseMove:m,onMouseUp:y,onTouchEnd:x,onTouchMove:S,onTouchStart:A,style:P,width:E}=e,O=At(),[_,N]=C.useState(null),[j,D]=C.useState(null);rz();var R=Kq(),k=C.useCallback(Y=>{R(Y),typeof t=="function"&&t(Y),N(Y),D(Y)},[R,t,N,D]),U=C.useCallback(Y=>{O(fj(Y)),O(Pr({handler:o,reactEvent:Y}))},[O,o]),Z=C.useCallback(Y=>{O(Pv(Y)),O(Pr({handler:h,reactEvent:Y}))},[O,h]),q=C.useCallback(Y=>{O(oD()),O(Pr({handler:p,reactEvent:Y}))},[O,p]),J=C.useCallback(Y=>{O(Pv(Y)),O(Pr({handler:m,reactEvent:Y}))},[O,m]),ce=C.useCallback(()=>{O(yj())},[O]),se=C.useCallback(Y=>{O(gj(Y.key))},[O]),te=C.useCallback(Y=>{O(Pr({handler:l,reactEvent:Y}))},[O,l]),$=C.useCallback(Y=>{O(Pr({handler:u,reactEvent:Y}))},[O,u]),ee=C.useCallback(Y=>{O(Pr({handler:d,reactEvent:Y}))},[O,d]),pe=C.useCallback(Y=>{O(Pr({handler:y,reactEvent:Y}))},[O,y]),he=C.useCallback(Y=>{O(Pr({handler:A,reactEvent:Y}))},[O,A]),I=C.useCallback(Y=>{O(bj(Y)),O(Pr({handler:S,reactEvent:Y}))},[O,S]),K=C.useCallback(Y=>{O(Pr({handler:x,reactEvent:Y}))},[O,x]);return C.createElement(ED.Provider,{value:_},C.createElement(J2.Provider,{value:j},C.createElement("div",{className:nt("recharts-wrapper",r),style:Vq({position:"relative",cursor:"default",width:E,height:i},P),onClick:U,onContextMenu:te,onDoubleClick:$,onFocus:ce,onKeyDown:se,onMouseDown:ee,onMouseEnter:Z,onMouseLeave:q,onMouseMove:J,onMouseUp:pe,onTouchEnd:K,onTouchMove:I,onTouchStart:he,ref:k},n)))}),Jq=["children","className","width","height","style","compact","title","desc"];function eY(e,t){if(e==null)return{};var n,r,i=tY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Pj=C.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:o,style:l,compact:u,title:d,desc:h}=e,p=eY(e,Jq),m=Bs(p);return u?C.createElement(Cw,{otherAttributes:m,title:d,desc:h},n):C.createElement(Zq,{className:r,style:l,width:i,height:o,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},C.createElement(Cw,{otherAttributes:m,title:d,desc:h,ref:t},C.createElement(vH,null,n)))}),nY=["width","height"];function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ev.apply(null,arguments)}function rY(e,t){if(e==null)return{};var n,r,i=aY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iY={top:5,right:5,bottom:5,left:5},sY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:iY,reverseStackOrder:!1,syncMethod:"index"},oY=C.forwardRef(function(t,n){var r,i=jr(t.categoricalChartProps,sY),{width:o,height:l}=i,u=rY(i,nY);if(!Ho(o)||!Ho(l))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,categoricalChartProps:y}=t,x={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,eventEmitter:void 0};return C.createElement(Sj,{preloadedState:{options:x},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:d},C.createElement(rj,{chartData:y.data}),C.createElement(Aj,{width:o,height:l,layout:i.layout,margin:i.margin}),C.createElement(Cj,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(Pj,Ev({},u,{width:o,height:l,ref:n})))}),lY=["axis","item"],cY=C.forwardRef((e,t)=>C.createElement(oY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:lY,tooltipPayloadSearcher:wD,categoricalChartProps:e,ref:t}));function uY(e){var t=At();return C.useEffect(()=>{t(Rq(e))},[t,e]),null}var fY=["width","height","layout"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wv.apply(null,arguments)}function dY(e,t){if(e==null)return{};var n,r,i=hY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var pY={top:5,right:5,bottom:5,left:5},mY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:pY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},gY=C.forwardRef(function(t,n){var r,i=jr(t.categoricalChartProps,mY),{width:o,height:l,layout:u}=i,d=dY(i,fY);if(!Ho(o)||!Ho(l))return null;var{chartName:h,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:y}=t,x={chartName:h,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:y,eventEmitter:void 0};return C.createElement(Sj,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:h},C.createElement(rj,{chartData:i.data}),C.createElement(Aj,{width:o,height:l,layout:u,margin:i.margin}),C.createElement(Cj,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(uY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),C.createElement(Pj,wv({width:o,height:l},d,{ref:n})))}),yY=["item"],vY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Ew=C.forwardRef((e,t)=>{var n=jr(e,vY);return C.createElement(gY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:yY,tooltipPayloadSearcher:wD,categoricalChartProps:n,ref:t})});const bY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80 transform scale-150",onClick:n=>n.stopPropagation(),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Rc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})}):null,xY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:o})=>{const[l,u]=C.useState(null),[d,h]=C.useState(!1),[p,m]=C.useState(!1),[y,x]=C.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,A]=C.useState(!1),P=C.useRef(null),[E,O]=C.useState({key:"name",direction:"ascending"}),[_,N]=C.useState("cost"),[j,D]=C.useState(!0),R=C.useMemo(()=>{const z=re=>re?re.replace(/_/g," ").toLowerCase().split(" ").map(me=>me.charAt(0).toUpperCase()+me.slice(1)).join(" "):"";return t.map(re=>{const be=[],me=re.effect;if(me.type==="REPEATING_EFFECT")be.push(z(me.type)),me.effects&&Array.isArray(me.effects)&&me.effects.forEach(ue=>{ue.type&&be.push(z(ue.type))});else if(me.type==="MODIFY_DRONE_BASE"&&me.mod){const ue=me.mod.stat,ve=me.mod.value;ue==="attack"?be.push(ve>0?"Attack Buff":"Attack Debuff"):ue==="speed"?be.push(ve>0?"Speed Buff":"Speed Debuff"):ue==="shields"?be.push(ve>0?"Shield Buff":"Shield Debuff"):ue==="cost"?be.push(ve<0?"Cost Reduction":"Cost Increase"):ue==="limit"?be.push(ve>0?"Limit Buff":"Limit Debuff"):ue==="ability"?(be.push("Ability Grant"),me.mod.abilityToAdd&&me.mod.abilityToAdd.name&&be.push(me.mod.abilityToAdd.name)):be.push(z(`${ue} Modification`))}else if(me.type==="MODIFY_STAT"&&me.mod){const ue=me.mod.stat,ve=me.mod.value;me.mod.type,ue==="attack"?be.push(ve>0?"Attack Buff":"Attack Debuff"):ue==="speed"?be.push(ve>0?"Speed Buff":"Speed Debuff"):ue==="shields"?be.push(ve>0?"Shield Buff":"Shield Debuff"):be.push(ve>0?`${ue} Buff`:`${ue} Debuff`)}else me.type==="SEARCH_AND_DRAW"?(be.push(z(me.type)),be.push("Draw")):me.type&&be.push(z(me.type));me.goAgain&&be.push("Go Again"),me.damageType==="PIERCING"&&be.push("Piercing"),me.mod?.type&&be.push(z(me.mod.type));const ie=(()=>{if(re.targeting){const ue=z(re.targeting.type);if(re.targeting.affinity){const ve=re.targeting.affinity.charAt(0)+re.targeting.affinity.slice(1).toLowerCase();return`${ue} (${ve})`}return ue}else if(me.type==="MULTI_MOVE"&&me.source){const ue=me.source.location||"Any",ve=me.source.affinity||"Any",fe=ve.charAt(0).toUpperCase()+ve.slice(1).toLowerCase();return`${z(ue)} (${fe})`}else if(me.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...re,keywords:be,targetingText:ie}})},[t]),k=C.useMemo(()=>{const z=new Set,re=new Set,be=new Set;R.forEach(ie=>{z.add(ie.cost),re.add(ie.targetingText),ie.keywords.forEach(ue=>be.add(ue))});const me=Array.from(z);return{minCost:Math.min(...me),maxCost:Math.max(...me),targets:["all",...Array.from(re).sort()],abilities:Array.from(be).sort()}},[R]);C.useEffect(()=>{k.minCost!==1/0&&k.maxCost!==-1/0&&x(z=>({...z,cost:{min:k.minCost,max:k.maxCost}}))},[k.minCost,k.maxCost]);const{cardCount:U,deckListForDisplay:Z,baseCardCounts:q}=C.useMemo(()=>{const z={};let re=0;Object.entries(n).forEach(([me,ie])=>{if(ie>0){re+=ie;const ue=R.find(ve=>ve.id===me);if(ue){const ve=ue.baseCardId;z[ve]=(z[ve]||0)+ie}}});const be=Object.entries(n).filter(([,me])=>me>0).map(([me,ie])=>({...R.find(ve=>ve.id===me),quantity:ie})).sort((me,ie)=>me.name.localeCompare(ie.name));return{cardCount:re,deckListForDisplay:be,baseCardCounts:z}},[n,R]),J=U>=40,ce=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],se=C.useMemo(()=>{const z={};Z.forEach(ie=>{const ue=ie.cost||0;z[ue]=(z[ue]||0)+ie.quantity});const re=Object.entries(z).map(([ie,ue])=>({name:`${ie}`,count:ue})).sort((ie,ue)=>parseInt(ie.name)-parseInt(ue.name)),be={};Z.forEach(ie=>{ie.keywords&&ie.keywords.forEach(ue=>{be[ue]=(be[ue]||0)+ie.quantity})});const me=Object.entries(be).map(([ie,ue])=>({name:ie,value:ue})).sort((ie,ue)=>ue.value-ie.value);return{barChartData:re,pieChartData:me}},[Z]),te=C.useMemo(()=>{let z=[...R].filter(re=>re.cost<y.cost.min||re.cost>y.cost.max||y.target!=="all"&&re.targetingText!==y.target||y.type!=="all"&&re.type!==y.type?!1:y.abilities.length>0?y.abilities.every(be=>re.keywords.includes(be)):!(y.hideEnhanced&&re.id.endsWith("_ENHANCED")));return E.key!==null&&z.sort((re,be)=>{const me=re[E.key],ie=be[E.key];if(me==null&&ie==null)return 0;if(me==null)return 1;if(ie==null)return-1;const ue=String(me).toLowerCase(),ve=String(ie).toLowerCase();return ue<ve?E.direction==="ascending"?-1:1:ue>ve?E.direction==="ascending"?1:-1:re.id.localeCompare(be.id)}),z},[R,y,E]),$=z=>{let re="ascending";E.key===z&&E.direction==="ascending"&&(re="descending"),O({key:z,direction:re})},ee=(z,re)=>{x(be=>({...be,[z]:re}))},pe=z=>{x(re=>{const be=re.abilities.includes(z)?re.abilities.filter(me=>me!==z):[...re.abilities,z];return{...re,abilities:be}})},he=()=>{x({cost:{min:k.minCost,max:k.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),A(!1)},I=()=>{Object.keys(n).forEach(z=>{n[z]>0&&r(z,0)})};C.useEffect(()=>{const z=re=>{P.current&&!P.current.contains(re.target)&&A(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const K=Math.PI/180,Y=({cx:z,cy:re,midAngle:be,outerRadius:me,fill:ie,name:ue,value:ve})=>{const fe=Math.sin(-K*be),rt=Math.cos(-K*be),ze=z+(me+5)*rt,Me=re+(me+5)*fe,Le=z+(me+15)*rt,bt=re+(me+15)*fe,Mr=Le+(rt>=0?1:-1)*12,Qa=bt,qs=rt>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${ze},${Me}L${Le},${bt}L${Mr},${Qa}`,stroke:ie,fill:"none"}),v.jsx("circle",{cx:Mr,cy:Qa,r:2,fill:ie,stroke:"none"}),v.jsx("text",{x:Mr+(rt>=0?1:-1)*8,y:Qa,dy:4,textAnchor:qs,fill:"#9CA3AF",fontSize:"11px",children:`${ue} (${ve})`})]})},le=()=>{const[z,re]=C.useState(""),be=C.useRef(null),me=C.useMemo(()=>Object.entries(n).map(([ue,ve])=>`${ue}:${ve}`).join(","),[n]),ie=()=>{be.current.select(),document.execCommand("copy"),re("Copied!"),setTimeout(()=>re(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>h(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:ue=>ue.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:be,readOnly:!0,value:me,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:z}),v.jsxs("button",{onClick:ie,className:"flex items-center gap-2 bg-cyan-600 text-white font-bold py-2 px-4 rounded hover:bg-cyan-700",children:[v.jsx(Iw,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>h(!1),className:"flex items-center gap-2 bg-pink-600 text-white font-bold py-2 px-4 rounded hover:bg-pink-700",children:[v.jsx(Ft,{size:16})," Close"]})]})]})})},ye=()=>{const[z,re]=C.useState(""),[be,me]=C.useState(""),ie=()=>{me("");const ue=o(z);ue.success?m(!1):me(ue.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:ue=>ue.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:z,onChange:ue=>re(ue.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),be&&v.jsx("p",{className:"text-red-500 mt-2",children:be}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-700",children:"Cancel"}),v.jsx("button",{onClick:ie,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded hover:bg-purple-700",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[l&&v.jsx(bY,{card:l,onClose:()=>u(null)}),d&&v.jsx(le,{}),p&&v.jsx(ye,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(UM,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(CM,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:he,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",y.cost.min," - ",y.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:k.minCost,max:k.maxCost,value:y.cost.min,onChange:z=>ee("cost",{...y.cost,min:Math.min(parseInt(z.target.value),y.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:k.minCost,max:k.maxCost,value:y.cost.max,onChange:z=>ee("cost",{...y.cost,max:Math.max(parseInt(z.target.value),y.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:P,children:[v.jsx("button",{onClick:()=>A(!S),className:"filter-select w-full text-left h-full",children:y.abilities.length===0?"Select Abilities":`${y.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:k.abilities.map(z=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:y.abilities.includes(z),onChange:()=>pe(z),className:"mr-2"}),z]},z))})]}),v.jsxs("select",{onChange:z=>ee("type",z.target.value),value:y.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:y.hideEnhanced,onChange:z=>ee("hideEnhanced",z.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("name"),className:`w-full text-left transition-colors underline cursor-pointer ${E.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",E.key==="name"&&(E.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("type"),className:`w-full text-left transition-colors underline cursor-pointer ${E.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",E.key==="type"&&(E.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${E.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",E.key==="cost"&&(E.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>$("description"),className:`w-full text-left transition-colors underline cursor-pointer ${E.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",E.key==="description"&&(E.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:te.map((z,re)=>{const be=n[z.id]||0,me=q[z.baseCardId]||0,ie=z.maxInDeck;return v.jsxs("tr",{className:z.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(uA,{size:18})})}),v.jsx("td",{className:"font-bold",children:z.name}),v.jsx("td",{className:`font-semibold ${z.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:z.type}),v.jsx("td",{children:z.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:z.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:z.keywords.map(ue=>v.jsx("span",{className:"ability-chip",children:ue},ue))})}),v.jsx("td",{className:"text-xs",children:z.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):z.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:ie+1}).map((ue,ve)=>{const fe=ve===be,rt=ie-(me-be),ze=ve>rt;return v.jsx("button",{onClick:()=>r(z.id,ve),className:`quantity-btn ${fe?"selected":""}`,disabled:ze,children:ve},ve)})})})]},`${z.id}-${re}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${J?"text-green-400":"text-white"}`,children:["Your Deck (",U,"/40)"]}),v.jsx("button",{onClick:I,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:Z.length>0?Z.map(z=>{const re=q[z.baseCardId]>=z.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(uA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:z.name,children:z.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(z.id,z.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",z.quantity]}),v.jsx("button",{onClick:()=>r(z.id,z.quantity+1),disabled:re,className:"deck-edit-btn",children:"+"})]})]},z.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),U>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!j),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(Tc,{size:20,className:`transition-transform duration-300 ${j?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${j?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>N("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>N("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>N("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${_==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[_==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(ly,{width:"100%",height:"100%",children:v.jsxs(cY,{data:se.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(lj,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(jb,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(Nb,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(ny,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(tj,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),_==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(ly,{width:"100%",height:"100%",children:v.jsxs(Ew,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(bv,{data:[{name:"Action Cards",value:Z.filter(z=>z.type==="Action").reduce((z,re)=>z+re.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:Z.filter(z=>z.type==="Upgrade").reduce((z,re)=>z+re.quantity,0),color:"#c084fc"}].filter(z=>z.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:z,value:re,percent:be})=>`${z}: ${re} (${(be*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:Z.filter(z=>z.type==="Action").reduce((z,re)=>z+re.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:Z.filter(z=>z.type==="Upgrade").reduce((z,re)=>z+re.quantity,0),color:"#c084fc"}].filter(z=>z.value>0).map((z,re)=>v.jsx(Wo,{fill:z.color},`cell-${re}`))}),v.jsx(ny,{}),v.jsx(ah,{})]})})]}),_==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(ly,{width:"100%",height:"100%",children:v.jsxs(Ew,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(bv,{data:se.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:Y,outerRadius:60,dataKey:"value",children:se.pieChartData.map((z,re)=>v.jsx(Wo,{fill:ce[re%ce.length]},`cell-${re}`))}),v.jsx(ny,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!J,className:"w-full p-4 mt-4 text-lg font-bold font-orbitron rounded-lg bg-purple-600 text-white transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed enabled:hover:bg-purple-500",children:"Confirm Deck"})]})]})]})},Wa=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})});function SY({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:o,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:d,shieldsToRemove:h,shieldsToAdd:p,reallocationPhase:m,totalLocalPlayerDrones:y,totalOpponentPlayerDrones:x,getLocalPlayerId:S,getOpponentPlayerId:A,isMyTurn:P,handlePlayerPass:E,handleReset:O,mandatoryAction:_,multiSelectState:N,AI_HAND_DEBUG_MODE:j,setShowAiHandModal:D,onShowDebugModal:R}){const[k,U]=C.useState(!1),Z=C.useRef(null);return C.useEffect(()=>{const q=J=>{Z.current&&!Z.current.contains(J.target)&&U(!1)};return document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[]),v.jsxs("header",{className:"w-full flex justify-between items-center mb-2 flex-shrink-0 px-5 pt-8",children:[v.jsxs("div",{className:"flex flex-col items-start gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-pink-300 flex items-center",children:["Opponent Resources",(i==="deployment"||i==="action")&&u===A()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${t.energy>r.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(Rc,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.energy," / ",r.totals.maxEnergy]})]}),v.jsxs("div",{onClick:()=>j&&setTimeout(()=>D(!0),100),className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${j?"cursor-pointer hover:bg-gray-800":""} ${t.hand.length>r.totals.handLimit?"text-red-400":""}`,children:[v.jsx(wM,{className:"text-gray-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.hand.length," / ",r.totals.handLimit]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50",children:[v.jsx(xy,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:o===1?t.initialDeploymentBudget:t.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${x>r.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(cA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[x," / ",r.totals.cpuLimit]})]})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center",children:[v.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-xl font-orbitron",style:{textShadow:"0 0 15px rgba(236, 72, 153, 0.5), 0 0 5px rgba(255, 255, 255, 0.5)"},children:"Drone Wars"}),v.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-300 tracking-widest font-exo",children:gR(i)}),(i==="deployment"||i==="action")&&P()&&!_&&!N&&v.jsx("button",{onClick:E,disabled:l[`${S()}Passed`],className:`btn-clipped text-white font-bold py-1 px-6 transition-colors duration-200 ${l[`${S()}Passed`]?"bg-gray-700 cursor-not-allowed":"bg-red-600 hover:bg-red-500"}`,children:"Pass"})]})]}),v.jsxs("div",{className:"flex flex-col items-end gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-cyan-300 flex items-center",children:["Your Resources",(i==="deployment"||i==="action")&&u===S()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${S()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${e.energy>n.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(Rc,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[e.energy," / ",n.totals.maxEnergy]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(xy,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:o===1?e.initialDeploymentBudget:e.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${y>n.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(cA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[y," / ",n.totals.cpuLimit]})]}),i==="allocateShields"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(Yf,{className:"text-cyan-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:d})]}),m==="removing"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-orange-500/50",children:[v.jsx(Yf,{className:"text-orange-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:h})]}),m==="adding"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-green-500/50",children:[v.jsx(Yf,{className:"text-green-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:p})]}),v.jsx("button",{onClick:O,className:"bg-pink-700 text-white p-3 rounded-full shadow-lg hover:bg-pink-600 transition-colors duration-200","aria-label":"Reset Game",children:v.jsx(DM,{})}),v.jsxs("div",{className:"relative",ref:Z,children:[v.jsxs("button",{onClick:()=>U(!k),className:"bg-slate-700 text-white p-3 rounded-full shadow-lg hover:bg-slate-600 transition-colors duration-200 flex items-center","aria-label":"Settings",children:[v.jsx(fA,{}),v.jsx(gM,{size:16,className:"ml-1"})]}),k&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:v.jsxs("button",{onClick:()=>{R&&R(),U(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[v.jsx(fA,{size:16}),"Debug View"]})})]})]})]})]})}const Ch=()=>{const{gameStateManager:e}=zi(),t=C.useMemo(()=>e?new Xc(e):null,[e]),[n,r]=C.useState(null);return C.useEffect(()=>{if(!t)return;const p=()=>{r(t.getCacheStats())};p();const m=setInterval(p,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(p,m)=>t?t.getEffectiveStats(p,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(p,m=[])=>t?t.getEffectiveShipStats(p,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:p=>t?t.getLaneData(p):{lane:p,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(p,m=null)=>t?t.hasGuardianInLane(p,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},ww=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:o,isInteractive:l,validCardTargets:u,reallocationPhase:d,gameEngine:h,turnPhase:p,isMyTurn:m,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,hoveredTarget:P,setHoveredTarget:E})=>{const{getEffectiveShipStats:O}=Ch(),_=O(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(N=>{const j=n[N];if(!j)return console.log(`🚨 [DEBUG] Lane ${N} rendering EMPTY div - no hover possible:`,{sectionName:j,sectionNameType:typeof j,sectionNameValue:JSON.stringify(j),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},N);const D=e.shipSections[j],R=u.some(U=>U.id===j);let k=null;if(d&&t){if(d==="removing")D.allocatedShields>0?k="can-remove":k="cannot-remove";else if(d==="adding"){const U=h.getEffectiveSectionMaxShields(j,e,n);D.allocatedShields<U?k="can-add":k="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0",children:v.jsx(ad,{section:j,stats:D,effectiveStatsForDisplay:_.bySection[j],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(j):o&&o({id:j,name:j,...D},"section",t)},onAbilityClick:i,isInteractive:l||p==="action"&&t&&D.ability&&S.energy>=D.ability.cost.energy,isCardTarget:R,isInMiddleLane:N===1,isHovered:P?.type==="section"&&P?.target.name===j,onMouseEnter:()=>!t&&E({target:{name:j,...D},type:"section"}),onMouseLeave:()=>!t&&E(null),reallocationState:k,gameEngine:h,turnPhase:p,isMyTurn:m,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A})},N)})})},Ow=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),AY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),ed=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:o,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:d,lane:h,onAbilityClick:p,isActionTarget:m,droneRefs:y,mandatoryAction:x,localPlayerState:S})=>{const{getEffectiveStats:A}=Ch(),P=C.useMemo(()=>wn.find(le=>le.name===e.name),[e.name]),E=A(e,h),{maxShields:O}=E,_=e.currentShields??O,N=P.abilities.filter(le=>le.type==="ACTIVE"),j=n?"border-cyan-400":"border-pink-500",D=n?"bg-cyan-900":"bg-pink-950",R=n?"text-cyan-100":"text-pink-100",k=n?"bg-cyan-900":"bg-pink-950",U=n?"text-cyan-400":"text-pink-500",Z=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",q=E.attack>E.baseAttack,J=E.attack<E.baseAttack,ce=q?"text-green-400":J?"text-red-400":"text-white",se=E.speed>E.baseSpeed,te=E.speed<E.baseSpeed,$=se?"text-green-400":te?"text-red-400":"text-white",ee=e.isExhausted?"grayscale opacity-60":"",pe=o?"animate-shake":"",he=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",I=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",K=x?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",Y=le=>!(e.isExhausted&&le.cost.exhausts!==!1||le.cost.energy&&S.energy<le.cost.energy);return v.jsxs("div",{ref:le=>y.current[e.id]=le,onClick:le=>t&&t(le,e,n),onMouseEnter:u,onMouseLeave:d,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ee} ${pe} ${he} ${I} ${K}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${j} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:O}).map((le,ye)=>ye<_?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:U,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ye):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:Z,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ye))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:P.hull}).map((le,ye)=>{const z=ye<e.hull,re=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${z?re:"bg-gray-400"} border border-black/50`},ye)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${D} flex items-center justify-center border-t ${j}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${R} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(Ow,{value:E.attack,isFlat:!1,bgColor:k,textColor:ce})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:v.jsx(Ow,{value:E.speed,isFlat:!0,bgColor:k,textColor:$})}),n&&N.length>0&&Y(N[0])&&v.jsx(AY,{onClick:le=>p&&p(le,e,N[0])})]})},CY=(e,t,n,r,i,o,l,u,d,h,p,m,y,x,S,A,P,E,O,_)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(N=>v.jsx(ed,{drone:N,lane:n,isPlayer:t,onClick:h,onAbilityClick:p,isSelected:m&&m.id===N.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(j=>j.id===N.id),isHit:x.includes(N.id),isPotentialInterceptor:S.includes(N.id),droneRefs:A,mandatoryAction:P,localPlayerState:r,isActionTarget:E.some(j=>j.id===N.id)||O.some(j=>j.id===N.id),onMouseEnter:()=>!t&&_({target:N,type:"drone",lane:n}),onMouseLeave:()=>!t&&_(null)},N.id))}),_w=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:o,validAbilityTargets:l,selectedCard:u,validCardTargets:d,multiSelectState:h,turnPhase:p,localPlayerState:m,opponentPlayerState:y,localPlacedSections:x,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:P,handleTokenClick:E,handleAbilityIconClick:O,selectedDrone:_,recentlyHitDrones:N,potentialInterceptors:j,droneRefs:D,mandatoryAction:R,setHoveredTarget:k})=>(Ch(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(U=>{const Z=t?r():i(),q=o&&l.some(ce=>ce.id===U&&ce.owner===Z)||u&&d.some(ce=>ce.id===U&&ce.owner===Z)||h&&d.some(ce=>ce.id===U&&ce.owner===Z),J=t&&(p==="deployment"||p==="action");return v.jsx("div",{onClick:ce=>n(ce,U,t),className:`flex-1 rounded-lg border-2 transition-all duration-200 p-2 lane-background
              ${q?"border-purple-500 bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":"border-gray-700/50 bg-black/20"}
              ${J?"cursor-pointer hover:bg-cyan-900/50":""}
            `,children:CY(e.dronesOnBoard[U],t,U,m,y,x,S,A,P,E,O,_,h,N,j,D,R,l,d,k)},U)})}));function PY({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:o,abilityMode:l,validAbilityTargets:u,multiSelectState:d,turnPhase:h,reallocationPhase:p,shipAbilityMode:m,hoveredTarget:y,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:P,mandatoryAction:E,gameEngine:O,getLocalPlayerId:_,getOpponentPlayerId:N,isMyTurn:j,getPlacedSectionsForEngine:D,passInfo:R,handleTargetClick:k,handleLaneClick:U,handleShipSectionClick:Z,handleShipAbilityClick:q,handleTokenClick:J,handleAbilityIconClick:ce,setHoveredTarget:se}){return v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(ww,{player:t,isPlayer:!1,placedSections:r,onTargetClick:k,isInteractive:!1,selectedCard:i,validCardTargets:o,gameEngine:O,turnPhase:h,isMyTurn:j,passInfo:R,getLocalPlayerId:_,localPlayerState:e,shipAbilityMode:m,hoveredTarget:y,setHoveredTarget:se}),v.jsx(_w,{player:t,isPlayer:!1,onLaneClick:U,getLocalPlayerId:_,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:o,multiSelectState:d,turnPhase:h,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:D,handleTokenClick:J,handleAbilityIconClick:ce,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:P,mandatoryAction:E,setHoveredTarget:se}),v.jsx(_w,{player:e,isPlayer:!0,onLaneClick:U,getLocalPlayerId:_,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:o,multiSelectState:d,turnPhase:h,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:D,handleTokenClick:J,handleAbilityIconClick:ce,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:P,mandatoryAction:E,setHoveredTarget:se}),v.jsx(ww,{player:e,isPlayer:!0,placedSections:n,onSectionClick:Z,onAbilityClick:q,onTargetClick:k,isInteractive:h==="allocateShields"||p,selectedCard:i,validCardTargets:o,reallocationPhase:p,gameEngine:O,turnPhase:h,isMyTurn:j,passInfo:R,getLocalPlayerId:_,localPlayerState:e,shipAbilityMode:m,hoveredTarget:y,setHoveredTarget:se})]})})}const Ph=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i})=>{const{name:o,cost:l,image:u,description:d}=e;return v.jsx("div",{onClick:h=>{h.stopPropagation(),(n||i)&&t(e)},className:`
        w-52 h-72 rounded-lg p-1 relative group transition-all duration-200 flex-shrink-0
        ${n?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"grayscale":""}
        ${i?"cursor-pointer ring-2 ring-red-500 animate-pulse":""}
      `,children:v.jsxs("div",{className:`
          w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md
          transition-all duration-200
          ${n&&!r?"group-hover:bg-slate-800":""}
        `,children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:o}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Rc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:l})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:u,alt:o,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:d})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})},EY="_footer_js8yx_10",wY="_tabContainer_js8yx_14",OY="_contentContainer_js8yx_18",_Y="_contentOpen_js8yx_22",TY="_contentClosed_js8yx_26",DY="_tabButton_js8yx_32",jY="_tabButtonActive_js8yx_36",NY="_tabButtonInactive_js8yx_40",MY="_tabIcon_js8yx_44",kY="_multiSelectOverlay_js8yx_50",RY="_multiSelectText_js8yx_54",IY="_handContainer_js8yx_60",LY="_cardPile_js8yx_64",$Y="_deckCard_js8yx_68",BY="_deckCardText_js8yx_74",UY="_discardCard_js8yx_78",zY="_discardCardText_js8yx_84",GY="_pileLabel_js8yx_88",HY="_handSection_js8yx_92",qY="_handHeader_js8yx_96",YY="_handTitle_js8yx_100",FY="_handTitleOverLimit_js8yx_104",KY="_handTitleNormal_js8yx_108",VY="_mandatoryDiscardWarning_js8yx_112",XY="_handCardsContainer_js8yx_116",WY="_handCardsWrapper_js8yx_120",QY="_handCardsWrapperGap_js8yx_124",ZY="_cardWrapper_js8yx_128",JY="_optionalDiscardControls_js8yx_133",eF="_optionalDiscardCounter_js8yx_137",tF="_finishDiscardButton_js8yx_141",nF="_droneContainer_js8yx_148",rF="_droneGrid_js8yx_152",aF="_logContainer_js8yx_158",iF="_logHeader_js8yx_162",sF="_logTitle_js8yx_166",oF="_downloadButton_js8yx_170",lF="_logTableWrapper_js8yx_175",cF="_logTable_js8yx_175",uF="_logTableHeader_js8yx_183",fF="_logTableHeaderCell_js8yx_187",dF="_logTableDebugHeader_js8yx_191",hF="_logTableRow_js8yx_195",pF="_logTableCell_js8yx_199",mF="_logTableCellBold_js8yx_203",gF="_logTableCellGray_js8yx_207",yF="_logTableCellCyan_js8yx_211",vF="_logTableCellYellow_js8yx_215",bF="_logTableCellGrayText_js8yx_219",xF="_logTableCellDebug_js8yx_223",SF="_logTableCellCenter_js8yx_227",AF="_aiDecisionButton_js8yx_231",CF="_buttonDanger_js8yx_242",PF="_buttonSuccess_js8yx_247",EF="_buttonDisabled_js8yx_252",xe={footer:EY,tabContainer:wY,contentContainer:OY,contentOpen:_Y,contentClosed:TY,tabButton:DY,tabButtonActive:jY,tabButtonInactive:NY,tabIcon:MY,multiSelectOverlay:kY,multiSelectText:RY,handContainer:IY,cardPile:LY,deckCard:$Y,deckCardText:BY,discardCard:UY,discardCardText:zY,pileLabel:GY,handSection:HY,handHeader:qY,handTitle:YY,handTitleOverLimit:FY,handTitleNormal:KY,mandatoryDiscardWarning:VY,handCardsContainer:XY,handCardsWrapper:WY,handCardsWrapperGap:QY,cardWrapper:ZY,optionalDiscardControls:JY,optionalDiscardCounter:eF,finishDiscardButton:tF,droneContainer:nF,droneGrid:rF,logContainer:aF,logHeader:iF,logTitle:sF,downloadButton:oF,logTableWrapper:lF,logTable:cF,logTableHeader:uF,logTableHeaderCell:fF,logTableDebugHeader:dF,logTableRow:hF,logTableCell:pF,logTableCellBold:mF,logTableCellGray:gF,logTableCellCyan:yF,logTableCellYellow:vF,logTableCellGrayText:bF,logTableCellDebug:xF,logTableCellCenter:SF,aiDecisionButton:AF,buttonDanger:CF,buttonSuccess:PF,buttonDisabled:EF};function wF({localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleCardClick:o,getLocalPlayerId:l,isMyTurn:u,hoveredCardId:d,setHoveredCardId:h,setIsViewDiscardModalOpen:p,setIsViewDeckModalOpen:m,optionalDiscardCount:y,handleRoundStartDraw:x,checkBothPlayersHandLimitComplete:S,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:P,setConfirmationModal:E,passInfo:O,validCardTargets:_,gameEngine:N,opponentPlayerState:j}){const U=e.hand.length>7,Z=1552,q=e.hand.length;let J=0;return q>1&&(J=(Z-208)/(q-1)-208),v.jsxs("div",{className:xe.handContainer,children:[v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>p(!0),className:xe.discardCard,children:v.jsx("p",{className:xe.discardCardText,children:e.discardPile.length})}),v.jsx("p",{className:xe.pileLabel,children:"Discard Pile"})]}),v.jsxs("div",{className:xe.handSection,children:[v.jsx("div",{className:xe.handHeader,children:v.jsxs("h3",{className:`${xe.handTitle} ${e.hand.length>t.totals.handLimit?xe.handTitleOverLimit:xe.handTitleNormal}`,children:["Your Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),i?.type==="discard"&&i.fromAbility&&v.jsxs("p",{className:xe.mandatoryDiscardWarning,children:["You must discard ",i.count," card(s)."]}),v.jsx("div",{className:xe.handCardsContainer,style:U?{width:`${Z}px`}:{},children:v.jsx("div",{className:`${xe.handCardsWrapper} ${U?"":xe.handCardsWrapperGap}`,children:e.hand.map((ce,se)=>{const te=d?e.hand.findIndex(pe=>pe.instanceId===d):-1;let $="",ee={zIndex:se};return U&&te!==-1&&(se<te?$="transform -translate-x-12":se>te?$="transform translate-x-12":($="transform -translate-y-8 scale-105",ee.zIndex=50)),U&&se>0&&(ee.marginLeft=`${J}px`),v.jsx("div",{className:`${xe.cardWrapper} ${$}`,style:ee,onMouseEnter:()=>h(ce.instanceId),onMouseLeave:()=>h(null),children:v.jsx(Ph,{card:ce,isPlayable:r==="action"&&u()&&!O[`${l()}Passed`]&&e.energy>=ce.cost&&(!ce.targeting||N.getValidTargets(l(),null,ce,e,j).length>0)||r==="optionalDiscard"&&y<t.totals.discardLimit,isMandatoryTarget:i?.type==="discard",onClick:i?.type==="discard"?pe=>E({type:"discard",target:pe,onConfirm:()=>A(pe),onCancel:()=>E(null),text:`Are you sure you want to discard ${pe.name}?`}):r==="optionalDiscard"?pe=>E({type:"discard",target:pe,onConfirm:()=>P(pe),onCancel:()=>E(null),text:`Are you sure you want to discard ${pe.name}?`}):o})},ce.instanceId)})})})]}),v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>m(!0),className:xe.deckCard,children:v.jsx("p",{className:xe.deckCardText,children:e.deck.length})}),v.jsx("p",{className:xe.pileLabel,children:"Deck"}),r==="optionalDiscard"&&v.jsxs("div",{className:xe.optionalDiscardControls,children:[v.jsxs("p",{className:xe.optionalDiscardCounter,children:["Discarded: ",y," / ",t.discardLimit]}),v.jsx("button",{onClick:()=>{x(),S()},className:xe.finishDiscardButton,children:"Finish Discarding"})]})]})]})}function OF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:o,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:d,isMyTurn:h,turn:p,passInfo:m,validCardTargets:y}){return v.jsx("div",{className:xe.droneContainer,children:v.jsx("div",{className:xe.droneGrid,children:t.map((x,S)=>{const P=(p===1?e.initialDeploymentBudget+e.energy:e.energy)>=x.class,E=n?.type==="Upgrade"&&y.some(O=>O.id===x.name);return v.jsx(rd,{drone:x,onClick:o,isSelected:l&&l.name===x.name,isSelectable:r==="deployment"&&h()&&!m[`${d()}Passed`]&&P&&!i||E,deployedCount:e.deployedDroneCounts[x.name]||0,appliedUpgrades:e.appliedUpgrades[x.name]||[],isUpgradeTarget:E,onViewUpgrades:(O,_)=>u({droneName:O.name,upgrades:_})},S)})})})}function _F({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return v.jsxs("div",{className:xe.logContainer,children:[v.jsxs("div",{className:xe.logHeader,children:[v.jsx("h3",{className:xe.logTitle,children:"Game Log"}),v.jsx("button",{onClick:t,className:xe.downloadButton,children:"Download CSV"})]}),v.jsx("div",{className:xe.logTableWrapper,children:v.jsxs("table",{className:xe.logTable,children:[v.jsx("thead",{className:xe.logTableHeader,children:v.jsxs("tr",{children:[v.jsx("th",{className:xe.logTableHeaderCell,children:"Rnd"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Timestamp (UTC)"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Player"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Action"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Source"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Target"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Outcome"}),v.jsx("th",{className:xe.logTableDebugHeader,children:"Debug Source"}),v.jsx("th",{className:xe.logTableHeaderCell})]})}),v.jsx("tbody",{children:e.map((r,i)=>v.jsxs("tr",{className:xe.logTableRow,children:[v.jsx("td",{className:xe.logTableCellBold,children:r.round}),v.jsx("td",{className:xe.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:xe.logTableCellCyan,children:r.player}),v.jsx("td",{className:xe.logTableCellYellow,children:r.actionType}),v.jsx("td",{className:xe.logTableCell,children:r.source}),v.jsx("td",{className:xe.logTableCell,children:r.target}),v.jsx("td",{className:xe.logTableCellGrayText,children:r.outcome}),v.jsx("td",{className:xe.logTableCellDebug,children:r.debugSource}),v.jsx("td",{className:xe.logTableCellCenter,children:r.aiDecisionContext&&v.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:xe.aiDecisionButton,title:"Show AI Decision Logic",children:"ℹ️"})})]},i)).reverse()})]})})]})}function TF({localPlayerState:e,localPlayerEffectiveStats:t,sortedLocalActivePool:n,gameLog:r,footerView:i,isFooterOpen:o,multiSelectState:l,selectedCard:u,turnPhase:d,mandatoryAction:h,handleFooterButtonClick:p,handleCardClick:m,cancelCardSelection:y,downloadLogAsCSV:x,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:P,setHoveredCardId:E,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:_,optionalDiscardCount:N,handleRoundStartDraw:j,checkBothPlayersHandLimitComplete:D,handleToggleDroneSelection:R,selectedDrone:k,setViewUpgradesModal:U,handleConfirmMandatoryDiscard:Z,handleRoundStartDiscard:q,setConfirmationModal:J,turn:ce,passInfo:se,validCardTargets:te,gameEngine:$,opponentPlayerState:ee,setAiDecisionLogToShow:pe}){return v.jsxs("footer",{className:xe.footer,children:[v.jsxs("div",{className:xe.tabContainer,children:[v.jsx("button",{onClick:()=>p("hand"),className:`${xe.tabButton} ${o&&i==="hand"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[o&&i==="hand"&&v.jsx(Tc,{size:20}),"Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>p("drones"),className:`${xe.tabButton} ${o&&i==="drones"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[o&&i==="drones"&&v.jsx(Tc,{size:20}),"Drones"]})}),v.jsx("button",{onClick:()=>p("log"),className:`${xe.tabButton} ${o&&i==="log"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[o&&i==="log"&&v.jsx(Tc,{size:20}),"Log (",r.length,")"]})})]}),v.jsxs("div",{className:`${xe.contentContainer} ${o?xe.contentOpen:xe.contentClosed}`,children:[l&&v.jsxs("div",{className:xe.multiSelectOverlay,children:[v.jsxs("span",{className:xe.multiSelectText,children:[l.phase==="select_source_lane"&&"Reposition: Select a source lane",l.phase==="select_drones"&&`Select Drones (${l.selectedDrones.length} / ${l.maxSelection})`,l.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:he=>{he.stopPropagation(),y()},className:xe.buttonDanger,children:"Cancel"}),l.phase==="select_drones"&&v.jsx("button",{onClick:he=>{he.stopPropagation(),l.selectedDrones.length>0&&console.log("Confirm drones clicked")},disabled:l.selectedDrones.length===0,className:`${xe.buttonSuccess} ${l.selectedDrones.length===0?xe.buttonDisabled:""}`,children:"Confirm Drones"})]}),i==="hand"&&v.jsx(wF,{localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:u,turnPhase:d,mandatoryAction:h,handleCardClick:m,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:P,setHoveredCardId:E,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:_,optionalDiscardCount:N,handleRoundStartDraw:j,checkBothPlayersHandLimitComplete:D,handleConfirmMandatoryDiscard:Z,handleRoundStartDiscard:q,setConfirmationModal:J,passInfo:se,validCardTargets:te,gameEngine:$,opponentPlayerState:ee}),i==="drones"&&v.jsx(OF,{localPlayerState:e,sortedLocalActivePool:n,selectedCard:u,turnPhase:d,mandatoryAction:h,handleToggleDroneSelection:R,selectedDrone:k,setViewUpgradesModal:U,getLocalPlayerId:S,isMyTurn:A,turn:ce,passInfo:se,validCardTargets:te}),i==="log"&&v.jsx(_F,{gameLog:r,downloadLogAsCSV:x,setAiDecisionLogToShow:pe})]})]})}const DF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(Wa,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},jF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:o}=e,[l,u]=C.useState(null);return v.jsxs(Wa,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(d=>{const h=o.appliedUpgrades[d.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",d.name]}),v.jsx("div",{className:"space-y-2",children:h.map(p=>v.jsx("div",{onClick:()=>u({droneName:d.name,instanceId:p.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===p.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:p.name})},p.instanceId))})]},d.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},NF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[o,l]=C.useState(null);return v.jsxs(Wa,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(Ph,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${o?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,o),disabled:!o,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},MF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:o,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:d})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(DF,{modalData:e,onClose:()=>t(null)}),n&&v.jsx(jF,{selectionData:n,onConfirm:async(h,p)=>{await l(h,p,u()),r(null)},onCancel:()=>{r(null),d()}}),i&&v.jsx(NF,{selectionData:i,onConfirm:async(h,p)=>{await l(h,p,u()),o(null)},onCancel:()=>{o(null),d()}})]}),kF=({visible:e,start:t,end:n,lineRef:r})=>e?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,RF=({top:e,left:t})=>v.jsx("div",{className:"explosion",style:{top:`${e}px`,left:`${t}px`}}),IF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:o,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const d=n!=="local",h=t===u()?o?.name||"You":l?.name||"Opponent";return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-6 shadow-2xl shadow-purple-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-400 mb-2",children:[v.jsx(Ov,{className:"w-6 h-6 animate-spin"}),v.jsx(Rw,{className:"w-6 h-6"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:d?"Opponent's Turn":"AI Thinking..."}),v.jsx("p",{className:"text-gray-300 text-sm",children:d?`Waiting for ${h}`:"Processing AI actions..."})]}),d&&r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Lw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),i&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Recent action:"}),v.jsx("p",{className:"text-white text-sm",children:i})]}),v.jsx("div",{className:"flex justify-center mt-4",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},LF=({card:e})=>v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80",children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),Tw=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const o=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Ft,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",o.length,")"]}),o.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:o.map((l,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(LF,{card:l})},`${l.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},$F=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:"✓"})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),BF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,o]=C.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:d,filter:h}=r,p=S=>{o(A=>{const P=S.instanceId||`${S.id}-${S.name}`;return A.some(O=>(O.instanceId||`${O.id}-${O.name}`)===P)?A.filter(O=>(O.instanceId||`${O.id}-${O.name}`)!==P):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),o([]))},y=()=>{o([]),t()},x=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Ft,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:d==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:h?`Select ${u} ${h.type} card${u>1?"s":""} from ${l.length} found ${h.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${x?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>v.jsx($F,{card:S,isSelected:i.some(P=>{const E=S.instanceId||`${S.id}-${S.name}`;return(P.instanceId||`${P.id}-${P.name}`)===E}),onClick:p},S.instanceId||`${S.id}-${A}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:y,className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!x,className:`font-bold py-3 px-8 rounded-full transition-colors ${x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"Confirm Selection"})]})]})})},UF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return v.jsxs(Wa,{title:"AI Action: Card Played",text:"",onClose:t,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:n.name}),r&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:r}),i&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(Ph,{card:n,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},zF=({report:e,onClose:t})=>{if(!e)return null;const{attackerName:n,lane:r,targetName:i,targetType:o,interceptorName:l,shieldDamage:u,hullDamage:d,wasDestroyed:h,remainingShields:p,remainingHull:m}=e,y=o==="section"?i.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase()):i;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[t&&v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Action Report"}),v.jsxs("div",{className:"text-left text-gray-300 space-y-3 mt-4 text-center",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-pink-400",children:n})," attacked in"," ",v.jsx("strong",{children:r?.replace("lane","Lane ")||"Unknown Lane"}),"."]}),l?v.jsxs("p",{children:["Your ",v.jsx("strong",{className:"text-yellow-400",children:l})," intercepted the attack, which was targeting your ",v.jsx("strong",{className:"text-cyan-400",children:y}),"!"]}):v.jsxs("p",{children:["It targeted your ",v.jsx("strong",{className:"text-cyan-400",children:y}),"."]}),v.jsxs("p",{children:["The attack dealt ",v.jsx("strong",{className:"text-cyan-300",children:u})," damage to shields and ",v.jsx("strong",{className:"text-red-400",children:d})," damage to the hull."]}),h?v.jsx("p",{className:"font-bold text-red-500 text-lg",children:"The target was destroyed!"}):v.jsxs("p",{children:["The target has ",v.jsx("strong",{className:"text-cyan-300",children:p})," shields and ",v.jsx("strong",{className:"text-green-400",children:m})," hull remaining."]})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})})},GF=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(rd,{drone:t,isSelectable:!1,deployedCount:0})})]})}),HF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,turn:o,firstPasserOfPreviousRound:l,onContinue:u})=>{if(!e)return null;const d=t===n?r:i;let h;o===1?h="The first player is determined randomly for the first round.":h=`${l===n?r:i} passed first in the previous round, securing the initiative.`;const p=`${d} will go first this round. ${h}`;return v.jsx(Wa,{title:"First Player Determined",text:p,onClose:u,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:u,className:"btn-continue",children:"Continue"})})})},qF=({show:e,onContinue:t})=>e?v.jsx(Wa,{title:"Action Phase",text:"Deployment has ended. Prepare for action!",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})}):null,YF=({show:e,onContinue:t})=>e?v.jsx(Wa,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,FF=({show:e,isMultiplayer:t,phase:n,actionType:r="action"})=>{if(!e)return null;const i=t?"Opponent's Turn":"AI Thinking...";let o;return r==="deploy"?o=t?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...":r==="another"?o="Your opponent takes another action!":n==="deployment"?o=t?"Your opponent is deploying a drone. Wait for their turn to complete.":"AI is deciding on drone deployment...":o=t?"Your opponent is taking their turn.":"AI is deciding on its next action...",v.jsx(Wa,{title:i,text:o,onClose:null})},KF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=u=>{switch(u){case"determineFirstPlayer":return{title:"Waiting for Acknowledgment",message:`Waiting for ${n} to acknowledge first player determination`};case"mandatoryDiscard":return{title:"Waiting for Discard",message:`Waiting for ${n} to complete mandatory discard`};case"allocateShields":return{title:"Waiting for Shield Allocation",message:`Waiting for ${n} to allocate shields`};case"mandatoryDroneRemoval":return{title:"Waiting for Drone Removal",message:`Waiting for ${n} to remove excess drones`};default:return{title:"Waiting for Opponent",message:`Waiting for ${n} to complete their action`}}},{title:o,message:l}=i(t);return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-amber-500 p-6 shadow-2xl shadow-amber-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 mb-2",children:[v.jsx(Rw,{className:"w-6 h-6"}),v.jsx(Ov,{className:"w-6 h-6 animate-spin"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:o}),v.jsx("p",{className:"text-gray-300 text-sm",children:l})]}),r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Lw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"You have completed your part:"}),v.jsx("p",{className:"text-white text-sm",children:"Waiting for opponent to finish"})]}),v.jsx("div",{className:"flex justify-center",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},VF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&v.jsx("button",{onClick:e.onCancel,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:n}),v.jsx("p",{className:"modal-text",children:e.text}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},XF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",o=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:o}),v.jsx("p",{className:"modal-text",children:l})]})})},WF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{if(!n)return null;const i=e===t;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:i?"Victory!":"Defeat!"}),v.jsx("p",{className:"modal-text",children:i?"You have crippled the enemy command ship.":"Your command ship has been crippled."}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"View Final Board"})})]})})},QF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=o=>{if(o.type==="deploy"||!o.target)return o.targetName;if(o.type==="attack")return`${o.target.name.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase())} (Lane ${o.attacker.lane.slice(-1)})`;const l=o.target.owner===r()?"Player":"AI";return String(o.target.id).startsWith("lane")?`${l} Lane ${o.target.id.slice(-1)}`:`${l}: ${o.targetName}`};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),v.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:e.sort((o,l)=>l.score-o.score).map((o,l)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${o.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:o.type?o.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:o.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:i(o)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:o.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:o.score}),v.jsx("td",{className:"p-2 text-center",children:o.isChosen&&v.jsx("span",{className:"text-yellow-400",children:"✔"})})]},l))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},ZF=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:o}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Deployment"}),v.jsxs("p",{className:"modal-text",children:["This deployment will use ",i," Initial Deployment points and cost ",o," Energy. Proceed?"]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},JF=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:o,to:l}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Move"}),v.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",o," to ",l,"? The drone will be exhausted."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},eK=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:o,isMyTurn:l,passInfo:u,getLocalPlayerId:d,localPlayerState:h,shipAbilityMode:p,droneRefs:m,mandatoryAction:y})=>{if(!t||!e)return null;const{attackDetails:x,interceptors:S}=e,{attacker:A,target:P,targetType:E,lane:O}=x;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-3xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Interception Opportunity!"}),v.jsxs("p",{className:"modal-text",children:["Combat in ",O?.replace("lane","Lane ")||"Unknown Lane"]}),v.jsxs("div",{className:"flex justify-around items-center my-4 p-4 bg-black/20 rounded-lg",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-pink-400 mb-2",children:"Attacker"}),v.jsx(ed,{drone:A,isPlayer:!1,lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h})]}),v.jsx("div",{className:"text-4xl font-bold text-gray-500",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-cyan-400 mb-2",children:"Target"}),E==="drone"?v.jsx(ed,{drone:P,isPlayer:!0,lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h}):v.jsx("div",{className:"transform scale-75",children:v.jsx(ad,{section:P.name,stats:h.shipSections[P.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:o,isMyTurn:l,passInfo:u,getLocalPlayerId:d,localPlayerState:h,shipAbilityMode:p})})]})]}),v.jsx("h3",{className:"text-center text-white text-xl font-semibold mt-6 mb-2",children:"Choose an Interceptor"}),v.jsx("p",{className:"text-center text-gray-400 mb-4",children:"Drones with higher speed or special abilities can intercept the attack."}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 my-4",children:S.map(_=>v.jsx(ed,{drone:_,isPlayer:!0,onClick:()=>n(_),lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:h},_.id))}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline Interception"})})]})})},tK=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),v.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},nK=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:o}=e;let l="";return o&&(o.name?l=o.name:o.id&&o.id.startsWith("lane")?l=`Lane ${o.id.slice(-1)}`:o.id&&(l=o.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},rK=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:o,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",o.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},aK=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:o,target:l}=e,u=o.replace(/([A-Z])/g," $1").replace(/^./,h=>h.toUpperCase());let d="";return l&&(d=l.name),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${d}`:"","? This will cost ",i.cost.energy," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},iK=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),v.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>v.jsx(Ph,{card:i,isPlayable:!1},i.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),sK=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,o]=C.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(y,x)=>{navigator.clipboard.writeText(JSON.stringify(y,null,2)).then(()=>console.log(`${x} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},d=y=>y===null?"null":y===void 0?"undefined":typeof y=="boolean"?y.toString():typeof y=="string"?`"${y}"`:typeof y=="number"?y.toString():Array.isArray(y)?y.length===0?"[]":`[${y.length} items]`:typeof y=="object"?Object.keys(y).length===0?"{}":`{${Object.keys(y).length} properties}`:String(y),h=(y,x,S="")=>v.jsxs("div",{className:`mb-6 ${S}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-white",children:x}),v.jsxs("button",{onClick:()=>u(y,x),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[v.jsx(Iw,{size:12}),"Copy"]})]}),v.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-800",children:[v.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),v.jsx("tbody",{children:Object.entries(y).map(([A,P],E)=>v.jsxs("tr",{className:E%2===0?"bg-gray-900":"bg-gray-800",children:[v.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),v.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:d(P)}),v.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof P=="object"&&P!==null?Array.isArray(P)?"array":"object":typeof P})]},A))})]})})]}),p=()=>{const y={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return v.jsxs("div",{className:"p-4 space-y-6",children:[h(y,"Core Game Info"),h(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),h(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),h({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),h({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&h(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return v.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const y=r.getEffectiveShipStats(l.player1,l.placedSections),x=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(E=>{S[E]=l.player1.dronesOnBoard[E].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,E)})),A[E]=l.player2.dronesOnBoard[E].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,E)}))});const P=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return v.jsxs("div",{className:"p-4 space-y-6",children:[h(y,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),h(x,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),h(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),h(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),h(P,"GameDataService Cache Statistics")]})}catch(y){return v.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",y.message]})}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Ft,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Game Debug View"}),v.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[v.jsx("button",{onClick:()=>o("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),v.jsx("button",{onClick:()=>o("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),v.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?p():m()}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},oK=(e,t)=>{const[n,r]=C.useState([]),i=C.useCallback(o=>{const l=_e.createExplosionEffect(o),u=Y2(e.current[o],t.current);if(u){const d=`${l.timestamp}-${Math.random()}`;r(h=>[...h,{id:d,top:u.y,left:u.x}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},l.duration)}},[e,t]);return{explosions:n,triggerExplosion:i}},Dw=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:o,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:d,updatePlayerState:h,addLogEntry:p,resetGame:m,setWinner:y,processAction:x,gameStateManager:S,p2pManager:A}=zi(),{getEffectiveStats:P,getEffectiveShipStats:E,gameDataService:O}=Ch(),{explosions:_}=oK(),N=!0,[j,D]=C.useState(!1),[R,k]=C.useState(!1),[U,Z]=C.useState(null),[q,J]=C.useState(null),[ce,se]=C.useState(null),[te,$]=C.useState(null),[ee,pe]=C.useState(!1),[he,I]=C.useState(!1),[K,Y]=C.useState(!1),[le,ye]=C.useState(!1),[z,re]=C.useState(null),[be,me]=C.useState({phase:"action",actionType:"action"}),[ie,ue]=C.useState(!1),[ve,fe]=C.useState(!1),[rt,ze]=C.useState(!1),[Me,Le]=C.useState(null),[bt,Mr]=C.useState(null),[Qa,qs]=C.useState(null),[Fr,hu]=C.useState(null),[Ys,Fs]=C.useState(null),[Ks,ua]=C.useState(null),[_n,kr]=C.useState([]),[mn,Vi]=C.useState(null),[fa,cl]=C.useState(null),[Xi,Wi]=C.useState(null),[Kr,Za]=C.useState("drones"),[Ja,ul]=C.useState(!0),[pu,fl]=C.useState([]),[da,ei]=C.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[Ib,Eh]=C.useState({}),[xt,Rn]=C.useState(null),[ha,Vs]=C.useState([]),[fr,gn]=C.useState(null),[Ct,wt]=C.useState(null),[kt,In]=C.useState(null),[pa,dl]=C.useState([]),[ma,Ln]=C.useState(null),[ga,Rr]=C.useState(null),[Ye,yn]=C.useState(null),[ti,Ot]=C.useState(null),[mu,hl]=C.useState(null),[ya,va]=C.useState(null),[Vr,ni]=C.useState(null),[gu,yu]=C.useState(!1),[Qi,Ir]=C.useState(null),[$n,ri]=C.useState(null),[ai,ii]=C.useState(null),[Xs,Zi]=C.useState(0),[vu,pl]=C.useState(0),[Kn,bu]=C.useState(null),[Lb,ml]=C.useState(null),[wh,Ws]=C.useState(null),Qs=C.useRef(null),vn=C.useRef({}),ba=C.useRef(null),xa=C.useRef(!1),gl=C.useRef(sn),si=C.useRef(Fe),xu=C.useRef(Tn);C.useEffect(()=>{$c.initialize(S,ia,S.actionProcessor,()=>e.gameMode!=="local",Io),console.log("🔧 GameFlowManager initialized")},[]),C.useEffect(()=>{const V=Ny.subscribe(X=>{switch(console.log("📢 SequentialPhaseManager event:",X),X.type){case"phase_started":console.log(`🎯 Sequential phase started: ${X.phase}, first player: ${X.firstPlayer}`);break;case"turn_changed":console.log(`🔄 Turn changed to ${X.player} in ${X.phase} phase`);break;case"player_passed":console.log(`🏳️ ${X.player} passed in ${X.phase} phase`);break;case"phase_completed":console.log(`✅ ${X.phase} phase completed, first passer: ${X.firstPasser}`);break;default:console.log(`📌 Unknown sequential phase event: ${X.type}`)}});return()=>{V()}},[]),C.useEffect(()=>{const V=de=>{const{type:Se,phase:je,playerId:Re,data:Qe}=de;if(console.log(`🔔 App.jsx received PhaseManager event: ${Se}`,{phase:je,playerId:Re}),Se==="phaseTransition"){const{newPhase:Rt,previousPhase:Wt,firstPlayerResult:Gt}=de;console.log(`🔄 App.jsx handling phase transition: ${Wt} → ${Rt}`),Rt==="determineFirstPlayer"&&(console.log("🎯 First player determination phase started, showing modal"),pe(!0))}else Se==="phaseComplete"&&(console.log(`🎯 App.jsx handling phase completion: ${je}`),z===je&&re(null),je==="determineFirstPlayer"&&console.log("✅ Both players acknowledged first player determination"))},X=$c.subscribe(V),ge=ia.subscribe(V);return()=>{X(),ge()}},[i,n,Z]);const{turnPhase:Fe,turn:Bn,currentPlayer:Lr,firstPlayerOfRound:yl,firstPasserOfPreviousRound:Su,firstPlayerOverride:Au,passInfo:sn,winner:Tn,unplacedSections:vl,shieldsToAllocate:bl,gameLog:Ji,placedSections:es}=e,Ee=o(),Be=l(),dr=u(),Xr=d();if(!Ee||!Be)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});const oi=C.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]),on=C.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);C.useEffect(()=>{gl.current=sn},[sn]),C.useEffect(()=>{si.current=Fe},[Fe]),C.useEffect(()=>{xu.current=Tn},[Tn]),C.useEffect(()=>{if(!i())return;const V=ge=>{if(console.log("🔥 P2P Event received in App:",ge),ge.type==="PHASE_COMPLETED"){const{phase:de}=ge.data||ge;console.log(`🔥 Opponent completed phase: ${de}`)}};return A.subscribe(V)},[i,A]);const li=Ee?E(Ee,dr):null,ci=Be?E(Be,Xr):null,$r=C.useMemo(()=>Ee?Object.values(Ee.dronesOnBoard).flat().length:0,[Ee?.dronesOnBoard]),Zs=C.useMemo(()=>Be?Object.values(Be.dronesOnBoard).flat().length:0,[Be?.dronesOnBoard]),Js=C.useMemo(()=>[...Ee.activeDronePool].sort((V,X)=>V.class!==X.class?V.class-X.class:V.name.localeCompare(X.name)),[Ee.activeDronePool]);C.useMemo(()=>Ee?Object.keys(Ee.shipSections).some(V=>Ee.shipSections[V].allocatedShields<O.getEffectiveSectionMaxShields(V,Ee,dr)):!1,[Ee.shipSections,dr,O]),C.useCallback(V=>{if(console.log(`🔥 sendPhaseCompletion called for phase: ${V}`),i()){const X={type:"PHASE_COMPLETED",data:{phase:V}};console.log("🔥 Sending phase completion message:",X),A.sendData(X),console.log(`🔥 Sent phase completion: ${V}`)}else console.log("🔥 Not multiplayer, skipping network send")},[i,A]),C.useCallback(async()=>{Vi(null),await x("turnTransition",{newPlayer:n(),reason:"aiReportClosed"})},[x,n]),C.useCallback(async()=>{fa&&!fa.card.effect.goAgain?await x("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):fa&&fa.card.effect.goAgain&&!Tn&&(await x("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),me({phase:Fe,actionType:"another"}),ye(!0)),cl(null)},[x,n,r,fa,Tn]),C.useEffect(()=>{const{validAbilityTargets:V,validCardTargets:X}=_e.calculateAllValidTargets(xt,fr,Ye,kt,Ee,Be);Vs(V),dl(X),xt&&(In(null),gn(null))},[xt,fr,kt,Ee,Be,Ye]);const Wr=()=>{xt&&(Rn(null),Le(null))},_t=()=>{In(null),yn(null)},Vn=C.useCallback(async V=>{if(xa.current){console.warn("Attack already in progress. Aborting duplicate call.");return}xa.current=!0;try{const X=de=>{fl(Se=>[...Se,de]),setTimeout(()=>fl(Se=>Se.filter(je=>je!==de)),500)},ge=await x("attack",{attackDetails:V});V.targetId&&X(V.targetId),V.attackingPlayer===r()&&Vi({...ge.attackResult,isBlocking:!0}),ge.afterAttackEffects&&ge.afterAttackEffects.forEach(de=>{de.type==="EXPLOSION"&&triggerExplosion(de.payload.targetId)}),hu(null)}catch(X){console.error("Error in resolveAttack:",X),hu(null),Vi(null)}finally{xa.current=!1}},[triggerExplosion,x,n,r]),xl=C.useCallback(async(V,X,ge)=>{try{const de=await x("ability",{droneId:X.id,abilityIndex:X.abilities.indexOf(V),targetId:ge?.id||null});Wr()}catch(de){console.error("Error in resolveAbility:",de),Wr()}},[x,n]),bn=C.useCallback(async(V,X,ge)=>{const de=await x("shipAbility",{ability:V,sectionName:X,targetId:ge?.id||null,playerId:n()});if(de.mandatoryAction){ni(de.mandatoryAction),Za("hand"),ul(!0),gn(null),wt(null);return}if(de.requiresShieldReallocation){gn(null),wt(null);return}return gn(null),wt(null),de},[x,n]),Qr=C.useCallback(async(V,X,ge,de=null)=>{if(ge===r()){let je="",Re="";if(X)if(X.name){if(je=X.name,X.id&&X.owner){const Qe=X.owner===n()?Ee:Be;for(const[Rt,Wt]of Object.entries(Qe.dronesOnBoard))if(Wt.some(Gt=>Gt.id===X.id)){Re=Rt.replace("lane","Lane ");break}}}else X.id.startsWith("lane")?(je=`Lane ${X.id.slice(-1)}`,Re=`Lane ${X.id.slice(-1)}`):je=X.id.replace(/([A-Z])/g," $1").replace(/^./,Qe=>Qe.toUpperCase());cl({card:V,targetName:je,targetLane:Re})}const Se=await x("cardPlay",{card:V,targetId:X?.id||null,playerId:ge});if(Se.needsCardSelection){ri({...Se.needsCardSelection,onConfirm:je=>{eo(je,Se.needsCardSelection,V,X,ge,de,Se.newPlayerStates),ri(null)},onCancel:()=>{ri(null),ge===n()&&(_t(),Ln(null))}});return}return ge===n()&&(_t(),Ln(null)),Se},[x,n,Ee,Be]),eo=C.useCallback((V,X,ge,de,Se,je,Re=null)=>{const{searchedCards:Qe,remainingDeck:Rt,discardPile:Wt,shuffleAfter:Gt}=X,Tt=Qe.filter(hr=>{const Uh=hr.instanceId||`${hr.id}-${hr.name}`;return!V.some(El=>(El.instanceId||`${El.id}-${El.name}`)===Uh)}),ln=Re||{player1:Ee,player2:Be},Dn=Se===n()?ln[n()]:ln[r()],no=[...Dn.hand,...V];let ui=[...Rt,...Tt];Gt&&(ui=ui.sort(()=>.5-Math.random()));const Sa={...Dn,deck:ui,hand:no,discardPile:Wt};p({player:Dn.name,actionType:"CARD_SELECTION",source:ge.name,target:`Selected ${V.length} cards`,outcome:`Drew: ${V.map(hr=>hr.name).join(", ")}`},"handleCardSelection",Se===r()?je:null);const Ou={[n()]:Se===n()?{...Dn,deck:Sa.deck,hand:Sa.hand,discardPile:Sa.discardPile}:ln[n()],[r()]:Se===r()?{...Dn,deck:Sa.deck,hand:Sa.hand,discardPile:Sa.discardPile}:ln[r()]},Pl=_e.finishCardPlay(ge,Se,Ou);S.setPlayerStates(Pl.newPlayerStates.player1,Pl.newPlayerStates.player2),Se===n()&&(_t(),Ln(null))},[Ee,Be,p]),ts=C.useCallback((V,X,ge,de)=>{const Se=_e.resolveMultiMove(V,X,ge,de,Ee,l(),on(),{logCallback:p,applyOnMoveEffectsCallback:_e.applyOnMoveEffects,updateAurasCallback:_e.updateAuras});h(n(),Se.newPlayerState),Se.shouldClearMultiSelectState&&yn(null),Se.shouldCancelCardSelection&&_t()},[Ee,p,_e,dr,Xr]),Oh=C.useCallback((V,X,ge,de)=>{const Se=_e.resolveSingleMove(V,X,ge,de,Ee,l(),on(),{logCallback:p,applyOnMoveEffectsCallback:_e.applyOnMoveEffects,updateAurasCallback:_e.updateAuras});h(n(),Se.newPlayerState),Se.shouldClearMultiSelectState&&yn(null),Se.shouldCancelCardSelection&&_t()},[Ee,p,_e,dr,Xr]),Sl=V=>{Ja?Kr===V?ul(!1):Za(V):(ul(!0),Za(V))};C.useEffect(()=>{const{validAbilityTargets:V,validCardTargets:X}=_e.calculateAllValidTargets(xt,fr,Ye,kt,Ee,Be);Vs(V),dl(X),xt&&(In(null),gn(null))},[xt,fr,kt,Ee,Be,Ye]),C.useEffect(()=>{Tn||_e.checkGameStateForWinner(oi(),{logCallback:p,setWinnerCallback:y,showWinnerModalCallback:ue})},[Ee?.shipSections,Be?.shipSections,Tn,p]),C.useEffect(()=>{if(Fe==="action"){const V=_e.calculatePotentialInterceptors(Me,Ee,Be,on());kr(V)}else kr([])},[Me,Fe,Ee,Be,_e,dr,Xr]),C.useEffect(()=>{Mr(null)},[Me]),C.useEffect(()=>{if(Me&&!xt&&Fe==="action"){const V=Y2(vn.current[Me.id],ba.current);V&&ei({visible:!0,start:V,end:{x:V.x,y:V.y}})}else ei(V=>({...V,visible:!1}))},[Me,Fe,xt]),C.useEffect(()=>{const V=ge=>{if(da.visible&&Qs.current&&ba.current){const de=ba.current.getBoundingClientRect(),Se=ge.clientX-de.left,je=ge.clientY-de.top;Qs.current.setAttribute("x2",Se),Qs.current.setAttribute("y2",je)}},X=ba.current;return X?.addEventListener("mousemove",V),()=>{X?.removeEventListener("mousemove",V)}},[da.visible]),C.useEffect(()=>{Tn&&xa.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),xa.current=!1)},[Tn,Fe,Lr]);const[ns,rs]=C.useState(Lr);C.useEffect(()=>{if(Fe!=="deployment"&&Fe!=="action"||Tn||ee||he||K||q||ce||ma||Lr===ns)return;const V=t(),X=i();console.log("[MODAL UPDATE] Turn change detected:",{currentPlayer:Lr,lastCurrentPlayer:ns,myTurn:V,turnPhase:Fe,isMultiplayerGame:X,currentModalTitle:U?.title}),rs(Lr),V?Fe==="deployment"?(Z(null),ye(!1)):Fe==="action"&&(Z({title:"Action Phase - Your Turn",text:"It's your turn to act. Select a drone to move or attack, play a card, or use an ability.",isBlocking:!0}),ye(!1)):(me({phase:Fe,actionType:"action"}),ye(!0))},[Lr,Fe,t,i,Bn,Tn,ee,he,K,q,ce,ma,ns,U?.title]);const to=()=>{m(),xa.current=!1,Le(null),Z(null),Vi(null),Rn(null),Vs([]),ni(null),yu(!1),Ir(null),In(null),dl([]),Ln(null),ue(!1)},Cu=async V=>{const{turnPhase:X}=e;X==="allocateShields"?await x("allocateShield",{sectionName:V,playerId:n()}):await x("reallocateShields",{action:"add",sectionName:V,playerId:n()})},_h=async V=>{if(vu<=0||Ee.shipSections[V].allocatedShields<=0)return;(await x("reallocateShields",{action:"remove",sectionName:V,playerId:n()})).success&&(pl(de=>de-1),Zi(de=>de+1))},Th=async V=>{if(Xs<=0)return;(await x("reallocateShields",{action:"add",sectionName:V,playerId:n()})).success&&Zi(ge=>ge-1)},Dh=async()=>{console.log("🎯 App.jsx: Acknowledging first player determination");const V=n();(await x("acknowledgeFirstPlayer",{playerId:V})).success&&(pe(!1),!ia.getCommitmentStatus("determineFirstPlayer").allComplete&&e.gameMode!=="local"&&re("determineFirstPlayer"))},Al=V=>{if(ai){ai==="removing"?_h(V):ai==="adding"&&Th(V);return}Fe==="allocateShields"&&Cu(V)},jh=V=>{sn[n()+"Passed"]||(Me&&Me.name===V.name?Le(null):(Le(V),Rn(null),_t()))},Pu=async V=>{try{const X=await x("deployment",{droneData:Me,laneId:V,playerId:n(),turn:Bn});X.success?Le(null):Z({title:X.error,text:X.message,isBlocking:!0})}catch(X){console.error("Error executing deployment:",X),Z({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Nh=V=>{if(!(!Me||Lr!==n()||sn[n()+"Passed"])){if(Bn===1){const X=_e.validateDeployment(Ee,Me,Bn,$r,li);if(!X.isValid){Z({title:X.reason,text:X.message,isBlocking:!0});return}const{budgetCost:ge,energyCost:de}=X;if(de>0){J({lane:V,budgetCost:ge,energyCost:de});return}}Pu(V)}},Mh=async()=>{sn[`${n()}Passed`]||await x("playerPass",{playerId:n(),playerName:Ee.name,turnPhase:Fe,passInfo:sn,opponentPlayerId:r()})};C.useEffect(()=>{if(!Fr||Fr.attackingPlayer!==r())return;const V=_e.calculateAiInterception(Fr,oi(),on());V.hasInterceptors?ua({attackDetails:V.attackDetails,interceptors:V.interceptors}):Vn(Fr)},[Fr,Vn,dr,Xr]);const kh=(V,X,ge)=>{if(V.stopPropagation(),Fe!=="action"||Lr!==n()||sn[n()+"Passed"])return;const de=ge.cost||{};if(X.isExhausted&&de.exhausts!==!1){Z({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(de.energy&&Ee.energy<de.energy){Z({title:"Not Enough Energy",text:`This ability costs ${de.energy} energy, but you only have ${Ee.energy}.`,isBlocking:!0});return}if(ge.targeting?.type==="LANE"&&ge.targeting?.location==="SAME_LANE"){const Se=_e.getLaneOfDrone(X.id,Ee);if(Se){Rr({ability:ge,drone:X,target:{id:Se,owner:n()}});return}}xt&&xt.drone.id===X.id?Wr():(Rn({drone:X,ability:ge}),Le(X),_t())},Eu=(V,X,ge)=>{if(V.stopPropagation(),!(Fe!=="action"||!t()||sn[`${n()}Passed`])){if(Ee.energy<ge.cost.energy){Z({title:"Not Enough Energy",text:`This ability costs ${ge.cost.energy} energy, but you only have ${Ee.energy}.`,isBlocking:!0});return}fr?.ability.id===ge.id?gn(null):ge.targeting?(gn({sectionName:X.name,ability:ge}),Le(null),Wr(),_t()):ge.effect.type==="REALLOCATE_SHIELDS"?(ii("removing"),pl(ge.effect.value.maxShields),Zi(0),bu(JSON.parse(JSON.stringify(Ee.shipSections))),Ws({ability:ge,sectionName:X.name})):wt({ability:ge,sectionName:X.name,target:null})}},Rh=(V,X,ge)=>{if(V.stopPropagation(),console.log(`--- handleTokenClick triggered for ${X.name} (isPlayer: ${ge}) ---`),Ye&&Ye.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:de,maxSelection:Se}=Ye;de.some(Re=>Re.id===X.id)?yn(Re=>({...Re,selectedDrones:Re.selectedDrones.filter(Qe=>Qe.id!==X.id)})):de.length<Se&&yn(Re=>({...Re,selectedDrones:[...Re.selectedDrones,X]}));return}if(ha.some(de=>de.id===X.id)||pa.some(de=>de.id===X.id)){console.log("Action: Targeting for an active card/ability."),wu(X,"drone",ge);return}if(Fe==="action"&&t()&&Me&&!Me.isExhausted&&!ge){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",Me.name,`(ID: ${Me.id})`),console.log("Target clicked:",X.name,`(ID: ${X.id})`);const[de]=Object.entries(Ee.dronesOnBoard).find(([je,Re])=>Re.some(Qe=>Qe.id===Me.id))||[],[Se]=Object.entries(Be.dronesOnBoard).find(([je,Re])=>Re.some(Qe=>Qe.id===X.id))||[];if(console.log("Calculated Attacker Lane:",de),console.log("Calculated Target Lane:",Se),de&&Se&&de===Se)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),Be.dronesOnBoard[Se].some(Qe=>P(Qe,Se).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),Z({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const Qe={attacker:Me,target:X,targetType:"drone",lane:de,attackingPlayer:n()},Rt=P(Me,de),Wt=Be.dronesOnBoard[de].filter(Tt=>{const ln=P(Tt,de);return!Tt.isExhausted&&(ln.speed>Rt.speed||ln.keywords.has("ALWAYS_INTERCEPTS"))&&Tt.id!==X.id}).sort((Tt,ln)=>Tt.class-ln.class);let Gt=null;Wt.length>0&&(X.class===void 0||Wt[0].class<X.class)&&(Gt=Wt[0]),Gt?Fs({interceptor:Gt,originalTarget:X,onClose:()=>{Vn({...Qe,interceptor:Gt}),Fs(null),Le(null)}}):(Vn(Qe),Le(null))}else console.log("FAILURE: Lanes do not match or could not be found."),Z({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(Ye&&Ye.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:de,maxSelection:Se}=Ye;de.some(Re=>Re.id===X.id)?yn(Re=>({...Re,selectedDrones:Re.selectedDrones.filter(Qe=>Qe.id!==X.id)})):de.length<Se&&yn(Re=>({...Re,selectedDrones:[...Re.selectedDrones,X]}));return}if(Vr?.type==="destroy"&&ge){console.log("Action: Mandatory destruction."),Ir({type:"destroy",target:X,onConfirm:()=>$h(X),onCancel:()=>Ir(null),text:`Are you sure you want to destroy your ${X.name}?`});return}if(ge&&Fe==="action"&&t()&&!sn[`${n()}Passed`]){if(X.isExhausted){console.log("Action prevented: Drone is exhausted.");return}Me?.id===X.id?(console.log("Action: Deselecting drone",X.name),Le(null)):(console.log("Action: Selecting drone",X.name),Le(X),Wr(),_t());return}console.log("Action: Fallback - showing drone details."),$(X)},wu=(V,X,ge)=>{if(fr&&ha.some(de=>de.id===V.id)){wt({ability:fr.ability,sectionName:fr.sectionName,target:V});return}if(xt&&ha.some(de=>de.id===V.id)){xl(xt.ability,xt.drone,V);return}if(kt&&pa.some(de=>de.id===V.id)){const de=ge?n():r();Ln({card:kt,target:{...V,owner:de}});return}if(Fe==="action"&&t()&&Me&&!Me.isExhausted&&!ge&&X==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",Me.name,`(ID: ${Me.id})`),console.log("Target clicked:",V.name,`(Type: ${X})`);const[de]=Object.entries(Ee.dronesOnBoard).find(([Se,je])=>je.some(Re=>Re.id===Me.id))||[];if(console.log("Calculated Attacker Lane:",de),de){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const Se=Be.dronesOnBoard[de];if(Se&&Se.some(Re=>P(Re,de).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),Z({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const Re={attacker:Me,target:V,targetType:"section",lane:de,attackingPlayer:n()},Qe=P(Me,de),Rt=Be.dronesOnBoard[de].filter(Gt=>{const Tt=P(Gt,de);return!Gt.isExhausted&&(Tt.speed>Qe.speed||Tt.keywords.has("ALWAYS_INTERCEPTS"))}).sort((Gt,Tt)=>Gt.class-Tt.class);let Wt=null;Rt.length>0&&(Wt=Rt[0]),Wt?Fs({interceptor:Wt,originalTarget:V,onClose:()=>{Vn({...Re,interceptor:Wt}),Fs(null),Le(null)}}):(Vn(Re),Le(null))}}else console.log("FAILURE: Could not determine attacker lane."),Z({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}X==="drone"&&$(V)},Ih=(V,X,ge)=>{if(V.stopPropagation(),xt&&xt.ability.targeting.type==="LANE"){const de=ge?n():r();if(ha.some(Se=>Se.id===X&&Se.owner===de)){Rr({ability:xt.ability,drone:xt.drone,target:{id:X,owner:de}});return}}if(Ye&&ge&&pa.some(de=>de.id===X)){const{phase:de,sourceLane:Se,selectedDrones:je}=Ye;if(de==="select_source_lane"){yn(Re=>({...Re,phase:"select_drones",sourceLane:X}));return}if(de==="select_destination_lane"){ts(Ye.card,je,Se,X);return}}if(Ye&&Ye.card.effect.type==="SINGLE_MOVE"&&Ye.phase==="select_destination"&&ge){pa.some(de=>de.id===X)&&Oh(Ye.card,Ye.selectedDrone,Ye.sourceLane,X);return}if(kt&&kt.targeting.type==="LANE"){const de=ge?n():r();if(pa.some(Se=>Se.id===X&&Se.owner===de)){Ln({card:kt,target:{id:X,owner:de}});return}}if(kt){_t();return}if(xt){Wr();return}if(Fe==="deployment"&&ge)Nh(X);else if(Fe==="action"&&ge&&Me){const[de]=Object.entries(Ee.dronesOnBoard).find(([Re,Qe])=>Qe.some(Rt=>Rt.id===Me.id))||[];if(!de)return;const Se=parseInt(de.replace("lane",""),10),je=parseInt(X.replace("lane",""),10);Math.abs(Se-je)===1?se({drone:Me,from:de,to:X}):Z({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},Lh=V=>{if(!(Fe!=="action"||!t()||sn[`${n()}Passed`])&&!(Ee.energy<V.cost)){if(V.effect.type==="MULTI_MOVE"){Ye&&Ye.card.instanceId===V.instanceId?_t():(yn({card:V,phase:"select_source_lane",sourceLane:null,selectedDrones:[],maxSelection:V.effect.count}),In(V),Le(null),Rn(null));return}if(V.effect.type==="SINGLE_MOVE"){Ye&&Ye.card.instanceId===V.instanceId?_t():(yn({card:V,phase:"select_drone",selectedDrone:null,sourceLane:null}),In(V),Le(null),Rn(null));return}if(kt?.instanceId===V.instanceId)_t();else if(V.name==="System Sabotage"){const X=_e.getValidTargets(n(),null,V,Ee,Be);Ot({card:V,targets:X,opponentState:Be}),In(null),Rn(null),Le(null)}else if(V.type==="Upgrade"){const X=_e.getValidTargets(n(),null,V,Ee,Be);X.length>0?(hl({card:V,targets:X}),In(null),Rn(null),Le(null)):Z({title:"No Valid Targets",text:`There are no drone types that can accept the '${V.name}' upgrade right now.`,isBlocking:!0})}else V.targeting?(In(V),Le(null),Rn(null)):(Ln({card:V,target:null}),In(null),Rn(null),Le(null))}},Cl=async V=>{const X=Vr;p({player:Ee.name,actionType:"DISCARD_MANDATORY",source:V.name,target:"N/A",outcome:`Discarded ${V.name}.`},"handleConfirmMandatoryDiscard"),await x("optionalDiscard",{playerId:n(),cardsToDiscard:[V]}),Ir(null);const ge=X.count-1;ge<=0?(ni(null),X.fromAbility):ni(de=>({...de,count:ge}))},$h=V=>{const X=_e.getLaneOfDrone(V.id,Ee);if(X){let ge={...Ee,dronesOnBoard:{...Ee.dronesOnBoard}};ge.dronesOnBoard[X]=ge.dronesOnBoard[X].filter(Se=>Se.id!==V.id);const de=_e.onDroneDestroyed(ge,V);Object.assign(ge,de),ge.dronesOnBoard=_e.updateAuras(ge,l(),on()),h(n(),ge)}ni(ge=>{const de=ge.count-1;if(de<=0){if(Zs>ci.totals.cpuLimit){let je={...Be},Re=Object.values(Be.dronesOnBoard).flat().length-E(Be,Xr).totals.cpuLimit;for(let Qe=0;Qe<Re;Qe++){const Rt=Object.entries(je.dronesOnBoard).flatMap(([Dn,no])=>no.map(ui=>({...ui,lane:Dn})));if(Rt.length===0)break;const Wt=Math.min(...Rt.map(Dn=>Dn.class)),Gt=Rt.filter(Dn=>Dn.class===Wt),Tt=Gt[Math.floor(Math.random()*Gt.length)];je.dronesOnBoard[Tt.lane]=je.dronesOnBoard[Tt.lane].filter(Dn=>Dn.id!==Tt.id);const ln=_e.onDroneDestroyed(je,Tt);Object.assign(je,ln)}je.dronesOnBoard=_e.updateAuras(je,o(),on()),h(r(),je)}return null}return{...ge,count:de}}),Ir(null)},Bh=()=>{if(Ji.length===0){alert("The game log is empty.");return}const V=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],X=Ji.map(je=>[je.round,je.player,je.actionType,je.source,je.target,je.outcome,je.debugSource||"N/A"].map(Qe=>`"${String(Qe).replace(/"/g,'""')}"`).join(",")),ge=[V.join(","),...X].join(`
`),de=new Blob([ge],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a");if(Se.download!==void 0){const je=URL.createObjectURL(de);Se.setAttribute("href",je),Se.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Se.style.visibility="hidden",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)}};return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",ref:ba,onClick:()=>{Wr(),_t()},children:[v.jsx(kF,{visible:da.visible,start:da.start,end:da.end,lineRef:Qs}),_.map(V=>v.jsx(RF,{top:V.top,left:V.left},V.id)),v.jsx(SY,{localPlayerState:Ee,opponentPlayerState:Be,localPlayerEffectiveStats:li,opponentPlayerEffectiveStats:ci,turnPhase:Fe,turn:Bn,passInfo:sn,firstPlayerOfRound:yl,shieldsToAllocate:bl,shieldsToRemove:vu,shieldsToAdd:Xs,reallocationPhase:ai,totalLocalPlayerDrones:$r,totalOpponentPlayerDrones:Zs,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,handlePlayerPass:Mh,handleReset:to,mandatoryAction:Vr,multiSelectState:Ye,AI_HAND_DEBUG_MODE:N,setShowAiHandModal:D,onShowDebugModal:()=>k(!0)}),v.jsx(PY,{localPlayerState:Ee,opponentPlayerState:Be,localPlacedSections:dr,opponentPlacedSections:Xr,selectedCard:kt,validCardTargets:pa,abilityMode:xt,validAbilityTargets:ha,multiSelectState:Ye,turnPhase:Fe,reallocationPhase:ai,shipAbilityMode:fr,hoveredTarget:bt,selectedDrone:Me,recentlyHitDrones:pu,potentialInterceptors:_n,droneRefs:vn,mandatoryAction:Vr,gameEngine:_e,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:on,passInfo:sn,handleTargetClick:wu,handleLaneClick:Ih,handleShipSectionClick:Al,handleShipAbilityClick:Eu,handleTokenClick:Rh,handleAbilityIconClick:kh,setHoveredTarget:Mr}),v.jsx(TF,{localPlayerState:Ee,localPlayerEffectiveStats:li,sortedLocalActivePool:Js,gameLog:Ji,footerView:Kr,isFooterOpen:Ja,multiSelectState:Ye,selectedCard:kt,turnPhase:Fe,mandatoryAction:Vr,handleFooterButtonClick:Sl,handleCardClick:Lh,cancelCardSelection:_t,downloadLogAsCSV:Bh,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Qa,setHoveredCardId:qs,setIsViewDiscardModalOpen:ze,setIsViewDeckModalOpen:fe,handleToggleDroneSelection:jh,selectedDrone:Me,setViewUpgradesModal:va,handleConfirmMandatoryDiscard:Cl,setConfirmationModal:Ir,turn:Bn,passInfo:sn,validCardTargets:pa,gameEngine:_e,opponentPlayerState:Be,setAiDecisionLogToShow:Wi}),U&&v.jsx(Wa,{title:U.title,text:U.text,onClose:U.onClose===null?null:U.onClose||(()=>Z(null)),children:U.children}),v.jsx(HF,{show:ee,firstPlayerOfRound:yl,localPlayerId:n(),localPlayerName:Ee.name,opponentPlayerName:Be.name,turn:Bn,firstPasserOfPreviousRound:Su,onContinue:Dh}),v.jsx(qF,{show:he,onContinue:()=>I(!1)}),v.jsx(YF,{show:K,onContinue:()=>Y(!1)}),v.jsx(FF,{show:le,isMultiplayer:i(),phase:be.phase,actionType:be.actionType}),v.jsx(KF,{show:!!z,phase:z,opponentName:Be.name,roomCode:null}),v.jsx(ZF,{deploymentConfirmation:q,show:!!q,onCancel:()=>J(null),onConfirm:async()=>{if(!q)return;const{lane:V}=q;await Pu(V),J(null)}}),v.jsx(JF,{moveConfirmation:ce,show:!!ce,onCancel:()=>se(null),onConfirm:async()=>{if(!ce)return;const{drone:V,from:X,to:ge}=ce;await x("move",{droneId:V.id,fromLane:X,toLane:ge,playerId:n()}),se(null),Le(null)}}),v.jsx(tK,{interceptionModal:Ys,show:!!Ys,onClose:Ys?.onClose}),v.jsx(eK,{choiceData:Ks,show:!!Ks,onIntercept:V=>{Vn({...Ks.attackDetails,interceptor:V}),ua(null)},onDecline:()=>{Vn(Ks.attackDetails),ua(null)},gameEngine:_e,turnPhase:Fe,isMyTurn:t,passInfo:sn,getLocalPlayerId:n,localPlayerState:Ee,shipAbilityMode:fr,droneRefs:vn,mandatoryAction:Vr}),v.jsx(GF,{isOpen:!!te,drone:te,onClose:()=>$(null)}),v.jsx(zF,{report:mn,show:!!mn,onClose:()=>Vi(null)}),fa&&v.jsx(UF,{report:fa,onClose:()=>cl(null)}),v.jsx(QF,{decisionLog:Xi,show:!!Xi,onClose:()=>Wi(null),getLocalPlayerId:n}),v.jsx(WF,{winner:Tn,localPlayerId:n(),show:Tn&&ie,onClose:()=>ue(!1)}),v.jsx(XF,{mandatoryAction:Vr,effectiveStats:li,show:Vr&&gu,onClose:()=>yu(!1)}),v.jsx(VF,{confirmationModal:Qi,show:!!Qi}),v.jsx(MF,{viewUpgradesModal:ya,setViewUpgradesModal:va,destroyUpgradeModal:ti,setDestroyUpgradeModal:Ot,upgradeSelectionModal:mu,setUpgradeSelectionModal:hl,resolveCardPlay:Qr,getLocalPlayerId:n,cancelCardSelection:_t}),v.jsx(nK,{cardConfirmation:ma,show:!!ma,onCancel:()=>Ln(null),onConfirm:async()=>await Qr(ma.card,ma.target,n())}),v.jsx(rK,{abilityConfirmation:ga,show:!!ga,onCancel:()=>Rr(null),onConfirm:()=>{xl(ga.ability,ga.drone,ga.target),Rr(null)}}),v.jsx(iK,{opponentPlayerState:Be,show:j,debugMode:N,onClose:()=>D(!1)}),v.jsx(sK,{show:R,onClose:()=>k(!1),gameStateManager:S,gameDataService:O}),v.jsx(Tw,{isOpen:ve,onClose:()=>fe(!1),cards:Ee.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(Tw,{isOpen:rt,onClose:()=>ze(!1),cards:Ee.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(BF,{isOpen:!!$n,onClose:$n?.onCancel||(()=>ri(null)),onConfirm:$n?.onConfirm||(()=>{}),selectionData:$n}),v.jsx(aK,{shipAbilityConfirmation:Ct,show:!!Ct,onCancel:()=>wt(null),onConfirm:async()=>await bn(Ct.ability,Ct.sectionName,Ct.target)}),v.jsx(IF,{isVisible:!1,currentPlayer:Lr,gameMode:e.gameMode,roomCode:null,lastAction:null,localPlayerState:Ee,opponentPlayerState:Be,getLocalPlayerId:n})]})};function lK(){const{gameState:e}=zi(),[t,n]=C.useState(!0);if(C.useEffect(()=>{const r=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(r)},[]),C.useEffect(()=>{ia.initialize(Ve,Io,()=>e.gameMode!=="local"),Ve.actionProcessor.setSimultaneousActionManager(ia),console.log("🔧 SimultaneousActionManager initialized in AppRouter")},[e.gameMode]),C.useEffect(()=>{Io.initialize(My,wn,e.selectedAIPersonality||My[0]),console.log("🤖 AIPhaseProcessor initialized in AppRouter")},[e.selectedAIPersonality]),C.useEffect(()=>{$c.initialize(Ve,ia,Ve.actionProcessor,()=>e.gameMode!=="local",Io),Ve.setGameFlowManager($c),console.log("🔄 GameFlowManager initialized in AppRouter")},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading Drone Wars..."})});switch(e.appState){case"menu":return v.jsx(OA,{});case"lobby":return v.jsx(SR,{});case"inGame":switch(e.turnPhase){case"droneSelection":return v.jsx(CR,{});case"deckSelection":return v.jsx(PR,{});case"deckBuilding":return v.jsx(xY,{});case"placement":return v.jsx(wR,{});case"gameInitializing":return v.jsx(Dw,{});default:return v.jsx(Dw,{})}default:return console.warn("Unknown app state:",e.appState,"defaulting to menu"),v.jsx(OA,{})}}sM.createRoot(document.getElementById("root")).render(v.jsx(Nw.StrictMode,{children:v.jsx(lK,{})}));export{Xc as G,wn as f};
