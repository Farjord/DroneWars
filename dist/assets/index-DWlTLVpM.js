function HP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function da(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cg={exports:{}},Gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA;function eM(){if(uA)return Gc;uA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:o}}return Gc.Fragment=t,Gc.jsx=n,Gc.jsxs=n,Gc}var dA;function tM(){return dA||(dA=1,cg.exports=eM()),cg.exports}var g=tM(),ug={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA;function nM(){if(fA)return ze;fA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=m&&R[m]||R["@@iterator"],typeof R=="function"?R:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,A={};function C(R,K,F){this.props=R,this.context=K,this.refs=A,this.updater=F||b}C.prototype.isReactComponent={},C.prototype.setState=function(R,K){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,K,"setState")},C.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function T(){}T.prototype=C.prototype;function O(R,K,F){this.props=R,this.context=K,this.refs=A,this.updater=F||b}var _=O.prototype=new T;_.constructor=O,x(_,C.prototype),_.isPureReactComponent=!0;var M=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function j(R,K,F,ie,he,me){return F=me.ref,{$$typeof:e,type:R,key:K,ref:F!==void 0?F:null,props:me}}function I(R,K){return j(R.type,K,void 0,void 0,void 0,R.props)}function U(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function Y(R){var K={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(F){return K[F]})}var V=/\/+/g;function W(R,K){return typeof R=="object"&&R!==null&&R.key!=null?Y(""+R.key):K.toString(36)}function ae(){}function ne(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ae,ae):(R.status="pending",R.then(function(K){R.status==="pending"&&(R.status="fulfilled",R.value=K)},function(K){R.status==="pending"&&(R.status="rejected",R.reason=K)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function re(R,K,F,ie,he){var me=typeof R;(me==="undefined"||me==="boolean")&&(R=null);var xe=!1;if(R===null)xe=!0;else switch(me){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(R.$$typeof){case e:case t:xe=!0;break;case h:return xe=R._init,re(xe(R._payload),K,F,ie,he)}}if(xe)return he=he(R),xe=ie===""?"."+W(R,0):ie,M(he)?(F="",xe!=null&&(F=xe.replace(V,"$&/")+"/"),re(he,K,F,"",function(be){return be})):he!=null&&(U(he)&&(he=I(he,F+(he.key==null||R&&R.key===he.key?"":(""+he.key).replace(V,"$&/")+"/")+xe)),K.push(he)),1;xe=0;var Ye=ie===""?".":ie+":";if(M(R))for(var qe=0;qe<R.length;qe++)ie=R[qe],me=Ye+W(ie,qe),xe+=re(ie,K,F,me,he);else if(qe=y(R),typeof qe=="function")for(R=qe.call(R),qe=0;!(ie=R.next()).done;)ie=ie.value,me=Ye+W(ie,qe++),xe+=re(ie,K,F,me,he);else if(me==="object"){if(typeof R.then=="function")return re(ne(R),K,F,ie,he);throw K=String(R),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return xe}function L(R,K,F){if(R==null)return R;var ie=[],he=0;return re(R,ie,"","",function(me){return K.call(F,me,he++)}),ie}function G(R){if(R._status===-1){var K=R._result;K=K(),K.then(function(F){(R._status===0||R._status===-1)&&(R._status=1,R._result=F)},function(F){(R._status===0||R._status===-1)&&(R._status=2,R._result=F)}),R._status===-1&&(R._status=0,R._result=K)}if(R._status===1)return R._result.default;throw R._result}var oe=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function ye(){}return ze.Children={map:L,forEach:function(R,K,F){L(R,function(){K.apply(this,arguments)},F)},count:function(R){var K=0;return L(R,function(){K++}),K},toArray:function(R){return L(R,function(K){return K})||[]},only:function(R){if(!U(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},ze.Component=C,ze.Fragment=n,ze.Profiler=i,ze.PureComponent=O,ze.StrictMode=r,ze.Suspense=p,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ze.__COMPILER_RUNTIME={__proto__:null,c:function(R){return D.H.useMemoCache(R)}},ze.cache=function(R){return function(){return R.apply(null,arguments)}},ze.cloneElement=function(R,K,F){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ie=x({},R.props),he=R.key,me=void 0;if(K!=null)for(xe in K.ref!==void 0&&(me=void 0),K.key!==void 0&&(he=""+K.key),K)!k.call(K,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&K.ref===void 0||(ie[xe]=K[xe]);var xe=arguments.length-2;if(xe===1)ie.children=F;else if(1<xe){for(var Ye=Array(xe),qe=0;qe<xe;qe++)Ye[qe]=arguments[qe+2];ie.children=Ye}return j(R.type,he,void 0,void 0,me,ie)},ze.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:o,_context:R},R},ze.createElement=function(R,K,F){var ie,he={},me=null;if(K!=null)for(ie in K.key!==void 0&&(me=""+K.key),K)k.call(K,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(he[ie]=K[ie]);var xe=arguments.length-2;if(xe===1)he.children=F;else if(1<xe){for(var Ye=Array(xe),qe=0;qe<xe;qe++)Ye[qe]=arguments[qe+2];he.children=Ye}if(R&&R.defaultProps)for(ie in xe=R.defaultProps,xe)he[ie]===void 0&&(he[ie]=xe[ie]);return j(R,me,void 0,void 0,null,he)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(R){return{$$typeof:u,render:R}},ze.isValidElement=U,ze.lazy=function(R){return{$$typeof:h,_payload:{_status:-1,_result:R},_init:G}},ze.memo=function(R,K){return{$$typeof:d,type:R,compare:K===void 0?null:K}},ze.startTransition=function(R){var K=D.T,F={};D.T=F;try{var ie=R(),he=D.S;he!==null&&he(F,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(ye,oe)}catch(me){oe(me)}finally{D.T=K}},ze.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ze.use=function(R){return D.H.use(R)},ze.useActionState=function(R,K,F){return D.H.useActionState(R,K,F)},ze.useCallback=function(R,K){return D.H.useCallback(R,K)},ze.useContext=function(R){return D.H.useContext(R)},ze.useDebugValue=function(){},ze.useDeferredValue=function(R,K){return D.H.useDeferredValue(R,K)},ze.useEffect=function(R,K,F){var ie=D.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(R,K)},ze.useId=function(){return D.H.useId()},ze.useImperativeHandle=function(R,K,F){return D.H.useImperativeHandle(R,K,F)},ze.useInsertionEffect=function(R,K){return D.H.useInsertionEffect(R,K)},ze.useLayoutEffect=function(R,K){return D.H.useLayoutEffect(R,K)},ze.useMemo=function(R,K){return D.H.useMemo(R,K)},ze.useOptimistic=function(R,K){return D.H.useOptimistic(R,K)},ze.useReducer=function(R,K,F){return D.H.useReducer(R,K,F)},ze.useRef=function(R){return D.H.useRef(R)},ze.useState=function(R){return D.H.useState(R)},ze.useSyncExternalStore=function(R,K,F){return D.H.useSyncExternalStore(R,K,F)},ze.useTransition=function(){return D.H.useTransition()},ze.version="19.1.1",ze}var pA;function wl(){return pA||(pA=1,ug.exports=nM()),ug.exports}var E=wl();const YP=da(E),rM=HP({__proto__:null,default:YP},[E]);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),hA=e=>{const t=iM(e);return t.charAt(0).toUpperCase()+t.slice(1)},qP=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),sM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...u},p)=>E.createElement("svg",{ref:p,...oM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:qP("lucide",i),...!o&&!sM(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,h])=>E.createElement(d,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(e,t)=>{const n=E.forwardRef(({className:r,...i},o)=>E.createElement(lM,{ref:o,iconNode:t,className:qP(`lucide-${aM(hA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=hA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],kf=_t("bolt",cM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],dM=_t("check",uM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pM=_t("chevron-down",fM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nu=_t("chevron-up",hM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tv=_t("copy",mM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],mA=_t("cpu",gM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],vM=_t("download",yM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nf=_t("eye",bM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],xM=_t("gamepad",SM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],EM=_t("grid-3x3",AM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],TM=_t("hand",CM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ll=_t("loader-circle",PM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],OM=_t("refresh-cw",wM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Qy=_t("rocket",_M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DM=_t("rotate-ccw",NM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gA=_t("settings",kM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dg=_t("shield-check",MM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],IM=_t("shield",jM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],LM=_t("sword",RM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],BM=_t("upload",$M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zM=_t("users",UM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],HM=_t("wifi-off",GM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],yA=_t("wifi",YM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yn=_t("x",qM),FP={categories:{DRONE_SELECTION:!1,DECK_SELECTION:!1,PLACEMENT:!1,PHASE_TRANSITIONS:!0,AI_DECISIONS:!1,MULTIPLAYER:!0,ANIMATIONS:!0,COMMITMENTS:!0,COMBAT:!1,PASS_LOGIC:!0,STATE_SYNC:!0,ENERGY:!1,CARDS:!1,HAND_VIEW:!1,CARD_PLAY:!1}},w=(e,t,n=null)=>{if(!FP.categories[e])return;const r=`🔍 [${e} DEBUG]`;n!=null?console.log(r,t,n):console.log(r,t)};let rf=null;rf=console.log,console.log=(...e)=>{(e[0]?.toString()||"").startsWith("🔍")&&rf(...e)},rf("🔧 Debug logger active: Filtering console to show only debugLog messages"),rf("🔧 Active categories:",Object.entries(FP.categories).filter(([e,t])=>t).map(([e])=>e).join(", ")||"NONE");var fg={exports:{}},Hc={},pg={exports:{}},hg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA;function FM(){return vA||(vA=1,(function(e){function t(L,G){var oe=L.length;L.push(G);e:for(;0<oe;){var ye=oe-1>>>1,R=L[ye];if(0<i(R,G))L[ye]=G,L[oe]=R,oe=ye;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var G=L[0],oe=L.pop();if(oe!==G){L[0]=oe;e:for(var ye=0,R=L.length,K=R>>>1;ye<K;){var F=2*(ye+1)-1,ie=L[F],he=F+1,me=L[he];if(0>i(ie,oe))he<R&&0>i(me,ie)?(L[ye]=me,L[he]=oe,ye=he):(L[ye]=ie,L[F]=oe,ye=F);else if(he<R&&0>i(me,oe))L[ye]=me,L[he]=oe,ye=he;else break e}}return G}function i(L,G){var oe=L.sortIndex-G.sortIndex;return oe!==0?oe:L.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var p=[],d=[],h=1,m=null,y=3,b=!1,x=!1,A=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function M(L){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=L)r(d),G.sortIndex=G.expirationTime,t(p,G);else break;G=n(d)}}function D(L){if(A=!1,M(L),!x)if(n(p)!==null)x=!0,k||(k=!0,W());else{var G=n(d);G!==null&&re(D,G.startTime-L)}}var k=!1,j=-1,I=5,U=-1;function Y(){return C?!0:!(e.unstable_now()-U<I)}function V(){if(C=!1,k){var L=e.unstable_now();U=L;var G=!0;try{e:{x=!1,A&&(A=!1,O(j),j=-1),b=!0;var oe=y;try{t:{for(M(L),m=n(p);m!==null&&!(m.expirationTime>L&&Y());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,y=m.priorityLevel;var R=ye(m.expirationTime<=L);if(L=e.unstable_now(),typeof R=="function"){m.callback=R,M(L),G=!0;break t}m===n(p)&&r(p),M(L)}else r(p);m=n(p)}if(m!==null)G=!0;else{var K=n(d);K!==null&&re(D,K.startTime-L),G=!1}}break e}finally{m=null,y=oe,b=!1}G=void 0}}finally{G?W():k=!1}}}var W;if(typeof _=="function")W=function(){_(V)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ne=ae.port2;ae.port1.onmessage=V,W=function(){ne.postMessage(null)}}else W=function(){T(V,0)};function re(L,G){j=T(function(){L(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(L){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var oe=y;y=G;try{return L()}finally{y=oe}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var oe=y;y=L;try{return G()}finally{y=oe}},e.unstable_scheduleCallback=function(L,G,oe){var ye=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ye+oe:ye):oe=ye,L){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=oe+R,L={id:h++,callback:G,priorityLevel:L,startTime:oe,expirationTime:R,sortIndex:-1},oe>ye?(L.sortIndex=oe,t(d,L),n(p)===null&&L===n(d)&&(A?(O(j),j=-1):A=!0,re(D,oe-ye))):(L.sortIndex=R,t(p,L),x||b||(x=!0,k||(k=!0,W()))),L},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(L){var G=y;return function(){var oe=y;y=G;try{return L.apply(this,arguments)}finally{y=oe}}}})(hg)),hg}var bA;function VM(){return bA||(bA=1,pg.exports=FM()),pg.exports}var mg={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA;function KM(){if(SA)return Ln;SA=1;var e=wl();function t(p){var d="https://react.dev/errors/"+p;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+p+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(p,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:p,containerInfo:d,implementation:h}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(p,d){if(p==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(p,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(p,d,null,h)},Ln.flushSync=function(p){var d=l.T,h=r.p;try{if(l.T=null,r.p=2,p)return p()}finally{l.T=d,r.p=h,r.d.f()}},Ln.preconnect=function(p,d){typeof p=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(p,d))},Ln.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Ln.preinit=function(p,d){if(typeof p=="string"&&d&&typeof d.as=="string"){var h=d.as,m=u(h,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(p,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):h==="script"&&r.d.X(p,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ln.preinitModule=function(p,d){if(typeof p=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=u(d.as,d.crossOrigin);r.d.M(p,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(p)},Ln.preload=function(p,d){if(typeof p=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=u(h,d.crossOrigin);r.d.L(p,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ln.preloadModule=function(p,d){if(typeof p=="string")if(d){var h=u(d.as,d.crossOrigin);r.d.m(p,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(p)},Ln.requestFormReset=function(p){r.d.r(p)},Ln.unstable_batchedUpdates=function(p,d){return p(d)},Ln.useFormState=function(p,d,h){return l.H.useFormState(p,d,h)},Ln.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ln.version="19.1.1",Ln}var xA;function VP(){if(xA)return mg.exports;xA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mg.exports=KM(),mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA;function WM(){if(AA)return Hc;AA=1;var e=VM(),t=wl(),n=VP();function r(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,c=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(c=s.return),a=s.return;while(a)}return s.tag===3?c:null}function l(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function u(a){if(o(a)!==a)throw Error(r(188))}function p(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(r(188));return s!==a?null:a}for(var c=a,f=s;;){var v=c.return;if(v===null)break;var S=v.alternate;if(S===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===c)return u(v),a;if(S===f)return u(v),s;S=S.sibling}throw Error(r(188))}if(c.return!==f.return)c=v,f=S;else{for(var P=!1,N=v.child;N;){if(N===c){P=!0,c=v,f=S;break}if(N===f){P=!0,f=v,c=S;break}N=N.sibling}if(!P){for(N=S.child;N;){if(N===c){P=!0,c=S,f=v;break}if(N===f){P=!0,f=S,c=v;break}N=N.sibling}if(!P)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:s}function d(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=d(a),s!==null)return s;a=a.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),_=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var ae=Symbol.for("react.client.reference");function ne(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ae?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case k:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case _:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case M:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return s=a.displayName||null,s!==null?s:ne(a.type)||"Memo";case I:s=a._payload,a=a._init;try{return ne(a(s))}catch{}}return null}var re=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},ye=[],R=-1;function K(a){return{current:a}}function F(a){0>R||(a.current=ye[R],ye[R]=null,R--)}function ie(a,s){R++,ye[R]=a.current,a.current=s}var he=K(null),me=K(null),xe=K(null),Ye=K(null);function qe(a,s){switch(ie(xe,s),ie(me,a),ie(he,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?$1(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=$1(s),a=B1(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}F(he),ie(he,a)}function be(){F(he),F(me),F(xe)}function Re(a){a.memoizedState!==null&&ie(Ye,a);var s=he.current,c=B1(s,a.type);s!==c&&(ie(me,a),ie(he,c))}function Le(a){me.current===a&&(F(he),F(me)),Ye.current===a&&(F(Ye),Lc._currentValue=oe)}var pe=Object.prototype.hasOwnProperty,tt=e.unstable_scheduleCallback,Qe=e.unstable_cancelCallback,Qt=e.unstable_shouldYield,lt=e.unstable_requestPaint,nt=e.unstable_now,xn=e.unstable_getCurrentPriorityLevel,ta=e.unstable_ImmediatePriority,fo=e.unstable_UserBlockingPriority,Da=e.unstable_NormalPriority,Bl=e.unstable_LowPriority,ps=e.unstable_IdlePriority,et=e.log,Gt=e.unstable_setDisableYieldValue,pa=null,un=null;function Or(a){if(typeof et=="function"&&Gt(a),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(pa,a)}catch{}}var An=Math.clz32?Math.clz32:ve,H=Math.log,de=Math.LN2;function ve(a){return a>>>=0,a===0?32:31-(H(a)/de|0)|0}var ue=256,Te=4194304;function Se(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ie(a,s,c){var f=a.pendingLanes;if(f===0)return 0;var v=0,S=a.suspendedLanes,P=a.pingedLanes;a=a.warmLanes;var N=f&134217727;return N!==0?(f=N&~S,f!==0?v=Se(f):(P&=N,P!==0?v=Se(P):c||(c=N&~a,c!==0&&(v=Se(c))))):(N=f&~S,N!==0?v=Se(N):P!==0?v=Se(P):c||(c=f&~a,c!==0&&(v=Se(c)))),v===0?0:s!==0&&s!==v&&(s&S)===0&&(S=v&-v,c=s&-s,S>=c||S===32&&(c&4194048)!==0)?s:v}function Rt(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function Zt(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ha(){var a=ue;return ue<<=1,(ue&4194048)===0&&(ue=256),a}function Mt(){var a=Te;return Te<<=1,(Te&62914560)===0&&(Te=4194304),a}function Lt(a){for(var s=[],c=0;31>c;c++)s.push(a);return s}function dn(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function qn(a,s,c,f,v,S){var P=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var N=a.entanglements,B=a.expirationTimes,Q=a.hiddenUpdates;for(c=P&~c;0<c;){var se=31-An(c),ce=1<<se;N[se]=0,B[se]=-1;var Z=Q[se];if(Z!==null)for(Q[se]=null,se=0;se<Z.length;se++){var ee=Z[se];ee!==null&&(ee.lane&=-536870913)}c&=~ce}f!==0&&ka(a,f,0),S!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=S&~(P&~s))}function ka(a,s,c){a.pendingLanes|=s,a.suspendedLanes&=~s;var f=31-An(s);a.entangledLanes|=s,a.entanglements[f]=a.entanglements[f]|1073741824|c&4194090}function gi(a,s){var c=a.entangledLanes|=s;for(a=a.entanglements;c;){var f=31-An(c),v=1<<f;v&s|a[f]&s&&(a[f]|=s),c&=~v}}function po(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function hs(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Iu(){var a=G.p;return a!==0?a:(a=window.event,a===void 0?32:aA(a.type))}function lS(a,s){var c=G.p;try{return G.p=a,s()}finally{G.p=c}}var er=Math.random().toString(36).slice(2),Jt="__reactFiber$"+er,Fn="__reactProps$"+er,ms="__reactContainer$"+er,Ct="__reactEvents$"+er,ma="__reactListeners$"+er,gs="__reactHandles$"+er,ho="__reactResources$"+er,kn="__reactMarker$"+er;function na(a){delete a[Jt],delete a[Fn],delete a[Ct],delete a[ma],delete a[gs]}function _r(a){var s=a[Jt];if(s)return s;for(var c=a.parentNode;c;){if(s=c[ms]||c[Jt]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(a=H1(a);a!==null;){if(c=a[Jt])return c;a=H1(a)}return s}a=c,c=a.parentNode}return null}function tr(a){if(a=a[Jt]||a[ms]){var s=a.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return a}return null}function en(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(r(33))}function Vn(a){var s=a[ho];return s||(s=a[ho]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function St(a){a[kn]=!0}var mo=new Set,ys={};function En(a,s){Nr(a,s),Nr(a+"Capture",s)}function Nr(a,s){for(ys[a]=s,a=0;a<s.length;a++)mo.add(s[a])}var go=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yt={},Dr={};function nh(a){return pe.call(Dr,a)?!0:pe.call(yt,a)?!1:go.test(a)?Dr[a]=!0:(yt[a]=!0,!1)}function vs(a,s,c){if(nh(s))if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+c)}}function yo(a,s,c){if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+c)}}function kr(a,s,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(s,c,""+f)}}var Ul,zl;function Mn(a){if(Ul===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Ul=s&&s[1]||"",zl=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ul+a+zl}var ga=!1;function Gl(a,s){if(!a||ga)return"";ga=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ee){var Z=ee}Reflect.construct(a,[],ce)}else{try{ce.call()}catch(ee){Z=ee}a.call(ce.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(ce=a())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=f.DetermineComponentFrameRoot(),P=S[0],N=S[1];if(P&&N){var B=P.split(`
`),Q=N.split(`
`);for(v=f=0;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(f===B.length||v===Q.length)for(f=B.length-1,v=Q.length-1;1<=f&&0<=v&&B[f]!==Q[v];)v--;for(;1<=f&&0<=v;f--,v--)if(B[f]!==Q[v]){if(f!==1||v!==1)do if(f--,v--,0>v||B[f]!==Q[v]){var se=`
`+B[f].replace(" at new "," at ");return a.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",a.displayName)),se}while(1<=f&&0<=v);break}}}finally{ga=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Mn(c):""}function Ru(a){switch(a.tag){case 26:case 27:case 5:return Mn(a.type);case 16:return Mn("Lazy");case 13:return Mn("Suspense");case 19:return Mn("SuspenseList");case 0:case 15:return Gl(a.type,!1);case 11:return Gl(a.type.render,!1);case 1:return Gl(a.type,!0);case 31:return Mn("Activity");default:return""}}function Hl(a){try{var s="";do s+=Ru(a),a=a.return;while(a);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Ht(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function bs(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vo(a){var s=bs(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),f=""+a[s];if(!a.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,S=c.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return v.call(this)},set:function(P){f=""+P,S.call(this,P)}}),Object.defineProperty(a,s,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(P){f=""+P},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Mr(a){a._valueTracker||(a._valueTracker=vo(a))}function bo(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return a&&(f=bs(a)?a.checked?"true":"false":a.value),a=f,a!==c?(s.setValue(a),!0):!1}function yi(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var vi=/[\n"\\]/g;function jn(a){return a.replace(vi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function bi(a,s,c,f,v,S,P,N){a.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.type=P:a.removeAttribute("type"),s!=null?P==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+Ht(s)):a.value!==""+Ht(s)&&(a.value=""+Ht(s)):P!=="submit"&&P!=="reset"||a.removeAttribute("value"),s!=null?So(a,P,Ht(s)):c!=null?So(a,P,Ht(c)):f!=null&&a.removeAttribute("value"),v==null&&S!=null&&(a.defaultChecked=!!S),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+Ht(N):a.removeAttribute("name")}function Yl(a,s,c,f,v,S,P,N){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.type=S),s!=null||c!=null){if(!(S!=="submit"&&S!=="reset"||s!=null))return;c=c!=null?""+Ht(c):"",s=s!=null?""+Ht(s):c,N||s===a.value||(a.value=s),a.defaultValue=s}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=N?a.checked:!!f,a.defaultChecked=!!f,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(a.name=P)}function So(a,s,c){s==="number"&&yi(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function Si(a,s,c,f){if(a=a.options,s){s={};for(var v=0;v<c.length;v++)s["$"+c[v]]=!0;for(c=0;c<a.length;c++)v=s.hasOwnProperty("$"+a[c].value),a[c].selected!==v&&(a[c].selected=v),v&&f&&(a[c].defaultSelected=!0)}else{for(c=""+Ht(c),s=null,v=0;v<a.length;v++){if(a[v].value===c){a[v].selected=!0,f&&(a[v].defaultSelected=!0);return}s!==null||a[v].disabled||(s=a[v])}s!==null&&(s.selected=!0)}}function ql(a,s,c){if(s!=null&&(s=""+Ht(s),s!==a.value&&(a.value=s),c==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=c!=null?""+Ht(c):""}function rh(a,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(r(92));if(re(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=Ht(s),a.defaultValue=c,f=a.textContent,f===c&&f!==""&&f!==null&&(a.value=f)}function Ss(a,s){if(s){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=s;return}}a.textContent=s}var Fl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(a,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":f?a.setProperty(s,c):typeof c!="number"||c===0||Fl.has(s)?s==="float"?a.cssFloat=c:a[s]=(""+c).trim():a[s]=c+"px"}function ah(a,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(a=a.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var v in s)f=s[v],s.hasOwnProperty(v)&&c[v]!==f&&Vl(a,v,f)}else for(var S in s)s.hasOwnProperty(S)&&Vl(a,S,s[S])}function Lu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $u=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ma(a){return Bu.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var ja=null;function xo(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var nr=null,rr=null;function Ao(a){var s=tr(a);if(s&&(a=s.stateNode)){var c=a[Fn]||null;e:switch(a=s.stateNode,s.type){case"input":if(bi(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+jn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==a&&f.form===a.form){var v=f[Fn]||null;if(!v)throw Error(r(90));bi(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===a.form&&bo(f)}break e;case"textarea":ql(a,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Si(a,!!c.multiple,s,!1)}}}var Kl=!1;function Wl(a,s,c){if(Kl)return a(s,c);Kl=!0;try{var f=a(s);return f}finally{if(Kl=!1,(nr!==null||rr!==null)&&(Id(),nr&&(s=nr,a=rr,rr=nr=null,Ao(s),a)))for(s=0;s<a.length;s++)Ao(a[s])}}function Fe(a,s){var c=a.stateNode;if(c===null)return null;var f=c[Fn]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ya=!1;if(Kn)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){ya=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{ya=!1}var Ia=null,Uu=null,Yt=null;function ar(){if(Yt)return Yt;var a,s=Uu,c=s.length,f,v="value"in Ia?Ia.value:Ia.textContent,S=v.length;for(a=0;a<c&&s[a]===v[a];a++);var P=c-a;for(f=1;f<=P&&s[c-f]===v[S-f];f++);return Yt=v.slice(a,1<f?1-f:void 0)}function Xl(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Eo(){return!0}function zu(){return!1}function fn(a){function s(c,f,v,S,P){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(c=a[N],this[N]=c?c(S):S[N]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Eo:zu,this.isPropagationStopped=zu,this}return h(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),s}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=fn(Ai),Co=h({},Ai,{view:0,detail:0}),ih=fn(Co),Zl,Jl,Ne,Ve=h({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ne&&(Ne&&a.type==="mousemove"?(Zl=a.screenX-Ne.screenX,Jl=a.screenY-Ne.screenY):Jl=Zl=0,Ne=a),Zl)},movementY:function(a){return"movementY"in a?a.movementY:Jl}}),Ei=fn(Ve),To=h({},Ve,{dataTransfer:0}),Gu=fn(To),Po=h({},Co,{relatedTarget:0}),wo=fn(Po),Hu=h({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),Yu=fn(Hu),sh=h({},Ai,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),oh=fn(sh),rt=h({},Ai,{data:0}),qu=fn(rt),lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oo(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=Cn[a])?!!s[a]:!1}function _o(){return Oo}var ch=h({},Co,{key:function(a){if(a.key){var s=lh[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=Xl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ra[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(a){return a.type==="keypress"?Xl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Xl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ec=fn(ch),uh=h({},Ve,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fu=fn(uh),dh=h({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),fh=fn(dh),ph=h({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),hh=fn(ph),mh=h({},Ve,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),gh=fn(mh),yh=h({},Ai,{newState:0,oldState:0}),vh=fn(yh),bh=[9,13,27,32],tc=Kn&&"CompositionEvent"in window,xs=null;Kn&&"documentMode"in document&&(xs=document.documentMode);var Sh=Kn&&"TextEvent"in window&&!xs,Vu=Kn&&(!tc||xs&&8<xs&&11>=xs),nc=" ",Ku=!1;function Wu(a,s){switch(a){case"keyup":return bh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ci=!1;function xh(a,s){switch(a){case"compositionend":return Xu(s);case"keypress":return s.which!==32?null:(Ku=!0,nc);case"textInput":return a=s.data,a===nc&&Ku?null:a;default:return null}}function Qu(a,s){if(Ci)return a==="compositionend"||!tc&&Wu(a,s)?(a=ar(),Yt=Uu=Ia=null,Ci=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Vu&&s.locale!=="ko"?null:s.data;default:return null}}var Ah={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zu(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!Ah[a.type]:s==="textarea"}function Ju(a,s,c,f){nr?rr?rr.push(f):rr=[f]:nr=f,s=zd(s,"onChange"),0<s.length&&(c=new Ql("onChange","change",null,c,f),a.push({event:c,listeners:s}))}var As=null,Ti=null;function Eh(a){M1(a,0)}function No(a){var s=en(a);if(bo(s))return a}function ed(a,s){if(a==="change")return s}var $=!1;if(Kn){var J;if(Kn){var ge="oninput"in document;if(!ge){var fe=document.createElement("div");fe.setAttribute("oninput","return;"),ge=typeof fe.oninput=="function"}J=ge}else J=!1;$=J&&(!document.documentMode||9<document.documentMode)}function Ae(){As&&(As.detachEvent("onpropertychange",Be),Ti=As=null)}function Be(a){if(a.propertyName==="value"&&No(Ti)){var s=[];Ju(s,Ti,a,xo(a)),Wl(Eh,s)}}function Ue(a,s,c){a==="focusin"?(Ae(),As=s,Ti=c,As.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function Ze(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return No(Ti)}function tn(a,s){if(a==="click")return No(s)}function Pi(a,s){if(a==="input"||a==="change")return No(s)}function wi(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var Tn=typeof Object.is=="function"?Object.is:wi;function In(a,s){if(Tn(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var c=Object.keys(a),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!pe.call(s,v)||!Tn(a[v],s[v]))return!1}return!0}function va(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Do(a,s){var c=va(a);a=0;for(var f;c;){if(c.nodeType===3){if(f=a+c.textContent.length,a<=s&&f>=s)return{node:c,offset:s-a};a=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=va(c)}}function ko(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?ko(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function La(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=yi(a.document);s instanceof a.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)a=s.contentWindow;else break;s=yi(a.document)}return s}function rc(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var td=Kn&&"documentMode"in document&&11>=document.documentMode,jr=null,ac=null,$a=null,nd=!1;function cS(a,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;nd||jr==null||jr!==yi(f)||(f=jr,"selectionStart"in f&&rc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),$a&&In($a,f)||($a=f,f=zd(ac,"onSelect"),0<f.length&&(s=new Ql("onSelect","select",null,s,c),a.push({event:s,listeners:f}),s.target=jr)))}function Es(a,s){var c={};return c[a.toLowerCase()]=s.toLowerCase(),c["Webkit"+a]="webkit"+s,c["Moz"+a]="moz"+s,c}var Mo={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Ch={},uS={};Kn&&(uS=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function Cs(a){if(Ch[a])return Ch[a];if(!Mo[a])return a;var s=Mo[a],c;for(c in s)if(s.hasOwnProperty(c)&&c in uS)return Ch[a]=s[c];return a}var dS=Cs("animationend"),fS=Cs("animationiteration"),pS=Cs("animationstart"),RD=Cs("transitionrun"),LD=Cs("transitionstart"),$D=Cs("transitioncancel"),hS=Cs("transitionend"),mS=new Map,Th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Th.push("scrollEnd");function ra(a,s){mS.set(a,s),En(s,[a])}var gS=new WeakMap;function Ir(a,s){if(typeof a=="object"&&a!==null){var c=gS.get(a);return c!==void 0?c:(s={value:a,source:s,stack:Hl(s)},gS.set(a,s),s)}return{value:a,source:s,stack:Hl(s)}}var Rr=[],jo=0,Ph=0;function rd(){for(var a=jo,s=Ph=jo=0;s<a;){var c=Rr[s];Rr[s++]=null;var f=Rr[s];Rr[s++]=null;var v=Rr[s];Rr[s++]=null;var S=Rr[s];if(Rr[s++]=null,f!==null&&v!==null){var P=f.pending;P===null?v.next=v:(v.next=P.next,P.next=v),f.pending=v}S!==0&&yS(c,v,S)}}function ad(a,s,c,f){Rr[jo++]=a,Rr[jo++]=s,Rr[jo++]=c,Rr[jo++]=f,Ph|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function wh(a,s,c,f){return ad(a,s,c,f),id(a)}function Io(a,s){return ad(a,null,null,s),id(a)}function yS(a,s,c){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c);for(var v=!1,S=a.return;S!==null;)S.childLanes|=c,f=S.alternate,f!==null&&(f.childLanes|=c),S.tag===22&&(a=S.stateNode,a===null||a._visibility&1||(v=!0)),a=S,S=S.return;return a.tag===3?(S=a.stateNode,v&&s!==null&&(v=31-An(c),a=S.hiddenUpdates,f=a[v],f===null?a[v]=[s]:f.push(s),s.lane=c|536870912),S):null}function id(a){if(50<_c)throw _c=0,Mm=null,Error(r(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var Ro={};function BD(a,s,c,f){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(a,s,c,f){return new BD(a,s,c,f)}function Oh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ba(a,s){var c=a.alternate;return c===null?(c=pr(a.tag,s,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=s,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,s=a.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function vS(a,s){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,s=c.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function sd(a,s,c,f,v,S){var P=0;if(f=a,typeof a=="function")Oh(a)&&(P=1);else if(typeof a=="string")P=zk(a,c,he.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=pr(31,c,s,v),a.elementType=U,a.lanes=S,a;case x:return Ts(c.children,v,S,s);case A:P=8,v|=24;break;case C:return a=pr(12,c,s,v|2),a.elementType=C,a.lanes=S,a;case D:return a=pr(13,c,s,v),a.elementType=D,a.lanes=S,a;case k:return a=pr(19,c,s,v),a.elementType=k,a.lanes=S,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case T:case _:P=10;break e;case O:P=9;break e;case M:P=11;break e;case j:P=14;break e;case I:P=16,f=null;break e}P=29,c=Error(r(130,a===null?"null":typeof a,"")),f=null}return s=pr(P,c,s,v),s.elementType=a,s.type=f,s.lanes=S,s}function Ts(a,s,c,f){return a=pr(7,a,f,s),a.lanes=c,a}function _h(a,s,c){return a=pr(6,a,null,s),a.lanes=c,a}function Nh(a,s,c){return s=pr(4,a.children!==null?a.children:[],a.key,s),s.lanes=c,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var Lo=[],$o=0,od=null,ld=0,Lr=[],$r=0,Ps=null,Ua=1,za="";function ws(a,s){Lo[$o++]=ld,Lo[$o++]=od,od=a,ld=s}function bS(a,s,c){Lr[$r++]=Ua,Lr[$r++]=za,Lr[$r++]=Ps,Ps=a;var f=Ua;a=za;var v=32-An(f)-1;f&=~(1<<v),c+=1;var S=32-An(s)+v;if(30<S){var P=v-v%5;S=(f&(1<<P)-1).toString(32),f>>=P,v-=P,Ua=1<<32-An(s)+v|c<<v|f,za=S+a}else Ua=1<<S|c<<v|f,za=a}function Dh(a){a.return!==null&&(ws(a,1),bS(a,1,0))}function kh(a){for(;a===od;)od=Lo[--$o],Lo[$o]=null,ld=Lo[--$o],Lo[$o]=null;for(;a===Ps;)Ps=Lr[--$r],Lr[$r]=null,za=Lr[--$r],Lr[$r]=null,Ua=Lr[--$r],Lr[$r]=null}var Wn=null,jt=null,ot=!1,Os=null,ba=!1,Mh=Error(r(519));function _s(a){var s=Error(r(418,""));throw oc(Ir(s,a)),Mh}function SS(a){var s=a.stateNode,c=a.type,f=a.memoizedProps;switch(s[Jt]=a,s[Fn]=f,c){case"dialog":Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":case"embed":Xe("load",s);break;case"video":case"audio":for(c=0;c<Dc.length;c++)Xe(Dc[c],s);break;case"source":Xe("error",s);break;case"img":case"image":case"link":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"input":Xe("invalid",s),Yl(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Mr(s);break;case"select":Xe("invalid",s);break;case"textarea":Xe("invalid",s),rh(s,f.value,f.defaultValue,f.children),Mr(s)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||L1(s.textContent,c)?(f.popover!=null&&(Xe("beforetoggle",s),Xe("toggle",s)),f.onScroll!=null&&Xe("scroll",s),f.onScrollEnd!=null&&Xe("scrollend",s),f.onClick!=null&&(s.onclick=Gd),s=!0):s=!1,s||_s(a)}function xS(a){for(Wn=a.return;Wn;)switch(Wn.tag){case 5:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Wn=Wn.return}}function ic(a){if(a!==Wn)return!1;if(!ot)return xS(a),ot=!0,!1;var s=a.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Wm(a.type,a.memoizedProps)),c=!c),c&&jt&&_s(a),xS(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(s===0){jt=ia(a.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;a=a.nextSibling}jt=null}}else s===27?(s=jt,Hi(a.type)?(a=Jm,Jm=null,jt=a):jt=s):jt=Wn?ia(a.stateNode.nextSibling):null;return!0}function sc(){jt=Wn=null,ot=!1}function AS(){var a=Os;return a!==null&&(or===null?or=a:or.push.apply(or,a),Os=null),a}function oc(a){Os===null?Os=[a]:Os.push(a)}var jh=K(null),Ns=null,Ga=null;function Oi(a,s,c){ie(jh,s._currentValue),s._currentValue=c}function Ha(a){a._currentValue=jh.current,F(jh)}function Ih(a,s,c){for(;a!==null;){var f=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),a===c)break;a=a.return}}function Rh(a,s,c,f){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var S=v.dependencies;if(S!==null){var P=v.child;S=S.firstContext;e:for(;S!==null;){var N=S;S=v;for(var B=0;B<s.length;B++)if(N.context===s[B]){S.lanes|=c,N=S.alternate,N!==null&&(N.lanes|=c),Ih(S.return,c,a),f||(P=null);break e}S=N.next}}else if(v.tag===18){if(P=v.return,P===null)throw Error(r(341));P.lanes|=c,S=P.alternate,S!==null&&(S.lanes|=c),Ih(P,c,a),P=null}else P=v.child;if(P!==null)P.return=v;else for(P=v;P!==null;){if(P===a){P=null;break}if(v=P.sibling,v!==null){v.return=P.return,P=v;break}P=P.return}v=P}}function lc(a,s,c,f){a=null;for(var v=s,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var P=v.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var N=v.type;Tn(v.pendingProps.value,P.value)||(a!==null?a.push(N):a=[N])}}else if(v===Ye.current){if(P=v.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Lc):a=[Lc])}v=v.return}a!==null&&Rh(s,a,c,f),s.flags|=262144}function cd(a){for(a=a.firstContext;a!==null;){if(!Tn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ds(a){Ns=a,Ga=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Rn(a){return ES(Ns,a)}function ud(a,s){return Ns===null&&Ds(a),ES(a,s)}function ES(a,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Ga===null){if(a===null)throw Error(r(308));Ga=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Ga=Ga.next=s;return c}var UD=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(c,f){a.push(f)}};this.abort=function(){s.aborted=!0,a.forEach(function(c){return c()})}},zD=e.unstable_scheduleCallback,GD=e.unstable_NormalPriority,nn={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lh(){return{controller:new UD,data:new Map,refCount:0}}function cc(a){a.refCount--,a.refCount===0&&zD(GD,function(){a.controller.abort()})}var uc=null,$h=0,Bo=0,Uo=null;function HD(a,s){if(uc===null){var c=uc=[];$h=0,Bo=Um(),Uo={status:"pending",value:void 0,then:function(f){c.push(f)}}}return $h++,s.then(CS,CS),s}function CS(){if(--$h===0&&uc!==null){Uo!==null&&(Uo.status="fulfilled");var a=uc;uc=null,Bo=0,Uo=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function YD(a,s){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return a.then(function(){f.status="fulfilled",f.value=s;for(var v=0;v<c.length;v++)(0,c[v])(s)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var TS=L.S;L.S=function(a,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&HD(a,s),TS!==null&&TS(a,s)};var ks=K(null);function Bh(){var a=ks.current;return a!==null?a:xt.pooledCache}function dd(a,s){s===null?ie(ks,ks.current):ie(ks,s.pool)}function PS(){var a=Bh();return a===null?null:{parent:nn._currentValue,pool:a}}var dc=Error(r(460)),wS=Error(r(474)),fd=Error(r(542)),Uh={then:function(){}};function OS(a){return a=a.status,a==="fulfilled"||a==="rejected"}function pd(){}function _S(a,s,c){switch(c=a[c],c===void 0?a.push(s):c!==s&&(s.then(pd,pd),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,DS(a),a;default:if(typeof s.status=="string")s.then(pd,pd);else{if(a=xt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=s,a.status="pending",a.then(function(f){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=f}},function(f){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,DS(a),a}throw fc=s,dc}}var fc=null;function NS(){if(fc===null)throw Error(r(459));var a=fc;return fc=null,a}function DS(a){if(a===dc||a===fd)throw Error(r(483))}var _i=!1;function zh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gh(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ni(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Di(a,s,c){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(ct&2)!==0){var v=f.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),f.pending=s,s=id(a),yS(a,null,c),s}return ad(a,f,s,c),id(a)}function pc(a,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=a.pendingLanes,c|=f,s.lanes=c,gi(a,c)}}function Hh(a,s){var c=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var P={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};S===null?v=S=P:S=S.next=P,c=c.next}while(c!==null);S===null?v=S=s:S=S.next=s}else v=S=s;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:f.shared,callbacks:f.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=s:a.next=s,c.lastBaseUpdate=s}var Yh=!1;function hc(){if(Yh){var a=Uo;if(a!==null)throw a}}function mc(a,s,c,f){Yh=!1;var v=a.updateQueue;_i=!1;var S=v.firstBaseUpdate,P=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var B=N,Q=B.next;B.next=null,P===null?S=Q:P.next=Q,P=B;var se=a.alternate;se!==null&&(se=se.updateQueue,N=se.lastBaseUpdate,N!==P&&(N===null?se.firstBaseUpdate=Q:N.next=Q,se.lastBaseUpdate=B))}if(S!==null){var ce=v.baseState;P=0,se=Q=B=null,N=S;do{var Z=N.lane&-536870913,ee=Z!==N.lane;if(ee?(Je&Z)===Z:(f&Z)===Z){Z!==0&&Z===Bo&&(Yh=!0),se!==null&&(se=se.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var je=a,ke=N;Z=s;var mt=c;switch(ke.tag){case 1:if(je=ke.payload,typeof je=="function"){ce=je.call(mt,ce,Z);break e}ce=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=ke.payload,Z=typeof je=="function"?je.call(mt,ce,Z):je,Z==null)break e;ce=h({},ce,Z);break e;case 2:_i=!0}}Z=N.callback,Z!==null&&(a.flags|=64,ee&&(a.flags|=8192),ee=v.callbacks,ee===null?v.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},se===null?(Q=se=ee,B=ce):se=se.next=ee,P|=Z;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;ee=N,N=ee.next,ee.next=null,v.lastBaseUpdate=ee,v.shared.pending=null}}while(!0);se===null&&(B=ce),v.baseState=B,v.firstBaseUpdate=Q,v.lastBaseUpdate=se,S===null&&(v.shared.lanes=0),Bi|=P,a.lanes=P,a.memoizedState=ce}}function kS(a,s){if(typeof a!="function")throw Error(r(191,a));a.call(s)}function MS(a,s){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)kS(c[a],s)}var zo=K(null),hd=K(0);function jS(a,s){a=Xa,ie(hd,a),ie(zo,s),Xa=a|s.baseLanes}function qh(){ie(hd,Xa),ie(zo,zo.current)}function Fh(){Xa=hd.current,F(zo),F(hd)}var ki=0,He=null,pt=null,qt=null,md=!1,Go=!1,Ms=!1,gd=0,gc=0,Ho=null,qD=0;function $t(){throw Error(r(321))}function Vh(a,s){if(s===null)return!1;for(var c=0;c<s.length&&c<a.length;c++)if(!Tn(a[c],s[c]))return!1;return!0}function Kh(a,s,c,f,v,S){return ki=S,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=a===null||a.memoizedState===null?yx:vx,Ms=!1,S=c(f,v),Ms=!1,Go&&(S=RS(s,c,f,v)),IS(a),S}function IS(a){L.H=Ad;var s=pt!==null&&pt.next!==null;if(ki=0,qt=pt=He=null,md=!1,gc=0,Ho=null,s)throw Error(r(300));a===null||pn||(a=a.dependencies,a!==null&&cd(a)&&(pn=!0))}function RS(a,s,c,f){He=a;var v=0;do{if(Go&&(Ho=null),gc=0,Go=!1,25<=v)throw Error(r(301));if(v+=1,qt=pt=null,a.updateQueue!=null){var S=a.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}L.H=ZD,S=s(c,f)}while(Go);return S}function FD(){var a=L.H,s=a.useState()[0];return s=typeof s.then=="function"?yc(s):s,a=a.useState()[0],(pt!==null?pt.memoizedState:null)!==a&&(He.flags|=1024),s}function Wh(){var a=gd!==0;return gd=0,a}function Xh(a,s,c){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~c}function Qh(a){if(md){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}md=!1}ki=0,qt=pt=He=null,Go=!1,gc=gd=0,Ho=null}function ir(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?He.memoizedState=qt=a:qt=qt.next=a,qt}function Ft(){if(pt===null){var a=He.alternate;a=a!==null?a.memoizedState:null}else a=pt.next;var s=qt===null?He.memoizedState:qt.next;if(s!==null)qt=s,pt=a;else{if(a===null)throw He.alternate===null?Error(r(467)):Error(r(310));pt=a,a={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},qt===null?He.memoizedState=qt=a:qt=qt.next=a}return qt}function Zh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(a){var s=gc;return gc+=1,Ho===null&&(Ho=[]),a=_S(Ho,a,s),s=He,(qt===null?s.memoizedState:qt.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?yx:vx),a}function yd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return yc(a);if(a.$$typeof===_)return Rn(a)}throw Error(r(438,String(a)))}function Jh(a){var s=null,c=He.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=He.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Zh(),He.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(a),f=0;f<a;f++)c[f]=Y;return s.index++,c}function Ya(a,s){return typeof s=="function"?s(a):s}function vd(a){var s=Ft();return em(s,pt,a)}function em(a,s,c){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var v=a.baseQueue,S=f.pending;if(S!==null){if(v!==null){var P=v.next;v.next=S.next,S.next=P}s.baseQueue=v=S,f.pending=null}if(S=a.baseState,v===null)a.memoizedState=S;else{s=v.next;var N=P=null,B=null,Q=s,se=!1;do{var ce=Q.lane&-536870913;if(ce!==Q.lane?(Je&ce)===ce:(ki&ce)===ce){var Z=Q.revertLane;if(Z===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ce===Bo&&(se=!0);else if((ki&Z)===Z){Q=Q.next,Z===Bo&&(se=!0);continue}else ce={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},B===null?(N=B=ce,P=S):B=B.next=ce,He.lanes|=Z,Bi|=Z;ce=Q.action,Ms&&c(S,ce),S=Q.hasEagerState?Q.eagerState:c(S,ce)}else Z={lane:ce,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},B===null?(N=B=Z,P=S):B=B.next=Z,He.lanes|=ce,Bi|=ce;Q=Q.next}while(Q!==null&&Q!==s);if(B===null?P=S:B.next=N,!Tn(S,a.memoizedState)&&(pn=!0,se&&(c=Uo,c!==null)))throw c;a.memoizedState=S,a.baseState=P,a.baseQueue=B,f.lastRenderedState=S}return v===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function tm(a){var s=Ft(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=c.dispatch,v=c.pending,S=s.memoizedState;if(v!==null){c.pending=null;var P=v=v.next;do S=a(S,P.action),P=P.next;while(P!==v);Tn(S,s.memoizedState)||(pn=!0),s.memoizedState=S,s.baseQueue===null&&(s.baseState=S),c.lastRenderedState=S}return[S,f]}function LS(a,s,c){var f=He,v=Ft(),S=ot;if(S){if(c===void 0)throw Error(r(407));c=c()}else c=s();var P=!Tn((pt||v).memoizedState,c);P&&(v.memoizedState=c,pn=!0),v=v.queue;var N=US.bind(null,f,v,a);if(vc(2048,8,N,[a]),v.getSnapshot!==s||P||qt!==null&&qt.memoizedState.tag&1){if(f.flags|=2048,Yo(9,bd(),BS.bind(null,f,v,c,s),null),xt===null)throw Error(r(349));S||(ki&124)!==0||$S(f,s,c)}return c}function $S(a,s,c){a.flags|=16384,a={getSnapshot:s,value:c},s=He.updateQueue,s===null?(s=Zh(),He.updateQueue=s,s.stores=[a]):(c=s.stores,c===null?s.stores=[a]:c.push(a))}function BS(a,s,c,f){s.value=c,s.getSnapshot=f,zS(s)&&GS(a)}function US(a,s,c){return c(function(){zS(s)&&GS(a)})}function zS(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!Tn(a,c)}catch{return!0}}function GS(a){var s=Io(a,2);s!==null&&vr(s,a,2)}function nm(a){var s=ir();if(typeof a=="function"){var c=a;if(a=c(),Ms){Or(!0);try{c()}finally{Or(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:a},s}function HS(a,s,c,f){return a.baseState=c,em(a,pt,typeof f=="function"?f:Ya)}function VD(a,s,c,f,v){if(xd(a))throw Error(r(485));if(a=s.action,a!==null){var S={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){S.listeners.push(P)}};L.T!==null?c(!0):S.isTransition=!1,f(S),c=s.pending,c===null?(S.next=s.pending=S,YS(s,S)):(S.next=c.next,s.pending=c.next=S)}}function YS(a,s){var c=s.action,f=s.payload,v=a.state;if(s.isTransition){var S=L.T,P={};L.T=P;try{var N=c(v,f),B=L.S;B!==null&&B(P,N),qS(a,s,N)}catch(Q){rm(a,s,Q)}finally{L.T=S}}else try{S=c(v,f),qS(a,s,S)}catch(Q){rm(a,s,Q)}}function qS(a,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){FS(a,s,f)},function(f){return rm(a,s,f)}):FS(a,s,c)}function FS(a,s,c){s.status="fulfilled",s.value=c,VS(s),a.state=c,s=a.pending,s!==null&&(c=s.next,c===s?a.pending=null:(c=c.next,s.next=c,YS(a,c)))}function rm(a,s,c){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,VS(s),s=s.next;while(s!==f)}a.action=null}function VS(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function KS(a,s){return s}function WS(a,s){if(ot){var c=xt.formState;if(c!==null){e:{var f=He;if(ot){if(jt){t:{for(var v=jt,S=ba;v.nodeType!==8;){if(!S){v=null;break t}if(v=ia(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){jt=ia(v.nextSibling),f=v.data==="F!";break e}}_s(f)}f=!1}f&&(s=c[0])}}return c=ir(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:KS,lastRenderedState:s},c.queue=f,c=hx.bind(null,He,f),f.dispatch=c,f=nm(!1),S=lm.bind(null,He,!1,f.queue),f=ir(),v={state:s,dispatch:null,action:a,pending:null},f.queue=v,c=VD.bind(null,He,v,S,c),v.dispatch=c,f.memoizedState=a,[s,c,!1]}function XS(a){var s=Ft();return QS(s,pt,a)}function QS(a,s,c){if(s=em(a,s,KS)[0],a=vd(Ya)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=yc(s)}catch(P){throw P===dc?fd:P}else f=s;s=Ft();var v=s.queue,S=v.dispatch;return c!==s.memoizedState&&(He.flags|=2048,Yo(9,bd(),KD.bind(null,v,c),null)),[f,S,a]}function KD(a,s){a.action=s}function ZS(a){var s=Ft(),c=pt;if(c!==null)return QS(s,c,a);Ft(),s=s.memoizedState,c=Ft();var f=c.queue.dispatch;return c.memoizedState=a,[s,f,!1]}function Yo(a,s,c,f){return a={tag:a,create:c,deps:f,inst:s,next:null},s=He.updateQueue,s===null&&(s=Zh(),He.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=a.next=a:(f=c.next,c.next=a,a.next=f,s.lastEffect=a),a}function bd(){return{destroy:void 0,resource:void 0}}function JS(){return Ft().memoizedState}function Sd(a,s,c,f){var v=ir();f=f===void 0?null:f,He.flags|=a,v.memoizedState=Yo(1|s,bd(),c,f)}function vc(a,s,c,f){var v=Ft();f=f===void 0?null:f;var S=v.memoizedState.inst;pt!==null&&f!==null&&Vh(f,pt.memoizedState.deps)?v.memoizedState=Yo(s,S,c,f):(He.flags|=a,v.memoizedState=Yo(1|s,S,c,f))}function ex(a,s){Sd(8390656,8,a,s)}function tx(a,s){vc(2048,8,a,s)}function nx(a,s){return vc(4,2,a,s)}function rx(a,s){return vc(4,4,a,s)}function ax(a,s){if(typeof s=="function"){a=a();var c=s(a);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function ix(a,s,c){c=c!=null?c.concat([a]):null,vc(4,4,ax.bind(null,s,a),c)}function am(){}function sx(a,s){var c=Ft();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&Vh(s,f[1])?f[0]:(c.memoizedState=[a,s],a)}function ox(a,s){var c=Ft();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&Vh(s,f[1]))return f[0];if(f=a(),Ms){Or(!0);try{a()}finally{Or(!1)}}return c.memoizedState=[f,s],f}function im(a,s,c){return c===void 0||(ki&1073741824)!==0?a.memoizedState=s:(a.memoizedState=c,a=u1(),He.lanes|=a,Bi|=a,c)}function lx(a,s,c,f){return Tn(c,s)?c:zo.current!==null?(a=im(a,c,f),Tn(a,s)||(pn=!0),a):(ki&42)===0?(pn=!0,a.memoizedState=c):(a=u1(),He.lanes|=a,Bi|=a,s)}function cx(a,s,c,f,v){var S=G.p;G.p=S!==0&&8>S?S:8;var P=L.T,N={};L.T=N,lm(a,!1,s,c);try{var B=v(),Q=L.S;if(Q!==null&&Q(N,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var se=YD(B,f);bc(a,s,se,yr(a))}else bc(a,s,f,yr(a))}catch(ce){bc(a,s,{then:function(){},status:"rejected",reason:ce},yr())}finally{G.p=S,L.T=P}}function WD(){}function sm(a,s,c,f){if(a.tag!==5)throw Error(r(476));var v=ux(a).queue;cx(a,v,s,oe,c===null?WD:function(){return dx(a),c(f)})}function ux(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:oe},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:c},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function dx(a){var s=ux(a).next.queue;bc(a,s,{},yr())}function om(){return Rn(Lc)}function fx(){return Ft().memoizedState}function px(){return Ft().memoizedState}function XD(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var c=yr();a=Ni(c);var f=Di(s,a,c);f!==null&&(vr(f,s,c),pc(f,s,c)),s={cache:Lh()},a.payload=s;return}s=s.return}}function QD(a,s,c){var f=yr();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},xd(a)?mx(s,c):(c=wh(a,s,c,f),c!==null&&(vr(c,a,f),gx(c,s,f)))}function hx(a,s,c){var f=yr();bc(a,s,c,f)}function bc(a,s,c,f){var v={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(xd(a))mx(s,v);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=s.lastRenderedReducer,S!==null))try{var P=s.lastRenderedState,N=S(P,c);if(v.hasEagerState=!0,v.eagerState=N,Tn(N,P))return ad(a,s,v,0),xt===null&&rd(),!1}catch{}finally{}if(c=wh(a,s,v,f),c!==null)return vr(c,a,f),gx(c,s,f),!0}return!1}function lm(a,s,c,f){if(f={lane:2,revertLane:Um(),action:f,hasEagerState:!1,eagerState:null,next:null},xd(a)){if(s)throw Error(r(479))}else s=wh(a,c,f,2),s!==null&&vr(s,a,2)}function xd(a){var s=a.alternate;return a===He||s!==null&&s===He}function mx(a,s){Go=md=!0;var c=a.pending;c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s}function gx(a,s,c){if((c&4194048)!==0){var f=s.lanes;f&=a.pendingLanes,c|=f,s.lanes=c,gi(a,c)}}var Ad={readContext:Rn,use:yd,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t},yx={readContext:Rn,use:yd,useCallback:function(a,s){return ir().memoizedState=[a,s===void 0?null:s],a},useContext:Rn,useEffect:ex,useImperativeHandle:function(a,s,c){c=c!=null?c.concat([a]):null,Sd(4194308,4,ax.bind(null,s,a),c)},useLayoutEffect:function(a,s){return Sd(4194308,4,a,s)},useInsertionEffect:function(a,s){Sd(4,2,a,s)},useMemo:function(a,s){var c=ir();s=s===void 0?null:s;var f=a();if(Ms){Or(!0);try{a()}finally{Or(!1)}}return c.memoizedState=[f,s],f},useReducer:function(a,s,c){var f=ir();if(c!==void 0){var v=c(s);if(Ms){Or(!0);try{c(s)}finally{Or(!1)}}}else v=s;return f.memoizedState=f.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},f.queue=a,a=a.dispatch=QD.bind(null,He,a),[f.memoizedState,a]},useRef:function(a){var s=ir();return a={current:a},s.memoizedState=a},useState:function(a){a=nm(a);var s=a.queue,c=hx.bind(null,He,s);return s.dispatch=c,[a.memoizedState,c]},useDebugValue:am,useDeferredValue:function(a,s){var c=ir();return im(c,a,s)},useTransition:function(){var a=nm(!1);return a=cx.bind(null,He,a.queue,!0,!1),ir().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,c){var f=He,v=ir();if(ot){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),xt===null)throw Error(r(349));(Je&124)!==0||$S(f,s,c)}v.memoizedState=c;var S={value:c,getSnapshot:s};return v.queue=S,ex(US.bind(null,f,S,a),[a]),f.flags|=2048,Yo(9,bd(),BS.bind(null,f,S,c,s),null),c},useId:function(){var a=ir(),s=xt.identifierPrefix;if(ot){var c=za,f=Ua;c=(f&~(1<<32-An(f)-1)).toString(32)+c,s="«"+s+"R"+c,c=gd++,0<c&&(s+="H"+c.toString(32)),s+="»"}else c=qD++,s="«"+s+"r"+c.toString(32)+"»";return a.memoizedState=s},useHostTransitionStatus:om,useFormState:WS,useActionState:WS,useOptimistic:function(a){var s=ir();s.memoizedState=s.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=lm.bind(null,He,!0,c),c.dispatch=s,[a,s]},useMemoCache:Jh,useCacheRefresh:function(){return ir().memoizedState=XD.bind(null,He)}},vx={readContext:Rn,use:yd,useCallback:sx,useContext:Rn,useEffect:tx,useImperativeHandle:ix,useInsertionEffect:nx,useLayoutEffect:rx,useMemo:ox,useReducer:vd,useRef:JS,useState:function(){return vd(Ya)},useDebugValue:am,useDeferredValue:function(a,s){var c=Ft();return lx(c,pt.memoizedState,a,s)},useTransition:function(){var a=vd(Ya)[0],s=Ft().memoizedState;return[typeof a=="boolean"?a:yc(a),s]},useSyncExternalStore:LS,useId:fx,useHostTransitionStatus:om,useFormState:XS,useActionState:XS,useOptimistic:function(a,s){var c=Ft();return HS(c,pt,a,s)},useMemoCache:Jh,useCacheRefresh:px},ZD={readContext:Rn,use:yd,useCallback:sx,useContext:Rn,useEffect:tx,useImperativeHandle:ix,useInsertionEffect:nx,useLayoutEffect:rx,useMemo:ox,useReducer:tm,useRef:JS,useState:function(){return tm(Ya)},useDebugValue:am,useDeferredValue:function(a,s){var c=Ft();return pt===null?im(c,a,s):lx(c,pt.memoizedState,a,s)},useTransition:function(){var a=tm(Ya)[0],s=Ft().memoizedState;return[typeof a=="boolean"?a:yc(a),s]},useSyncExternalStore:LS,useId:fx,useHostTransitionStatus:om,useFormState:ZS,useActionState:ZS,useOptimistic:function(a,s){var c=Ft();return pt!==null?HS(c,pt,a,s):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Jh,useCacheRefresh:px},qo=null,Sc=0;function Ed(a){var s=Sc;return Sc+=1,qo===null&&(qo=[]),_S(qo,a,s)}function xc(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function Cd(a,s){throw s.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(s),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function bx(a){var s=a._init;return s(a._payload)}function Sx(a){function s(q,z){if(a){var X=q.deletions;X===null?(q.deletions=[z],q.flags|=16):X.push(z)}}function c(q,z){if(!a)return null;for(;z!==null;)s(q,z),z=z.sibling;return null}function f(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function v(q,z){return q=Ba(q,z),q.index=0,q.sibling=null,q}function S(q,z,X){return q.index=X,a?(X=q.alternate,X!==null?(X=X.index,X<z?(q.flags|=67108866,z):X):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function P(q){return a&&q.alternate===null&&(q.flags|=67108866),q}function N(q,z,X,le){return z===null||z.tag!==6?(z=_h(X,q.mode,le),z.return=q,z):(z=v(z,X),z.return=q,z)}function B(q,z,X,le){var Pe=X.type;return Pe===x?se(q,z,X.props.children,le,X.key):z!==null&&(z.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===I&&bx(Pe)===z.type)?(z=v(z,X.props),xc(z,X),z.return=q,z):(z=sd(X.type,X.key,X.props,null,q.mode,le),xc(z,X),z.return=q,z)}function Q(q,z,X,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==X.containerInfo||z.stateNode.implementation!==X.implementation?(z=Nh(X,q.mode,le),z.return=q,z):(z=v(z,X.children||[]),z.return=q,z)}function se(q,z,X,le,Pe){return z===null||z.tag!==7?(z=Ts(X,q.mode,le,Pe),z.return=q,z):(z=v(z,X),z.return=q,z)}function ce(q,z,X){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=_h(""+z,q.mode,X),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case y:return X=sd(z.type,z.key,z.props,null,q.mode,X),xc(X,z),X.return=q,X;case b:return z=Nh(z,q.mode,X),z.return=q,z;case I:var le=z._init;return z=le(z._payload),ce(q,z,X)}if(re(z)||W(z))return z=Ts(z,q.mode,X,null),z.return=q,z;if(typeof z.then=="function")return ce(q,Ed(z),X);if(z.$$typeof===_)return ce(q,ud(q,z),X);Cd(q,z)}return null}function Z(q,z,X,le){var Pe=z!==null?z.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Pe!==null?null:N(q,z,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case y:return X.key===Pe?B(q,z,X,le):null;case b:return X.key===Pe?Q(q,z,X,le):null;case I:return Pe=X._init,X=Pe(X._payload),Z(q,z,X,le)}if(re(X)||W(X))return Pe!==null?null:se(q,z,X,le,null);if(typeof X.then=="function")return Z(q,z,Ed(X),le);if(X.$$typeof===_)return Z(q,z,ud(q,X),le);Cd(q,X)}return null}function ee(q,z,X,le,Pe){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return q=q.get(X)||null,N(z,q,""+le,Pe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case y:return q=q.get(le.key===null?X:le.key)||null,B(z,q,le,Pe);case b:return q=q.get(le.key===null?X:le.key)||null,Q(z,q,le,Pe);case I:var Ke=le._init;return le=Ke(le._payload),ee(q,z,X,le,Pe)}if(re(le)||W(le))return q=q.get(X)||null,se(z,q,le,Pe,null);if(typeof le.then=="function")return ee(q,z,X,Ed(le),Pe);if(le.$$typeof===_)return ee(q,z,X,ud(z,le),Pe);Cd(z,le)}return null}function je(q,z,X,le){for(var Pe=null,Ke=null,_e=z,Me=z=0,mn=null;_e!==null&&Me<X.length;Me++){_e.index>Me?(mn=_e,_e=null):mn=_e.sibling;var at=Z(q,_e,X[Me],le);if(at===null){_e===null&&(_e=mn);break}a&&_e&&at.alternate===null&&s(q,_e),z=S(at,z,Me),Ke===null?Pe=at:Ke.sibling=at,Ke=at,_e=mn}if(Me===X.length)return c(q,_e),ot&&ws(q,Me),Pe;if(_e===null){for(;Me<X.length;Me++)_e=ce(q,X[Me],le),_e!==null&&(z=S(_e,z,Me),Ke===null?Pe=_e:Ke.sibling=_e,Ke=_e);return ot&&ws(q,Me),Pe}for(_e=f(_e);Me<X.length;Me++)mn=ee(_e,q,Me,X[Me],le),mn!==null&&(a&&mn.alternate!==null&&_e.delete(mn.key===null?Me:mn.key),z=S(mn,z,Me),Ke===null?Pe=mn:Ke.sibling=mn,Ke=mn);return a&&_e.forEach(function(Ki){return s(q,Ki)}),ot&&ws(q,Me),Pe}function ke(q,z,X,le){if(X==null)throw Error(r(151));for(var Pe=null,Ke=null,_e=z,Me=z=0,mn=null,at=X.next();_e!==null&&!at.done;Me++,at=X.next()){_e.index>Me?(mn=_e,_e=null):mn=_e.sibling;var Ki=Z(q,_e,at.value,le);if(Ki===null){_e===null&&(_e=mn);break}a&&_e&&Ki.alternate===null&&s(q,_e),z=S(Ki,z,Me),Ke===null?Pe=Ki:Ke.sibling=Ki,Ke=Ki,_e=mn}if(at.done)return c(q,_e),ot&&ws(q,Me),Pe;if(_e===null){for(;!at.done;Me++,at=X.next())at=ce(q,at.value,le),at!==null&&(z=S(at,z,Me),Ke===null?Pe=at:Ke.sibling=at,Ke=at);return ot&&ws(q,Me),Pe}for(_e=f(_e);!at.done;Me++,at=X.next())at=ee(_e,q,Me,at.value,le),at!==null&&(a&&at.alternate!==null&&_e.delete(at.key===null?Me:at.key),z=S(at,z,Me),Ke===null?Pe=at:Ke.sibling=at,Ke=at);return a&&_e.forEach(function(Jk){return s(q,Jk)}),ot&&ws(q,Me),Pe}function mt(q,z,X,le){if(typeof X=="object"&&X!==null&&X.type===x&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case y:e:{for(var Pe=X.key;z!==null;){if(z.key===Pe){if(Pe=X.type,Pe===x){if(z.tag===7){c(q,z.sibling),le=v(z,X.props.children),le.return=q,q=le;break e}}else if(z.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===I&&bx(Pe)===z.type){c(q,z.sibling),le=v(z,X.props),xc(le,X),le.return=q,q=le;break e}c(q,z);break}else s(q,z);z=z.sibling}X.type===x?(le=Ts(X.props.children,q.mode,le,X.key),le.return=q,q=le):(le=sd(X.type,X.key,X.props,null,q.mode,le),xc(le,X),le.return=q,q=le)}return P(q);case b:e:{for(Pe=X.key;z!==null;){if(z.key===Pe)if(z.tag===4&&z.stateNode.containerInfo===X.containerInfo&&z.stateNode.implementation===X.implementation){c(q,z.sibling),le=v(z,X.children||[]),le.return=q,q=le;break e}else{c(q,z);break}else s(q,z);z=z.sibling}le=Nh(X,q.mode,le),le.return=q,q=le}return P(q);case I:return Pe=X._init,X=Pe(X._payload),mt(q,z,X,le)}if(re(X))return je(q,z,X,le);if(W(X)){if(Pe=W(X),typeof Pe!="function")throw Error(r(150));return X=Pe.call(X),ke(q,z,X,le)}if(typeof X.then=="function")return mt(q,z,Ed(X),le);if(X.$$typeof===_)return mt(q,z,ud(q,X),le);Cd(q,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,z!==null&&z.tag===6?(c(q,z.sibling),le=v(z,X),le.return=q,q=le):(c(q,z),le=_h(X,q.mode,le),le.return=q,q=le),P(q)):c(q,z)}return function(q,z,X,le){try{Sc=0;var Pe=mt(q,z,X,le);return qo=null,Pe}catch(_e){if(_e===dc||_e===fd)throw _e;var Ke=pr(29,_e,null,q.mode);return Ke.lanes=le,Ke.return=q,Ke}finally{}}}var Fo=Sx(!0),xx=Sx(!1),Br=K(null),Sa=null;function Mi(a){var s=a.alternate;ie(rn,rn.current&1),ie(Br,a),Sa===null&&(s===null||zo.current!==null||s.memoizedState!==null)&&(Sa=a)}function Ax(a){if(a.tag===22){if(ie(rn,rn.current),ie(Br,a),Sa===null){var s=a.alternate;s!==null&&s.memoizedState!==null&&(Sa=a)}}else ji()}function ji(){ie(rn,rn.current),ie(Br,Br.current)}function qa(a){F(Br),Sa===a&&(Sa=null),F(rn)}var rn=K(0);function Td(a){for(var s=a;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Zm(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function cm(a,s,c,f){s=a.memoizedState,c=c(f,s),c=c==null?s:h({},s,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var um={enqueueSetState:function(a,s,c){a=a._reactInternals;var f=yr(),v=Ni(f);v.payload=s,c!=null&&(v.callback=c),s=Di(a,v,f),s!==null&&(vr(s,a,f),pc(s,a,f))},enqueueReplaceState:function(a,s,c){a=a._reactInternals;var f=yr(),v=Ni(f);v.tag=1,v.payload=s,c!=null&&(v.callback=c),s=Di(a,v,f),s!==null&&(vr(s,a,f),pc(s,a,f))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var c=yr(),f=Ni(c);f.tag=2,s!=null&&(f.callback=s),s=Di(a,f,c),s!==null&&(vr(s,a,c),pc(s,a,c))}};function Ex(a,s,c,f,v,S,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,S,P):s.prototype&&s.prototype.isPureReactComponent?!In(c,f)||!In(v,S):!0}function Cx(a,s,c,f){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==a&&um.enqueueReplaceState(s,s.state,null)}function js(a,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(a=a.defaultProps){c===s&&(c=h({},c));for(var v in a)c[v]===void 0&&(c[v]=a[v])}return c}var Pd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Tx(a){Pd(a)}function Px(a){console.error(a)}function wx(a){Pd(a)}function wd(a,s){try{var c=a.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function Ox(a,s,c){try{var f=a.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function dm(a,s,c){return c=Ni(c),c.tag=3,c.payload={element:null},c.callback=function(){wd(a,s)},c}function _x(a){return a=Ni(a),a.tag=3,a}function Nx(a,s,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var S=f.value;a.payload=function(){return v(S)},a.callback=function(){Ox(s,c,f)}}var P=c.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(a.callback=function(){Ox(s,c,f),typeof v!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var N=f.stack;this.componentDidCatch(f.value,{componentStack:N!==null?N:""})})}function JD(a,s,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&lc(s,c,v,!0),c=Br.current,c!==null){switch(c.tag){case 13:return Sa===null?Im():c.alternate===null&&It===0&&(It=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===Uh?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),Lm(a,f,v)),!1;case 22:return c.flags|=65536,f===Uh?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),Lm(a,f,v)),!1}throw Error(r(435,c.tag))}return Lm(a,f,v),Im(),!1}if(ot)return s=Br.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,f!==Mh&&(a=Error(r(422),{cause:f}),oc(Ir(a,c)))):(f!==Mh&&(s=Error(r(423),{cause:f}),oc(Ir(s,c))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,f=Ir(f,c),v=dm(a.stateNode,f,v),Hh(a,v),It!==4&&(It=2)),!1;var S=Error(r(520),{cause:f});if(S=Ir(S,c),Oc===null?Oc=[S]:Oc.push(S),It!==4&&(It=2),s===null)return!0;f=Ir(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,a=v&-v,c.lanes|=a,a=dm(c.stateNode,f,a),Hh(c,a),!1;case 1:if(s=c.type,S=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ui===null||!Ui.has(S))))return c.flags|=65536,v&=-v,c.lanes|=v,v=_x(v),Nx(v,a,c,f),Hh(c,v),!1}c=c.return}while(c!==null);return!1}var Dx=Error(r(461)),pn=!1;function Pn(a,s,c,f){s.child=a===null?xx(s,null,c,f):Fo(s,a.child,c,f)}function kx(a,s,c,f,v){c=c.render;var S=s.ref;if("ref"in f){var P={};for(var N in f)N!=="ref"&&(P[N]=f[N])}else P=f;return Ds(s),f=Kh(a,s,c,P,S,v),N=Wh(),a!==null&&!pn?(Xh(a,s,v),Fa(a,s,v)):(ot&&N&&Dh(s),s.flags|=1,Pn(a,s,f,v),s.child)}function Mx(a,s,c,f,v){if(a===null){var S=c.type;return typeof S=="function"&&!Oh(S)&&S.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=S,jx(a,s,S,f,v)):(a=sd(c.type,null,f,s,s.mode,v),a.ref=s.ref,a.return=s,s.child=a)}if(S=a.child,!bm(a,v)){var P=S.memoizedProps;if(c=c.compare,c=c!==null?c:In,c(P,f)&&a.ref===s.ref)return Fa(a,s,v)}return s.flags|=1,a=Ba(S,f),a.ref=s.ref,a.return=s,s.child=a}function jx(a,s,c,f,v){if(a!==null){var S=a.memoizedProps;if(In(S,f)&&a.ref===s.ref)if(pn=!1,s.pendingProps=f=S,bm(a,v))(a.flags&131072)!==0&&(pn=!0);else return s.lanes=a.lanes,Fa(a,s,v)}return fm(a,s,c,f,v)}function Ix(a,s,c){var f=s.pendingProps,v=f.children,S=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((s.flags&128)!==0){if(f=S!==null?S.baseLanes|c:c,a!==null){for(v=s.child=a.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;s.childLanes=S&~f}else s.childLanes=0,s.child=null;return Rx(a,s,f,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&dd(s,S!==null?S.cachePool:null),S!==null?jS(s,S):qh(),Ax(s);else return s.lanes=s.childLanes=536870912,Rx(a,s,S!==null?S.baseLanes|c:c,c)}else S!==null?(dd(s,S.cachePool),jS(s,S),ji(),s.memoizedState=null):(a!==null&&dd(s,null),qh(),ji());return Pn(a,s,v,c),s.child}function Rx(a,s,c,f){var v=Bh();return v=v===null?null:{parent:nn._currentValue,pool:v},s.memoizedState={baseLanes:c,cachePool:v},a!==null&&dd(s,null),qh(),Ax(s),a!==null&&lc(a,s,f,!0),null}function Od(a,s){var c=s.ref;if(c===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(s.flags|=4194816)}}function fm(a,s,c,f,v){return Ds(s),c=Kh(a,s,c,f,void 0,v),f=Wh(),a!==null&&!pn?(Xh(a,s,v),Fa(a,s,v)):(ot&&f&&Dh(s),s.flags|=1,Pn(a,s,c,v),s.child)}function Lx(a,s,c,f,v,S){return Ds(s),s.updateQueue=null,c=RS(s,f,c,v),IS(a),f=Wh(),a!==null&&!pn?(Xh(a,s,S),Fa(a,s,S)):(ot&&f&&Dh(s),s.flags|=1,Pn(a,s,c,S),s.child)}function $x(a,s,c,f,v){if(Ds(s),s.stateNode===null){var S=Ro,P=c.contextType;typeof P=="object"&&P!==null&&(S=Rn(P)),S=new c(f,S),s.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=um,s.stateNode=S,S._reactInternals=s,S=s.stateNode,S.props=f,S.state=s.memoizedState,S.refs={},zh(s),P=c.contextType,S.context=typeof P=="object"&&P!==null?Rn(P):Ro,S.state=s.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(cm(s,c,P,f),S.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(P=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),P!==S.state&&um.enqueueReplaceState(S,S.state,null),mc(s,f,S,v),hc(),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(a===null){S=s.stateNode;var N=s.memoizedProps,B=js(c,N);S.props=B;var Q=S.context,se=c.contextType;P=Ro,typeof se=="object"&&se!==null&&(P=Rn(se));var ce=c.getDerivedStateFromProps;se=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function",N=s.pendingProps!==N,se||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N||Q!==P)&&Cx(s,S,f,P),_i=!1;var Z=s.memoizedState;S.state=Z,mc(s,f,S,v),hc(),Q=s.memoizedState,N||Z!==Q||_i?(typeof ce=="function"&&(cm(s,c,ce,f),Q=s.memoizedState),(B=_i||Ex(s,c,B,f,Z,Q,P))?(se||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=Q),S.props=f,S.state=Q,S.context=P,f=B):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{S=s.stateNode,Gh(a,s),P=s.memoizedProps,se=js(c,P),S.props=se,ce=s.pendingProps,Z=S.context,Q=c.contextType,B=Ro,typeof Q=="object"&&Q!==null&&(B=Rn(Q)),N=c.getDerivedStateFromProps,(Q=typeof N=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==ce||Z!==B)&&Cx(s,S,f,B),_i=!1,Z=s.memoizedState,S.state=Z,mc(s,f,S,v),hc();var ee=s.memoizedState;P!==ce||Z!==ee||_i||a!==null&&a.dependencies!==null&&cd(a.dependencies)?(typeof N=="function"&&(cm(s,c,N,f),ee=s.memoizedState),(se=_i||Ex(s,c,se,f,Z,ee,B)||a!==null&&a.dependencies!==null&&cd(a.dependencies))?(Q||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,ee,B),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,ee,B)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||P===a.memoizedProps&&Z===a.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&Z===a.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=ee),S.props=f,S.state=ee,S.context=B,f=se):(typeof S.componentDidUpdate!="function"||P===a.memoizedProps&&Z===a.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&Z===a.memoizedState||(s.flags|=1024),f=!1)}return S=f,Od(a,s),f=(s.flags&128)!==0,S||f?(S=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:S.render(),s.flags|=1,a!==null&&f?(s.child=Fo(s,a.child,null,v),s.child=Fo(s,null,c,v)):Pn(a,s,c,v),s.memoizedState=S.state,a=s.child):a=Fa(a,s,v),a}function Bx(a,s,c,f){return sc(),s.flags|=256,Pn(a,s,c,f),s.child}var pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(a){return{baseLanes:a,cachePool:PS()}}function mm(a,s,c){return a=a!==null?a.childLanes&~c:0,s&&(a|=Ur),a}function Ux(a,s,c){var f=s.pendingProps,v=!1,S=(s.flags&128)!==0,P;if((P=S)||(P=a!==null&&a.memoizedState===null?!1:(rn.current&2)!==0),P&&(v=!0,s.flags&=-129),P=(s.flags&32)!==0,s.flags&=-33,a===null){if(ot){if(v?Mi(s):ji(),ot){var N=jt,B;if(B=N){e:{for(B=N,N=ba;B.nodeType!==8;){if(!N){N=null;break e}if(B=ia(B.nextSibling),B===null){N=null;break e}}N=B}N!==null?(s.memoizedState={dehydrated:N,treeContext:Ps!==null?{id:Ua,overflow:za}:null,retryLane:536870912,hydrationErrors:null},B=pr(18,null,null,0),B.stateNode=N,B.return=s,s.child=B,Wn=s,jt=null,B=!0):B=!1}B||_s(s)}if(N=s.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Zm(N)?s.lanes=32:s.lanes=536870912,null;qa(s)}return N=f.children,f=f.fallback,v?(ji(),v=s.mode,N=_d({mode:"hidden",children:N},v),f=Ts(f,v,c,null),N.return=s,f.return=s,N.sibling=f,s.child=N,v=s.child,v.memoizedState=hm(c),v.childLanes=mm(a,P,c),s.memoizedState=pm,f):(Mi(s),gm(s,N))}if(B=a.memoizedState,B!==null&&(N=B.dehydrated,N!==null)){if(S)s.flags&256?(Mi(s),s.flags&=-257,s=ym(a,s,c)):s.memoizedState!==null?(ji(),s.child=a.child,s.flags|=128,s=null):(ji(),v=f.fallback,N=s.mode,f=_d({mode:"visible",children:f.children},N),v=Ts(v,N,c,null),v.flags|=2,f.return=s,v.return=s,f.sibling=v,s.child=f,Fo(s,a.child,null,c),f=s.child,f.memoizedState=hm(c),f.childLanes=mm(a,P,c),s.memoizedState=pm,s=v);else if(Mi(s),Zm(N)){if(P=N.nextSibling&&N.nextSibling.dataset,P)var Q=P.dgst;P=Q,f=Error(r(419)),f.stack="",f.digest=P,oc({value:f,source:null,stack:null}),s=ym(a,s,c)}else if(pn||lc(a,s,c,!1),P=(c&a.childLanes)!==0,pn||P){if(P=xt,P!==null&&(f=c&-c,f=(f&42)!==0?1:po(f),f=(f&(P.suspendedLanes|c))!==0?0:f,f!==0&&f!==B.retryLane))throw B.retryLane=f,Io(a,f),vr(P,a,f),Dx;N.data==="$?"||Im(),s=ym(a,s,c)}else N.data==="$?"?(s.flags|=192,s.child=a.child,s=null):(a=B.treeContext,jt=ia(N.nextSibling),Wn=s,ot=!0,Os=null,ba=!1,a!==null&&(Lr[$r++]=Ua,Lr[$r++]=za,Lr[$r++]=Ps,Ua=a.id,za=a.overflow,Ps=s),s=gm(s,f.children),s.flags|=4096);return s}return v?(ji(),v=f.fallback,N=s.mode,B=a.child,Q=B.sibling,f=Ba(B,{mode:"hidden",children:f.children}),f.subtreeFlags=B.subtreeFlags&65011712,Q!==null?v=Ba(Q,v):(v=Ts(v,N,c,null),v.flags|=2),v.return=s,f.return=s,f.sibling=v,s.child=f,f=v,v=s.child,N=a.child.memoizedState,N===null?N=hm(c):(B=N.cachePool,B!==null?(Q=nn._currentValue,B=B.parent!==Q?{parent:Q,pool:Q}:B):B=PS(),N={baseLanes:N.baseLanes|c,cachePool:B}),v.memoizedState=N,v.childLanes=mm(a,P,c),s.memoizedState=pm,f):(Mi(s),c=a.child,a=c.sibling,c=Ba(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,a!==null&&(P=s.deletions,P===null?(s.deletions=[a],s.flags|=16):P.push(a)),s.child=c,s.memoizedState=null,c)}function gm(a,s){return s=_d({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function _d(a,s){return a=pr(22,a,null,s),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ym(a,s,c){return Fo(s,a.child,null,c),a=gm(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function zx(a,s,c){a.lanes|=s;var f=a.alternate;f!==null&&(f.lanes|=s),Ih(a.return,s,c)}function vm(a,s,c,f,v){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=c,S.tailMode=v)}function Gx(a,s,c){var f=s.pendingProps,v=f.revealOrder,S=f.tail;if(Pn(a,s,f.children,c),f=rn.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&zx(a,c,s);else if(a.tag===19)zx(a,c,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(ie(rn,f),v){case"forwards":for(c=s.child,v=null;c!==null;)a=c.alternate,a!==null&&Td(a)===null&&(v=c),c=c.sibling;c=v,c===null?(v=s.child,s.child=null):(v=c.sibling,c.sibling=null),vm(s,!1,v,c,S);break;case"backwards":for(c=null,v=s.child,s.child=null;v!==null;){if(a=v.alternate,a!==null&&Td(a)===null){s.child=v;break}a=v.sibling,v.sibling=c,c=v,v=a}vm(s,!0,c,null,S);break;case"together":vm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Fa(a,s,c){if(a!==null&&(s.dependencies=a.dependencies),Bi|=s.lanes,(c&s.childLanes)===0)if(a!==null){if(lc(a,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(r(153));if(s.child!==null){for(a=s.child,c=Ba(a,a.pendingProps),s.child=c,c.return=s;a.sibling!==null;)a=a.sibling,c=c.sibling=Ba(a,a.pendingProps),c.return=s;c.sibling=null}return s.child}function bm(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&cd(a)))}function ek(a,s,c){switch(s.tag){case 3:qe(s,s.stateNode.containerInfo),Oi(s,nn,a.memoizedState.cache),sc();break;case 27:case 5:Re(s);break;case 4:qe(s,s.stateNode.containerInfo);break;case 10:Oi(s,s.type,s.memoizedProps.value);break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Mi(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Ux(a,s,c):(Mi(s),a=Fa(a,s,c),a!==null?a.sibling:null);Mi(s);break;case 19:var v=(a.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(lc(a,s,c,!1),f=(c&s.childLanes)!==0),v){if(f)return Gx(a,s,c);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ie(rn,rn.current),f)break;return null;case 22:case 23:return s.lanes=0,Ix(a,s,c);case 24:Oi(s,nn,a.memoizedState.cache)}return Fa(a,s,c)}function Hx(a,s,c){if(a!==null)if(a.memoizedProps!==s.pendingProps)pn=!0;else{if(!bm(a,c)&&(s.flags&128)===0)return pn=!1,ek(a,s,c);pn=(a.flags&131072)!==0}else pn=!1,ot&&(s.flags&1048576)!==0&&bS(s,ld,s.index);switch(s.lanes=0,s.tag){case 16:e:{a=s.pendingProps;var f=s.elementType,v=f._init;if(f=v(f._payload),s.type=f,typeof f=="function")Oh(f)?(a=js(f,a),s.tag=1,s=$x(null,s,f,a,c)):(s.tag=0,s=fm(null,s,f,a,c));else{if(f!=null){if(v=f.$$typeof,v===M){s.tag=11,s=kx(null,s,f,a,c);break e}else if(v===j){s.tag=14,s=Mx(null,s,f,a,c);break e}}throw s=ne(f)||f,Error(r(306,s,""))}}return s;case 0:return fm(a,s,s.type,s.pendingProps,c);case 1:return f=s.type,v=js(f,s.pendingProps),$x(a,s,f,v,c);case 3:e:{if(qe(s,s.stateNode.containerInfo),a===null)throw Error(r(387));f=s.pendingProps;var S=s.memoizedState;v=S.element,Gh(a,s),mc(s,f,null,c);var P=s.memoizedState;if(f=P.cache,Oi(s,nn,f),f!==S.cache&&Rh(s,[nn],c,!0),hc(),f=P.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:P.cache},s.updateQueue.baseState=S,s.memoizedState=S,s.flags&256){s=Bx(a,s,f,c);break e}else if(f!==v){v=Ir(Error(r(424)),s),oc(v),s=Bx(a,s,f,c);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(jt=ia(a.firstChild),Wn=s,ot=!0,Os=null,ba=!0,c=xx(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(sc(),f===v){s=Fa(a,s,c);break e}Pn(a,s,f,c)}s=s.child}return s;case 26:return Od(a,s),a===null?(c=V1(s.type,null,s.pendingProps,null))?s.memoizedState=c:ot||(c=s.type,a=s.pendingProps,f=Hd(xe.current).createElement(c),f[Jt]=s,f[Fn]=a,On(f,c,a),St(f),s.stateNode=f):s.memoizedState=V1(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return Re(s),a===null&&ot&&(f=s.stateNode=Y1(s.type,s.pendingProps,xe.current),Wn=s,ba=!0,v=jt,Hi(s.type)?(Jm=v,jt=ia(f.firstChild)):jt=v),Pn(a,s,s.pendingProps.children,c),Od(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&ot&&((v=f=jt)&&(f=Ok(f,s.type,s.pendingProps,ba),f!==null?(s.stateNode=f,Wn=s,jt=ia(f.firstChild),ba=!1,v=!0):v=!1),v||_s(s)),Re(s),v=s.type,S=s.pendingProps,P=a!==null?a.memoizedProps:null,f=S.children,Wm(v,S)?f=null:P!==null&&Wm(v,P)&&(s.flags|=32),s.memoizedState!==null&&(v=Kh(a,s,FD,null,null,c),Lc._currentValue=v),Od(a,s),Pn(a,s,f,c),s.child;case 6:return a===null&&ot&&((a=c=jt)&&(c=_k(c,s.pendingProps,ba),c!==null?(s.stateNode=c,Wn=s,jt=null,a=!0):a=!1),a||_s(s)),null;case 13:return Ux(a,s,c);case 4:return qe(s,s.stateNode.containerInfo),f=s.pendingProps,a===null?s.child=Fo(s,null,f,c):Pn(a,s,f,c),s.child;case 11:return kx(a,s,s.type,s.pendingProps,c);case 7:return Pn(a,s,s.pendingProps,c),s.child;case 8:return Pn(a,s,s.pendingProps.children,c),s.child;case 12:return Pn(a,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,Oi(s,s.type,f.value),Pn(a,s,f.children,c),s.child;case 9:return v=s.type._context,f=s.pendingProps.children,Ds(s),v=Rn(v),f=f(v),s.flags|=1,Pn(a,s,f,c),s.child;case 14:return Mx(a,s,s.type,s.pendingProps,c);case 15:return jx(a,s,s.type,s.pendingProps,c);case 19:return Gx(a,s,c);case 31:return f=s.pendingProps,c=s.mode,f={mode:f.mode,children:f.children},a===null?(c=_d(f,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=Ba(a.child,f),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return Ix(a,s,c);case 24:return Ds(s),f=Rn(nn),a===null?(v=Bh(),v===null&&(v=xt,S=Lh(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=c),v=S),s.memoizedState={parent:f,cache:v},zh(s),Oi(s,nn,v)):((a.lanes&c)!==0&&(Gh(a,s),mc(s,null,null,c),hc()),v=a.memoizedState,S=s.memoizedState,v.parent!==f?(v={parent:f,cache:f},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Oi(s,nn,f)):(f=S.cache,Oi(s,nn,f),f!==v.cache&&Rh(s,[nn],c,!0))),Pn(a,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Va(a){a.flags|=4}function Yx(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Z1(s)){if(s=Br.current,s!==null&&((Je&4194048)===Je?Sa!==null:(Je&62914560)!==Je&&(Je&536870912)===0||s!==Sa))throw fc=Uh,wS;a.flags|=8192}}function Nd(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?Mt():536870912,a.lanes|=s,Xo|=s)}function Ac(a,s){if(!ot)switch(a.tailMode){case"hidden":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Dt(a){var s=a.alternate!==null&&a.alternate.child===a.child,c=0,f=0;if(s)for(var v=a.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=f,a.childLanes=c,s}function tk(a,s,c){var f=s.pendingProps;switch(kh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(s),null;case 1:return Dt(s),null;case 3:return c=s.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Ha(nn),be(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(ic(s)?Va(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,AS())),Dt(s),null;case 26:return c=s.memoizedState,a===null?(Va(s),c!==null?(Dt(s),Yx(s,c)):(Dt(s),s.flags&=-16777217)):c?c!==a.memoizedState?(Va(s),Dt(s),Yx(s,c)):(Dt(s),s.flags&=-16777217):(a.memoizedProps!==f&&Va(s),Dt(s),s.flags&=-16777217),null;case 27:Le(s),c=xe.current;var v=s.type;if(a!==null&&s.stateNode!=null)a.memoizedProps!==f&&Va(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return Dt(s),null}a=he.current,ic(s)?SS(s):(a=Y1(v,f,c),s.stateNode=a,Va(s))}return Dt(s),null;case 5:if(Le(s),c=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==f&&Va(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return Dt(s),null}if(a=he.current,ic(s))SS(s);else{switch(v=Hd(xe.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?v.createElement(c,{is:f.is}):v.createElement(c)}}a[Jt]=s,a[Fn]=f;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=a;e:switch(On(a,c,f),c){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Va(s)}}return Dt(s),s.flags&=-16777217,null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==f&&Va(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(r(166));if(a=xe.current,ic(s)){if(a=s.stateNode,c=s.memoizedProps,f=null,v=Wn,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}a[Jt]=s,a=!!(a.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||L1(a.nodeValue,c)),a||_s(s)}else a=Hd(a).createTextNode(f),a[Jt]=s,s.stateNode=a}return Dt(s),null;case 13:if(f=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=ic(s),f!==null&&f.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Jt]=s}else sc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),v=!1}else v=AS(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(qa(s),s):(qa(s),null)}if(qa(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=f!==null,a=a!==null&&a.memoizedState!==null,c){f=s.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool);var S=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==v&&(f.flags|=2048)}return c!==a&&c&&(s.child.flags|=8192),Nd(s,s.updateQueue),Dt(s),null;case 4:return be(),a===null&&Ym(s.stateNode.containerInfo),Dt(s),null;case 10:return Ha(s.type),Dt(s),null;case 19:if(F(rn),v=s.memoizedState,v===null)return Dt(s),null;if(f=(s.flags&128)!==0,S=v.rendering,S===null)if(f)Ac(v,!1);else{if(It!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(S=Td(a),S!==null){for(s.flags|=128,Ac(v,!1),a=S.updateQueue,s.updateQueue=a,Nd(s,a),s.subtreeFlags=0,a=c,c=s.child;c!==null;)vS(c,a),c=c.sibling;return ie(rn,rn.current&1|2),s.child}a=a.sibling}v.tail!==null&&nt()>Md&&(s.flags|=128,f=!0,Ac(v,!1),s.lanes=4194304)}else{if(!f)if(a=Td(S),a!==null){if(s.flags|=128,f=!0,a=a.updateQueue,s.updateQueue=a,Nd(s,a),Ac(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!ot)return Dt(s),null}else 2*nt()-v.renderingStartTime>Md&&c!==536870912&&(s.flags|=128,f=!0,Ac(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(a=v.last,a!==null?a.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=nt(),s.sibling=null,a=rn.current,ie(rn,f?a&1|2:a&1),s):(Dt(s),null);case 22:case 23:return qa(s),Fh(),f=s.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(Dt(s),s.subtreeFlags&6&&(s.flags|=8192)):Dt(s),c=s.updateQueue,c!==null&&Nd(s,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),a!==null&&F(ks),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ha(nn),Dt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function nk(a,s){switch(kh(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return Ha(nn),be(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return Le(s),null;case 13:if(qa(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(r(340));sc()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return F(rn),null;case 4:return be(),null;case 10:return Ha(s.type),null;case 22:case 23:return qa(s),Fh(),a!==null&&F(ks),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return Ha(nn),null;case 25:return null;default:return null}}function qx(a,s){switch(kh(s),s.tag){case 3:Ha(nn),be();break;case 26:case 27:case 5:Le(s);break;case 4:be();break;case 13:qa(s);break;case 19:F(rn);break;case 10:Ha(s.type);break;case 22:case 23:qa(s),Fh(),a!==null&&F(ks);break;case 24:Ha(nn)}}function Ec(a,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&a)===a){f=void 0;var S=c.create,P=c.inst;f=S(),P.destroy=f}c=c.next}while(c!==v)}}catch(N){vt(s,s.return,N)}}function Ii(a,s,c){try{var f=s.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var S=v.next;f=S;do{if((f.tag&a)===a){var P=f.inst,N=P.destroy;if(N!==void 0){P.destroy=void 0,v=s;var B=c,Q=N;try{Q()}catch(se){vt(v,B,se)}}}f=f.next}while(f!==S)}}catch(se){vt(s,s.return,se)}}function Fx(a){var s=a.updateQueue;if(s!==null){var c=a.stateNode;try{MS(s,c)}catch(f){vt(a,a.return,f)}}}function Vx(a,s,c){c.props=js(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(f){vt(a,s,f)}}function Cc(a,s){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof c=="function"?a.refCleanup=c(f):c.current=f}}catch(v){vt(a,s,v)}}function xa(a,s){var c=a.ref,f=a.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){vt(a,s,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){vt(a,s,v)}else c.current=null}function Kx(a){var s=a.type,c=a.memoizedProps,f=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){vt(a,a.return,v)}}function Sm(a,s,c){try{var f=a.stateNode;Ek(f,a.type,c,s),f[Fn]=s}catch(v){vt(a,a.return,v)}}function Wx(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Hi(a.type)||a.tag===4}function xm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Wx(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Hi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Am(a,s,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(a),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Gd));else if(f!==4&&(f===27&&Hi(a.type)&&(c=a.stateNode,s=null),a=a.child,a!==null))for(Am(a,s,c),a=a.sibling;a!==null;)Am(a,s,c),a=a.sibling}function Dd(a,s,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?c.insertBefore(a,s):c.appendChild(a);else if(f!==4&&(f===27&&Hi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Dd(a,s,c),a=a.sibling;a!==null;)Dd(a,s,c),a=a.sibling}function Xx(a){var s=a.stateNode,c=a.memoizedProps;try{for(var f=a.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);On(s,f,c),s[Jt]=a,s[Fn]=c}catch(S){vt(a,a.return,S)}}var Ka=!1,Bt=!1,Em=!1,Qx=typeof WeakSet=="function"?WeakSet:Set,hn=null;function rk(a,s){if(a=a.containerInfo,Vm=Wd,a=La(a),rc(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break e}var P=0,N=-1,B=-1,Q=0,se=0,ce=a,Z=null;t:for(;;){for(var ee;ce!==c||v!==0&&ce.nodeType!==3||(N=P+v),ce!==S||f!==0&&ce.nodeType!==3||(B=P+f),ce.nodeType===3&&(P+=ce.nodeValue.length),(ee=ce.firstChild)!==null;)Z=ce,ce=ee;for(;;){if(ce===a)break t;if(Z===c&&++Q===v&&(N=P),Z===S&&++se===f&&(B=P),(ee=ce.nextSibling)!==null)break;ce=Z,Z=ce.parentNode}ce=ee}c=N===-1||B===-1?null:{start:N,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Km={focusedElem:a,selectionRange:c},Wd=!1,hn=s;hn!==null;)if(s=hn,a=s.child,(s.subtreeFlags&1024)!==0&&a!==null)a.return=s,hn=a;else for(;hn!==null;){switch(s=hn,S=s.alternate,a=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&S!==null){a=void 0,c=s,v=S.memoizedProps,S=S.memoizedState,f=c.stateNode;try{var je=js(c.type,v,c.elementType===c.type);a=f.getSnapshotBeforeUpdate(je,S),f.__reactInternalSnapshotBeforeUpdate=a}catch(ke){vt(c,c.return,ke)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,c=a.nodeType,c===9)Qm(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Qm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=s.sibling,a!==null){a.return=s.return,hn=a;break}hn=s.return}}function Zx(a,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Ri(a,c),f&4&&Ec(5,c);break;case 1:if(Ri(a,c),f&4)if(a=c.stateNode,s===null)try{a.componentDidMount()}catch(P){vt(c,c.return,P)}else{var v=js(c.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(v,s,a.__reactInternalSnapshotBeforeUpdate)}catch(P){vt(c,c.return,P)}}f&64&&Fx(c),f&512&&Cc(c,c.return);break;case 3:if(Ri(a,c),f&64&&(a=c.updateQueue,a!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{MS(a,s)}catch(P){vt(c,c.return,P)}}break;case 27:s===null&&f&4&&Xx(c);case 26:case 5:Ri(a,c),s===null&&f&4&&Kx(c),f&512&&Cc(c,c.return);break;case 12:Ri(a,c);break;case 13:Ri(a,c),f&4&&t1(a,c),f&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=fk.bind(null,c),Nk(a,c))));break;case 22:if(f=c.memoizedState!==null||Ka,!f){s=s!==null&&s.memoizedState!==null||Bt,v=Ka;var S=Bt;Ka=f,(Bt=s)&&!S?Li(a,c,(c.subtreeFlags&8772)!==0):Ri(a,c),Ka=v,Bt=S}break;case 30:break;default:Ri(a,c)}}function Jx(a){var s=a.alternate;s!==null&&(a.alternate=null,Jx(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&na(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Tt=null,sr=!1;function Wa(a,s,c){for(c=c.child;c!==null;)e1(a,s,c),c=c.sibling}function e1(a,s,c){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(pa,c)}catch{}switch(c.tag){case 26:Bt||xa(c,s),Wa(a,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Bt||xa(c,s);var f=Tt,v=sr;Hi(c.type)&&(Tt=c.stateNode,sr=!1),Wa(a,s,c),Mc(c.stateNode),Tt=f,sr=v;break;case 5:Bt||xa(c,s);case 6:if(f=Tt,v=sr,Tt=null,Wa(a,s,c),Tt=f,sr=v,Tt!==null)if(sr)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(c.stateNode)}catch(S){vt(c,s,S)}else try{Tt.removeChild(c.stateNode)}catch(S){vt(c,s,S)}break;case 18:Tt!==null&&(sr?(a=Tt,G1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),zc(a)):G1(Tt,c.stateNode));break;case 4:f=Tt,v=sr,Tt=c.stateNode.containerInfo,sr=!0,Wa(a,s,c),Tt=f,sr=v;break;case 0:case 11:case 14:case 15:Bt||Ii(2,c,s),Bt||Ii(4,c,s),Wa(a,s,c);break;case 1:Bt||(xa(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Vx(c,s,f)),Wa(a,s,c);break;case 21:Wa(a,s,c);break;case 22:Bt=(f=Bt)||c.memoizedState!==null,Wa(a,s,c),Bt=f;break;default:Wa(a,s,c)}}function t1(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{zc(a)}catch(c){vt(s,s.return,c)}}function ak(a){switch(a.tag){case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new Qx),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new Qx),s;default:throw Error(r(435,a.tag))}}function Cm(a,s){var c=ak(a);s.forEach(function(f){var v=pk.bind(null,a,f);c.has(f)||(c.add(f),f.then(v,v))})}function hr(a,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],S=a,P=s,N=P;e:for(;N!==null;){switch(N.tag){case 27:if(Hi(N.type)){Tt=N.stateNode,sr=!1;break e}break;case 5:Tt=N.stateNode,sr=!1;break e;case 3:case 4:Tt=N.stateNode.containerInfo,sr=!0;break e}N=N.return}if(Tt===null)throw Error(r(160));e1(S,P,v),Tt=null,sr=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)n1(s,a),s=s.sibling}var aa=null;function n1(a,s){var c=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:hr(s,a),mr(a),f&4&&(Ii(3,a,a.return),Ec(3,a),Ii(5,a,a.return));break;case 1:hr(s,a),mr(a),f&512&&(Bt||c===null||xa(c,c.return)),f&64&&Ka&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=aa;if(hr(s,a),mr(a),f&512&&(Bt||c===null||xa(c,c.return)),f&4){var S=c!==null?c.memoizedState:null;if(f=a.memoizedState,c===null)if(f===null)if(a.stateNode===null){e:{f=a.type,c=a.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":S=v.getElementsByTagName("title")[0],(!S||S[kn]||S[Jt]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(f),v.head.insertBefore(S,v.querySelector("head > title"))),On(S,f,c),S[Jt]=a,St(S),f=S;break e;case"link":var P=X1("link","href",v).get(f+(c.href||""));if(P){for(var N=0;N<P.length;N++)if(S=P[N],S.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&S.getAttribute("rel")===(c.rel==null?null:c.rel)&&S.getAttribute("title")===(c.title==null?null:c.title)&&S.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){P.splice(N,1);break t}}S=v.createElement(f),On(S,f,c),v.head.appendChild(S);break;case"meta":if(P=X1("meta","content",v).get(f+(c.content||""))){for(N=0;N<P.length;N++)if(S=P[N],S.getAttribute("content")===(c.content==null?null:""+c.content)&&S.getAttribute("name")===(c.name==null?null:c.name)&&S.getAttribute("property")===(c.property==null?null:c.property)&&S.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&S.getAttribute("charset")===(c.charSet==null?null:c.charSet)){P.splice(N,1);break t}}S=v.createElement(f),On(S,f,c),v.head.appendChild(S);break;default:throw Error(r(468,f))}S[Jt]=a,St(S),f=S}a.stateNode=f}else Q1(v,a.type,a.stateNode);else a.stateNode=W1(v,f,a.memoizedProps);else S!==f?(S===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):S.count--,f===null?Q1(v,a.type,a.stateNode):W1(v,f,a.memoizedProps)):f===null&&a.stateNode!==null&&Sm(a,a.memoizedProps,c.memoizedProps)}break;case 27:hr(s,a),mr(a),f&512&&(Bt||c===null||xa(c,c.return)),c!==null&&f&4&&Sm(a,a.memoizedProps,c.memoizedProps);break;case 5:if(hr(s,a),mr(a),f&512&&(Bt||c===null||xa(c,c.return)),a.flags&32){v=a.stateNode;try{Ss(v,"")}catch(ee){vt(a,a.return,ee)}}f&4&&a.stateNode!=null&&(v=a.memoizedProps,Sm(a,v,c!==null?c.memoizedProps:v)),f&1024&&(Em=!0);break;case 6:if(hr(s,a),mr(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,c=a.stateNode;try{c.nodeValue=f}catch(ee){vt(a,a.return,ee)}}break;case 3:if(Fd=null,v=aa,aa=Yd(s.containerInfo),hr(s,a),aa=v,mr(a),f&4&&c!==null&&c.memoizedState.isDehydrated)try{zc(s.containerInfo)}catch(ee){vt(a,a.return,ee)}Em&&(Em=!1,r1(a));break;case 4:f=aa,aa=Yd(a.stateNode.containerInfo),hr(s,a),mr(a),aa=f;break;case 12:hr(s,a),mr(a);break;case 13:hr(s,a),mr(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Nm=nt()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Cm(a,f)));break;case 22:v=a.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,Q=Ka,se=Bt;if(Ka=Q||v,Bt=se||B,hr(s,a),Bt=se,Ka=Q,mr(a),f&8192)e:for(s=a.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(c===null||B||Ka||Bt||Is(a)),c=null,s=a;;){if(s.tag===5||s.tag===26){if(c===null){B=c=s;try{if(S=B.stateNode,v)P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{N=B.stateNode;var ce=B.memoizedProps.style,Z=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ee){vt(B,B.return,ee)}}}else if(s.tag===6){if(c===null){B=s;try{B.stateNode.nodeValue=v?"":B.memoizedProps}catch(ee){vt(B,B.return,ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=a.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Cm(a,c))));break;case 19:hr(s,a),mr(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Cm(a,f)));break;case 30:break;case 21:break;default:hr(s,a),mr(a)}}function mr(a){var s=a.flags;if(s&2){try{for(var c,f=a.return;f!==null;){if(Wx(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var v=c.stateNode,S=xm(a);Dd(a,S,v);break;case 5:var P=c.stateNode;c.flags&32&&(Ss(P,""),c.flags&=-33);var N=xm(a);Dd(a,N,P);break;case 3:case 4:var B=c.stateNode.containerInfo,Q=xm(a);Am(a,Q,B);break;default:throw Error(r(161))}}catch(se){vt(a,a.return,se)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function r1(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;r1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function Ri(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Zx(a,s.alternate,s),s=s.sibling}function Is(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:Ii(4,s,s.return),Is(s);break;case 1:xa(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&Vx(s,s.return,c),Is(s);break;case 27:Mc(s.stateNode);case 26:case 5:xa(s,s.return),Is(s);break;case 22:s.memoizedState===null&&Is(s);break;case 30:Is(s);break;default:Is(s)}a=a.sibling}}function Li(a,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,v=a,S=s,P=S.flags;switch(S.tag){case 0:case 11:case 15:Li(v,S,c),Ec(4,S);break;case 1:if(Li(v,S,c),f=S,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){vt(f,f.return,Q)}if(f=S,v=f.updateQueue,v!==null){var N=f.stateNode;try{var B=v.shared.hiddenCallbacks;if(B!==null)for(v.shared.hiddenCallbacks=null,v=0;v<B.length;v++)kS(B[v],N)}catch(Q){vt(f,f.return,Q)}}c&&P&64&&Fx(S),Cc(S,S.return);break;case 27:Xx(S);case 26:case 5:Li(v,S,c),c&&f===null&&P&4&&Kx(S),Cc(S,S.return);break;case 12:Li(v,S,c);break;case 13:Li(v,S,c),c&&P&4&&t1(v,S);break;case 22:S.memoizedState===null&&Li(v,S,c),Cc(S,S.return);break;case 30:break;default:Li(v,S,c)}s=s.sibling}}function Tm(a,s){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&cc(c))}function Pm(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&cc(a))}function Aa(a,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)a1(a,s,c,f),s=s.sibling}function a1(a,s,c,f){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Aa(a,s,c,f),v&2048&&Ec(9,s);break;case 1:Aa(a,s,c,f);break;case 3:Aa(a,s,c,f),v&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&cc(a)));break;case 12:if(v&2048){Aa(a,s,c,f),a=s.stateNode;try{var S=s.memoizedProps,P=S.id,N=S.onPostCommit;typeof N=="function"&&N(P,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(B){vt(s,s.return,B)}}else Aa(a,s,c,f);break;case 13:Aa(a,s,c,f);break;case 23:break;case 22:S=s.stateNode,P=s.alternate,s.memoizedState!==null?S._visibility&2?Aa(a,s,c,f):Tc(a,s):S._visibility&2?Aa(a,s,c,f):(S._visibility|=2,Vo(a,s,c,f,(s.subtreeFlags&10256)!==0)),v&2048&&Tm(P,s);break;case 24:Aa(a,s,c,f),v&2048&&Pm(s.alternate,s);break;default:Aa(a,s,c,f)}}function Vo(a,s,c,f,v){for(v=v&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var S=a,P=s,N=c,B=f,Q=P.flags;switch(P.tag){case 0:case 11:case 15:Vo(S,P,N,B,v),Ec(8,P);break;case 23:break;case 22:var se=P.stateNode;P.memoizedState!==null?se._visibility&2?Vo(S,P,N,B,v):Tc(S,P):(se._visibility|=2,Vo(S,P,N,B,v)),v&&Q&2048&&Tm(P.alternate,P);break;case 24:Vo(S,P,N,B,v),v&&Q&2048&&Pm(P.alternate,P);break;default:Vo(S,P,N,B,v)}s=s.sibling}}function Tc(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=a,f=s,v=f.flags;switch(f.tag){case 22:Tc(c,f),v&2048&&Tm(f.alternate,f);break;case 24:Tc(c,f),v&2048&&Pm(f.alternate,f);break;default:Tc(c,f)}s=s.sibling}}var Pc=8192;function Ko(a){if(a.subtreeFlags&Pc)for(a=a.child;a!==null;)i1(a),a=a.sibling}function i1(a){switch(a.tag){case 26:Ko(a),a.flags&Pc&&a.memoizedState!==null&&Hk(aa,a.memoizedState,a.memoizedProps);break;case 5:Ko(a);break;case 3:case 4:var s=aa;aa=Yd(a.stateNode.containerInfo),Ko(a),aa=s;break;case 22:a.memoizedState===null&&(s=a.alternate,s!==null&&s.memoizedState!==null?(s=Pc,Pc=16777216,Ko(a),Pc=s):Ko(a));break;default:Ko(a)}}function s1(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function wc(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];hn=f,l1(f,a)}s1(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)o1(a),a=a.sibling}function o1(a){switch(a.tag){case 0:case 11:case 15:wc(a),a.flags&2048&&Ii(9,a,a.return);break;case 3:wc(a);break;case 12:wc(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,kd(a)):wc(a);break;default:wc(a)}}function kd(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];hn=f,l1(f,a)}s1(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:Ii(8,s,s.return),kd(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,kd(s));break;default:kd(s)}a=a.sibling}}function l1(a,s){for(;hn!==null;){var c=hn;switch(c.tag){case 0:case 11:case 15:Ii(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:cc(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,hn=f;else e:for(c=a;hn!==null;){f=hn;var v=f.sibling,S=f.return;if(Jx(f),f===c){hn=null;break e}if(v!==null){v.return=S,hn=v;break e}hn=S}}}var ik={getCacheForType:function(a){var s=Rn(nn),c=s.data.get(a);return c===void 0&&(c=a(),s.data.set(a,c)),c}},sk=typeof WeakMap=="function"?WeakMap:Map,ct=0,xt=null,We=null,Je=0,ut=0,gr=null,$i=!1,Wo=!1,wm=!1,Xa=0,It=0,Bi=0,Rs=0,Om=0,Ur=0,Xo=0,Oc=null,or=null,_m=!1,Nm=0,Md=1/0,jd=null,Ui=null,wn=0,zi=null,Qo=null,Zo=0,Dm=0,km=null,c1=null,_c=0,Mm=null;function yr(){if((ct&2)!==0&&Je!==0)return Je&-Je;if(L.T!==null){var a=Bo;return a!==0?a:Um()}return Iu()}function u1(){Ur===0&&(Ur=(Je&536870912)===0||ot?ha():536870912);var a=Br.current;return a!==null&&(a.flags|=32),Ur}function vr(a,s,c){(a===xt&&(ut===2||ut===9)||a.cancelPendingCommit!==null)&&(Jo(a,0),Gi(a,Je,Ur,!1)),dn(a,c),((ct&2)===0||a!==xt)&&(a===xt&&((ct&2)===0&&(Rs|=c),It===4&&Gi(a,Je,Ur,!1)),Ea(a))}function d1(a,s,c){if((ct&6)!==0)throw Error(r(327));var f=!c&&(s&124)===0&&(s&a.expiredLanes)===0||Rt(a,s),v=f?ck(a,s):Rm(a,s,!0),S=f;do{if(v===0){Wo&&!f&&Gi(a,s,0,!1);break}else{if(c=a.current.alternate,S&&!ok(c)){v=Rm(a,s,!1),S=!1;continue}if(v===2){if(S=s,a.errorRecoveryDisabledLanes&S)var P=0;else P=a.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){s=P;e:{var N=a;v=Oc;var B=N.current.memoizedState.isDehydrated;if(B&&(Jo(N,P).flags|=256),P=Rm(N,P,!1),P!==2){if(wm&&!B){N.errorRecoveryDisabledLanes|=S,Rs|=S,v=4;break e}S=or,or=v,S!==null&&(or===null?or=S:or.push.apply(or,S))}v=P}if(S=!1,v!==2)continue}}if(v===1){Jo(a,0),Gi(a,s,0,!0);break}e:{switch(f=a,S=v,S){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Gi(f,s,Ur,!$i);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(v=Nm+300-nt(),10<v)){if(Gi(f,s,Ur,!$i),Ie(f,0,!0)!==0)break e;f.timeoutHandle=U1(f1.bind(null,f,c,or,jd,_m,s,Ur,Rs,Xo,$i,S,2,-0,0),v);break e}f1(f,c,or,jd,_m,s,Ur,Rs,Xo,$i,S,0,-0,0)}}break}while(!0);Ea(a)}function f1(a,s,c,f,v,S,P,N,B,Q,se,ce,Z,ee){if(a.timeoutHandle=-1,ce=s.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(Rc={stylesheets:null,count:0,unsuspend:Gk},i1(s),ce=Yk(),ce!==null)){a.cancelPendingCommit=ce(b1.bind(null,a,s,S,c,f,v,P,N,B,se,1,Z,ee)),Gi(a,S,P,!Q);return}b1(a,s,S,c,f,v,P,N,B)}function ok(a){for(var s=a;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],S=v.getSnapshot;v=v.value;try{if(!Tn(S(),v))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gi(a,s,c,f){s&=~Om,s&=~Rs,a.suspendedLanes|=s,a.pingedLanes&=~s,f&&(a.warmLanes|=s),f=a.expirationTimes;for(var v=s;0<v;){var S=31-An(v),P=1<<S;f[S]=-1,v&=~P}c!==0&&ka(a,c,s)}function Id(){return(ct&6)===0?(Nc(0),!1):!0}function jm(){if(We!==null){if(ut===0)var a=We.return;else a=We,Ga=Ns=null,Qh(a),qo=null,Sc=0,a=We;for(;a!==null;)qx(a.alternate,a),a=a.return;We=null}}function Jo(a,s){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,Tk(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),jm(),xt=a,We=c=Ba(a.current,null),Je=s,ut=0,gr=null,$i=!1,Wo=Rt(a,s),wm=!1,Xo=Ur=Om=Rs=Bi=It=0,or=Oc=null,_m=!1,(s&8)!==0&&(s|=s&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=s;0<f;){var v=31-An(f),S=1<<v;s|=a[v],f&=~S}return Xa=s,rd(),c}function p1(a,s){He=null,L.H=Ad,s===dc||s===fd?(s=NS(),ut=3):s===wS?(s=NS(),ut=4):ut=s===Dx?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,gr=s,We===null&&(It=1,wd(a,Ir(s,a.current)))}function h1(){var a=L.H;return L.H=Ad,a===null?Ad:a}function m1(){var a=L.A;return L.A=ik,a}function Im(){It=4,$i||(Je&4194048)!==Je&&Br.current!==null||(Wo=!0),(Bi&134217727)===0&&(Rs&134217727)===0||xt===null||Gi(xt,Je,Ur,!1)}function Rm(a,s,c){var f=ct;ct|=2;var v=h1(),S=m1();(xt!==a||Je!==s)&&(jd=null,Jo(a,s)),s=!1;var P=It;e:do try{if(ut!==0&&We!==null){var N=We,B=gr;switch(ut){case 8:jm(),P=6;break e;case 3:case 2:case 9:case 6:Br.current===null&&(s=!0);var Q=ut;if(ut=0,gr=null,el(a,N,B,Q),c&&Wo){P=0;break e}break;default:Q=ut,ut=0,gr=null,el(a,N,B,Q)}}lk(),P=It;break}catch(se){p1(a,se)}while(!0);return s&&a.shellSuspendCounter++,Ga=Ns=null,ct=f,L.H=v,L.A=S,We===null&&(xt=null,Je=0,rd()),P}function lk(){for(;We!==null;)g1(We)}function ck(a,s){var c=ct;ct|=2;var f=h1(),v=m1();xt!==a||Je!==s?(jd=null,Md=nt()+500,Jo(a,s)):Wo=Rt(a,s);e:do try{if(ut!==0&&We!==null){s=We;var S=gr;t:switch(ut){case 1:ut=0,gr=null,el(a,s,S,1);break;case 2:case 9:if(OS(S)){ut=0,gr=null,y1(s);break}s=function(){ut!==2&&ut!==9||xt!==a||(ut=7),Ea(a)},S.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:OS(S)?(ut=0,gr=null,y1(s)):(ut=0,gr=null,el(a,s,S,7));break;case 5:var P=null;switch(We.tag){case 26:P=We.memoizedState;case 5:case 27:var N=We;if(!P||Z1(P)){ut=0,gr=null;var B=N.sibling;if(B!==null)We=B;else{var Q=N.return;Q!==null?(We=Q,Rd(Q)):We=null}break t}}ut=0,gr=null,el(a,s,S,5);break;case 6:ut=0,gr=null,el(a,s,S,6);break;case 8:jm(),It=6;break e;default:throw Error(r(462))}}uk();break}catch(se){p1(a,se)}while(!0);return Ga=Ns=null,L.H=f,L.A=v,ct=c,We!==null?0:(xt=null,Je=0,rd(),It)}function uk(){for(;We!==null&&!Qt();)g1(We)}function g1(a){var s=Hx(a.alternate,a,Xa);a.memoizedProps=a.pendingProps,s===null?Rd(a):We=s}function y1(a){var s=a,c=s.alternate;switch(s.tag){case 15:case 0:s=Lx(c,s,s.pendingProps,s.type,void 0,Je);break;case 11:s=Lx(c,s,s.pendingProps,s.type.render,s.ref,Je);break;case 5:Qh(s);default:qx(c,s),s=We=vS(s,Xa),s=Hx(c,s,Xa)}a.memoizedProps=a.pendingProps,s===null?Rd(a):We=s}function el(a,s,c,f){Ga=Ns=null,Qh(s),qo=null,Sc=0;var v=s.return;try{if(JD(a,v,s,c,Je)){It=1,wd(a,Ir(c,a.current)),We=null;return}}catch(S){if(v!==null)throw We=v,S;It=1,wd(a,Ir(c,a.current)),We=null;return}s.flags&32768?(ot||f===1?a=!0:Wo||(Je&536870912)!==0?a=!1:($i=a=!0,(f===2||f===9||f===3||f===6)&&(f=Br.current,f!==null&&f.tag===13&&(f.flags|=16384))),v1(s,a)):Rd(s)}function Rd(a){var s=a;do{if((s.flags&32768)!==0){v1(s,$i);return}a=s.return;var c=tk(s.alternate,s,Xa);if(c!==null){We=c;return}if(s=s.sibling,s!==null){We=s;return}We=s=a}while(s!==null);It===0&&(It=5)}function v1(a,s){do{var c=nk(a.alternate,a);if(c!==null){c.flags&=32767,We=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(a=a.sibling,a!==null)){We=a;return}We=a=c}while(a!==null);It=6,We=null}function b1(a,s,c,f,v,S,P,N,B){a.cancelPendingCommit=null;do Ld();while(wn!==0);if((ct&6)!==0)throw Error(r(327));if(s!==null){if(s===a.current)throw Error(r(177));if(S=s.lanes|s.childLanes,S|=Ph,qn(a,c,S,P,N,B),a===xt&&(We=xt=null,Je=0),Qo=s,zi=a,Zo=c,Dm=S,km=v,c1=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,hk(Da,function(){return C1(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=L.T,L.T=null,v=G.p,G.p=2,P=ct,ct|=4;try{rk(a,s,c)}finally{ct=P,G.p=v,L.T=f}}wn=1,S1(),x1(),A1()}}function S1(){if(wn===1){wn=0;var a=zi,s=Qo,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var f=G.p;G.p=2;var v=ct;ct|=4;try{n1(s,a);var S=Km,P=La(a.containerInfo),N=S.focusedElem,B=S.selectionRange;if(P!==N&&N&&N.ownerDocument&&ko(N.ownerDocument.documentElement,N)){if(B!==null&&rc(N)){var Q=B.start,se=B.end;if(se===void 0&&(se=Q),"selectionStart"in N)N.selectionStart=Q,N.selectionEnd=Math.min(se,N.value.length);else{var ce=N.ownerDocument||document,Z=ce&&ce.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),je=N.textContent.length,ke=Math.min(B.start,je),mt=B.end===void 0?ke:Math.min(B.end,je);!ee.extend&&ke>mt&&(P=mt,mt=ke,ke=P);var q=Do(N,ke),z=Do(N,mt);if(q&&z&&(ee.rangeCount!==1||ee.anchorNode!==q.node||ee.anchorOffset!==q.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var X=ce.createRange();X.setStart(q.node,q.offset),ee.removeAllRanges(),ke>mt?(ee.addRange(X),ee.extend(z.node,z.offset)):(X.setEnd(z.node,z.offset),ee.addRange(X))}}}}for(ce=[],ee=N;ee=ee.parentNode;)ee.nodeType===1&&ce.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ce.length;N++){var le=ce[N];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Wd=!!Vm,Km=Vm=null}finally{ct=v,G.p=f,L.T=c}}a.current=s,wn=2}}function x1(){if(wn===2){wn=0;var a=zi,s=Qo,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var f=G.p;G.p=2;var v=ct;ct|=4;try{Zx(a,s.alternate,s)}finally{ct=v,G.p=f,L.T=c}}wn=3}}function A1(){if(wn===4||wn===3){wn=0,lt();var a=zi,s=Qo,c=Zo,f=c1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?wn=5:(wn=0,Qo=zi=null,E1(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Ui=null),hs(c),s=s.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(pa,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=L.T,v=G.p,G.p=2,L.T=null;try{for(var S=a.onRecoverableError,P=0;P<f.length;P++){var N=f[P];S(N.value,{componentStack:N.stack})}}finally{L.T=s,G.p=v}}(Zo&3)!==0&&Ld(),Ea(a),v=a.pendingLanes,(c&4194090)!==0&&(v&42)!==0?a===Mm?_c++:(_c=0,Mm=a):_c=0,Nc(0)}}function E1(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,cc(s)))}function Ld(a){return S1(),x1(),A1(),C1()}function C1(){if(wn!==5)return!1;var a=zi,s=Dm;Dm=0;var c=hs(Zo),f=L.T,v=G.p;try{G.p=32>c?32:c,L.T=null,c=km,km=null;var S=zi,P=Zo;if(wn=0,Qo=zi=null,Zo=0,(ct&6)!==0)throw Error(r(331));var N=ct;if(ct|=4,o1(S.current),a1(S,S.current,P,c),ct=N,Nc(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(pa,S)}catch{}return!0}finally{G.p=v,L.T=f,E1(a,s)}}function T1(a,s,c){s=Ir(c,s),s=dm(a.stateNode,s,2),a=Di(a,s,2),a!==null&&(dn(a,2),Ea(a))}function vt(a,s,c){if(a.tag===3)T1(a,a,c);else for(;s!==null;){if(s.tag===3){T1(s,a,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ui===null||!Ui.has(f))){a=Ir(c,a),c=_x(2),f=Di(s,c,2),f!==null&&(Nx(c,f,s,a),dn(f,2),Ea(f));break}}s=s.return}}function Lm(a,s,c){var f=a.pingCache;if(f===null){f=a.pingCache=new sk;var v=new Set;f.set(s,v)}else v=f.get(s),v===void 0&&(v=new Set,f.set(s,v));v.has(c)||(wm=!0,v.add(c),a=dk.bind(null,a,s,c),s.then(a,a))}function dk(a,s,c){var f=a.pingCache;f!==null&&f.delete(s),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,xt===a&&(Je&c)===c&&(It===4||It===3&&(Je&62914560)===Je&&300>nt()-Nm?(ct&2)===0&&Jo(a,0):Om|=c,Xo===Je&&(Xo=0)),Ea(a)}function P1(a,s){s===0&&(s=Mt()),a=Io(a,s),a!==null&&(dn(a,s),Ea(a))}function fk(a){var s=a.memoizedState,c=0;s!==null&&(c=s.retryLane),P1(a,c)}function pk(a,s){var c=0;switch(a.tag){case 13:var f=a.stateNode,v=a.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(s),P1(a,c)}function hk(a,s){return tt(a,s)}var $d=null,tl=null,$m=!1,Bd=!1,Bm=!1,Ls=0;function Ea(a){a!==tl&&a.next===null&&(tl===null?$d=tl=a:tl=tl.next=a),Bd=!0,$m||($m=!0,gk())}function Nc(a,s){if(!Bm&&Bd){Bm=!0;do for(var c=!1,f=$d;f!==null;){if(a!==0){var v=f.pendingLanes;if(v===0)var S=0;else{var P=f.suspendedLanes,N=f.pingedLanes;S=(1<<31-An(42|a)+1)-1,S&=v&~(P&~N),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(c=!0,N1(f,S))}else S=Je,S=Ie(f,f===xt?S:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(S&3)===0||Rt(f,S)||(c=!0,N1(f,S));f=f.next}while(c);Bm=!1}}function mk(){w1()}function w1(){Bd=$m=!1;var a=0;Ls!==0&&(Ck()&&(a=Ls),Ls=0);for(var s=nt(),c=null,f=$d;f!==null;){var v=f.next,S=O1(f,s);S===0?(f.next=null,c===null?$d=v:c.next=v,v===null&&(tl=c)):(c=f,(a!==0||(S&3)!==0)&&(Bd=!0)),f=v}Nc(a)}function O1(a,s){for(var c=a.suspendedLanes,f=a.pingedLanes,v=a.expirationTimes,S=a.pendingLanes&-62914561;0<S;){var P=31-An(S),N=1<<P,B=v[P];B===-1?((N&c)===0||(N&f)!==0)&&(v[P]=Zt(N,s)):B<=s&&(a.expiredLanes|=N),S&=~N}if(s=xt,c=Je,c=Ie(a,a===s?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,c===0||a===s&&(ut===2||ut===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Qe(f),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Rt(a,c)){if(s=c&-c,s===a.callbackPriority)return s;switch(f!==null&&Qe(f),hs(c)){case 2:case 8:c=fo;break;case 32:c=Da;break;case 268435456:c=ps;break;default:c=Da}return f=_1.bind(null,a),c=tt(c,f),a.callbackPriority=s,a.callbackNode=c,s}return f!==null&&f!==null&&Qe(f),a.callbackPriority=2,a.callbackNode=null,2}function _1(a,s){if(wn!==0&&wn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Ld()&&a.callbackNode!==c)return null;var f=Je;return f=Ie(a,a===xt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(d1(a,f,s),O1(a,nt()),a.callbackNode!=null&&a.callbackNode===c?_1.bind(null,a):null)}function N1(a,s){if(Ld())return null;d1(a,s,!0)}function gk(){Pk(function(){(ct&6)!==0?tt(ta,mk):w1()})}function Um(){return Ls===0&&(Ls=ha()),Ls}function D1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ma(""+a)}function k1(a,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,a.id&&c.setAttribute("form",a.id),s.parentNode.insertBefore(c,s),a=new FormData(a),c.parentNode.removeChild(c),a}function yk(a,s,c,f,v){if(s==="submit"&&c&&c.stateNode===v){var S=D1((v[Fn]||null).action),P=f.submitter;P&&(s=(s=P[Fn]||null)?D1(s.formAction):P.getAttribute("formAction"),s!==null&&(S=s,P=null));var N=new Ql("action","action",null,f,v);a.push({event:N,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ls!==0){var B=P?k1(v,P):new FormData(v);sm(c,{pending:!0,data:B,method:v.method,action:S},null,B)}}else typeof S=="function"&&(N.preventDefault(),B=P?k1(v,P):new FormData(v),sm(c,{pending:!0,data:B,method:v.method,action:S},S,B))},currentTarget:v}]})}}for(var zm=0;zm<Th.length;zm++){var Gm=Th[zm],vk=Gm.toLowerCase(),bk=Gm[0].toUpperCase()+Gm.slice(1);ra(vk,"on"+bk)}ra(dS,"onAnimationEnd"),ra(fS,"onAnimationIteration"),ra(pS,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(RD,"onTransitionRun"),ra(LD,"onTransitionStart"),ra($D,"onTransitionCancel"),ra(hS,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),En("onBeforeInput",["compositionend","keypress","textInput","paste"]),En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function M1(a,s){s=(s&4)!==0;for(var c=0;c<a.length;c++){var f=a[c],v=f.event;f=f.listeners;e:{var S=void 0;if(s)for(var P=f.length-1;0<=P;P--){var N=f[P],B=N.instance,Q=N.currentTarget;if(N=N.listener,B!==S&&v.isPropagationStopped())break e;S=N,v.currentTarget=Q;try{S(v)}catch(se){Pd(se)}v.currentTarget=null,S=B}else for(P=0;P<f.length;P++){if(N=f[P],B=N.instance,Q=N.currentTarget,N=N.listener,B!==S&&v.isPropagationStopped())break e;S=N,v.currentTarget=Q;try{S(v)}catch(se){Pd(se)}v.currentTarget=null,S=B}}}}function Xe(a,s){var c=s[Ct];c===void 0&&(c=s[Ct]=new Set);var f=a+"__bubble";c.has(f)||(j1(s,a,2,!1),c.add(f))}function Hm(a,s,c){var f=0;s&&(f|=4),j1(c,a,f,s)}var Ud="_reactListening"+Math.random().toString(36).slice(2);function Ym(a){if(!a[Ud]){a[Ud]=!0,mo.forEach(function(c){c!=="selectionchange"&&(Sk.has(c)||Hm(c,!1,a),Hm(c,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[Ud]||(s[Ud]=!0,Hm("selectionchange",!1,s))}}function j1(a,s,c,f){switch(aA(s)){case 2:var v=Vk;break;case 8:v=Kk;break;default:v=ag}c=v.bind(null,s,c,a),v=void 0,!ya||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),f?v!==void 0?a.addEventListener(s,c,{capture:!0,passive:v}):a.addEventListener(s,c,!0):v!==void 0?a.addEventListener(s,c,{passive:v}):a.addEventListener(s,c,!1)}function qm(a,s,c,f,v){var S=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var P=f.tag;if(P===3||P===4){var N=f.stateNode.containerInfo;if(N===v)break;if(P===4)for(P=f.return;P!==null;){var B=P.tag;if((B===3||B===4)&&P.stateNode.containerInfo===v)return;P=P.return}for(;N!==null;){if(P=_r(N),P===null)return;if(B=P.tag,B===5||B===6||B===26||B===27){f=S=P;continue e}N=N.parentNode}}f=f.return}Wl(function(){var Q=S,se=xo(c),ce=[];e:{var Z=mS.get(a);if(Z!==void 0){var ee=Ql,je=a;switch(a){case"keypress":if(Xl(c)===0)break e;case"keydown":case"keyup":ee=ec;break;case"focusin":je="focus",ee=wo;break;case"focusout":je="blur",ee=wo;break;case"beforeblur":case"afterblur":ee=wo;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=fh;break;case dS:case fS:case pS:ee=Yu;break;case hS:ee=hh;break;case"scroll":case"scrollend":ee=ih;break;case"wheel":ee=gh;break;case"copy":case"cut":case"paste":ee=oh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Fu;break;case"toggle":case"beforetoggle":ee=vh}var ke=(s&4)!==0,mt=!ke&&(a==="scroll"||a==="scrollend"),q=ke?Z!==null?Z+"Capture":null:Z;ke=[];for(var z=Q,X;z!==null;){var le=z;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||q===null||(le=Fe(z,q),le!=null&&ke.push(kc(z,le,X))),mt)break;z=z.return}0<ke.length&&(Z=new ee(Z,je,null,c,se),ce.push({event:Z,listeners:ke}))}}if((s&7)===0){e:{if(Z=a==="mouseover"||a==="pointerover",ee=a==="mouseout"||a==="pointerout",Z&&c!==ja&&(je=c.relatedTarget||c.fromElement)&&(_r(je)||je[ms]))break e;if((ee||Z)&&(Z=se.window===se?se:(Z=se.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(je=c.relatedTarget||c.toElement,ee=Q,je=je?_r(je):null,je!==null&&(mt=o(je),ke=je.tag,je!==mt||ke!==5&&ke!==27&&ke!==6)&&(je=null)):(ee=null,je=Q),ee!==je)){if(ke=Ei,le="onMouseLeave",q="onMouseEnter",z="mouse",(a==="pointerout"||a==="pointerover")&&(ke=Fu,le="onPointerLeave",q="onPointerEnter",z="pointer"),mt=ee==null?Z:en(ee),X=je==null?Z:en(je),Z=new ke(le,z+"leave",ee,c,se),Z.target=mt,Z.relatedTarget=X,le=null,_r(se)===Q&&(ke=new ke(q,z+"enter",je,c,se),ke.target=X,ke.relatedTarget=mt,le=ke),mt=le,ee&&je)t:{for(ke=ee,q=je,z=0,X=ke;X;X=nl(X))z++;for(X=0,le=q;le;le=nl(le))X++;for(;0<z-X;)ke=nl(ke),z--;for(;0<X-z;)q=nl(q),X--;for(;z--;){if(ke===q||q!==null&&ke===q.alternate)break t;ke=nl(ke),q=nl(q)}ke=null}else ke=null;ee!==null&&I1(ce,Z,ee,ke,!1),je!==null&&mt!==null&&I1(ce,mt,je,ke,!0)}}e:{if(Z=Q?en(Q):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var Pe=ed;else if(Zu(Z))if($)Pe=Pi;else{Pe=Ze;var Ke=Ue}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&Lu(Q.elementType)&&(Pe=ed):Pe=tn;if(Pe&&(Pe=Pe(a,Q))){Ju(ce,Pe,c,se);break e}Ke&&Ke(a,Z,Q),a==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&So(Z,"number",Z.value)}switch(Ke=Q?en(Q):window,a){case"focusin":(Zu(Ke)||Ke.contentEditable==="true")&&(jr=Ke,ac=Q,$a=null);break;case"focusout":$a=ac=jr=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,cS(ce,c,se);break;case"selectionchange":if(td)break;case"keydown":case"keyup":cS(ce,c,se)}var _e;if(tc)e:{switch(a){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Ci?Wu(a,c)&&(Me="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Me="onCompositionStart");Me&&(Vu&&c.locale!=="ko"&&(Ci||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Ci&&(_e=ar()):(Ia=se,Uu="value"in Ia?Ia.value:Ia.textContent,Ci=!0)),Ke=zd(Q,Me),0<Ke.length&&(Me=new qu(Me,a,null,c,se),ce.push({event:Me,listeners:Ke}),_e?Me.data=_e:(_e=Xu(c),_e!==null&&(Me.data=_e)))),(_e=Sh?xh(a,c):Qu(a,c))&&(Me=zd(Q,"onBeforeInput"),0<Me.length&&(Ke=new qu("onBeforeInput","beforeinput",null,c,se),ce.push({event:Ke,listeners:Me}),Ke.data=_e)),yk(ce,a,Q,c,se)}M1(ce,s)})}function kc(a,s,c){return{instance:a,listener:s,currentTarget:c}}function zd(a,s){for(var c=s+"Capture",f=[];a!==null;){var v=a,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=Fe(a,c),v!=null&&f.unshift(kc(a,v,S)),v=Fe(a,s),v!=null&&f.push(kc(a,v,S))),a.tag===3)return f;a=a.return}return[]}function nl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function I1(a,s,c,f,v){for(var S=s._reactName,P=[];c!==null&&c!==f;){var N=c,B=N.alternate,Q=N.stateNode;if(N=N.tag,B!==null&&B===f)break;N!==5&&N!==26&&N!==27||Q===null||(B=Q,v?(Q=Fe(c,S),Q!=null&&P.unshift(kc(c,Q,B))):v||(Q=Fe(c,S),Q!=null&&P.push(kc(c,Q,B)))),c=c.return}P.length!==0&&a.push({event:s,listeners:P})}var xk=/\r\n?/g,Ak=/\u0000|\uFFFD/g;function R1(a){return(typeof a=="string"?a:""+a).replace(xk,`
`).replace(Ak,"")}function L1(a,s){return s=R1(s),R1(a)===s}function Gd(){}function ht(a,s,c,f,v,S){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||Ss(a,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&Ss(a,""+f);break;case"className":yo(a,"class",f);break;case"tabIndex":yo(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":yo(a,c,f);break;case"style":ah(a,f,S);break;case"data":if(s!=="object"){yo(a,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){a.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=Ma(""+f),a.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(c==="formAction"?(s!=="input"&&ht(a,s,"name",v.name,v,null),ht(a,s,"formEncType",v.formEncType,v,null),ht(a,s,"formMethod",v.formMethod,v,null),ht(a,s,"formTarget",v.formTarget,v,null)):(ht(a,s,"encType",v.encType,v,null),ht(a,s,"method",v.method,v,null),ht(a,s,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=Ma(""+f),a.setAttribute(c,f);break;case"onClick":f!=null&&(a.onclick=Gd);break;case"onScroll":f!=null&&Xe("scroll",a);break;case"onScrollEnd":f!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}c=Ma(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""+f):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":f===!0?a.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,f):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(c,f):a.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(c):a.setAttribute(c,f);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),vs(a,"popover",f);break;case"xlinkActuate":kr(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":kr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":kr(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":kr(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":kr(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":kr(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":kr(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":kr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":kr(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":vs(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=$u.get(c)||c,vs(a,c,f))}}function Fm(a,s,c,f,v,S){switch(c){case"style":ah(a,f,S);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof f=="string"?Ss(a,f):(typeof f=="number"||typeof f=="bigint")&&Ss(a,""+f);break;case"onScroll":f!=null&&Xe("scroll",a);break;case"onScrollEnd":f!=null&&Xe("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Gd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ys.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),s=c.slice(2,v?c.length-7:void 0),S=a[Fn]||null,S=S!=null?S[c]:null,typeof S=="function"&&a.removeEventListener(s,S,v),typeof f=="function")){typeof S!="function"&&S!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(s,f,v);break e}c in a?a[c]=f:f===!0?a.setAttribute(c,""):vs(a,c,f)}}}function On(a,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var f=!1,v=!1,S;for(S in c)if(c.hasOwnProperty(S)){var P=c[S];if(P!=null)switch(S){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ht(a,s,S,P,c,null)}}v&&ht(a,s,"srcSet",c.srcSet,c,null),f&&ht(a,s,"src",c.src,c,null);return;case"input":Xe("invalid",a);var N=S=P=v=null,B=null,Q=null;for(f in c)if(c.hasOwnProperty(f)){var se=c[f];if(se!=null)switch(f){case"name":v=se;break;case"type":P=se;break;case"checked":B=se;break;case"defaultChecked":Q=se;break;case"value":S=se;break;case"defaultValue":N=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,s));break;default:ht(a,s,f,se,c,null)}}Yl(a,S,N,B,Q,P,v,!1),Mr(a);return;case"select":Xe("invalid",a),f=P=S=null;for(v in c)if(c.hasOwnProperty(v)&&(N=c[v],N!=null))switch(v){case"value":S=N;break;case"defaultValue":P=N;break;case"multiple":f=N;default:ht(a,s,v,N,c,null)}s=S,c=P,a.multiple=!!f,s!=null?Si(a,!!f,s,!1):c!=null&&Si(a,!!f,c,!0);return;case"textarea":Xe("invalid",a),S=v=f=null;for(P in c)if(c.hasOwnProperty(P)&&(N=c[P],N!=null))switch(P){case"value":f=N;break;case"defaultValue":v=N;break;case"children":S=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:ht(a,s,P,N,c,null)}rh(a,f,v,S),Mr(a);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(f=c[B],f!=null))switch(B){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ht(a,s,B,f,c,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(f=0;f<Dc.length;f++)Xe(Dc[f],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(f=c[Q],f!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ht(a,s,Q,f,c,null)}return;default:if(Lu(s)){for(se in c)c.hasOwnProperty(se)&&(f=c[se],f!==void 0&&Fm(a,s,se,f,c,void 0));return}}for(N in c)c.hasOwnProperty(N)&&(f=c[N],f!=null&&ht(a,s,N,f,c,null))}function Ek(a,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,P=null,N=null,B=null,Q=null,se=null;for(ee in c){var ce=c[ee];if(c.hasOwnProperty(ee)&&ce!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":B=ce;default:f.hasOwnProperty(ee)||ht(a,s,ee,null,f,ce)}}for(var Z in f){var ee=f[Z];if(ce=c[Z],f.hasOwnProperty(Z)&&(ee!=null||ce!=null))switch(Z){case"type":S=ee;break;case"name":v=ee;break;case"checked":Q=ee;break;case"defaultChecked":se=ee;break;case"value":P=ee;break;case"defaultValue":N=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:ee!==ce&&ht(a,s,Z,ee,f,ce)}}bi(a,P,N,B,Q,se,S,v);return;case"select":ee=P=N=Z=null;for(S in c)if(B=c[S],c.hasOwnProperty(S)&&B!=null)switch(S){case"value":break;case"multiple":ee=B;default:f.hasOwnProperty(S)||ht(a,s,S,null,f,B)}for(v in f)if(S=f[v],B=c[v],f.hasOwnProperty(v)&&(S!=null||B!=null))switch(v){case"value":Z=S;break;case"defaultValue":N=S;break;case"multiple":P=S;default:S!==B&&ht(a,s,v,S,f,B)}s=N,c=P,f=ee,Z!=null?Si(a,!!c,Z,!1):!!f!=!!c&&(s!=null?Si(a,!!c,s,!0):Si(a,!!c,c?[]:"",!1));return;case"textarea":ee=Z=null;for(N in c)if(v=c[N],c.hasOwnProperty(N)&&v!=null&&!f.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ht(a,s,N,null,f,v)}for(P in f)if(v=f[P],S=c[P],f.hasOwnProperty(P)&&(v!=null||S!=null))switch(P){case"value":Z=v;break;case"defaultValue":ee=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==S&&ht(a,s,P,v,f,S)}ql(a,Z,ee);return;case"option":for(var je in c)if(Z=c[je],c.hasOwnProperty(je)&&Z!=null&&!f.hasOwnProperty(je))switch(je){case"selected":a.selected=!1;break;default:ht(a,s,je,null,f,Z)}for(B in f)if(Z=f[B],ee=c[B],f.hasOwnProperty(B)&&Z!==ee&&(Z!=null||ee!=null))switch(B){case"selected":a.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ht(a,s,B,Z,f,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in c)Z=c[ke],c.hasOwnProperty(ke)&&Z!=null&&!f.hasOwnProperty(ke)&&ht(a,s,ke,null,f,Z);for(Q in f)if(Z=f[Q],ee=c[Q],f.hasOwnProperty(Q)&&Z!==ee&&(Z!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:ht(a,s,Q,Z,f,ee)}return;default:if(Lu(s)){for(var mt in c)Z=c[mt],c.hasOwnProperty(mt)&&Z!==void 0&&!f.hasOwnProperty(mt)&&Fm(a,s,mt,void 0,f,Z);for(se in f)Z=f[se],ee=c[se],!f.hasOwnProperty(se)||Z===ee||Z===void 0&&ee===void 0||Fm(a,s,se,Z,f,ee);return}}for(var q in c)Z=c[q],c.hasOwnProperty(q)&&Z!=null&&!f.hasOwnProperty(q)&&ht(a,s,q,null,f,Z);for(ce in f)Z=f[ce],ee=c[ce],!f.hasOwnProperty(ce)||Z===ee||Z==null&&ee==null||ht(a,s,ce,Z,f,ee)}var Vm=null,Km=null;function Hd(a){return a.nodeType===9?a:a.ownerDocument}function $1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B1(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function Wm(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xm=null;function Ck(){var a=window.event;return a&&a.type==="popstate"?a===Xm?!1:(Xm=a,!0):(Xm=null,!1)}var U1=typeof setTimeout=="function"?setTimeout:void 0,Tk=typeof clearTimeout=="function"?clearTimeout:void 0,z1=typeof Promise=="function"?Promise:void 0,Pk=typeof queueMicrotask=="function"?queueMicrotask:typeof z1<"u"?function(a){return z1.resolve(null).then(a).catch(wk)}:U1;function wk(a){setTimeout(function(){throw a})}function Hi(a){return a==="head"}function G1(a,s){var c=s,f=0,v=0;do{var S=c.nextSibling;if(a.removeChild(c),S&&S.nodeType===8)if(c=S.data,c==="/$"){if(0<f&&8>f){c=f;var P=a.ownerDocument;if(c&1&&Mc(P.documentElement),c&2&&Mc(P.body),c&4)for(c=P.head,Mc(c),P=c.firstChild;P;){var N=P.nextSibling,B=P.nodeName;P[kn]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&P.rel.toLowerCase()==="stylesheet"||c.removeChild(P),P=N}}if(v===0){a.removeChild(S),zc(s);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:f=c.charCodeAt(0)-48;else f=0;c=S}while(c);zc(s)}function Qm(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Qm(c),na(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function Ok(a,s,c,f){for(;a.nodeType===1;){var v=c;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[kn])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(S=a.getAttribute("rel"),S==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(S!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(S=a.getAttribute("src"),(S!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===S)return a}else return a;if(a=ia(a.nextSibling),a===null)break}return null}function _k(a,s,c){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=ia(a.nextSibling),a===null))return null;return a}function Zm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Nk(a,s){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function ia(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return a}var Jm=null;function H1(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return a;s--}else c==="/$"&&s++}a=a.previousSibling}return null}function Y1(a,s,c){switch(s=Hd(c),a){case"html":if(a=s.documentElement,!a)throw Error(r(452));return a;case"head":if(a=s.head,!a)throw Error(r(453));return a;case"body":if(a=s.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Mc(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);na(a)}var zr=new Map,q1=new Set;function Yd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Qa=G.d;G.d={f:Dk,r:kk,D:Mk,C:jk,L:Ik,m:Rk,X:$k,S:Lk,M:Bk};function Dk(){var a=Qa.f(),s=Id();return a||s}function kk(a){var s=tr(a);s!==null&&s.tag===5&&s.type==="form"?dx(s):Qa.r(a)}var rl=typeof document>"u"?null:document;function F1(a,s,c){var f=rl;if(f&&typeof s=="string"&&s){var v=jn(s);v='link[rel="'+a+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),q1.has(v)||(q1.add(v),a={rel:a,crossOrigin:c,href:s},f.querySelector(v)===null&&(s=f.createElement("link"),On(s,"link",a),St(s),f.head.appendChild(s)))}}function Mk(a){Qa.D(a),F1("dns-prefetch",a,null)}function jk(a,s){Qa.C(a,s),F1("preconnect",a,s)}function Ik(a,s,c){Qa.L(a,s,c);var f=rl;if(f&&a&&s){var v='link[rel="preload"][as="'+jn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+jn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+jn(c.imageSizes)+'"]')):v+='[href="'+jn(a)+'"]';var S=v;switch(s){case"style":S=al(a);break;case"script":S=il(a)}zr.has(S)||(a=h({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:a,as:s},c),zr.set(S,a),f.querySelector(v)!==null||s==="style"&&f.querySelector(jc(S))||s==="script"&&f.querySelector(Ic(S))||(s=f.createElement("link"),On(s,"link",a),St(s),f.head.appendChild(s)))}}function Rk(a,s){Qa.m(a,s);var c=rl;if(c&&a){var f=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+jn(f)+'"][href="'+jn(a)+'"]',S=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=il(a)}if(!zr.has(S)&&(a=h({rel:"modulepreload",href:a},s),zr.set(S,a),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Ic(S)))return}f=c.createElement("link"),On(f,"link",a),St(f),c.head.appendChild(f)}}}function Lk(a,s,c){Qa.S(a,s,c);var f=rl;if(f&&a){var v=Vn(f).hoistableStyles,S=al(a);s=s||"default";var P=v.get(S);if(!P){var N={loading:0,preload:null};if(P=f.querySelector(jc(S)))N.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":s},c),(c=zr.get(S))&&eg(a,c);var B=P=f.createElement("link");St(B),On(B,"link",a),B._p=new Promise(function(Q,se){B.onload=Q,B.onerror=se}),B.addEventListener("load",function(){N.loading|=1}),B.addEventListener("error",function(){N.loading|=2}),N.loading|=4,qd(P,s,f)}P={type:"stylesheet",instance:P,count:1,state:N},v.set(S,P)}}}function $k(a,s){Qa.X(a,s);var c=rl;if(c&&a){var f=Vn(c).hoistableScripts,v=il(a),S=f.get(v);S||(S=c.querySelector(Ic(v)),S||(a=h({src:a,async:!0},s),(s=zr.get(v))&&tg(a,s),S=c.createElement("script"),St(S),On(S,"link",a),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(v,S))}}function Bk(a,s){Qa.M(a,s);var c=rl;if(c&&a){var f=Vn(c).hoistableScripts,v=il(a),S=f.get(v);S||(S=c.querySelector(Ic(v)),S||(a=h({src:a,async:!0,type:"module"},s),(s=zr.get(v))&&tg(a,s),S=c.createElement("script"),St(S),On(S,"link",a),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(v,S))}}function V1(a,s,c,f){var v=(v=xe.current)?Yd(v):null;if(!v)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=al(c.href),c=Vn(v).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=al(c.href);var S=Vn(v).hoistableStyles,P=S.get(a);if(P||(v=v.ownerDocument||v,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(a,P),(S=v.querySelector(jc(a)))&&!S._p&&(P.instance=S,P.state.loading=5),zr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},zr.set(a,c),S||Uk(v,a,c,P.state))),s&&f===null)throw Error(r(528,""));return P}if(s&&f!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=il(c),c=Vn(v).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function al(a){return'href="'+jn(a)+'"'}function jc(a){return'link[rel="stylesheet"]['+a+"]"}function K1(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function Uk(a,s,c,f){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=a.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),On(s,"link",c),St(s),a.head.appendChild(s))}function il(a){return'[src="'+jn(a)+'"]'}function Ic(a){return"script[async]"+a}function W1(a,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=a.querySelector('style[data-href~="'+jn(c.href)+'"]');if(f)return s.instance=f,St(f),f;var v=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),St(f),On(f,"style",v),qd(f,c.precedence,a),s.instance=f;case"stylesheet":v=al(c.href);var S=a.querySelector(jc(v));if(S)return s.state.loading|=4,s.instance=S,St(S),S;f=K1(c),(v=zr.get(v))&&eg(f,v),S=(a.ownerDocument||a).createElement("link"),St(S);var P=S;return P._p=new Promise(function(N,B){P.onload=N,P.onerror=B}),On(S,"link",f),s.state.loading|=4,qd(S,c.precedence,a),s.instance=S;case"script":return S=il(c.src),(v=a.querySelector(Ic(S)))?(s.instance=v,St(v),v):(f=c,(v=zr.get(S))&&(f=h({},c),tg(f,v)),a=a.ownerDocument||a,v=a.createElement("script"),St(v),On(v,"link",f),a.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,qd(f,c.precedence,a));return s.instance}function qd(a,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,S=v,P=0;P<f.length;P++){var N=f[P];if(N.dataset.precedence===s)S=N;else if(S!==v)break}S?S.parentNode.insertBefore(a,S.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(a,s.firstChild))}function eg(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function tg(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var Fd=null;function X1(a,s,c){if(Fd===null){var f=new Map,v=Fd=new Map;v.set(c,f)}else v=Fd,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(a))return f;for(f.set(a,null),c=c.getElementsByTagName(a),v=0;v<c.length;v++){var S=c[v];if(!(S[kn]||S[Jt]||a==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var P=S.getAttribute(s)||"";P=a+P;var N=f.get(P);N?N.push(S):f.set(P,[S])}}return f}function Q1(a,s,c){a=a.ownerDocument||a,a.head.insertBefore(c,s==="title"?a.querySelector("head > title"):null)}function zk(a,s,c){if(c===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Z1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Rc=null;function Gk(){}function Hk(a,s,c){if(Rc===null)throw Error(r(475));var f=Rc;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var v=al(c.href),S=a.querySelector(jc(v));if(S){a=S._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=Vd.bind(f),a.then(f,f)),s.state.loading|=4,s.instance=S,St(S);return}S=a.ownerDocument||a,c=K1(c),(v=zr.get(v))&&eg(c,v),S=S.createElement("link"),St(S);var P=S;P._p=new Promise(function(N,B){P.onload=N,P.onerror=B}),On(S,"link",c),s.instance=S}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(f.count++,s=Vd.bind(f),a.addEventListener("load",s),a.addEventListener("error",s))}}function Yk(){if(Rc===null)throw Error(r(475));var a=Rc;return a.stylesheets&&a.count===0&&ng(a,a.stylesheets),0<a.count?function(s){var c=setTimeout(function(){if(a.stylesheets&&ng(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=s,function(){a.unsuspend=null,clearTimeout(c)}}:null}function Vd(){if(this.count--,this.count===0){if(this.stylesheets)ng(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Kd=null;function ng(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Kd=new Map,s.forEach(qk,a),Kd=null,Vd.call(a))}function qk(a,s){if(!(s.state.loading&4)){var c=Kd.get(a);if(c)var f=c.get(null);else{c=new Map,Kd.set(a,c);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var P=v[S];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(c.set(P.dataset.precedence,P),f=P)}f&&c.set(null,f)}v=s.instance,P=v.getAttribute("data-precedence"),S=c.get(P)||f,S===f&&c.set(null,v),c.set(P,v),this.count++,f=Vd.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),S?S.parentNode.insertBefore(v,S.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),s.state.loading|=4}}var Lc={$$typeof:_,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function Fk(a,s,c,f,v,S,P,N){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function J1(a,s,c,f,v,S,P,N,B,Q,se,ce){return a=new Fk(a,s,c,P,N,B,Q,ce),s=1,S===!0&&(s|=24),S=pr(3,null,null,s),a.current=S,S.stateNode=a,s=Lh(),s.refCount++,a.pooledCache=s,s.refCount++,S.memoizedState={element:f,isDehydrated:c,cache:s},zh(S),a}function eA(a){return a?(a=Ro,a):Ro}function tA(a,s,c,f,v,S){v=eA(v),f.context===null?f.context=v:f.pendingContext=v,f=Ni(s),f.payload={element:c},S=S===void 0?null:S,S!==null&&(f.callback=S),c=Di(a,f,s),c!==null&&(vr(c,a,s),pc(c,a,s))}function nA(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<s?c:s}}function rg(a,s){nA(a,s),(a=a.alternate)&&nA(a,s)}function rA(a){if(a.tag===13){var s=Io(a,67108864);s!==null&&vr(s,a,67108864),rg(a,67108864)}}var Wd=!0;function Vk(a,s,c,f){var v=L.T;L.T=null;var S=G.p;try{G.p=2,ag(a,s,c,f)}finally{G.p=S,L.T=v}}function Kk(a,s,c,f){var v=L.T;L.T=null;var S=G.p;try{G.p=8,ag(a,s,c,f)}finally{G.p=S,L.T=v}}function ag(a,s,c,f){if(Wd){var v=ig(f);if(v===null)qm(a,s,f,Xd,c),iA(a,f);else if(Xk(v,a,s,c,f))f.stopPropagation();else if(iA(a,f),s&4&&-1<Wk.indexOf(a)){for(;v!==null;){var S=tr(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var P=Se(S.pendingLanes);if(P!==0){var N=S;for(N.pendingLanes|=2,N.entangledLanes|=2;P;){var B=1<<31-An(P);N.entanglements[1]|=B,P&=~B}Ea(S),(ct&6)===0&&(Md=nt()+500,Nc(0))}}break;case 13:N=Io(S,2),N!==null&&vr(N,S,2),Id(),rg(S,2)}if(S=ig(f),S===null&&qm(a,s,f,Xd,c),S===v)break;v=S}v!==null&&f.stopPropagation()}else qm(a,s,f,null,c)}}function ig(a){return a=xo(a),sg(a)}var Xd=null;function sg(a){if(Xd=null,a=_r(a),a!==null){var s=o(a);if(s===null)a=null;else{var c=s.tag;if(c===13){if(a=l(s),a!==null)return a;a=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return Xd=a,null}function aA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xn()){case ta:return 2;case fo:return 8;case Da:case Bl:return 32;case ps:return 268435456;default:return 32}default:return 32}}var og=!1,Yi=null,qi=null,Fi=null,$c=new Map,Bc=new Map,Vi=[],Wk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iA(a,s){switch(a){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":$c.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(s.pointerId)}}function Uc(a,s,c,f,v,S){return a===null||a.nativeEvent!==S?(a={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:S,targetContainers:[v]},s!==null&&(s=tr(s),s!==null&&rA(s)),a):(a.eventSystemFlags|=f,s=a.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),a)}function Xk(a,s,c,f,v){switch(s){case"focusin":return Yi=Uc(Yi,a,s,c,f,v),!0;case"dragenter":return qi=Uc(qi,a,s,c,f,v),!0;case"mouseover":return Fi=Uc(Fi,a,s,c,f,v),!0;case"pointerover":var S=v.pointerId;return $c.set(S,Uc($c.get(S)||null,a,s,c,f,v)),!0;case"gotpointercapture":return S=v.pointerId,Bc.set(S,Uc(Bc.get(S)||null,a,s,c,f,v)),!0}return!1}function sA(a){var s=_r(a.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=l(c),s!==null){a.blockedOn=s,lS(a.priority,function(){if(c.tag===13){var f=yr();f=po(f);var v=Io(c,f);v!==null&&vr(v,c,f),rg(c,f)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Qd(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var c=ig(a.nativeEvent);if(c===null){c=a.nativeEvent;var f=new c.constructor(c.type,c);ja=f,c.target.dispatchEvent(f),ja=null}else return s=tr(c),s!==null&&rA(s),a.blockedOn=c,!1;s.shift()}return!0}function oA(a,s,c){Qd(a)&&c.delete(s)}function Qk(){og=!1,Yi!==null&&Qd(Yi)&&(Yi=null),qi!==null&&Qd(qi)&&(qi=null),Fi!==null&&Qd(Fi)&&(Fi=null),$c.forEach(oA),Bc.forEach(oA)}function Zd(a,s){a.blockedOn===s&&(a.blockedOn=null,og||(og=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qk)))}var Jd=null;function lA(a){Jd!==a&&(Jd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Jd===a&&(Jd=null);for(var s=0;s<a.length;s+=3){var c=a[s],f=a[s+1],v=a[s+2];if(typeof f!="function"){if(sg(f||c)===null)continue;break}var S=tr(c);S!==null&&(a.splice(s,3),s-=3,sm(S,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function zc(a){function s(B){return Zd(B,a)}Yi!==null&&Zd(Yi,a),qi!==null&&Zd(qi,a),Fi!==null&&Zd(Fi,a),$c.forEach(s),Bc.forEach(s);for(var c=0;c<Vi.length;c++){var f=Vi[c];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Vi.length&&(c=Vi[0],c.blockedOn===null);)sA(c),c.blockedOn===null&&Vi.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],S=c[f+1],P=v[Fn]||null;if(typeof S=="function")P||lA(c);else if(P){var N=null;if(S&&S.hasAttribute("formAction")){if(v=S,P=S[Fn]||null)N=P.formAction;else if(sg(v)!==null)continue}else N=P.action;typeof N=="function"?c[f+1]=N:(c.splice(f,3),f-=3),lA(c)}}}function lg(a){this._internalRoot=a}ef.prototype.render=lg.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,f=yr();tA(c,f,a,s,null,null)},ef.prototype.unmount=lg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;tA(a.current,2,null,a,null,null),Id(),s[ms]=null}};function ef(a){this._internalRoot=a}ef.prototype.unstable_scheduleHydration=function(a){if(a){var s=Iu();a={blockedOn:null,target:a,priority:s};for(var c=0;c<Vi.length&&s!==0&&s<Vi[c].priority;c++);Vi.splice(c,0,a),c===0&&sA(a)}};var cA=t.version;if(cA!=="19.1.1")throw Error(r(527,cA,"19.1.1"));G.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=p(s),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var Zk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{pa=tf.inject(Zk),un=tf}catch{}}return Hc.createRoot=function(a,s){if(!i(a))throw Error(r(299));var c=!1,f="",v=Tx,S=Px,P=wx,N=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(S=s.onCaughtError),s.onRecoverableError!==void 0&&(P=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(N=s.unstable_transitionCallbacks)),s=J1(a,1,!1,null,null,c,f,v,S,P,N,null),a[ms]=s.current,Ym(a),new lg(s)},Hc.hydrateRoot=function(a,s,c){if(!i(a))throw Error(r(299));var f=!1,v="",S=Tx,P=Px,N=wx,B=null,Q=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(P=c.onCaughtError),c.onRecoverableError!==void 0&&(N=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(B=c.unstable_transitionCallbacks),c.formState!==void 0&&(Q=c.formState)),s=J1(a,1,!0,s,c??null,f,v,S,P,N,B,Q),s.context=eA(null),c=s.current,f=yr(),f=po(f),v=Ni(f),v.callback=null,Di(c,v,f),c=f,s.current.lanes=c,dn(s,c),Ea(s),a[ms]=s.current,Ym(a),new ef(s)},Hc.version="19.1.1",Hc}var EA;function XM(){if(EA)return fg.exports;EA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fg.exports=WM(),fg.exports}var QM=XM();const ZM=da(QM),Gn=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:6,image:"/img/Interceptor.png",abilities:[{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],xf=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],CA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},ns=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",di=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const o in e.shipSections){const l=e.shipSections[o],u=ns(l),p={...l.stats[u]};if(t.indexOf(o)===1&&l.middleLaneBonus)for(const h in l.middleLaneBonus)p.hasOwnProperty(h)&&(p[h]+=l.middleLaneBonus[h]);r[o]=p}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const o of Object.values(r))i.handLimit+=o.Draw||0,i.discardLimit+=o.Discard||0,i.energyPerTurn+=o["Energy Per Turn"]||0,i.maxEnergy+=o["Max Energy"]||0,i.shieldsPerTurn+=o["Shields Per Turn"]||0,i.initialDeployment+=o["Initial Deployment"]||0,i.deploymentBudget+=o["Deployment Budget"]||0,i.cpuLimit+=o["CPU Control Value"]||0;return{totals:i,bySection:r}},Wr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const o=Gn.find(y=>y.name===e.name);if(!o)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=o.attack,p=o.speed,d=o.shields,h=o.class;l.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(p+=y.mod.value),y.mod.stat==="shields"&&(d+=y.mod.value),y.mod.stat==="cost"&&(h+=y.mod.value)}),h=Math.max(0,h);let m={...e,attack:u,speed:p,maxShields:d,cost:h,baseAttack:o.attack,baseSpeed:o.speed,baseCost:o.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(m.attack+=y.value),y.stat==="speed"&&(m.speed+=y.value),y.stat==="cost"&&(m.cost=Math.max(0,m.cost+y.value))}),o.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&m.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:b,mod:x}=y.effect;let A=!1;if(b.type==="SHIP_SECTION_HULL_DAMAGED"&&b.location==="SAME_LANE"){const C=parseInt(t.slice(-1))-1,O=(n.name==="Player 1"?i.player1:i.player2)[C];if(O){const _=n.shipSections[O],M=ns(_);(M==="damaged"||M==="critical")&&(A=!0)}}A&&x.stat==="attack"&&(m.attack+=x.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:b,mod:x}=y.effect;let A=0;if(b.type==="OWN_DAMAGED_SECTIONS")for(const C in n.shipSections){const T=n.shipSections[C],O=ns(T);(O==="damaged"||O==="critical")&&A++}A>0&&(x.stat==="attack"&&(m.attack+=x.value*A),x.stat==="speed"&&(m.speed+=x.value*A))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(b=>{b.stat==="attack"&&(m.attack+=b.value),b.stat==="speed"&&(m.speed+=b.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;Gn.find(x=>x.name===y.name)?.abilities?.forEach(x=>{if(x.type==="PASSIVE"&&x.scope==="FRIENDLY_IN_LANE"&&x.effect.type==="MODIFY_STAT"){const{stat:A,value:C}=x.effect;A==="shields"?m.maxShields+=C:A==="attack"?m.attack+=C:A==="speed"&&(m.speed+=C)}})}),l.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(b=>{if(b.type==="PASSIVE"&&(b.effect.type==="GRANT_KEYWORD"&&m.keywords.add(b.effect.keyword),b.effect.type==="MODIFY_STAT")){const{stat:x,value:A}=b.effect;x==="attack"&&(m.attack+=A),x==="speed"&&(m.speed+=A),x==="shields"&&(m.maxShields+=A)}})}),m},KP=(e,t)=>({...e,instanceId:t}),cl=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],WP=["Scout Drone","Standard Fighter","Heavy Fighter","Guardian Drone","Bomber","Repair Drone","Interceptor","Aegis Drone","Kamikaze Drone","Swarm Drone"],XP=e=>{const t=[];let n=0;return e.forEach(r=>{const i=xf.find(o=>o.id===r.id);if(i)for(let o=0;o<r.quantity;o++)t.push(KP(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},nv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},JM=(e,t)=>{const n=di({shipSections:CA},[]).totals;return{name:e,shipSections:CA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:XP(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},fl=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},QP=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},Ol=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(o=>{const l=o.currentMaxShields,{maxShields:u}=Wr(o,i,e,t,n);u>l&&(o.currentShields+=u-l),o.currentMaxShields=u,o.currentShields=Math.min(o.currentShields,u)});return r},ur=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},ru=(e,t,n,r,i)=>{const o=e==="player1"?r:i,l=e==="player1"?i:r,u=[],d=!(typeof n.cost=="number"),{type:h,affinity:m,location:y,custom:b}=n.targeting;let x=null;if(d&&Object.values(o.dronesOnBoard).flat().some(O=>O.id===t.id)&&(x=ur(t.id,o),!x))return[];const A=(T,O)=>{Object.entries(T.dronesOnBoard).forEach(([_,M])=>{let D=!1;y==="ANY_LANE"&&(D=!0),d&&y==="SAME_LANE"&&(D=_===x),D&&M.forEach(k=>{let j=!0;if(b?.includes("DAMAGED_HULL")){const I=Gn.find(U=>U.name===k.name);(!I||k.hull>=I.hull)&&(j=!1)}b?.includes("EXHAUSTED")&&(k.isExhausted||(j=!1)),j&&u.push({...k,lane:_,owner:O})})})},C=(T,O)=>{Object.keys(T.shipSections).forEach(_=>{u.push({id:_,owner:O,...T.shipSections[_]})})};if(h==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(o,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(h==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&C(o,e),(m==="ENEMY"||m==="ANY")&&C(l,e==="player1"?"player2":"player1");else if(h==="LANE")["lane1","lane2","lane3"].forEach(T=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:T,owner:e}),m==="ENEMY"||m==="ANY"){const O=e==="player1"?"player2":"player1";u.push({id:T,owner:O})}});else if(h==="DRONE_CARD"){const T=e==="player1"?r:i;T.activeDronePool.forEach(O=>{const _=Gn.find(j=>j.name===O.name),M=T.appliedUpgrades[O.name]||[],D=M.filter(j=>j.id===n.id).length,k=n.maxApplications===void 0?1:n.maxApplications;_&&M.length<_.upgradeSlots&&D<k&&u.push({...O,id:O.name,owner:e})})}else if(h==="APPLIED_UPGRADE"){const T=m==="ENEMY"?l:o,O=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(T.dronesOnBoard).flat().forEach(_=>{(T.appliedUpgrades[_.name]||[]).length>0&&u.push({..._,owner:O})})}return u},ZP=(e,t,n,r,i)=>{const o=Gn.find(d=>d.name===t.name);if(!o?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const p=o.abilities.filter(d=>d.type==="TRIGGERED"&&d.trigger==="ON_MOVE");if(p.length>0){const d=l.dronesOnBoard[r].findIndex(h=>h.id===t.id);if(d!==-1){const h=l.dronesOnBoard[r][d];p.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),h.statMods||(h.statMods=[]),m.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,h.statMods.push(y.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},JP=(e,t,n)=>{const r=Gn.find(d=>d.name===t.name);if(!r?.abilities)return{newState:e,effects:[],animationEvents:[]};let i=JSON.parse(JSON.stringify(e));const o=[],l=[];let u=!1;return r.abilities.filter(d=>d.effect?.type==="AFTER_ATTACK").forEach(d=>{const{subEffect:h}=d.effect;if(h.type==="DESTROY_SELF")for(const m in i.dronesOnBoard){const y=i.dronesOnBoard[m].findIndex(b=>b.id===t.id);if(y!==-1){u=!0;const b=i.dronesOnBoard[m][y];o.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${d.name}', destroying itself.`}}),l.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:n,targetLane:m,targetType:"drone",timestamp:Date.now()}),i.dronesOnBoard[m]=i.dronesOnBoard[m].filter(x=>x.id!==t.id),Object.assign(i,fl(i,b));break}}else if(h.type==="PERMANENT_STAT_MOD")for(const m in i.dronesOnBoard){const y=i.dronesOnBoard[m].findIndex(b=>b.id===t.id);if(y!==-1){u=!0,i.dronesOnBoard[m][y].statMods||(i.dronesOnBoard[m][y].statMods=[]),o.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${d.name}', gaining a permanent +${h.mod.value} ${h.mod.stat}.`}}),i.dronesOnBoard[m][y].statMods.push(h.mod);break}}}),{newState:u?i:e,effects:o,animationEvents:l}},Zy=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>ns(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},ew=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const o=Gn.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=o.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const p=t.class;let d=0,h=0;return n===1?(h=Math.min(e.initialDeploymentBudget,p),d=p-h):(h=Math.min(e.deploymentBudget,p),d=p-h),e.energy<d?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${d} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:h,energyCost:d}},tw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},rv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const o=nv(t,e,n)-r.allocatedShields;return o<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:o}},ej=(e,t,n)=>{const{removals:r,additions:i}=t,o={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{o.shipSections[l]={...o.shipSections[l],allocatedShields:o.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{o.shipSections[l]={...o.shipSections[l],allocatedShields:o.shipSections[l].allocatedShields+u}}),o},tj=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")tw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const o=rv(e,i,n);o.valid&&r.push({id:i,name:i,maxAvailable:o.maxAvailable})}}),r},nj=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,o=rv(r,n,i);return!o.valid||e.shieldsToAllocate<=0?{success:!1,error:o.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},rj=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,o=di(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(p=>{l[p]={...n.shipSections[p],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:o,playerId:t}},aj=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],o=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,p=di(o,l).totals.shieldsPerTurn,d=JSON.parse(JSON.stringify(o.shipSections)),h=Object.keys(d);let m=p,y=0,b=0;for(;m>0&&b<100;){const T=h[y%h.length],O=d[T],_=nv(T,o,l);O.allocatedShields<_&&(O.allocatedShields++,m--),y++,b++}const x={...o,shipSections:d},C={success:!0,newPhase:"deployment",firstPlayer:Sp(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(C.player1State=i,C.player2State=x):(C.player1State=x,C.player2State=i),C},ij=(e,t,n,r,i,o,l)=>{const{effect:u,cost:p}=e,d=r.player1;let h="",m="Ability effect applied.";e.targeting?.type==="LANE"?h=`Lane ${n.id.slice(-1)}`:n&&(h=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${h}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${h}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${h}.`),o&&o({player:d.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:h,outcome:m});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.energy&&(y.player1.energy-=p.energy),p.exhausts)for(const A in y.player1.dronesOnBoard){const C=y.player1.dronesOnBoard[A].findIndex(T=>T.id===t.id);if(C!==-1){y.player1.dronesOnBoard[A][C].isExhausted=!0;break}}const b=uw(u,t,n,y,i,{resolveAttackCallback:l});y.player1=b.newPlayerStates.player1,y.player2=b.newPlayerStates.player2;const x=b.animationEvents||[];return{newPlayerStates:y,shouldEndTurn:!u.goAgain,animationEvents:x}},sj=(e,t,n,r,i,o,l)=>{const{cost:u,effect:p}=e,d=r.player1;o&&o({player:d.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(h.player1.energy-=u.energy,p.type==="REALLOCATE_SHIELDS")return{newPlayerStates:h,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:[]};{const m=dw(p,t,n,h,i,{resolveAttackCallback:l});h.player1=m.newPlayerStates.player1,h.player2=m.newPlayerStates.player2;const y=m.animationEvents||[];return m.needsDiscardSelection?{newPlayerStates:h,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0},animationEvents:y}:{newPlayerStates:h,shouldEndTurn:!0,animationEvents:y}}},nw=(e,t,n,r,i,o,l,u)=>{const p=ew(r,e,n,Object.values(r.dronesOnBoard).flat().length,di(r,o.player1||o));if(!p.isValid)return{success:!1,error:p.reason,message:p.message,newPlayerState:r};const{budgetCost:d,energyCost:h}=p;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const m=JSON.parse(JSON.stringify(r)),y={...m.dronesOnBoard,[t]:[...m.dronesOnBoard[t],{...e,id:0}]},b={...m,dronesOnBoard:y},x=Wr(e,t,b,i,o),A={...e,id:Date.now(),statMods:[],currentShields:x.maxShields,currentMaxShields:x.maxShields,hull:e.hull,isExhausted:!1};m.dronesOnBoard[t].push(A),m.deployedDroneCounts={...m.deployedDroneCounts,[e.name]:(m.deployedDroneCounts[e.name]||0)+1},n===1?m.initialDeploymentBudget-=d:m.deploymentBudget-=d,m.energy-=h,m.dronesOnBoard=Ol(m,i,o);const C=[{type:"TELEPORT_IN",targetId:A.id,laneId:t,playerId:u,timestamp:Date.now()}];return{success:!0,newPlayerState:m,deployedDrone:A,animationEvents:C}},oj=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return Zy(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):Zy(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},lj=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=ur(e.id,t);if(!i)return[];const o=Wr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(p=>{const d=Wr(p,i,n,t,r);return!p.isExhausted&&(d.speed>o.speed||d.keywords.has("ALWAYS_INTERCEPTS"))}).map(p=>p.id)},cj=(e,t,n,r,i,o,l)=>{const{addLogEntry:u}=l,p=e.class;let d=0;n===1?d=Math.min(r.initialDeploymentBudget,p):d=Math.min(r.deploymentBudget,p);const h=p-d;if(r.energy<h)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-d:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-d:r.deploymentBudget,energy:r.energy-h};return y.dronesOnBoard=Ol(y,i,o),{success:!0,newPlayerState:y,deployedDrone:m,costs:{energy:h,budget:d}}},uj=(e,t,n)=>{const{attacker:r,target:i,targetType:o,lane:l,attackingPlayer:u}=e,d=t[u==="player1"?"player2":"player1"],h=t[u],m=Wr(r,l,h,d,n),y=d.dronesOnBoard[l].filter(b=>{const x=Wr(b,l,d,h,n);return!b.isExhausted&&(x.speed>m.speed||x.keywords.has("ALWAYS_INTERCEPTS"))&&(o!=="drone"||b.id!==i.id)});return{hasInterceptors:y.length>0,interceptors:y,attackDetails:e}},av=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},dj=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},fj=(e,t)=>{const n=av(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},pj=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const o=Sp(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=o,r.firstPlayerOfRound=o,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:o});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},hj=(e,t,n,r)=>{const i=Jy(e.player1,t,n,e.player2,e.placedSections),o=Jy(e.player2,t,r,e.player1,e.opponentPlacedSections),l=e0(i,n.totals.handLimit),u=e0(o,r.totals.handLimit),p=Sp(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),d={...e,turn:t,turnPhase:"deployment",currentPlayer:p,firstPlayerOfRound:p,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},h=[{type:"ROUND_START",turn:t,firstPlayer:p},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:d,uiEffects:h}},rw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(o=>{const l=Wr(o,i,e,t,n);return{...o,statMods:o.statMods?o.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},Jy=(e,t,n,r,i)=>({...rw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),e0=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;const o=n.pop();r.push(o),w("CARDS",`📥 Card drawn to hand: ${o.name}`,{id:o.id,instanceId:o.instanceId,hasInstanceId:o.instanceId!==void 0,playerName:e.name})}return{...e,deck:n,hand:r,discardPile:i}},mj=(e,t,n)=>{const{player1:r,player2:i,turn:o,turnPhase:l,passInfo:u,placedSections:p,opponentPlacedSections:d}=e,{addLogEntry:h,setPlayer2:m,setPendingAttack:y,endTurn:b,endDeploymentPhase:x,endActionPhase:A,setPassInfo:C}=n;let T;return l==="deployment"&&!u.player2Passed?T=t.handleOpponentTurn({player1:r,player2:i,turn:o,opponentPlacedSections:d,placedSections:p,getShipStatus:ns,calculateEffectiveShipStats:di,calculateEffectiveStats:Wr,addLogEntry:h}):l==="action"&&!u.player2Passed&&(T=t.handleOpponentAction({player1:r,player2:i,placedSections:p,opponentPlacedSections:d,getShipStatus:ns,getLaneOfDrone:ur,getValidTargets:ru,calculateEffectiveStats:Wr,addLogEntry:h})),T||null},gj=(e,t,n)=>{const{player1:r,player2:i,turn:o,turnPhase:l,placedSections:u,opponentPlacedSections:p}=t,{addLogEntry:d,setPlayer2:h,setPendingAttack:m,endTurn:y,endDeploymentPhase:b,endActionPhase:x,setPassInfo:A,resolveCardPlay:C}=n;if(e.type==="pass"){const T=!t.passInfo.player1Passed,O={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(T?"player2":null)};return A(O),O.player1Passed?l==="deployment"?b():l==="action"&&x():y("player2"),{newPassInfo:O}}else if(e.type==="deploy"){const{droneToDeploy:T,targetLane:O,logContext:_}=e.payload;d({player:i.name,actionType:"DEPLOY",source:T.name,target:O,outcome:`Deployed to ${O}.`},"aiDeploymentDeploy",_);const M=nw(T,O,i,r,o,{player1:u,player2:p});return M.success&&(h(M.newPlayerState),y("player2")),{deployedDrone:M.deployedDrone}}else if(e.type==="action"){const T=e.payload,{logContext:O}=e;switch(T.type){case"play_card":C(T.card,T.target,"player2",O);break;case"attack":m({attacker:T.attacker,target:T.target,targetType:T.targetType,lane:T.attacker.lane,attackingPlayer:"player2",aiContext:O});break;case"move":{const{drone:_,fromLane:M,toLane:D}=T;d({player:i.name,actionType:"MOVE",source:_.name,target:D,outcome:`Moved from ${M} to ${D}.`},"aiActionMove",O);let k=JSON.parse(JSON.stringify(i));k.dronesOnBoard[M]=k.dronesOnBoard[M].filter(U=>U.id!==_.id);const j={..._,isExhausted:!0};k.dronesOnBoard[D].push(j);const{newState:I}=ZP(k,j,M,D,d);I.dronesOnBoard=Ol(I,r,{player1:u,player2:p}),h(I),y("player2");break}default:y("player2");break}return{action:T}}return null},aw=(e,t,n,r,i,o,l,u)=>{const{cost:p,effect:d}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=p,b.hand=b.hand.filter(T=>T.instanceId!==e.instanceId),b.discardPile.push(e);const x=new Set(t.map(T=>T.id));b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(T=>!x.has(T.id));const A=t.map(T=>({...T,isExhausted:T.isExhausted||!d.properties?.includes("DO_NOT_EXHAUST")}));b.dronesOnBoard[r].push(...A),h({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(T=>T.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let C=b;return A.forEach(T=>{const{newState:O}=m(C,T,n,r,h);C=O}),C.dronesOnBoard=y(C,o,l),{newPlayerState:C,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},iw=(e,t,n,r,i,o,l,u)=>{const{cost:p,effect:d}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:y}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=p,b.hand=b.hand.filter(C=>C.instanceId!==e.instanceId),b.discardPile.push(e),b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(C=>C.id!==t.id);const x={...t,isExhausted:d.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};b.dronesOnBoard[r].push(x),h({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(b,x,n,r,h);return A.dronesOnBoard=y(A,o,l),{newPlayerState:A,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},yj=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},sw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],o=ns(i);(o==="damaged"||o==="critical")&&n++}return n},vj=(e,t,n,r,i,o)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:p,resolveAttackCallback:d}=o,h=t?t.name||t.id:"N/A";let m="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(m=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(m=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(m=`Healed ${y.value} hull on ${h}.`),y.type==="HEAL_SHIELDS"&&(m=`Healed ${y.value} shields on ${h}.`),y.type==="READY_DRONE"&&(m=`Readied ${h}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?m=`Dealt ${y.value} damage to filtered targets in ${h}.`:m=`Dealt ${y.value} damage to ${h}.`),y.type==="MODIFY_STAT"){const C=y.mod,T=C.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${h} a ${C.value>0?"+":""}${C.value} ${C.stat} bonus${T}.`}if(y.type==="REPEATING_EFFECT"){const C=r[n],T=sw(y.condition,C);m=`Drew ${T} card(s) and gained ${T} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:h,outcome:m});let b=yj(e,n,r);const x=bj(e.effect,t,n,b,i,o,e),A=[];if(A.push({type:"CARD_REVEAL",cardId:e.id,cardName:e.name,cardData:e,actingPlayerId:n,timestamp:Date.now()}),e.visualEffect&&t){let C=null,T=null,O=null;if(t.id&&(t.id==="lane1"||t.id==="lane2"||t.id==="lane3")){const _=e.targeting?.affinity||"ANY";_==="ENEMY"?(C=n==="player1"?"player2":"player1",T=t.id,O="lane"):_==="ANY"&&(C="center",T=t.id,O="lane"),C&&O&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:T,targetType:O,duration:e.visualEffect.duration||800,timestamp:Date.now()})}else{for(const _ of["player1","player2"]){for(const M in b[_].dronesOnBoard)if(b[_].dronesOnBoard[M].some(D=>D.id===t.id)){C=_,T=M,O="drone";break}if(C)break}if(!C){for(const _ of["player1","player2"])if(b[_].shipSections[t.name]||b[_].shipSections[t.id]){C=_,O="section";break}}C&&O&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:T,targetType:O,duration:e.visualEffect.duration||800,timestamp:Date.now()})}}if(x.animationEvents&&A.push(...x.animationEvents),w("CARDS","[ANIMATION EVENTS] resolveCardPlay emitted:",A),!x.needsCardSelection){const C=ow(e,n,x.newPlayerStates);return{newPlayerStates:C.newPlayerStates,shouldEndTurn:C.shouldEndTurn,additionalEffects:x.additionalEffects||[],animationEvents:A,needsCardSelection:!1}}return{newPlayerStates:b,shouldEndTurn:!1,additionalEffects:x.additionalEffects||[],animationEvents:A,needsCardSelection:x.needsCardSelection}},ow=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const o=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:o}},bj=(e,t,n,r,i,o,l=null)=>e.effects?Sj(e,t,n,r,i,o,l):lw(e,t,n,r,i,o,l),Sj=(e,t,n,r,i,o,l=null)=>{let u=r,p=[];if(e.type==="REPEATING_EFFECT"){const d=sw(e.condition,u[n]);for(let h=0;h<d;h++)for(const m of e.effects){const y=lw(m,t,n,u,i,o,l);u=y.newPlayerStates,y.additionalEffects&&p.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:p}},lw=(e,t,n,r,i,o,l=null)=>{switch(e.type){case"DRAW":return sv(e,null,t,n,r);case"SEARCH_AND_DRAW":return cw(e,null,t,n,r);case"GAIN_ENERGY":return xj(e,n,r,i);case"READY_DRONE":return Aj(e,t,n,r);case"HEAL_HULL":return iv(e,null,t,n,r,i);case"HEAL_SHIELDS":return Ej(e,t,n,r);case"DAMAGE":return bp(e,null,t,n,r,i,o,l);case"DESTROY":return Tj(e,t,n,r);case"MODIFY_STAT":return Pj(e,t,n,r);case"MODIFY_DRONE_BASE":return wj(e,t,n,r);case"DESTROY_UPGRADE":return Oj(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return kj(e,t,n,r,i,o,l);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},xj=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=o[t],u=t==="player1"?r.player1:r.player2,p=di(l,u).totals,d=Math.min(p.maxEnergy,l.energy+e.value);return l.energy=d,{newPlayerStates:o,additionalEffects:[]}},Aj=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=o[n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(d=>d.id===t.id);if(p!==-1){l.dronesOnBoard[u][p].isExhausted=!1;break}}return{newPlayerStates:o,additionalEffects:[]}},Ej=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=o[t.owner||n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(d=>d.id===t.id);if(p!==-1){const d=l.dronesOnBoard[u][p];d.currentShields=Math.min(d.currentMaxShields||d.shields,d.currentShields+e.value);break}}return{newPlayerStates:o,additionalEffects:[]}},Cj=(e,t,n,r,i,o=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,d=(o?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[d].dronesOnBoard[u]||[];w("COMBAT",`[DEBUG] Filtered damage - ${n} targeting ${d} ${u}`),w("COMBAT",`[DEBUG] Drones in ${d} ${u}:`,m.map(_=>`${_.name}(${_.id}) [${_.hull}hp, ${_.speed}spd]`));const{stat:y,comparison:b,value:x}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},T=A[d].dronesOnBoard[u]||[];for(let _=T.length-1;_>=0;_--){const M=T[_];let D=!1;if(b==="GTE"&&M[y]>=x&&(D=!0),b==="LTE"&&M[y]<=x&&(D=!0),w("COMBAT",`[DEBUG] ${M.name} ${y}=${M[y]} ${b} ${x} = ${D}`),D){w("COMBAT",`[DEBUG] Applying ${e.value} damage to ${M.name}`);const k=M.currentShields||0;let j=e.value;const I=Math.min(j,k);M.currentShields=(M.currentShields||0)-I,j-=I,j>0&&(M.hull-=j),M.hull<=0&&(w("COMBAT",`[DEBUG] ${M.name} destroyed`),T.splice(_,1))}}const O=[];for(const _ of m){const M=T.find(k=>k.id===_.id);let D=!1;if(b==="GTE"&&_[y]>=x&&(D=!0),b==="LTE"&&_[y]<=x&&(D=!0),D){const k=_.currentShields||0,j=Math.min(e.value,k),I=e.value-j;j>0&&O.push({type:"SHIELD_DAMAGE",targetId:_.id,targetPlayer:d,targetLane:u,targetType:"drone",amount:j,timestamp:Date.now()}),M?I>0&&O.push({type:"HULL_DAMAGE",targetId:_.id,targetPlayer:d,targetLane:u,targetType:"drone",amount:I,timestamp:Date.now()}):O.push({type:"DRONE_DESTROYED",targetId:_.id,targetPlayer:d,targetLane:u,targetType:"drone",timestamp:Date.now()})}}return{newPlayerStates:A,additionalEffects:[],animationEvents:O}}else{const u=r[t.owner],p=ur(t.id,u);if(p){w("COMBAT",`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const d={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=d[t.owner].dronesOnBoard[p]||[],y=m.find(b=>b.id===t.id);if(y){let b=e.value,x=0,A=b;if(e.damageType!=="PIERCING"&&(x=Math.min(b,y.currentShields),A-=x,y.currentShields-=x),y.hull-=A,w("COMBAT",`[DEBUG] Applied ${A} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){w("COMBAT",`[DEBUG] ${y.name} destroyed`);const T=m.findIndex(O=>O.id===t.id);T>=0&&m.splice(T,1)}const C=[];return x>0&&C.push({type:"SHIELD_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:x,timestamp:Date.now()}),y.hull<=0?C.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",timestamp:Date.now()}):A>0&&C.push({type:"HULL_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:A,timestamp:Date.now()}),{newPlayerStates:d,additionalEffects:[],animationEvents:C}}return{newPlayerStates:d,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},Tj=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const p=t.id;(o[l].dronesOnBoard[p]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:l,targetLane:p,targetType:"drone",timestamp:Date.now()});const y=fl(o[l],m);o[l].deployedDroneCounts={...o[l].deployedDroneCounts||{},...y.deployedDroneCounts}}),o[l].dronesOnBoard[p]=[],(o[n].dronesOnBoard[p]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:n,targetLane:p,targetType:"drone",timestamp:Date.now()});const y=fl(o[n],m);o[n].deployedDroneCounts={...o[n].deployedDroneCounts||{},...y.deployedDroneCounts}}),o[n].dronesOnBoard[p]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const p=o[l],d=ur(t.id,p);if(d){const h=p.dronesOnBoard[d].find(m=>m.id===t.id);if(h){u.push({type:"DRONE_DESTROYED",targetId:h.id,targetPlayer:l,targetLane:d,targetType:"drone",timestamp:Date.now()});const m=fl(p,h);p.deployedDroneCounts={...p.deployedDroneCounts||{},...m.deployedDroneCounts},p.dronesOnBoard[d]=p.dronesOnBoard[d].filter(y=>y.id!==t.id)}}}return{newPlayerStates:o,additionalEffects:[],animationEvents:u}},Pj=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=o[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const p=t.id;l.dronesOnBoard[p]&&l.dronesOnBoard[p].forEach(d=>{d.statMods||(d.statMods=[]),d.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const p in l.dronesOnBoard){const d=l.dronesOnBoard[p].findIndex(h=>h.id===t.id);if(d!==-1){const h=l.dronesOnBoard[p][d];h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:o,additionalEffects:[]}},wj=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=o[n],u=t.name,p=l.appliedUpgrades[u]||[],d={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(d.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...p,d]},{newPlayerStates:o,additionalEffects:[]}},Oj=(e,t,n,r,i)=>{const o={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=o[n==="player1"?"player2":"player1"],{droneName:p,instanceId:d}=t;if(u.appliedUpgrades[p]){const h=u.appliedUpgrades[p].filter(m=>m.instanceId!==d);h.length>0?u.appliedUpgrades[p]=h:delete u.appliedUpgrades[p]}return{newPlayerStates:o,additionalEffects:[]}},bp=(e,t,n,r,i,o,l,u=null)=>{const{resolveAttackCallback:p}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return Cj(e,n,r,i,l,u?.targeting);const d=n.owner==="player1"?i.player1:i.player2,h=ur(n.id,d);if(h&&p){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:h,damageType:e.damageType},y=pw(m,i,o,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[],animationEvents:y.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},iv=(e,t,n,r,i,o,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1";if(e.scope==="LANE"){const d=n.id;u[p].dronesOnBoard[d]&&u[p].dronesOnBoard[d].forEach(h=>{const m=Gn.find(y=>y.name===h.name);m&&h.hull<m.hull&&(h.hull=Math.min(m.hull,h.hull+e.value))})}else{const d=Gn.find(h=>h.name===n.name);if(d){const h=ur(n.id,u[p]);if(h){const m=u[p].dronesOnBoard[h].findIndex(y=>y.id===n.id);m!==-1&&(u[p].dronesOnBoard[h][m].hull=Math.min(d.hull,u[p].dronesOnBoard[h][m].hull+e.value))}}else if(n.name&&u[p].shipSections[n.name]){const h=u[p].shipSections[n.name],y=(p==="player1"?o.player1:o.player2).find(b=>b.name===n.name);y&&(h.hull=Math.min(y.maxHull,h.hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},sv=(e,t,n,r,i,o,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",d=u[p];let h=[...d.deck],m=[...d.hand],y=[...d.discardPile];const b=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<b;A++){if(h.length===0)if(y.length>0)h=[...y].sort(()=>.5-Math.random()),y=[];else break;h.length>0&&m.push(h.pop())}u[p]={...d,deck:h,hand:m,discardPile:y};const x={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(x.needsDiscardSelection=e.value.discard),x},_j=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),cw=(e,t,n,r,i,o,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",d=u[p];let h=[...d.deck],m=[...d.discardPile],y,b;if(e.filter)h.length===0&&m.length>0&&(h=[...m.sort(()=>.5-Math.random())],m=[]),y=h.filter(A=>_j(A,e.filter)).slice(0,e.searchCount),b=h.filter(A=>!y.includes(A));else{const x=e.searchCount;h.length<x&&m.length>0&&(h=[...h,...m.sort(()=>.5-Math.random())],m=[]),y=h.slice(-e.searchCount).reverse(),b=h.slice(0,-e.searchCount)}if(p==="player2"){const x=Nj(y,e.drawCount,u),A=y.filter(O=>!x.includes(O)),C=[...d.hand,...x];let T=[...b,...A];return e.shuffleAfter&&(T=T.sort(()=>.5-Math.random())),u[p]={...d,deck:T,hand:C,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:b,discardPile:m,filter:e.filter}}},Nj=(e,t,n,r)=>e.map(o=>({card:o,score:Dj(o,n.player2,n.player1)})).sort((o,l)=>l.score-o.score).slice(0,t).map(o=>o.card),Dj=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},kj=(e,t,n,r,i,o,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",p=r[n],d=r[u];let h=null,m=-1/0;for(const y of["lane1","lane2","lane3"]){const x=(p.dronesOnBoard[y]||[]).filter(A=>!A.isExhausted);if(x.length!==0)for(const A of["lane1","lane2","lane3"]){if(y===A)continue;if(e.type==="SINGLE_MOVE"){const _=parseInt(y.replace("lane","")),M=parseInt(A.replace("lane",""));if(Math.abs(_-M)!==1)continue}const C=d.dronesOnBoard[A]?.length||0,T=p.dronesOnBoard[A]?.length||0,O=C*10-T*5;O>m&&(m=O,h={fromLane:y,toLane:A,drones:e.type==="SINGLE_MOVE"?[x[0]]:x.slice(0,Math.min(e.count||3,x.length))})}}if(!h)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const y=iw(l,h.drones[0],h.fromLane,h.toLane,r[n],r[u],i,o);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}else{const y=aw(l,h.drones,h.fromLane,h.toLane,r[n],r[u],i,o);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}},uw=(e,t,n,r,i,o)=>{switch(e.type){case"HEAL":return iv(e,t,n,"player1",r,i);case"DAMAGE":return bp(e,t,n,"player1",r,i,o);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},dw=(e,t,n,r,i,o)=>{const l={name:t};switch(e.type){case"DAMAGE":return bp(e,l,n,"player1",r,i,o);case"RECALL_DRONE":return fw(e,t,n,r,i);case"DRAW_THEN_DISCARD":return sv(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},fw=(e,t,n,r,i,o)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=ur(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(p=>p.id!==n.id),Object.assign(l.player1,QP(l.player1,n)),l.player1.dronesOnBoard=Ol(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[],animationEvents:[]}},pw=(e,t,n,r,i,o)=>{const{attacker:l,target:u,targetType:p,interceptor:d,attackingPlayer:h,abilityDamage:m,goAgain:y,damageType:b,lane:x,aiContext:A}=e,C=m!==void 0,T=d||u,O=d?"drone":p,_=h,M=T.owner||(_==="player1"?"player2":"player1"),D=t[_],k=t[M];let j=null,I=null;!C&&l&&l.id&&(j=ur(l.id,D),I=Wr(l,j,D,k,n));let U=m??(I?Math.max(0,I.attack):0),Y=b||(l?l.damageType:void 0);I&&I.keywords&&I.keywords.has("PIERCING")&&(Y="PIERCING"),O==="section"&&!m&&l&&l.name&&Gn.find(ie=>ie.name===l.name)?.abilities?.forEach(ie=>{ie.type==="PASSIVE"&&ie.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(U+=ie.effect.value)});let V=0,W=0,ae=!1,ne=0,re=0;if(O==="drone"){let F=null;for(const ie in k.dronesOnBoard)if(F=k.dronesOnBoard[ie].find(he=>he.id===T.id),F)break;if(F){let ie=U;Y!=="PIERCING"&&(V=Math.min(U,F.currentShields),ie-=V),W=Math.min(ie,F.hull),ae=F.hull-W<=0,ne=F.currentShields-V,re=ae?0:F.hull-W}}else{const F=k.shipSections[T.name];if(F){let ie=U;Y!=="PIERCING"&&(V=Math.min(U,F.allocatedShields),ie-=V),W=Math.min(ie,F.hull),ae=F.hull-W<=0,ne=F.allocatedShields-V,re=ae?0:F.hull-W}}const L=`Dealt ${V} shield and ${W} hull damage to ${T.name}.`+(O==="drone"?ae?` ${T.name} Destroyed.`:` ${T.name} has ${ne} shields and ${re} hull left.`:""),G=[];if(l&&l.id&&!C&&G.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:_,sourceLane:j,targetId:T.id,targetPlayer:M,targetLane:O==="drone"?ur(T.id,k):null,targetType:O,attackValue:I?I.attack:1,timestamp:Date.now()}),V>0){const F={type:"SHIELD_DAMAGE",targetId:T.id,targetPlayer:M,targetLane:O==="drone"?ur(T.id,k):null,targetType:O,amount:V,timestamp:Date.now()};G.push(F)}if(ae){const F={type:O==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:T.id,targetPlayer:M,targetLane:O==="drone"?ur(T.id,k):null,targetType:O,timestamp:Date.now()};G.push(F)}else{if(W>0){const F={type:"HULL_DAMAGE",targetId:T.id,targetPlayer:M,targetLane:O==="drone"?ur(T.id,k):null,targetType:O,amount:W,timestamp:Date.now()};G.push(F)}O==="section"&&(V>0||W>0)&&G.push({type:"SECTION_DAMAGED",targetId:T.id,targetPlayer:M,targetType:"section",timestamp:Date.now()}),l&&l.id&&!C&&G.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:_,sourceLane:j,timestamp:Date.now()})}w("COMBAT","[ANIMATION EVENTS] resolveAttack emitted:",G);const oe=j||(x?x.replace("lane","Lane "):null),ye=O==="drone"?`${T.name} (${oe})`:T.name,R=l&&l.name?`${l.name} (${oe})`:"Card Effect";r&&r({player:t[_].name,actionType:"ATTACK",source:R,target:ye,outcome:L},"resolveAttack",A);const K={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(O==="drone"){let F=!1;for(const ie in K[M].dronesOnBoard){const he=K[M].dronesOnBoard[ie].findIndex(me=>me.id===T.id);if(he!==-1){if(K[M].dronesOnBoard[ie][he].hull-W<=0){F=!0;const me=K[M].dronesOnBoard[ie][he];K[M].dronesOnBoard[ie]=K[M].dronesOnBoard[ie].filter(xe=>xe.id!==T.id),Object.assign(K[M],fl(K[M],me))}else K[M].dronesOnBoard[ie][he].hull-=W,K[M].dronesOnBoard[ie][he].currentShields-=V;break}}if(F){const ie=M==="player1"?K.player2:K.player1;K[M].dronesOnBoard=Ol(K[M],ie,n)}}else{K[M].shipSections[T.name].hull-=W,K[M].shipSections[T.name].allocatedShields-=V;const F=M==="player1"?n.player1:n.player2,ie=di(K[M],F).totals;K[M].energy>ie.maxEnergy&&(K[M].energy=ie.maxEnergy)}if(!C&&l&&l.id){let F=!1;for(const ie in K[_].dronesOnBoard){const he=K[_].dronesOnBoard[ie].findIndex(me=>me.id===l.id);if(he!==-1){K[_].dronesOnBoard[ie][he].isExhausted=!0,F=!0;break}}if(F){const ie=JP(K[_],l,_);K[_]=ie.newState,ie.animationEvents&&ie.animationEvents.length>0&&G.push(...ie.animationEvents),ie.effects.forEach(he=>{he.type==="LOG"&&r&&r(he.payload,"afterAttack")})}}if(d){const F=_==="player1"?"player2":"player1";for(const ie in K[F].dronesOnBoard){const he=K[F].dronesOnBoard[ie].findIndex(me=>me.id===d.id);if(he!==-1){Wr(K[F].dronesOnBoard[ie][he],ie,K[F],K[_],n).keywords.has("DEFENDER")||(K[F].dronesOnBoard[ie][he].isExhausted=!0);break}}}return{newPlayerStates:K,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:j||x,targetName:T.name,targetType:O,interceptorName:d?d.name:null,shieldDamage:V,hullDamage:W,wasDestroyed:ae,remainingShields:ne,remainingHull:re,outcome:L,shouldEndTurn:!y},animationEvents:G}},Mj=(e,t)=>{const n=di(e,t).totals;let r=[...e.deck],i=[...e.hand],o=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(o.length>0)r=[...o].sort(()=>.5-Math.random()),o=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:o}},Sp=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),jj=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let o=0;o<i;o++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},Ij=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,o=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:o,player2DiscardCount:o?t.hand.length-r.handLimit:0}},Rj=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],o=t[r],l=i.hand.length>o.totals.handLimit,u=l?i.hand.length-o.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:o.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},Lj=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let o=0;o<i;o++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},$j=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let o=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(p=>p.instanceId===l.instanceId||p.name===l.name&&p.id===l.id);if(u!==-1&&o<t){const p=r.splice(u,1)[0];i.push(p),o++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),p=r.splice(u,1)[0];i.push(p),o++}return{...e,hand:r,discardPile:i,discardCount:o}},hw=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let o=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||o.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&o.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&o.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{o.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&o.push({id:u,owner:"player1"})})}return o},mw=(e,t)=>t.activeDronePool.map(n=>{const r=Gn.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],o=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&o<l?{...n,id:n.name}:null}).filter(Boolean),gw=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(o=>{t.dronesOnBoard[o].length>0&&n.push({id:o,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(o=>{n.push({...o,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(o=>{o!==i&&n.push({id:o,owner:"player1"})}),n},Bj=(e,t,n,r,i,o)=>{let l=[],u=[];return e?l=ru("player1",e.drone,e.ability,i,o):t?l=ru("player1",{id:t.sectionName},t.ability,i,o):n?u=hw(n,i):r&&(r.type==="Upgrade"?u=mw(r,i):r.effect.type==="MULTI_MOVE"?u=gw(n,i):u=ru("player1",null,r,i,o)),{validAbilityTargets:l,validCardTargets:u}},Uj=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),zj=(e,t,n,r)=>{const i=av(e,t,n,r),o=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?o.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&o.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&o.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:o}},$e={initialPlayerState:JM,buildDeckFromList:XP,createCard:KP,getEffectiveSectionMaxShields:nv,getShipStatus:ns,onDroneDestroyed:fl,onDroneRecalled:QP,checkWinCondition:Zy,calculateAfterAttackStateAndEffects:JP,applyOnMoveEffects:ZP,updateAuras:Ol,getLaneOfDrone:ur,getValidTargets:ru,calculateAllValidTargets:Bj,calculateMultiSelectTargets:hw,calculateUpgradeTargets:mw,calculateMultiMoveTargets:gw,validateDeployment:ew,validateShieldRemoval:tw,validateShieldAddition:rv,executeShieldReallocation:ej,getValidShieldReallocationTargets:tj,processShieldAllocation:nj,processResetShieldAllocation:rj,processEndShieldAllocation:aj,resolveAttack:pw,resolveAbility:ij,resolveShipAbility:sj,executeDeployment:nw,resolveCardPlay:vj,finishCardPlay:ow,resolveMultiMove:aw,resolveSingleMove:iw,checkGameStateForWinner:oj,calculatePotentialInterceptors:lj,calculateAiInterception:uj,calculateTurnTransition:av,calculatePassTransition:dj,readyDronesAndRestoreShields:rw,calculateNewRoundPlayerState:Jy,drawToHandLimit:e0,drawPlayerCards:Mj,determineFirstPlayer:Sp,enforceHandLimit:jj,checkHandLimitCompliance:Ij,checkHandLimitViolations:Rj,enforceHandLimits:Lj,processDiscardPhase:$j,processTurnTransition:fj,processPhaseChange:pj,processRoundStart:hj,createExplosionEffect:Uj,createTurnEndEffects:zj,resolveUnifiedDamageEffect:bp,resolveUnifiedHealEffect:iv,resolveUnifiedDrawEffect:sv,resolveSearchAndDrawEffect:cw,resolveDroneAbilityEffect:uw,resolveShipAbilityEffect:dw,resolveShipRecallEffect:fw,executeAiDeployment:cj,executeAiTurn:mj,executeAiAction:gj},sl=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:$e,startingDecklist:cl,startingDroneList:WP},Symbol.toStringTag,{value:"Module"})),Gj="modulepreload",Hj=function(e){return"/"+e},TA={},Fr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=p(n.map(d=>{if(d=Hj(d),d in TA)return;TA[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":Gj,h||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((b,x)=>{y.addEventListener("load",b),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};class Yj{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},w("STATE_SYNC","💾 GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&w("STATE_SYNC",`💾 Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&w("STATE_SYNC",`💾 Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const qj=new Yj;class sn{static instance=null;static getInstance(t){return sn.instance||(sn.instance=new sn(t)),sn.instance}static reset(){sn.instance&&sn.instance.stateSubscriptionCleanup&&sn.instance.stateSubscriptionCleanup(),sn.instance=null,w("STATE_SYNC","🎯 GameDataService singleton reset")}constructor(t){if(sn.instance)return console.warn("⚠️ GameDataService already exists. Use getInstance() instead of new GameDataService()"),sn.instance;this.gameStateManager=t,this.cache=qj,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),w("STATE_SYNC","🎯 GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const o=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),p=o[l],d=o[u],h=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,p),x=Wr(t,n,m?p:d,m?d:p,h);return this.cache.set(r,x),x}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",o=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(o);if(l)return l;const u=di(t,n);return this.cache.set(o,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(o=>o.id===t.id||o.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),o=n[r],l=n[i],u=(o.dronesOnBoard[t]||[]).map(d=>({...d,effectiveStats:this.getEffectiveStats(d,t),isPlayer:!0})),p=(l.dronesOnBoard[t]||[]).map(d=>({...d,effectiveStats:this.getEffectiveStats(d,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:p,hasGuardian:this.hasGuardianInLane(t,p)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let o=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(o+=i.middleLaneBonus["Shields Per Turn"]),o}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const Fj=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"}));class Vj{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,o=null){if(this.isInitialized){w("AI_DECISIONS","🤖 AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=o,o&&!this.gameDataService&&(this.gameDataService=sn.getInstance(o),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),o&&(this.stateSubscriptionCleanup=o.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,w("AI_DECISIONS","🤖 AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&w("AI_DECISIONS","🔗 AIPhaseProcessor connected to ActionProcessor for execution"),o&&w("AI_DECISIONS","🔗 AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){w("AI_DECISIONS","🤖 AIPhaseProcessor.processDroneSelection starting (selecting 5 from deck)...");const i=this.gameStateManager.getState().commitments?.deckSelection;if(!i||!i.player2)throw new Error("AI deck commitment not found - deckSelection phase must complete first");const o=i.player2.drones||[];if(w("AI_DECISIONS",`🎲 AI deck contains ${o.length} drones:`,o.join(", ")),o.length<5||o.length>10)throw new Error(`AI deck must have 5-10 drones, found ${o.length}`);const l=this.extractDronesFromDeck(o);if(l.length<5)throw console.error("❌ Failed to extract minimum required drones from deck"),new Error(`Only extracted ${l.length} drones from AI deck (minimum 5 required)`);const u=this.randomlySelectDrones(l,5),p=u.map(d=>d.name).join(", ");return w("AI_DECISIONS",`🤖 AI randomly selected 5 drones from ${l.length} available: ${p}`),u}extractDronesFromDeck(t){return t.map(r=>{const i=this.dronePool?.find(o=>o.name===r);return i||console.warn(`⚠️ Drone "${r}" not found in drone collection`),i}).filter(Boolean)}randomlySelectDrones(t,n){return[...t].sort(()=>.5-Math.random()).slice(0,n)}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(p=>n.preferredDrones.includes(p.name)),u=Math.min(3,l.length);r=l.slice(0,u),w("AI_DECISIONS",`🎯 AI selected ${r.length} preferred drones:`,r.map(p=>p.name).join(", "))}const i=t.filter(l=>!r.includes(l)),o=5-r.length;if(o>0){const l=this.selectBalancedDrones(i,o,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],o=[...t];o.sort((p,d)=>{const h=(p.energyCost||1)+(p.health||0)+(p.attack||0);return(d.energyCost||1)+(d.health||0)+(d.attack||0)-h});const l=r?.aggression||.5,u=r?.economy||.5;for(let p=0;p<n&&o.length>0;p++){let d=0;if(l>.7)d=o.findIndex(h=>(h.attack||0)>2),d===-1&&(d=0);else if(u>.7)d=o.findIndex(h=>(h.energyCost||1)<=2),d===-1&&(d=0);else{const h=Math.min(3,o.length);d=Math.floor(Math.random()*h)}i.push(o.splice(d,1)[0])}return w("AI_DECISIONS",`🎯 AI balanced selection (${n}):`,i.map(p=>p.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;w("AI_DECISIONS","🤖 AIPhaseProcessor.processDeckSelection starting (selecting 40 cards + drones)...");let r=[];if(n&&n.decklist&&n.decklist.length>0){w("AI_DECISIONS",`🎯 Using ${n.name} personality decklist`);const{gameEngine:o}=await Fr(async()=>{const{gameEngine:l}=await Promise.resolve().then(()=>sl);return{gameEngine:l}},void 0);r=o.buildDeckFromList(n.decklist)}else{w("AI_DECISIONS","🎯 Using standard deck as fallback");const{gameEngine:o,startingDecklist:l}=await Fr(async()=>{const{gameEngine:u,startingDecklist:p}=await Promise.resolve().then(()=>sl);return{gameEngine:u,startingDecklist:p}},void 0);r=o.buildDeckFromList(l)}let i=[];if(n&&n.dronePool&&Array.isArray(n.dronePool)){if(i=[...n.dronePool],w("AI_DECISIONS",`🎯 Using ${n.name} personality dronePool: ${i.length} drones`),i.length<5)throw new Error(`AI personality '${n.name}' has only ${i.length} drones in dronePool. Minimum 5 required.`);if(i.length>10)throw new Error(`AI personality '${n.name}' has ${i.length} drones in dronePool. Maximum 10 allowed.`)}else{w("AI_DECISIONS","⚠️ Personality missing dronePool, using standard drone list as fallback");const{startingDroneList:o}=await Fr(async()=>{const{startingDroneList:l}=await Promise.resolve().then(()=>sl);return{startingDroneList:l}},void 0);i=[...o]}return w("AI_DECISIONS",`✅ AI selected deck: ${r.length} cards + ${i.length} drones`),w("AI_DECISIONS",`🎲 AI drones: ${i.join(", ")}`),{deck:r,drones:i}}async processPlacement(t=null){const n=t||this.currentAIPersonality;w("AI_DECISIONS","🤖 AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];w("AI_DECISIONS",`🎯 AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),o=i.join(", ");return w("AI_DECISIONS",`🤖 AI placement completed: ${o}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const o=this.arrangeAggressivePlacement(r);return w("AI_DECISIONS","🎯 AI using aggressive placement strategy"),o}else if(n.economy>.7){const o=this.arrangeEconomicPlacement(r);return w("AI_DECISIONS","🎯 AI using economic placement strategy"),o}}const i=this.arrangeBalancedPlacement(r);return w("AI_DECISIONS","🎯 AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],o=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[o[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],o=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[o[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],o=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[o[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Fr(async()=>{const{aiBrain:o}=await import("./aiLogic-C_PKbUaP.js");return{aiBrain:o}},[]),{gameEngine:r}=await Fr(async()=>{const{gameEngine:o}=await Promise.resolve().then(()=>sl);return{gameEngine:o}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(o,l,u)=>{this.gameStateManager?.addLogEntry(o,l,u)}});w("AI_DECISIONS","🤖 AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Fr(async()=>{const{aiBrain:o}=await import("./aiLogic-C_PKbUaP.js");return{aiBrain:o}},[]),{gameEngine:r}=await Fr(async()=>{const{gameEngine:o}=await Promise.resolve().then(()=>sl);return{gameEngine:o}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(o,l,u)=>{this.gameStateManager?.addLogEntry(o,l,u)}});return w("AI_DECISIONS","🤖 AIPhaseProcessor executing action decision:",i),i.type==="pass"?(await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}),null):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await Fr(async()=>{const{gameEngine:h}=await Promise.resolve().then(()=>sl);return{gameEngine:h}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return w("AI_DECISIONS","🤖 AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},p=[];if(u.hand.length>l){const h=u.hand.length-l;p=u.hand.slice(0,h),u={...u,hand:u.hand.slice(h),discardPile:[...u.discardPile,...p]},w("AI_DECISIONS",`🤖 AI discarding ${h} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const d=u.hand.length-(r.hand.length-p.length);return d>0&&w("AI_DECISIONS",`🤖 AI drew ${d} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:p,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,o=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=o)return w("AI_DECISIONS","🤖 AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-o;let u=[];return u=[...n.hand].sort((d,h)=>h.cost-d.cost).slice(0,l),w("AI_DECISIONS",`🤖 AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,o=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=o)return w("AI_DECISIONS","🤖 AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-o;let p=[];const d=[];return Object.entries(n.dronesOnBoard||{}).forEach(([h,m])=>{m.forEach(y=>{d.push({...y,lane:h})})}),d.sort((h,m)=>{const y=this.gameDataService.getEffectiveStats(h,h.lane),b=this.gameDataService.getEffectiveStats(m,m.lane);return y.power-b.power}),p=d.slice(0,u),w("AI_DECISIONS",`🤖 AI removing ${p.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:p,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(w("AI_DECISIONS","🤖 AI has already passed"),!0):!1}async executePass(t){return w("AI_DECISIONS",`🏳️ AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}async executeShieldAllocationTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeShieldAllocationTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");t.player2;const n=t.opponentPlacedSections,r=t.opponentShieldsToAllocate||0;if(r===0){w("AI_DECISIONS","🤖 AI has no shields to allocate");return}const i=n.map(u=>u.name);if(i.length===0){w("AI_DECISIONS","🤖 AI has no placed sections to allocate shields to");return}let o=r,l=0;for(w("AI_DECISIONS",`🤖 AI distributing ${r} shields evenly across ${i.length} sections`);o>0;){const u=i[l];await this.actionProcessor.queueAction({type:"addShield",payload:{sectionName:u,playerId:"player2"}}),o--,l=(l+1)%i.length,w("AI_DECISIONS",`🤖 AI allocated shield to ${u}, ${o} remaining`)}w("AI_DECISIONS","✅ AI shield allocation complete")}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||t.winner||t.gameStage==="gameOver"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(w("AI_DECISIONS",`⏰ AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn()},1500)))}async executeTurn(){if(this.isProcessing){w("AI_DECISIONS","⚠️ AIPhaseProcessor: Already processing a turn, skipping");return}const t=this.gameStateManager.getState();if(t.currentPlayer!=="player2"){w("AI_DECISIONS","⚠️ AIPhaseProcessor: Turn changed before execution, cancelling AI turn");return}if(t.passInfo&&t.passInfo.player2Passed){w("AI_DECISIONS","⚠️ AIPhaseProcessor: AI has already passed, cancelling turn");return}if(!["deployment","action"].includes(t.turnPhase)){w("AI_DECISIONS","⚠️ AIPhaseProcessor: Phase changed to non-sequential, cancelling turn");return}this.isProcessing=!0;try{w("AI_DECISIONS",`🤖 AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let r;if(t.turnPhase==="deployment")r=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")r=await this.executeActionTurn(t);else{console.warn(`⚠️ AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}if(r?.needsInterceptionDecision){w("AI_DECISIONS","🛡️ AIPhaseProcessor: AI attack needs human interception decision, pausing turn loop"),this.isProcessing=!1;return}const i=this.gameStateManager.getState();i.currentPlayer==="player2"&&i.passInfo&&!i.passInfo.player2Passed&&(w("AI_DECISIONS","🔄 AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(i)},100))}catch(r){console.error("❌ AIPhaseProcessor: Error executing turn:",r)}finally{this.isProcessing=!1}}async makeInterceptionDecision(t,n){if(!this.isInitialized)throw new Error("AIPhaseProcessor not initialized");w("AI_DECISIONS","🤖 AIPhaseProcessor.makeInterceptionDecision called:",{interceptorCount:t?.length||0,target:n.target?.name});const{aiBrain:r}=await Fr(async()=>{const{aiBrain:o}=await import("./aiLogic-C_PKbUaP.js");return{aiBrain:o}},[]),i=r.makeInterceptionDecision(t,n.target);return w("AI_DECISIONS","🤖 AI interception decision:",{willIntercept:!!i.interceptor,interceptorName:i.interceptor?.name}),i}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,interception:!0,version:"1.3.0"}}}const la=new Vj;class ei{static instance=null;static getInstance(t){return ei.instance||(ei.instance=new ei(t)),ei.instance}static reset(){ei.instance=null,w("STATE_SYNC","⚙️ ActionProcessor singleton reset")}constructor(t){if(ei.instance)return console.warn("⚠️ ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),ei.instance;this.gameStateManager=t,this.gameDataService=sn.getInstance(t),this.animationManager=null,this.pendingAnimationsForBroadcast=[],this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},w("STATE_SYNC","⚙️ ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1,this.actionQueue.length>0&&this.processQueue()}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,o=this.gameStateManager.getState();if(o.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||o.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const p=`${u}Passed`;if(o.passInfo[p])throw w("PASS_LOGIC",`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(o.turnPhase==="allocateShields"){if(n==="allocateShield")return w("STATE_SYNC","🛡️ Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return w("STATE_SYNC","🔄 Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return w("COMMITMENTS","🏁 Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);case"destroyDrone":return await this.processDestroyDrone(r);case"addShield":return await this.processAddShield(r);case"resetShields":return await this.processResetShields(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{i||this.broadcastStateToGuest(),this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections};let o={...n};if(!n.interceptor){const m=$e.calculateAiInterception(n,{player1:r.player1,player2:r.player2},i);if(m.hasInterceptors){const y=n.attackingPlayer==="player1"?"player2":"player1";if(this.gameStateManager.setState({interceptionPending:{attackDetails:n,defendingPlayerId:y,attackingPlayerId:n.attackingPlayer,interceptors:m.interceptors,timestamp:Date.now()}}),y==="player2"&&r.gameMode==="local"){if(w("COMBAT","🛡️ [INTERCEPTION] AI defender has interceptors"),await new Promise(b=>setTimeout(b,1e3)),this.aiPhaseProcessor){const b=await this.aiPhaseProcessor.makeInterceptionDecision(m.interceptors,n);w("COMBAT","🛡️ [INTERCEPTION] AI decision:",b.interceptor?"INTERCEPT":"DECLINE"),b.interceptor&&(o.interceptor=b.interceptor,this.gameStateManager.setState({lastInterception:{interceptor:b.interceptor,originalTarget:n.target,timestamp:Date.now()}}))}this.gameStateManager.setState({interceptionPending:null})}else return w("COMBAT","🛡️ [INTERCEPTION] Human defender has interceptors"),{needsInterceptionDecision:!0,interceptionData:{interceptors:m.interceptors,attackDetails:m.attackDetails}}}}const l=m=>{this.gameStateManager.addLogEntry(m,"resolveAttack",o.attackingPlayer==="player2"?o.aiContext:null)},u=()=>{},p=()=>{},d=$e.resolveAttack(o,{player1:r.player1,player2:r.player2},i,l,u,p),h=(d.animationEvents||[]).map(m=>({animationName:m.type,payload:{...m,droneId:m.sourceId}}));return w("COMBAT","[ANIMATION EVENTS] ActionProcessor received:",d.animationEvents),w("COMBAT","[ANIMATION EVENTS] Mapped to animations:",h),w("COMBAT","🎬 [AI ANIMATION DEBUG] Built animations array:",{count:h.length,animations:h.map(m=>({name:m.animationName,sourceId:m.payload.sourceId,targetId:m.payload.targetId})),hasAnimationManager:!!this.animationManager}),w("COMBAT","🎬 [AI ANIMATION DEBUG] Calling executeAndCaptureAnimations()"),await this.executeAndCaptureAnimations(h),w("COMBAT","🎬 [AI ANIMATION DEBUG] executeAndCaptureAnimations() completed"),this.gameStateManager.setPlayerStates(d.newPlayerStates.player1,d.newPlayerStates.player2),r.interceptionPending&&(w("COMBAT","🛡️ [INTERCEPTION] Clearing interceptionPending after attack completed"),this.gameStateManager.setState({interceptionPending:null})),this.checkWinCondition(),d.attackResult&&d.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),d}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:o}=t,u=this.gameStateManager.getState()[o];if(!u)throw new Error(`Player ${o} not found`);const p=u.dronesOnBoard[r].findIndex(m=>m.id===n);if(p===-1)throw new Error(`Drone ${n} not found in ${r}`);const d=u.dronesOnBoard[r][p],h={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(m=>m.id!==n),[i]:[...u.dronesOnBoard[i],{...d,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(o,{dronesOnBoard:h}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:d.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),w("COMBAT",`✅ Moved ${d.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:o==="player1"?"player2":"player1"}),{success:!0,message:`${d.name} moved from ${r} to ${i}`,drone:d,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,o=this.gameStateManager.getState(),l={player1:o.player1,player2:o.player2},u={player1:o.placedSections,player2:o.opponentPlacedSections};let p=null,d=null;if(Object.values(l).forEach(A=>{Object.values(A.dronesOnBoard).forEach(C=>{C.forEach(T=>{T.id===n&&(p=T),T.id===i&&(d=T)})})}),i&&typeof i=="string"&&i.startsWith("lane")&&!d&&(d={id:i}),!p||!p.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const h=p.abilities[r],m=A=>{this.gameStateManager.addLogEntry(A,"resolveAbility")},y=async A=>await this.processAttack({attackDetails:A}),b=$e.resolveAbility(h,p,d,l,u,m,y),x=(b.animationEvents||[]).map(A=>({animationName:A.type,payload:{...A,droneId:A.sourceId}}));if(await this.executeAndCaptureAnimations(x),this.gameStateManager.setPlayerStates(b.newPlayerStates.player1,b.newPlayerStates.player2),this.checkWinCondition(),b.shouldEndTurn){const A=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:A.currentPlayer==="player1"?"player2":"player1"})}return b}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:o}=t,l=this.gameStateManager.getState(),u=l[i],d=l[i==="player1"?"player2":"player1"],h={player1:l.placedSections,player2:l.opponentPlacedSections},m=b=>{this.gameStateManager.addLogEntry(b)},y=$e.executeDeployment(n,r,o||l.turn,u,d,h,m,i);if(y.success){const b=y.deployedDrone?.id||n.id,x=(y.animationEvents||[]).map(_=>({animationName:_.type,payload:{..._,droneId:_.targetId}})),A={...y.newPlayerState,dronesOnBoard:{...y.newPlayerState.dronesOnBoard,[r]:y.newPlayerState.dronesOnBoard[r].map(_=>_.id===b?{..._,isTeleporting:!0}:_)}};i==="player1"?this.gameStateManager.updatePlayers(A,{}):this.gameStateManager.updatePlayers({},A),await new Promise(_=>setTimeout(_,50));const C=this.executeAndCaptureAnimations(x),T=this.animationManager?.animations?.TELEPORT_IN||{duration:600,config:{revealAt:.7}},O=T.duration*(T.config?.revealAt||.7);setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState)},O),await C,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,o=this.gameStateManager.getState(),l={player1:o.player1,player2:o.player2},u={player1:o.placedSections,player2:o.opponentPlacedSections};let p=null;if(r){for(const y of["player1","player2"]){for(const b of["lane1","lane2","lane3"]){const A=(l[y].dronesOnBoard[b]||[]).find(C=>C.id===r);if(A){p={...A,owner:y};break}}if(p)break}if(!p)for(const y of["player1","player2"]){const b=l[y].shipSections;for(const x in b)if(b[x].id===r){p={...b[x],name:x,owner:y};break}if(p)break}!p&&r&&r.startsWith("lane")&&(p={id:r})}const d={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},h=$e.resolveCardPlay(n,p,i,l,u,d);w("CARDS","[ANIMATION EVENTS] Card play events:",h.animationEvents);const m=(h.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId}}));if(await this.executeAndCaptureAnimations(m),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),this.checkWinCondition(),h.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return h}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:o,toLane:l,playerId:u}=t,p=this.gameStateManager.getState(),d={player1:p.player1,player2:p.player2},h={player1:p.placedSections,player2:p.opponentPlacedSections},m={logCallback:b=>this.gameStateManager.addLogEntry(b),applyOnMoveEffectsCallback:$e.applyOnMoveEffects,updateAurasCallback:$e.updateAuras};let y;if(r==="single_move"){y=$e.resolveSingleMove(n,i[0],o,l,d[u],d[u==="player1"?"player2":"player1"],h,m);const b={...d,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(b.player1,b.player2)}else{y=$e.resolveMultiMove(n,i,o,l,d[u],d[u==="player1"?"player2":"player1"],h,m);const b={...d,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(b.player1,b.player2)}if(y.shouldEndTurn){const b=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:b.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:y.shouldEndTurn}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:o}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},p={player1:l.placedSections,player2:l.opponentPlacedSections},d={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},h=$e.resolveShipAbility(n,r,i,u,p,d),m=(h.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId}}));if(await this.executeAndCaptureAnimations(m),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return h}checkWinCondition(){const t=this.gameStateManager.getState();if(t.winner)return null;const n={player1:t.player1,player2:t.player2},r={logCallback:o=>{this.gameStateManager.addLogEntry(o,"checkWinCondition")},setWinnerCallback:o=>{this.gameStateManager.setWinner(o)},showWinnerModalCallback:()=>{}};return $e.checkGameStateForWinner(n,r)}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;w("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();w("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const o=$e.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(w("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let p=r;u.passInfo&&u.passInfo[`${r}Passed`]?(p=u.currentPlayer,w("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${p}`)):w("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] Setting new player: ${p}`),this.gameStateManager.setCurrentPlayer(p)}const l=this.gameStateManager.getState();return w("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:o.type}),{success:!0,transitionType:o.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return w("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};w("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),w("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const o={};if(["deployment","action"].includes(n)&&(o.currentPlayer=i.firstPlayerOfRound,w("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const d=this.gameStateManager.getLocalPlayerId(),h=i[d],y=this.gameDataService.getEffectiveShipStats(h,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;o.shieldsToAllocate=y,w("PHASE_TRANSITIONS",`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${y}`)}else n==="placement"&&(o.unplacedSections=["bridge","powerCell","droneControlHub"],o.placedSections=Array(3).fill(null),o.opponentPlacedSections=Array(3).fill(null),w("PHASE_TRANSITIONS","[PLACEMENT DEBUG] Initialized placement phase"));o.turnPhase=n,this.gameStateManager.setState(o),this.clearPhaseCommitments(n),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1});const u={determineFirstPlayer:"DETERMINING FIRST PLAYER",energyReset:"ENERGY RESET",mandatoryDiscard:"MANDATORY DISCARD PHASE",optionalDiscard:"OPTIONAL DISCARD PHASE",draw:"DRAW PHASE",allocateShields:"ALLOCATE SHIELDS",mandatoryDroneRemoval:"REMOVE EXCESS DRONES",deployment:"DEPLOYMENT PHASE",deploymentComplete:"DEPLOYMENT COMPLETE",action:"ACTION PHASE"};if(u[n]&&this.animationManager){w("PHASE_TRANSITIONS",`🎬 [PHASE ANNOUNCEMENT] Showing announcement for: ${n}`);const d={phaseText:u[n],phaseName:n,timestamp:Date.now()};(n==="deployment"||n==="action")&&(d.firstPlayerId=i.firstPlayerOfRound);const h={animationName:"PHASE_ANNOUNCEMENT",payload:d};await this.executeAndCaptureAnimations([h]),w("PHASE_TRANSITIONS",`🎬 [PHASE ANNOUNCEMENT] Announcement complete for: ${n}`)}w("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase} → ${n}`);const p=this.gameStateManager.getState();return w("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:p.turnPhase,placedSections:p.placedSections,opponentPlacedSections:p.opponentPlacedSections,stateUpdatesApplied:o}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;w("PHASE_TRANSITIONS",`[ROUND START DEBUG] Processing round start for turn: ${n}`);const o=this.gameStateManager.getState(),l=i||$e.determineFirstPlayer(n,o.firstPlayerOverride,o.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(o.player1,o.placedSections),p=this.gameDataService.getEffectiveShipStats(o.player2,o.opponentPlacedSections),d=$e.calculateNewRoundPlayerState(o.player1,n,u,o.player2,o.placedSections),h=$e.calculateNewRoundPlayerState(o.player2,n,p,o.player1,o.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,firstPasserOfPreviousRound:o.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(d,h),w("PHASE_TRANSITIONS",`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:d,player2:h}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:o=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);w("ENERGY","[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:o});const u=l[o];if(n==="remove"){const p=u.shipSections[r];if(!p||p.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const d={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},h={...u,shipSections:d};return this.gameStateManager.updatePlayerState(o,h),w("ENERGY",`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:h}}else if(n==="add"){const p=o==="player1"?l.placedSections:l.opponentPlacedSections,d=$e.getEffectiveSectionMaxShields(r,u,p),h=u.shipSections[r];if(!h||h.allocatedShields>=d)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:m};return this.gameStateManager.updatePlayerState(o,y),w("ENERGY",`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const p={...u,shipSections:i};return this.gameStateManager.updatePlayerState(o,p),w("ENERGY","[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:p}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const o=n.payload;switch(o.type){case"attack":return w("COMBAT","🎬 [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:o.attacker?.id,targetId:o.target?.id,lane:o.attacker?.lane,targetType:o.targetType,hasAttackerObject:!!o.attacker,hasTargetObject:!!o.target}),await this.processAttack({attackDetails:{attacker:o.attacker,target:o.target,targetType:o.targetType||"drone",lane:o.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:o.card,targetId:o.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:o.drone.id,fromLane:o.fromLane,toLane:o.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:o.drone.id,abilityIndex:o.abilityIndex,targetId:o.target?.id});default:throw new Error(`Unknown AI action subtype: ${o.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(w("DEPLOYMENT",`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;w("DEPLOYMENT","[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const o=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return w("DEPLOYMENT","[AI DECISION DEBUG] Deployment result:",o),o.success?(w("DEPLOYMENT","[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),w("DEPLOYMENT","[AI DECISION DEBUG] Turn transition complete")):w("DEPLOYMENT","[AI DECISION DEBUG] Deployment failed, not transitioning turn"),o;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":w("PASS_LOGIC","[AI DECISION DEBUG] AI passing");const p=this.gameStateManager.getState(),d=!p.passInfo[n==="player1"?"player2Passed":"player1Passed"];w("PASS_LOGIC","[AI DECISION DEBUG] Pass info before update:",p.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:p.passInfo.firstPasser||(d?n:null)});const h=this.gameStateManager.get("passInfo");return w("PASS_LOGIC","[AI DECISION DEBUG] Pass info after update:",h),h.player1Passed&&h.player2Passed?(w("PASS_LOGIC","[AI DECISION DEBUG] Both players passed, transitioning phase"),p.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):p.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(w("PASS_LOGIC","[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;w("STATE_SYNC","[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processGuestAction(t){if(this.gameStateManager.get("gameMode")!=="host"){console.warn("⚠️ processGuestAction should only be called by host");return}w("STATE_SYNC","[HOST] Processing guest action:",t);const r=await this.queueAction({type:t.type,payload:t.payload,isNetworkAction:!0});return this.broadcastStateToGuest(),r}async executeAndCaptureAnimations(t){if(!t||t.length===0)return;const n=this.gameStateManager.get("gameMode");if(n==="host"&&this.pendingAnimationsForBroadcast.push(...t),this.animationManager){const r=n==="guest"?"GUEST_OPTIMISTIC":n==="host"?"HOST_LOCAL":"LOCAL";await this.animationManager.executeAnimations(t,r)}}getAndClearPendingAnimations(){const t=[...this.pendingAnimationsForBroadcast];return this.pendingAnimationsForBroadcast=[],t}broadcastStateToGuest(){if(this.gameStateManager.get("gameMode")==="host"&&this.p2pManager&&this.p2pManager.isConnected){const n=this.gameStateManager.getState(),r=this.getAndClearPendingAnimations();w("STATE_SYNC","📡 [ANIMATION BROADCAST] Sending state with animations:",{animationCount:r.length,animations:r.map(i=>i.animationName)}),this.p2pManager.broadcastState(n,r)}}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:o,opponentPlayerId:l}=t;w("PASS_LOGIC","[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:o}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=[{animationName:"PASS_NOTIFICATION",payload:{passingPlayerId:n}}];await this.executeAndCaptureAnimations(u);const p=`${l}Passed`,d=`${n}Passed`,h=!o[p],m={...o,[d]:!0,firstPasser:o.firstPasser||(h?n:null)};if(w("PASS_LOGIC","[PLAYER PASS DEBUG] Updating pass info:",m),this.gameStateManager.setPassInfo(m,"ActionProcessor"),m.player1Passed&&m.player2Passed)w("PASS_LOGIC","[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let b=null;n==="player1"&&!m.player2Passed?b="player2":n==="player2"&&!m.player1Passed&&(b="player1"),b&&(w("PASS_LOGIC",`[PLAYER PASS DEBUG] Switching turn to ${b} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:b},"TURN_SWITCH","playerPass"))}return{success:!0,newPassInfo:m}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;w("STATE_SYNC","[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error("🔥 CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error("🔥 CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1}=t,o=this.gameStateManager.getState();if(w("CARDS",`[OPTIONAL DISCARD DEBUG] Processing ${i?"mandatory":"optional"} discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const l=o[n];if(!l)throw new Error(`Player ${n} not found`);r.forEach(d=>{this.gameStateManager.addLogEntry({player:l.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:d.name,target:"N/A",outcome:`Discarded ${d.name}.`})});const u=l.hand.filter(d=>!r.some(h=>d.instanceId===h.instanceId)),p=[...l.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:u,discardPile:p}),w("CARDS",`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){w("PHASE_TRANSITIONS","🎯 ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await Fr(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-DUSpNJy_.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),o=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),w("PHASE_TRANSITIONS",`✅ First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:o,turn:t.turn}}async acknowledgeDeploymentComplete(t){return w("COMMITMENTS",`🎯 ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),w("COMMITMENTS",`🔄 Cleared commitments for phase: ${t}`)):(n.commitments={},w("COMMITMENTS","🔄 Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;if(w("COMMITMENTS",`🤝 ActionProcessor: Processing ${r} commitment for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processCommitment - should send to host instead"),{success:!1,error:"Guest cannot process commitments locally"};const l=this.gameStateManager.getState();l.commitments[r]||(l.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),l.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:l.commitments},"COMMITMENT_UPDATE");let u=l.commitments[r].player1.completed&&l.commitments[r].player2.completed;if(w("COMMITMENTS",`✅ ${n} ${r} committed, both complete: ${u}`),n==="player1"&&l.gameMode==="local"&&!u&&(w("COMMITMENTS","🤖 Single-player mode: Auto-completing AI commitment immediately"),la))try{await this.handleAICommitment(r,l),w("COMMITMENTS","✅ AI commitment completed successfully");const p=this.gameStateManager.getState();u=p.commitments[r].player1.completed&&p.commitments[r].player2.completed,w("COMMITMENTS",`🔄 Recalculated bothComplete after AI commit: ${u}`)}catch(p){throw console.error("❌ AI commitment error:",p),p}return{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:u}}}async handleAICommitment(t,n){try{w("COMMITMENTS",`🤖 Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await la.processDroneSelection(),await this.processCommitment({playerId:"player2",phase:"droneSelection",actionData:{drones:r}});break;case"deckSelection":r=await la.processDeckSelection(),await this.processCommitment({playerId:"player2",phase:"deckSelection",actionData:{deck:r.deck,drones:r.drones}});break;case"placement":r=await la.processPlacement(),await this.processCommitment({playerId:"player2",phase:"placement",actionData:{placedSections:r}});break;case"mandatoryDiscard":r=await la.executeMandatoryDiscardTurn(n),await this.processCommitment({playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"optionalDiscard":r=await la.executeOptionalDiscardTurn(n),await this.processCommitment({playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"allocateShields":await la.executeShieldAllocationTurn(n),await this.processCommitment({playerId:"player2",phase:"allocateShields",actionData:{committed:!0}});break;case"mandatoryDroneRemoval":r=await la.executeMandatoryDroneRemovalTurn(n),await this.processCommitment({playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}),i()},1e3)});break;case"deploymentComplete":w("COMMITMENTS","🤖 AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}),w("COMMITMENTS","🤖 AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(`⚠️ No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(`⚠️ No commitments found for phase: ${t}`),{};w("COMMITMENTS",`📋 ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((o,l)=>(o[l.name]=0,o),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((o,l)=>(o[l.name]=0,o),{})}),w("COMMITMENTS","✅ Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,deckDronePool:r.player1.drones||[],discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,deckDronePool:r.player2.drones||[],discard:[]}),w("COMMITMENTS","✅ Applied deck selections (cards + drones) to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),w("COMMITMENTS","✅ Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":w("COMMITMENTS","✅ First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":w("COMMITMENTS","✅ Discard commitments (handled via card actions)");break;case"allocateShields":w("COMMITMENTS","✅ Shield allocation (handled separately)");break;case"deploymentComplete":w("COMMITMENTS","✅ Deployment complete acknowledgments (no state changes)");break;case"determineFirstPlayer":w("COMMITMENTS","✅ First player determination (handled by GameFlowManager)");break;default:console.warn(`⚠️ No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return w("CARDS","🃏 ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:o}=t;return w("ENERGY","⚡ ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),i!==void 0&&this.gameStateManager.setState({shieldsToAllocate:i}),o!==void 0&&this.gameStateManager.setState({opponentShieldsToAllocate:o}),w("ENERGY",`✅ Energy reset complete - Shields to allocate: ${i||0}, ${o||0}`),{success:!0,message:"Energy reset completed",player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:o}}async processDestroyDrone(t){const{droneId:n,playerId:r}=t;if(w("COMBAT",`💥 ActionProcessor: Processing drone destruction for ${r}, drone ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processDestroyDrone - should send to host instead"),{success:!1,error:"Guest cannot destroy drones locally"};const o=this.gameStateManager.getState(),l=o[r];if(!l)return{success:!1,error:`Player ${r} not found`};const u=$e.getLaneOfDrone(n,l);if(!u)return{success:!1,error:`Drone ${n} not found on board`};const p=l.dronesOnBoard[u].find(x=>x.id===n);if(!p)return{success:!1,error:`Drone ${n} not found in lane ${u}`};let d={...l,dronesOnBoard:{...l.dronesOnBoard}};d.dronesOnBoard[u]=d.dronesOnBoard[u].filter(x=>x.id!==n);const h=$e.onDroneDestroyed(d,p);Object.assign(d,h);const y=o[r==="player1"?"player2":"player1"],b={player1:o.placedSections,player2:o.opponentPlacedSections};return d.dronesOnBoard=$e.updateAuras(d,y,b),this.gameStateManager.updatePlayerState(r,d),w("COMBAT",`✅ Drone ${n} destroyed successfully from ${u}`),{success:!0,message:`Drone destroyed from ${u}`,droneId:n,lane:u,droneName:p.name}}async processAddShield(t){const{sectionName:n,playerId:r}=t;if(w("ENERGY",`🛡️ ActionProcessor: Processing shield addition for ${r}, section ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processAddShield - should send to host instead"),{success:!1,error:"Guest cannot add shields locally"};const o=this.gameStateManager.getState(),l=r==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate",u=$e.processShieldAllocation({...o,shieldsToAllocate:o[l]},r,n);return u.success?(this.gameStateManager.updatePlayerState(r,u.newPlayerState),this.gameStateManager.setState({[l]:u.newShieldsToAllocate}),w("ENERGY",`✅ Shield added to ${n}, ${u.newShieldsToAllocate} shields remaining`),{success:!0,message:`Shield added to ${n}`,sectionName:n,shieldsRemaining:u.newShieldsToAllocate}):(console.warn(`⚠️ Shield allocation failed: ${u.error}`),u)}async processResetShields(t){const{playerId:n}=t;if(w("ENERGY",`🔄 ActionProcessor: Processing shield allocation reset for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processResetShields - should send to host instead"),{success:!1,error:"Guest cannot reset shields locally"};const i=this.gameStateManager.getState(),o=$e.processResetShieldAllocation(i,n);if(!o.success)return console.warn(`⚠️ Shield reset failed: ${o.error}`),o;this.gameStateManager.updatePlayerState(n,o.newPlayerState);const l=n==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate";return this.gameStateManager.setState({[l]:o.newShieldsToAllocate}),w("ENERGY",`✅ Shield allocation reset, ${o.newShieldsToAllocate} shields available`),{success:!0,message:"Shield allocation reset",shieldsToAllocate:o.newShieldsToAllocate}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}class Kj{constructor(t){this.gameStateManager=t,this.messageQueue=[],this.isProcessing=!1,this.renderCompletePromise=null,this.renderCompleteResolve=null}initialize(t){w("MULTIPLAYER","🎯 [GUEST QUEUE] Initializing GuestMessageQueueService"),t.subscribe(n=>{n.type==="state_update_received"&&(w("MULTIPLAYER","📥 [GUEST QUEUE] Received state update, queuing for processing"),this.enqueueMessage(n))}),this.gameStateManager.subscribe(n=>{n.type==="render_complete"&&(w("STATE_SYNC","✅ [GUEST QUEUE] Render complete received"),this.renderCompleteResolve&&(this.renderCompleteResolve(),this.renderCompleteResolve=null,this.renderCompletePromise=null))})}enqueueMessage(t){w("MULTIPLAYER","📝 [GUEST QUEUE] Enqueuing message:",{type:t.type,queueLength:this.messageQueue.length+1}),this.messageQueue.push(t),this.processQueue()}async processQueue(){if(this.isProcessing){w("MULTIPLAYER","⏸️ [GUEST QUEUE] Already processing, queue length:",this.messageQueue.length);return}for(this.isProcessing=!0,w("MULTIPLAYER","▶️ [GUEST QUEUE] Starting queue processing");this.messageQueue.length>0;){const t=this.messageQueue.shift();w("MULTIPLAYER","🔄 [GUEST QUEUE] Processing message:",{type:t.type,remaining:this.messageQueue.length}),await this.processMessage(t)}this.isProcessing=!1,w("MULTIPLAYER","⏹️ [GUEST QUEUE] Queue processing complete")}async processMessage(t){switch(t.type){case"state_update_received":await this.processStateUpdate(t.data);break;default:console.warn("⚠️ [GUEST QUEUE] Unknown message type:",t.type)}}async processStateUpdate({state:t,animations:n}){w("STATE_SYNC","📊 [GUEST QUEUE] Processing state update:",{turnPhase:t?.turnPhase,hasAnimations:n?.length>0,animationCount:n?.length||0});const r=this.gameStateManager.hasRecentOptimisticActions(),i=this.gameStateManager.optimisticActions?.length||0,o=r&&n&&n.length>0;w("ANIMATIONS","🔍 [GUEST QUEUE] Animation skip decision:",{hasOptimisticActions:r,optimisticActionsCount:i,incomingAnimationCount:n?.length||0,willSkipAnimations:o,reasoning:o?"Already played locally (optimistic)":n?.length?"No optimistic actions, will play animations":"No animations in update"}),o&&w("ANIMATIONS","⏭️ [GUEST QUEUE] SKIPPING animations - already played optimistically");const l=n&&n.length>0&&!o;let u=null;l&&(w("STATE_SYNC","🔧 [GUEST QUEUE] Setting up render listener for animations..."),u=this.waitForRender()),w("STATE_SYNC","📝 [GUEST QUEUE] Applying state..."),this.gameStateManager.applyHostState(t),l&&u?(w("STATE_SYNC","⏳ [GUEST QUEUE] Waiting for React render before animations..."),await u,w("STATE_SYNC","✅ [GUEST QUEUE] React render complete"),this.gameStateManager.actionProcessor?.animationManager&&(w("ANIMATIONS","🎬 [GUEST QUEUE] Executing animations from HOST response..."),await this.gameStateManager.actionProcessor.animationManager.executeAnimations(n,"HOST_RESPONSE"),w("ANIMATIONS","✅ [GUEST QUEUE] Host response animations complete"))):w("STATE_SYNC","⚡ [GUEST QUEUE] No animations - state applied immediately without render wait"),w("STATE_SYNC","✅ [GUEST QUEUE] State update processing complete")}async waitForRender(){return this.renderCompletePromise?this.renderCompletePromise:(this.renderCompletePromise=new Promise(t=>{this.renderCompleteResolve=t}),this.renderCompletePromise)}getStatus(){return{queueLength:this.messageQueue.length,isProcessing:this.isProcessing,waitingForRender:!!this.renderCompletePromise}}}const PA=(e,t=3)=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const n=[...e].sort(()=>.5-Math.random()),r=n.slice(0,t),i=n.slice(t);return w("DRONE_SELECTION",`🎲 Initialized drone selection: ${r.length} in initial selection, ${i.length} in pool`),w("DRONE_SELECTION",`🎯 Initial selection: ${r.map(o=>o.name).join(", ")}`),{droneSelectionTrio:r,droneSelectionPool:i}},Wj=(e,t=3)=>{if(!e||e.length===0)return console.warn("⚠️ No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return w("DRONE_SELECTION",`🔄 Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),w("DRONE_SELECTION",`📦 Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class Xj{constructor(){w("STATE_SYNC","🔄 GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.optimisticActions=[],this.optimisticActionTimeout=5e3,this.state={appState:"menu",isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=ei.getInstance(this),this.gameFlowManager=null,this.guestQueueService=null,this.p2pIntegrationSetup=!1,w("STATE_SYNC","🔄 GAMESTATE INITIALIZATION: GameStateManager created"),w("STATE_SYNC","📱 App State:",this.state.appState),w("STATE_SYNC","🎮 Game Active:",this.state.gameActive),w("STATE_SYNC","✅ GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost),n.data.mode==="guest"&&!this.guestQueueService&&(w("STATE_SYNC","🎯 [GUEST QUEUE] Initializing service for guest mode"),this.guestQueueService=new Kj(this),this.guestQueueService.initialize(t));break;case"state_update_received":this.state.gameMode==="guest"&&(this.guestQueueService||(console.warn("⚠️ [GUEST QUEUE] Service not initialized, applying state directly (fallback)"),this.applyHostState(n.data.state)));break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}applyHostState(t){if(this.state.gameMode!=="guest"){console.warn("⚠️ applyHostState should only be called in guest mode");return}w("STATE_SYNC","[GUEST STATE UPDATE] Applying state from host:",{turnPhase:t.turnPhase,currentPlayer:t.currentPlayer,roundNumber:t.roundNumber}),w("STATE_SYNC","[GUEST] Received player2 hand from host:",{handSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId,hasInstanceId:t.player2?.hand?.[0]?.instanceId!==void 0});const n=this.state.gameMode;this.state={...t},this.state.gameMode=n,w("STATE_SYNC","[GUEST] After applying state - player2 hand check:",{handSize:this.state.player2?.hand?.length||0,sampleCard:this.state.player2?.hand?.[0]||null,sampleInstanceId:this.state.player2?.hand?.[0]?.instanceId,hasInstanceId:this.state.player2?.hand?.[0]?.instanceId!==void 0}),this.emit("HOST_STATE_UPDATE",{hostState:t})}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},o=new Error().stack,l=o?o.split(`
`):[],u=this.extractCallerInfo(l),p=l.some(A=>A.includes("App.jsx")),d=l.some(A=>A.includes("ActionProcessor")),h=l.some(A=>A.includes("PhaseManager")),m=d||h;p&&!m&&(console.error("🚨 ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error("📋 App.jsx should only call ActionProcessor or PhaseManager methods"),console.error("🔍 Stack trace:",o));const y=Object.keys(t),b=`${u.primaryCaller} in ${u.primaryFile}`;w("STATE_SYNC",`🔍 GAMESTATE CHANGE [${n}] from ${b}:`,{changedKeys:y,allUpdates:t,architectureViolation:p&&!m});const x=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!x&&this.logPlayerStateChanges(t,i,b,n),y.forEach(A=>{if(!["player1","player2"].includes(A)){const C=i[A],T=t[A];JSON.stringify(C)!==JSON.stringify(T)&&w("STATE_SYNC",`🔍 STATE CHANGE: ${A}`,{before:C,after:T,caller:b,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,o=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!o){const u=["player1","player2","turnPhase","currentPlayer"].some(m=>m in t),p=i&&i.includes("GameFlowManager"),d=r==="phaseTransition"||t.turnPhase&&p;u&&!(d&&p)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:p,isPhaseTransition:d,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,o,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(o,l)=>{o.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${o.energy}`),o.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${o.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((o,l)=>{Object.values(o.dronesOnBoard).forEach(u=>{u.forEach(p=>{i.has(p.id)&&console.error(`Duplicate drone ID detected: ${p.id} in player${l+1}`),i.add(p.id)})})})}validateTurnPhaseTransition(t,n){({null:["deckSelection","preGame"],preGame:["deckSelection","droneSelection"],deckSelection:["droneSelection"],droneSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(w("STATE_SYNC","🔍 Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){w("STATE_SYNC","✅ Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],p=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],d=Object.keys(t).filter(T=>u.includes(T)),h=Object.keys(t).filter(T=>p.includes(T)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const y=d.every(T=>["player1","player2"].includes(T)),b=d.every(T=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(T));if(m&&(y||b))return;const x=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),C=d.length===1&&d[0]==="passInfo";if(!(x&&A&&C)){if(d.length>0&&!r){const T=i?.split(`
`)||[],O=T.find(_=>_.includes(".jsx")&&!_.includes("GameStateManager"))||T[2]||"Unknown";console.warn("⚠️ ActionProcessor bypass detected: Critical game state updated directly",{updates:d,turnPhase:n.turnPhase,caller:O.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug("🐛 ActionProcessor bypass debug info:",{stackTrace:T.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}h.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(o=>{if(t[o]){const l=n[o],u=t[o];w("STATE_SYNC",`🚨 PLAYER STATE CHANGE [${o}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(d=>{const h=l?l[d]:void 0,m=u?u[d]:void 0;if(JSON.stringify(h)!==JSON.stringify(m))if(d==="energy"||d==="deploymentBudget"||d==="initialDeploymentBudget")w("STATE_SYNC",`  💰 ${d}: ${h} → ${m}`),(m==null||isNaN(m))&&console.error(`  🚨 WARNING: ${d} became ${m}!`);else if(d==="activeDronePool"){const y=Array.isArray(h)?h.length:"undefined",b=Array.isArray(m)?m.length:"undefined";let x,A;if(Array.isArray(h))try{x=h.map(C=>C?.name||"UNNAMED").join(",")}catch(C){x=`ERROR_MAPPING_OLD: ${C.message}`}else x="undefined";if(Array.isArray(m))try{A=m.map(C=>C?.name||"UNNAMED").join(",")}catch(C){A=`ERROR_MAPPING_NEW: ${C.message}`}else A="undefined";if(w("STATE_SYNC",`  🤖 ${d}: [${y} drones] → [${b} drones]`),w("STATE_SYNC",`    Old drones: ${x}`),w("STATE_SYNC",`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(w("STATE_SYNC","    🔍 Debug newValue:",m),Array.isArray(m)&&m.length>0&&w("STATE_SYNC","    🔍 First drone object:",m[0])),y!==b||x!==A){const C=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";w("STATE_SYNC",`    📍 Update source:
${C}`)}}else if(d==="hand"||d==="deck"){const y=Array.isArray(h)?h.length:"undefined",b=Array.isArray(m)?m.length:"undefined";w("STATE_SYNC",`  🃏 ${d}: [${y} cards] → [${b} cards]`)}else if(d==="dronesOnBoard"){const y=h?`L1:${h.lane1?.length||0} L2:${h.lane2?.length||0} L3:${h.lane3?.length||0}`:"undefined",b=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";w("STATE_SYNC",`  🛸 ${d}: ${y} → ${b}`)}else w("STATE_SYNC",`  📝 ${d}:`,{before:h,after:m})}),w("STATE_SYNC",`🔍 Full ${o} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const o=i?.split(`
`)||[],l=this.extractCallerInfo(o),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],p=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],d=l.functions.filter(m=>u.some(y=>m.toLowerCase().includes(y.toLowerCase()))),h=l.functions.filter(m=>p.some(y=>m.toLowerCase().includes(y.toLowerCase())));d.length>0&&h.length===0&&(console.warn("🚨 Inappropriate function updating game state:",{inappropriateFunctions:d,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI → ActionProcessor → gameLogic.js → GameStateManager"}),console.debug("🔍 Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:d,appropriateFound:h,updateDetails:t,stackTrace:o.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const o=i.match(/at\s+([\w.$]+)\s*\(/);if(o){const u=o[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),o=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const p of r){const d=u[p];if(!d)continue;const h=Array.isArray(d)?d:[d];let m=!1;for(const y of h)(y==="GameFlowManager"&&i||y==="SequentialPhaseManager"&&o||y==="ActionProcessor"&&l)&&(m=!0);if(!m){const y=i?"GameFlowManager":o?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(`🚨 OWNERSHIP VIOLATION: ${y} cannot update '${p}'`,{updateKey:p,currentManager:y,allowedOwners:h,updates:r,recommendation:`Only ${h.join(" or ")} should update '${p}'`})}}}reset(){w("STATE_SYNC","🔄 GAME RESET: Resetting game state and clearing caches");const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:$e.initialPlayerState("Player 1",cl),player2:$e.initialPlayerState("Player 2",cl),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),sn.reset(),this.actionProcessor.clearQueue(),w("STATE_SYNC","✅ GAME RESET: State, cache, and queue cleared")}startGame(t="local",n={},r={}){w("STATE_SYNC","🎮 GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"deckSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...$e.initialPlayerState(n.name||"Player 1",n.decklist||cl),...n},player2:{...$e.initialPlayerState(r.name||"Player 2",r.decklist||cl),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{},droneSelectionPool:[],droneSelectionTrio:[]};this.setState(i,"GAME_STARTED"),w("STATE_SYNC","👤 Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),w("STATE_SYNC","👤 Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),w("STATE_SYNC","✅ GAME START: Game session initialized successfully")}endGame(){w("STATE_SYNC","🎮 GAME END: Ending current game session and clearing caches"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),sn.reset(),this.actionProcessor.clearQueue(),w("STATE_SYNC","✅ GAME END: Returned to menu state, cache and queue cleared")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&w("STATE_SYNC","🔍 [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}trackOptimisticAction(t,n){const r={type:t,payload:n,timestamp:Date.now(),id:`${t}-${Date.now()}-${Math.random()}`};this.optimisticActions.push(r),w("STATE_SYNC","🔮 [OPTIMISTIC] Tracked action:",t,"Total tracked:",this.optimisticActions.length),setTimeout(()=>{this.optimisticActions=this.optimisticActions.filter(i=>i.id!==r.id),w("STATE_SYNC","🧹 [OPTIMISTIC] Cleared old action:",t,"Remaining:",this.optimisticActions.length)},this.optimisticActionTimeout)}hasRecentOptimisticActions(){return this.optimisticActions.length>0}clearOptimisticActions(){w("STATE_SYNC","🧹 [OPTIMISTIC] Clearing all actions"),this.optimisticActions=[]}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const o=[...this.state.gameLog,i];this.setState({gameLog:o},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Ge=new Xj;class Qj{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return Zj(t).buffer}}function Zj(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(o,r),r+=i.byteLength}return n}function yw(e){return new Jj(e).unpack()}function vw(e){const t=new eI,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class Jj{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",o,l;for(;r<t;)o=n[r],o<160?(l=o,r++):(o^192)<32?(l=(o&31)<<6|n[r+1]&63,r+=2):(o^224)<16?(l=(o&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(o&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class eI{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const o=this.pack(t[i]);return o instanceof Promise?o.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,o=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|o/l&1048575,p=o%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(p)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=o=>{if(o<n.length){const l=n[o];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(o+1))}return i(o+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Qj,this._textEncoder=new TextEncoder}}let bw=!0,Sw=!0;function Jc(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function no(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const p=d=>{const h=n(d);h&&(u.handleEvent?u.handleEvent(h):u(h))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,p),i.apply(this,[l,p])};const o=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(u))return o.apply(this,arguments);const p=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[l,p])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function tI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(bw=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function nI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Sw=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function xw(){if(typeof window=="object"){if(bw)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ov(e,t){Sw&&console.warn(e+" is deprecated, please use "+t+" instead.")}function rI(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Jc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Jc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Jc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Jc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function wA(e){return Object.prototype.toString.call(e)==="[object Object]"}function Aw(e){return wA(e)?Object.keys(e).reduce(function(t,n){const r=wA(e[n]),i=r?Aw(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[n]:i})},{}):e}function t0(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?t0(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{t0(e,e.get(i),n)})}))}function OA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&o.push(l)}),o.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&t0(e,u,i)})}),i}const _A=xw;function Ew(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const p={};return Object.keys(u).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const h=typeof u[d]=="object"?u[d]:{ideal:u[d]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const m=function(y,b){return y?y+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(h.ideal!==void 0){p.optional=p.optional||[];let y={};typeof h.ideal=="number"?(y[m("min",d)]=h.ideal,p.optional.push(y),y={},y[m("max",d)]=h.ideal,p.optional.push(y)):(y[m("",d)]=h.ideal,p.optional.push(y))}h.exact!==void 0&&typeof h.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[m("",d)]=h.exact):["min","max"].forEach(y=>{h[y]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[m(y,d)]=h[y])})}),u.advanced&&(p.optional=(p.optional||[]).concat(u.advanced)),p},i=function(u,p){if(t.version>=61)return p(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const d=function(h,m,y){m in h&&!(y in h)&&(h[y]=h[m],delete h[m])};u=JSON.parse(JSON.stringify(u)),d(u.audio,"autoGainControl","googAutoGainControl"),d(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let d=u.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const h=t.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete u.video.facingMode;let m;if(d.exact==="environment"||d.ideal==="environment"?m=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(x=>x.kind==="videoinput");let b=y.find(x=>m.some(A=>x.label.toLowerCase().includes(A)));return!b&&y.length&&m.includes("back")&&(b=y[y.length-1]),b&&(u.video.deviceId=d.exact?{exact:b.deviceId}:{ideal:b.deviceId}),u.video=r(u.video),_A("chrome: "+JSON.stringify(u)),p(u)})}u.video=r(u.video)}return _A("chrome: "+JSON.stringify(u)),p(u)},o=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,p,d){i(u,h=>{n.webkitGetUserMedia(h,p,m=>{d&&d(o(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(p){return i(p,d=>u(d).then(h=>{if(d.audio&&!h.getAudioTracks().length||d.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(o(h))))}}}function Cw(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Tw(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):o={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=o,l.transceiver={receiver:o},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===i.id):o={track:i};const l=new Event("track");l.track=i,l.receiver=o,l.transceiver={receiver:o},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else no(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Pw(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,p){let d=i.apply(this,arguments);return d||(d=t(this,u),this._senders.push(d)),d};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){o.apply(this,arguments);const p=this._senders.indexOf(u);p!==-1&&this._senders.splice(p,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(l=>{const u=this._senders.find(p=>p.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ww(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>OA(l,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),no(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>OA(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(o?l=!0:o=u),u.track===r)),l||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Ow(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(p)===-1&&this._shimmedLocalStreams[u.id].push(p):this._shimmedLocalStreams[u.id]=[u,p],p};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(d=>{if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const p=this.getSenders().filter(d=>u.indexOf(d)===-1);this._shimmedLocalStreams[l.id]=[l].concat(p)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const p=this._shimmedLocalStreams[u].indexOf(l);p!==-1&&this._shimmedLocalStreams[u].splice(p,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function _w(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ow(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(m=>{if(this.getSenders().find(b=>b.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const m=new e.MediaStream(h.getTracks());this._streams[h.id]=m,this._reverseStreams[m.id]=h,h=m}r.apply(this,[h])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(A=>A===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[m.id];if(x)x.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([h]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===h)};function o(d,h){let m=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const b=d._reverseStreams[y],x=d._streams[b.id];m=m.replace(new RegExp(x.id,"g"),b.id)}),new RTCSessionDescription({type:h.type,sdp:m})}function l(d,h){let m=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const b=d._reverseStreams[y],x=d._streams[b.id];m=m.replace(new RegExp(b.id,"g"),x.id)}),new RTCSessionDescription({type:h.type,sdp:m})}["createOffer","createAnswer"].forEach(function(d){const h=e.RTCPeerConnection.prototype[d],m={[d](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[x=>{const A=o(this,x);y[0].apply(null,[A])},x=>{y[1]&&y[1].apply(null,x)},arguments[2]]):h.apply(this,arguments).then(x=>o(this,x))}};e.RTCPeerConnection.prototype[d]=m[d]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const d=p.get.apply(this);return d.type===""?d:o(this,d)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(A=>h.track===A)&&(y=this._streams[b])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function n0(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function Nw(e,t){no(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const NA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Nw,shimAddTrackRemoveTrack:_w,shimAddTrackRemoveTrackWithNative:Ow,shimGetSendersWithDtmf:Pw,shimGetUserMedia:Ew,shimMediaStream:Cw,shimOnTrack:Tw,shimPeerConnection:n0,shimSenderReceiverGetStats:ww},Symbol.toStringTag,{value:"Module"}));function Dw(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,l){ov("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,p){u in l&&!(p in l)&&(l[p]=l[u],delete l[u])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),o(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function aI(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function kw(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function r0(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,l,u]=arguments;return r.apply(this,[o||null]).then(p=>{if(t.version<53&&!l)try{p.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;p.forEach((h,m)=>{p.set(m,Object.assign({},h,{type:n[h.type]||h.type}))})}return p}).then(l,u)}}function Mw(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function jw(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),no(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Iw(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){ov("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Rw(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Lw(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:l}=o,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return o})}function $w(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Bw(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Uw(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const DA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Lw,shimCreateAnswer:Uw,shimCreateOffer:Bw,shimGetDisplayMedia:aI,shimGetParameters:$w,shimGetUserMedia:Dw,shimOnTrack:kw,shimPeerConnection:r0,shimRTCDataChannel:Rw,shimReceiverGetStats:jw,shimRemoveStream:Iw,shimSenderGetStats:Mw},Symbol.toStringTag,{value:"Module"}));function zw(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function Gw(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function Hw(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(d,h){const m=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[m]);return h?(y.then(d,h),Promise.resolve()):y},t.createAnswer=function(d,h){const m=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[m]);return h?(y.then(d,h),Promise.resolve()):y};let u=function(p,d,h){const m=i.apply(this,[p]);return h?(m.then(d,h),Promise.resolve()):m};t.setLocalDescription=u,u=function(p,d,h){const m=o.apply(this,[p]);return h?(m.then(d,h),Promise.resolve()):m},t.setRemoteDescription=u,u=function(p,d,h){const m=l.apply(this,[p]);return h?(m.then(d,h),Promise.resolve()):m},t.addIceCandidate=u}function Yw(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(qw(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}).bind(t))}function qw(e){return e&&e.video!==void 0?Object.assign({},e,{video:Aw(e.video)}):e}function Fw(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(ov("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,o.push(u)):o.push(r.iceServers[l])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Vw(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Kw(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Ww(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const kA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Ww,shimCallbacksAPI:Hw,shimConstraints:qw,shimCreateOfferLegacy:Kw,shimGetUserMedia:Yw,shimLocalStreamsAPI:zw,shimRTCIceServerUrls:Fw,shimRemoteStreamsAPI:Gw,shimTrackEventTransceiver:Vw},Symbol.toStringTag,{value:"Module"}));var gg={exports:{}},MA;function iI(){return MA||(MA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<o.length;l++)i=o[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?o.push(l+"="+n.parameters[l]):o.push(l)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(n)[0].split(" ");r.profile=o[2];for(let u=3;u<o.length;u++){const p=o[u],d=t.matchPrefix(n,"a=rtpmap:"+p+" ")[0];if(d){const h=t.parseRtpMap(d),m=t.matchPrefix(n,"a=fmtp:"+p+" ");switch(h.parameters=m.length?t.parseFmtp(m[0]):{},h.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+p+" ").map(t.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(p=>{u.rtcpFeedback.find(h=>h.type===p.type&&h.parameter===p.parameter)||u.rtcpFeedback.push(p)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let o=0;return r.codecs.forEach(l=>{l.maxptime>o&&(o=l.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),p=u.length>0&&u[0].ssrc;let d;const h=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(x=>parseInt(x,10)));h.length>0&&h[0].length>1&&h[0][0]===p&&(d=h[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let b={ssrc:p,codecPayloadType:parseInt(y.parameters.apt,10)};p&&d&&(b.rtx={ssrc:d}),r.push(b),o&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:p,mechanism:l?"red+ulpfec":"red"},r.push(b))}}),r.length===0&&p&&r.push({ssrc:p});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(y=>{y.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const p=u[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let o;const l=r!==void 0?r:2;return n?o=n:o=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(gg)),gg.exports}var Xw=iI();const pl=da(Xw),sI=HP({__proto__:null,default:pl},[Xw]);function Af(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),o=pl.parseCandidate(r.candidate);for(const l in o)l in i||Object.defineProperty(i,l,{value:o[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,no(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function a0(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||no(e,"icecandidate",t=>{if(t.candidate){const n=pl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Ef(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const p=pl.splitSections(u.sdp);return p.shift(),p.some(d=>{const h=pl.parseMLine(d);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(u){const p=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const d=parseInt(p[1],10);return d!==d?-1:d},i=function(u){let p=65536;return t.browser==="firefox"&&(t.version<57?u===-1?p=16384:p=2147483637:t.version<60?p=t.version===57?65535:65536:p=2147483637),p},o=function(u,p){let d=65536;t.browser==="firefox"&&t.version===57&&(d=65535);const h=pl.matchPrefix(u.sdp,"a=max-message-size:");return h.length>0?d=parseInt(h[0].substring(19),10):t.browser==="firefox"&&p!==-1&&(d=2147483637),d},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const p=r(arguments[0]),d=i(p),h=o(arguments[0],p);let m;d===0&&h===0?m=Number.POSITIVE_INFINITY:d===0||h===0?m=Math.max(d,h):m=Math.min(d,h);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return m}}),this._sctp=y}return l.apply(this,arguments)}}function Cf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const u=arguments[0],p=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&p>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},no(e,"datachannel",r=>(t(r.channel,r.target),r))}function i0(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const l=new Event("connectionstatechange",i);o.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function s0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Tf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Pf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const oI=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:s0,shimAddIceCandidateNullOrEmpty:Tf,shimConnectionState:i0,shimMaxMessageSize:Ef,shimParameterlessSetLocalDescription:Pf,shimRTCIceCandidate:Af,shimRTCIceCandidateRelayProtocol:a0,shimSendThrowTypeError:Cf},Symbol.toStringTag,{value:"Module"}));function lI({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=xw,r=rI(e),i={browserDetails:r,commonShim:oI,extractVersion:Jc,disableLog:tI,disableWarnings:nI,sdp:sI};switch(r.browser){case"chrome":if(!NA||!n0||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=NA,Tf(e,r),Pf(e),Ew(e,r),Cw(e),n0(e,r),Tw(e),_w(e,r),Pw(e),ww(e),Nw(e,r),Af(e),a0(e),i0(e),Ef(e,r),Cf(e),s0(e,r);break;case"firefox":if(!DA||!r0||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=DA,Tf(e,r),Pf(e),Dw(e,r),r0(e,r),kw(e),Iw(e),Mw(e),jw(e),Rw(e),Lw(e),$w(e),Bw(e),Uw(e),Af(e),i0(e),Ef(e,r),Cf(e);break;case"safari":if(!kA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=kA,Tf(e,r),Pf(e),Fw(e),Kw(e),Hw(e),zw(e),Gw(e),Vw(e),Yw(e),Ww(e),Af(e),a0(e),Ef(e,r),Cf(e),s0(e,r);break;default:n("Unsupported browser!");break}return i}const jA=lI({window:typeof window>"u"?void 0:window});function ro(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class Qw{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let o=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),p=t.slice(l,u),d={__peerData:this._dataCount,n:o,data:p,total:i};n.push(d),l=u,o++}return this._dataCount++,n}}}function cI(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const yg=jA.default||jA,Yc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return yg.browserDetails.browser}getVersion(){return yg.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=yg.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},uI=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),Zw=()=>Math.random().toString(36).slice(2),IA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class dI extends Qw{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=IA,this.browser=Yc.getBrowser(),this.browserVersion=Yc.getVersion(),this.pack=vw,this.unpack=yw,this.supports=(function(){const n={browser:Yc.isBrowserSupported(),webRTC:Yc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(IA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Yc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=uI,this.randomToken=Zw}}const lr=new dI,fI="PeerJS: ";class pI{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[fI,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var we=new pI,lv={},hI=Object.prototype.hasOwnProperty,Jn="~";function ou(){}Object.create&&(ou.prototype=Object.create(null),new ou().__proto__||(Jn=!1));function mI(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Jw(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new mI(n,r||e,i),l=Jn?Jn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function wf(e,t){--e._eventsCount===0?e._events=new ou:delete e._events[t]}function Hn(){this._events=new ou,this._eventsCount=0}Hn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)hI.call(n,r)&&t.push(Jn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Hn.prototype.listeners=function(t){var n=Jn?Jn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,l=new Array(o);i<o;i++)l[i]=r[i].fn;return l};Hn.prototype.listenerCount=function(t){var n=Jn?Jn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Hn.prototype.emit=function(t,n,r,i,o,l){var u=Jn?Jn+t:t;if(!this._events[u])return!1;var p=this._events[u],d=arguments.length,h,m;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),d){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,n),!0;case 3:return p.fn.call(p.context,n,r),!0;case 4:return p.fn.call(p.context,n,r,i),!0;case 5:return p.fn.call(p.context,n,r,i,o),!0;case 6:return p.fn.call(p.context,n,r,i,o,l),!0}for(m=1,h=new Array(d-1);m<d;m++)h[m-1]=arguments[m];p.fn.apply(p.context,h)}else{var y=p.length,b;for(m=0;m<y;m++)switch(p[m].once&&this.removeListener(t,p[m].fn,void 0,!0),d){case 1:p[m].fn.call(p[m].context);break;case 2:p[m].fn.call(p[m].context,n);break;case 3:p[m].fn.call(p[m].context,n,r);break;case 4:p[m].fn.call(p[m].context,n,r,i);break;default:if(!h)for(b=1,h=new Array(d-1);b<d;b++)h[b-1]=arguments[b];p[m].fn.apply(p[m].context,h)}}return!0};Hn.prototype.on=function(t,n,r){return Jw(this,t,n,r,!1)};Hn.prototype.once=function(t,n,r){return Jw(this,t,n,r,!0)};Hn.prototype.removeListener=function(t,n,r,i){var o=Jn?Jn+t:t;if(!this._events[o])return this;if(!n)return wf(this,o),this;var l=this._events[o];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&wf(this,o);else{for(var u=0,p=[],d=l.length;u<d;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&p.push(l[u]);p.length?this._events[o]=p.length===1?p[0]:p:wf(this,o)}return this};Hn.prototype.removeAllListeners=function(t){var n;return t?(n=Jn?Jn+t:t,this._events[n]&&wf(this,n)):(this._events=new ou,this._eventsCount=0),this};Hn.prototype.off=Hn.prototype.removeListener;Hn.prototype.addListener=Hn.prototype.on;Hn.prefixed=Jn;Hn.EventEmitter=Hn;lv=Hn;var ao={};ro(ao,"ConnectionType",()=>es);ro(ao,"PeerErrorType",()=>Vt);ro(ao,"BaseConnectionErrorType",()=>o0);ro(ao,"DataConnectionErrorType",()=>cv);ro(ao,"SerializationType",()=>xp);ro(ao,"SocketEventType",()=>Ji);ro(ao,"ServerMessageType",()=>Bn);var es=(function(e){return e.Data="data",e.Media="media",e})({}),Vt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),o0=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),cv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),xp=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Ji=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Bn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const eO="1.5.5";class gI extends lv.EventEmitter{constructor(t,n,r,i,o,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+o}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+eO),this._disconnected=!1,this._socket.onmessage=i=>{let o;try{o=JSON.parse(i.data),we.log("Server message received:",o)}catch{we.log("Invalid server message",i.data);return}this.emit(Ji.Message,o)},this._socket.onclose=i=>{this._disconnected||(we.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Ji.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),we.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){we.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Bn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Ji.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class tO{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===es.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},o=n.createDataChannel(r.label,i);r._initializeDataChannel(o),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){we.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,o=this.connection.provider;we.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(we.log(`Received ICE candidates for ${n}:`,l.candidate),o.socket.send({type:Bn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":we.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(o0.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":we.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(o0.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":we.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},we.log("Listening for data channel"),t.ondatachannel=l=>{we.log("Received data channel");const u=l.channel;o.getConnection(n,r)._initializeDataChannel(u)},we.log("Listening for remote stream"),t.ontrack=l=>{we.log("Received remote stream");const u=l.streams[0],p=o.getConnection(n,r);if(p.type===es.Media){const d=p;this._addStreamToMediaConnection(u,d)}}}cleanup(){we.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);we.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),we.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===es.Data){const o=this.connection;i={...i,label:o.label,reliable:o.reliable,serialization:o.serialization}}n.socket.send({type:Bn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Vt.WebRTC,i),we.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Vt.WebRTC,r),we.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();we.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),we.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Bn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Vt.WebRTC,i),we.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Vt.WebRTC,r),we.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;we.log("Setting remote description",n);const o=this;try{await r.setRemoteDescription(n),we.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await o._makeAnswer()}catch(l){i.emitError(Vt.WebRTC,l),we.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){we.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),we.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Vt.WebRTC,n),we.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(we.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return we.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){we.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class nO extends lv.EventEmitter{emitError(t,n){we.error("Error:",n),this.emit("error",new yI(`${t}`,n))}}class yI extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class rO extends nO{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Mf extends rO{static#e=this.ID_PREFIX="mc_";get type(){return es.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Mf.ID_PREFIX+lr.randomToken(),this._negotiator=new tO(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){we.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Bn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Bn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:we.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){we.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class vI{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:o,key:l}=this._options,u=new URL(`${n}://${r}:${i}${o}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",eO),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){we.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==lr.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===lr.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw we.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class jf extends rO{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return es.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||jf.ID_PREFIX+Zw(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new tO(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{we.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(cv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Bn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Bn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:we.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class uv extends jf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>jf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return we.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class vg extends uv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new Qw,this.serialization=xp.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=yw(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=cI(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=vw(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);we.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class bI extends uv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=xp.None}}class SI extends uv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=lr.chunkedMTU){this.emitError(cv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=xp.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class dv extends nO{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:bI,json:SI,binary:vg,"binary-utf8":vg,default:vg},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:lr.CLOUD_HOST,port:lr.CLOUD_PORT,path:"/",key:dv.DEFAULT_KEY,token:lr.randomToken(),config:lr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==lr.CLOUD_HOST?this._options.secure=lr.isSecure():this._options.host==lr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&we.setLogFunction(this._options.logFunction),we.logLevel=this._options.debug||0,this._api=new vI(n),this._socket=this._createServerConnection(),!lr.supports.audioVideo&&!lr.supports.data){this._delayedAbort(Vt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!lr.validateId(r)){this._delayedAbort(Vt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Vt.ServerError,i))}_createServerConnection(){const t=new gI(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Ji.Message,n=>{this._handleMessage(n)}),t.on(Ji.Error,n=>{this._abort(Vt.SocketError,n)}),t.on(Ji.Disconnected,()=>{this.disconnected||(this.emitError(Vt.Network,"Lost connection to server."),this.disconnect())}),t.on(Ji.Close,()=>{this.disconnected||this._abort(Vt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case Bn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Bn.Error:this._abort(Vt.ServerError,r.msg);break;case Bn.IdTaken:this._abort(Vt.UnavailableID,`ID "${this.id}" is taken`);break;case Bn.InvalidKey:this._abort(Vt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Bn.Leave:we.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Bn.Expire:this.emitError(Vt.PeerUnavailable,`Could not connect to peer ${i}`);break;case Bn.Offer:{const o=r.connectionId;let l=this.getConnection(i,o);if(l&&(l.close(),we.warn(`Offer received for existing Connection ID:${o}`)),r.type===es.Media){const p=new Mf(i,this,{connectionId:o,_payload:r,metadata:r.metadata});l=p,this._addConnection(i,l),this.emit("call",p)}else if(r.type===es.Data){const p=new this._serializers[r.serialization](i,this,{connectionId:o,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=p,this._addConnection(i,l),this.emit("connection",p)}else{we.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(o);for(const p of u)l.handleMessage(p);break}default:{if(!r){we.warn(`You received a malformed message from ${i} of type ${n}`);return}const o=r.connectionId,l=this.getConnection(i,o);l&&l.peerConnection?l.handleMessage(t):o?this._storeMessage(o,t):we.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Vt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Vt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){we.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new Mf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){we.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){we.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(we.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;we.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)we.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)we.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Vt.ServerError,n))}}var RA=dv;class xI{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new RA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{w("MULTIPLAYER","Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{w("MULTIPLAYER","Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new RA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{w("MULTIPLAYER","Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{w("MULTIPLAYER","Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",o=>{console.error("Connection error:",o),this.emit("connection_error",{error:o.message}),r(o)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),w("MULTIPLAYER","P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),w("MULTIPLAYER","P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(w("MULTIPLAYER","Received P2P data:",t),t.type){case"STATE_UPDATE":w("MULTIPLAYER","[P2P GUEST] Received state update with animations:",{hasAnimations:t.animations&&t.animations.length>0,animationCount:t.animations?.length||0}),this.emit("state_update_received",{state:t.state,animations:t.animations||[]});break;case"GUEST_ACTION":this.actionProcessor?await this.actionProcessor.processGuestAction(t.action):console.error("ActionProcessor not set - cannot process guest action");break;case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}broadcastState(t,n=[]){if(!this.isHost){console.warn("Only host can broadcast state");return}if(this.connection&&this.isConnected)try{w("MULTIPLAYER","[P2P HOST] Broadcasting state - checking player2 hand:",{player2HandSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId}),this.connection.send({type:"STATE_UPDATE",state:t,animations:n,timestamp:Date.now()}),w("MULTIPLAYER","[P2P HOST] Broadcasted state update to guest",{hasAnimations:n.length>0,animationCount:n.length})}catch(r){console.error("Failed to broadcast state:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot broadcast state - no connection available")}sendActionToHost(t,n){if(this.isHost){console.warn("Host should not send actions to itself");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"GUEST_ACTION",action:{type:t,payload:n},timestamp:Date.now()}),w("MULTIPLAYER","[P2P GUEST] Sent action to host:",t)}catch(r){console.error("Failed to send action to host:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot send action - no connection to host")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(w("MULTIPLAYER","Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const Qn=new xI,l0=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},AI=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Drawing up to Hand Limit",draw:"Drawing up to Hand Limit",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,EI=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],CI=["deployment","action"],TI=e=>EI.includes(e),LA=e=>CI.includes(e),is=()=>{const[e,t]=E.useState(Ge.getState()),[n,r]=E.useState(Qn.getStatus());E.useEffect(()=>{Ge.setupP2PIntegration(Qn)},[]),E.useEffect(()=>Ge.subscribe(L=>{L.type!=="render_complete"&&t(Ge.getState())}),[]),E.useEffect(()=>Qn.subscribe(L=>{r(Qn.getStatus())}),[]);const i=E.useCallback(()=>Ge.isMyTurn(),[e.currentPlayer,e.gameMode]),o=E.useCallback(()=>Ge.getLocalPlayerId(),[e.gameMode]),l=E.useCallback(()=>Ge.getOpponentPlayerId(),[e.gameMode]),u=E.useCallback(()=>e.gameMode!=="local",[e.gameMode]),p=E.useCallback(()=>u()&&!i(),[u,i]),d=E.useCallback(()=>Ge.getLocalPlayerState(),[e.gameMode]),h=E.useCallback(()=>Ge.getOpponentPlayerState(),[e.gameMode]),m=E.useCallback(re=>Ge.isLocalPlayer(re),[e.gameMode]),y=E.useCallback(()=>Ge.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),b=E.useCallback(()=>{const re=Ge.getOpponentPlacedSections();return e.turnPhase==="placement"&&re.some(L=>L!==null)&&console.error("🔥 CRITICAL - getOpponentPlacedSections returning:",re,"from gameState:",e.opponentPlacedSections),re},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),x=E.useCallback((re,L)=>{Ge.updatePlayers(re,L)},[]),A=E.useCallback((re,L)=>{Ge.updatePlayerState(re,L)},[]),C=E.useCallback((re,L)=>{Ge.setPlayerStates(re,L)},[]),T=E.useCallback(re=>{Ge.setFirstPasserOfPreviousRound(re)},[]),O=E.useCallback(re=>{Ge.setFirstPlayerOverride(re)},[]),_=E.useCallback(re=>{Ge.setPassInfo(re)},[]),M=E.useCallback(re=>{Ge.updatePassInfo(re)},[]),D=E.useCallback((re,L,G)=>{Ge.addLogEntry(re,L,G)},[]),k=E.useCallback(()=>{Ge.reset()},[]),j=E.useCallback(re=>{Ge.setWinner(re)},[]),I=E.useCallback(async(re,L)=>await Ge.processAction(re,L),[]),U=E.useCallback(()=>Ge.isActionInProgress(),[]),Y=E.useCallback(()=>Ge.getActionQueueLength(),[]),V=E.useCallback(()=>{Ge.clearActionQueue()},[]),W=E.useCallback(()=>TI(e.turnPhase),[e.turnPhase]),ae=E.useCallback(()=>LA(e.turnPhase),[e.turnPhase]),ne=E.useCallback(async(re,L)=>{const G=e.turnPhase,oe=LA(G);return w("STATE_SYNC",`🔀 useGameState.routeAction: ${re} in phase ${G} (${oe?"sequential":"simultaneous"})`),oe?await I(re,L):(console.warn(`⚠️ Simultaneous phase action ${re} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${re} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:G,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,I]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:o,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:p,getLocalPlayerState:d,getOpponentPlayerState:h,isLocalPlayer:m,getLocalPlacedSections:y,getOpponentPlacedSections:b,updatePlayers:x,updatePlayerState:A,setPlayerStates:C,setFirstPasserOfPreviousRound:T,setFirstPlayerOverride:O,setPassInfo:_,updatePassInfo:M,addLogEntry:D,resetGame:k,setWinner:j,processAction:I,isActionInProgress:U,getActionQueueLength:Y,clearActionQueue:V,isSimultaneousPhase:W,isSequentialPhase:ae,routeAction:ne,gameStateManager:Ge,p2pManager:Qn}},$A=()=>{const e=["bridge","powerCell","droneControlHub"];return w("PLACEMENT",`🚢 Initialized ship placement: ${e.length} sections available`),w("PLACEMENT",`🎯 Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class au{constructor(){if(au.instance)return au.instance;au.instance=this,this.PRE_GAME_PHASES=["deckSelection","droneSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,w("PHASE_TRANSITIONS","🎮 GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){w("PHASE_TRANSITIONS","🔧 GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=sn.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const o=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;o&&l&&u&&(i.initialize(u,l,o,n,t),w("PHASE_TRANSITIONS","🔄 GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,w("PHASE_TRANSITIONS","🔧 GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){w("PHASE_TRANSITIONS",`🔔 GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="deckSelection"){if(this.gameStateManager.get("gameMode")==="guest"){w("PHASE_TRANSITIONS","🔒 Guest mode: Skipping game flow logic (waiting for host state)");return}w("PHASE_TRANSITIONS",`🚀 GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let r={};t==="deckSelection"&&(w("PHASE_TRANSITIONS","🎲 GameFlowManager initializing deck selection phase data"),r={...$A()}),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(r).length>0&&this.gameStateManager.setState(r,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(this.gameStateManager.get("gameMode")==="guest")return;if(w("PHASE_TRANSITIONS",`✅ GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const o=this.actionProcessor.applyPhaseCommitments(t);if(t==="deckSelection"){w("PHASE_TRANSITIONS","🎲 GameFlowManager: Initializing drone selection data for both players after deck selection");const u=this.gameStateManager.get("commitments")?.deckSelection;if(w("DRONE_SELECTION","Deck commitments:",{hasCommitments:!!u,player1HasDrones:!!u?.player1?.drones,player2HasDrones:!!u?.player2?.drones,player1DroneCount:u?.player1?.drones?.length,player2DroneCount:u?.player2?.drones?.length,player1Drones:u?.player1?.drones,player2Drones:u?.player2?.drones}),u){if(u.player1?.drones){const p=this.extractDronesFromDeck(u.player1.drones),d=PA(p,2);o.player1DroneSelectionTrio=d.droneSelectionTrio,o.player1DroneSelectionPool=d.droneSelectionPool,w("PHASE_TRANSITIONS",`🎲 Player1 deck has ${p.length} drones for selection`),w("DRONE_SELECTION","Created player1DroneSelectionTrio:",d.droneSelectionTrio.map(h=>h.name))}else console.warn("⚠️ No drones found in player1 deck commitment");if(u.player2?.drones){const p=this.extractDronesFromDeck(u.player2.drones),d=PA(p,2);o.player2DroneSelectionTrio=d.droneSelectionTrio,o.player2DroneSelectionPool=d.droneSelectionPool,w("PHASE_TRANSITIONS",`🎲 Player2 deck has ${p.length} drones for selection`),w("DRONE_SELECTION","Created player2DroneSelectionTrio:",d.droneSelectionTrio.map(h=>h.name))}else console.warn("⚠️ No drones found in player2 deck commitment");w("DRONE_SELECTION","stateUpdates keys:",Object.keys(o))}else console.error("❌ No deck commitments found - cannot initialize drone selection")}Object.keys(o).length>0&&(this.gameStateManager.setState(o,"COMMITMENT_APPLICATION",`${t}_completion`),w("PHASE_TRANSITIONS",`📋 GameFlowManager: Applied ${t} commitments to game state`))}const i=this.getNextPhase(t);i?this.isSequentialPhase(i)?(w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Handover to sequential phase '${i}'`),this.initiateSequentialPhase(i)):(w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Continuing with simultaneous phase '${i}'`),await this.transitionToPhase(i)):w("PHASE_TRANSITIONS","🎯 GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){t.gameMode==="guest"||n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(w("PHASE_TRANSITIONS",`🎯 GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(t.gameMode==="guest"||n!=="COMMITMENT_UPDATE"||!t.commitments)return;w("PHASE_TRANSITIONS","🔍 checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){w("PHASE_TRANSITIONS","🔍 Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){w("PHASE_TRANSITIONS","🔍 Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const o=i.player1?.completed&&i.player2?.completed;w("PHASE_TRANSITIONS","🔍 Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:o}),o&&(w("PHASE_TRANSITIONS",`🎯 GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.emit("bothPlayersComplete",{phase:r,commitments:i}),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){w("PHASE_TRANSITIONS",`✅ GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t,n){w("PHASE_TRANSITIONS",`🤖 GameFlowManager: Processing automatic phase '${t}' from '${n}'`),this.isProcessingAutomaticPhase=!0;let r=null;try{t==="gameInitializing"?r=await this.processGameInitializingPhase(n):t==="energyReset"?r=await this.processAutomaticEnergyResetPhase(n):t==="draw"?r=await this.processAutomaticDrawPhase(n):t==="determineFirstPlayer"?r=await this.processAutomaticFirstPlayerPhase(n):console.warn(`⚠️ No handler for automatic phase: ${t}`),r?(w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Transitioning from automatic phase '${t}' to '${r}'`),await this.transitionToPhase(r)):console.warn(`⚠️ No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(t){w("PHASE_TRANSITIONS","🃏 GameFlowManager: Processing automatic draw phase");try{const{performAutomaticDraw:n}=await Fr(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-BlPPt9t0.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error("❌ GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),w("PHASE_TRANSITIONS","✅ Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const o=this.getNextPhase("draw");return w("PHASE_TRANSITIONS","✅ Automatic draw completed, returning next phase:",o),o}catch(n){console.error("❌ Error during automatic draw phase:",n)}}async processAutomaticFirstPlayerPhase(t){w("PHASE_TRANSITIONS","🎯 GameFlowManager: Processing automatic first player determination phase");try{const n=await this.actionProcessor.processFirstPlayerDetermination();if(w("PHASE_TRANSITIONS","🎯 First player determination completed:",n),this.animationManager&&n.stateUpdates){const i=this.gameStateManager.getLocalPlayerId(),p={animationName:"PHASE_ANNOUNCEMENT",payload:{phaseText:n.stateUpdates.firstPlayerOfRound===i?"YOU ARE FIRST PLAYER":"OPPONENT IS FIRST PLAYER",phaseName:"firstPlayerResult",timestamp:Date.now()}};await this.animationManager.executeAnimations([p],"PHASE_ANNOUNCEMENT"),w("PHASE_TRANSITIONS","🎬 [FIRST PLAYER] Second announcement complete")}this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const r=this.getNextPhase("determineFirstPlayer");return w("PHASE_TRANSITIONS","✅ Automatic first player determination completed, returning next phase:",r),r}catch(n){console.error("❌ Error during automatic first player determination:",n)}}async processAutomaticEnergyResetPhase(t){w("PHASE_TRANSITIONS","⚡ GameFlowManager: Processing automatic energy reset phase");try{if(!this.gameStateManager){console.error("❌ GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await Fr(async()=>{const{default:A}=await Promise.resolve().then(()=>Fj);return{default:A}},void 0)).default.getInstance(this.gameStateManager),o=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},p=$e.readyDronesAndRestoreShields(n.player1,n.player2,u),d=$e.readyDronesAndRestoreShields(n.player2,n.player1,u),h={...p,energy:o.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?o.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:o.totals.deploymentBudget},m={...d,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget},y=this.roundNumber>=2?o.totals.shieldsPerTurn:0,b=this.roundNumber>=2?l.totals.shieldsPerTurn:0;await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:h,player2:m,shieldsToAllocate:y,opponentShieldsToAllocate:b}}),w("PHASE_TRANSITIONS",`✅ Energy reset complete - Player 1: ${h.energy} energy, Player 2: ${m.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const x=this.getNextPhase("energyReset");return w("PHASE_TRANSITIONS","✅ Automatic energy reset completed, returning next phase:",x),x}catch(n){console.error("❌ Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(t){w("PHASE_TRANSITIONS","🎯 GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(r=>setTimeout(r,100));const n=this.getNextPhase("gameInitializing");return w("PHASE_TRANSITIONS","✅ Game initialization completed, returning next phase:",n),n}catch(n){throw console.error("❌ Error during game initialization:",n),n}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn("⚠️ GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const o=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return o>u}anyPlayerHasShieldsToAllocate(t){return t.roundNumber<2?!1:t.shieldsToAllocate>0||t.opponentShieldsToAllocate>0}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const o=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return o>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){w("PHASE_TRANSITIONS",`🎯 GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(w("PHASE_TRANSITIONS",`🔄 Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn("⚠️ ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1,this.gameStateManager.setState({roundNumber:1,turn:1}))),w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"&&(w("PHASE_TRANSITIONS","🚢 GameFlowManager: Initializing placement phase data"),r=$A()),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t,resetPassInfo:!0}}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){w("PHASE_TRANSITIONS",`🤖 GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t,n);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Starting round ${this.roundNumber}`),this.gameStateManager.setState({roundNumber:this.roundNumber,turn:this.roundNumber},"ROUND_START","gameFlowManagerMetadata");const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn("⚠️ No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){w("PHASE_TRANSITIONS",`🏆 GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){w("PHASE_TRANSITIONS","🔄 GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}extractDronesFromDeck(t){if(!t||!Array.isArray(t))return console.warn("⚠️ Invalid drone names provided to extractDronesFromDeck"),[];const n=t.map(r=>{const i=Gn.find(o=>o.name===r);return i||console.warn(`⚠️ Drone "${r}" not found in collection`),i}).filter(Boolean);return w("PHASE_TRANSITIONS",`📦 Extracted ${n.length} drones from deck: ${n.map(r=>r.name).join(", ")}`),n}}const If=new au;function BA(){const{gameStateManager:e}=is(),[t,n]=E.useState(!1);E.useEffect(()=>{w("PHASE_TRANSITIONS","🏠 MenuScreen mounted - ensuring clean state"),sn.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),w("PHASE_TRANSITIONS","✅ MenuScreen: State cleaned up")},[e]);const r=()=>{w("PHASE_TRANSITIONS","🎮 Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{w("PHASE_TRANSITIONS","🎮 Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},o=()=>{n(!0)},l=()=>{n(!1)};return g.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box",position:"relative"},children:g.jsx("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:t?g.jsxs(g.Fragment,{children:[g.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),g.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[g.jsxs("button",{onClick:r,className:"btn-continue",style:{minWidth:"200px",fontSize:"1.1rem",padding:"16px 30px"},children:["SINGLE PLAYER",g.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),g.jsxs("button",{onClick:i,className:"btn-continue",style:{minWidth:"200px",fontSize:"1.1rem",padding:"16px 30px"},children:["MULTIPLAYER",g.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),g.jsx("button",{onClick:l,className:"btn-cancel",children:"BACK"})]}):g.jsxs(g.Fragment,{children:[g.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"EREMOS"}),g.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"the wilderness left when civilization departs"}),g.jsx("button",{onClick:o,className:"btn-continue",children:"START GAME"})]})})})}const UA=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}],PI=({onGameStart:e,onBack:t})=>{const[n,r]=E.useState("menu"),[i,o]=E.useState(""),[l,u]=E.useState(""),[p,d]=E.useState("disconnected"),[h,m]=E.useState(""),[y,b]=E.useState(!1),[x,A]=E.useState(!1);E.useEffect(()=>Qn.subscribe(I=>{switch(w("MULTIPLAYER","P2P Event:",I),I.type){case"room_created":o(I.data.roomCode),r("waiting"),d("waiting"),b(!1);break;case"joined_room":o(I.data.roomCode),r("connected"),d("connected"),b(!1);break;case"connected":r("connected"),d("connected"),b(!1),m("");break;case"disconnected":d("disconnected"),r("menu"),o(""),m("");break;case"connection_error":m(I.data.error),b(!1),r("menu");break}}),[]);const C=async()=>{b(!0),m(""),r("host");try{const j=await Qn.hostGame();w("MULTIPLAYER","Room created with code:",j)}catch(j){console.error("Failed to host game:",j),m(j.message),b(!1),r("menu")}},T=async()=>{if(l.length!==6){m("Please enter a 6-digit room code");return}b(!0),m(""),r("join");try{await Qn.joinGame(l)}catch(j){console.error("Failed to join game:",j),m(j.message),b(!1),r("menu")}},O=async()=>{try{await navigator.clipboard.writeText(i),A(!0),setTimeout(()=>A(!1),2e3)}catch(j){console.error("Failed to copy room code:",j)}},_=()=>{p==="connected"&&e()},M=()=>{Qn.disconnect(),r("menu"),o(""),u(""),m("")},D=()=>{p!=="disconnected"&&M(),t()},k=()=>{switch(p){case"waiting":return g.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[g.jsx(ll,{className:"w-4 h-4 animate-spin"}),g.jsx("span",{children:"Waiting for opponent..."})]});case"connected":return g.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[g.jsx(yA,{className:"w-4 h-4"}),g.jsx("span",{children:"Connected to opponent"})]});case"disconnected":default:return g.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[g.jsx(HM,{className:"w-4 h-4"}),g.jsx("span",{children:"Not connected"})]})}};return w("MULTIPLAYER","🎮 MultiplayerLobby rendering - mode:",n),g.jsx("div",{style:{maxWidth:"500px",width:"100%",margin:"0 auto"},children:g.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20",style:{backgroundColor:"rgba(15, 23, 42, 0.95)",borderColor:"#a855f7",boxShadow:"0 20px 50px rgba(168, 85, 247, 0.2)"},children:[g.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[g.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[g.jsx(zM,{className:"w-8 h-8 text-purple-400"}),"Multiplayer Lobby"]}),g.jsx("div",{style:{marginBottom:"1rem"},children:k()})]}),h&&g.jsx("div",{style:{backgroundColor:"rgba(127, 29, 29, 0.5)",border:"1px solid #ef4444",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"1rem"},children:g.jsx("p",{style:{color:"#fca5a5",fontSize:"0.875rem"},children:h})}),n==="menu"&&g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[g.jsxs("button",{onClick:C,disabled:y,className:"btn-continue",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?g.jsx(ll,{className:"w-5 h-5 animate-spin"}):g.jsx(xM,{className:"w-5 h-5"}),"Host Game"]}),g.jsx("div",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.875rem"},children:"or"}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[g.jsx("input",{type:"text",placeholder:"Enter 6-digit room code",value:l,onChange:j=>u(j.target.value.replace(/[^0-9]/g,"").slice(0,6)),style:{width:"100%",backgroundColor:"#1e293b",border:"1px solid #4b5563",borderRadius:"0.5rem",padding:"0.75rem 1rem",color:"#ffffff",textAlign:"center",fontSize:"1.125rem",letterSpacing:"0.1em"},maxLength:6}),g.jsxs("button",{onClick:T,disabled:y||l.length!==6,className:"btn-confirm",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?g.jsx(ll,{className:"w-5 h-5 animate-spin"}):g.jsx(yA,{className:"w-5 h-5"}),"Join Game"]})]})]}),n==="waiting"&&g.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[g.jsxs("div",{style:{backgroundColor:"#1e293b",borderRadius:"0.5rem",padding:"1rem"},children:[g.jsx("p",{style:{color:"#d1d5db",marginBottom:"0.5rem"},children:"Share this room code:"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[g.jsx("code",{style:{fontSize:"1.5rem",fontFamily:"monospace",color:"#ffffff",backgroundColor:"#334155",padding:"0.5rem 1rem",borderRadius:"0.25rem"},children:i}),g.jsx("button",{onClick:O,style:{backgroundColor:"#9333ea",color:"#ffffff",padding:"0.5rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:j=>j.target.style.backgroundColor="#7c3aed",onMouseOut:j=>j.target.style.backgroundColor="#9333ea",children:x?g.jsx(dM,{className:"w-5 h-5"}):g.jsx(tv,{className:"w-5 h-5"})})]})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#facc15"},children:[g.jsx(ll,{className:"w-5 h-5 animate-spin"}),g.jsx("span",{children:"Waiting for opponent to join..."})]})]}),n==="connected"&&g.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[g.jsxs("div",{style:{backgroundColor:"rgba(20, 83, 45, 0.5)",border:"1px solid #22c55e",borderRadius:"0.5rem",padding:"1rem"},children:[g.jsx("p",{style:{color:"#86efac"},children:"✅ Connected to opponent!"}),i&&g.jsxs("p",{style:{color:"#9ca3af",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Room: ",i]})]}),g.jsx("button",{onClick:_,className:"btn-continue",style:{width:"100%"},children:"Start Game"})]}),(n==="host"||n==="join")&&y&&g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx(ll,{className:"w-8 h-8 animate-spin text-purple-400",style:{margin:"0 auto 1rem auto",color:"#c084fc"}}),g.jsx("p",{style:{color:"#d1d5db"},children:n==="host"?"Creating room...":"Joining room..."})]}),g.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #374151"},children:g.jsx("button",{onClick:D,className:"btn-cancel",style:{width:"100%"},children:p!=="disconnected"?"Disconnect & Back":"Back"})})]})})};function wI(){const{gameState:e,gameStateManager:t}=is(),[n,r]=E.useState(null),i=e.gameMode==="local",o=e.gameMode!=="local";E.useEffect(()=>{o&&(w("PHASE_TRANSITIONS","🔌 Setting up P2P integration for multiplayer"),t.setupP2PIntegration(Qn))},[o]);const l=()=>{w("PHASE_TRANSITIONS","🔙 Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=h=>{w("PHASE_TRANSITIONS","🤖 Selected AI:",h.name),r(h)},p=()=>{if(i&&n){if(w("PHASE_TRANSITIONS","🎮 Starting single player game with AI:",n.name),!n.dronePool||!Array.isArray(n.dronePool)){const y=`Cannot start game: AI '${n.name}' has invalid dronePool configuration.`;console.error("❌",y),alert(y);return}if(n.dronePool.length<5){const y=`Cannot start game: AI '${n.name}' has only ${n.dronePool.length} drones. Minimum 5 drones required.`;console.error("❌",y),alert(y);return}if(n.dronePool.length>10){const y=`Cannot start game: AI '${n.name}' has ${n.dronePool.length} drones. Maximum 10 drones allowed.`;console.error("❌",y),alert(y);return}w("PHASE_TRANSITIONS",`✅ AI drone pool validated: ${n.dronePool.length} drones`);const h=Gn.filter(y=>n.dronePool.includes(y.name)),m={};h.forEach(y=>{m[y.name]=0}),la.initialize(UA,Gn,n,t.actionProcessor,t),w("PHASE_TRANSITIONS","🤖 AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:h,deployedDroneCounts:m,aiPersonality:n})}},d=()=>{w("PHASE_TRANSITIONS","🎮 Starting multiplayer game after connection");const h=Qn.isHost,m=h?"host":"guest";w("PHASE_TRANSITIONS",`🎮 Multiplayer mode: ${m}`),t.startGame(m,{name:h?"Host Player":"Guest Player"},{name:h?"Guest Player":"Host Player"})};return g.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box",position:"relative"},children:g.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[g.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&g.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:UA.map(h=>g.jsxs("div",{onClick:()=>u(h),style:{padding:"20px",backgroundColor:n?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:m=>{n?.name!==h.name&&(m.target.style.backgroundColor="#333333",m.target.style.borderColor="#666666")},onMouseOut:m=>{n?.name!==h.name&&(m.target.style.backgroundColor="#2a2a2a",m.target.style.borderColor="#444444")},children:[g.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),g.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),g.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),o&&g.jsx(PI,{onGameStart:d,onBack:l}),i&&g.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[g.jsx("button",{onClick:l,className:"btn-cancel",children:"BACK TO MENU"}),g.jsx("button",{onClick:p,disabled:!n,className:"btn-continue",children:"START GAME"})]})]})})}const zA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>g.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:g.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:g.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&g.jsx(n,{size:12,className:r}),g.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),OI=({text:e,className:t})=>{const n=E.useRef(null),r=E.useRef(null);return E.useEffect(()=>{const i=n.current,o=r.current;if(!i||!o||i.clientHeight===0)return;const l=()=>{let u,p;t.includes("font-orbitron")?(u=8,p=16):(u=8,p=12);let d=p;for(o.style.fontSize=d+"px";(o.scrollWidth>i.clientWidth||o.scrollHeight>i.clientHeight)&&d>u;)d-=.5,o.style.fontSize=d+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),g.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:g.jsx("span",{ref:r,className:t,children:e})})},gl=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:o=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:p,scale:d=1})=>{let h=e.limit;l.forEach(L=>{L.mod.stat==="limit"&&(h+=L.mod.value)});const m=i>=h,y=n&&(!m||o),b=E.useMemo(()=>{const L={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(G=>{G.mod.stat==="cost"?L.cost=Math.max(0,L.cost+G.mod.value):L.hasOwnProperty(G.mod.stat)&&(L[G.mod.stat]+=G.mod.value)}),L},[e,l]),x=b.cost,A=b.attack>e.attack,C=b.attack<e.attack,T=A?"text-green-400":C?"text-red-400":"text-white",O=b.speed>e.speed,_=b.speed<e.speed,M=O?"text-green-400":_?"text-red-400":"text-white",D=b.cost<e.class,k=b.cost>e.class,j=D?"text-green-400":k?"text-red-400":"text-white",U=h>e.limit?"text-green-400":"text-white",{name:Y,image:V,hull:W,shields:ae,abilities:ne}=e,re=d!==1?{transform:`scale(${d})`,transformOrigin:"center center"}:{};return g.jsx("div",{onClick:y?()=>t(e):void 0,className:`
        w-[225px] h-[275px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${y?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${y?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...re},children:g.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[g.jsx("img",{src:V,alt:Y,className:"absolute inset-0 w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-black/40"}),g.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[g.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:g.jsx(OI,{text:Y,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),g.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[g.jsx("div",{className:"w-10 h-12",children:g.jsx(zA,{value:b.attack,isFlat:!1,icon:LM,iconColor:"text-red-400",textColor:T})}),g.jsxs("div",{className:"flex flex-col items-center gap-1",children:[g.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:ae>0&&Array.from({length:ae}).map((L,G)=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:g.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${G}`))}),g.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:W}).map((L,G)=>g.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${G}`))})]}),g.jsx("div",{className:"w-12 h-12",children:g.jsx(zA,{value:b.speed,isFlat:!0,icon:Qy,iconColor:"text-blue-400",textColor:M})})]}),g.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-48 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:ne&&ne.length>0?ne.map((L,G)=>g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm text-purple-400 tracking-wider font-bold",children:L.name}),g.jsx("p",{className:"text-gray-400 text-sm leading-tight font-exo",children:L.description})]},G)):g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-sm text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),g.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),g.jsxs("div",{className:"flex items-center",children:[g.jsx(kf,{size:14,className:"text-yellow-300"}),g.jsx("span",{className:`font-bold text-base ml-1 ${j}`,children:x})]})]}),e.upgradeSlots>0&&g.jsxs("button",{onClick:L=>{L.stopPropagation(),p&&p(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[g.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),g.jsx("div",{className:"flex items-center",children:g.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),g.jsx("div",{className:"flex items-center",children:g.jsxs("span",{className:`font-bold text-base ${m?"text-pink-500":U}`,children:[i,"/",h]})})]})]})]})]})})},fv=({phase:e,localPlayerStatus:t})=>g.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:g.jsxs("div",{className:"text-center p-8",children:[g.jsx(ll,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),g.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),g.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&g.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[g.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"✅ Your Selection Complete"}),g.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function _I(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i}=is(),{turnPhase:o}=e;i();const l=t(),u=`${l}DroneSelectionTrio`,p=`${l}DroneSelectionPool`,d=e[u],h=e[p];w("DRONE_SELECTION","DroneSelectionScreen render:",{localPlayerId:l,propertyNameTrio:u,propertyNamePool:p,hasTrio:!!d,hasPool:!!h,trioLength:d?.length,poolLength:h?.length,trioData:d?.map(j=>j.name),player1Trio:e.player1DroneSelectionTrio?.map(j=>j.name),player2Trio:e.player2DroneSelectionTrio?.map(j=>j.name),gameMode:e.gameMode});const[m,y]=E.useState([]),[b,x]=E.useState(d||[]),[A,C]=E.useState(h||[]),T=j=>{if(o!=="droneSelection")return;w("DRONE_SELECTION","🔧 handleChooseDroneForSelection called with:",j.name);const I=[...m,j];if(y(I),I.length<5){const U=Wj(A,2);x(U.droneSelectionTrio),C(U.droneSelectionPool),w("DRONE_SELECTION","🔧 Advanced to next pair locally, selected:",I.length)}else w("DRONE_SELECTION","🔧 All 5 drones selected, waiting for Continue button click")},O=()=>{if(o!=="droneSelection")return;w("DRONE_SELECTION","🔧 handleContinueDroneSelection called with:",m.length);const j=t(),I={playerId:j,phase:"droneSelection",actionData:{drones:m}};if(w("DRONE_SELECTION","Submitting commitment:",{gameMode:e.gameMode,playerId:j,droneCount:m.length,commitmentsBefore:e.commitments?.droneSelection}),e.gameMode==="guest"){w("DRONE_SELECTION","[GUEST] Sending drone selection commitment to host"),Qn.sendActionToHost("commitment",I);return}Ge.actionProcessor.queueAction({type:"commitment",payload:I}).then(U=>{if(!U.success){console.error("❌ Drone selection submission failed:",U.error);return}w("DRONE_SELECTION","✅ Drone selection submitted successfully")}).catch(U=>{console.error("❌ Drone selection submission error:",U)}),w("DRONE_SELECTION","✅ Drone selection submitted to PhaseManager")};E.useEffect(()=>{d&&d.length>0&&b.length===0&&(x(d),w("DRONE_SELECTION","🔄 Updated currentTrio from gameState after data arrival")),h&&h.length>0&&A.length===0&&(C(h),w("DRONE_SELECTION","🔄 Updated remainingPool from gameState after data arrival"))},[d,h]),E.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const _=n(),M=e.commitments?.droneSelection?.[l]?.completed||!1,D=e.commitments?.droneSelection?.[_]?.completed||!1;if(w("DRONE_SELECTION","Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:l,opponentPlayerId:_,localPlayerCompleted:M,opponentCompleted:D,fullCommitmentsObject:e.commitments?.droneSelection,turnPhase:o,willShowWaiting:r()&&M&&!D}),r()&&M&&!D){const j=e.commitments?.droneSelection?.[l]?.drones||m,I=j.length>0?j.map(U=>U.name).join(", "):"Selection complete";return g.jsx(fv,{phase:"droneSelection",localPlayerStatus:`You selected: ${I}`})}const k=m.length===5;return g.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[g.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),g.jsxs("div",{className:"flex flex-col items-center w-full p-4 relative z-10",children:[g.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Select Your Active Drone Pool"}),g.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Choosing 5 drones from your deck of 10"}),g.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((j,I)=>g.jsx("div",{className:`w-3 h-3 rounded-full ${I<m.length?"bg-green-500":"bg-gray-600"}`},I)),g.jsxs("span",{className:"ml-2 text-gray-400",children:[m.length,"/5 drones selected"]})]}),k?g.jsx("div",{className:"text-center mb-8",children:g.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[g.jsx("p",{className:"text-green-400 font-bold mb-2",children:"✅ Selection Complete!"}),g.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected for your Active Pool. Ready to proceed to ship placement."})]})}):g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",m.length+1," of 5: Select one drone from the two options below for your Active Drone Pool."]}),b&&b.length>0&&g.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:b.map((j,I)=>g.jsx(gl,{drone:j,onClick:()=>T(j),isSelectable:!0,deployedCount:0},j.name||I))})]}),g.jsx("button",{onClick:O,disabled:!k,className:"btn-continue mb-8",children:k?"Continue to Ship Placement":`Continue (${m.length}/5)`}),g.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[g.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",m.length,"/5)",k&&g.jsx("span",{className:"text-green-400 ml-2",children:"✓"})]}),m.length>0?g.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:m.map((j,I)=>g.jsx(gl,{drone:j,isSelectable:!1,deployedCount:0},I))}):g.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function aO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=aO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ft(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=aO(e))&&(r&&(r+=" "),r+=t);return r}var bg={},Sg={},GA;function NI(){return GA||(GA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Sg)),Sg}var xg={},HA;function iO(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(xg)),xg}var Ag={},YA;function sO(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Ag)),Ag}var Eg={},qA;function pv(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let o=0,l="",u="",p=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const d=n[o];u?d==="\\"&&o+1<i?(o++,l+=n[o]):d===u?u="":l+=d:p?d==='"'||d==="'"?u=d:d==="]"?(p=!1,r.push(l),l=""):l+=d:d==="["?(p=!0,l&&(r.push(l),l="")):d==="."?l&&(r.push(l),l=""):l+=d,o++}return l&&r.push(l),r}e.toPath=t})(Eg)),Eg}var FA;function hv(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NI(),n=iO(),r=sO(),i=pv();function o(u,p,d){if(u==null)return d;switch(typeof p){case"string":{if(t.isUnsafeProperty(p))return d;const h=u[p];return h===void 0?n.isDeepKey(p)?o(u,i.toPath(p),d):d:h}case"number":case"symbol":{typeof p=="number"&&(p=r.toKey(p));const h=u[p];return h===void 0?d:h}default:{if(Array.isArray(p))return l(u,p,d);if(Object.is(p?.valueOf(),-0)?p="-0":p=String(p),t.isUnsafeProperty(p))return d;const h=u[p];return h===void 0?d:h}}}function l(u,p,d){if(p.length===0)return d;let h=u;for(let m=0;m<p.length;m++){if(h==null||t.isUnsafeProperty(p[m]))return d;h=h[p[m]]}return h===void 0?d:h}e.get=o})(bg)),bg}var Cg,VA;function DI(){return VA||(VA=1,Cg=hv().get),Cg}var kI=DI();const Qs=da(kI);var Tg={exports:{}},gt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KA;function MI(){if(KA)return gt;KA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function x(A){if(typeof A=="object"&&A!==null){var C=A.$$typeof;switch(C){case e:switch(A=A.type,A){case n:case i:case r:case p:case d:case y:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case h:return A;case o:return A;default:return C}}case t:return C}}}return gt.ContextConsumer=o,gt.ContextProvider=l,gt.Element=e,gt.ForwardRef=u,gt.Fragment=n,gt.Lazy=m,gt.Memo=h,gt.Portal=t,gt.Profiler=i,gt.StrictMode=r,gt.Suspense=p,gt.SuspenseList=d,gt.isContextConsumer=function(A){return x(A)===o},gt.isContextProvider=function(A){return x(A)===l},gt.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},gt.isForwardRef=function(A){return x(A)===u},gt.isFragment=function(A){return x(A)===n},gt.isLazy=function(A){return x(A)===m},gt.isMemo=function(A){return x(A)===h},gt.isPortal=function(A){return x(A)===t},gt.isProfiler=function(A){return x(A)===i},gt.isStrictMode=function(A){return x(A)===r},gt.isSuspense=function(A){return x(A)===p},gt.isSuspenseList=function(A){return x(A)===d},gt.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===p||A===d||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===h||A.$$typeof===l||A.$$typeof===o||A.$$typeof===u||A.$$typeof===b||A.getModuleId!==void 0)},gt.typeOf=x,gt}var WA;function jI(){return WA||(WA=1,Tg.exports=MI()),Tg.exports}var II=jI(),yn=e=>e===0?0:e>0?1:-1,Cr=e=>typeof e=="number"&&e!=+e,Gs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,De=e=>(typeof e=="number"||e instanceof Number)&&!Cr(e),_a=e=>De(e)||typeof e=="string",RI=0,lu=e=>{var t=++RI;return"".concat(e||"").concat(t)},zn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(t)&&typeof t!="string")return r;var o;if(Gs(t)){if(n==null)return r;var l=t.indexOf("%");o=n*parseFloat(t.slice(0,l))/100}else o=+t;return Cr(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},oO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Dn(e,t,n){return De(e)&&De(t)?e+n*(t-e):t}function LI(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Qs(r,t))===n)}var vn=e=>e===null||typeof e>"u",vu=e=>vn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),$I=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function mv(e){if(typeof e!="string")return!1;var t=$I;return t.includes(e)}var BI=["viewBox","children"],XA=["points","pathLength"],Pg={svg:BI,polygon:XA,polyline:XA},UI=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{mv(i)&&(r[i]=(o=>n[i](n,o)))}),r},zI=(e,t,n)=>r=>(e(t,n,r),null),bu=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var o=e[i];mv(i)&&typeof o=="function"&&(r||(r={}),r[i]=zI(o,t,n))}),r},GI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function lO(e){if(typeof e!="string")return!1;var t=GI;return t.includes(e)}function io(e){var t=Object.entries(e).filter(n=>{var[r]=n;return lO(r)});return Object.fromEntries(t)}var QA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",ZA=null,wg=null,cO=e=>{if(e===ZA&&Array.isArray(wg))return wg;var t=[];return E.Children.forEach(e,n=>{vn(n)||(II.isFragment(n)?t=t.concat(cO(n.props.children)):t.push(n))}),wg=t,ZA=e,t};function gv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>QA(i)):r=[QA(t)],cO(e).forEach(i=>{var o=Qs(i,"type.displayName")||Qs(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var HI=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var o=(i=r&&Pg?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&o.includes(t)||lO(t)),p=!!n&&mv(t);return l||u||p},Kt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var l;HI((l=r)===null||l===void 0?void 0:l[o],o,t,n)&&(i[o]=r[o])}),i},YI=["children","width","height","viewBox","className","style","title","desc"];function c0(){return c0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c0.apply(null,arguments)}function qI(e,t){if(e==null)return{};var n,r,i=FI(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function FI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var yv=E.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:o,className:l,style:u,title:p,desc:d}=e,h=qI(e,YI),m=o||{width:r,height:i,x:0,y:0},y=ft("recharts-surface",l);return E.createElement("svg",c0({},Kt(h,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),E.createElement("title",null,p),E.createElement("desc",null,d),n)}),VI=["children","className"];function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u0.apply(null,arguments)}function KI(e,t){if(e==null)return{};var n,r,i=WI(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var fr=E.forwardRef((e,t)=>{var{children:n,className:r}=e,i=KI(e,VI),o=ft("recharts-layer",r);return E.createElement("g",u0({className:o},Kt(i,!0),{ref:t}),n)}),uO=VP(),dO=E.createContext(null),XI=()=>E.useContext(dO);function At(e){return function(){return e}}const fO=Math.cos,Rf=Math.sin,fa=Math.sqrt,Lf=Math.PI,Ap=2*Lf,d0=Math.PI,f0=2*d0,Bs=1e-6,QI=f0-Bs;function pO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ZI(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return pO;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class JI{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?pO:ZI(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,u=this._y1,p=r-t,d=i-n,h=l-t,m=u-n,y=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Bs)if(!(Math.abs(m*p-d*h)>Bs)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let b=r-l,x=i-u,A=p*p+d*d,C=b*b+x*x,T=Math.sqrt(A),O=Math.sqrt(y),_=o*Math.tan((d0-Math.acos((A+y-C)/(2*T*O)))/2),M=_/O,D=_/T;Math.abs(M-1)>Bs&&this._append`L${t+M*h},${n+M*m}`,this._append`A${o},${o},0,0,${+(m*b>h*x)},${this._x1=t+D*p},${this._y1=n+D*d}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),p=r*Math.sin(i),d=t+u,h=n+p,m=1^l,y=l?i-o:o-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>Bs||Math.abs(this._y1-h)>Bs)&&this._append`L${d},${h}`,r&&(y<0&&(y=y%f0+f0),y>QI?this._append`A${r},${r},0,1,${m},${t-u},${n-p}A${r},${r},0,1,${m},${this._x1=d},${this._y1=h}`:y>Bs&&this._append`A${r},${r},0,${+(y>=d0)},${m},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function vv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new JI(t)}function bv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hO(e){this._context=e}hO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ep(e){return new hO(e)}function mO(e){return e[0]}function gO(e){return e[1]}function yO(e,t){var n=At(!0),r=null,i=Ep,o=null,l=vv(u);e=typeof e=="function"?e:e===void 0?mO:At(e),t=typeof t=="function"?t:t===void 0?gO:At(t);function u(p){var d,h=(p=bv(p)).length,m,y=!1,b;for(r==null&&(o=i(b=l())),d=0;d<=h;++d)!(d<h&&n(m=p[d],d,p))===y&&((y=!y)?o.lineStart():o.lineEnd()),y&&o.point(+e(m,d,p),+t(m,d,p));if(b)return o=null,b+""||null}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:At(+p),u):e},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:At(+p),u):t},u.defined=function(p){return arguments.length?(n=typeof p=="function"?p:At(!!p),u):n},u.curve=function(p){return arguments.length?(i=p,r!=null&&(o=i(r)),u):i},u.context=function(p){return arguments.length?(p==null?r=o=null:o=i(r=p),u):r},u}function af(e,t,n){var r=null,i=At(!0),o=null,l=Ep,u=null,p=vv(d);e=typeof e=="function"?e:e===void 0?mO:At(+e),t=typeof t=="function"?t:At(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?gO:At(+n);function d(m){var y,b,x,A=(m=bv(m)).length,C,T=!1,O,_=new Array(A),M=new Array(A);for(o==null&&(u=l(O=p())),y=0;y<=A;++y){if(!(y<A&&i(C=m[y],y,m))===T)if(T=!T)b=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),x=y-1;x>=b;--x)u.point(_[x],M[x]);u.lineEnd(),u.areaEnd()}T&&(_[y]=+e(C,y,m),M[y]=+t(C,y,m),u.point(r?+r(C,y,m):_[y],n?+n(C,y,m):M[y]))}if(O)return u=null,O+""||null}function h(){return yO().defined(i).curve(l).context(o)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:At(+m),r=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:At(+m),d):e},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:At(+m),d):r},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:At(+m),n=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:At(+m),d):t},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:At(+m),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(r).y(t)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:At(!!m),d):i},d.curve=function(m){return arguments.length?(l=m,o!=null&&(u=l(o)),d):l},d.context=function(m){return arguments.length?(m==null?o=u=null:u=l(o=m),d):o},d}class vO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function eR(e){return new vO(e,!0)}function tR(e){return new vO(e,!1)}const Sv={draw(e,t){const n=fa(t/Lf);e.moveTo(n,0),e.arc(0,0,n,0,Ap)}},nR={draw(e,t){const n=fa(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},bO=fa(1/3),rR=bO*2,aR={draw(e,t){const n=fa(t/rR),r=n*bO;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},iR={draw(e,t){const n=fa(t),r=-n/2;e.rect(r,r,n,n)}},sR=.8908130915292852,SO=Rf(Lf/10)/Rf(7*Lf/10),oR=Rf(Ap/10)*SO,lR=-fO(Ap/10)*SO,cR={draw(e,t){const n=fa(t*sR),r=oR*n,i=lR*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const l=Ap*o/5,u=fO(l),p=Rf(l);e.lineTo(p*n,-u*n),e.lineTo(u*r-p*i,p*r+u*i)}e.closePath()}},Og=fa(3),uR={draw(e,t){const n=-fa(t/(Og*3));e.moveTo(0,n*2),e.lineTo(-Og*n,-n),e.lineTo(Og*n,-n),e.closePath()}},Gr=-.5,Hr=fa(3)/2,p0=1/fa(12),dR=(p0/2+1)*3,fR={draw(e,t){const n=fa(t/dR),r=n/2,i=n*p0,o=r,l=n*p0+n,u=-o,p=l;e.moveTo(r,i),e.lineTo(o,l),e.lineTo(u,p),e.lineTo(Gr*r-Hr*i,Hr*r+Gr*i),e.lineTo(Gr*o-Hr*l,Hr*o+Gr*l),e.lineTo(Gr*u-Hr*p,Hr*u+Gr*p),e.lineTo(Gr*r+Hr*i,Gr*i-Hr*r),e.lineTo(Gr*o+Hr*l,Gr*l-Hr*o),e.lineTo(Gr*u+Hr*p,Gr*p-Hr*u),e.closePath()}};function pR(e,t){let n=null,r=vv(i);e=typeof e=="function"?e:At(e||Sv),t=typeof t=="function"?t:At(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:At(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:At(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function $f(){}function Bf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function xO(e){this._context=e}xO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hR(e){return new xO(e)}function AO(e){this._context=e}AO.prototype={areaStart:$f,areaEnd:$f,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Bf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mR(e){return new AO(e)}function EO(e){this._context=e}EO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Bf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gR(e){return new EO(e)}function CO(e){this._context=e}CO.prototype={areaStart:$f,areaEnd:$f,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yR(e){return new CO(e)}function JA(e){return e<0?-1:1}function eE(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(o*i+l*r)/(r+i);return(JA(o)+JA(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(u))||0}function tE(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function _g(e,t,n){var r=e._x0,i=e._y0,o=e._x1,l=e._y1,u=(o-r)/3;e._context.bezierCurveTo(r+u,i+u*t,o-u,l-u*n,o,l)}function Uf(e){this._context=e}Uf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_g(this,this._t0,tE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_g(this,tE(this,n=eE(this,e,t)),n);break;default:_g(this,this._t0,n=eE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function TO(e){this._context=new PO(e)}(TO.prototype=Object.create(Uf.prototype)).point=function(e,t){Uf.prototype.point.call(this,t,e)};function PO(e){this._context=e}PO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function vR(e){return new Uf(e)}function bR(e){return new TO(e)}function wO(e){this._context=e}wO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=nE(e),i=nE(t),o=0,l=1;l<n;++o,++l)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function nE(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),l=new Array(n);for(i[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function SR(e){return new wO(e)}function Cp(e,t){this._context=e,this._t=t}Cp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function xR(e){return new Cp(e,.5)}function AR(e){return new Cp(e,0)}function ER(e){return new Cp(e,1)}function yl(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,u=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<u;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function h0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function CR(e,t){return e[t]}function TR(e){const t=[];return t.key=e,t}function PR(){var e=At([]),t=h0,n=yl,r=CR;function i(o){var l=Array.from(e.apply(this,arguments),TR),u,p=l.length,d=-1,h;for(const m of o)for(u=0,++d;u<p;++u)(l[u][d]=[0,+r(m,l[u].key,d,o)]).data=m;for(u=0,h=bv(t(l));u<p;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:At(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:At(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?h0:typeof o=="function"?o:At(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??yl,i):n},i}function wR(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,l;i<o;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}yl(e,t)}}function OR(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}yl(e,t)}}function _R(e,t){if(!(!((l=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,l;r<o;++r){for(var u=0,p=0,d=0;u<l;++u){for(var h=e[t[u]],m=h[r][1]||0,y=h[r-1][1]||0,b=(m-y)/2,x=0;x<u;++x){var A=e[t[x]],C=A[r][1]||0,T=A[r-1][1]||0;b+=C-T}p+=m,d+=b*m}i[r-1][1]+=i[r-1][0]=n,p&&(n-=d/p)}i[r-1][1]+=i[r-1][0]=n,yl(e,t)}}var NR=["type","size","sizeType"];function m0(){return m0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m0.apply(null,arguments)}function rE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rE(Object(n),!0).forEach(function(r){DR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DR(e,t,n){return(t=kR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kR(e){var t=MR(e,"string");return typeof t=="symbol"?t:t+""}function MR(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jR(e,t){if(e==null)return{};var n,r,i=IR(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var OO={symbolCircle:Sv,symbolCross:nR,symbolDiamond:aR,symbolSquare:iR,symbolStar:cR,symbolTriangle:uR,symbolWye:fR},RR=Math.PI/180,LR=e=>{var t="symbol".concat(vu(e));return OO[t]||Sv},$R=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*RR;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},BR=(e,t)=>{OO["symbol".concat(vu(e))]=t},xv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=jR(e,NR),o=aE(aE({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=LR(l),b=pR().type(y).size($R(n,r,l));return b()},{className:p,cx:d,cy:h}=o,m=Kt(o,!0);return d===+d&&h===+h&&n===+n?E.createElement("path",m0({},m,{className:ft("recharts-symbols",p),transform:"translate(".concat(d,", ").concat(h,")"),d:u()})):null};xv.registerSymbol=BR;function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g0.apply(null,arguments)}function iE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(n),!0).forEach(function(r){Av(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Av(e,t,n){return(t=zR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zR(e){var t=GR(e,"string");return typeof t=="symbol"?t:t+""}function GR(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yr=32;class Ev extends E.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Yr/2,o=Yr/6,l=Yr/3,u=t.inactive?r:t.color,p=n??t.type;if(p==="none")return null;if(p==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Yr,y2:i,className:"recharts-legend-icon"});if(p==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Yr,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(p==="rect")return E.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Yr/8,"h").concat(Yr,"v").concat(Yr*3/4,"h").concat(-Yr,"z"),className:"recharts-legend-icon"});if(E.isValidElement(t.legendIcon)){var d=UR({},t);return delete d.legendIcon,E.cloneElement(t.legendIcon,d)}return E.createElement(xv,{fill:u,cx:i,cy:i,size:Yr,sizeType:"diameter",type:p})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:o,iconType:l}=this.props,u={x:0,y:0,width:Yr,height:Yr},p={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,m)=>{var y=h.formatter||i,b=ft({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:h.inactive});if(h.type==="none")return null;var x=h.inactive?o:h.color,A=y?y(h.value,h,m):h.value;return E.createElement("li",g0({className:b,style:p,key:"legend-item-".concat(m)},bu(this.props,h,m)),E.createElement(yv,{width:n,height:n,viewBox:u,style:d,"aria-label":"".concat(A," legend icon")},this.renderIcon(h,l)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Av(Ev,"displayName","Legend");Av(Ev,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Ng={},Dg={},sE;function HR(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let o=0;o<n.length;o++){const l=n[o],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(Dg)),Dg}var kg={},oE;function _O(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(kg)),kg}var Mg={},jg={},Ig={},lE;function YR(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Ig)),Ig}var cE;function Cv(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YR();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(jg)),jg}var Rg={},uE;function qR(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Rg)),Rg}var dE;function FR(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cv(),n=qR();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(Mg)),Mg}var Lg={},$g={},fE;function VR(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hv();function n(r){return function(i){return t.get(i,r)}}e.property=n})($g)),$g}var Bg={},Ug={},zg={},Gg={},pE;function NO(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Gg)),Gg}var Hg={},hE;function DO(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Hg)),Hg}var Yg={},mE;function kO(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Yg)),Yg}var gE;function KR(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tv(),n=NO(),r=DO(),i=kO();function o(m,y,b){return typeof b!="function"?t.isMatch(m,y):l(m,y,function x(A,C,T,O,_,M){const D=b(A,C,T,O,_,M);return D!==void 0?!!D:l(A,C,x,M)},new Map)}function l(m,y,b,x){if(y===m)return!0;switch(typeof y){case"object":return u(m,y,b,x);case"function":return Object.keys(y).length>0?l(m,{...y},b,x):i.eq(m,y);default:return n.isObject(m)?typeof y=="string"?y==="":!0:i.eq(m,y)}}function u(m,y,b,x){if(y==null)return!0;if(Array.isArray(y))return d(m,y,b,x);if(y instanceof Map)return p(m,y,b,x);if(y instanceof Set)return h(m,y,b,x);const A=Object.keys(y);if(m==null)return A.length===0;if(A.length===0)return!0;if(x&&x.has(y))return x.get(y)===m;x&&x.set(y,m);try{for(let C=0;C<A.length;C++){const T=A[C];if(!r.isPrimitive(m)&&!(T in m)||y[T]===void 0&&m[T]!==void 0||y[T]===null&&m[T]!==null||!b(m[T],y[T],T,m,y,x))return!1}return!0}finally{x&&x.delete(y)}}function p(m,y,b,x){if(y.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,C]of y.entries()){const T=m.get(A);if(b(T,C,A,m,y,x)===!1)return!1}return!0}function d(m,y,b,x){if(y.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let C=0;C<y.length;C++){const T=y[C];let O=!1;for(let _=0;_<m.length;_++){if(A.has(_))continue;const M=m[_];let D=!1;if(b(M,T,C,m,y,x)&&(D=!0),D){A.add(_),O=!0;break}}if(!O)return!1}return!0}function h(m,y,b,x){return y.size===0?!0:m instanceof Set?d([...m],[...y],b,x):!1}e.isMatchWith=o,e.isSetMatch=h})(zg)),zg}var yE;function Tv(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KR();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Ug)),Ug}var qg={},Fg={},Vg={},vE;function WR(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Vg)),Vg}var Kg={},bE;function MO(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Kg)),Kg}var Wg={},SE;function jO(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",l="[object Symbol]",u="[object Date]",p="[object Map]",d="[object Set]",h="[object Array]",m="[object Function]",y="[object ArrayBuffer]",b="[object Object]",x="[object Error]",A="[object DataView]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",O="[object Uint16Array]",_="[object Uint32Array]",M="[object BigUint64Array]",D="[object Int8Array]",k="[object Int16Array]",j="[object Int32Array]",I="[object BigInt64Array]",U="[object Float32Array]",Y="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=y,e.arrayTag=h,e.bigInt64ArrayTag=I,e.bigUint64ArrayTag=M,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=x,e.float32ArrayTag=U,e.float64ArrayTag=Y,e.functionTag=m,e.int16ArrayTag=k,e.int32ArrayTag=j,e.int8ArrayTag=D,e.mapTag=p,e.numberTag=r,e.objectTag=b,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=_,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=T})(Wg)),Wg}var Xg={},xE;function XR(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(Xg)),Xg}var AE;function IO(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WR(),n=MO(),r=jO(),i=DO(),o=XR();function l(h,m){return u(h,void 0,h,new Map,m)}function u(h,m,y,b=new Map,x=void 0){const A=x?.(h,m,y,b);if(A!==void 0)return A;if(i.isPrimitive(h))return h;if(b.has(h))return b.get(h);if(Array.isArray(h)){const C=new Array(h.length);b.set(h,C);for(let T=0;T<h.length;T++)C[T]=u(h[T],T,y,b,x);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;b.set(h,C);for(const[T,O]of h)C.set(T,u(O,T,y,b,x));return C}if(h instanceof Set){const C=new Set;b.set(h,C);for(const T of h)C.add(u(T,void 0,y,b,x));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);b.set(h,C);for(let T=0;T<h.length;T++)C[T]=u(h[T],T,y,b,x);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return b.set(h,C),p(C,h,y,b,x),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return b.set(h,C),p(C,h,y,b,x),C}if(h instanceof Blob){const C=new Blob([h],{type:h.type});return b.set(h,C),p(C,h,y,b,x),C}if(h instanceof Error){const C=new h.constructor;return b.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,p(C,h,y,b,x),C}if(typeof h=="object"&&d(h)){const C=Object.create(Object.getPrototypeOf(h));return b.set(h,C),p(C,h,y,b,x),C}return h}function p(h,m,y=h,b,x){const A=[...Object.keys(m),...t.getSymbols(m)];for(let C=0;C<A.length;C++){const T=A[C],O=Object.getOwnPropertyDescriptor(h,T);(O==null||O.writable)&&(h[T]=u(m[T],T,y,b,x))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=p})(Fg)),Fg}var EE;function QR(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IO();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(qg)),qg}var CE;function ZR(){return CE||(CE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tv(),n=QR();function r(i){return i=n.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=r})(Bg)),Bg}var Qg={},Zg={},Jg={},TE;function JR(){return TE||(TE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IO(),n=jO();function r(i,o){return t.cloneDeepWith(i,(l,u,p,d)=>{const h=o?.(l,u,p,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(Jg)),Jg}var PE;function eL(){return PE||(PE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JR();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Zg)),Zg}var ey={},ty={},wE;function RO(){return wE||(wE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(ty)),ty}var ny={},OE;function tL(){return OE||(OE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MO();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(ny)),ny}var _E;function nL(){return _E||(_E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iO(),n=RO(),r=tL(),i=pv();function o(l,u){let p;if(Array.isArray(u)?p=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?p=i.toPath(u):p=[u],p.length===0)return!1;let d=l;for(let h=0;h<p.length;h++){const m=p[h];if((d==null||!Object.hasOwn(d,m))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(m)&&m<d.length))return!1;d=d[m]}return!0}e.has=o})(ey)),ey}var NE;function rL(){return NE||(NE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tv(),n=sO(),r=eL(),i=hv(),o=nL();function l(u,p){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return p=r.cloneDeep(p),function(d){const h=i.get(d,u);return h===void 0?o.has(d,u):p===void 0?h===void 0:t.isMatch(h,p)}}e.matchesProperty=l})(Qg)),Qg}var DE;function aL(){return DE||(DE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_O(),n=VR(),r=ZR(),i=rL();function o(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=o})(Lg)),Lg}var kE;function iL(){return kE||(kE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HR(),n=_O(),r=FR(),i=aL();function o(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=o})(Ng)),Ng}var ry,ME;function sL(){return ME||(ME=1,ry=iL().uniqBy),ry}var oL=sL();const jE=da(oL);function LO(e,t,n){return t===!0?jE(e,n):typeof t=="function"?jE(e,t):e}var ay={exports:{}},iy={},sy={exports:{}},oy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function lL(){if(IE)return oy;IE=1;var e=wl();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function u(m,y){var b=y(),x=r({inst:{value:b,getSnapshot:y}}),A=x[0].inst,C=x[1];return o(function(){A.value=b,A.getSnapshot=y,p(A)&&C({inst:A})},[m,b,y]),i(function(){return p(A)&&C({inst:A}),m(function(){p(A)&&C({inst:A})})},[m]),l(b),b}function p(m){var y=m.getSnapshot;m=m.value;try{var b=y();return!n(m,b)}catch{return!0}}function d(m,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return oy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,oy}var RE;function cL(){return RE||(RE=1,sy.exports=lL()),sy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function uL(){if(LE)return iy;LE=1;var e=wl(),t=cL();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,p=e.useDebugValue;return iy.useSyncExternalStoreWithSelector=function(d,h,m,y,b){var x=o(null);if(x.current===null){var A={hasValue:!1,value:null};x.current=A}else A=x.current;x=u(function(){function T(k){if(!O){if(O=!0,_=k,k=y(k),b!==void 0&&A.hasValue){var j=A.value;if(b(j,k))return M=j}return M=k}if(j=M,r(_,k))return j;var I=y(k);return b!==void 0&&b(j,I)?(_=k,j):(_=k,M=I)}var O=!1,_,M,D=m===void 0?null:m;return[function(){return T(h())},D===null?void 0:function(){return T(D())}]},[h,m,y,b]);var C=i(d,x[0],x[1]);return l(function(){A.hasValue=!0,A.value=C},[C]),p(C),C},iy}var $E;function dL(){return $E||($E=1,ay.exports=uL()),ay.exports}var fL=dL(),Pv=E.createContext(null),pL=e=>e,kt=()=>{var e=E.useContext(Pv);return e?e.store.dispatch:pL},Of=()=>{},hL=()=>Of,mL=(e,t)=>e===t;function Oe(e){var t=E.useContext(Pv);return fL.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:hL,t?t.store.getState:Of,t?t.store.getState:Of,t?e:Of,mL)}function gL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function yL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function vL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var BE=e=>Array.isArray(e)?e:[e];function bL(e){const t=Array.isArray(e[0])?e[0]:e;return vL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function SL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var xL=class{constructor(e){this.value=e}deref(){return this.value}},AL=typeof WeakRef<"u"?WeakRef:xL,EL=0,UE=1;function sf(){return{s:EL,v:void 0,o:null,p:null}}function $O(e,t={}){let n=sf();const{resultEqualityCheck:r}=t;let i,o=0;function l(){let u=n;const{length:p}=arguments;for(let m=0,y=p;m<y;m++){const b=arguments[m];if(typeof b=="function"||typeof b=="object"&&b!==null){let x=u.o;x===null&&(u.o=x=new WeakMap);const A=x.get(b);A===void 0?(u=sf(),x.set(b,u)):u=A}else{let x=u.p;x===null&&(u.p=x=new Map);const A=x.get(b);A===void 0?(u=sf(),x.set(b,u)):u=A}}const d=u;let h;if(u.s===UE)h=u.v;else if(h=e.apply(null,arguments),o++,r){const m=i?.deref?.()??i;m!=null&&r(m,h)&&(h=m,o!==0&&o--),i=typeof h=="object"&&h!==null||typeof h=="function"?new AL(h):h}return d.s=UE,d.v=h,h}return l.clearCache=()=>{n=sf(),l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function CL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,l=0,u,p={},d=i.pop();typeof d=="object"&&(p=d,d=i.pop()),gL(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...p},{memoize:m,memoizeOptions:y=[],argsMemoize:b=$O,argsMemoizeOptions:x=[]}=h,A=BE(y),C=BE(x),T=bL(i),O=m(function(){return o++,d.apply(null,arguments)},...A),_=b(function(){l++;const D=SL(T,arguments);return u=O.apply(null,D),u},...C);return Object.assign(_,{resultFunc:d,memoizedResultFunc:O,dependencies:T,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:m,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var te=CL($O),TL=Object.assign((e,t=te)=>{yL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((l,u,p)=>(l[n[p]]=u,l),{}))},{withTypes:()=>TL}),ly={},cy={},uy={},zE;function PL(){return zE||(zE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?u-l:l-u}return 0};e.compareValues=n})(uy)),uy}var dy={},fy={},GE;function BO(){return GE||(GE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(fy)),fy}var HE;function wL(){return HE||(HE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,l){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||l!=null&&Object.hasOwn(l,o)}e.isKey=i})(dy)),dy}var YE;function OL(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PL(),n=wL(),r=pv();function i(o,l,u,p){if(o==null)return[];u=p?void 0:u,Array.isArray(o)||(o=Object.values(o)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(b=>String(b));const d=(b,x)=>{let A=b;for(let C=0;C<x.length&&A!=null;++C)A=A[x[C]];return A},h=(b,x)=>x==null||b==null?x:typeof b=="object"&&"key"in b?Object.hasOwn(x,b.key)?x[b.key]:d(x,b.path):typeof b=="function"?b(x):Array.isArray(b)?d(x,b):typeof x=="object"?x[b]:x,m=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return o.map(b=>({original:b,criteria:m.map(x=>h(x,b))})).slice().sort((b,x)=>{for(let A=0;A<m.length;A++){const C=t.compareValues(b.criteria[A],x.criteria[A],u[A]);if(C!==0)return C}return 0}).map(b=>b.original)}e.orderBy=i})(cy)),cy}var py={},qE;function _L(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],o=Math.floor(r),l=(u,p)=>{for(let d=0;d<u.length;d++){const h=u[d];Array.isArray(h)&&p<o?l(h,p+1):i.push(h)}};return l(n,0),i}e.flatten=t})(py)),py}var hy={},FE;function UO(){return FE||(FE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RO(),n=Cv(),r=NO(),i=kO();function o(l,u,p){return r.isObject(p)&&(typeof u=="number"&&n.isArrayLike(p)&&t.isIndex(u)&&u<p.length||typeof u=="string"&&u in p)?i.eq(p[u],l):!1}e.isIterateeCall=o})(hy)),hy}var VE;function NL(){return VE||(VE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OL(),n=_L(),r=UO();function i(o,...l){const u=l.length;return u>1&&r.isIterateeCall(o,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(o,n.flatten(l),["asc"])}e.sortBy=i})(ly)),ly}var my,KE;function DL(){return KE||(KE=1,my=NL().sortBy),my}var kL=DL();const Tp=da(kL);var zO=e=>e.legend.settings,ML=e=>e.legend.size,jL=e=>e.legend.payload,IL=te([jL,zO],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Tp(r,n):r});function RL(){return Oe(IL)}var of=1;function GO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),l={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(l.height-t.height)>of||Math.abs(l.left-t.left)>of||Math.abs(l.top-t.top)>of||Math.abs(l.width-t.width)>of)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function _n(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LL=typeof Symbol=="function"&&Symbol.observable||"@@observable",WE=LL,gy=()=>Math.random().toString(36).substring(7).split("").join("."),$L={INIT:`@@redux/INIT${gy()}`,REPLACE:`@@redux/REPLACE${gy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gy()}`},zf=$L;function wv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function HO(e,t,n){if(typeof e!="function")throw new Error(_n(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(_n(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(_n(1));return n(HO)(e,t)}let r=e,i=t,o=new Map,l=o,u=0,p=!1;function d(){l===o&&(l=new Map,o.forEach((C,T)=>{l.set(T,C)}))}function h(){if(p)throw new Error(_n(3));return i}function m(C){if(typeof C!="function")throw new Error(_n(4));if(p)throw new Error(_n(5));let T=!0;d();const O=u++;return l.set(O,C),function(){if(T){if(p)throw new Error(_n(6));T=!1,d(),l.delete(O),o=null}}}function y(C){if(!wv(C))throw new Error(_n(7));if(typeof C.type>"u")throw new Error(_n(8));if(typeof C.type!="string")throw new Error(_n(17));if(p)throw new Error(_n(9));try{p=!0,i=r(i,C)}finally{p=!1}return(o=l).forEach(O=>{O()}),C}function b(C){if(typeof C!="function")throw new Error(_n(10));r=C,y({type:zf.REPLACE})}function x(){const C=m;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(_n(11));function O(){const M=T;M.next&&M.next(h())}return O(),{unsubscribe:C(O)}},[WE](){return this}}}return y({type:zf.INIT}),{dispatch:y,subscribe:m,getState:h,replaceReducer:b,[WE]:x}}function BL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:zf.INIT})>"u")throw new Error(_n(12));if(typeof n(void 0,{type:zf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(_n(13))})}function YO(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const l=t[o];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{BL(n)}catch(o){i=o}return function(l={},u){if(i)throw i;let p=!1;const d={};for(let h=0;h<r.length;h++){const m=r[h],y=n[m],b=l[m],x=y(b,u);if(typeof x>"u")throw u&&u.type,new Error(_n(14));d[m]=x,p=p||x!==b}return p=p||r.length!==Object.keys(l).length,p?d:l}}function Gf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function UL(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(_n(15))};const l={getState:i.getState,dispatch:(p,...d)=>o(p,...d)},u=e.map(p=>p(l));return o=Gf(...u)(i.dispatch),{...i,dispatch:o}}}function qO(e){return wv(e)&&"type"in e&&typeof e.type=="string"}var FO=Symbol.for("immer-nothing"),XE=Symbol.for("immer-draftable"),Tr=Symbol.for("immer-state");function ca(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var vl=Object.getPrototypeOf;function Zs(e){return!!e&&!!e[Tr]}function oi(e){return e?VO(e)||Array.isArray(e)||!!e[XE]||!!e.constructor?.[XE]||Su(e)||wp(e):!1}var zL=Object.prototype.constructor.toString();function VO(e){if(!e||typeof e!="object")return!1;const t=vl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===zL}function Hf(e,t){Pp(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Pp(e){const t=e[Tr];return t?t.type_:Array.isArray(e)?1:Su(e)?2:wp(e)?3:0}function y0(e,t){return Pp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function KO(e,t,n){const r=Pp(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function GL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Su(e){return e instanceof Map}function wp(e){return e instanceof Set}function Us(e){return e.copy_||e.base_}function v0(e,t){if(Su(e))return new Map(e);if(wp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=VO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Tr];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const l=i[o],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(vl(e),r)}else{const r=vl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Ov(e,t=!1){return Op(e)||Zs(e)||!oi(e)||(Pp(e)>1&&Object.defineProperties(e,{set:{value:lf},add:{value:lf},clear:{value:lf},delete:{value:lf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Ov(n,!0))),e}function lf(){ca(2)}function Op(e){return Object.isFrozen(e)}var HL={};function Js(e){const t=HL[e];return t||ca(0,e),t}var cu;function WO(){return cu}function YL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function QE(e,t){t&&(Js("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function b0(e){S0(e),e.drafts_.forEach(qL),e.drafts_=null}function S0(e){e===cu&&(cu=e.parent_)}function ZE(e){return cu=YL(cu,e)}function qL(e){const t=e[Tr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function JE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Tr].modified_&&(b0(t),ca(4)),oi(e)&&(e=Yf(t,e),t.parent_||qf(t,e)),t.patches_&&Js("Patches").generateReplacementPatches_(n[Tr].base_,e,t.patches_,t.inversePatches_)):e=Yf(t,n,[]),b0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==FO?e:void 0}function Yf(e,t,n){if(Op(t))return t;const r=t[Tr];if(!r)return Hf(t,(i,o)=>eC(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return qf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),Hf(o,(u,p)=>eC(e,r,i,u,p,n,l)),qf(e,i,!1),n&&e.patches_&&Js("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function eC(e,t,n,r,i,o,l){if(Zs(i)){const u=o&&t&&t.type_!==3&&!y0(t.assigned_,r)?o.concat(r):void 0,p=Yf(e,i,u);if(KO(n,r,p),Zs(p))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(oi(i)&&!Op(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Yf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Su(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&qf(e,i)}}function qf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ov(t,n)}function FL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:WO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=_v;n&&(i=[r],o=uu);const{revoke:l,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=l,u}var _v={get(e,t){if(t===Tr)return e;const n=Us(e);if(!y0(n,t))return VL(e,n,t);const r=n[t];return e.finalized_||!oi(r)?r:r===yy(e.base_,t)?(vy(e),e.copy_[t]=A0(r,e)):r},has(e,t){return t in Us(e)},ownKeys(e){return Reflect.ownKeys(Us(e))},set(e,t,n){const r=XO(Us(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=yy(Us(e),t),o=i?.[Tr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(GL(n,i)&&(n!==void 0||y0(e.base_,t)))return!0;vy(e),x0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return yy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vy(e),x0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Us(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ca(11)},getPrototypeOf(e){return vl(e.base_)},setPrototypeOf(){ca(12)}},uu={};Hf(_v,(e,t)=>{uu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});uu.deleteProperty=function(e,t){return uu.set.call(this,e,t,void 0)};uu.set=function(e,t,n){return _v.set.call(this,e[0],t,n,e[0])};function yy(e,t){const n=e[Tr];return(n?Us(n):e)[t]}function VL(e,t,n){const r=XO(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function XO(e,t){if(!(t in e))return;let n=vl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=vl(n)}}function x0(e){e.modified_||(e.modified_=!0,e.parent_&&x0(e.parent_))}function vy(e){e.copy_||(e.copy_=v0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var KL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const l=this;return function(p=o,...d){return l.produce(p,h=>n.call(this,h,...d))}}typeof n!="function"&&ca(6),r!==void 0&&typeof r!="function"&&ca(7);let i;if(oi(t)){const o=ZE(this),l=A0(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?b0(o):S0(o)}return QE(o,r),JE(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===FO&&(i=void 0),this.autoFreeze_&&Ov(i,!0),r){const o=[],l=[];Js("Patches").generateReplacementPatches_(t,i,o,l),r(o,l)}return i}else ca(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,p=>t(p,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){oi(e)||ca(8),Zs(e)&&(e=ii(e));const t=ZE(this),n=A0(e,void 0);return n[Tr].isManual_=!0,S0(t),n}finishDraft(e,t){const n=e&&e[Tr];(!n||!n.isManual_)&&ca(9);const{scope_:r}=n;return QE(r,t),JE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Js("Patches").applyPatches_;return Zs(e)?r(e,t):this.produce(e,i=>r(i,t))}};function A0(e,t){const n=Su(e)?Js("MapSet").proxyMap_(e,t):wp(e)?Js("MapSet").proxySet_(e,t):FL(e,t);return(t?t.scope_:WO()).drafts_.push(n),n}function ii(e){return Zs(e)||ca(10,e),QO(e)}function QO(e){if(!oi(e)||Op(e))return e;const t=e[Tr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=v0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=v0(e,!0);return Hf(n,(r,i)=>{KO(n,r,QO(i))}),t&&(t.finalized_=!1),n}var WL=new KL,ZO=WL.produce;function JO(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var XL=JO(),QL=JO,ZL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Gf:Gf.apply(null,arguments)};function Xr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Er(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>qO(r)&&r.type===e,n}var e_=class eu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,eu.prototype)}static get[Symbol.species](){return eu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new eu(...t[0].concat(this)):new eu(...t.concat(this))}};function tC(e){return oi(e)?ZO(e,()=>{}):e}function cf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function JL(e){return typeof e=="boolean"}var e3=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let l=new e_;return n&&(JL(n)?l.push(XL):l.push(QL(n.extraArgument))),l},t3="RTK_autoBatch",nC=e=>t=>{setTimeout(t,e)},n3=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,l=!1;const u=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:nC(10):e.type==="callback"?e.queueNotification:nC(e.timeout),d=()=>{l=!1,o&&(o=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),y=r.subscribe(m);return u.add(h),()=>{y(),u.delete(h)}},dispatch(h){try{return i=!h?.meta?.[t3],o=!i,o&&(l||(l=!0,p(d))),r.dispatch(h)}finally{i=!0}}})},r3=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new e_(e);return r&&i.push(n3(typeof r=="object"?r:void 0)),i};function a3(e){const t=e3(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(wv(n))u=YO(n);else throw new Error(Er(1));let p;typeof r=="function"?p=r(t):p=t();let d=Gf;i&&(d=ZL({trace:!1,...typeof i=="object"&&i}));const h=UL(...p),m=r3(h);let y=typeof l=="function"?l(m):m();const b=d(...y);return HO(u,o,b)}function t_(e){const t={},n=[];let r;const i={addCase(o,l){const u=typeof o=="string"?o:o.type;if(!u)throw new Error(Er(28));if(u in t)throw new Error(Er(29));return t[u]=l,i},addAsyncThunk(o,l){return l.pending&&(t[o.pending.type]=l.pending),l.rejected&&(t[o.rejected.type]=l.rejected),l.fulfilled&&(t[o.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:o.settled,reducer:l.settled}),i},addMatcher(o,l){return n.push({matcher:o,reducer:l}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function i3(e){return typeof e=="function"}function s3(e,t){let[n,r,i]=t_(t),o;if(i3(e))o=()=>tC(e());else{const u=tC(e);o=()=>u}function l(u=o(),p){let d=[n[p.type],...r.filter(({matcher:h})=>h(p)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,m)=>{if(m)if(Zs(h)){const b=m(h,p);return b===void 0?h:b}else{if(oi(h))return ZO(h,y=>m(y,p));{const y=m(h,p);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},u)}return l.getInitialState=o,l}var o3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",l3=(e=21)=>{let t="",n=e;for(;n--;)t+=o3[Math.random()*64|0];return t},c3=Symbol.for("rtk-slice-createasyncthunk");function u3(e,t){return`${e}/${t}`}function d3({creators:e}={}){const t=e?.asyncThunk?.[c3];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(Er(11));const l=(typeof r.reducers=="function"?r.reducers(p3()):r.reducers)||{},u=Object.keys(l),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,M){const D=typeof _=="string"?_:_.type;if(!D)throw new Error(Er(12));if(D in p.sliceCaseReducersByType)throw new Error(Er(13));return p.sliceCaseReducersByType[D]=M,d},addMatcher(_,M){return p.sliceMatchers.push({matcher:_,reducer:M}),d},exposeAction(_,M){return p.actionCreators[_]=M,d},exposeCaseReducer(_,M){return p.sliceCaseReducersByName[_]=M,d}};u.forEach(_=>{const M=l[_],D={reducerName:_,type:u3(i,_),createNotation:typeof r.reducers=="function"};m3(M)?y3(D,M,d,t):h3(D,M,d)});function h(){const[_={},M=[],D=void 0]=typeof r.extraReducers=="function"?t_(r.extraReducers):[r.extraReducers],k={..._,...p.sliceCaseReducersByType};return s3(r.initialState,j=>{for(let I in k)j.addCase(I,k[I]);for(let I of p.sliceMatchers)j.addMatcher(I.matcher,I.reducer);for(let I of M)j.addMatcher(I.matcher,I.reducer);D&&j.addDefaultCase(D)})}const m=_=>_,y=new Map,b=new WeakMap;let x;function A(_,M){return x||(x=h()),x(_,M)}function C(){return x||(x=h()),x.getInitialState()}function T(_,M=!1){function D(j){let I=j[_];return typeof I>"u"&&M&&(I=cf(b,D,C)),I}function k(j=m){const I=cf(y,M,()=>new WeakMap);return cf(I,j,()=>{const U={};for(const[Y,V]of Object.entries(r.selectors??{}))U[Y]=f3(V,j,()=>cf(b,j,C),M);return U})}return{reducerPath:_,getSelectors:k,get selectors(){return k(D)},selectSlice:D}}const O={name:i,reducer:A,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:C,...T(o),injectInto(_,{reducerPath:M,...D}={}){const k=M??o;return _.inject({reducerPath:k,reducer:A},D),{...O,...T(k,!0)}}};return O}}function f3(e,t,n,r){function i(o,...l){let u=t(o);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var wr=d3();function p3(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function h3({type:e,reducerName:t,createNotation:n},r,i){let o,l;if("reducer"in r){if(n&&!g3(r))throw new Error(Er(17));o=r.reducer,l=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,l?Xr(e,l):Xr(e))}function m3(e){return e._reducerDefinitionType==="asyncThunk"}function g3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function y3({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Er(18));const{payloadCreator:o,fulfilled:l,pending:u,rejected:p,settled:d,options:h}=n,m=i(e,o,h);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),p&&r.addCase(m.rejected,p),d&&r.addMatcher(m.settled,d),r.exposeCaseReducer(t,{fulfilled:l||uf,pending:u||uf,rejected:p||uf,settled:d||uf})}function uf(){}var v3="task",n_="listener",r_="completed",Nv="cancelled",b3=`task-${Nv}`,S3=`task-${r_}`,E0=`${n_}-${Nv}`,x3=`${n_}-${r_}`,_p=class{constructor(e){this.code=e,this.message=`${v3} ${Nv} (reason: ${e})`}name="TaskAbortError";message},Dv=(e,t)=>{if(typeof e!="function")throw new TypeError(Er(32))},Ff=()=>{},a_=(e,t=Ff)=>(e.catch(t),e),i_=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Fs=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Vs=e=>{if(e.aborted){const{reason:t}=e;throw new _p(t)}};function s_(e,t){let n=Ff;return new Promise((r,i)=>{const o=()=>i(new _p(e.reason));if(e.aborted){o();return}n=i_(e,o),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Ff})}var A3=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof _p?"cancelled":"rejected",error:n}}finally{t?.()}},Vf=e=>t=>a_(s_(e,t).then(n=>(Vs(e),n))),o_=e=>{const t=Vf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:hl}=Object,rC={},Np="listenerMiddleware",E3=(e,t)=>{const n=r=>i_(e,()=>Fs(r,e.reason));return(r,i)=>{Dv(r);const o=new AbortController;n(o);const l=A3(async()=>{Vs(e),Vs(o.signal);const u=await r({pause:Vf(o.signal),delay:o_(o.signal),signal:o.signal});return Vs(o.signal),u},()=>Fs(o,S3));return i?.autoJoin&&t.push(l.catch(Ff)),{result:Vf(e)(l),cancel(){Fs(o,b3)}}}},C3=(e,t)=>{const n=async(r,i)=>{Vs(t);let o=()=>{};const u=[new Promise((p,d)=>{let h=e({predicate:r,effect:(m,y)=>{y.unsubscribe(),p([m,y.getState(),y.getOriginalState()])}});o=()=>{h(),d()}})];i!=null&&u.push(new Promise(p=>setTimeout(p,i,null)));try{const p=await s_(t,Promise.race(u));return Vs(t),p}finally{o()}};return(r,i)=>a_(n(r,i))},l_=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=Xr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Er(21));return Dv(o),{predicate:i,type:t,effect:o}},c_=hl(e=>{const{type:t,predicate:n,effect:r}=l_(e);return{id:l3(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Er(22))}}},{withTypes:()=>c_}),aC=(e,t)=>{const{type:n,effect:r,predicate:i}=l_(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},C0=e=>{e.pending.forEach(t=>{Fs(t,E0)})},T3=e=>()=>{e.forEach(C0),e.clear()},iC=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},u_=hl(Xr(`${Np}/add`),{withTypes:()=>u_}),P3=Xr(`${Np}/removeAll`),d_=hl(Xr(`${Np}/remove`),{withTypes:()=>d_}),w3=(...e)=>{console.error(`${Np}/error`,...e)},xu=(e={})=>{const t=new Map,{extra:n,onError:r=w3}=e;Dv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),m=>{h.unsubscribe(),m?.cancelActive&&C0(h)}),o=h=>{const m=aC(t,h)??c_(h);return i(m)};hl(o,{withTypes:()=>o});const l=h=>{const m=aC(t,h);return m&&(m.unsubscribe(),h.cancelActive&&C0(m)),!!m};hl(l,{withTypes:()=>l});const u=async(h,m,y,b)=>{const x=new AbortController,A=C3(o,x.signal),C=[];try{h.pending.add(x),await Promise.resolve(h.effect(m,hl({},y,{getOriginalState:b,condition:(T,O)=>A(T,O).then(Boolean),take:A,delay:o_(x.signal),pause:Vf(x.signal),extra:n,signal:x.signal,fork:E3(x.signal,C),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((T,O,_)=>{T!==x&&(Fs(T,E0),_.delete(T))})},cancel:()=>{Fs(x,E0),h.pending.delete(x)},throwIfCancelled:()=>{Vs(x.signal)}})))}catch(T){T instanceof _p||iC(r,T,{raisedBy:"effect"})}finally{await Promise.all(C),Fs(x,x3),h.pending.delete(x)}},p=T3(t);return{middleware:h=>m=>y=>{if(!qO(y))return m(y);if(u_.match(y))return o(y.payload);if(P3.match(y)){p();return}if(d_.match(y))return l(y.payload);let b=h.getState();const x=()=>{if(b===rC)throw new Error(Er(23));return b};let A;try{if(A=m(y),t.size>0){const C=h.getState(),T=Array.from(t.values());for(const O of T){let _=!1;try{_=O.predicate(y,C,b)}catch(M){_=!1,iC(r,M,{raisedBy:"predicate"})}_&&u(O,y,h,x)}}}finally{b=rC}return A},startListening:o,stopListening:l,clearListeners:p}};function Er(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var O3={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},f_=wr({name:"chartLayout",initialState:O3,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:_3,setLayout:N3,setChartSize:D3,setScale:k3}=f_.actions,M3=f_.reducer;function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(r){j3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j3(e,t,n){return(t=I3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I3(e){var t=R3(e,"string");return typeof t=="symbol"?t:t+""}function R3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kf=Math.PI/180,L3=e=>e*180/Math.PI,Wt=(e,t,n,r)=>({x:e+Math.cos(-Kf*r)*n,y:t+Math.sin(-Kf*r)*n}),p_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},$3=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return Math.sqrt((n-i)**2+(r-o)**2)},B3=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:o}=t,l=$3({x:n,y:r},{x:i,y:o});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,p=Math.acos(u);return r>o&&(p=2*Math.PI-p),{radius:l,angle:L3(p),angleInRadian:p}},U3=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-o*360,endAngle:n-o*360}},z3=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),o=Math.floor(r/360),l=Math.min(i,o);return e+l*360},G3=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:o}=B3({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:p,endAngle:d}=U3(t),h=o,m;if(p<=d){for(;h>d;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=d}else{for(;h>p;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=p}return m?oC(oC({},t),{},{radius:i,angle:z3(h,t)}):null};function h_(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(r){H3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H3(e,t,n){return(t=Y3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y3(e){var t=q3(e,"string");return typeof t=="symbol"?t:t+""}function q3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wt(e,t,n){return vn(e)||vn(t)?n:_a(t)?Qs(e,t,n):typeof t=="function"?t(e):n}var F3=(e,t,n,r,i)=>{var o,l=-1,u=(o=t?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var p=0;p<u;p++){var d=p>0?n[p-1].coordinate:n[u-1].coordinate,h=n[p].coordinate,m=p>=u-1?n[0].coordinate:n[p+1].coordinate,y=void 0;if(yn(h-d)!==yn(m-h)){var b=[];if(yn(m-h)===yn(i[1]-i[0])){y=m;var x=h+i[1]-i[0];b[0]=Math.min(x,(x+d)/2),b[1]=Math.max(x,(x+d)/2)}else{y=d;var A=m+i[1]-i[0];b[0]=Math.min(h,(A+h)/2),b[1]=Math.max(h,(A+h)/2)}var C=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>C[0]&&e<=C[1]||e>=b[0]&&e<=b[1]){({index:l}=n[p]);break}}else{var T=Math.min(d,m),O=Math.max(d,m);if(e>(T+h)/2&&e<=(O+h)/2){({index:l}=n[p]);break}}}else if(t){for(var _=0;_<u;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:l}=t[_]);break}}return l},V3=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:o,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&o!=="center"&&De(e[o]))return Vr(Vr({},e),{},{[o]:e[o]+(r||0)});if((u==="horizontal"||u==="vertical"&&o==="center")&&l!=="middle"&&De(e[l]))return Vr(Vr({},e),{},{[l]:e[l]+(i||0)})}return e},so=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",m_=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,o,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(o=!0),u.coordinate));return i||l.push(t),o||l.push(n),l},g_=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:o,scale:l,realScaleType:u,isCategorical:p,categoricalDomain:d,tickCount:h,ticks:m,niceTicks:y,axisType:b}=e;if(!l)return null;var x=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/x:0;if(A=b==="angleAxis"&&o&&o.length>=2?yn(o[0]-o[1])*2*A:A,m||y){var C=(m||y||[]).map((T,O)=>{var _=r?r.indexOf(T):T;return{coordinate:l(_)+A,value:T,offset:A,index:O}});return C.filter(T=>!Cr(T.coordinate))}return p&&d?d.map((T,O)=>({coordinate:l(T)+A,value:T,index:O,offset:A})):l.ticks&&h!=null?l.ticks(h).map((T,O)=>({coordinate:l(T)+A,value:T,offset:A,index:O})):l.domain().map((T,O)=>({coordinate:l(T)+A,value:r?r[T]:T,index:O,offset:A}))},cC=1e-4,K3=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-cC,o=Math.max(r[0],r[1])+cC,l=e(t[0]),u=e(t[n-1]);(l<i||l>o||u<i||u>o)&&e.domain([t[0],t[n-1]])}},W3=(e,t)=>{if(!t||t.length!==2||!De(t[0])||!De(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!De(e[0])||e[0]<n)&&(i[0]=n),(!De(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},X3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,l=0;l<t;++l){var u=Cr(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+u,o=e[l][n][1])}},Q3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var l=Cr(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},Z3={sign:X3,expand:wR,none:yl,silhouette:OR,wiggle:_R,positive:Q3},J3=(e,t,n)=>{var r=Z3[n],i=PR().keys(t).value((o,l)=>+wt(o,l,0)).order(h0).offset(r);return i(e)};function e5(e){return e==null?void 0:String(e)}var uC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:o,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=wt(o,t.dataKey,t.scale.domain()[l]);return vn(u)?null:t.scale(u)-i/2+r},t5=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},n5=e=>{var t=e.flat(2).filter(De);return[Math.min(...t),Math.max(...t)]},r5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],a5=(e,t,n)=>{if(e!=null)return r5(Object.keys(e).reduce((r,i)=>{var o=e[i],{stackedData:l}=o,u=l.reduce((p,d)=>{var h=h_(d,t,n),m=n5(h);return[Math.min(p[0],m[0]),Math.max(p[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},dC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Tp(t,h=>h.coordinate),o=1/0,l=1,u=i.length;l<u;l++){var p=i[l],d=i[l-1];o=Math.min((p.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function pC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:o}=e;return Vr(Vr({},t),{},{dataKey:n,payload:r,value:i,name:o})}function Dp(e,t){if(e)return String(e);if(typeof t=="string")return t}function i5(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var o=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return o?{x:e,y:t}:null}return r?G3({x:e,y:t},r):null}var s5=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,{radius:l}=r;return Vr(Vr(Vr({},r),Wt(r.cx,r.cy,l,o)),{},{angle:o,radius:l})}var u=i.coordinate,{angle:p}=r;return Vr(Vr(Vr({},r),Wt(r.cx,r.cy,u,p)),{},{angle:p,radius:u})}return{x:0,y:0}},o5=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,fi=e=>e.layout.width,pi=e=>e.layout.height,l5=e=>e.layout.scale,y_=e=>e.layout.margin,kp=te(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Mp=te(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),v_="data-recharts-item-index",b_="data-recharts-item-data-key",Au=60;function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function df(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(n),!0).forEach(function(r){c5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c5(e,t,n){return(t=u5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u5(e){var t=d5(e,"string");return typeof t=="symbol"?t:t+""}function d5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f5=e=>e.brush.height;function p5(e){var t=Mp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Au;return n+i}return n},0)}function h5(e){var t=Mp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Au;return n+i}return n},0)}function m5(e){var t=kp(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function g5(e){var t=kp(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var on=te([fi,pi,y_,f5,p5,h5,m5,g5,zO,ML],(e,t,n,r,i,o,l,u,p,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+o},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},y=df(df({},m),h),b=y.bottom;y.bottom+=r,y=V3(y,p,d);var x=e-y.left-y.right,A=t-y.top-y.bottom;return df(df({brushBottom:b},y),{},{width:Math.max(x,0),height:Math.max(A,0)})}),y5=te(on,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Mv=te(fi,pi,(e,t)=>({x:0,y:0,width:e,height:t})),v5=E.createContext(null),Zr=()=>E.useContext(v5)!=null,jp=e=>e.brush,Ip=te([jp,on,y_],(e,t,n)=>({height:e.height,x:De(e.x)?e.x:t.left,y:De(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:De(e.width)?e.width:t.width})),jv=()=>{var e,t=Zr(),n=Oe(y5),r=Oe(Ip),i=(e=Oe(jp))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},b5={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},S_=()=>{var e;return(e=Oe(on))!==null&&e!==void 0?e:b5},Iv=()=>Oe(fi),Rv=()=>Oe(pi),S5=()=>Oe(e=>e.layout.margin),st=e=>e.layout.layoutType,Lv=()=>Oe(st),x5={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},x_=wr({name:"legend",initialState:x5,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=ii(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:mC,setLegendSettings:A5,addLegendPayload:A_,removeLegendPayload:E_}=x_.actions,E5=x_.reducer,C5=["contextPayload"];function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T0.apply(null,arguments)}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){$v(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $v(e,t,n){return(t=T5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T5(e){var t=P5(e,"string");return typeof t=="symbol"?t:t+""}function P5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w5(e,t){if(e==null)return{};var n,r,i=O5(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function O5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _5(e){return e.value}function N5(e){var{contextPayload:t}=e,n=w5(e,C5),r=LO(t,e.payloadUniqBy,_5),i=bl(bl({},n),{},{payload:r});return E.isValidElement(e.content)?E.cloneElement(e.content,i):typeof e.content=="function"?E.createElement(e.content,i):E.createElement(Ev,i)}function D5(e,t,n,r,i,o){var{layout:l,align:u,verticalAlign:p}=t,d,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?d={left:((r||0)-o.width)/2}:d=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(p==="middle"?h={top:((i||0)-o.height)/2}:h=p==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),bl(bl({},d),h)}function k5(e){var t=kt();return E.useEffect(()=>{t(A5(e))},[t,e]),null}function M5(e){var t=kt();return E.useEffect(()=>(t(mC(e)),()=>{t(mC({width:0,height:0}))}),[t,e]),null}function j5(e){var t=RL(),n=XI(),r=S5(),{width:i,height:o,wrapperStyle:l,portal:u}=e,[p,d]=GO([t]),h=Iv(),m=Rv();if(h==null||m==null)return null;var y=h-(r.left||0)-(r.right||0),b=Rp.getWidthOrHeight(e.layout,o,i,y),x=u?l:bl(bl({position:"absolute",width:b?.width||i||"auto",height:b?.height||o||"auto"},D5(l,e,r,h,m,p)),l),A=u??n;if(A==null)return null;var C=E.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:d},E.createElement(k5,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),E.createElement(M5,{width:p.width,height:p.height}),E.createElement(N5,T0({},e,b,{margin:r,chartWidth:h,chartHeight:m,contextPayload:t})));return uO.createPortal(C,A)}class Rp extends E.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&De(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return E.createElement(j5,this.props)}}$v(Rp,"displayName","Legend");$v(Rp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P0.apply(null,arguments)}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function by(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){I5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I5(e,t,n){return(t=R5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R5(e){var t=L5(e,"string");return typeof t=="symbol"?t:t+""}function L5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $5(e){return Array.isArray(e)&&_a(e[0])&&_a(e[1])?e.join(" ~ "):e}var B5=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:l,itemSorter:u,wrapperClassName:p,labelClassName:d,label:h,labelFormatter:m,accessibilityLayer:y=!1}=e,b=()=>{if(o&&o.length){var D={padding:0,margin:0},k=(u?Tp(o,u):o).map((j,I)=>{if(j.type==="none")return null;var U=j.formatter||l||$5,{value:Y,name:V}=j,W=Y,ae=V;if(U){var ne=U(Y,V,j,I,o);if(Array.isArray(ne))[W,ae]=ne;else if(ne!=null)W=ne;else return null}var re=by({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:re},_a(ae)?E.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,_a(ae)?E.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,E.createElement("span",{className:"recharts-tooltip-item-value"},W),E.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:D},k)}return null},x=by({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=by({margin:0},i),C=!vn(h),T=C?h:"",O=ft("recharts-default-tooltip",p),_=ft("recharts-tooltip-label",d);C&&m&&o!==void 0&&o!==null&&(T=m(h,o));var M=y?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",P0({className:O,style:x},M),E.createElement("p",{className:_,style:A},E.isValidElement(T)?T:"".concat(T)),b())},qc="recharts-tooltip-wrapper",U5={visibility:"hidden"};function z5(e){var{coordinate:t,translateX:n,translateY:r}=e;return ft(qc,{["".concat(qc,"-right")]:De(n)&&t&&De(t.x)&&n>=t.x,["".concat(qc,"-left")]:De(n)&&t&&De(t.x)&&n<t.x,["".concat(qc,"-bottom")]:De(r)&&t&&De(t.y)&&r>=t.y,["".concat(qc,"-top")]:De(r)&&t&&De(t.y)&&r<t.y})}function vC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:u,viewBox:p,viewBoxDimension:d}=e;if(o&&De(o[r]))return o[r];var h=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?h:m;var y=p[r];if(y==null)return 0;if(l[r]){var b=h,x=y;return b<x?Math.max(m,y):Math.max(h,y)}if(d==null)return 0;var A=m+u,C=y+d;return A>C?Math.max(h,y):Math.max(m,y)}function G5(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function H5(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:l,useTranslate3d:u,viewBox:p}=e,d,h,m;return l.height>0&&l.width>0&&n?(h=vC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:p,viewBoxDimension:p.width}),m=vC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:p,viewBoxDimension:p.height}),d=G5({translateX:h,translateY:m,useTranslate3d:u})):d=U5,{cssProperties:d,cssClasses:z5({translateX:h,translateY:m,coordinate:n})}}function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ff(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(n),!0).forEach(function(r){w0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w0(e,t,n){return(t=Y5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y5(e){var t=q5(e,"string");return typeof t=="symbol"?t:t+""}function q5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class F5 extends E.PureComponent{constructor(){super(...arguments),w0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),w0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:l,hasPayload:u,isAnimationActive:p,offset:d,position:h,reverseDirection:m,useTranslate3d:y,viewBox:b,wrapperStyle:x,lastBoundingBox:A,innerRef:C,hasPortalFromProps:T}=this.props,{cssClasses:O,cssProperties:_}=H5({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:y,viewBox:b}),M=T?{}:ff(ff({transition:p&&t?"transform ".concat(r,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=ff(ff({},M),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},x);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:D,ref:C},o)}}var V5=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_l={isSsr:V5()},C_=()=>Oe(e=>e.rootProps.accessibilityLayer);function Pr(e){return Number.isFinite(e)}function Sl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O0.apply(null,arguments)}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(r){K5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K5(e,t,n){return(t=W5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W5(e){var t=X5(e,"string");return typeof t=="symbol"?t:t+""}function X5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AC={curveBasisClosed:mR,curveBasisOpen:gR,curveBasis:hR,curveBumpX:eR,curveBumpY:tR,curveLinearClosed:yR,curveLinear:Ep,curveMonotoneX:vR,curveMonotoneY:bR,curveNatural:SR,curveStep:xR,curveStepAfter:ER,curveStepBefore:AR},pf=e=>Pr(e.x)&&Pr(e.y),Fc=e=>e.x,Vc=e=>e.y,Q5=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(vu(e));return(n==="curveMonotone"||n==="curveBump")&&t?AC["".concat(n).concat(t==="vertical"?"Y":"X")]:AC[n]||Ep},Z5=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=e,l=Q5(t,i),u=o?n.filter(pf):n,p;if(Array.isArray(r)){var d=o?r.filter(m=>pf(m)):r,h=u.map((m,y)=>xC(xC({},m),{},{base:d[y]}));return i==="vertical"?p=af().y(Vc).x1(Fc).x0(m=>m.base.x):p=af().x(Fc).y1(Vc).y0(m=>m.base.y),p.defined(pf).curve(l),p(h)}return i==="vertical"&&De(r)?p=af().y(Vc).x1(Fc).x0(r):De(r)?p=af().x(Fc).y1(Vc).y0(r):p=yO().x(Fc).y(Vc),p.defined(pf).curve(l),p(u)},T_=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var o=n&&n.length?Z5(e):r;return E.createElement("path",O0({},io(e),UI(e),{className:ft("recharts-curve",t),d:o===null?void 0:o,ref:i}))},J5=["x","y","top","left","width","height","className"];function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_0.apply(null,arguments)}function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function e4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(n),!0).forEach(function(r){t4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t4(e,t,n){return(t=n4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n4(e){var t=r4(e,"string");return typeof t=="symbol"?t:t+""}function r4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a4(e,t){if(e==null)return{};var n,r,i=i4(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var s4=(e,t,n,r,i,o)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n),o4=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:o=0,height:l=0,className:u}=e,p=a4(e,J5),d=e4({x:t,y:n,top:r,left:i,width:o,height:l},p);return!De(t)||!De(n)||!De(o)||!De(l)||!De(r)||!De(i)?null:E.createElement("path",_0({},Kt(d,!0),{className:ft("recharts-cross",u),d:s4(t,n,o,l,r,i)}))};function l4(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function c4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(n),!0).forEach(function(r){u4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u4(e,t,n){return(t=d4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d4(e){var t=f4(e,"string");return typeof t=="symbol"?t:t+""}function f4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jr(e,t){var n=c4({},e),r=t,i=Object.keys(t),o=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return o}function p4(){}function TC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(n),!0).forEach(function(r){h4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h4(e,t,n){return(t=m4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m4(e){var t=g4(e,"string");return typeof t=="symbol"?t:t+""}function g4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y4=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),P_=(e,t,n)=>e.map(r=>"".concat(y4(r)," ").concat(t,"ms ").concat(n)).join(","),v4=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),du=(e,t)=>Object.keys(t).reduce((n,r)=>PC(PC({},n),{},{[r]:e(r,t[r])}),{});function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(n),!0).forEach(function(r){b4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b4(e,t,n){return(t=S4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S4(e){var t=x4(e,"string");return typeof t=="symbol"?t:t+""}function x4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wf=(e,t,n)=>e+(t-e)*n,N0=e=>{var{from:t,to:n}=e;return t!==n},w_=(e,t,n)=>{var r=du((i,o)=>{if(N0(o)){var[l,u]=e(o.from,o.to,o.velocity);return Nn(Nn({},o),{},{from:l,velocity:u})}return o},t);return n<1?du((i,o)=>N0(o)?Nn(Nn({},o),{},{velocity:Wf(o.velocity,r[i].velocity,n),from:Wf(o.from,r[i].from,n)}):o,t):w_(e,r,n-1)};function A4(e,t,n,r,i,o){var l,u=r.reduce((y,b)=>Nn(Nn({},y),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),p=()=>du((y,b)=>b.from,u),d=()=>!Object.values(u).filter(N0).length,h=null,m=y=>{l||(l=y);var b=y-l,x=b/n.dt;u=w_(n,u,x),i(Nn(Nn(Nn({},e),t),p())),l=y,d()||(h=o.setTimeout(m))};return()=>(h=o.setTimeout(m),()=>{h()})}function E4(e,t,n,r,i,o,l){var u=null,p=i.reduce((m,y)=>Nn(Nn({},m),{},{[y]:[e[y],t[y]]}),{}),d,h=m=>{d||(d=m);var y=(m-d)/r,b=du((A,C)=>Wf(...C,n(y)),p);if(o(Nn(Nn(Nn({},e),t),b)),y<1)u=l.setTimeout(h);else{var x=du((A,C)=>Wf(...C,n(1)),p);o(Nn(Nn(Nn({},e),t),x))}};return()=>(u=l.setTimeout(h),()=>{u()})}const C4=(e,t,n,r,i,o)=>{var l=v4(e,t);return n.isStepper===!0?A4(e,t,n,l,i,o):E4(e,t,n,r,l,i,o)};var Xf=1e-4,O_=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],__=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),OC=(e,t)=>n=>{var r=O_(e,t);return __(r,n)},T4=(e,t)=>n=>{var r=O_(e,t),i=[...r.map((o,l)=>o*l).slice(1),0];return __(i,n)},_C=function(){for(var t,n,r,i,o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var p=l[0].split("(");p[0]==="cubic-bezier"&&p[1].split(")")[0].split(",").length===4&&([t,r,n,i]=p[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else l.length===4&&([t,r,n,i]=l);var d=OC(t,n),h=OC(r,i),m=T4(t,n),y=x=>x>1?1:x<0?0:x,b=x=>{for(var A=x>1?1:x,C=A,T=0;T<8;++T){var O=d(C)-A,_=m(C);if(Math.abs(O-A)<Xf||_<Xf)return h(C);C=y(C-O/_)}return h(C)};return b.isStepper=!1,b},P4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,o=(l,u,p)=>{var d=-(l-u)*n,h=p*r,m=p+(d-h)*i/1e3,y=p*i/1e3+l;return Math.abs(y-u)<Xf&&Math.abs(m)<Xf?[u,0]:[y,m]};return o.isStepper=!0,o.dt=i,o},w4=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _C(e);case"spring":return P4();default:if(e.split("(")[0]==="cubic-bezier")return _C(e)}return typeof e=="function"?e:null};function O4(e){var t,n=()=>null,r=!1,i=null,o=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[p,...d]=u;if(typeof p=="number"){i=e.setTimeout(o.bind(null,d),p);return}o(p),i=e.setTimeout(o.bind(null,d));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),o(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class _4{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function N4(){return O4(new _4)}var D4=E.createContext(N4);function k4(e,t){var n=E.useContext(D4);return E.useMemo(()=>t??n(e),[e,t,n])}var M4={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},NC={t:0},Sy={t:1};function Lp(e){var t=Jr(e,M4),{isActive:n,canBegin:r,duration:i,easing:o,begin:l,onAnimationEnd:u,onAnimationStart:p,children:d}=t,h=k4(t.animationId,t.animationManager),[m,y]=E.useState(n?NC:Sy),b=E.useRef(null);return E.useEffect(()=>{n||y(Sy)},[n]),E.useEffect(()=>{if(!n||!r)return p4;var x=C4(NC,Sy,w4(o),i,y,h.getTimeoutController()),A=()=>{b.current=x()};return h.start([p,l,A,i,u]),()=>{h.stop(),b.current&&b.current(),u()}},[n,r,i,o,l,p,u,h]),d(m.t)}function $p(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(lu(t)),r=E.useRef(e);return r.current!==e&&(n.current=lu(t),r.current=e),n.current}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(n),!0).forEach(function(r){j4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j4(e,t,n){return(t=I4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I4(e){var t=R4(e,"string");return typeof t=="symbol"?t:t+""}function R4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qf.apply(null,arguments)}var MC=(e,t,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,p=r>=0&&n>=0||r<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,y=4;m<y;m++)h[m]=i[m]>o?o:i[m];d="M".concat(e,",").concat(t+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(p,",").concat(e+u*h[0],",").concat(t)),d+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(p,`,
        `).concat(e+n,",").concat(t+l*h[1])),d+="L ".concat(e+n,",").concat(t+r-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(p,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),d+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(p,`,
        `).concat(e,",").concat(t+r-l*h[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);d="M ".concat(e,",").concat(t+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+u*b,",").concat(t,`
            L `).concat(e+n-u*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+n,",").concat(t+l*b,`
            L `).concat(e+n,",").concat(t+r-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+n-u*b,",").concat(t+r,`
            L `).concat(e+u*b,",").concat(t+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e,",").concat(t+r-l*b," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},L4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},N_=e=>{var t=Jr(e,L4),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ne=n.current.getTotalLength();ne&&i(ne)}catch{}},[]);var{x:o,y:l,width:u,height:p,radius:d,className:h}=t,{animationEasing:m,animationDuration:y,animationBegin:b,isAnimationActive:x,isUpdateAnimationActive:A}=t,C=E.useRef(u),T=E.useRef(p),O=E.useRef(o),_=E.useRef(l),M=E.useMemo(()=>({x:o,y:l,width:u,height:p,radius:d}),[o,l,u,p,d]),D=$p(M,"rectangle-");if(o!==+o||l!==+l||u!==+u||p!==+p||u===0||p===0)return null;var k=ft("recharts-rectangle",h);if(!A)return E.createElement("path",Qf({},Kt(t,!0),{className:k,d:MC(o,l,u,p,d)}));var j=C.current,I=T.current,U=O.current,Y=_.current,V="0px ".concat(r===-1?1:r,"px"),W="".concat(r,"px 0px"),ae=P_(["strokeDasharray"],y,typeof m=="string"?m:void 0);return E.createElement(Lp,{animationId:D,key:D,canBegin:r>0,duration:y,easing:m,isActive:A,begin:b},ne=>{var re=Dn(j,u,ne),L=Dn(I,p,ne),G=Dn(U,o,ne),oe=Dn(Y,l,ne);n.current&&(C.current=re,T.current=L,O.current=G,_.current=oe);var ye;return x?ne>0?ye={transition:ae,strokeDasharray:W}:ye={strokeDasharray:V}:ye={strokeDasharray:W},E.createElement("path",Qf({},Kt(t,!0),{className:k,d:MC(G,oe,re,L,d),ref:n,style:kC(kC({},ye),t.style)}))})};function D_(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:o}=e,l=Wt(t,n,r,i),u=Wt(t,n,r,o);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D0.apply(null,arguments)}var $4=(e,t)=>{var n=yn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},hf=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:o,isExternal:l,cornerRadius:u,cornerIsExternal:p}=e,d=u*(l?1:-1)+r,h=Math.asin(u/d)/Kf,m=p?i:i+o*h,y=Wt(t,n,d,m),b=Wt(t,n,r,m),x=p?i-o*h:i,A=Wt(t,n,d*Math.cos(h*Kf),x);return{center:y,circleTangency:b,lineTangency:A,theta:h}},k_=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:l}=e,u=$4(o,l),p=o+u,d=Wt(t,n,i,o),h=Wt(t,n,i,p),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(o>p),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var y=Wt(t,n,r,o),b=Wt(t,n,r,p);m+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(o<=p),`,
            `).concat(y.x,",").concat(y.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},B4=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:p,endAngle:d}=e,h=yn(d-p),{circleTangency:m,lineTangency:y,theta:b}=hf({cx:t,cy:n,radius:i,angle:p,sign:h,cornerRadius:o,cornerIsExternal:u}),{circleTangency:x,lineTangency:A,theta:C}=hf({cx:t,cy:n,radius:i,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:u}),T=u?Math.abs(p-d):Math.abs(p-d)-b-C;if(T<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):k_({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:p,endAngle:d});var O="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:_,lineTangency:M,theta:D}=hf({cx:t,cy:n,radius:r,angle:p,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),{circleTangency:k,lineTangency:j,theta:I}=hf({cx:t,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),U=u?Math.abs(p-d):Math.abs(p-d)-D-I;if(U<0&&o===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(U>180),",").concat(+(h>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},U4={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},M_=e=>{var t=Jr(e,U4),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:p,startAngle:d,endAngle:h,className:m}=t;if(o<i||d===h)return null;var y=ft("recharts-sector",m),b=o-i,x=zn(l,b,0,!0),A;return x>0&&Math.abs(d-h)<360?A=B4({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,b/2),forceCornerRadius:u,cornerIsExternal:p,startAngle:d,endAngle:h}):A=k_({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h}),E.createElement("path",D0({},Kt(t,!0),{className:y,d:A}))};function z4(e,t,n){var r,i,o,l;if(e==="horizontal")r=t.x,o=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,o=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:p,innerRadius:d,outerRadius:h,angle:m}=t,y=Wt(u,p,d,m),b=Wt(u,p,h,m);r=y.x,i=y.y,o=b.x,l=b.y}else return D_(t);return[{x:r,y:i},{x:o,y:l}]}var xy={},Ay={},Ey={},jC;function G4(){return jC||(jC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BO();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(Ey)),Ey}var IC;function H4(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G4();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(Ay)),Ay}var RC;function Y4(){return RC||(RC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UO(),n=H4();function r(i,o,l){l&&typeof l!="number"&&t.isIterateeCall(i,o,l)&&(o=l=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),l=l===void 0?i<o?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((o-i)/(l||1)),0),p=new Array(u);for(let d=0;d<u;d++)p[d]=i,i+=l;return p}e.range=r})(xy)),xy}var Cy,LC;function q4(){return LC||(LC=1,Cy=Y4().range),Cy}var F4=q4();const j_=da(F4);function ts(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function V4(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bv(e){let t,n,r;e.length!==2?(t=ts,n=(u,p)=>ts(e(u),p),r=(u,p)=>e(u)-p):(t=e===ts||e===V4?e:K4,n=e,r=e);function i(u,p,d=0,h=u.length){if(d<h){if(t(p,p)!==0)return h;do{const m=d+h>>>1;n(u[m],p)<0?d=m+1:h=m}while(d<h)}return d}function o(u,p,d=0,h=u.length){if(d<h){if(t(p,p)!==0)return h;do{const m=d+h>>>1;n(u[m],p)<=0?d=m+1:h=m}while(d<h)}return d}function l(u,p,d=0,h=u.length){const m=i(u,p,d,h-1);return m>d&&r(u[m-1],p)>-r(u[m],p)?m-1:m}return{left:i,center:l,right:o}}function K4(){return 0}function I_(e){return e===null?NaN:+e}function*W4(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const X4=Bv(ts),Eu=X4.right;Bv(I_).center;class $C extends Map{constructor(t,n=J4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(BC(this,t))}has(t){return super.has(BC(this,t))}set(t,n){return super.set(Q4(this,t),n)}delete(t){return super.delete(Z4(this,t))}}function BC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Q4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Z4({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function J4(e){return e!==null&&typeof e=="object"?e.valueOf():e}function e$(e=ts){if(e===ts)return R_;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function R_(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const t$=Math.sqrt(50),n$=Math.sqrt(10),r$=Math.sqrt(2);function Zf(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=t$?10:o>=n$?5:o>=r$?2:1;let u,p,d;return i<0?(d=Math.pow(10,-i)/l,u=Math.round(e*d),p=Math.round(t*d),u/d<e&&++u,p/d>t&&--p,d=-d):(d=Math.pow(10,i)*l,u=Math.round(e/d),p=Math.round(t/d),u*d<e&&++u,p*d>t&&--p),p<u&&.5<=n&&n<2?Zf(e,t,n*2):[u,p,d]}function k0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?Zf(t,e,n):Zf(e,t,n);if(!(o>=i))return[];const u=o-i+1,p=new Array(u);if(r)if(l<0)for(let d=0;d<u;++d)p[d]=(o-d)/-l;else for(let d=0;d<u;++d)p[d]=(o-d)*l;else if(l<0)for(let d=0;d<u;++d)p[d]=(i+d)/-l;else for(let d=0;d<u;++d)p[d]=(i+d)*l;return p}function M0(e,t,n){return t=+t,e=+e,n=+n,Zf(e,t,n)[2]}function j0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?M0(t,e,n):M0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function UC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function zC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function L_(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?R_:e$(i);r>n;){if(r-n>600){const p=r-n+1,d=t-n+1,h=Math.log(p),m=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*m*(p-m)/p)*(d-p/2<0?-1:1),b=Math.max(n,Math.floor(t-d*m/p+y)),x=Math.min(r,Math.floor(t+(p-d)*m/p+y));L_(e,t,b,x,i)}const o=e[t];let l=n,u=r;for(Kc(e,n,t),i(e[r],o)>0&&Kc(e,n,r);l<u;){for(Kc(e,l,u),++l,--u;i(e[l],o)<0;)++l;for(;i(e[u],o)>0;)--u}i(e[n],o)===0?Kc(e,n,u):(++u,Kc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Kc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function a$(e,t,n){if(e=Float64Array.from(W4(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return zC(e);if(t>=1)return UC(e);var r,i=(r-1)*t,o=Math.floor(i),l=UC(L_(e,o).subarray(0,o+1)),u=zC(e.subarray(o+1));return l+(u-l)*(i-o)}}function i$(e,t,n=I_){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),l=+n(e[o],o,e),u=+n(e[o+1],o+1,e);return l+(u-l)*(i-o)}}function s$(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function ea(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function hi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const I0=Symbol("implicit");function Uv(){var e=new $C,t=[],n=[],r=I0;function i(o){let l=e.get(o);if(l===void 0){if(r!==I0)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new $C;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Uv(t,n).unknown(r)},ea.apply(i,arguments),i}function zv(){var e=Uv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,l,u=!1,p=0,d=0,h=.5;delete e.unknown;function m(){var y=t().length,b=i<r,x=b?i:r,A=b?r:i;o=(A-x)/Math.max(1,y-p+d*2),u&&(o=Math.floor(o)),x+=(A-x-o*(y-p))*h,l=o*(1-p),u&&(x=Math.round(x),l=Math.round(l));var C=s$(y).map(function(T){return x+o*T});return n(b?C.reverse():C)}return e.domain=function(y){return arguments.length?(t(y),m()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(y){return arguments.length?(u=!!y,m()):u},e.padding=function(y){return arguments.length?(p=Math.min(1,d=+y),m()):p},e.paddingInner=function(y){return arguments.length?(p=Math.min(1,y),m()):p},e.paddingOuter=function(y){return arguments.length?(d=+y,m()):d},e.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),m()):h},e.copy=function(){return zv(t(),[r,i]).round(u).paddingInner(p).paddingOuter(d).align(h)},ea.apply(m(),arguments)}function $_(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $_(t())},e}function o$(){return $_(zv.apply(null,arguments).paddingInner(1))}function Gv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function B_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Cu(){}var fu=.7,Jf=1/fu,ml="\\s*([+-]?\\d+)\\s*",pu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l$=/^#([0-9a-f]{3,8})$/,c$=new RegExp(`^rgb\\(${ml},${ml},${ml}\\)$`),u$=new RegExp(`^rgb\\(${Oa},${Oa},${Oa}\\)$`),d$=new RegExp(`^rgba\\(${ml},${ml},${ml},${pu}\\)$`),f$=new RegExp(`^rgba\\(${Oa},${Oa},${Oa},${pu}\\)$`),p$=new RegExp(`^hsl\\(${pu},${Oa},${Oa}\\)$`),h$=new RegExp(`^hsla\\(${pu},${Oa},${Oa},${pu}\\)$`),GC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gv(Cu,hu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:HC,formatHex:HC,formatHex8:m$,formatHsl:g$,formatRgb:YC,toString:YC});function HC(){return this.rgb().formatHex()}function m$(){return this.rgb().formatHex8()}function g$(){return U_(this).formatHsl()}function YC(){return this.rgb().formatRgb()}function hu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=l$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qC(t):n===3?new dr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=c$.exec(e))?new dr(t[1],t[2],t[3],1):(t=u$.exec(e))?new dr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=d$.exec(e))?mf(t[1],t[2],t[3],t[4]):(t=f$.exec(e))?mf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=p$.exec(e))?KC(t[1],t[2]/100,t[3]/100,1):(t=h$.exec(e))?KC(t[1],t[2]/100,t[3]/100,t[4]):GC.hasOwnProperty(e)?qC(GC[e]):e==="transparent"?new dr(NaN,NaN,NaN,0):null}function qC(e){return new dr(e>>16&255,e>>8&255,e&255,1)}function mf(e,t,n,r){return r<=0&&(e=t=n=NaN),new dr(e,t,n,r)}function y$(e){return e instanceof Cu||(e=hu(e)),e?(e=e.rgb(),new dr(e.r,e.g,e.b,e.opacity)):new dr}function R0(e,t,n,r){return arguments.length===1?y$(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Gv(dr,R0,B_(Cu,{brighter(e){return e=e==null?Jf:Math.pow(Jf,e),new dr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fu:Math.pow(fu,e),new dr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dr(Ks(this.r),Ks(this.g),Ks(this.b),ep(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FC,formatHex:FC,formatHex8:v$,formatRgb:VC,toString:VC}));function FC(){return`#${Hs(this.r)}${Hs(this.g)}${Hs(this.b)}`}function v$(){return`#${Hs(this.r)}${Hs(this.g)}${Hs(this.b)}${Hs((isNaN(this.opacity)?1:this.opacity)*255)}`}function VC(){const e=ep(this.opacity);return`${e===1?"rgb(":"rgba("}${Ks(this.r)}, ${Ks(this.g)}, ${Ks(this.b)}${e===1?")":`, ${e})`}`}function ep(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ks(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hs(e){return e=Ks(e),(e<16?"0":"")+e.toString(16)}function KC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ua(e,t,n,r)}function U_(e){if(e instanceof ua)return new ua(e.h,e.s,e.l,e.opacity);if(e instanceof Cu||(e=hu(e)),!e)return new ua;if(e instanceof ua)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,u=o-i,p=(o+i)/2;return u?(t===o?l=(n-r)/u+(n<r)*6:n===o?l=(r-t)/u+2:l=(t-n)/u+4,u/=p<.5?o+i:2-o-i,l*=60):u=p>0&&p<1?0:l,new ua(l,u,p,e.opacity)}function b$(e,t,n,r){return arguments.length===1?U_(e):new ua(e,t,n,r??1)}function ua(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gv(ua,b$,B_(Cu,{brighter(e){return e=e==null?Jf:Math.pow(Jf,e),new ua(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fu:Math.pow(fu,e),new ua(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new dr(Ty(e>=240?e-240:e+120,i,r),Ty(e,i,r),Ty(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ua(WC(this.h),gf(this.s),gf(this.l),ep(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ep(this.opacity);return`${e===1?"hsl(":"hsla("}${WC(this.h)}, ${gf(this.s)*100}%, ${gf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function WC(e){return e=(e||0)%360,e<0?e+360:e}function gf(e){return Math.max(0,Math.min(1,e||0))}function Ty(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Hv=e=>()=>e;function S$(e,t){return function(n){return e+n*t}}function x$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function A$(e){return(e=+e)==1?z_:function(t,n){return n-t?x$(t,n,e):Hv(isNaN(t)?n:t)}}function z_(e,t){var n=t-e;return n?S$(e,n):Hv(isNaN(e)?t:e)}const XC=(function e(t){var n=A$(t);function r(i,o){var l=n((i=R0(i)).r,(o=R0(o)).r),u=n(i.g,o.g),p=n(i.b,o.b),d=z_(i.opacity,o.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=p(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function E$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function C$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function T$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=Nl(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(u){for(l=0;l<r;++l)o[l]=i[l](u);return o}}function P$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w$(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Nl(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var L0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Py=new RegExp(L0.source,"g");function O$(e){return function(){return e}}function _$(e){return function(t){return e(t)+""}}function N$(e,t){var n=L0.lastIndex=Py.lastIndex=0,r,i,o,l=-1,u=[],p=[];for(e=e+"",t=t+"";(r=L0.exec(e))&&(i=Py.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),u[l]?u[l]+=o:u[++l]=o),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,p.push({i:l,x:tp(r,i)})),n=Py.lastIndex;return n<t.length&&(o=t.slice(n),u[l]?u[l]+=o:u[++l]=o),u.length<2?p[0]?_$(p[0].x):O$(t):(t=p.length,function(d){for(var h=0,m;h<t;++h)u[(m=p[h]).i]=m.x(d);return u.join("")})}function Nl(e,t){var n=typeof t,r;return t==null||n==="boolean"?Hv(t):(n==="number"?tp:n==="string"?(r=hu(t))?(t=r,XC):N$:t instanceof hu?XC:t instanceof Date?P$:C$(t)?E$:Array.isArray(t)?T$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?w$:tp)(e,t)}function Yv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function D$(e,t){t===void 0&&(t=e,e=Nl);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return o[u](l-u)}}function k$(e){return function(){return e}}function np(e){return+e}var QC=[0,1];function Zn(e){return e}function $0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:k$(isNaN(t)?NaN:.5)}function M$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function j$(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=$0(i,r),o=n(l,o)):(r=$0(r,i),o=n(o,l)),function(u){return o(r(u))}}function I$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=$0(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(u){var p=Eu(e,u,1,r)-1;return o[p](i[p](u))}}function Tu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Bp(){var e=QC,t=QC,n=Nl,r,i,o,l=Zn,u,p,d;function h(){var y=Math.min(e.length,t.length);return l!==Zn&&(l=M$(e[0],e[y-1])),u=y>2?I$:j$,p=d=null,m}function m(y){return y==null||isNaN(y=+y)?o:(p||(p=u(e.map(r),t,n)))(r(l(y)))}return m.invert=function(y){return l(i((d||(d=u(t,e.map(r),tp)))(y)))},m.domain=function(y){return arguments.length?(e=Array.from(y,np),h()):e.slice()},m.range=function(y){return arguments.length?(t=Array.from(y),h()):t.slice()},m.rangeRound=function(y){return t=Array.from(y),n=Yv,h()},m.clamp=function(y){return arguments.length?(l=y?!0:Zn,h()):l!==Zn},m.interpolate=function(y){return arguments.length?(n=y,h()):n},m.unknown=function(y){return arguments.length?(o=y,m):o},function(y,b){return r=y,i=b,h()}}function qv(){return Bp()(Zn,Zn)}function R$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xl(e){return e=rp(Math.abs(e)),e?e[1]:NaN}function L$(e,t){return function(n,r){for(var i=n.length,o=[],l=0,u=e[0],p=0;i>0&&u>0&&(p+u+1>r&&(u=Math.max(1,r-p)),o.push(n.substring(i-=u,i+u)),!((p+=u+1)>r));)u=e[l=(l+1)%e.length];return o.reverse().join(t)}}function $$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var B$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mu(e){if(!(t=B$.exec(e)))throw new Error("invalid format: "+e);var t;return new Fv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mu.prototype=Fv.prototype;function Fv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Fv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function U$(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var G_;function z$(e,t){var n=rp(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(G_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+rp(e,Math.max(0,t+o-1))[0]}function ZC(e,t){var n=rp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const JC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:R$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZC(e*100,t),r:ZC,s:z$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function eT(e){return e}var tT=Array.prototype.map,nT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function G$(e){var t=e.grouping===void 0||e.thousands===void 0?eT:L$(tT.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?eT:$$(tT.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function d(m){m=mu(m);var y=m.fill,b=m.align,x=m.sign,A=m.symbol,C=m.zero,T=m.width,O=m.comma,_=m.precision,M=m.trim,D=m.type;D==="n"?(O=!0,D="g"):JC[D]||(_===void 0&&(_=12),M=!0,D="g"),(C||y==="0"&&b==="=")&&(C=!0,y="0",b="=");var k=A==="$"?n:A==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",j=A==="$"?r:/[%p]/.test(D)?l:"",I=JC[D],U=/[defgprs%]/.test(D);_=_===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function Y(V){var W=k,ae=j,ne,re,L;if(D==="c")ae=I(V)+ae,V="";else{V=+V;var G=V<0||1/V<0;if(V=isNaN(V)?p:I(Math.abs(V),_),M&&(V=U$(V)),G&&+V==0&&x!=="+"&&(G=!1),W=(G?x==="("?x:u:x==="-"||x==="("?"":x)+W,ae=(D==="s"?nT[8+G_/3]:"")+ae+(G&&x==="("?")":""),U){for(ne=-1,re=V.length;++ne<re;)if(L=V.charCodeAt(ne),48>L||L>57){ae=(L===46?i+V.slice(ne+1):V.slice(ne))+ae,V=V.slice(0,ne);break}}}O&&!C&&(V=t(V,1/0));var oe=W.length+V.length+ae.length,ye=oe<T?new Array(T-oe+1).join(y):"";switch(O&&C&&(V=t(ye+V,ye.length?T-ae.length:1/0),ye=""),b){case"<":V=W+V+ae+ye;break;case"=":V=W+ye+V+ae;break;case"^":V=ye.slice(0,oe=ye.length>>1)+W+V+ae+ye.slice(oe);break;default:V=ye+W+V+ae;break}return o(V)}return Y.toString=function(){return m+""},Y}function h(m,y){var b=d((m=mu(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(xl(y)/3)))*3,A=Math.pow(10,-x),C=nT[8+x/3];return function(T){return b(A*T)+C}}return{format:d,formatPrefix:h}}var yf,Vv,H_;H$({thousands:",",grouping:[3],currency:["$",""]});function H$(e){return yf=G$(e),Vv=yf.format,H_=yf.formatPrefix,yf}function Y$(e){return Math.max(0,-xl(Math.abs(e)))}function q$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xl(t)/3)))*3-xl(Math.abs(e)))}function F$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xl(t)-xl(e))+1}function Y_(e,t,n,r){var i=j0(e,t,n),o;switch(r=mu(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=q$(i,l))&&(r.precision=o),H_(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=F$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Y$(i))&&(r.precision=o-(r.type==="%")*2);break}}return Vv(r)}function ss(e){var t=e.domain;return e.ticks=function(n){var r=t();return k0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Y_(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],u=r[o],p,d,h=10;for(u<l&&(d=l,l=u,u=d,d=i,i=o,o=d);h-- >0;){if(d=M0(l,u,n),d===p)return r[i]=l,r[o]=u,t(r);if(d>0)l=Math.floor(l/d)*d,u=Math.ceil(u/d)*d;else if(d<0)l=Math.ceil(l*d)/d,u=Math.floor(u*d)/d;else break;p=d}return e},e}function q_(){var e=qv();return e.copy=function(){return Tu(e,q_())},ea.apply(e,arguments),ss(e)}function F_(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,np),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return F_(e).unknown(t)},e=arguments.length?Array.from(e,np):[0,1],ss(n)}function V_(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}function rT(e){return Math.log(e)}function aT(e){return Math.exp(e)}function V$(e){return-Math.log(-e)}function K$(e){return-Math.exp(-e)}function W$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function X$(e){return e===10?W$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Q$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function iT(e){return(t,n)=>-e(-t,n)}function Kv(e){const t=e(rT,aT),n=t.domain;let r=10,i,o;function l(){return i=Q$(r),o=X$(r),n()[0]<0?(i=iT(i),o=iT(o),e(V$,K$)):e(rT,aT),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const p=n();let d=p[0],h=p[p.length-1];const m=h<d;m&&([d,h]=[h,d]);let y=i(d),b=i(h),x,A;const C=u==null?10:+u;let T=[];if(!(r%1)&&b-y<C){if(y=Math.floor(y),b=Math.ceil(b),d>0){for(;y<=b;++y)for(x=1;x<r;++x)if(A=y<0?x/o(-y):x*o(y),!(A<d)){if(A>h)break;T.push(A)}}else for(;y<=b;++y)for(x=r-1;x>=1;--x)if(A=y>0?x/o(-y):x*o(y),!(A<d)){if(A>h)break;T.push(A)}T.length*2<C&&(T=k0(d,h,C))}else T=k0(y,b,Math.min(b-y,C)).map(o);return m?T.reverse():T},t.tickFormat=(u,p)=>{if(u==null&&(u=10),p==null&&(p=r===10?"s":","),typeof p!="function"&&(!(r%1)&&(p=mu(p)).precision==null&&(p.trim=!0),p=Vv(p)),u===1/0)return p;const d=Math.max(1,r*u/t.ticks().length);return h=>{let m=h/o(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=d?p(h):""}},t.nice=()=>n(V_(n(),{floor:u=>o(Math.floor(i(u))),ceil:u=>o(Math.ceil(i(u)))})),t}function K_(){const e=Kv(Bp()).domain([1,10]);return e.copy=()=>Tu(e,K_()).base(e.base()),ea.apply(e,arguments),e}function sT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function oT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Wv(e){var t=1,n=e(sT(t),oT(t));return n.constant=function(r){return arguments.length?e(sT(t=+r),oT(t)):t},ss(n)}function W_(){var e=Wv(Bp());return e.copy=function(){return Tu(e,W_()).constant(e.constant())},ea.apply(e,arguments)}function lT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Z$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function J$(e){return e<0?-e*e:e*e}function Xv(e){var t=e(Zn,Zn),n=1;function r(){return n===1?e(Zn,Zn):n===.5?e(Z$,J$):e(lT(n),lT(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ss(t)}function Qv(){var e=Xv(Bp());return e.copy=function(){return Tu(e,Qv()).exponent(e.exponent())},ea.apply(e,arguments),e}function e8(){return Qv.apply(null,arguments).exponent(.5)}function cT(e){return Math.sign(e)*e*e}function t8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function X_(){var e=qv(),t=[0,1],n=!1,r;function i(o){var l=t8(e(o));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(o){return e.invert(cT(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,np)).map(cT)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return X_(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ea.apply(i,arguments),ss(i)}function Q_(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=i$(e,l/u);return o}function o(l){return l==null||isNaN(l=+l)?r:t[Eu(n,l)]}return o.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ts),i()},o.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Q_().domain(e).range(t).unknown(r)},ea.apply(o,arguments)}function Z_(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function l(p){return p!=null&&p<=p?i[Eu(r,p,0,n)]:o}function u(){var p=-1;for(r=new Array(n);++p<n;)r[p]=((p+1)*t-(p-n)*e)/(n+1);return l}return l.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,u()):[e,t]},l.range=function(p){return arguments.length?(n=(i=Array.from(p)).length-1,u()):i.slice()},l.invertExtent=function(p){var d=i.indexOf(p);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},l.unknown=function(p){return arguments.length&&(o=p),l},l.thresholds=function(){return r.slice()},l.copy=function(){return Z_().domain([e,t]).range(i).unknown(o)},ea.apply(ss(l),arguments)}function J_(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Eu(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return J_().domain(e).range(t).unknown(n)},ea.apply(i,arguments)}const wy=new Date,Oy=new Date;function ln(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),u=i.ceil(o);return o-l<u-o?l:u},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,u)=>{const p=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<l)||!(u>0))return p;let d;do p.push(d=new Date(+o)),t(o,u),e(o);while(d<o&&o<l);return p},i.filter=o=>ln(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!o(l););else for(;--u>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>(wy.setTime(+o),Oy.setTime(+l),e(wy),e(Oy),Math.floor(n(wy,Oy))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const ap=ln(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ap.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ln(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ap);ap.range;const ri=1e3,Kr=ri*60,ai=Kr*60,li=ai*24,Zv=li*7,uT=li*30,_y=li*365,Ys=ln(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getUTCSeconds());Ys.range;const Jv=ln(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ri)},(e,t)=>{e.setTime(+e+t*Kr)},(e,t)=>(t-e)/Kr,e=>e.getMinutes());Jv.range;const eb=ln(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Kr)},(e,t)=>(t-e)/Kr,e=>e.getUTCMinutes());eb.range;const tb=ln(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ri-e.getMinutes()*Kr)},(e,t)=>{e.setTime(+e+t*ai)},(e,t)=>(t-e)/ai,e=>e.getHours());tb.range;const nb=ln(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ai)},(e,t)=>(t-e)/ai,e=>e.getUTCHours());nb.range;const Pu=ln(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kr)/li,e=>e.getDate()-1);Pu.range;const Up=ln(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/li,e=>e.getUTCDate()-1);Up.range;const eN=ln(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/li,e=>Math.floor(e/li));eN.range;function oo(e){return ln(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kr)/Zv)}const zp=oo(0),ip=oo(1),n8=oo(2),r8=oo(3),Al=oo(4),a8=oo(5),i8=oo(6);zp.range;ip.range;n8.range;r8.range;Al.range;a8.range;i8.range;function lo(e){return ln(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Zv)}const Gp=lo(0),sp=lo(1),s8=lo(2),o8=lo(3),El=lo(4),l8=lo(5),c8=lo(6);Gp.range;sp.range;s8.range;o8.range;El.range;l8.range;c8.range;const rb=ln(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());rb.range;const ab=ln(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ab.range;const ci=ln(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ci.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ln(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ci.range;const ui=ln(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ui.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ln(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ui.range;function tN(e,t,n,r,i,o){const l=[[Ys,1,ri],[Ys,5,5*ri],[Ys,15,15*ri],[Ys,30,30*ri],[o,1,Kr],[o,5,5*Kr],[o,15,15*Kr],[o,30,30*Kr],[i,1,ai],[i,3,3*ai],[i,6,6*ai],[i,12,12*ai],[r,1,li],[r,2,2*li],[n,1,Zv],[t,1,uT],[t,3,3*uT],[e,1,_y]];function u(d,h,m){const y=h<d;y&&([d,h]=[h,d]);const b=m&&typeof m.range=="function"?m:p(d,h,m),x=b?b.range(d,+h+1):[];return y?x.reverse():x}function p(d,h,m){const y=Math.abs(h-d)/m,b=Bv(([,,C])=>C).right(l,y);if(b===l.length)return e.every(j0(d/_y,h/_y,m));if(b===0)return ap.every(Math.max(j0(d,h,m),1));const[x,A]=l[y/l[b-1][2]<l[b][2]/y?b-1:b];return x.every(A)}return[u,p]}const[u8,d8]=tN(ui,ab,Gp,eN,nb,eb),[f8,p8]=tN(ci,rb,zp,Pu,tb,Jv);function Ny(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Dy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function h8(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,u=e.months,p=e.shortMonths,d=Xc(i),h=Qc(i),m=Xc(o),y=Qc(o),b=Xc(l),x=Qc(l),A=Xc(u),C=Qc(u),T=Xc(p),O=Qc(p),_={a:G,A:oe,b:ye,B:R,c:null,d:gT,e:gT,f:L8,g:V8,G:W8,H:j8,I:I8,j:R8,L:nN,m:$8,M:B8,p:K,q:F,Q:bT,s:ST,S:U8,u:z8,U:G8,V:H8,w:Y8,W:q8,x:null,X:null,y:F8,Y:K8,Z:X8,"%":vT},M={a:ie,A:he,b:me,B:xe,c:null,d:yT,e:yT,f:eB,g:uB,G:fB,H:Q8,I:Z8,j:J8,L:aN,m:tB,M:nB,p:Ye,q:qe,Q:bT,s:ST,S:rB,u:aB,U:iB,V:sB,w:oB,W:lB,x:null,X:null,y:cB,Y:dB,Z:pB,"%":vT},D={a:Y,A:V,b:W,B:ae,c:ne,d:hT,e:hT,f:N8,g:pT,G:fT,H:mT,I:mT,j:P8,L:_8,m:T8,M:w8,p:U,q:C8,Q:k8,s:M8,S:O8,u:b8,U:S8,V:x8,w:v8,W:A8,x:re,X:L,y:pT,Y:fT,Z:E8,"%":D8};_.x=k(n,_),_.X=k(r,_),_.c=k(t,_),M.x=k(n,M),M.X=k(r,M),M.c=k(t,M);function k(be,Re){return function(Le){var pe=[],tt=-1,Qe=0,Qt=be.length,lt,nt,xn;for(Le instanceof Date||(Le=new Date(+Le));++tt<Qt;)be.charCodeAt(tt)===37&&(pe.push(be.slice(Qe,tt)),(nt=dT[lt=be.charAt(++tt)])!=null?lt=be.charAt(++tt):nt=lt==="e"?" ":"0",(xn=Re[lt])&&(lt=xn(Le,nt)),pe.push(lt),Qe=tt+1);return pe.push(be.slice(Qe,tt)),pe.join("")}}function j(be,Re){return function(Le){var pe=Wc(1900,void 0,1),tt=I(pe,be,Le+="",0),Qe,Qt;if(tt!=Le.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(Re&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(Qe=Dy(Wc(pe.y,0,1)),Qt=Qe.getUTCDay(),Qe=Qt>4||Qt===0?sp.ceil(Qe):sp(Qe),Qe=Up.offset(Qe,(pe.V-1)*7),pe.y=Qe.getUTCFullYear(),pe.m=Qe.getUTCMonth(),pe.d=Qe.getUTCDate()+(pe.w+6)%7):(Qe=Ny(Wc(pe.y,0,1)),Qt=Qe.getDay(),Qe=Qt>4||Qt===0?ip.ceil(Qe):ip(Qe),Qe=Pu.offset(Qe,(pe.V-1)*7),pe.y=Qe.getFullYear(),pe.m=Qe.getMonth(),pe.d=Qe.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),Qt="Z"in pe?Dy(Wc(pe.y,0,1)).getUTCDay():Ny(Wc(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(Qt+5)%7:pe.w+pe.U*7-(Qt+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,Dy(pe)):Ny(pe)}}function I(be,Re,Le,pe){for(var tt=0,Qe=Re.length,Qt=Le.length,lt,nt;tt<Qe;){if(pe>=Qt)return-1;if(lt=Re.charCodeAt(tt++),lt===37){if(lt=Re.charAt(tt++),nt=D[lt in dT?Re.charAt(tt++):lt],!nt||(pe=nt(be,Le,pe))<0)return-1}else if(lt!=Le.charCodeAt(pe++))return-1}return pe}function U(be,Re,Le){var pe=d.exec(Re.slice(Le));return pe?(be.p=h.get(pe[0].toLowerCase()),Le+pe[0].length):-1}function Y(be,Re,Le){var pe=b.exec(Re.slice(Le));return pe?(be.w=x.get(pe[0].toLowerCase()),Le+pe[0].length):-1}function V(be,Re,Le){var pe=m.exec(Re.slice(Le));return pe?(be.w=y.get(pe[0].toLowerCase()),Le+pe[0].length):-1}function W(be,Re,Le){var pe=T.exec(Re.slice(Le));return pe?(be.m=O.get(pe[0].toLowerCase()),Le+pe[0].length):-1}function ae(be,Re,Le){var pe=A.exec(Re.slice(Le));return pe?(be.m=C.get(pe[0].toLowerCase()),Le+pe[0].length):-1}function ne(be,Re,Le){return I(be,t,Re,Le)}function re(be,Re,Le){return I(be,n,Re,Le)}function L(be,Re,Le){return I(be,r,Re,Le)}function G(be){return l[be.getDay()]}function oe(be){return o[be.getDay()]}function ye(be){return p[be.getMonth()]}function R(be){return u[be.getMonth()]}function K(be){return i[+(be.getHours()>=12)]}function F(be){return 1+~~(be.getMonth()/3)}function ie(be){return l[be.getUTCDay()]}function he(be){return o[be.getUTCDay()]}function me(be){return p[be.getUTCMonth()]}function xe(be){return u[be.getUTCMonth()]}function Ye(be){return i[+(be.getUTCHours()>=12)]}function qe(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var Re=k(be+="",_);return Re.toString=function(){return be},Re},parse:function(be){var Re=j(be+="",!1);return Re.toString=function(){return be},Re},utcFormat:function(be){var Re=k(be+="",M);return Re.toString=function(){return be},Re},utcParse:function(be){var Re=j(be+="",!0);return Re.toString=function(){return be},Re}}}var dT={"-":"",_:" ",0:"0"},bn=/^\s*\d+/,m8=/^%/,g8=/[\\^$*+?|[\]().{}]/g;function it(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function y8(e){return e.replace(g8,"\\$&")}function Xc(e){return new RegExp("^(?:"+e.map(y8).join("|")+")","i")}function Qc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function v8(e,t,n){var r=bn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function b8(e,t,n){var r=bn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function S8(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function x8(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function A8(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function fT(e,t,n){var r=bn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pT(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function E8(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function C8(e,t,n){var r=bn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function T8(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function hT(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function P8(e,t,n){var r=bn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function mT(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function w8(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function O8(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function _8(e,t,n){var r=bn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function N8(e,t,n){var r=bn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function D8(e,t,n){var r=m8.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function k8(e,t,n){var r=bn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function M8(e,t,n){var r=bn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function gT(e,t){return it(e.getDate(),t,2)}function j8(e,t){return it(e.getHours(),t,2)}function I8(e,t){return it(e.getHours()%12||12,t,2)}function R8(e,t){return it(1+Pu.count(ci(e),e),t,3)}function nN(e,t){return it(e.getMilliseconds(),t,3)}function L8(e,t){return nN(e,t)+"000"}function $8(e,t){return it(e.getMonth()+1,t,2)}function B8(e,t){return it(e.getMinutes(),t,2)}function U8(e,t){return it(e.getSeconds(),t,2)}function z8(e){var t=e.getDay();return t===0?7:t}function G8(e,t){return it(zp.count(ci(e)-1,e),t,2)}function rN(e){var t=e.getDay();return t>=4||t===0?Al(e):Al.ceil(e)}function H8(e,t){return e=rN(e),it(Al.count(ci(e),e)+(ci(e).getDay()===4),t,2)}function Y8(e){return e.getDay()}function q8(e,t){return it(ip.count(ci(e)-1,e),t,2)}function F8(e,t){return it(e.getFullYear()%100,t,2)}function V8(e,t){return e=rN(e),it(e.getFullYear()%100,t,2)}function K8(e,t){return it(e.getFullYear()%1e4,t,4)}function W8(e,t){var n=e.getDay();return e=n>=4||n===0?Al(e):Al.ceil(e),it(e.getFullYear()%1e4,t,4)}function X8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+it(t/60|0,"0",2)+it(t%60,"0",2)}function yT(e,t){return it(e.getUTCDate(),t,2)}function Q8(e,t){return it(e.getUTCHours(),t,2)}function Z8(e,t){return it(e.getUTCHours()%12||12,t,2)}function J8(e,t){return it(1+Up.count(ui(e),e),t,3)}function aN(e,t){return it(e.getUTCMilliseconds(),t,3)}function eB(e,t){return aN(e,t)+"000"}function tB(e,t){return it(e.getUTCMonth()+1,t,2)}function nB(e,t){return it(e.getUTCMinutes(),t,2)}function rB(e,t){return it(e.getUTCSeconds(),t,2)}function aB(e){var t=e.getUTCDay();return t===0?7:t}function iB(e,t){return it(Gp.count(ui(e)-1,e),t,2)}function iN(e){var t=e.getUTCDay();return t>=4||t===0?El(e):El.ceil(e)}function sB(e,t){return e=iN(e),it(El.count(ui(e),e)+(ui(e).getUTCDay()===4),t,2)}function oB(e){return e.getUTCDay()}function lB(e,t){return it(sp.count(ui(e)-1,e),t,2)}function cB(e,t){return it(e.getUTCFullYear()%100,t,2)}function uB(e,t){return e=iN(e),it(e.getUTCFullYear()%100,t,2)}function dB(e,t){return it(e.getUTCFullYear()%1e4,t,4)}function fB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?El(e):El.ceil(e),it(e.getUTCFullYear()%1e4,t,4)}function pB(){return"+0000"}function vT(){return"%"}function bT(e){return+e}function ST(e){return Math.floor(+e/1e3)}var ol,sN,oN;hB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hB(e){return ol=h8(e),sN=ol.format,ol.parse,oN=ol.utcFormat,ol.utcParse,ol}function mB(e){return new Date(e)}function gB(e){return e instanceof Date?+e:+new Date(+e)}function ib(e,t,n,r,i,o,l,u,p,d){var h=qv(),m=h.invert,y=h.domain,b=d(".%L"),x=d(":%S"),A=d("%I:%M"),C=d("%I %p"),T=d("%a %d"),O=d("%b %d"),_=d("%B"),M=d("%Y");function D(k){return(p(k)<k?b:u(k)<k?x:l(k)<k?A:o(k)<k?C:r(k)<k?i(k)<k?T:O:n(k)<k?_:M)(k)}return h.invert=function(k){return new Date(m(k))},h.domain=function(k){return arguments.length?y(Array.from(k,gB)):y().map(mB)},h.ticks=function(k){var j=y();return e(j[0],j[j.length-1],k??10)},h.tickFormat=function(k,j){return j==null?D:d(j)},h.nice=function(k){var j=y();return(!k||typeof k.range!="function")&&(k=t(j[0],j[j.length-1],k??10)),k?y(V_(j,k)):h},h.copy=function(){return Tu(h,ib(e,t,n,r,i,o,l,u,p,d))},h}function yB(){return ea.apply(ib(f8,p8,ci,rb,zp,Pu,tb,Jv,Ys,sN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vB(){return ea.apply(ib(u8,d8,ui,ab,Gp,Up,nb,eb,Ys,oN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hp(){var e=0,t=1,n,r,i,o,l=Zn,u=!1,p;function d(m){return m==null||isNaN(m=+m)?p:l(i===0?.5:(m=(o(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(m){return arguments.length?(u=!!m,d):u},d.interpolator=function(m){return arguments.length?(l=m,d):l};function h(m){return function(y){var b,x;return arguments.length?([b,x]=y,l=m(b,x),d):[l(0),l(1)]}}return d.range=h(Nl),d.rangeRound=h(Yv),d.unknown=function(m){return arguments.length?(p=m,d):p},function(m){return o=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),d}}function os(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function lN(){var e=ss(Hp()(Zn));return e.copy=function(){return os(e,lN())},hi.apply(e,arguments)}function cN(){var e=Kv(Hp()).domain([1,10]);return e.copy=function(){return os(e,cN()).base(e.base())},hi.apply(e,arguments)}function uN(){var e=Wv(Hp());return e.copy=function(){return os(e,uN()).constant(e.constant())},hi.apply(e,arguments)}function sb(){var e=Xv(Hp());return e.copy=function(){return os(e,sb()).exponent(e.exponent())},hi.apply(e,arguments)}function bB(){return sb.apply(null,arguments).exponent(.5)}function dN(){var e=[],t=Zn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Eu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ts),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>a$(e,o/r))},n.copy=function(){return dN(t).domain(e)},hi.apply(n,arguments)}function Yp(){var e=0,t=.5,n=1,r=1,i,o,l,u,p,d=Zn,h,m=!1,y;function b(A){return isNaN(A=+A)?y:(A=.5+((A=+h(A))-o)*(r*A<r*o?u:p),d(m?Math.max(0,Math.min(1,A)):A))}b.domain=function(A){return arguments.length?([e,t,n]=A,i=h(e=+e),o=h(t=+t),l=h(n=+n),u=i===o?0:.5/(o-i),p=o===l?0:.5/(l-o),r=o<i?-1:1,b):[e,t,n]},b.clamp=function(A){return arguments.length?(m=!!A,b):m},b.interpolator=function(A){return arguments.length?(d=A,b):d};function x(A){return function(C){var T,O,_;return arguments.length?([T,O,_]=C,d=D$(A,[T,O,_]),b):[d(0),d(.5),d(1)]}}return b.range=x(Nl),b.rangeRound=x(Yv),b.unknown=function(A){return arguments.length?(y=A,b):y},function(A){return h=A,i=A(e),o=A(t),l=A(n),u=i===o?0:.5/(o-i),p=o===l?0:.5/(l-o),r=o<i?-1:1,b}}function fN(){var e=ss(Yp()(Zn));return e.copy=function(){return os(e,fN())},hi.apply(e,arguments)}function pN(){var e=Kv(Yp()).domain([.1,1,10]);return e.copy=function(){return os(e,pN()).base(e.base())},hi.apply(e,arguments)}function hN(){var e=Wv(Yp());return e.copy=function(){return os(e,hN()).constant(e.constant())},hi.apply(e,arguments)}function ob(){var e=Xv(Yp());return e.copy=function(){return os(e,ob()).exponent(e.exponent())},hi.apply(e,arguments)}function SB(){return ob.apply(null,arguments).exponent(.5)}const tu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:zv,scaleDiverging:fN,scaleDivergingLog:pN,scaleDivergingPow:ob,scaleDivergingSqrt:SB,scaleDivergingSymlog:hN,scaleIdentity:F_,scaleImplicit:I0,scaleLinear:q_,scaleLog:K_,scaleOrdinal:Uv,scalePoint:o$,scalePow:Qv,scaleQuantile:Q_,scaleQuantize:Z_,scaleRadial:X_,scaleSequential:lN,scaleSequentialLog:cN,scaleSequentialPow:sb,scaleSequentialQuantile:dN,scaleSequentialSqrt:bB,scaleSequentialSymlog:uN,scaleSqrt:e8,scaleSymlog:W_,scaleThreshold:J_,scaleTime:yB,scaleUtc:vB,tickFormat:Y_},Symbol.toStringTag,{value:"Module"}));var ls=e=>e.chartData,lb=te([ls],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),cb=(e,t,n,r)=>r?lb(e):ls(e);function Cl(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Pr(t)&&Pr(n))return!0}return!1}function xT(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function xB(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,o;if(Pr(n))i=n;else if(typeof n=="function")return;if(Pr(r))o=r;else if(typeof r=="function")return;var l=[i,o];if(Cl(l))return l}}function AB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Cl(r))return xT(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,o]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(De(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&dC.test(i)){var p=dC.exec(i);if(p==null||t==null)l=void 0;else{var d=+p[1];l=t[0]-d}}else l=t?.[0];if(o==="auto")t!=null&&(u=Math.max(...t));else if(De(o))u=o;else if(typeof o=="function")try{t!=null&&(u=o(t?.[1]))}catch{}else if(typeof o=="string"&&fC.test(o)){var h=fC.exec(o);if(h==null||t==null)u=void 0;else{var m=+h[1];u=t[1]+m}}else u=t?.[1];var y=[l,u];if(Cl(y))return t==null?y:xT(y,t,n)}}}var Dl=1e9,EB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},db,Ot=!0,Qr="[DecimalError] ",Ws=Qr+"Invalid argument: ",ub=Qr+"Exponent out of range: ",kl=Math.floor,zs=Math.pow,CB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ar,gn=1e7,Et=7,mN=9007199254740991,op=kl(mN/Et),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Et;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ce.dividedBy=Ce.div=function(e){return si(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,n=t.constructor;return bt(si(t,new n(e),0,1),n.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return Xt(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Ar))throw Error(Qr+"NaN");if(n.s<1)throw Error(Qr+(n.s?"NaN":"-Infinity"));return n.eq(Ar)?new r(0):(Ot=!1,t=si(gu(n,o),gu(e,o),o),Ot=!0,bt(t,i))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?vN(t,e):gN(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Qr+"NaN");return n.s?(Ot=!1,t=si(n,e,0,1).times(e),Ot=!0,n.minus(t)):bt(new r(n),i)};Ce.naturalExponential=Ce.exp=function(){return yN(this)};Ce.naturalLogarithm=Ce.ln=function(){return gu(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?gN(t,e):vN(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ws+e);if(t=Xt(i)+1,r=i.d.length-1,n=r*Et+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ce.squareRoot=Ce.sqrt=function(){var e,t,n,r,i,o,l,u=this,p=u.constructor;if(u.s<1){if(!u.s)return new p(0);throw Error(Qr+"NaN")}for(e=Xt(u),Ot=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=wa(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=kl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new p(t)):r=new p(i.toString()),n=p.precision,i=l=n+3;;)if(o=r,r=o.plus(si(u,o,l+2)).times(.5),wa(o.d).slice(0,l)===(t=wa(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(bt(o,n+1,0),o.times(o).eq(u)){r=o;break}}else if(t!="9999")break;l+=4}return Ot=!0,bt(r,n)};Ce.times=Ce.mul=function(e){var t,n,r,i,o,l,u,p,d,h=this,m=h.constructor,y=h.d,b=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,p=y.length,d=b.length,p<d&&(o=y,y=b,b=o,l=p,p=d,d=l),o=[],l=p+d,r=l;r--;)o.push(0);for(r=d;--r>=0;){for(t=0,i=p+r;i>r;)u=o[i]+b[r]*y[i-r-1]+t,o[i--]=u%gn|0,t=u/gn|0;o[i]=(o[i]+t)%gn|0}for(;!o[--l];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,Ot?bt(e,m.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Na(e,0,Dl),t===void 0?t=r.rounding:Na(t,0,8),bt(n,e+Xt(n)+1,t))};Ce.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=eo(r,!0):(Na(e,0,Dl),t===void 0?t=i.rounding:Na(t,0,8),r=bt(new i(r),e+1,t),n=eo(r,!0,e+1)),n};Ce.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?eo(i):(Na(e,0,Dl),t===void 0?t=o.rounding:Na(t,0,8),r=bt(new o(i),e+Xt(i)+1,t),n=eo(r.abs(),!1,e+Xt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return bt(new t(e),Xt(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,n,r,i,o,l,u=this,p=u.constructor,d=12,h=+(e=new p(e));if(!e.s)return new p(Ar);if(u=new p(u),!u.s){if(e.s<1)throw Error(Qr+"Infinity");return u}if(u.eq(Ar))return u;if(r=p.precision,e.eq(Ar))return bt(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,o=u.s,l){if((n=h<0?-h:h)<=mN){for(i=new p(Ar),t=Math.ceil(r/Et+4),Ot=!1;n%2&&(i=i.times(u),ET(i.d,t)),n=kl(n/2),n!==0;)u=u.times(u),ET(u.d,t);return Ot=!0,e.s<0?new p(Ar).div(i):bt(i,r)}}else if(o<0)throw Error(Qr+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,Ot=!1,i=e.times(gu(u,r+d)),Ot=!0,i=yN(i),i.s=o,i};Ce.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?(n=Xt(i),r=eo(i,n<=o.toExpNeg||n>=o.toExpPos)):(Na(e,1,Dl),t===void 0?t=o.rounding:Na(t,0,8),i=bt(new o(i),e,t),n=Xt(i),r=eo(i,e<=n||n<=o.toExpNeg,e)),r};Ce.toSignificantDigits=Ce.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Na(e,1,Dl),t===void 0?t=r.rounding:Na(t,0,8)),bt(new r(n),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Xt(e),n=e.constructor;return eo(e,t<=n.toExpNeg||t>=n.toExpPos)};function gN(e,t){var n,r,i,o,l,u,p,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Ot?bt(t,m):t;if(p=e.d,d=t.d,l=e.e,i=t.e,p=p.slice(),o=l-i,o){for(o<0?(r=p,o=-o,u=d.length):(r=d,i=l,u=p.length),l=Math.ceil(m/Et),u=l>u?l+1:u+1,o>u&&(o=u,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(u=p.length,o=d.length,u-o<0&&(o=u,r=d,d=p,p=r),n=0;o;)n=(p[--o]=p[o]+d[o]+n)/gn|0,p[o]%=gn;for(n&&(p.unshift(n),++i),u=p.length;p[--u]==0;)p.pop();return t.d=p,t.e=i,Ot?bt(t,m):t}function Na(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ws+e)}function wa(e){var t,n,r,i=e.length-1,o="",l=e[0];if(i>0){for(o+=l,t=1;t<i;t++)r=e[t]+"",n=Et-r.length,n&&(o+=Xi(n)),o+=r;l=e[t],r=l+"",n=Et-r.length,n&&(o+=Xi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var si=(function(){function e(r,i){var o,l=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+l,r[u]=o%gn|0,l=o/gn|0;return l&&r.unshift(l),r}function t(r,i,o,l){var u,p;if(o!=l)p=o>l?1:-1;else for(u=p=0;u<o;u++)if(r[u]!=i[u]){p=r[u]>i[u]?1:-1;break}return p}function n(r,i,o){for(var l=0;o--;)r[o]-=l,l=r[o]<i[o]?1:0,r[o]=l*gn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,l){var u,p,d,h,m,y,b,x,A,C,T,O,_,M,D,k,j,I,U=r.constructor,Y=r.s==i.s?1:-1,V=r.d,W=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Qr+"Division by zero");for(p=r.e-i.e,j=W.length,D=V.length,b=new U(Y),x=b.d=[],d=0;W[d]==(V[d]||0);)++d;if(W[d]>(V[d]||0)&&--p,o==null?O=o=U.precision:l?O=o+(Xt(r)-Xt(i))+1:O=o,O<0)return new U(0);if(O=O/Et+2|0,d=0,j==1)for(h=0,W=W[0],O++;(d<D||h)&&O--;d++)_=h*gn+(V[d]||0),x[d]=_/W|0,h=_%W|0;else{for(h=gn/(W[0]+1)|0,h>1&&(W=e(W,h),V=e(V,h),j=W.length,D=V.length),M=j,A=V.slice(0,j),C=A.length;C<j;)A[C++]=0;I=W.slice(),I.unshift(0),k=W[0],W[1]>=gn/2&&++k;do h=0,u=t(W,A,j,C),u<0?(T=A[0],j!=C&&(T=T*gn+(A[1]||0)),h=T/k|0,h>1?(h>=gn&&(h=gn-1),m=e(W,h),y=m.length,C=A.length,u=t(m,A,y,C),u==1&&(h--,n(m,j<y?I:W,y))):(h==0&&(u=h=1),m=W.slice()),y=m.length,y<C&&m.unshift(0),n(A,m,C),u==-1&&(C=A.length,u=t(W,A,j,C),u<1&&(h++,n(A,j<C?I:W,C))),C=A.length):u===0&&(h++,A=[0]),x[d++]=h,u&&A[0]?A[C++]=V[M]||0:(A=[V[M]],C=1);while((M++<D||A[0]!==void 0)&&O--)}return x[0]||x.shift(),b.e=p,bt(b,l?o+Xt(b)+1:o)}})();function yN(e,t){var n,r,i,o,l,u,p=0,d=0,h=e.constructor,m=h.precision;if(Xt(e)>16)throw Error(ub+Xt(e));if(!e.s)return new h(Ar);for(Ot=!1,u=m,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(r=Math.log(zs(2,d))/Math.LN10*2+5|0,u+=r,n=i=o=new h(Ar),h.precision=u;;){if(i=bt(i.times(e),u),n=n.times(++p),l=o.plus(si(i,n,u)),wa(l.d).slice(0,u)===wa(o.d).slice(0,u)){for(;d--;)o=bt(o.times(o),u);return h.precision=m,t==null?(Ot=!0,bt(o,m)):o}o=l}}function Xt(e){for(var t=e.e*Et,n=e.d[0];n>=10;n/=10)t++;return t}function ky(e,t,n){if(t>e.LN10.sd())throw Ot=!0,n&&(e.precision=n),Error(Qr+"LN10 precision limit exceeded");return bt(new e(e.LN10),t)}function Xi(e){for(var t="";e--;)t+="0";return t}function gu(e,t){var n,r,i,o,l,u,p,d,h,m=1,y=10,b=e,x=b.d,A=b.constructor,C=A.precision;if(b.s<1)throw Error(Qr+(b.s?"NaN":"-Infinity"));if(b.eq(Ar))return new A(0);if(t==null?(Ot=!1,d=C):d=t,b.eq(10))return t==null&&(Ot=!0),ky(A,d);if(d+=y,A.precision=d,n=wa(x),r=n.charAt(0),o=Xt(b),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(e),n=wa(b.d),r=n.charAt(0),m++;o=Xt(b),r>1?(b=new A("0."+n),o++):b=new A(r+"."+n.slice(1))}else return p=ky(A,d+2,C).times(o+""),b=gu(new A(r+"."+n.slice(1)),d-y).plus(p),A.precision=C,t==null?(Ot=!0,bt(b,C)):b;for(u=l=b=si(b.minus(Ar),b.plus(Ar),d),h=bt(b.times(b),d),i=3;;){if(l=bt(l.times(h),d),p=u.plus(si(l,new A(i),d)),wa(p.d).slice(0,d)===wa(u.d).slice(0,d))return u=u.times(2),o!==0&&(u=u.plus(ky(A,d+2,C).times(o+""))),u=si(u,new A(m),d),A.precision=C,t==null?(Ot=!0,bt(u,C)):u;u=p,i+=2}}function AT(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=kl(n/Et),e.d=[],r=(n+1)%Et,n<0&&(r+=Et),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Et;r<i;)e.d.push(+t.slice(r,r+=Et));t=t.slice(r),r=Et-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Ot&&(e.e>op||e.e<-op))throw Error(ub+n)}else e.s=0,e.e=0,e.d=[0];return e}function bt(e,t,n){var r,i,o,l,u,p,d,h,m=e.d;for(l=1,o=m[0];o>=10;o/=10)l++;if(r=t-l,r<0)r+=Et,i=t,d=m[h=0];else{if(h=Math.ceil((r+1)/Et),o=m.length,h>=o)return e;for(d=o=m[h],l=1;o>=10;o/=10)l++;r%=Et,i=r-Et+l}if(n!==void 0&&(o=zs(10,l-i-1),u=d/o%10|0,p=t<0||m[h+1]!==void 0||d%o,p=n<4?(u||p)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||p||n==6&&(r>0?i>0?d/zs(10,l-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return p?(o=Xt(e),m.length=1,t=t-o-1,m[0]=zs(10,(Et-t%Et)%Et),e.e=kl(-t/Et)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=h,o=1,h--):(m.length=h+1,o=zs(10,Et-r),m[h]=i>0?(d/zs(10,l-i)%zs(10,i)|0)*o:0),p)for(;;)if(h==0){(m[0]+=o)==gn&&(m[0]=1,++e.e);break}else{if(m[h]+=o,m[h]!=gn)break;m[h--]=0,o=1}for(r=m.length;m[--r]===0;)m.pop();if(Ot&&(e.e>op||e.e<-op))throw Error(ub+Xt(e));return e}function vN(e,t){var n,r,i,o,l,u,p,d,h,m,y=e.constructor,b=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Ot?bt(t,b):t;if(p=e.d,m=t.d,r=t.e,d=e.e,p=p.slice(),l=d-r,l){for(h=l<0,h?(n=p,l=-l,u=m.length):(n=m,r=d,u=p.length),i=Math.max(Math.ceil(b/Et),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=p.length,u=m.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(p[i]!=m[i]){h=p[i]<m[i];break}l=0}for(h&&(n=p,p=m,m=n,t.s=-t.s),u=p.length,i=m.length-u;i>0;--i)p[u++]=0;for(i=m.length;i>l;){if(p[--i]<m[i]){for(o=i;o&&p[--o]===0;)p[o]=gn-1;--p[o],p[i]+=gn}p[i]-=m[i]}for(;p[--u]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=r,Ot?bt(t,b):t):new y(0)}function eo(e,t,n){var r,i=Xt(e),o=wa(e.d),l=o.length;return t?(n&&(r=n-l)>0?o=o.charAt(0)+"."+o.slice(1)+Xi(r):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Xi(-i-1)+o,n&&(r=n-l)>0&&(o+=Xi(r))):i>=l?(o+=Xi(i+1-l),n&&(r=n-i-1)>0&&(o=o+"."+Xi(r))):((r=i+1)<l&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(o+="."),o+=Xi(r))),e.s<0?"-"+o:o}function ET(e,t){if(e.length>t)return e.length=t,!0}function bN(e){var t,n,r;function i(o){var l=this;if(!(l instanceof i))return new i(o);if(l.constructor=i,o instanceof i){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ws+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return AT(l,o.toString())}else if(typeof o!="string")throw Error(Ws+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,CB.test(o))AT(l,o);else throw Error(Ws+o)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=bN,i.config=i.set=TB,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function TB(e){if(!e||typeof e!="object")throw Error(Qr+"Object expected");var t,n,r,i=["precision",1,Dl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(kl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Ws+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ws+n+": "+r);return this}var db=bN(EB);Ar=new db(1);const dt=db;var PB=e=>e,SN={},xN=e=>e===SN,CT=e=>function t(){return arguments.length===0||arguments.length===1&&xN(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},AN=(e,t)=>e===1?t:CT(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(l=>l!==SN).length;return o>=e?t(...r):AN(e-o,CT(function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];var d=r.map(h=>xN(h)?u.shift():h);return t(...d,...u)}))}),qp=e=>AN(e.length,e),B0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},wB=qp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),OB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return PB;var i=n.reverse(),o=i[0],l=i.slice(1);return function(){return l.reduce((u,p)=>p(u),o(...arguments))}},U0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),EN=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((l,u)=>{var p;return l===((p=t)===null||p===void 0?void 0:p[u])})||(t=i,n=e(...i)),n}};function CN(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function TN(e,t,n){for(var r=new dt(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}qp((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});qp((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});qp((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var PN=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},wN=(e,t,n)=>{if(e.lte(0))return new dt(0);var r=CN(e.toNumber()),i=new dt(10).pow(r),o=e.div(i),l=r!==1?.05:.1,u=new dt(Math.ceil(o.div(l).toNumber())).add(n).mul(l),p=u.mul(i);return t?new dt(p.toNumber()):new dt(Math.ceil(p.toNumber()))},_B=(e,t,n)=>{var r=new dt(1),i=new dt(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new dt(10).pow(CN(e)-1),i=new dt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new dt(Math.floor(e)))}else e===0?i=new dt(Math.floor((t-1)/2)):n||(i=new dt(Math.floor(e)));var l=Math.floor((t-1)/2),u=OB(wB(p=>i.add(new dt(p-l).mul(r)).toNumber()),B0);return u(0,t)},ON=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var l=wN(new dt(n).sub(t).div(r-1),i,o),u;t<=0&&n>=0?u=new dt(0):(u=new dt(t).add(n).div(2),u=u.sub(new dt(u).mod(l)));var p=Math.ceil(u.sub(t).div(l).toNumber()),d=Math.ceil(new dt(n).sub(u).div(l).toNumber()),h=p+d+1;return h>r?ON(t,n,r,i,o+1):(h<r&&(d=n>0?d+(r-h):d,p=n>0?p:p+(r-h)),{step:l,tickMin:u.sub(new dt(p).mul(l)),tickMax:u.add(new dt(d).mul(l))})};function NB(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,u]=PN([t,n]);if(l===-1/0||u===1/0){var p=u===1/0?[l,...B0(0,r-1).map(()=>1/0)]:[...B0(0,r-1).map(()=>-1/0),u];return t>n?U0(p):p}if(l===u)return _B(l,r,i);var{step:d,tickMin:h,tickMax:m}=ON(l,u,o,i,0),y=TN(h,m.add(new dt(.1).mul(d)),d);return t>n?U0(y):y}function DB(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=PN([n,r]);if(o===-1/0||l===1/0)return[n,r];if(o===l)return[o];var u=Math.max(t,2),p=wN(new dt(l).sub(o).div(u-1),i,0),d=[...TN(new dt(o),new dt(l),p),l];return i===!1&&(d=d.map(h=>Math.round(h))),n>r?U0(d):d}var kB=EN(NB),MB=EN(DB),_N=e=>e.rootProps.maxBarSize,jB=e=>e.rootProps.barGap,NN=e=>e.rootProps.barCategoryGap,IB=e=>e.rootProps.barSize,wu=e=>e.rootProps.stackOffset,fb=e=>e.options.chartName,pb=e=>e.rootProps.syncId,DN=e=>e.rootProps.syncMethod,hb=e=>e.options.eventEmitter,ti={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},xr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Fp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},RB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ti.angleAxisId,includeHidden:!1,name:void 0,reversed:ti.reversed,scale:ti.scale,tick:ti.tick,tickCount:void 0,ticks:void 0,type:ti.type,unit:void 0},LB={allowDataOverflow:xr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xr.scale,tick:xr.tick,tickCount:xr.tickCount,ticks:void 0,type:xr.type,unit:void 0},$B={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ti.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ti.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ti.scale,tick:ti.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},BB={allowDataOverflow:xr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xr.scale,tick:xr.tick,tickCount:xr.tickCount,ticks:void 0,type:"category",unit:void 0},mb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?$B:RB,gb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?BB:LB,Vp=e=>e.polarOptions,yb=te([fi,pi,on],p_),kN=te([Vp,yb],(e,t)=>{if(e!=null)return zn(e.innerRadius,t,0)}),MN=te([Vp,yb],(e,t)=>{if(e!=null)return zn(e.outerRadius,t,t*.8)}),UB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},jN=te([Vp],UB);te([mb,jN],Fp);var IN=te([yb,kN,MN],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});te([gb,IN],Fp);var RN=te([st,Vp,kN,MN,fi,pi],(e,t,n,r,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:p,endAngle:d}=t;return{cx:zn(l,i,i/2),cy:zn(u,o,o/2),innerRadius:n,outerRadius:r,startAngle:p,endAngle:d,clockWise:!1}}}),Nt=(e,t)=>t,Ou=(e,t,n)=>n;function vb(e){return e?.id}var cn=e=>{var t=st(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ml=e=>e.tooltip.settings.axisId,Sn=e=>{var t=cn(e),n=Ml(e);return _u(e,t,n)},LN=te([Sn],e=>e?.dataKey);function $N(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:o}=n,l=new Map;return e.forEach(u=>{var p,d=(p=u.data)!==null&&p!==void 0?p:r;if(!(d==null||d.length===0)){var h=vb(u);d.forEach((m,y)=>{var b=o==null||i?y:String(wt(m,o,null)),x=wt(m,u.dataKey,0),A;l.has(b)?A=l.get(b):A={},Object.assign(A,{[h]:x}),l.set(b,A)})}}),Array.from(l.values())}function Kp(e){return e.stackId!=null&&e.dataKey!=null}function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(n),!0).forEach(function(r){zB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zB(e,t,n){return(t=GB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GB(e){var t=HB(e,"string");return typeof t=="symbol"?t:t+""}function HB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z0=[0,"auto"],br={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},BN=(e,t)=>e.cartesianAxis.xAxis[t],cs=(e,t)=>{var n=BN(e,t);return n??br},Sr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:z0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Au},UN=(e,t)=>e.cartesianAxis.yAxis[t],us=(e,t)=>{var n=UN(e,t);return n??Sr},YB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},bb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??YB},zt=(e,t,n)=>{switch(t){case"xAxis":return cs(e,n);case"yAxis":return us(e,n);case"zAxis":return bb(e,n);case"angleAxis":return mb(e,n);case"radiusAxis":return gb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},qB=(e,t,n)=>{switch(t){case"xAxis":return cs(e,n);case"yAxis":return us(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},_u=(e,t,n)=>{switch(t){case"xAxis":return cs(e,n);case"yAxis":return us(e,n);case"angleAxis":return mb(e,n);case"radiusAxis":return gb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},zN=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Sb(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var xb=e=>e.graphicalItems.cartesianItems,FB=te([Nt,Ou],Sb),Ab=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Nu=te([xb,zt,FB],Ab),GN=te([Nu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Kp)),HN=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),YN=te([Nu],HN),Eb=e=>e.map(t=>t.data).filter(Boolean).flat(1),VB=te([Nu],Eb),Cb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},Tb=te([VB,cb],Cb),Pb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:wt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:wt(i,r)}))):e.map(r=>({value:r})),Wp=te([Tb,zt,Nu],Pb);function qN(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function co(e){return e.filter(t=>_a(t)||t instanceof Date).map(Number).filter(t=>Cr(t)===!1)}function KB(e,t,n){return!n||typeof t!="number"||Cr(t)?[]:n.length?co(n.flatMap(r=>{var i=wt(e,r.dataKey),o,l;if(Array.isArray(i)?[o,l]=i:o=l=i,!(!Pr(o)||!Pr(l)))return[t-o,t+l]})):[]}var WB=te([GN,cb,Sn],$N),FN=(e,t,n)=>{var r={},i=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,u]=o,p=u.map(vb);return[l,{stackedData:J3(e,p,n),graphicalItems:u}]}))},G0=te([WB,GN,wu],FN),VN=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var o=a5(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},XB=te([G0,ls,Nt],VN),KN=(e,t,n,r,i)=>n.length>0?e.flatMap(o=>n.flatMap(l=>{var u,p,d=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>qN(i,m)),h=wt(o,(p=t.dataKey)!==null&&p!==void 0?p:l.dataKey);return{value:h,errorDomain:KB(o,h,d)}})).filter(Boolean):t?.dataKey!=null?e.map(o=>({value:wt(o,t.dataKey),errorDomain:[]})):e.map(o=>({value:o,errorDomain:[]})),Xp=e=>e.errorBars,WN=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>qN(n,r));te([YN,Xp,Nt],WN);var QB=te([Tb,zt,YN,Xp,Nt],KN);function ZB(e){var{value:t}=e;if(_a(t)||t instanceof Date)return t}var PT=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=co(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},JB=(e,t,n)=>{var r=e.map(ZB).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&oO(r))?j_(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},wb=e=>{var t;if(e==null||!("domain"in e))return z0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=co(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:z0},cp=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),l=Math.min(...o),u=Math.max(...o);return[l,u]}},XN=e=>e.referenceElements.dots,jl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),e6=te([XN,Nt,Ou],jl),QN=e=>e.referenceElements.areas,t6=te([QN,Nt,Ou],jl),ZN=e=>e.referenceElements.lines,n6=te([ZN,Nt,Ou],jl),JN=(e,t)=>{var n=co(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},r6=te(e6,Nt,JN),e2=(e,t)=>{var n=co(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},a6=te([t6,Nt],e2),t2=(e,t)=>{var n=co(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},i6=te(n6,Nt,t2),s6=te(r6,i6,a6,(e,t,n)=>cp(e,n,t)),n2=te([zt],wb),Ob=(e,t,n,r,i,o,l)=>{var u=xB(t,e.allowDataOverflow);if(u!=null)return u;var p=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=p?cp(n,i,PT(r)):cp(i,PT(r));return AB(t,d,e.allowDataOverflow)},o6=te([zt,n2,XB,QB,s6,st,Nt],Ob),l6=[0,1],_b=(e,t,n,r,i,o,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:p}=e,d=so(t,o);return d&&u==null?j_(0,n.length):p==="category"?JB(r,e,d):i==="expand"?l6:l}},Nb=te([zt,st,Tb,Wp,wu,Nt,o6],_b),r2=(e,t,n,r,i)=>{if(e!=null){var{scale:o,type:l}=e;if(o==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof o=="string"){var u="scale".concat(vu(o));return u in tu?u:"point"}}},Il=te([zt,st,zN,fb,Nt],r2);function c6(e){if(e!=null){if(e in tu)return tu[e]();var t="scale".concat(vu(e));if(t in tu)return tu[t]()}}function Db(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=c6(t);if(i!=null){var o=i.domain(n).range(r);return K3(o),o}}}var kb=(e,t,n)=>{var r=wb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Cl(e))return kB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Cl(e))return MB(e,t.tickCount,t.allowDecimals)}},Mb=te([Nb,_u,Il],kb),jb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Cl(t)&&Array.isArray(n)&&n.length>0){var i=t[0],o=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,o),Math.max(l,u)]}return t},u6=te([zt,Nb,Mb,Nt],jb),d6=te(Wp,zt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(co(e.map(u=>u.value))).sort((u,p)=>u-p);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var l=r[o+1]-r[o];n=Math.min(n,l)}return n/i}}),a2=te(d6,st,NN,on,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Pr(e))return 0;var o=t==="vertical"?r.height:r.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var l=zn(n,e*o),u=e*o/2;return u-l-(u-l)/o*l}return 0}),f6=(e,t)=>{var n=cs(e,t);return n==null||typeof n.padding!="string"?0:a2(e,"xAxis",t,n.padding)},p6=(e,t)=>{var n=us(e,t);return n==null||typeof n.padding!="string"?0:a2(e,"yAxis",t,n.padding)},h6=te(cs,f6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),m6=te(us,p6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),g6=te([on,h6,Ip,jp,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),y6=te([on,st,m6,Ip,jp,(e,t,n)=>n],(e,t,n,r,i,o)=>{var{padding:l}=i;return o?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Du=(e,t,n,r)=>{var i;switch(t){case"xAxis":return g6(e,n,r);case"yAxis":return y6(e,n,r);case"zAxis":return(i=bb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return jN(e);case"radiusAxis":return IN(e,n);default:return}},i2=te([zt,Du],Fp),Rl=te([zt,Il,u6,i2],Db);te([Nu,Xp,Nt],WN);function s2(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Qp=(e,t)=>t,Zp=(e,t,n)=>n,v6=te(kp,Qp,Zp,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(s2)),b6=te(Mp,Qp,Zp,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(s2)),o2=(e,t)=>({width:e.width,height:t.height}),S6=(e,t)=>{var n=typeof t.width=="number"?t.width:Au;return{width:n,height:e.height}},l2=te(on,cs,o2),x6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},A6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},E6=te(pi,on,v6,Qp,Zp,(e,t,n,r,i)=>{var o={},l;return n.forEach(u=>{var p=o2(t,u);l==null&&(l=x6(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;o[u.id]=l-Number(d)*p.height,l+=(d?-1:1)*p.height}),o}),C6=te(fi,on,b6,Qp,Zp,(e,t,n,r,i)=>{var o={},l;return n.forEach(u=>{var p=S6(t,u);l==null&&(l=A6(t,r,e));var d=r==="left"&&!i||r==="right"&&i;o[u.id]=l-Number(d)*p.width,l+=(d?-1:1)*p.width}),o}),T6=(e,t)=>{var n=on(e),r=cs(e,t);if(r!=null){var i=E6(e,r.orientation,r.mirror),o=i[t];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},P6=(e,t)=>{var n=on(e),r=us(e,t);if(r!=null){var i=C6(e,r.orientation,r.mirror),o=i[t];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},c2=te(on,us,(e,t)=>{var n=typeof t.width=="number"?t.width:Au;return{width:n,height:e.height}}),wT=(e,t,n)=>{switch(t){case"xAxis":return l2(e,n).width;case"yAxis":return c2(e,n).height;default:return}},u2=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:l}=n,u=so(e,r),p=t.map(d=>d.value);if(l&&u&&o==="category"&&i&&oO(p))return p}},Ib=te([st,Wp,zt,Nt],u2),d2=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,l=so(e,r);if(l&&(i==="number"||o!=="auto"))return t.map(u=>u.value)}},Rb=te([st,Wp,_u,Nt],d2),OT=te([st,qB,Il,Rl,Ib,Rb,Du,Mb,Nt],(e,t,n,r,i,o,l,u,p)=>{if(t==null)return null;var d=so(e,p);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:p,categoricalDomain:o,duplicateDomain:i,isCategorical:d,niceTicks:u,range:l,realScaleType:n,scale:r}}),w6=(e,t,n,r,i,o,l,u,p)=>{if(!(t==null||r==null)){var d=so(e,p),{type:h,ticks:m,tickCount:y}=t,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,x=h==="category"&&r.bandwidth?r.bandwidth()/b:0;x=p==="angleAxis"&&o!=null&&o.length>=2?yn(o[0]-o[1])*2*x:x;var A=m||i;if(A){var C=A.map((T,O)=>{var _=l?l.indexOf(T):T;return{index:O,coordinate:r(_)+x,value:T,offset:x}});return C.filter(T=>!Cr(T.coordinate))}return d&&u?u.map((T,O)=>({coordinate:r(T)+x,value:T,index:O,offset:x})):r.ticks?r.ticks(y).map(T=>({coordinate:r(T)+x,value:T,offset:x})):r.domain().map((T,O)=>({coordinate:r(T)+x,value:l?l[T]:T,index:O,offset:x}))}},f2=te([st,_u,Il,Rl,Mb,Du,Ib,Rb,Nt],w6),O6=(e,t,n,r,i,o,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=so(e,l),{tickCount:p}=t,d=0;return d=l==="angleAxis"&&r?.length>=2?yn(r[0]-r[1])*2*d:d,u&&o?o.map((h,m)=>({coordinate:n(h)+d,value:h,index:m,offset:d})):n.ticks?n.ticks(p).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,m)=>({coordinate:n(h)+d,value:i?i[h]:h,index:m,offset:d}))}},Tl=te([st,_u,Rl,Du,Ib,Rb,Nt],O6),Pl=te(zt,Rl,(e,t)=>{if(!(e==null||t==null))return lp(lp({},e),{},{scale:t})}),_6=te([zt,Il,Nb,i2],Db);te((e,t,n)=>bb(e,n),_6,(e,t)=>{if(!(e==null||t==null))return lp(lp({},e),{},{scale:t})});var N6=te([st,kp,Mp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),p2=e=>e.options.defaultTooltipEventType,h2=e=>e.options.validateTooltipEventTypes;function m2(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Lb(e,t){var n=p2(e),r=h2(e);return m2(t,n,r)}function D6(e){return Oe(t=>Lb(t,e))}var g2=(e,t)=>{var n,r=Number(t);if(!(Cr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},k6=e=>e.tooltip.settings,Zi={active:!1,index:null,dataKey:void 0,coordinate:void 0},M6={itemInteraction:{click:Zi,hover:Zi},axisInteraction:{click:Zi,hover:Zi},keyboardInteraction:Zi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},y2=wr({name:"tooltip",initialState:M6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=ii(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:j6,removeTooltipEntrySettings:I6,setTooltipSettingsState:R6,setActiveMouseOverItemIndex:v2,mouseLeaveItem:L6,mouseLeaveChart:b2,setActiveClickItemIndex:$6,setMouseOverAxisIndex:S2,setMouseClickAxisIndex:B6,setSyncInteraction:H0,setKeyboardInteraction:Y0}=y2.actions,U6=y2.reducer;function _T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(n),!0).forEach(function(r){z6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z6(e,t,n){return(t=G6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G6(e){var t=H6(e,"string");return typeof t=="symbol"?t:t+""}function H6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function q6(e){return e.index!=null}var x2=(e,t,n,r)=>{if(t==null)return Zi;var i=Y6(e,t,n);if(i==null)return Zi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(q6(i)){if(o)return vf(vf({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return vf(vf({},Zi),{},{coordinate:i.coordinate})},$b=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!Pr(r))return n;var i=0,o=1/0;return t.length>0&&(o=t.length-1),String(Math.max(i,Math.min(r,o)))},A2=(e,t,n,r,i,o,l,u)=>{if(!(o==null||u==null)){var p=l[0],d=p==null?void 0:u(p.positions,o);if(d!=null)return d;var h=i?.[Number(o)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},E2=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.dataKey)===i})},ku=e=>e.options.tooltipPayloadSearcher,Ll=e=>e.tooltip;function NT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function DT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(n),!0).forEach(function(r){F6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F6(e,t,n){return(t=V6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V6(e){var t=K6(e,"string");return typeof t=="symbol"?t:t+""}function K6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W6(e,t){return e??t}var C2=(e,t,n,r,i,o,l)=>{if(!(t==null||o==null)){var{chartData:u,computedData:p,dataStartIndex:d,dataEndIndex:h}=n,m=[];return e.reduce((y,b)=>{var x,{dataDefinedOnItem:A,settings:C}=b,T=W6(A,u),O=Array.isArray(T)?h_(T,d,h):T,_=(x=C?.dataKey)!==null&&x!==void 0?x:r,M=C?.nameKey,D;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?D=LI(O,r,i):D=o(O,t,p,M),Array.isArray(D))D.forEach(j=>{var I=DT(DT({},C),{},{name:j.name,unit:j.unit,color:void 0,fill:void 0});y.push(pC({tooltipEntrySettings:I,dataKey:j.dataKey,payload:j.payload,value:wt(j.payload,j.dataKey),name:j.name}))});else{var k;y.push(pC({tooltipEntrySettings:C,dataKey:_,payload:D,value:wt(D,_),name:(k=wt(D,M))!==null&&k!==void 0?k:C?.name}))}return y},m)}},Bb=te([Sn,st,zN,fb,cn],r2),X6=te([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Q6=te([cn,Ml],Sb),Mu=te([X6,Sn,Q6],Ab),Z6=te([Mu],e=>e.filter(Kp)),J6=te([Mu],Eb),$l=te([J6,ls],Cb),eU=te([Z6,ls,Sn],$N),Ub=te([$l,Sn,Mu],Pb),tU=te([Sn],wb),nU=te([Mu],e=>e.filter(Kp)),rU=te([eU,nU,wu],FN),aU=te([rU,ls,cn],VN),iU=te([Mu],HN),sU=te([$l,Sn,iU,Xp,cn],KN),oU=te([XN,cn,Ml],jl),lU=te([oU,cn],JN),cU=te([QN,cn,Ml],jl),uU=te([cU,cn],e2),dU=te([ZN,cn,Ml],jl),fU=te([dU,cn],t2),pU=te([lU,fU,uU],cp),hU=te([Sn,tU,aU,sU,pU,st,cn],Ob),T2=te([Sn,st,$l,Ub,wu,cn,hU],_b),mU=te([T2,Sn,Bb],kb),gU=te([Sn,T2,mU,cn],jb),P2=e=>{var t=cn(e),n=Ml(e),r=!1;return Du(e,t,n,r)},w2=te([Sn,P2],Fp),O2=te([Sn,Bb,gU,w2],Db),yU=te([st,Ub,Sn,cn],u2),vU=te([st,Ub,Sn,cn],d2),bU=(e,t,n,r,i,o,l,u)=>{if(t){var{type:p}=t,d=so(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=p==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?yn(i[0]-i[1])*2*m:m,d&&l?l.map((y,b)=>({coordinate:r(y)+m,value:y,index:b,offset:m})):r.domain().map((y,b)=>({coordinate:r(y)+m,value:o?o[y]:y,index:b,offset:m}))}}},mi=te([st,Sn,Bb,O2,P2,yU,vU,cn],bU),zb=te([p2,h2,k6],(e,t,n)=>m2(n.shared,e,t)),_2=e=>e.tooltip.settings.trigger,Gb=e=>e.tooltip.settings.defaultIndex,Jp=te([Ll,zb,_2,Gb],x2),to=te([Jp,$l],$b),N2=te([mi,to],g2),D2=te([Jp],e=>{if(e)return e.dataKey}),k2=te([Ll,zb,_2,Gb],E2),SU=te([fi,pi,st,on,mi,Gb,k2,ku],A2),xU=te([Jp,SU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),AU=te([Jp],e=>e.active),EU=te([k2,to,ls,LN,N2,ku,zb],C2);te([EU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function kT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(n),!0).forEach(function(r){CU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CU(e,t,n){return(t=TU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TU(e){var t=PU(e,"string");return typeof t=="symbol"?t:t+""}function PU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wU=()=>Oe(Sn),OU=()=>{var e=wU(),t=Oe(mi),n=Oe(O2);return kv(MT(MT({},e),{},{scale:n}),t)},_U=()=>Oe(fb),Hb=(e,t)=>t,M2=(e,t,n)=>n,Yb=(e,t,n,r)=>r,NU=te(mi,e=>Tp(e,t=>t.coordinate)),qb=te([Ll,Hb,M2,Yb],x2),j2=te([qb,$l],$b),DU=(e,t,n)=>{if(t!=null){var r=Ll(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},I2=te([Ll,Hb,M2,Yb],E2),up=te([fi,pi,st,on,mi,Yb,I2,ku],A2),kU=te([qb,up],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),R2=te(mi,j2,g2),MU=te([I2,j2,ls,LN,R2,ku,Hb],C2),jU=te([qb],e=>({isActive:e.active,activeIndex:e.index})),IU=(e,t,n,r,i,o,l,u)=>{if(!(!e||!t||!r||!i||!o)){var p=i5(e.chartX,e.chartY,t,n,u);if(p){var d=o5(p,t),h=F3(d,l,o,r,i),m=s5(t,o,h,p);return{activeIndex:String(h),activeCoordinate:m}}}};function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q0.apply(null,arguments)}function jT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(n),!0).forEach(function(r){RU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RU(e,t,n){return(t=LU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LU(e){var t=$U(e,"string");return typeof t=="symbol"?t:t+""}function $U(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:u,tooltipEventType:p,chartName:d}=e,h=t,m=n,y=r;if(!u||!h||d!=="ScatterChart"&&p!=="axis")return null;var b,x;if(d==="ScatterChart")b=h,x=o4;else if(d==="BarChart")b=l4(l,h,i,o),x=N_;else if(l==="radial"){var{cx:A,cy:C,radius:T,startAngle:O,endAngle:_}=D_(h);b={cx:A,cy:C,startAngle:O,endAngle:_,innerRadius:T,outerRadius:T},x=M_}else b={points:z4(l,h,i)},x=T_;var M=typeof u=="object"&&"className"in u?u.className:void 0,D=bf(bf(bf(bf({stroke:"#ccc",pointerEvents:"none"},i),b),Kt(u,!1)),{},{payload:m,payloadIndex:y,className:ft("recharts-tooltip-cursor",M)});return E.isValidElement(u)?E.cloneElement(u,D):E.createElement(x,D)}function UU(e){var t=OU(),n=S_(),r=Lv(),i=_U();return E.createElement(BU,q0({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var L2=E.createContext(null),zU=()=>E.useContext(L2),My={exports:{}},IT;function GU(){return IT||(IT=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,d,h){this.fn=p,this.context=d,this.once=h||!1}function o(p,d,h,m,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var b=new i(h,m||p,y),x=n?n+d:d;return p._events[x]?p._events[x].fn?p._events[x]=[p._events[x],b]:p._events[x].push(b):(p._events[x]=b,p._eventsCount++),p}function l(p,d){--p._eventsCount===0?p._events=new r:delete p._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],h,m;if(this._eventsCount===0)return d;for(m in h=this._events)t.call(h,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},u.prototype.listeners=function(d){var h=n?n+d:d,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,b=m.length,x=new Array(b);y<b;y++)x[y]=m[y].fn;return x},u.prototype.listenerCount=function(d){var h=n?n+d:d,m=this._events[h];return m?m.fn?1:m.length:0},u.prototype.emit=function(d,h,m,y,b,x){var A=n?n+d:d;if(!this._events[A])return!1;var C=this._events[A],T=arguments.length,O,_;if(C.fn){switch(C.once&&this.removeListener(d,C.fn,void 0,!0),T){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,m),!0;case 4:return C.fn.call(C.context,h,m,y),!0;case 5:return C.fn.call(C.context,h,m,y,b),!0;case 6:return C.fn.call(C.context,h,m,y,b,x),!0}for(_=1,O=new Array(T-1);_<T;_++)O[_-1]=arguments[_];C.fn.apply(C.context,O)}else{var M=C.length,D;for(_=0;_<M;_++)switch(C[_].once&&this.removeListener(d,C[_].fn,void 0,!0),T){case 1:C[_].fn.call(C[_].context);break;case 2:C[_].fn.call(C[_].context,h);break;case 3:C[_].fn.call(C[_].context,h,m);break;case 4:C[_].fn.call(C[_].context,h,m,y);break;default:if(!O)for(D=1,O=new Array(T-1);D<T;D++)O[D-1]=arguments[D];C[_].fn.apply(C[_].context,O)}}return!0},u.prototype.on=function(d,h,m){return o(this,d,h,m,!1)},u.prototype.once=function(d,h,m){return o(this,d,h,m,!0)},u.prototype.removeListener=function(d,h,m,y){var b=n?n+d:d;if(!this._events[b])return this;if(!h)return l(this,b),this;var x=this._events[b];if(x.fn)x.fn===h&&(!y||x.once)&&(!m||x.context===m)&&l(this,b);else{for(var A=0,C=[],T=x.length;A<T;A++)(x[A].fn!==h||y&&!x[A].once||m&&x[A].context!==m)&&C.push(x[A]);C.length?this._events[b]=C.length===1?C[0]:C:l(this,b)}return this},u.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(My)),My.exports}var HU=GU();const YU=da(HU);var yu=new YU,F0="recharts.syncEvent.tooltip",RT="recharts.syncEvent.brush";function $2(e,t){if(t){var n=Number.parseInt(t,10);if(!Cr(n))return e?.[n]}}var qU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},B2=wr({name:"options",initialState:qU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),FU=B2.reducer,{createEventEmitter:VU}=B2.actions;function KU(e){return e.tooltip.syncInteraction}var WU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},U2=wr({name:"chartData",initialState:WU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:LT,setDataStartEndIndexes:XU,setComputedData:TV}=U2.actions,QU=U2.reducer,ZU=["x","y"];function $T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$T(Object(n),!0).forEach(function(r){JU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JU(e,t,n){return(t=ez(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ez(e){var t=tz(e,"string");return typeof t=="symbol"?t:t+""}function tz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nz(e,t){if(e==null)return{};var n,r,i=rz(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var z2=()=>{};function az(){var e=Oe(pb),t=Oe(hb),n=kt(),r=Oe(DN),i=Oe(mi),o=Lv(),l=jv(),u=Oe(p=>p.rootProps.className);E.useEffect(()=>{if(e==null)return z2;var p=(d,h,m)=>{if(t!==m&&e===d){if(r==="index"){var y;if(l&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate){var b=h.payload.coordinate,{x,y:A}=b,C=nz(b,ZU),T=$s($s($s({},C),typeof x=="number"&&{x:Math.max(l.x,Math.min(x,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),O=$s($s({},h),{},{payload:$s($s({},h.payload),{},{coordinate:T})});n(O)}else n(h);return}if(i!=null){var _;if(typeof r=="function"){var M={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},D=r(i,M);_=i[D]}else r==="value"&&(_=i.find(ae=>String(ae.value)===h.payload.label));var{coordinate:k}=h.payload;if(_==null||h.payload.active===!1||k==null||l==null){n(H0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:j,y:I}=k,U=Math.min(j,l.x+l.width),Y=Math.min(I,l.y+l.height),V={x:o==="horizontal"?_.coordinate:U,y:o==="horizontal"?Y:_.coordinate},W=H0({active:h.payload.active,coordinate:V,dataKey:h.payload.dataKey,index:String(_.index),label:h.payload.label});n(W)}}};return yu.on(F0,p),()=>{yu.off(F0,p)}},[u,n,t,e,r,i,o,l])}function iz(){var e=Oe(pb),t=Oe(hb),n=kt();E.useEffect(()=>{if(e==null)return z2;var r=(i,o,l)=>{t!==l&&e===i&&n(XU(o))};return yu.on(RT,r),()=>{yu.off(RT,r)}},[n,t,e])}function sz(){var e=kt();E.useEffect(()=>{e(VU())},[e]),az(),iz()}function oz(e,t,n,r,i,o){var l=Oe(y=>DU(y,e,t)),u=Oe(hb),p=Oe(pb),d=Oe(DN),h=Oe(KU),m=h?.active;E.useEffect(()=>{if(!m&&p!=null&&u!=null){var y=H0({active:o,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});yu.emit(F0,p,y,u)}},[m,n,l,i,r,u,p,d,o])}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(r){lz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lz(e,t,n){return(t=cz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cz(e){var t=uz(e,"string");return typeof t=="symbol"?t:t+""}function uz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dz(e){return e.dataKey}function fz(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(B5,t)}var zT=[],pz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!_l.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function sa(e){var t=Jr(e,pz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:l,filterNull:u,isAnimationActive:p,offset:d,payloadUniqBy:h,position:m,reverseDirection:y,useTranslate3d:b,wrapperStyle:x,cursor:A,shared:C,trigger:T,defaultIndex:O,portal:_,axisId:M}=t,D=kt(),k=typeof O=="number"?String(O):O;E.useEffect(()=>{D(R6({shared:C,trigger:T,axisId:M,active:n,defaultIndex:k}))},[D,C,T,M,n,k]);var j=jv(),I=C_(),U=D6(C),{activeIndex:Y,isActive:V}=Oe(me=>jU(me,U,T,k)),W=Oe(me=>MU(me,U,T,k)),ae=Oe(me=>R2(me,U,T,k)),ne=Oe(me=>kU(me,U,T,k)),re=W,L=zU(),G=n??V,[oe,ye]=GO([re,G]),R=U==="axis"?ae:void 0;oz(U,T,ne,R,Y,G);var K=_??L;if(K==null)return null;var F=re??zT;G||(F=zT),u&&F.length&&(F=LO(re.filter(me=>me.value!=null&&(me.hide!==!0||t.includeHidden)),h,dz));var ie=F.length>0,he=E.createElement(F5,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:p,active:G,coordinate:ne,hasPayload:ie,offset:d,position:m,reverseDirection:y,useTranslate3d:b,viewBox:j,wrapperStyle:x,lastBoundingBox:oe,innerRef:ye,hasPortalFromProps:!!_},fz(l,UT(UT({},t),{},{payload:F,label:R,active:G,coordinate:ne,accessibilityLayer:I})));return E.createElement(E.Fragment,null,uO.createPortal(he,K),G&&E.createElement(UU,{cursor:A,tooltipEventType:U,coordinate:ne,payload:re,index:Y}))}var jy={},Iy={},Ry={},GT;function hz(){return GT||(GT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:o}={}){let l,u=null;const p=o!=null&&o.includes("leading"),d=o==null||o.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{d&&h(),A()};let y=null;const b=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,m()},r)},x=()=>{y!==null&&(clearTimeout(y),y=null)},A=()=>{x(),l=void 0,u=null},C=()=>{h()},T=function(...O){if(i?.aborted)return;l=this,u=O;const _=y==null;b(),p&&_&&h()};return T.schedule=b,T.cancel=A,T.flush=C,i?.addEventListener("abort",A,{once:!0}),T}e.debounce=t})(Ry)),Ry}var HT;function mz(){return HT||(HT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hz();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:l=!1,trailing:u=!0,maxWait:p}=o,d=Array(2);l&&(d[0]="leading"),u&&(d[1]="trailing");let h,m=null;const y=t.debounce(function(...A){h=r.apply(this,A),m=null},i,{edges:d}),b=function(...A){return p!=null&&(m===null&&(m=Date.now()),Date.now()-m>=p)?(h=r.apply(this,A),m=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,A),h)},x=()=>(y.flush(),h);return b.cancel=y.cancel,b.flush=x,b}e.debounce=n})(Iy)),Iy}var YT;function gz(){return YT||(YT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mz();function n(r,i=0,o={}){const{leading:l=!0,trailing:u=!0}=o;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(jy)),jy}var Ly,qT;function yz(){return qT||(qT=1,Ly=gz().throttle),Ly}var vz=yz();const bz=da(vz);var iu=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function FT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FT(Object(n),!0).forEach(function(r){Sz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sz(e,t,n){return(t=xz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xz(e){var t=Az(e,"string");return typeof t=="symbol"?t:t+""}function Az(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oa=E.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:l=0,minHeight:u,maxHeight:p,children:d,debounce:h=0,id:m,className:y,onResize:b,style:x={}}=e,A=E.useRef(null),C=E.useRef();C.current=b,E.useImperativeHandle(t,()=>A.current);var[T,O]=E.useState({containerWidth:r.width,containerHeight:r.height}),_=E.useCallback((D,k)=>{O(j=>{var I=Math.round(D),U=Math.round(k);return j.containerWidth===I&&j.containerHeight===U?j:{containerWidth:I,containerHeight:U}})},[]);E.useEffect(()=>{var D=U=>{var Y,{width:V,height:W}=U[0].contentRect;_(V,W),(Y=C.current)===null||Y===void 0||Y.call(C,V,W)};h>0&&(D=bz(D,h,{trailing:!0,leading:!1}));var k=new ResizeObserver(D),{width:j,height:I}=A.current.getBoundingClientRect();return _(j,I),k.observe(A.current),()=>{k.disconnect()}},[_,h]);var M=E.useMemo(()=>{var{containerWidth:D,containerHeight:k}=T;if(D<0||k<0)return null;iu(Gs(i)||Gs(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),iu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var j=Gs(i)?D:i,I=Gs(o)?k:o;return n&&n>0&&(j?I=j/n:I&&(j=I*n),p&&I>p&&(I=p)),iu(j>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,I,i,o,l,u,n),E.Children.map(d,U=>E.cloneElement(U,{width:j,height:I,style:$y({width:j,height:I},U.props.style)}))},[n,d,o,p,u,l,T,i]);return E.createElement("div",{id:m?"".concat(m):void 0,className:ft("recharts-responsive-container",y),style:$y($y({},x),{},{width:i,height:o,minWidth:l,minHeight:u,maxHeight:p}),ref:A},E.createElement("div",{style:{width:0,height:0,overflow:"visible"}},M))}),Xs=e=>null;Xs.displayName="Cell";function Ez(e,t,n){return(t=Cz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cz(e){var t=Tz(e,"string");return typeof t=="symbol"?t:t+""}function Tz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Pz{constructor(t){Ez(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function VT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(n),!0).forEach(function(r){Oz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oz(e,t,n){return(t=_z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _z(e){var t=Nz(e,"string");return typeof t=="symbol"?t:t+""}function Nz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dz={cacheSize:2e3,enableCache:!0},G2=wz({},Dz),KT=new Pz(G2.cacheSize),kz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WT="recharts_measurement_span";function Mz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",o=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l,"|").concat(u)}var XT=(e,t)=>{try{var n=document.getElementById(WT);n||(n=document.createElement("span"),n.setAttribute("id",WT),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,kz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},su=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_l.isSsr)return{width:0,height:0};if(!G2.enableCache)return XT(t,n);var r=Mz(t,n),i=KT.get(r);if(i)return i;var o=XT(t,n);return KT.set(r,o),o},QT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Iz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,H2={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Rz=Object.keys(H2),ul="NaN";function Lz(e,t){return e*H2[t]}class cr{static parse(t){var n,[,r,i]=(n=Iz.exec(t))!==null&&n!==void 0?n:[];return new cr(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Cr(t)&&(this.unit=""),n!==""&&!jz.test(n)&&(this.num=NaN,this.unit=""),Rz.includes(n)&&(this.num=Lz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new cr(NaN,""):new cr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new cr(NaN,""):new cr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new cr(NaN,""):new cr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new cr(NaN,""):new cr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Cr(this.num)}}function Y2(e){if(e.includes(ul))return ul;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,o]=(n=QT.exec(t))!==null&&n!==void 0?n:[],l=cr.parse(r??""),u=cr.parse(o??""),p=i==="*"?l.multiply(u):l.divide(u);if(p.isNaN())return ul;t=t.replace(QT,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,m,y]=(d=ZT.exec(t))!==null&&d!==void 0?d:[],b=cr.parse(h??""),x=cr.parse(y??""),A=m==="+"?b.add(x):b.subtract(x);if(A.isNaN())return ul;t=t.replace(ZT,A.toString())}return t}var JT=/\(([^()]*)\)/;function $z(e){for(var t=e,n;(n=JT.exec(t))!=null;){var[,r]=n;t=t.replace(JT,Y2(r))}return t}function Bz(e){var t=e.replace(/\s+/g,"");return t=$z(t),t=Y2(t),t}function Uz(e){try{return Bz(e)}catch{return ul}}function By(e){var t=Uz(e.slice(5,-1));return t===ul?"":t}var zz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Gz=["dx","dy","angle","className","breakAll"];function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V0.apply(null,arguments)}function eP(e,t){if(e==null)return{};var n,r,i=Hz(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var q2=/[ \f\n\r\t\v\u2028\u2029]+/,F2=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];vn(t)||(n?i=t.toString().split(""):i=t.toString().split(q2));var o=i.map(u=>({word:u,width:su(u,r).width})),l=n?0:su(" ",r).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Yz=(e,t,n,r,i)=>{var{maxLines:o,children:l,style:u,breakAll:p}=e,d=De(o),h=l,m=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce((W,ae)=>{var{word:ne,width:re}=ae,L=W[W.length-1];if(L&&(r==null||i||L.width+re+n<Number(r)))L.words.push(ne),L.width+=re+n;else{var G={words:[ne],width:re};W.push(G)}return W},[])},y=m(t),b=Y=>Y.reduce((V,W)=>V.width>W.width?V:W);if(!d||i)return y;var x=y.length>o||b(y).width>Number(r);if(!x)return y;for(var A="…",C=Y=>{var V=h.slice(0,Y),W=F2({breakAll:p,style:u,children:V+A}).wordsWithComputedWidth,ae=m(W),ne=ae.length>o||b(ae).width>Number(r);return[ne,ae]},T=0,O=h.length-1,_=0,M;T<=O&&_<=h.length-1;){var D=Math.floor((T+O)/2),k=D-1,[j,I]=C(k),[U]=C(D);if(!j&&!U&&(T=D+1),j&&U&&(O=D-1),!j&&U){M=I;break}_++}return M||y},tP=e=>{var t=vn(e)?[]:e.toString().split(q2);return[{words:t}]},qz=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:l}=e;if((t||n)&&!_l.isSsr){var u,p,d=F2({breakAll:o,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:m}=d;u=h,p=m}else return tP(r);return Yz({breakAll:o,children:r,maxLines:l,style:i},u,p,t,n)}return tP(r)},nP="#808080",eh=E.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:p="end",fill:d=nP}=e,h=eP(e,zz),m=E.useMemo(()=>qz({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:y,dy:b,angle:x,className:A,breakAll:C}=h,T=eP(h,Gz);if(!_a(n)||!_a(r)||m.length===0)return null;var O=n+(De(y)?y:0),_=r+(De(b)?b:0),M;switch(p){case"start":M=By("calc(".concat(o,")"));break;case"middle":M=By("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:M=By("calc(".concat(m.length-1," * -").concat(i,")"));break}var D=[];if(l){var k=m[0].width,{width:j}=h;D.push("scale(".concat(De(j)?j/k:1,")"))}return x&&D.push("rotate(".concat(x,", ").concat(O,", ").concat(_,")")),D.length&&(T.transform=D.join(" ")),E.createElement("text",V0({},Kt(T,!0),{ref:t,x:O,y:_,className:ft("recharts-text",A),textAnchor:u,fill:d.includes("url")?nP:d}),m.map((I,U)=>{var Y=I.words.join(C?"":" ");return E.createElement("tspan",{x:O,dy:U===0?M:i,key:"".concat(Y,"-").concat(U)},Y)}))});eh.displayName="Text";var Fz=["labelRef"];function Vz(e,t){if(e==null)return{};var n,r,i=Kz(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function rP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(n),!0).forEach(function(r){Wz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wz(e,t,n){return(t=Xz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xz(e){var t=Qz(e,"string");return typeof t=="symbol"?t:t+""}function Qz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ni(){return ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ni.apply(null,arguments)}var V2=E.createContext(null),Zz=e=>{var{x:t,y:n,width:r,height:i,children:o}=e,l=E.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return E.createElement(V2.Provider,{value:l},o)},K2=()=>{var e=E.useContext(V2),t=jv();return e||t},Jz=E.createContext(null),eG=()=>{var e=E.useContext(Jz),t=Oe(RN);return e||t},tG=e=>{var{value:t,formatter:n}=e,r=vn(e.children)?t:e.children;return typeof n=="function"?n(r):r},Fb=e=>e!=null&&typeof e=="function",nG=(e,t)=>{var n=yn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},rG=(e,t,n,r,i)=>{var{offset:o,className:l}=e,{cx:u,cy:p,innerRadius:d,outerRadius:h,startAngle:m,endAngle:y,clockWise:b}=i,x=(d+h)/2,A=nG(m,y),C=A>=0?1:-1,T,O;switch(t){case"insideStart":T=m+C*o,O=b;break;case"insideEnd":T=y-C*o,O=!b;break;case"end":T=y+C*o,O=b;break;default:throw new Error("Unsupported position ".concat(t))}O=A<=0?O:!O;var _=Wt(u,p,x,T),M=Wt(u,p,x,T+(O?1:-1)*359),D="M".concat(_.x,",").concat(_.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(O?0:1,`,
    `).concat(M.x,",").concat(M.y),k=vn(e.id)?lu("recharts-radial-line-"):e.id;return E.createElement("text",ni({},r,{dominantBaseline:"central",className:ft("recharts-radial-bar-label",l)}),E.createElement("defs",null,E.createElement("path",{id:k,d:D})),E.createElement("textPath",{xlinkHref:"#".concat(k)},n))},aG=(e,t,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:l,startAngle:u,endAngle:p}=e,d=(u+p)/2;if(n==="outside"){var{x:h,y:m}=Wt(r,i,l+t,d);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(o+l)/2,{x:b,y:x}=Wt(r,i,y,d);return{x:b,y:x,textAnchor:"middle",verticalAnchor:"middle"}},W2=e=>"cx"in e&&De(e.cx),iG=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,o;n!=null&&!W2(n)&&(o=n);var{x:l,y:u,width:p,height:d}=t,h=d>=0?1:-1,m=h*r,y=h>0?"end":"start",b=h>0?"start":"end",x=p>=0?1:-1,A=x*r,C=x>0?"end":"start",T=x>0?"start":"end";if(i==="top"){var O={x:l+p/2,y:u-h*r,textAnchor:"middle",verticalAnchor:y};return Ut(Ut({},O),o?{height:Math.max(u-o.y,0),width:p}:{})}if(i==="bottom"){var _={x:l+p/2,y:u+d+m,textAnchor:"middle",verticalAnchor:b};return Ut(Ut({},_),o?{height:Math.max(o.y+o.height-(u+d),0),width:p}:{})}if(i==="left"){var M={x:l-A,y:u+d/2,textAnchor:C,verticalAnchor:"middle"};return Ut(Ut({},M),o?{width:Math.max(M.x-o.x,0),height:d}:{})}if(i==="right"){var D={x:l+p+A,y:u+d/2,textAnchor:T,verticalAnchor:"middle"};return Ut(Ut({},D),o?{width:Math.max(o.x+o.width-D.x,0),height:d}:{})}var k=o?{width:p,height:d}:{};return i==="insideLeft"?Ut({x:l+A,y:u+d/2,textAnchor:T,verticalAnchor:"middle"},k):i==="insideRight"?Ut({x:l+p-A,y:u+d/2,textAnchor:C,verticalAnchor:"middle"},k):i==="insideTop"?Ut({x:l+p/2,y:u+m,textAnchor:"middle",verticalAnchor:b},k):i==="insideBottom"?Ut({x:l+p/2,y:u+d-m,textAnchor:"middle",verticalAnchor:y},k):i==="insideTopLeft"?Ut({x:l+A,y:u+m,textAnchor:T,verticalAnchor:b},k):i==="insideTopRight"?Ut({x:l+p-A,y:u+m,textAnchor:C,verticalAnchor:b},k):i==="insideBottomLeft"?Ut({x:l+A,y:u+d-m,textAnchor:T,verticalAnchor:y},k):i==="insideBottomRight"?Ut({x:l+p-A,y:u+d-m,textAnchor:C,verticalAnchor:y},k):i&&typeof i=="object"&&(De(i.x)||Gs(i.x))&&(De(i.y)||Gs(i.y))?Ut({x:l+zn(i.x,p),y:u+zn(i.y,d),textAnchor:"end",verticalAnchor:"end"},k):Ut({x:l+p/2,y:u+d/2,textAnchor:"middle",verticalAnchor:"middle"},k)},sG={offset:5};function Qi(e){var t=Jr(e,sG),{viewBox:n,position:r,value:i,children:o,content:l,className:u="",textBreakAll:p,labelRef:d}=t,h=eG(),m=K2(),y=r==="center"?m:h??m,b=n||y;if(!b||vn(i)&&vn(o)&&!E.isValidElement(l)&&typeof l!="function")return null;var x=Ut(Ut({},t),{},{viewBox:b});if(E.isValidElement(l)){var{labelRef:A}=x,C=Vz(x,Fz);return E.cloneElement(l,C)}var T;if(typeof l=="function"){if(T=E.createElement(l,x),E.isValidElement(T))return T}else T=tG(t);var O=W2(b),_=Kt(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return rG(t,r,T,_,b);var M=O?aG(b,t.offset,t.position):iG(t,b);return E.createElement(eh,ni({ref:d,className:ft("recharts-label",u)},_,M,{breakAll:p}),T)}Qi.displayName="Label";var oG=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?E.createElement(Qi,ni({key:"label-implicit"},r)):_a(e)?E.createElement(Qi,ni({key:"label-implicit",value:e},r)):E.isValidElement(e)?e.type===Qi?E.cloneElement(e,Ut({key:"label-implicit"},r)):E.createElement(Qi,ni({key:"label-implicit",content:e},r)):Fb(e)?E.createElement(Qi,ni({key:"label-implicit",content:e},r)):e&&typeof e=="object"?E.createElement(Qi,ni({},e,{key:"label-implicit"},r)):null};function lG(e){var{label:t}=e,n=K2();return oG(t,n)||null}var Uy={},zy={},aP;function cG(){return aP||(aP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(zy)),zy}var Gy={},iP;function uG(){return iP||(iP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Gy)),Gy}var sP;function dG(){return sP||(sP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cG(),n=uG(),r=Cv();function i(o){if(r.isArrayLike(o))return t.last(n.toArray(o))}e.last=i})(Uy)),Uy}var Hy,oP;function fG(){return oP||(oP=1,Hy=dG().last),Hy}var pG=fG();const hG=da(pG);var mG=["valueAccessor"],gG=["dataKey","clockWise","id","textBreakAll"];function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dp.apply(null,arguments)}function lP(e,t){if(e==null)return{};var n,r,i=yG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var vG=e=>Array.isArray(e.value)?hG(e.value):e.value,X2=E.createContext(void 0),bG=X2.Provider,Q2=E.createContext(void 0),SG=Q2.Provider;function xG(){return E.useContext(X2)}function AG(){return E.useContext(Q2)}function _f(e){var{valueAccessor:t=vG}=e,n=lP(e,mG),{dataKey:r,clockWise:i,id:o,textBreakAll:l}=n,u=lP(n,gG),p=xG(),d=AG(),h=p||d;return!h||!h.length?null:E.createElement(fr,{className:"recharts-label-list"},h.map((m,y)=>{var b,x=vn(r)?t(m,y):wt(m&&m.payload,r),A=vn(o)?{}:{id:"".concat(o,"-").concat(y)};return E.createElement(Qi,dp({},Kt(m,!0),u,A,{fill:(b=n.fill)!==null&&b!==void 0?b:m.fill,parentViewBox:m.parentViewBox,value:x,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(y),index:y}))}))}_f.displayName="LabelList";function Z2(e){var{label:t}=e;return t?t===!0?E.createElement(_f,{key:"labelList-implicit"}):E.isValidElement(t)||Fb(t)?E.createElement(_f,{key:"labelList-implicit",content:t}):typeof t=="object"?E.createElement(_f,dp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var J2=e=>e.graphicalItems.polarItems,EG=te([Nt,Ou],Sb),Vb=te([J2,zt,EG],Ab),CG=te([Vb],Eb),Kb=te([CG,lb],Cb),TG=te([Kb,zt,Vb],Pb),PG=te([Kb,zt,Vb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var o,l=wt(r,(o=t.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:wt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),cP=()=>{},wG=te([zt,n2,cP,PG,cP,st,Nt],Ob),eD=te([zt,st,Kb,TG,wu,Nt,wG],_b),OG=te([eD,zt,Il],kb);te([zt,eD,OG,Nt],jb);var _G={radiusAxis:{},angleAxis:{}},tD=wr({name:"polarAxis",initialState:_G,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:PV,removeRadiusAxis:wV,addAngleAxis:OV,removeAngleAxis:_V}=tD.actions,NG=tD.reducer;function uP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(n),!0).forEach(function(r){DG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DG(e,t,n){return(t=kG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kG(e){var t=MG(e,"string");return typeof t=="symbol"?t:t+""}function MG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jG=(e,t)=>t,Wb=te([J2,jG],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),IG=[],Xb=(e,t,n)=>n?.length===0?IG:n,nD=te([lb,Wb,Xb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(o=>dP(dP({},t.presentationProps),o.props))),i!=null)return i}}),RG=te([nD,Wb,Xb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var o,l=wt(r,t.nameKey,t.name),u;return n!=null&&(o=n[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:Dp(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),LG=te([nD,Wb,Xb,on],(e,t,n,r)=>{if(!(t==null||e==null))return RH({offset:r,pieSettings:t,displayedData:e,cells:n})}),Yy={},fP;function $G(){return fP||(fP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Yy)),Yy}var qy,pP;function BG(){return pP||(pP=1,qy=$G().isPlainObject),qy}var UG=BG();const zG=da(UG);function hP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(n),!0).forEach(function(r){GG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GG(e,t,n){return(t=HG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HG(e){var t=YG(e,"string");return typeof t=="symbol"?t:t+""}function YG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fp.apply(null,arguments)}var gP=(e,t,n,r,i)=>{var o=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-o/2,",").concat(t+i),l+="L ".concat(e+n-o/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},qG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FG=e=>{var t=Jr(e,qG),{x:n,y:r,upperWidth:i,lowerWidth:o,height:l,className:u}=t,{animationEasing:p,animationDuration:d,animationBegin:h,isUpdateAnimationActive:m}=t,y=E.useRef(),[b,x]=E.useState(-1),A=E.useRef(i),C=E.useRef(o),T=E.useRef(l),O=E.useRef(n),_=E.useRef(r),M=$p(e,"trapezoid-");if(E.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ne=y.current.getTotalLength();ne&&x(ne)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||l!==+l||i===0&&o===0||l===0)return null;var D=ft("recharts-trapezoid",u);if(!m)return E.createElement("g",null,E.createElement("path",fp({},Kt(t,!0),{className:D,d:gP(n,r,i,o,l)})));var k=A.current,j=C.current,I=T.current,U=O.current,Y=_.current,V="0px ".concat(b===-1?1:b,"px"),W="".concat(b,"px 0px"),ae=P_(["strokeDasharray"],d,p);return E.createElement(Lp,{animationId:M,key:M,canBegin:b>0,duration:d,easing:p,isActive:m,begin:h},ne=>{var re=Dn(k,i,ne),L=Dn(j,o,ne),G=Dn(I,l,ne),oe=Dn(U,n,ne),ye=Dn(Y,r,ne);y.current&&(A.current=re,C.current=L,T.current=G,O.current=oe,_.current=ye);var R=ne>0?{transition:ae,strokeDasharray:W}:{strokeDasharray:V};return E.createElement("path",fp({},Kt(t,!0),{className:D,d:gP(oe,ye,re,L,G),ref:y,style:mP(mP({},R),t.style)}))})},VG=["option","shapeType","propTransformer","activeClassName","isActive"];function KG(e,t){if(e==null)return{};var n,r,i=WG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(r){XG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XG(e,t,n){return(t=QG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QG(e){var t=ZG(e,"string");return typeof t=="symbol"?t:t+""}function ZG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JG(e,t){return pp(pp({},t),e)}function eH(e,t){return e==="symbols"}function vP(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return E.createElement(N_,n);case"trapezoid":return E.createElement(FG,n);case"sector":return E.createElement(M_,n);case"symbols":if(eH(t))return E.createElement(xv,n);break;default:return null}}function tH(e){return E.isValidElement(e)?e.props:e}function rD(e){var{option:t,shapeType:n,propTransformer:r=JG,activeClassName:i="recharts-active-shape",isActive:o}=e,l=KG(e,VG),u;if(E.isValidElement(t))u=E.cloneElement(t,pp(pp({},l),tH(t)));else if(typeof t=="function")u=t(l);else if(zG(t)&&typeof t!="boolean"){var p=r(t,l);u=E.createElement(vP,{shapeType:n,elementProps:p})}else{var d=l;u=E.createElement(vP,{shapeType:n,elementProps:d})}return o?E.createElement(fr,{className:i},u):u}var Qb=(e,t)=>{var n=kt();return(r,i)=>o=>{e?.(r,i,o),n(v2({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Zb=e=>{var t=kt();return(n,r)=>i=>{e?.(n,r,i),t(L6())}},Jb=(e,t)=>{var n=kt();return(r,i)=>o=>{e?.(r,i,o),n($6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function aD(e){var{fn:t,args:n}=e,r=kt(),i=Zr();return E.useEffect(()=>{if(!i){var o=t(n);return r(j6(o)),()=>{r(I6(o))}}},[t,n,r,i]),null}var iD=()=>{};function nH(e){var{legendPayload:t}=e,n=kt(),r=Zr();return E.useEffect(()=>r?iD:(n(A_(t)),()=>{n(E_(t))}),[n,r,t]),null}function rH(e){var{legendPayload:t}=e,n=kt(),r=Oe(st);return E.useEffect(()=>r!=="centric"&&r!=="radial"?iD:(n(A_(t)),()=>{n(E_(t))}),[n,r,t]),null}var Fy,aH=()=>{var[e]=E.useState(()=>lu("uid-"));return e},iH=(Fy=rM.useId)!==null&&Fy!==void 0?Fy:aH;function sH(e,t){var n=iH();return t||(e?"".concat(e,"-").concat(n):n)}var oH=E.createContext(void 0),sD=e=>{var{id:t,type:n,children:r}=e,i=sH("recharts-".concat(n),t);return E.createElement(oH.Provider,{value:i},r(i))},lH={cartesianItems:[],polarItems:[]},oD=wr({name:"graphicalItems",initialState:lH,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=ii(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=ii(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=ii(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:cH,replaceCartesianGraphicalItem:uH,removeCartesianGraphicalItem:dH,addPolarGraphicalItem:fH,removePolarGraphicalItem:pH}=oD.actions,hH=oD.reducer;function mH(e){var t=kt(),n=E.useRef(null);return E.useEffect(()=>{n.current===null?t(cH(e)):n.current!==e&&t(uH({prev:n.current,next:e})),n.current=e},[t,e]),E.useEffect(()=>()=>{n.current&&(t(dH(n.current)),n.current=null)},[t]),null}function gH(e){var t=kt();return E.useEffect(()=>(t(fH(e)),()=>{t(pH(e))}),[t,e]),null}var yH=["onMouseEnter","onClick","onMouseLeave"],vH=["id"],bH=["id"];function eS(e,t){if(e==null)return{};var n,r,i=SH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function SH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function bP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(n),!0).forEach(function(r){xH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xH(e,t,n){return(t=AH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rs(){return rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rs.apply(null,arguments)}function CH(e){var t=E.useMemo(()=>gv(e.children,Xs),[e.children]),n=Oe(r=>RG(r,e.id,t));return n==null?null:E.createElement(rH,{legendPayload:n})}function TH(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:o,fill:l,name:u,hide:p,tooltipType:d}=e;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:l,dataKey:t,nameKey:n,name:Dp(u,t),hide:p,type:d,color:l,unit:""}}}var PH=(e,t)=>e>t?"start":e<t?"end":"middle",wH=(e,t,n)=>zn(typeof t=="function"?t(e):t,n,n*.8),OH=(e,t,n)=>{var{top:r,left:i,width:o,height:l}=t,u=p_(o,l),p=i+zn(e.cx,o,o/2),d=r+zn(e.cy,l,l/2),h=zn(e.innerRadius,u,0),m=wH(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(o*o+l*l)/2;return{cx:p,cy:d,innerRadius:h,outerRadius:m,maxRadius:y}},_H=(e,t)=>{var n=yn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function NH(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var DH=(e,t)=>{if(E.isValidElement(e))return E.cloneElement(e,t);if(typeof e=="function")return e(t);var n=ft("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return E.createElement(T_,rs({},t,{type:"linear",className:n}))},kH=(e,t,n)=>{if(E.isValidElement(e))return E.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),E.isValidElement(r)))return r;var i=ft("recharts-pie-label-text",NH(e));return E.createElement(eh,rs({},t,{alignmentBaseline:"middle",className:i}),r)};function MH(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:o,dataKey:l}=n;if(!r||!i||!t)return null;var u=io(n),p=Kt(i,!1),d=Kt(o,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((y,b)=>{var x=(y.startAngle+y.endAngle)/2,A=Wt(y.cx,y.cy,y.outerRadius+h,x),C=Pt(Pt(Pt(Pt({},u),y),{},{stroke:"none"},p),{},{index:b,textAnchor:PH(A.x,y.cx)},A),T=Pt(Pt(Pt(Pt({},u),y),{},{fill:"none",stroke:y.fill},d),{},{index:b,points:[Wt(y.cx,y.cy,y.outerRadius,x),A],key:"line"});return E.createElement(fr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},o&&DH(o,T),kH(i,C,wt(y,l)))});return E.createElement(fr,{className:"recharts-pie-labels"},m)}function jH(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(Z2,{label:n.label}):E.createElement(MH,{sectors:t,props:n,showLabels:r})}function IH(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,o=Oe(to),{onMouseEnter:l,onClick:u,onMouseLeave:p}=i,d=eS(i,yH),h=Qb(l,i.dataKey),m=Zb(p),y=Jb(u,i.dataKey);return t==null||t.length===0?null:E.createElement(E.Fragment,null,t.map((b,x)=>{if(b?.startAngle===0&&b?.endAngle===0&&t.length!==1)return null;var A=n&&String(x)===o,C=o?r:null,T=A?n:C,O=Pt(Pt({},b),{},{stroke:b.stroke,tabIndex:-1,[v_]:x,[b_]:i.dataKey});return E.createElement(fr,rs({tabIndex:-1,className:"recharts-pie-sector"},bu(d,b,x),{onMouseEnter:h(b,x),onMouseLeave:m(b,x),onClick:y(b,x),key:"sector-".concat(b?.startAngle,"-").concat(b?.endAngle,"-").concat(b.midAngle,"-").concat(x)}),E.createElement(rD,rs({option:T,isActive:A,shapeType:"sector"},O)))}))}function RH(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:o}=e,{cornerRadius:l,startAngle:u,endAngle:p,dataKey:d,nameKey:h,tooltipType:m}=n,y=Math.abs(n.minAngle),b=_H(u,p),x=Math.abs(b),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(k=>wt(k,d,0)!==0).length,T=(x>=360?C:C-1)*A,O=x-C*y-T,_=r.reduce((k,j)=>{var I=wt(j,d,0);return k+(De(I)?I:0)},0),M;if(_>0){var D;M=r.map((k,j)=>{var I=wt(k,d,0),U=wt(k,h,j),Y=OH(n,o,k),V=(De(I)?I:0)/_,W,ae=Pt(Pt({},k),i&&i[j]&&i[j].props);j?W=D.endAngle+yn(b)*A*(I!==0?1:0):W=u;var ne=W+yn(b)*((I!==0?y:0)+V*O),re=(W+ne)/2,L=(Y.innerRadius+Y.outerRadius)/2,G=[{name:U,value:I,payload:ae,dataKey:d,type:m}],oe=Wt(Y.cx,Y.cy,L,re);return D=Pt(Pt(Pt(Pt({},n.presentationProps),{},{percent:V,cornerRadius:l,name:U,tooltipPayload:G,midAngle:re,middleRadius:L,tooltipPosition:oe},ae),Y),{},{value:wt(k,d),startAngle:W,endAngle:ne,payload:ae,paddingAngle:yn(b)*A}),D})}return M}function LH(e){var{showLabels:t,sectors:n,children:r}=e,i=E.useMemo(()=>!t||!n?[]:n.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[n,t]);return E.createElement(SG,{value:t?i:void 0},r)}function $H(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:u,activeShape:p,inactiveShape:d,onAnimationStart:h,onAnimationEnd:m}=t,y=$p(t,"recharts-pie-"),b=n.current,[x,A]=E.useState(!1),C=E.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),T=E.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return E.createElement(LH,{showLabels:!x,sectors:r},E.createElement(Lp,{animationId:y,begin:o,duration:l,isActive:i,easing:u,onAnimationStart:T,onAnimationEnd:C,key:y},O=>{var _=[],M=r&&r[0],D=M?.startAngle;return r?.forEach((k,j)=>{var I=b&&b[j],U=j>0?Qs(k,"paddingAngle",0):0;if(I){var Y=Dn(I.endAngle-I.startAngle,k.endAngle-k.startAngle,O),V=Pt(Pt({},k),{},{startAngle:D+U,endAngle:D+Y+U});_.push(V),D=V.endAngle}else{var{endAngle:W,startAngle:ae}=k,ne=Dn(0,W-ae,O),re=Pt(Pt({},k),{},{startAngle:D+U,endAngle:D+ne+U});_.push(re),D=re.endAngle}}),n.current=_,E.createElement(fr,null,E.createElement(IH,{sectors:_,activeShape:p,inactiveShape:d,allOtherPieProps:t}))}),E.createElement(jH,{showLabels:!x,sectors:r,props:t}),t.children)}var BH={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!_l.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function UH(e){var{id:t}=e,n=eS(e,vH),{hide:r,className:i,rootTabIndex:o}=e,l=E.useMemo(()=>gv(e.children,Xs),[e.children]),u=Oe(h=>LG(h,t,l)),p=E.useRef(null),d=ft("recharts-pie",i);return r||u==null?(p.current=null,E.createElement(fr,{tabIndex:o,className:d})):E.createElement(E.Fragment,null,E.createElement(aD,{fn:TH,args:Pt(Pt({},e),{},{sectors:u})}),E.createElement(fr,{tabIndex:o,className:d},E.createElement($H,{props:Pt(Pt({},n),{},{sectors:u}),previousSectorsRef:p})))}function Nf(e){var t=Jr(e,BH),{id:n}=t,r=eS(t,bH),i=io(r);return E.createElement(sD,{id:n,type:"pie"},o=>E.createElement(E.Fragment,null,E.createElement(gH,{type:"pie",id:o,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),E.createElement(CH,rs({},r,{id:o})),E.createElement(UH,rs({},r,{id:o}))))}Nf.displayName="Pie";function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){zH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zH(e,t,n){return(t=GH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GH(e){var t=HH(e,"string");return typeof t=="symbol"?t:t+""}function HH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YH={xAxis:{},yAxis:{},zAxis:{}},lD=wr({name:"cartesianAxis",initialState:YH,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=xP(xP({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:qH,removeXAxis:FH,addYAxis:VH,removeYAxis:KH,addZAxis:NV,removeZAxis:DV,updateYAxisWidth:WH}=lD.actions,XH=lD.reducer,QH=te([on],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),ZH=te([QH,fi,pi],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),cD=()=>Oe(ZH),JH="Invariant failed";function e9(e,t){throw new Error(JH)}var t9=["x","y"];function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K0.apply(null,arguments)}function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){n9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n9(e,t,n){return(t=r9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r9(e){var t=a9(e,"string");return typeof t=="symbol"?t:t+""}function a9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i9(e,t){if(e==null)return{};var n,r,i=s9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function o9(e,t){var{x:n,y:r}=e,i=i9(e,t9),o="".concat(n),l=parseInt(o,10),u="".concat(r),p=parseInt(u,10),d="".concat(t.height||i.height),h=parseInt(d,10),m="".concat(t.width||i.width),y=parseInt(m,10);return Zc(Zc(Zc(Zc(Zc({},t),i),l?{x:l}:{}),p?{y:p}:{}),{},{height:h,width:y,name:t.name,radius:t.radius})}function tS(e){return E.createElement(rD,K0({shapeType:"rectangle",propTransformer:o9,activeClassName:"recharts-active-bar"},e))}var l9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(De(t))return t;var o=De(r)||vn(r);return o?t(r,i):(o||e9(),n)}},c9={},uD=wr({name:"errorBars",initialState:c9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:kV,replaceErrorBar:MV,removeErrorBar:jV}=uD.actions,u9=uD.reducer,d9=["children"];function f9(e,t){if(e==null)return{};var n,r,i=p9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var h9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},m9=E.createContext(h9);function g9(e){var{children:t}=e,n=f9(e,d9);return E.createElement(m9.Provider,{value:n},t)}function dD(e,t){var n,r,i=Oe(d=>cs(d,e)),o=Oe(d=>us(d,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:br.allowDataOverflow,u=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:Sr.allowDataOverflow,p=l||u;return{needClip:p,needClipX:l,needClipY:u}}function y9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=cD(),{needClipX:o,needClipY:l,needClip:u}=dD(t,n);if(!u)return null;var{x:p,y:d,width:h,height:m}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:o?p:p-h/2,y:l?d:d-m/2,width:o?h:h*2,height:l?m:m*2}))}var v9=["onMouseEnter","onMouseLeave","onClick"],b9=["value","background","tooltipPosition"],S9=["id"],x9=["onMouseEnter","onClick","onMouseLeave"];function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},as.apply(null,arguments)}function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(r){A9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function A9(e,t,n){return(t=E9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E9(e){var t=C9(e,"string");return typeof t=="symbol"?t:t+""}function C9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hp(e,t){if(e==null)return{};var n,r,i=T9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function T9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var P9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:Dp(n,t),payload:e}]};function w9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:o,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Dp(o,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function O9(e){var t=Oe(to),{data:n,dataKey:r,background:i,allOtherBarProps:o}=e,{onMouseEnter:l,onMouseLeave:u,onClick:p}=o,d=hp(o,v9),h=Qb(l,r),m=Zb(u),y=Jb(p,r);if(!i||n==null)return null;var b=Kt(i,!1);return E.createElement(E.Fragment,null,n.map((x,A)=>{var{value:C,background:T,tooltipPosition:O}=x,_=hp(x,b9);if(!T)return null;var M=h(x,A),D=m(x,A),k=y(x,A),j=Xn(Xn(Xn(Xn(Xn({option:i,isActive:String(A)===t},_),{},{fill:"#eee"},T),b),bu(d,x,A)),{},{onMouseEnter:M,onMouseLeave:D,onClick:k,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return E.createElement(tS,as({key:"background-bar-".concat(A)},j))}))}function _9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(o=>{var l={x:o.x,y:o.y,width:o.width,height:o.height};return Xn(Xn({},l),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:l,fill:o.fill})});return E.createElement(bG,{value:t?i:void 0},n)}function N9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:o,dataKey:l}=e,u=Oe(to),p=Oe(D2),d=n&&String(o)===u&&(p==null||l===p),h=d?n:t;return E.createElement(tS,as({},r,i,{isActive:d,option:h,index:o,dataKey:l}))}function D9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:o}=e;return E.createElement(tS,as({},n,r,{isActive:!1,option:t,index:i,dataKey:o}))}function k9(e){var{data:t,props:n}=e,r=io(n),{id:i}=r,o=hp(r,S9),{shape:l,dataKey:u,activeBar:p}=n,{onMouseEnter:d,onClick:h,onMouseLeave:m}=n,y=hp(n,x9),b=Qb(d,u),x=Zb(m),A=Jb(h,u);return t?E.createElement(E.Fragment,null,t.map((C,T)=>E.createElement(fr,as({className:"recharts-bar-rectangle"},bu(y,C,T),{onMouseEnter:b(C,T),onMouseLeave:x(C,T),onClick:A(C,T),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(T)}),p?E.createElement(N9,{shape:l,activeBar:p,baseProps:o,entry:C,index:T,dataKey:u}):E.createElement(D9,{shape:l,baseProps:o,entry:C,index:T,dataKey:u})))):null}function M9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:o,animationBegin:l,animationDuration:u,animationEasing:p,onAnimationEnd:d,onAnimationStart:h}=t,m=n.current,y=$p(t,"recharts-bar-"),[b,x]=E.useState(!1),A=!b,C=E.useCallback(()=>{typeof d=="function"&&d(),x(!1)},[d]),T=E.useCallback(()=>{typeof h=="function"&&h(),x(!0)},[h]);return E.createElement(_9,{showLabels:A,rects:r},E.createElement(Lp,{animationId:y,begin:l,duration:u,isActive:o,easing:p,onAnimationEnd:C,onAnimationStart:T,key:y},O=>{var _=O===1?r:r?.map((M,D)=>{var k=m&&m[D];if(k)return Xn(Xn({},M),{},{x:Dn(k.x,M.x,O),y:Dn(k.y,M.y,O),width:Dn(k.width,M.width,O),height:Dn(k.height,M.height,O)});if(i==="horizontal"){var j=Dn(0,M.height,O);return Xn(Xn({},M),{},{y:M.y+M.height-j,height:j})}var I=Dn(0,M.width,O);return Xn(Xn({},M),{},{width:I})});return O>0&&(n.current=_??null),_==null?null:E.createElement(fr,null,E.createElement(k9,{props:t,data:_}))}),E.createElement(Z2,{label:t.label}),t.children)}function j9(e){var t=E.useRef(null);return E.createElement(M9,{previousRectanglesRef:t,props:e})}var fD=0,I9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:wt(e,t)}};class R9 extends E.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:l,needClip:u,background:p,id:d}=this.props;if(t||n==null)return null;var h=ft("recharts-bar",i),m=d;return E.createElement(fr,{className:h,id:d},u&&E.createElement("defs",null,E.createElement(y9,{clipPathId:m,xAxisId:o,yAxisId:l})),E.createElement(fr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},E.createElement(O9,{data:n,dataKey:r,background:p,allOtherBarProps:this.props}),E.createElement(j9,this.props)))}}var L9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!_l.isSsr,legendType:"rect",minPointSize:fD,xAxisId:0,yAxisId:0};function $9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:d,isAnimationActive:h}=e,{needClip:m}=dD(t,n),y=Lv(),b=Zr(),x=gv(e.children,Xs),A=Oe(O=>d7(O,t,n,b,e.id,x));if(y!=="vertical"&&y!=="horizontal")return null;var C,T=A?.[0];return T==null||T.height==null||T.width==null?C=0:C=y==="vertical"?T.height/2:T.width/2,E.createElement(g9,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:I9,errorBarOffset:C},E.createElement(R9,as({},e,{layout:y,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:d,isAnimationActive:h})))}function B9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:l,yAxis:u,xAxisTicks:p,yAxisTicks:d,stackedData:h,displayedData:m,offset:y,cells:b,parentViewBox:x}=e,A=t==="horizontal"?u:l,C=h?A.scale.domain():null,T=t5({numericAxis:A});return m.map((O,_)=>{var M,D,k,j,I,U;h?M=W3(h[_],C):(M=wt(O,n),Array.isArray(M)||(M=[T,M]));var Y=l9(r,fD)(M[1],_);if(t==="horizontal"){var V,[W,ae]=[u.scale(M[0]),u.scale(M[1])];D=uC({axis:l,ticks:p,bandSize:o,offset:i.offset,entry:O,index:_}),k=(V=ae??W)!==null&&V!==void 0?V:void 0,j=i.size;var ne=W-ae;if(I=Cr(ne)?0:ne,U={x:D,y:y.top,width:j,height:y.height},Math.abs(Y)>0&&Math.abs(I)<Math.abs(Y)){var re=yn(I||Y)*(Math.abs(Y)-Math.abs(I));k-=re,I+=re}}else{var[L,G]=[l.scale(M[0]),l.scale(M[1])];if(D=L,k=uC({axis:u,ticks:d,bandSize:o,offset:i.offset,entry:O,index:_}),j=G-L,I=i.size,U={x:y.left,y:k,width:y.width,height:I},Math.abs(Y)>0&&Math.abs(j)<Math.abs(Y)){var oe=yn(j||Y)*(Math.abs(Y)-Math.abs(j));j+=oe}}if(D==null||k==null||j==null||I==null)return null;var ye=Xn(Xn({},O),{},{x:D,y:k,width:j,height:I,value:h?M:M[1],payload:O,background:U,tooltipPosition:{x:D+j/2,y:k+I/2},parentViewBox:x},b&&b[_]&&b[_].props);return ye}).filter(Boolean)}function Za(e){var t=Jr(e,L9),n=Zr();return E.createElement(sD,{id:t.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(nH,{legendPayload:P9(t)}),E.createElement(aD,{fn:w9,args:t}),E.createElement(mH,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:e5(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),E.createElement($9,as({},t,{id:r}))))}Za.displayName="Bar";function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){U9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U9(e,t,n){return(t=z9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z9(e){var t=G9(e,"string");return typeof t=="symbol"?t:t+""}function G9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H9=(e,t)=>t,Y9=(e,t,n)=>n,q9=(e,t,n,r)=>r,F9=(e,t,n,r,i)=>i,ju=te([xb,F9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),V9=te([ju],e=>e?.maxBarSize),K9=(e,t,n,r,i,o)=>o,TP=(e,t,n)=>{var r=n??e;if(!vn(r))return zn(r,t,0)},W9=te([st,xb,H9,Y9,q9],(e,t,n,r,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),X9=(e,t,n,r)=>{var i=st(e);return i==="horizontal"?G0(e,"yAxis",n,r):G0(e,"xAxis",t,r)},Q9=(e,t,n)=>{var r=st(e);return r==="horizontal"?wT(e,"xAxis",t):wT(e,"yAxis",n)},Z9=(e,t,n)=>{var r={},i=e.filter(Kp),o=e.filter(d=>d.stackId==null),l=i.reduce((d,h)=>(d[h.stackId]||(d[h.stackId]=[]),d[h.stackId].push(h),d),r),u=Object.entries(l).map(d=>{var[h,m]=d,y=m.map(x=>x.dataKey),b=TP(t,n,m[0].barSize);return{stackId:h,dataKeys:y,barSize:b}}),p=o.map(d=>{var h=[d.dataKey].filter(y=>y!=null),m=TP(t,n,d.barSize);return{stackId:void 0,dataKeys:h,barSize:m}});return[...u,...p]},J9=te([W9,IB,Q9],Z9),e7=(e,t,n,r,i)=>{var o,l,u=ju(e,t,n,r,i);if(u!=null){var p=st(e),d=_N(e),{maxBarSize:h}=u,m=vn(h)?d:h,y,b;return p==="horizontal"?(y=Pl(e,"xAxis",t,r),b=Tl(e,"xAxis",t,r)):(y=Pl(e,"yAxis",n,r),b=Tl(e,"yAxis",n,r)),(o=(l=kv(y,b,!0))!==null&&l!==void 0?l:m)!==null&&o!==void 0?o:0}},pD=(e,t,n,r)=>{var i=st(e),o,l;return i==="horizontal"?(o=Pl(e,"xAxis",t,r),l=Tl(e,"xAxis",t,r)):(o=Pl(e,"yAxis",n,r),l=Tl(e,"yAxis",n,r)),kv(o,l)};function t7(e,t,n,r,i){var o=r.length;if(!(o<1)){var l=zn(e,n,0,!0),u,p=[];if(Pr(r[0].barSize)){var d=!1,h=n/o,m=r.reduce((T,O)=>T+(O.barSize||0),0);m+=(o-1)*l,m>=n&&(m-=(o-1)*l,l=0),m>=n&&h>0&&(d=!0,h*=.9,m=o*h);var y=(n-m)/2>>0,b={offset:y-l,size:0};u=r.reduce((T,O)=>{var _,M={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:b.offset+b.size+l,size:d?h:(_=O.barSize)!==null&&_!==void 0?_:0}},D=[...T,M];return b=D[D.length-1].position,D},p)}else{var x=zn(t,n,0,!0);n-2*x-(o-1)*l<=0&&(l=0);var A=(n-2*x-(o-1)*l)/o;A>1&&(A>>=0);var C=Pr(i)?Math.min(A,i):A;u=r.reduce((T,O,_)=>[...T,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:x+(A+l)*_+(A-C)/2,size:C}}],p)}return u}}var n7=(e,t,n,r,i,o,l)=>{var u=vn(l)?t:l,p=t7(n,r,i!==o?i:o,e,u);return i!==o&&p!=null&&(p=p.map(d=>Sf(Sf({},d),{},{position:Sf(Sf({},d.position),{},{offset:d.position.offset-i/2})}))),p},r7=te([J9,_N,jB,NN,e7,pD,V9],n7),a7=(e,t,n,r)=>Pl(e,"xAxis",t,r),i7=(e,t,n,r)=>Pl(e,"yAxis",n,r),s7=(e,t,n,r)=>Tl(e,"xAxis",t,r),o7=(e,t,n,r)=>Tl(e,"yAxis",n,r),l7=te([r7,ju],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),c7=(e,t)=>{var n=vb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:o}=i;if(o)return o.find(l=>l.key===n)}}}},u7=te([X9,ju],c7),d7=te([on,Mv,a7,i7,s7,o7,l7,st,cb,pD,u7,ju,K9],(e,t,n,r,i,o,l,u,p,d,h,m,y)=>{var{chartData:b,dataStartIndex:x,dataEndIndex:A}=p;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||o==null||d==null)){var{data:C}=m,T;if(C!=null&&C.length>0?T=C:T=b?.slice(x,A+1),T!=null)return B9({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:h,displayedData:T,offset:e,cells:y})}}),hD=e=>{var{chartData:t}=e,n=kt(),r=Zr();return E.useEffect(()=>r?()=>{}:(n(LT(t)),()=>{n(LT(void 0))}),[t,n,r]),null},PP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},mD=wr({name:"brush",initialState:PP,reducers:{setBrushSettings(e,t){return t.payload==null?PP:t.payload}}}),{setBrushSettings:IV}=mD.actions,f7=mD.reducer;function p7(e,t,n){return(t=h7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h7(e){var t=m7(e,"string");return typeof t=="symbol"?t:t+""}function m7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nS{static create(t){return new nS(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}p7(nS,"EPS",1e-4);function g7(e){return(e%180+180)%180}var y7=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=g7(i),l=o*Math.PI/180,u=Math.atan(r/n),p=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(p)},v7={dots:[],areas:[],lines:[]},gD=wr({name:"referenceElements",initialState:v7,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ii(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ii(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ii(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:RV,removeDot:LV,addArea:$V,removeArea:BV,addLine:UV,removeLine:zV}=gD.actions,b7=gD.reducer,S7=E.createContext(void 0),x7=e=>{var{children:t}=e,[n]=E.useState("".concat(lu("recharts"),"-clip")),r=cD();if(r==null)return null;var{x:i,y:o,width:l,height:u}=r;return E.createElement(S7.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:o,height:u,width:l}))),t)};function Vy(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function yD(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function A7(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return y7(r,n)}function E7(e,t,n){var r=n==="width",{x:i,y:o,width:l,height:u}=e;return t===1?{start:r?i:o,end:r?i+l:o+u}:{start:r?i+l:o+u,end:r?i:o}}function mp(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function C7(e,t){return yD(e,t+1)}function T7(e,t,n,r,i){for(var o=(r||[]).slice(),{start:l,end:u}=t,p=0,d=1,h=l,m=function(){var x=r?.[p];if(x===void 0)return{v:yD(r,d)};var A=p,C,T=()=>(C===void 0&&(C=n(x,A)),C),O=x.coordinate,_=p===0||mp(e,O,T,h,u);_||(p=0,h=l,d+=1),_&&(h=O+e*(T()/2+i),p+=d)},y;d<=o.length;)if(y=m(),y)return y.v;return[]}function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(n),!0).forEach(function(r){P7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P7(e,t,n){return(t=w7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w7(e){var t=O7(e,"string");return typeof t=="symbol"?t:t+""}function O7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _7(e,t,n,r,i){for(var o=(r||[]).slice(),l=o.length,{start:u}=t,{end:p}=t,d=function(y){var b=o[y],x,A=()=>(x===void 0&&(x=n(b,y)),x);if(y===l-1){var C=e*(b.coordinate+e*A()/2-p);o[y]=b=$n($n({},b),{},{tickCoord:C>0?b.coordinate-C*e:b.coordinate})}else o[y]=b=$n($n({},b),{},{tickCoord:b.coordinate});var T=mp(e,b.tickCoord,A,u,p);T&&(p=b.tickCoord-e*(A()/2+i),o[y]=$n($n({},b),{},{isShow:!0}))},h=l-1;h>=0;h--)d(h);return o}function N7(e,t,n,r,i,o){var l=(r||[]).slice(),u=l.length,{start:p,end:d}=t;if(o){var h=r[u-1],m=n(h,u-1),y=e*(h.coordinate+e*m/2-d);l[u-1]=h=$n($n({},h),{},{tickCoord:y>0?h.coordinate-y*e:h.coordinate});var b=mp(e,h.tickCoord,()=>m,p,d);b&&(d=h.tickCoord-e*(m/2+i),l[u-1]=$n($n({},h),{},{isShow:!0}))}for(var x=o?u-1:u,A=function(O){var _=l[O],M,D=()=>(M===void 0&&(M=n(_,O)),M);if(O===0){var k=e*(_.coordinate-e*D()/2-p);l[O]=_=$n($n({},_),{},{tickCoord:k<0?_.coordinate-k*e:_.coordinate})}else l[O]=_=$n($n({},_),{},{tickCoord:_.coordinate});var j=mp(e,_.tickCoord,D,p,d);j&&(p=_.tickCoord+e*(D()/2+i),l[O]=$n($n({},_),{},{isShow:!0}))},C=0;C<x;C++)A(C);return l}function rS(e,t,n){var{tick:r,ticks:i,viewBox:o,minTickGap:l,orientation:u,interval:p,tickFormatter:d,unit:h,angle:m}=e;if(!i||!i.length||!r)return[];if(De(p)||_l.isSsr){var y;return(y=C7(i,De(p)?p:0))!==null&&y!==void 0?y:[]}var b=[],x=u==="top"||u==="bottom"?"width":"height",A=h&&x==="width"?su(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(_,M)=>{var D=typeof d=="function"?d(_.value,M):_.value;return x==="width"?A7(su(D,{fontSize:t,letterSpacing:n}),A,m):su(D,{fontSize:t,letterSpacing:n})[x]},T=i.length>=2?yn(i[1].coordinate-i[0].coordinate):1,O=E7(o,T,x);return p==="equidistantPreserveStart"?T7(T,O,C,i,l):(p==="preserveStart"||p==="preserveStartEnd"?b=N7(T,O,C,i,l,p==="preserveStartEnd"):b=_7(T,O,C,i,l),b.filter(_=>_.isShow))}var D7=["viewBox"],k7=["viewBox"];function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(null,arguments)}function OP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(n),!0).forEach(function(r){aS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _P(e,t){if(e==null)return{};var n,r,i=M7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function M7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aS(e,t,n){return(t=j7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j7(e){var t=I7(e,"string");return typeof t=="symbol"?t:t+""}function I7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ds extends E.Component{constructor(t){super(t),this.tickRefs=E.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=_P(t,D7),o=this.props,{viewBox:l}=o,u=_P(o,k7);return!Vy(r,l)||!Vy(i,u)||!Vy(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:o,orientation:l,tickSize:u,mirror:p,tickMargin:d}=this.props,h,m,y,b,x,A,C=p?-1:1,T=t.tickSize||u,O=De(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":h=m=t.coordinate,b=r+ +!p*o,y=b-C*T,A=y-C*d,x=O;break;case"left":y=b=t.coordinate,m=n+ +!p*i,h=m-C*T,x=h-C*d,A=O;break;case"right":y=b=t.coordinate,m=n+ +p*i,h=m+C*T,x=h+C*d,A=O;break;default:h=m=t.coordinate,b=r+ +p*o,y=b+C*T,A=y+C*d,x=O;break}return{line:{x1:h,y1:y,x2:m,y2:b},tick:{x,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:o,mirror:l,axisLine:u}=this.props,p=an(an(an({},Kt(this.props,!1)),Kt(u,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var d=+(o==="top"&&!l||o==="bottom"&&l);p=an(an({},p),{},{x1:t,y1:n+d*i,x2:t+r,y2:n+d*i})}else{var h=+(o==="left"&&!l||o==="right"&&l);p=an(an({},p),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return E.createElement("line",dl({},p,{className:ft("recharts-cartesian-axis-line",Qs(u,"className"))}))}static renderTickItem(t,n,r){var i,o=ft(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(t))i=E.cloneElement(t,an(an({},n),{},{className:o}));else if(typeof t=="function")i=t(an(an({},n),{},{className:o}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ft(l,t.className)),i=E.createElement(eh,dl({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:l,tickFormatter:u,unit:p,padding:d,tickTextProps:h}=this.props,m=rS(an(an({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),x=io(this.props),A=Kt(l,!1),C=an(an({},x),{},{fill:"none"},Kt(i,!1)),T=m.map((O,_)=>{var{line:M,tick:D}=this.getTickLineCoord(O),k=an(an(an(an({textAnchor:y,verticalAnchor:b},x),{},{stroke:"none",fill:o},A),D),{},{index:_,payload:O,visibleTicksCount:m.length,tickFormatter:u,padding:d},h);return E.createElement(fr,dl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},bu(this.props,O,_)),i&&E.createElement("line",dl({},C,M,{className:ft("recharts-cartesian-axis-tick-line",Qs(i,"className"))})),l&&ds.renderTickItem(l,k,"".concat(typeof u=="function"?u(O.value,_):O.value).concat(p||"")))});return T.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},T):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:E.createElement(fr,{className:ft("recharts-cartesian-axis",i),ref:u=>{if(u){var p=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(p);var d=p[0];if(d){var h=window.getComputedStyle(d).fontSize,m=window.getComputedStyle(d).letterSpacing;(h!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),E.createElement(Zz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},E.createElement(lG,{label:this.props.label}),this.props.children))}}aS(ds,"displayName","CartesianAxis");aS(ds,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var R7=["x1","y1","x2","y2","key"],L7=["offset"],$7=["xAxisId","yAxisId"],B7=["xAxisId","yAxisId"];function NP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(n),!0).forEach(function(r){U7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U7(e,t,n){return(t=z7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z7(e){var t=G7(e,"string");return typeof t=="symbol"?t:t+""}function G7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qs(){return qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qs.apply(null,arguments)}function gp(e,t){if(e==null)return{};var n,r,i=H7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function H7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Y7=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:l,ry:u}=e;return E.createElement("rect",{x:r,y:i,ry:u,width:o,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function vD(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:o,y2:l,key:u}=t,p=gp(t,R7),d=io(p),{offset:h}=d,m=gp(d,L7);n=E.createElement("line",qs({},m,{x1:r,y1:i,x2:o,y2:l,fill:"none",key:u}))}return n}function q7(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:l}=e,u=gp(e,$7),p=i.map((d,h)=>{var m=Un(Un({},u),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(h),index:h});return vD(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function F7(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:l}=e,u=gp(e,B7),p=i.map((d,h)=>{var m=Un(Un({},u),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(h),index:h});return vD(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function V7(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:o,height:l,horizontalPoints:u,horizontal:p=!0}=e;if(!p||!t||!t.length)return null;var d=u.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==d[0]&&d.unshift(0);var h=d.map((m,y)=>{var b=!d[y+1],x=b?i+l-m:d[y+1]-m;if(x<=0)return null;var A=y%t.length;return E.createElement("rect",{key:"react-".concat(y),y:m,x:r,height:x,width:o,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function K7(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:l,height:u,verticalPoints:p}=e;if(!t||!n||!n.length)return null;var d=p.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==d[0]&&d.unshift(0);var h=d.map((m,y)=>{var b=!d[y+1],x=b?i+l-m:d[y+1]-m;if(x<=0)return null;var A=y%n.length;return E.createElement("rect",{key:"react-".concat(y),x:m,y:o,width:x,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var W7=(e,t)=>{var{xAxis:n,width:r,height:i,offset:o}=e;return m_(rS(Un(Un(Un({},ds.defaultProps),n),{},{ticks:g_(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,t)},X7=(e,t)=>{var{yAxis:n,width:r,height:i,offset:o}=e;return m_(rS(Un(Un(Un({},ds.defaultProps),n),{},{ticks:g_(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,t)},Q7={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Ja(e){var t=Iv(),n=Rv(),r=S_(),i=Un(Un({},Jr(e,Q7)),{},{x:De(e.x)?e.x:r.left,y:De(e.y)?e.y:r.top,width:De(e.width)?e.width:r.width,height:De(e.height)?e.height:r.height}),{xAxisId:o,yAxisId:l,x:u,y:p,width:d,height:h,syncWithTicks:m,horizontalValues:y,verticalValues:b}=i,x=Zr(),A=Oe(U=>OT(U,"xAxis",o,x)),C=Oe(U=>OT(U,"yAxis",l,x));if(!De(d)||d<=0||!De(h)||h<=0||!De(u)||u!==+u||!De(p)||p!==+p)return null;var T=i.verticalCoordinatesGenerator||W7,O=i.horizontalCoordinatesGenerator||X7,{horizontalPoints:_,verticalPoints:M}=i;if((!_||!_.length)&&typeof O=="function"){var D=y&&y.length,k=O({yAxis:C?Un(Un({},C),{},{ticks:D?y:C.ticks}):void 0,width:t,height:n,offset:r},D?!0:m);iu(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(_=k)}if((!M||!M.length)&&typeof T=="function"){var j=b&&b.length,I=T({xAxis:A?Un(Un({},A),{},{ticks:j?b:A.ticks}):void 0,width:t,height:n,offset:r},j?!0:m);iu(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(M=I)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(Y7,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(V7,qs({},i,{horizontalPoints:_})),E.createElement(K7,qs({},i,{verticalPoints:M})),E.createElement(q7,qs({},i,{offset:r,horizontalPoints:_,xAxis:A,yAxis:C})),E.createElement(F7,qs({},i,{offset:r,verticalPoints:M,xAxis:A,yAxis:C})))}Ja.displayName="CartesianGrid";var Z7=["children"],J7=["dangerouslySetInnerHTML","ticks"],eY=["id"];function bD(e,t,n){return(t=tY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W0.apply(null,arguments)}function X0(e,t){if(e==null)return{};var n,r,i=rY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aY(e){var t=kt(),n=E.useMemo(()=>{var{children:r}=e,i=X0(e,Z7);return i},[e]);return E.useEffect(()=>(t(qH(n)),()=>{t(FH(n))}),[n,t]),e.children}var iY=e=>{var{xAxisId:t,className:n}=e,r=Oe(Mv),i=Zr(),o="xAxis",l=Oe(C=>Rl(C,o,t,i)),u=Oe(C=>f2(C,o,t,i)),p=Oe(C=>l2(C,t)),d=Oe(C=>T6(C,t)),h=Oe(C=>BN(C,t));if(p==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:y}=e,b=X0(e,J7),{id:x}=h,A=X0(h,eY);return E.createElement(ds,W0({},b,A,{scale:l,x:d.x,y:d.y,width:p.width,height:p.height,className:ft("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:u}))},sY=e=>{var t,n,r,i,o;return E.createElement(aY,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter},E.createElement(iY,e))};class Ta extends E.Component{render(){return E.createElement(sY,this.props)}}bD(Ta,"displayName","XAxis");bD(Ta,"defaultProps",{allowDataOverflow:br.allowDataOverflow,allowDecimals:br.allowDecimals,allowDuplicatedCategory:br.allowDuplicatedCategory,height:br.height,hide:!1,mirror:br.mirror,orientation:br.orientation,padding:br.padding,reversed:br.reversed,scale:br.scale,tickCount:br.tickCount,type:br.type,xAxisId:0});var oY=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=e,l=0;if(t){t.forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,p=i+o,d=l+p+u+(n?r:0);return Math.round(d)}return 0},lY=["dangerouslySetInnerHTML","ticks"],cY=["id"];function SD(e,t,n){return(t=uY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uY(e){var t=dY(e,"string");return typeof t=="symbol"?t:t+""}function dY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q0.apply(null,arguments)}function DP(e,t){if(e==null)return{};var n,r,i=fY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pY(e){var t=kt();return E.useEffect(()=>(t(VH(e)),()=>{t(KH(e))}),[e,t]),null}var hY=e=>{var t,{yAxisId:n,className:r,width:i,label:o}=e,l=E.useRef(null),u=E.useRef(null),p=Oe(Mv),d=Zr(),h=kt(),m="yAxis",y=Oe(k=>Rl(k,m,n,d)),b=Oe(k=>c2(k,n)),x=Oe(k=>P6(k,n)),A=Oe(k=>f2(k,m,n,d)),C=Oe(k=>UN(k,n));if(E.useLayoutEffect(()=>{var k;if(!(i!=="auto"||!b||Fb(o)||E.isValidElement(o)||C==null)){var j=l.current,I=j==null||(k=j.tickRefs)===null||k===void 0?void 0:k.current,{tickSize:U,tickMargin:Y}=j.props,V=oY({ticks:I,label:u.current,labelGapWithTick:5,tickSize:U,tickMargin:Y});Math.round(b.width)!==Math.round(V)&&h(WH({id:n,width:V}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,b?.width,b,h,o,n,i]),b==null||x==null||C==null)return null;var{dangerouslySetInnerHTML:T,ticks:O}=e,_=DP(e,lY),{id:M}=C,D=DP(C,cY);return E.createElement(ds,Q0({},_,D,{ref:l,labelRef:u,scale:y,x:x.x,y:x.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:b.width,height:b.height,className:ft("recharts-".concat(m," ").concat(m),r),viewBox:p,ticks:A}))},mY=e=>{var t,n,r,i,o;return E.createElement(E.Fragment,null,E.createElement(pY,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter}),E.createElement(hY,e))},gY={allowDataOverflow:Sr.allowDataOverflow,allowDecimals:Sr.allowDecimals,allowDuplicatedCategory:Sr.allowDuplicatedCategory,hide:!1,mirror:Sr.mirror,orientation:Sr.orientation,padding:Sr.padding,reversed:Sr.reversed,scale:Sr.scale,tickCount:Sr.tickCount,type:Sr.type,width:Sr.width,yAxisId:0};class Pa extends E.Component{render(){return E.createElement(mY,this.props)}}SD(Pa,"displayName","YAxis");SD(Pa,"defaultProps",gY);var Ky={exports:{}},Wy={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kP;function yY(){if(kP)return Wy;kP=1;var e=wl();function t(p,d){return p===d&&(p!==0||1/p===1/d)||p!==p&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Wy.useSyncExternalStoreWithSelector=function(p,d,h,m,y){var b=i(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=l(function(){function C(D){if(!T){if(T=!0,O=D,D=m(D),y!==void 0&&x.hasValue){var k=x.value;if(y(k,D))return _=k}return _=D}if(k=_,n(O,D))return k;var j=m(D);return y!==void 0&&y(k,j)?(O=D,k):(O=D,_=j)}var T=!1,O,_,M=h===void 0?null:h;return[function(){return C(d())},M===null?void 0:function(){return C(M())}]},[d,h,m,y]);var A=r(p,b[0],b[1]);return o(function(){x.hasValue=!0,x.value=A},[A]),u(A),A},Wy}var MP;function vY(){return MP||(MP=1,Ky.exports=yY()),Ky.exports}vY();function bY(e){e()}function SY(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bY(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var jP={notify(){},get:()=>[]};function xY(e,t){let n,r=jP,i=0,o=!1;function l(A){h();const C=r.subscribe(A);let T=!1;return()=>{T||(T=!0,C(),m())}}function u(){r.notify()}function p(){x.onStateChange&&x.onStateChange()}function d(){return o}function h(){i++,n||(n=e.subscribe(p),r=SY())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=jP)}function y(){o||(o=!0,h())}function b(){o&&(o=!1,m())}const x={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:p,isSubscribed:d,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>r};return x}var AY=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EY=AY(),CY=()=>typeof navigator<"u"&&navigator.product==="ReactNative",TY=CY(),PY=()=>EY||TY?E.useLayoutEffect:E.useEffect,wY=PY(),OY=Symbol.for("react-redux-context"),_Y=typeof globalThis<"u"?globalThis:{};function NY(){if(!E.createContext)return{};const e=_Y[OY]??=new Map;let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var DY=NY();function kY(e){const{children:t,context:n,serverState:r,store:i}=e,o=E.useMemo(()=>{const p=xY(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);wY(()=>{const{subscription:p}=o;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),l!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[o,l]);const u=n||DY;return E.createElement(u.Provider,{value:o},t)}var MY=kY,jY=(e,t)=>t,iS=te([jY,st,RN,cn,w2,mi,NU,on],IU),sS=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},xD=Xr("mouseClick"),AD=xu();AD.startListening({actionCreator:xD,effect:(e,t)=>{var n=e.payload,r=iS(t.getState(),sS(n));r?.activeIndex!=null&&t.dispatch(B6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Z0=Xr("mouseMove"),ED=xu();ED.startListening({actionCreator:Z0,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Lb(r,r.tooltip.settings.shared),o=iS(r,sS(n));i==="axis"&&(o?.activeIndex!=null?t.dispatch(S2({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(b2()))}});function IY(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var IP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},CD=wr({name:"rootProps",initialState:IP,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:IP.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),RY=CD.reducer,{updateOptions:LY}=CD.actions,TD=wr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:$Y}=TD.actions,BY=TD.reducer,PD=Xr("keyDown"),wD=Xr("focus"),oS=xu();oS.startListening({actionCreator:PD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var l=Number($b(i,$l(n))),u=mi(n);if(o==="Enter"){var p=up(n,"axis","hover",String(i.index));t.dispatch(Y0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:p}));return}var d=N6(n),h=d==="left-to-right"?1:-1,m=o==="ArrowRight"?1:-1,y=l+m*h;if(!(u==null||y>=u.length||y<0)){var b=up(n,"axis","hover",String(y));t.dispatch(Y0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});oS.startListening({actionCreator:wD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",l=up(n,"axis","hover",String(o));t.dispatch(Y0({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:l}))}}}});var qr=Xr("externalEvent"),OD=xu();OD.startListening({actionCreator:qr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:xU(n),activeDataKey:D2(n),activeIndex:to(n),activeLabel:N2(n),activeTooltipIndex:to(n),isTooltipActive:AU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var UY=te([Ll],e=>e.tooltipItemPayloads),zY=te([UY,ku,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var l=t(o,n);return l}}}),_D=Xr("touchMove"),ND=xu();ND.startListening({actionCreator:_D,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Lb(r,r.tooltip.settings.shared);if(i==="axis"){var o=iS(r,sS({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&t.dispatch(S2({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],p=document.elementFromPoint(u.clientX,u.clientY);if(!p||!p.getAttribute)return;var d=p.getAttribute(v_),h=(l=p.getAttribute(b_))!==null&&l!==void 0?l:void 0,m=zY(t.getState(),d,h);t.dispatch(v2({activeDataKey:h,activeIndex:d,activeCoordinate:m}))}}});var GY=YO({brush:f7,cartesianAxis:XH,chartData:QU,errorBars:u9,graphicalItems:hH,layout:M3,legend:E5,options:FU,polarAxis:NG,polarOptions:BY,referenceElements:b7,rootProps:RY,tooltip:U6}),HY=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return a3({reducer:GY,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([AD.middleware,ED.middleware,oS.middleware,OD.middleware,ND.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:IY},name:"recharts-".concat(n)}})};function DD(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Zr(),o=E.useRef(null);if(i)return n;o.current==null&&(o.current=HY(t,r));var l=Pv;return E.createElement(MY,{context:l,store:o.current},n)}function kD(e){var{layout:t,width:n,height:r,margin:i}=e,o=kt(),l=Zr();return E.useEffect(()=>{l||(o(N3(t)),o(D3({width:n,height:r})),o(_3(i)))},[o,l,t,n,r,i]),null}function MD(e){var t=kt();return E.useEffect(()=>{t(LY(e))},[t,e]),null}var YY=["children"];function qY(e,t){if(e==null)return{};var n,r,i=FY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function FY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yp.apply(null,arguments)}var VY={width:"100%",height:"100%"},KY=E.forwardRef((e,t)=>{var n=Iv(),r=Rv(),i=C_();if(!Sl(n)||!Sl(r))return null;var{children:o,otherAttributes:l,title:u,desc:p}=e,d,h;return typeof l.tabIndex=="number"?d=l.tabIndex:d=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,E.createElement(yv,yp({},l,{title:u,desc:p,role:h,tabIndex:d,width:n,height:r,style:VY,ref:t}),o)}),WY=e=>{var{children:t}=e,n=Oe(Ip);if(!n)return null;var{width:r,height:i,y:o,x:l}=n;return E.createElement(yv,{width:r,height:i,x:l,y:o},t)},RP=E.forwardRef((e,t)=>{var{children:n}=e,r=qY(e,YY),i=Zr();return i?E.createElement(WY,null,n):E.createElement(KY,yp({ref:t},r),n)});function XY(){var e=kt(),[t,n]=E.useState(null),r=Oe(l5);return E.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;Pr(o)&&o!==r&&e(k3(o))}},[t,e,r]),n}function LP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(n),!0).forEach(function(r){ZY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZY(e,t,n){return(t=JY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JY(e){var t=eq(e,"string");return typeof t=="symbol"?t:t+""}function eq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tq=E.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:l,onDoubleClick:u,onMouseDown:p,onMouseEnter:d,onMouseLeave:h,onMouseMove:m,onMouseUp:y,onTouchEnd:b,onTouchMove:x,onTouchStart:A,style:C,width:T}=e,O=kt(),[_,M]=E.useState(null),[D,k]=E.useState(null);sz();var j=XY(),I=E.useCallback(F=>{j(F),typeof t=="function"&&t(F),M(F),k(F)},[j,t,M,k]),U=E.useCallback(F=>{O(xD(F)),O(qr({handler:o,reactEvent:F}))},[O,o]),Y=E.useCallback(F=>{O(Z0(F)),O(qr({handler:d,reactEvent:F}))},[O,d]),V=E.useCallback(F=>{O(b2()),O(qr({handler:h,reactEvent:F}))},[O,h]),W=E.useCallback(F=>{O(Z0(F)),O(qr({handler:m,reactEvent:F}))},[O,m]),ae=E.useCallback(()=>{O(wD())},[O]),ne=E.useCallback(F=>{O(PD(F.key))},[O]),re=E.useCallback(F=>{O(qr({handler:l,reactEvent:F}))},[O,l]),L=E.useCallback(F=>{O(qr({handler:u,reactEvent:F}))},[O,u]),G=E.useCallback(F=>{O(qr({handler:p,reactEvent:F}))},[O,p]),oe=E.useCallback(F=>{O(qr({handler:y,reactEvent:F}))},[O,y]),ye=E.useCallback(F=>{O(qr({handler:A,reactEvent:F}))},[O,A]),R=E.useCallback(F=>{O(_D(F)),O(qr({handler:x,reactEvent:F}))},[O,x]),K=E.useCallback(F=>{O(qr({handler:b,reactEvent:F}))},[O,b]);return E.createElement(L2.Provider,{value:_},E.createElement(dO.Provider,{value:D},E.createElement("div",{className:ft("recharts-wrapper",r),style:QY({position:"relative",cursor:"default",width:T,height:i},C),onClick:U,onContextMenu:re,onDoubleClick:L,onFocus:ae,onKeyDown:ne,onMouseDown:G,onMouseEnter:Y,onMouseLeave:V,onMouseMove:W,onMouseUp:oe,onTouchEnd:K,onTouchMove:R,onTouchStart:ye,ref:I},n)))}),nq=["children","className","width","height","style","compact","title","desc"];function rq(e,t){if(e==null)return{};var n,r,i=aq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jD=E.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:o,style:l,compact:u,title:p,desc:d}=e,h=rq(e,nq),m=io(h);return u?E.createElement(RP,{otherAttributes:m,title:p,desc:d},n):E.createElement(tq,{className:r,style:l,width:i,height:o,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},E.createElement(RP,{otherAttributes:m,title:p,desc:d,ref:t},E.createElement(x7,null,n)))}),iq=["width","height"];function J0(){return J0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J0.apply(null,arguments)}function sq(e,t){if(e==null)return{};var n,r,i=oq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var lq={top:5,right:5,bottom:5,left:5},cq={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lq,reverseStackOrder:!1,syncMethod:"index"},uq=E.forwardRef(function(t,n){var r,i=Jr(t.categoricalChartProps,cq),{width:o,height:l}=i,u=sq(i,iq);if(!Sl(o)||!Sl(l))return null;var{chartName:p,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,categoricalChartProps:y}=t,b={chartName:p,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return E.createElement(DD,{preloadedState:{options:b},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:p},E.createElement(hD,{chartData:y.data}),E.createElement(kD,{width:o,height:l,layout:i.layout,margin:i.margin}),E.createElement(MD,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(jD,J0({},u,{width:o,height:l,ref:n})))}),dq=["axis","item"],Wi=E.forwardRef((e,t)=>E.createElement(uq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:dq,tooltipPayloadSearcher:$2,categoricalChartProps:e,ref:t}));function fq(e){var t=kt();return E.useEffect(()=>{t($Y(e))},[t,e]),null}var pq=["width","height","layout"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function hq(e,t){if(e==null)return{};var n,r,i=mq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gq={top:5,right:5,bottom:5,left:5},yq={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:gq,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},vq=E.forwardRef(function(t,n){var r,i=Jr(t.categoricalChartProps,yq),{width:o,height:l,layout:u}=i,p=hq(i,pq);if(!Sl(o)||!Sl(l))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:y}=t,b={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:y,eventEmitter:void 0};return E.createElement(DD,{preloadedState:{options:b},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:d},E.createElement(hD,{chartData:i.data}),E.createElement(kD,{width:o,height:l,layout:u,margin:i.margin}),E.createElement(MD,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(fq,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(jD,ev({width:o,height:l},p,{ref:n})))}),bq=["item"],Sq={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Xy=E.forwardRef((e,t)=>{var n=Jr(e,Sq);return E.createElement(vq,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:bq,tooltipPayloadSearcher:$2,categoricalChartProps:n,ref:t})});const fs=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i,scale:o=1})=>{const{name:l,cost:u,image:p,description:d,type:h,effect:m}=e,y=m?.goAgain,b=o!==1?{transform:`scale(${o})`,transformOrigin:"center center"}:{};return g.jsx("div",{onClick:x=>{x.stopPropagation(),w("CARD_PLAY",`🖱️ ActionCard clicked: ${e.name}`,{cardId:e.id,cardName:e.name,isPlayable:n,isMandatoryTarget:i,willCallOnClick:n||i}),n||i?t(e):w("CARD_PLAY",`🚫 Card click blocked - not playable: ${e.name}`,{isPlayable:n,isMandatoryTarget:i})},className:`
        w-[225px] h-[275px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${n||i?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"opacity-60":""}
        ${i?"ring-4 ring-red-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...b},children:g.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-purple-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[g.jsx("div",{className:"absolute inset-0 bg-slate-900"}),g.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[g.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center py-1 px-3 bg-black/40 flex-shrink-0 h-8",children:[g.jsx("div",{className:"overflow-hidden text-center min-w-0",children:g.jsx("span",{className:"font-orbitron text-sm uppercase tracking-widest text-white inline-block truncate max-w-full",children:l})}),g.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full flex-shrink-0",children:[g.jsx(kf,{size:12,className:"text-yellow-300"}),g.jsx("span",{className:"text-white font-bold text-sm ml-1",children:u})]})]}),g.jsx("div",{className:"p-1 flex-shrink-0",children:g.jsx("div",{className:"relative h-20 rounded border border-purple-400/50 overflow-hidden",children:g.jsx("img",{src:p,alt:l,className:"w-full h-full object-cover object-center",style:{objectFit:"cover"}})})}),g.jsx("div",{className:"mx-1 mb-1 flex-grow bg-black/60 backdrop-blur-sm border border-purple-800/70 p-2 overflow-y-auto rounded-md",children:g.jsx("p",{className:"text-sm text-gray-400 leading-tight text-center font-exo font-normal",children:d})}),g.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] gap-2 items-center px-2 border-t border-purple-800/70 flex-shrink-0 h-6 mt-auto",children:[g.jsx("div",{className:"w-4"}),g.jsx("div",{className:"flex items-center justify-center",children:g.jsxs("span",{className:"text-[10px] text-purple-400 uppercase tracking-widest font-semibold",children:[h," Card"]})}),g.jsx("div",{className:"w-4 flex items-center justify-center",children:y&&g.jsx(OM,{size:14,className:"text-cyan-400",style:{marginLeft:"-20px"}})})]})]})]})})},xq=({isOpen:e,onClose:t,title:n,drones:r=[],cards:i=[]})=>{if(!e)return null;const o=[...r].sort((u,p)=>u.class-p.class),l=[...i].sort((u,p)=>u.card.cost-p.card.cost);return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:g.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 max-w-[1300px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:u=>u.stopPropagation(),children:[g.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[g.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:n}),g.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:g.jsx(Yn,{size:32})})]}),g.jsxs("div",{className:"overflow-y-auto flex-grow pr-4",children:[g.jsxs("div",{className:"mb-6",children:[g.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",o.length,")"]}),o.length>0?g.jsx("div",{className:"flex flex-wrap gap-[10px]",children:o.map((u,p)=>g.jsx("div",{children:g.jsx(gl,{drone:u,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[]})},`${u.name}-${p}`))}):g.jsx("div",{className:"flex items-center justify-center py-20",children:g.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected"})})]}),g.jsx("div",{className:"border-t border-purple-500/30 mb-6"}),g.jsxs("div",{className:"mb-6",children:[g.jsxs("h3",{className:"text-xl font-orbitron text-purple-400 mb-3",children:["Cards (",l.reduce((u,p)=>u+p.quantity,0),")"]}),l.length>0?g.jsx("div",{className:"flex flex-wrap gap-[10px]",children:l.map((u,p)=>g.jsxs("div",{className:"relative",children:[g.jsx(fs,{card:u.card,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1}),u.quantity>1&&g.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white font-bold text-sm px-2 py-1 rounded z-10",children:["x",u.quantity]})]},`${u.card.id}-${p}`))}):g.jsx("div",{className:"flex items-center justify-center py-20",children:g.jsx("p",{className:"text-gray-500 text-xl italic",children:"No cards in deck"})})]})]})]})})},Aq=({card:e,onClose:t})=>e?g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:g.jsx("div",{onClick:n=>n.stopPropagation(),children:g.jsx(fs,{card:e,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1,scale:1.5})})}):null,Eq=({drone:e,onClose:t})=>e?g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:g.jsx("div",{onClick:n=>n.stopPropagation(),children:g.jsx(gl,{drone:e,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,ignoreDeployLimit:!0,appliedUpgrades:[],scale:1.5})})}):null,Cq=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onDronesChange:i,onConfirmDeck:o,onImportDeck:l})=>{const[u,p]=E.useState(null),[d,h]=E.useState(null),[m,y]=E.useState(!1),[b,x]=E.useState(!1),[A,C]=E.useState(!1),[T,O]=E.useState("cards"),[_,M]=E.useState("deck"),[D,k]=E.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[j,I]=E.useState(!1),U=E.useRef(null),[Y,V]=E.useState({key:"name",direction:"ascending"}),[W,ae]=E.useState({abilities:[]}),[ne,re]=E.useState({key:"name",direction:"ascending"}),[L,G]=E.useState("cost"),[oe,ye]=E.useState(!0),R=E.useMemo(()=>{const H=de=>de?de.replace(/_/g," ").toLowerCase().split(" ").map(ue=>ue.charAt(0).toUpperCase()+ue.slice(1)).join(" "):"";return t.map(de=>{const ve=[],ue=de.effect;if(ue.type==="REPEATING_EFFECT")ve.push(H(ue.type)),ue.effects&&Array.isArray(ue.effects)&&ue.effects.forEach(Se=>{Se.type&&ve.push(H(Se.type))});else if(ue.type==="MODIFY_DRONE_BASE"&&ue.mod){const Se=ue.mod.stat,Ie=ue.mod.value;Se==="attack"?ve.push(Ie>0?"Attack Buff":"Attack Debuff"):Se==="speed"?ve.push(Ie>0?"Speed Buff":"Speed Debuff"):Se==="shields"?ve.push(Ie>0?"Shield Buff":"Shield Debuff"):Se==="cost"?ve.push(Ie<0?"Cost Reduction":"Cost Increase"):Se==="limit"?ve.push(Ie>0?"Limit Buff":"Limit Debuff"):Se==="ability"?(ve.push("Ability Grant"),ue.mod.abilityToAdd&&ue.mod.abilityToAdd.name&&ve.push(ue.mod.abilityToAdd.name)):ve.push(H(`${Se} Modification`))}else if(ue.type==="MODIFY_STAT"&&ue.mod){const Se=ue.mod.stat,Ie=ue.mod.value;ue.mod.type,Se==="attack"?ve.push(Ie>0?"Attack Buff":"Attack Debuff"):Se==="speed"?ve.push(Ie>0?"Speed Buff":"Speed Debuff"):Se==="shields"?ve.push(Ie>0?"Shield Buff":"Shield Debuff"):ve.push(Ie>0?`${Se} Buff`:`${Se} Debuff`)}else ue.type==="SEARCH_AND_DRAW"?(ve.push(H(ue.type)),ve.push("Draw")):ue.type&&ve.push(H(ue.type));ue.goAgain&&ve.push("Go Again"),ue.damageType==="PIERCING"&&ve.push("Piercing"),ue.mod?.type&&ve.push(H(ue.mod.type));const Te=(()=>{if(de.targeting){const Se=H(de.targeting.type);if(de.targeting.affinity){const Ie=de.targeting.affinity.charAt(0)+de.targeting.affinity.slice(1).toLowerCase();return`${Se} (${Ie})`}return Se}else if(ue.type==="MULTI_MOVE"&&ue.source){const Se=ue.source.location||"Any",Ie=ue.source.affinity||"Any",Rt=Ie.charAt(0).toUpperCase()+Ie.slice(1).toLowerCase();return`${H(Se)} (${Rt})`}else if(ue.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...de,keywords:ve,targetingText:Te}})},[t]),K=E.useMemo(()=>Gn.map(H=>{const de=[];H.abilities&&H.abilities.length>0&&H.abilities.forEach(ue=>{ue.name&&de.push(ue.name),ue.type&&de.push(ue.type==="ACTIVE"?"Active":ue.type==="PASSIVE"?"Passive":"Triggered"),ue.effect?.keyword&&de.push(ue.effect.keyword)});const ve=H.abilities&&H.abilities.length>0?H.abilities.map(ue=>ue.description).join(" | "):"No abilities";return{...H,keywords:de,description:ve}}),[]),F=E.useMemo(()=>{const H=new Set,de=new Set,ve=new Set;R.forEach(Te=>{H.add(Te.cost),de.add(Te.targetingText),Te.keywords.forEach(Se=>ve.add(Se))});const ue=Array.from(H);return{minCost:Math.min(...ue),maxCost:Math.max(...ue),targets:["all",...Array.from(de).sort()],abilities:Array.from(ve).sort()}},[R]),ie=E.useMemo(()=>{const H=new Set;return K.forEach(de=>{de.keywords.forEach(ve=>H.add(ve))}),{abilities:Array.from(H).sort()}},[K]);E.useEffect(()=>{F.minCost!==1/0&&F.maxCost!==-1/0&&k(H=>({...H,cost:{min:F.minCost,max:F.maxCost}}))},[F.minCost,F.maxCost]);const{cardCount:he,deckListForDisplay:me,baseCardCounts:xe}=E.useMemo(()=>{const H={};let de=0;Object.entries(n).forEach(([ue,Te])=>{if(Te>0){de+=Te;const Se=R.find(Ie=>Ie.id===ue);if(Se){const Ie=Se.baseCardId;H[Ie]=(H[Ie]||0)+Te}}});const ve=Object.entries(n).filter(([,ue])=>ue>0).map(([ue,Te])=>({...R.find(Ie=>Ie.id===ue),quantity:Te})).sort((ue,Te)=>ue.name.localeCompare(Te.name));return{cardCount:de,deckListForDisplay:ve,baseCardCounts:H}},[n,R]),Ye=he>=40,{droneCount:qe,droneListForDisplay:be}=E.useMemo(()=>{let H=0;const de=[];return Object.entries(e||{}).forEach(([ve,ue])=>{if(ue>0){H+=ue;const Te=K.find(Se=>Se.name===ve);Te&&de.push({...Te,quantity:ue})}}),de.sort((ve,ue)=>ve.name.localeCompare(ue.name)),{droneCount:H,droneListForDisplay:de}},[e,K]),Re=qe===10,Le=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],pe=E.useMemo(()=>{const H={};me.forEach(Te=>{const Se=Te.cost||0;H[Se]=(H[Se]||0)+Te.quantity});const de=Object.entries(H).map(([Te,Se])=>({name:`${Te}`,count:Se})).sort((Te,Se)=>parseInt(Te.name)-parseInt(Se.name)),ve={};me.forEach(Te=>{Te.keywords&&Te.keywords.forEach(Se=>{ve[Se]=(ve[Se]||0)+Te.quantity})});const ue=Object.entries(ve).map(([Te,Se])=>({name:Te,value:Se})).sort((Te,Se)=>Se.value-Te.value);return{barChartData:de,pieChartData:ue}},[me]),tt=E.useMemo(()=>{const H=Mt=>{const Lt={};return be.forEach(dn=>{const qn=dn[Mt]||0;Lt[qn]=(Lt[qn]||0)+dn.quantity}),Object.entries(Lt).map(([dn,qn])=>({name:`${dn}`,count:qn})).sort((dn,qn)=>parseInt(dn.name)-parseInt(qn.name))},de=H("class"),ve=H("attack"),ue=H("speed"),Te=H("shields"),Se=H("hull"),Ie=H("limit"),Rt=H("upgradeSlots"),Zt={};be.forEach(Mt=>{Mt.keywords&&Mt.keywords.forEach(Lt=>{Zt[Lt]=(Zt[Lt]||0)+Mt.quantity})});const ha=Object.entries(Zt).map(([Mt,Lt])=>({name:Mt,value:Lt})).sort((Mt,Lt)=>Lt.value-Mt.value);return{costData:de,attackData:ve,speedData:ue,shieldsData:Te,hullData:Se,limitData:Ie,upgradesData:Rt,abilityData:ha}},[be]),Qe=E.useMemo(()=>{const H=[];Object.entries(e||{}).forEach(([ve,ue])=>{if(ue>0){const Te=K.find(Se=>Se.name===ve);Te&&H.push(Te)}});const de=[];return Object.entries(n).forEach(([ve,ue])=>{if(ue>0){const Te=R.find(Se=>Se.id===ve);Te&&de.push({card:Te,quantity:ue})}}),{drones:H,cards:de}},[e,n,K,R]),Qt=E.useMemo(()=>{let H=[...R].filter(de=>de.cost<D.cost.min||de.cost>D.cost.max||D.target!=="all"&&de.targetingText!==D.target||D.type!=="all"&&de.type!==D.type?!1:D.abilities.length>0?D.abilities.every(ve=>de.keywords.includes(ve)):!(D.hideEnhanced&&de.id.endsWith("_ENHANCED")));return Y.key!==null&&H.sort((de,ve)=>{const ue=de[Y.key],Te=ve[Y.key];if(ue==null&&Te==null)return 0;if(ue==null)return 1;if(Te==null)return-1;const Se=String(ue).toLowerCase(),Ie=String(Te).toLowerCase();return Se<Ie?Y.direction==="ascending"?-1:1:Se>Ie?Y.direction==="ascending"?1:-1:de.id.localeCompare(ve.id)}),H},[R,D,Y]),lt=E.useMemo(()=>{let H=[...K].filter(de=>W.abilities.length>0?W.abilities.every(ve=>de.keywords.includes(ve)):!0);return ne.key!==null&&H.sort((de,ve)=>{const ue=de[ne.key],Te=ve[ne.key];if(ue==null&&Te==null)return 0;if(ue==null)return 1;if(Te==null)return-1;const Se=String(ue).toLowerCase(),Ie=String(Te).toLowerCase();return Se<Ie?ne.direction==="ascending"?-1:1:Se>Ie?ne.direction==="ascending"?1:-1:de.name.localeCompare(ve.name)}),H},[K,W,ne]),nt=H=>{let de="ascending";Y.key===H&&Y.direction==="ascending"&&(de="descending"),V({key:H,direction:de})},xn=H=>{let de="ascending";ne.key===H&&ne.direction==="ascending"&&(de="descending"),re({key:H,direction:de})},ta=(H,de)=>{k(ve=>({...ve,[H]:de}))},fo=H=>{k(de=>{const ve=de.abilities.includes(H)?de.abilities.filter(ue=>ue!==H):[...de.abilities,H];return{...de,abilities:ve}})},Da=H=>{ae(de=>{const ve=de.abilities.includes(H)?de.abilities.filter(ue=>ue!==H):[...de.abilities,H];return{...de,abilities:ve}})},Bl=()=>{k({cost:{min:F.minCost,max:F.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),I(!1)},ps=()=>{ae({abilities:[]})},et=()=>{Object.keys(n).forEach(H=>{n[H]>0&&r(H,0)})},Gt=()=>{Object.keys(e||{}).forEach(H=>{e[H]>0&&i(H,0)})};E.useEffect(()=>{const H=de=>{U.current&&!U.current.contains(de.target)&&I(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]);const pa=Math.PI/180,un=({cx:H,cy:de,midAngle:ve,outerRadius:ue,fill:Te,name:Se,value:Ie})=>{const Rt=Math.sin(-pa*ve),Zt=Math.cos(-pa*ve),ha=H+(ue+5)*Zt,Mt=de+(ue+5)*Rt,Lt=H+(ue+15)*Zt,dn=de+(ue+15)*Rt,qn=Lt+(Zt>=0?1:-1)*12,ka=dn,gi=Zt>=0?"start":"end";return g.jsxs("g",{children:[g.jsx("path",{d:`M${ha},${Mt}L${Lt},${dn}L${qn},${ka}`,stroke:Te,fill:"none"}),g.jsx("circle",{cx:qn,cy:ka,r:2,fill:Te,stroke:"none"}),g.jsx("text",{x:qn+(Zt>=0?1:-1)*8,y:ka,dy:4,textAnchor:gi,fill:"#9CA3AF",fontSize:"11px",children:`${Se} (${Ie})`})]})},Or=()=>{const[H,de]=E.useState(""),ve=E.useRef(null),ue=E.useMemo(()=>{const Se=Object.entries(n).map(([Rt,Zt])=>`${Rt}:${Zt}`).join(","),Ie=Object.entries(e||{}).map(([Rt,Zt])=>`${Rt}:${Zt}`).join(",");return`cards:${Se}|drones:${Ie}`},[n,e]),Te=()=>{ve.current.select(),document.execCommand("copy"),de("Copied!"),setTimeout(()=>de(""),2e3)};return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>y(!1),children:g.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:Se=>Se.stopPropagation(),children:[g.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"}),g.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck and drones."}),g.jsx("textarea",{ref:ve,readOnly:!0,value:ue,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),g.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[g.jsx("span",{className:"text-green-400 self-center",children:H}),g.jsxs("button",{onClick:Te,className:"btn-confirm flex items-center gap-2",children:[g.jsx(tv,{size:16})," Copy to Clipboard"]}),g.jsxs("button",{onClick:()=>y(!1),className:"btn-cancel flex items-center gap-2",children:[g.jsx(Yn,{size:16})," Close"]})]})]})})},An=()=>{const[H,de]=E.useState(""),[ve,ue]=E.useState(""),Te=()=>{ue("");const Se=l(H);Se.success?x(!1):ue(Se.message||"Invalid deck code format.")};return g.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>x(!1),children:g.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:Se=>Se.stopPropagation(),children:[g.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),g.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load both cards and drones into the builder."}),g.jsx("textarea",{value:H,onChange:Se=>de(Se.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"cards:CARD001:4,CARD002:2|drones:Scout Drone:1,Heavy Fighter:1"}),ve&&g.jsx("p",{className:"text-red-500 mt-2",children:ve}),g.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[g.jsx("button",{onClick:()=>x(!1),className:"btn-cancel",children:"Cancel"}),g.jsx("button",{onClick:Te,className:"btn-confirm",children:"Load Deck"})]})]})})};return g.jsxs("div",{className:"w-full flex flex-col text-white font-exo mt-8 text-sm",children:[u&&g.jsx(Aq,{card:u,onClose:()=>p(null)}),d&&g.jsx(Eq,{drone:d,onClose:()=>h(null)}),m&&g.jsx(Or,{}),b&&g.jsx(An,{}),g.jsx(xq,{isOpen:A,onClose:()=>C(!1),title:"Your Deck & Drones",drones:Qe.drones,cards:Qe.cards}),g.jsxs("div",{className:"flex justify-center items-center mb-4",children:[g.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),g.jsxs("div",{className:"flex gap-4 ml-8",children:[g.jsxs("button",{onClick:()=>x(!0),className:"btn-utility flex items-center gap-2",children:[g.jsx(BM,{size:16})," Import"]}),g.jsxs("button",{onClick:()=>y(!0),className:"btn-utility flex items-center gap-2",children:[g.jsx(vM,{size:16})," Export"]})]})]}),g.jsxs("div",{className:"flex-grow flex gap-6 min-h-0 mb-[10px]",children:[g.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] ml-[10px]",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>{O("cards"),M("deck")},className:`btn-utility ${T==="cards"?"opacity-100":"opacity-60"}`,children:"Cards"}),g.jsx("button",{onClick:()=>{O("drones"),M("drones")},className:`btn-utility ${T==="drones"?"opacity-100":"opacity-60"}`,children:"Drones"}),g.jsxs("button",{onClick:()=>C(!0),className:"btn-utility flex items-center gap-2",children:[g.jsx(EM,{size:16}),"View All"]})]}),g.jsx("button",{onClick:T==="cards"?Bl:ps,className:"btn-reset",children:"Reset Filters"})]}),T==="cards"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[g.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[g.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",D.cost.min," - ",D.cost.max]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"range",min:F.minCost,max:F.maxCost,value:D.cost.min,onChange:H=>ta("cost",{...D.cost,min:Math.min(parseInt(H.target.value),D.cost.max)}),className:"w-1/2"}),g.jsx("input",{type:"range",min:F.minCost,max:F.maxCost,value:D.cost.max,onChange:H=>ta("cost",{...D.cost,max:Math.max(parseInt(H.target.value),D.cost.min)}),className:"w-1/2"})]})]}),g.jsxs("div",{className:"relative",ref:U,children:[g.jsx("button",{onClick:()=>I(!j),className:"filter-select w-full text-left h-full",children:D.abilities.length===0?"Select Abilities":`${D.abilities.length} Abilities Selected`}),j&&g.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:F.abilities.map(H=>g.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:D.abilities.includes(H),onChange:()=>fo(H),className:"mr-2"}),H]},H))})]}),g.jsxs("select",{onChange:H=>ta("type",H.target.value),value:D.type,className:"filter-select h-full",children:[g.jsx("option",{value:"all",children:"All Types"}),g.jsx("option",{value:"Action",children:"Action Cards"}),g.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),g.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:g.jsxs("label",{className:"flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:D.hideEnhanced,onChange:H=>ta("hideEnhanced",H.target.checked),className:"mr-2"}),g.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),g.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:g.jsxs("table",{className:"w-full text-left deck-builder-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Info"}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>nt("name"),className:`w-full text-left transition-colors underline cursor-pointer ${Y.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",Y.key==="name"&&(Y.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>nt("type"),className:`w-full text-left transition-colors underline cursor-pointer ${Y.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",Y.key==="type"&&(Y.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>nt("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${Y.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",Y.key==="cost"&&(Y.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>nt("description"),className:`w-full text-left transition-colors underline cursor-pointer ${Y.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",Y.key==="description"&&(Y.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:"Abilities"}),g.jsx("th",{children:"Targeting"}),g.jsx("th",{children:"Quantity"})]})}),g.jsx("tbody",{children:Qt.map((H,de)=>{const ve=n[H.id]||0,ue=xe[H.baseCardId]||0,Te=H.maxInDeck;return g.jsxs("tr",{className:H.type==="Upgrade"?"bg-purple-900/10":"",children:[g.jsx("td",{children:g.jsx("button",{onClick:()=>p(H),className:"p-1 text-gray-400 hover:text-white",children:g.jsx(nf,{size:18})})}),g.jsx("td",{className:"font-bold",children:H.name}),g.jsx("td",{className:`font-semibold ${H.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:H.type}),g.jsx("td",{children:H.cost}),g.jsx("td",{className:"text-xs text-gray-400",children:H.description}),g.jsx("td",{children:g.jsx("div",{className:"flex flex-wrap gap-2",children:H.keywords.map(Se=>g.jsx("span",{className:"ability-chip",children:Se},Se))})}),g.jsx("td",{className:"text-xs",children:H.targetingText==="N/A"?g.jsx("span",{className:"text-gray-500",children:"N/A"}):H.targetingText}),g.jsx("td",{children:g.jsx("div",{className:"quantity-buttons",children:Array.from({length:Te+1}).map((Se,Ie)=>{const Rt=Ie===ve,Zt=Te-(ue-ve),ha=Ie>Zt;return g.jsx("button",{onClick:()=>r(H.id,Ie),className:`quantity-btn ${Rt?"selected":""}`,disabled:ha,children:Ie},Ie)})})})]},`${H.id}-${de}`)})})]})})]}),T==="drones"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:g.jsxs("div",{className:"relative",ref:U,children:[g.jsx("button",{onClick:()=>I(!j),className:"filter-select w-full text-left h-full",children:W.abilities.length===0?"Select Abilities":`${W.abilities.length} Abilities Selected`}),j&&g.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:ie.abilities.map(H=>g.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:W.abilities.includes(H),onChange:()=>Da(H),className:"mr-2"}),H]},H))})]})}),g.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:g.jsxs("table",{className:"w-full text-left deck-builder-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Info"}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>xn("name"),className:`w-full text-left transition-colors underline cursor-pointer ${ne.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",ne.key==="name"&&(ne.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>xn("class"),className:`w-full text-left transition-colors underline cursor-pointer ${ne.key==="class"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",ne.key==="class"&&(ne.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>xn("attack"),className:`w-full text-left transition-colors underline cursor-pointer ${ne.key==="attack"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Attack",ne.key==="attack"&&(ne.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>xn("speed"),className:`w-full text-left transition-colors underline cursor-pointer ${ne.key==="speed"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Speed",ne.key==="speed"&&(ne.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>xn("shields"),className:`w-full text-left transition-colors underline cursor-pointer ${ne.key==="shields"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Shields",ne.key==="shields"&&(ne.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>xn("hull"),className:`w-full text-left transition-colors underline cursor-pointer ${ne.key==="hull"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Hull",ne.key==="hull"&&(ne.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:"Abilities"}),g.jsx("th",{children:"Description"}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>xn("limit"),className:`w-full text-left transition-colors underline cursor-pointer ${ne.key==="limit"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Limit",ne.key==="limit"&&(ne.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:g.jsxs("button",{onClick:()=>xn("upgradeSlots"),className:`w-full text-left transition-colors underline cursor-pointer ${ne.key==="upgradeSlots"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Upgrades",ne.key==="upgradeSlots"&&(ne.direction==="ascending"?" ▲":" ▼")]})}),g.jsx("th",{children:"Quantity"})]})}),g.jsx("tbody",{children:lt.map((H,de)=>{const ve=e&&e[H.name]||0;return g.jsxs("tr",{children:[g.jsx("td",{children:g.jsx("button",{onClick:()=>h(H),className:"p-1 text-gray-400 hover:text-white",children:g.jsx(nf,{size:18})})}),g.jsx("td",{className:"font-bold",children:H.name}),g.jsx("td",{children:H.class}),g.jsx("td",{children:H.attack}),g.jsx("td",{children:H.speed}),g.jsx("td",{children:H.shields}),g.jsx("td",{children:H.hull}),g.jsx("td",{children:g.jsx("div",{className:"flex flex-wrap gap-2",children:H.keywords.map(ue=>g.jsx("span",{className:"ability-chip",children:ue},ue))})}),g.jsx("td",{className:"text-xs text-gray-400",children:H.description}),g.jsx("td",{children:H.limit}),g.jsx("td",{children:H.upgradeSlots}),g.jsx("td",{children:g.jsxs("div",{className:"quantity-buttons",children:[g.jsx("button",{onClick:()=>i(H.name,0),className:`quantity-btn ${ve===0?"selected":""}`,children:"0"}),g.jsx("button",{onClick:()=>i(H.name,1),className:`quantity-btn ${ve===1?"selected":""}`,children:"1"})]})})]},`${H.name}-${de}`)})})]})})]})]}),g.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] mr-[10px]",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>M("deck"),className:`btn-utility ${_==="deck"?"opacity-100":"opacity-60"}`,children:["Your Deck (",he,"/40)"]}),g.jsxs("button",{onClick:()=>M("drones"),className:`btn-utility ${_==="drones"?"opacity-100":"opacity-60"}`,children:["Your Drones (",qe,"/10)"]})]}),g.jsxs("button",{onClick:_==="deck"?et:Gt,className:"btn-reset",children:["Reset ",_==="deck"?"Deck":"Drones"]})]}),_==="deck"&&g.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:me.length>0?me.map(H=>{const de=xe[H.baseCardId]>=H.maxInDeck;return g.jsxs("div",{className:"deck-list-item",children:[g.jsx("button",{onClick:()=>p(H),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:g.jsx(nf,{size:18})}),g.jsx("span",{className:"flex-grow truncate",title:H.name,children:H.name}),g.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[g.jsx("button",{onClick:()=>r(H.id,H.quantity-1),className:"deck-edit-btn",children:"-"}),g.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",H.quantity]}),g.jsx("button",{onClick:()=>r(H.id,H.quantity+1),disabled:de,className:"deck-edit-btn",children:"+"})]})]},H.id)}):g.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),_==="drones"&&g.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:be.length>0?be.map(H=>g.jsxs("div",{className:"deck-list-item",children:[g.jsx("button",{onClick:()=>h(H),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Drone Details",children:g.jsx(nf,{size:18})}),g.jsx("span",{className:"flex-grow truncate",title:H.name,children:H.name}),g.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[g.jsx("button",{onClick:()=>i(H.name,0),className:"deck-edit-btn",children:"-"}),g.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",H.quantity]}),g.jsx("button",{onClick:()=>i(H.name,1),disabled:qe>=10,className:"deck-edit-btn",children:"+"})]})]},H.name)):g.jsx("p",{className:"text-gray-500 italic",children:"Your drone pool is empty. Add drones from the left."})}),_==="deck"&&he>0&&g.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[g.jsxs("button",{onClick:()=>ye(!oe),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",g.jsx(nu,{size:20,className:`transition-transform duration-300 ${oe?"rotate-0":"rotate-180"}`})]}),g.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${oe?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[g.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[g.jsx("button",{onClick:()=>G("cost"),className:`btn-info text-xs ${L==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),g.jsx("button",{onClick:()=>G("type"),className:`btn-info text-xs ${L==="type"?"opacity-100":"opacity-60"}`,children:"Type"}),g.jsx("button",{onClick:()=>G("ability"),className:`btn-info text-xs ${L==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),g.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[L==="cost"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Wi,{data:pe.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[g.jsx(Ja,{strokeDasharray:"3 3",stroke:"#4A5568"}),g.jsx(Ta,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),g.jsx(Pa,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),g.jsx(sa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),g.jsx(Za,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),L==="type"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Xy,{margin:{top:20,right:30,bottom:20,left:30},children:[g.jsx(Nf,{data:[{name:"Action Cards",value:me.filter(H=>H.type==="Action").reduce((H,de)=>H+de.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:me.filter(H=>H.type==="Upgrade").reduce((H,de)=>H+de.quantity,0),color:"#c084fc"}].filter(H=>H.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:H,value:de,percent:ve})=>`${H}: ${de} (${(ve*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:me.filter(H=>H.type==="Action").reduce((H,de)=>H+de.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:me.filter(H=>H.type==="Upgrade").reduce((H,de)=>H+de.quantity,0),color:"#c084fc"}].filter(H=>H.value>0).map((H,de)=>g.jsx(Xs,{fill:H.color},`cell-${de}`))}),g.jsx(sa,{}),g.jsx(Rp,{})]})})]}),L==="ability"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Xy,{margin:{top:20,right:30,bottom:20,left:30},children:[g.jsx(Nf,{data:pe.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:un,outerRadius:60,dataKey:"value",children:pe.pieChartData.map((H,de)=>g.jsx(Xs,{fill:Le[de%Le.length]},`cell-${de}`))}),g.jsx(sa,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),_==="drones"&&qe>0&&g.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[g.jsxs("button",{onClick:()=>ye(!oe),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Drone Statistics",g.jsx(nu,{size:20,className:`transition-transform duration-300 ${oe?"rotate-0":"rotate-180"}`})]}),g.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${oe?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[g.jsxs("div",{className:"flex justify-center gap-2 mb-2 flex-wrap",children:[g.jsx("button",{onClick:()=>G("cost"),className:`btn-info text-xs ${L==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),g.jsx("button",{onClick:()=>G("attack"),className:`btn-info text-xs ${L==="attack"?"opacity-100":"opacity-60"}`,children:"Attack"}),g.jsx("button",{onClick:()=>G("speed"),className:`btn-info text-xs ${L==="speed"?"opacity-100":"opacity-60"}`,children:"Speed"}),g.jsx("button",{onClick:()=>G("shields"),className:`btn-info text-xs ${L==="shields"?"opacity-100":"opacity-60"}`,children:"Shields"}),g.jsx("button",{onClick:()=>G("hull"),className:`btn-info text-xs ${L==="hull"?"opacity-100":"opacity-60"}`,children:"Hull"}),g.jsx("button",{onClick:()=>G("limit"),className:`btn-info text-xs ${L==="limit"?"opacity-100":"opacity-60"}`,children:"Limit"}),g.jsx("button",{onClick:()=>G("upgrades"),className:`btn-info text-xs ${L==="upgrades"?"opacity-100":"opacity-60"}`,children:"Upgrades"}),g.jsx("button",{onClick:()=>G("ability"),className:`btn-info text-xs ${L==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),g.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[L==="cost"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Drone Cost Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Wi,{data:tt.costData,margin:{top:5,right:20,left:-15,bottom:0},children:[g.jsx(Ja,{strokeDasharray:"3 3",stroke:"#4A5568"}),g.jsx(Ta,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),g.jsx(Pa,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),g.jsx(sa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),g.jsx(Za,{dataKey:"count",fill:"#8884d8",name:"Drone Count"})]})})]}),L==="attack"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Attack Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Wi,{data:tt.attackData,margin:{top:5,right:20,left:-15,bottom:0},children:[g.jsx(Ja,{strokeDasharray:"3 3",stroke:"#4A5568"}),g.jsx(Ta,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),g.jsx(Pa,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),g.jsx(sa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),g.jsx(Za,{dataKey:"count",fill:"#ef4444",name:"Drone Count"})]})})]}),L==="speed"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Speed Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Wi,{data:tt.speedData,margin:{top:5,right:20,left:-15,bottom:0},children:[g.jsx(Ja,{strokeDasharray:"3 3",stroke:"#4A5568"}),g.jsx(Ta,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),g.jsx(Pa,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),g.jsx(sa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),g.jsx(Za,{dataKey:"count",fill:"#3b82f6",name:"Drone Count"})]})})]}),L==="shields"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Shield Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Wi,{data:tt.shieldsData,margin:{top:5,right:20,left:-15,bottom:0},children:[g.jsx(Ja,{strokeDasharray:"3 3",stroke:"#4A5568"}),g.jsx(Ta,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),g.jsx(Pa,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),g.jsx(sa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),g.jsx(Za,{dataKey:"count",fill:"#06b6d4",name:"Drone Count"})]})})]}),L==="hull"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Hull Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Wi,{data:tt.hullData,margin:{top:5,right:20,left:-15,bottom:0},children:[g.jsx(Ja,{strokeDasharray:"3 3",stroke:"#4A5568"}),g.jsx(Ta,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),g.jsx(Pa,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),g.jsx(sa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),g.jsx(Za,{dataKey:"count",fill:"#22c55e",name:"Drone Count"})]})})]}),L==="limit"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Deployment Limit Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Wi,{data:tt.limitData,margin:{top:5,right:20,left:-15,bottom:0},children:[g.jsx(Ja,{strokeDasharray:"3 3",stroke:"#4A5568"}),g.jsx(Ta,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),g.jsx(Pa,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),g.jsx(sa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),g.jsx(Za,{dataKey:"count",fill:"#f59e0b",name:"Drone Count"})]})})]}),L==="upgrades"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Upgrade Slots Distribution"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Wi,{data:tt.upgradesData,margin:{top:5,right:20,left:-15,bottom:0},children:[g.jsx(Ja,{strokeDasharray:"3 3",stroke:"#4A5568"}),g.jsx(Ta,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),g.jsx(Pa,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),g.jsx(sa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),g.jsx(Za,{dataKey:"count",fill:"#a855f7",name:"Drone Count"})]})})]}),L==="ability"&&g.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[g.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),g.jsx(oa,{width:"100%",height:"100%",children:g.jsxs(Xy,{margin:{top:20,right:30,bottom:20,left:30},children:[g.jsx(Nf,{data:tt.abilityData,cx:"50%",cy:"50%",labelLine:!1,label:({name:H,value:de,percent:ve})=>`${H}: ${de} (${(ve*100).toFixed(0)}%)`,outerRadius:60,dataKey:"value",children:tt.abilityData.map((H,de)=>g.jsx(Xs,{fill:Le[de%Le.length]},`cell-${de}`))}),g.jsx(sa,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),g.jsx("button",{onClick:o,disabled:!Ye||!Re,className:"btn-confirm w-full p-4 mt-4 text-lg font-bold font-orbitron",children:"Confirm Deck & Drones"})]})]})]})};function Tq(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getOpponentPlayerState:o,addLogEntry:l}=is(),{turnPhase:u}=e,p=i();o();const[d,h]=E.useState(!1),[m,y]=E.useState({}),[b,x]=E.useState({}),A=async I=>{if(u==="deckSelection")if(w("DECK_SELECTION","🔧 handleDeckChoice called with:",I),I==="standard"){const U=t(),Y=$e.buildDeckFromList(cl),V=[...WP];if(V.length!==10){console.error(`❌ Standard drone list has ${V.length} drones, expected 10`),l({player:"SYSTEM",actionType:"ERROR",source:"Deck Validation",target:"N/A",outcome:`Invalid standard drone list: ${V.length} drones instead of 10.`},"handleDeckChoice");return}const W={phase:"deckSelection",playerId:U,actionData:{deck:Y,drones:V}};if(e.gameMode==="guest"){w("DECK_SELECTION","[GUEST] Sending deck selection commitment to host"),Qn.sendActionToHost("commitment",W);return}const ae=await Ge.actionProcessor.processCommitment(W);if(!ae.success){console.error("❌ Deck selection submission failed:",ae.error);return}w("DECK_SELECTION","✅ Standard deck selection submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else I==="custom"&&(w("DECK_SELECTION","🔧 Opening custom deck builder"),h(!0))},C=(I,U)=>{y(Y=>({...Y,[I]:U}))},T=(I,U)=>{x(Y=>({...Y,[I]:U}))},O=async()=>{w("DECK_SELECTION","🔧 Confirming custom deck:",m);const I=[];let U=0;Object.entries(m).forEach(([re,L])=>{for(let G=0;G<L;G++){const oe=xf.find(ye=>ye.id===re);oe&&I.push($e.createCard(oe,`card-${Date.now()}-${U++}`))}});const Y=I.sort(()=>.5-Math.random());w("DECK_SELECTION",`🔀 Custom deck shuffled: ${Y.length} cards`,{sampleCard:Y[0],sampleInstanceId:Y[0]?.instanceId,hasInstanceId:Y[0]?.instanceId!==void 0});const V=[];Object.entries(b).forEach(([re,L])=>{L>0&&V.push(re)}),w("DECK_SELECTION",`🎲 Custom deck includes ${V.length} drones:`,V.join(", "));const ae={phase:"deckSelection",playerId:t(),actionData:{deck:Y,drones:V}};if(e.gameMode==="guest"){w("DECK_SELECTION","[GUEST] Sending custom deck commitment to host"),Qn.sendActionToHost("commitment",ae),h(!1);return}const ne=await Ge.actionProcessor.processCommitment(ae);if(!ne.success){console.error("❌ Custom deck submission failed:",ne.error);return}w("DECK_SELECTION","✅ Custom deck submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected a Custom Deck."},"handleConfirmDeck"),h(!1)},_=I=>{try{const U={},Y={},V=I.split("|");for(const W of V){const[ae,...ne]=W.split(":"),re=ne.join(":");if(ae==="cards"){const L=re.split(",");for(const G of L){const[oe,ye]=G.split(":"),R=parseInt(ye,10);if(!oe||isNaN(R))return{success:!1,message:"Invalid card format in deck code."};if(!xf.find(F=>F.id===oe))return{success:!1,message:`Card ${oe} not found.`};U[oe]=R}}else if(ae==="drones"){const L=re.split(",");for(const G of L){const oe=G.split(":"),ye=oe.pop(),R=oe.join(":"),K=parseInt(ye,10);if(!R||isNaN(K))return{success:!1,message:"Invalid drone format in deck code."};Y[R]=K}}}return y(U),x(Y),{success:!0}}catch(U){return console.error("Error importing deck:",U),{success:!1,message:"Failed to parse deck code."}}};E.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const M=t(),D=n(),k=e.commitments?.deckSelection?.[M]?.completed||!1,j=e.commitments?.deckSelection?.[D]?.completed||!1;return w("DECK_SELECTION","🔍 [DECK SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:M,opponentPlayerId:D,localPlayerCompleted:k,opponentCompleted:j,fullCommitmentsObject:e.commitments?.deckSelection,turnPhase:u,localPlayerDeckLength:p.deck?.length,willShowWaiting:r()&&k&&!j}),r()&&k&&!j?g.jsx(fv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):d?g.jsx(Cq,{selectedDrones:b,fullCardCollection:xf,deck:m,onDeckChange:C,onDronesChange:T,onConfirmDeck:O,onImportDeck:_}):g.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[g.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),g.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative z-10",children:[g.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),g.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),g.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[g.jsxs("div",{onClick:()=>A("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[g.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),g.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),g.jsx("button",{className:"btn-confirm mt-6",children:"Select"})]}),g.jsxs("div",{onClick:()=>A("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[g.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),g.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),g.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const Pq=({onClick:e,ability:t,isUsable:n,isSelected:r})=>g.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[g.jsx("circle",{cx:"12",cy:"12",r:"10"}),g.jsx("circle",{cx:"12",cy:"12",r:"6"}),g.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),vp=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:o,onAbilityClick:l,isInteractive:u,isOpponent:p,isHovered:d,onMouseEnter:h,onMouseLeave:m,isCardTarget:y,isInMiddleLane:b,reallocationState:x,gameEngine:A,turnPhase:C,isMyTurn:T,passInfo:O,getLocalPlayerId:_,localPlayerState:M,shipAbilityMode:D,sectionRef:k})=>{if(i)return g.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:o,children:g.jsx("span",{className:"text-center",children:"Click to place section"})});const j=A.getShipStatus(t),I=j==="critical"?"bg-red-900/60":j==="damaged"?"bg-yellow-900/50":"bg-black/60";let U=j==="critical"?"border-red-500":j==="damaged"?"border-yellow-500":p?"border-pink-500":"border-cyan-500";const Y=p?"shadow-pink-500/20":"shadow-cyan-500/20",V=d?"scale-105 shadow-xl":"";let W="";if(x)switch(x){case"can-remove":U="border-orange-400",W="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":U="border-orange-600",W="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":U="border-gray-600",W="opacity-50";break;case"can-add":U="border-green-400",W="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":U="border-green-600",W="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":U="border-gray-600",W="opacity-50";break}const ae=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",ne=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,L=>L.toUpperCase()),re={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return g.jsxs("div",{ref:k,className:`
        relative rounded-xl shadow-lg ${Y} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${U}
        ${u?`cursor-pointer ${V}`:""}
        ${ae}
        ${W}
      `,style:re,onClick:o,onMouseEnter:h,onMouseLeave:m,children:[g.jsx("div",{className:`absolute inset-0 ${I}`}),g.jsxs("div",{className:"relative z-10 flex flex-col items-center p-2 h-full",children:[g.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[g.jsx("p",{className:"font-bold text-lg text-white",children:ne}),g.jsx("div",{className:`flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${j==="healthy"?"bg-green-500/20 text-green-300":j==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:j.charAt(0).toUpperCase()+j.slice(1)})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[g.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([L,G])=>{const oe=b&&t.middleLaneBonus&&t.middleLaneBonus[L];return g.jsxs("span",{className:"flex items-center text-xs",children:[g.jsxs("span",{className:"font-semibold mr-1",children:[L,":"]}),g.jsx("span",{className:oe?"text-green-400 font-bold":"",children:G})]},L)})}),g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((L,G)=>g.jsx("div",{children:G<t.allocatedShields?g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:g.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:g.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},G))}),g.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((L,G)=>{const oe=G+1,{critical:ye,damaged:R}=t.thresholds;let K;oe<=ye?K="bg-red-500":oe<=R?K="bg-orange-500":K="bg-green-500";const F=G<t.hull;return g.jsx("div",{className:`h-4 w-4 rounded-sm ${F?K:"bg-gray-400"} border border-black/50`},G)})})]}),g.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"relative w-full mb-1",children:[g.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),g.jsx(Pq,{ability:t.ability,isUsable:C==="action"&&T()&&!O[`${_()}Passed`]&&M.energy>=t.ability.cost.energy,isSelected:D?.ability.id===t.ability.id,onClick:L=>l(L,{name:e,...t},t.ability)})]}),g.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function wq(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getLocalPlacedSections:o}=is(),{turnPhase:l,unplacedSections:u}=e,p=i(),d=o(),[h,m]=E.useState(null),[y,b]=E.useState(d||[null,null,null]),[x,A]=E.useState(u||["bridge","powerCell","droneControlHub"]),C=I=>{if(l==="placement")if(w("PLACEMENT","🔧 handleSelectSectionForPlacement called with:",I,"gameMode:",e.gameMode),x.includes(I))m(U=>U===I?null:I);else{const U=y.indexOf(I),Y=[...y];Y[U]=null,b(Y),A(V=>[...V,I]),m(null)}},T=I=>{if(l==="placement")if(w("PLACEMENT","🔧 handleLaneSelectForPlacement called with lane:",I,"gameMode:",e.gameMode),h){if(y[I]){const U=y[I],Y=[...y];Y[I]=h;const V=x.indexOf(h),W=[...x];W.splice(V,1,U),b(Y),A(W)}else{const U=[...y];U[I]=h,b(U),A(Y=>Y.filter(V=>V!==h))}m(null)}else y[I]&&C(y[I])},O=async()=>{if(l!=="placement")return;if(w("PLACEMENT","🔧 handleConfirmPlacement called"),y.some(Y=>Y==null)){console.warn("⚠️ Cannot confirm placement: All ship sections must be placed");return}w("PLACEMENT","🔧 Submitting placement to PhaseManager:",y);const U={phase:"placement",playerId:t(),actionData:{placedSections:y}};if(e.gameMode==="guest"){w("PLACEMENT","[GUEST] Sending ship placement commitment to host"),Qn.sendActionToHost("commitment",U);return}try{const Y=await Ge.actionProcessor.processCommitment(U);if(!Y.success){console.error("❌ Placement submission failed:",Y.error);return}w("PLACEMENT","✅ Placement submitted to PhaseManager")}catch(Y){console.error("❌ Error submitting placement:",Y)}};E.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const _=t(),M=n(),D=e.commitments?.placement?.[_]?.completed||!1,k=e.commitments?.placement?.[M]?.completed||!1;if(w("PLACEMENT","🔍 [SHIP PLACEMENT] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:_,opponentPlayerId:M,localPlayerCompleted:D,opponentCompleted:k,fullCommitmentsObject:e.commitments?.placement,turnPhase:l,willShowWaiting:r()&&D&&!k}),r()&&D&&!k){const I=y.map((U,Y)=>U?U.name:"Empty").join(", ");return g.jsx(fv,{phase:"placement",localPlayerStatus:`Your ship layout: ${I}`})}const j=y.every(I=>I!==null);return w("PLACEMENT","🔥 ShipPlacementScreen rendered:",{allPlaced:j,placed:y,unplaced:u,selected:h}),g.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[g.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),g.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[g.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),g.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),g.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[g.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(I=>g.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:x.includes(I)&&g.jsx("div",{onClick:()=>C(I),className:`h-full transition-all duration-300 rounded-xl ${h===I?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:g.jsx(vp,{section:I,stats:p.shipSections[I],effectiveStatsForDisplay:p.shipSections[I].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:$e,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null})})},I))}),g.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(I=>{const U=y[I],Y=h&&!y[I];return g.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>T(I),children:U?g.jsx(vp,{section:U,stats:p.shipSections[U],effectiveStatsForDisplay:p.shipSections[U].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:I===1,gameEngine:$e,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null}):g.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${Y?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:g.jsx("span",{className:"text-center font-bold",children:I===1?"Lane 2 (Center Bonus)":`Lane ${I+1}`})})},I)})})]}),g.jsx("button",{onClick:()=>{w("PLACEMENT",`🔥 Confirm Layout button clicked! allPlaced: ${j}`),O()},disabled:!j,className:"btn-confirm mt-12 text-lg",children:"Confirm Layout"})]})]})}const Oq=()=>{const e=E.useRef(null);return E.useEffect(()=>{const t=e.current,n=t.getContext("2d");let r;const i=Array.from({length:500},()=>{const d=Math.random();let h;return d<.9?h="rgba(255, 255, 255, ":d<.94?h="rgba(100, 150, 255, ":d<.98?h="rgba(255, 200, 100, ":h="rgba(255, 100, 100, ",{x:0,y:0,radius:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,twinkleSpeed:.005+Math.random()*.01,twinklePhase:Math.random()*Math.PI*2,color:h}}),o=["rgba(147, 51, 234, ","rgba(59, 130, 246, ","rgba(236, 72, 153, ","rgba(16, 185, 129, ","rgba(6, 182, 212, ","rgba(139, 92, 246, ","rgba(34, 211, 238, "],l=Array.from({length:4},()=>({x:0,y:0,radius:180+Math.random()*150,color:o[Math.floor(Math.random()*o.length)],pulsePhase:Math.random()*Math.PI*2,pulseSpeed:.004+Math.random()*.003})),u=()=>{t.width=window.innerWidth,t.height=window.innerHeight,i.forEach(d=>{d.x=Math.random()*t.width,d.y=Math.random()*(t.height*.75)}),l.forEach(d=>{d.x=Math.random()*t.width,d.y=Math.random()*(t.height*.75)})};u(),window.addEventListener("resize",u);const p=()=>{n.fillStyle="#0a0a1a",n.fillRect(0,0,t.width,t.height),l.forEach(d=>{d.pulsePhase+=d.pulseSpeed;const h=.08+Math.sin(d.pulsePhase)*.04;for(let m=0;m<3;m++){const y=Math.sin(d.pulsePhase*.5+m)*30,b=Math.cos(d.pulsePhase*.3+m)*30,x=h*(.4+m*.3),A=n.createRadialGradient(d.x+y,d.y+b,0,d.x+y,d.y+b,d.radius*(.7+m*.15));A.addColorStop(0,d.color+x+")"),A.addColorStop(.3,d.color+x*.6+")"),A.addColorStop(.7,d.color+x*.2+")"),A.addColorStop(1,d.color+"0)"),n.fillStyle=A,n.fillRect(0,0,t.width,t.height)}}),i.forEach(d=>{d.twinklePhase+=d.twinkleSpeed;const h=.3+Math.sin(d.twinklePhase)*.7;n.beginPath(),n.arc(d.x,d.y,d.radius,0,Math.PI*2),n.fillStyle=d.color+d.opacity*h+")",n.fill(),d.radius>1&&(n.beginPath(),n.arc(d.x,d.y,d.radius*2,0,Math.PI*2),n.fillStyle=d.color+d.opacity*h*.1+")",n.fill())}),r=requestAnimationFrame(p)};return p(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(r)}},[]),g.jsx("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"#0a0a1a"}})},uo=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&g.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),g.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),Ca=({icon:e,value:t,max:n,iconColor:r,isPlayer:i})=>{const o=i?"from-cyan-400/30 via-blue-400/30 to-blue-500/30":"from-pink-400/30 via-pink-500/30 to-pink-600/30";return g.jsx("div",{className:`relative p-[1px] bg-gradient-to-br ${o}`,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:g.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 px-3 py-1 flex items-center gap-2",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[g.jsx(e,{size:18,className:r}),g.jsxs("span",{className:"font-bold text-base text-white whitespace-nowrap",children:[t,n!==void 0&&g.jsxs("span",{className:"hidden xl:inline",children:[" / ",n]})]})]})})};function _q({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:o,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:p,opponentShieldsToAllocate:d,shieldsToRemove:h,shieldsToAdd:m,reallocationPhase:y,totalLocalPlayerDrones:b,totalOpponentPlayerDrones:x,getLocalPlayerId:A,getOpponentPlayerId:C,isMyTurn:T,currentPlayer:O,isMultiplayer:_,handlePlayerPass:M,handleReset:D,handleResetShields:k,handleConfirmShields:j,handleCancelReallocation:I,handleResetReallocation:U,handleContinueToAddPhase:Y,handleConfirmReallocation:V,handleRoundStartDraw:W,optionalDiscardCount:ae,mandatoryAction:ne,multiSelectState:re,AI_HAND_DEBUG_MODE:L,setShowAiHandModal:G,onShowDebugModal:oe}){const[ye,R]=E.useState(!1),K=E.useRef(null);return E.useEffect(()=>{const F=ie=>{K.current&&!K.current.contains(ie.target)&&R(!1)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[]),g.jsxs("header",{className:"w-full flex justify-between items-start mb-2 flex-shrink-0 px-5 pt-2",children:[g.jsxs("div",{className:"flex flex-col gap-1.5",children:[g.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Opponent",(i==="deployment"||i==="action")&&u===C()&&g.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${C()}Passed`]&&g.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ca,{icon:kf,value:t.energy,max:r.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!1}),g.jsx("div",{onClick:()=>L&&setTimeout(()=>G(!0),100),className:L?"cursor-pointer":"",children:g.jsx(Ca,{icon:TM,value:t.hand.length,max:r.totals.handLimit,iconColor:"text-gray-400",isPlayer:!1})}),i==="deployment"&&g.jsx(Ca,{icon:Qy,value:o===1?t.initialDeploymentBudget:t.deploymentBudget,iconColor:"text-purple-400",isPlayer:!1}),g.jsx(Ca,{icon:mA,value:x,max:r.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!1})]})]}),g.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[g.jsxs("h2",{className:"text-xl font-bold uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #6b7280, #9ca3af)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[AI(i),i==="allocateShields"&&g.jsxs("span",{className:"text-base font-semibold text-cyan-300 ml-2",children:["(",p," shields to assign)"]}),y==="removing"&&g.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",h," shields to remove)"]}),y==="adding"&&g.jsxs("span",{className:"text-base font-semibold text-green-300 ml-2",children:["(",m," shields to add)"]})]}),(i==="deployment"||i==="action"||y)&&g.jsxs("div",{className:"flex items-center gap-3",children:[T()?g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Your Turn"})}):g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest phase-announcement-shine animate-pulse",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(236, 72, 153, 0.5), 0 0 60px rgba(244, 114, 182, 0.3)",filter:"drop-shadow(0 0 20px rgba(236, 72, 153, 0.4))",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:_()?"Opponent's Turn":"AI Thinking"})}),T()&&!ne&&!re&&!y&&g.jsx("button",{onClick:M,disabled:l[`${A()}Passed`],className:"relative p-[1px] transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:l[`${A()}Passed`]?"linear-gradient(45deg, rgba(75, 85, 99, 0.6), rgba(107, 114, 128, 0.6))":"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:l[`${A()}Passed`]?"#9ca3af":"#fca5a5"},children:"Pass"})}),y==="removing"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:I,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),g.jsx("button",{onClick:U,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),g.jsx("button",{onClick:Y,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Continue"})})]}),y==="adding"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:I,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),g.jsx("button",{onClick:U,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),g.jsx("button",{onClick:V,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}),i==="allocateShields"&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("button",{onClick:k,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),g.jsx("button",{onClick:j,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:g.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]}),i==="optionalDiscard"&&g.jsxs("button",{onClick:W,className:"btn-confirm",children:["Finish Discarding (",n.totals.discardLimit-ae,")"]})]}),g.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[g.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Your Resources",(i==="deployment"||i==="action")&&u===A()&&g.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&g.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ca,{icon:kf,value:e.energy,max:n.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!0}),i==="deployment"&&g.jsx(Ca,{icon:Qy,value:o===1?e.initialDeploymentBudget:e.deploymentBudget,iconColor:"text-purple-400",isPlayer:!0}),g.jsx(Ca,{icon:mA,value:b,max:n.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!0}),i==="allocateShields"&&g.jsx(Ca,{icon:dg,value:p,iconColor:"text-cyan-300",isPlayer:!0}),y==="removing"&&g.jsx(Ca,{icon:dg,value:h,iconColor:"text-orange-300",isPlayer:!0}),y==="adding"&&g.jsx(Ca,{icon:dg,value:m,iconColor:"text-green-300",isPlayer:!0}),g.jsx("button",{onClick:D,className:"relative p-[2px] bg-gradient-to-br from-pink-400 to-pink-600",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Reset Game",children:g.jsx("div",{className:"bg-pink-700 hover:bg-pink-600 p-1.5 transition-colors",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:g.jsx(DM,{size:20,className:"text-white"})})}),g.jsxs("div",{className:"relative",ref:K,children:[g.jsx("button",{onClick:()=>R(!ye),className:"relative p-[2px] bg-gradient-to-br from-gray-500 to-gray-700",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Settings",children:g.jsxs("div",{className:"bg-slate-700 hover:bg-slate-600 p-1.5 transition-colors flex items-center gap-1",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[g.jsx(gA,{size:20,className:"text-white"}),g.jsx(pM,{size:16,className:"text-white"})]})}),ye&&g.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:g.jsxs("button",{onClick:()=>{oe&&oe(),R(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[g.jsx(gA,{size:16}),"Debug View"]})})]})]})]})]})}const th=()=>{const{gameStateManager:e}=is(),t=E.useMemo(()=>e?sn.getInstance(e):null,[e]),[n,r]=E.useState(null);return E.useEffect(()=>{if(!t)return;const h=()=>{r(t.getCacheStats())};h();const m=setInterval(h,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(h,m)=>t?t.getEffectiveStats(h,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(h,m=[])=>t?t.getEffectiveShipStats(h,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:h=>t?t.getLaneData(h):{lane:h,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(h,m=null)=>t?t.hasGuardianInLane(h,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},$P=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:o,isInteractive:l,validCardTargets:u,reallocationPhase:p,gameEngine:d,turnPhase:h,isMyTurn:m,passInfo:y,getLocalPlayerId:b,localPlayerState:x,shipAbilityMode:A,hoveredTarget:C,setHoveredTarget:T,sectionRefs:O})=>{const{getEffectiveShipStats:_}=th(),M=_(e,n);return g.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(D=>{const k=n[D];if(!k)return w("STATE_SYNC",`Lane ${D} rendering EMPTY div - no hover possible:`,{sectionName:k,sectionNameType:typeof k,sectionNameValue:JSON.stringify(k),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),g.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},D);const j=e.shipSections[k],I=u.some(Y=>Y.id===k);let U=null;if(p&&t){if(p==="removing")j.allocatedShields>0?U="can-remove":U="cannot-remove";else if(p==="adding"){const Y=d.getEffectiveSectionMaxShields(k,e,n);j.allocatedShields<Y?U="can-add":U="cannot-add"}}return g.jsx("div",{className:"flex-1 min-w-0 max-h-[120px]",children:g.jsx(vp,{section:k,stats:j,effectiveStatsForDisplay:M.bySection[k],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(k):o&&o({id:k,name:k,...j},"section",t)},onAbilityClick:i,isInteractive:l||h==="action"&&t&&j.ability&&x.energy>=j.ability.cost.energy,isCardTarget:I,isInMiddleLane:D===1,isHovered:C?.type==="section"&&C?.target.name===k&&C?.isOpponent===!t,onMouseEnter:()=>!t&&T({target:{name:k,...j},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&T(null),reallocationState:U,gameEngine:d,turnPhase:h,isMyTurn:m,passInfo:y,getLocalPlayerId:b,localPlayerState:x,shipAbilityMode:A,sectionRef:Y=>{if(O&&Y){const V=`${t?"local":"opponent"}-${k}`;O.current[V]=Y}}})},D)})})},Nq=({droneId:e,timestamp:t,duration:n=2e3})=>{const[r,i]=E.useState(!0);return E.useEffect(()=>{const o=setTimeout(()=>{i(!1)},n);return()=>clearTimeout(o)},[t,n]),r?g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:g.jsx("div",{className:"bg-red-600/90 rounded-lg px-4 py-2 shadow-2xl border-2 border-red-400 animate-pulse",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(IM,{className:"w-5 h-5 text-white"}),g.jsx("span",{className:"text-white font-bold text-lg tracking-wide drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]",children:"Intercepted!"})]})})}):null},BP=({value:e,isFlat:t,bgColor:n,textColor:r})=>g.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:g.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),Dq=({onClick:e})=>g.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[g.jsx("circle",{cx:"12",cy:"12",r:"10"}),g.jsx("circle",{cx:"12",cy:"12",r:"6"}),g.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Df=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:o,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:p,lane:d,onAbilityClick:h,isActionTarget:m,droneRefs:y,mandatoryAction:b,localPlayerState:x,interceptedBadge:A,enableFloatAnimation:C=!1})=>{const{getEffectiveStats:T}=th(),O=E.useMemo(()=>Gn.find(xe=>xe.name===e.name),[e.name]),_=T(e,d),{maxShields:M}=_,D=e.currentShields??M,k=O.abilities.filter(xe=>xe.type==="ACTIVE"),j=n?"border-cyan-400":"border-pink-500",I=n?"bg-cyan-900":"bg-pink-950",U=n?"text-cyan-100":"text-pink-100",Y=n?"bg-cyan-900":"bg-pink-950",V=n?"text-cyan-400":"text-pink-500",W=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",ae=_.attack>_.baseAttack,ne=_.attack<_.baseAttack,re=ae?"text-green-400":ne?"text-red-400":"text-white",L=_.speed>_.baseSpeed,G=_.speed<_.baseSpeed,oe=L?"text-green-400":G?"text-red-400":"text-white",ye=e.isExhausted?"grayscale opacity-60":"",R=o?"animate-shake":"",K=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",F=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",ie=b?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",he=xe=>!(e.isExhausted&&xe.cost.exhausts!==!1||xe.cost.energy&&x.energy<xe.cost.energy),me=e.isTeleporting?"opacity-0 pointer-events-none":"";return g.jsxs("div",{ref:xe=>y.current[e.id]=xe,onClick:xe=>t&&t(xe,e,n),onMouseEnter:u,onMouseLeave:p,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ye} ${R} ${K} ${F} ${ie} ${me} ${C?"drone-float":""}`,children:[g.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${j} cursor-pointer shadow-black overflow-hidden`,children:[g.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-black/10"}),g.jsxs("div",{className:"relative z-10 h-full",children:[g.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[g.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:M}).map((xe,Ye)=>Ye<D?g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:V,children:g.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},Ye):g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:W,children:g.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},Ye))}),g.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:O.hull}).map((xe,Ye)=>{const qe=Ye<e.hull,be=e.isExhausted?"bg-green-800":"bg-green-500";return g.jsx("div",{className:`h-2 w-2 rounded-sm ${qe?be:"bg-gray-400"} border border-black/50`},Ye)})})]}),g.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${I} flex items-center justify-center border-t ${j}`,children:g.jsx("span",{className:`font-orbitron text-[8px] uppercase ${U} tracking-wider w-full text-center`,children:e.name})})]})]}),g.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:g.jsx(BP,{value:_.attack,isFlat:!1,bgColor:Y,textColor:re})}),g.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:g.jsx(BP,{value:_.speed,isFlat:!0,bgColor:Y,textColor:oe})}),n&&k.length>0&&he(k[0])&&g.jsx(Dq,{onClick:xe=>h&&h(xe,e,k[0])}),A&&A.droneId===e.id&&g.jsx(Nq,{droneId:e.id,timestamp:A.timestamp})]})},kq=(e,t,n,r,i,o,l,u,p,d,h,m,y,b,x,A,C,T,O,_,M)=>g.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(D=>g.jsx(Df,{drone:D,lane:n,isPlayer:t,onClick:d,onAbilityClick:h,isSelected:m&&m.id===D.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(k=>k.id===D.id),isHit:b.includes(D.id),isPotentialInterceptor:x.includes(D.id),droneRefs:A,mandatoryAction:C,localPlayerState:r,isActionTarget:T.some(k=>k.id===D.id)||O.some(k=>k.id===D.id),onMouseEnter:()=>!t&&_({target:D,type:"drone",lane:n}),onMouseLeave:()=>!t&&_(null),interceptedBadge:M,enableFloatAnimation:!0},D.id))}),UP=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:o,validAbilityTargets:l,selectedCard:u,validCardTargets:p,multiSelectState:d,turnPhase:h,localPlayerState:m,opponentPlayerState:y,localPlacedSections:b,opponentPlacedSections:x,gameEngine:A,getPlacedSectionsForEngine:C,handleTokenClick:T,handleAbilityIconClick:O,selectedDrone:_,recentlyHitDrones:M,potentialInterceptors:D,droneRefs:k,mandatoryAction:j,setHoveredTarget:I,interceptedBadge:U})=>(th(),g.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(Y=>{const V=t?r():i(),W=o&&l.some(re=>re.id===Y&&re.owner===V)||u&&p.some(re=>re.id===Y&&re.owner===V)||d&&p.some(re=>re.id===Y&&re.owner===V),ae=t&&(h==="deployment"||h==="action"),ne=t?"bg-cyan-400/10":"bg-pink-500/10";return g.jsx("div",{onClick:re=>n(re,Y,t),className:`flex-1 rounded-lg transition-all duration-200 p-2
              ${W?"bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":ne}
              ${ae?"cursor-pointer hover:bg-cyan-900/20":""}
            `,children:kq(e.dronesOnBoard[Y],t,Y,m,y,b,x,A,C,T,O,_,d,M,D,k,j,l,p,I,U)},Y)})}));function Mq({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:o,abilityMode:l,validAbilityTargets:u,multiSelectState:p,turnPhase:d,reallocationPhase:h,shipAbilityMode:m,hoveredTarget:y,selectedDrone:b,recentlyHitDrones:x,potentialInterceptors:A,droneRefs:C,sectionRefs:T,mandatoryAction:O,gameEngine:_,getLocalPlayerId:M,getOpponentPlayerId:D,isMyTurn:k,getPlacedSectionsForEngine:j,passInfo:I,handleTargetClick:U,handleLaneClick:Y,handleShipSectionClick:V,handleShipAbilityClick:W,handleTokenClick:ae,handleAbilityIconClick:ne,setHoveredTarget:re,interceptedBadge:L}){return g.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:g.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[g.jsx($P,{player:t,isPlayer:!1,placedSections:r,onTargetClick:U,isInteractive:!1,selectedCard:i,validCardTargets:o,gameEngine:_,turnPhase:d,isMyTurn:k,passInfo:I,getLocalPlayerId:M,localPlayerState:e,shipAbilityMode:m,hoveredTarget:y,setHoveredTarget:re,sectionRefs:T}),g.jsx(UP,{player:t,isPlayer:!1,onLaneClick:Y,getLocalPlayerId:M,getOpponentPlayerId:D,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:o,multiSelectState:p,turnPhase:d,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:_,getPlacedSectionsForEngine:j,handleTokenClick:ae,handleAbilityIconClick:ne,selectedDrone:b,recentlyHitDrones:x,potentialInterceptors:A,droneRefs:C,mandatoryAction:O,setHoveredTarget:re,interceptedBadge:L}),g.jsx(UP,{player:e,isPlayer:!0,onLaneClick:Y,getLocalPlayerId:M,getOpponentPlayerId:D,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:o,multiSelectState:p,turnPhase:d,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:_,getPlacedSectionsForEngine:j,handleTokenClick:ae,handleAbilityIconClick:ne,selectedDrone:b,recentlyHitDrones:x,potentialInterceptors:A,droneRefs:C,mandatoryAction:O,setHoveredTarget:re,interceptedBadge:L}),g.jsx($P,{player:e,isPlayer:!0,placedSections:n,onSectionClick:V,onAbilityClick:W,onTargetClick:U,isInteractive:d==="allocateShields"||h,selectedCard:i,validCardTargets:o,reallocationPhase:h,gameEngine:_,turnPhase:d,isMyTurn:k,passInfo:I,getLocalPlayerId:M,localPlayerState:e,shipAbilityMode:m,hoveredTarget:y,setHoveredTarget:re,sectionRefs:T})]})})}const jq="_footer_ggkwp_15",Iq="_tabContainer_ggkwp_21",Rq="_contentContainer_ggkwp_25",Lq="_contentOpen_ggkwp_29",$q="_contentClosed_ggkwp_34",Bq="_contentWrapper_ggkwp_38",Uq="_tabButton_ggkwp_44",zq="_tabButtonActive_ggkwp_48",Gq="_tabButtonInactive_ggkwp_52",Hq="_tabIcon_ggkwp_56",Yq="_multiSelectOverlay_ggkwp_62",qq="_multiSelectText_ggkwp_66",Fq="_handContainer_ggkwp_72",Vq="_cardPile_ggkwp_76",Kq="_deckCard_ggkwp_80",Wq="_deckCardText_ggkwp_88",Xq="_discardCard_ggkwp_93",Qq="_discardCardText_ggkwp_101",Zq="_pileLabel_ggkwp_106",Jq="_handSection_ggkwp_110",eF="_mandatoryDiscardWarning_ggkwp_130",tF="_handCardsContainer_ggkwp_134",nF="_handCardsWrapper_ggkwp_139",rF="_handCardsWrapperGap_ggkwp_143",aF="_cardWrapper_ggkwp_148",iF="_droneContainer_ggkwp_171",sF="_droneGrid_ggkwp_175",oF="_logContainer_ggkwp_202",lF="_logHeader_ggkwp_206",cF="_logTitle_ggkwp_210",uF="_downloadButton_ggkwp_214",dF="_logTableWrapper_ggkwp_219",fF="_logTable_ggkwp_219",pF="_logTableHeader_ggkwp_227",hF="_logTableHeaderCell_ggkwp_231",mF="_logTableDebugHeader_ggkwp_235",gF="_logTableRow_ggkwp_239",yF="_logTableCell_ggkwp_243",vF="_logTableCellBold_ggkwp_247",bF="_logTableCellGray_ggkwp_251",SF="_logTableCellCyan_ggkwp_255",xF="_logTableCellYellow_ggkwp_259",AF="_logTableCellGrayText_ggkwp_263",EF="_logTableCellDebug_ggkwp_267",CF="_logTableCellCenter_ggkwp_271",TF="_aiDecisionButton_ggkwp_275",PF="_buttonDanger_ggkwp_286",wF="_buttonSuccess_ggkwp_291",OF="_buttonDisabled_ggkwp_296",Ee={footer:jq,tabContainer:Iq,contentContainer:Rq,contentOpen:Lq,contentClosed:$q,contentWrapper:Bq,tabButton:Uq,tabButtonActive:zq,tabButtonInactive:Gq,tabIcon:Hq,multiSelectOverlay:Yq,multiSelectText:qq,handContainer:Fq,cardPile:Vq,deckCard:Kq,deckCardText:Wq,discardCard:Xq,discardCardText:Qq,pileLabel:Zq,handSection:Jq,mandatoryDiscardWarning:eF,handCardsContainer:tF,handCardsWrapper:nF,handCardsWrapperGap:rF,cardWrapper:aF,droneContainer:iF,droneGrid:sF,logContainer:oF,logHeader:lF,logTitle:cF,downloadButton:uF,logTableWrapper:dF,logTable:fF,logTableHeader:pF,logTableHeaderCell:hF,logTableDebugHeader:mF,logTableRow:gF,logTableCell:yF,logTableCellBold:vF,logTableCellGray:bF,logTableCellCyan:SF,logTableCellYellow:xF,logTableCellGrayText:AF,logTableCellDebug:EF,logTableCellCenter:CF,aiDecisionButton:TF,buttonDanger:PF,buttonSuccess:wF,buttonDisabled:OF};function _F({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:r,turnPhase:i,mandatoryAction:o,handleCardClick:l,getLocalPlayerId:u,isMyTurn:p,hoveredCardId:d,setHoveredCardId:h,setIsViewDiscardModalOpen:m,setIsViewDeckModalOpen:y,optionalDiscardCount:b,handleRoundStartDraw:x,checkBothPlayersHandLimitComplete:A,handleConfirmMandatoryDiscard:C,handleRoundStartDiscard:T,setConfirmationModal:O,passInfo:_,validCardTargets:M,gameEngine:D,opponentPlayerState:k}){const j=u(),I=p(),U=_[`${j}Passed`];w("HAND_VIEW","HandView render:",{gameMode:e,localPlayerId:j,turnPhase:i,isMyTurn:I,playerPassed:U,handSize:t.hand.length,energy:t.energy,passInfo:_,mandatoryAction:o});const Y=225,V=12,W=6,ae=t.hand.length>W,ne=W*Y+(W-1)*V,re=t.hand.length;let L=0;return re>1&&ae&&(L=(ne-Y)/(re-1)-Y),g.jsxs("div",{className:Ee.handContainer,children:[g.jsxs("div",{className:Ee.cardPile,children:[g.jsx("div",{onClick:()=>m(!0),className:Ee.discardCard,children:g.jsx("p",{className:Ee.discardCardText,children:t.discardPile.length})}),g.jsx("p",{className:Ee.pileLabel,children:"Discard Pile"})]}),g.jsxs("div",{className:Ee.handSection,children:[o?.type==="discard"&&o.fromAbility&&g.jsxs("p",{className:Ee.mandatoryDiscardWarning,children:["You must discard ",o.count," card(s)."]}),g.jsx("div",{className:Ee.handCardsContainer,style:ae?{width:`${ne}px`}:{},children:g.jsx("div",{className:`${Ee.handCardsWrapper} ${ae?"":Ee.handCardsWrapperGap}`,children:t.hand.map((G,oe)=>{const ye=d?t.hand.findIndex(Ye=>Ye.instanceId===d):-1,R=t.energy>=G.cost,K=!G.targeting||D.getValidTargets(j,null,G,t,k).length>0,F=i==="action"&&I&&!U&&R&&K,ie=i==="optionalDiscard"&&b<n.totals.discardLimit,he=F||ie;w("CARD_PLAY",`Card ${oe}: ${G.name}`,{instanceId:G.instanceId,hasInstanceId:G.instanceId!==void 0,instanceIdType:typeof G.instanceId,id:G.id,cost:G.cost,targeting:G.targeting,hasEnoughEnergy:R,hasValidTargets:K,isActionPhasePlayable:F,isOptionalDiscardPlayable:ie,finalIsPlayable:he,cardKeys:Object.keys(G),conditions:{turnPhase:i,isMyTurn:I,playerPassed:U,energy:t.energy,cardCost:G.cost}});let me="",xe={zIndex:oe};return ae&&ye!==-1&&(oe<ye?me="transform -translate-x-12":oe>ye?me="transform translate-x-12":(me="transform -translate-y-8 scale-105",xe.zIndex=50)),ae&&oe>0&&(xe.marginLeft=`${L}px`),g.jsx("div",{className:`${Ee.cardWrapper} ${me}`,style:xe,onMouseEnter:()=>h(G.instanceId),onMouseLeave:()=>h(null),children:g.jsx(fs,{card:G,isSelected:r?.instanceId===G.instanceId,isPlayable:he,isMandatoryTarget:o?.type==="discard",onClick:o?.type==="discard"?Ye=>O({type:"discard",target:Ye,onConfirm:()=>C(Ye),onCancel:()=>O(null),text:`Are you sure you want to discard ${Ye.name}?`}):i==="optionalDiscard"?Ye=>O({type:"discard",target:Ye,onConfirm:()=>T(Ye),onCancel:()=>O(null),text:`Are you sure you want to discard ${Ye.name}?`}):l})},G.instanceId||`${G.id}-${oe}`)})})})]}),g.jsxs("div",{className:Ee.cardPile,children:[g.jsx("div",{onClick:()=>y(!0),className:Ee.deckCard,children:g.jsx("p",{className:Ee.deckCardText,children:t.deck.length})}),g.jsx("p",{className:Ee.pileLabel,children:"Deck"})]})]})}function NF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:o,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:p,isMyTurn:d,turn:h,passInfo:m,validCardTargets:y}){return g.jsx("div",{className:Ee.droneContainer,children:g.jsx("div",{className:Ee.droneGrid,children:t.map((b,x)=>{const C=(h===1?e.initialDeploymentBudget+e.energy:e.energy)>=b.class,T=n?.type==="Upgrade"&&y.some(O=>O.id===b.name);return g.jsx(gl,{drone:b,onClick:o,isSelected:l&&l.name===b.name,isSelectable:r==="deployment"&&d()&&!m[`${p()}Passed`]&&C&&!i||T,deployedCount:e.deployedDroneCounts[b.name]||0,appliedUpgrades:e.appliedUpgrades[b.name]||[],isUpgradeTarget:T,onViewUpgrades:(O,_)=>u({droneName:O.name,upgrades:_})},x)})})})}function DF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return g.jsxs("div",{className:Ee.logContainer,children:[g.jsxs("div",{className:Ee.logHeader,children:[g.jsx("h3",{className:Ee.logTitle,children:"Game Log"}),g.jsx("button",{onClick:t,className:Ee.downloadButton,children:"Download CSV"})]}),g.jsx("div",{className:Ee.logTableWrapper,children:g.jsxs("table",{className:Ee.logTable,children:[g.jsx("thead",{className:Ee.logTableHeader,children:g.jsxs("tr",{children:[g.jsx("th",{className:Ee.logTableHeaderCell,children:"Rnd"}),g.jsx("th",{className:Ee.logTableHeaderCell,children:"Timestamp (UTC)"}),g.jsx("th",{className:Ee.logTableHeaderCell,children:"Player"}),g.jsx("th",{className:Ee.logTableHeaderCell,children:"Action"}),g.jsx("th",{className:Ee.logTableHeaderCell,children:"Source"}),g.jsx("th",{className:Ee.logTableHeaderCell,children:"Target"}),g.jsx("th",{className:Ee.logTableHeaderCell,children:"Outcome"}),g.jsx("th",{className:Ee.logTableDebugHeader,children:"Debug Source"}),g.jsx("th",{className:Ee.logTableHeaderCell})]})}),g.jsx("tbody",{children:e.map((r,i)=>g.jsxs("tr",{className:Ee.logTableRow,children:[g.jsx("td",{className:Ee.logTableCellBold,children:r.round}),g.jsx("td",{className:Ee.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),g.jsx("td",{className:Ee.logTableCellCyan,children:r.player}),g.jsx("td",{className:Ee.logTableCellYellow,children:r.actionType}),g.jsx("td",{className:Ee.logTableCell,children:r.source}),g.jsx("td",{className:Ee.logTableCell,children:r.target}),g.jsx("td",{className:Ee.logTableCellGrayText,children:r.outcome}),g.jsx("td",{className:Ee.logTableCellDebug,children:r.debugSource}),g.jsx("td",{className:Ee.logTableCellCenter,children:r.aiDecisionContext&&g.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:Ee.aiDecisionButton,title:"Show AI Decision Logic",children:"ℹ️"})})]},i)).reverse()})]})})]})}function kF({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,sortedLocalActivePool:r,gameLog:i,footerView:o,isFooterOpen:l,multiSelectState:u,selectedCard:p,turnPhase:d,mandatoryAction:h,handleFooterButtonClick:m,handleCardClick:y,cancelCardSelection:b,downloadLogAsCSV:x,getLocalPlayerId:A,isMyTurn:C,hoveredCardId:T,setHoveredCardId:O,setIsViewDiscardModalOpen:_,setIsViewDeckModalOpen:M,optionalDiscardCount:D,handleRoundStartDraw:k,checkBothPlayersHandLimitComplete:j,handleToggleDroneSelection:I,selectedDrone:U,setViewUpgradesModal:Y,handleConfirmMandatoryDiscard:V,handleRoundStartDiscard:W,setConfirmationModal:ae,turn:ne,passInfo:re,validCardTargets:L,gameEngine:G,opponentPlayerState:oe,setAiDecisionLogToShow:ye}){return g.jsxs("footer",{className:Ee.footer,children:[g.jsxs("div",{className:Ee.tabContainer,children:[g.jsx("button",{onClick:()=>m("hand"),className:`${Ee.tabButton} ${l&&o==="hand"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:g.jsxs("span",{className:Ee.tabIcon,children:[l&&o==="hand"&&g.jsx(nu,{size:16}),"Hand (",t.hand.length,"/",n.totals.handLimit,")"]})}),g.jsx("button",{onClick:()=>m("drones"),className:`${Ee.tabButton} ${l&&o==="drones"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:g.jsxs("span",{className:Ee.tabIcon,children:[l&&o==="drones"&&g.jsx(nu,{size:16}),"Drones"]})}),g.jsx("button",{onClick:()=>m("log"),className:`${Ee.tabButton} ${l&&o==="log"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:g.jsxs("span",{className:Ee.tabIcon,children:[l&&o==="log"&&g.jsx(nu,{size:16}),"Log (",i.length,")"]})})]}),g.jsx("div",{className:`${Ee.contentContainer} ${l?Ee.contentOpen:Ee.contentClosed}`,children:g.jsxs("div",{className:Ee.contentWrapper,children:[u&&g.jsxs("div",{className:Ee.multiSelectOverlay,children:[g.jsxs("span",{className:Ee.multiSelectText,children:[u.phase==="select_source_lane"&&"Reposition: Select a source lane",u.phase==="select_drones"&&`Select Drones (${u.selectedDrones.length} / ${u.maxSelection})`,u.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),g.jsx("button",{onClick:R=>{R.stopPropagation(),b()},className:Ee.buttonDanger,children:"Cancel"}),u.phase==="select_drones"&&g.jsx("button",{onClick:R=>{R.stopPropagation(),u.selectedDrones.length>0&&w("HAND_VIEW","Confirm drones clicked")},disabled:u.selectedDrones.length===0,className:`${Ee.buttonSuccess} ${u.selectedDrones.length===0?Ee.buttonDisabled:""}`,children:"Confirm Drones"})]}),o==="hand"&&g.jsx("div",{className:Ee.viewContent,children:g.jsx(_F,{gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:p,turnPhase:d,mandatoryAction:h,handleCardClick:y,getLocalPlayerId:A,isMyTurn:C,hoveredCardId:T,setHoveredCardId:O,setIsViewDiscardModalOpen:_,setIsViewDeckModalOpen:M,optionalDiscardCount:D,handleRoundStartDraw:k,checkBothPlayersHandLimitComplete:j,handleConfirmMandatoryDiscard:V,handleRoundStartDiscard:W,setConfirmationModal:ae,passInfo:re,validCardTargets:L,gameEngine:G,opponentPlayerState:oe})}),o==="drones"&&g.jsx("div",{className:Ee.viewContent,children:g.jsx(NF,{localPlayerState:t,sortedLocalActivePool:r,selectedCard:p,turnPhase:d,mandatoryAction:h,handleToggleDroneSelection:I,selectedDrone:U,setViewUpgradesModal:Y,getLocalPlayerId:A,isMyTurn:C,turn:ne,passInfo:re,validCardTargets:L})}),o==="log"&&g.jsx("div",{className:Ee.viewContent,children:g.jsx(DF,{gameLog:i,downloadLogAsCSV:x,setAiDecisionLogToShow:ye})})]})})]})}const MF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return g.jsxs(uo,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[g.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>g.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[g.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):g.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),g.jsx("div",{className:"flex justify-center mt-6",children:g.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},jF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:o}=e,[l,u]=E.useState(null);return g.jsxs(uo,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[g.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(p=>{const d=o.appliedUpgrades[p.name]||[];return g.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[g.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",p.name]}),g.jsx("div",{className:"space-y-2",children:d.map(h=>g.jsx("div",{onClick:()=>u({droneName:p.name,instanceId:h.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===h.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:g.jsx("p",{className:"font-semibold text-white",children:h.name})},h.instanceId))})]},p.id)}):g.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),g.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[g.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),g.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},IF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[o,l]=E.useState(null);return g.jsxs(uo,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[g.jsx("div",{className:"flex justify-center my-4",children:g.jsx(fs,{card:r,isPlayable:!1})}),g.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>g.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${o?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[g.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),g.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),g.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[g.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),g.jsx("button",{onClick:()=>t(r,o),disabled:!o,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},RF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:o,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:p})=>g.jsxs(g.Fragment,{children:[e&&g.jsx(MF,{modalData:e,onClose:()=>t(null)}),n&&g.jsx(jF,{selectionData:n,onConfirm:async(d,h)=>{await l(d,h,u()),r(null)},onCancel:()=>{r(null),p()}}),i&&g.jsx(IF,{selectionData:i,onConfirm:async(d,h)=>{await l(d,h,u()),o(null)},onCancel:()=>{o(null),p()}})]}),LF=({visible:e,start:t,end:n,lineRef:r})=>e?g.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[g.jsx("defs",{children:g.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:g.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),g.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,$F=({top:e,left:t,size:n="large"})=>{const[r,i]=E.useState([]),o={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=o[n]||o.large;return E.useEffect(()=>{const u=[];for(let p=0;p<l.particleCount;p++){const d=Math.PI*2*p/l.particleCount,h=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),m=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:p,x:Math.cos(d)*h,y:Math.sin(d)*h,size:m,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),g.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>g.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},BF=()=>{const e=Math.random()>.5;return{width:`${180+Math.random()*40}%`,height:`${60+Math.random()*40}%`,gradientAngle:e?120+Math.random()*30:-60+Math.random()*30,colorIntensity:{r:4+Math.random()*10,g:8+Math.random()*16,b:24+Math.random()*20},opacity:.5+Math.random()*.4,scale:1+(Math.random()*.2-.1),position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},UF=()=>{const e=Math.random()>.5;return{position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},zF=({id:e,properties:t})=>{const n=`rgb(${t.colorIntensity.r} ${t.colorIntensity.g} ${t.colorIntensity.b})`,r=t.position.top!==void 0?{top:t.position.top,left:t.position.left}:{bottom:t.position.bottom,right:t.position.right};return g.jsx("div",{className:"absolute",style:{width:t.width,height:t.height,...r,transform:`rotate(${t.rotation}deg) scale(${t.scale})`,background:`linear-gradient(${t.gradientAngle}deg, ${n} 0%, transparent 100%)`,opacity:t.opacity,transition:"all 8s ease-in-out",willChange:"transform"}})},ID=()=>{const[e,t]=E.useState([]);return E.useEffect(()=>{const n=3+Math.floor(Math.random()*3),r=Array.from({length:n},(i,o)=>({id:o,properties:BF()}));t(r)},[]),E.useEffect(()=>{if(e.length===0)return;const n=setInterval(()=>{t(r=>{const i=Math.floor(Math.random()*r.length);return r.map((o,l)=>{if(l===i){const u=UF();return{...o,properties:{...o.properties,position:u.position,rotation:u.rotation}}}return o})})},1e4);return()=>clearInterval(n)},[e.length]),g.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:e.map(n=>g.jsx(zF,{id:n.id,properties:n.properties},n.id))})},GF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:o,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const p=n!=="local";return g.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:[g.jsx(ID,{}),g.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine relative z-10",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:p?"Opponent Thinking":"AI Thinking"})]})},zP=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const o=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:g.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[g.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:g.jsx(Yn,{size:24})}),g.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",o.length,")"]}),o.length>0?g.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:g.jsx("div",{className:"grid grid-cols-5 gap-6",children:o.map((l,u)=>g.jsx("div",{className:"flex justify-center",children:g.jsx(fs,{card:l,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1})},`${l.instanceId}-${u}`))})}):g.jsx("div",{className:"flex-grow flex items-center justify-center",children:g.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},HF=({card:e,isSelected:t,onClick:n})=>g.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:g.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[g.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[g.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),g.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:g.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),g.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),g.jsx("div",{className:"p-1",children:g.jsxs("div",{className:"relative h-24",children:[g.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),g.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&g.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:g.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:"✓"})})]})}),g.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:g.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:g.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),g.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),YF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,o]=E.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:p,filter:d}=r,h=x=>{o(A=>{const C=x.instanceId||`${x.id}-${x.name}`;return A.some(O=>(O.instanceId||`${O.id}-${O.name}`)===C)?A.filter(O=>(O.instanceId||`${O.id}-${O.name}`)!==C):A.length<u?[...A,x]:[...A.slice(0,-1),x]})},m=()=>{i.length===u&&(n(i),o([]))},y=()=>{o([]),t()},b=i.length===u;return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:g.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:x=>x.stopPropagation(),children:[g.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:g.jsx(Yn,{size:24})}),g.jsxs("div",{className:"text-center mb-6",children:[g.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:p==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),g.jsx("p",{className:"text-gray-300 text-lg",children:d?`Select ${u} ${d.type} card${u>1?"s":""} from ${l.length} found ${d.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),g.jsx("div",{className:"mt-2",children:g.jsxs("span",{className:`text-lg font-bold ${b?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((x,A)=>g.jsx(HF,{card:x,isSelected:i.some(C=>{const T=x.instanceId||`${x.id}-${x.name}`;return(C.instanceId||`${C.id}-${C.name}`)===T}),onClick:h},x.instanceId||`${x.id}-${A}`))})}),g.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[g.jsx("button",{onClick:y,className:"btn-cancel",children:"Cancel"}),g.jsx("button",{onClick:m,disabled:!b,className:"btn-confirm",children:"Confirm Selection"})]})]})})},qF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return g.jsxs(uo,{title:"AI Action: Card Played",text:"",onClose:t,children:[g.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[g.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",g.jsx("strong",{className:"text-purple-400",children:n.name}),r&&g.jsxs(g.Fragment,{children:[" on ",g.jsx("strong",{className:"text-cyan-400",children:r}),i&&g.jsxs(g.Fragment,{children:[" in ",g.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),g.jsx("div",{className:"transform scale-75",children:g.jsx(fs,{card:n,isPlayable:!1})})]}),g.jsx("div",{className:"flex justify-center mt-6",children:g.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},FF=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[g.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),g.jsx("div",{className:"flex justify-center",children:g.jsx(gl,{drone:t,isSelectable:!1,deployedCount:0})})]})}),VF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:o})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return g.jsx(uo,{title:"Deployment Complete",text:u,onClose:o,children:g.jsx("div",{className:"flex justify-center mt-6",children:g.jsx("button",{onClick:o,className:"btn-continue",children:"Continue to Action Phase"})})})},KF=({show:e,onContinue:t})=>e?g.jsx(uo,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:g.jsx("div",{className:"flex justify-center mt-6",children:g.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,WF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=o=>{switch(o){case"determineFirstPlayer":return"Waiting for Opponent";case"mandatoryDiscard":return"Opponent Discarding";case"optionalDiscard":return"Opponent Discarding Cards";case"allocateShields":return"Opponent Allocating Shields";case"mandatoryDroneRemoval":return"Opponent Removing Drones";case"deploymentComplete":return"Waiting for Opponent";default:return"Waiting for Opponent"}};return g.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-auto",children:g.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:i(t)})})},XF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&g.jsx("button",{onClick:e.onCancel,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"modal-title",children:n}),g.jsx("p",{className:"modal-text",children:e.text}),g.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[g.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),g.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},QF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",o=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container modal-container-md",children:[r&&g.jsx("button",{onClick:r,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"modal-title",children:o}),g.jsx("p",{className:"modal-text",children:l})]})})},ZF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{const i=e===t;if(!n)return null;const o=()=>{r()},l=()=>{Ge.setState({appState:"menu"})};return g.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-center justify-center",children:g.jsxs("div",{className:"flex flex-col items-center gap-12",children:[i?g.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"VICTORY"}):g.jsxs("div",{className:"relative w-full h-full flex items-center justify-center screen-flicker",children:[g.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center defeat-glow screen-distort z-10",style:{color:"#ff3232",textShadow:"0 0 30px rgba(255, 50, 50, 1), 0 0 60px rgba(255, 50, 50, 0.8), 0 0 90px rgba(255, 50, 50, 0.6)",filter:"drop-shadow(0 0 30px rgba(255, 50, 50, 0.6))"},children:"DEFEAT"}),g.jsx("div",{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent scanline-shutdown",style:{boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)"}}),g.jsx("div",{className:"absolute inset-0 bg-red-900/20 defeat-glow",style:{mixBlendMode:"multiply"}})]}),g.jsxs("div",{className:"flex gap-6 z-20",children:[g.jsx("button",{onClick:o,className:"px-8 py-4 bg-cyan-600 hover:bg-cyan-700 text-white font-bold text-xl rounded-lg transition-colors shadow-lg shadow-cyan-500/50",children:"View Board"}),g.jsx("button",{onClick:l,className:"px-8 py-4 bg-gray-600 hover:bg-gray-700 text-white font-bold text-xl rounded-lg transition-colors shadow-lg",children:"Exit to Menu"})]})]})})},JF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=o=>{if(o.type==="deploy"||!o.target)return o.targetName;if(o.type==="attack")return`${o.target.name.replace(/([A-Z])/g," $1").replace(/^./,p=>p.toUpperCase())} (Lane ${o.attacker.lane.slice(-1)})`;const l=o.target.owner===r()?"Player":"AI";return String(o.target.id).startsWith("lane")?`${l} Lane ${o.target.id.slice(-1)}`:`${l}: ${o.targetName}`};return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&g.jsx("button",{onClick:n,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),g.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),g.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:g.jsxs("table",{className:"w-full text-left text-sm",children:[g.jsx("thead",{className:"sticky top-0 bg-slate-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-2",children:"Type"}),g.jsx("th",{className:"p-2",children:"Instigator"}),g.jsx("th",{className:"p-2",children:"Target"}),g.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),g.jsx("th",{className:"p-2",children:"Score"}),g.jsx("th",{className:"p-2",children:"Chosen"})]})}),g.jsx("tbody",{children:e.sort((o,l)=>l.score-o.score).map((o,l)=>g.jsxs("tr",{className:`border-b border-gray-700/50 ${o.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[g.jsx("td",{className:"p-2 capitalize",children:o.type?o.type.replace("_"," "):"Deploy"}),g.jsx("td",{className:"p-2 text-purple-300",children:o.instigator}),g.jsx("td",{className:"p-2 text-cyan-300",children:i(o)}),g.jsx("td",{className:"p-2 text-gray-400 text-xs",children:o.logic.join(" -> ")}),g.jsx("td",{className:"p-2 font-bold text-lg",children:o.score}),g.jsx("td",{className:"p-2 text-center",children:o.isChosen&&g.jsx("span",{className:"text-yellow-400",children:"✔"})})]},l))})]})}),g.jsx("div",{className:"flex justify-center mt-6",children:g.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},eV=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:o}=e;return g.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[g.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),g.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:g.jsx("div",{className:"bg-gray-900/95 p-8 text-center",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:g.jsxs("div",{className:"space-y-8",children:[g.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Deploy Drone?"}),g.jsxs("div",{className:"flex items-center justify-center gap-8",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-5xl font-bold text-cyan-400 mb-2",children:i}),g.jsx("div",{className:"text-cyan-300/50 uppercase text-xs tracking-widest",children:"Deployment"})]}),g.jsx("div",{className:"text-4xl text-cyan-500/30 font-light",children:"|"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-5xl font-bold text-blue-400 mb-2",children:o}),g.jsx("div",{className:"text-blue-300/50 uppercase text-xs tracking-widest",children:"Energy"})]})]}),g.jsxs("div",{className:"flex justify-center gap-6 pt-4",children:[g.jsx("button",{onClick:n,className:"w-32 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Cancel"}),g.jsx("button",{onClick:r,className:"w-32 py-3 border-2 rounded uppercase text-sm tracking-wider font-semibold transition-all hover:scale-110 hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",style:{borderColor:"#00ff88",background:"linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 136, 255, 0.2))",color:"#00ff88",boxShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"Confirm"})]}),g.jsx("div",{className:"h-px w-80 mx-auto bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})})]})},tV=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:o,to:l}=e;return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container modal-container-md",children:[n&&g.jsx("button",{onClick:n,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"modal-title",children:"Confirm Move"}),g.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",o," to ",l,"? The drone will be exhausted."]}),g.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[g.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),g.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},nV=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:o,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:d,shipAbilityMode:h,droneRefs:m,mandatoryAction:y})=>{if(!t||!e)return null;const{attackDetails:b,interceptors:x}=e,{attacker:A,target:C,targetType:T,lane:O}=b;return g.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[g.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),g.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500 max-w-4xl w-full",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:g.jsxs("div",{className:"bg-gray-900/95 p-8",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:[g.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center mb-2",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Interception!"}),g.jsxs("p",{className:"text-center text-cyan-300/60 uppercase text-sm tracking-widest mb-8",children:["Combat in ",O?.replace("lane","Lane ")||"Unknown Lane"]}),g.jsx("div",{className:"mb-6 py-8",children:g.jsxs("div",{className:"flex items-start justify-center gap-6",children:[g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("div",{className:"text-xs uppercase tracking-widest text-pink-400/60",children:"Attacker"}),g.jsx("div",{className:"transform scale-150 origin-top",children:g.jsx(Df,{drone:A,isPlayer:!1,lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:d})})]}),g.jsx("div",{className:"text-5xl font-light text-cyan-500/30 px-4 pt-16",children:"VS"}),g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("div",{className:"text-xs uppercase tracking-widest text-cyan-400/60",children:"Target"}),T==="drone"?g.jsx("div",{className:"transform scale-150 origin-top",children:g.jsx(Df,{drone:C,isPlayer:!0,lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:d})}):g.jsx("div",{className:"transform scale-[0.95] origin-top",style:{width:"400px"},children:g.jsx(vp,{section:C.name,stats:d.shipSections[C.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:o,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:d,shipAbilityMode:h})})]})]})}),g.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-4"}),g.jsx("h3",{className:"text-center text-2xl font-bold uppercase tracking-wider mb-1",style:{background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Choose Interceptor"}),g.jsx("p",{className:"text-center text-cyan-300/50 text-sm mb-4",children:"Select a drone to intercept the attack"}),g.jsx("div",{className:"flex flex-wrap justify-center gap-12 mb-6",children:x.map(_=>g.jsx("div",{className:"cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_20px_rgba(0,255,136,0.4)]",children:g.jsx(Df,{drone:_,isPlayer:!0,onClick:()=>n(_),lane:O,droneRefs:m,mandatoryAction:y,localPlayerState:d})},_.id))}),g.jsx("div",{className:"flex justify-center gap-6 pt-4",children:g.jsx("button",{onClick:r,className:"w-40 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Decline"})}),g.jsx("div",{className:"h-px w-80 mx-auto mt-8 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})]})},rV=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container modal-container-md",children:[n&&g.jsx("button",{onClick:n,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),g.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),g.jsx("div",{className:"flex justify-center mt-6",children:g.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},aV=({show:e,opponentName:t="Opponent"})=>e?g.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:g.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Opponent Deciding Interception"})}):null,iV=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:o}=e;let l="";return o&&(o.name?l=o.name:o.id&&o.id.startsWith("lane")?l=`Lane ${o.id.slice(-1)}`:o.id&&(l=o.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container modal-container-md",children:[n&&g.jsx("button",{onClick:n,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),g.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),g.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[g.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),g.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},sV=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:o,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container modal-container-md",children:[n&&g.jsx("button",{onClick:n,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),g.jsxs("p",{className:"modal-text",children:["Use ",o.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),g.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[g.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),g.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},oV=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:o,target:l}=e,u=o.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase());let p="";return l&&(p=l.name),g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container modal-container-md",children:[n&&g.jsx("button",{onClick:n,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),g.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${p}`:"","? This will cost ",i.cost.energy," energy."]}),g.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[g.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),g.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},lV=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&g.jsx("button",{onClick:r,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),g.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),g.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>g.jsx(fs,{card:i,isPlayable:!1},i.instanceId)):g.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),g.jsx("div",{className:"flex justify-center mt-6",children:g.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),cV=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,o]=E.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(y,b)=>{navigator.clipboard.writeText(JSON.stringify(y,null,2)).then(()=>w("STATE_SYNC",`${b} copied to clipboard`)).catch(x=>console.error("Failed to copy:",x))},p=y=>y===null?"null":y===void 0?"undefined":typeof y=="boolean"?y.toString():typeof y=="string"?`"${y}"`:typeof y=="number"?y.toString():Array.isArray(y)?y.length===0?"[]":`[${y.length} items]`:typeof y=="object"?Object.keys(y).length===0?"{}":`{${Object.keys(y).length} properties}`:String(y),d=(y,b,x="")=>g.jsxs("div",{className:`mb-6 ${x}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("h3",{className:"text-lg font-bold text-white",children:b}),g.jsxs("button",{onClick:()=>u(y,b),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[g.jsx(tv,{size:12}),"Copy"]})]}),g.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-800",children:[g.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),g.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),g.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),g.jsx("tbody",{children:Object.entries(y).map(([A,C],T)=>g.jsxs("tr",{className:T%2===0?"bg-gray-900":"bg-gray-800",children:[g.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),g.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:p(C)}),g.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof C=="object"&&C!==null?Array.isArray(C)?"array":"object":typeof C})]},A))})]})})]}),h=()=>{const y={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return g.jsxs("div",{className:"p-4 space-y-6",children:[d(y,"Core Game Info"),d(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),d(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),d({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),d({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&d(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return g.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const y=r.getEffectiveShipStats(l.player1,l.placedSections),b=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),x={},A={};["lane1","lane2","lane3"].forEach(T=>{x[T]=l.player1.dronesOnBoard[T].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,T)})),A[T]=l.player2.dronesOnBoard[T].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,T)}))});const C=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return g.jsxs("div",{className:"p-4 space-y-6",children:[d(y,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),d(b,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),d(x,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),d(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),d(C,"GameDataService Cache Statistics")]})}catch(y){return g.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",y.message]})}};return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[g.jsx("button",{onClick:t,className:"modal-close",children:g.jsx(Yn,{size:24})}),g.jsx("h2",{className:"modal-title",children:"Game Debug View"}),g.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[g.jsx("button",{onClick:()=>o("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),g.jsx("button",{onClick:()=>o("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),g.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?h():m()}),g.jsx("div",{className:"flex justify-center mt-6",children:g.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},uV=(e,t)=>{const[n,r]=E.useState([]),i=E.useCallback((o,l=null,u="large")=>{w("ANIMATIONS","🔥 [EXPLOSION] triggerExplosion called:",{targetId:o,capturedPosition:l,size:u});const p=$e.createExplosionEffect(o);let d=l;if(!d){const h=e.current[o];w("ANIMATIONS","🔥 [EXPLOSION] Looking for drone element:",{targetId:o,found:!!h}),d=l0(h,t.current)}if(w("ANIMATIONS","🔥 [EXPLOSION] Position calculated:",d),d){const h=`${p.timestamp}-${Math.random()}`;w("ANIMATIONS","🔥 [EXPLOSION] Adding explosion to state:",{explosionId:h,top:d.y,left:d.x,size:u}),r(m=>[...m,{id:h,top:d.y,left:d.x,size:u}]),setTimeout(()=>{r(m=>m.filter(y=>y.id!==h))},p.duration)}else console.warn("🔥 [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class dV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_REVEAL:{duration:1e3,type:"CARD_REVEAL_EFFECT",config:{}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},PASS_NOTIFICATION:{duration:1e3,type:"PASS_NOTIFICATION_EFFECT",config:{}},PHASE_ANNOUNCEMENT:{duration:1500,type:"PHASE_ANNOUNCEMENT_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{revealAt:.7}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t,n="unknown"){const r=this.gameStateManager?.getState()?.gameMode;if(w("ANIMATIONS","🎬 [EXECUTE] AnimationManager.executeAnimations() START:",{source:n,gameMode:r,effectCount:t?.length||0,effects:t?.map(i=>i.animationName)}),t.forEach((i,o)=>{w("ANIMATIONS",`  🎬 [EXECUTE] Animation ${o+1}/${t.length}: ${i.animationName}`,{type:this.animations[i.animationName]?.type,duration:this.animations[i.animationName]?.duration})}),!t||t.length===0){w("ANIMATIONS","⏭️ [EXECUTE] No effects to execute, returning early");return}w("ANIMATIONS",`🚨 [EXECUTE] PLAYING ${t.length} ANIMATION(S) - Source: ${n} - Mode: ${r}`),this.setBlocking(!0);try{const i=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED"];let o=0;for(;o<t.length;){const l=t[o];if(i.includes(l.animationName)){const u=[];for(;o<t.length&&i.includes(t[o].animationName);)u.push(t[o]),o++;w("ANIMATIONS","🎬 [ANIMATION DEBUG] Playing damage effects in parallel:",u.map(p=>p.animationName)),await Promise.all(u.map(async p=>{const d=this.animations[p.animationName];if(!d){console.warn(`❌ [ANIMATION DEBUG] Unknown animation: ${p.animationName}`);return}const h=this.visualHandlers.get(d.type);if(!h){console.warn(`❌ [ANIMATION DEBUG] No visual handler for: ${d.type}`);return}return new Promise(m=>{h({...p.payload,config:d.config,onComplete:m}),setTimeout(m,d.duration)})})),w("ANIMATIONS","🎬 [ANIMATION DEBUG] All damage effects completed")}else{w("ANIMATIONS","🎬 [ANIMATION DEBUG] Processing sequential effect:",l.animationName);const u=this.animations[l.animationName];if(!u){console.warn(`❌ [ANIMATION DEBUG] Unknown animation: ${l.animationName}`),o++;continue}const p=this.visualHandlers.get(u.type);if(!p){console.warn(`❌ [ANIMATION DEBUG] No visual handler for: ${u.type}`),o++;continue}await new Promise(d=>{p({...l.payload,config:u.config,onComplete:d}),setTimeout(d,u.duration)}),w("ANIMATIONS","🎬 [ANIMATION DEBUG] Animation completed:",l.animationName),o++}}}finally{await new Promise(i=>setTimeout(i,200)),this.setBlocking(!1),w("ANIMATIONS","🎬 [AI ANIMATION DEBUG] All animations completed, blocking released")}}setBlocking(t){w("ANIMATIONS",`🔒 [ANIMATION BLOCKING] Setting blocking to: ${t}`),this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const fV=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,o]=E.useState(0);return E.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,p=150;setTimeout(()=>o(n),10),setTimeout(()=>o(0),l+u),setTimeout(()=>{r?.()},l+u+p)},[n,r,e]),e?g.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},pV=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[o,l]=E.useState(!1);if(E.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!o||!t||!n)return null;switch(e){case"LASER_BLAST":return g.jsx(hV,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return g.jsx(mV,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return g.jsx(gV,{endPos:n,duration:r});default:return null}},hV=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return g.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},mV=({startPos:e,duration:t})=>g.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),gV=({endPos:e,duration:t})=>g.jsxs(g.Fragment,{children:[g.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),g.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function yV(e,t,n,r,i,o,l,u,p,d,h,m,y,b,x,A,C){E.useEffect(()=>{r(),i();const T=new dV(e),O=(M,D,k,j)=>{if(j==="drone")return t.current[k]||null;if(j==="section"){const I=e.getLocalPlayerId(),U=M===I?"local":"opponent";return n.current[`${U}-${k}`]||null}return null};T.registerVisualHandler("DRONE_FLY",M=>{const{droneId:D,sourcePlayer:k,sourceLane:j,targetId:I,targetPlayer:U,targetLane:Y,targetType:V,config:W,attackValue:ae,onComplete:ne}=M;if(W.isReturn){ne?.();return}w("ANIMATIONS","🔫 [LASER DEBUG] DRONE_FLY handler called:",{droneId:D,sourcePlayer:k,sourceLane:j,targetId:I,targetPlayer:U,targetType:V,attackValue:ae,config:W});const re=O(k,j,D,"drone"),L=O(U,Y,I,V);if(!re||!L){console.warn("⚠️ [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!re,hasTarget:!!L,sourcePlayer:k,sourceLane:j,targetPlayer:U,targetType:V,targetId:I}),ne?.();return}w("ANIMATIONS","✅ [LASER DEBUG] Creating laser effect with attack:",ae);const G=l(re,u.current),oe=l(L,u.current),ye=`laser-${D}-${Date.now()}`;x(R=>[...R,{id:ye,startPos:G,endPos:oe,attackValue:ae||1,duration:500,onComplete:()=>{x(K=>K.filter(F=>F.id!==ye)),ne?.()}}])}),T.registerVisualHandler("EXPLOSION_EFFECT",M=>{const{targetId:D,targetPlayer:k,targetLane:j,targetType:I,config:U,onComplete:Y}=M,V=O(k,j,D,I);if(V){const W=l(V,u.current);o(D,W,U?.size||"large")}else console.warn("⚠️ [EXPLOSION DEBUG] Target element not found:",{targetId:D,targetPlayer:k,targetLane:j,targetType:I});Y?.()}),T.registerVisualHandler("FLASH_EFFECT",M=>{const{targetId:D,targetPlayer:k,targetLane:j,targetType:I,config:U,onComplete:Y}=M,V=O(k,j,D,I);if(!V){console.warn("⚠️ [FLASH DEBUG] Target element not found:",{targetId:D,targetPlayer:k,targetLane:j,targetType:I}),Y?.();return}const W=V.getBoundingClientRect(),ae=`flash-${D}-${Date.now()}`;h(ne=>[...ne,{id:ae,position:{left:W.left,top:W.top,width:W.width,height:W.height},color:U.color,intensity:U.intensity,onComplete:()=>{h(re=>re.filter(L=>L.id!==ae)),Y?.()}}])}),T.registerVisualHandler("CARD_VISUAL_EFFECT",M=>{const{visualType:D,sourcePlayer:k,targetId:j,targetPlayer:I,targetLane:U,targetType:Y,duration:V,onComplete:W}=M,ae=u.current?.getBoundingClientRect();if(!ae){W?.();return}const ne=e.getLocalPlayerId(),re=k===ne?ae.bottom-100:ae.top+100,L=ae.left+ae.width/2;let G;if(Y==="lane")if(I==="center")G={x:ae.left+ae.width/2,y:ae.top+ae.height/2};else{const ye=k===ne?I:I===ne?ne:I,ie=(e.getState()[ye]?.dronesOnBoard||{})[U]||[];if(ie.length>0){const he=ie[0],me=t.current[he.id];if(me){const xe=me.getBoundingClientRect();G={x:xe.left+xe.width/2,y:xe.top+xe.height/2}}else G={x:ae.left+ae.width/2,y:ae.top+ae.height/2}}else{const he=U==="lane1"?0:U==="lane2"?1:2,me=ye===ne?ae.bottom-200:ae.top+200;G={x:ae.left+ae.width/4*(he+1),y:me}}}else{const ye=O(I,U,j,Y);if(!ye){console.warn("⚠️ [CARD VISUAL DEBUG] Target element not found:",{targetId:j,targetPlayer:I,targetLane:U,targetType:Y}),W?.();return}const R=ye.getBoundingClientRect();G={x:R.left+R.width/2,y:R.top+R.height/2}}const oe=`cardvisual-${Date.now()}`;m(ye=>[...ye,{id:oe,visualType:D||"LASER_BLAST",startPos:{x:L,y:re},endPos:G,duration:V||800,onComplete:()=>{m(R=>R.filter(K=>K.id!==oe)),W?.()}}])}),T.registerVisualHandler("CARD_REVEAL_EFFECT",M=>{const{cardData:D,actingPlayerId:k,onComplete:j}=M;w("ANIMATIONS","🃏 [CARD REVEAL DEBUG] CARD_REVEAL_EFFECT handler called:",{cardName:D?.name,actingPlayerId:k});const I=e.getLocalPlayerId(),U=k===I,Y=`cardreveal-${Date.now()}`;y(V=>[...V,{id:Y,card:D,label:U?"You Played":"Opponent Played",onComplete:()=>{y(W=>W.filter(ae=>ae.id!==Y)),j?.()}}])}),T.registerVisualHandler("PHASE_ANNOUNCEMENT_EFFECT",async M=>{const{phaseText:D,phaseName:k,firstPlayerId:j,onComplete:I}=M;await new Promise(V=>setTimeout(V,300));let U=null;if(j){const V=e.getLocalPlayerId();U=j===V?"You Go First":"Opponent Goes First"}w("ANIMATIONS","📢 [PHASE ANNOUNCEMENT DEBUG] PHASE_ANNOUNCEMENT_EFFECT handler called:",{phaseName:k,phaseText:D,firstPlayerId:j,localPlayerId:e.getLocalPlayerId(),calculatedSubtitle:U});const Y=`phaseannouncement-${Date.now()}`;b(V=>[...V,{id:Y,phaseText:D,subtitle:U,onComplete:()=>{b(W=>W.filter(ae=>ae.id!==Y)),I?.()}}])}),T.registerVisualHandler("PASS_NOTIFICATION_EFFECT",M=>{const{passingPlayerId:D,onComplete:k}=M;w("ANIMATIONS","⏸️ [PASS NOTIFICATION DEBUG] PASS_NOTIFICATION_EFFECT handler called:",{passingPlayerId:D});const j=e.getLocalPlayerId(),I=D===j,U=`passnotif-${Date.now()}`;C(Y=>[...Y,{id:U,label:I?"You Passed":"Opponent Passed",onComplete:()=>{C(V=>V.filter(W=>W.id!==U)),k?.()}}])}),T.registerVisualHandler("SHAKE_EFFECT",M=>{const{targetId:D,config:k,onComplete:j}=M,I=t.current[D];I?(I.classList.add("animate-shake-damage"),setTimeout(()=>{I.classList.remove("animate-shake-damage"),j?.()},k?.duration||500)):j?.()}),T.registerVisualHandler("TELEPORT_EFFECT",M=>{const{targetId:D,laneId:k,playerId:j,onComplete:I}=M;w("ANIMATIONS","✨ [TELEPORT DEBUG] TELEPORT_EFFECT handler called:",{targetId:D,laneId:k,playerId:j});const U=t.current[D];if(!U){console.warn("⚠️ [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",D),I?.();return}const Y=l(U,u.current);w("ANIMATIONS","✨ [TELEPORT DEBUG] Using exact drone placeholder position:",Y);const V=e.getLocalPlayerId(),ae=j===V?"#00ffff":"#ec4899",ne=`teleport-${D}-${Date.now()}`;A(re=>[...re,{id:ne,top:Y.y,left:Y.x,color:ae,duration:600,onComplete:()=>{A(L=>L.filter(G=>G.id!==ne)),I?.()}}])});const _=e.subscribe(M=>{M.type==="animationStateChange"&&d(M.payload.blocking)});return e.actionProcessor.setAnimationManager(T),_},[r,i,e,o,t,n,l,u,p,d,h,m,y,b,x,A,C])}const vV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[o,l]=E.useState(t),[u,p]=E.useState([]),d=E.useRef(),h=E.useRef(Date.now());return E.useEffect(()=>{const m=r.duration||800,y=()=>{const b=Date.now()-h.current,x=Math.min(b/m,1),A=x<.5?2*x*x:-1+(4-2*x)*x,C=t.x+(n.x-t.x)*A,T=t.y+(n.y-t.y)*A;l({x:C,y:T}),r.trail&&p(O=>[...O.slice(-8),{id:Date.now(),x:C,y:T}]),x<1?d.current=requestAnimationFrame(y):i?.()};return d.current=requestAnimationFrame(y),()=>{d.current&&cancelAnimationFrame(d.current)}},[t,n,r,i]),g.jsxs(g.Fragment,{children:[u.map((m,y)=>g.jsx("div",{style:{position:"fixed",left:m.x+35,top:m.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+y*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},m.id)),g.jsx("div",{style:{position:"fixed",left:o.x,top:o.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:g.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},bV=({card:e,label:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const o=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(o)},[n]),g.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),g.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[g.jsx("h2",{className:`
            text-4xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
            card-reveal-label
            ${r?"card-reveal-label-show":""}
          `,children:t}),g.jsx("div",{className:`
            transform scale-110 card-reveal-card
            ${r?"":"card-reveal-dissolve"}
          `,children:g.jsx(fs,{card:e,isPlayable:!1})}),g.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            card-reveal-scanline
            ${r?"card-reveal-scanline-active":""}
          `})]})]})},SV=({label:e,onComplete:t})=>{const[n,r]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{r(!0)});const i=setTimeout(()=>{r(!1);const o=setTimeout(()=>{t?.()},300);return()=>clearTimeout(o)},1e3);return()=>clearTimeout(i)},[t]),g.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${n?"opacity-100":"opacity-0"}
      `,children:[g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),g.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${n?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[g.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-red-300 via-red-400 to-red-300
            animate-pulse
            drop-shadow-[0_0_20px_rgba(239,68,68,0.8)]
          `,children:e}),g.jsx("div",{className:`
            absolute top-1/2 left-0 w-full h-1 pointer-events-none
            ${n?"animate-horizontalScan":""}
          `,style:{background:"linear-gradient(to right, rgba(239, 68, 68, 0) 0%, rgba(239, 68, 68, 0.8) 50%, rgba(239, 68, 68, 0) 100%)",boxShadow:"0 0 10px rgba(239, 68, 68, 0.8), 0 0 20px rgba(239, 68, 68, 0.4)",transform:"translateY(-50%)"}})]}),g.jsx("style",{children:`
        @keyframes horizontalScan {
          0% {
            transform: translateX(-100%) translateY(-50%);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          90% {
            opacity: 1;
          }
          100% {
            transform: translateX(100%) translateY(-50%);
            opacity: 0;
          }
        }

        .animate-horizontalScan {
          animation: horizontalScan 800ms ease-in-out;
        }
      `})]})},xV=({phaseText:e,subtitle:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const o=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1500);return()=>clearTimeout(o)},[n]),g.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),g.jsxs("div",{className:`
          relative flex flex-col items-center
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[g.jsx("h1",{className:`
            text-6xl font-orbitron font-black uppercase tracking-widest text-center
            phase-announcement-text
            ${r?"phase-announcement-shine":""}
          `,style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:e}),t&&g.jsx("p",{className:`
              text-2xl font-orbitron font-medium uppercase tracking-wider text-center
              text-cyan-300/80 mt-4
              transition-all duration-300
              ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
            `,children:t}),g.jsx("div",{className:`
            mt-8 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent
            transition-all duration-500
            ${r?"w-96 opacity-100":"w-0 opacity-0"}
          `}),g.jsx("div",{className:`
            absolute inset-0 pointer-events-none overflow-hidden
          `,children:g.jsx("div",{className:`
              absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent
              phase-announcement-scanline
              ${r?"phase-announcement-scanline-active":""}
            `})})]})]})},AV=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[o,l]=E.useState(0);E.useEffect(()=>{setTimeout(()=>l(1),50);const y=r*.7;setTimeout(()=>l(0),y);const b=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(b)}},[r,i]);const u=t.x-e.x,p=t.y-e.y,d=Math.sqrt(u*u+p*p),h=Math.atan2(p,u)*(180/Math.PI),m=Math.max(3,2+n*1.5);return g.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${d}px`,height:`${m}px`,transformOrigin:"0 50%",transform:`rotate(${h}deg)`,pointerEvents:"none",zIndex:9998,opacity:o,transition:`opacity ${r*.15}ms ease-in-out`},children:[g.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${m*2}px rgba(255, 0, 0, 0.8), 0 0 ${m*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),g.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},EV=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[o,l]=E.useState([]);return E.useEffect(()=>{const u=[];for(let h=0;h<16;h++){const m=Math.PI*2*h/16;u.push({id:h,angle:m,delay:h/16*200})}l(u);const d=setTimeout(()=>{i?.()},n);return()=>clearTimeout(d)},[n,i]),g.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[g.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:g.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),g.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:g.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),o.map(u=>g.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),g.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},GP=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:o,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:p,addLogEntry:d,resetGame:h,processAction:m,gameStateManager:y,p2pManager:b}=is(),{getEffectiveStats:x,getEffectiveShipStats:A,gameDataService:C}=th(),T=!0,[O,_]=E.useState(!1),[M,D]=E.useState(!1),[k,j]=E.useState([]),[I,U]=E.useState([]),[Y,V]=E.useState([]),[W,ae]=E.useState([]),[ne,re]=E.useState([]),[L,G]=E.useState([]),[oe,ye]=E.useState([]),[R,K]=E.useState([]),[F,ie]=E.useState(!1),[he,me]=E.useState(null),[xe,Ye]=E.useState(null),[qe,be]=E.useState(null),[Re,Le]=E.useState(null),[pe,tt]=E.useState(!1),[Qe,Qt]=E.useState(!1),[lt,nt]=E.useState(null),[xn,ta]=E.useState(!1),[fo,Da]=E.useState(!1),[Bl,ps]=E.useState(!1),[et,Gt]=E.useState(null),[pa,un]=E.useState(null),[Or,An]=E.useState(null),[H,de]=E.useState(null),[ve,ue]=E.useState(null),[Te,Se]=E.useState([]),[Ie,Rt]=E.useState(!1),[Zt,ha]=E.useState(null),[Mt,Lt]=E.useState(null),[dn,qn]=E.useState(null),[ka,gi]=E.useState("drones"),[po,hs]=E.useState(!0),[Iu,lS]=E.useState([]),[er,Jt]=E.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[Fn,ms]=E.useState({}),[Ct,ma]=E.useState(null),[gs,ho]=E.useState([]),[kn,na]=E.useState(null),[_r,tr]=E.useState(null),[en,Vn]=E.useState(null),[St,mo]=E.useState([]),[ys,En]=E.useState(null),[Nr,go]=E.useState(null),[yt,Dr]=E.useState(null),[nh,vs]=E.useState(null),[yo,kr]=E.useState(null),[Ul,zl]=E.useState(null),[Mn,ga]=E.useState(null),[Gl,Ru]=E.useState(!1),[Hl,Ht]=E.useState(null),[bs,vo]=E.useState(null),[Mr,bo]=E.useState(null),[yi,vi]=E.useState(0),[jn,bi]=E.useState(0),[Yl,So]=E.useState(null),[Si,ql]=E.useState(null),[rh,Ss]=E.useState(null),[Fl,Vl]=E.useState(null),[ah,Lu]=E.useState(null),[$u,Bu]=E.useState(0),Ma=E.useRef(null),ja=E.useRef({}),xo=E.useRef({}),nr=E.useRef(null),rr=E.useRef(!1),Ao=E.useRef(null),{explosions:Kl,triggerExplosion:Wl}=uV(ja,nr);yV(y,ja,xo,o,l,Wl,l0,nr,j,ie,U,V,ae,re,G,ye,K),E.useEffect(()=>{If.initialize(y,y.actionProcessor,()=>e.gameMode!=="local",la),w("PHASE_TRANSITIONS","🔧 GameFlowManager initialized")},[]),E.useEffect(()=>{if(e.gameMode==="guest")return;const $=ge=>{const{type:fe,phase:Ae,playerId:Be,data:Ue}=ge;if(w("PHASE_TRANSITIONS",`🔔 App.jsx received PhaseManager event: ${fe}`,{phase:Ae,playerId:Be}),fe==="bothPlayersComplete"){const{phase:Ze}=ge;w("PHASE_TRANSITIONS",`🎯 Both players completed phase: ${Ze}`),lt===Ze&&(w("PHASE_TRANSITIONS",`✅ Clearing waiting overlay immediately for completed phase: ${Ze}`),nt(null))}if(fe==="phaseTransition"){const{newPhase:Ze,previousPhase:tn,firstPlayerResult:Pi}=ge;w("PHASE_TRANSITIONS",`🔄 App.jsx handling phase transition: ${tn} → ${Ze}`),w("PHASE_TRANSITIONS",`🔍 Waiting overlay check: waitingForPlayerPhase="${lt}", previousPhase="${tn}", match=${lt===tn}`),lt===tn?(w("PHASE_TRANSITIONS",`✅ Clearing waiting overlay for phase: ${tn}`),nt(null)):lt&&w("PHASE_TRANSITIONS",`⚠️ Waiting overlay NOT cleared: waiting for "${lt}" but transition is from "${tn}"`),Ze==="deploymentComplete"&&(w("PHASE_TRANSITIONS","🎯 Deployment complete phase started, showing modal"),tt(!0))}},J=If.subscribe($);return()=>{J()}},[i,n,me,lt,e.gameMode]);const{turnPhase:Fe,turn:Kn,currentPlayer:ya,firstPlayerOfRound:xi,firstPasserOfPreviousRound:Ia,firstPlayerOverride:Uu,passInfo:Yt,winner:ar,unplacedSections:Xl,shieldsToAllocate:Eo,opponentShieldsToAllocate:zu,gameLog:fn,placedSections:Ai}=e,[Ql,Co]=E.useState(ya),ih=E.useRef(Yt),Zl=E.useRef(Fe),Jl=E.useRef(ar);E.useEffect(()=>{ih.current=Yt},[Yt]),E.useEffect(()=>{Zl.current=Fe},[Fe]),E.useEffect(()=>{Jl.current=ar},[ar]);const Ne=o(),Ve=l(),Ei=u(),To=p();if(!Ne||!Ve)return g.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:g.jsx("div",{children:"Initializing game board..."})});E.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]);const Gu=E.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);E.useEffect(()=>{if(!i())return;const $=ge=>{if(w("MULTIPLAYER","🔥 P2P Event received in App:",ge),ge.type==="PHASE_COMPLETED"){const{phase:fe}=ge.data||ge;w("MULTIPLAYER",`🔥 Opponent completed phase: ${fe}`)}};return b.subscribe($)},[i,b]);const Po=Ne?A(Ne,Ei):null,wo=Ve?A(Ve,To):null,Hu=E.useMemo(()=>Ne?Object.values(Ne.dronesOnBoard).flat().length:0,[Ne?.dronesOnBoard]),Yu=E.useMemo(()=>Ve?Object.values(Ve.dronesOnBoard).flat().length:0,[Ve?.dronesOnBoard]),sh=E.useMemo(()=>[...Ne.activeDronePool].sort(($,J)=>$.class!==J.class?$.class-J.class:$.name.localeCompare(J.name)),[Ne.activeDronePool]);E.useMemo(()=>Ne?Object.keys(Ne.shipSections).some($=>Ne.shipSections[$].allocatedShields<C.getEffectiveSectionMaxShields($,Ne,Ei)):!1,[Ne.shipSections,Ei,C]);const oh=["commitment","destroyDrone","addShield","resetShields"],rt=E.useCallback(async($,J)=>{if(e.gameMode==="guest"){if(oh.includes($))return w("MULTIPLAYER","🔒 [GUEST HOST-ONLY] Sending action to host (no local processing):",$),b.sendActionToHost($,J),{success:!0,hostProcessing:!0};w("MULTIPLAYER","🔮 [GUEST OPTIMISTIC] Processing action locally and sending to host:",$),y.trackOptimisticAction($,J),w("ANIMATIONS","🔮 [GUEST OPTIMISTIC] Tracked action for deduplication:",{type:$,totalTracked:y.optimisticActions?.length||0}),w("ANIMATIONS","🎬 [GUEST OPTIMISTIC] About to process action locally (will generate animations)");const fe=await m($,J);return w("ANIMATIONS","✅ [GUEST OPTIMISTIC] Local processing complete (animations should have played)"),b.sendActionToHost($,J),fe}return await m($,J)},[e.gameMode,m,b,y]);E.useCallback($=>{if(w("MULTIPLAYER",`🔥 sendPhaseCompletion called for phase: ${$}`),i()){const J={type:"PHASE_COMPLETED",data:{phase:$}};w("MULTIPLAYER","🔥 Sending phase completion message:",J),b.sendData(J),w("MULTIPLAYER",`🔥 Sent phase completion: ${$}`)}else w("MULTIPLAYER","🔥 Not multiplayer, skipping network send")},[i,b]),E.useCallback(async()=>{Mt&&!Mt.card.effect.goAgain?await rt("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):Mt&&Mt.card.effect.goAgain&&!ar&&await rt("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),Lt(null)},[m,n,r,Mt,ar]);const qu=E.useCallback(async()=>{await rt("resetShields",{playerId:n()})},[rt,n]),lh=E.useCallback(async()=>{w("COMMITMENTS","🏁 handleConfirmShields called");const $=await rt("commitment",{playerId:n(),phase:"allocateShields",actionData:{committed:!0}});w("COMMITMENTS","🏁 Shield allocation commitment result:",{hasData:!!$.data,bothPlayersComplete:$.data?.bothPlayersComplete,fullResult:$}),e.gameMode==="guest"||$.data&&!$.data.bothPlayersComplete?(w("COMMITMENTS","✋ Setting waiting overlay for allocateShields"),nt("allocateShields")):w("COMMITMENTS","✅ Both players complete, not showing waiting overlay")},[rt,n]);E.useEffect(()=>{const{validAbilityTargets:$,validCardTargets:J}=$e.calculateAllValidTargets(Ct,kn,yt,en,Ne,Ve);ho($),mo(J),Ct&&(Vn(null),na(null))},[Ct,kn,en,Ne,Ve,yt]);const Ra=()=>{Ct&&(ma(null),Gt(null))},Cn=()=>{Vn(null),Dr(null)},Oo=E.useCallback(async $=>{if(rr.current){console.warn("Attack already in progress. Aborting duplicate call.");return}rr.current=!0;try{await new Promise(ge=>setTimeout(ge,250));const J=await rt("attack",{attackDetails:$});if(J?.needsInterceptionDecision){w("COMBAT","🛡️ [APP] Interception decision needed, showing modal..."),ue(J.interceptionData),rr.current=!1;return}}catch(J){console.error("Error in resolveAttack:",J)}finally{rr.current=!1}},[Wl,m,n,r]),_o=E.useCallback(async($,J,ge)=>{try{const fe=await rt("ability",{droneId:J.id,abilityIndex:J.abilities.findIndex(Ae=>Ae.name===$.name),targetId:ge?.id||null});Ra()}catch(fe){console.error("Error in resolveAbility:",fe),Ra()}},[m,n]),ch=E.useCallback(async($,J,ge)=>{const fe=await rt("shipAbility",{ability:$,sectionName:J,targetId:ge?.id||null,playerId:n()});if(fe.mandatoryAction){ga(fe.mandatoryAction),gi("hand"),hs(!0),na(null),tr(null);return}if(fe.requiresShieldReallocation){na(null),tr(null);return}return na(null),tr(null),fe},[m,n]),ec=E.useCallback(async($,J,ge,fe=null)=>{if(ge===r()){let Be="",Ue="";if(J)if(J.name){if(Be=J.name,J.id&&J.owner){const Ze=J.owner===n()?Ne:Ve;for(const[tn,Pi]of Object.entries(Ze.dronesOnBoard))if(Pi.some(wi=>wi.id===J.id)){Ue=tn.replace("lane","Lane ");break}}}else J.id.startsWith("lane")?(Be=`Lane ${J.id.slice(-1)}`,Ue=`Lane ${J.id.slice(-1)}`):Be=J.id.replace(/([A-Z])/g," $1").replace(/^./,Ze=>Ze.toUpperCase());Lt({card:$,targetName:Be,targetLane:Ue})}const Ae=await rt("cardPlay",{card:$,targetId:J?.id||null,playerId:ge});if(Ae.needsCardSelection){if(Ae.needsCardSelection.type==="single_move"||Ae.needsCardSelection.type==="multi_move"){Dr({card:Ae.needsCardSelection.card,phase:Ae.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}vo({...Ae.needsCardSelection,onConfirm:Be=>{uh(Be,Ae.needsCardSelection,$,J,ge,fe,Ae.newPlayerStates),vo(null)},onCancel:()=>{vo(null),ge===n()&&(Cn(),En(null))}});return}return ge===n()&&(Cn(),En(null)),Ae},[m,n,Ne,Ve]),uh=E.useCallback(($,J,ge,fe,Ae,Be,Ue=null)=>{const{searchedCards:Ze,remainingDeck:tn,discardPile:Pi,shuffleAfter:wi}=J,Tn=Ze.filter(jr=>{const ac=jr.instanceId||`${jr.id}-${jr.name}`;return!$.some($a=>($a.instanceId||`${$a.id}-${$a.name}`)===ac)}),In=Ue||{player1:Ne,player2:Ve},va=Ae===n()?In[n()]:In[r()],Do=[...va.hand,...$];let ko=[...tn,...Tn];wi&&(ko=ko.sort(()=>.5-Math.random()));const La={...va,deck:ko,hand:Do,discardPile:Pi};d({player:va.name,actionType:"CARD_SELECTION",source:ge.name,target:`Selected ${$.length} cards`,outcome:`Drew: ${$.map(jr=>jr.name).join(", ")}`},"handleCardSelection",Ae===r()?Be:null);const rc={[n()]:Ae===n()?{...va,deck:La.deck,hand:La.hand,discardPile:La.discardPile}:In[n()],[r()]:Ae===r()?{...va,deck:La.deck,hand:La.hand,discardPile:La.discardPile}:In[r()]},td=$e.finishCardPlay(ge,Ae,rc);y.setPlayerStates(td.newPlayerStates.player1,td.newPlayerStates.player2),Ae===n()&&(Cn(),En(null))},[Ne,Ve,d]),Fu=E.useCallback(async($,J,ge,fe)=>{await rt("movementCompletion",{card:$,movementType:"multi_move",drones:J,fromLane:ge,toLane:fe,playerId:n()}),Dr(null),Cn()},[m,n]),dh=E.useCallback(async($,J,ge,fe)=>{await rt("movementCompletion",{card:$,movementType:"single_move",drones:[J],fromLane:ge,toLane:fe,playerId:n()}),Dr(null),Cn()},[m,n]),fh=$=>{po?ka===$?hs(!1):gi($):(hs(!0),gi($))};E.useEffect(()=>{const{validAbilityTargets:$,validCardTargets:J}=$e.calculateAllValidTargets(Ct,kn,yt,en,Ne,Ve);ho($),mo(J),Ct&&(Vn(null),na(null))},[Ct,kn,en,Ne,Ve,yt]),E.useEffect(()=>{ar&&!xn&&ta(!0)},[ar,xn]),E.useEffect(()=>{if(Fe==="action"){const $=$e.calculatePotentialInterceptors(et,Ne,Ve,Gu());Se($)}else Se([])},[et,Fe,Ne,Ve,$e,Ei,To]),E.useEffect(()=>{const $=n();if(e.interceptionPending){const{attackingPlayerId:J,defendingPlayerId:ge,attackDetails:fe,interceptors:Ae}=e.interceptionPending;J===$?Rt(!0):ge===$&&ue({attackDetails:fe,interceptors:Ae})}else Rt(!1),ue(null)},[e.interceptionPending,n]),E.useEffect(()=>{if(e.lastInterception){const{interceptor:$,timestamp:J}=e.lastInterception;ha({droneId:$.id,timestamp:J})}},[e.lastInterception]),E.useEffect(()=>{un(null)},[et]),E.useEffect(()=>{if(et&&!Ct&&Fe==="action"){const $=l0(ja.current[et.id],nr.current);$&&Jt({visible:!0,start:$,end:{x:$.x,y:$.y}})}else Jt($=>({...$,visible:!1}))},[et,Fe,Ct]),E.useEffect(()=>{const $=ge=>{if(er.visible&&Ma.current&&nr.current){const fe=nr.current.getBoundingClientRect(),Ae=ge.clientX-fe.left,Be=ge.clientY-fe.top;Ma.current.setAttribute("x2",Ae),Ma.current.setAttribute("y2",Be)}},J=nr.current;return J?.addEventListener("mousemove",$),()=>{J?.removeEventListener("mousemove",$)}},[er.visible]),E.useEffect(()=>{ar&&rr.current&&(w("COMBAT","[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),rr.current=!1)},[ar,Fe,ya]),E.useEffect(()=>{e.gameMode==="guest"&&(w("STATE_SYNC","✅ [GUEST RENDER] Emitting render_complete event"),y.emit("render_complete"))},[e,y]),E.useEffect(()=>{if(e.gameMode!=="guest")return;const $=Ao.current;if($===null){Ao.current=Fe;return}if($!==Fe){w("PHASE_TRANSITIONS",`👁️ Guest detected phase change: ${$} → ${Fe}`);const J={newPhase:Fe,previousPhase:$,gameStage:e.gameStage,roundNumber:e.roundNumber};(fe=>{{const{newPhase:Ae,previousPhase:Be}=fe;w("PHASE_TRANSITIONS",`🔄 Guest handling synthetic phase transition: ${Be} → ${Ae}`),lt===Be&&nt(null),Ae==="deploymentComplete"&&(w("PHASE_TRANSITIONS","🎯 Deployment complete phase started, showing modal"),tt(!0))}})(J),Ao.current=Fe}},[Fe,e.gameStage,e.roundNumber,e.gameMode,lt]);const ph=()=>{h(),rr.current=!1,Gt(null),me(null),ma(null),ho([]),ga(null),Ru(!1),Ht(null),Vn(null),mo([]),En(null),ta(!1)},hh=async $=>{const{turnPhase:J}=e;J==="allocateShields"?await rt("addShield",{sectionName:$,playerId:n()}):await rt("reallocateShields",{action:"add",sectionName:$,playerId:n()})},mh=async $=>{if(jn<=0||Ne.shipSections[$].allocatedShields<=0)return;(await rt("reallocateShields",{action:"remove",sectionName:$,playerId:n()})).success&&(bi(fe=>fe-1),vi(fe=>fe+1))},gh=async $=>{if(yi<=0)return;(await rt("reallocateShields",{action:"add",sectionName:$,playerId:n()})).success&&vi(ge=>ge-1)},yh=()=>{ql(JSON.parse(JSON.stringify(Ne.shipSections))),bo("adding")},vh=async()=>{Mr==="removing"?(await rt("reallocateShields",{action:"restore",originalShipSections:Yl,playerId:n()}),bi(Fl.ability.effect.value.maxShields),vi(0)):Mr==="adding"&&(await rt("reallocateShields",{action:"restore",originalShipSections:Si,playerId:n()}),vi(jn+yi))},bh=async()=>{await rt("reallocateShields",{action:"restore",originalShipSections:Yl,playerId:n()}),bo(null),bi(0),vi(0),So(null),ql(null),Vl(null)},tc=()=>{tr({ability:Fl.ability,sectionName:Fl.sectionName,target:null})},xs=async()=>{w("PHASE_TRANSITIONS","🎯 App.jsx: Acknowledging deployment complete");const $=n(),J=await rt("acknowledgeDeploymentComplete",{playerId:$});J.success&&(tt(!1),J.data?.bothPlayersComplete||nt("deploymentComplete"))},Sh=$=>{if(Mr){Mr==="removing"?mh($):Mr==="adding"&&gh($);return}Fe==="allocateShields"&&hh($)},Vu=$=>{Yt[n()+"Passed"]||(et&&et.name===$.name?Gt(null):(Gt($),ma(null),Cn()))},nc=async $=>{try{const J=await rt("deployment",{droneData:et,laneId:$,playerId:n(),turn:Kn});J.success?Gt(null):me({title:J.error,text:J.message,isBlocking:!0})}catch(J){console.error("Error executing deployment:",J),me({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Ku=$=>{if(!(!et||ya!==n()||Yt[n()+"Passed"])){if(Kn===1){const J=$e.validateDeployment(Ne,et,Kn,Hu,Po);if(!J.isValid){me({title:J.reason,text:J.message,isBlocking:!0});return}const{budgetCost:ge,energyCost:fe}=J;if(fe>0){Ye({lane:$,budgetCost:ge,energyCost:fe});return}}nc($)}},Wu=async()=>{Yt[`${n()}Passed`]||await rt("playerPass",{playerId:n(),playerName:Ne.name,turnPhase:Fe,passInfo:Yt,opponentPlayerId:r()})},Xu=($,J,ge)=>{if($.stopPropagation(),Fe!=="action"||ya!==n()||Yt[n()+"Passed"])return;const fe=ge.cost||{};if(J.isExhausted&&fe.exhausts!==!1){me({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(fe.energy&&Ne.energy<fe.energy){me({title:"Not Enough Energy",text:`This ability costs ${fe.energy} energy, but you only have ${Ne.energy}.`,isBlocking:!0});return}if(ge.targeting?.type==="LANE"&&ge.targeting?.location==="SAME_LANE"){const Ae=$e.getLaneOfDrone(J.id,Ne);if(Ae){go({ability:ge,drone:J,target:{id:Ae,owner:n()}});return}}Ct&&Ct.drone.id===J.id?Ra():(ma({drone:J,ability:ge}),Gt(J),Cn())},Ci=($,J,ge)=>{if($.stopPropagation(),!(Fe!=="action"||!t()||Yt[`${n()}Passed`])){if(Ne.energy<ge.cost.energy){me({title:"Not Enough Energy",text:`This ability costs ${ge.cost.energy} energy, but you only have ${Ne.energy}.`,isBlocking:!0});return}kn?.ability.id===ge.id?na(null):ge.targeting?(na({sectionName:J.name,ability:ge}),Gt(null),Ra(),Cn()):ge.effect.type==="REALLOCATE_SHIELDS"?(bo("removing"),bi(ge.effect.value.maxShields),vi(0),So(JSON.parse(JSON.stringify(Ne.shipSections))),Vl({ability:ge,sectionName:J.name})):tr({ability:ge,sectionName:J.name,target:null})}},xh=($,J,ge)=>{if($.stopPropagation(),w("COMBAT",`--- handleTokenClick triggered for ${J.name} (isPlayer: ${ge}) ---`),yt&&yt.phase==="select_drones"&&ge){w("COMBAT","Action: Multi-move drone selection.");const{selectedDrones:fe,maxSelection:Ae}=yt;fe.some(Ue=>Ue.id===J.id)?Dr(Ue=>({...Ue,selectedDrones:Ue.selectedDrones.filter(Ze=>Ze.id!==J.id)})):fe.length<Ae&&Dr(Ue=>({...Ue,selectedDrones:[...Ue.selectedDrones,J]}));return}if(gs.some(fe=>fe.id===J.id)||St.some(fe=>fe.id===J.id)){w("COMBAT","Action: Targeting for an active card/ability."),Qu(J,"drone",ge);return}if(Fe==="action"&&t()&&et&&!et.isExhausted&&!ge){w("COMBAT","Action: Attempting a standard attack."),w("COMBAT","Attacker selected:",et.name,`(ID: ${et.id})`),w("COMBAT","Target clicked:",J.name,`(ID: ${J.id})`);const[fe]=Object.entries(Ne.dronesOnBoard).find(([Be,Ue])=>Ue.some(Ze=>Ze.id===et.id))||[],[Ae]=Object.entries(Ve.dronesOnBoard).find(([Be,Ue])=>Ue.some(Ze=>Ze.id===J.id))||[];if(w("COMBAT","Calculated Attacker Lane:",fe),w("COMBAT","Calculated Target Lane:",Ae),fe&&Ae&&fe===Ae)if(w("COMBAT","SUCCESS: Lanes match. Checking for Guardian..."),Ve.dronesOnBoard[Ae].some(Ze=>x(Ze,Ae).keywords.has("GUARDIAN")))w("COMBAT","FAILURE: Target is protected by a Guardian drone."),me({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{w("COMBAT","SUCCESS: No Guardian. Processing attack...");const Ze={attacker:et,target:J,targetType:"drone",lane:fe,attackingPlayer:n()};Oo(Ze),Gt(null)}else w("COMBAT","FAILURE: Lanes do not match or could not be found."),me({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(yt&&yt.phase==="select_drones"&&ge){w("COMBAT","Action: Multi-move drone selection.");const{selectedDrones:fe,maxSelection:Ae}=yt;fe.some(Ue=>Ue.id===J.id)?Dr(Ue=>({...Ue,selectedDrones:Ue.selectedDrones.filter(Ze=>Ze.id!==J.id)})):fe.length<Ae&&Dr(Ue=>({...Ue,selectedDrones:[...Ue.selectedDrones,J]}));return}if(Mn?.type==="destroy"&&ge){w("COMBAT","Action: Mandatory destruction."),Ht({type:"destroy",target:J,onConfirm:()=>No(J),onCancel:()=>Ht(null),text:`Are you sure you want to destroy your ${J.name}?`});return}if(ge&&Fe==="action"&&t()&&!Yt[`${n()}Passed`]){if(J.isExhausted){w("COMBAT","Action prevented: Drone is exhausted.");return}et?.id===J.id?(w("COMBAT","Action: Deselecting drone",J.name),Gt(null)):(w("COMBAT","Action: Selecting drone",J.name),Gt(J),Ra(),Cn());return}w("COMBAT","Action: Fallback - showing drone details."),Le(J)},Qu=($,J,ge)=>{if(kn&&gs.some(fe=>fe.id===$.id)){tr({ability:kn.ability,sectionName:kn.sectionName,target:$});return}if(Ct&&gs.some(fe=>fe.id===$.id)){_o(Ct.ability,Ct.drone,$);return}if(en&&St.some(fe=>fe.id===$.id)){const fe=ge?n():r();En({card:en,target:{...$,owner:fe}});return}if(Fe==="action"&&t()&&et&&!et.isExhausted&&!ge&&J==="section"){w("COMBAT","Action: Attempting ship section attack."),w("COMBAT","Attacker selected:",et.name,`(ID: ${et.id})`),w("COMBAT","Target clicked:",$.name);const[fe]=Object.entries(Ne.dronesOnBoard).find(([Ae,Be])=>Be.some(Ue=>Ue.id===et.id))||[];if(w("COMBAT","Calculated Attacker Lane:",fe),fe){w("COMBAT","SUCCESS: Found attacker lane. Checking for Guardian...");const Ae=Ve.dronesOnBoard[fe];if(Ae&&Ae.some(Ue=>x(Ue,fe).keywords.has("GUARDIAN")))w("COMBAT","FAILURE: Ship section is protected by a Guardian drone."),me({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{w("COMBAT","SUCCESS: No Guardian. Processing attack...");const Ue={attacker:et,target:$,targetType:"section",lane:fe,attackingPlayer:n()};Oo(Ue),Gt(null)}}else w("COMBAT","FAILURE: Could not determine attacker lane."),me({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}J==="drone"&&Le($)},Ah=($,J,ge)=>{if($.stopPropagation(),Ct&&Ct.ability.targeting.type==="LANE"){const fe=ge?n():r();if(gs.some(Ae=>Ae.id===J&&Ae.owner===fe)){go({ability:Ct.ability,drone:Ct.drone,target:{id:J,owner:fe}});return}}if(yt&&ge&&St.some(fe=>fe.id===J)){const{phase:fe,sourceLane:Ae,selectedDrones:Be}=yt;if(fe==="select_source_lane"){Dr(Ue=>({...Ue,phase:"select_drones",sourceLane:J}));return}if(fe==="select_destination_lane"){Fu(yt.card,Be,Ae,J);return}}if(yt&&yt.card.effect.type==="SINGLE_MOVE"&&yt.phase==="select_destination"&&ge){St.some(fe=>fe.id===J)&&dh(yt.card,yt.selectedDrone,yt.sourceLane,J);return}if(en&&en.targeting.type==="LANE"){const fe=ge?n():r();if(St.some(Ae=>Ae.id===J&&Ae.owner===fe)){En({card:en,target:{id:J,owner:fe}});return}}if(en){Cn();return}if(Ct){Ra();return}if(Fe==="deployment"&&ge)Ku(J);else if(Fe==="action"&&ge&&et){const[fe]=Object.entries(Ne.dronesOnBoard).find(([Ue,Ze])=>Ze.some(tn=>tn.id===et.id))||[];if(!fe)return;const Ae=parseInt(fe.replace("lane",""),10),Be=parseInt(J.replace("lane",""),10);Math.abs(Ae-Be)===1?be({drone:et,from:fe,to:J}):me({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},Zu=async $=>{const J=n(),ge=t(),fe=Yt[`${J}Passed`];if(w("CARD_PLAY",`🎯 handleCardClick called: ${$.name}`,{cardId:$.id,cardCost:$.cost,gameMode:e.gameMode,localPlayerId:J,turnPhase:Fe,isMyTurn:ge,playerPassed:fe,playerEnergy:Ne.energy,hasEnoughEnergy:Ne.energy>=$.cost}),Fe!=="action"){w("CARD_PLAY",`🚫 Card click rejected - wrong phase: ${Fe}`,{card:$.name});return}if(!ge){w("CARD_PLAY","🚫 Card click rejected - not player's turn",{card:$.name,localPlayerId:J,currentPlayer:e.currentPlayer});return}if(fe){w("CARD_PLAY","🚫 Card click rejected - player has passed",{card:$.name});return}if(Ne.energy<$.cost){w("CARD_PLAY","🚫 Card click rejected - not enough energy",{card:$.name,cardCost:$.cost,playerEnergy:Ne.energy});return}if($.effect.type==="MULTI_MOVE"||$.effect.type==="SINGLE_MOVE"){w("CARD_PLAY",`✅ Movement card - processing: ${$.name}`,{effectType:$.effect.type}),yt&&yt.card.instanceId===$.instanceId?Cn():await ec($,null,n());return}if(en?.instanceId===$.instanceId)w("CARD_PLAY",`✅ Card deselected: ${$.name}`),Cn();else if($.name==="System Sabotage"){w("CARD_PLAY","✅ System Sabotage card - getting targets",{card:$.name});const Ae=$e.getValidTargets(n(),null,$,Ne,Ve);w("CARD_PLAY",`✅ System Sabotage targets found: ${Ae.length}`,{targets:Ae}),vs({card:$,targets:Ae,opponentState:Ve}),Vn(null),ma(null),Gt(null)}else if($.type==="Upgrade"){w("CARD_PLAY",`✅ Upgrade card - getting targets: ${$.name}`);const Ae=$e.getValidTargets(n(),null,$,Ne,Ve);w("CARD_PLAY",`✅ Upgrade targets found: ${Ae.length}`,{targets:Ae}),Ae.length>0?(kr({card:$,targets:Ae}),Vn(null),ma(null),Gt(null)):me({title:"No Valid Targets",text:`There are no drone types that can accept the '${$.name}' upgrade right now.`,isBlocking:!0})}else $.targeting?(w("CARD_PLAY",`✅ Targeted card - waiting for target selection: ${$.name}`,{targeting:$.targeting}),Vn($),Gt(null),ma(null)):(w("CARD_PLAY",`✅ Non-targeted card - showing confirmation: ${$.name}`),En({card:$,target:null}),Vn(null),ma(null),Gt(null))},Ju=async $=>{const J=Mn;await rt("optionalDiscard",{playerId:n(),cardsToDiscard:[$],isMandatory:!0}),Ht(null);const ge=J.count-1;if(ge<=0){if(ga(null),!J.fromAbility){const fe=await rt("commitment",{playerId:n(),phase:"mandatoryDiscard",actionData:{completed:!0}});fe.data&&!fe.data.bothPlayersComplete&&nt("mandatoryDiscard")}}else ga(fe=>({...fe,count:ge}))},As=async $=>{await rt("optionalDiscard",{playerId:n(),cardsToDiscard:[$],isMandatory:!1}),Bu(J=>J+1),Ht(null)},Ti=async()=>{w("PHASE_TRANSITIONS","[OPTIONAL DISCARD] Player completing optional discard phase"),Bu(0);const $=await rt("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}});(e.gameMode==="guest"||$.data&&!$.data.bothPlayersComplete)&&nt("optionalDiscard")},Eh=()=>{const $=y.actionProcessor?.getPhaseCommitmentStatus("optionalDiscard");return w("PHASE_TRANSITIONS","[OPTIONAL DISCARD] Commitment status:",$),$?.bothComplete||!1},No=async $=>{const J=Mn,ge=await rt("destroyDrone",{droneId:$.id,playerId:n()});if(!ge.success){console.error("Failed to destroy drone:",ge.error);return}const fe=J.count-1;if(fe<=0){if(Yu>wo.totals.cpuLimit&&e.gameMode==="local"){const Ue=Object.values(Ve.dronesOnBoard).flat().length-A(Ve,To).totals.cpuLimit;for(let Ze=0;Ze<Ue;Ze++){const tn=Object.entries(Ve.dronesOnBoard).flatMap(([In,va])=>va.map(Do=>({...Do,lane:In})));if(tn.length===0)break;const Pi=Math.min(...tn.map(In=>In.class)),wi=tn.filter(In=>In.class===Pi),Tn=wi[Math.floor(Math.random()*wi.length)];await rt("destroyDrone",{droneId:Tn.id,playerId:r()})}}ga(null);const Be=await rt("commitment",{playerId:n(),phase:"mandatoryDroneRemoval",actionData:{completed:!0}});Be.data&&!Be.data.bothPlayersComplete&&nt("mandatoryDroneRemoval")}else ga(Ae=>({...Ae,count:fe}));Ht(null)},ed=()=>{if(fn.length===0){alert("The game log is empty.");return}const $=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],J=fn.map(Be=>[Be.round,Be.player,Be.actionType,Be.source,Be.target,Be.outcome,Be.debugSource||"N/A"].map(Ze=>`"${String(Ze).replace(/"/g,'""')}"`).join(",")),ge=[$.join(","),...J].join(`
`),fe=new Blob([ge],{type:"text/csv;charset=utf-8;"}),Ae=document.createElement("a");if(Ae.download!==void 0){const Be=URL.createObjectURL(fe);Ae.setAttribute("href",Be),Ae.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Ae.style.visibility="hidden",document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae)}};return g.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col relative",ref:nr,onClick:()=>{Ra(),Cn()},children:[g.jsx(Oq,{}),g.jsx(LF,{visible:er.visible,start:er.start,end:er.end,lineRef:Ma}),Kl.map($=>g.jsx($F,{top:$.top,left:$.left,size:$.size},$.id)),k.map($=>g.jsx(vV,{droneData:$.droneData,startPos:$.startPos,endPos:$.endPos,config:$.config,onComplete:$.onComplete},$.id)),I.map($=>g.jsx(fV,{position:$.position,color:$.color,intensity:$.intensity,onComplete:$.onComplete},$.id)),Y.map($=>g.jsx(pV,{visualType:$.visualType,startPos:$.startPos,endPos:$.endPos,duration:$.duration,onComplete:$.onComplete},$.id)),W.map($=>g.jsx(bV,{card:$.card,label:$.label,onComplete:$.onComplete},$.id)),ne.map($=>g.jsx(xV,{phaseText:$.phaseText,subtitle:$.subtitle,onComplete:$.onComplete},$.id)),R.map($=>g.jsx(SV,{label:$.label,onComplete:$.onComplete},$.id)),L.map($=>g.jsx(AV,{startPos:$.startPos,endPos:$.endPos,attackValue:$.attackValue,duration:$.duration,onComplete:$.onComplete},$.id)),oe.map($=>g.jsx(EV,{top:$.top,left:$.left,color:$.color,duration:$.duration,onComplete:$.onComplete},$.id)),F&&g.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),g.jsx(_q,{localPlayerState:Ne,opponentPlayerState:Ve,localPlayerEffectiveStats:Po,opponentPlayerEffectiveStats:wo,turnPhase:Fe,turn:Kn,passInfo:Yt,firstPlayerOfRound:xi,shieldsToAllocate:Eo,opponentShieldsToAllocate:zu,shieldsToRemove:jn,shieldsToAdd:yi,reallocationPhase:Mr,totalLocalPlayerDrones:Hu,totalOpponentPlayerDrones:Yu,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:ya,isMultiplayer:i,handlePlayerPass:Wu,handleReset:ph,handleResetShields:qu,handleConfirmShields:lh,handleCancelReallocation:bh,handleResetReallocation:vh,handleContinueToAddPhase:yh,handleConfirmReallocation:tc,handleRoundStartDraw:Ti,optionalDiscardCount:$u,mandatoryAction:Mn,multiSelectState:yt,AI_HAND_DEBUG_MODE:T,setShowAiHandModal:_,onShowDebugModal:()=>D(!0)}),!t()&&(Fe==="deployment"||Fe==="action")&&g.jsx("div",{style:{position:"fixed",inset:0,background:"transparent",zIndex:40,cursor:"not-allowed"},onClick:$=>$.stopPropagation()}),g.jsx(Mq,{localPlayerState:Ne,opponentPlayerState:Ve,localPlacedSections:Ei,opponentPlacedSections:To,selectedCard:en,validCardTargets:St,abilityMode:Ct,validAbilityTargets:gs,multiSelectState:yt,turnPhase:Fe,reallocationPhase:Mr,shipAbilityMode:kn,hoveredTarget:pa,selectedDrone:et,recentlyHitDrones:Iu,potentialInterceptors:Te,droneRefs:ja,sectionRefs:xo,mandatoryAction:Mn,gameEngine:$e,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:Gu,passInfo:Yt,handleTargetClick:Qu,handleLaneClick:Ah,handleShipSectionClick:Sh,handleShipAbilityClick:Ci,handleTokenClick:xh,handleAbilityIconClick:Xu,setHoveredTarget:un,interceptedBadge:Zt}),g.jsx(kF,{gameMode:e.gameMode,localPlayerState:Ne,localPlayerEffectiveStats:Po,sortedLocalActivePool:sh,gameLog:fn,footerView:ka,isFooterOpen:po,multiSelectState:yt,selectedCard:en,turnPhase:Fe,mandatoryAction:Mn,handleFooterButtonClick:fh,handleCardClick:Zu,cancelCardSelection:Cn,downloadLogAsCSV:ed,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Or,setHoveredCardId:An,setIsViewDiscardModalOpen:ps,setIsViewDeckModalOpen:Da,handleToggleDroneSelection:Vu,selectedDrone:et,setViewUpgradesModal:zl,handleConfirmMandatoryDiscard:Ju,setConfirmationModal:Ht,turn:Kn,passInfo:Yt,validCardTargets:St,gameEngine:$e,opponentPlayerState:Ve,setAiDecisionLogToShow:qn,optionalDiscardCount:$u,handleRoundStartDraw:Ti,handleRoundStartDiscard:As,checkBothPlayersHandLimitComplete:Eh}),he&&g.jsx(uo,{title:he.title,text:he.text,onClose:he.onClose===null?null:he.onClose||(()=>me(null)),children:he.children}),g.jsx(VF,{show:pe,firstPlayerOfRound:xi,localPlayerId:n(),localPlayerName:Ne.name,opponentPlayerName:Ve.name,onContinue:xs}),g.jsx(KF,{show:Qe,onContinue:()=>Qt(!1)}),g.jsx(WF,{show:!!lt,phase:lt,opponentName:Ve.name,roomCode:b.roomCode}),g.jsx(eV,{deploymentConfirmation:xe,show:!!xe,onCancel:()=>Ye(null),onConfirm:async()=>{if(!xe)return;const{lane:$}=xe;Ye(null),await nc($)}}),g.jsx(tV,{moveConfirmation:qe,show:!!qe,onCancel:()=>be(null),onConfirm:async()=>{if(!qe)return;const{drone:$,from:J,to:ge}=qe;await rt("move",{droneId:$.id,fromLane:J,toLane:ge,playerId:n()}),be(null),Gt(null)}}),g.jsx(rV,{interceptionModal:H,show:!!H,onClose:H?.onClose}),g.jsx(nV,{choiceData:ve,show:!!ve,onIntercept:async $=>{const J={...ve.attackDetails,interceptor:$};ue(null),setTimeout(async()=>{await Oo(J)},400)},onDecline:async()=>{const $={...ve.attackDetails,interceptor:null};ue(null),setTimeout(async()=>{await Oo($)},400)},gameEngine:$e,turnPhase:Fe,isMyTurn:t,passInfo:Yt,getLocalPlayerId:n,localPlayerState:Ne,shipAbilityMode:kn,droneRefs:ja,mandatoryAction:Mn}),g.jsx(aV,{show:Ie,opponentName:Ve?.name||"Opponent"}),g.jsx(FF,{isOpen:!!Re,drone:Re,onClose:()=>Le(null)}),Mt&&g.jsx(qF,{report:Mt,onClose:()=>Lt(null)}),g.jsx(JF,{decisionLog:dn,show:!!dn,onClose:()=>qn(null),getLocalPlayerId:n}),g.jsx(ZF,{winner:ar,localPlayerId:n(),show:ar&&xn,onClose:()=>ta(!1)}),g.jsx(QF,{mandatoryAction:Mn,effectiveStats:Po,show:Mn&&Gl,onClose:()=>Ru(!1)}),g.jsx(XF,{confirmationModal:Hl,show:!!Hl}),g.jsx(RF,{viewUpgradesModal:Ul,setViewUpgradesModal:zl,destroyUpgradeModal:nh,setDestroyUpgradeModal:vs,upgradeSelectionModal:yo,setUpgradeSelectionModal:kr,resolveCardPlay:ec,getLocalPlayerId:n,cancelCardSelection:Cn}),g.jsx(iV,{cardConfirmation:ys,show:!!ys,onCancel:()=>En(null),onConfirm:async()=>{const $=ys.card,J=ys.target;En(null),setTimeout(async()=>{await ec($,J,n())},400)}}),g.jsx(sV,{abilityConfirmation:Nr,show:!!Nr,onCancel:()=>go(null),onConfirm:()=>{_o(Nr.ability,Nr.drone,Nr.target),go(null)}}),g.jsx(lV,{opponentPlayerState:Ve,show:O,debugMode:T,onClose:()=>_(!1)}),g.jsx(cV,{show:M,onClose:()=>D(!1),gameStateManager:y,gameDataService:C}),g.jsx(zP,{isOpen:fo,onClose:()=>Da(!1),cards:Ne.deck,title:"Remaining Cards in Deck",shouldSort:!0}),g.jsx(zP,{isOpen:Bl,onClose:()=>ps(!1),cards:Ne.discardPile,title:"Discard Pile",shouldSort:!1}),g.jsx(YF,{isOpen:!!bs,onClose:bs?.onCancel||(()=>vo(null)),onConfirm:bs?.onConfirm||(()=>{}),selectionData:bs}),g.jsx(oV,{shipAbilityConfirmation:_r,show:!!_r,onCancel:()=>tr(null),onConfirm:async()=>await ch(_r.ability,_r.sectionName,_r.target)}),g.jsx(GF,{isVisible:!1,currentPlayer:ya,gameMode:e.gameMode,roomCode:b.roomCode,lastAction:null,localPlayerState:Ne,opponentPlayerState:Ve,getLocalPlayerId:n})]})};function CV(){const{gameState:e}=is(),[t,n]=E.useState(!0),r=E.useRef(!1);if(E.useEffect(()=>{const l=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(l)},[]),E.useEffect(()=>{if(e.gameMode==="guest"){w("PHASE_TRANSITIONS","🔄 Guest mode detected - skipping manager initialization");return}r.current?w("PHASE_TRANSITIONS","🔄 GameFlowManager already initialized, skipping..."):(If.initialize(Ge,Ge.actionProcessor,()=>e.gameMode!=="local",la),Ge.setGameFlowManager(If),r.current=!0,w("PHASE_TRANSITIONS","🔄 GameFlowManager initialized in AppRouter (host/local mode)"))},[e.gameMode]),t)return g.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:g.jsx("div",{children:"Loading EREMOS..."})});const i=!(e.appState==="inGame"&&!["droneSelection","placement"].includes(e.turnPhase));let o;switch(e.appState){case"menu":o=g.jsx(BA,{});break;case"lobby":o=g.jsx(wI,{});break;case"inGame":switch(e.turnPhase){case"droneSelection":o=g.jsx(_I,{});break;case"deckSelection":o=g.jsx(Tq,{});break;case"placement":o=g.jsx(wq,{});break;case"gameInitializing":o=g.jsx(GP,{});break;default:o=g.jsx(GP,{})}break;default:console.warn("Unknown app state:",e.appState,"defaulting to menu"),o=g.jsx(BA,{})}return g.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto"},children:[i&&g.jsx(ID,{}),o]})}ZM.createRoot(document.getElementById("root")).render(g.jsx(YP.StrictMode,{children:g.jsx(CV,{})}));export{sn as G,w as d,Gn as f};
