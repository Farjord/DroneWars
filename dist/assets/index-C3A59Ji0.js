function Lw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Fr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qm={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function Kk(){if(rA)return Ec;rA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return Ec.Fragment=t,Ec.jsx=n,Ec.jsxs=n,Ec}var aA;function Wk(){return aA||(aA=1,Qm.exports=Kk()),Qm.exports}var v=Wk(),Zm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA;function Xk(){if(iA)return je;iA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function g(R){return R===null||typeof R!="object"?null:(R=m&&R[m]||R["@@iterator"],typeof R=="function"?R:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function C(R,F,X){this.props=R,this.context=F,this.refs=A,this.updater=X||b}C.prototype.isReactComponent={},C.prototype.setState=function(R,F){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,F,"setState")},C.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function P(){}P.prototype=C.prototype;function T(R,F,X){this.props=R,this.context=F,this.refs=A,this.updater=X||b}var O=T.prototype=new P;O.constructor=T,S(O,C.prototype),O.isPureReactComponent=!0;var k=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function M(R,F,X,ae,me,z){return X=z.ref,{$$typeof:e,type:R,key:F,ref:X!==void 0?X:null,props:z}}function j(R,F){return M(R.type,F,void 0,void 0,void 0,R.props)}function U(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function K(R){var F={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(X){return F[X]})}var H=/\/+/g;function W(R,F){return typeof R=="object"&&R!==null&&R.key!=null?K(""+R.key):F.toString(36)}function re(){}function le(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(re,re):(R.status="pending",R.then(function(F){R.status==="pending"&&(R.status="fulfilled",R.value=F)},function(F){R.status==="pending"&&(R.status="rejected",R.reason=F)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function ne(R,F,X,ae,me){var z=typeof R;(z==="undefined"||z==="boolean")&&(R=null);var te=!1;if(R===null)te=!0;else switch(z){case"bigint":case"string":case"number":te=!0;break;case"object":switch(R.$$typeof){case e:case t:te=!0;break;case h:return te=R._init,ne(te(R._payload),F,X,ae,me)}}if(te)return me=me(R),te=ae===""?"."+W(R,0):ae,k(me)?(X="",te!=null&&(X=te.replace(H,"$&/")+"/"),ne(me,F,X,"",function(oe){return oe})):me!=null&&(U(me)&&(me=j(me,X+(me.key==null||R&&R.key===me.key?"":(""+me.key).replace(H,"$&/")+"/")+te)),F.push(me)),1;te=0;var ve=ae===""?".":ae+":";if(k(R))for(var pe=0;pe<R.length;pe++)ae=R[pe],z=ve+W(ae,pe),te+=ne(ae,F,X,z,me);else if(pe=g(R),typeof pe=="function")for(R=pe.call(R),pe=0;!(ae=R.next()).done;)ae=ae.value,z=ve+W(ae,pe++),te+=ne(ae,F,X,z,me);else if(z==="object"){if(typeof R.then=="function")return ne(le(R),F,X,ae,me);throw F=String(R),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return te}function L(R,F,X){if(R==null)return R;var ae=[],me=0;return ne(R,ae,"","",function(z){return F.call(X,z,me++)}),ae}function q(R){if(R._status===-1){var F=R._result;F=F(),F.then(function(X){(R._status===0||R._status===-1)&&(R._status=1,R._result=X)},function(X){(R._status===0||R._status===-1)&&(R._status=2,R._result=X)}),R._status===-1&&(R._status=0,R._result=F)}if(R._status===1)return R._result.default;throw R._result}var ue=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function ye(){}return je.Children={map:L,forEach:function(R,F,X){L(R,function(){F.apply(this,arguments)},X)},count:function(R){var F=0;return L(R,function(){F++}),F},toArray:function(R){return L(R,function(F){return F})||[]},only:function(R){if(!U(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},je.Component=C,je.Fragment=n,je.Profiler=i,je.PureComponent=T,je.StrictMode=r,je.Suspense=p,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,je.__COMPILER_RUNTIME={__proto__:null,c:function(R){return N.H.useMemoCache(R)}},je.cache=function(R){return function(){return R.apply(null,arguments)}},je.cloneElement=function(R,F,X){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ae=S({},R.props),me=R.key,z=void 0;if(F!=null)for(te in F.ref!==void 0&&(z=void 0),F.key!==void 0&&(me=""+F.key),F)!D.call(F,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&F.ref===void 0||(ae[te]=F[te]);var te=arguments.length-2;if(te===1)ae.children=X;else if(1<te){for(var ve=Array(te),pe=0;pe<te;pe++)ve[pe]=arguments[pe+2];ae.children=ve}return M(R.type,me,void 0,void 0,z,ae)},je.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:s,_context:R},R},je.createElement=function(R,F,X){var ae,me={},z=null;if(F!=null)for(ae in F.key!==void 0&&(z=""+F.key),F)D.call(F,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(me[ae]=F[ae]);var te=arguments.length-2;if(te===1)me.children=X;else if(1<te){for(var ve=Array(te),pe=0;pe<te;pe++)ve[pe]=arguments[pe+2];me.children=ve}if(R&&R.defaultProps)for(ae in te=R.defaultProps,te)me[ae]===void 0&&(me[ae]=te[ae]);return M(R,z,void 0,void 0,null,me)},je.createRef=function(){return{current:null}},je.forwardRef=function(R){return{$$typeof:u,render:R}},je.isValidElement=U,je.lazy=function(R){return{$$typeof:h,_payload:{_status:-1,_result:R},_init:q}},je.memo=function(R,F){return{$$typeof:f,type:R,compare:F===void 0?null:F}},je.startTransition=function(R){var F=N.T,X={};N.T=X;try{var ae=R(),me=N.S;me!==null&&me(X,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(ye,ue)}catch(z){ue(z)}finally{N.T=F}},je.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},je.use=function(R){return N.H.use(R)},je.useActionState=function(R,F,X){return N.H.useActionState(R,F,X)},je.useCallback=function(R,F){return N.H.useCallback(R,F)},je.useContext=function(R){return N.H.useContext(R)},je.useDebugValue=function(){},je.useDeferredValue=function(R,F){return N.H.useDeferredValue(R,F)},je.useEffect=function(R,F,X){var ae=N.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(R,F)},je.useId=function(){return N.H.useId()},je.useImperativeHandle=function(R,F,X){return N.H.useImperativeHandle(R,F,X)},je.useInsertionEffect=function(R,F){return N.H.useInsertionEffect(R,F)},je.useLayoutEffect=function(R,F){return N.H.useLayoutEffect(R,F)},je.useMemo=function(R,F){return N.H.useMemo(R,F)},je.useOptimistic=function(R,F){return N.H.useOptimistic(R,F)},je.useReducer=function(R,F,X){return N.H.useReducer(R,F,X)},je.useRef=function(R){return N.H.useRef(R)},je.useState=function(R){return N.H.useState(R)},je.useSyncExternalStore=function(R,F,X){return N.H.useSyncExternalStore(R,F,X)},je.useTransition=function(){return N.H.useTransition()},je.version="19.1.1",je}var oA;function fl(){return oA||(oA=1,Zm.exports=Xk()),Zm.exports}var E=fl();const $w=Fr(E),Qk=Lw({__proto__:null,default:$w},[E]);var Jm={exports:{}},Cc={},eg={exports:{}},tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA;function Zk(){return sA||(sA=1,(function(e){function t(L,q){var ue=L.length;L.push(q);e:for(;0<ue;){var ye=ue-1>>>1,R=L[ye];if(0<i(R,q))L[ye]=q,L[ue]=R,ue=ye;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],ue=L.pop();if(ue!==q){L[0]=ue;e:for(var ye=0,R=L.length,F=R>>>1;ye<F;){var X=2*(ye+1)-1,ae=L[X],me=X+1,z=L[me];if(0>i(ae,ue))me<R&&0>i(z,ae)?(L[ye]=z,L[me]=ue,ye=me):(L[ye]=ae,L[X]=ue,ye=X);else if(me<R&&0>i(z,ue))L[ye]=z,L[me]=ue,ye=me;else break e}}return q}function i(L,q){var ue=L.sortIndex-q.sortIndex;return ue!==0?ue:L.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var p=[],f=[],h=1,m=null,g=3,b=!1,S=!1,A=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function k(L){for(var q=n(f);q!==null;){if(q.callback===null)r(f);else if(q.startTime<=L)r(f),q.sortIndex=q.expirationTime,t(p,q);else break;q=n(f)}}function N(L){if(A=!1,k(L),!S)if(n(p)!==null)S=!0,D||(D=!0,W());else{var q=n(f);q!==null&&ne(N,q.startTime-L)}}var D=!1,M=-1,j=5,U=-1;function K(){return C?!0:!(e.unstable_now()-U<j)}function H(){if(C=!1,D){var L=e.unstable_now();U=L;var q=!0;try{e:{S=!1,A&&(A=!1,T(M),M=-1),b=!0;var ue=g;try{t:{for(k(L),m=n(p);m!==null&&!(m.expirationTime>L&&K());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,g=m.priorityLevel;var R=ye(m.expirationTime<=L);if(L=e.unstable_now(),typeof R=="function"){m.callback=R,k(L),q=!0;break t}m===n(p)&&r(p),k(L)}else r(p);m=n(p)}if(m!==null)q=!0;else{var F=n(f);F!==null&&ne(N,F.startTime-L),q=!1}}break e}finally{m=null,g=ue,b=!1}q=void 0}}finally{q?W():D=!1}}}var W;if(typeof O=="function")W=function(){O(H)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,le=re.port2;re.port1.onmessage=H,W=function(){le.postMessage(null)}}else W=function(){P(H,0)};function ne(L,q){M=P(function(){L(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var ue=g;g=q;try{return L()}finally{g=ue}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ue=g;g=L;try{return q()}finally{g=ue}},e.unstable_scheduleCallback=function(L,q,ue){var ye=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ye+ue:ye):ue=ye,L){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ue+R,L={id:h++,callback:q,priorityLevel:L,startTime:ue,expirationTime:R,sortIndex:-1},ue>ye?(L.sortIndex=ue,t(f,L),n(p)===null&&L===n(f)&&(A?(T(M),M=-1):A=!0,ne(N,ue-ye))):(L.sortIndex=R,t(p,L),S||b||(S=!0,D||(D=!0,W()))),L},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(L){var q=g;return function(){var ue=g;g=q;try{return L.apply(this,arguments)}finally{g=ue}}}})(tg)),tg}var lA;function Jk(){return lA||(lA=1,eg.exports=Zk()),eg.exports}var ng={exports:{}},xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function eM(){if(cA)return xn;cA=1;var e=fl();function t(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(p,f,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:p,containerInfo:f,implementation:h}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xn.createPortal=function(p,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(p,f,null,h)},xn.flushSync=function(p){var f=l.T,h=r.p;try{if(l.T=null,r.p=2,p)return p()}finally{l.T=f,r.p=h,r.d.f()}},xn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(p,f))},xn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},xn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var h=f.as,m=u(h,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:b}):h==="script"&&r.d.X(p,{crossOrigin:m,integrity:g,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},xn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=u(f.as,f.crossOrigin);r.d.M(p,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(p)},xn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,m=u(h,f.crossOrigin);r.d.L(p,h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},xn.preloadModule=function(p,f){if(typeof p=="string")if(f){var h=u(f.as,f.crossOrigin);r.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(p)},xn.requestFormReset=function(p){r.d.r(p)},xn.unstable_batchedUpdates=function(p,f){return p(f)},xn.useFormState=function(p,f,h){return l.H.useFormState(p,f,h)},xn.useFormStatus=function(){return l.H.useHostTransitionStatus()},xn.version="19.1.1",xn}var uA;function Bw(){if(uA)return ng.exports;uA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ng.exports=eM(),ng.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA;function tM(){if(dA)return Cc;dA=1;var e=Jk(),t=fl(),n=Bw();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function p(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,d=o;;){var y=c.return;if(y===null)break;var x=y.alternate;if(x===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===c)return u(y),a;if(x===d)return u(y),o;x=x.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=x;else{for(var w=!1,_=y.child;_;){if(_===c){w=!0,c=y,d=x;break}if(_===d){w=!0,d=y,c=x;break}_=_.sibling}if(!w){for(_=x.child;_;){if(_===c){w=!0,c=x,d=y;break}if(_===d){w=!0,d=x,c=y;break}_=_.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function f(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=f(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var re=Symbol.for("react.client.reference");function le(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===re?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case O:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return o=a.displayName||null,o!==null?o:le(a.type)||"Memo";case j:o=a._payload,a=a._init;try{return le(a(o))}catch{}}return null}var ne=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ye=[],R=-1;function F(a){return{current:a}}function X(a){0>R||(a.current=ye[R],ye[R]=null,R--)}function ae(a,o){R++,ye[R]=a.current,a.current=o}var me=F(null),z=F(null),te=F(null),ve=F(null);function pe(a,o){switch(ae(te,o),ae(z,a),ae(me,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?N1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=N1(o),a=k1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}X(me),ae(me,a)}function oe(){X(me),X(z),X(te)}function de(a){a.memoizedState!==null&&ae(ve,a);var o=me.current,c=k1(o,a.type);o!==c&&(ae(z,a),ae(me,c))}function be(a){z.current===a&&(X(me),X(z)),ve.current===a&&(X(ve),vc._currentValue=ue)}var fe=Object.prototype.hasOwnProperty,Qe=e.unstable_scheduleCallback,Ge=e.unstable_cancelCallback,Bt=e.unstable_shouldYield,mt=e.unstable_requestPaint,pt=e.unstable_now,fr=e.unstable_getCurrentPriorityLevel,Kr=e.unstable_ImmediatePriority,Wo=e.unstable_UserBlockingPriority,Gi=e.unstable_NormalPriority,Ip=e.unstable_LowPriority,Cl=e.unstable_IdlePriority,Ke=e.log,Xt=e.unstable_setDisableYieldValue,Hi=null,hn=null;function Wr(a){if(typeof Ke=="function"&&Xt(a),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(Hi,a)}catch{}}var Tn=Math.clz32?Math.clz32:Xo,Pl=Math.log,ex=Math.LN2;function Xo(a){return a>>>=0,a===0?32:31-(Pl(a)/ex|0)|0}var Xr=256,Qo=4194304;function Qr(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Zo(a,o,c){var d=a.pendingLanes;if(d===0)return 0;var y=0,x=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var _=d&134217727;return _!==0?(d=_&~x,d!==0?y=Qr(d):(w&=_,w!==0?y=Qr(w):c||(c=_&~a,c!==0&&(y=Qr(c))))):(_=d&~x,_!==0?y=Qr(_):w!==0?y=Qr(w):c||(c=d&~a,c!==0&&(y=Qr(c)))),y===0?0:o!==0&&o!==y&&(o&x)===0&&(x=y&-y,c=o&-o,x>=c||x===32&&(c&4194048)!==0)?o:y}function Qa(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Lp(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gu(){var a=Xr;return Xr<<=1,(Xr&4194048)===0&&(Xr=256),a}function Zr(){var a=Qo;return Qo<<=1,(Qo&62914560)===0&&(Qo=4194304),a}function qi(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Za(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function yu(a,o,c,d,y,x){var w=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var _=a.entanglements,I=a.expirationTimes,V=a.hiddenUpdates;for(c=w&~c;0<c;){var ie=31-Tn(c),ce=1<<ie;_[ie]=0,I[ie]=-1;var Q=V[ie];if(Q!==null)for(V[ie]=null,ie=0;ie<Q.length;ie++){var J=Q[ie];J!==null&&(J.lane&=-536870913)}c&=~ce}d!==0&&wl(a,d,0),x!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=x&~(w&~o))}function wl(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-Tn(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|c&4194090}function Jo(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var d=31-Tn(c),y=1<<d;y&o|a[d]&o&&(a[d]|=o),c&=~y}}function es(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Yi(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function vu(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:Q1(a.type))}function tx(a,o){var c=q.p;try{return q.p=a,o()}finally{q.p=c}}var $n=Math.random().toString(36).slice(2),Ut="__reactFiber$"+$n,On="__reactProps$"+$n,Fi="__reactContainer$"+$n,gt="__reactEvents$"+$n,Jr="__reactListeners$"+$n,Vi="__reactHandles$"+$n,ts="__reactResources$"+$n,mn="__reactMarker$"+$n;function Lr(a){delete a[Ut],delete a[On],delete a[gt],delete a[Jr],delete a[Vi]}function pr(a){var o=a[Ut];if(o)return o;for(var c=a.parentNode;c;){if(o=c[Fi]||c[Ut]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=I1(a);a!==null;){if(c=a[Ut])return c;a=I1(a)}return o}a=c,c=a.parentNode}return null}function Bn(a){if(a=a[Ut]||a[Fi]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function zt(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function _n(a){var o=a[ts];return o||(o=a[ts]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ut(a){a[mn]=!0}var ns=new Set,Ki={};function on(a,o){hr(a,o),hr(a+"Capture",o)}function hr(a,o){for(Ki[a]=o,a=0;a<o.length;a++)ns.add(o[a])}var rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},mr={};function $p(a){return fe.call(mr,a)?!0:fe.call(ot,a)?!1:rs.test(a)?mr[a]=!0:(ot[a]=!0,!1)}function Wi(a,o,c){if($p(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function as(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function gr(a,o,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+d)}}var Tl,Ol;function Dn(a){if(Tl===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Tl=o&&o[1]||"",Ol=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tl+a+Ol}var pa=!1;function _l(a,o){if(!a||pa)return"";pa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(J){var Q=J}Reflect.construct(a,[],ce)}else{try{ce.call()}catch(J){Q=J}a.call(ce.prototype)}}else{try{throw Error()}catch(J){Q=J}(ce=a())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),w=x[0],_=x[1];if(w&&_){var I=w.split(`
`),V=_.split(`
`);for(y=d=0;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;for(;y<V.length&&!V[y].includes("DetermineComponentFrameRoot");)y++;if(d===I.length||y===V.length)for(d=I.length-1,y=V.length-1;1<=d&&0<=y&&I[d]!==V[y];)y--;for(;1<=d&&0<=y;d--,y--)if(I[d]!==V[y]){if(d!==1||y!==1)do if(d--,y--,0>y||I[d]!==V[y]){var ie=`
`+I[d].replace(" at new "," at ");return a.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",a.displayName)),ie}while(1<=d&&0<=y);break}}}finally{pa=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Dn(c):""}function bu(a){switch(a.tag){case 26:case 27:case 5:return Dn(a.type);case 16:return Dn("Lazy");case 13:return Dn("Suspense");case 19:return Dn("SuspenseList");case 0:case 15:return _l(a.type,!1);case 11:return _l(a.type.render,!1);case 1:return _l(a.type,!0);case 31:return Dn("Activity");default:return""}}function Dl(a){try{var o="";do o+=bu(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function kt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Xi(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function is(a){var o=Xi(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),d=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,x=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(w){d=""+w,x.call(this,w)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function yr(a){a._valueTracker||(a._valueTracker=is(a))}function os(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return a&&(d=Xi(a)?a.checked?"true":"false":a.value),a=d,a!==c?(o.setValue(a),!0):!1}function Ja(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var ei=/[\n"\\]/g;function gn(a){return a.replace(ei,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ti(a,o,c,d,y,x,w,_){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),o!=null?w==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+kt(o)):a.value!==""+kt(o)&&(a.value=""+kt(o)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),o!=null?ss(a,w,kt(o)):c!=null?ss(a,w,kt(c)):d!=null&&a.removeAttribute("value"),y==null&&x!=null&&(a.defaultChecked=!!x),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+kt(_):a.removeAttribute("name")}function Nl(a,o,c,d,y,x,w,_){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),o!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||o!=null))return;c=c!=null?""+kt(c):"",o=o!=null?""+kt(o):c,_||o===a.value||(a.value=o),a.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=_?a.checked:!!d,a.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function ss(a,o,c){o==="number"&&Ja(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function ni(a,o,c,d){if(a=a.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=o.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&d&&(a[c].defaultSelected=!0)}else{for(c=""+kt(c),o=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,d&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function kl(a,o,c){if(o!=null&&(o=""+kt(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+kt(c):""}function Bp(a,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(ne(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=kt(o),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d)}function Qi(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var Ml=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jl(a,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,c):typeof c!="number"||c===0||Ml.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function Up(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&jl(a,y,d)}else for(var x in o)o.hasOwnProperty(x)&&jl(a,x,o[x])}function xu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Su=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ha(a){return Su.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var ma=null;function ls(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Un=null,zn=null;function Au(a){var o=Bn(a);if(o&&(a=o.stateNode)){var c=a[On]||null;e:switch(a=o.stateNode,o.type){case"input":if(ti(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+gn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==a&&d.form===a.form){var y=d[On]||null;if(!y)throw Error(r(90));ti(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===a.form&&os(d)}break e;case"textarea":kl(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&ni(a,!!c.multiple,o,!1)}}}var cs=!1;function st(a,o,c){if(cs)return a(o,c);cs=!0;try{var d=a(o);return d}finally{if(cs=!1,(Un!==null||zn!==null)&&(gd(),Un&&(o=Un,a=zn,zn=Un=null,Au(o),a)))for(o=0;o<a.length;o++)Au(a[o])}}function $r(a,o){var c=a.stateNode;if(c===null)return null;var d=c[On]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),us=!1;if(yn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){us=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{us=!1}var ga=null,Gt=null,vn=null;function Gp(){if(vn)return vn;var a,o=Gt,c=o.length,d,y="value"in ga?ga.value:ga.textContent,x=y.length;for(a=0;a<c&&o[a]===y[a];a++);var w=c-a;for(d=1;d<=w&&o[c-d]===y[x-d];d++);return vn=y.slice(a,1<d?1-d:void 0)}function fs(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function ps(){return!0}function hs(){return!1}function Nn(a){function o(c,d,y,x,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=x,this.target=w,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(c=a[_],this[_]=c?c(x):x[_]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ps:hs,this.isPropagationStopped=hs,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),o}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=Nn(ri),Zi=h({},ri,{view:0,detail:0}),Hp=Nn(Zi),Il,Oe,Ie,ea=h({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ie&&(Ie&&a.type==="mousemove"?(Il=a.screenX-Ie.screenX,Oe=a.screenY-Ie.screenY):Oe=Il=0,Ie=a),Il)},movementY:function(a){return"movementY"in a?a.movementY:Oe}}),Ji=Nn(ea),Eu=h({},ea,{dataTransfer:0}),ms=Nn(Eu),Cu=h({},Zi,{relatedTarget:0}),gs=Nn(Cu),Pu=h({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),qp=Nn(Pu),Xe=h({},ri,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Yp=Nn(Xe),Fp=h({},ri,{data:0}),ta=Nn(Fp),sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ys={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vp(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=wu[a])?!!o[a]:!1}function eo(){return Vp}var Kp=h({},Zi,{key:function(a){if(a.key){var o=sn[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=fs(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ys[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eo,charCode:function(a){return a.type==="keypress"?fs(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?fs(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Wp=Nn(Kp),Xp=h({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tu=Nn(Xp),Qp=h({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eo}),Zp=Nn(Qp),Jp=h({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),eh=Nn(Jp),th=h({},ea,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),nh=Nn(th),rh=h({},ri,{newState:0,oldState:0}),ah=Nn(rh),ih=[9,13,27,32],Ll=yn&&"CompositionEvent"in window,to=null;yn&&"documentMode"in document&&(to=document.documentMode);var Ou=yn&&"TextEvent"in window&&!to,_u=yn&&(!Ll||to&&8<to&&11>=to),Du=" ",Nu=!1;function ku(a,o){switch(a){case"keyup":return ih.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ya=!1;function oh(a,o){switch(a){case"compositionend":return Mu(o);case"keypress":return o.which!==32?null:(Nu=!0,Du);case"textInput":return a=o.data,a===Du&&Nu?null:a;default:return null}}function sh(a,o){if(ya)return a==="compositionend"||!Ll&&ku(a,o)?(a=Gp(),vn=Gt=ga=null,ya=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return _u&&o.locale!=="ko"?null:o.data;default:return null}}var lh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ju(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!lh[a.type]:o==="textarea"}function Ru(a,o,c,d){Un?zn?zn.push(d):zn=[d]:Un=d,o=Ad(o,"onChange"),0<o.length&&(c=new Rl("onChange","change",null,c,d),a.push({event:c,listeners:o}))}var no=null,ro=null;function ch(a){w1(a,0)}function $(a){var o=zt(a);if(os(o))return a}function Z(a,o){if(a==="change")return o}var ge=!1;if(yn){var he;if(yn){var Se="oninput"in document;if(!Se){var Le=document.createElement("div");Le.setAttribute("oninput","return;"),Se=typeof Le.oninput=="function"}he=Se}else he=!1;ge=he&&(!document.documentMode||9<document.documentMode)}function Me(){no&&(no.detachEvent("onpropertychange",qe),ro=no=null)}function qe(a){if(a.propertyName==="value"&&$(ro)){var o=[];Ru(o,ro,a,ls(a)),st(ch,o)}}function Xn(a,o,c){a==="focusin"?(Me(),no=o,ro=c,no.attachEvent("onpropertychange",qe)):a==="focusout"&&Me()}function va(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return $(ro)}function ao(a,o){if(a==="click")return $(o)}function ba(a,o){if(a==="input"||a==="change")return $(o)}function ai(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Tt=typeof Object.is=="function"?Object.is:ai;function io(a,o){if(Tt(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!fe.call(o,y)||!Tt(a[y],o[y]))return!1}return!0}function vs(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function xa(a,o){var c=vs(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=o&&d>=o)return{node:c,offset:o-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=vs(c)}}function Iu(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Iu(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function $l(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Ja(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=Ja(a.document)}return o}function Sa(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var uh=yn&&"documentMode"in document&&11>=document.documentMode,na=null,Lu=null,Bl=null,dh=!1;function nx(a,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;dh||na==null||na!==Ja(d)||(d=na,"selectionStart"in d&&Sa(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Bl&&io(Bl,d)||(Bl=d,d=Ad(Lu,"onSelect"),0<d.length&&(o=new Rl("onSelect","select",null,o,c),a.push({event:o,listeners:d}),o.target=na)))}function oo(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var bs={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionrun:oo("Transition","TransitionRun"),transitionstart:oo("Transition","TransitionStart"),transitioncancel:oo("Transition","TransitionCancel"),transitionend:oo("Transition","TransitionEnd")},fh={},rx={};yn&&(rx=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function so(a){if(fh[a])return fh[a];if(!bs[a])return a;var o=bs[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in rx)return fh[a]=o[c];return a}var ax=so("animationend"),ix=so("animationiteration"),ox=so("animationstart"),DN=so("transitionrun"),NN=so("transitionstart"),kN=so("transitioncancel"),sx=so("transitionend"),lx=new Map,ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ph.push("scrollEnd");function Br(a,o){lx.set(a,o),on(o,[a])}var cx=new WeakMap;function vr(a,o){if(typeof a=="object"&&a!==null){var c=cx.get(a);return c!==void 0?c:(o={value:a,source:o,stack:Dl(o)},cx.set(a,o),o)}return{value:a,source:o,stack:Dl(o)}}var br=[],xs=0,hh=0;function $u(){for(var a=xs,o=hh=xs=0;o<a;){var c=br[o];br[o++]=null;var d=br[o];br[o++]=null;var y=br[o];br[o++]=null;var x=br[o];if(br[o++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}x!==0&&ux(c,y,x)}}function Bu(a,o,c,d){br[xs++]=a,br[xs++]=o,br[xs++]=c,br[xs++]=d,hh|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function mh(a,o,c,d){return Bu(a,o,c,d),Uu(a)}function Ss(a,o){return Bu(a,null,null,o),Uu(a)}function ux(a,o,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var y=!1,x=a.return;x!==null;)x.childLanes|=c,d=x.alternate,d!==null&&(d.childLanes|=c),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(y=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,y&&o!==null&&(y=31-Tn(c),a=x.hiddenUpdates,d=a[y],d===null?a[y]=[o]:d.push(o),o.lane=c|536870912),x):null}function Uu(a){if(50<uc)throw uc=0,Sm=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var As={};function MN(a,o,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(a,o,c,d){return new MN(a,o,c,d)}function gh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Aa(a,o){var c=a.alternate;return c===null?(c=Qn(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function dx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function zu(a,o,c,d,y,x){var w=0;if(d=a,typeof a=="function")gh(a)&&(w=1);else if(typeof a=="string")w=Rk(a,c,me.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=Qn(31,c,o,y),a.elementType=U,a.lanes=x,a;case S:return lo(c.children,y,x,o);case A:w=8,y|=24;break;case C:return a=Qn(12,c,o,y|2),a.elementType=C,a.lanes=x,a;case N:return a=Qn(13,c,o,y),a.elementType=N,a.lanes=x,a;case D:return a=Qn(19,c,o,y),a.elementType=D,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case P:case O:w=10;break e;case T:w=9;break e;case k:w=11;break e;case M:w=14;break e;case j:w=16,d=null;break e}w=29,c=Error(r(130,a===null?"null":typeof a,"")),d=null}return o=Qn(w,c,o,y),o.elementType=a,o.type=d,o.lanes=x,o}function lo(a,o,c,d){return a=Qn(7,a,d,o),a.lanes=c,a}function yh(a,o,c){return a=Qn(6,a,null,o),a.lanes=c,a}function vh(a,o,c){return o=Qn(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Es=[],Cs=0,Gu=null,Hu=0,xr=[],Sr=0,co=null,Ea=1,Ca="";function uo(a,o){Es[Cs++]=Hu,Es[Cs++]=Gu,Gu=a,Hu=o}function fx(a,o,c){xr[Sr++]=Ea,xr[Sr++]=Ca,xr[Sr++]=co,co=a;var d=Ea;a=Ca;var y=32-Tn(d)-1;d&=~(1<<y),c+=1;var x=32-Tn(o)+y;if(30<x){var w=y-y%5;x=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Ea=1<<32-Tn(o)+y|c<<y|d,Ca=x+a}else Ea=1<<x|c<<y|d,Ca=a}function bh(a){a.return!==null&&(uo(a,1),fx(a,1,0))}function xh(a){for(;a===Gu;)Gu=Es[--Cs],Es[Cs]=null,Hu=Es[--Cs],Es[Cs]=null;for(;a===co;)co=xr[--Sr],xr[Sr]=null,Ca=xr[--Sr],xr[Sr]=null,Ea=xr[--Sr],xr[Sr]=null}var kn=null,Pt=null,We=!1,fo=null,ra=!1,Sh=Error(r(519));function po(a){var o=Error(r(418,""));throw Gl(vr(o,a)),Sh}function px(a){var o=a.stateNode,c=a.type,d=a.memoizedProps;switch(o[Ut]=a,o[On]=d,c){case"dialog":ze("cancel",o),ze("close",o);break;case"iframe":case"object":case"embed":ze("load",o);break;case"video":case"audio":for(c=0;c<fc.length;c++)ze(fc[c],o);break;case"source":ze("error",o);break;case"img":case"image":case"link":ze("error",o),ze("load",o);break;case"details":ze("toggle",o);break;case"input":ze("invalid",o),Nl(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),yr(o);break;case"select":ze("invalid",o);break;case"textarea":ze("invalid",o),Bp(o,d.value,d.defaultValue,d.children),yr(o)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||D1(o.textContent,c)?(d.popover!=null&&(ze("beforetoggle",o),ze("toggle",o)),d.onScroll!=null&&ze("scroll",o),d.onScrollEnd!=null&&ze("scrollend",o),d.onClick!=null&&(o.onclick=Ed),o=!0):o=!1,o||po(a)}function hx(a){for(kn=a.return;kn;)switch(kn.tag){case 5:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:kn=kn.return}}function Ul(a){if(a!==kn)return!1;if(!We)return hx(a),We=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Lm(a.type,a.memoizedProps)),c=!c),c&&Pt&&po(a),hx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){Pt=zr(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}Pt=null}}else o===27?(o=Pt,xi(a.type)?(a=zm,zm=null,Pt=a):Pt=o):Pt=kn?zr(a.stateNode.nextSibling):null;return!0}function zl(){Pt=kn=null,We=!1}function mx(){var a=fo;return a!==null&&(qn===null?qn=a:qn.push.apply(qn,a),fo=null),a}function Gl(a){fo===null?fo=[a]:fo.push(a)}var Ah=F(null),ho=null,Pa=null;function ii(a,o,c){ae(Ah,o._currentValue),o._currentValue=c}function wa(a){a._currentValue=Ah.current,X(Ah)}function Eh(a,o,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===c)break;a=a.return}}function Ch(a,o,c,d){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var x=y.dependencies;if(x!==null){var w=y.child;x=x.firstContext;e:for(;x!==null;){var _=x;x=y;for(var I=0;I<o.length;I++)if(_.context===o[I]){x.lanes|=c,_=x.alternate,_!==null&&(_.lanes|=c),Eh(x.return,c,a),d||(w=null);break e}x=_.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=c,x=w.alternate,x!==null&&(x.lanes|=c),Eh(w,c,a),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===a){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function Hl(a,o,c,d){a=null;for(var y=o,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var _=y.type;Tt(y.pendingProps.value,w.value)||(a!==null?a.push(_):a=[_])}}else if(y===ve.current){if(w=y.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(vc):a=[vc])}y=y.return}a!==null&&Ch(o,a,c,d),o.flags|=262144}function qu(a){for(a=a.firstContext;a!==null;){if(!Tt(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function mo(a){ho=a,Pa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function bn(a){return gx(ho,a)}function Yu(a,o){return ho===null&&mo(a),gx(a,o)}function gx(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Pa===null){if(a===null)throw Error(r(308));Pa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Pa=Pa.next=o;return c}var jN=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},RN=e.unstable_scheduleCallback,IN=e.unstable_NormalPriority,Ht={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new jN,data:new Map,refCount:0}}function ql(a){a.refCount--,a.refCount===0&&RN(IN,function(){a.controller.abort()})}var Yl=null,wh=0,Ps=0,ws=null;function LN(a,o){if(Yl===null){var c=Yl=[];wh=0,Ps=Om(),ws={status:"pending",value:void 0,then:function(d){c.push(d)}}}return wh++,o.then(yx,yx),o}function yx(){if(--wh===0&&Yl!==null){ws!==null&&(ws.status="fulfilled");var a=Yl;Yl=null,Ps=0,ws=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function $N(a,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var vx=L.S;L.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&LN(a,o),vx!==null&&vx(a,o)};var go=F(null);function Th(){var a=go.current;return a!==null?a:dt.pooledCache}function Fu(a,o){o===null?ae(go,go.current):ae(go,o.pool)}function bx(){var a=Th();return a===null?null:{parent:Ht._currentValue,pool:a}}var Fl=Error(r(460)),xx=Error(r(474)),Vu=Error(r(542)),Oh={then:function(){}};function Sx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ku(){}function Ax(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Ku,Ku),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Cx(a),a;default:if(typeof o.status=="string")o.then(Ku,Ku);else{if(a=dt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Cx(a),a}throw Vl=o,Fl}}var Vl=null;function Ex(){if(Vl===null)throw Error(r(459));var a=Vl;return Vl=null,a}function Cx(a){if(a===Fl||a===Vu)throw Error(r(483))}var oi=!1;function _h(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function si(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function li(a,o,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Ze&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=Uu(a),ux(a,null,c),o}return Bu(a,d,o,c),Uu(a)}function Kl(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,Jo(a,c)}}function Nh(a,o){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?y=x=w:x=x.next=w,c=c.next}while(c!==null);x===null?y=x=o:x=x.next=o}else y=x=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var kh=!1;function Wl(){if(kh){var a=ws;if(a!==null)throw a}}function Xl(a,o,c,d){kh=!1;var y=a.updateQueue;oi=!1;var x=y.firstBaseUpdate,w=y.lastBaseUpdate,_=y.shared.pending;if(_!==null){y.shared.pending=null;var I=_,V=I.next;I.next=null,w===null?x=V:w.next=V,w=I;var ie=a.alternate;ie!==null&&(ie=ie.updateQueue,_=ie.lastBaseUpdate,_!==w&&(_===null?ie.firstBaseUpdate=V:_.next=V,ie.lastBaseUpdate=I))}if(x!==null){var ce=y.baseState;w=0,ie=V=I=null,_=x;do{var Q=_.lane&-536870913,J=Q!==_.lane;if(J?(He&Q)===Q:(d&Q)===Q){Q!==0&&Q===Ps&&(kh=!0),ie!==null&&(ie=ie.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Ne=a,_e=_;Q=o;var at=c;switch(_e.tag){case 1:if(Ne=_e.payload,typeof Ne=="function"){ce=Ne.call(at,ce,Q);break e}ce=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=_e.payload,Q=typeof Ne=="function"?Ne.call(at,ce,Q):Ne,Q==null)break e;ce=h({},ce,Q);break e;case 2:oi=!0}}Q=_.callback,Q!==null&&(a.flags|=64,J&&(a.flags|=8192),J=y.callbacks,J===null?y.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ie===null?(V=ie=J,I=ce):ie=ie.next=J,w|=Q;if(_=_.next,_===null){if(_=y.shared.pending,_===null)break;J=_,_=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);ie===null&&(I=ce),y.baseState=I,y.firstBaseUpdate=V,y.lastBaseUpdate=ie,x===null&&(y.shared.lanes=0),gi|=w,a.lanes=w,a.memoizedState=ce}}function Px(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function wx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Px(c[a],o)}var Ts=F(null),Wu=F(0);function Tx(a,o){a=Ma,ae(Wu,a),ae(Ts,o),Ma=a|o.baseLanes}function Mh(){ae(Wu,Ma),ae(Ts,Ts.current)}function jh(){Ma=Wu.current,X(Ts),X(Wu)}var ci=0,$e=null,nt=null,Mt=null,Xu=!1,Os=!1,yo=!1,Qu=0,Ql=0,_s=null,BN=0;function Ot(){throw Error(r(321))}function Rh(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!Tt(a[c],o[c]))return!1;return!0}function Ih(a,o,c,d,y,x){return ci=x,$e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=a===null||a.memoizedState===null?uS:dS,yo=!1,x=c(d,y),yo=!1,Os&&(x=_x(o,c,d,y)),Ox(a),x}function Ox(a){L.H=rd;var o=nt!==null&&nt.next!==null;if(ci=0,Mt=nt=$e=null,Xu=!1,Ql=0,_s=null,o)throw Error(r(300));a===null||Qt||(a=a.dependencies,a!==null&&qu(a)&&(Qt=!0))}function _x(a,o,c,d){$e=a;var y=0;do{if(Os&&(_s=null),Ql=0,Os=!1,25<=y)throw Error(r(301));if(y+=1,Mt=nt=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}L.H=FN,x=o(c,d)}while(Os);return x}function UN(){var a=L.H,o=a.useState()[0];return o=typeof o.then=="function"?Zl(o):o,a=a.useState()[0],(nt!==null?nt.memoizedState:null)!==a&&($e.flags|=1024),o}function Lh(){var a=Qu!==0;return Qu=0,a}function $h(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function Bh(a){if(Xu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Xu=!1}ci=0,Mt=nt=$e=null,Os=!1,Ql=Qu=0,_s=null}function Gn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?$e.memoizedState=Mt=a:Mt=Mt.next=a,Mt}function jt(){if(nt===null){var a=$e.alternate;a=a!==null?a.memoizedState:null}else a=nt.next;var o=Mt===null?$e.memoizedState:Mt.next;if(o!==null)Mt=o,nt=a;else{if(a===null)throw $e.alternate===null?Error(r(467)):Error(r(310));nt=a,a={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Mt===null?$e.memoizedState=Mt=a:Mt=Mt.next=a}return Mt}function Uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(a){var o=Ql;return Ql+=1,_s===null&&(_s=[]),a=Ax(_s,a,o),o=$e,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?uS:dS),a}function Zu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Zl(a);if(a.$$typeof===O)return bn(a)}throw Error(r(438,String(a)))}function zh(a){var o=null,c=$e.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=$e.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Uh(),$e.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),d=0;d<a;d++)c[d]=K;return o.index++,c}function Ta(a,o){return typeof o=="function"?o(a):o}function Ju(a){var o=jt();return Gh(o,nt,a)}function Gh(a,o,c){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=a.baseQueue,x=d.pending;if(x!==null){if(y!==null){var w=y.next;y.next=x.next,x.next=w}o.baseQueue=y=x,d.pending=null}if(x=a.baseState,y===null)a.memoizedState=x;else{o=y.next;var _=w=null,I=null,V=o,ie=!1;do{var ce=V.lane&-536870913;if(ce!==V.lane?(He&ce)===ce:(ci&ce)===ce){var Q=V.revertLane;if(Q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ce===Ps&&(ie=!0);else if((ci&Q)===Q){V=V.next,Q===Ps&&(ie=!0);continue}else ce={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},I===null?(_=I=ce,w=x):I=I.next=ce,$e.lanes|=Q,gi|=Q;ce=V.action,yo&&c(x,ce),x=V.hasEagerState?V.eagerState:c(x,ce)}else Q={lane:ce,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},I===null?(_=I=Q,w=x):I=I.next=Q,$e.lanes|=ce,gi|=ce;V=V.next}while(V!==null&&V!==o);if(I===null?w=x:I.next=_,!Tt(x,a.memoizedState)&&(Qt=!0,ie&&(c=ws,c!==null)))throw c;a.memoizedState=x,a.baseState=w,a.baseQueue=I,d.lastRenderedState=x}return y===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Hh(a){var o=jt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var d=c.dispatch,y=c.pending,x=o.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do x=a(x,w.action),w=w.next;while(w!==y);Tt(x,o.memoizedState)||(Qt=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,d]}function Dx(a,o,c){var d=$e,y=jt(),x=We;if(x){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!Tt((nt||y).memoizedState,c);w&&(y.memoizedState=c,Qt=!0),y=y.queue;var _=Mx.bind(null,d,y,a);if(Jl(2048,8,_,[a]),y.getSnapshot!==o||w||Mt!==null&&Mt.memoizedState.tag&1){if(d.flags|=2048,Ds(9,ed(),kx.bind(null,d,y,c,o),null),dt===null)throw Error(r(349));x||(ci&124)!==0||Nx(d,o,c)}return c}function Nx(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=$e.updateQueue,o===null?(o=Uh(),$e.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function kx(a,o,c,d){o.value=c,o.getSnapshot=d,jx(o)&&Rx(a)}function Mx(a,o,c){return c(function(){jx(o)&&Rx(a)})}function jx(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!Tt(a,c)}catch{return!0}}function Rx(a){var o=Ss(a,2);o!==null&&nr(o,a,2)}function qh(a){var o=Gn();if(typeof a=="function"){var c=a;if(a=c(),yo){Wr(!0);try{c()}finally{Wr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:a},o}function Ix(a,o,c,d){return a.baseState=c,Gh(a,nt,typeof d=="function"?d:Ta)}function zN(a,o,c,d,y){if(nd(a))throw Error(r(485));if(a=o.action,a!==null){var x={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){x.listeners.push(w)}};L.T!==null?c(!0):x.isTransition=!1,d(x),c=o.pending,c===null?(x.next=o.pending=x,Lx(o,x)):(x.next=c.next,o.pending=c.next=x)}}function Lx(a,o){var c=o.action,d=o.payload,y=a.state;if(o.isTransition){var x=L.T,w={};L.T=w;try{var _=c(y,d),I=L.S;I!==null&&I(w,_),$x(a,o,_)}catch(V){Yh(a,o,V)}finally{L.T=x}}else try{x=c(y,d),$x(a,o,x)}catch(V){Yh(a,o,V)}}function $x(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Bx(a,o,d)},function(d){return Yh(a,o,d)}):Bx(a,o,c)}function Bx(a,o,c){o.status="fulfilled",o.value=c,Ux(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,Lx(a,c)))}function Yh(a,o,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,Ux(o),o=o.next;while(o!==d)}a.action=null}function Ux(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function zx(a,o){return o}function Gx(a,o){if(We){var c=dt.formState;if(c!==null){e:{var d=$e;if(We){if(Pt){t:{for(var y=Pt,x=ra;y.nodeType!==8;){if(!x){y=null;break t}if(y=zr(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Pt=zr(y.nextSibling),d=y.data==="F!";break e}}po(d)}d=!1}d&&(o=c[0])}}return c=Gn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zx,lastRenderedState:o},c.queue=d,c=sS.bind(null,$e,d),d.dispatch=c,d=qh(!1),x=Xh.bind(null,$e,!1,d.queue),d=Gn(),y={state:o,dispatch:null,action:a,pending:null},d.queue=y,c=zN.bind(null,$e,y,x,c),y.dispatch=c,d.memoizedState=a,[o,c,!1]}function Hx(a){var o=jt();return qx(o,nt,a)}function qx(a,o,c){if(o=Gh(a,o,zx)[0],a=Ju(Ta)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Zl(o)}catch(w){throw w===Fl?Vu:w}else d=o;o=jt();var y=o.queue,x=y.dispatch;return c!==o.memoizedState&&($e.flags|=2048,Ds(9,ed(),GN.bind(null,y,c),null)),[d,x,a]}function GN(a,o){a.action=o}function Yx(a){var o=jt(),c=nt;if(c!==null)return qx(o,c,a);jt(),o=o.memoizedState,c=jt();var d=c.queue.dispatch;return c.memoizedState=a,[o,d,!1]}function Ds(a,o,c,d){return a={tag:a,create:c,deps:d,inst:o,next:null},o=$e.updateQueue,o===null&&(o=Uh(),$e.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,o.lastEffect=a),a}function ed(){return{destroy:void 0,resource:void 0}}function Fx(){return jt().memoizedState}function td(a,o,c,d){var y=Gn();d=d===void 0?null:d,$e.flags|=a,y.memoizedState=Ds(1|o,ed(),c,d)}function Jl(a,o,c,d){var y=jt();d=d===void 0?null:d;var x=y.memoizedState.inst;nt!==null&&d!==null&&Rh(d,nt.memoizedState.deps)?y.memoizedState=Ds(o,x,c,d):($e.flags|=a,y.memoizedState=Ds(1|o,x,c,d))}function Vx(a,o){td(8390656,8,a,o)}function Kx(a,o){Jl(2048,8,a,o)}function Wx(a,o){return Jl(4,2,a,o)}function Xx(a,o){return Jl(4,4,a,o)}function Qx(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Zx(a,o,c){c=c!=null?c.concat([a]):null,Jl(4,4,Qx.bind(null,o,a),c)}function Fh(){}function Jx(a,o){var c=jt();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&Rh(o,d[1])?d[0]:(c.memoizedState=[a,o],a)}function eS(a,o){var c=jt();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&Rh(o,d[1]))return d[0];if(d=a(),yo){Wr(!0);try{a()}finally{Wr(!1)}}return c.memoizedState=[d,o],d}function Vh(a,o,c){return c===void 0||(ci&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=r1(),$e.lanes|=a,gi|=a,c)}function tS(a,o,c,d){return Tt(c,o)?c:Ts.current!==null?(a=Vh(a,c,d),Tt(a,o)||(Qt=!0),a):(ci&42)===0?(Qt=!0,a.memoizedState=c):(a=r1(),$e.lanes|=a,gi|=a,o)}function nS(a,o,c,d,y){var x=q.p;q.p=x!==0&&8>x?x:8;var w=L.T,_={};L.T=_,Xh(a,!1,o,c);try{var I=y(),V=L.S;if(V!==null&&V(_,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ie=$N(I,d);ec(a,o,ie,tr(a))}else ec(a,o,d,tr(a))}catch(ce){ec(a,o,{then:function(){},status:"rejected",reason:ce},tr())}finally{q.p=x,L.T=w}}function HN(){}function Kh(a,o,c,d){if(a.tag!==5)throw Error(r(476));var y=rS(a).queue;nS(a,y,o,ue,c===null?HN:function(){return aS(a),c(d)})}function rS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:ue},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function aS(a){var o=rS(a).next.queue;ec(a,o,{},tr())}function Wh(){return bn(vc)}function iS(){return jt().memoizedState}function oS(){return jt().memoizedState}function qN(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=tr();a=si(c);var d=li(o,a,c);d!==null&&(nr(d,o,c),Kl(d,o,c)),o={cache:Ph()},a.payload=o;return}o=o.return}}function YN(a,o,c){var d=tr();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},nd(a)?lS(o,c):(c=mh(a,o,c,d),c!==null&&(nr(c,a,d),cS(c,o,d)))}function sS(a,o,c){var d=tr();ec(a,o,c,d)}function ec(a,o,c,d){var y={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(nd(a))lS(o,y);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var w=o.lastRenderedState,_=x(w,c);if(y.hasEagerState=!0,y.eagerState=_,Tt(_,w))return Bu(a,o,y,0),dt===null&&$u(),!1}catch{}finally{}if(c=mh(a,o,y,d),c!==null)return nr(c,a,d),cS(c,o,d),!0}return!1}function Xh(a,o,c,d){if(d={lane:2,revertLane:Om(),action:d,hasEagerState:!1,eagerState:null,next:null},nd(a)){if(o)throw Error(r(479))}else o=mh(a,c,d,2),o!==null&&nr(o,a,2)}function nd(a){var o=a.alternate;return a===$e||o!==null&&o===$e}function lS(a,o){Os=Xu=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function cS(a,o,c){if((c&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,Jo(a,c)}}var rd={readContext:bn,use:Zu,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},uS={readContext:bn,use:Zu,useCallback:function(a,o){return Gn().memoizedState=[a,o===void 0?null:o],a},useContext:bn,useEffect:Vx,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,td(4194308,4,Qx.bind(null,o,a),c)},useLayoutEffect:function(a,o){return td(4194308,4,a,o)},useInsertionEffect:function(a,o){td(4,2,a,o)},useMemo:function(a,o){var c=Gn();o=o===void 0?null:o;var d=a();if(yo){Wr(!0);try{a()}finally{Wr(!1)}}return c.memoizedState=[d,o],d},useReducer:function(a,o,c){var d=Gn();if(c!==void 0){var y=c(o);if(yo){Wr(!0);try{c(o)}finally{Wr(!1)}}}else y=o;return d.memoizedState=d.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},d.queue=a,a=a.dispatch=YN.bind(null,$e,a),[d.memoizedState,a]},useRef:function(a){var o=Gn();return a={current:a},o.memoizedState=a},useState:function(a){a=qh(a);var o=a.queue,c=sS.bind(null,$e,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:Fh,useDeferredValue:function(a,o){var c=Gn();return Vh(c,a,o)},useTransition:function(){var a=qh(!1);return a=nS.bind(null,$e,a.queue,!0,!1),Gn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var d=$e,y=Gn();if(We){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),dt===null)throw Error(r(349));(He&124)!==0||Nx(d,o,c)}y.memoizedState=c;var x={value:c,getSnapshot:o};return y.queue=x,Vx(Mx.bind(null,d,x,a),[a]),d.flags|=2048,Ds(9,ed(),kx.bind(null,d,x,c,o),null),c},useId:function(){var a=Gn(),o=dt.identifierPrefix;if(We){var c=Ca,d=Ea;c=(d&~(1<<32-Tn(d)-1)).toString(32)+c,o="«"+o+"R"+c,c=Qu++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=BN++,o="«"+o+"r"+c.toString(32)+"»";return a.memoizedState=o},useHostTransitionStatus:Wh,useFormState:Gx,useActionState:Gx,useOptimistic:function(a){var o=Gn();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Xh.bind(null,$e,!0,c),c.dispatch=o,[a,o]},useMemoCache:zh,useCacheRefresh:function(){return Gn().memoizedState=qN.bind(null,$e)}},dS={readContext:bn,use:Zu,useCallback:Jx,useContext:bn,useEffect:Kx,useImperativeHandle:Zx,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:eS,useReducer:Ju,useRef:Fx,useState:function(){return Ju(Ta)},useDebugValue:Fh,useDeferredValue:function(a,o){var c=jt();return tS(c,nt.memoizedState,a,o)},useTransition:function(){var a=Ju(Ta)[0],o=jt().memoizedState;return[typeof a=="boolean"?a:Zl(a),o]},useSyncExternalStore:Dx,useId:iS,useHostTransitionStatus:Wh,useFormState:Hx,useActionState:Hx,useOptimistic:function(a,o){var c=jt();return Ix(c,nt,a,o)},useMemoCache:zh,useCacheRefresh:oS},FN={readContext:bn,use:Zu,useCallback:Jx,useContext:bn,useEffect:Kx,useImperativeHandle:Zx,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:eS,useReducer:Hh,useRef:Fx,useState:function(){return Hh(Ta)},useDebugValue:Fh,useDeferredValue:function(a,o){var c=jt();return nt===null?Vh(c,a,o):tS(c,nt.memoizedState,a,o)},useTransition:function(){var a=Hh(Ta)[0],o=jt().memoizedState;return[typeof a=="boolean"?a:Zl(a),o]},useSyncExternalStore:Dx,useId:iS,useHostTransitionStatus:Wh,useFormState:Yx,useActionState:Yx,useOptimistic:function(a,o){var c=jt();return nt!==null?Ix(c,nt,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:zh,useCacheRefresh:oS},Ns=null,tc=0;function ad(a){var o=tc;return tc+=1,Ns===null&&(Ns=[]),Ax(Ns,a,o)}function nc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function id(a,o){throw o.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function fS(a){var o=a._init;return o(a._payload)}function pS(a){function o(G,B){if(a){var Y=G.deletions;Y===null?(G.deletions=[B],G.flags|=16):Y.push(B)}}function c(G,B){if(!a)return null;for(;B!==null;)o(G,B),B=B.sibling;return null}function d(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=Aa(G,B),G.index=0,G.sibling=null,G}function x(G,B,Y){return G.index=Y,a?(Y=G.alternate,Y!==null?(Y=Y.index,Y<B?(G.flags|=67108866,B):Y):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function w(G){return a&&G.alternate===null&&(G.flags|=67108866),G}function _(G,B,Y,se){return B===null||B.tag!==6?(B=yh(Y,G.mode,se),B.return=G,B):(B=y(B,Y),B.return=G,B)}function I(G,B,Y,se){var Ee=Y.type;return Ee===S?ie(G,B,Y.props.children,se,Y.key):B!==null&&(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===j&&fS(Ee)===B.type)?(B=y(B,Y.props),nc(B,Y),B.return=G,B):(B=zu(Y.type,Y.key,Y.props,null,G.mode,se),nc(B,Y),B.return=G,B)}function V(G,B,Y,se){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=vh(Y,G.mode,se),B.return=G,B):(B=y(B,Y.children||[]),B.return=G,B)}function ie(G,B,Y,se,Ee){return B===null||B.tag!==7?(B=lo(Y,G.mode,se,Ee),B.return=G,B):(B=y(B,Y),B.return=G,B)}function ce(G,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=yh(""+B,G.mode,Y),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case g:return Y=zu(B.type,B.key,B.props,null,G.mode,Y),nc(Y,B),Y.return=G,Y;case b:return B=vh(B,G.mode,Y),B.return=G,B;case j:var se=B._init;return B=se(B._payload),ce(G,B,Y)}if(ne(B)||W(B))return B=lo(B,G.mode,Y,null),B.return=G,B;if(typeof B.then=="function")return ce(G,ad(B),Y);if(B.$$typeof===O)return ce(G,Yu(G,B),Y);id(G,B)}return null}function Q(G,B,Y,se){var Ee=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ee!==null?null:_(G,B,""+Y,se);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:return Y.key===Ee?I(G,B,Y,se):null;case b:return Y.key===Ee?V(G,B,Y,se):null;case j:return Ee=Y._init,Y=Ee(Y._payload),Q(G,B,Y,se)}if(ne(Y)||W(Y))return Ee!==null?null:ie(G,B,Y,se,null);if(typeof Y.then=="function")return Q(G,B,ad(Y),se);if(Y.$$typeof===O)return Q(G,B,Yu(G,Y),se);id(G,Y)}return null}function J(G,B,Y,se,Ee){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return G=G.get(Y)||null,_(B,G,""+se,Ee);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case g:return G=G.get(se.key===null?Y:se.key)||null,I(B,G,se,Ee);case b:return G=G.get(se.key===null?Y:se.key)||null,V(B,G,se,Ee);case j:var Be=se._init;return se=Be(se._payload),J(G,B,Y,se,Ee)}if(ne(se)||W(se))return G=G.get(Y)||null,ie(B,G,se,Ee,null);if(typeof se.then=="function")return J(G,B,Y,ad(se),Ee);if(se.$$typeof===O)return J(G,B,Y,Yu(B,se),Ee);id(B,se)}return null}function Ne(G,B,Y,se){for(var Ee=null,Be=null,we=B,De=B=0,Jt=null;we!==null&&De<Y.length;De++){we.index>De?(Jt=we,we=null):Jt=we.sibling;var Ye=Q(G,we,Y[De],se);if(Ye===null){we===null&&(we=Jt);break}a&&we&&Ye.alternate===null&&o(G,we),B=x(Ye,B,De),Be===null?Ee=Ye:Be.sibling=Ye,Be=Ye,we=Jt}if(De===Y.length)return c(G,we),We&&uo(G,De),Ee;if(we===null){for(;De<Y.length;De++)we=ce(G,Y[De],se),we!==null&&(B=x(we,B,De),Be===null?Ee=we:Be.sibling=we,Be=we);return We&&uo(G,De),Ee}for(we=d(we);De<Y.length;De++)Jt=J(we,G,De,Y[De],se),Jt!==null&&(a&&Jt.alternate!==null&&we.delete(Jt.key===null?De:Jt.key),B=x(Jt,B,De),Be===null?Ee=Jt:Be.sibling=Jt,Be=Jt);return a&&we.forEach(function(Pi){return o(G,Pi)}),We&&uo(G,De),Ee}function _e(G,B,Y,se){if(Y==null)throw Error(r(151));for(var Ee=null,Be=null,we=B,De=B=0,Jt=null,Ye=Y.next();we!==null&&!Ye.done;De++,Ye=Y.next()){we.index>De?(Jt=we,we=null):Jt=we.sibling;var Pi=Q(G,we,Ye.value,se);if(Pi===null){we===null&&(we=Jt);break}a&&we&&Pi.alternate===null&&o(G,we),B=x(Pi,B,De),Be===null?Ee=Pi:Be.sibling=Pi,Be=Pi,we=Jt}if(Ye.done)return c(G,we),We&&uo(G,De),Ee;if(we===null){for(;!Ye.done;De++,Ye=Y.next())Ye=ce(G,Ye.value,se),Ye!==null&&(B=x(Ye,B,De),Be===null?Ee=Ye:Be.sibling=Ye,Be=Ye);return We&&uo(G,De),Ee}for(we=d(we);!Ye.done;De++,Ye=Y.next())Ye=J(we,G,De,Ye.value,se),Ye!==null&&(a&&Ye.alternate!==null&&we.delete(Ye.key===null?De:Ye.key),B=x(Ye,B,De),Be===null?Ee=Ye:Be.sibling=Ye,Be=Ye);return a&&we.forEach(function(Vk){return o(G,Vk)}),We&&uo(G,De),Ee}function at(G,B,Y,se){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:e:{for(var Ee=Y.key;B!==null;){if(B.key===Ee){if(Ee=Y.type,Ee===S){if(B.tag===7){c(G,B.sibling),se=y(B,Y.props.children),se.return=G,G=se;break e}}else if(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===j&&fS(Ee)===B.type){c(G,B.sibling),se=y(B,Y.props),nc(se,Y),se.return=G,G=se;break e}c(G,B);break}else o(G,B);B=B.sibling}Y.type===S?(se=lo(Y.props.children,G.mode,se,Y.key),se.return=G,G=se):(se=zu(Y.type,Y.key,Y.props,null,G.mode,se),nc(se,Y),se.return=G,G=se)}return w(G);case b:e:{for(Ee=Y.key;B!==null;){if(B.key===Ee)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){c(G,B.sibling),se=y(B,Y.children||[]),se.return=G,G=se;break e}else{c(G,B);break}else o(G,B);B=B.sibling}se=vh(Y,G.mode,se),se.return=G,G=se}return w(G);case j:return Ee=Y._init,Y=Ee(Y._payload),at(G,B,Y,se)}if(ne(Y))return Ne(G,B,Y,se);if(W(Y)){if(Ee=W(Y),typeof Ee!="function")throw Error(r(150));return Y=Ee.call(Y),_e(G,B,Y,se)}if(typeof Y.then=="function")return at(G,B,ad(Y),se);if(Y.$$typeof===O)return at(G,B,Yu(G,Y),se);id(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(c(G,B.sibling),se=y(B,Y),se.return=G,G=se):(c(G,B),se=yh(Y,G.mode,se),se.return=G,G=se),w(G)):c(G,B)}return function(G,B,Y,se){try{tc=0;var Ee=at(G,B,Y,se);return Ns=null,Ee}catch(we){if(we===Fl||we===Vu)throw we;var Be=Qn(29,we,null,G.mode);return Be.lanes=se,Be.return=G,Be}finally{}}}var ks=pS(!0),hS=pS(!1),Ar=F(null),aa=null;function ui(a){var o=a.alternate;ae(qt,qt.current&1),ae(Ar,a),aa===null&&(o===null||Ts.current!==null||o.memoizedState!==null)&&(aa=a)}function mS(a){if(a.tag===22){if(ae(qt,qt.current),ae(Ar,a),aa===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(aa=a)}}else di()}function di(){ae(qt,qt.current),ae(Ar,Ar.current)}function Oa(a){X(Ar),aa===a&&(aa=null),X(qt)}var qt=F(0);function od(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Um(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Qh(a,o,c,d){o=a.memoizedState,c=c(d,o),c=c==null?o:h({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Zh={enqueueSetState:function(a,o,c){a=a._reactInternals;var d=tr(),y=si(d);y.payload=o,c!=null&&(y.callback=c),o=li(a,y,d),o!==null&&(nr(o,a,d),Kl(o,a,d))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var d=tr(),y=si(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=li(a,y,d),o!==null&&(nr(o,a,d),Kl(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=tr(),d=si(c);d.tag=2,o!=null&&(d.callback=o),o=li(a,d,c),o!==null&&(nr(o,a,c),Kl(o,a,c))}};function gS(a,o,c,d,y,x,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,x,w):o.prototype&&o.prototype.isPureReactComponent?!io(c,d)||!io(y,x):!0}function yS(a,o,c,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==a&&Zh.enqueueReplaceState(o,o.state,null)}function vo(a,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(a=a.defaultProps){c===o&&(c=h({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}var sd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function vS(a){sd(a)}function bS(a){console.error(a)}function xS(a){sd(a)}function ld(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function SS(a,o,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Jh(a,o,c){return c=si(c),c.tag=3,c.payload={element:null},c.callback=function(){ld(a,o)},c}function AS(a){return a=si(a),a.tag=3,a}function ES(a,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var x=d.value;a.payload=function(){return y(x)},a.callback=function(){SS(o,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){SS(o,c,d),typeof y!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var _=d.stack;this.componentDidCatch(d.value,{componentStack:_!==null?_:""})})}function VN(a,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&Hl(o,c,y,!0),c=Ar.current,c!==null){switch(c.tag){case 13:return aa===null?Em():c.alternate===null&&wt===0&&(wt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===Oh?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Pm(a,d,y)),!1;case 22:return c.flags|=65536,d===Oh?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Pm(a,d,y)),!1}throw Error(r(435,c.tag))}return Pm(a,d,y),Em(),!1}if(We)return o=Ar.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==Sh&&(a=Error(r(422),{cause:d}),Gl(vr(a,c)))):(d!==Sh&&(o=Error(r(423),{cause:d}),Gl(vr(o,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,d=vr(d,c),y=Jh(a.stateNode,d,y),Nh(a,y),wt!==4&&(wt=2)),!1;var x=Error(r(520),{cause:d});if(x=vr(x,c),cc===null?cc=[x]:cc.push(x),wt!==4&&(wt=2),o===null)return!0;d=vr(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Jh(c.stateNode,d,a),Nh(c,a),!1;case 1:if(o=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(yi===null||!yi.has(x))))return c.flags|=65536,y&=-y,c.lanes|=y,y=AS(y),ES(y,a,c,d),Nh(c,y),!1}c=c.return}while(c!==null);return!1}var CS=Error(r(461)),Qt=!1;function ln(a,o,c,d){o.child=a===null?hS(o,null,c,d):ks(o,a.child,c,d)}function PS(a,o,c,d,y){c=c.render;var x=o.ref;if("ref"in d){var w={};for(var _ in d)_!=="ref"&&(w[_]=d[_])}else w=d;return mo(o),d=Ih(a,o,c,w,x,y),_=Lh(),a!==null&&!Qt?($h(a,o,y),_a(a,o,y)):(We&&_&&bh(o),o.flags|=1,ln(a,o,d,y),o.child)}function wS(a,o,c,d,y){if(a===null){var x=c.type;return typeof x=="function"&&!gh(x)&&x.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=x,TS(a,o,x,d,y)):(a=zu(c.type,null,d,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(x=a.child,!sm(a,y)){var w=x.memoizedProps;if(c=c.compare,c=c!==null?c:io,c(w,d)&&a.ref===o.ref)return _a(a,o,y)}return o.flags|=1,a=Aa(x,d),a.ref=o.ref,a.return=o,o.child=a}function TS(a,o,c,d,y){if(a!==null){var x=a.memoizedProps;if(io(x,d)&&a.ref===o.ref)if(Qt=!1,o.pendingProps=d=x,sm(a,y))(a.flags&131072)!==0&&(Qt=!0);else return o.lanes=a.lanes,_a(a,o,y)}return em(a,o,c,d,y)}function OS(a,o,c){var d=o.pendingProps,y=d.children,x=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=x!==null?x.baseLanes|c:c,a!==null){for(y=o.child=a.child,x=0;y!==null;)x=x|y.lanes|y.childLanes,y=y.sibling;o.childLanes=x&~d}else o.childLanes=0,o.child=null;return _S(a,o,d,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Fu(o,x!==null?x.cachePool:null),x!==null?Tx(o,x):Mh(),mS(o);else return o.lanes=o.childLanes=536870912,_S(a,o,x!==null?x.baseLanes|c:c,c)}else x!==null?(Fu(o,x.cachePool),Tx(o,x),di(),o.memoizedState=null):(a!==null&&Fu(o,null),Mh(),di());return ln(a,o,y,c),o.child}function _S(a,o,c,d){var y=Th();return y=y===null?null:{parent:Ht._currentValue,pool:y},o.memoizedState={baseLanes:c,cachePool:y},a!==null&&Fu(o,null),Mh(),mS(o),a!==null&&Hl(a,o,d,!0),null}function cd(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function em(a,o,c,d,y){return mo(o),c=Ih(a,o,c,d,void 0,y),d=Lh(),a!==null&&!Qt?($h(a,o,y),_a(a,o,y)):(We&&d&&bh(o),o.flags|=1,ln(a,o,c,y),o.child)}function DS(a,o,c,d,y,x){return mo(o),o.updateQueue=null,c=_x(o,d,c,y),Ox(a),d=Lh(),a!==null&&!Qt?($h(a,o,x),_a(a,o,x)):(We&&d&&bh(o),o.flags|=1,ln(a,o,c,x),o.child)}function NS(a,o,c,d,y){if(mo(o),o.stateNode===null){var x=As,w=c.contextType;typeof w=="object"&&w!==null&&(x=bn(w)),x=new c(d,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Zh,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=d,x.state=o.memoizedState,x.refs={},_h(o),w=c.contextType,x.context=typeof w=="object"&&w!==null?bn(w):As,x.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Qh(o,c,w,d),x.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(w=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),w!==x.state&&Zh.enqueueReplaceState(x,x.state,null),Xl(o,d,x,y),Wl(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){x=o.stateNode;var _=o.memoizedProps,I=vo(c,_);x.props=I;var V=x.context,ie=c.contextType;w=As,typeof ie=="object"&&ie!==null&&(w=bn(ie));var ce=c.getDerivedStateFromProps;ie=typeof ce=="function"||typeof x.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,ie||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_||V!==w)&&yS(o,x,d,w),oi=!1;var Q=o.memoizedState;x.state=Q,Xl(o,d,x,y),Wl(),V=o.memoizedState,_||Q!==V||oi?(typeof ce=="function"&&(Qh(o,c,ce,d),V=o.memoizedState),(I=oi||gS(o,c,I,d,Q,V,w))?(ie||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=V),x.props=d,x.state=V,x.context=w,d=I):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{x=o.stateNode,Dh(a,o),w=o.memoizedProps,ie=vo(c,w),x.props=ie,ce=o.pendingProps,Q=x.context,V=c.contextType,I=As,typeof V=="object"&&V!==null&&(I=bn(V)),_=c.getDerivedStateFromProps,(V=typeof _=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==ce||Q!==I)&&yS(o,x,d,I),oi=!1,Q=o.memoizedState,x.state=Q,Xl(o,d,x,y),Wl();var J=o.memoizedState;w!==ce||Q!==J||oi||a!==null&&a.dependencies!==null&&qu(a.dependencies)?(typeof _=="function"&&(Qh(o,c,_,d),J=o.memoizedState),(ie=oi||gS(o,c,ie,d,Q,J,I)||a!==null&&a.dependencies!==null&&qu(a.dependencies))?(V||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,J,I),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,J,I)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||w===a.memoizedProps&&Q===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&Q===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=J),x.props=d,x.state=J,x.context=I,d=ie):(typeof x.componentDidUpdate!="function"||w===a.memoizedProps&&Q===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&Q===a.memoizedState||(o.flags|=1024),d=!1)}return x=d,cd(a,o),d=(o.flags&128)!==0,x||d?(x=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,a!==null&&d?(o.child=ks(o,a.child,null,y),o.child=ks(o,null,c,y)):ln(a,o,c,y),o.memoizedState=x.state,a=o.child):a=_a(a,o,y),a}function kS(a,o,c,d){return zl(),o.flags|=256,ln(a,o,c,d),o.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nm(a){return{baseLanes:a,cachePool:bx()}}function rm(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=Er),a}function MS(a,o,c){var d=o.pendingProps,y=!1,x=(o.flags&128)!==0,w;if((w=x)||(w=a!==null&&a.memoizedState===null?!1:(qt.current&2)!==0),w&&(y=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,a===null){if(We){if(y?ui(o):di(),We){var _=Pt,I;if(I=_){e:{for(I=_,_=ra;I.nodeType!==8;){if(!_){_=null;break e}if(I=zr(I.nextSibling),I===null){_=null;break e}}_=I}_!==null?(o.memoizedState={dehydrated:_,treeContext:co!==null?{id:Ea,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},I=Qn(18,null,null,0),I.stateNode=_,I.return=o,o.child=I,kn=o,Pt=null,I=!0):I=!1}I||po(o)}if(_=o.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Um(_)?o.lanes=32:o.lanes=536870912,null;Oa(o)}return _=d.children,d=d.fallback,y?(di(),y=o.mode,_=ud({mode:"hidden",children:_},y),d=lo(d,y,c,null),_.return=o,d.return=o,_.sibling=d,o.child=_,y=o.child,y.memoizedState=nm(c),y.childLanes=rm(a,w,c),o.memoizedState=tm,d):(ui(o),am(o,_))}if(I=a.memoizedState,I!==null&&(_=I.dehydrated,_!==null)){if(x)o.flags&256?(ui(o),o.flags&=-257,o=im(a,o,c)):o.memoizedState!==null?(di(),o.child=a.child,o.flags|=128,o=null):(di(),y=d.fallback,_=o.mode,d=ud({mode:"visible",children:d.children},_),y=lo(y,_,c,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,ks(o,a.child,null,c),d=o.child,d.memoizedState=nm(c),d.childLanes=rm(a,w,c),o.memoizedState=tm,o=y);else if(ui(o),Um(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var V=w.dgst;w=V,d=Error(r(419)),d.stack="",d.digest=w,Gl({value:d,source:null,stack:null}),o=im(a,o,c)}else if(Qt||Hl(a,o,c,!1),w=(c&a.childLanes)!==0,Qt||w){if(w=dt,w!==null&&(d=c&-c,d=(d&42)!==0?1:es(d),d=(d&(w.suspendedLanes|c))!==0?0:d,d!==0&&d!==I.retryLane))throw I.retryLane=d,Ss(a,d),nr(w,a,d),CS;_.data==="$?"||Em(),o=im(a,o,c)}else _.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=I.treeContext,Pt=zr(_.nextSibling),kn=o,We=!0,fo=null,ra=!1,a!==null&&(xr[Sr++]=Ea,xr[Sr++]=Ca,xr[Sr++]=co,Ea=a.id,Ca=a.overflow,co=o),o=am(o,d.children),o.flags|=4096);return o}return y?(di(),y=d.fallback,_=o.mode,I=a.child,V=I.sibling,d=Aa(I,{mode:"hidden",children:d.children}),d.subtreeFlags=I.subtreeFlags&65011712,V!==null?y=Aa(V,y):(y=lo(y,_,c,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,_=a.child.memoizedState,_===null?_=nm(c):(I=_.cachePool,I!==null?(V=Ht._currentValue,I=I.parent!==V?{parent:V,pool:V}:I):I=bx(),_={baseLanes:_.baseLanes|c,cachePool:I}),y.memoizedState=_,y.childLanes=rm(a,w,c),o.memoizedState=tm,d):(ui(o),c=a.child,a=c.sibling,c=Aa(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,a!==null&&(w=o.deletions,w===null?(o.deletions=[a],o.flags|=16):w.push(a)),o.child=c,o.memoizedState=null,c)}function am(a,o){return o=ud({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function ud(a,o){return a=Qn(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function im(a,o,c){return ks(o,a.child,null,c),a=am(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function jS(a,o,c){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),Eh(a.return,o,c)}function om(a,o,c,d,y){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=c,x.tailMode=y)}function RS(a,o,c){var d=o.pendingProps,y=d.revealOrder,x=d.tail;if(ln(a,o,d.children,c),d=qt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&jS(a,c,o);else if(a.tag===19)jS(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(ae(qt,d),y){case"forwards":for(c=o.child,y=null;c!==null;)a=c.alternate,a!==null&&od(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),om(o,!1,y,c,x);break;case"backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&od(a)===null){o.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}om(o,!0,c,null,x);break;case"together":om(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function _a(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),gi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(Hl(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Aa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Aa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function sm(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&qu(a)))}function KN(a,o,c){switch(o.tag){case 3:pe(o,o.stateNode.containerInfo),ii(o,Ht,a.memoizedState.cache),zl();break;case 27:case 5:de(o);break;case 4:pe(o,o.stateNode.containerInfo);break;case 10:ii(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(ui(o),o.flags|=128,null):(c&o.child.childLanes)!==0?MS(a,o,c):(ui(o),a=_a(a,o,c),a!==null?a.sibling:null);ui(o);break;case 19:var y=(a.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(Hl(a,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return RS(a,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(qt,qt.current),d)break;return null;case 22:case 23:return o.lanes=0,OS(a,o,c);case 24:ii(o,Ht,a.memoizedState.cache)}return _a(a,o,c)}function IS(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)Qt=!0;else{if(!sm(a,c)&&(o.flags&128)===0)return Qt=!1,KN(a,o,c);Qt=(a.flags&131072)!==0}else Qt=!1,We&&(o.flags&1048576)!==0&&fx(o,Hu,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var d=o.elementType,y=d._init;if(d=y(d._payload),o.type=d,typeof d=="function")gh(d)?(a=vo(d,a),o.tag=1,o=NS(null,o,d,a,c)):(o.tag=0,o=em(null,o,d,a,c));else{if(d!=null){if(y=d.$$typeof,y===k){o.tag=11,o=PS(null,o,d,a,c);break e}else if(y===M){o.tag=14,o=wS(null,o,d,a,c);break e}}throw o=le(d)||d,Error(r(306,o,""))}}return o;case 0:return em(a,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=vo(d,o.pendingProps),NS(a,o,d,y,c);case 3:e:{if(pe(o,o.stateNode.containerInfo),a===null)throw Error(r(387));d=o.pendingProps;var x=o.memoizedState;y=x.element,Dh(a,o),Xl(o,d,null,c);var w=o.memoizedState;if(d=w.cache,ii(o,Ht,d),d!==x.cache&&Ch(o,[Ht],c,!0),Wl(),d=w.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=kS(a,o,d,c);break e}else if(d!==y){y=vr(Error(r(424)),o),Gl(y),o=kS(a,o,d,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Pt=zr(a.firstChild),kn=o,We=!0,fo=null,ra=!0,c=hS(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(zl(),d===y){o=_a(a,o,c);break e}ln(a,o,d,c)}o=o.child}return o;case 26:return cd(a,o),a===null?(c=U1(o.type,null,o.pendingProps,null))?o.memoizedState=c:We||(c=o.type,a=o.pendingProps,d=Cd(te.current).createElement(c),d[Ut]=o,d[On]=a,un(d,c,a),ut(d),o.stateNode=d):o.memoizedState=U1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return de(o),a===null&&We&&(d=o.stateNode=L1(o.type,o.pendingProps,te.current),kn=o,ra=!0,y=Pt,xi(o.type)?(zm=y,Pt=zr(d.firstChild)):Pt=y),ln(a,o,o.pendingProps.children,c),cd(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&We&&((y=d=Pt)&&(d=Ak(d,o.type,o.pendingProps,ra),d!==null?(o.stateNode=d,kn=o,Pt=zr(d.firstChild),ra=!1,y=!0):y=!1),y||po(o)),de(o),y=o.type,x=o.pendingProps,w=a!==null?a.memoizedProps:null,d=x.children,Lm(y,x)?d=null:w!==null&&Lm(y,w)&&(o.flags|=32),o.memoizedState!==null&&(y=Ih(a,o,UN,null,null,c),vc._currentValue=y),cd(a,o),ln(a,o,d,c),o.child;case 6:return a===null&&We&&((a=c=Pt)&&(c=Ek(c,o.pendingProps,ra),c!==null?(o.stateNode=c,kn=o,Pt=null,a=!0):a=!1),a||po(o)),null;case 13:return MS(a,o,c);case 4:return pe(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=ks(o,null,d,c):ln(a,o,d,c),o.child;case 11:return PS(a,o,o.type,o.pendingProps,c);case 7:return ln(a,o,o.pendingProps,c),o.child;case 8:return ln(a,o,o.pendingProps.children,c),o.child;case 12:return ln(a,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,ii(o,o.type,d.value),ln(a,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,mo(o),y=bn(y),d=d(y),o.flags|=1,ln(a,o,d,c),o.child;case 14:return wS(a,o,o.type,o.pendingProps,c);case 15:return TS(a,o,o.type,o.pendingProps,c);case 19:return RS(a,o,c);case 31:return d=o.pendingProps,c=o.mode,d={mode:d.mode,children:d.children},a===null?(c=ud(d,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Aa(a.child,d),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return OS(a,o,c);case 24:return mo(o),d=bn(Ht),a===null?(y=Th(),y===null&&(y=dt,x=Ph(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=c),y=x),o.memoizedState={parent:d,cache:y},_h(o),ii(o,Ht,y)):((a.lanes&c)!==0&&(Dh(a,o),Xl(o,null,null,c),Wl()),y=a.memoizedState,x=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),ii(o,Ht,d)):(d=x.cache,ii(o,Ht,d),d!==y.cache&&Ch(o,[Ht],c,!0))),ln(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Da(a){a.flags|=4}function LS(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Y1(o)){if(o=Ar.current,o!==null&&((He&4194048)===He?aa!==null:(He&62914560)!==He&&(He&536870912)===0||o!==aa))throw Vl=Oh,xx;a.flags|=8192}}function dd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Zr():536870912,a.lanes|=o,Is|=o)}function rc(a,o){if(!We)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function At(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(o)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=d,a.childLanes=c,o}function WN(a,o,c){var d=o.pendingProps;switch(xh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return At(o),null;case 3:return c=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),wa(Ht),oe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Ul(o)?Da(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,mx())),At(o),null;case 26:return c=o.memoizedState,a===null?(Da(o),c!==null?(At(o),LS(o,c)):(At(o),o.flags&=-16777217)):c?c!==a.memoizedState?(Da(o),At(o),LS(o,c)):(At(o),o.flags&=-16777217):(a.memoizedProps!==d&&Da(o),At(o),o.flags&=-16777217),null;case 27:be(o),c=te.current;var y=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Da(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return At(o),null}a=me.current,Ul(o)?px(o):(a=L1(y,d,c),o.stateNode=a,Da(o))}return At(o),null;case 5:if(be(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Da(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return At(o),null}if(a=me.current,Ul(o))px(o);else{switch(y=Cd(te.current),a){case 1:a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=y.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?y.createElement(c,{is:d.is}):y.createElement(c)}}a[Ut]=o,a[On]=d;e:for(y=o.child;y!==null;){if(y.tag===5||y.tag===6)a.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}o.stateNode=a;e:switch(un(a,c,d),c){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Da(o)}}return At(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Da(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(a=te.current,Ul(o)){if(a=o.stateNode,c=o.memoizedProps,d=null,y=kn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}a[Ut]=o,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||D1(a.nodeValue,c)),a||po(o)}else a=Cd(a).createTextNode(d),a[Ut]=o,o.stateNode=a}return At(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=Ul(o),d!==null&&d.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Ut]=o}else zl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),y=!1}else y=mx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Oa(o),o):(Oa(o),null)}if(Oa(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=d!==null,a=a!==null&&a.memoizedState!==null,c){d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var x=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==y&&(d.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),dd(o,o.updateQueue),At(o),null;case 4:return oe(),a===null&&km(o.stateNode.containerInfo),At(o),null;case 10:return wa(o.type),At(o),null;case 19:if(X(qt),y=o.memoizedState,y===null)return At(o),null;if(d=(o.flags&128)!==0,x=y.rendering,x===null)if(d)rc(y,!1);else{if(wt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(x=od(a),x!==null){for(o.flags|=128,rc(y,!1),a=x.updateQueue,o.updateQueue=a,dd(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)dx(c,a),c=c.sibling;return ae(qt,qt.current&1|2),o.child}a=a.sibling}y.tail!==null&&pt()>hd&&(o.flags|=128,d=!0,rc(y,!1),o.lanes=4194304)}else{if(!d)if(a=od(x),a!==null){if(o.flags|=128,d=!0,a=a.updateQueue,o.updateQueue=a,dd(o,a),rc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!We)return At(o),null}else 2*pt()-y.renderingStartTime>hd&&c!==536870912&&(o.flags|=128,d=!0,rc(y,!1),o.lanes=4194304);y.isBackwards?(x.sibling=o.child,o.child=x):(a=y.last,a!==null?a.sibling=x:o.child=x,y.last=x)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=pt(),o.sibling=null,a=qt.current,ae(qt,d?a&1|2:a&1),o):(At(o),null);case 22:case 23:return Oa(o),jh(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),c=o.updateQueue,c!==null&&dd(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),a!==null&&X(go),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),wa(Ht),At(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function XN(a,o){switch(xh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return wa(Ht),oe(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return be(o),null;case 13:if(Oa(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));zl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return X(qt),null;case 4:return oe(),null;case 10:return wa(o.type),null;case 22:case 23:return Oa(o),jh(),a!==null&&X(go),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return wa(Ht),null;case 25:return null;default:return null}}function $S(a,o){switch(xh(o),o.tag){case 3:wa(Ht),oe();break;case 26:case 27:case 5:be(o);break;case 4:oe();break;case 13:Oa(o);break;case 19:X(qt);break;case 10:wa(o.type);break;case 22:case 23:Oa(o),jh(),a!==null&&X(go);break;case 24:wa(Ht)}}function ac(a,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&a)===a){d=void 0;var x=c.create,w=c.inst;d=x(),w.destroy=d}c=c.next}while(c!==y)}}catch(_){lt(o,o.return,_)}}function fi(a,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var x=y.next;d=x;do{if((d.tag&a)===a){var w=d.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,y=o;var I=c,V=_;try{V()}catch(ie){lt(y,I,ie)}}}d=d.next}while(d!==x)}}catch(ie){lt(o,o.return,ie)}}function BS(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{wx(o,c)}catch(d){lt(a,a.return,d)}}}function US(a,o,c){c.props=vo(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){lt(a,o,d)}}function ic(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(y){lt(a,o,y)}}function ia(a,o){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){lt(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){lt(a,o,y)}else c.current=null}function zS(a){var o=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){lt(a,a.return,y)}}function lm(a,o,c){try{var d=a.stateNode;yk(d,a.type,c,o),d[On]=o}catch(y){lt(a,a.return,y)}}function GS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&xi(a.type)||a.tag===4}function cm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||GS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&xi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function um(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Ed));else if(d!==4&&(d===27&&xi(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(um(a,o,c),a=a.sibling;a!==null;)um(a,o,c),a=a.sibling}function fd(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(d!==4&&(d===27&&xi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(fd(a,o,c),a=a.sibling;a!==null;)fd(a,o,c),a=a.sibling}function HS(a){var o=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);un(o,d,c),o[Ut]=a,o[On]=c}catch(x){lt(a,a.return,x)}}var Na=!1,_t=!1,dm=!1,qS=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function QN(a,o){if(a=a.containerInfo,Rm=Dd,a=$l(a),Sa(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var w=0,_=-1,I=-1,V=0,ie=0,ce=a,Q=null;t:for(;;){for(var J;ce!==c||y!==0&&ce.nodeType!==3||(_=w+y),ce!==x||d!==0&&ce.nodeType!==3||(I=w+d),ce.nodeType===3&&(w+=ce.nodeValue.length),(J=ce.firstChild)!==null;)Q=ce,ce=J;for(;;){if(ce===a)break t;if(Q===c&&++V===y&&(_=w),Q===x&&++ie===d&&(I=w),(J=ce.nextSibling)!==null)break;ce=Q,Q=ce.parentNode}ce=J}c=_===-1||I===-1?null:{start:_,end:I}}else c=null}c=c||{start:0,end:0}}else c=null;for(Im={focusedElem:a,selectionRange:c},Dd=!1,Zt=o;Zt!==null;)if(o=Zt,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,Zt=a;else for(;Zt!==null;){switch(o=Zt,x=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,c=o,y=x.memoizedProps,x=x.memoizedState,d=c.stateNode;try{var Ne=vo(c.type,y,c.elementType===c.type);a=d.getSnapshotBeforeUpdate(Ne,x),d.__reactInternalSnapshotBeforeUpdate=a}catch(_e){lt(c,c.return,_e)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)Bm(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Bm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Zt=a;break}Zt=o.return}}function YS(a,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:pi(a,c),d&4&&ac(5,c);break;case 1:if(pi(a,c),d&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(w){lt(c,c.return,w)}else{var y=vo(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(w){lt(c,c.return,w)}}d&64&&BS(c),d&512&&ic(c,c.return);break;case 3:if(pi(a,c),d&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{wx(a,o)}catch(w){lt(c,c.return,w)}}break;case 27:o===null&&d&4&&HS(c);case 26:case 5:pi(a,c),o===null&&d&4&&zS(c),d&512&&ic(c,c.return);break;case 12:pi(a,c);break;case 13:pi(a,c),d&4&&KS(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=ok.bind(null,c),Ck(a,c))));break;case 22:if(d=c.memoizedState!==null||Na,!d){o=o!==null&&o.memoizedState!==null||_t,y=Na;var x=_t;Na=d,(_t=o)&&!x?hi(a,c,(c.subtreeFlags&8772)!==0):pi(a,c),Na=y,_t=x}break;case 30:break;default:pi(a,c)}}function FS(a){var o=a.alternate;o!==null&&(a.alternate=null,FS(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Lr(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var yt=null,Hn=!1;function ka(a,o,c){for(c=c.child;c!==null;)VS(a,o,c),c=c.sibling}function VS(a,o,c){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Hi,c)}catch{}switch(c.tag){case 26:_t||ia(c,o),ka(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:_t||ia(c,o);var d=yt,y=Hn;xi(c.type)&&(yt=c.stateNode,Hn=!1),ka(a,o,c),hc(c.stateNode),yt=d,Hn=y;break;case 5:_t||ia(c,o);case 6:if(d=yt,y=Hn,yt=null,ka(a,o,c),yt=d,Hn=y,yt!==null)if(Hn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(c.stateNode)}catch(x){lt(c,o,x)}else try{yt.removeChild(c.stateNode)}catch(x){lt(c,o,x)}break;case 18:yt!==null&&(Hn?(a=yt,R1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Ac(a)):R1(yt,c.stateNode));break;case 4:d=yt,y=Hn,yt=c.stateNode.containerInfo,Hn=!0,ka(a,o,c),yt=d,Hn=y;break;case 0:case 11:case 14:case 15:_t||fi(2,c,o),_t||fi(4,c,o),ka(a,o,c);break;case 1:_t||(ia(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&US(c,o,d)),ka(a,o,c);break;case 21:ka(a,o,c);break;case 22:_t=(d=_t)||c.memoizedState!==null,ka(a,o,c),_t=d;break;default:ka(a,o,c)}}function KS(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ac(a)}catch(c){lt(o,o.return,c)}}function ZN(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new qS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new qS),o;default:throw Error(r(435,a.tag))}}function fm(a,o){var c=ZN(a);o.forEach(function(d){var y=sk.bind(null,a,d);c.has(d)||(c.add(d),d.then(y,y))})}function Zn(a,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],x=a,w=o,_=w;e:for(;_!==null;){switch(_.tag){case 27:if(xi(_.type)){yt=_.stateNode,Hn=!1;break e}break;case 5:yt=_.stateNode,Hn=!1;break e;case 3:case 4:yt=_.stateNode.containerInfo,Hn=!0;break e}_=_.return}if(yt===null)throw Error(r(160));VS(x,w,y),yt=null,Hn=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)WS(o,a),o=o.sibling}var Ur=null;function WS(a,o){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Zn(o,a),Jn(a),d&4&&(fi(3,a,a.return),ac(3,a),fi(5,a,a.return));break;case 1:Zn(o,a),Jn(a),d&512&&(_t||c===null||ia(c,c.return)),d&64&&Na&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=Ur;if(Zn(o,a),Jn(a),d&512&&(_t||c===null||ia(c,c.return)),d&4){var x=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":x=y.getElementsByTagName("title")[0],(!x||x[mn]||x[Ut]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(d),y.head.insertBefore(x,y.querySelector("head > title"))),un(x,d,c),x[Ut]=a,ut(x),d=x;break e;case"link":var w=H1("link","href",y).get(d+(c.href||""));if(w){for(var _=0;_<w.length;_++)if(x=w[_],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(_,1);break t}}x=y.createElement(d),un(x,d,c),y.head.appendChild(x);break;case"meta":if(w=H1("meta","content",y).get(d+(c.content||""))){for(_=0;_<w.length;_++)if(x=w[_],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(_,1);break t}}x=y.createElement(d),un(x,d,c),y.head.appendChild(x);break;default:throw Error(r(468,d))}x[Ut]=a,ut(x),d=x}a.stateNode=d}else q1(y,a.type,a.stateNode);else a.stateNode=G1(y,d,a.memoizedProps);else x!==d?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,d===null?q1(y,a.type,a.stateNode):G1(y,d,a.memoizedProps)):d===null&&a.stateNode!==null&&lm(a,a.memoizedProps,c.memoizedProps)}break;case 27:Zn(o,a),Jn(a),d&512&&(_t||c===null||ia(c,c.return)),c!==null&&d&4&&lm(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Zn(o,a),Jn(a),d&512&&(_t||c===null||ia(c,c.return)),a.flags&32){y=a.stateNode;try{Qi(y,"")}catch(J){lt(a,a.return,J)}}d&4&&a.stateNode!=null&&(y=a.memoizedProps,lm(a,y,c!==null?c.memoizedProps:y)),d&1024&&(dm=!0);break;case 6:if(Zn(o,a),Jn(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(J){lt(a,a.return,J)}}break;case 3:if(Td=null,y=Ur,Ur=Pd(o.containerInfo),Zn(o,a),Ur=y,Jn(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ac(o.containerInfo)}catch(J){lt(a,a.return,J)}dm&&(dm=!1,XS(a));break;case 4:d=Ur,Ur=Pd(a.stateNode.containerInfo),Zn(o,a),Jn(a),Ur=d;break;case 12:Zn(o,a),Jn(a);break;case 13:Zn(o,a),Jn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(vm=pt()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,fm(a,d)));break;case 22:y=a.memoizedState!==null;var I=c!==null&&c.memoizedState!==null,V=Na,ie=_t;if(Na=V||y,_t=ie||I,Zn(o,a),_t=ie,Na=V,Jn(a),d&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||I||Na||_t||bo(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){I=c=o;try{if(x=I.stateNode,y)w=x.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=I.stateNode;var ce=I.memoizedProps.style,Q=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;_.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(J){lt(I,I.return,J)}}}else if(o.tag===6){if(c===null){I=o;try{I.stateNode.nodeValue=y?"":I.memoizedProps}catch(J){lt(I,I.return,J)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,fm(a,c))));break;case 19:Zn(o,a),Jn(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,fm(a,d)));break;case 30:break;case 21:break;default:Zn(o,a),Jn(a)}}function Jn(a){var o=a.flags;if(o&2){try{for(var c,d=a.return;d!==null;){if(GS(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,x=cm(a);fd(a,x,y);break;case 5:var w=c.stateNode;c.flags&32&&(Qi(w,""),c.flags&=-33);var _=cm(a);fd(a,_,w);break;case 3:case 4:var I=c.stateNode.containerInfo,V=cm(a);um(a,V,I);break;default:throw Error(r(161))}}catch(ie){lt(a,a.return,ie)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function XS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;XS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function pi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)YS(a,o.alternate,o),o=o.sibling}function bo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:fi(4,o,o.return),bo(o);break;case 1:ia(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&US(o,o.return,c),bo(o);break;case 27:hc(o.stateNode);case 26:case 5:ia(o,o.return),bo(o);break;case 22:o.memoizedState===null&&bo(o);break;case 30:bo(o);break;default:bo(o)}a=a.sibling}}function hi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=a,x=o,w=x.flags;switch(x.tag){case 0:case 11:case 15:hi(y,x,c),ac(4,x);break;case 1:if(hi(y,x,c),d=x,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(V){lt(d,d.return,V)}if(d=x,y=d.updateQueue,y!==null){var _=d.stateNode;try{var I=y.shared.hiddenCallbacks;if(I!==null)for(y.shared.hiddenCallbacks=null,y=0;y<I.length;y++)Px(I[y],_)}catch(V){lt(d,d.return,V)}}c&&w&64&&BS(x),ic(x,x.return);break;case 27:HS(x);case 26:case 5:hi(y,x,c),c&&d===null&&w&4&&zS(x),ic(x,x.return);break;case 12:hi(y,x,c);break;case 13:hi(y,x,c),c&&w&4&&KS(y,x);break;case 22:x.memoizedState===null&&hi(y,x,c),ic(x,x.return);break;case 30:break;default:hi(y,x,c)}o=o.sibling}}function pm(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&ql(c))}function hm(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ql(a))}function oa(a,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)QS(a,o,c,d),o=o.sibling}function QS(a,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:oa(a,o,c,d),y&2048&&ac(9,o);break;case 1:oa(a,o,c,d);break;case 3:oa(a,o,c,d),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ql(a)));break;case 12:if(y&2048){oa(a,o,c,d),a=o.stateNode;try{var x=o.memoizedProps,w=x.id,_=x.onPostCommit;typeof _=="function"&&_(w,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(I){lt(o,o.return,I)}}else oa(a,o,c,d);break;case 13:oa(a,o,c,d);break;case 23:break;case 22:x=o.stateNode,w=o.alternate,o.memoizedState!==null?x._visibility&2?oa(a,o,c,d):oc(a,o):x._visibility&2?oa(a,o,c,d):(x._visibility|=2,Ms(a,o,c,d,(o.subtreeFlags&10256)!==0)),y&2048&&pm(w,o);break;case 24:oa(a,o,c,d),y&2048&&hm(o.alternate,o);break;default:oa(a,o,c,d)}}function Ms(a,o,c,d,y){for(y=y&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var x=a,w=o,_=c,I=d,V=w.flags;switch(w.tag){case 0:case 11:case 15:Ms(x,w,_,I,y),ac(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?Ms(x,w,_,I,y):oc(x,w):(ie._visibility|=2,Ms(x,w,_,I,y)),y&&V&2048&&pm(w.alternate,w);break;case 24:Ms(x,w,_,I,y),y&&V&2048&&hm(w.alternate,w);break;default:Ms(x,w,_,I,y)}o=o.sibling}}function oc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,d=o,y=d.flags;switch(d.tag){case 22:oc(c,d),y&2048&&pm(d.alternate,d);break;case 24:oc(c,d),y&2048&&hm(d.alternate,d);break;default:oc(c,d)}o=o.sibling}}var sc=8192;function js(a){if(a.subtreeFlags&sc)for(a=a.child;a!==null;)ZS(a),a=a.sibling}function ZS(a){switch(a.tag){case 26:js(a),a.flags&sc&&a.memoizedState!==null&&Lk(Ur,a.memoizedState,a.memoizedProps);break;case 5:js(a);break;case 3:case 4:var o=Ur;Ur=Pd(a.stateNode.containerInfo),js(a),Ur=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=sc,sc=16777216,js(a),sc=o):js(a));break;default:js(a)}}function JS(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function lc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Zt=d,t1(d,a)}JS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)e1(a),a=a.sibling}function e1(a){switch(a.tag){case 0:case 11:case 15:lc(a),a.flags&2048&&fi(9,a,a.return);break;case 3:lc(a);break;case 12:lc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,pd(a)):lc(a);break;default:lc(a)}}function pd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Zt=d,t1(d,a)}JS(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:fi(8,o,o.return),pd(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,pd(o));break;default:pd(o)}a=a.sibling}}function t1(a,o){for(;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:fi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ql(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Zt=d;else e:for(c=a;Zt!==null;){d=Zt;var y=d.sibling,x=d.return;if(FS(d),d===c){Zt=null;break e}if(y!==null){y.return=x,Zt=y;break e}Zt=x}}}var JN={getCacheForType:function(a){var o=bn(Ht),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},ek=typeof WeakMap=="function"?WeakMap:Map,Ze=0,dt=null,Ue=null,He=0,Je=0,er=null,mi=!1,Rs=!1,mm=!1,Ma=0,wt=0,gi=0,xo=0,gm=0,Er=0,Is=0,cc=null,qn=null,ym=!1,vm=0,hd=1/0,md=null,yi=null,cn=0,vi=null,Ls=null,$s=0,bm=0,xm=null,n1=null,uc=0,Sm=null;function tr(){if((Ze&2)!==0&&He!==0)return He&-He;if(L.T!==null){var a=Ps;return a!==0?a:Om()}return vu()}function r1(){Er===0&&(Er=(He&536870912)===0||We?gu():536870912);var a=Ar.current;return a!==null&&(a.flags|=32),Er}function nr(a,o,c){(a===dt&&(Je===2||Je===9)||a.cancelPendingCommit!==null)&&(Bs(a,0),bi(a,He,Er,!1)),Za(a,c),((Ze&2)===0||a!==dt)&&(a===dt&&((Ze&2)===0&&(xo|=c),wt===4&&bi(a,He,Er,!1)),sa(a))}function a1(a,o,c){if((Ze&6)!==0)throw Error(r(327));var d=!c&&(o&124)===0&&(o&a.expiredLanes)===0||Qa(a,o),y=d?rk(a,o):Cm(a,o,!0),x=d;do{if(y===0){Rs&&!d&&bi(a,o,0,!1);break}else{if(c=a.current.alternate,x&&!tk(c)){y=Cm(a,o,!1),x=!1;continue}if(y===2){if(x=o,a.errorRecoveryDisabledLanes&x)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var _=a;y=cc;var I=_.current.memoizedState.isDehydrated;if(I&&(Bs(_,w).flags|=256),w=Cm(_,w,!1),w!==2){if(mm&&!I){_.errorRecoveryDisabledLanes|=x,xo|=x,y=4;break e}x=qn,qn=y,x!==null&&(qn===null?qn=x:qn.push.apply(qn,x))}y=w}if(x=!1,y!==2)continue}}if(y===1){Bs(a,0),bi(a,o,0,!0);break}e:{switch(d=a,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:bi(d,o,Er,!mi);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=vm+300-pt(),10<y)){if(bi(d,o,Er,!mi),Zo(d,0,!0)!==0)break e;d.timeoutHandle=M1(i1.bind(null,d,c,qn,md,ym,o,Er,xo,Is,mi,x,2,-0,0),y);break e}i1(d,c,qn,md,ym,o,Er,xo,Is,mi,x,0,-0,0)}}break}while(!0);sa(a)}function i1(a,o,c,d,y,x,w,_,I,V,ie,ce,Q,J){if(a.timeoutHandle=-1,ce=o.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(yc={stylesheets:null,count:0,unsuspend:Ik},ZS(o),ce=$k(),ce!==null)){a.cancelPendingCommit=ce(f1.bind(null,a,o,x,c,d,y,w,_,I,ie,1,Q,J)),bi(a,x,w,!V);return}f1(a,o,x,c,d,y,w,_,I)}function tk(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],x=y.getSnapshot;y=y.value;try{if(!Tt(x(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function bi(a,o,c,d){o&=~gm,o&=~xo,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var y=o;0<y;){var x=31-Tn(y),w=1<<x;d[x]=-1,y&=~w}c!==0&&wl(a,c,o)}function gd(){return(Ze&6)===0?(dc(0),!1):!0}function Am(){if(Ue!==null){if(Je===0)var a=Ue.return;else a=Ue,Pa=ho=null,Bh(a),Ns=null,tc=0,a=Ue;for(;a!==null;)$S(a.alternate,a),a=a.return;Ue=null}}function Bs(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,bk(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Am(),dt=a,Ue=c=Aa(a.current,null),He=o,Je=0,er=null,mi=!1,Rs=Qa(a,o),mm=!1,Is=Er=gm=xo=gi=wt=0,qn=cc=null,ym=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var y=31-Tn(d),x=1<<y;o|=a[y],d&=~x}return Ma=o,$u(),c}function o1(a,o){$e=null,L.H=rd,o===Fl||o===Vu?(o=Ex(),Je=3):o===xx?(o=Ex(),Je=4):Je=o===CS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,er=o,Ue===null&&(wt=1,ld(a,vr(o,a.current)))}function s1(){var a=L.H;return L.H=rd,a===null?rd:a}function l1(){var a=L.A;return L.A=JN,a}function Em(){wt=4,mi||(He&4194048)!==He&&Ar.current!==null||(Rs=!0),(gi&134217727)===0&&(xo&134217727)===0||dt===null||bi(dt,He,Er,!1)}function Cm(a,o,c){var d=Ze;Ze|=2;var y=s1(),x=l1();(dt!==a||He!==o)&&(md=null,Bs(a,o)),o=!1;var w=wt;e:do try{if(Je!==0&&Ue!==null){var _=Ue,I=er;switch(Je){case 8:Am(),w=6;break e;case 3:case 2:case 9:case 6:Ar.current===null&&(o=!0);var V=Je;if(Je=0,er=null,Us(a,_,I,V),c&&Rs){w=0;break e}break;default:V=Je,Je=0,er=null,Us(a,_,I,V)}}nk(),w=wt;break}catch(ie){o1(a,ie)}while(!0);return o&&a.shellSuspendCounter++,Pa=ho=null,Ze=d,L.H=y,L.A=x,Ue===null&&(dt=null,He=0,$u()),w}function nk(){for(;Ue!==null;)c1(Ue)}function rk(a,o){var c=Ze;Ze|=2;var d=s1(),y=l1();dt!==a||He!==o?(md=null,hd=pt()+500,Bs(a,o)):Rs=Qa(a,o);e:do try{if(Je!==0&&Ue!==null){o=Ue;var x=er;t:switch(Je){case 1:Je=0,er=null,Us(a,o,x,1);break;case 2:case 9:if(Sx(x)){Je=0,er=null,u1(o);break}o=function(){Je!==2&&Je!==9||dt!==a||(Je=7),sa(a)},x.then(o,o);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Sx(x)?(Je=0,er=null,u1(o)):(Je=0,er=null,Us(a,o,x,7));break;case 5:var w=null;switch(Ue.tag){case 26:w=Ue.memoizedState;case 5:case 27:var _=Ue;if(!w||Y1(w)){Je=0,er=null;var I=_.sibling;if(I!==null)Ue=I;else{var V=_.return;V!==null?(Ue=V,yd(V)):Ue=null}break t}}Je=0,er=null,Us(a,o,x,5);break;case 6:Je=0,er=null,Us(a,o,x,6);break;case 8:Am(),wt=6;break e;default:throw Error(r(462))}}ak();break}catch(ie){o1(a,ie)}while(!0);return Pa=ho=null,L.H=d,L.A=y,Ze=c,Ue!==null?0:(dt=null,He=0,$u(),wt)}function ak(){for(;Ue!==null&&!Bt();)c1(Ue)}function c1(a){var o=IS(a.alternate,a,Ma);a.memoizedProps=a.pendingProps,o===null?yd(a):Ue=o}function u1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=DS(c,o,o.pendingProps,o.type,void 0,He);break;case 11:o=DS(c,o,o.pendingProps,o.type.render,o.ref,He);break;case 5:Bh(o);default:$S(c,o),o=Ue=dx(o,Ma),o=IS(c,o,Ma)}a.memoizedProps=a.pendingProps,o===null?yd(a):Ue=o}function Us(a,o,c,d){Pa=ho=null,Bh(o),Ns=null,tc=0;var y=o.return;try{if(VN(a,y,o,c,He)){wt=1,ld(a,vr(c,a.current)),Ue=null;return}}catch(x){if(y!==null)throw Ue=y,x;wt=1,ld(a,vr(c,a.current)),Ue=null;return}o.flags&32768?(We||d===1?a=!0:Rs||(He&536870912)!==0?a=!1:(mi=a=!0,(d===2||d===9||d===3||d===6)&&(d=Ar.current,d!==null&&d.tag===13&&(d.flags|=16384))),d1(o,a)):yd(o)}function yd(a){var o=a;do{if((o.flags&32768)!==0){d1(o,mi);return}a=o.return;var c=WN(o.alternate,o,Ma);if(c!==null){Ue=c;return}if(o=o.sibling,o!==null){Ue=o;return}Ue=o=a}while(o!==null);wt===0&&(wt=5)}function d1(a,o){do{var c=XN(a.alternate,a);if(c!==null){c.flags&=32767,Ue=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){Ue=a;return}Ue=a=c}while(a!==null);wt=6,Ue=null}function f1(a,o,c,d,y,x,w,_,I){a.cancelPendingCommit=null;do vd();while(cn!==0);if((Ze&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(x=o.lanes|o.childLanes,x|=hh,yu(a,c,x,w,_,I),a===dt&&(Ue=dt=null,He=0),Ls=o,vi=a,$s=c,bm=x,xm=y,n1=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,lk(Gi,function(){return y1(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=L.T,L.T=null,y=q.p,q.p=2,w=Ze,Ze|=4;try{QN(a,o,c)}finally{Ze=w,q.p=y,L.T=d}}cn=1,p1(),h1(),m1()}}function p1(){if(cn===1){cn=0;var a=vi,o=Ls,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var d=q.p;q.p=2;var y=Ze;Ze|=4;try{WS(o,a);var x=Im,w=$l(a.containerInfo),_=x.focusedElem,I=x.selectionRange;if(w!==_&&_&&_.ownerDocument&&Iu(_.ownerDocument.documentElement,_)){if(I!==null&&Sa(_)){var V=I.start,ie=I.end;if(ie===void 0&&(ie=V),"selectionStart"in _)_.selectionStart=V,_.selectionEnd=Math.min(ie,_.value.length);else{var ce=_.ownerDocument||document,Q=ce&&ce.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),Ne=_.textContent.length,_e=Math.min(I.start,Ne),at=I.end===void 0?_e:Math.min(I.end,Ne);!J.extend&&_e>at&&(w=at,at=_e,_e=w);var G=xa(_,_e),B=xa(_,at);if(G&&B&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==B.node||J.focusOffset!==B.offset)){var Y=ce.createRange();Y.setStart(G.node,G.offset),J.removeAllRanges(),_e>at?(J.addRange(Y),J.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),J.addRange(Y))}}}}for(ce=[],J=_;J=J.parentNode;)J.nodeType===1&&ce.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ce.length;_++){var se=ce[_];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Dd=!!Rm,Im=Rm=null}finally{Ze=y,q.p=d,L.T=c}}a.current=o,cn=2}}function h1(){if(cn===2){cn=0;var a=vi,o=Ls,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var d=q.p;q.p=2;var y=Ze;Ze|=4;try{YS(a,o.alternate,o)}finally{Ze=y,q.p=d,L.T=c}}cn=3}}function m1(){if(cn===4||cn===3){cn=0,mt();var a=vi,o=Ls,c=$s,d=n1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?cn=5:(cn=0,Ls=vi=null,g1(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(yi=null),Yi(c),o=o.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Hi,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=L.T,y=q.p,q.p=2,L.T=null;try{for(var x=a.onRecoverableError,w=0;w<d.length;w++){var _=d[w];x(_.value,{componentStack:_.stack})}}finally{L.T=o,q.p=y}}($s&3)!==0&&vd(),sa(a),y=a.pendingLanes,(c&4194090)!==0&&(y&42)!==0?a===Sm?uc++:(uc=0,Sm=a):uc=0,dc(0)}}function g1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,ql(o)))}function vd(a){return p1(),h1(),m1(),y1()}function y1(){if(cn!==5)return!1;var a=vi,o=bm;bm=0;var c=Yi($s),d=L.T,y=q.p;try{q.p=32>c?32:c,L.T=null,c=xm,xm=null;var x=vi,w=$s;if(cn=0,Ls=vi=null,$s=0,(Ze&6)!==0)throw Error(r(331));var _=Ze;if(Ze|=4,e1(x.current),QS(x,x.current,w,c),Ze=_,dc(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Hi,x)}catch{}return!0}finally{q.p=y,L.T=d,g1(a,o)}}function v1(a,o,c){o=vr(c,o),o=Jh(a.stateNode,o,2),a=li(a,o,2),a!==null&&(Za(a,2),sa(a))}function lt(a,o,c){if(a.tag===3)v1(a,a,c);else for(;o!==null;){if(o.tag===3){v1(o,a,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(yi===null||!yi.has(d))){a=vr(c,a),c=AS(2),d=li(o,c,2),d!==null&&(ES(c,d,o,a),Za(d,2),sa(d));break}}o=o.return}}function Pm(a,o,c){var d=a.pingCache;if(d===null){d=a.pingCache=new ek;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(mm=!0,y.add(c),a=ik.bind(null,a,o,c),o.then(a,a))}function ik(a,o,c){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,dt===a&&(He&c)===c&&(wt===4||wt===3&&(He&62914560)===He&&300>pt()-vm?(Ze&2)===0&&Bs(a,0):gm|=c,Is===He&&(Is=0)),sa(a)}function b1(a,o){o===0&&(o=Zr()),a=Ss(a,o),a!==null&&(Za(a,o),sa(a))}function ok(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),b1(a,c)}function sk(a,o){var c=0;switch(a.tag){case 13:var d=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),b1(a,c)}function lk(a,o){return Qe(a,o)}var bd=null,zs=null,wm=!1,xd=!1,Tm=!1,So=0;function sa(a){a!==zs&&a.next===null&&(zs===null?bd=zs=a:zs=zs.next=a),xd=!0,wm||(wm=!0,uk())}function dc(a,o){if(!Tm&&xd){Tm=!0;do for(var c=!1,d=bd;d!==null;){if(a!==0){var y=d.pendingLanes;if(y===0)var x=0;else{var w=d.suspendedLanes,_=d.pingedLanes;x=(1<<31-Tn(42|a)+1)-1,x&=y&~(w&~_),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,E1(d,x))}else x=He,x=Zo(d,d===dt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||Qa(d,x)||(c=!0,E1(d,x));d=d.next}while(c);Tm=!1}}function ck(){x1()}function x1(){xd=wm=!1;var a=0;So!==0&&(vk()&&(a=So),So=0);for(var o=pt(),c=null,d=bd;d!==null;){var y=d.next,x=S1(d,o);x===0?(d.next=null,c===null?bd=y:c.next=y,y===null&&(zs=c)):(c=d,(a!==0||(x&3)!==0)&&(xd=!0)),d=y}dc(a)}function S1(a,o){for(var c=a.suspendedLanes,d=a.pingedLanes,y=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var w=31-Tn(x),_=1<<w,I=y[w];I===-1?((_&c)===0||(_&d)!==0)&&(y[w]=Lp(_,o)):I<=o&&(a.expiredLanes|=_),x&=~_}if(o=dt,c=He,c=Zo(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===o&&(Je===2||Je===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ge(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Qa(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(d!==null&&Ge(d),Yi(c)){case 2:case 8:c=Wo;break;case 32:c=Gi;break;case 268435456:c=Cl;break;default:c=Gi}return d=A1.bind(null,a),c=Qe(c,d),a.callbackPriority=o,a.callbackNode=c,o}return d!==null&&d!==null&&Ge(d),a.callbackPriority=2,a.callbackNode=null,2}function A1(a,o){if(cn!==0&&cn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(vd()&&a.callbackNode!==c)return null;var d=He;return d=Zo(a,a===dt?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(a1(a,d,o),S1(a,pt()),a.callbackNode!=null&&a.callbackNode===c?A1.bind(null,a):null)}function E1(a,o){if(vd())return null;a1(a,o,!0)}function uk(){xk(function(){(Ze&6)!==0?Qe(Kr,ck):x1()})}function Om(){return So===0&&(So=gu()),So}function C1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ha(""+a)}function P1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function dk(a,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var x=C1((y[On]||null).action),w=d.submitter;w&&(o=(o=w[On]||null)?C1(o.formAction):w.getAttribute("formAction"),o!==null&&(x=o,w=null));var _=new Rl("action","action",null,d,y);a.push({event:_,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(So!==0){var I=w?P1(y,w):new FormData(y);Kh(c,{pending:!0,data:I,method:y.method,action:x},null,I)}}else typeof x=="function"&&(_.preventDefault(),I=w?P1(y,w):new FormData(y),Kh(c,{pending:!0,data:I,method:y.method,action:x},x,I))},currentTarget:y}]})}}for(var _m=0;_m<ph.length;_m++){var Dm=ph[_m],fk=Dm.toLowerCase(),pk=Dm[0].toUpperCase()+Dm.slice(1);Br(fk,"on"+pk)}Br(ax,"onAnimationEnd"),Br(ix,"onAnimationIteration"),Br(ox,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(DN,"onTransitionRun"),Br(NN,"onTransitionStart"),Br(kN,"onTransitionCancel"),Br(sx,"onTransitionEnd"),hr("onMouseEnter",["mouseout","mouseover"]),hr("onMouseLeave",["mouseout","mouseover"]),hr("onPointerEnter",["pointerout","pointerover"]),hr("onPointerLeave",["pointerout","pointerover"]),on("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),on("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),on("onBeforeInput",["compositionend","keypress","textInput","paste"]),on("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),on("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),on("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fc));function w1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],y=d.event;d=d.listeners;e:{var x=void 0;if(o)for(var w=d.length-1;0<=w;w--){var _=d[w],I=_.instance,V=_.currentTarget;if(_=_.listener,I!==x&&y.isPropagationStopped())break e;x=_,y.currentTarget=V;try{x(y)}catch(ie){sd(ie)}y.currentTarget=null,x=I}else for(w=0;w<d.length;w++){if(_=d[w],I=_.instance,V=_.currentTarget,_=_.listener,I!==x&&y.isPropagationStopped())break e;x=_,y.currentTarget=V;try{x(y)}catch(ie){sd(ie)}y.currentTarget=null,x=I}}}}function ze(a,o){var c=o[gt];c===void 0&&(c=o[gt]=new Set);var d=a+"__bubble";c.has(d)||(T1(o,a,2,!1),c.add(d))}function Nm(a,o,c){var d=0;o&&(d|=4),T1(c,a,d,o)}var Sd="_reactListening"+Math.random().toString(36).slice(2);function km(a){if(!a[Sd]){a[Sd]=!0,ns.forEach(function(c){c!=="selectionchange"&&(hk.has(c)||Nm(c,!1,a),Nm(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Sd]||(o[Sd]=!0,Nm("selectionchange",!1,o))}}function T1(a,o,c,d){switch(Q1(o)){case 2:var y=zk;break;case 8:y=Gk;break;default:y=Fm}c=y.bind(null,o,c,a),y=void 0,!us||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?a.addEventListener(o,c,{capture:!0,passive:y}):a.addEventListener(o,c,!0):y!==void 0?a.addEventListener(o,c,{passive:y}):a.addEventListener(o,c,!1)}function Mm(a,o,c,d,y){var x=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var _=d.stateNode.containerInfo;if(_===y)break;if(w===4)for(w=d.return;w!==null;){var I=w.tag;if((I===3||I===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;_!==null;){if(w=pr(_),w===null)return;if(I=w.tag,I===5||I===6||I===26||I===27){d=x=w;continue e}_=_.parentNode}}d=d.return}st(function(){var V=x,ie=ls(c),ce=[];e:{var Q=lx.get(a);if(Q!==void 0){var J=Rl,Ne=a;switch(a){case"keypress":if(fs(c)===0)break e;case"keydown":case"keyup":J=Wp;break;case"focusin":Ne="focus",J=gs;break;case"focusout":Ne="blur",J=gs;break;case"beforeblur":case"afterblur":J=gs;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ms;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Zp;break;case ax:case ix:case ox:J=qp;break;case sx:J=eh;break;case"scroll":case"scrollend":J=Hp;break;case"wheel":J=nh;break;case"copy":case"cut":case"paste":J=Yp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Tu;break;case"toggle":case"beforetoggle":J=ah}var _e=(o&4)!==0,at=!_e&&(a==="scroll"||a==="scrollend"),G=_e?Q!==null?Q+"Capture":null:Q;_e=[];for(var B=V,Y;B!==null;){var se=B;if(Y=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Y===null||G===null||(se=$r(B,G),se!=null&&_e.push(pc(B,se,Y))),at)break;B=B.return}0<_e.length&&(Q=new J(Q,Ne,null,c,ie),ce.push({event:Q,listeners:_e}))}}if((o&7)===0){e:{if(Q=a==="mouseover"||a==="pointerover",J=a==="mouseout"||a==="pointerout",Q&&c!==ma&&(Ne=c.relatedTarget||c.fromElement)&&(pr(Ne)||Ne[Fi]))break e;if((J||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(Ne=c.relatedTarget||c.toElement,J=V,Ne=Ne?pr(Ne):null,Ne!==null&&(at=s(Ne),_e=Ne.tag,Ne!==at||_e!==5&&_e!==27&&_e!==6)&&(Ne=null)):(J=null,Ne=V),J!==Ne)){if(_e=Ji,se="onMouseLeave",G="onMouseEnter",B="mouse",(a==="pointerout"||a==="pointerover")&&(_e=Tu,se="onPointerLeave",G="onPointerEnter",B="pointer"),at=J==null?Q:zt(J),Y=Ne==null?Q:zt(Ne),Q=new _e(se,B+"leave",J,c,ie),Q.target=at,Q.relatedTarget=Y,se=null,pr(ie)===V&&(_e=new _e(G,B+"enter",Ne,c,ie),_e.target=Y,_e.relatedTarget=at,se=_e),at=se,J&&Ne)t:{for(_e=J,G=Ne,B=0,Y=_e;Y;Y=Gs(Y))B++;for(Y=0,se=G;se;se=Gs(se))Y++;for(;0<B-Y;)_e=Gs(_e),B--;for(;0<Y-B;)G=Gs(G),Y--;for(;B--;){if(_e===G||G!==null&&_e===G.alternate)break t;_e=Gs(_e),G=Gs(G)}_e=null}else _e=null;J!==null&&O1(ce,Q,J,_e,!1),Ne!==null&&at!==null&&O1(ce,at,Ne,_e,!0)}}e:{if(Q=V?zt(V):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var Ee=Z;else if(ju(Q))if(ge)Ee=ba;else{Ee=va;var Be=Xn}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?V&&xu(V.elementType)&&(Ee=Z):Ee=ao;if(Ee&&(Ee=Ee(a,V))){Ru(ce,Ee,c,ie);break e}Be&&Be(a,Q,V),a==="focusout"&&V&&Q.type==="number"&&V.memoizedProps.value!=null&&ss(Q,"number",Q.value)}switch(Be=V?zt(V):window,a){case"focusin":(ju(Be)||Be.contentEditable==="true")&&(na=Be,Lu=V,Bl=null);break;case"focusout":Bl=Lu=na=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,nx(ce,c,ie);break;case"selectionchange":if(uh)break;case"keydown":case"keyup":nx(ce,c,ie)}var we;if(Ll)e:{switch(a){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else ya?ku(a,c)&&(De="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(De="onCompositionStart");De&&(_u&&c.locale!=="ko"&&(ya||De!=="onCompositionStart"?De==="onCompositionEnd"&&ya&&(we=Gp()):(ga=ie,Gt="value"in ga?ga.value:ga.textContent,ya=!0)),Be=Ad(V,De),0<Be.length&&(De=new ta(De,a,null,c,ie),ce.push({event:De,listeners:Be}),we?De.data=we:(we=Mu(c),we!==null&&(De.data=we)))),(we=Ou?oh(a,c):sh(a,c))&&(De=Ad(V,"onBeforeInput"),0<De.length&&(Be=new ta("onBeforeInput","beforeinput",null,c,ie),ce.push({event:Be,listeners:De}),Be.data=we)),dk(ce,a,V,c,ie)}w1(ce,o)})}function pc(a,o,c){return{instance:a,listener:o,currentTarget:c}}function Ad(a,o){for(var c=o+"Capture",d=[];a!==null;){var y=a,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=$r(a,c),y!=null&&d.unshift(pc(a,y,x)),y=$r(a,o),y!=null&&d.push(pc(a,y,x))),a.tag===3)return d;a=a.return}return[]}function Gs(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function O1(a,o,c,d,y){for(var x=o._reactName,w=[];c!==null&&c!==d;){var _=c,I=_.alternate,V=_.stateNode;if(_=_.tag,I!==null&&I===d)break;_!==5&&_!==26&&_!==27||V===null||(I=V,y?(V=$r(c,x),V!=null&&w.unshift(pc(c,V,I))):y||(V=$r(c,x),V!=null&&w.push(pc(c,V,I)))),c=c.return}w.length!==0&&a.push({event:o,listeners:w})}var mk=/\r\n?/g,gk=/\u0000|\uFFFD/g;function _1(a){return(typeof a=="string"?a:""+a).replace(mk,`
`).replace(gk,"")}function D1(a,o){return o=_1(o),_1(a)===o}function Ed(){}function rt(a,o,c,d,y,x){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Qi(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Qi(a,""+d);break;case"className":as(a,"class",d);break;case"tabIndex":as(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":as(a,c,d);break;case"style":Up(a,d,x);break;case"data":if(o!=="object"){as(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=ha(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(o!=="input"&&rt(a,o,"name",y.name,y,null),rt(a,o,"formEncType",y.formEncType,y,null),rt(a,o,"formMethod",y.formMethod,y,null),rt(a,o,"formTarget",y.formTarget,y,null)):(rt(a,o,"encType",y.encType,y,null),rt(a,o,"method",y.method,y,null),rt(a,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=ha(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=Ed);break;case"onScroll":d!=null&&ze("scroll",a);break;case"onScrollEnd":d!=null&&ze("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=ha(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":ze("beforetoggle",a),ze("toggle",a),Wi(a,"popover",d);break;case"xlinkActuate":gr(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":gr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":gr(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":gr(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":gr(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":gr(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":gr(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":gr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":gr(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Wi(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=zp.get(c)||c,Wi(a,c,d))}}function jm(a,o,c,d,y,x){switch(c){case"style":Up(a,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof d=="string"?Qi(a,d):(typeof d=="number"||typeof d=="bigint")&&Qi(a,""+d);break;case"onScroll":d!=null&&ze("scroll",a);break;case"onScrollEnd":d!=null&&ze("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Ed);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ki.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),x=a[On]||null,x=x!=null?x[c]:null,typeof x=="function"&&a.removeEventListener(o,x,y),typeof d=="function")){typeof x!="function"&&x!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,d,y);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):Wi(a,c,d)}}}function un(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",a),ze("load",a);var d=!1,y=!1,x;for(x in c)if(c.hasOwnProperty(x)){var w=c[x];if(w!=null)switch(x){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:rt(a,o,x,w,c,null)}}y&&rt(a,o,"srcSet",c.srcSet,c,null),d&&rt(a,o,"src",c.src,c,null);return;case"input":ze("invalid",a);var _=x=w=y=null,I=null,V=null;for(d in c)if(c.hasOwnProperty(d)){var ie=c[d];if(ie!=null)switch(d){case"name":y=ie;break;case"type":w=ie;break;case"checked":I=ie;break;case"defaultChecked":V=ie;break;case"value":x=ie;break;case"defaultValue":_=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:rt(a,o,d,ie,c,null)}}Nl(a,x,_,I,V,w,y,!1),yr(a);return;case"select":ze("invalid",a),d=w=x=null;for(y in c)if(c.hasOwnProperty(y)&&(_=c[y],_!=null))switch(y){case"value":x=_;break;case"defaultValue":w=_;break;case"multiple":d=_;default:rt(a,o,y,_,c,null)}o=x,c=w,a.multiple=!!d,o!=null?ni(a,!!d,o,!1):c!=null&&ni(a,!!d,c,!0);return;case"textarea":ze("invalid",a),x=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(_=c[w],_!=null))switch(w){case"value":d=_;break;case"defaultValue":y=_;break;case"children":x=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:rt(a,o,w,_,c,null)}Bp(a,d,y,x),yr(a);return;case"option":for(I in c)if(c.hasOwnProperty(I)&&(d=c[I],d!=null))switch(I){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:rt(a,o,I,d,c,null)}return;case"dialog":ze("beforetoggle",a),ze("toggle",a),ze("cancel",a),ze("close",a);break;case"iframe":case"object":ze("load",a);break;case"video":case"audio":for(d=0;d<fc.length;d++)ze(fc[d],a);break;case"image":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"embed":case"source":case"link":ze("error",a),ze("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in c)if(c.hasOwnProperty(V)&&(d=c[V],d!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:rt(a,o,V,d,c,null)}return;default:if(xu(o)){for(ie in c)c.hasOwnProperty(ie)&&(d=c[ie],d!==void 0&&jm(a,o,ie,d,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(d=c[_],d!=null&&rt(a,o,_,d,c,null))}function yk(a,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,w=null,_=null,I=null,V=null,ie=null;for(J in c){var ce=c[J];if(c.hasOwnProperty(J)&&ce!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":I=ce;default:d.hasOwnProperty(J)||rt(a,o,J,null,d,ce)}}for(var Q in d){var J=d[Q];if(ce=c[Q],d.hasOwnProperty(Q)&&(J!=null||ce!=null))switch(Q){case"type":x=J;break;case"name":y=J;break;case"checked":V=J;break;case"defaultChecked":ie=J;break;case"value":w=J;break;case"defaultValue":_=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,o));break;default:J!==ce&&rt(a,o,Q,J,d,ce)}}ti(a,w,_,I,V,ie,x,y);return;case"select":J=w=_=Q=null;for(x in c)if(I=c[x],c.hasOwnProperty(x)&&I!=null)switch(x){case"value":break;case"multiple":J=I;default:d.hasOwnProperty(x)||rt(a,o,x,null,d,I)}for(y in d)if(x=d[y],I=c[y],d.hasOwnProperty(y)&&(x!=null||I!=null))switch(y){case"value":Q=x;break;case"defaultValue":_=x;break;case"multiple":w=x;default:x!==I&&rt(a,o,y,x,d,I)}o=_,c=w,d=J,Q!=null?ni(a,!!c,Q,!1):!!d!=!!c&&(o!=null?ni(a,!!c,o,!0):ni(a,!!c,c?[]:"",!1));return;case"textarea":J=Q=null;for(_ in c)if(y=c[_],c.hasOwnProperty(_)&&y!=null&&!d.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:rt(a,o,_,null,d,y)}for(w in d)if(y=d[w],x=c[w],d.hasOwnProperty(w)&&(y!=null||x!=null))switch(w){case"value":Q=y;break;case"defaultValue":J=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&rt(a,o,w,y,d,x)}kl(a,Q,J);return;case"option":for(var Ne in c)if(Q=c[Ne],c.hasOwnProperty(Ne)&&Q!=null&&!d.hasOwnProperty(Ne))switch(Ne){case"selected":a.selected=!1;break;default:rt(a,o,Ne,null,d,Q)}for(I in d)if(Q=d[I],J=c[I],d.hasOwnProperty(I)&&Q!==J&&(Q!=null||J!=null))switch(I){case"selected":a.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:rt(a,o,I,Q,d,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in c)Q=c[_e],c.hasOwnProperty(_e)&&Q!=null&&!d.hasOwnProperty(_e)&&rt(a,o,_e,null,d,Q);for(V in d)if(Q=d[V],J=c[V],d.hasOwnProperty(V)&&Q!==J&&(Q!=null||J!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,o));break;default:rt(a,o,V,Q,d,J)}return;default:if(xu(o)){for(var at in c)Q=c[at],c.hasOwnProperty(at)&&Q!==void 0&&!d.hasOwnProperty(at)&&jm(a,o,at,void 0,d,Q);for(ie in d)Q=d[ie],J=c[ie],!d.hasOwnProperty(ie)||Q===J||Q===void 0&&J===void 0||jm(a,o,ie,Q,d,J);return}}for(var G in c)Q=c[G],c.hasOwnProperty(G)&&Q!=null&&!d.hasOwnProperty(G)&&rt(a,o,G,null,d,Q);for(ce in d)Q=d[ce],J=c[ce],!d.hasOwnProperty(ce)||Q===J||Q==null&&J==null||rt(a,o,ce,Q,d,J)}var Rm=null,Im=null;function Cd(a){return a.nodeType===9?a:a.ownerDocument}function N1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Lm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $m=null;function vk(){var a=window.event;return a&&a.type==="popstate"?a===$m?!1:($m=a,!0):($m=null,!1)}var M1=typeof setTimeout=="function"?setTimeout:void 0,bk=typeof clearTimeout=="function"?clearTimeout:void 0,j1=typeof Promise=="function"?Promise:void 0,xk=typeof queueMicrotask=="function"?queueMicrotask:typeof j1<"u"?function(a){return j1.resolve(null).then(a).catch(Sk)}:M1;function Sk(a){setTimeout(function(){throw a})}function xi(a){return a==="head"}function R1(a,o){var c=o,d=0,y=0;do{var x=c.nextSibling;if(a.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(0<d&&8>d){c=d;var w=a.ownerDocument;if(c&1&&hc(w.documentElement),c&2&&hc(w.body),c&4)for(c=w.head,hc(c),w=c.firstChild;w;){var _=w.nextSibling,I=w.nodeName;w[mn]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=_}}if(y===0){a.removeChild(x),Ac(o);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:d=c.charCodeAt(0)-48;else d=0;c=x}while(c);Ac(o)}function Bm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Bm(c),Lr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function Ak(a,o,c,d){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[mn])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=zr(a.nextSibling),a===null)break}return null}function Ek(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=zr(a.nextSibling),a===null))return null;return a}function Um(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Ck(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function zr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var zm=null;function I1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function L1(a,o,c){switch(o=Cd(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function hc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Lr(a)}var Cr=new Map,$1=new Set;function Pd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ja=q.d;q.d={f:Pk,r:wk,D:Tk,C:Ok,L:_k,m:Dk,X:kk,S:Nk,M:Mk};function Pk(){var a=ja.f(),o=gd();return a||o}function wk(a){var o=Bn(a);o!==null&&o.tag===5&&o.type==="form"?aS(o):ja.r(a)}var Hs=typeof document>"u"?null:document;function B1(a,o,c){var d=Hs;if(d&&typeof o=="string"&&o){var y=gn(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),$1.has(y)||($1.add(y),a={rel:a,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),un(o,"link",a),ut(o),d.head.appendChild(o)))}}function Tk(a){ja.D(a),B1("dns-prefetch",a,null)}function Ok(a,o){ja.C(a,o),B1("preconnect",a,o)}function _k(a,o,c){ja.L(a,o,c);var d=Hs;if(d&&a&&o){var y='link[rel="preload"][as="'+gn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+gn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+gn(c.imageSizes)+'"]')):y+='[href="'+gn(a)+'"]';var x=y;switch(o){case"style":x=qs(a);break;case"script":x=Ys(a)}Cr.has(x)||(a=h({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),Cr.set(x,a),d.querySelector(y)!==null||o==="style"&&d.querySelector(mc(x))||o==="script"&&d.querySelector(gc(x))||(o=d.createElement("link"),un(o,"link",a),ut(o),d.head.appendChild(o)))}}function Dk(a,o){ja.m(a,o);var c=Hs;if(c&&a){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+gn(d)+'"][href="'+gn(a)+'"]',x=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ys(a)}if(!Cr.has(x)&&(a=h({rel:"modulepreload",href:a},o),Cr.set(x,a),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(gc(x)))return}d=c.createElement("link"),un(d,"link",a),ut(d),c.head.appendChild(d)}}}function Nk(a,o,c){ja.S(a,o,c);var d=Hs;if(d&&a){var y=_n(d).hoistableStyles,x=qs(a);o=o||"default";var w=y.get(x);if(!w){var _={loading:0,preload:null};if(w=d.querySelector(mc(x)))_.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},c),(c=Cr.get(x))&&Gm(a,c);var I=w=d.createElement("link");ut(I),un(I,"link",a),I._p=new Promise(function(V,ie){I.onload=V,I.onerror=ie}),I.addEventListener("load",function(){_.loading|=1}),I.addEventListener("error",function(){_.loading|=2}),_.loading|=4,wd(w,o,d)}w={type:"stylesheet",instance:w,count:1,state:_},y.set(x,w)}}}function kk(a,o){ja.X(a,o);var c=Hs;if(c&&a){var d=_n(c).hoistableScripts,y=Ys(a),x=d.get(y);x||(x=c.querySelector(gc(y)),x||(a=h({src:a,async:!0},o),(o=Cr.get(y))&&Hm(a,o),x=c.createElement("script"),ut(x),un(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function Mk(a,o){ja.M(a,o);var c=Hs;if(c&&a){var d=_n(c).hoistableScripts,y=Ys(a),x=d.get(y);x||(x=c.querySelector(gc(y)),x||(a=h({src:a,async:!0,type:"module"},o),(o=Cr.get(y))&&Hm(a,o),x=c.createElement("script"),ut(x),un(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function U1(a,o,c,d){var y=(y=te.current)?Pd(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=qs(c.href),c=_n(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=qs(c.href);var x=_n(y).hoistableStyles,w=x.get(a);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,w),(x=y.querySelector(mc(a)))&&!x._p&&(w.instance=x,w.state.loading=5),Cr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Cr.set(a,c),x||jk(y,a,c,w.state))),o&&d===null)throw Error(r(528,""));return w}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ys(c),c=_n(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function qs(a){return'href="'+gn(a)+'"'}function mc(a){return'link[rel="stylesheet"]['+a+"]"}function z1(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function jk(a,o,c,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),un(o,"link",c),ut(o),a.head.appendChild(o))}function Ys(a){return'[src="'+gn(a)+'"]'}function gc(a){return"script[async]"+a}function G1(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+gn(c.href)+'"]');if(d)return o.instance=d,ut(d),d;var y=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),ut(d),un(d,"style",y),wd(d,c.precedence,a),o.instance=d;case"stylesheet":y=qs(c.href);var x=a.querySelector(mc(y));if(x)return o.state.loading|=4,o.instance=x,ut(x),x;d=z1(c),(y=Cr.get(y))&&Gm(d,y),x=(a.ownerDocument||a).createElement("link"),ut(x);var w=x;return w._p=new Promise(function(_,I){w.onload=_,w.onerror=I}),un(x,"link",d),o.state.loading|=4,wd(x,c.precedence,a),o.instance=x;case"script":return x=Ys(c.src),(y=a.querySelector(gc(x)))?(o.instance=y,ut(y),y):(d=c,(y=Cr.get(x))&&(d=h({},c),Hm(d,y)),a=a.ownerDocument||a,y=a.createElement("script"),ut(y),un(y,"link",d),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,wd(d,c.precedence,a));return o.instance}function wd(a,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,x=y,w=0;w<d.length;w++){var _=d[w];if(_.dataset.precedence===o)x=_;else if(x!==y)break}x?x.parentNode.insertBefore(a,x.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function Gm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Hm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Td=null;function H1(a,o,c){if(Td===null){var d=new Map,y=Td=new Map;y.set(c,d)}else y=Td,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var x=c[y];if(!(x[mn]||x[Ut]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var w=x.getAttribute(o)||"";w=a+w;var _=d.get(w);_?_.push(x):d.set(w,[x])}}return d}function q1(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function Rk(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Y1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var yc=null;function Ik(){}function Lk(a,o,c){if(yc===null)throw Error(r(475));var d=yc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=qs(c.href),x=a.querySelector(mc(y));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=Od.bind(d),a.then(d,d)),o.state.loading|=4,o.instance=x,ut(x);return}x=a.ownerDocument||a,c=z1(c),(y=Cr.get(y))&&Gm(c,y),x=x.createElement("link"),ut(x);var w=x;w._p=new Promise(function(_,I){w.onload=_,w.onerror=I}),un(x,"link",c),o.instance=x}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=Od.bind(d),a.addEventListener("load",o),a.addEventListener("error",o))}}function $k(){if(yc===null)throw Error(r(475));var a=yc;return a.stylesheets&&a.count===0&&qm(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&qm(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function Od(){if(this.count--,this.count===0){if(this.stylesheets)qm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var _d=null;function qm(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,_d=new Map,o.forEach(Bk,a),_d=null,Od.call(a))}function Bk(a,o){if(!(o.state.loading&4)){var c=_d.get(a);if(c)var d=c.get(null);else{c=new Map,_d.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var w=y[x];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=o.instance,w=y.getAttribute("data-precedence"),x=c.get(w)||d,x===d&&c.set(null,y),c.set(w,y),this.count++,d=Od.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),x?x.parentNode.insertBefore(y,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var vc={$$typeof:O,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function Uk(a,o,c,d,y,x,w,_){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function F1(a,o,c,d,y,x,w,_,I,V,ie,ce){return a=new Uk(a,o,c,w,_,I,V,ce),o=1,x===!0&&(o|=24),x=Qn(3,null,null,o),a.current=x,x.stateNode=a,o=Ph(),o.refCount++,a.pooledCache=o,o.refCount++,x.memoizedState={element:d,isDehydrated:c,cache:o},_h(x),a}function V1(a){return a?(a=As,a):As}function K1(a,o,c,d,y,x){y=V1(y),d.context===null?d.context=y:d.pendingContext=y,d=si(o),d.payload={element:c},x=x===void 0?null:x,x!==null&&(d.callback=x),c=li(a,d,o),c!==null&&(nr(c,a,o),Kl(c,a,o))}function W1(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function Ym(a,o){W1(a,o),(a=a.alternate)&&W1(a,o)}function X1(a){if(a.tag===13){var o=Ss(a,67108864);o!==null&&nr(o,a,67108864),Ym(a,67108864)}}var Dd=!0;function zk(a,o,c,d){var y=L.T;L.T=null;var x=q.p;try{q.p=2,Fm(a,o,c,d)}finally{q.p=x,L.T=y}}function Gk(a,o,c,d){var y=L.T;L.T=null;var x=q.p;try{q.p=8,Fm(a,o,c,d)}finally{q.p=x,L.T=y}}function Fm(a,o,c,d){if(Dd){var y=Vm(d);if(y===null)Mm(a,o,d,Nd,c),Z1(a,d);else if(qk(y,a,o,c,d))d.stopPropagation();else if(Z1(a,d),o&4&&-1<Hk.indexOf(a)){for(;y!==null;){var x=Bn(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var w=Qr(x.pendingLanes);if(w!==0){var _=x;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var I=1<<31-Tn(w);_.entanglements[1]|=I,w&=~I}sa(x),(Ze&6)===0&&(hd=pt()+500,dc(0))}}break;case 13:_=Ss(x,2),_!==null&&nr(_,x,2),gd(),Ym(x,2)}if(x=Vm(d),x===null&&Mm(a,o,d,Nd,c),x===y)break;y=x}y!==null&&d.stopPropagation()}else Mm(a,o,d,null,c)}}function Vm(a){return a=ls(a),Km(a)}var Nd=null;function Km(a){if(Nd=null,a=pr(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Nd=a,null}function Q1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case Kr:return 2;case Wo:return 8;case Gi:case Ip:return 32;case Cl:return 268435456;default:return 32}default:return 32}}var Wm=!1,Si=null,Ai=null,Ei=null,bc=new Map,xc=new Map,Ci=[],Hk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z1(a,o){switch(a){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":Ai=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":bc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(o.pointerId)}}function Sc(a,o,c,d,y,x){return a===null||a.nativeEvent!==x?(a={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:x,targetContainers:[y]},o!==null&&(o=Bn(o),o!==null&&X1(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function qk(a,o,c,d,y){switch(o){case"focusin":return Si=Sc(Si,a,o,c,d,y),!0;case"dragenter":return Ai=Sc(Ai,a,o,c,d,y),!0;case"mouseover":return Ei=Sc(Ei,a,o,c,d,y),!0;case"pointerover":var x=y.pointerId;return bc.set(x,Sc(bc.get(x)||null,a,o,c,d,y)),!0;case"gotpointercapture":return x=y.pointerId,xc.set(x,Sc(xc.get(x)||null,a,o,c,d,y)),!0}return!1}function J1(a){var o=pr(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,tx(a.priority,function(){if(c.tag===13){var d=tr();d=es(d);var y=Ss(c,d);y!==null&&nr(y,c,d),Ym(c,d)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function kd(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=Vm(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);ma=d,c.target.dispatchEvent(d),ma=null}else return o=Bn(c),o!==null&&X1(o),a.blockedOn=c,!1;o.shift()}return!0}function eA(a,o,c){kd(a)&&c.delete(o)}function Yk(){Wm=!1,Si!==null&&kd(Si)&&(Si=null),Ai!==null&&kd(Ai)&&(Ai=null),Ei!==null&&kd(Ei)&&(Ei=null),bc.forEach(eA),xc.forEach(eA)}function Md(a,o){a.blockedOn===o&&(a.blockedOn=null,Wm||(Wm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yk)))}var jd=null;function tA(a){jd!==a&&(jd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){jd===a&&(jd=null);for(var o=0;o<a.length;o+=3){var c=a[o],d=a[o+1],y=a[o+2];if(typeof d!="function"){if(Km(d||c)===null)continue;break}var x=Bn(c);x!==null&&(a.splice(o,3),o-=3,Kh(x,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function Ac(a){function o(I){return Md(I,a)}Si!==null&&Md(Si,a),Ai!==null&&Md(Ai,a),Ei!==null&&Md(Ei,a),bc.forEach(o),xc.forEach(o);for(var c=0;c<Ci.length;c++){var d=Ci[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Ci.length&&(c=Ci[0],c.blockedOn===null);)J1(c),c.blockedOn===null&&Ci.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],x=c[d+1],w=y[On]||null;if(typeof x=="function")w||tA(c);else if(w){var _=null;if(x&&x.hasAttribute("formAction")){if(y=x,w=x[On]||null)_=w.formAction;else if(Km(y)!==null)continue}else _=w.action;typeof _=="function"?c[d+1]=_:(c.splice(d,3),d-=3),tA(c)}}}function Xm(a){this._internalRoot=a}Rd.prototype.render=Xm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=tr();K1(c,d,a,o,null,null)},Rd.prototype.unmount=Xm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;K1(a.current,2,null,a,null,null),gd(),o[Fi]=null}};function Rd(a){this._internalRoot=a}Rd.prototype.unstable_scheduleHydration=function(a){if(a){var o=vu();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Ci.length&&o!==0&&o<Ci[c].priority;c++);Ci.splice(c,0,a),c===0&&J1(a)}};var nA=t.version;if(nA!=="19.1.1")throw Error(r(527,nA,"19.1.1"));q.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=p(o),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Fk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{Hi=Id.inject(Fk),hn=Id}catch{}}return Cc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,d="",y=vS,x=bS,w=xS,_=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks)),o=F1(a,1,!1,null,null,c,d,y,x,w,_,null),a[Fi]=o.current,km(a),new Xm(o)},Cc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var d=!1,y="",x=vS,w=bS,_=xS,I=null,V=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(I=c.unstable_transitionCallbacks),c.formState!==void 0&&(V=c.formState)),o=F1(a,1,!0,o,c??null,d,y,x,w,_,I,V),o.context=V1(null),c=o.current,d=tr(),d=es(d),y=si(d),y.callback=null,li(c,y,d),c=d,o.current.lanes=c,Za(o,c),sa(o),a[Fi]=o.current,km(a),new Rd(o)},Cc.version="19.1.1",Cc}var fA;function nM(){if(fA)return Jm.exports;fA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Jm.exports=tM(),Jm.exports}var rM=nM();const aM=Fr(rM),Pn=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:6,image:"/img/Interceptor.png",abilities:[{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],Jd=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],pA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},ki=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Fa=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=ki(l),p={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const h in l.middleLaneBonus)p.hasOwnProperty(h)&&(p[h]+=l.middleLaneBonus[h]);r[s]=p}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},Nr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=Pn.find(g=>g.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,p=s.speed,f=s.shields,h=s.class;l.forEach(g=>{g.mod.stat==="attack"&&(u+=g.mod.value),g.mod.stat==="speed"&&(p+=g.mod.value),g.mod.stat==="shields"&&(f+=g.mod.value),g.mod.stat==="cost"&&(h+=g.mod.value)}),h=Math.max(0,h);let m={...e,attack:u,speed:p,maxShields:f,cost:h,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(g=>{g.stat==="attack"&&(m.attack+=g.value),g.stat==="speed"&&(m.speed+=g.value),g.stat==="cost"&&(m.cost=Math.max(0,m.cost+g.value))}),s.abilities?.forEach(g=>{if(g.type==="PASSIVE"){if(g.effect.type==="GRANT_KEYWORD"&&m.keywords.add(g.effect.keyword),g.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:b,mod:S}=g.effect;let A=!1;if(b.type==="SHIP_SECTION_HULL_DAMAGED"&&b.location==="SAME_LANE"){const C=parseInt(t.slice(-1))-1,T=(n.name==="Player 1"?i.player1:i.player2)[C];if(T){const O=n.shipSections[T],k=ki(O);(k==="damaged"||k==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(m.attack+=S.value)}if(g.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:b,mod:S}=g.effect;let A=0;if(b.type==="OWN_DAMAGED_SECTIONS")for(const C in n.shipSections){const P=n.shipSections[C],T=ki(P);(T==="damaged"||T==="critical")&&A++}A>0&&(S.stat==="attack"&&(m.attack+=S.value*A),S.stat==="speed"&&(m.speed+=S.value*A))}g.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+g.effect.value),g.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&g.effect.mods.forEach(b=>{b.stat==="attack"&&(m.attack+=b.value),b.stat==="speed"&&(m.speed+=b.value)})}}),n.dronesOnBoard[t]?.forEach(g=>{if(g.id===e.id)return;Pn.find(S=>S.name===g.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:C}=S.effect;A==="shields"?m.maxShields+=C:A==="attack"?m.attack+=C:A==="speed"&&(m.speed+=C)}})}),l.forEach(g=>{g.grantedAbilities&&g.grantedAbilities.forEach(b=>{if(b.type==="PASSIVE"&&(b.effect.type==="GRANT_KEYWORD"&&m.keywords.add(b.effect.keyword),b.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=b.effect;S==="attack"&&(m.attack+=A),S==="speed"&&(m.speed+=A),S==="shields"&&(m.maxShields+=A)}})}),m},iM=(e,t)=>({...e,instanceId:t}),Ks=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],Uw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=Jd.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(iM(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},Y0=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},oM=(e,t)=>{const n=Fa({shipSections:pA},[]).totals;return{name:e,shipSections:pA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:Uw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Qs=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},zw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},pl=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=Nr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},Vn=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},$c=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],f=!(typeof n.cost=="number"),{type:h,affinity:m,location:g,custom:b}=n.targeting;let S=null;if(f&&Object.values(s.dronesOnBoard).flat().some(T=>T.id===t.id)&&(S=Vn(t.id,s),!S))return[];const A=(P,T)=>{Object.entries(P.dronesOnBoard).forEach(([O,k])=>{let N=!1;g==="ANY_LANE"&&(N=!0),f&&g==="SAME_LANE"&&(N=O===S),N&&k.forEach(D=>{let M=!0;if(b?.includes("DAMAGED_HULL")){const j=Pn.find(U=>U.name===D.name);(!j||D.hull>=j.hull)&&(M=!1)}b?.includes("EXHAUSTED")&&(D.isExhausted||(M=!1)),M&&u.push({...D,lane:O,owner:T})})})},C=(P,T)=>{Object.keys(P.shipSections).forEach(O=>{u.push({id:O,owner:T,...P.shipSections[O]})})};if(h==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(s,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(h==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&C(s,e),(m==="ENEMY"||m==="ANY")&&C(l,e==="player1"?"player2":"player1");else if(h==="LANE")["lane1","lane2","lane3"].forEach(P=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:P,owner:e}),m==="ENEMY"||m==="ANY"){const T=e==="player1"?"player2":"player1";u.push({id:P,owner:T})}});else if(h==="DRONE_CARD"){const P=e==="player1"?r:i;P.activeDronePool.forEach(T=>{const O=Pn.find(M=>M.name===T.name),k=P.appliedUpgrades[T.name]||[],N=k.filter(M=>M.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;O&&k.length<O.upgradeSlots&&N<D&&u.push({...T,id:T.name,owner:e})})}else if(h==="APPLIED_UPGRADE"){const P=m==="ENEMY"?l:s,T=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(P.dronesOnBoard).flat().forEach(O=>{(P.appliedUpgrades[O.name]||[]).length>0&&u.push({...O,owner:T})})}return u},Gw=(e,t,n,r,i)=>{const s=Pn.find(f=>f.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const p=s.abilities.filter(f=>f.type==="TRIGGERED"&&f.trigger==="ON_MOVE");if(p.length>0){const f=l.dronesOnBoard[r].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[r][f];p.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),h.statMods||(h.statMods=[]),m.effects?.forEach(g=>{g.type==="PERMANENT_STAT_MOD"&&(u=!0,h.statMods.push(g.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${g.mod.value} ${g.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},Hw=(e,t,n)=>{const r=Pn.find(f=>f.name===t.name);if(!r?.abilities)return{newState:e,effects:[],animationEvents:[]};let i=JSON.parse(JSON.stringify(e));const s=[],l=[];let u=!1;return r.abilities.filter(f=>f.effect?.type==="AFTER_ATTACK").forEach(f=>{const{subEffect:h}=f.effect;if(h.type==="DESTROY_SELF")for(const m in i.dronesOnBoard){const g=i.dronesOnBoard[m].findIndex(b=>b.id===t.id);if(g!==-1){u=!0;const b=i.dronesOnBoard[m][g];s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${f.name}', destroying itself.`}}),l.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:n,targetLane:m,targetType:"drone",timestamp:Date.now()}),i.dronesOnBoard[m]=i.dronesOnBoard[m].filter(S=>S.id!==t.id),Object.assign(i,Qs(i,b));break}}else if(h.type==="PERMANENT_STAT_MOD")for(const m in i.dronesOnBoard){const g=i.dronesOnBoard[m].findIndex(b=>b.id===t.id);if(g!==-1){u=!0,i.dronesOnBoard[m][g].statMods||(i.dronesOnBoard[m][g].statMods=[]),s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${f.name}', gaining a permanent +${h.mod.value} ${h.mod.stat}.`}}),i.dronesOnBoard[m][g].statMods.push(h.mod);break}}}),{newState:u?i:e,effects:s,animationEvents:l}},Uy=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>ki(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},qw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=Pn.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const p=t.class;let f=0,h=0;return n===1?(h=Math.min(e.initialDeploymentBudget,p),f=p-h):(h=Math.min(e.deploymentBudget,p),f=p-h),e.energy<f?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${f} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:h,energyCost:f}},Yw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},F0=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=Y0(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},sM=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},lM=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")Yw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=F0(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},cM=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=F0(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},uM=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Fa(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(p=>{l[p]={...n.shipSections[p],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},dM=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,p=Fa(s,l).totals.shieldsPerTurn,f=JSON.parse(JSON.stringify(s.shipSections)),h=Object.keys(f);let m=p,g=0,b=0;for(;m>0&&b<100;){const P=h[g%h.length],T=f[P],O=Y0(P,s,l);T.allocatedShields<O&&(T.allocatedShields++,m--),g++,b++}const S={...s,shipSections:f},C={success:!0,newPhase:"deployment",firstPlayer:ep(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(C.player1State=i,C.player2State=S):(C.player1State=S,C.player2State=i),C},fM=(e,t,n,r,i,s,l)=>{const{effect:u,cost:p}=e,f=r.player1;let h="",m="Ability effect applied.";e.targeting?.type==="LANE"?h=`Lane ${n.id.slice(-1)}`:n&&(h=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${h}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${h}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${h}.`),s&&s({player:f.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:h,outcome:m});const g={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.energy&&(g.player1.energy-=p.energy),p.exhausts)for(const A in g.player1.dronesOnBoard){const C=g.player1.dronesOnBoard[A].findIndex(P=>P.id===t.id);if(C!==-1){g.player1.dronesOnBoard[A][C].isExhausted=!0;break}}const b=eT(u,t,n,g,i,{resolveAttackCallback:l});g.player1=b.newPlayerStates.player1,g.player2=b.newPlayerStates.player2;const S=b.animationEvents||[];return{newPlayerStates:g,shouldEndTurn:!u.goAgain,animationEvents:S}},pM=(e,t,n,r,i,s,l)=>{const{cost:u,effect:p}=e,f=r.player1;s&&s({player:f.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(h.player1.energy-=u.energy,p.type==="REALLOCATE_SHIELDS")return{newPlayerStates:h,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:[]};{const m=tT(p,t,n,h,i,{resolveAttackCallback:l});h.player1=m.newPlayerStates.player1,h.player2=m.newPlayerStates.player2;const g=m.animationEvents||[];return m.needsDiscardSelection?{newPlayerStates:h,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0},animationEvents:g}:{newPlayerStates:h,shouldEndTurn:!0,animationEvents:g}}},Fw=(e,t,n,r,i,s,l,u)=>{const p=qw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Fa(r,s.player1||s));if(!p.isValid)return{success:!1,error:p.reason,message:p.message,newPlayerState:r};const{budgetCost:f,energyCost:h}=p;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const m=JSON.parse(JSON.stringify(r)),g={...m.dronesOnBoard,[t]:[...m.dronesOnBoard[t],{...e,id:0}]},b={...m,dronesOnBoard:g},S=Nr(e,t,b,i,s),A={...e,id:Date.now(),statMods:[],currentShields:S.maxShields,currentMaxShields:S.maxShields,hull:e.hull,isExhausted:!1};m.dronesOnBoard[t].push(A),m.deployedDroneCounts={...m.deployedDroneCounts,[e.name]:(m.deployedDroneCounts[e.name]||0)+1},n===1?m.initialDeploymentBudget-=f:m.deploymentBudget-=f,m.energy-=h,m.dronesOnBoard=pl(m,i,s);const C=[{type:"TELEPORT_IN",targetId:A.id,laneId:t,playerId:u,timestamp:Date.now()}];return{success:!0,newPlayerState:m,deployedDrone:A,animationEvents:C}},hM=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return Uy(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):Uy(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},mM=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=Vn(e.id,t);if(!i)return[];const s=Nr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(p=>{const f=Nr(p,i,n,t,r);return!p.isExhausted&&(f.speed>s.speed||f.keywords.has("ALWAYS_INTERCEPTS"))}).map(p=>p.id)},gM=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,p=e.class;let f=0;n===1?f=Math.min(r.initialDeploymentBudget,p):f=Math.min(r.deploymentBudget,p);const h=p-f;if(r.energy<h)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let g={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-f:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-f:r.deploymentBudget,energy:r.energy-h};return g.dronesOnBoard=pl(g,i,s),{success:!0,newPlayerState:g,deployedDrone:m,costs:{energy:h,budget:f}}},yM=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l,attackingPlayer:u}=e,f=t[u==="player1"?"player2":"player1"],h=t[u],m=Nr(r,l,h,f,n),g=f.dronesOnBoard[l].filter(b=>{const S=Nr(b,l,f,h,n);return!b.isExhausted&&(S.speed>m.speed||S.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||b.id!==i.id)});return{hasInterceptors:g.length>0,interceptors:g,attackDetails:e}},V0=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},vM=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},bM=(e,t)=>{const n=V0(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},xM=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=ep(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},SM=(e,t,n,r)=>{const i=zy(e.player1,t,n,e.player2,e.placedSections),s=zy(e.player2,t,r,e.player1,e.opponentPlacedSections),l=Gy(i,n.totals.handLimit),u=Gy(s,r.totals.handLimit),p=ep(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),f={...e,turn:t,turnPhase:"deployment",currentPlayer:p,firstPlayerOfRound:p,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},h=[{type:"ROUND_START",turn:t,firstPlayer:p},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:f,uiEffects:h}},Vw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=Nr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},zy=(e,t,n,r,i)=>({...Vw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),Gy=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},AM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:p,opponentPlacedSections:f}=e,{addLogEntry:h,setPlayer2:m,setPendingAttack:g,endTurn:b,endDeploymentPhase:S,endActionPhase:A,setPassInfo:C}=n;let P;return l==="deployment"&&!u.player2Passed?P=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:f,placedSections:p,getShipStatus:ki,calculateEffectiveShipStats:Fa,calculateEffectiveStats:Nr,addLogEntry:h}):l==="action"&&!u.player2Passed&&(P=t.handleOpponentAction({player1:r,player2:i,placedSections:p,opponentPlacedSections:f,getShipStatus:ki,getLaneOfDrone:Vn,getValidTargets:$c,calculateEffectiveStats:Nr,addLogEntry:h})),P||null},EM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:p}=t,{addLogEntry:f,setPlayer2:h,setPendingAttack:m,endTurn:g,endDeploymentPhase:b,endActionPhase:S,setPassInfo:A,resolveCardPlay:C}=n;if(e.type==="pass"){const P=!t.passInfo.player1Passed,T={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(P?"player2":null)};return A(T),T.player1Passed?l==="deployment"?b():l==="action"&&S():g("player2"),{newPassInfo:T}}else if(e.type==="deploy"){const{droneToDeploy:P,targetLane:T,logContext:O}=e.payload;f({player:i.name,actionType:"DEPLOY",source:P.name,target:T,outcome:`Deployed to ${T}.`},"aiDeploymentDeploy",O);const k=Fw(P,T,i,r,s,{player1:u,player2:p});return k.success&&(h(k.newPlayerState),g("player2")),{deployedDrone:k.deployedDrone}}else if(e.type==="action"){const P=e.payload,{logContext:T}=e;switch(P.type){case"play_card":C(P.card,P.target,"player2",T);break;case"attack":m({attacker:P.attacker,target:P.target,targetType:P.targetType,lane:P.attacker.lane,attackingPlayer:"player2",aiContext:T});break;case"move":{const{drone:O,fromLane:k,toLane:N}=P;f({player:i.name,actionType:"MOVE",source:O.name,target:N,outcome:`Moved from ${k} to ${N}.`},"aiActionMove",T);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[k]=D.dronesOnBoard[k].filter(U=>U.id!==O.id);const M={...O,isExhausted:!0};D.dronesOnBoard[N].push(M);const{newState:j}=Gw(D,M,k,N,f);j.dronesOnBoard=pl(j,r,{player1:u,player2:p}),h(j),g("player2");break}default:g("player2");break}return{action:P}}return null},Kw=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:f}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=p,b.hand=b.hand.filter(P=>P.instanceId!==e.instanceId),b.discardPile.push(e);const S=new Set(t.map(P=>P.id));b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(P=>!S.has(P.id));const A=t.map(P=>({...P,isExhausted:P.isExhausted||!f.properties?.includes("DO_NOT_EXHAUST")}));b.dronesOnBoard[r].push(...A),h({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(P=>P.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let C=b;return A.forEach(P=>{const{newState:T}=m(C,P,n,r,h);C=T}),C.dronesOnBoard=g(C,s,l),{newPlayerState:C,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},Ww=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:f}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=p,b.hand=b.hand.filter(C=>C.instanceId!==e.instanceId),b.discardPile.push(e),b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(C=>C.id!==t.id);const S={...t,isExhausted:f.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};b.dronesOnBoard[r].push(S),h({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(b,S,n,r,h);return A.dronesOnBoard=g(A,s,l),{newPlayerState:A,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},CM=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Xw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=ki(i);(s==="damaged"||s==="critical")&&n++}return n},PM=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:p,resolveAttackCallback:f}=s,h=t?t.name||t.id:"N/A";let m="Card effect applied.";const g=e.effect;if(g.type==="DRAW"&&(m=`Drew ${g.value} card(s).`),g.type==="GAIN_ENERGY"&&(m=`Gained ${g.value} energy.`),g.type==="HEAL_HULL"&&(m=`Healed ${g.value} hull on ${h}.`),g.type==="HEAL_SHIELDS"&&(m=`Healed ${g.value} shields on ${h}.`),g.type==="READY_DRONE"&&(m=`Readied ${h}.`),g.type==="DAMAGE"&&(g.scope==="FILTERED"?m=`Dealt ${g.value} damage to filtered targets in ${h}.`:m=`Dealt ${g.value} damage to ${h}.`),g.type==="MODIFY_STAT"){const C=g.mod,P=C.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${h} a ${C.value>0?"+":""}${C.value} ${C.stat} bonus${P}.`}if(g.type==="REPEATING_EFFECT"){const C=r[n],P=Xw(g.condition,C);m=`Drew ${P} card(s) and gained ${P} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:h,outcome:m});let b=CM(e,n,r);const S=wM(e.effect,t,n,b,i,s,e),A=[];if(A.push({type:"CARD_REVEAL",cardId:e.id,cardName:e.name,cardData:e,actingPlayerId:n,timestamp:Date.now()}),e.visualEffect&&t){let C=null,P=null,T=null;if(t.id&&(t.id==="lane1"||t.id==="lane2"||t.id==="lane3")){const O=e.targeting?.affinity||"ANY";O==="ENEMY"?(C=n==="player1"?"player2":"player1",P=t.id,T="lane"):O==="ANY"&&(C="center",P=t.id,T="lane"),C&&T&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:P,targetType:T,duration:e.visualEffect.duration||800,timestamp:Date.now()})}else{for(const O of["player1","player2"]){for(const k in b[O].dronesOnBoard)if(b[O].dronesOnBoard[k].some(N=>N.id===t.id)){C=O,P=k,T="drone";break}if(C)break}if(!C){for(const O of["player1","player2"])if(b[O].shipSections[t.name]||b[O].shipSections[t.id]){C=O,T="section";break}}C&&T&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:P,targetType:T,duration:e.visualEffect.duration||800,timestamp:Date.now()})}}if(S.animationEvents&&A.push(...S.animationEvents),console.log("[ANIMATION EVENTS] resolveCardPlay emitted:",A),!S.needsCardSelection){const C=Qw(e,n,S.newPlayerStates);return{newPlayerStates:C.newPlayerStates,shouldEndTurn:C.shouldEndTurn,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:!1}}return{newPlayerStates:b,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:S.needsCardSelection}},Qw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},wM=(e,t,n,r,i,s,l=null)=>e.effects?TM(e,t,n,r,i,s,l):Zw(e,t,n,r,i,s,l),TM=(e,t,n,r,i,s,l=null)=>{let u=r,p=[];if(e.type==="REPEATING_EFFECT"){const f=Xw(e.condition,u[n]);for(let h=0;h<f;h++)for(const m of e.effects){const g=Zw(m,t,n,u,i,s,l);u=g.newPlayerStates,g.additionalEffects&&p.push(...g.additionalEffects)}}return{newPlayerStates:u,additionalEffects:p}},Zw=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return W0(e,null,t,n,r);case"SEARCH_AND_DRAW":return Jw(e,null,t,n,r);case"GAIN_ENERGY":return OM(e,n,r,i);case"READY_DRONE":return _M(e,t,n,r);case"HEAL_HULL":return K0(e,null,t,n,r,i);case"HEAL_SHIELDS":return DM(e,t,n,r);case"DAMAGE":return Jf(e,null,t,n,r,i,s,l);case"DESTROY":return kM(e,t,n,r);case"MODIFY_STAT":return MM(e,t,n,r);case"MODIFY_DRONE_BASE":return jM(e,t,n,r);case"DESTROY_UPGRADE":return RM(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return BM(e,t,n,r,i,s,l);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},OM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,p=Fa(l,u).totals,f=Math.min(p.maxEnergy,l.energy+e.value);return l.energy=f,{newPlayerStates:s,additionalEffects:[]}},_M=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(p!==-1){l.dronesOnBoard[u][p].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},DM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(p!==-1){const f=l.dronesOnBoard[u][p];f.currentShields=Math.min(f.currentMaxShields||f.shields,f.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},NM=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,f=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[f].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${f} ${u}`),console.log(`[DEBUG] Drones in ${f} ${u}:`,m.map(O=>`${O.name}(${O.id}) [${O.hull}hp, ${O.speed}spd]`));const{stat:g,comparison:b,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},P=A[f].dronesOnBoard[u]||[];for(let O=P.length-1;O>=0;O--){const k=P[O];let N=!1;if(b==="GTE"&&k[g]>=S&&(N=!0),b==="LTE"&&k[g]<=S&&(N=!0),console.log(`[DEBUG] ${k.name} ${g}=${k[g]} ${b} ${S} = ${N}`),N){console.log(`[DEBUG] Applying ${e.value} damage to ${k.name}`);const D=k.currentShields||0;let M=e.value;const j=Math.min(M,D);k.currentShields=(k.currentShields||0)-j,M-=j,M>0&&(k.hull-=M),k.hull<=0&&(console.log(`[DEBUG] ${k.name} destroyed`),P.splice(O,1))}}const T=[];for(const O of m){const k=P.find(D=>D.id===O.id);let N=!1;if(b==="GTE"&&O[g]>=S&&(N=!0),b==="LTE"&&O[g]<=S&&(N=!0),N){const D=O.currentShields||0,M=Math.min(e.value,D),j=e.value-M;M>0&&T.push({type:"SHIELD_DAMAGE",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",amount:M,timestamp:Date.now()}),k?j>0&&T.push({type:"HULL_DAMAGE",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",amount:j,timestamp:Date.now()}):T.push({type:"DRONE_DESTROYED",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",timestamp:Date.now()})}}return{newPlayerStates:A,additionalEffects:[],animationEvents:T}}else{const u=r[t.owner],p=Vn(t.id,u);if(p){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const f={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=f[t.owner].dronesOnBoard[p]||[],g=m.find(b=>b.id===t.id);if(g){let b=e.value,S=0,A=b;if(e.damageType!=="PIERCING"&&(S=Math.min(b,g.currentShields),A-=S,g.currentShields-=S),g.hull-=A,console.log(`[DEBUG] Applied ${A} hull damage to ${g.name} (${g.hull} hull remaining)`),g.hull<=0){console.log(`[DEBUG] ${g.name} destroyed`);const P=m.findIndex(T=>T.id===t.id);P>=0&&m.splice(P,1)}const C=[];return S>0&&C.push({type:"SHIELD_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:S,timestamp:Date.now()}),g.hull<=0?C.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",timestamp:Date.now()}):A>0&&C.push({type:"HULL_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:A,timestamp:Date.now()}),{newPlayerStates:f,additionalEffects:[],animationEvents:C}}return{newPlayerStates:f,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},kM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const p=t.id;(s[l].dronesOnBoard[p]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:l,targetLane:p,targetType:"drone",timestamp:Date.now()});const g=Qs(s[l],m);s[l].deployedDroneCounts={...s[l].deployedDroneCounts||{},...g.deployedDroneCounts}}),s[l].dronesOnBoard[p]=[],(s[n].dronesOnBoard[p]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:n,targetLane:p,targetType:"drone",timestamp:Date.now()});const g=Qs(s[n],m);s[n].deployedDroneCounts={...s[n].deployedDroneCounts||{},...g.deployedDroneCounts}}),s[n].dronesOnBoard[p]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const p=s[l],f=Vn(t.id,p);if(f){const h=p.dronesOnBoard[f].find(m=>m.id===t.id);if(h){u.push({type:"DRONE_DESTROYED",targetId:h.id,targetPlayer:l,targetLane:f,targetType:"drone",timestamp:Date.now()});const m=Qs(p,h);p.deployedDroneCounts={...p.deployedDroneCounts||{},...m.deployedDroneCounts},p.dronesOnBoard[f]=p.dronesOnBoard[f].filter(g=>g.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:[],animationEvents:u}},MM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const p=t.id;l.dronesOnBoard[p]&&l.dronesOnBoard[p].forEach(f=>{f.statMods||(f.statMods=[]),f.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const p in l.dronesOnBoard){const f=l.dronesOnBoard[p].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[p][f];h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},jM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,p=l.appliedUpgrades[u]||[],f={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(f.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...p,f]},{newPlayerStates:s,additionalEffects:[]}},RM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:p,instanceId:f}=t;if(u.appliedUpgrades[p]){const h=u.appliedUpgrades[p].filter(m=>m.instanceId!==f);h.length>0?u.appliedUpgrades[p]=h:delete u.appliedUpgrades[p]}return{newPlayerStates:s,additionalEffects:[]}},Jf=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:p}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return NM(e,n,r,i,l,u?.targeting);const f=n.owner==="player1"?i.player1:i.player2,h=Vn(n.id,f);if(h&&p){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:h,damageType:e.damageType},g=rT(m,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:g.newPlayerStates,additionalEffects:g.afterAttackEffects||[],animationEvents:g.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},K0=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1";if(e.scope==="LANE"){const f=n.id;u[p].dronesOnBoard[f]&&u[p].dronesOnBoard[f].forEach(h=>{const m=Pn.find(g=>g.name===h.name);m&&h.hull<m.hull&&(h.hull=Math.min(m.hull,h.hull+e.value))})}else{const f=Pn.find(h=>h.name===n.name);if(f){const h=Vn(n.id,u[p]);if(h){const m=u[p].dronesOnBoard[h].findIndex(g=>g.id===n.id);m!==-1&&(u[p].dronesOnBoard[h][m].hull=Math.min(f.hull,u[p].dronesOnBoard[h][m].hull+e.value))}}else if(n.name&&u[p].shipSections[n.name]){const h=u[p].shipSections[n.name],g=(p==="player1"?s.player1:s.player2).find(b=>b.name===n.name);g&&(h.hull=Math.min(g.maxHull,h.hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},W0=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",f=u[p];let h=[...f.deck],m=[...f.hand],g=[...f.discardPile];const b=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<b;A++){if(h.length===0)if(g.length>0)h=[...g].sort(()=>.5-Math.random()),g=[];else break;h.length>0&&m.push(h.pop())}u[p]={...f,deck:h,hand:m,discardPile:g};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},IM=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),Jw=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",f=u[p];let h=[...f.deck],m=[...f.discardPile],g,b;if(e.filter)h.length===0&&m.length>0&&(h=[...m.sort(()=>.5-Math.random())],m=[]),g=h.filter(A=>IM(A,e.filter)).slice(0,e.searchCount),b=h.filter(A=>!g.includes(A));else{const S=e.searchCount;h.length<S&&m.length>0&&(h=[...h,...m.sort(()=>.5-Math.random())],m=[]),g=h.slice(-e.searchCount).reverse(),b=h.slice(0,-e.searchCount)}if(p==="player2"){const S=LM(g,e.drawCount,u),A=g.filter(T=>!S.includes(T)),C=[...f.hand,...S];let P=[...b,...A];return e.shuffleAfter&&(P=P.sort(()=>.5-Math.random())),u[p]={...f,deck:P,hand:C,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:g,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:b,discardPile:m,filter:e.filter}}},LM=(e,t,n,r)=>e.map(s=>({card:s,score:$M(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),$M=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},BM=(e,t,n,r,i,s,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",p=r[n],f=r[u];let h=null,m=-1/0;for(const g of["lane1","lane2","lane3"]){const S=(p.dronesOnBoard[g]||[]).filter(A=>!A.isExhausted);if(S.length!==0)for(const A of["lane1","lane2","lane3"]){if(g===A)continue;if(e.type==="SINGLE_MOVE"){const O=parseInt(g.replace("lane","")),k=parseInt(A.replace("lane",""));if(Math.abs(O-k)!==1)continue}const C=f.dronesOnBoard[A]?.length||0,P=p.dronesOnBoard[A]?.length||0,T=C*10-P*5;T>m&&(m=T,h={fromLane:g,toLane:A,drones:e.type==="SINGLE_MOVE"?[S[0]]:S.slice(0,Math.min(e.count||3,S.length))})}}if(!h)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const g=Ww(l,h.drones[0],h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:g.newPlayerState},additionalEffects:[]}}else{const g=Kw(l,h.drones,h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:g.newPlayerState},additionalEffects:[]}}},eT=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return K0(e,t,n,"player1",r,i);case"DAMAGE":return Jf(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},tT=(e,t,n,r,i,s)=>{const l={name:t};switch(e.type){case"DAMAGE":return Jf(e,l,n,"player1",r,i,s);case"RECALL_DRONE":return nT(e,t,n,r,i);case"DRAW_THEN_DISCARD":return W0(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},nT=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=Vn(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(p=>p.id!==n.id),Object.assign(l.player1,zw(l.player1,n)),l.player1.dronesOnBoard=pl(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[],animationEvents:[]}},rT=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:p,interceptor:f,attackingPlayer:h,abilityDamage:m,goAgain:g,damageType:b,lane:S,aiContext:A}=e,C=m!==void 0,P=f||u,T=f?"drone":p,O=h,k=P.owner||(O==="player1"?"player2":"player1"),N=t[O],D=t[k];let M=null,j=null;!C&&l&&l.id&&(M=Vn(l.id,N),j=Nr(l,M,N,D,n));let U=m??(j?Math.max(0,j.attack):0),K=b||(l?l.damageType:void 0);j&&j.keywords&&j.keywords.has("PIERCING")&&(K="PIERCING"),T==="section"&&!m&&l&&l.name&&Pn.find(ae=>ae.name===l.name)?.abilities?.forEach(ae=>{ae.type==="PASSIVE"&&ae.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(U+=ae.effect.value)});let H=0,W=0,re=!1,le=0,ne=0;if(T==="drone"){let X=null;for(const ae in D.dronesOnBoard)if(X=D.dronesOnBoard[ae].find(me=>me.id===P.id),X)break;if(X){let ae=U;K!=="PIERCING"&&(H=Math.min(U,X.currentShields),ae-=H),W=Math.min(ae,X.hull),re=X.hull-W<=0,le=X.currentShields-H,ne=re?0:X.hull-W}}else{const X=D.shipSections[P.name];if(X){let ae=U;K!=="PIERCING"&&(H=Math.min(U,X.allocatedShields),ae-=H),W=Math.min(ae,X.hull),re=X.hull-W<=0,le=X.allocatedShields-H,ne=re?0:X.hull-W}}const L=`Dealt ${H} shield and ${W} hull damage to ${P.name}.`+(T==="drone"?re?` ${P.name} Destroyed.`:` ${P.name} has ${le} shields and ${ne} hull left.`:""),q=[];if(l&&l.id&&!C&&q.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:O,sourceLane:M,targetId:P.id,targetPlayer:k,targetLane:T==="drone"?Vn(P.id,D):null,targetType:T,attackValue:j?j.attack:1,timestamp:Date.now()}),H>0){const X={type:"SHIELD_DAMAGE",targetId:P.id,targetPlayer:k,targetLane:T==="drone"?Vn(P.id,D):null,targetType:T,amount:H,timestamp:Date.now()};q.push(X)}if(re){const X={type:T==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:P.id,targetPlayer:k,targetLane:T==="drone"?Vn(P.id,D):null,targetType:T,timestamp:Date.now()};q.push(X)}else{if(W>0){const X={type:"HULL_DAMAGE",targetId:P.id,targetPlayer:k,targetLane:T==="drone"?Vn(P.id,D):null,targetType:T,amount:W,timestamp:Date.now()};q.push(X)}T==="section"&&(H>0||W>0)&&q.push({type:"SECTION_DAMAGED",targetId:P.id,targetPlayer:k,targetType:"section",timestamp:Date.now()}),l&&l.id&&!C&&q.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:O,sourceLane:M,timestamp:Date.now()})}console.log("[ANIMATION EVENTS] resolveAttack emitted:",q);const ue=M||(S?S.replace("lane","Lane "):null),ye=T==="drone"?`${P.name} (${ue})`:P.name,R=l&&l.name?`${l.name} (${ue})`:"Card Effect";r&&r({player:t[O].name,actionType:"ATTACK",source:R,target:ye,outcome:L},"resolveAttack",A);const F={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(T==="drone"){let X=!1;for(const ae in F[k].dronesOnBoard){const me=F[k].dronesOnBoard[ae].findIndex(z=>z.id===P.id);if(me!==-1){if(F[k].dronesOnBoard[ae][me].hull-W<=0){X=!0;const z=F[k].dronesOnBoard[ae][me];F[k].dronesOnBoard[ae]=F[k].dronesOnBoard[ae].filter(te=>te.id!==P.id),Object.assign(F[k],Qs(F[k],z))}else F[k].dronesOnBoard[ae][me].hull-=W,F[k].dronesOnBoard[ae][me].currentShields-=H;break}}if(X){const ae=k==="player1"?F.player2:F.player1;F[k].dronesOnBoard=pl(F[k],ae,n)}}else{F[k].shipSections[P.name].hull-=W,F[k].shipSections[P.name].allocatedShields-=H;const X=k==="player1"?n.player1:n.player2,ae=Fa(F[k],X).totals;F[k].energy>ae.maxEnergy&&(F[k].energy=ae.maxEnergy)}if(!C&&l&&l.id){let X=!1;for(const ae in F[O].dronesOnBoard){const me=F[O].dronesOnBoard[ae].findIndex(z=>z.id===l.id);if(me!==-1){F[O].dronesOnBoard[ae][me].isExhausted=!0,X=!0;break}}if(X){const ae=Hw(F[O],l,O);F[O]=ae.newState,ae.animationEvents&&ae.animationEvents.length>0&&q.push(...ae.animationEvents),ae.effects.forEach(me=>{me.type==="LOG"&&r&&r(me.payload,"afterAttack")})}}if(f){const X=O==="player1"?"player2":"player1";for(const ae in F[X].dronesOnBoard){const me=F[X].dronesOnBoard[ae].findIndex(z=>z.id===f.id);if(me!==-1){Nr(F[X].dronesOnBoard[ae][me],ae,F[X],F[O],n).keywords.has("DEFENDER")||(F[X].dronesOnBoard[ae][me].isExhausted=!0);break}}}return{newPlayerStates:F,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:M||S,targetName:P.name,targetType:T,interceptorName:f?f.name:null,shieldDamage:H,hullDamage:W,wasDestroyed:re,remainingShields:le,remainingHull:ne,outcome:L,shouldEndTurn:!g},animationEvents:q}},UM=(e,t)=>{const n=Fa(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},ep=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),zM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},GM=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},HM=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},qM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},YM=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(p=>p.instanceId===l.instanceId||p.name===l.name&&p.id===l.id);if(u!==-1&&s<t){const p=r.splice(u,1)[0];i.push(p),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),p=r.splice(u,1)[0];i.push(p),s++}return{...e,hand:r,discardPile:i,discardCount:s}},aT=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}return s},iT=(e,t)=>t.activeDronePool.map(n=>{const r=Pn.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),oT=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},FM=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=$c("player1",e.drone,e.ability,i,s):t?l=$c("player1",{id:t.sectionName},t.ability,i,s):n?u=aT(n,i):r&&(r.type==="Upgrade"?u=iT(r,i):r.effect.type==="MULTI_MOVE"?u=oT(n,i):u=$c("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},VM=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),KM=(e,t,n,r)=>{const i=V0(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},ke={initialPlayerState:oM,buildDeckFromList:Uw,getEffectiveSectionMaxShields:Y0,getShipStatus:ki,onDroneDestroyed:Qs,onDroneRecalled:zw,checkWinCondition:Uy,calculateAfterAttackStateAndEffects:Hw,applyOnMoveEffects:Gw,updateAuras:pl,getLaneOfDrone:Vn,getValidTargets:$c,calculateAllValidTargets:FM,calculateMultiSelectTargets:aT,calculateUpgradeTargets:iT,calculateMultiMoveTargets:oT,validateDeployment:qw,validateShieldRemoval:Yw,validateShieldAddition:F0,executeShieldReallocation:sM,getValidShieldReallocationTargets:lM,processShieldAllocation:cM,processResetShieldAllocation:uM,processEndShieldAllocation:dM,resolveAttack:rT,resolveAbility:fM,resolveShipAbility:pM,executeDeployment:Fw,resolveCardPlay:PM,finishCardPlay:Qw,resolveMultiMove:Kw,resolveSingleMove:Ww,checkGameStateForWinner:hM,calculatePotentialInterceptors:mM,calculateAiInterception:yM,calculateTurnTransition:V0,calculatePassTransition:vM,readyDronesAndRestoreShields:Vw,calculateNewRoundPlayerState:zy,drawToHandLimit:Gy,drawPlayerCards:UM,determineFirstPlayer:ep,enforceHandLimit:zM,checkHandLimitCompliance:GM,checkHandLimitViolations:HM,enforceHandLimits:qM,processDiscardPhase:YM,processTurnTransition:bM,processPhaseChange:xM,processRoundStart:SM,createExplosionEffect:VM,createTurnEndEffects:KM,resolveUnifiedDamageEffect:Jf,resolveUnifiedHealEffect:K0,resolveUnifiedDrawEffect:W0,resolveSearchAndDrawEffect:Jw,resolveDroneAbilityEffect:eT,resolveShipAbilityEffect:tT,resolveShipRecallEffect:nT,executeAiDeployment:gM,executeAiTurn:AM,executeAiAction:EM},Pc=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:ke,startingDecklist:Ks},Symbol.toStringTag,{value:"Module"})),WM="modulepreload",XM=function(e){return"/"+e},hA={},Gr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=p(n.map(f=>{if(f=XM(f),f in hA)return;hA[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":WM,h||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((b,S)=>{g.addEventListener("load",b),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class QM{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log("💾 GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(`💾 Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(`💾 Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const ZM=new QM;class Ft{static instance=null;static getInstance(t){return Ft.instance||(Ft.instance=new Ft(t)),Ft.instance}static reset(){Ft.instance&&Ft.instance.stateSubscriptionCleanup&&Ft.instance.stateSubscriptionCleanup(),Ft.instance=null,console.log("🎯 GameDataService singleton reset")}constructor(t){if(Ft.instance)return console.warn("⚠️ GameDataService already exists. Use getInstance() instead of new GameDataService()"),Ft.instance;this.gameStateManager=t,this.cache=ZM,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log("🎯 GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),p=s[l],f=s[u],h=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,p),S=Nr(t,n,m?p:f,m?f:p,h);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Fa(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!0})),p=(l.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:p,hasGuardian:this.hasGuardianInLane(t,p)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const JM=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"}));class ej{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){if(this.isInitialized){console.log("🤖 AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=Ft.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,console.log("🤖 AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log("🔗 AIPhaseProcessor connected to ActionProcessor for execution"),s&&console.log("🔗 AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const p=this.dronePool?.find(f=>f.name===u);return p||console.warn(`⚠️ AI personality references unknown drone: ${u}`),p}).filter(u=>u),console.log(`🎯 Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const l=r.map(u=>u.name).join(", ");console.log(`🎯 Mapped drones: ${l}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(`🎯 Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error("❌ Not enough drones available for AI selection:",r.length),n&&n.dronePool){const l=n.dronePool.filter(u=>!this.dronePool?.find(p=>p.name===u));l.length>0&&console.error(`❌ Missing drones from collection: ${l.join(", ")}`),console.error(`❌ Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(`❌ Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),s=i.map(l=>l.name).join(", ");return console.log(`🤖 AI selected drones: ${s}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(p=>n.preferredDrones.includes(p.name)),u=Math.min(3,l.length);r=l.slice(0,u),console.log(`🎯 AI selected ${r.length} preferred drones:`,r.map(p=>p.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((p,f)=>{const h=(p.energyCost||1)+(p.health||0)+(p.attack||0);return(f.energyCost||1)+(f.health||0)+(f.attack||0)-h});const l=r?.aggression||.5,u=r?.economy||.5;for(let p=0;p<n&&s.length>0;p++){let f=0;if(l>.7)f=s.findIndex(h=>(h.attack||0)>2),f===-1&&(f=0);else if(u>.7)f=s.findIndex(h=>(h.energyCost||1)<=2),f===-1&&(f=0);else{const h=Math.min(3,s.length);f=Math.floor(Math.random()*h)}i.push(s.splice(f,1)[0])}return console.log(`🎯 AI balanced selection (${n}):`,i.map(p=>p.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(`🎯 Using ${n.name} personality decklist`);const{gameEngine:i}=await Gr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>Pc);return{gameEngine:s}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log("🎯 Using standard deck as fallback");const{gameEngine:i,startingDecklist:s}=await Gr(async()=>{const{gameEngine:l,startingDecklist:u}=await Promise.resolve().then(()=>Pc);return{gameEngine:l,startingDecklist:u}},void 0);r=i.buildDeckFromList(s)}return console.log(`✅ AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log("🤖 AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(`🎯 AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return console.log(`🤖 AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return console.log("🎯 AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return console.log("🎯 AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return console.log("🎯 AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(console.log("🤖 AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Gr(async()=>{const{aiBrain:s}=await import("./aiLogic-DoeoVKR2.js");return{aiBrain:s}},[]),{gameEngine:r}=await Gr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>Pc);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log("🤖 AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(console.log("🤖 AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Gr(async()=>{const{aiBrain:s}=await import("./aiLogic-DoeoVKR2.js");return{aiBrain:s}},[]),{gameEngine:r}=await Gr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>Pc);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});return console.log("🤖 AIPhaseProcessor executing action decision:",i),i.type==="pass"?(await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}),null):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(console.log("🤖 AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await Gr(async()=>{const{gameEngine:h}=await Promise.resolve().then(()=>Pc);return{gameEngine:h}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return console.log("🤖 AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},p=[];if(u.hand.length>l){const h=u.hand.length-l;p=u.hand.slice(0,h),u={...u,hand:u.hand.slice(h),discardPile:[...u.discardPile,...p]},console.log(`🤖 AI discarding ${h} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const f=u.hand.length-(r.hand.length-p.length);return f>0&&console.log(`🤖 AI drew ${f} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:p,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(console.log("🤖 AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return console.log("🤖 AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];return u=[...n.hand].sort((f,h)=>h.cost-f.cost).slice(0,l),console.log(`🤖 AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(console.log("🤖 AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return console.log("🤖 AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let p=[];const f=[];return Object.entries(n.dronesOnBoard||{}).forEach(([h,m])=>{m.forEach(g=>{f.push({...g,lane:h})})}),f.sort((h,m)=>{const g=this.gameDataService.getEffectiveStats(h,h.lane),b=this.gameDataService.getEffectiveStats(m,m.lane);return g.power-b.power}),p=f.slice(0,u),console.log(`🤖 AI removing ${p.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:p,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log("🤖 AI has already passed"),!0):!1}async executePass(t){return console.log(`🏳️ AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}async executeShieldAllocationTurn(t){if(console.log("🤖 AIPhaseProcessor.executeShieldAllocationTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");t.player2;const n=t.opponentPlacedSections,r=t.opponentShieldsToAllocate||0;if(r===0){console.log("🤖 AI has no shields to allocate");return}const i=n.map(u=>u.name);if(i.length===0){console.log("🤖 AI has no placed sections to allocate shields to");return}let s=r,l=0;for(console.log(`🤖 AI distributing ${r} shields evenly across ${i.length} sections`);s>0;){const u=i[l];await this.actionProcessor.queueAction({type:"addShield",payload:{sectionName:u,playerId:"player2"}}),s--,l=(l+1)%i.length,console.log(`🤖 AI allocated shield to ${u}, ${s} remaining`)}console.log("✅ AI shield allocation complete")}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||t.winner||t.gameStage==="gameOver"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(console.log(`⏰ AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn()},1500)))}async executeTurn(){if(this.isProcessing){console.log("⚠️ AIPhaseProcessor: Already processing a turn, skipping");return}const t=this.gameStateManager.getState();if(t.currentPlayer!=="player2"){console.log("⚠️ AIPhaseProcessor: Turn changed before execution, cancelling AI turn");return}if(t.passInfo&&t.passInfo.player2Passed){console.log("⚠️ AIPhaseProcessor: AI has already passed, cancelling turn");return}if(!["deployment","action"].includes(t.turnPhase)){console.log("⚠️ AIPhaseProcessor: Phase changed to non-sequential, cancelling turn");return}this.isProcessing=!0;try{console.log(`🤖 AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let r;if(t.turnPhase==="deployment")r=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")r=await this.executeActionTurn(t);else{console.warn(`⚠️ AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}if(r?.needsInterceptionDecision){console.log("🛡️ AIPhaseProcessor: AI attack needs human interception decision, pausing turn loop"),this.isProcessing=!1;return}const i=this.gameStateManager.getState();i.currentPlayer==="player2"&&i.passInfo&&!i.passInfo.player2Passed&&(console.log("🔄 AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(i)},100))}catch(r){console.error("❌ AIPhaseProcessor: Error executing turn:",r)}finally{this.isProcessing=!1}}async makeInterceptionDecision(t,n){if(!this.isInitialized)throw new Error("AIPhaseProcessor not initialized");console.log("🤖 AIPhaseProcessor.makeInterceptionDecision called:",{interceptorCount:t?.length||0,target:n.target?.name});const{aiBrain:r}=await Gr(async()=>{const{aiBrain:s}=await import("./aiLogic-DoeoVKR2.js");return{aiBrain:s}},[]),i=r.makeInterceptionDecision(t,n.target);return console.log("🤖 AI interception decision:",{willIntercept:!!i.interceptor,interceptorName:i.interceptor?.name}),i}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,interception:!0,version:"1.3.0"}}}const Hr=new ej;class Ra{static instance=null;static getInstance(t){return Ra.instance||(Ra.instance=new Ra(t)),Ra.instance}static reset(){Ra.instance=null,console.log("⚙️ ActionProcessor singleton reset")}constructor(t){if(Ra.instance)return console.warn("⚠️ ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),Ra.instance;this.gameStateManager=t,this.gameDataService=Ft.getInstance(t),this.animationManager=null,this.pendingAnimationsForBroadcast=[],this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},console.log("⚙️ ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const p=`${u}Passed`;if(s.passInfo[p])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return console.log("🛡️ Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return console.log("🔄 Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return console.log("🏁 Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);case"destroyDrone":return await this.processDestroyDrone(r);case"addShield":return await this.processAddShield(r);case"resetShields":return await this.processResetShields(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{i||this.broadcastStateToGuest(),this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections};let s={...n};if(!n.interceptor){const m=ke.calculateAiInterception(n,{player1:r.player1,player2:r.player2},i);if(m.hasInterceptors){const g=n.attackingPlayer==="player1"?"player2":"player1";if(this.gameStateManager.setState({interceptionPending:{attackDetails:n,defendingPlayerId:g,attackingPlayerId:n.attackingPlayer,interceptors:m.interceptors,timestamp:Date.now()}}),g==="player2"&&r.gameMode==="local"){if(console.log("🛡️ [INTERCEPTION] AI defender has interceptors"),await new Promise(b=>setTimeout(b,1e3)),this.aiPhaseProcessor){const b=await this.aiPhaseProcessor.makeInterceptionDecision(m.interceptors,n);console.log("🛡️ [INTERCEPTION] AI decision:",b.interceptor?"INTERCEPT":"DECLINE"),b.interceptor&&(s.interceptor=b.interceptor,this.gameStateManager.setState({lastInterception:{interceptor:b.interceptor,originalTarget:n.target,timestamp:Date.now()}}))}this.gameStateManager.setState({interceptionPending:null})}else return console.log("🛡️ [INTERCEPTION] Human defender has interceptors"),{needsInterceptionDecision:!0,interceptionData:{interceptors:m.interceptors,attackDetails:m.attackDetails}}}}const l=m=>{this.gameStateManager.addLogEntry(m,"resolveAttack",s.attackingPlayer==="player2"?s.aiContext:null)},u=()=>{},p=()=>{},f=ke.resolveAttack(s,{player1:r.player1,player2:r.player2},i,l,u,p),h=(f.animationEvents||[]).map(m=>({animationName:m.type,payload:{...m,droneId:m.sourceId}}));return console.log("[ANIMATION EVENTS] ActionProcessor received:",f.animationEvents),console.log("[ANIMATION EVENTS] Mapped to animations:",h),console.log("🎬 [AI ANIMATION DEBUG] Built animations array:",{count:h.length,animations:h.map(m=>({name:m.animationName,sourceId:m.payload.sourceId,targetId:m.payload.targetId})),hasAnimationManager:!!this.animationManager}),console.log("🎬 [AI ANIMATION DEBUG] Calling executeAndCaptureAnimations()"),await this.executeAndCaptureAnimations(h),console.log("🎬 [AI ANIMATION DEBUG] executeAndCaptureAnimations() completed"),this.gameStateManager.setPlayerStates(f.newPlayerStates.player1,f.newPlayerStates.player2),r.interceptionPending&&(console.log("🛡️ [INTERCEPTION] Clearing interceptionPending after attack completed"),this.gameStateManager.setState({interceptionPending:null})),this.checkWinCondition(),f.attackResult&&f.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),f}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const p=u.dronesOnBoard[r].findIndex(m=>m.id===n);if(p===-1)throw new Error(`Drone ${n} not found in ${r}`);const f=u.dronesOnBoard[r][p],h={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(m=>m.id!==n),[i]:[...u.dronesOnBoard[i],{...f,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:h}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:f.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),console.log(`✅ Moved ${f.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${f.name} moved from ${r} to ${i}`,drone:f,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null,f=null;if(Object.values(l).forEach(A=>{Object.values(A.dronesOnBoard).forEach(C=>{C.forEach(P=>{P.id===n&&(p=P),P.id===i&&(f=P)})})}),i&&typeof i=="string"&&i.startsWith("lane")&&!f&&(f={id:i}),!p||!p.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const h=p.abilities[r],m=A=>{this.gameStateManager.addLogEntry(A,"resolveAbility")},g=async A=>await this.processAttack({attackDetails:A}),b=ke.resolveAbility(h,p,f,l,u,m,g),S=(b.animationEvents||[]).map(A=>({animationName:A.type,payload:{...A,droneId:A.sourceId}}));if(await this.executeAndCaptureAnimations(S),this.gameStateManager.setPlayerStates(b.newPlayerStates.player1,b.newPlayerStates.player2),this.checkWinCondition(),b.shouldEndTurn){const A=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:A.currentPlayer==="player1"?"player2":"player1"})}return b}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,l=this.gameStateManager.getState(),u=l[i],f=l[i==="player1"?"player2":"player1"],h={player1:l.placedSections,player2:l.opponentPlacedSections},m=b=>{this.gameStateManager.addLogEntry(b)},g=ke.executeDeployment(n,r,s||l.turn,u,f,h,m,i);if(g.success){const b=g.deployedDrone?.id||n.id,S=(g.animationEvents||[]).map(O=>({animationName:O.type,payload:{...O,droneId:O.targetId}})),A={...g.newPlayerState,dronesOnBoard:{...g.newPlayerState.dronesOnBoard,[r]:g.newPlayerState.dronesOnBoard[r].map(O=>O.id===b?{...O,isTeleporting:!0}:O)}};i==="player1"?this.gameStateManager.updatePlayers(A,{}):this.gameStateManager.updatePlayers({},A),await new Promise(O=>setTimeout(O,50));const C=this.executeAndCaptureAnimations(S),P=this.animationManager?.animations?.TELEPORT_IN||{duration:600,config:{revealAt:.7}},T=P.duration*(P.config?.revealAt||.7);setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(g.newPlayerState,{}):this.gameStateManager.updatePlayers({},g.newPlayerState)},T),await C,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return g}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null;if(r){for(const g of["player1","player2"]){for(const b of["lane1","lane2","lane3"]){const A=(l[g].dronesOnBoard[b]||[]).find(C=>C.id===r);if(A){p={...A,owner:g};break}}if(p)break}if(!p)for(const g of["player1","player2"]){const b=l[g].shipSections;for(const S in b)if(b[S].id===r){p={...b[S],name:S,owner:g};break}if(p)break}!p&&r&&r.startsWith("lane")&&(p={id:r})}const f={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},h=ke.resolveCardPlay(n,p,i,l,u,f);console.log("[ANIMATION EVENTS] Card play events:",h.animationEvents);const m=(h.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));if(await this.executeAndCaptureAnimations(m),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),this.checkWinCondition(),h.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return h}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:s,toLane:l,playerId:u}=t,p=this.gameStateManager.getState(),f={player1:p.player1,player2:p.player2},h={player1:p.placedSections,player2:p.opponentPlacedSections},m={logCallback:b=>this.gameStateManager.addLogEntry(b),applyOnMoveEffectsCallback:ke.applyOnMoveEffects,updateAurasCallback:ke.updateAuras};let g;if(r==="single_move"){g=ke.resolveSingleMove(n,i[0],s,l,f[u],f[u==="player1"?"player2":"player1"],h,m);const b={...f,[u]:g.newPlayerState};this.gameStateManager.setPlayerStates(b.player1,b.player2)}else{g=ke.resolveMultiMove(n,i,s,l,f[u],f[u==="player1"?"player2":"player1"],h,m);const b={...f,[u]:g.newPlayerState};this.gameStateManager.setPlayerStates(b.player1,b.player2)}if(g.shouldEndTurn){const b=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:b.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:g.shouldEndTurn}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},p={player1:l.placedSections,player2:l.opponentPlacedSections},f={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},h=ke.resolveShipAbility(n,r,i,u,p,f),m=(h.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));if(await this.executeAndCaptureAnimations(m),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return h}checkWinCondition(){const t=this.gameStateManager.getState();if(t.winner)return null;const n={player1:t.player1,player2:t.player2},r={logCallback:s=>{this.gameStateManager.addLogEntry(s,"checkWinCondition")},setWinnerCallback:s=>{this.gameStateManager.setWinner(s)},showWinnerModalCallback:()=>{}};return ke.checkGameStateForWinner(n,r)}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=ke.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let p=r;u.passInfo&&u.passInfo[`${r}Passed`]?(p=u.currentPlayer,console.log(`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${p}`)):console.log(`[TURN TRANSITION DEBUG] Setting new player: ${p}`),this.gameStateManager.setCurrentPlayer(p)}const l=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return console.log(`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,console.log(`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const f=this.gameStateManager.getLocalPlayerId(),h=i[f],g=this.gameDataService.getEffectiveShipStats(h,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=g,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${g}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1});const u={determineFirstPlayer:"DETERMINING FIRST PLAYER",energyReset:"ENERGY RESET",mandatoryDiscard:"MANDATORY DISCARD PHASE",optionalDiscard:"OPTIONAL DISCARD PHASE",draw:"DRAW PHASE",allocateShields:"ALLOCATE SHIELDS",mandatoryDroneRemoval:"REMOVE EXCESS DRONES",deployment:"DEPLOYMENT PHASE",deploymentComplete:"DEPLOYMENT COMPLETE",action:"ACTION PHASE"};if(u[n]&&this.animationManager){console.log(`🎬 [PHASE ANNOUNCEMENT] Showing announcement for: ${n}`);const f={phaseText:u[n],phaseName:n,timestamp:Date.now()};(n==="deployment"||n==="action")&&(f.firstPlayerId=i.firstPlayerOfRound);const h={animationName:"PHASE_ANNOUNCEMENT",payload:f};await this.executeAndCaptureAnimations([h]),console.log(`🎬 [PHASE ANNOUNCEMENT] Announcement complete for: ${n}`)}console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase} → ${n}`);const p=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:p.turnPhase,placedSections:p.placedSections,opponentPlacedSections:p.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||ke.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),p=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),f=ke.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),h=ke.calculateNewRoundPlayerState(s.player2,n,p,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,firstPasserOfPreviousRound:s.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(f,h),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:f,player2:h}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const p=u.shipSections[r];if(!p||p.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const f={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},h={...u,shipSections:f};return this.gameStateManager.updatePlayerState(s,h),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:h}}else if(n==="add"){const p=s==="player1"?l.placedSections:l.opponentPlacedSections,f=ke.getEffectiveSectionMaxShields(r,u,p),h=u.shipSections[r];if(!h||h.allocatedShields>=f)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},g={...u,shipSections:m};return this.gameStateManager.updatePlayerState(s,g),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:g}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const p={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,p),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:p}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return console.log("🎬 [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",s),s.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const p=this.gameStateManager.getState(),f=!p.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",p.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:p.passInfo.firstPasser||(f?n:null)});const h=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",h),h.player1Passed&&h.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),p.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):p.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processGuestAction(t){if(this.gameStateManager.get("gameMode")!=="host"){console.warn("⚠️ processGuestAction should only be called by host");return}console.log("[HOST] Processing guest action:",t);const r=await this.queueAction({type:t.type,payload:t.payload,isNetworkAction:!0});return this.broadcastStateToGuest(),r}async executeAndCaptureAnimations(t){if(!t||t.length===0)return;this.gameStateManager.get("gameMode")==="host"&&this.pendingAnimationsForBroadcast.push(...t),this.animationManager&&await this.animationManager.executeAnimations(t)}getAndClearPendingAnimations(){const t=[...this.pendingAnimationsForBroadcast];return this.pendingAnimationsForBroadcast=[],t}broadcastStateToGuest(){if(this.gameStateManager.get("gameMode")==="host"&&this.p2pManager&&this.p2pManager.isConnected){const n=this.gameStateManager.getState(),r=this.getAndClearPendingAnimations();console.log("📡 [ANIMATION BROADCAST] Sending state with animations:",{animationCount:r.length,animations:r.map(i=>i.animationName)}),this.p2pManager.broadcastState(n,r)}}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=[{animationName:"PASS_NOTIFICATION",payload:{passingPlayerId:n}}];this.animationManager&&await this.animationManager.executeAnimations(u);const p=`${l}Passed`,f=`${n}Passed`,h=!s[p],m={...s,[f]:!0,firstPasser:s.firstPasser||(h?n:null)};if(console.log("[PLAYER PASS DEBUG] Updating pass info:",m),this.gameStateManager.setPassInfo(m,"ActionProcessor"),m.player1Passed&&m.player2Passed)console.log("[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let b=null;n==="player1"&&!m.player2Passed?b="player2":n==="player2"&&!m.player1Passed&&(b="player1"),b&&(console.log(`[PLAYER PASS DEBUG] Switching turn to ${b} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:b},"TURN_SWITCH","playerPass"))}return{success:!0,newPassInfo:m}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error("🔥 CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error("🔥 CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1}=t,s=this.gameStateManager.getState();if(console.log(`[OPTIONAL DISCARD DEBUG] Processing ${i?"mandatory":"optional"} discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const l=s[n];if(!l)throw new Error(`Player ${n} not found`);r.forEach(f=>{this.gameStateManager.addLogEntry({player:l.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:f.name,target:"N/A",outcome:`Discarded ${f.name}.`})});const u=l.hand.filter(f=>!r.some(h=>f.instanceId===h.instanceId)),p=[...l.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:u,discardPile:p}),console.log(`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){console.log("🎯 ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await Gr(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-C-yFl_SP.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),console.log(`✅ First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeDeploymentComplete(t){return console.log(`🎯 ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),console.log(`🔄 Cleared commitments for phase: ${t}`)):(n.commitments={},console.log("🔄 Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;if(console.log(`🤝 ActionProcessor: Processing ${r} commitment for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processCommitment - should send to host instead"),{success:!1,error:"Guest cannot process commitments locally"};const l=this.gameStateManager.getState();l.commitments[r]||(l.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),l.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:l.commitments},"COMMITMENT_UPDATE");const u=l.commitments[r].player1.completed&&l.commitments[r].player2.completed;return console.log(`✅ ${n} ${r} committed, both complete: ${u}`),n==="player1"&&l.gameMode==="local"&&(console.log("🤖 Single-player mode: Auto-completing AI commitment"),Hr&&setTimeout(async()=>{try{await this.handleAICommitment(r,l)}catch(p){console.error("AI commitment error:",p)}},100)),{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:u}}}async handleAICommitment(t,n){try{console.log(`🤖 Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await Hr.processDroneSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"droneSelection",actionData:{drones:r}}});break;case"deckSelection":r=await Hr.processDeckSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deckSelection",actionData:{deck:r}}});break;case"placement":r=await Hr.processPlacement(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"placement",actionData:{placedSections:r}}});break;case"mandatoryDiscard":r=await Hr.executeMandatoryDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"optionalDiscard":r=await Hr.executeOptionalDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"allocateShields":await Hr.executeShieldAllocationTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"allocateShields",actionData:{committed:!0}}});break;case"mandatoryDroneRemoval":r=await Hr.executeMandatoryDroneRemovalTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}}),i()},1e3)});break;case"deploymentComplete":console.log("🤖 AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}}),console.log("🤖 AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(`⚠️ No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(`⚠️ No commitments found for phase: ${t}`),{};console.log(`📋 ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),console.log("✅ Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,discard:[]}),console.log("✅ Applied deck selections to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),console.log("✅ Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":console.log("✅ First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":console.log("✅ Discard commitments (handled via card actions)");break;case"allocateShields":console.log("✅ Shield allocation (handled separately)");break;case"deploymentComplete":console.log("✅ Deployment complete acknowledgments (no state changes)");break;case"determineFirstPlayer":console.log("✅ First player determination (handled by GameFlowManager)");break;default:console.warn(`⚠️ No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return console.log("🃏 ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}=t;return console.log("⚡ ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),i!==void 0&&this.gameStateManager.setState({shieldsToAllocate:i}),s!==void 0&&this.gameStateManager.setState({opponentShieldsToAllocate:s}),console.log(`✅ Energy reset complete - Shields to allocate: ${i||0}, ${s||0}`),{success:!0,message:"Energy reset completed",player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}}async processDestroyDrone(t){const{droneId:n,playerId:r}=t;if(console.log(`💥 ActionProcessor: Processing drone destruction for ${r}, drone ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processDestroyDrone - should send to host instead"),{success:!1,error:"Guest cannot destroy drones locally"};const s=this.gameStateManager.getState(),l=s[r];if(!l)return{success:!1,error:`Player ${r} not found`};const u=ke.getLaneOfDrone(n,l);if(!u)return{success:!1,error:`Drone ${n} not found on board`};const p=l.dronesOnBoard[u].find(S=>S.id===n);if(!p)return{success:!1,error:`Drone ${n} not found in lane ${u}`};let f={...l,dronesOnBoard:{...l.dronesOnBoard}};f.dronesOnBoard[u]=f.dronesOnBoard[u].filter(S=>S.id!==n);const h=ke.onDroneDestroyed(f,p);Object.assign(f,h);const g=s[r==="player1"?"player2":"player1"],b={player1:s.placedSections,player2:s.opponentPlacedSections};return f.dronesOnBoard=ke.updateAuras(f,g,b),this.gameStateManager.updatePlayerState(r,f),console.log(`✅ Drone ${n} destroyed successfully from ${u}`),{success:!0,message:`Drone destroyed from ${u}`,droneId:n,lane:u,droneName:p.name}}async processAddShield(t){const{sectionName:n,playerId:r}=t;if(console.log(`🛡️ ActionProcessor: Processing shield addition for ${r}, section ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processAddShield - should send to host instead"),{success:!1,error:"Guest cannot add shields locally"};const s=this.gameStateManager.getState(),l=r==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate",u=ke.processShieldAllocation({...s,shieldsToAllocate:s[l]},r,n);return u.success?(this.gameStateManager.updatePlayerState(r,u.newPlayerState),this.gameStateManager.setState({[l]:u.newShieldsToAllocate}),console.log(`✅ Shield added to ${n}, ${u.newShieldsToAllocate} shields remaining`),{success:!0,message:`Shield added to ${n}`,sectionName:n,shieldsRemaining:u.newShieldsToAllocate}):(console.warn(`⚠️ Shield allocation failed: ${u.error}`),u)}async processResetShields(t){const{playerId:n}=t;if(console.log(`🔄 ActionProcessor: Processing shield allocation reset for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processResetShields - should send to host instead"),{success:!1,error:"Guest cannot reset shields locally"};const i=this.gameStateManager.getState(),s=ke.processResetShieldAllocation(i,n);if(!s.success)return console.warn(`⚠️ Shield reset failed: ${s.error}`),s;this.gameStateManager.updatePlayerState(n,s.newPlayerState);const l=n==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate";return this.gameStateManager.setState({[l]:s.newShieldsToAllocate}),console.log(`✅ Shield allocation reset, ${s.newShieldsToAllocate} shields available`),{success:!0,message:"Shield allocation reset",shieldsToAllocate:s.newShieldsToAllocate}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}class tj{constructor(t){this.gameStateManager=t,this.messageQueue=[],this.isProcessing=!1,this.renderCompletePromise=null,this.renderCompleteResolve=null}initialize(t){console.log("🎯 [GUEST QUEUE] Initializing GuestMessageQueueService"),t.subscribe(n=>{n.type==="state_update_received"&&(console.log("📥 [GUEST QUEUE] Received state update, queuing for processing"),this.enqueueMessage(n))}),this.gameStateManager.subscribe(n=>{n.type==="render_complete"&&(console.log("✅ [GUEST QUEUE] Render complete received"),this.renderCompleteResolve&&(this.renderCompleteResolve(),this.renderCompleteResolve=null,this.renderCompletePromise=null))})}enqueueMessage(t){console.log("📝 [GUEST QUEUE] Enqueuing message:",{type:t.type,queueLength:this.messageQueue.length+1}),this.messageQueue.push(t),this.processQueue()}async processQueue(){if(this.isProcessing){console.log("⏸️ [GUEST QUEUE] Already processing, queue length:",this.messageQueue.length);return}for(this.isProcessing=!0,console.log("▶️ [GUEST QUEUE] Starting queue processing");this.messageQueue.length>0;){const t=this.messageQueue.shift();console.log("🔄 [GUEST QUEUE] Processing message:",{type:t.type,remaining:this.messageQueue.length}),await this.processMessage(t)}this.isProcessing=!1,console.log("⏹️ [GUEST QUEUE] Queue processing complete")}async processMessage(t){switch(t.type){case"state_update_received":await this.processStateUpdate(t.data);break;default:console.warn("⚠️ [GUEST QUEUE] Unknown message type:",t.type)}}async processStateUpdate({state:t,animations:n}){console.log("📊 [GUEST QUEUE] Processing state update:",{turnPhase:t?.turnPhase,hasAnimations:n?.length>0,animationCount:n?.length||0});const i=this.gameStateManager.hasRecentOptimisticActions()&&n&&n.length>0;i&&console.log("🔮 [GUEST QUEUE] Skipping animations - already played optimistically");const s=n&&n.length>0&&!i;let l=null;s&&(console.log("🔧 [GUEST QUEUE] Setting up render listener for animations..."),l=this.waitForRender()),console.log("📝 [GUEST QUEUE] Applying state..."),this.gameStateManager.applyHostState(t),s&&l?(console.log("⏳ [GUEST QUEUE] Waiting for React render before animations..."),await l,console.log("✅ [GUEST QUEUE] React render complete"),this.gameStateManager.actionProcessor?.animationManager&&(console.log("🎬 [GUEST QUEUE] Executing animations..."),await this.gameStateManager.actionProcessor.animationManager.executeAnimations(n),console.log("✅ [GUEST QUEUE] Animations complete"))):console.log("⚡ [GUEST QUEUE] No animations - state applied immediately without render wait"),console.log("✅ [GUEST QUEUE] State update processing complete")}async waitForRender(){return this.renderCompletePromise?this.renderCompletePromise:(this.renderCompletePromise=new Promise(t=>{this.renderCompleteResolve=t}),this.renderCompletePromise)}getStatus(){return{queueLength:this.messageQueue.length,isProcessing:this.isProcessing,waitingForRender:!!this.renderCompletePromise}}}const sT=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(`🎲 Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(`🎯 Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},nj=(e,t=3)=>{if(!e||e.length===0)return console.warn("⚠️ No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(`🔄 Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(`📦 Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class rj{constructor(){console.log("🔄 GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.optimisticActions=[],this.optimisticActionTimeout=2e3,this.state={appState:"menu",isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=Ra.getInstance(this),this.gameFlowManager=null,this.guestQueueService=null,this.p2pIntegrationSetup=!1,console.log("🔄 GAMESTATE INITIALIZATION: GameStateManager created"),console.log("📱 App State:",this.state.appState),console.log("🎮 Game Active:",this.state.gameActive),console.log("✅ GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost),n.data.mode==="guest"&&!this.guestQueueService&&(console.log("🎯 [GUEST QUEUE] Initializing service for guest mode"),this.guestQueueService=new tj(this),this.guestQueueService.initialize(t));break;case"state_update_received":this.state.gameMode==="guest"&&(this.guestQueueService||(console.warn("⚠️ [GUEST QUEUE] Service not initialized, applying state directly (fallback)"),this.applyHostState(n.data.state)));break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}applyHostState(t){if(this.state.gameMode!=="guest"){console.warn("⚠️ applyHostState should only be called in guest mode");return}console.log("[GUEST STATE UPDATE] Applying state from host:",{turnPhase:t.turnPhase,currentPlayer:t.currentPlayer,roundNumber:t.roundNumber});const n=this.state.gameMode;this.state={...t},this.state.gameMode=n,this.emit("HOST_STATE_UPDATE",{hostState:t})}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),p=l.some(A=>A.includes("App.jsx")),f=l.some(A=>A.includes("ActionProcessor")),h=l.some(A=>A.includes("PhaseManager")),m=f||h;p&&!m&&(console.error("🚨 ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error("📋 App.jsx should only call ActionProcessor or PhaseManager methods"),console.error("🔍 Stack trace:",s));const g=Object.keys(t),b=`${u.primaryCaller} in ${u.primaryFile}`;console.log(`🔍 GAMESTATE CHANGE [${n}] from ${b}:`,{changedKeys:g,allUpdates:t,architectureViolation:p&&!m});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,b,n),g.forEach(A=>{if(!["player1","player2"].includes(A)){const C=i[A],P=t[A];JSON.stringify(C)!==JSON.stringify(P)&&console.log(`🔍 STATE CHANGE: ${A}`,{before:C,after:P,caller:b,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(m=>m in t),p=i&&i.includes("GameFlowManager"),f=r==="phaseTransition"||t.turnPhase&&p;u&&!(f&&p)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:p,isPhaseTransition:f,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(p=>{i.has(p.id)&&console.error(`Duplicate drone ID detected: ${p.id} in player${l+1}`),i.add(p.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(console.log("🔍 Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){console.log("✅ Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],p=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],f=Object.keys(t).filter(P=>u.includes(P)),h=Object.keys(t).filter(P=>p.includes(P)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const g=f.every(P=>["player1","player2"].includes(P)),b=f.every(P=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(P));if(m&&(g||b))return;const S=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),C=f.length===1&&f[0]==="passInfo";if(!(S&&A&&C)){if(f.length>0&&!r){const P=i?.split(`
`)||[],T=P.find(O=>O.includes(".jsx")&&!O.includes("GameStateManager"))||P[2]||"Unknown";console.warn("⚠️ ActionProcessor bypass detected: Critical game state updated directly",{updates:f,turnPhase:n.turnPhase,caller:T.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug("🐛 ActionProcessor bypass debug info:",{stackTrace:P.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}h.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];console.log(`🚨 PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(f=>{const h=l?l[f]:void 0,m=u?u[f]:void 0;if(JSON.stringify(h)!==JSON.stringify(m))if(f==="energy"||f==="deploymentBudget"||f==="initialDeploymentBudget")console.log(`  💰 ${f}: ${h} → ${m}`),(m==null||isNaN(m))&&console.error(`  🚨 WARNING: ${f} became ${m}!`);else if(f==="activeDronePool"){const g=Array.isArray(h)?h.length:"undefined",b=Array.isArray(m)?m.length:"undefined";let S,A;if(Array.isArray(h))try{S=h.map(C=>C?.name||"UNNAMED").join(",")}catch(C){S=`ERROR_MAPPING_OLD: ${C.message}`}else S="undefined";if(Array.isArray(m))try{A=m.map(C=>C?.name||"UNNAMED").join(",")}catch(C){A=`ERROR_MAPPING_NEW: ${C.message}`}else A="undefined";if(console.log(`  🤖 ${f}: [${g} drones] → [${b} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(console.log("    🔍 Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("    🔍 First drone object:",m[0])),g!==b||S!==A){const C=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`    📍 Update source:
${C}`)}}else if(f==="hand"||f==="deck"){const g=Array.isArray(h)?h.length:"undefined",b=Array.isArray(m)?m.length:"undefined";console.log(`  🃏 ${f}: [${g} cards] → [${b} cards]`)}else if(f==="dronesOnBoard"){const g=h?`L1:${h.lane1?.length||0} L2:${h.lane2?.length||0} L3:${h.lane3?.length||0}`:"undefined",b=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`  🛸 ${f}: ${g} → ${b}`)}else console.log(`  📝 ${f}:`,{before:h,after:m})}),console.log(`🔍 Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],p=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],f=l.functions.filter(m=>u.some(g=>m.toLowerCase().includes(g.toLowerCase()))),h=l.functions.filter(m=>p.some(g=>m.toLowerCase().includes(g.toLowerCase())));f.length>0&&h.length===0&&(console.warn("🚨 Inappropriate function updating game state:",{inappropriateFunctions:f,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI → ActionProcessor → gameLogic.js → GameStateManager"}),console.debug("🔍 Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:f,appropriateFound:h,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const p of r){const f=u[p];if(!f)continue;const h=Array.isArray(f)?f:[f];let m=!1;for(const g of h)(g==="GameFlowManager"&&i||g==="SequentialPhaseManager"&&s||g==="ActionProcessor"&&l)&&(m=!0);if(!m){const g=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(`🚨 OWNERSHIP VIOLATION: ${g} cannot update '${p}'`,{updateKey:p,currentManager:g,allowedOwners:h,updates:r,recommendation:`Only ${h.join(" or ")} should update '${p}'`})}}}reset(){console.log("🔄 GAME RESET: Resetting game state and clearing caches");const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:ke.initialPlayerState("Player 1",Ks),player2:ke.initialPlayerState("Player 2",Ks),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),Ft.reset(),this.actionProcessor.clearQueue(),console.log("✅ GAME RESET: State, cache, and queue cleared")}startGame(t="local",n={},r={}){console.log("🎮 GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...ke.initialPlayerState(n.name||"Player 1",n.decklist||Ks),...n},player2:{...ke.initialPlayerState(r.name||"Player 2",r.decklist||Ks),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{}},s=sT(Pn);i.droneSelectionPool=s.droneSelectionPool,i.droneSelectionTrio=s.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log("👤 Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log("👤 Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log("✅ GAME START: Game session initialized successfully")}endGame(){console.log("🎮 GAME END: Ending current game session and clearing caches"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),Ft.reset(),this.actionProcessor.clearQueue(),console.log("✅ GAME END: Returned to menu state, cache and queue cleared")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log("🔍 [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}trackOptimisticAction(t,n){const r={type:t,payload:n,timestamp:Date.now(),id:`${t}-${Date.now()}-${Math.random()}`};this.optimisticActions.push(r),console.log("🔮 [OPTIMISTIC] Tracked action:",t,"Total tracked:",this.optimisticActions.length),setTimeout(()=>{this.optimisticActions=this.optimisticActions.filter(i=>i.id!==r.id),console.log("🧹 [OPTIMISTIC] Cleared old action:",t,"Remaining:",this.optimisticActions.length)},this.optimisticActionTimeout)}hasRecentOptimisticActions(){return this.optimisticActions.length>0}clearOptimisticActions(){console.log("🧹 [OPTIMISTIC] Clearing all actions"),this.optimisticActions=[]}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Re=new rj;class aj{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return ij(t).buffer}}function ij(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function lT(e){return new oj(e).unpack()}function cT(e){const t=new sj,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class oj{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class sj{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,p=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(p)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new aj,this._textEncoder=new TextEncoder}}let uT=!0,dT=!0;function Rc(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function Bo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const p=f=>{const h=n(f);h&&(u.handleEvent?u.handleEvent(h):u(h))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,p),i.apply(this,[l,p])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const p=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,p])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function lj(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(uT=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function cj(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(dT=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function fT(){if(typeof window=="object"){if(uT)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function X0(e,t){dT&&console.warn(e+" is deprecated, please use "+t+" instead.")}function uj(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Rc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Rc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Rc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Rc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function mA(e){return Object.prototype.toString.call(e)==="[object Object]"}function pT(e){return mA(e)?Object.keys(e).reduce(function(t,n){const r=mA(e[n]),i=r?pT(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function Hy(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Hy(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Hy(e,e.get(i),n)})}))}function gA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&Hy(e,u,i)})}),i}const yA=fT;function hT(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const p={};return Object.keys(u).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const h=typeof u[f]=="object"?u[f]:{ideal:u[f]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const m=function(g,b){return g?g+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(h.ideal!==void 0){p.optional=p.optional||[];let g={};typeof h.ideal=="number"?(g[m("min",f)]=h.ideal,p.optional.push(g),g={},g[m("max",f)]=h.ideal,p.optional.push(g)):(g[m("",f)]=h.ideal,p.optional.push(g))}h.exact!==void 0&&typeof h.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[m("",f)]=h.exact):["min","max"].forEach(g=>{h[g]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[m(g,f)]=h[g])})}),u.advanced&&(p.optional=(p.optional||[]).concat(u.advanced)),p},i=function(u,p){if(t.version>=61)return p(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const f=function(h,m,g){m in h&&!(g in h)&&(h[g]=h[m],delete h[m])};u=JSON.parse(JSON.stringify(u)),f(u.audio,"autoGainControl","googAutoGainControl"),f(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let f=u.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const h=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete u.video.facingMode;let m;if(f.exact==="environment"||f.ideal==="environment"?m=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(S=>S.kind==="videoinput");let b=g.find(S=>m.some(A=>S.label.toLowerCase().includes(A)));return!b&&g.length&&m.includes("back")&&(b=g[g.length-1]),b&&(u.video.deviceId=f.exact?{exact:b.deviceId}:{ideal:b.deviceId}),u.video=r(u.video),yA("chrome: "+JSON.stringify(u)),p(u)})}u.video=r(u.video)}return yA("chrome: "+JSON.stringify(u)),p(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,p,f){i(u,h=>{n.webkitGetUserMedia(h,p,m=>{f&&f(s(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(p){return i(p,f=>u(f).then(h=>{if(f.audio&&!h.getAudioTracks().length||f.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function mT(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function gT(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Bo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function yT(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,p){let f=i.apply(this,arguments);return f||(f=t(this,u),this._senders.push(f)),f};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const p=this._senders.indexOf(u);p!==-1&&this._senders.splice(p,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(p=>p.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function vT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>gA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Bo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>gA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function bT(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(p)===-1&&this._shimmedLocalStreams[u.id].push(p):this._shimmedLocalStreams[u.id]=[u,p],p};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(m=>m.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const p=this.getSenders().filter(f=>u.indexOf(f)===-1);this._shimmedLocalStreams[l.id]=[l].concat(p)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const p=this._shimmedLocalStreams[u].indexOf(l);p!==-1&&this._shimmedLocalStreams[u].splice(p,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function xT(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return bT(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(m=>{if(this.getSenders().find(b=>b.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const m=new e.MediaStream(h.getTracks());this._streams[h.id]=m,this._reverseStreams[m.id]=h,h=m}r.apply(this,[h])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(A=>A===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([h]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===h)};function s(f,h){let m=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const b=f._reverseStreams[g],S=f._streams[b.id];m=m.replace(new RegExp(S.id,"g"),b.id)}),new RTCSessionDescription({type:h.type,sdp:m})}function l(f,h){let m=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const b=f._reverseStreams[g],S=f._streams[b.id];m=m.replace(new RegExp(b.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:m})}["createOffer","createAnswer"].forEach(function(f){const h=e.RTCPeerConnection.prototype[f],m={[f](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[S=>{const A=s(this,S);g[0].apply(null,[A])},S=>{g[1]&&g[1].apply(null,S)},arguments[2]]):h.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[f]=m[f]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const f=p.get.apply(this);return f.type===""?f:s(this,f)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(A=>h.track===A)&&(g=this._streams[b])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function qy(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function ST(e,t){Bo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const vA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:ST,shimAddTrackRemoveTrack:xT,shimAddTrackRemoveTrackWithNative:bT,shimGetSendersWithDtmf:yT,shimGetUserMedia:hT,shimMediaStream:mT,shimOnTrack:gT,shimPeerConnection:qy,shimSenderReceiverGetStats:vT},Symbol.toStringTag,{value:"Module"}));function AT(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){X0("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,p){u in l&&!(p in l)&&(l[p]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function dj(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function ET(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Yy(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(p=>{if(t.version<53&&!l)try{p.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;p.forEach((h,m)=>{p.set(m,Object.assign({},h,{type:n[h.type]||h.type}))})}return p}).then(l,u)}}function CT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function PT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Bo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function wT(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){X0("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function TT(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function OT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function _T(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function DT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function NT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const bA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:OT,shimCreateAnswer:NT,shimCreateOffer:DT,shimGetDisplayMedia:dj,shimGetParameters:_T,shimGetUserMedia:AT,shimOnTrack:ET,shimPeerConnection:Yy,shimRTCDataChannel:TT,shimReceiverGetStats:PT,shimRemoveStream:wT,shimSenderGetStats:CT},Symbol.toStringTag,{value:"Module"}));function kT(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function MT(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function jT(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(f,h){const m=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[m]);return h?(g.then(f,h),Promise.resolve()):g},t.createAnswer=function(f,h){const m=arguments.length>=2?arguments[2]:arguments[0],g=r.apply(this,[m]);return h?(g.then(f,h),Promise.resolve()):g};let u=function(p,f,h){const m=i.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m};t.setLocalDescription=u,u=function(p,f,h){const m=s.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m},t.setRemoteDescription=u,u=function(p,f,h){const m=l.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m},t.addIceCandidate=u}function RT(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(IT(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function IT(e){return e&&e.video!==void 0?Object.assign({},e,{video:pT(e.video)}):e}function LT(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(X0("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function $T(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function BT(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function UT(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const xA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:UT,shimCallbacksAPI:jT,shimConstraints:IT,shimCreateOfferLegacy:BT,shimGetUserMedia:RT,shimLocalStreamsAPI:kT,shimRTCIceServerUrls:LT,shimRemoteStreamsAPI:MT,shimTrackEventTransceiver:$T},Symbol.toStringTag,{value:"Module"}));var rg={exports:{}},SA;function fj(){return SA||(SA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const p=s[u],f=t.matchPrefix(n,"a=rtpmap:"+p+" ")[0];if(f){const h=t.parseRtpMap(f),m=t.matchPrefix(n,"a=fmtp:"+p+" ");switch(h.parameters=m.length?t.parseFmtp(m[0]):{},h.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+p+" ").map(t.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(p=>{u.rtcpFeedback.find(h=>h.type===p.type&&h.parameter===p.parameter)||u.rtcpFeedback.push(p)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(g=>t.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),p=u.length>0&&u[0].ssrc;let f;const h=t.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(S=>parseInt(S,10)));h.length>0&&h[0].length>1&&h[0][0]===p&&(f=h[0][1]),i.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let b={ssrc:p,codecPayloadType:parseInt(g.parameters.apt,10)};p&&f&&(b.rtx={ssrc:f}),r.push(b),s&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:p,mechanism:l?"red+ulpfec":"red"},r.push(b))}}),r.length===0&&p&&r.push({ssrc:p});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(g=>{g.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const p=u[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(rg)),rg.exports}var zT=fj();const Zs=Fr(zT),pj=Lw({__proto__:null,default:Zs},[zT]);function ef(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=Zs.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Bo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Fy(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Bo(e,"icecandidate",t=>{if(t.candidate){const n=Zs.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function tf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const p=Zs.splitSections(u.sdp);return p.shift(),p.some(f=>{const h=Zs.parseMLine(f);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(u){const p=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const f=parseInt(p[1],10);return f!==f?-1:f},i=function(u){let p=65536;return t.browser==="firefox"&&(t.version<57?u===-1?p=16384:p=2147483637:t.version<60?p=t.version===57?65535:65536:p=2147483637),p},s=function(u,p){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const h=Zs.matchPrefix(u.sdp,"a=max-message-size:");return h.length>0?f=parseInt(h[0].substring(19),10):t.browser==="firefox"&&p!==-1&&(f=2147483637),f},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const p=r(arguments[0]),f=i(p),h=s(arguments[0],p);let m;f===0&&h===0?m=Number.POSITIVE_INFINITY:f===0||h===0?m=Math.max(f,h):m=Math.min(f,h);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return m}}),this._sctp=g}return l.apply(this,arguments)}}function nf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],p=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&p>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Bo(e,"datachannel",r=>(t(r.channel,r.target),r))}function Vy(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Ky(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function rf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function af(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const hj=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Ky,shimAddIceCandidateNullOrEmpty:rf,shimConnectionState:Vy,shimMaxMessageSize:tf,shimParameterlessSetLocalDescription:af,shimRTCIceCandidate:ef,shimRTCIceCandidateRelayProtocol:Fy,shimSendThrowTypeError:nf},Symbol.toStringTag,{value:"Module"}));function mj({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=fT,r=uj(e),i={browserDetails:r,commonShim:hj,extractVersion:Rc,disableLog:lj,disableWarnings:cj,sdp:pj};switch(r.browser){case"chrome":if(!vA||!qy||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=vA,rf(e,r),af(e),hT(e,r),mT(e),qy(e,r),gT(e),xT(e,r),yT(e),vT(e),ST(e,r),ef(e),Fy(e),Vy(e),tf(e,r),nf(e),Ky(e,r);break;case"firefox":if(!bA||!Yy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=bA,rf(e,r),af(e),AT(e,r),Yy(e,r),ET(e),wT(e),CT(e),PT(e),TT(e),OT(e),_T(e),DT(e),NT(e),ef(e),Vy(e),tf(e,r),nf(e);break;case"safari":if(!xA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=xA,rf(e,r),af(e),LT(e),BT(e),jT(e),kT(e),MT(e),$T(e),RT(e),UT(e),ef(e),Fy(e),tf(e,r),nf(e),Ky(e,r);break;default:n("Unsupported browser!");break}return i}const AA=mj({window:typeof window>"u"?void 0:window});function Uo(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class GT{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),p=t.slice(l,u),f={__peerData:this._dataCount,n:s,data:p,total:i};n.push(f),l=u,s++}return this._dataCount++,n}}}function gj(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const ag=AA.default||AA,wc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return ag.browserDetails.browser}getVersion(){return ag.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=ag.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},yj=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),HT=()=>Math.random().toString(36).slice(2),EA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class vj extends GT{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=EA,this.browser=wc.getBrowser(),this.browserVersion=wc.getVersion(),this.pack=cT,this.unpack=lT,this.supports=(function(){const n={browser:wc.isBrowserSupported(),webRTC:wc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(EA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!wc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=yj,this.randomToken=HT}}const Yn=new vj,bj="PeerJS: ";class xj{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[bj,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ce=new xj,Q0={},Sj=Object.prototype.hasOwnProperty,In="~";function Gc(){}Object.create&&(Gc.prototype=Object.create(null),new Gc().__proto__||(In=!1));function Aj(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function qT(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new Aj(n,r||e,i),l=In?In+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function of(e,t){--e._eventsCount===0?e._events=new Gc:delete e._events[t]}function wn(){this._events=new Gc,this._eventsCount=0}wn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)Sj.call(n,r)&&t.push(In?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};wn.prototype.listeners=function(t){var n=In?In+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};wn.prototype.listenerCount=function(t){var n=In?In+t:t,r=this._events[n];return r?r.fn?1:r.length:0};wn.prototype.emit=function(t,n,r,i,s,l){var u=In?In+t:t;if(!this._events[u])return!1;var p=this._events[u],f=arguments.length,h,m;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),f){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,n),!0;case 3:return p.fn.call(p.context,n,r),!0;case 4:return p.fn.call(p.context,n,r,i),!0;case 5:return p.fn.call(p.context,n,r,i,s),!0;case 6:return p.fn.call(p.context,n,r,i,s,l),!0}for(m=1,h=new Array(f-1);m<f;m++)h[m-1]=arguments[m];p.fn.apply(p.context,h)}else{var g=p.length,b;for(m=0;m<g;m++)switch(p[m].once&&this.removeListener(t,p[m].fn,void 0,!0),f){case 1:p[m].fn.call(p[m].context);break;case 2:p[m].fn.call(p[m].context,n);break;case 3:p[m].fn.call(p[m].context,n,r);break;case 4:p[m].fn.call(p[m].context,n,r,i);break;default:if(!h)for(b=1,h=new Array(f-1);b<f;b++)h[b-1]=arguments[b];p[m].fn.apply(p[m].context,h)}}return!0};wn.prototype.on=function(t,n,r){return qT(this,t,n,r,!1)};wn.prototype.once=function(t,n,r){return qT(this,t,n,r,!0)};wn.prototype.removeListener=function(t,n,r,i){var s=In?In+t:t;if(!this._events[s])return this;if(!n)return of(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&of(this,s);else{for(var u=0,p=[],f=l.length;u<f;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&p.push(l[u]);p.length?this._events[s]=p.length===1?p[0]:p:of(this,s)}return this};wn.prototype.removeAllListeners=function(t){var n;return t?(n=In?In+t:t,this._events[n]&&of(this,n)):(this._events=new Gc,this._eventsCount=0),this};wn.prototype.off=wn.prototype.removeListener;wn.prototype.addListener=wn.prototype.on;wn.prefixed=In;wn.EventEmitter=wn;Q0=wn;var zo={};Uo(zo,"ConnectionType",()=>Di);Uo(zo,"PeerErrorType",()=>Rt);Uo(zo,"BaseConnectionErrorType",()=>Wy);Uo(zo,"DataConnectionErrorType",()=>Z0);Uo(zo,"SerializationType",()=>tp);Uo(zo,"SocketEventType",()=>_i);Uo(zo,"ServerMessageType",()=>An);var Di=(function(e){return e.Data="data",e.Media="media",e})({}),Rt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Wy=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Z0=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),tp=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),_i=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),An=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const YT="1.5.5";class Ej extends Q0.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+YT),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Ce.log("Server message received:",s)}catch{Ce.log("Invalid server message",i.data);return}this.emit(_i.Message,s)},this._socket.onclose=i=>{this._disconnected||(Ce.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(_i.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ce.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ce.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:An.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(_i.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class FT{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Di.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Ce.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Ce.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Ce.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:An.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Ce.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Wy.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Ce.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Wy.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Ce.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Ce.log("Listening for data channel"),t.ondatachannel=l=>{Ce.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},Ce.log("Listening for remote stream"),t.ontrack=l=>{Ce.log("Received remote stream");const u=l.streams[0],p=s.getConnection(n,r);if(p.type===Di.Media){const f=p;this._addStreamToMediaConnection(u,f)}}}cleanup(){Ce.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Ce.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Di.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:An.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Rt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Rt.WebRTC,r),Ce.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Ce.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:An.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Rt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Rt.WebRTC,r),Ce.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Ce.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Ce.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Rt.WebRTC,l),Ce.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Ce.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Ce.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Rt.WebRTC,n),Ce.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Ce.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Ce.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Ce.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class VT extends Q0.EventEmitter{emitError(t,n){Ce.error("Error:",n),this.emit("error",new Cj(`${t}`,n))}}class Cj extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class KT extends VT{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class df extends KT{static#e=this.ID_PREFIX="mc_";get type(){return Di.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||df.ID_PREFIX+Yn.randomToken(),this._negotiator=new FT(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Ce.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case An.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case An.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ce.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Ce.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Pj{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",YT),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Ce.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Yn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Yn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Ce.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class ff extends KT{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Di.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||ff.ID_PREFIX+HT(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new FT(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Ce.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Z0.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case An.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case An.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Ce.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class J0 extends ff{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>ff.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Ce.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class ig extends J0{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new GT,this.serialization=tp.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=lT(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=gj(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=cT(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Ce.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class wj extends J0{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=tp.None}}class Tj extends J0{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Yn.chunkedMTU){this.emitError(Z0.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=tp.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class ev extends VT{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:wj,json:Tj,binary:ig,"binary-utf8":ig,default:ig},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Yn.CLOUD_HOST,port:Yn.CLOUD_PORT,path:"/",key:ev.DEFAULT_KEY,token:Yn.randomToken(),config:Yn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Yn.CLOUD_HOST?this._options.secure=Yn.isSecure():this._options.host==Yn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ce.setLogFunction(this._options.logFunction),Ce.logLevel=this._options.debug||0,this._api=new Pj(n),this._socket=this._createServerConnection(),!Yn.supports.audioVideo&&!Yn.supports.data){this._delayedAbort(Rt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Yn.validateId(r)){this._delayedAbort(Rt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Rt.ServerError,i))}_createServerConnection(){const t=new Ej(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(_i.Message,n=>{this._handleMessage(n)}),t.on(_i.Error,n=>{this._abort(Rt.SocketError,n)}),t.on(_i.Disconnected,()=>{this.disconnected||(this.emitError(Rt.Network,"Lost connection to server."),this.disconnect())}),t.on(_i.Close,()=>{this.disconnected||this._abort(Rt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case An.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case An.Error:this._abort(Rt.ServerError,r.msg);break;case An.IdTaken:this._abort(Rt.UnavailableID,`ID "${this.id}" is taken`);break;case An.InvalidKey:this._abort(Rt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case An.Leave:Ce.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case An.Expire:this.emitError(Rt.PeerUnavailable,`Could not connect to peer ${i}`);break;case An.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),Ce.warn(`Offer received for existing Connection ID:${s}`)),r.type===Di.Media){const p=new df(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=p,this._addConnection(i,l),this.emit("call",p)}else if(r.type===Di.Data){const p=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=p,this._addConnection(i,l),this.emit("connection",p)}else{Ce.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const p of u)l.handleMessage(p);break}default:{if(!r){Ce.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):Ce.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Rt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Rt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Ce.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new df(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Ce.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Ce.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ce.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Ce.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Ce.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ce.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Rt.ServerError,n))}}var CA=ev;class Oj{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new CA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new CA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"STATE_UPDATE":console.log("[P2P GUEST] Received state update with animations:",{hasAnimations:t.animations&&t.animations.length>0,animationCount:t.animations?.length||0}),this.emit("state_update_received",{state:t.state,animations:t.animations||[]});break;case"GUEST_ACTION":this.actionProcessor?await this.actionProcessor.processGuestAction(t.action):console.error("ActionProcessor not set - cannot process guest action");break;case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}broadcastState(t,n=[]){if(!this.isHost){console.warn("Only host can broadcast state");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"STATE_UPDATE",state:t,animations:n,timestamp:Date.now()}),console.log("[P2P HOST] Broadcasted state update to guest",{hasAnimations:n.length>0,animationCount:n.length})}catch(r){console.error("Failed to broadcast state:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot broadcast state - no connection available")}sendActionToHost(t,n){if(this.isHost){console.warn("Host should not send actions to itself");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"GUEST_ACTION",action:{type:t,payload:n},timestamp:Date.now()}),console.log("[P2P GUEST] Sent action to host:",t)}catch(r){console.error("Failed to send action to host:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot send action - no connection to host")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const jn=new Oj,Xy=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},_j=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Drawing up to Hand Limit",draw:"Drawing up to Hand Limit",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,Dj=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],Nj=["deployment","action"],kj=e=>Dj.includes(e),PA=e=>Nj.includes(e),Ri=()=>{const[e,t]=E.useState(Re.getState()),[n,r]=E.useState(jn.getStatus());E.useEffect(()=>{Re.setupP2PIntegration(jn)},[]),E.useEffect(()=>Re.subscribe(L=>{L.type!=="render_complete"&&t(Re.getState())}),[]),E.useEffect(()=>jn.subscribe(L=>{r(jn.getStatus())}),[]);const i=E.useCallback(()=>Re.isMyTurn(),[e.currentPlayer,e.gameMode]),s=E.useCallback(()=>Re.getLocalPlayerId(),[e.gameMode]),l=E.useCallback(()=>Re.getOpponentPlayerId(),[e.gameMode]),u=E.useCallback(()=>e.gameMode!=="local",[e.gameMode]),p=E.useCallback(()=>u()&&!i(),[u,i]),f=E.useCallback(()=>Re.getLocalPlayerState(),[e.gameMode]),h=E.useCallback(()=>Re.getOpponentPlayerState(),[e.gameMode]),m=E.useCallback(ne=>Re.isLocalPlayer(ne),[e.gameMode]),g=E.useCallback(()=>Re.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),b=E.useCallback(()=>{const ne=Re.getOpponentPlacedSections();return e.turnPhase==="placement"&&ne.some(L=>L!==null)&&console.error("🔥 CRITICAL - getOpponentPlacedSections returning:",ne,"from gameState:",e.opponentPlacedSections),ne},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=E.useCallback((ne,L)=>{Re.updatePlayers(ne,L)},[]),A=E.useCallback((ne,L)=>{Re.updatePlayerState(ne,L)},[]),C=E.useCallback((ne,L)=>{Re.setPlayerStates(ne,L)},[]),P=E.useCallback(ne=>{Re.setFirstPasserOfPreviousRound(ne)},[]),T=E.useCallback(ne=>{Re.setFirstPlayerOverride(ne)},[]),O=E.useCallback(ne=>{Re.setPassInfo(ne)},[]),k=E.useCallback(ne=>{Re.updatePassInfo(ne)},[]),N=E.useCallback((ne,L,q)=>{Re.addLogEntry(ne,L,q)},[]),D=E.useCallback(()=>{Re.reset()},[]),M=E.useCallback(ne=>{Re.setWinner(ne)},[]),j=E.useCallback(async(ne,L)=>await Re.processAction(ne,L),[]),U=E.useCallback(()=>Re.isActionInProgress(),[]),K=E.useCallback(()=>Re.getActionQueueLength(),[]),H=E.useCallback(()=>{Re.clearActionQueue()},[]),W=E.useCallback(()=>kj(e.turnPhase),[e.turnPhase]),re=E.useCallback(()=>PA(e.turnPhase),[e.turnPhase]),le=E.useCallback(async(ne,L)=>{const q=e.turnPhase,ue=PA(q);return console.log(`🔀 useGameState.routeAction: ${ne} in phase ${q} (${ue?"sequential":"simultaneous"})`),ue?await j(ne,L):(console.warn(`⚠️ Simultaneous phase action ${ne} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${ne} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:q,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,j]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:p,getLocalPlayerState:f,getOpponentPlayerState:h,isLocalPlayer:m,getLocalPlacedSections:g,getOpponentPlacedSections:b,updatePlayers:S,updatePlayerState:A,setPlayerStates:C,setFirstPasserOfPreviousRound:P,setFirstPlayerOverride:T,setPassInfo:O,updatePassInfo:k,addLogEntry:N,resetGame:D,setWinner:M,processAction:j,isActionInProgress:U,getActionQueueLength:K,clearActionQueue:H,isSimultaneousPhase:W,isSequentialPhase:re,routeAction:le,gameStateManager:Re,p2pManager:jn}},wA=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(`🚢 Initialized ship placement: ${e.length} sections available`),console.log(`🎯 Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class Bc{constructor(){if(Bc.instance)return Bc.instance;Bc.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,console.log("🎮 GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){console.log("🔧 GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=Ft.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&(i.initialize(u,l,s,n,t),console.log("🔄 GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,console.log("🔧 GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(`🔔 GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="droneSelection"){if(this.gameStateManager.get("gameMode")==="guest"){console.log("🔒 Guest mode: Skipping game flow logic (waiting for host state)");return}console.log(`🚀 GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let r={};if(t==="droneSelection"){console.log("🎲 GameFlowManager initializing drone selection phase data");const i=sT(Pn),s=wA();r={...i,...s}}this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(r).length>0&&this.gameStateManager.setState(r,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(this.gameStateManager.get("gameMode")==="guest")return;if(console.log(`✅ GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const s=this.actionProcessor.applyPhaseCommitments(t);Object.keys(s).length>0&&(this.gameStateManager.setState(s,"COMMITMENT_APPLICATION",`${t}_completion`),console.log(`📋 GameFlowManager: Applied ${t} commitments to game state`))}const i=this.getNextPhase(t);i?this.isSequentialPhase(i)?(console.log(`🔄 GameFlowManager: Handover to sequential phase '${i}'`),this.initiateSequentialPhase(i)):(console.log(`🔄 GameFlowManager: Continuing with simultaneous phase '${i}'`),await this.transitionToPhase(i)):console.log("🎯 GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){t.gameMode==="guest"||n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(console.log(`🎯 GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(t.gameMode==="guest"||n!=="COMMITMENT_UPDATE"||!t.commitments)return;console.log("🔍 checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){console.log("🔍 Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){console.log("🔍 Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;console.log("🔍 Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:s}),s&&(console.log(`🎯 GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){console.log(`✅ GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(`🤖 GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="gameInitializing"?n=await this.processGameInitializingPhase():t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():t==="determineFirstPlayer"?n=await this.processAutomaticFirstPlayerPhase():console.warn(`⚠️ No handler for automatic phase: ${t}`),n?(console.log(`🔄 GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),await this.transitionToPhase(n)):console.warn(`⚠️ No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(){console.log("🃏 GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await Gr(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-Bg7N3j_j.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error("❌ GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),console.log("✅ Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return console.log("✅ Automatic draw completed, returning next phase:",s),s}catch(n){console.error("❌ Error during automatic draw phase:",n)}}async processAutomaticFirstPlayerPhase(){console.log("🎯 GameFlowManager: Processing automatic first player determination phase");const t="determineFirstPlayer";try{const n=await this.actionProcessor.processFirstPlayerDetermination();if(console.log("🎯 First player determination completed:",n),this.animationManager&&n.stateUpdates){const i=this.gameStateManager.getLocalPlayerId(),p={animationName:"PHASE_ANNOUNCEMENT",payload:{phaseText:n.stateUpdates.firstPlayerOfRound===i?"YOU ARE FIRST PLAYER":"OPPONENT IS FIRST PLAYER",phaseName:"firstPlayerResult",timestamp:Date.now()}};await this.animationManager.executeAnimations([p]),console.log("🎬 [FIRST PLAYER] Second announcement complete")}this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const r=this.getNextPhase("determineFirstPlayer");return console.log("✅ Automatic first player determination completed, returning next phase:",r),r}catch(n){console.error("❌ Error during automatic first player determination:",n)}}async processAutomaticEnergyResetPhase(){console.log("⚡ GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error("❌ GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await Gr(async()=>{const{default:A}=await Promise.resolve().then(()=>JM);return{default:A}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},p=ke.readyDronesAndRestoreShields(n.player1,n.player2,u),f=ke.readyDronesAndRestoreShields(n.player2,n.player1,u),h={...p,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},m={...f,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget},g=this.roundNumber>=2?s.totals.shieldsPerTurn:0,b=this.roundNumber>=2?l.totals.shieldsPerTurn:0;await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:h,player2:m,shieldsToAllocate:g,opponentShieldsToAllocate:b}}),console.log(`✅ Energy reset complete - Player 1: ${h.energy} energy, Player 2: ${m.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const S=this.getNextPhase("energyReset");return console.log("✅ Automatic energy reset completed, returning next phase:",S),S}catch(n){console.error("❌ Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(){console.log("🎯 GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:"placement",gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(n=>setTimeout(n,100));const t=this.getNextPhase("gameInitializing");return console.log("✅ Game initialization completed, returning next phase:",t),t}catch(t){throw console.error("❌ Error during game initialization:",t),t}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn("⚠️ GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return t.roundNumber<2?!1:t.shieldsToAllocate>0||t.opponentShieldsToAllocate>0}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(`🎯 GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(`🔄 Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn("⚠️ ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1,this.gameStateManager.setState({roundNumber:1,turn:1}))),console.log(`🔄 GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"&&(console.log("🚢 GameFlowManager: Initializing placement phase data"),r=wA()),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t,resetPassInfo:!0}}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){console.log(`🤖 GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,console.log(`🔄 GameFlowManager: Starting round ${this.roundNumber}`),this.gameStateManager.setState({roundNumber:this.roundNumber,turn:this.roundNumber});const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn("⚠️ No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){console.log(`🏆 GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log("🔄 GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const pf=new Bc;function TA(){const{gameStateManager:e}=Ri(),[t,n]=E.useState(!1);E.useEffect(()=>{console.log("🏠 MenuScreen mounted - ensuring clean state"),Ft.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),console.log("✅ MenuScreen: State cleaned up")},[e]);const r=()=>{console.log("🎮 Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{console.log("🎮 Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},l=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box",position:"relative"},children:v.jsx("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,className:"btn-continue",style:{minWidth:"200px",fontSize:"1.1rem",padding:"16px 30px"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,className:"btn-continue",style:{minWidth:"200px",fontSize:"1.1rem",padding:"16px 30px"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:l,className:"btn-cancel",children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"EREMOS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"the wilderness left when civilization departs"}),v.jsx("button",{onClick:s,className:"btn-continue",children:"START GAME"})]})})})}const OA=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),_A=e=>{const t=jj(e);return t.charAt(0).toUpperCase()+t.slice(1)},WT=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Rj=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ij={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},p)=>E.createElement("svg",{ref:p,...Ij,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:WT("lucide",i),...!s&&!Rj(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,h])=>E.createElement(f,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(e,t)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(Lj,{ref:s,iconNode:t,className:WT(`lucide-${Mj(_A(e))}`,`lucide-${e}`,r),...i}));return n.displayName=_A(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],hf=Et("bolt",$j);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Uj=Et("check",Bj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gj=Et("chevron-down",zj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sf=Et("chevron-up",Hj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tv=Et("copy",qj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],DA=Et("cpu",Yj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vj=Et("download",Fj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],NA=Et("eye",Kj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],Xj=Et("gamepad",Wj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Zj=Et("hand",Qj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Vs=Et("loader-circle",Jj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tR=Et("refresh-cw",eR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Qy=Et("rocket",nR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],aR=Et("rotate-ccw",rR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kA=Et("settings",iR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],og=Et("shield-check",oR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],lR=Et("shield",sR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],uR=Et("sword",cR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fR=Et("upload",dR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hR=Et("users",pR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gR=Et("wifi-off",mR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],MA=Et("wifi",yR);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ln=Et("x",vR),bR=({onGameStart:e,onBack:t})=>{const[n,r]=E.useState("menu"),[i,s]=E.useState(""),[l,u]=E.useState(""),[p,f]=E.useState("disconnected"),[h,m]=E.useState(""),[g,b]=E.useState(!1),[S,A]=E.useState(!1);E.useEffect(()=>jn.subscribe(j=>{switch(console.log("P2P Event:",j),j.type){case"room_created":s(j.data.roomCode),r("waiting"),f("waiting"),b(!1);break;case"joined_room":s(j.data.roomCode),r("connected"),f("connected"),b(!1);break;case"connected":r("connected"),f("connected"),b(!1),m("");break;case"disconnected":f("disconnected"),r("menu"),s(""),m("");break;case"connection_error":m(j.data.error),b(!1),r("menu");break}}),[]);const C=async()=>{b(!0),m(""),r("host");try{const M=await jn.hostGame();console.log("Room created with code:",M)}catch(M){console.error("Failed to host game:",M),m(M.message),b(!1),r("menu")}},P=async()=>{if(l.length!==6){m("Please enter a 6-digit room code");return}b(!0),m(""),r("join");try{await jn.joinGame(l)}catch(M){console.error("Failed to join game:",M),m(M.message),b(!1),r("menu")}},T=async()=>{try{await navigator.clipboard.writeText(i),A(!0),setTimeout(()=>A(!1),2e3)}catch(M){console.error("Failed to copy room code:",M)}},O=()=>{p==="connected"&&e()},k=()=>{jn.disconnect(),r("menu"),s(""),u(""),m("")},N=()=>{p!=="disconnected"&&k(),t()},D=()=>{switch(p){case"waiting":return v.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[v.jsx(Vs,{className:"w-4 h-4 animate-spin"}),v.jsx("span",{children:"Waiting for opponent..."})]});case"connected":return v.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[v.jsx(MA,{className:"w-4 h-4"}),v.jsx("span",{children:"Connected to opponent"})]});case"disconnected":default:return v.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[v.jsx(gR,{className:"w-4 h-4"}),v.jsx("span",{children:"Not connected"})]})}};return console.log("🎮 MultiplayerLobby rendering - mode:",n,"connectionStatus:",p),v.jsx("div",{style:{maxWidth:"500px",width:"100%",margin:"0 auto"},children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20",style:{backgroundColor:"rgba(15, 23, 42, 0.95)",borderColor:"#a855f7",boxShadow:"0 20px 50px rgba(168, 85, 247, 0.2)"},children:[v.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[v.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[v.jsx(hR,{className:"w-8 h-8 text-purple-400"}),"Multiplayer Lobby"]}),v.jsx("div",{style:{marginBottom:"1rem"},children:D()})]}),h&&v.jsx("div",{style:{backgroundColor:"rgba(127, 29, 29, 0.5)",border:"1px solid #ef4444",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"1rem"},children:v.jsx("p",{style:{color:"#fca5a5",fontSize:"0.875rem"},children:h})}),n==="menu"&&v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("button",{onClick:C,disabled:g,className:"btn-continue",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[g?v.jsx(Vs,{className:"w-5 h-5 animate-spin"}):v.jsx(Xj,{className:"w-5 h-5"}),"Host Game"]}),v.jsx("div",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.875rem"},children:"or"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.jsx("input",{type:"text",placeholder:"Enter 6-digit room code",value:l,onChange:M=>u(M.target.value.replace(/[^0-9]/g,"").slice(0,6)),style:{width:"100%",backgroundColor:"#1e293b",border:"1px solid #4b5563",borderRadius:"0.5rem",padding:"0.75rem 1rem",color:"#ffffff",textAlign:"center",fontSize:"1.125rem",letterSpacing:"0.1em"},maxLength:6}),v.jsxs("button",{onClick:P,disabled:g||l.length!==6,className:"btn-confirm",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[g?v.jsx(Vs,{className:"w-5 h-5 animate-spin"}):v.jsx(MA,{className:"w-5 h-5"}),"Join Game"]})]})]}),n==="waiting"&&v.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"#1e293b",borderRadius:"0.5rem",padding:"1rem"},children:[v.jsx("p",{style:{color:"#d1d5db",marginBottom:"0.5rem"},children:"Share this room code:"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[v.jsx("code",{style:{fontSize:"1.5rem",fontFamily:"monospace",color:"#ffffff",backgroundColor:"#334155",padding:"0.5rem 1rem",borderRadius:"0.25rem"},children:i}),v.jsx("button",{onClick:T,style:{backgroundColor:"#9333ea",color:"#ffffff",padding:"0.5rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:M=>M.target.style.backgroundColor="#7c3aed",onMouseOut:M=>M.target.style.backgroundColor="#9333ea",children:S?v.jsx(Uj,{className:"w-5 h-5"}):v.jsx(tv,{className:"w-5 h-5"})})]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#facc15"},children:[v.jsx(Vs,{className:"w-5 h-5 animate-spin"}),v.jsx("span",{children:"Waiting for opponent to join..."})]})]}),n==="connected"&&v.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"rgba(20, 83, 45, 0.5)",border:"1px solid #22c55e",borderRadius:"0.5rem",padding:"1rem"},children:[v.jsx("p",{style:{color:"#86efac"},children:"✅ Connected to opponent!"}),i&&v.jsxs("p",{style:{color:"#9ca3af",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Room: ",i]})]}),v.jsx("button",{onClick:O,className:"btn-continue",style:{width:"100%"},children:"Start Game"})]}),(n==="host"||n==="join")&&g&&v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx(Vs,{className:"w-8 h-8 animate-spin text-purple-400",style:{margin:"0 auto 1rem auto",color:"#c084fc"}}),v.jsx("p",{style:{color:"#d1d5db"},children:n==="host"?"Creating room...":"Joining room..."})]}),v.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #374151"},children:v.jsx("button",{onClick:N,className:"btn-cancel",style:{width:"100%"},children:p!=="disconnected"?"Disconnect & Back":"Back"})})]})})};function xR(){const{gameState:e,gameStateManager:t}=Ri(),[n,r]=E.useState(null),i=e.gameMode==="local",s=e.gameMode!=="local";E.useEffect(()=>{s&&(console.log("🔌 Setting up P2P integration for multiplayer"),t.setupP2PIntegration(jn))},[s]);const l=()=>{console.log("🔙 Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=h=>{console.log("🤖 Selected AI:",h.name),r(h)},p=()=>{if(i&&n){console.log("🎮 Starting single player game with AI:",n.name);const h=Pn.filter(g=>n.dronePool.includes(g.name)),m={};h.forEach(g=>{m[g.name]=0}),Hr.initialize(OA,Pn,n,t.actionProcessor,t),console.log("🤖 AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:h,deployedDroneCounts:m,aiPersonality:n})}},f=()=>{console.log("🎮 Starting multiplayer game after connection");const h=jn.isHost,m=h?"host":"guest";console.log(`🎮 Multiplayer mode: ${m}`),t.startGame(m,{name:h?"Host Player":"Guest Player"},{name:h?"Guest Player":"Host Player"})};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box",position:"relative"},children:v.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:OA.map(h=>v.jsxs("div",{onClick:()=>u(h),style:{padding:"20px",backgroundColor:n?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:m=>{n?.name!==h.name&&(m.target.style.backgroundColor="#333333",m.target.style.borderColor="#666666")},onMouseOut:m=>{n?.name!==h.name&&(m.target.style.backgroundColor="#2a2a2a",m.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),s&&v.jsx(bR,{onGameStart:f,onBack:l}),i&&v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:l,className:"btn-cancel",children:"BACK TO MENU"}),v.jsx("button",{onClick:p,disabled:!n,className:"btn-continue",children:"START GAME"})]})]})})}const jA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),SR=({text:e,className:t})=>{const n=E.useRef(null),r=E.useRef(null);return E.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,p;t.includes("font-orbitron")?(u=8,p=16):(u=8,p=12);let f=p;for(s.style.fontSize=f+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&f>u;)f-=.5,s.style.fontSize=f+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},mf=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:p,scale:f=1})=>{let h=e.limit;l.forEach(L=>{L.mod.stat==="limit"&&(h+=L.mod.value)});const m=i>=h,g=n&&(!m||s),b=E.useMemo(()=>{const L={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(q=>{q.mod.stat==="cost"?L.cost=Math.max(0,L.cost+q.mod.value):L.hasOwnProperty(q.mod.stat)&&(L[q.mod.stat]+=q.mod.value)}),L},[e,l]),S=b.cost,A=b.attack>e.attack,C=b.attack<e.attack,P=A?"text-green-400":C?"text-red-400":"text-white",T=b.speed>e.speed,O=b.speed<e.speed,k=T?"text-green-400":O?"text-red-400":"text-white",N=b.cost<e.class,D=b.cost>e.class,M=N?"text-green-400":D?"text-red-400":"text-white",U=h>e.limit?"text-green-400":"text-white",{name:K,image:H,hull:W,shields:re,abilities:le}=e,ne=f!==1?{transform:`scale(${f})`,transformOrigin:"center center"}:{};return v.jsx("div",{onClick:g?()=>t(e):void 0,className:`
        w-[225px] h-[275px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${g?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${g?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...ne},children:v.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:H,alt:K,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(SR,{text:K,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(jA,{value:b.attack,isFlat:!1,icon:uR,iconColor:"text-red-400",textColor:P})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:re>0&&Array.from({length:re}).map((L,q)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${q}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:W}).map((L,q)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${q}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(jA,{value:b.speed,isFlat:!0,icon:Qy,iconColor:"text-blue-400",textColor:k})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-48 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:le&&le.length>0?le.map((L,q)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm text-purple-400 tracking-wider font-bold",children:L.name}),v.jsx("p",{className:"text-gray-400 text-sm leading-tight font-exo",children:L.description})]},q)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-sm text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(hf,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${M}`,children:S})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:L=>{L.stopPropagation(),p&&p(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${m?"text-pink-500":U}`,children:[i,"/",h]})})]})]})]})]})})},nv=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(Vs,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"✅ Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function AR(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i}=Ri(),{droneSelectionPool:s,droneSelectionTrio:l,turnPhase:u}=e;i();const[p,f]=E.useState([]),[h,m]=E.useState(l),[g,b]=E.useState(s),S=N=>{if(u!=="droneSelection")return;console.log("🔧 handleChooseDroneForSelection called with:",N.name);const D=[...p,N];if(f(D),D.length<5){const M=nj(g);m(M.droneSelectionTrio),b(M.droneSelectionPool),console.log("🔧 Advanced to next trio locally, selected:",D.length,"of 5 drones")}else console.log("🔧 All 5 drones selected, waiting for Continue button click")},A=()=>{if(u!=="droneSelection")return;console.log("🔧 handleContinueDroneSelection called with:",p.length,"drones");const N=t(),D={playerId:N,phase:"droneSelection",actionData:{drones:p}};if(console.log("🔍 [DRONE SELECTION] Submitting commitment:",{gameMode:e.gameMode,playerId:N,droneCount:p.length,commitmentsBefore:e.commitments?.droneSelection}),e.gameMode==="guest"){console.log("[GUEST] Sending drone selection commitment to host"),jn.sendActionToHost("commitment",D);return}Re.actionProcessor.queueAction({type:"commitment",payload:D}).then(M=>{if(!M.success){console.error("❌ Drone selection submission failed:",M.error);return}console.log("✅ Drone selection submitted successfully")}).catch(M=>{console.error("❌ Drone selection submission error:",M)}),console.log("✅ Drone selection submitted to PhaseManager")};E.useEffect(()=>{e.gameMode==="guest"&&Re.emit("render_complete")},[e,Re]);const C=t(),P=n(),T=e.commitments?.droneSelection?.[C]?.completed||!1,O=e.commitments?.droneSelection?.[P]?.completed||!1;if(console.log("🔍 [DRONE SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:C,opponentPlayerId:P,localPlayerCompleted:T,opponentCompleted:O,fullCommitmentsObject:e.commitments?.droneSelection,turnPhase:u,willShowWaiting:r()&&T&&!O}),r()&&T&&!O){const N=e.commitments?.droneSelection?.[C]?.drones||p,D=N.length>0?N.map(M=>M.name).join(", "):"Selection complete";return v.jsx(nv,{phase:"droneSelection",localPlayerStatus:`You selected: ${D}`})}const k=p.length===5;return v.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4 relative z-10",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((N,D)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${D<p.length?"bg-green-500":"bg-gray-600"}`},D)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[p.length,"/5 drones selected"]})]}),k?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:"✅ Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",p.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),h&&h.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:h.map((N,D)=>v.jsx(mf,{drone:N,onClick:()=>S(N),isSelectable:!0,deployedCount:0},N.name||D))})]}),v.jsx("button",{onClick:A,disabled:!k,className:"btn-continue mb-8",children:k?"Continue to Deck Selection":`Continue (${p.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",p.length,"/5)",k&&v.jsx("span",{className:"text-green-400 ml-2",children:"✓"})]}),p.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:p.map((N,D)=>v.jsx(mf,{drone:N,isSelectable:!1,deployedCount:0},D))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function XT(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=XT(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function tt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=XT(e))&&(r&&(r+=" "),r+=t);return r}var sg={},lg={},RA;function ER(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(lg)),lg}var cg={},IA;function QT(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(cg)),cg}var ug={},LA;function ZT(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(ug)),ug}var dg={},$A;function rv(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",p=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const f=n[s];u?f==="\\"&&s+1<i?(s++,l+=n[s]):f===u?u="":l+=f:p?f==='"'||f==="'"?u=f:f==="]"?(p=!1,r.push(l),l=""):l+=f:f==="["?(p=!0,l&&(r.push(l),l="")):f==="."?l&&(r.push(l),l=""):l+=f,s++}return l&&r.push(l),r}e.toPath=t})(dg)),dg}var BA;function av(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ER(),n=QT(),r=ZT(),i=rv();function s(u,p,f){if(u==null)return f;switch(typeof p){case"string":{if(t.isUnsafeProperty(p))return f;const h=u[p];return h===void 0?n.isDeepKey(p)?s(u,i.toPath(p),f):f:h}case"number":case"symbol":{typeof p=="number"&&(p=r.toKey(p));const h=u[p];return h===void 0?f:h}default:{if(Array.isArray(p))return l(u,p,f);if(Object.is(p?.valueOf(),-0)?p="-0":p=String(p),t.isUnsafeProperty(p))return f;const h=u[p];return h===void 0?f:h}}}function l(u,p,f){if(p.length===0)return f;let h=u;for(let m=0;m<p.length;m++){if(h==null||t.isUnsafeProperty(p[m]))return f;h=h[p[m]]}return h===void 0?f:h}e.get=s})(sg)),sg}var fg,UA;function CR(){return UA||(UA=1,fg=av().get),fg}var PR=CR();const jo=Fr(PR);var pg={exports:{}},it={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA;function wR(){if(zA)return it;zA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var C=A.$$typeof;switch(C){case e:switch(A=A.type,A){case n:case i:case r:case p:case f:case g:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case h:return A;case s:return A;default:return C}}case t:return C}}}return it.ContextConsumer=s,it.ContextProvider=l,it.Element=e,it.ForwardRef=u,it.Fragment=n,it.Lazy=m,it.Memo=h,it.Portal=t,it.Profiler=i,it.StrictMode=r,it.Suspense=p,it.SuspenseList=f,it.isContextConsumer=function(A){return S(A)===s},it.isContextProvider=function(A){return S(A)===l},it.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},it.isForwardRef=function(A){return S(A)===u},it.isFragment=function(A){return S(A)===n},it.isLazy=function(A){return S(A)===m},it.isMemo=function(A){return S(A)===h},it.isPortal=function(A){return S(A)===t},it.isProfiler=function(A){return S(A)===i},it.isStrictMode=function(A){return S(A)===r},it.isSuspense=function(A){return S(A)===p},it.isSuspenseList=function(A){return S(A)===f},it.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===p||A===f||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===h||A.$$typeof===l||A.$$typeof===s||A.$$typeof===u||A.$$typeof===b||A.getModuleId!==void 0)},it.typeOf=S,it}var GA;function TR(){return GA||(GA=1,pg.exports=wR()),pg.exports}var OR=TR(),tn=e=>e===0?0:e>0?1:-1,lr=e=>typeof e=="number"&&e!=+e,wo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Te=e=>(typeof e=="number"||e instanceof Number)&&!lr(e),da=e=>Te(e)||typeof e=="string",_R=0,Hc=e=>{var t=++_R;return"".concat(e||"").concat(t)},Cn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Te(t)&&typeof t!="string")return r;var s;if(wo(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return lr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},JT=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function pn(e,t,n){return Te(e)&&Te(t)?e+n*(t-e):t}function DR(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):jo(r,t))===n)}var nn=e=>e===null||typeof e>"u",Jc=e=>nn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),NR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function iv(e){if(typeof e!="string")return!1;var t=NR;return t.includes(e)}var kR=["viewBox","children"],HA=["points","pathLength"],hg={svg:kR,polygon:HA,polyline:HA},MR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{iv(i)&&(r[i]=(s=>n[i](n,s)))}),r},jR=(e,t,n)=>r=>(e(t,n,r),null),eu=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];iv(i)&&typeof s=="function"&&(r||(r={}),r[i]=jR(s,t,n))}),r},RR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function e2(e){if(typeof e!="string")return!1;var t=RR;return t.includes(e)}function Go(e){var t=Object.entries(e).filter(n=>{var[r]=n;return e2(r)});return Object.fromEntries(t)}var qA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",YA=null,mg=null,t2=e=>{if(e===YA&&Array.isArray(mg))return mg;var t=[];return E.Children.forEach(e,n=>{nn(n)||(OR.isFragment(n)?t=t.concat(t2(n.props.children)):t.push(n))}),mg=t,YA=e,t};function ov(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>qA(i)):r=[qA(t)],t2(e).forEach(i=>{var s=jo(i,"type.displayName")||jo(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var IR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&hg?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||e2(t)),p=!!n&&iv(t);return l||u||p},It=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;IR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},LR=["children","width","height","viewBox","className","style","title","desc"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(null,arguments)}function $R(e,t){if(e==null)return{};var n,r,i=BR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var sv=E.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:p,desc:f}=e,h=$R(e,LR),m=s||{width:r,height:i,x:0,y:0},g=tt("recharts-surface",l);return E.createElement("svg",Zy({},It(h,!0,"svg"),{className:g,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),E.createElement("title",null,p),E.createElement("desc",null,f),n)}),UR=["children","className"];function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jy.apply(null,arguments)}function zR(e,t){if(e==null)return{};var n,r,i=GR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Wn=E.forwardRef((e,t)=>{var{children:n,className:r}=e,i=zR(e,UR),s=tt("recharts-layer",r);return E.createElement("g",Jy({className:s},It(i,!0),{ref:t}),n)}),n2=Bw(),r2=E.createContext(null),HR=()=>E.useContext(r2);function ft(e){return function(){return e}}const a2=Math.cos,gf=Math.sin,Vr=Math.sqrt,yf=Math.PI,np=2*yf,e0=Math.PI,t0=2*e0,Eo=1e-6,qR=t0-Eo;function i2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function YR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return i2;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class FR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?i2:YR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,p=r-t,f=i-n,h=l-t,m=u-n,g=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Eo)if(!(Math.abs(m*p-f*h)>Eo)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let b=r-l,S=i-u,A=p*p+f*f,C=b*b+S*S,P=Math.sqrt(A),T=Math.sqrt(g),O=s*Math.tan((e0-Math.acos((A+g-C)/(2*P*T)))/2),k=O/T,N=O/P;Math.abs(k-1)>Eo&&this._append`L${t+k*h},${n+k*m}`,this._append`A${s},${s},0,0,${+(m*b>h*S)},${this._x1=t+N*p},${this._y1=n+N*f}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),p=r*Math.sin(i),f=t+u,h=n+p,m=1^l,g=l?i-s:s-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>Eo||Math.abs(this._y1-h)>Eo)&&this._append`L${f},${h}`,r&&(g<0&&(g=g%t0+t0),g>qR?this._append`A${r},${r},0,1,${m},${t-u},${n-p}A${r},${r},0,1,${m},${this._x1=f},${this._y1=h}`:g>Eo&&this._append`A${r},${r},0,${+(g>=e0)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function lv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new FR(t)}function cv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function o2(e){this._context=e}o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rp(e){return new o2(e)}function s2(e){return e[0]}function l2(e){return e[1]}function c2(e,t){var n=ft(!0),r=null,i=rp,s=null,l=lv(u);e=typeof e=="function"?e:e===void 0?s2:ft(e),t=typeof t=="function"?t:t===void 0?l2:ft(t);function u(p){var f,h=(p=cv(p)).length,m,g=!1,b;for(r==null&&(s=i(b=l())),f=0;f<=h;++f)!(f<h&&n(m=p[f],f,p))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+e(m,f,p),+t(m,f,p));if(b)return s=null,b+""||null}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:ft(+p),u):e},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:ft(+p),u):t},u.defined=function(p){return arguments.length?(n=typeof p=="function"?p:ft(!!p),u):n},u.curve=function(p){return arguments.length?(i=p,r!=null&&(s=i(r)),u):i},u.context=function(p){return arguments.length?(p==null?r=s=null:s=i(r=p),u):r},u}function Ld(e,t,n){var r=null,i=ft(!0),s=null,l=rp,u=null,p=lv(f);e=typeof e=="function"?e:e===void 0?s2:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?l2:ft(+n);function f(m){var g,b,S,A=(m=cv(m)).length,C,P=!1,T,O=new Array(A),k=new Array(A);for(s==null&&(u=l(T=p())),g=0;g<=A;++g){if(!(g<A&&i(C=m[g],g,m))===P)if(P=!P)b=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=g-1;S>=b;--S)u.point(O[S],k[S]);u.lineEnd(),u.areaEnd()}P&&(O[g]=+e(C,g,m),k[g]=+t(C,g,m),u.point(r?+r(C,g,m):O[g],n?+n(C,g,m):k[g]))}if(T)return u=null,T+""||null}function h(){return c2().defined(i).curve(l).context(s)}return f.x=function(m){return arguments.length?(e=typeof m=="function"?m:ft(+m),r=null,f):e},f.x0=function(m){return arguments.length?(e=typeof m=="function"?m:ft(+m),f):e},f.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:ft(+m),f):r},f.y=function(m){return arguments.length?(t=typeof m=="function"?m:ft(+m),n=null,f):t},f.y0=function(m){return arguments.length?(t=typeof m=="function"?m:ft(+m),f):t},f.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:ft(+m),f):n},f.lineX0=f.lineY0=function(){return h().x(e).y(t)},f.lineY1=function(){return h().x(e).y(n)},f.lineX1=function(){return h().x(r).y(t)},f.defined=function(m){return arguments.length?(i=typeof m=="function"?m:ft(!!m),f):i},f.curve=function(m){return arguments.length?(l=m,s!=null&&(u=l(s)),f):l},f.context=function(m){return arguments.length?(m==null?s=u=null:u=l(s=m),f):s},f}class u2{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function VR(e){return new u2(e,!0)}function KR(e){return new u2(e,!1)}const uv={draw(e,t){const n=Vr(t/yf);e.moveTo(n,0),e.arc(0,0,n,0,np)}},WR={draw(e,t){const n=Vr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},d2=Vr(1/3),XR=d2*2,QR={draw(e,t){const n=Vr(t/XR),r=n*d2;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},ZR={draw(e,t){const n=Vr(t),r=-n/2;e.rect(r,r,n,n)}},JR=.8908130915292852,f2=gf(yf/10)/gf(7*yf/10),eI=gf(np/10)*f2,tI=-a2(np/10)*f2,nI={draw(e,t){const n=Vr(t*JR),r=eI*n,i=tI*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=np*s/5,u=a2(l),p=gf(l);e.lineTo(p*n,-u*n),e.lineTo(u*r-p*i,p*r+u*i)}e.closePath()}},gg=Vr(3),rI={draw(e,t){const n=-Vr(t/(gg*3));e.moveTo(0,n*2),e.lineTo(-gg*n,-n),e.lineTo(gg*n,-n),e.closePath()}},Pr=-.5,wr=Vr(3)/2,n0=1/Vr(12),aI=(n0/2+1)*3,iI={draw(e,t){const n=Vr(t/aI),r=n/2,i=n*n0,s=r,l=n*n0+n,u=-s,p=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,p),e.lineTo(Pr*r-wr*i,wr*r+Pr*i),e.lineTo(Pr*s-wr*l,wr*s+Pr*l),e.lineTo(Pr*u-wr*p,wr*u+Pr*p),e.lineTo(Pr*r+wr*i,Pr*i-wr*r),e.lineTo(Pr*s+wr*l,Pr*l-wr*s),e.lineTo(Pr*u+wr*p,Pr*p-wr*u),e.closePath()}};function oI(e,t){let n=null,r=lv(i);e=typeof e=="function"?e:ft(e||uv),t=typeof t=="function"?t:ft(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:ft(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:ft(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function vf(){}function bf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function p2(e){this._context=e}p2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sI(e){return new p2(e)}function h2(e){this._context=e}h2.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:bf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lI(e){return new h2(e)}function m2(e){this._context=e}m2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:bf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cI(e){return new m2(e)}function g2(e){this._context=e}g2.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uI(e){return new g2(e)}function FA(e){return e<0?-1:1}function VA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(FA(s)+FA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function KA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function yg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function xf(e){this._context=e}xf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yg(this,this._t0,KA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yg(this,KA(this,n=VA(this,e,t)),n);break;default:yg(this,this._t0,n=VA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function y2(e){this._context=new v2(e)}(y2.prototype=Object.create(xf.prototype)).point=function(e,t){xf.prototype.point.call(this,t,e)};function v2(e){this._context=e}v2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function dI(e){return new xf(e)}function fI(e){return new y2(e)}function b2(e){this._context=e}b2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=WA(e),i=WA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function WA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function pI(e){return new b2(e)}function ap(e,t){this._context=e,this._t=t}ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function hI(e){return new ap(e,.5)}function mI(e){return new ap(e,0)}function gI(e){return new ap(e,1)}function tl(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function r0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function yI(e,t){return e[t]}function vI(e){const t=[];return t.key=e,t}function bI(){var e=ft([]),t=r0,n=tl,r=yI;function i(s){var l=Array.from(e.apply(this,arguments),vI),u,p=l.length,f=-1,h;for(const m of s)for(u=0,++f;u<p;++u)(l[u][f]=[0,+r(m,l[u].key,f,s)]).data=m;for(u=0,h=cv(t(l));u<p;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:ft(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:ft(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?r0:typeof s=="function"?s:ft(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??tl,i):n},i}function xI(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}tl(e,t)}}function SI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}tl(e,t)}}function AI(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,p=0,f=0;u<l;++u){for(var h=e[t[u]],m=h[r][1]||0,g=h[r-1][1]||0,b=(m-g)/2,S=0;S<u;++S){var A=e[t[S]],C=A[r][1]||0,P=A[r-1][1]||0;b+=C-P}p+=m,f+=b*m}i[r-1][1]+=i[r-1][0]=n,p&&(n-=f/p)}i[r-1][1]+=i[r-1][0]=n,tl(e,t)}}var EI=["type","size","sizeType"];function a0(){return a0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a0.apply(null,arguments)}function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(r){CI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CI(e,t,n){return(t=PI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PI(e){var t=wI(e,"string");return typeof t=="symbol"?t:t+""}function wI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TI(e,t){if(e==null)return{};var n,r,i=OI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var x2={symbolCircle:uv,symbolCross:WR,symbolDiamond:QR,symbolSquare:ZR,symbolStar:nI,symbolTriangle:rI,symbolWye:iI},_I=Math.PI/180,DI=e=>{var t="symbol".concat(Jc(e));return x2[t]||uv},NI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*_I;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},kI=(e,t)=>{x2["symbol".concat(Jc(e))]=t},dv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=TI(e,EI),s=QA(QA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var g=DI(l),b=oI().type(g).size(NI(n,r,l));return b()},{className:p,cx:f,cy:h}=s,m=It(s,!0);return f===+f&&h===+h&&n===+n?E.createElement("path",a0({},m,{className:tt("recharts-symbols",p),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};dv.registerSymbol=kI;function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i0.apply(null,arguments)}function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(r){fv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fv(e,t,n){return(t=jI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jI(e){var t=RI(e,"string");return typeof t=="symbol"?t:t+""}function RI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tr=32;class pv extends E.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Tr/2,s=Tr/6,l=Tr/3,u=t.inactive?r:t.color,p=n??t.type;if(p==="none")return null;if(p==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Tr,y2:i,className:"recharts-legend-icon"});if(p==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Tr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(p==="rect")return E.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Tr/8,"h").concat(Tr,"v").concat(Tr*3/4,"h").concat(-Tr,"z"),className:"recharts-legend-icon"});if(E.isValidElement(t.legendIcon)){var f=MI({},t);return delete f.legendIcon,E.cloneElement(t.legendIcon,f)}return E.createElement(dv,{fill:u,cx:i,cy:i,size:Tr,sizeType:"diameter",type:p})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Tr,height:Tr},p={display:r==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,m)=>{var g=h.formatter||i,b=tt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:h.inactive});if(h.type==="none")return null;var S=h.inactive?s:h.color,A=g?g(h.value,h,m):h.value;return E.createElement("li",i0({className:b,style:p,key:"legend-item-".concat(m)},eu(this.props,h,m)),E.createElement(sv,{width:n,height:n,viewBox:u,style:f,"aria-label":"".concat(A," legend icon")},this.renderIcon(h,l)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}fv(pv,"displayName","Legend");fv(pv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var vg={},bg={},JA;function II(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(bg)),bg}var xg={},eE;function S2(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(xg)),xg}var Sg={},Ag={},Eg={},tE;function LI(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Eg)),Eg}var nE;function hv(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LI();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Ag)),Ag}var Cg={},rE;function $I(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Cg)),Cg}var aE;function BI(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hv(),n=$I();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(Sg)),Sg}var Pg={},wg={},iE;function UI(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=av();function n(r){return function(i){return t.get(i,r)}}e.property=n})(wg)),wg}var Tg={},Og={},_g={},Dg={},oE;function A2(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Dg)),Dg}var Ng={},sE;function E2(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Ng)),Ng}var kg={},lE;function C2(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(kg)),kg}var cE;function zI(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mv(),n=A2(),r=E2(),i=C2();function s(m,g,b){return typeof b!="function"?t.isMatch(m,g):l(m,g,function S(A,C,P,T,O,k){const N=b(A,C,P,T,O,k);return N!==void 0?!!N:l(A,C,S,k)},new Map)}function l(m,g,b,S){if(g===m)return!0;switch(typeof g){case"object":return u(m,g,b,S);case"function":return Object.keys(g).length>0?l(m,{...g},b,S):i.eq(m,g);default:return n.isObject(m)?typeof g=="string"?g==="":!0:i.eq(m,g)}}function u(m,g,b,S){if(g==null)return!0;if(Array.isArray(g))return f(m,g,b,S);if(g instanceof Map)return p(m,g,b,S);if(g instanceof Set)return h(m,g,b,S);const A=Object.keys(g);if(m==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(g))return S.get(g)===m;S&&S.set(g,m);try{for(let C=0;C<A.length;C++){const P=A[C];if(!r.isPrimitive(m)&&!(P in m)||g[P]===void 0&&m[P]!==void 0||g[P]===null&&m[P]!==null||!b(m[P],g[P],P,m,g,S))return!1}return!0}finally{S&&S.delete(g)}}function p(m,g,b,S){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,C]of g.entries()){const P=m.get(A);if(b(P,C,A,m,g,S)===!1)return!1}return!0}function f(m,g,b,S){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let C=0;C<g.length;C++){const P=g[C];let T=!1;for(let O=0;O<m.length;O++){if(A.has(O))continue;const k=m[O];let N=!1;if(b(k,P,C,m,g,S)&&(N=!0),N){A.add(O),T=!0;break}}if(!T)return!1}return!0}function h(m,g,b,S){return g.size===0?!0:m instanceof Set?f([...m],[...g],b,S):!1}e.isMatchWith=s,e.isSetMatch=h})(_g)),_g}var uE;function mv(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Og)),Og}var Mg={},jg={},Rg={},dE;function GI(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Rg)),Rg}var Ig={},fE;function P2(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Ig)),Ig}var Lg={},pE;function w2(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",p="[object Map]",f="[object Set]",h="[object Array]",m="[object Function]",g="[object ArrayBuffer]",b="[object Object]",S="[object Error]",A="[object DataView]",C="[object Uint8Array]",P="[object Uint8ClampedArray]",T="[object Uint16Array]",O="[object Uint32Array]",k="[object BigUint64Array]",N="[object Int8Array]",D="[object Int16Array]",M="[object Int32Array]",j="[object BigInt64Array]",U="[object Float32Array]",K="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=g,e.arrayTag=h,e.bigInt64ArrayTag=j,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=U,e.float64ArrayTag=K,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=M,e.int8ArrayTag=N,e.mapTag=p,e.numberTag=r,e.objectTag=b,e.regexpTag=t,e.setTag=f,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=T,e.uint32ArrayTag=O,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=P})(Lg)),Lg}var $g={},hE;function HI(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})($g)),$g}var mE;function T2(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GI(),n=P2(),r=w2(),i=E2(),s=HI();function l(h,m){return u(h,void 0,h,new Map,m)}function u(h,m,g,b=new Map,S=void 0){const A=S?.(h,m,g,b);if(A!==void 0)return A;if(i.isPrimitive(h))return h;if(b.has(h))return b.get(h);if(Array.isArray(h)){const C=new Array(h.length);b.set(h,C);for(let P=0;P<h.length;P++)C[P]=u(h[P],P,g,b,S);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;b.set(h,C);for(const[P,T]of h)C.set(P,u(T,P,g,b,S));return C}if(h instanceof Set){const C=new Set;b.set(h,C);for(const P of h)C.add(u(P,void 0,g,b,S));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);b.set(h,C);for(let P=0;P<h.length;P++)C[P]=u(h[P],P,g,b,S);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return b.set(h,C),p(C,h,g,b,S),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return b.set(h,C),p(C,h,g,b,S),C}if(h instanceof Blob){const C=new Blob([h],{type:h.type});return b.set(h,C),p(C,h,g,b,S),C}if(h instanceof Error){const C=new h.constructor;return b.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,p(C,h,g,b,S),C}if(typeof h=="object"&&f(h)){const C=Object.create(Object.getPrototypeOf(h));return b.set(h,C),p(C,h,g,b,S),C}return h}function p(h,m,g=h,b,S){const A=[...Object.keys(m),...t.getSymbols(m)];for(let C=0;C<A.length;C++){const P=A[C],T=Object.getOwnPropertyDescriptor(h,P);(T==null||T.writable)&&(h[P]=u(m[P],P,g,b,S))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=p})(jg)),jg}var gE;function qI(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T2();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Mg)),Mg}var yE;function YI(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mv(),n=qI();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Tg)),Tg}var Bg={},Ug={},zg={},vE;function FI(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T2(),n=w2();function r(i,s){return t.cloneDeepWith(i,(l,u,p,f)=>{const h=s?.(l,u,p,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(zg)),zg}var bE;function VI(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Ug)),Ug}var Gg={},Hg={},xE;function O2(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Hg)),Hg}var qg={},SE;function KI(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P2();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(qg)),qg}var AE;function WI(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QT(),n=O2(),r=KI(),i=rv();function s(l,u){let p;if(Array.isArray(u)?p=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?p=i.toPath(u):p=[u],p.length===0)return!1;let f=l;for(let h=0;h<p.length;h++){const m=p[h];if((f==null||!Object.hasOwn(f,m))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(m)&&m<f.length))return!1;f=f[m]}return!0}e.has=s})(Gg)),Gg}var EE;function XI(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mv(),n=ZT(),r=VI(),i=av(),s=WI();function l(u,p){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return p=r.cloneDeep(p),function(f){const h=i.get(f,u);return h===void 0?s.has(f,u):p===void 0?h===void 0:t.isMatch(h,p)}}e.matchesProperty=l})(Bg)),Bg}var CE;function QI(){return CE||(CE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S2(),n=UI(),r=YI(),i=XI();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Pg)),Pg}var PE;function ZI(){return PE||(PE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=II(),n=S2(),r=BI(),i=QI();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(vg)),vg}var Yg,wE;function JI(){return wE||(wE=1,Yg=ZI().uniqBy),Yg}var eL=JI();const TE=Fr(eL);function _2(e,t,n){return t===!0?TE(e,n):typeof t=="function"?TE(e,t):e}var Fg={exports:{}},Vg={},Kg={exports:{}},Wg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function tL(){if(OE)return Wg;OE=1;var e=fl();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(m,g){var b=g(),S=r({inst:{value:b,getSnapshot:g}}),A=S[0].inst,C=S[1];return s(function(){A.value=b,A.getSnapshot=g,p(A)&&C({inst:A})},[m,b,g]),i(function(){return p(A)&&C({inst:A}),m(function(){p(A)&&C({inst:A})})},[m]),l(b),b}function p(m){var g=m.getSnapshot;m=m.value;try{var b=g();return!n(m,b)}catch{return!0}}function f(m,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Wg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Wg}var _E;function nL(){return _E||(_E=1,Kg.exports=tL()),Kg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function rL(){if(DE)return Vg;DE=1;var e=fl(),t=nL();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,p=e.useDebugValue;return Vg.useSyncExternalStoreWithSelector=function(f,h,m,g,b){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function P(D){if(!T){if(T=!0,O=D,D=g(D),b!==void 0&&A.hasValue){var M=A.value;if(b(M,D))return k=M}return k=D}if(M=k,r(O,D))return M;var j=g(D);return b!==void 0&&b(M,j)?(O=D,M):(O=D,k=j)}var T=!1,O,k,N=m===void 0?null:m;return[function(){return P(h())},N===null?void 0:function(){return P(N())}]},[h,m,g,b]);var C=i(f,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=C},[C]),p(C),C},Vg}var NE;function aL(){return NE||(NE=1,Fg.exports=rL()),Fg.exports}var iL=aL(),gv=E.createContext(null),oL=e=>e,Ct=()=>{var e=E.useContext(gv);return e?e.store.dispatch:oL},lf=()=>{},sL=()=>lf,lL=(e,t)=>e===t;function Pe(e){var t=E.useContext(gv);return iL.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:sL,t?t.store.getState:lf,t?t.store.getState:lf,t?e:lf,lL)}function cL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function uL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function dL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var kE=e=>Array.isArray(e)?e:[e];function fL(e){const t=Array.isArray(e[0])?e[0]:e;return dL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function pL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var hL=class{constructor(e){this.value=e}deref(){return this.value}},mL=typeof WeakRef<"u"?WeakRef:hL,gL=0,ME=1;function $d(){return{s:gL,v:void 0,o:null,p:null}}function D2(e,t={}){let n=$d();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:p}=arguments;for(let m=0,g=p;m<g;m++){const b=arguments[m];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(b);A===void 0?(u=$d(),S.set(b,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(b);A===void 0?(u=$d(),S.set(b,u)):u=A}}const f=u;let h;if(u.s===ME)h=u.v;else if(h=e.apply(null,arguments),s++,r){const m=i?.deref?.()??i;m!=null&&r(m,h)&&(h=m,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new mL(h):h}return f.s=ME,f.v=h,h}return l.clearCache=()=>{n=$d(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function yL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,p={},f=i.pop();typeof f=="object"&&(p=f,f=i.pop()),cL(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...p},{memoize:m,memoizeOptions:g=[],argsMemoize:b=D2,argsMemoizeOptions:S=[]}=h,A=kE(g),C=kE(S),P=fL(i),T=m(function(){return s++,f.apply(null,arguments)},...A),O=b(function(){l++;const N=pL(P,arguments);return u=T.apply(null,N),u},...C);return Object.assign(O,{resultFunc:f,memoizedResultFunc:T,dependencies:P,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var ee=yL(D2),vL=Object.assign((e,t=ee)=>{uL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,p)=>(l[n[p]]=u,l),{}))},{withTypes:()=>vL}),Xg={},Qg={},Zg={},jE;function bL(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(Zg)),Zg}var Jg={},ey={},RE;function N2(){return RE||(RE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(ey)),ey}var IE;function xL(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N2(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Jg)),Jg}var LE;function SL(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bL(),n=xL(),r=rv();function i(s,l,u,p){if(s==null)return[];u=p?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(b=>String(b));const f=(b,S)=>{let A=b;for(let C=0;C<S.length&&A!=null;++C)A=A[S[C]];return A},h=(b,S)=>S==null||b==null?S:typeof b=="object"&&"key"in b?Object.hasOwn(S,b.key)?S[b.key]:f(S,b.path):typeof b=="function"?b(S):Array.isArray(b)?f(S,b):typeof S=="object"?S[b]:S,m=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return s.map(b=>({original:b,criteria:m.map(S=>h(S,b))})).slice().sort((b,S)=>{for(let A=0;A<m.length;A++){const C=t.compareValues(b.criteria[A],S.criteria[A],u[A]);if(C!==0)return C}return 0}).map(b=>b.original)}e.orderBy=i})(Qg)),Qg}var ty={},$E;function AL(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,p)=>{for(let f=0;f<u.length;f++){const h=u[f];Array.isArray(h)&&p<s?l(h,p+1):i.push(h)}};return l(n,0),i}e.flatten=t})(ty)),ty}var ny={},BE;function k2(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O2(),n=hv(),r=A2(),i=C2();function s(l,u,p){return r.isObject(p)&&(typeof u=="number"&&n.isArrayLike(p)&&t.isIndex(u)&&u<p.length||typeof u=="string"&&u in p)?i.eq(p[u],l):!1}e.isIterateeCall=s})(ny)),ny}var UE;function EL(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SL(),n=AL(),r=k2();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(Xg)),Xg}var ry,zE;function CL(){return zE||(zE=1,ry=EL().sortBy),ry}var PL=CL();const ip=Fr(PL);var M2=e=>e.legend.settings,wL=e=>e.legend.size,TL=e=>e.legend.payload,OL=ee([TL,M2],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?ip(r,n):r});function _L(){return Pe(OL)}var Bd=1;function j2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Bd||Math.abs(l.left-t.left)>Bd||Math.abs(l.top-t.top)>Bd||Math.abs(l.width-t.width)>Bd)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function dn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var DL=typeof Symbol=="function"&&Symbol.observable||"@@observable",GE=DL,ay=()=>Math.random().toString(36).substring(7).split("").join("."),NL={INIT:`@@redux/INIT${ay()}`,REPLACE:`@@redux/REPLACE${ay()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ay()}`},Sf=NL;function yv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function R2(e,t,n){if(typeof e!="function")throw new Error(dn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(dn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(dn(1));return n(R2)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,p=!1;function f(){l===s&&(l=new Map,s.forEach((C,P)=>{l.set(P,C)}))}function h(){if(p)throw new Error(dn(3));return i}function m(C){if(typeof C!="function")throw new Error(dn(4));if(p)throw new Error(dn(5));let P=!0;f();const T=u++;return l.set(T,C),function(){if(P){if(p)throw new Error(dn(6));P=!1,f(),l.delete(T),s=null}}}function g(C){if(!yv(C))throw new Error(dn(7));if(typeof C.type>"u")throw new Error(dn(8));if(typeof C.type!="string")throw new Error(dn(17));if(p)throw new Error(dn(9));try{p=!0,i=r(i,C)}finally{p=!1}return(s=l).forEach(T=>{T()}),C}function b(C){if(typeof C!="function")throw new Error(dn(10));r=C,g({type:Sf.REPLACE})}function S(){const C=m;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(dn(11));function T(){const k=P;k.next&&k.next(h())}return T(),{unsubscribe:C(T)}},[GE](){return this}}}return g({type:Sf.INIT}),{dispatch:g,subscribe:m,getState:h,replaceReducer:b,[GE]:S}}function kL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Sf.INIT})>"u")throw new Error(dn(12));if(typeof n(void 0,{type:Sf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(dn(13))})}function I2(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{kL(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let p=!1;const f={};for(let h=0;h<r.length;h++){const m=r[h],g=n[m],b=l[m],S=g(b,u);if(typeof S>"u")throw u&&u.type,new Error(dn(14));f[m]=S,p=p||S!==b}return p=p||r.length!==Object.keys(l).length,p?f:l}}function Af(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function ML(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(dn(15))};const l={getState:i.getState,dispatch:(p,...f)=>s(p,...f)},u=e.map(p=>p(l));return s=Af(...u)(i.dispatch),{...i,dispatch:s}}}function L2(e){return yv(e)&&"type"in e&&typeof e.type=="string"}var $2=Symbol.for("immer-nothing"),HE=Symbol.for("immer-draftable"),cr=Symbol.for("immer-state");function qr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var nl=Object.getPrototypeOf;function Ro(e){return!!e&&!!e[cr]}function Ga(e){return e?B2(e)||Array.isArray(e)||!!e[HE]||!!e.constructor?.[HE]||tu(e)||sp(e):!1}var jL=Object.prototype.constructor.toString();function B2(e){if(!e||typeof e!="object")return!1;const t=nl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===jL}function Ef(e,t){op(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function op(e){const t=e[cr];return t?t.type_:Array.isArray(e)?1:tu(e)?2:sp(e)?3:0}function o0(e,t){return op(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function U2(e,t,n){const r=op(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function RL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function tu(e){return e instanceof Map}function sp(e){return e instanceof Set}function Co(e){return e.copy_||e.base_}function s0(e,t){if(tu(e))return new Map(e);if(sp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=B2(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[cr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(nl(e),r)}else{const r=nl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function vv(e,t=!1){return lp(e)||Ro(e)||!Ga(e)||(op(e)>1&&Object.defineProperties(e,{set:{value:Ud},add:{value:Ud},clear:{value:Ud},delete:{value:Ud}}),Object.freeze(e),t&&Object.values(e).forEach(n=>vv(n,!0))),e}function Ud(){qr(2)}function lp(e){return Object.isFrozen(e)}var IL={};function Io(e){const t=IL[e];return t||qr(0,e),t}var qc;function z2(){return qc}function LL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qE(e,t){t&&(Io("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function l0(e){c0(e),e.drafts_.forEach($L),e.drafts_=null}function c0(e){e===qc&&(qc=e.parent_)}function YE(e){return qc=LL(qc,e)}function $L(e){const t=e[cr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function FE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[cr].modified_&&(l0(t),qr(4)),Ga(e)&&(e=Cf(t,e),t.parent_||Pf(t,e)),t.patches_&&Io("Patches").generateReplacementPatches_(n[cr].base_,e,t.patches_,t.inversePatches_)):e=Cf(t,n,[]),l0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$2?e:void 0}function Cf(e,t,n){if(lp(t))return t;const r=t[cr];if(!r)return Ef(t,(i,s)=>VE(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Pf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),Ef(s,(u,p)=>VE(e,r,i,u,p,n,l)),Pf(e,i,!1),n&&e.patches_&&Io("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function VE(e,t,n,r,i,s,l){if(Ro(i)){const u=s&&t&&t.type_!==3&&!o0(t.assigned_,r)?s.concat(r):void 0,p=Cf(e,i,u);if(U2(n,r,p),Ro(p))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Ga(i)&&!lp(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Cf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(tu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Pf(e,i)}}function Pf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&vv(t,n)}function BL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:z2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=bv;n&&(i=[r],s=Yc);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var bv={get(e,t){if(t===cr)return e;const n=Co(e);if(!o0(n,t))return UL(e,n,t);const r=n[t];return e.finalized_||!Ga(r)?r:r===iy(e.base_,t)?(oy(e),e.copy_[t]=d0(r,e)):r},has(e,t){return t in Co(e)},ownKeys(e){return Reflect.ownKeys(Co(e))},set(e,t,n){const r=G2(Co(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=iy(Co(e),t),s=i?.[cr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(RL(n,i)&&(n!==void 0||o0(e.base_,t)))return!0;oy(e),u0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return iy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,oy(e),u0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Co(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){qr(11)},getPrototypeOf(e){return nl(e.base_)},setPrototypeOf(){qr(12)}},Yc={};Ef(bv,(e,t)=>{Yc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Yc.deleteProperty=function(e,t){return Yc.set.call(this,e,t,void 0)};Yc.set=function(e,t,n){return bv.set.call(this,e[0],t,n,e[0])};function iy(e,t){const n=e[cr];return(n?Co(n):e)[t]}function UL(e,t,n){const r=G2(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function G2(e,t){if(!(t in e))return;let n=nl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=nl(n)}}function u0(e){e.modified_||(e.modified_=!0,e.parent_&&u0(e.parent_))}function oy(e){e.copy_||(e.copy_=s0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(p=s,...f){return l.produce(p,h=>n.call(this,h,...f))}}typeof n!="function"&&qr(6),r!==void 0&&typeof r!="function"&&qr(7);let i;if(Ga(t)){const s=YE(this),l=d0(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?l0(s):c0(s)}return qE(s,r),FE(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===$2&&(i=void 0),this.autoFreeze_&&vv(i,!0),r){const s=[],l=[];Io("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else qr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,p=>t(p,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ga(e)||qr(8),Ro(e)&&(e=Ua(e));const t=YE(this),n=d0(e,void 0);return n[cr].isManual_=!0,c0(t),n}finishDraft(e,t){const n=e&&e[cr];(!n||!n.isManual_)&&qr(9);const{scope_:r}=n;return qE(r,t),FE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Io("Patches").applyPatches_;return Ro(e)?r(e,t):this.produce(e,i=>r(i,t))}};function d0(e,t){const n=tu(e)?Io("MapSet").proxyMap_(e,t):sp(e)?Io("MapSet").proxySet_(e,t):BL(e,t);return(t?t.scope_:z2()).drafts_.push(n),n}function Ua(e){return Ro(e)||qr(10,e),H2(e)}function H2(e){if(!Ga(e)||lp(e))return e;const t=e[cr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=s0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=s0(e,!0);return Ef(n,(r,i)=>{U2(n,r,H2(i))}),t&&(t.finalized_=!1),n}var GL=new zL,q2=GL.produce;function Y2(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var HL=Y2(),qL=Y2,YL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Af:Af.apply(null,arguments)};function kr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(sr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>L2(r)&&r.type===e,n}var F2=class Ic extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ic.prototype)}static get[Symbol.species](){return Ic}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ic(...t[0].concat(this)):new Ic(...t.concat(this))}};function KE(e){return Ga(e)?q2(e,()=>{}):e}function zd(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function FL(e){return typeof e=="boolean"}var VL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new F2;return n&&(FL(n)?l.push(HL):l.push(qL(n.extraArgument))),l},KL="RTK_autoBatch",WE=e=>t=>{setTimeout(t,e)},WL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WE(10):e.type==="callback"?e.queueNotification:WE(e.timeout),f=()=>{l=!1,s&&(s=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),g=r.subscribe(m);return u.add(h),()=>{g(),u.delete(h)}},dispatch(h){try{return i=!h?.meta?.[KL],s=!i,s&&(l||(l=!0,p(f))),r.dispatch(h)}finally{i=!0}}})},XL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new F2(e);return r&&i.push(WL(typeof r=="object"?r:void 0)),i};function QL(e){const t=VL(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(yv(n))u=I2(n);else throw new Error(sr(1));let p;typeof r=="function"?p=r(t):p=t();let f=Af;i&&(f=YL({trace:!1,...typeof i=="object"&&i}));const h=ML(...p),m=XL(h);let g=typeof l=="function"?l(m):m();const b=f(...g);return R2(u,s,b)}function V2(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(sr(28));if(u in t)throw new Error(sr(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function ZL(e){return typeof e=="function"}function JL(e,t){let[n,r,i]=V2(t),s;if(ZL(e))s=()=>KE(e());else{const u=KE(e);s=()=>u}function l(u=s(),p){let f=[n[p.type],...r.filter(({matcher:h})=>h(p)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,m)=>{if(m)if(Ro(h)){const b=m(h,p);return b===void 0?h:b}else{if(Ga(h))return q2(h,g=>m(g,p));{const g=m(h,p);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},u)}return l.getInitialState=s,l}var e3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",t3=(e=21)=>{let t="",n=e;for(;n--;)t+=e3[Math.random()*64|0];return t},n3=Symbol.for("rtk-slice-createasyncthunk");function r3(e,t){return`${e}/${t}`}function a3({creators:e}={}){const t=e?.asyncThunk?.[n3];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(sr(11));const l=(typeof r.reducers=="function"?r.reducers(o3()):r.reducers)||{},u=Object.keys(l),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,k){const N=typeof O=="string"?O:O.type;if(!N)throw new Error(sr(12));if(N in p.sliceCaseReducersByType)throw new Error(sr(13));return p.sliceCaseReducersByType[N]=k,f},addMatcher(O,k){return p.sliceMatchers.push({matcher:O,reducer:k}),f},exposeAction(O,k){return p.actionCreators[O]=k,f},exposeCaseReducer(O,k){return p.sliceCaseReducersByName[O]=k,f}};u.forEach(O=>{const k=l[O],N={reducerName:O,type:r3(i,O),createNotation:typeof r.reducers=="function"};l3(k)?u3(N,k,f,t):s3(N,k,f)});function h(){const[O={},k=[],N=void 0]=typeof r.extraReducers=="function"?V2(r.extraReducers):[r.extraReducers],D={...O,...p.sliceCaseReducersByType};return JL(r.initialState,M=>{for(let j in D)M.addCase(j,D[j]);for(let j of p.sliceMatchers)M.addMatcher(j.matcher,j.reducer);for(let j of k)M.addMatcher(j.matcher,j.reducer);N&&M.addDefaultCase(N)})}const m=O=>O,g=new Map,b=new WeakMap;let S;function A(O,k){return S||(S=h()),S(O,k)}function C(){return S||(S=h()),S.getInitialState()}function P(O,k=!1){function N(M){let j=M[O];return typeof j>"u"&&k&&(j=zd(b,N,C)),j}function D(M=m){const j=zd(g,k,()=>new WeakMap);return zd(j,M,()=>{const U={};for(const[K,H]of Object.entries(r.selectors??{}))U[K]=i3(H,M,()=>zd(b,M,C),k);return U})}return{reducerPath:O,getSelectors:D,get selectors(){return D(N)},selectSlice:N}}const T={name:i,reducer:A,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:C,...P(s),injectInto(O,{reducerPath:k,...N}={}){const D=k??s;return O.inject({reducerPath:D,reducer:A},N),{...T,...P(D,!0)}}};return T}}function i3(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var dr=a3();function o3(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function s3({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!c3(r))throw new Error(sr(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?kr(e,l):kr(e))}function l3(e){return e._reducerDefinitionType==="asyncThunk"}function c3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function u3({type:e,reducerName:t},n,r,i){if(!i)throw new Error(sr(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:p,settled:f,options:h}=n,m=i(e,s,h);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),p&&r.addCase(m.rejected,p),f&&r.addMatcher(m.settled,f),r.exposeCaseReducer(t,{fulfilled:l||Gd,pending:u||Gd,rejected:p||Gd,settled:f||Gd})}function Gd(){}var d3="task",K2="listener",W2="completed",xv="cancelled",f3=`task-${xv}`,p3=`task-${W2}`,f0=`${K2}-${xv}`,h3=`${K2}-${W2}`,cp=class{constructor(e){this.code=e,this.message=`${d3} ${xv} (reason: ${e})`}name="TaskAbortError";message},Sv=(e,t)=>{if(typeof e!="function")throw new TypeError(sr(32))},wf=()=>{},X2=(e,t=wf)=>(e.catch(t),e),Q2=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Do=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},No=e=>{if(e.aborted){const{reason:t}=e;throw new cp(t)}};function Z2(e,t){let n=wf;return new Promise((r,i)=>{const s=()=>i(new cp(e.reason));if(e.aborted){s();return}n=Q2(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=wf})}var m3=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof cp?"cancelled":"rejected",error:n}}finally{t?.()}},Tf=e=>t=>X2(Z2(e,t).then(n=>(No(e),n))),J2=e=>{const t=Tf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Js}=Object,XE={},up="listenerMiddleware",g3=(e,t)=>{const n=r=>Q2(e,()=>Do(r,e.reason));return(r,i)=>{Sv(r);const s=new AbortController;n(s);const l=m3(async()=>{No(e),No(s.signal);const u=await r({pause:Tf(s.signal),delay:J2(s.signal),signal:s.signal});return No(s.signal),u},()=>Do(s,p3));return i?.autoJoin&&t.push(l.catch(wf)),{result:Tf(e)(l),cancel(){Do(s,f3)}}}},y3=(e,t)=>{const n=async(r,i)=>{No(t);let s=()=>{};const u=[new Promise((p,f)=>{let h=e({predicate:r,effect:(m,g)=>{g.unsubscribe(),p([m,g.getState(),g.getOriginalState()])}});s=()=>{h(),f()}})];i!=null&&u.push(new Promise(p=>setTimeout(p,i,null)));try{const p=await Z2(t,Promise.race(u));return No(t),p}finally{s()}};return(r,i)=>X2(n(r,i))},eO=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=kr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(sr(21));return Sv(s),{predicate:i,type:t,effect:s}},tO=Js(e=>{const{type:t,predicate:n,effect:r}=eO(e);return{id:t3(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(sr(22))}}},{withTypes:()=>tO}),QE=(e,t)=>{const{type:n,effect:r,predicate:i}=eO(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},p0=e=>{e.pending.forEach(t=>{Do(t,f0)})},v3=e=>()=>{e.forEach(p0),e.clear()},ZE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},nO=Js(kr(`${up}/add`),{withTypes:()=>nO}),b3=kr(`${up}/removeAll`),rO=Js(kr(`${up}/remove`),{withTypes:()=>rO}),x3=(...e)=>{console.error(`${up}/error`,...e)},nu=(e={})=>{const t=new Map,{extra:n,onError:r=x3}=e;Sv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),m=>{h.unsubscribe(),m?.cancelActive&&p0(h)}),s=h=>{const m=QE(t,h)??tO(h);return i(m)};Js(s,{withTypes:()=>s});const l=h=>{const m=QE(t,h);return m&&(m.unsubscribe(),h.cancelActive&&p0(m)),!!m};Js(l,{withTypes:()=>l});const u=async(h,m,g,b)=>{const S=new AbortController,A=y3(s,S.signal),C=[];try{h.pending.add(S),await Promise.resolve(h.effect(m,Js({},g,{getOriginalState:b,condition:(P,T)=>A(P,T).then(Boolean),take:A,delay:J2(S.signal),pause:Tf(S.signal),extra:n,signal:S.signal,fork:g3(S.signal,C),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((P,T,O)=>{P!==S&&(Do(P,f0),O.delete(P))})},cancel:()=>{Do(S,f0),h.pending.delete(S)},throwIfCancelled:()=>{No(S.signal)}})))}catch(P){P instanceof cp||ZE(r,P,{raisedBy:"effect"})}finally{await Promise.all(C),Do(S,h3),h.pending.delete(S)}},p=v3(t);return{middleware:h=>m=>g=>{if(!L2(g))return m(g);if(nO.match(g))return s(g.payload);if(b3.match(g)){p();return}if(rO.match(g))return l(g.payload);let b=h.getState();const S=()=>{if(b===XE)throw new Error(sr(23));return b};let A;try{if(A=m(g),t.size>0){const C=h.getState(),P=Array.from(t.values());for(const T of P){let O=!1;try{O=T.predicate(g,C,b)}catch(k){O=!1,ZE(r,k,{raisedBy:"predicate"})}O&&u(T,g,h,S)}}}finally{b=XE}return A},startListening:s,stopListening:l,clearListeners:p}};function sr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var S3={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},aO=dr({name:"chartLayout",initialState:S3,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:A3,setLayout:E3,setChartSize:C3,setScale:P3}=aO.actions,w3=aO.reducer;function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(r){T3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T3(e,t,n){return(t=O3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O3(e){var t=_3(e,"string");return typeof t=="symbol"?t:t+""}function _3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Of=Math.PI/180,D3=e=>e*180/Math.PI,Lt=(e,t,n,r)=>({x:e+Math.cos(-Of*r)*n,y:t+Math.sin(-Of*r)*n}),iO=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},N3=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},k3=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=N3({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,p=Math.acos(u);return r>s&&(p=2*Math.PI-p),{radius:l,angle:D3(p),angleInRadian:p}},M3=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},j3=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},R3=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=k3({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:p,endAngle:f}=M3(t),h=s,m;if(p<=f){for(;h>f;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=f}else{for(;h>p;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=p}return m?eC(eC({},t),{},{radius:i,angle:j3(h,t)}):null};function oO(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function tC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(n),!0).forEach(function(r){I3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I3(e,t,n){return(t=L3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L3(e){var t=$3(e,"string");return typeof t=="symbol"?t:t+""}function $3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bt(e,t,n){return nn(e)||nn(t)?n:da(t)?jo(e,t,n):typeof t=="function"?t(e):n}var B3=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var p=0;p<u;p++){var f=p>0?n[p-1].coordinate:n[u-1].coordinate,h=n[p].coordinate,m=p>=u-1?n[0].coordinate:n[p+1].coordinate,g=void 0;if(tn(h-f)!==tn(m-h)){var b=[];if(tn(m-h)===tn(i[1]-i[0])){g=m;var S=h+i[1]-i[0];b[0]=Math.min(S,(S+f)/2),b[1]=Math.max(S,(S+f)/2)}else{g=f;var A=m+i[1]-i[0];b[0]=Math.min(h,(A+h)/2),b[1]=Math.max(h,(A+h)/2)}var C=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>C[0]&&e<=C[1]||e>=b[0]&&e<=b[1]){({index:l}=n[p]);break}}else{var P=Math.min(f,m),T=Math.max(f,m);if(e>(P+h)/2&&e<=(T+h)/2){({index:l}=n[p]);break}}}else if(t){for(var O=0;O<u;O++)if(O===0&&e<=(t[O].coordinate+t[O+1].coordinate)/2||O>0&&O<u-1&&e>(t[O].coordinate+t[O-1].coordinate)/2&&e<=(t[O].coordinate+t[O+1].coordinate)/2||O===u-1&&e>(t[O].coordinate+t[O-1].coordinate)/2){({index:l}=t[O]);break}}return l},U3=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&Te(e[s]))return _r(_r({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&Te(e[l]))return _r(_r({},e),{},{[l]:e[l]+(i||0)})}return e},Ho=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",sO=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},lO=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:p,categoricalDomain:f,tickCount:h,ticks:m,niceTicks:g,axisType:b}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=b==="angleAxis"&&s&&s.length>=2?tn(s[0]-s[1])*2*A:A,m||g){var C=(m||g||[]).map((P,T)=>{var O=r?r.indexOf(P):P;return{coordinate:l(O)+A,value:P,offset:A,index:T}});return C.filter(P=>!lr(P.coordinate))}return p&&f?f.map((P,T)=>({coordinate:l(P)+A,value:P,index:T,offset:A})):l.ticks&&h!=null?l.ticks(h).map((P,T)=>({coordinate:l(P)+A,value:P,offset:A,index:T})):l.domain().map((P,T)=>({coordinate:l(P)+A,value:r?r[P]:P,index:T,offset:A}))},nC=1e-4,z3=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-nC,s=Math.max(r[0],r[1])+nC,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},G3=(e,t)=>{if(!t||t.length!==2||!Te(t[0])||!Te(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Te(e[0])||e[0]<n)&&(i[0]=n),(!Te(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},H3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=lr(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},q3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=lr(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},Y3={sign:H3,expand:xI,none:tl,silhouette:SI,wiggle:AI,positive:q3},F3=(e,t,n)=>{var r=Y3[n],i=bI().keys(t).value((s,l)=>+bt(s,l,0)).order(r0).offset(r);return i(e)};function V3(e){return e==null?void 0:String(e)}var rC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=bt(s,t.dataKey,t.scale.domain()[l]);return nn(u)?null:t.scale(u)-i/2+r},K3=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},W3=e=>{var t=e.flat(2).filter(Te);return[Math.min(...t),Math.max(...t)]},X3=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Q3=(e,t,n)=>{if(e!=null)return X3(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((p,f)=>{var h=oO(f,t,n),m=W3(h);return[Math.min(p[0],m[0]),Math.max(p[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},aC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Av=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=ip(t,h=>h.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var p=i[l],f=i[l-1];s=Math.min((p.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function oC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return _r(_r({},t),{},{dataKey:n,payload:r,value:i,name:s})}function dp(e,t){if(e)return String(e);if(typeof t=="string")return t}function Z3(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?R3({x:e,y:t},r):null}var J3=(e,t,n,r)=>{var i=t.find(f=>f&&f.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return _r(_r(_r({},r),Lt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:p}=r;return _r(_r(_r({},r),Lt(r.cx,r.cy,u,p)),{},{angle:p,radius:u})}return{x:0,y:0}},e5=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Va=e=>e.layout.width,Ka=e=>e.layout.height,t5=e=>e.layout.scale,cO=e=>e.layout.margin,fp=ee(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),pp=ee(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),uO="data-recharts-item-index",dO="data-recharts-item-data-key",ru=60;function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(r){n5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n5(e,t,n){return(t=r5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r5(e){var t=a5(e,"string");return typeof t=="symbol"?t:t+""}function a5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i5=e=>e.brush.height;function o5(e){var t=pp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ru;return n+i}return n},0)}function s5(e){var t=pp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ru;return n+i}return n},0)}function l5(e){var t=fp(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function c5(e){var t=fp(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Vt=ee([Va,Ka,cO,i5,o5,s5,l5,c5,M2,wL],(e,t,n,r,i,s,l,u,p,f)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},g=Hd(Hd({},m),h),b=g.bottom;g.bottom+=r,g=U3(g,p,f);var S=e-g.left-g.right,A=t-g.top-g.bottom;return Hd(Hd({brushBottom:b},g),{},{width:Math.max(S,0),height:Math.max(A,0)})}),u5=ee(Vt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ev=ee(Va,Ka,(e,t)=>({x:0,y:0,width:e,height:t})),d5=E.createContext(null),jr=()=>E.useContext(d5)!=null,hp=e=>e.brush,mp=ee([hp,Vt,cO],(e,t,n)=>({height:e.height,x:Te(e.x)?e.x:t.left,y:Te(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Te(e.width)?e.width:t.width})),Cv=()=>{var e,t=jr(),n=Pe(u5),r=Pe(mp),i=(e=Pe(hp))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},f5={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},fO=()=>{var e;return(e=Pe(Vt))!==null&&e!==void 0?e:f5},Pv=()=>Pe(Va),wv=()=>Pe(Ka),p5=()=>Pe(e=>e.layout.margin),Ve=e=>e.layout.layoutType,Tv=()=>Pe(Ve),h5={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},pO=dr({name:"legend",initialState:h5,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Ua(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:lC,setLegendSettings:m5,addLegendPayload:hO,removeLegendPayload:mO}=pO.actions,g5=pO.reducer,y5=["contextPayload"];function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h0.apply(null,arguments)}function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){Ov(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ov(e,t,n){return(t=v5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v5(e){var t=b5(e,"string");return typeof t=="symbol"?t:t+""}function b5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x5(e,t){if(e==null)return{};var n,r,i=S5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function A5(e){return e.value}function E5(e){var{contextPayload:t}=e,n=x5(e,y5),r=_2(t,e.payloadUniqBy,A5),i=rl(rl({},n),{},{payload:r});return E.isValidElement(e.content)?E.cloneElement(e.content,i):typeof e.content=="function"?E.createElement(e.content,i):E.createElement(pv,i)}function C5(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:p}=t,f,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?f={left:((r||0)-s.width)/2}:f=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(p==="middle"?h={top:((i||0)-s.height)/2}:h=p==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),rl(rl({},f),h)}function P5(e){var t=Ct();return E.useEffect(()=>{t(m5(e))},[t,e]),null}function w5(e){var t=Ct();return E.useEffect(()=>(t(lC(e)),()=>{t(lC({width:0,height:0}))}),[t,e]),null}function T5(e){var t=_L(),n=HR(),r=p5(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[p,f]=j2([t]),h=Pv(),m=wv();if(h==null||m==null)return null;var g=h-(r.left||0)-(r.right||0),b=gp.getWidthOrHeight(e.layout,s,i,g),S=u?l:rl(rl({position:"absolute",width:b?.width||i||"auto",height:b?.height||s||"auto"},C5(l,e,r,h,m,p)),l),A=u??n;if(A==null)return null;var C=E.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:f},E.createElement(P5,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),E.createElement(w5,{width:p.width,height:p.height}),E.createElement(E5,h0({},e,b,{margin:r,chartWidth:h,chartHeight:m,contextPayload:t})));return n2.createPortal(C,A)}class gp extends E.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Te(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return E.createElement(T5,this.props)}}Ov(gp,"displayName","Legend");Ov(gp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function m0(){return m0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m0.apply(null,arguments)}function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(n),!0).forEach(function(r){O5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O5(e,t,n){return(t=_5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _5(e){var t=D5(e,"string");return typeof t=="symbol"?t:t+""}function D5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N5(e){return Array.isArray(e)&&da(e[0])&&da(e[1])?e.join(" ~ "):e}var k5=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:p,labelClassName:f,label:h,labelFormatter:m,accessibilityLayer:g=!1}=e,b=()=>{if(s&&s.length){var N={padding:0,margin:0},D=(u?ip(s,u):s).map((M,j)=>{if(M.type==="none")return null;var U=M.formatter||l||N5,{value:K,name:H}=M,W=K,re=H;if(U){var le=U(K,H,M,j,s);if(Array.isArray(le))[W,re]=le;else if(le!=null)W=le;else return null}var ne=sy({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:ne},da(re)?E.createElement("span",{className:"recharts-tooltip-item-name"},re):null,da(re)?E.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,E.createElement("span",{className:"recharts-tooltip-item-value"},W),E.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:N},D)}return null},S=sy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=sy({margin:0},i),C=!nn(h),P=C?h:"",T=tt("recharts-default-tooltip",p),O=tt("recharts-tooltip-label",f);C&&m&&s!==void 0&&s!==null&&(P=m(h,s));var k=g?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",m0({className:T,style:S},k),E.createElement("p",{className:O,style:A},E.isValidElement(P)?P:"".concat(P)),b())},Tc="recharts-tooltip-wrapper",M5={visibility:"hidden"};function j5(e){var{coordinate:t,translateX:n,translateY:r}=e;return tt(Tc,{["".concat(Tc,"-right")]:Te(n)&&t&&Te(t.x)&&n>=t.x,["".concat(Tc,"-left")]:Te(n)&&t&&Te(t.x)&&n<t.x,["".concat(Tc,"-bottom")]:Te(r)&&t&&Te(t.y)&&r>=t.y,["".concat(Tc,"-top")]:Te(r)&&t&&Te(t.y)&&r<t.y})}function dC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:p,viewBoxDimension:f}=e;if(s&&Te(s[r]))return s[r];var h=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?h:m;var g=p[r];if(g==null)return 0;if(l[r]){var b=h,S=g;return b<S?Math.max(m,g):Math.max(h,g)}if(f==null)return 0;var A=m+u,C=g+f;return A>C?Math.max(h,g):Math.max(m,g)}function R5(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function I5(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:p}=e,f,h,m;return l.height>0&&l.width>0&&n?(h=dC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:p,viewBoxDimension:p.width}),m=dC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:p,viewBoxDimension:p.height}),f=R5({translateX:h,translateY:m,useTranslate3d:u})):f=M5,{cssProperties:f,cssClasses:j5({translateX:h,translateY:m,coordinate:n})}}function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){g0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g0(e,t,n){return(t=L5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L5(e){var t=$5(e,"string");return typeof t=="symbol"?t:t+""}function $5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class B5 extends E.PureComponent{constructor(){super(...arguments),g0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),g0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:p,offset:f,position:h,reverseDirection:m,useTranslate3d:g,viewBox:b,wrapperStyle:S,lastBoundingBox:A,innerRef:C,hasPortalFromProps:P}=this.props,{cssClasses:T,cssProperties:O}=I5({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:f,position:h,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:g,viewBox:b}),k=P?{}:qd(qd({transition:p&&t?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),N=qd(qd({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:N,ref:C},s)}}var U5=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hl={isSsr:U5()},gO=()=>Pe(e=>e.rootProps.accessibilityLayer);function ur(e){return Number.isFinite(e)}function al(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function y0(){return y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y0.apply(null,arguments)}function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(r){z5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z5(e,t,n){return(t=G5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G5(e){var t=H5(e,"string");return typeof t=="symbol"?t:t+""}function H5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mC={curveBasisClosed:lI,curveBasisOpen:cI,curveBasis:sI,curveBumpX:VR,curveBumpY:KR,curveLinearClosed:uI,curveLinear:rp,curveMonotoneX:dI,curveMonotoneY:fI,curveNatural:pI,curveStep:hI,curveStepAfter:gI,curveStepBefore:mI},Yd=e=>ur(e.x)&&ur(e.y),Oc=e=>e.x,_c=e=>e.y,q5=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Jc(e));return(n==="curveMonotone"||n==="curveBump")&&t?mC["".concat(n).concat(t==="vertical"?"Y":"X")]:mC[n]||rp},Y5=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=q5(t,i),u=s?n.filter(Yd):n,p;if(Array.isArray(r)){var f=s?r.filter(m=>Yd(m)):r,h=u.map((m,g)=>hC(hC({},m),{},{base:f[g]}));return i==="vertical"?p=Ld().y(_c).x1(Oc).x0(m=>m.base.x):p=Ld().x(Oc).y1(_c).y0(m=>m.base.y),p.defined(Yd).curve(l),p(h)}return i==="vertical"&&Te(r)?p=Ld().y(_c).x1(Oc).x0(r):Te(r)?p=Ld().x(Oc).y1(_c).y0(r):p=c2().x(Oc).y(_c),p.defined(Yd).curve(l),p(u)},yO=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?Y5(e):r;return E.createElement("path",y0({},Go(e),MR(e),{className:tt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},F5=["x","y","top","left","width","height","className"];function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v0.apply(null,arguments)}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function V5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){K5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K5(e,t,n){return(t=W5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W5(e){var t=X5(e,"string");return typeof t=="symbol"?t:t+""}function X5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q5(e,t){if(e==null)return{};var n,r,i=Z5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var J5=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),e4=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,p=Q5(e,F5),f=V5({x:t,y:n,top:r,left:i,width:s,height:l},p);return!Te(t)||!Te(n)||!Te(s)||!Te(l)||!Te(r)||!Te(i)?null:E.createElement("path",v0({},It(f,!0),{className:tt("recharts-cross",u),d:J5(t,n,s,l,r,i)}))};function t4(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){r4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r4(e,t,n){return(t=a4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a4(e){var t=i4(e,"string");return typeof t=="symbol"?t:t+""}function i4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rr(e,t){var n=n4({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function o4(){}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(r){s4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s4(e,t,n){return(t=l4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l4(e){var t=c4(e,"string");return typeof t=="symbol"?t:t+""}function c4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u4=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vO=(e,t,n)=>e.map(r=>"".concat(u4(r)," ").concat(t,"ms ").concat(n)).join(","),d4=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Fc=(e,t)=>Object.keys(t).reduce((n,r)=>bC(bC({},n),{},{[r]:e(r,t[r])}),{});function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(r){f4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f4(e,t,n){return(t=p4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p4(e){var t=h4(e,"string");return typeof t=="symbol"?t:t+""}function h4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _f=(e,t,n)=>e+(t-e)*n,b0=e=>{var{from:t,to:n}=e;return t!==n},bO=(e,t,n)=>{var r=Fc((i,s)=>{if(b0(s)){var[l,u]=e(s.from,s.to,s.velocity);return fn(fn({},s),{},{from:l,velocity:u})}return s},t);return n<1?Fc((i,s)=>b0(s)?fn(fn({},s),{},{velocity:_f(s.velocity,r[i].velocity,n),from:_f(s.from,r[i].from,n)}):s,t):bO(e,r,n-1)};function m4(e,t,n,r,i,s){var l,u=r.reduce((g,b)=>fn(fn({},g),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),p=()=>Fc((g,b)=>b.from,u),f=()=>!Object.values(u).filter(b0).length,h=null,m=g=>{l||(l=g);var b=g-l,S=b/n.dt;u=bO(n,u,S),i(fn(fn(fn({},e),t),p())),l=g,f()||(h=s.setTimeout(m))};return()=>(h=s.setTimeout(m),()=>{h()})}function g4(e,t,n,r,i,s,l){var u=null,p=i.reduce((m,g)=>fn(fn({},m),{},{[g]:[e[g],t[g]]}),{}),f,h=m=>{f||(f=m);var g=(m-f)/r,b=Fc((A,C)=>_f(...C,n(g)),p);if(s(fn(fn(fn({},e),t),b)),g<1)u=l.setTimeout(h);else{var S=Fc((A,C)=>_f(...C,n(1)),p);s(fn(fn(fn({},e),t),S))}};return()=>(u=l.setTimeout(h),()=>{u()})}const y4=(e,t,n,r,i,s)=>{var l=d4(e,t);return n.isStepper===!0?m4(e,t,n,l,i,s):g4(e,t,n,r,l,i,s)};var Df=1e-4,xO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],SO=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),SC=(e,t)=>n=>{var r=xO(e,t);return SO(r,n)},v4=(e,t)=>n=>{var r=xO(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return SO(i,n)},AC=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var p=l[0].split("(");p[0]==="cubic-bezier"&&p[1].split(")")[0].split(",").length===4&&([t,r,n,i]=p[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var f=SC(t,n),h=SC(r,i),m=v4(t,n),g=S=>S>1?1:S<0?0:S,b=S=>{for(var A=S>1?1:S,C=A,P=0;P<8;++P){var T=f(C)-A,O=m(C);if(Math.abs(T-A)<Df||O<Df)return h(C);C=g(C-T/O)}return h(C)};return b.isStepper=!1,b},b4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,p)=>{var f=-(l-u)*n,h=p*r,m=p+(f-h)*i/1e3,g=p*i/1e3+l;return Math.abs(g-u)<Df&&Math.abs(m)<Df?[u,0]:[g,m]};return s.isStepper=!0,s.dt=i,s},x4=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return AC(e);case"spring":return b4();default:if(e.split("(")[0]==="cubic-bezier")return AC(e)}return typeof e=="function"?e:null};function S4(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[p,...f]=u;if(typeof p=="number"){i=e.setTimeout(s.bind(null,f),p);return}s(p),i=e.setTimeout(s.bind(null,f));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class A4{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function E4(){return S4(new A4)}var C4=E.createContext(E4);function P4(e,t){var n=E.useContext(C4);return E.useMemo(()=>t??n(e),[e,t,n])}var w4={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},EC={t:0},ly={t:1};function yp(e){var t=Rr(e,w4),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:p,children:f}=t,h=P4(t.animationId,t.animationManager),[m,g]=E.useState(n?EC:ly),b=E.useRef(null);return E.useEffect(()=>{n||g(ly)},[n]),E.useEffect(()=>{if(!n||!r)return o4;var S=y4(EC,ly,x4(s),i,g,h.getTimeoutController()),A=()=>{b.current=S()};return h.start([p,l,A,i,u]),()=>{h.stop(),b.current&&b.current(),u()}},[n,r,i,s,l,p,u,h]),f(m.t)}function vp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(Hc(t)),r=E.useRef(e);return r.current!==e&&(n.current=Hc(t),r.current=e),n.current}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(n),!0).forEach(function(r){T4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T4(e,t,n){return(t=O4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O4(e){var t=_4(e,"string");return typeof t=="symbol"?t:t+""}function _4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nf(){return Nf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nf.apply(null,arguments)}var wC=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,p=r>=0&&n>=0||r<0&&n<0?1:0,f;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,g=4;m<g;m++)h[m]=i[m]>s?s:i[m];f="M".concat(e,",").concat(t+l*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(p,",").concat(e+u*h[0],",").concat(t)),f+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(p,`,
        `).concat(e+n,",").concat(t+l*h[1])),f+="L ".concat(e+n,",").concat(t+r-l*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(p,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),f+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(p,`,
        `).concat(e,",").concat(t+r-l*h[3])),f+="Z"}else if(s>0&&i===+i&&i>0){var b=Math.min(s,i);f="M ".concat(e,",").concat(t+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+u*b,",").concat(t,`
            L `).concat(e+n-u*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+n,",").concat(t+l*b,`
            L `).concat(e+n,",").concat(t+r-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+n-u*b,",").concat(t+r,`
            L `).concat(e+u*b,",").concat(t+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e,",").concat(t+r-l*b," Z")}else f="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},D4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},AO=e=>{var t=Rr(e,D4),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var le=n.current.getTotalLength();le&&i(le)}catch{}},[]);var{x:s,y:l,width:u,height:p,radius:f,className:h}=t,{animationEasing:m,animationDuration:g,animationBegin:b,isAnimationActive:S,isUpdateAnimationActive:A}=t,C=E.useRef(u),P=E.useRef(p),T=E.useRef(s),O=E.useRef(l),k=E.useMemo(()=>({x:s,y:l,width:u,height:p,radius:f}),[s,l,u,p,f]),N=vp(k,"rectangle-");if(s!==+s||l!==+l||u!==+u||p!==+p||u===0||p===0)return null;var D=tt("recharts-rectangle",h);if(!A)return E.createElement("path",Nf({},It(t,!0),{className:D,d:wC(s,l,u,p,f)}));var M=C.current,j=P.current,U=T.current,K=O.current,H="0px ".concat(r===-1?1:r,"px"),W="".concat(r,"px 0px"),re=vO(["strokeDasharray"],g,typeof m=="string"?m:void 0);return E.createElement(yp,{animationId:N,key:N,canBegin:r>0,duration:g,easing:m,isActive:A,begin:b},le=>{var ne=pn(M,u,le),L=pn(j,p,le),q=pn(U,s,le),ue=pn(K,l,le);n.current&&(C.current=ne,P.current=L,T.current=q,O.current=ue);var ye;return S?le>0?ye={transition:re,strokeDasharray:W}:ye={strokeDasharray:H}:ye={strokeDasharray:W},E.createElement("path",Nf({},It(t,!0),{className:D,d:wC(q,ue,ne,L,f),ref:n,style:PC(PC({},ye),t.style)}))})};function EO(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=Lt(t,n,r,i),u=Lt(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x0.apply(null,arguments)}var N4=(e,t)=>{var n=tn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Fd=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:p}=e,f=u*(l?1:-1)+r,h=Math.asin(u/f)/Of,m=p?i:i+s*h,g=Lt(t,n,f,m),b=Lt(t,n,r,m),S=p?i-s*h:i,A=Lt(t,n,f*Math.cos(h*Of),S);return{center:g,circleTangency:b,lineTangency:A,theta:h}},CO=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=N4(s,l),p=s+u,f=Lt(t,n,i,s),h=Lt(t,n,i,p),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>p),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var g=Lt(t,n,r,s),b=Lt(t,n,r,p);m+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=p),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},k4=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:p,endAngle:f}=e,h=tn(f-p),{circleTangency:m,lineTangency:g,theta:b}=Fd({cx:t,cy:n,radius:i,angle:p,sign:h,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:C}=Fd({cx:t,cy:n,radius:i,angle:f,sign:-h,cornerRadius:s,cornerIsExternal:u}),P=u?Math.abs(p-f):Math.abs(p-f)-b-C;if(P<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):CO({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:p,endAngle:f});var T="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:O,lineTangency:k,theta:N}=Fd({cx:t,cy:n,radius:r,angle:p,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:M,theta:j}=Fd({cx:t,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),U=u?Math.abs(p-f):Math.abs(p-f)-N-j;if(U<0&&s===0)return"".concat(T,"L").concat(t,",").concat(n,"Z");T+="L".concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(U>180),",").concat(+(h>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,"Z")}else T+="L".concat(t,",").concat(n,"Z");return T},M4={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},PO=e=>{var t=Rr(e,M4),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:p,startAngle:f,endAngle:h,className:m}=t;if(s<i||f===h)return null;var g=tt("recharts-sector",m),b=s-i,S=Cn(l,b,0,!0),A;return S>0&&Math.abs(f-h)<360?A=k4({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,b/2),forceCornerRadius:u,cornerIsExternal:p,startAngle:f,endAngle:h}):A=CO({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:f,endAngle:h}),E.createElement("path",x0({},It(t,!0),{className:g,d:A}))};function j4(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:p,innerRadius:f,outerRadius:h,angle:m}=t,g=Lt(u,p,f,m),b=Lt(u,p,h,m);r=g.x,i=g.y,s=b.x,l=b.y}else return EO(t);return[{x:r,y:i},{x:s,y:l}]}var cy={},uy={},dy={},TC;function R4(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N2();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(dy)),dy}var OC;function I4(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R4();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(uy)),uy}var _C;function L4(){return _C||(_C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k2(),n=I4();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),p=new Array(u);for(let f=0;f<u;f++)p[f]=i,i+=l;return p}e.range=r})(cy)),cy}var fy,DC;function $4(){return DC||(DC=1,fy=L4().range),fy}var B4=$4();const wO=Fr(B4);function Ni(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U4(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _v(e){let t,n,r;e.length!==2?(t=Ni,n=(u,p)=>Ni(e(u),p),r=(u,p)=>e(u)-p):(t=e===Ni||e===U4?e:z4,n=e,r=e);function i(u,p,f=0,h=u.length){if(f<h){if(t(p,p)!==0)return h;do{const m=f+h>>>1;n(u[m],p)<0?f=m+1:h=m}while(f<h)}return f}function s(u,p,f=0,h=u.length){if(f<h){if(t(p,p)!==0)return h;do{const m=f+h>>>1;n(u[m],p)<=0?f=m+1:h=m}while(f<h)}return f}function l(u,p,f=0,h=u.length){const m=i(u,p,f,h-1);return m>f&&r(u[m-1],p)>-r(u[m],p)?m-1:m}return{left:i,center:l,right:s}}function z4(){return 0}function TO(e){return e===null?NaN:+e}function*G4(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const H4=_v(Ni),au=H4.right;_v(TO).center;class NC extends Map{constructor(t,n=F4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(kC(this,t))}has(t){return super.has(kC(this,t))}set(t,n){return super.set(q4(this,t),n)}delete(t){return super.delete(Y4(this,t))}}function kC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function q4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Y4({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function F4(e){return e!==null&&typeof e=="object"?e.valueOf():e}function V4(e=Ni){if(e===Ni)return OO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function OO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const K4=Math.sqrt(50),W4=Math.sqrt(10),X4=Math.sqrt(2);function kf(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=K4?10:s>=W4?5:s>=X4?2:1;let u,p,f;return i<0?(f=Math.pow(10,-i)/l,u=Math.round(e*f),p=Math.round(t*f),u/f<e&&++u,p/f>t&&--p,f=-f):(f=Math.pow(10,i)*l,u=Math.round(e/f),p=Math.round(t/f),u*f<e&&++u,p*f>t&&--p),p<u&&.5<=n&&n<2?kf(e,t,n*2):[u,p,f]}function S0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?kf(t,e,n):kf(e,t,n);if(!(s>=i))return[];const u=s-i+1,p=new Array(u);if(r)if(l<0)for(let f=0;f<u;++f)p[f]=(s-f)/-l;else for(let f=0;f<u;++f)p[f]=(s-f)*l;else if(l<0)for(let f=0;f<u;++f)p[f]=(i+f)/-l;else for(let f=0;f<u;++f)p[f]=(i+f)*l;return p}function A0(e,t,n){return t=+t,e=+e,n=+n,kf(e,t,n)[2]}function E0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?A0(t,e,n):A0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function MC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function jC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function _O(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?OO:V4(i);r>n;){if(r-n>600){const p=r-n+1,f=t-n+1,h=Math.log(p),m=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*m*(p-m)/p)*(f-p/2<0?-1:1),b=Math.max(n,Math.floor(t-f*m/p+g)),S=Math.min(r,Math.floor(t+(p-f)*m/p+g));_O(e,t,b,S,i)}const s=e[t];let l=n,u=r;for(Dc(e,n,t),i(e[r],s)>0&&Dc(e,n,r);l<u;){for(Dc(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Dc(e,n,u):(++u,Dc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Dc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Q4(e,t,n){if(e=Float64Array.from(G4(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return jC(e);if(t>=1)return MC(e);var r,i=(r-1)*t,s=Math.floor(i),l=MC(_O(e,s).subarray(0,s+1)),u=jC(e.subarray(s+1));return l+(u-l)*(i-s)}}function Z4(e,t,n=TO){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function J4(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Ir(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const C0=Symbol("implicit");function Dv(){var e=new NC,t=[],n=[],r=C0;function i(s){let l=e.get(s);if(l===void 0){if(r!==C0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new NC;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Dv(t,n).unknown(r)},Ir.apply(i,arguments),i}function Nv(){var e=Dv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,p=0,f=0,h=.5;delete e.unknown;function m(){var g=t().length,b=i<r,S=b?i:r,A=b?r:i;s=(A-S)/Math.max(1,g-p+f*2),u&&(s=Math.floor(s)),S+=(A-S-s*(g-p))*h,l=s*(1-p),u&&(S=Math.round(S),l=Math.round(l));var C=J4(g).map(function(P){return S+s*P});return n(b?C.reverse():C)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(g){return arguments.length?(u=!!g,m()):u},e.padding=function(g){return arguments.length?(p=Math.min(1,f=+g),m()):p},e.paddingInner=function(g){return arguments.length?(p=Math.min(1,g),m()):p},e.paddingOuter=function(g){return arguments.length?(f=+g,m()):f},e.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),m()):h},e.copy=function(){return Nv(t(),[r,i]).round(u).paddingInner(p).paddingOuter(f).align(h)},Ir.apply(m(),arguments)}function DO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return DO(t())},e}function e$(){return DO(Nv.apply(null,arguments).paddingInner(1))}function kv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function NO(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function iu(){}var Vc=.7,Mf=1/Vc,el="\\s*([+-]?\\d+)\\s*",Kc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t$=/^#([0-9a-f]{3,8})$/,n$=new RegExp(`^rgb\\(${el},${el},${el}\\)$`),r$=new RegExp(`^rgb\\(${ua},${ua},${ua}\\)$`),a$=new RegExp(`^rgba\\(${el},${el},${el},${Kc}\\)$`),i$=new RegExp(`^rgba\\(${ua},${ua},${ua},${Kc}\\)$`),o$=new RegExp(`^hsl\\(${Kc},${ua},${ua}\\)$`),s$=new RegExp(`^hsla\\(${Kc},${ua},${ua},${Kc}\\)$`),RC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kv(iu,Wc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:IC,formatHex:IC,formatHex8:l$,formatHsl:c$,formatRgb:LC,toString:LC});function IC(){return this.rgb().formatHex()}function l$(){return this.rgb().formatHex8()}function c$(){return kO(this).formatHsl()}function LC(){return this.rgb().formatRgb()}function Wc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=t$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$C(t):n===3?new Kn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=n$.exec(e))?new Kn(t[1],t[2],t[3],1):(t=r$.exec(e))?new Kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=a$.exec(e))?Vd(t[1],t[2],t[3],t[4]):(t=i$.exec(e))?Vd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o$.exec(e))?zC(t[1],t[2]/100,t[3]/100,1):(t=s$.exec(e))?zC(t[1],t[2]/100,t[3]/100,t[4]):RC.hasOwnProperty(e)?$C(RC[e]):e==="transparent"?new Kn(NaN,NaN,NaN,0):null}function $C(e){return new Kn(e>>16&255,e>>8&255,e&255,1)}function Vd(e,t,n,r){return r<=0&&(e=t=n=NaN),new Kn(e,t,n,r)}function u$(e){return e instanceof iu||(e=Wc(e)),e?(e=e.rgb(),new Kn(e.r,e.g,e.b,e.opacity)):new Kn}function P0(e,t,n,r){return arguments.length===1?u$(e):new Kn(e,t,n,r??1)}function Kn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}kv(Kn,P0,NO(iu,{brighter(e){return e=e==null?Mf:Math.pow(Mf,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vc:Math.pow(Vc,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kn(ko(this.r),ko(this.g),ko(this.b),jf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BC,formatHex:BC,formatHex8:d$,formatRgb:UC,toString:UC}));function BC(){return`#${To(this.r)}${To(this.g)}${To(this.b)}`}function d$(){return`#${To(this.r)}${To(this.g)}${To(this.b)}${To((isNaN(this.opacity)?1:this.opacity)*255)}`}function UC(){const e=jf(this.opacity);return`${e===1?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${e===1?")":`, ${e})`}`}function jf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ko(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function To(e){return e=ko(e),(e<16?"0":"")+e.toString(16)}function zC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Yr(e,t,n,r)}function kO(e){if(e instanceof Yr)return new Yr(e.h,e.s,e.l,e.opacity);if(e instanceof iu||(e=Wc(e)),!e)return new Yr;if(e instanceof Yr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,p=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=p<.5?s+i:2-s-i,l*=60):u=p>0&&p<1?0:l,new Yr(l,u,p,e.opacity)}function f$(e,t,n,r){return arguments.length===1?kO(e):new Yr(e,t,n,r??1)}function Yr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}kv(Yr,f$,NO(iu,{brighter(e){return e=e==null?Mf:Math.pow(Mf,e),new Yr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vc:Math.pow(Vc,e),new Yr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Kn(py(e>=240?e-240:e+120,i,r),py(e,i,r),py(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Yr(GC(this.h),Kd(this.s),Kd(this.l),jf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jf(this.opacity);return`${e===1?"hsl(":"hsla("}${GC(this.h)}, ${Kd(this.s)*100}%, ${Kd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function GC(e){return e=(e||0)%360,e<0?e+360:e}function Kd(e){return Math.max(0,Math.min(1,e||0))}function py(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Mv=e=>()=>e;function p$(e,t){return function(n){return e+n*t}}function h$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function m$(e){return(e=+e)==1?MO:function(t,n){return n-t?h$(t,n,e):Mv(isNaN(t)?n:t)}}function MO(e,t){var n=t-e;return n?p$(e,n):Mv(isNaN(e)?t:e)}const HC=(function e(t){var n=m$(t);function r(i,s){var l=n((i=P0(i)).r,(s=P0(s)).r),u=n(i.g,s.g),p=n(i.b,s.b),f=MO(i.opacity,s.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=p(h),i.opacity=f(h),i+""}}return r.gamma=e,r})(1);function g$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function y$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function v$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=ml(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function b$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Rf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function x$(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ml(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var w0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hy=new RegExp(w0.source,"g");function S$(e){return function(){return e}}function A$(e){return function(t){return e(t)+""}}function E$(e,t){var n=w0.lastIndex=hy.lastIndex=0,r,i,s,l=-1,u=[],p=[];for(e=e+"",t=t+"";(r=w0.exec(e))&&(i=hy.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,p.push({i:l,x:Rf(r,i)})),n=hy.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?p[0]?A$(p[0].x):S$(t):(t=p.length,function(f){for(var h=0,m;h<t;++h)u[(m=p[h]).i]=m.x(f);return u.join("")})}function ml(e,t){var n=typeof t,r;return t==null||n==="boolean"?Mv(t):(n==="number"?Rf:n==="string"?(r=Wc(t))?(t=r,HC):E$:t instanceof Wc?HC:t instanceof Date?b$:y$(t)?g$:Array.isArray(t)?v$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?x$:Rf)(e,t)}function jv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function C$(e,t){t===void 0&&(t=e,e=ml);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function P$(e){return function(){return e}}function If(e){return+e}var qC=[0,1];function Rn(e){return e}function T0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:P$(isNaN(t)?NaN:.5)}function w$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function T$(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=T0(i,r),s=n(l,s)):(r=T0(r,i),s=n(s,l)),function(u){return s(r(u))}}function O$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=T0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var p=au(e,u,1,r)-1;return s[p](i[p](u))}}function ou(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function bp(){var e=qC,t=qC,n=ml,r,i,s,l=Rn,u,p,f;function h(){var g=Math.min(e.length,t.length);return l!==Rn&&(l=w$(e[0],e[g-1])),u=g>2?O$:T$,p=f=null,m}function m(g){return g==null||isNaN(g=+g)?s:(p||(p=u(e.map(r),t,n)))(r(l(g)))}return m.invert=function(g){return l(i((f||(f=u(t,e.map(r),Rf)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,If),h()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),h()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),n=jv,h()},m.clamp=function(g){return arguments.length?(l=g?!0:Rn,h()):l!==Rn},m.interpolate=function(g){return arguments.length?(n=g,h()):n},m.unknown=function(g){return arguments.length?(s=g,m):s},function(g,b){return r=g,i=b,h()}}function Rv(){return bp()(Rn,Rn)}function _$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Lf(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function il(e){return e=Lf(Math.abs(e)),e?e[1]:NaN}function D$(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],p=0;i>0&&u>0&&(p+u+1>r&&(u=Math.max(1,r-p)),s.push(n.substring(i-=u,i+u)),!((p+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function N$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var k$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xc(e){if(!(t=k$.exec(e)))throw new Error("invalid format: "+e);var t;return new Iv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xc.prototype=Iv.prototype;function Iv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Iv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function M$(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var jO;function j$(e,t){var n=Lf(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(jO=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Lf(e,Math.max(0,t+s-1))[0]}function YC(e,t){var n=Lf(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const FC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:_$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YC(e*100,t),r:YC,s:j$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function VC(e){return e}var KC=Array.prototype.map,WC=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function R$(e){var t=e.grouping===void 0||e.thousands===void 0?VC:D$(KC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?VC:N$(KC.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function f(m){m=Xc(m);var g=m.fill,b=m.align,S=m.sign,A=m.symbol,C=m.zero,P=m.width,T=m.comma,O=m.precision,k=m.trim,N=m.type;N==="n"?(T=!0,N="g"):FC[N]||(O===void 0&&(O=12),k=!0,N="g"),(C||g==="0"&&b==="=")&&(C=!0,g="0",b="=");var D=A==="$"?n:A==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",M=A==="$"?r:/[%p]/.test(N)?l:"",j=FC[N],U=/[defgprs%]/.test(N);O=O===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function K(H){var W=D,re=M,le,ne,L;if(N==="c")re=j(H)+re,H="";else{H=+H;var q=H<0||1/H<0;if(H=isNaN(H)?p:j(Math.abs(H),O),k&&(H=M$(H)),q&&+H==0&&S!=="+"&&(q=!1),W=(q?S==="("?S:u:S==="-"||S==="("?"":S)+W,re=(N==="s"?WC[8+jO/3]:"")+re+(q&&S==="("?")":""),U){for(le=-1,ne=H.length;++le<ne;)if(L=H.charCodeAt(le),48>L||L>57){re=(L===46?i+H.slice(le+1):H.slice(le))+re,H=H.slice(0,le);break}}}T&&!C&&(H=t(H,1/0));var ue=W.length+H.length+re.length,ye=ue<P?new Array(P-ue+1).join(g):"";switch(T&&C&&(H=t(ye+H,ye.length?P-re.length:1/0),ye=""),b){case"<":H=W+H+re+ye;break;case"=":H=W+ye+H+re;break;case"^":H=ye.slice(0,ue=ye.length>>1)+W+H+re+ye.slice(ue);break;default:H=ye+W+H+re;break}return s(H)}return K.toString=function(){return m+""},K}function h(m,g){var b=f((m=Xc(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(il(g)/3)))*3,A=Math.pow(10,-S),C=WC[8+S/3];return function(P){return b(A*P)+C}}return{format:f,formatPrefix:h}}var Wd,Lv,RO;I$({thousands:",",grouping:[3],currency:["$",""]});function I$(e){return Wd=R$(e),Lv=Wd.format,RO=Wd.formatPrefix,Wd}function L$(e){return Math.max(0,-il(Math.abs(e)))}function $$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(il(t)/3)))*3-il(Math.abs(e)))}function B$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,il(t)-il(e))+1}function IO(e,t,n,r){var i=E0(e,t,n),s;switch(r=Xc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=$$(i,l))&&(r.precision=s),RO(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=B$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=L$(i))&&(r.precision=s-(r.type==="%")*2);break}}return Lv(r)}function Ii(e){var t=e.domain;return e.ticks=function(n){var r=t();return S0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return IO(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],p,f,h=10;for(u<l&&(f=l,l=u,u=f,f=i,i=s,s=f);h-- >0;){if(f=A0(l,u,n),f===p)return r[i]=l,r[s]=u,t(r);if(f>0)l=Math.floor(l/f)*f,u=Math.ceil(u/f)*f;else if(f<0)l=Math.ceil(l*f)/f,u=Math.floor(u*f)/f;else break;p=f}return e},e}function LO(){var e=Rv();return e.copy=function(){return ou(e,LO())},Ir.apply(e,arguments),Ii(e)}function $O(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,If),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return $O(e).unknown(t)},e=arguments.length?Array.from(e,If):[0,1],Ii(n)}function BO(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function XC(e){return Math.log(e)}function QC(e){return Math.exp(e)}function U$(e){return-Math.log(-e)}function z$(e){return-Math.exp(-e)}function G$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H$(e){return e===10?G$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ZC(e){return(t,n)=>-e(-t,n)}function $v(e){const t=e(XC,QC),n=t.domain;let r=10,i,s;function l(){return i=q$(r),s=H$(r),n()[0]<0?(i=ZC(i),s=ZC(s),e(U$,z$)):e(XC,QC),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const p=n();let f=p[0],h=p[p.length-1];const m=h<f;m&&([f,h]=[h,f]);let g=i(f),b=i(h),S,A;const C=u==null?10:+u;let P=[];if(!(r%1)&&b-g<C){if(g=Math.floor(g),b=Math.ceil(b),f>0){for(;g<=b;++g)for(S=1;S<r;++S)if(A=g<0?S/s(-g):S*s(g),!(A<f)){if(A>h)break;P.push(A)}}else for(;g<=b;++g)for(S=r-1;S>=1;--S)if(A=g>0?S/s(-g):S*s(g),!(A<f)){if(A>h)break;P.push(A)}P.length*2<C&&(P=S0(f,h,C))}else P=S0(g,b,Math.min(b-g,C)).map(s);return m?P.reverse():P},t.tickFormat=(u,p)=>{if(u==null&&(u=10),p==null&&(p=r===10?"s":","),typeof p!="function"&&(!(r%1)&&(p=Xc(p)).precision==null&&(p.trim=!0),p=Lv(p)),u===1/0)return p;const f=Math.max(1,r*u/t.ticks().length);return h=>{let m=h/s(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=f?p(h):""}},t.nice=()=>n(BO(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function UO(){const e=$v(bp()).domain([1,10]);return e.copy=()=>ou(e,UO()).base(e.base()),Ir.apply(e,arguments),e}function JC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function eP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Bv(e){var t=1,n=e(JC(t),eP(t));return n.constant=function(r){return arguments.length?e(JC(t=+r),eP(t)):t},Ii(n)}function zO(){var e=Bv(bp());return e.copy=function(){return ou(e,zO()).constant(e.constant())},Ir.apply(e,arguments)}function tP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Y$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function F$(e){return e<0?-e*e:e*e}function Uv(e){var t=e(Rn,Rn),n=1;function r(){return n===1?e(Rn,Rn):n===.5?e(Y$,F$):e(tP(n),tP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ii(t)}function zv(){var e=Uv(bp());return e.copy=function(){return ou(e,zv()).exponent(e.exponent())},Ir.apply(e,arguments),e}function V$(){return zv.apply(null,arguments).exponent(.5)}function nP(e){return Math.sign(e)*e*e}function K$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function GO(){var e=Rv(),t=[0,1],n=!1,r;function i(s){var l=K$(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(nP(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,If)).map(nP)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return GO(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ir.apply(i,arguments),Ii(i)}function HO(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=Z4(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[au(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ni),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return HO().domain(e).range(t).unknown(r)},Ir.apply(s,arguments)}function qO(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(p){return p!=null&&p<=p?i[au(r,p,0,n)]:s}function u(){var p=-1;for(r=new Array(n);++p<n;)r[p]=((p+1)*t-(p-n)*e)/(n+1);return l}return l.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,u()):[e,t]},l.range=function(p){return arguments.length?(n=(i=Array.from(p)).length-1,u()):i.slice()},l.invertExtent=function(p){var f=i.indexOf(p);return f<0?[NaN,NaN]:f<1?[e,r[0]]:f>=n?[r[n-1],t]:[r[f-1],r[f]]},l.unknown=function(p){return arguments.length&&(s=p),l},l.thresholds=function(){return r.slice()},l.copy=function(){return qO().domain([e,t]).range(i).unknown(s)},Ir.apply(Ii(l),arguments)}function YO(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[au(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return YO().domain(e).range(t).unknown(n)},Ir.apply(i,arguments)}const my=new Date,gy=new Date;function Kt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const p=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return p;let f;do p.push(f=new Date(+s)),t(s,u),e(s);while(f<s&&s<l);return p},i.filter=s=>Kt(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(my.setTime(+s),gy.setTime(+l),e(my),e(gy),Math.floor(n(my,gy))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const $f=Kt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$f.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Kt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):$f);$f.range;const $a=1e3,Dr=$a*60,Ba=Dr*60,Ha=Ba*24,Gv=Ha*7,rP=Ha*30,yy=Ha*365,Oo=Kt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getUTCSeconds());Oo.range;const Hv=Kt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$a)},(e,t)=>{e.setTime(+e+t*Dr)},(e,t)=>(t-e)/Dr,e=>e.getMinutes());Hv.range;const qv=Kt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Dr)},(e,t)=>(t-e)/Dr,e=>e.getUTCMinutes());qv.range;const Yv=Kt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$a-e.getMinutes()*Dr)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getHours());Yv.range;const Fv=Kt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCHours());Fv.range;const su=Kt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Dr)/Ha,e=>e.getDate()-1);su.range;const xp=Kt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ha,e=>e.getUTCDate()-1);xp.range;const FO=Kt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ha,e=>Math.floor(e/Ha));FO.range;function qo(e){return Kt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Dr)/Gv)}const Sp=qo(0),Bf=qo(1),W$=qo(2),X$=qo(3),ol=qo(4),Q$=qo(5),Z$=qo(6);Sp.range;Bf.range;W$.range;X$.range;ol.range;Q$.range;Z$.range;function Yo(e){return Kt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Gv)}const Ap=Yo(0),Uf=Yo(1),J$=Yo(2),e8=Yo(3),sl=Yo(4),t8=Yo(5),n8=Yo(6);Ap.range;Uf.range;J$.range;e8.range;sl.range;t8.range;n8.range;const Vv=Kt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Vv.range;const Kv=Kt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Kv.range;const qa=Kt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qa.range;const Ya=Kt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ya.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ya.range;function VO(e,t,n,r,i,s){const l=[[Oo,1,$a],[Oo,5,5*$a],[Oo,15,15*$a],[Oo,30,30*$a],[s,1,Dr],[s,5,5*Dr],[s,15,15*Dr],[s,30,30*Dr],[i,1,Ba],[i,3,3*Ba],[i,6,6*Ba],[i,12,12*Ba],[r,1,Ha],[r,2,2*Ha],[n,1,Gv],[t,1,rP],[t,3,3*rP],[e,1,yy]];function u(f,h,m){const g=h<f;g&&([f,h]=[h,f]);const b=m&&typeof m.range=="function"?m:p(f,h,m),S=b?b.range(f,+h+1):[];return g?S.reverse():S}function p(f,h,m){const g=Math.abs(h-f)/m,b=_v(([,,C])=>C).right(l,g);if(b===l.length)return e.every(E0(f/yy,h/yy,m));if(b===0)return $f.every(Math.max(E0(f,h,m),1));const[S,A]=l[g/l[b-1][2]<l[b][2]/g?b-1:b];return S.every(A)}return[u,p]}const[r8,a8]=VO(Ya,Kv,Ap,FO,Fv,qv),[i8,o8]=VO(qa,Vv,Sp,su,Yv,Hv);function vy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function by(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function s8(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,p=e.shortMonths,f=kc(i),h=Mc(i),m=kc(s),g=Mc(s),b=kc(l),S=Mc(l),A=kc(u),C=Mc(u),P=kc(p),T=Mc(p),O={a:q,A:ue,b:ye,B:R,c:null,d:cP,e:cP,f:D8,g:U8,G:G8,H:T8,I:O8,j:_8,L:KO,m:N8,M:k8,p:F,q:X,Q:fP,s:pP,S:M8,u:j8,U:R8,V:I8,w:L8,W:$8,x:null,X:null,y:B8,Y:z8,Z:H8,"%":dP},k={a:ae,A:me,b:z,B:te,c:null,d:uP,e:uP,f:V8,g:rB,G:iB,H:q8,I:Y8,j:F8,L:XO,m:K8,M:W8,p:ve,q:pe,Q:fP,s:pP,S:X8,u:Q8,U:Z8,V:J8,w:eB,W:tB,x:null,X:null,y:nB,Y:aB,Z:oB,"%":dP},N={a:K,A:H,b:W,B:re,c:le,d:sP,e:sP,f:E8,g:oP,G:iP,H:lP,I:lP,j:b8,L:A8,m:v8,M:x8,p:U,q:y8,Q:P8,s:w8,S:S8,u:f8,U:p8,V:h8,w:d8,W:m8,x:ne,X:L,y:oP,Y:iP,Z:g8,"%":C8};O.x=D(n,O),O.X=D(r,O),O.c=D(t,O),k.x=D(n,k),k.X=D(r,k),k.c=D(t,k);function D(oe,de){return function(be){var fe=[],Qe=-1,Ge=0,Bt=oe.length,mt,pt,fr;for(be instanceof Date||(be=new Date(+be));++Qe<Bt;)oe.charCodeAt(Qe)===37&&(fe.push(oe.slice(Ge,Qe)),(pt=aP[mt=oe.charAt(++Qe)])!=null?mt=oe.charAt(++Qe):pt=mt==="e"?" ":"0",(fr=de[mt])&&(mt=fr(be,pt)),fe.push(mt),Ge=Qe+1);return fe.push(oe.slice(Ge,Qe)),fe.join("")}}function M(oe,de){return function(be){var fe=Nc(1900,void 0,1),Qe=j(fe,oe,be+="",0),Ge,Bt;if(Qe!=be.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(de&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Ge=by(Nc(fe.y,0,1)),Bt=Ge.getUTCDay(),Ge=Bt>4||Bt===0?Uf.ceil(Ge):Uf(Ge),Ge=xp.offset(Ge,(fe.V-1)*7),fe.y=Ge.getUTCFullYear(),fe.m=Ge.getUTCMonth(),fe.d=Ge.getUTCDate()+(fe.w+6)%7):(Ge=vy(Nc(fe.y,0,1)),Bt=Ge.getDay(),Ge=Bt>4||Bt===0?Bf.ceil(Ge):Bf(Ge),Ge=su.offset(Ge,(fe.V-1)*7),fe.y=Ge.getFullYear(),fe.m=Ge.getMonth(),fe.d=Ge.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Bt="Z"in fe?by(Nc(fe.y,0,1)).getUTCDay():vy(Nc(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Bt+5)%7:fe.w+fe.U*7-(Bt+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,by(fe)):vy(fe)}}function j(oe,de,be,fe){for(var Qe=0,Ge=de.length,Bt=be.length,mt,pt;Qe<Ge;){if(fe>=Bt)return-1;if(mt=de.charCodeAt(Qe++),mt===37){if(mt=de.charAt(Qe++),pt=N[mt in aP?de.charAt(Qe++):mt],!pt||(fe=pt(oe,be,fe))<0)return-1}else if(mt!=be.charCodeAt(fe++))return-1}return fe}function U(oe,de,be){var fe=f.exec(de.slice(be));return fe?(oe.p=h.get(fe[0].toLowerCase()),be+fe[0].length):-1}function K(oe,de,be){var fe=b.exec(de.slice(be));return fe?(oe.w=S.get(fe[0].toLowerCase()),be+fe[0].length):-1}function H(oe,de,be){var fe=m.exec(de.slice(be));return fe?(oe.w=g.get(fe[0].toLowerCase()),be+fe[0].length):-1}function W(oe,de,be){var fe=P.exec(de.slice(be));return fe?(oe.m=T.get(fe[0].toLowerCase()),be+fe[0].length):-1}function re(oe,de,be){var fe=A.exec(de.slice(be));return fe?(oe.m=C.get(fe[0].toLowerCase()),be+fe[0].length):-1}function le(oe,de,be){return j(oe,t,de,be)}function ne(oe,de,be){return j(oe,n,de,be)}function L(oe,de,be){return j(oe,r,de,be)}function q(oe){return l[oe.getDay()]}function ue(oe){return s[oe.getDay()]}function ye(oe){return p[oe.getMonth()]}function R(oe){return u[oe.getMonth()]}function F(oe){return i[+(oe.getHours()>=12)]}function X(oe){return 1+~~(oe.getMonth()/3)}function ae(oe){return l[oe.getUTCDay()]}function me(oe){return s[oe.getUTCDay()]}function z(oe){return p[oe.getUTCMonth()]}function te(oe){return u[oe.getUTCMonth()]}function ve(oe){return i[+(oe.getUTCHours()>=12)]}function pe(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var de=D(oe+="",O);return de.toString=function(){return oe},de},parse:function(oe){var de=M(oe+="",!1);return de.toString=function(){return oe},de},utcFormat:function(oe){var de=D(oe+="",k);return de.toString=function(){return oe},de},utcParse:function(oe){var de=M(oe+="",!0);return de.toString=function(){return oe},de}}}var aP={"-":"",_:" ",0:"0"},rn=/^\s*\d+/,l8=/^%/,c8=/[\\^$*+?|[\]().{}]/g;function Fe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function u8(e){return e.replace(c8,"\\$&")}function kc(e){return new RegExp("^(?:"+e.map(u8).join("|")+")","i")}function Mc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function d8(e,t,n){var r=rn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function f8(e,t,n){var r=rn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function p8(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function h8(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function m8(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function iP(e,t,n){var r=rn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function oP(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function g8(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function y8(e,t,n){var r=rn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function v8(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sP(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function b8(e,t,n){var r=rn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lP(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function x8(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function S8(e,t,n){var r=rn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function A8(e,t,n){var r=rn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function E8(e,t,n){var r=rn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function C8(e,t,n){var r=l8.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function P8(e,t,n){var r=rn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function w8(e,t,n){var r=rn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cP(e,t){return Fe(e.getDate(),t,2)}function T8(e,t){return Fe(e.getHours(),t,2)}function O8(e,t){return Fe(e.getHours()%12||12,t,2)}function _8(e,t){return Fe(1+su.count(qa(e),e),t,3)}function KO(e,t){return Fe(e.getMilliseconds(),t,3)}function D8(e,t){return KO(e,t)+"000"}function N8(e,t){return Fe(e.getMonth()+1,t,2)}function k8(e,t){return Fe(e.getMinutes(),t,2)}function M8(e,t){return Fe(e.getSeconds(),t,2)}function j8(e){var t=e.getDay();return t===0?7:t}function R8(e,t){return Fe(Sp.count(qa(e)-1,e),t,2)}function WO(e){var t=e.getDay();return t>=4||t===0?ol(e):ol.ceil(e)}function I8(e,t){return e=WO(e),Fe(ol.count(qa(e),e)+(qa(e).getDay()===4),t,2)}function L8(e){return e.getDay()}function $8(e,t){return Fe(Bf.count(qa(e)-1,e),t,2)}function B8(e,t){return Fe(e.getFullYear()%100,t,2)}function U8(e,t){return e=WO(e),Fe(e.getFullYear()%100,t,2)}function z8(e,t){return Fe(e.getFullYear()%1e4,t,4)}function G8(e,t){var n=e.getDay();return e=n>=4||n===0?ol(e):ol.ceil(e),Fe(e.getFullYear()%1e4,t,4)}function H8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Fe(t/60|0,"0",2)+Fe(t%60,"0",2)}function uP(e,t){return Fe(e.getUTCDate(),t,2)}function q8(e,t){return Fe(e.getUTCHours(),t,2)}function Y8(e,t){return Fe(e.getUTCHours()%12||12,t,2)}function F8(e,t){return Fe(1+xp.count(Ya(e),e),t,3)}function XO(e,t){return Fe(e.getUTCMilliseconds(),t,3)}function V8(e,t){return XO(e,t)+"000"}function K8(e,t){return Fe(e.getUTCMonth()+1,t,2)}function W8(e,t){return Fe(e.getUTCMinutes(),t,2)}function X8(e,t){return Fe(e.getUTCSeconds(),t,2)}function Q8(e){var t=e.getUTCDay();return t===0?7:t}function Z8(e,t){return Fe(Ap.count(Ya(e)-1,e),t,2)}function QO(e){var t=e.getUTCDay();return t>=4||t===0?sl(e):sl.ceil(e)}function J8(e,t){return e=QO(e),Fe(sl.count(Ya(e),e)+(Ya(e).getUTCDay()===4),t,2)}function eB(e){return e.getUTCDay()}function tB(e,t){return Fe(Uf.count(Ya(e)-1,e),t,2)}function nB(e,t){return Fe(e.getUTCFullYear()%100,t,2)}function rB(e,t){return e=QO(e),Fe(e.getUTCFullYear()%100,t,2)}function aB(e,t){return Fe(e.getUTCFullYear()%1e4,t,4)}function iB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?sl(e):sl.ceil(e),Fe(e.getUTCFullYear()%1e4,t,4)}function oB(){return"+0000"}function dP(){return"%"}function fP(e){return+e}function pP(e){return Math.floor(+e/1e3)}var Fs,ZO,JO;sB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sB(e){return Fs=s8(e),ZO=Fs.format,Fs.parse,JO=Fs.utcFormat,Fs.utcParse,Fs}function lB(e){return new Date(e)}function cB(e){return e instanceof Date?+e:+new Date(+e)}function Wv(e,t,n,r,i,s,l,u,p,f){var h=Rv(),m=h.invert,g=h.domain,b=f(".%L"),S=f(":%S"),A=f("%I:%M"),C=f("%I %p"),P=f("%a %d"),T=f("%b %d"),O=f("%B"),k=f("%Y");function N(D){return(p(D)<D?b:u(D)<D?S:l(D)<D?A:s(D)<D?C:r(D)<D?i(D)<D?P:T:n(D)<D?O:k)(D)}return h.invert=function(D){return new Date(m(D))},h.domain=function(D){return arguments.length?g(Array.from(D,cB)):g().map(lB)},h.ticks=function(D){var M=g();return e(M[0],M[M.length-1],D??10)},h.tickFormat=function(D,M){return M==null?N:f(M)},h.nice=function(D){var M=g();return(!D||typeof D.range!="function")&&(D=t(M[0],M[M.length-1],D??10)),D?g(BO(M,D)):h},h.copy=function(){return ou(h,Wv(e,t,n,r,i,s,l,u,p,f))},h}function uB(){return Ir.apply(Wv(i8,o8,qa,Vv,Sp,su,Yv,Hv,Oo,ZO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dB(){return Ir.apply(Wv(r8,a8,Ya,Kv,Ap,xp,Fv,qv,Oo,JO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ep(){var e=0,t=1,n,r,i,s,l=Rn,u=!1,p;function f(m){return m==null||isNaN(m=+m)?p:l(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(m){return arguments.length?(u=!!m,f):u},f.interpolator=function(m){return arguments.length?(l=m,f):l};function h(m){return function(g){var b,S;return arguments.length?([b,S]=g,l=m(b,S),f):[l(0),l(1)]}}return f.range=h(ml),f.rangeRound=h(jv),f.unknown=function(m){return arguments.length?(p=m,f):p},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),f}}function Li(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function e_(){var e=Ii(Ep()(Rn));return e.copy=function(){return Li(e,e_())},Wa.apply(e,arguments)}function t_(){var e=$v(Ep()).domain([1,10]);return e.copy=function(){return Li(e,t_()).base(e.base())},Wa.apply(e,arguments)}function n_(){var e=Bv(Ep());return e.copy=function(){return Li(e,n_()).constant(e.constant())},Wa.apply(e,arguments)}function Xv(){var e=Uv(Ep());return e.copy=function(){return Li(e,Xv()).exponent(e.exponent())},Wa.apply(e,arguments)}function fB(){return Xv.apply(null,arguments).exponent(.5)}function r_(){var e=[],t=Rn;function n(r){if(r!=null&&!isNaN(r=+r))return t((au(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Ni),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Q4(e,s/r))},n.copy=function(){return r_(t).domain(e)},Wa.apply(n,arguments)}function Cp(){var e=0,t=.5,n=1,r=1,i,s,l,u,p,f=Rn,h,m=!1,g;function b(A){return isNaN(A=+A)?g:(A=.5+((A=+h(A))-s)*(r*A<r*s?u:p),f(m?Math.max(0,Math.min(1,A)):A))}b.domain=function(A){return arguments.length?([e,t,n]=A,i=h(e=+e),s=h(t=+t),l=h(n=+n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,b):[e,t,n]},b.clamp=function(A){return arguments.length?(m=!!A,b):m},b.interpolator=function(A){return arguments.length?(f=A,b):f};function S(A){return function(C){var P,T,O;return arguments.length?([P,T,O]=C,f=C$(A,[P,T,O]),b):[f(0),f(.5),f(1)]}}return b.range=S(ml),b.rangeRound=S(jv),b.unknown=function(A){return arguments.length?(g=A,b):g},function(A){return h=A,i=A(e),s=A(t),l=A(n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,b}}function a_(){var e=Ii(Cp()(Rn));return e.copy=function(){return Li(e,a_())},Wa.apply(e,arguments)}function i_(){var e=$v(Cp()).domain([.1,1,10]);return e.copy=function(){return Li(e,i_()).base(e.base())},Wa.apply(e,arguments)}function o_(){var e=Bv(Cp());return e.copy=function(){return Li(e,o_()).constant(e.constant())},Wa.apply(e,arguments)}function Qv(){var e=Uv(Cp());return e.copy=function(){return Li(e,Qv()).exponent(e.exponent())},Wa.apply(e,arguments)}function pB(){return Qv.apply(null,arguments).exponent(.5)}const Lc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Nv,scaleDiverging:a_,scaleDivergingLog:i_,scaleDivergingPow:Qv,scaleDivergingSqrt:pB,scaleDivergingSymlog:o_,scaleIdentity:$O,scaleImplicit:C0,scaleLinear:LO,scaleLog:UO,scaleOrdinal:Dv,scalePoint:e$,scalePow:zv,scaleQuantile:HO,scaleQuantize:qO,scaleRadial:GO,scaleSequential:e_,scaleSequentialLog:t_,scaleSequentialPow:Xv,scaleSequentialQuantile:r_,scaleSequentialSqrt:fB,scaleSequentialSymlog:n_,scaleSqrt:V$,scaleSymlog:zO,scaleThreshold:YO,scaleTime:uB,scaleUtc:dB,tickFormat:IO},Symbol.toStringTag,{value:"Module"}));var $i=e=>e.chartData,Zv=ee([$i],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Jv=(e,t,n,r)=>r?Zv(e):$i(e);function ll(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(ur(t)&&ur(n))return!0}return!1}function hP(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function hB(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(ur(n))i=n;else if(typeof n=="function")return;if(ur(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(ll(l))return l}}function mB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(ll(r))return hP(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Te(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&aC.test(i)){var p=aC.exec(i);if(p==null||t==null)l=void 0;else{var f=+p[1];l=t[0]-f}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(Te(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&iC.test(s)){var h=iC.exec(s);if(h==null||t==null)u=void 0;else{var m=+h[1];u=t[1]+m}}else u=t?.[1];var g=[l,u];if(ll(g))return t==null?g:hP(g,t,n)}}}var gl=1e9,gB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},tb,xt=!0,Mr="[DecimalError] ",Mo=Mr+"Invalid argument: ",eb=Mr+"Exponent out of range: ",yl=Math.floor,Po=Math.pow,yB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,or,en=1e7,ht=7,s_=9007199254740991,zf=yl(s_/ht),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*ht;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ae.dividedBy=Ae.div=function(e){return za(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,n=t.constructor;return ct(za(t,new n(e),0,1),n.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return $t(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(or))throw Error(Mr+"NaN");if(n.s<1)throw Error(Mr+(n.s?"NaN":"-Infinity"));return n.eq(or)?new r(0):(xt=!1,t=za(Qc(n,s),Qc(e,s),s),xt=!0,ct(t,i))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?u_(t,e):l_(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Mr+"NaN");return n.s?(xt=!1,t=za(n,e,0,1).times(e),xt=!0,n.minus(t)):ct(new r(n),i)};Ae.naturalExponential=Ae.exp=function(){return c_(this)};Ae.naturalLogarithm=Ae.ln=function(){return Qc(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?l_(t,e):u_(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Mo+e);if(t=$t(i)+1,r=i.d.length-1,n=r*ht+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ae.squareRoot=Ae.sqrt=function(){var e,t,n,r,i,s,l,u=this,p=u.constructor;if(u.s<1){if(!u.s)return new p(0);throw Error(Mr+"NaN")}for(e=$t(u),xt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ca(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=yl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new p(t)):r=new p(i.toString()),n=p.precision,i=l=n+3;;)if(s=r,r=s.plus(za(u,s,l+2)).times(.5),ca(s.d).slice(0,l)===(t=ca(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(ct(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return xt=!0,ct(r,n)};Ae.times=Ae.mul=function(e){var t,n,r,i,s,l,u,p,f,h=this,m=h.constructor,g=h.d,b=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,p=g.length,f=b.length,p<f&&(s=g,g=b,b=s,l=p,p=f,f=l),s=[],l=p+f,r=l;r--;)s.push(0);for(r=f;--r>=0;){for(t=0,i=p+r;i>r;)u=s[i]+b[r]*g[i-r-1]+t,s[i--]=u%en|0,t=u/en|0;s[i]=(s[i]+t)%en|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,xt?ct(e,m.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(fa(e,0,gl),t===void 0?t=r.rounding:fa(t,0,8),ct(n,e+$t(n)+1,t))};Ae.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Lo(r,!0):(fa(e,0,gl),t===void 0?t=i.rounding:fa(t,0,8),r=ct(new i(r),e+1,t),n=Lo(r,!0,e+1)),n};Ae.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Lo(i):(fa(e,0,gl),t===void 0?t=s.rounding:fa(t,0,8),r=ct(new s(i),e+$t(i)+1,t),n=Lo(r.abs(),!1,e+$t(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return ct(new t(e),$t(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,n,r,i,s,l,u=this,p=u.constructor,f=12,h=+(e=new p(e));if(!e.s)return new p(or);if(u=new p(u),!u.s){if(e.s<1)throw Error(Mr+"Infinity");return u}if(u.eq(or))return u;if(r=p.precision,e.eq(or))return ct(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=h<0?-h:h)<=s_){for(i=new p(or),t=Math.ceil(r/ht+4),xt=!1;n%2&&(i=i.times(u),gP(i.d,t)),n=yl(n/2),n!==0;)u=u.times(u),gP(u.d,t);return xt=!0,e.s<0?new p(or).div(i):ct(i,r)}}else if(s<0)throw Error(Mr+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,xt=!1,i=e.times(Qc(u,r+f)),xt=!0,i=c_(i),i.s=s,i};Ae.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=$t(i),r=Lo(i,n<=s.toExpNeg||n>=s.toExpPos)):(fa(e,1,gl),t===void 0?t=s.rounding:fa(t,0,8),i=ct(new s(i),e,t),n=$t(i),r=Lo(i,e<=n||n<=s.toExpNeg,e)),r};Ae.toSignificantDigits=Ae.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(fa(e,1,gl),t===void 0?t=r.rounding:fa(t,0,8)),ct(new r(n),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=$t(e),n=e.constructor;return Lo(e,t<=n.toExpNeg||t>=n.toExpPos)};function l_(e,t){var n,r,i,s,l,u,p,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),xt?ct(t,m):t;if(p=e.d,f=t.d,l=e.e,i=t.e,p=p.slice(),s=l-i,s){for(s<0?(r=p,s=-s,u=f.length):(r=f,i=l,u=p.length),l=Math.ceil(m/ht),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=p.length,s=f.length,u-s<0&&(s=u,r=f,f=p,p=r),n=0;s;)n=(p[--s]=p[s]+f[s]+n)/en|0,p[s]%=en;for(n&&(p.unshift(n),++i),u=p.length;p[--u]==0;)p.pop();return t.d=p,t.e=i,xt?ct(t,m):t}function fa(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Mo+e)}function ca(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=ht-r.length,n&&(s+=wi(n)),s+=r;l=e[t],r=l+"",n=ht-r.length,n&&(s+=wi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var za=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%en|0,l=s/en|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,p;if(s!=l)p=s>l?1:-1;else for(u=p=0;u<s;u++)if(r[u]!=i[u]){p=r[u]>i[u]?1:-1;break}return p}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*en+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,p,f,h,m,g,b,S,A,C,P,T,O,k,N,D,M,j,U=r.constructor,K=r.s==i.s?1:-1,H=r.d,W=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Mr+"Division by zero");for(p=r.e-i.e,M=W.length,N=H.length,b=new U(K),S=b.d=[],f=0;W[f]==(H[f]||0);)++f;if(W[f]>(H[f]||0)&&--p,s==null?T=s=U.precision:l?T=s+($t(r)-$t(i))+1:T=s,T<0)return new U(0);if(T=T/ht+2|0,f=0,M==1)for(h=0,W=W[0],T++;(f<N||h)&&T--;f++)O=h*en+(H[f]||0),S[f]=O/W|0,h=O%W|0;else{for(h=en/(W[0]+1)|0,h>1&&(W=e(W,h),H=e(H,h),M=W.length,N=H.length),k=M,A=H.slice(0,M),C=A.length;C<M;)A[C++]=0;j=W.slice(),j.unshift(0),D=W[0],W[1]>=en/2&&++D;do h=0,u=t(W,A,M,C),u<0?(P=A[0],M!=C&&(P=P*en+(A[1]||0)),h=P/D|0,h>1?(h>=en&&(h=en-1),m=e(W,h),g=m.length,C=A.length,u=t(m,A,g,C),u==1&&(h--,n(m,M<g?j:W,g))):(h==0&&(u=h=1),m=W.slice()),g=m.length,g<C&&m.unshift(0),n(A,m,C),u==-1&&(C=A.length,u=t(W,A,M,C),u<1&&(h++,n(A,M<C?j:W,C))),C=A.length):u===0&&(h++,A=[0]),S[f++]=h,u&&A[0]?A[C++]=H[k]||0:(A=[H[k]],C=1);while((k++<N||A[0]!==void 0)&&T--)}return S[0]||S.shift(),b.e=p,ct(b,l?s+$t(b)+1:s)}})();function c_(e,t){var n,r,i,s,l,u,p=0,f=0,h=e.constructor,m=h.precision;if($t(e)>16)throw Error(eb+$t(e));if(!e.s)return new h(or);for(xt=!1,u=m,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(r=Math.log(Po(2,f))/Math.LN10*2+5|0,u+=r,n=i=s=new h(or),h.precision=u;;){if(i=ct(i.times(e),u),n=n.times(++p),l=s.plus(za(i,n,u)),ca(l.d).slice(0,u)===ca(s.d).slice(0,u)){for(;f--;)s=ct(s.times(s),u);return h.precision=m,t==null?(xt=!0,ct(s,m)):s}s=l}}function $t(e){for(var t=e.e*ht,n=e.d[0];n>=10;n/=10)t++;return t}function xy(e,t,n){if(t>e.LN10.sd())throw xt=!0,n&&(e.precision=n),Error(Mr+"LN10 precision limit exceeded");return ct(new e(e.LN10),t)}function wi(e){for(var t="";e--;)t+="0";return t}function Qc(e,t){var n,r,i,s,l,u,p,f,h,m=1,g=10,b=e,S=b.d,A=b.constructor,C=A.precision;if(b.s<1)throw Error(Mr+(b.s?"NaN":"-Infinity"));if(b.eq(or))return new A(0);if(t==null?(xt=!1,f=C):f=t,b.eq(10))return t==null&&(xt=!0),xy(A,f);if(f+=g,A.precision=f,n=ca(S),r=n.charAt(0),s=$t(b),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(e),n=ca(b.d),r=n.charAt(0),m++;s=$t(b),r>1?(b=new A("0."+n),s++):b=new A(r+"."+n.slice(1))}else return p=xy(A,f+2,C).times(s+""),b=Qc(new A(r+"."+n.slice(1)),f-g).plus(p),A.precision=C,t==null?(xt=!0,ct(b,C)):b;for(u=l=b=za(b.minus(or),b.plus(or),f),h=ct(b.times(b),f),i=3;;){if(l=ct(l.times(h),f),p=u.plus(za(l,new A(i),f)),ca(p.d).slice(0,f)===ca(u.d).slice(0,f))return u=u.times(2),s!==0&&(u=u.plus(xy(A,f+2,C).times(s+""))),u=za(u,new A(m),f),A.precision=C,t==null?(xt=!0,ct(u,C)):u;u=p,i+=2}}function mP(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=yl(n/ht),e.d=[],r=(n+1)%ht,n<0&&(r+=ht),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=ht;r<i;)e.d.push(+t.slice(r,r+=ht));t=t.slice(r),r=ht-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),xt&&(e.e>zf||e.e<-zf))throw Error(eb+n)}else e.s=0,e.e=0,e.d=[0];return e}function ct(e,t,n){var r,i,s,l,u,p,f,h,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=ht,i=t,f=m[h=0];else{if(h=Math.ceil((r+1)/ht),s=m.length,h>=s)return e;for(f=s=m[h],l=1;s>=10;s/=10)l++;r%=ht,i=r-ht+l}if(n!==void 0&&(s=Po(10,l-i-1),u=f/s%10|0,p=t<0||m[h+1]!==void 0||f%s,p=n<4?(u||p)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||p||n==6&&(r>0?i>0?f/Po(10,l-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return p?(s=$t(e),m.length=1,t=t-s-1,m[0]=Po(10,(ht-t%ht)%ht),e.e=yl(-t/ht)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=h,s=1,h--):(m.length=h+1,s=Po(10,ht-r),m[h]=i>0?(f/Po(10,l-i)%Po(10,i)|0)*s:0),p)for(;;)if(h==0){(m[0]+=s)==en&&(m[0]=1,++e.e);break}else{if(m[h]+=s,m[h]!=en)break;m[h--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(xt&&(e.e>zf||e.e<-zf))throw Error(eb+$t(e));return e}function u_(e,t){var n,r,i,s,l,u,p,f,h,m,g=e.constructor,b=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),xt?ct(t,b):t;if(p=e.d,m=t.d,r=t.e,f=e.e,p=p.slice(),l=f-r,l){for(h=l<0,h?(n=p,l=-l,u=m.length):(n=m,r=f,u=p.length),i=Math.max(Math.ceil(b/ht),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=p.length,u=m.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(p[i]!=m[i]){h=p[i]<m[i];break}l=0}for(h&&(n=p,p=m,m=n,t.s=-t.s),u=p.length,i=m.length-u;i>0;--i)p[u++]=0;for(i=m.length;i>l;){if(p[--i]<m[i]){for(s=i;s&&p[--s]===0;)p[s]=en-1;--p[s],p[i]+=en}p[i]-=m[i]}for(;p[--u]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=r,xt?ct(t,b):t):new g(0)}function Lo(e,t,n){var r,i=$t(e),s=ca(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+wi(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+wi(-i-1)+s,n&&(r=n-l)>0&&(s+=wi(r))):i>=l?(s+=wi(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+wi(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=wi(r))),e.s<0?"-"+s:s}function gP(e,t){if(e.length>t)return e.length=t,!0}function d_(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Mo+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return mP(l,s.toString())}else if(typeof s!="string")throw Error(Mo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,yB.test(s))mP(l,s);else throw Error(Mo+s)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=d_,i.config=i.set=vB,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function vB(e){if(!e||typeof e!="object")throw Error(Mr+"Object expected");var t,n,r,i=["precision",1,gl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(yl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Mo+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Mo+n+": "+r);return this}var tb=d_(gB);or=new tb(1);const et=tb;var bB=e=>e,f_={},p_=e=>e===f_,yP=e=>function t(){return arguments.length===0||arguments.length===1&&p_(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},h_=(e,t)=>e===1?t:yP(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==f_).length;return s>=e?t(...r):h_(e-s,yP(function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];var f=r.map(h=>p_(h)?u.shift():h);return t(...f,...u)}))}),Pp=e=>h_(e.length,e),O0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},xB=Pp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),SB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return bB;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,p)=>p(u),s(...arguments))}},_0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),m_=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var p;return l===((p=t)===null||p===void 0?void 0:p[u])})||(t=i,n=e(...i)),n}};function g_(e){var t;return e===0?t=1:t=Math.floor(new et(e).abs().log(10).toNumber())+1,t}function y_(e,t,n){for(var r=new et(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Pp((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Pp((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Pp((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var v_=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},b_=(e,t,n)=>{if(e.lte(0))return new et(0);var r=g_(e.toNumber()),i=new et(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new et(Math.ceil(s.div(l).toNumber())).add(n).mul(l),p=u.mul(i);return t?new et(p.toNumber()):new et(Math.ceil(p.toNumber()))},AB=(e,t,n)=>{var r=new et(1),i=new et(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new et(10).pow(g_(e)-1),i=new et(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new et(Math.floor(e)))}else e===0?i=new et(Math.floor((t-1)/2)):n||(i=new et(Math.floor(e)));var l=Math.floor((t-1)/2),u=SB(xB(p=>i.add(new et(p-l).mul(r)).toNumber()),O0);return u(0,t)},x_=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new et(0),tickMin:new et(0),tickMax:new et(0)};var l=b_(new et(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new et(0):(u=new et(t).add(n).div(2),u=u.sub(new et(u).mod(l)));var p=Math.ceil(u.sub(t).div(l).toNumber()),f=Math.ceil(new et(n).sub(u).div(l).toNumber()),h=p+f+1;return h>r?x_(t,n,r,i,s+1):(h<r&&(f=n>0?f+(r-h):f,p=n>0?p:p+(r-h)),{step:l,tickMin:u.sub(new et(p).mul(l)),tickMax:u.add(new et(f).mul(l))})};function EB(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=v_([t,n]);if(l===-1/0||u===1/0){var p=u===1/0?[l,...O0(0,r-1).map(()=>1/0)]:[...O0(0,r-1).map(()=>-1/0),u];return t>n?_0(p):p}if(l===u)return AB(l,r,i);var{step:f,tickMin:h,tickMax:m}=x_(l,u,s,i,0),g=y_(h,m.add(new et(.1).mul(f)),f);return t>n?_0(g):g}function CB(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=v_([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),p=b_(new et(l).sub(s).div(u-1),i,0),f=[...y_(new et(s),new et(l),p),l];return i===!1&&(f=f.map(h=>Math.round(h))),n>r?_0(f):f}var PB=m_(EB),wB=m_(CB),S_=e=>e.rootProps.maxBarSize,TB=e=>e.rootProps.barGap,A_=e=>e.rootProps.barCategoryGap,OB=e=>e.rootProps.barSize,lu=e=>e.rootProps.stackOffset,nb=e=>e.options.chartName,rb=e=>e.rootProps.syncId,E_=e=>e.rootProps.syncMethod,ab=e=>e.options.eventEmitter,Ia={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ir={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},wp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},_B={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ia.angleAxisId,includeHidden:!1,name:void 0,reversed:Ia.reversed,scale:Ia.scale,tick:Ia.tick,tickCount:void 0,ticks:void 0,type:Ia.type,unit:void 0},DB={allowDataOverflow:ir.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ir.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ir.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ir.scale,tick:ir.tick,tickCount:ir.tickCount,ticks:void 0,type:ir.type,unit:void 0},NB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ia.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ia.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ia.scale,tick:Ia.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},kB={allowDataOverflow:ir.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ir.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ir.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ir.scale,tick:ir.tick,tickCount:ir.tickCount,ticks:void 0,type:"category",unit:void 0},ib=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?NB:_B,ob=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?kB:DB,Tp=e=>e.polarOptions,sb=ee([Va,Ka,Vt],iO),C_=ee([Tp,sb],(e,t)=>{if(e!=null)return Cn(e.innerRadius,t,0)}),P_=ee([Tp,sb],(e,t)=>{if(e!=null)return Cn(e.outerRadius,t,t*.8)}),MB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},w_=ee([Tp],MB);ee([ib,w_],wp);var T_=ee([sb,C_,P_],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ee([ob,T_],wp);var O_=ee([Ve,Tp,C_,P_,Va,Ka],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:p,endAngle:f}=t;return{cx:Cn(l,i,i/2),cy:Cn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:p,endAngle:f,clockWise:!1}}}),St=(e,t)=>t,cu=(e,t,n)=>n;function lb(e){return e?.id}var Wt=e=>{var t=Ve(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},vl=e=>e.tooltip.settings.axisId,an=e=>{var t=Wt(e),n=vl(e);return uu(e,t,n)},__=ee([an],e=>e?.dataKey);function D_(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var p,f=(p=u.data)!==null&&p!==void 0?p:r;if(!(f==null||f.length===0)){var h=lb(u);f.forEach((m,g)=>{var b=s==null||i?g:String(bt(m,s,null)),S=bt(m,u.dataKey,0),A;l.has(b)?A=l.get(b):A={},Object.assign(A,{[h]:S}),l.set(b,A)})}}),Array.from(l.values())}function Op(e){return e.stackId!=null&&e.dataKey!=null}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(r){jB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jB(e,t,n){return(t=RB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RB(e){var t=IB(e,"string");return typeof t=="symbol"?t:t+""}function IB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D0=[0,"auto"],rr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},N_=(e,t)=>e.cartesianAxis.xAxis[t],Bi=(e,t)=>{var n=N_(e,t);return n??rr},ar={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:D0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ru},k_=(e,t)=>e.cartesianAxis.yAxis[t],Ui=(e,t)=>{var n=k_(e,t);return n??ar},LB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},cb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??LB},Nt=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);case"zAxis":return cb(e,n);case"angleAxis":return ib(e,n);case"radiusAxis":return ob(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},$B=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},uu=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);case"angleAxis":return ib(e,n);case"radiusAxis":return ob(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},M_=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ub(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var db=e=>e.graphicalItems.cartesianItems,BB=ee([St,cu],ub),fb=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),du=ee([db,Nt,BB],fb),j_=ee([du],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Op)),R_=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),I_=ee([du],R_),pb=e=>e.map(t=>t.data).filter(Boolean).flat(1),UB=ee([du],pb),hb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},mb=ee([UB,Jv],hb),gb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:bt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:bt(i,r)}))):e.map(r=>({value:r})),_p=ee([mb,Nt,du],gb);function L_(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Fo(e){return e.filter(t=>da(t)||t instanceof Date).map(Number).filter(t=>lr(t)===!1)}function zB(e,t,n){return!n||typeof t!="number"||lr(t)?[]:n.length?Fo(n.flatMap(r=>{var i=bt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!ur(s)||!ur(l)))return[t-s,t+l]})):[]}var GB=ee([j_,Jv,an],D_),$_=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,p=u.map(lb);return[l,{stackedData:F3(e,p,n),graphicalItems:u}]}))},N0=ee([GB,j_,lu],$_),B_=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=Q3(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},HB=ee([N0,$i,St],B_),U_=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,p,f=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>L_(i,m)),h=bt(s,(p=t.dataKey)!==null&&p!==void 0?p:l.dataKey);return{value:h,errorDomain:zB(s,h,f)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:bt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Dp=e=>e.errorBars,z_=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>L_(n,r));ee([I_,Dp,St],z_);var qB=ee([mb,Nt,I_,Dp,St],U_);function YB(e){var{value:t}=e;if(da(t)||t instanceof Date)return t}var bP=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Fo(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},FB=(e,t,n)=>{var r=e.map(YB).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&JT(r))?wO(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},yb=e=>{var t;if(e==null||!("domain"in e))return D0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Fo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:D0},Hf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},G_=e=>e.referenceElements.dots,bl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),VB=ee([G_,St,cu],bl),H_=e=>e.referenceElements.areas,KB=ee([H_,St,cu],bl),q_=e=>e.referenceElements.lines,WB=ee([q_,St,cu],bl),Y_=(e,t)=>{var n=Fo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},XB=ee(VB,St,Y_),F_=(e,t)=>{var n=Fo(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},QB=ee([KB,St],F_),V_=(e,t)=>{var n=Fo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},ZB=ee(WB,St,V_),JB=ee(XB,ZB,QB,(e,t,n)=>Hf(e,n,t)),K_=ee([Nt],yb),vb=(e,t,n,r,i,s,l)=>{var u=hB(t,e.allowDataOverflow);if(u!=null)return u;var p=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",f=p?Hf(n,i,bP(r)):Hf(i,bP(r));return mB(t,f,e.allowDataOverflow)},e6=ee([Nt,K_,HB,qB,JB,Ve,St],vb),t6=[0,1],bb=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:p}=e,f=Ho(t,s);return f&&u==null?wO(0,n.length):p==="category"?FB(r,e,f):i==="expand"?t6:l}},xb=ee([Nt,Ve,mb,_p,lu,St,e6],bb),W_=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Jc(s));return u in Lc?u:"point"}}},xl=ee([Nt,Ve,M_,nb,St],W_);function n6(e){if(e!=null){if(e in Lc)return Lc[e]();var t="scale".concat(Jc(e));if(t in Lc)return Lc[t]()}}function Sb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=n6(t);if(i!=null){var s=i.domain(n).range(r);return z3(s),s}}}var Ab=(e,t,n)=>{var r=yb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ll(e))return PB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ll(e))return wB(e,t.tickCount,t.allowDecimals)}},Eb=ee([xb,uu,xl],Ab),Cb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&ll(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},r6=ee([Nt,xb,Eb,St],Cb),a6=ee(_p,Nt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Fo(e.map(u=>u.value))).sort((u,p)=>u-p);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),X_=ee(a6,Ve,A_,Vt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!ur(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=Cn(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),i6=(e,t)=>{var n=Bi(e,t);return n==null||typeof n.padding!="string"?0:X_(e,"xAxis",t,n.padding)},o6=(e,t)=>{var n=Ui(e,t);return n==null||typeof n.padding!="string"?0:X_(e,"yAxis",t,n.padding)},s6=ee(Bi,i6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),l6=ee(Ui,o6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),c6=ee([Vt,s6,mp,hp,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),u6=ee([Vt,Ve,l6,mp,hp,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),fu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return c6(e,n,r);case"yAxis":return u6(e,n,r);case"zAxis":return(i=cb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return w_(e);case"radiusAxis":return T_(e,n);default:return}},Q_=ee([Nt,fu],wp),Sl=ee([Nt,xl,r6,Q_],Sb);ee([du,Dp,St],z_);function Z_(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Np=(e,t)=>t,kp=(e,t,n)=>n,d6=ee(fp,Np,kp,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Z_)),f6=ee(pp,Np,kp,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Z_)),J_=(e,t)=>({width:e.width,height:t.height}),p6=(e,t)=>{var n=typeof t.width=="number"?t.width:ru;return{width:n,height:e.height}},eD=ee(Vt,Bi,J_),h6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},m6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},g6=ee(Ka,Vt,d6,Np,kp,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=J_(t,u);l==null&&(l=h6(t,r,e));var f=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(f)*p.height,l+=(f?-1:1)*p.height}),s}),y6=ee(Va,Vt,f6,Np,kp,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=p6(t,u);l==null&&(l=m6(t,r,e));var f=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(f)*p.width,l+=(f?-1:1)*p.width}),s}),v6=(e,t)=>{var n=Vt(e),r=Bi(e,t);if(r!=null){var i=g6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},b6=(e,t)=>{var n=Vt(e),r=Ui(e,t);if(r!=null){var i=y6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},tD=ee(Vt,Ui,(e,t)=>{var n=typeof t.width=="number"?t.width:ru;return{width:n,height:e.height}}),xP=(e,t,n)=>{switch(t){case"xAxis":return eD(e,n).width;case"yAxis":return tD(e,n).height;default:return}},nD=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Ho(e,r),p=t.map(f=>f.value);if(l&&u&&s==="category"&&i&&JT(p))return p}},Pb=ee([Ve,_p,Nt,St],nD),rD=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Ho(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},wb=ee([Ve,_p,uu,St],rD),SP=ee([Ve,$B,xl,Sl,Pb,wb,fu,Eb,St],(e,t,n,r,i,s,l,u,p)=>{if(t==null)return null;var f=Ho(e,p);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:p,categoricalDomain:s,duplicateDomain:i,isCategorical:f,niceTicks:u,range:l,realScaleType:n,scale:r}}),x6=(e,t,n,r,i,s,l,u,p)=>{if(!(t==null||r==null)){var f=Ho(e,p),{type:h,ticks:m,tickCount:g}=t,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=h==="category"&&r.bandwidth?r.bandwidth()/b:0;S=p==="angleAxis"&&s!=null&&s.length>=2?tn(s[0]-s[1])*2*S:S;var A=m||i;if(A){var C=A.map((P,T)=>{var O=l?l.indexOf(P):P;return{index:T,coordinate:r(O)+S,value:P,offset:S}});return C.filter(P=>!lr(P.coordinate))}return f&&u?u.map((P,T)=>({coordinate:r(P)+S,value:P,index:T,offset:S})):r.ticks?r.ticks(g).map(P=>({coordinate:r(P)+S,value:P,offset:S})):r.domain().map((P,T)=>({coordinate:r(P)+S,value:l?l[P]:P,index:T,offset:S}))}},aD=ee([Ve,uu,xl,Sl,Eb,fu,Pb,wb,St],x6),S6=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Ho(e,l),{tickCount:p}=t,f=0;return f=l==="angleAxis"&&r?.length>=2?tn(r[0]-r[1])*2*f:f,u&&s?s.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.ticks?n.ticks(p).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}},cl=ee([Ve,uu,Sl,fu,Pb,wb,St],S6),ul=ee(Nt,Sl,(e,t)=>{if(!(e==null||t==null))return Gf(Gf({},e),{},{scale:t})}),A6=ee([Nt,xl,xb,Q_],Sb);ee((e,t,n)=>cb(e,n),A6,(e,t)=>{if(!(e==null||t==null))return Gf(Gf({},e),{},{scale:t})});var E6=ee([Ve,fp,pp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),iD=e=>e.options.defaultTooltipEventType,oD=e=>e.options.validateTooltipEventTypes;function sD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Tb(e,t){var n=iD(e),r=oD(e);return sD(t,n,r)}function C6(e){return Pe(t=>Tb(t,e))}var lD=(e,t)=>{var n,r=Number(t);if(!(lr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},P6=e=>e.tooltip.settings,Oi={active:!1,index:null,dataKey:void 0,coordinate:void 0},w6={itemInteraction:{click:Oi,hover:Oi},axisInteraction:{click:Oi,hover:Oi},keyboardInteraction:Oi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},cD=dr({name:"tooltip",initialState:w6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Ua(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:T6,removeTooltipEntrySettings:O6,setTooltipSettingsState:_6,setActiveMouseOverItemIndex:uD,mouseLeaveItem:D6,mouseLeaveChart:dD,setActiveClickItemIndex:N6,setMouseOverAxisIndex:fD,setMouseClickAxisIndex:k6,setSyncInteraction:k0,setKeyboardInteraction:M0}=cD.actions,M6=cD.reducer;function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){j6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j6(e,t,n){return(t=R6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e){var t=I6(e,"string");return typeof t=="symbol"?t:t+""}function I6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $6(e){return e.index!=null}var pD=(e,t,n,r)=>{if(t==null)return Oi;var i=L6(e,t,n);if(i==null)return Oi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if($6(i)){if(s)return Xd(Xd({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Xd(Xd({},Oi),{},{coordinate:i.coordinate})},Ob=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!ur(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},hD=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var p=l[0],f=p==null?void 0:u(p.positions,s);if(f!=null)return f;var h=i?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},mD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},pu=e=>e.options.tooltipPayloadSearcher,Al=e=>e.tooltip;function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(r){B6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B6(e,t,n){return(t=U6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U6(e){var t=z6(e,"string");return typeof t=="symbol"?t:t+""}function z6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G6(e,t){return e??t}var gD=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:p,dataStartIndex:f,dataEndIndex:h}=n,m=[];return e.reduce((g,b)=>{var S,{dataDefinedOnItem:A,settings:C}=b,P=G6(A,u),T=Array.isArray(P)?oO(P,f,h):P,O=(S=C?.dataKey)!==null&&S!==void 0?S:r,k=C?.nameKey,N;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&l==="axis"?N=DR(T,r,i):N=s(T,t,p,k),Array.isArray(N))N.forEach(M=>{var j=CP(CP({},C),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});g.push(oC({tooltipEntrySettings:j,dataKey:M.dataKey,payload:M.payload,value:bt(M.payload,M.dataKey),name:M.name}))});else{var D;g.push(oC({tooltipEntrySettings:C,dataKey:O,payload:N,value:bt(N,O),name:(D=bt(N,k))!==null&&D!==void 0?D:C?.name}))}return g},m)}},_b=ee([an,Ve,M_,nb,Wt],W_),H6=ee([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),q6=ee([Wt,vl],ub),hu=ee([H6,an,q6],fb),Y6=ee([hu],e=>e.filter(Op)),F6=ee([hu],pb),El=ee([F6,$i],hb),V6=ee([Y6,$i,an],D_),Db=ee([El,an,hu],gb),K6=ee([an],yb),W6=ee([hu],e=>e.filter(Op)),X6=ee([V6,W6,lu],$_),Q6=ee([X6,$i,Wt],B_),Z6=ee([hu],R_),J6=ee([El,an,Z6,Dp,Wt],U_),eU=ee([G_,Wt,vl],bl),tU=ee([eU,Wt],Y_),nU=ee([H_,Wt,vl],bl),rU=ee([nU,Wt],F_),aU=ee([q_,Wt,vl],bl),iU=ee([aU,Wt],V_),oU=ee([tU,iU,rU],Hf),sU=ee([an,K6,Q6,J6,oU,Ve,Wt],vb),yD=ee([an,Ve,El,Db,lu,Wt,sU],bb),lU=ee([yD,an,_b],Ab),cU=ee([an,yD,lU,Wt],Cb),vD=e=>{var t=Wt(e),n=vl(e),r=!1;return fu(e,t,n,r)},bD=ee([an,vD],wp),xD=ee([an,_b,cU,bD],Sb),uU=ee([Ve,Db,an,Wt],nD),dU=ee([Ve,Db,an,Wt],rD),fU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:p}=t,f=Ho(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=p==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?tn(i[0]-i[1])*2*m:m,f&&l?l.map((g,b)=>({coordinate:r(g)+m,value:g,index:b,offset:m})):r.domain().map((g,b)=>({coordinate:r(g)+m,value:s?s[g]:g,index:b,offset:m}))}}},Xa=ee([Ve,an,_b,xD,vD,uU,dU,Wt],fU),Nb=ee([iD,oD,P6],(e,t,n)=>sD(n.shared,e,t)),SD=e=>e.tooltip.settings.trigger,kb=e=>e.tooltip.settings.defaultIndex,Mp=ee([Al,Nb,SD,kb],pD),$o=ee([Mp,El],Ob),AD=ee([Xa,$o],lD),ED=ee([Mp],e=>{if(e)return e.dataKey}),CD=ee([Al,Nb,SD,kb],mD),pU=ee([Va,Ka,Ve,Vt,Xa,kb,CD,pu],hD),hU=ee([Mp,pU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),mU=ee([Mp],e=>e.active),gU=ee([CD,$o,$i,__,AD,pu,Nb],gD);ee([gU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function PP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(n),!0).forEach(function(r){yU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yU(e,t,n){return(t=vU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vU(e){var t=bU(e,"string");return typeof t=="symbol"?t:t+""}function bU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xU=()=>Pe(an),SU=()=>{var e=xU(),t=Pe(Xa),n=Pe(xD);return Av(wP(wP({},e),{},{scale:n}),t)},AU=()=>Pe(nb),Mb=(e,t)=>t,PD=(e,t,n)=>n,jb=(e,t,n,r)=>r,EU=ee(Xa,e=>ip(e,t=>t.coordinate)),Rb=ee([Al,Mb,PD,jb],pD),wD=ee([Rb,El],Ob),CU=(e,t,n)=>{if(t!=null){var r=Al(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},TD=ee([Al,Mb,PD,jb],mD),qf=ee([Va,Ka,Ve,Vt,Xa,jb,TD,pu],hD),PU=ee([Rb,qf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),OD=ee(Xa,wD,lD),wU=ee([TD,wD,$i,__,OD,pu,Mb],gD),TU=ee([Rb],e=>({isActive:e.active,activeIndex:e.index})),OU=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var p=Z3(e.chartX,e.chartY,t,n,u);if(p){var f=e5(p,t),h=B3(f,l,s,r,i),m=J3(t,s,h,p);return{activeIndex:String(h),activeCoordinate:m}}}};function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j0.apply(null,arguments)}function TP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TP(Object(n),!0).forEach(function(r){_U(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _U(e,t,n){return(t=DU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DU(e){var t=NU(e,"string");return typeof t=="symbol"?t:t+""}function NU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:p,chartName:f}=e,h=t,m=n,g=r;if(!u||!h||f!=="ScatterChart"&&p!=="axis")return null;var b,S;if(f==="ScatterChart")b=h,S=e4;else if(f==="BarChart")b=t4(l,h,i,s),S=AO;else if(l==="radial"){var{cx:A,cy:C,radius:P,startAngle:T,endAngle:O}=EO(h);b={cx:A,cy:C,startAngle:T,endAngle:O,innerRadius:P,outerRadius:P},S=PO}else b={points:j4(l,h,i)},S=yO;var k=typeof u=="object"&&"className"in u?u.className:void 0,N=Qd(Qd(Qd(Qd({stroke:"#ccc",pointerEvents:"none"},i),b),It(u,!1)),{},{payload:m,payloadIndex:g,className:tt("recharts-tooltip-cursor",k)});return E.isValidElement(u)?E.cloneElement(u,N):E.createElement(S,N)}function MU(e){var t=SU(),n=fO(),r=Tv(),i=AU();return E.createElement(kU,j0({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var _D=E.createContext(null),jU=()=>E.useContext(_D),Sy={exports:{}},OP;function RU(){return OP||(OP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,f,h){this.fn=p,this.context=f,this.once=h||!1}function s(p,f,h,m,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var b=new i(h,m||p,g),S=n?n+f:f;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],b]:p._events[S].push(b):(p._events[S]=b,p._eventsCount++),p}function l(p,f){--p._eventsCount===0?p._events=new r:delete p._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,m;if(this._eventsCount===0)return f;for(m in h=this._events)t.call(h,m)&&f.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=n?n+f:f,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,b=m.length,S=new Array(b);g<b;g++)S[g]=m[g].fn;return S},u.prototype.listenerCount=function(f){var h=n?n+f:f,m=this._events[h];return m?m.fn?1:m.length:0},u.prototype.emit=function(f,h,m,g,b,S){var A=n?n+f:f;if(!this._events[A])return!1;var C=this._events[A],P=arguments.length,T,O;if(C.fn){switch(C.once&&this.removeListener(f,C.fn,void 0,!0),P){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,m),!0;case 4:return C.fn.call(C.context,h,m,g),!0;case 5:return C.fn.call(C.context,h,m,g,b),!0;case 6:return C.fn.call(C.context,h,m,g,b,S),!0}for(O=1,T=new Array(P-1);O<P;O++)T[O-1]=arguments[O];C.fn.apply(C.context,T)}else{var k=C.length,N;for(O=0;O<k;O++)switch(C[O].once&&this.removeListener(f,C[O].fn,void 0,!0),P){case 1:C[O].fn.call(C[O].context);break;case 2:C[O].fn.call(C[O].context,h);break;case 3:C[O].fn.call(C[O].context,h,m);break;case 4:C[O].fn.call(C[O].context,h,m,g);break;default:if(!T)for(N=1,T=new Array(P-1);N<P;N++)T[N-1]=arguments[N];C[O].fn.apply(C[O].context,T)}}return!0},u.prototype.on=function(f,h,m){return s(this,f,h,m,!1)},u.prototype.once=function(f,h,m){return s(this,f,h,m,!0)},u.prototype.removeListener=function(f,h,m,g){var b=n?n+f:f;if(!this._events[b])return this;if(!h)return l(this,b),this;var S=this._events[b];if(S.fn)S.fn===h&&(!g||S.once)&&(!m||S.context===m)&&l(this,b);else{for(var A=0,C=[],P=S.length;A<P;A++)(S[A].fn!==h||g&&!S[A].once||m&&S[A].context!==m)&&C.push(S[A]);C.length?this._events[b]=C.length===1?C[0]:C:l(this,b)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Sy)),Sy.exports}var IU=RU();const LU=Fr(IU);var Zc=new LU,R0="recharts.syncEvent.tooltip",_P="recharts.syncEvent.brush";function DD(e,t){if(t){var n=Number.parseInt(t,10);if(!lr(n))return e?.[n]}}var $U={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ND=dr({name:"options",initialState:$U,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),BU=ND.reducer,{createEventEmitter:UU}=ND.actions;function zU(e){return e.tooltip.syncInteraction}var GU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},kD=dr({name:"chartData",initialState:GU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:DP,setDataStartEndIndexes:HU,setComputedData:xV}=kD.actions,qU=kD.reducer,YU=["x","y"];function NP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(n),!0).forEach(function(r){FU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FU(e,t,n){return(t=VU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VU(e){var t=KU(e,"string");return typeof t=="symbol"?t:t+""}function KU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WU(e,t){if(e==null)return{};var n,r,i=XU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var MD=()=>{};function QU(){var e=Pe(rb),t=Pe(ab),n=Ct(),r=Pe(E_),i=Pe(Xa),s=Tv(),l=Cv(),u=Pe(p=>p.rootProps.className);E.useEffect(()=>{if(e==null)return MD;var p=(f,h,m)=>{if(t!==m&&e===f){if(r==="index"){var g;if(l&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate){var b=h.payload.coordinate,{x:S,y:A}=b,C=WU(b,YU),P=Ao(Ao(Ao({},C),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),T=Ao(Ao({},h),{},{payload:Ao(Ao({},h.payload),{},{coordinate:P})});n(T)}else n(h);return}if(i!=null){var O;if(typeof r=="function"){var k={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},N=r(i,k);O=i[N]}else r==="value"&&(O=i.find(re=>String(re.value)===h.payload.label));var{coordinate:D}=h.payload;if(O==null||h.payload.active===!1||D==null||l==null){n(k0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:M,y:j}=D,U=Math.min(M,l.x+l.width),K=Math.min(j,l.y+l.height),H={x:s==="horizontal"?O.coordinate:U,y:s==="horizontal"?K:O.coordinate},W=k0({active:h.payload.active,coordinate:H,dataKey:h.payload.dataKey,index:String(O.index),label:h.payload.label});n(W)}}};return Zc.on(R0,p),()=>{Zc.off(R0,p)}},[u,n,t,e,r,i,s,l])}function ZU(){var e=Pe(rb),t=Pe(ab),n=Ct();E.useEffect(()=>{if(e==null)return MD;var r=(i,s,l)=>{t!==l&&e===i&&n(HU(s))};return Zc.on(_P,r),()=>{Zc.off(_P,r)}},[n,t,e])}function JU(){var e=Ct();E.useEffect(()=>{e(UU())},[e]),QU(),ZU()}function ez(e,t,n,r,i,s){var l=Pe(g=>CU(g,e,t)),u=Pe(ab),p=Pe(rb),f=Pe(E_),h=Pe(zU),m=h?.active;E.useEffect(()=>{if(!m&&p!=null&&u!=null){var g=k0({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Zc.emit(R0,p,g,u)}},[m,n,l,i,r,u,p,f,s])}function kP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(n),!0).forEach(function(r){tz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tz(e,t,n){return(t=nz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nz(e){var t=rz(e,"string");return typeof t=="symbol"?t:t+""}function rz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function az(e){return e.dataKey}function iz(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(k5,t)}var jP=[],oz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!hl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Ay(e){var t=Rr(e,oz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:p,offset:f,payloadUniqBy:h,position:m,reverseDirection:g,useTranslate3d:b,wrapperStyle:S,cursor:A,shared:C,trigger:P,defaultIndex:T,portal:O,axisId:k}=t,N=Ct(),D=typeof T=="number"?String(T):T;E.useEffect(()=>{N(_6({shared:C,trigger:P,axisId:k,active:n,defaultIndex:D}))},[N,C,P,k,n,D]);var M=Cv(),j=gO(),U=C6(C),{activeIndex:K,isActive:H}=Pe(z=>TU(z,U,P,D)),W=Pe(z=>wU(z,U,P,D)),re=Pe(z=>OD(z,U,P,D)),le=Pe(z=>PU(z,U,P,D)),ne=W,L=jU(),q=n??H,[ue,ye]=j2([ne,q]),R=U==="axis"?re:void 0;ez(U,P,le,R,K,q);var F=O??L;if(F==null)return null;var X=ne??jP;q||(X=jP),u&&X.length&&(X=_2(ne.filter(z=>z.value!=null&&(z.hide!==!0||t.includeHidden)),h,az));var ae=X.length>0,me=E.createElement(B5,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:p,active:q,coordinate:le,hasPayload:ae,offset:f,position:m,reverseDirection:g,useTranslate3d:b,viewBox:M,wrapperStyle:S,lastBoundingBox:ue,innerRef:ye,hasPortalFromProps:!!O},iz(l,MP(MP({},t),{},{payload:X,label:R,active:q,coordinate:le,accessibilityLayer:j})));return E.createElement(E.Fragment,null,n2.createPortal(me,F),q&&E.createElement(MU,{cursor:A,tooltipEventType:U,coordinate:le,payload:ne,index:K}))}var Ey={},Cy={},Py={},RP;function sz(){return RP||(RP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const p=s!=null&&s.includes("leading"),f=s==null||s.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{f&&h(),A()};let g=null;const b=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},r)},S=()=>{g!==null&&(clearTimeout(g),g=null)},A=()=>{S(),l=void 0,u=null},C=()=>{h()},P=function(...T){if(i?.aborted)return;l=this,u=T;const O=g==null;b(),p&&O&&h()};return P.schedule=b,P.cancel=A,P.flush=C,i?.addEventListener("abort",A,{once:!0}),P}e.debounce=t})(Py)),Py}var IP;function lz(){return IP||(IP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:p}=s,f=Array(2);l&&(f[0]="leading"),u&&(f[1]="trailing");let h,m=null;const g=t.debounce(function(...A){h=r.apply(this,A),m=null},i,{edges:f}),b=function(...A){return p!=null&&(m===null&&(m=Date.now()),Date.now()-m>=p)?(h=r.apply(this,A),m=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,A),h)},S=()=>(g.flush(),h);return b.cancel=g.cancel,b.flush=S,b}e.debounce=n})(Cy)),Cy}var LP;function cz(){return LP||(LP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lz();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Ey)),Ey}var wy,$P;function uz(){return $P||($P=1,wy=cz().throttle),wy}var dz=uz();const fz=Fr(dz);var Uc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function BP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(n),!0).forEach(function(r){pz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pz(e,t,n){return(t=hz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hz(e){var t=mz(e,"string");return typeof t=="symbol"?t:t+""}function mz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oy=E.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:p,children:f,debounce:h=0,id:m,className:g,onResize:b,style:S={}}=e,A=E.useRef(null),C=E.useRef();C.current=b,E.useImperativeHandle(t,()=>A.current);var[P,T]=E.useState({containerWidth:r.width,containerHeight:r.height}),O=E.useCallback((N,D)=>{T(M=>{var j=Math.round(N),U=Math.round(D);return M.containerWidth===j&&M.containerHeight===U?M:{containerWidth:j,containerHeight:U}})},[]);E.useEffect(()=>{var N=U=>{var K,{width:H,height:W}=U[0].contentRect;O(H,W),(K=C.current)===null||K===void 0||K.call(C,H,W)};h>0&&(N=fz(N,h,{trailing:!0,leading:!1}));var D=new ResizeObserver(N),{width:M,height:j}=A.current.getBoundingClientRect();return O(M,j),D.observe(A.current),()=>{D.disconnect()}},[O,h]);var k=E.useMemo(()=>{var{containerWidth:N,containerHeight:D}=P;if(N<0||D<0)return null;Uc(wo(i)||wo(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Uc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=wo(i)?N:i,j=wo(s)?D:s;return n&&n>0&&(M?j=M/n:j&&(M=j*n),p&&j>p&&(j=p)),Uc(M>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,j,i,s,l,u,n),E.Children.map(f,U=>E.cloneElement(U,{width:M,height:j,style:Ty({width:M,height:j},U.props.style)}))},[n,f,s,p,u,l,P,i]);return E.createElement("div",{id:m?"".concat(m):void 0,className:tt("recharts-responsive-container",g),style:Ty(Ty({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:p}),ref:A},E.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),dl=e=>null;dl.displayName="Cell";function gz(e,t,n){return(t=yz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bz{constructor(t){gz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function UP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(n),!0).forEach(function(r){Sz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sz(e,t,n){return(t=Az(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Az(e){var t=Ez(e,"string");return typeof t=="symbol"?t:t+""}function Ez(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cz={cacheSize:2e3,enableCache:!0},jD=xz({},Cz),zP=new bz(jD.cacheSize),Pz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},GP="recharts_measurement_span";function wz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var HP=(e,t)=>{try{var n=document.getElementById(GP);n||(n=document.createElement("span"),n.setAttribute("id",GP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Pz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},zc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hl.isSsr)return{width:0,height:0};if(!jD.enableCache)return HP(t,n);var r=wz(t,n),i=zP.get(r);if(i)return i;var s=HP(t,n);return zP.set(r,s),s},qP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Oz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_z=Object.keys(RD),Ws="NaN";function Dz(e,t){return e*RD[t]}class Fn{static parse(t){var n,[,r,i]=(n=Oz.exec(t))!==null&&n!==void 0?n:[];return new Fn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,lr(t)&&(this.unit=""),n!==""&&!Tz.test(n)&&(this.num=NaN,this.unit=""),_z.includes(n)&&(this.num=Dz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return lr(this.num)}}function ID(e){if(e.includes(Ws))return Ws;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=qP.exec(t))!==null&&n!==void 0?n:[],l=Fn.parse(r??""),u=Fn.parse(s??""),p=i==="*"?l.multiply(u):l.divide(u);if(p.isNaN())return Ws;t=t.replace(qP,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,h,m,g]=(f=YP.exec(t))!==null&&f!==void 0?f:[],b=Fn.parse(h??""),S=Fn.parse(g??""),A=m==="+"?b.add(S):b.subtract(S);if(A.isNaN())return Ws;t=t.replace(YP,A.toString())}return t}var FP=/\(([^()]*)\)/;function Nz(e){for(var t=e,n;(n=FP.exec(t))!=null;){var[,r]=n;t=t.replace(FP,ID(r))}return t}function kz(e){var t=e.replace(/\s+/g,"");return t=Nz(t),t=ID(t),t}function Mz(e){try{return kz(e)}catch{return Ws}}function _y(e){var t=Mz(e.slice(5,-1));return t===Ws?"":t}var jz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rz=["dx","dy","angle","className","breakAll"];function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I0.apply(null,arguments)}function VP(e,t){if(e==null)return{};var n,r,i=Iz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Iz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LD=/[ \f\n\r\t\v\u2028\u2029]+/,$D=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];nn(t)||(n?i=t.toString().split(""):i=t.toString().split(LD));var s=i.map(u=>({word:u,width:zc(u,r).width})),l=n?0:zc(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},Lz=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:p}=e,f=Te(s),h=l,m=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce((W,re)=>{var{word:le,width:ne}=re,L=W[W.length-1];if(L&&(r==null||i||L.width+ne+n<Number(r)))L.words.push(le),L.width+=ne+n;else{var q={words:[le],width:ne};W.push(q)}return W},[])},g=m(t),b=K=>K.reduce((H,W)=>H.width>W.width?H:W);if(!f||i)return g;var S=g.length>s||b(g).width>Number(r);if(!S)return g;for(var A="…",C=K=>{var H=h.slice(0,K),W=$D({breakAll:p,style:u,children:H+A}).wordsWithComputedWidth,re=m(W),le=re.length>s||b(re).width>Number(r);return[le,re]},P=0,T=h.length-1,O=0,k;P<=T&&O<=h.length-1;){var N=Math.floor((P+T)/2),D=N-1,[M,j]=C(D),[U]=C(N);if(!M&&!U&&(P=N+1),M&&U&&(T=N-1),!M&&U){k=j;break}O++}return k||g},KP=e=>{var t=nn(e)?[]:e.toString().split(LD);return[{words:t}]},$z=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!hl.isSsr){var u,p,f=$D({breakAll:s,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:m}=f;u=h,p=m}else return KP(r);return Lz({breakAll:s,children:r,maxLines:l,style:i},u,p,t,n)}return KP(r)},WP="#808080",jp=E.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:p="end",fill:f=WP}=e,h=VP(e,jz),m=E.useMemo(()=>$z({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:b,angle:S,className:A,breakAll:C}=h,P=VP(h,Rz);if(!da(n)||!da(r)||m.length===0)return null;var T=n+(Te(g)?g:0),O=r+(Te(b)?b:0),k;switch(p){case"start":k=_y("calc(".concat(s,")"));break;case"middle":k=_y("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:k=_y("calc(".concat(m.length-1," * -").concat(i,")"));break}var N=[];if(l){var D=m[0].width,{width:M}=h;N.push("scale(".concat(Te(M)?M/D:1,")"))}return S&&N.push("rotate(".concat(S,", ").concat(T,", ").concat(O,")")),N.length&&(P.transform=N.join(" ")),E.createElement("text",I0({},It(P,!0),{ref:t,x:T,y:O,className:tt("recharts-text",A),textAnchor:u,fill:f.includes("url")?WP:f}),m.map((j,U)=>{var K=j.words.join(C?"":" ");return E.createElement("tspan",{x:T,dy:U===0?k:i,key:"".concat(K,"-").concat(U)},K)}))});jp.displayName="Text";var Bz=["labelRef"];function Uz(e,t){if(e==null)return{};var n,r,i=zz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function XP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(n),!0).forEach(function(r){Gz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gz(e,t,n){return(t=Hz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hz(e){var t=qz(e,"string");return typeof t=="symbol"?t:t+""}function qz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},La.apply(null,arguments)}var BD=E.createContext(null),Yz=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=E.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return E.createElement(BD.Provider,{value:l},s)},UD=()=>{var e=E.useContext(BD),t=Cv();return e||t},Fz=E.createContext(null),Vz=()=>{var e=E.useContext(Fz),t=Pe(O_);return e||t},Kz=e=>{var{value:t,formatter:n}=e,r=nn(e.children)?t:e.children;return typeof n=="function"?n(r):r},Ib=e=>e!=null&&typeof e=="function",Wz=(e,t)=>{var n=tn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Xz=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:p,innerRadius:f,outerRadius:h,startAngle:m,endAngle:g,clockWise:b}=i,S=(f+h)/2,A=Wz(m,g),C=A>=0?1:-1,P,T;switch(t){case"insideStart":P=m+C*s,T=b;break;case"insideEnd":P=g-C*s,T=!b;break;case"end":P=g+C*s,T=b;break;default:throw new Error("Unsupported position ".concat(t))}T=A<=0?T:!T;var O=Lt(u,p,S,P),k=Lt(u,p,S,P+(T?1:-1)*359),N="M".concat(O.x,",").concat(O.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(T?0:1,`,
    `).concat(k.x,",").concat(k.y),D=nn(e.id)?Hc("recharts-radial-line-"):e.id;return E.createElement("text",La({},r,{dominantBaseline:"central",className:tt("recharts-radial-bar-label",l)}),E.createElement("defs",null,E.createElement("path",{id:D,d:N})),E.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Qz=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:p}=e,f=(u+p)/2;if(n==="outside"){var{x:h,y:m}=Lt(r,i,l+t,f);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+l)/2,{x:b,y:S}=Lt(r,i,g,f);return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},zD=e=>"cx"in e&&Te(e.cx),Zz=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!zD(n)&&(s=n);var{x:l,y:u,width:p,height:f}=t,h=f>=0?1:-1,m=h*r,g=h>0?"end":"start",b=h>0?"start":"end",S=p>=0?1:-1,A=S*r,C=S>0?"end":"start",P=S>0?"start":"end";if(i==="top"){var T={x:l+p/2,y:u-h*r,textAnchor:"middle",verticalAnchor:g};return Dt(Dt({},T),s?{height:Math.max(u-s.y,0),width:p}:{})}if(i==="bottom"){var O={x:l+p/2,y:u+f+m,textAnchor:"middle",verticalAnchor:b};return Dt(Dt({},O),s?{height:Math.max(s.y+s.height-(u+f),0),width:p}:{})}if(i==="left"){var k={x:l-A,y:u+f/2,textAnchor:C,verticalAnchor:"middle"};return Dt(Dt({},k),s?{width:Math.max(k.x-s.x,0),height:f}:{})}if(i==="right"){var N={x:l+p+A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return Dt(Dt({},N),s?{width:Math.max(s.x+s.width-N.x,0),height:f}:{})}var D=s?{width:p,height:f}:{};return i==="insideLeft"?Dt({x:l+A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},D):i==="insideRight"?Dt({x:l+p-A,y:u+f/2,textAnchor:C,verticalAnchor:"middle"},D):i==="insideTop"?Dt({x:l+p/2,y:u+m,textAnchor:"middle",verticalAnchor:b},D):i==="insideBottom"?Dt({x:l+p/2,y:u+f-m,textAnchor:"middle",verticalAnchor:g},D):i==="insideTopLeft"?Dt({x:l+A,y:u+m,textAnchor:P,verticalAnchor:b},D):i==="insideTopRight"?Dt({x:l+p-A,y:u+m,textAnchor:C,verticalAnchor:b},D):i==="insideBottomLeft"?Dt({x:l+A,y:u+f-m,textAnchor:P,verticalAnchor:g},D):i==="insideBottomRight"?Dt({x:l+p-A,y:u+f-m,textAnchor:C,verticalAnchor:g},D):i&&typeof i=="object"&&(Te(i.x)||wo(i.x))&&(Te(i.y)||wo(i.y))?Dt({x:l+Cn(i.x,p),y:u+Cn(i.y,f),textAnchor:"end",verticalAnchor:"end"},D):Dt({x:l+p/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},D)},Jz={offset:5};function Ti(e){var t=Rr(e,Jz),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:p,labelRef:f}=t,h=Vz(),m=UD(),g=r==="center"?m:h??m,b=n||g;if(!b||nn(i)&&nn(s)&&!E.isValidElement(l)&&typeof l!="function")return null;var S=Dt(Dt({},t),{},{viewBox:b});if(E.isValidElement(l)){var{labelRef:A}=S,C=Uz(S,Bz);return E.cloneElement(l,C)}var P;if(typeof l=="function"){if(P=E.createElement(l,S),E.isValidElement(P))return P}else P=Kz(t);var T=zD(b),O=It(t,!0);if(T&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Xz(t,r,P,O,b);var k=T?Qz(b,t.offset,t.position):Zz(t,b);return E.createElement(jp,La({ref:f,className:tt("recharts-label",u)},O,k,{breakAll:p}),P)}Ti.displayName="Label";var eG=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?E.createElement(Ti,La({key:"label-implicit"},r)):da(e)?E.createElement(Ti,La({key:"label-implicit",value:e},r)):E.isValidElement(e)?e.type===Ti?E.cloneElement(e,Dt({key:"label-implicit"},r)):E.createElement(Ti,La({key:"label-implicit",content:e},r)):Ib(e)?E.createElement(Ti,La({key:"label-implicit",content:e},r)):e&&typeof e=="object"?E.createElement(Ti,La({},e,{key:"label-implicit"},r)):null};function tG(e){var{label:t}=e,n=UD();return eG(t,n)||null}var Dy={},Ny={},QP;function nG(){return QP||(QP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Ny)),Ny}var ky={},ZP;function rG(){return ZP||(ZP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(ky)),ky}var JP;function aG(){return JP||(JP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nG(),n=rG(),r=hv();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Dy)),Dy}var My,ew;function iG(){return ew||(ew=1,My=aG().last),My}var oG=iG();const sG=Fr(oG);var lG=["valueAccessor"],cG=["dataKey","clockWise","id","textBreakAll"];function Yf(){return Yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yf.apply(null,arguments)}function tw(e,t){if(e==null)return{};var n,r,i=uG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dG=e=>Array.isArray(e.value)?sG(e.value):e.value,GD=E.createContext(void 0),fG=GD.Provider,HD=E.createContext(void 0),pG=HD.Provider;function hG(){return E.useContext(GD)}function mG(){return E.useContext(HD)}function cf(e){var{valueAccessor:t=dG}=e,n=tw(e,lG),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=tw(n,cG),p=hG(),f=mG(),h=p||f;return!h||!h.length?null:E.createElement(Wn,{className:"recharts-label-list"},h.map((m,g)=>{var b,S=nn(r)?t(m,g):bt(m&&m.payload,r),A=nn(s)?{}:{id:"".concat(s,"-").concat(g)};return E.createElement(Ti,Yf({},It(m,!0),u,A,{fill:(b=n.fill)!==null&&b!==void 0?b:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(g),index:g}))}))}cf.displayName="LabelList";function qD(e){var{label:t}=e;return t?t===!0?E.createElement(cf,{key:"labelList-implicit"}):E.isValidElement(t)||Ib(t)?E.createElement(cf,{key:"labelList-implicit",content:t}):typeof t=="object"?E.createElement(cf,Yf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var YD=e=>e.graphicalItems.polarItems,gG=ee([St,cu],ub),Lb=ee([YD,Nt,gG],fb),yG=ee([Lb],pb),$b=ee([yG,Zv],hb),vG=ee([$b,Nt,Lb],gb),bG=ee([$b,Nt,Lb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=bt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:bt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),nw=()=>{},xG=ee([Nt,K_,nw,bG,nw,Ve,St],vb),FD=ee([Nt,Ve,$b,vG,lu,St,xG],bb),SG=ee([FD,Nt,xl],Ab);ee([Nt,FD,SG,St],Cb);var AG={radiusAxis:{},angleAxis:{}},VD=dr({name:"polarAxis",initialState:AG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:SV,removeRadiusAxis:AV,addAngleAxis:EV,removeAngleAxis:CV}=VD.actions,EG=VD.reducer;function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rw(Object(n),!0).forEach(function(r){CG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CG(e,t,n){return(t=PG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PG(e){var t=wG(e,"string");return typeof t=="symbol"?t:t+""}function wG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TG=(e,t)=>t,Bb=ee([YD,TG],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),OG=[],Ub=(e,t,n)=>n?.length===0?OG:n,KD=ee([Zv,Bb,Ub],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>aw(aw({},t.presentationProps),s.props))),i!=null)return i}}),_G=ee([KD,Bb,Ub],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=bt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:dp(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),DG=ee([KD,Bb,Ub,Vt],(e,t,n,r)=>{if(!(t==null||e==null))return _9({offset:r,pieSettings:t,displayedData:e,cells:n})}),jy={},iw;function NG(){return iw||(iw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(jy)),jy}var Ry,ow;function kG(){return ow||(ow=1,Ry=NG().isPlainObject),Ry}var MG=kG();const jG=Fr(MG);function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(n),!0).forEach(function(r){RG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RG(e,t,n){return(t=IG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IG(e){var t=LG(e,"string");return typeof t=="symbol"?t:t+""}function LG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ff.apply(null,arguments)}var cw=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},$G={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BG=e=>{var t=Rr(e,$G),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:p,animationDuration:f,animationBegin:h,isUpdateAnimationActive:m}=t,g=E.useRef(),[b,S]=E.useState(-1),A=E.useRef(i),C=E.useRef(s),P=E.useRef(l),T=E.useRef(n),O=E.useRef(r),k=vp(e,"trapezoid-");if(E.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var le=g.current.getTotalLength();le&&S(le)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var N=tt("recharts-trapezoid",u);if(!m)return E.createElement("g",null,E.createElement("path",Ff({},It(t,!0),{className:N,d:cw(n,r,i,s,l)})));var D=A.current,M=C.current,j=P.current,U=T.current,K=O.current,H="0px ".concat(b===-1?1:b,"px"),W="".concat(b,"px 0px"),re=vO(["strokeDasharray"],f,p);return E.createElement(yp,{animationId:k,key:k,canBegin:b>0,duration:f,easing:p,isActive:m,begin:h},le=>{var ne=pn(D,i,le),L=pn(M,s,le),q=pn(j,l,le),ue=pn(U,n,le),ye=pn(K,r,le);g.current&&(A.current=ne,C.current=L,P.current=q,T.current=ue,O.current=ye);var R=le>0?{transition:re,strokeDasharray:W}:{strokeDasharray:H};return E.createElement("path",Ff({},It(t,!0),{className:N,d:cw(ue,ye,ne,L,q),ref:g,style:lw(lw({},R),t.style)}))})},UG=["option","shapeType","propTransformer","activeClassName","isActive"];function zG(e,t){if(e==null)return{};var n,r,i=GG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uw(Object(n),!0).forEach(function(r){HG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HG(e,t,n){return(t=qG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qG(e){var t=YG(e,"string");return typeof t=="symbol"?t:t+""}function YG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FG(e,t){return Vf(Vf({},t),e)}function VG(e,t){return e==="symbols"}function dw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return E.createElement(AO,n);case"trapezoid":return E.createElement(BG,n);case"sector":return E.createElement(PO,n);case"symbols":if(VG(t))return E.createElement(dv,n);break;default:return null}}function KG(e){return E.isValidElement(e)?e.props:e}function WD(e){var{option:t,shapeType:n,propTransformer:r=FG,activeClassName:i="recharts-active-shape",isActive:s}=e,l=zG(e,UG),u;if(E.isValidElement(t))u=E.cloneElement(t,Vf(Vf({},l),KG(t)));else if(typeof t=="function")u=t(l);else if(jG(t)&&typeof t!="boolean"){var p=r(t,l);u=E.createElement(dw,{shapeType:n,elementProps:p})}else{var f=l;u=E.createElement(dw,{shapeType:n,elementProps:f})}return s?E.createElement(Wn,{className:i},u):u}var zb=(e,t)=>{var n=Ct();return(r,i)=>s=>{e?.(r,i,s),n(uD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Gb=e=>{var t=Ct();return(n,r)=>i=>{e?.(n,r,i),t(D6())}},Hb=(e,t)=>{var n=Ct();return(r,i)=>s=>{e?.(r,i,s),n(N6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function XD(e){var{fn:t,args:n}=e,r=Ct(),i=jr();return E.useEffect(()=>{if(!i){var s=t(n);return r(T6(s)),()=>{r(O6(s))}}},[t,n,r,i]),null}var QD=()=>{};function WG(e){var{legendPayload:t}=e,n=Ct(),r=jr();return E.useEffect(()=>r?QD:(n(hO(t)),()=>{n(mO(t))}),[n,r,t]),null}function XG(e){var{legendPayload:t}=e,n=Ct(),r=Pe(Ve);return E.useEffect(()=>r!=="centric"&&r!=="radial"?QD:(n(hO(t)),()=>{n(mO(t))}),[n,r,t]),null}var Iy,QG=()=>{var[e]=E.useState(()=>Hc("uid-"));return e},ZG=(Iy=Qk.useId)!==null&&Iy!==void 0?Iy:QG;function JG(e,t){var n=ZG();return t||(e?"".concat(e,"-").concat(n):n)}var e9=E.createContext(void 0),ZD=e=>{var{id:t,type:n,children:r}=e,i=JG("recharts-".concat(n),t);return E.createElement(e9.Provider,{value:i},r(i))},t9={cartesianItems:[],polarItems:[]},JD=dr({name:"graphicalItems",initialState:t9,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Ua(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Ua(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Ua(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:n9,replaceCartesianGraphicalItem:r9,removeCartesianGraphicalItem:a9,addPolarGraphicalItem:i9,removePolarGraphicalItem:o9}=JD.actions,s9=JD.reducer;function l9(e){var t=Ct(),n=E.useRef(null);return E.useEffect(()=>{n.current===null?t(n9(e)):n.current!==e&&t(r9({prev:n.current,next:e})),n.current=e},[t,e]),E.useEffect(()=>()=>{n.current&&(t(a9(n.current)),n.current=null)},[t]),null}function c9(e){var t=Ct();return E.useEffect(()=>(t(i9(e)),()=>{t(o9(e))}),[t,e]),null}var u9=["onMouseEnter","onClick","onMouseLeave"],d9=["id"],f9=["id"];function qb(e,t){if(e==null)return{};var n,r,i=p9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(n),!0).forEach(function(r){h9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h9(e,t,n){return(t=m9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m9(e){var t=g9(e,"string");return typeof t=="symbol"?t:t+""}function g9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(null,arguments)}function y9(e){var t=E.useMemo(()=>ov(e.children,dl),[e.children]),n=Pe(r=>_G(r,e.id,t));return n==null?null:E.createElement(XG,{legendPayload:n})}function v9(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:p,tooltipType:f}=e;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:dp(u,t),hide:p,type:f,color:l,unit:""}}}var b9=(e,t)=>e>t?"start":e<t?"end":"middle",x9=(e,t,n)=>Cn(typeof t=="function"?t(e):t,n,n*.8),S9=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=iO(s,l),p=i+Cn(e.cx,s,s/2),f=r+Cn(e.cy,l,l/2),h=Cn(e.innerRadius,u,0),m=x9(n,e.outerRadius,u),g=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:p,cy:f,innerRadius:h,outerRadius:m,maxRadius:g}},A9=(e,t)=>{var n=tn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function E9(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var C9=(e,t)=>{if(E.isValidElement(e))return E.cloneElement(e,t);if(typeof e=="function")return e(t);var n=tt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return E.createElement(yO,Mi({},t,{type:"linear",className:n}))},P9=(e,t,n)=>{if(E.isValidElement(e))return E.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),E.isValidElement(r)))return r;var i=tt("recharts-pie-label-text",E9(e));return E.createElement(jp,Mi({},t,{alignmentBaseline:"middle",className:i}),r)};function w9(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=Go(n),p=It(i,!1),f=It(s,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((g,b)=>{var S=(g.startAngle+g.endAngle)/2,A=Lt(g.cx,g.cy,g.outerRadius+h,S),C=vt(vt(vt(vt({},u),g),{},{stroke:"none"},p),{},{index:b,textAnchor:b9(A.x,g.cx)},A),P=vt(vt(vt(vt({},u),g),{},{fill:"none",stroke:g.fill},f),{},{index:b,points:[Lt(g.cx,g.cy,g.outerRadius,S),A],key:"line"});return E.createElement(Wn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(b)},s&&C9(s,P),P9(i,C,bt(g,l)))});return E.createElement(Wn,{className:"recharts-pie-labels"},m)}function T9(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(qD,{label:n.label}):E.createElement(w9,{sectors:t,props:n,showLabels:r})}function O9(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=Pe($o),{onMouseEnter:l,onClick:u,onMouseLeave:p}=i,f=qb(i,u9),h=zb(l,i.dataKey),m=Gb(p),g=Hb(u,i.dataKey);return t==null||t.length===0?null:E.createElement(E.Fragment,null,t.map((b,S)=>{if(b?.startAngle===0&&b?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===s,C=s?r:null,P=A?n:C,T=vt(vt({},b),{},{stroke:b.stroke,tabIndex:-1,[uO]:S,[dO]:i.dataKey});return E.createElement(Wn,Mi({tabIndex:-1,className:"recharts-pie-sector"},eu(f,b,S),{onMouseEnter:h(b,S),onMouseLeave:m(b,S),onClick:g(b,S),key:"sector-".concat(b?.startAngle,"-").concat(b?.endAngle,"-").concat(b.midAngle,"-").concat(S)}),E.createElement(WD,Mi({option:P,isActive:A,shapeType:"sector"},T)))}))}function _9(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:p,dataKey:f,nameKey:h,tooltipType:m}=n,g=Math.abs(n.minAngle),b=A9(u,p),S=Math.abs(b),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(D=>bt(D,f,0)!==0).length,P=(S>=360?C:C-1)*A,T=S-C*g-P,O=r.reduce((D,M)=>{var j=bt(M,f,0);return D+(Te(j)?j:0)},0),k;if(O>0){var N;k=r.map((D,M)=>{var j=bt(D,f,0),U=bt(D,h,M),K=S9(n,s,D),H=(Te(j)?j:0)/O,W,re=vt(vt({},D),i&&i[M]&&i[M].props);M?W=N.endAngle+tn(b)*A*(j!==0?1:0):W=u;var le=W+tn(b)*((j!==0?g:0)+H*T),ne=(W+le)/2,L=(K.innerRadius+K.outerRadius)/2,q=[{name:U,value:j,payload:re,dataKey:f,type:m}],ue=Lt(K.cx,K.cy,L,ne);return N=vt(vt(vt(vt({},n.presentationProps),{},{percent:H,cornerRadius:l,name:U,tooltipPayload:q,midAngle:ne,middleRadius:L,tooltipPosition:ue},re),K),{},{value:bt(D,f),startAngle:W,endAngle:le,payload:re,paddingAngle:tn(b)*A}),N})}return k}function D9(e){var{showLabels:t,sectors:n,children:r}=e,i=E.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return E.createElement(pG,{value:t?i:void 0},r)}function N9(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:p,inactiveShape:f,onAnimationStart:h,onAnimationEnd:m}=t,g=vp(t,"recharts-pie-"),b=n.current,[S,A]=E.useState(!1),C=E.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),P=E.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return E.createElement(D9,{showLabels:!S,sectors:r},E.createElement(yp,{animationId:g,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:P,onAnimationEnd:C,key:g},T=>{var O=[],k=r&&r[0],N=k?.startAngle;return r?.forEach((D,M)=>{var j=b&&b[M],U=M>0?jo(D,"paddingAngle",0):0;if(j){var K=pn(j.endAngle-j.startAngle,D.endAngle-D.startAngle,T),H=vt(vt({},D),{},{startAngle:N+U,endAngle:N+K+U});O.push(H),N=H.endAngle}else{var{endAngle:W,startAngle:re}=D,le=pn(0,W-re,T),ne=vt(vt({},D),{},{startAngle:N+U,endAngle:N+le+U});O.push(ne),N=ne.endAngle}}),n.current=O,E.createElement(Wn,null,E.createElement(O9,{sectors:O,activeShape:p,inactiveShape:f,allOtherPieProps:t}))}),E.createElement(T9,{showLabels:!S,sectors:r,props:t}),t.children)}var k9={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!hl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function M9(e){var{id:t}=e,n=qb(e,d9),{hide:r,className:i,rootTabIndex:s}=e,l=E.useMemo(()=>ov(e.children,dl),[e.children]),u=Pe(h=>DG(h,t,l)),p=E.useRef(null),f=tt("recharts-pie",i);return r||u==null?(p.current=null,E.createElement(Wn,{tabIndex:s,className:f})):E.createElement(E.Fragment,null,E.createElement(XD,{fn:v9,args:vt(vt({},e),{},{sectors:u})}),E.createElement(Wn,{tabIndex:s,className:f},E.createElement(N9,{props:vt(vt({},n),{},{sectors:u}),previousSectorsRef:p})))}function L0(e){var t=Rr(e,k9),{id:n}=t,r=qb(t,f9),i=Go(r);return E.createElement(ZD,{id:n,type:"pie"},s=>E.createElement(E.Fragment,null,E.createElement(c9,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),E.createElement(y9,Mi({},r,{id:s})),E.createElement(M9,Mi({},r,{id:s}))))}L0.displayName="Pie";function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){j9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j9(e,t,n){return(t=R9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R9(e){var t=I9(e,"string");return typeof t=="symbol"?t:t+""}function I9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L9={xAxis:{},yAxis:{},zAxis:{}},eN=dr({name:"cartesianAxis",initialState:L9,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=hw(hw({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:$9,removeXAxis:B9,addYAxis:U9,removeYAxis:z9,addZAxis:PV,removeZAxis:wV,updateYAxisWidth:G9}=eN.actions,H9=eN.reducer,q9=ee([Vt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Y9=ee([q9,Va,Ka],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),tN=()=>Pe(Y9),F9="Invariant failed";function V9(e,t){throw new Error(F9)}var K9=["x","y"];function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$0.apply(null,arguments)}function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){W9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W9(e,t,n){return(t=X9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X9(e){var t=Q9(e,"string");return typeof t=="symbol"?t:t+""}function Q9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z9(e,t){if(e==null)return{};var n,r,i=J9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function e7(e,t){var{x:n,y:r}=e,i=Z9(e,K9),s="".concat(n),l=parseInt(s,10),u="".concat(r),p=parseInt(u,10),f="".concat(t.height||i.height),h=parseInt(f,10),m="".concat(t.width||i.width),g=parseInt(m,10);return jc(jc(jc(jc(jc({},t),i),l?{x:l}:{}),p?{y:p}:{}),{},{height:h,width:g,name:t.name,radius:t.radius})}function Yb(e){return E.createElement(WD,$0({shapeType:"rectangle",propTransformer:e7,activeClassName:"recharts-active-bar"},e))}var t7=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Te(t))return t;var s=Te(r)||nn(r);return s?t(r,i):(s||V9(),n)}},n7={},nN=dr({name:"errorBars",initialState:n7,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:TV,replaceErrorBar:OV,removeErrorBar:_V}=nN.actions,r7=nN.reducer,a7=["children"];function i7(e,t){if(e==null)return{};var n,r,i=o7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var s7={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},l7=E.createContext(s7);function c7(e){var{children:t}=e,n=i7(e,a7);return E.createElement(l7.Provider,{value:n},t)}function rN(e,t){var n,r,i=Pe(f=>Bi(f,e)),s=Pe(f=>Ui(f,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:rr.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:ar.allowDataOverflow,p=l||u;return{needClip:p,needClipX:l,needClipY:u}}function u7(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=tN(),{needClipX:s,needClipY:l,needClip:u}=rN(t,n);if(!u)return null;var{x:p,y:f,width:h,height:m}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:s?p:p-h/2,y:l?f:f-m/2,width:s?h:h*2,height:l?m:m*2}))}var d7=["onMouseEnter","onMouseLeave","onClick"],f7=["value","background","tooltipPosition"],p7=["id"],h7=["onMouseEnter","onClick","onMouseLeave"];function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(null,arguments)}function gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gw(Object(n),!0).forEach(function(r){m7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m7(e,t,n){return(t=g7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kf(e,t){if(e==null)return{};var n,r,i=v7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var b7=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:dp(n,t),payload:e}]};function x7(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:dp(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function S7(e){var t=Pe($o),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:p}=s,f=Kf(s,d7),h=zb(l,r),m=Gb(u),g=Hb(p,r);if(!i||n==null)return null;var b=It(i,!1);return E.createElement(E.Fragment,null,n.map((S,A)=>{var{value:C,background:P,tooltipPosition:T}=S,O=Kf(S,f7);if(!P)return null;var k=h(S,A),N=m(S,A),D=g(S,A),M=Mn(Mn(Mn(Mn(Mn({option:i,isActive:String(A)===t},O),{},{fill:"#eee"},P),b),eu(f,S,A)),{},{onMouseEnter:k,onMouseLeave:N,onClick:D,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return E.createElement(Yb,ji({key:"background-bar-".concat(A)},M))}))}function A7(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Mn(Mn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return E.createElement(fG,{value:t?i:void 0},n)}function E7(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=Pe($o),p=Pe(ED),f=n&&String(s)===u&&(p==null||l===p),h=f?n:t;return E.createElement(Yb,ji({},r,i,{isActive:f,option:h,index:s,dataKey:l}))}function C7(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return E.createElement(Yb,ji({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function P7(e){var{data:t,props:n}=e,r=Go(n),{id:i}=r,s=Kf(r,p7),{shape:l,dataKey:u,activeBar:p}=n,{onMouseEnter:f,onClick:h,onMouseLeave:m}=n,g=Kf(n,h7),b=zb(f,u),S=Gb(m),A=Hb(h,u);return t?E.createElement(E.Fragment,null,t.map((C,P)=>E.createElement(Wn,ji({className:"recharts-bar-rectangle"},eu(g,C,P),{onMouseEnter:b(C,P),onMouseLeave:S(C,P),onClick:A(C,P),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(P)}),p?E.createElement(E7,{shape:l,activeBar:p,baseProps:s,entry:C,index:P,dataKey:u}):E.createElement(C7,{shape:l,baseProps:s,entry:C,index:P,dataKey:u})))):null}function w7(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:p,onAnimationEnd:f,onAnimationStart:h}=t,m=n.current,g=vp(t,"recharts-bar-"),[b,S]=E.useState(!1),A=!b,C=E.useCallback(()=>{typeof f=="function"&&f(),S(!1)},[f]),P=E.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return E.createElement(A7,{showLabels:A,rects:r},E.createElement(yp,{animationId:g,begin:l,duration:u,isActive:s,easing:p,onAnimationEnd:C,onAnimationStart:P,key:g},T=>{var O=T===1?r:r?.map((k,N)=>{var D=m&&m[N];if(D)return Mn(Mn({},k),{},{x:pn(D.x,k.x,T),y:pn(D.y,k.y,T),width:pn(D.width,k.width,T),height:pn(D.height,k.height,T)});if(i==="horizontal"){var M=pn(0,k.height,T);return Mn(Mn({},k),{},{y:k.y+k.height-M,height:M})}var j=pn(0,k.width,T);return Mn(Mn({},k),{},{width:j})});return T>0&&(n.current=O??null),O==null?null:E.createElement(Wn,null,E.createElement(P7,{props:t,data:O}))}),E.createElement(qD,{label:t.label}),t.children)}function T7(e){var t=E.useRef(null);return E.createElement(w7,{previousRectanglesRef:t,props:e})}var aN=0,O7=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:bt(e,t)}};class _7 extends E.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:p,id:f}=this.props;if(t||n==null)return null;var h=tt("recharts-bar",i),m=f;return E.createElement(Wn,{className:h,id:f},u&&E.createElement("defs",null,E.createElement(u7,{clipPathId:m,xAxisId:s,yAxisId:l})),E.createElement(Wn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},E.createElement(S7,{data:n,dataKey:r,background:p,allOtherBarProps:this.props}),E.createElement(T7,this.props)))}}var D7={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!hl.isSsr,legendType:"rect",minPointSize:aN,xAxisId:0,yAxisId:0};function N7(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:f,isAnimationActive:h}=e,{needClip:m}=rN(t,n),g=Tv(),b=jr(),S=ov(e.children,dl),A=Pe(T=>aH(T,t,n,b,e.id,S));if(g!=="vertical"&&g!=="horizontal")return null;var C,P=A?.[0];return P==null||P.height==null||P.width==null?C=0:C=g==="vertical"?P.height/2:P.width/2,E.createElement(c7,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:O7,errorBarOffset:C},E.createElement(_7,ji({},e,{layout:g,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:f,isAnimationActive:h})))}function k7(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:p,yAxisTicks:f,stackedData:h,displayedData:m,offset:g,cells:b,parentViewBox:S}=e,A=t==="horizontal"?u:l,C=h?A.scale.domain():null,P=K3({numericAxis:A});return m.map((T,O)=>{var k,N,D,M,j,U;h?k=G3(h[O],C):(k=bt(T,n),Array.isArray(k)||(k=[P,k]));var K=t7(r,aN)(k[1],O);if(t==="horizontal"){var H,[W,re]=[u.scale(k[0]),u.scale(k[1])];N=rC({axis:l,ticks:p,bandSize:s,offset:i.offset,entry:T,index:O}),D=(H=re??W)!==null&&H!==void 0?H:void 0,M=i.size;var le=W-re;if(j=lr(le)?0:le,U={x:N,y:g.top,width:M,height:g.height},Math.abs(K)>0&&Math.abs(j)<Math.abs(K)){var ne=tn(j||K)*(Math.abs(K)-Math.abs(j));D-=ne,j+=ne}}else{var[L,q]=[l.scale(k[0]),l.scale(k[1])];if(N=L,D=rC({axis:u,ticks:f,bandSize:s,offset:i.offset,entry:T,index:O}),M=q-L,j=i.size,U={x:g.left,y:D,width:g.width,height:j},Math.abs(K)>0&&Math.abs(M)<Math.abs(K)){var ue=tn(M||K)*(Math.abs(K)-Math.abs(M));M+=ue}}if(N==null||D==null||M==null||j==null)return null;var ye=Mn(Mn({},T),{},{x:N,y:D,width:M,height:j,value:h?k:k[1],payload:T,background:U,tooltipPosition:{x:N+M/2,y:D+j/2},parentViewBox:S},b&&b[O]&&b[O].props);return ye}).filter(Boolean)}function iN(e){var t=Rr(e,D7),n=jr();return E.createElement(ZD,{id:t.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(WG,{legendPayload:b7(t)}),E.createElement(XD,{fn:x7,args:t}),E.createElement(l9,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:V3(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),E.createElement(N7,ji({},t,{id:r}))))}iN.displayName="Bar";function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(r){M7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M7(e,t,n){return(t=j7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j7(e){var t=R7(e,"string");return typeof t=="symbol"?t:t+""}function R7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I7=(e,t)=>t,L7=(e,t,n)=>n,$7=(e,t,n,r)=>r,B7=(e,t,n,r,i)=>i,mu=ee([db,B7],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),U7=ee([mu],e=>e?.maxBarSize),z7=(e,t,n,r,i,s)=>s,vw=(e,t,n)=>{var r=n??e;if(!nn(r))return Cn(r,t,0)},G7=ee([Ve,db,I7,L7,$7],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),H7=(e,t,n,r)=>{var i=Ve(e);return i==="horizontal"?N0(e,"yAxis",n,r):N0(e,"xAxis",t,r)},q7=(e,t,n)=>{var r=Ve(e);return r==="horizontal"?xP(e,"xAxis",t):xP(e,"yAxis",n)},Y7=(e,t,n)=>{var r={},i=e.filter(Op),s=e.filter(f=>f.stackId==null),l=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),u=Object.entries(l).map(f=>{var[h,m]=f,g=m.map(S=>S.dataKey),b=vw(t,n,m[0].barSize);return{stackId:h,dataKeys:g,barSize:b}}),p=s.map(f=>{var h=[f.dataKey].filter(g=>g!=null),m=vw(t,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:m}});return[...u,...p]},F7=ee([G7,OB,q7],Y7),V7=(e,t,n,r,i)=>{var s,l,u=mu(e,t,n,r,i);if(u!=null){var p=Ve(e),f=S_(e),{maxBarSize:h}=u,m=nn(h)?f:h,g,b;return p==="horizontal"?(g=ul(e,"xAxis",t,r),b=cl(e,"xAxis",t,r)):(g=ul(e,"yAxis",n,r),b=cl(e,"yAxis",n,r)),(s=(l=Av(g,b,!0))!==null&&l!==void 0?l:m)!==null&&s!==void 0?s:0}},oN=(e,t,n,r)=>{var i=Ve(e),s,l;return i==="horizontal"?(s=ul(e,"xAxis",t,r),l=cl(e,"xAxis",t,r)):(s=ul(e,"yAxis",n,r),l=cl(e,"yAxis",n,r)),Av(s,l)};function K7(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=Cn(e,n,0,!0),u,p=[];if(ur(r[0].barSize)){var f=!1,h=n/s,m=r.reduce((P,T)=>P+(T.barSize||0),0);m+=(s-1)*l,m>=n&&(m-=(s-1)*l,l=0),m>=n&&h>0&&(f=!0,h*=.9,m=s*h);var g=(n-m)/2>>0,b={offset:g-l,size:0};u=r.reduce((P,T)=>{var O,k={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b.offset+b.size+l,size:f?h:(O=T.barSize)!==null&&O!==void 0?O:0}},N=[...P,k];return b=N[N.length-1].position,N},p)}else{var S=Cn(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var A=(n-2*S-(s-1)*l)/s;A>1&&(A>>=0);var C=ur(i)?Math.min(A,i):A;u=r.reduce((P,T,O)=>[...P,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:S+(A+l)*O+(A-C)/2,size:C}}],p)}return u}}var W7=(e,t,n,r,i,s,l)=>{var u=nn(l)?t:l,p=K7(n,r,i!==s?i:s,e,u);return i!==s&&p!=null&&(p=p.map(f=>Zd(Zd({},f),{},{position:Zd(Zd({},f.position),{},{offset:f.position.offset-i/2})}))),p},X7=ee([F7,S_,TB,A_,V7,oN,U7],W7),Q7=(e,t,n,r)=>ul(e,"xAxis",t,r),Z7=(e,t,n,r)=>ul(e,"yAxis",n,r),J7=(e,t,n,r)=>cl(e,"xAxis",t,r),eH=(e,t,n,r)=>cl(e,"yAxis",n,r),tH=ee([X7,mu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),nH=(e,t)=>{var n=lb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},rH=ee([H7,mu],nH),aH=ee([Vt,Ev,Q7,Z7,J7,eH,tH,Ve,Jv,oN,rH,mu,z7],(e,t,n,r,i,s,l,u,p,f,h,m,g)=>{var{chartData:b,dataStartIndex:S,dataEndIndex:A}=p;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||f==null)){var{data:C}=m,P;if(C!=null&&C.length>0?P=C:P=b?.slice(S,A+1),P!=null)return k7({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:P,offset:e,cells:g})}}),sN=e=>{var{chartData:t}=e,n=Ct(),r=jr();return E.useEffect(()=>r?()=>{}:(n(DP(t)),()=>{n(DP(void 0))}),[t,n,r]),null},bw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},lN=dr({name:"brush",initialState:bw,reducers:{setBrushSettings(e,t){return t.payload==null?bw:t.payload}}}),{setBrushSettings:DV}=lN.actions,iH=lN.reducer;function oH(e,t,n){return(t=sH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sH(e){var t=lH(e,"string");return typeof t=="symbol"?t:t+""}function lH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Fb{static create(t){return new Fb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}oH(Fb,"EPS",1e-4);function cH(e){return(e%180+180)%180}var uH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=cH(i),l=s*Math.PI/180,u=Math.atan(r/n),p=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(p)},dH={dots:[],areas:[],lines:[]},cN=dr({name:"referenceElements",initialState:dH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ua(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ua(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ua(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:NV,removeDot:kV,addArea:MV,removeArea:jV,addLine:RV,removeLine:IV}=cN.actions,fH=cN.reducer,pH=E.createContext(void 0),hH=e=>{var{children:t}=e,[n]=E.useState("".concat(Hc("recharts"),"-clip")),r=tN();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return E.createElement(pH.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function Ly(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function uN(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function mH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return uH(r,n)}function gH(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Wf(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function yH(e,t){return uN(e,t+1)}function vH(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,p=0,f=1,h=l,m=function(){var S=r?.[p];if(S===void 0)return{v:uN(r,f)};var A=p,C,P=()=>(C===void 0&&(C=n(S,A)),C),T=S.coordinate,O=p===0||Wf(e,T,P,h,u);O||(p=0,h=l,f+=1),O&&(h=T+e*(P()/2+i),p+=f)},g;f<=s.length;)if(g=m(),g)return g.v;return[]}function xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(n),!0).forEach(function(r){bH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bH(e,t,n){return(t=xH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xH(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AH(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:p}=t,f=function(g){var b=s[g],S,A=()=>(S===void 0&&(S=n(b,g)),S);if(g===l-1){var C=e*(b.coordinate+e*A()/2-p);s[g]=b=Sn(Sn({},b),{},{tickCoord:C>0?b.coordinate-C*e:b.coordinate})}else s[g]=b=Sn(Sn({},b),{},{tickCoord:b.coordinate});var P=Wf(e,b.tickCoord,A,u,p);P&&(p=b.tickCoord-e*(A()/2+i),s[g]=Sn(Sn({},b),{},{isShow:!0}))},h=l-1;h>=0;h--)f(h);return s}function EH(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:p,end:f}=t;if(s){var h=r[u-1],m=n(h,u-1),g=e*(h.coordinate+e*m/2-f);l[u-1]=h=Sn(Sn({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate});var b=Wf(e,h.tickCoord,()=>m,p,f);b&&(f=h.tickCoord-e*(m/2+i),l[u-1]=Sn(Sn({},h),{},{isShow:!0}))}for(var S=s?u-1:u,A=function(T){var O=l[T],k,N=()=>(k===void 0&&(k=n(O,T)),k);if(T===0){var D=e*(O.coordinate-e*N()/2-p);l[T]=O=Sn(Sn({},O),{},{tickCoord:D<0?O.coordinate-D*e:O.coordinate})}else l[T]=O=Sn(Sn({},O),{},{tickCoord:O.coordinate});var M=Wf(e,O.tickCoord,N,p,f);M&&(p=O.tickCoord+e*(N()/2+i),l[T]=Sn(Sn({},O),{},{isShow:!0}))},C=0;C<S;C++)A(C);return l}function Vb(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:p,tickFormatter:f,unit:h,angle:m}=e;if(!i||!i.length||!r)return[];if(Te(p)||hl.isSsr){var g;return(g=yH(i,Te(p)?p:0))!==null&&g!==void 0?g:[]}var b=[],S=u==="top"||u==="bottom"?"width":"height",A=h&&S==="width"?zc(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(O,k)=>{var N=typeof f=="function"?f(O.value,k):O.value;return S==="width"?mH(zc(N,{fontSize:t,letterSpacing:n}),A,m):zc(N,{fontSize:t,letterSpacing:n})[S]},P=i.length>=2?tn(i[1].coordinate-i[0].coordinate):1,T=gH(s,P,S);return p==="equidistantPreserveStart"?vH(P,T,C,i,l):(p==="preserveStart"||p==="preserveStartEnd"?b=EH(P,T,C,i,l,p==="preserveStartEnd"):b=AH(P,T,C,i,l),b.filter(O=>O.isShow))}var CH=["viewBox"],PH=["viewBox"];function Xs(){return Xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xs.apply(null,arguments)}function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(r){Kb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Aw(e,t){if(e==null)return{};var n,r,i=wH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Kb(e,t,n){return(t=TH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TH(e){var t=OH(e,"string");return typeof t=="symbol"?t:t+""}function OH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zi extends E.Component{constructor(t){super(t),this.tickRefs=E.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=Aw(t,CH),s=this.props,{viewBox:l}=s,u=Aw(s,PH);return!Ly(r,l)||!Ly(i,u)||!Ly(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:p,tickMargin:f}=this.props,h,m,g,b,S,A,C=p?-1:1,P=t.tickSize||u,T=Te(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":h=m=t.coordinate,b=r+ +!p*s,g=b-C*P,A=g-C*f,S=T;break;case"left":g=b=t.coordinate,m=n+ +!p*i,h=m-C*P,S=h-C*f,A=T;break;case"right":g=b=t.coordinate,m=n+ +p*i,h=m+C*P,S=h+C*f,A=T;break;default:h=m=t.coordinate,b=r+ +p*s,g=b+C*P,A=g+C*f,S=T;break}return{line:{x1:h,y1:g,x2:m,y2:b},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,p=Yt(Yt(Yt({},It(this.props,!1)),It(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!l||s==="bottom"&&l);p=Yt(Yt({},p),{},{x1:t,y1:n+f*i,x2:t+r,y2:n+f*i})}else{var h=+(s==="left"&&!l||s==="right"&&l);p=Yt(Yt({},p),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return E.createElement("line",Xs({},p,{className:tt("recharts-cartesian-axis-line",jo(u,"className"))}))}static renderTickItem(t,n,r){var i,s=tt(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(t))i=E.cloneElement(t,Yt(Yt({},n),{},{className:s}));else if(typeof t=="function")i=t(Yt(Yt({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=tt(l,t.className)),i=E.createElement(jp,Xs({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:p,padding:f,tickTextProps:h}=this.props,m=Vb(Yt(Yt({},this.props),{},{ticks:r}),t,n),g=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),S=Go(this.props),A=It(l,!1),C=Yt(Yt({},S),{},{fill:"none"},It(i,!1)),P=m.map((T,O)=>{var{line:k,tick:N}=this.getTickLineCoord(T),D=Yt(Yt(Yt(Yt({textAnchor:g,verticalAnchor:b},S),{},{stroke:"none",fill:s},A),N),{},{index:O,payload:T,visibleTicksCount:m.length,tickFormatter:u,padding:f},h);return E.createElement(Wn,Xs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},eu(this.props,T,O)),i&&E.createElement("line",Xs({},C,k,{className:tt("recharts-cartesian-axis-tick-line",jo(i,"className"))})),l&&zi.renderTickItem(l,D,"".concat(typeof u=="function"?u(T.value,O):T.value).concat(p||"")))});return P.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:E.createElement(Wn,{className:tt("recharts-cartesian-axis",i),ref:u=>{if(u){var p=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(p);var f=p[0];if(f){var h=window.getComputedStyle(f).fontSize,m=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),E.createElement(Yz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},E.createElement(tG,{label:this.props.label}),this.props.children))}}Kb(zi,"displayName","CartesianAxis");Kb(zi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _H=["x1","y1","x2","y2","key"],DH=["offset"],NH=["xAxisId","yAxisId"],kH=["xAxisId","yAxisId"];function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(n),!0).forEach(function(r){MH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MH(e,t,n){return(t=jH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jH(e){var t=RH(e,"string");return typeof t=="symbol"?t:t+""}function RH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _o(){return _o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_o.apply(null,arguments)}function Xf(e,t){if(e==null)return{};var n,r,i=IH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return E.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function dN(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,p=Xf(t,_H),f=Go(p),{offset:h}=f,m=Xf(f,DH);n=E.createElement("line",_o({},m,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function $H(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Xf(e,NH),p=i.map((f,h)=>{var m=En(En({},u),{},{x1:t,y1:f,x2:t+n,y2:f,key:"line-".concat(h),index:h});return dN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function BH(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Xf(e,kH),p=i.map((f,h)=>{var m=En(En({},u),{},{x1:f,y1:t,x2:f,y2:t+n,key:"line-".concat(h),index:h});return dN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function UH(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:p=!0}=e;if(!p||!t||!t.length)return null;var f=u.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var h=f.map((m,g)=>{var b=!f[g+1],S=b?i+l-m:f[g+1]-m;if(S<=0)return null;var A=g%t.length;return E.createElement("rect",{key:"react-".concat(g),y:m,x:r,height:S,width:s,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function zH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:p}=e;if(!t||!n||!n.length)return null;var f=p.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var h=f.map((m,g)=>{var b=!f[g+1],S=b?i+l-m:f[g+1]-m;if(S<=0)return null;var A=g%n.length;return E.createElement("rect",{key:"react-".concat(g),x:m,y:s,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var GH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return sO(Vb(En(En(En({},zi.defaultProps),n),{},{ticks:lO(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},HH=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return sO(Vb(En(En(En({},zi.defaultProps),n),{},{ticks:lO(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},qH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function fN(e){var t=Pv(),n=wv(),r=fO(),i=En(En({},Rr(e,qH)),{},{x:Te(e.x)?e.x:r.left,y:Te(e.y)?e.y:r.top,width:Te(e.width)?e.width:r.width,height:Te(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:p,width:f,height:h,syncWithTicks:m,horizontalValues:g,verticalValues:b}=i,S=jr(),A=Pe(U=>SP(U,"xAxis",s,S)),C=Pe(U=>SP(U,"yAxis",l,S));if(!Te(f)||f<=0||!Te(h)||h<=0||!Te(u)||u!==+u||!Te(p)||p!==+p)return null;var P=i.verticalCoordinatesGenerator||GH,T=i.horizontalCoordinatesGenerator||HH,{horizontalPoints:O,verticalPoints:k}=i;if((!O||!O.length)&&typeof T=="function"){var N=g&&g.length,D=T({yAxis:C?En(En({},C),{},{ticks:N?g:C.ticks}):void 0,width:t,height:n,offset:r},N?!0:m);Uc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(O=D)}if((!k||!k.length)&&typeof P=="function"){var M=b&&b.length,j=P({xAxis:A?En(En({},A),{},{ticks:M?b:A.ticks}):void 0,width:t,height:n,offset:r},M?!0:m);Uc(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(k=j)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(LH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(UH,_o({},i,{horizontalPoints:O})),E.createElement(zH,_o({},i,{verticalPoints:k})),E.createElement($H,_o({},i,{offset:r,horizontalPoints:O,xAxis:A,yAxis:C})),E.createElement(BH,_o({},i,{offset:r,verticalPoints:k,xAxis:A,yAxis:C})))}fN.displayName="CartesianGrid";var YH=["children"],FH=["dangerouslySetInnerHTML","ticks"],VH=["id"];function pN(e,t,n){return(t=KH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B0.apply(null,arguments)}function U0(e,t){if(e==null)return{};var n,r,i=XH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function QH(e){var t=Ct(),n=E.useMemo(()=>{var{children:r}=e,i=U0(e,YH);return i},[e]);return E.useEffect(()=>(t($9(n)),()=>{t(B9(n))}),[n,t]),e.children}var ZH=e=>{var{xAxisId:t,className:n}=e,r=Pe(Ev),i=jr(),s="xAxis",l=Pe(C=>Sl(C,s,t,i)),u=Pe(C=>aD(C,s,t,i)),p=Pe(C=>eD(C,t)),f=Pe(C=>v6(C,t)),h=Pe(C=>N_(C,t));if(p==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:g}=e,b=U0(e,FH),{id:S}=h,A=U0(h,VH);return E.createElement(zi,B0({},b,A,{scale:l,x:f.x,y:f.y,width:p.width,height:p.height,className:tt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},JH=e=>{var t,n,r,i,s;return E.createElement(QH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},E.createElement(ZH,e))};class Wb extends E.Component{render(){return E.createElement(JH,this.props)}}pN(Wb,"displayName","XAxis");pN(Wb,"defaultProps",{allowDataOverflow:rr.allowDataOverflow,allowDecimals:rr.allowDecimals,allowDuplicatedCategory:rr.allowDuplicatedCategory,height:rr.height,hide:!1,mirror:rr.mirror,orientation:rr.orientation,padding:rr.padding,reversed:rr.reversed,scale:rr.scale,tickCount:rr.tickCount,type:rr.type,xAxisId:0});var eq=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,p=i+s,f=l+p+u+(n?r:0);return Math.round(f)}return 0},tq=["dangerouslySetInnerHTML","ticks"],nq=["id"];function hN(e,t,n){return(t=rq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rq(e){var t=aq(e,"string");return typeof t=="symbol"?t:t+""}function aq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z0.apply(null,arguments)}function Cw(e,t){if(e==null)return{};var n,r,i=iq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function oq(e){var t=Ct();return E.useEffect(()=>(t(U9(e)),()=>{t(z9(e))}),[e,t]),null}var sq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=E.useRef(null),u=E.useRef(null),p=Pe(Ev),f=jr(),h=Ct(),m="yAxis",g=Pe(D=>Sl(D,m,n,f)),b=Pe(D=>tD(D,n)),S=Pe(D=>b6(D,n)),A=Pe(D=>aD(D,m,n,f)),C=Pe(D=>k_(D,n));if(E.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!b||Ib(s)||E.isValidElement(s)||C==null)){var M=l.current,j=M==null||(D=M.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:U,tickMargin:K}=M.props,H=eq({ticks:j,label:u.current,labelGapWithTick:5,tickSize:U,tickMargin:K});Math.round(b.width)!==Math.round(H)&&h(G9({id:n,width:H}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,b?.width,b,h,s,n,i]),b==null||S==null||C==null)return null;var{dangerouslySetInnerHTML:P,ticks:T}=e,O=Cw(e,tq),{id:k}=C,N=Cw(C,nq);return E.createElement(zi,z0({},O,N,{ref:l,labelRef:u,scale:g,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:b.width,height:b.height,className:tt("recharts-".concat(m," ").concat(m),r),viewBox:p,ticks:A}))},lq=e=>{var t,n,r,i,s;return E.createElement(E.Fragment,null,E.createElement(oq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),E.createElement(sq,e))},cq={allowDataOverflow:ar.allowDataOverflow,allowDecimals:ar.allowDecimals,allowDuplicatedCategory:ar.allowDuplicatedCategory,hide:!1,mirror:ar.mirror,orientation:ar.orientation,padding:ar.padding,reversed:ar.reversed,scale:ar.scale,tickCount:ar.tickCount,type:ar.type,width:ar.width,yAxisId:0};class Xb extends E.Component{render(){return E.createElement(lq,this.props)}}hN(Xb,"displayName","YAxis");hN(Xb,"defaultProps",cq);var $y={exports:{}},By={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw;function uq(){if(Pw)return By;Pw=1;var e=fl();function t(p,f){return p===f&&(p!==0||1/p===1/f)||p!==p&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return By.useSyncExternalStoreWithSelector=function(p,f,h,m,g){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function C(N){if(!P){if(P=!0,T=N,N=m(N),g!==void 0&&S.hasValue){var D=S.value;if(g(D,N))return O=D}return O=N}if(D=O,n(T,N))return D;var M=m(N);return g!==void 0&&g(D,M)?(T=N,D):(T=N,O=M)}var P=!1,T,O,k=h===void 0?null:h;return[function(){return C(f())},k===null?void 0:function(){return C(k())}]},[f,h,m,g]);var A=r(p,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},By}var ww;function dq(){return ww||(ww=1,$y.exports=uq()),$y.exports}dq();function fq(e){e()}function pq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){fq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Tw={notify(){},get:()=>[]};function hq(e,t){let n,r=Tw,i=0,s=!1;function l(A){h();const C=r.subscribe(A);let P=!1;return()=>{P||(P=!0,C(),m())}}function u(){r.notify()}function p(){S.onStateChange&&S.onStateChange()}function f(){return s}function h(){i++,n||(n=e.subscribe(p),r=pq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Tw)}function g(){s||(s=!0,h())}function b(){s&&(s=!1,m())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:p,isSubscribed:f,trySubscribe:g,tryUnsubscribe:b,getListeners:()=>r};return S}var mq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gq=mq(),yq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",vq=yq(),bq=()=>gq||vq?E.useLayoutEffect:E.useEffect,xq=bq(),Sq=Symbol.for("react-redux-context"),Aq=typeof globalThis<"u"?globalThis:{};function Eq(){if(!E.createContext)return{};const e=Aq[Sq]??=new Map;let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var Cq=Eq();function Pq(e){const{children:t,context:n,serverState:r,store:i}=e,s=E.useMemo(()=>{const p=hq(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);xq(()=>{const{subscription:p}=s;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),l!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[s,l]);const u=n||Cq;return E.createElement(u.Provider,{value:s},t)}var wq=Pq,Tq=(e,t)=>t,Qb=ee([Tq,Ve,O_,Wt,bD,Xa,EU,Vt],OU),Zb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},mN=kr("mouseClick"),gN=nu();gN.startListening({actionCreator:mN,effect:(e,t)=>{var n=e.payload,r=Qb(t.getState(),Zb(n));r?.activeIndex!=null&&t.dispatch(k6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var G0=kr("mouseMove"),yN=nu();yN.startListening({actionCreator:G0,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Tb(r,r.tooltip.settings.shared),s=Qb(r,Zb(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(fD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(dD()))}});function Oq(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Ow={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},vN=dr({name:"rootProps",initialState:Ow,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:Ow.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),_q=vN.reducer,{updateOptions:Dq}=vN.actions,bN=dr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Nq}=bN.actions,kq=bN.reducer,xN=kr("keyDown"),SN=kr("focus"),Jb=nu();Jb.startListening({actionCreator:xN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(Ob(i,El(n))),u=Xa(n);if(s==="Enter"){var p=qf(n,"axis","hover",String(i.index));t.dispatch(M0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:p}));return}var f=E6(n),h=f==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=l+m*h;if(!(u==null||g>=u.length||g<0)){var b=qf(n,"axis","hover",String(g));t.dispatch(M0({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});Jb.startListening({actionCreator:SN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=qf(n,"axis","hover",String(s));t.dispatch(M0({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Or=kr("externalEvent"),AN=nu();AN.startListening({actionCreator:Or,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:hU(n),activeDataKey:ED(n),activeIndex:$o(n),activeLabel:AD(n),activeTooltipIndex:$o(n),isTooltipActive:mU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var Mq=ee([Al],e=>e.tooltipItemPayloads),jq=ee([Mq,pu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),EN=kr("touchMove"),CN=nu();CN.startListening({actionCreator:EN,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Tb(r,r.tooltip.settings.shared);if(i==="axis"){var s=Qb(r,Zb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(fD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],p=document.elementFromPoint(u.clientX,u.clientY);if(!p||!p.getAttribute)return;var f=p.getAttribute(uO),h=(l=p.getAttribute(dO))!==null&&l!==void 0?l:void 0,m=jq(t.getState(),f,h);t.dispatch(uD({activeDataKey:h,activeIndex:f,activeCoordinate:m}))}}});var Rq=I2({brush:iH,cartesianAxis:H9,chartData:qU,errorBars:r7,graphicalItems:s9,layout:w3,legend:g5,options:BU,polarAxis:EG,polarOptions:kq,referenceElements:fH,rootProps:_q,tooltip:M6}),Iq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return QL({reducer:Rq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([gN.middleware,yN.middleware,Jb.middleware,AN.middleware,CN.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Oq},name:"recharts-".concat(n)}})};function PN(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=jr(),s=E.useRef(null);if(i)return n;s.current==null&&(s.current=Iq(t,r));var l=gv;return E.createElement(wq,{context:l,store:s.current},n)}function wN(e){var{layout:t,width:n,height:r,margin:i}=e,s=Ct(),l=jr();return E.useEffect(()=>{l||(s(E3(t)),s(C3({width:n,height:r})),s(A3(i)))},[s,l,t,n,r,i]),null}function TN(e){var t=Ct();return E.useEffect(()=>{t(Dq(e))},[t,e]),null}var Lq=["children"];function $q(e,t){if(e==null)return{};var n,r,i=Bq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qf.apply(null,arguments)}var Uq={width:"100%",height:"100%"},zq=E.forwardRef((e,t)=>{var n=Pv(),r=wv(),i=gO();if(!al(n)||!al(r))return null;var{children:s,otherAttributes:l,title:u,desc:p}=e,f,h;return typeof l.tabIndex=="number"?f=l.tabIndex:f=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,E.createElement(sv,Qf({},l,{title:u,desc:p,role:h,tabIndex:f,width:n,height:r,style:Uq,ref:t}),s)}),Gq=e=>{var{children:t}=e,n=Pe(mp);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return E.createElement(sv,{width:r,height:i,x:l,y:s},t)},_w=E.forwardRef((e,t)=>{var{children:n}=e,r=$q(e,Lq),i=jr();return i?E.createElement(Gq,null,n):E.createElement(zq,Qf({ref:t},r),n)});function Hq(){var e=Ct(),[t,n]=E.useState(null),r=Pe(t5);return E.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;ur(s)&&s!==r&&e(P3(s))}},[t,e,r]),n}function Dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dw(Object(n),!0).forEach(function(r){Yq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yq(e,t,n){return(t=Fq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fq(e){var t=Vq(e,"string");return typeof t=="symbol"?t:t+""}function Vq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kq=E.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:p,onMouseEnter:f,onMouseLeave:h,onMouseMove:m,onMouseUp:g,onTouchEnd:b,onTouchMove:S,onTouchStart:A,style:C,width:P}=e,T=Ct(),[O,k]=E.useState(null),[N,D]=E.useState(null);JU();var M=Hq(),j=E.useCallback(X=>{M(X),typeof t=="function"&&t(X),k(X),D(X)},[M,t,k,D]),U=E.useCallback(X=>{T(mN(X)),T(Or({handler:s,reactEvent:X}))},[T,s]),K=E.useCallback(X=>{T(G0(X)),T(Or({handler:f,reactEvent:X}))},[T,f]),H=E.useCallback(X=>{T(dD()),T(Or({handler:h,reactEvent:X}))},[T,h]),W=E.useCallback(X=>{T(G0(X)),T(Or({handler:m,reactEvent:X}))},[T,m]),re=E.useCallback(()=>{T(SN())},[T]),le=E.useCallback(X=>{T(xN(X.key))},[T]),ne=E.useCallback(X=>{T(Or({handler:l,reactEvent:X}))},[T,l]),L=E.useCallback(X=>{T(Or({handler:u,reactEvent:X}))},[T,u]),q=E.useCallback(X=>{T(Or({handler:p,reactEvent:X}))},[T,p]),ue=E.useCallback(X=>{T(Or({handler:g,reactEvent:X}))},[T,g]),ye=E.useCallback(X=>{T(Or({handler:A,reactEvent:X}))},[T,A]),R=E.useCallback(X=>{T(EN(X)),T(Or({handler:S,reactEvent:X}))},[T,S]),F=E.useCallback(X=>{T(Or({handler:b,reactEvent:X}))},[T,b]);return E.createElement(_D.Provider,{value:O},E.createElement(r2.Provider,{value:N},E.createElement("div",{className:tt("recharts-wrapper",r),style:qq({position:"relative",cursor:"default",width:P,height:i},C),onClick:U,onContextMenu:ne,onDoubleClick:L,onFocus:re,onKeyDown:le,onMouseDown:q,onMouseEnter:K,onMouseLeave:H,onMouseMove:W,onMouseUp:ue,onTouchEnd:F,onTouchMove:R,onTouchStart:ye,ref:j},n)))}),Wq=["children","className","width","height","style","compact","title","desc"];function Xq(e,t){if(e==null)return{};var n,r,i=Qq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ON=E.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:p,desc:f}=e,h=Xq(e,Wq),m=Go(h);return u?E.createElement(_w,{otherAttributes:m,title:p,desc:f},n):E.createElement(Kq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},E.createElement(_w,{otherAttributes:m,title:p,desc:f,ref:t},E.createElement(hH,null,n)))}),Zq=["width","height"];function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H0.apply(null,arguments)}function Jq(e,t){if(e==null)return{};var n,r,i=eY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tY={top:5,right:5,bottom:5,left:5},nY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tY,reverseStackOrder:!1,syncMethod:"index"},rY=E.forwardRef(function(t,n){var r,i=Rr(t.categoricalChartProps,nY),{width:s,height:l}=i,u=Jq(i,Zq);if(!al(s)||!al(l))return null;var{chartName:p,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,categoricalChartProps:g}=t,b={chartName:p,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return E.createElement(PN,{preloadedState:{options:b},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:p},E.createElement(sN,{chartData:g.data}),E.createElement(wN,{width:s,height:l,layout:i.layout,margin:i.margin}),E.createElement(TN,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(ON,H0({},u,{width:s,height:l,ref:n})))}),aY=["axis","item"],iY=E.forwardRef((e,t)=>E.createElement(rY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aY,tooltipPayloadSearcher:DD,categoricalChartProps:e,ref:t}));function oY(e){var t=Ct();return E.useEffect(()=>{t(Nq(e))},[t,e]),null}var sY=["width","height","layout"];function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q0.apply(null,arguments)}function lY(e,t){if(e==null)return{};var n,r,i=cY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uY={top:5,right:5,bottom:5,left:5},dY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},fY=E.forwardRef(function(t,n){var r,i=Rr(t.categoricalChartProps,dY),{width:s,height:l,layout:u}=i,p=lY(i,sY);if(!al(s)||!al(l))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g}=t,b={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return E.createElement(PN,{preloadedState:{options:b},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},E.createElement(sN,{chartData:i.data}),E.createElement(wN,{width:s,height:l,layout:u,margin:i.margin}),E.createElement(TN,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(oY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(ON,q0({width:s,height:l},p,{ref:n})))}),pY=["item"],hY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Nw=E.forwardRef((e,t)=>{var n=Rr(e,hY);return E.createElement(fY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:pY,tooltipPayloadSearcher:DD,categoricalChartProps:n,ref:t})});const Vo=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i,scale:s=1})=>{const{name:l,cost:u,image:p,description:f,type:h,effect:m}=e,g=m?.goAgain,b=s!==1?{transform:`scale(${s})`,transformOrigin:"center center"}:{};return v.jsx("div",{onClick:S=>{S.stopPropagation(),(n||i)&&t(e)},className:`
        w-[225px] h-[275px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${n||i?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"opacity-60":""}
        ${i?"ring-4 ring-red-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...b},children:v.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-purple-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("div",{className:"absolute inset-0 bg-slate-900"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center py-1 px-3 bg-black/40 flex-shrink-0 h-8",children:[v.jsx("div",{className:"overflow-hidden text-center min-w-0",children:v.jsx("span",{className:"font-orbitron text-sm uppercase tracking-widest text-white inline-block truncate max-w-full",children:l})}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full flex-shrink-0",children:[v.jsx(hf,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:u})]})]}),v.jsx("div",{className:"p-1 flex-shrink-0",children:v.jsx("div",{className:"relative h-20 rounded border border-purple-400/50 overflow-hidden",children:v.jsx("img",{src:p,alt:l,className:"w-full h-full object-cover object-center",style:{objectFit:"cover"}})})}),v.jsx("div",{className:"mx-1 mb-1 flex-grow bg-black/60 backdrop-blur-sm border border-purple-800/70 p-2 overflow-y-auto rounded-md",children:v.jsx("p",{className:"text-sm text-gray-400 leading-tight text-center font-exo font-normal",children:f})}),v.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] gap-2 items-center px-2 border-t border-purple-800/70 flex-shrink-0 h-6 mt-auto",children:[v.jsx("div",{className:"w-4"}),v.jsx("div",{className:"flex items-center justify-center",children:v.jsxs("span",{className:"text-[10px] text-purple-400 uppercase tracking-widest font-semibold",children:[h," Card"]})}),v.jsx("div",{className:"w-4 flex items-center justify-center",children:g&&v.jsx(tR,{size:14,className:"text-cyan-400",style:{marginLeft:"-8px"}})})]})]})]})})},mY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{onClick:n=>n.stopPropagation(),children:v.jsx(Vo,{card:e,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1,scale:1.5})})}):null,gY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:s})=>{const[l,u]=E.useState(null),[p,f]=E.useState(!1),[h,m]=E.useState(!1),[g,b]=E.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,A]=E.useState(!1),C=E.useRef(null),[P,T]=E.useState({key:"name",direction:"ascending"}),[O,k]=E.useState("cost"),[N,D]=E.useState(!0),M=E.useMemo(()=>{const z=te=>te?te.replace(/_/g," ").toLowerCase().split(" ").map(pe=>pe.charAt(0).toUpperCase()+pe.slice(1)).join(" "):"";return t.map(te=>{const ve=[],pe=te.effect;if(pe.type==="REPEATING_EFFECT")ve.push(z(pe.type)),pe.effects&&Array.isArray(pe.effects)&&pe.effects.forEach(de=>{de.type&&ve.push(z(de.type))});else if(pe.type==="MODIFY_DRONE_BASE"&&pe.mod){const de=pe.mod.stat,be=pe.mod.value;de==="attack"?ve.push(be>0?"Attack Buff":"Attack Debuff"):de==="speed"?ve.push(be>0?"Speed Buff":"Speed Debuff"):de==="shields"?ve.push(be>0?"Shield Buff":"Shield Debuff"):de==="cost"?ve.push(be<0?"Cost Reduction":"Cost Increase"):de==="limit"?ve.push(be>0?"Limit Buff":"Limit Debuff"):de==="ability"?(ve.push("Ability Grant"),pe.mod.abilityToAdd&&pe.mod.abilityToAdd.name&&ve.push(pe.mod.abilityToAdd.name)):ve.push(z(`${de} Modification`))}else if(pe.type==="MODIFY_STAT"&&pe.mod){const de=pe.mod.stat,be=pe.mod.value;pe.mod.type,de==="attack"?ve.push(be>0?"Attack Buff":"Attack Debuff"):de==="speed"?ve.push(be>0?"Speed Buff":"Speed Debuff"):de==="shields"?ve.push(be>0?"Shield Buff":"Shield Debuff"):ve.push(be>0?`${de} Buff`:`${de} Debuff`)}else pe.type==="SEARCH_AND_DRAW"?(ve.push(z(pe.type)),ve.push("Draw")):pe.type&&ve.push(z(pe.type));pe.goAgain&&ve.push("Go Again"),pe.damageType==="PIERCING"&&ve.push("Piercing"),pe.mod?.type&&ve.push(z(pe.mod.type));const oe=(()=>{if(te.targeting){const de=z(te.targeting.type);if(te.targeting.affinity){const be=te.targeting.affinity.charAt(0)+te.targeting.affinity.slice(1).toLowerCase();return`${de} (${be})`}return de}else if(pe.type==="MULTI_MOVE"&&pe.source){const de=pe.source.location||"Any",be=pe.source.affinity||"Any",fe=be.charAt(0).toUpperCase()+be.slice(1).toLowerCase();return`${z(de)} (${fe})`}else if(pe.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...te,keywords:ve,targetingText:oe}})},[t]),j=E.useMemo(()=>{const z=new Set,te=new Set,ve=new Set;M.forEach(oe=>{z.add(oe.cost),te.add(oe.targetingText),oe.keywords.forEach(de=>ve.add(de))});const pe=Array.from(z);return{minCost:Math.min(...pe),maxCost:Math.max(...pe),targets:["all",...Array.from(te).sort()],abilities:Array.from(ve).sort()}},[M]);E.useEffect(()=>{j.minCost!==1/0&&j.maxCost!==-1/0&&b(z=>({...z,cost:{min:j.minCost,max:j.maxCost}}))},[j.minCost,j.maxCost]);const{cardCount:U,deckListForDisplay:K,baseCardCounts:H}=E.useMemo(()=>{const z={};let te=0;Object.entries(n).forEach(([pe,oe])=>{if(oe>0){te+=oe;const de=M.find(be=>be.id===pe);if(de){const be=de.baseCardId;z[be]=(z[be]||0)+oe}}});const ve=Object.entries(n).filter(([,pe])=>pe>0).map(([pe,oe])=>({...M.find(be=>be.id===pe),quantity:oe})).sort((pe,oe)=>pe.name.localeCompare(oe.name));return{cardCount:te,deckListForDisplay:ve,baseCardCounts:z}},[n,M]),W=U>=40,re=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],le=E.useMemo(()=>{const z={};K.forEach(oe=>{const de=oe.cost||0;z[de]=(z[de]||0)+oe.quantity});const te=Object.entries(z).map(([oe,de])=>({name:`${oe}`,count:de})).sort((oe,de)=>parseInt(oe.name)-parseInt(de.name)),ve={};K.forEach(oe=>{oe.keywords&&oe.keywords.forEach(de=>{ve[de]=(ve[de]||0)+oe.quantity})});const pe=Object.entries(ve).map(([oe,de])=>({name:oe,value:de})).sort((oe,de)=>de.value-oe.value);return{barChartData:te,pieChartData:pe}},[K]),ne=E.useMemo(()=>{let z=[...M].filter(te=>te.cost<g.cost.min||te.cost>g.cost.max||g.target!=="all"&&te.targetingText!==g.target||g.type!=="all"&&te.type!==g.type?!1:g.abilities.length>0?g.abilities.every(ve=>te.keywords.includes(ve)):!(g.hideEnhanced&&te.id.endsWith("_ENHANCED")));return P.key!==null&&z.sort((te,ve)=>{const pe=te[P.key],oe=ve[P.key];if(pe==null&&oe==null)return 0;if(pe==null)return 1;if(oe==null)return-1;const de=String(pe).toLowerCase(),be=String(oe).toLowerCase();return de<be?P.direction==="ascending"?-1:1:de>be?P.direction==="ascending"?1:-1:te.id.localeCompare(ve.id)}),z},[M,g,P]),L=z=>{let te="ascending";P.key===z&&P.direction==="ascending"&&(te="descending"),T({key:z,direction:te})},q=(z,te)=>{b(ve=>({...ve,[z]:te}))},ue=z=>{b(te=>{const ve=te.abilities.includes(z)?te.abilities.filter(pe=>pe!==z):[...te.abilities,z];return{...te,abilities:ve}})},ye=()=>{b({cost:{min:j.minCost,max:j.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),A(!1)},R=()=>{Object.keys(n).forEach(z=>{n[z]>0&&r(z,0)})};E.useEffect(()=>{const z=te=>{C.current&&!C.current.contains(te.target)&&A(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const F=Math.PI/180,X=({cx:z,cy:te,midAngle:ve,outerRadius:pe,fill:oe,name:de,value:be})=>{const fe=Math.sin(-F*ve),Qe=Math.cos(-F*ve),Ge=z+(pe+5)*Qe,Bt=te+(pe+5)*fe,mt=z+(pe+15)*Qe,pt=te+(pe+15)*fe,fr=mt+(Qe>=0?1:-1)*12,Kr=pt,Wo=Qe>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${Ge},${Bt}L${mt},${pt}L${fr},${Kr}`,stroke:oe,fill:"none"}),v.jsx("circle",{cx:fr,cy:Kr,r:2,fill:oe,stroke:"none"}),v.jsx("text",{x:fr+(Qe>=0?1:-1)*8,y:Kr,dy:4,textAnchor:Wo,fill:"#9CA3AF",fontSize:"11px",children:`${de} (${be})`})]})},ae=()=>{const[z,te]=E.useState(""),ve=E.useRef(null),pe=E.useMemo(()=>Object.entries(n).map(([de,be])=>`${de}:${be}`).join(","),[n]),oe=()=>{ve.current.select(),document.execCommand("copy"),te("Copied!"),setTimeout(()=>te(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>f(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:de=>de.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:ve,readOnly:!0,value:pe,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:z}),v.jsxs("button",{onClick:oe,className:"btn-confirm flex items-center gap-2",children:[v.jsx(tv,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>f(!1),className:"btn-cancel flex items-center gap-2",children:[v.jsx(Ln,{size:16})," Close"]})]})]})})},me=()=>{const[z,te]=E.useState(""),[ve,pe]=E.useState(""),oe=()=>{pe("");const de=s(z);de.success?m(!1):pe(de.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:de=>de.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:z,onChange:de=>te(de.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),ve&&v.jsx("p",{className:"text-red-500 mt-2",children:ve}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:oe,className:"btn-confirm",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[l&&v.jsx(mY,{card:l,onClose:()=>u(null)}),p&&v.jsx(ae,{}),h&&v.jsx(me,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"btn-utility flex items-center gap-2",children:[v.jsx(fR,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>f(!0),className:"btn-utility flex items-center gap-2",children:[v.jsx(Vj,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:ye,className:"btn-reset",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",g.cost.min," - ",g.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:j.minCost,max:j.maxCost,value:g.cost.min,onChange:z=>q("cost",{...g.cost,min:Math.min(parseInt(z.target.value),g.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:j.minCost,max:j.maxCost,value:g.cost.max,onChange:z=>q("cost",{...g.cost,max:Math.max(parseInt(z.target.value),g.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:C,children:[v.jsx("button",{onClick:()=>A(!S),className:"filter-select w-full text-left h-full",children:g.abilities.length===0?"Select Abilities":`${g.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:j.abilities.map(z=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.abilities.includes(z),onChange:()=>ue(z),className:"mr-2"}),z]},z))})]}),v.jsxs("select",{onChange:z=>q("type",z.target.value),value:g.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.hideEnhanced,onChange:z=>q("hideEnhanced",z.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("name"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",P.key==="name"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("type"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",P.key==="type"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",P.key==="cost"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("description"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",P.key==="description"&&(P.direction==="ascending"?" ▲":" ▼")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:ne.map((z,te)=>{const ve=n[z.id]||0,pe=H[z.baseCardId]||0,oe=z.maxInDeck;return v.jsxs("tr",{className:z.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(NA,{size:18})})}),v.jsx("td",{className:"font-bold",children:z.name}),v.jsx("td",{className:`font-semibold ${z.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:z.type}),v.jsx("td",{children:z.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:z.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:z.keywords.map(de=>v.jsx("span",{className:"ability-chip",children:de},de))})}),v.jsx("td",{className:"text-xs",children:z.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):z.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:oe+1}).map((de,be)=>{const fe=be===ve,Qe=oe-(pe-ve),Ge=be>Qe;return v.jsx("button",{onClick:()=>r(z.id,be),className:`quantity-btn ${fe?"selected":""}`,disabled:Ge,children:be},be)})})})]},`${z.id}-${te}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${W?"text-green-400":"text-white"}`,children:["Your Deck (",U,"/40)"]}),v.jsx("button",{onClick:R,className:"btn-reset",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:K.length>0?K.map(z=>{const te=H[z.baseCardId]>=z.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(NA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:z.name,children:z.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(z.id,z.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",z.quantity]}),v.jsx("button",{onClick:()=>r(z.id,z.quantity+1),disabled:te,className:"deck-edit-btn",children:"+"})]})]},z.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),U>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!N),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(sf,{size:20,className:`transition-transform duration-300 ${N?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${N?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>k("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>k("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>k("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[O==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(Oy,{width:"100%",height:"100%",children:v.jsxs(iY,{data:le.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(fN,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(Wb,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(Xb,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(Ay,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(iN,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),O==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(Oy,{width:"100%",height:"100%",children:v.jsxs(Nw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(L0,{data:[{name:"Action Cards",value:K.filter(z=>z.type==="Action").reduce((z,te)=>z+te.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:K.filter(z=>z.type==="Upgrade").reduce((z,te)=>z+te.quantity,0),color:"#c084fc"}].filter(z=>z.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:z,value:te,percent:ve})=>`${z}: ${te} (${(ve*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:K.filter(z=>z.type==="Action").reduce((z,te)=>z+te.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:K.filter(z=>z.type==="Upgrade").reduce((z,te)=>z+te.quantity,0),color:"#c084fc"}].filter(z=>z.value>0).map((z,te)=>v.jsx(dl,{fill:z.color},`cell-${te}`))}),v.jsx(Ay,{}),v.jsx(gp,{})]})})]}),O==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(Oy,{width:"100%",height:"100%",children:v.jsxs(Nw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(L0,{data:le.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:X,outerRadius:60,dataKey:"value",children:le.pieChartData.map((z,te)=>v.jsx(dl,{fill:re[te%re.length]},`cell-${te}`))}),v.jsx(Ay,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!W,className:"btn-confirm w-full p-4 mt-4 text-lg font-bold font-orbitron",children:"Confirm Deck"})]})]})]})};function yY(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getOpponentPlayerState:s,addLogEntry:l}=Ri(),{turnPhase:u}=e,p=i();s();const[f,h]=E.useState(!1),[m,g]=E.useState({}),b=async N=>{if(u==="deckSelection")if(console.log("🔧 handleDeckChoice called with:",N),N==="standard"){const D=t(),M=ke.buildDeckFromList(Ks),j={phase:"deckSelection",playerId:D,actionData:{deck:M}};if(e.gameMode==="guest"){console.log("[GUEST] Sending deck selection commitment to host"),jn.sendActionToHost("commitment",j);return}const U=await Re.actionProcessor.processCommitment(j);if(!U.success){console.error("❌ Deck selection submission failed:",U.error);return}console.log("✅ Standard deck selection submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else N==="custom"&&(console.log("🔧 Opening custom deck builder"),h(!0))},S=(N,D)=>{g(M=>({...M,[N]:D}))},A=async()=>{console.log("🔧 Confirming custom deck:",m);const N=[];Object.entries(m).forEach(([K,H])=>{for(let W=0;W<H;W++){const re=Jd.find(le=>le.id===K);re&&N.push(re)}});const D=N.sort(()=>.5-Math.random());console.log(`🔀 Custom deck shuffled: ${D.length} cards`);const j={phase:"deckSelection",playerId:t(),actionData:{deck:D}};if(e.gameMode==="guest"){console.log("[GUEST] Sending custom deck commitment to host"),jn.sendActionToHost("commitment",j),h(!1);return}const U=await Re.actionProcessor.processCommitment(j);if(!U.success){console.error("❌ Custom deck submission failed:",U.error);return}console.log("✅ Custom deck submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected a Custom Deck."},"handleConfirmDeck"),h(!1)},C=N=>{try{const D={},M=N.split(",");for(const j of M){const[U,K]=j.split(":"),H=parseInt(K,10);if(!U||isNaN(H))return{success:!1,message:"Invalid deck code format."};if(!Jd.find(re=>re.id===U))return{success:!1,message:`Card ${U} not found.`};D[U]=H}return g(D),{success:!0}}catch(D){return console.error("Error importing deck:",D),{success:!1,message:"Failed to parse deck code."}}};E.useEffect(()=>{e.gameMode==="guest"&&Re.emit("render_complete")},[e,Re]);const P=t(),T=n(),O=e.commitments?.deckSelection?.[P]?.completed||!1,k=e.commitments?.deckSelection?.[T]?.completed||!1;return console.log("🔍 [DECK SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:P,opponentPlayerId:T,localPlayerCompleted:O,opponentCompleted:k,fullCommitmentsObject:e.commitments?.deckSelection,turnPhase:u,localPlayerDeckLength:p.deck?.length,willShowWaiting:r()&&O&&!k}),r()&&O&&!k?v.jsx(nv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):f?v.jsx(gY,{selectedDrones:p.dronePool,fullCardCollection:Jd,deck:m,onDeckChange:S,onConfirmDeck:A,onImportDeck:C}):v.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative z-10",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>b("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"btn-confirm mt-6",children:"Select"})]}),v.jsxs("div",{onClick:()=>b("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const vY=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Zf=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:p,isHovered:f,onMouseEnter:h,onMouseLeave:m,isCardTarget:g,isInMiddleLane:b,reallocationState:S,gameEngine:A,turnPhase:C,isMyTurn:P,passInfo:T,getLocalPlayerId:O,localPlayerState:k,shipAbilityMode:N,sectionRef:D})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const M=A.getShipStatus(t),j=M==="critical"?"bg-red-900/60":M==="damaged"?"bg-yellow-900/50":"bg-black/60";let U=M==="critical"?"border-red-500":M==="damaged"?"border-yellow-500":p?"border-pink-500":"border-cyan-500";const K=p?"shadow-pink-500/20":"shadow-cyan-500/20",H=f?"scale-105 shadow-xl":"";let W="";if(S)switch(S){case"can-remove":U="border-orange-400",W="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":U="border-orange-600",W="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":U="border-gray-600",W="opacity-50";break;case"can-add":U="border-green-400",W="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":U="border-green-600",W="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":U="border-gray-600",W="opacity-50";break}const re=g?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",le=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,L=>L.toUpperCase()),ne={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{ref:D,className:`
        relative rounded-xl shadow-lg ${K} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${U}
        ${u?`cursor-pointer ${H}`:""}
        ${re}
        ${W}
      `,style:ne,onClick:s,onMouseEnter:h,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${j}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-2 h-full",children:[v.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:le}),v.jsx("div",{className:`flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${M==="healthy"?"bg-green-500/20 text-green-300":M==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:M.charAt(0).toUpperCase()+M.slice(1)})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([L,q])=>{const ue=b&&t.middleLaneBonus&&t.middleLaneBonus[L];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[L,":"]}),v.jsx("span",{className:ue?"text-green-400 font-bold":"",children:q})]},L)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((L,q)=>v.jsx("div",{children:q<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},q))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((L,q)=>{const ue=q+1,{critical:ye,damaged:R}=t.thresholds;let F;ue<=ye?F="bg-red-500":ue<=R?F="bg-orange-500":F="bg-green-500";const X=q<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${X?F:"bg-gray-400"} border border-black/50`},q)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(vY,{ability:t.ability,isUsable:C==="action"&&P()&&!T[`${O()}Passed`]&&k.energy>=t.ability.cost.energy,isSelected:N?.ability.id===t.ability.id,onClick:L=>l(L,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function bY(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getLocalPlacedSections:s}=Ri(),{turnPhase:l,unplacedSections:u}=e,p=i(),f=s(),[h,m]=E.useState(null),[g,b]=E.useState(f||[null,null,null]),[S,A]=E.useState(u||["bridge","powerCell","droneControlHub"]),C=j=>{if(l==="placement")if(console.log("🔧 handleSelectSectionForPlacement called with:",j,"gameMode:",e.gameMode),S.includes(j))m(U=>U===j?null:j);else{const U=g.indexOf(j),K=[...g];K[U]=null,b(K),A(H=>[...H,j]),m(null)}},P=j=>{if(l==="placement")if(console.log("🔧 handleLaneSelectForPlacement called with lane:",j,"gameMode:",e.gameMode),h){if(g[j]){const U=g[j],K=[...g];K[j]=h;const H=S.indexOf(h),W=[...S];W.splice(H,1,U),b(K),A(W)}else{const U=[...g];U[j]=h,b(U),A(K=>K.filter(H=>H!==h))}m(null)}else g[j]&&C(g[j])},T=async()=>{if(l!=="placement")return;if(console.log("🔧 handleConfirmPlacement called"),g.some(K=>K==null)){console.warn("⚠️ Cannot confirm placement: All ship sections must be placed");return}console.log("🔧 Submitting placement to PhaseManager:",g);const U={phase:"placement",playerId:t(),actionData:{placedSections:g}};if(e.gameMode==="guest"){console.log("[GUEST] Sending ship placement commitment to host"),jn.sendActionToHost("commitment",U);return}try{const K=await Re.actionProcessor.processCommitment(U);if(!K.success){console.error("❌ Placement submission failed:",K.error);return}console.log("✅ Placement submitted to PhaseManager")}catch(K){console.error("❌ Error submitting placement:",K)}};E.useEffect(()=>{e.gameMode==="guest"&&Re.emit("render_complete")},[e,Re]);const O=t(),k=n(),N=e.commitments?.placement?.[O]?.completed||!1,D=e.commitments?.placement?.[k]?.completed||!1;if(console.log("🔍 [SHIP PLACEMENT] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:O,opponentPlayerId:k,localPlayerCompleted:N,opponentCompleted:D,fullCommitmentsObject:e.commitments?.placement,turnPhase:l,willShowWaiting:r()&&N&&!D}),r()&&N&&!D){const j=g.map((U,K)=>U?U.name:"Empty").join(", ");return v.jsx(nv,{phase:"placement",localPlayerStatus:`Your ship layout: ${j}`})}const M=g.every(j=>j!==null);return console.log("🔥 ShipPlacementScreen rendered:",{allPlaced:M,placed:g,unplaced:u,selected:h}),v.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(j=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes(j)&&v.jsx("div",{onClick:()=>C(j),className:`h-full transition-all duration-300 rounded-xl ${h===j?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(Zf,{section:j,stats:p.shipSections[j],effectiveStatsForDisplay:p.shipSections[j].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:ke,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null})})},j))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(j=>{const U=g[j],K=h&&!g[j];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>P(j),children:U?v.jsx(Zf,{section:U,stats:p.shipSections[U],effectiveStatsForDisplay:p.shipSections[U].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:j===1,gameEngine:ke,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${K?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:j===1?"Lane 2 (Center Bonus)":`Lane ${j+1}`})})},j)})})]}),v.jsx("button",{onClick:()=>{console.log(`🔥 Confirm Layout button clicked! allPlaced: ${M}`),T()},disabled:!M,className:"btn-confirm mt-12 text-lg",children:"Confirm Layout"})]})]})}const xY=()=>{const e=E.useRef(null);return E.useEffect(()=>{const t=e.current,n=t.getContext("2d");let r;const i=Array.from({length:500},()=>{const f=Math.random();let h;return f<.9?h="rgba(255, 255, 255, ":f<.94?h="rgba(100, 150, 255, ":f<.98?h="rgba(255, 200, 100, ":h="rgba(255, 100, 100, ",{x:0,y:0,radius:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,twinkleSpeed:.005+Math.random()*.01,twinklePhase:Math.random()*Math.PI*2,color:h}}),s=["rgba(147, 51, 234, ","rgba(59, 130, 246, ","rgba(236, 72, 153, ","rgba(16, 185, 129, ","rgba(6, 182, 212, ","rgba(139, 92, 246, ","rgba(34, 211, 238, "],l=Array.from({length:4},()=>({x:0,y:0,radius:180+Math.random()*150,color:s[Math.floor(Math.random()*s.length)],pulsePhase:Math.random()*Math.PI*2,pulseSpeed:.004+Math.random()*.003})),u=()=>{t.width=window.innerWidth,t.height=window.innerHeight,i.forEach(f=>{f.x=Math.random()*t.width,f.y=Math.random()*(t.height*.75)}),l.forEach(f=>{f.x=Math.random()*t.width,f.y=Math.random()*(t.height*.75)})};u(),window.addEventListener("resize",u);const p=()=>{n.fillStyle="#0a0a1a",n.fillRect(0,0,t.width,t.height),l.forEach(f=>{f.pulsePhase+=f.pulseSpeed;const h=.08+Math.sin(f.pulsePhase)*.04;for(let m=0;m<3;m++){const g=Math.sin(f.pulsePhase*.5+m)*30,b=Math.cos(f.pulsePhase*.3+m)*30,S=h*(.4+m*.3),A=n.createRadialGradient(f.x+g,f.y+b,0,f.x+g,f.y+b,f.radius*(.7+m*.15));A.addColorStop(0,f.color+S+")"),A.addColorStop(.3,f.color+S*.6+")"),A.addColorStop(.7,f.color+S*.2+")"),A.addColorStop(1,f.color+"0)"),n.fillStyle=A,n.fillRect(0,0,t.width,t.height)}}),i.forEach(f=>{f.twinklePhase+=f.twinkleSpeed;const h=.3+Math.sin(f.twinklePhase)*.7;n.beginPath(),n.arc(f.x,f.y,f.radius,0,Math.PI*2),n.fillStyle=f.color+f.opacity*h+")",n.fill(),f.radius>1&&(n.beginPath(),n.arc(f.x,f.y,f.radius*2,0,Math.PI*2),n.fillStyle=f.color+f.opacity*h*.1+")",n.fill())}),r=requestAnimationFrame(p)};return p(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(r)}},[]),v.jsx("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"#0a0a1a"}})},Ko=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),la=({icon:e,value:t,max:n,iconColor:r,isPlayer:i})=>{const s=i?"from-cyan-400/30 via-blue-400/30 to-blue-500/30":"from-pink-400/30 via-pink-500/30 to-pink-600/30";return v.jsx("div",{className:`relative p-[1px] bg-gradient-to-br ${s}`,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:v.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 px-3 py-1 flex items-center gap-2",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[v.jsx(e,{size:18,className:r}),v.jsxs("span",{className:"font-bold text-base text-white whitespace-nowrap",children:[t,n!==void 0&&v.jsxs("span",{className:"hidden xl:inline",children:[" / ",n]})]})]})})};function SY({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:p,opponentShieldsToAllocate:f,shieldsToRemove:h,shieldsToAdd:m,reallocationPhase:g,totalLocalPlayerDrones:b,totalOpponentPlayerDrones:S,getLocalPlayerId:A,getOpponentPlayerId:C,isMyTurn:P,currentPlayer:T,isMultiplayer:O,handlePlayerPass:k,handleReset:N,handleResetShields:D,handleConfirmShields:M,handleCancelReallocation:j,handleResetReallocation:U,handleContinueToAddPhase:K,handleConfirmReallocation:H,mandatoryAction:W,multiSelectState:re,AI_HAND_DEBUG_MODE:le,setShowAiHandModal:ne,onShowDebugModal:L}){const[q,ue]=E.useState(!1),ye=E.useRef(null);return E.useEffect(()=>{const R=F=>{ye.current&&!ye.current.contains(F.target)&&ue(!1)};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]),v.jsxs("header",{className:"w-full flex justify-between items-start mb-2 flex-shrink-0 px-5 pt-2",children:[v.jsxs("div",{className:"flex flex-col gap-1.5",children:[v.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Opponent",(i==="deployment"||i==="action")&&u===C()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${C()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(la,{icon:hf,value:t.energy,max:r.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!1}),v.jsx("div",{onClick:()=>le&&setTimeout(()=>ne(!0),100),className:le?"cursor-pointer":"",children:v.jsx(la,{icon:Zj,value:t.hand.length,max:r.totals.handLimit,iconColor:"text-gray-400",isPlayer:!1})}),i==="deployment"&&v.jsx(la,{icon:Qy,value:s===1?t.initialDeploymentBudget:t.deploymentBudget,iconColor:"text-purple-400",isPlayer:!1}),v.jsx(la,{icon:DA,value:S,max:r.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!1})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[v.jsxs("h2",{className:"text-xl font-bold uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #6b7280, #9ca3af)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[_j(i),i==="allocateShields"&&v.jsxs("span",{className:"text-base font-semibold text-cyan-300 ml-2",children:["(",p," shields to assign)"]}),g==="removing"&&v.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",h," shields to remove)"]}),g==="adding"&&v.jsxs("span",{className:"text-base font-semibold text-green-300 ml-2",children:["(",m," shields to add)"]})]}),(i==="deployment"||i==="action"||g)&&v.jsxs("div",{className:"flex items-center gap-3",children:[P()?v.jsx("div",{className:"flex items-center gap-2",children:v.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Your Turn"})}):v.jsx("div",{className:"flex items-center gap-2",children:v.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest phase-announcement-shine animate-pulse",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(236, 72, 153, 0.5), 0 0 60px rgba(244, 114, 182, 0.3)",filter:"drop-shadow(0 0 20px rgba(236, 72, 153, 0.4))",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:O()?"Opponent's Turn":"AI Thinking"})}),P()&&!W&&!re&&!g&&v.jsx("button",{onClick:k,disabled:l[`${A()}Passed`],className:"relative p-[1px] transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:l[`${A()}Passed`]?"linear-gradient(45deg, rgba(75, 85, 99, 0.6), rgba(107, 114, 128, 0.6))":"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:l[`${A()}Passed`]?"#9ca3af":"#fca5a5"},children:"Pass"})}),g==="removing"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:j,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),v.jsx("button",{onClick:U,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),v.jsx("button",{onClick:K,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Continue"})})]}),g==="adding"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:j,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),v.jsx("button",{onClick:U,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),v.jsx("button",{onClick:H,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}),i==="allocateShields"&&v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:D,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),v.jsx("button",{onClick:M,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:v.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}),v.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[v.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Your Resources",(i==="deployment"||i==="action")&&u===A()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(la,{icon:hf,value:e.energy,max:n.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!0}),i==="deployment"&&v.jsx(la,{icon:Qy,value:s===1?e.initialDeploymentBudget:e.deploymentBudget,iconColor:"text-purple-400",isPlayer:!0}),v.jsx(la,{icon:DA,value:b,max:n.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!0}),i==="allocateShields"&&v.jsx(la,{icon:og,value:p,iconColor:"text-cyan-300",isPlayer:!0}),g==="removing"&&v.jsx(la,{icon:og,value:h,iconColor:"text-orange-300",isPlayer:!0}),g==="adding"&&v.jsx(la,{icon:og,value:m,iconColor:"text-green-300",isPlayer:!0}),v.jsx("button",{onClick:N,className:"relative p-[2px] bg-gradient-to-br from-pink-400 to-pink-600",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Reset Game",children:v.jsx("div",{className:"bg-pink-700 hover:bg-pink-600 p-1.5 transition-colors",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:v.jsx(aR,{size:20,className:"text-white"})})}),v.jsxs("div",{className:"relative",ref:ye,children:[v.jsx("button",{onClick:()=>ue(!q),className:"relative p-[2px] bg-gradient-to-br from-gray-500 to-gray-700",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Settings",children:v.jsxs("div",{className:"bg-slate-700 hover:bg-slate-600 p-1.5 transition-colors flex items-center gap-1",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[v.jsx(kA,{size:20,className:"text-white"}),v.jsx(Gj,{size:16,className:"text-white"})]})}),q&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:v.jsxs("button",{onClick:()=>{L&&L(),ue(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[v.jsx(kA,{size:16}),"Debug View"]})})]})]})]})]})}const Rp=()=>{const{gameStateManager:e}=Ri(),t=E.useMemo(()=>e?Ft.getInstance(e):null,[e]),[n,r]=E.useState(null);return E.useEffect(()=>{if(!t)return;const h=()=>{r(t.getCacheStats())};h();const m=setInterval(h,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(h,m)=>t?t.getEffectiveStats(h,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(h,m=[])=>t?t.getEffectiveShipStats(h,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:h=>t?t.getLaneData(h):{lane:h,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(h,m=null)=>t?t.hasGuardianInLane(h,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},kw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:p,gameEngine:f,turnPhase:h,isMyTurn:m,passInfo:g,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:A,hoveredTarget:C,setHoveredTarget:P,sectionRefs:T})=>{const{getEffectiveShipStats:O}=Rp(),k=O(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(N=>{const D=n[N];if(!D)return console.log(`🚨 [DEBUG] Lane ${N} rendering EMPTY div - no hover possible:`,{sectionName:D,sectionNameType:typeof D,sectionNameValue:JSON.stringify(D),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},N);const M=e.shipSections[D],j=u.some(K=>K.id===D);let U=null;if(p&&t){if(p==="removing")M.allocatedShields>0?U="can-remove":U="cannot-remove";else if(p==="adding"){const K=f.getEffectiveSectionMaxShields(D,e,n);M.allocatedShields<K?U="can-add":U="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0 max-h-[120px]",children:v.jsx(Zf,{section:D,stats:M,effectiveStatsForDisplay:k.bySection[D],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(D):s&&s({id:D,name:D,...M},"section",t)},onAbilityClick:i,isInteractive:l||h==="action"&&t&&M.ability&&S.energy>=M.ability.cost.energy,isCardTarget:j,isInMiddleLane:N===1,isHovered:C?.type==="section"&&C?.target.name===D&&C?.isOpponent===!t,onMouseEnter:()=>!t&&P({target:{name:D,...M},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&P(null),reallocationState:U,gameEngine:f,turnPhase:h,isMyTurn:m,passInfo:g,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:A,sectionRef:K=>{if(T&&K){const H=`${t?"local":"opponent"}-${D}`;T.current[H]=K}}})},N)})})},AY=({droneId:e,timestamp:t,duration:n=2e3})=>{const[r,i]=E.useState(!0);return E.useEffect(()=>{const s=setTimeout(()=>{i(!1)},n);return()=>clearTimeout(s)},[t,n]),r?v.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:v.jsx("div",{className:"bg-red-600/90 rounded-lg px-4 py-2 shadow-2xl border-2 border-red-400 animate-pulse",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(lR,{className:"w-5 h-5 text-white"}),v.jsx("span",{className:"text-white font-bold text-lg tracking-wide drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]",children:"Intercepted!"})]})})}):null},Mw=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),EY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),uf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:p,lane:f,onAbilityClick:h,isActionTarget:m,droneRefs:g,mandatoryAction:b,localPlayerState:S,interceptedBadge:A,enableFloatAnimation:C=!1})=>{const{getEffectiveStats:P}=Rp(),T=E.useMemo(()=>Pn.find(te=>te.name===e.name),[e.name]),O=P(e,f),{maxShields:k}=O,N=e.currentShields??k,D=T.abilities.filter(te=>te.type==="ACTIVE"),M=n?"border-cyan-400":"border-pink-500",j=n?"bg-cyan-900":"bg-pink-950",U=n?"text-cyan-100":"text-pink-100",K=n?"bg-cyan-900":"bg-pink-950",H=n?"text-cyan-400":"text-pink-500",W=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",re=O.attack>O.baseAttack,le=O.attack<O.baseAttack,ne=re?"text-green-400":le?"text-red-400":"text-white",L=O.speed>O.baseSpeed,q=O.speed<O.baseSpeed,ue=L?"text-green-400":q?"text-red-400":"text-white",ye=e.isExhausted?"grayscale opacity-60":"",R=s?"animate-shake":"",F=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",X=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",ae=b?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",me=te=>!(e.isExhausted&&te.cost.exhausts!==!1||te.cost.energy&&S.energy<te.cost.energy),z=e.isTeleporting?"opacity-0 pointer-events-none":"";return v.jsxs("div",{ref:te=>g.current[e.id]=te,onClick:te=>t&&t(te,e,n),onMouseEnter:u,onMouseLeave:p,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ye} ${R} ${F} ${X} ${ae} ${z} ${C?"drone-float":""}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${M} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:k}).map((te,ve)=>ve<N?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:H,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ve):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:W,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ve))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:T.hull}).map((te,ve)=>{const pe=ve<e.hull,oe=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${pe?oe:"bg-gray-400"} border border-black/50`},ve)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${j} flex items-center justify-center border-t ${M}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${U} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(Mw,{value:O.attack,isFlat:!1,bgColor:K,textColor:ne})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:v.jsx(Mw,{value:O.speed,isFlat:!0,bgColor:K,textColor:ue})}),n&&D.length>0&&me(D[0])&&v.jsx(EY,{onClick:te=>h&&h(te,e,D[0])}),A&&A.droneId===e.id&&v.jsx(AY,{droneId:e.id,timestamp:A.timestamp})]})},CY=(e,t,n,r,i,s,l,u,p,f,h,m,g,b,S,A,C,P,T,O,k)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(N=>v.jsx(uf,{drone:N,lane:n,isPlayer:t,onClick:f,onAbilityClick:h,isSelected:m&&m.id===N.id,isSelectedForMove:g?.phase==="select_drones"&&g.selectedDrones.some(D=>D.id===N.id),isHit:b.includes(N.id),isPotentialInterceptor:S.includes(N.id),droneRefs:A,mandatoryAction:C,localPlayerState:r,isActionTarget:P.some(D=>D.id===N.id)||T.some(D=>D.id===N.id),onMouseEnter:()=>!t&&O({target:N,type:"drone",lane:n}),onMouseLeave:()=>!t&&O(null),interceptedBadge:k,enableFloatAnimation:!0},N.id))}),jw=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:p,multiSelectState:f,turnPhase:h,localPlayerState:m,opponentPlayerState:g,localPlacedSections:b,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:C,handleTokenClick:P,handleAbilityIconClick:T,selectedDrone:O,recentlyHitDrones:k,potentialInterceptors:N,droneRefs:D,mandatoryAction:M,setHoveredTarget:j,interceptedBadge:U})=>(Rp(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(K=>{const H=t?r():i(),W=s&&l.some(ne=>ne.id===K&&ne.owner===H)||u&&p.some(ne=>ne.id===K&&ne.owner===H)||f&&p.some(ne=>ne.id===K&&ne.owner===H),re=t&&(h==="deployment"||h==="action"),le=t?"bg-cyan-400/10":"bg-pink-500/10";return v.jsx("div",{onClick:ne=>n(ne,K,t),className:`flex-1 rounded-lg transition-all duration-200 p-2
              ${W?"bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":le}
              ${re?"cursor-pointer hover:bg-cyan-900/20":""}
            `,children:CY(e.dronesOnBoard[K],t,K,m,g,b,S,A,C,P,T,O,f,k,N,D,M,l,p,j,U)},K)})}));function PY({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:p,turnPhase:f,reallocationPhase:h,shipAbilityMode:m,hoveredTarget:g,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,sectionRefs:P,mandatoryAction:T,gameEngine:O,getLocalPlayerId:k,getOpponentPlayerId:N,isMyTurn:D,getPlacedSectionsForEngine:M,passInfo:j,handleTargetClick:U,handleLaneClick:K,handleShipSectionClick:H,handleShipAbilityClick:W,handleTokenClick:re,handleAbilityIconClick:le,setHoveredTarget:ne,interceptedBadge:L}){return v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(kw,{player:t,isPlayer:!1,placedSections:r,onTargetClick:U,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:O,turnPhase:f,isMyTurn:D,passInfo:j,getLocalPlayerId:k,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:ne,sectionRefs:P}),v.jsx(jw,{player:t,isPlayer:!1,onLaneClick:K,getLocalPlayerId:k,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:M,handleTokenClick:re,handleAbilityIconClick:le,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:T,setHoveredTarget:ne,interceptedBadge:L}),v.jsx(jw,{player:e,isPlayer:!0,onLaneClick:K,getLocalPlayerId:k,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:M,handleTokenClick:re,handleAbilityIconClick:le,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:T,setHoveredTarget:ne,interceptedBadge:L}),v.jsx(kw,{player:e,isPlayer:!0,placedSections:n,onSectionClick:H,onAbilityClick:W,onTargetClick:U,isInteractive:f==="allocateShields"||h,selectedCard:i,validCardTargets:s,reallocationPhase:h,gameEngine:O,turnPhase:f,isMyTurn:D,passInfo:j,getLocalPlayerId:k,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:ne,sectionRefs:P})]})})}const wY="_footer_qsz10_15",TY="_tabContainer_qsz10_21",OY="_contentContainer_qsz10_25",_Y="_contentOpen_qsz10_29",DY="_contentClosed_qsz10_34",NY="_contentWrapper_qsz10_38",kY="_tabButton_qsz10_44",MY="_tabButtonActive_qsz10_48",jY="_tabButtonInactive_qsz10_52",RY="_tabIcon_qsz10_56",IY="_multiSelectOverlay_qsz10_62",LY="_multiSelectText_qsz10_66",$Y="_handContainer_qsz10_72",BY="_cardPile_qsz10_76",UY="_deckCard_qsz10_80",zY="_deckCardText_qsz10_88",GY="_discardCard_qsz10_93",HY="_discardCardText_qsz10_101",qY="_pileLabel_qsz10_106",YY="_handSection_qsz10_110",FY="_mandatoryDiscardWarning_qsz10_130",VY="_handCardsContainer_qsz10_134",KY="_handCardsWrapper_qsz10_139",WY="_handCardsWrapperGap_qsz10_143",XY="_cardWrapper_qsz10_148",QY="_optionalDiscardControls_qsz10_170",ZY="_optionalDiscardCounter_qsz10_174",JY="_finishDiscardButton_qsz10_178",eF="_droneContainer_qsz10_185",tF="_droneGrid_qsz10_189",nF="_logContainer_qsz10_216",rF="_logHeader_qsz10_220",aF="_logTitle_qsz10_224",iF="_downloadButton_qsz10_228",oF="_logTableWrapper_qsz10_233",sF="_logTable_qsz10_233",lF="_logTableHeader_qsz10_241",cF="_logTableHeaderCell_qsz10_245",uF="_logTableDebugHeader_qsz10_249",dF="_logTableRow_qsz10_253",fF="_logTableCell_qsz10_257",pF="_logTableCellBold_qsz10_261",hF="_logTableCellGray_qsz10_265",mF="_logTableCellCyan_qsz10_269",gF="_logTableCellYellow_qsz10_273",yF="_logTableCellGrayText_qsz10_277",vF="_logTableCellDebug_qsz10_281",bF="_logTableCellCenter_qsz10_285",xF="_aiDecisionButton_qsz10_289",SF="_buttonDanger_qsz10_300",AF="_buttonSuccess_qsz10_305",EF="_buttonDisabled_qsz10_310",xe={footer:wY,tabContainer:TY,contentContainer:OY,contentOpen:_Y,contentClosed:DY,contentWrapper:NY,tabButton:kY,tabButtonActive:MY,tabButtonInactive:jY,tabIcon:RY,multiSelectOverlay:IY,multiSelectText:LY,handContainer:$Y,cardPile:BY,deckCard:UY,deckCardText:zY,discardCard:GY,discardCardText:HY,pileLabel:qY,handSection:YY,mandatoryDiscardWarning:FY,handCardsContainer:VY,handCardsWrapper:KY,handCardsWrapperGap:WY,cardWrapper:XY,optionalDiscardControls:QY,optionalDiscardCounter:ZY,finishDiscardButton:JY,droneContainer:eF,droneGrid:tF,logContainer:nF,logHeader:rF,logTitle:aF,downloadButton:iF,logTableWrapper:oF,logTable:sF,logTableHeader:lF,logTableHeaderCell:cF,logTableDebugHeader:uF,logTableRow:dF,logTableCell:fF,logTableCellBold:pF,logTableCellGray:hF,logTableCellCyan:mF,logTableCellYellow:gF,logTableCellGrayText:yF,logTableCellDebug:vF,logTableCellCenter:bF,aiDecisionButton:xF,buttonDanger:SF,buttonSuccess:AF,buttonDisabled:EF};function CF({localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleCardClick:s,getLocalPlayerId:l,isMyTurn:u,hoveredCardId:p,setHoveredCardId:f,setIsViewDiscardModalOpen:h,setIsViewDeckModalOpen:m,optionalDiscardCount:g,handleRoundStartDraw:b,checkBothPlayersHandLimitComplete:S,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:C,setConfirmationModal:P,passInfo:T,validCardTargets:O,gameEngine:k,opponentPlayerState:N}){const U=e.hand.length>6,K=1410,H=e.hand.length;let W=0;return H>1&&U&&(W=(K-225)/(H-1)-225),v.jsxs("div",{className:xe.handContainer,children:[v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>h(!0),className:xe.discardCard,children:v.jsx("p",{className:xe.discardCardText,children:e.discardPile.length})}),v.jsx("p",{className:xe.pileLabel,children:"Discard Pile"})]}),v.jsxs("div",{className:xe.handSection,children:[i?.type==="discard"&&i.fromAbility&&v.jsxs("p",{className:xe.mandatoryDiscardWarning,children:["You must discard ",i.count," card(s)."]}),v.jsx("div",{className:xe.handCardsContainer,style:U?{width:`${K}px`}:{},children:v.jsx("div",{className:`${xe.handCardsWrapper} ${U?"":xe.handCardsWrapperGap}`,children:e.hand.map((re,le)=>{const ne=p?e.hand.findIndex(ue=>ue.instanceId===p):-1;let L="",q={zIndex:le};return U&&ne!==-1&&(le<ne?L="transform -translate-x-12":le>ne?L="transform translate-x-12":(L="transform -translate-y-8 scale-105",q.zIndex=50)),U&&le>0&&(q.marginLeft=`${W}px`),v.jsx("div",{className:`${xe.cardWrapper} ${L}`,style:q,onMouseEnter:()=>f(re.instanceId),onMouseLeave:()=>f(null),children:v.jsx(Vo,{card:re,isSelected:n?.instanceId===re.instanceId,isPlayable:r==="action"&&u()&&!T[`${l()}Passed`]&&e.energy>=re.cost&&(!re.targeting||k.getValidTargets(l(),null,re,e,N).length>0)||r==="optionalDiscard"&&g<t.totals.discardLimit,isMandatoryTarget:i?.type==="discard",onClick:i?.type==="discard"?ue=>P({type:"discard",target:ue,onConfirm:()=>A(ue),onCancel:()=>P(null),text:`Are you sure you want to discard ${ue.name}?`}):r==="optionalDiscard"?ue=>P({type:"discard",target:ue,onConfirm:()=>C(ue),onCancel:()=>P(null),text:`Are you sure you want to discard ${ue.name}?`}):s})},re.instanceId)})})})]}),v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>m(!0),className:xe.deckCard,children:v.jsx("p",{className:xe.deckCardText,children:e.deck.length})}),v.jsx("p",{className:xe.pileLabel,children:"Deck"}),r==="optionalDiscard"&&v.jsxs("div",{className:xe.optionalDiscardControls,children:[v.jsxs("p",{className:xe.optionalDiscardCounter,children:["Discarded: ",g," / ",t.discardLimit]}),v.jsx("button",{onClick:()=>{b(),S()},className:xe.finishDiscardButton,children:"Finish Discarding"})]})]})]})}function PF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:p,isMyTurn:f,turn:h,passInfo:m,validCardTargets:g}){return v.jsx("div",{className:xe.droneContainer,children:v.jsx("div",{className:xe.droneGrid,children:t.map((b,S)=>{const C=(h===1?e.initialDeploymentBudget+e.energy:e.energy)>=b.class,P=n?.type==="Upgrade"&&g.some(T=>T.id===b.name);return v.jsx(mf,{drone:b,onClick:s,isSelected:l&&l.name===b.name,isSelectable:r==="deployment"&&f()&&!m[`${p()}Passed`]&&C&&!i||P,deployedCount:e.deployedDroneCounts[b.name]||0,appliedUpgrades:e.appliedUpgrades[b.name]||[],isUpgradeTarget:P,onViewUpgrades:(T,O)=>u({droneName:T.name,upgrades:O})},S)})})})}function wF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return v.jsxs("div",{className:xe.logContainer,children:[v.jsxs("div",{className:xe.logHeader,children:[v.jsx("h3",{className:xe.logTitle,children:"Game Log"}),v.jsx("button",{onClick:t,className:xe.downloadButton,children:"Download CSV"})]}),v.jsx("div",{className:xe.logTableWrapper,children:v.jsxs("table",{className:xe.logTable,children:[v.jsx("thead",{className:xe.logTableHeader,children:v.jsxs("tr",{children:[v.jsx("th",{className:xe.logTableHeaderCell,children:"Rnd"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Timestamp (UTC)"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Player"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Action"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Source"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Target"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Outcome"}),v.jsx("th",{className:xe.logTableDebugHeader,children:"Debug Source"}),v.jsx("th",{className:xe.logTableHeaderCell})]})}),v.jsx("tbody",{children:e.map((r,i)=>v.jsxs("tr",{className:xe.logTableRow,children:[v.jsx("td",{className:xe.logTableCellBold,children:r.round}),v.jsx("td",{className:xe.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:xe.logTableCellCyan,children:r.player}),v.jsx("td",{className:xe.logTableCellYellow,children:r.actionType}),v.jsx("td",{className:xe.logTableCell,children:r.source}),v.jsx("td",{className:xe.logTableCell,children:r.target}),v.jsx("td",{className:xe.logTableCellGrayText,children:r.outcome}),v.jsx("td",{className:xe.logTableCellDebug,children:r.debugSource}),v.jsx("td",{className:xe.logTableCellCenter,children:r.aiDecisionContext&&v.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:xe.aiDecisionButton,title:"Show AI Decision Logic",children:"ℹ️"})})]},i)).reverse()})]})})]})}function TF({localPlayerState:e,localPlayerEffectiveStats:t,sortedLocalActivePool:n,gameLog:r,footerView:i,isFooterOpen:s,multiSelectState:l,selectedCard:u,turnPhase:p,mandatoryAction:f,handleFooterButtonClick:h,handleCardClick:m,cancelCardSelection:g,downloadLogAsCSV:b,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:T,setIsViewDeckModalOpen:O,optionalDiscardCount:k,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleToggleDroneSelection:M,selectedDrone:j,setViewUpgradesModal:U,handleConfirmMandatoryDiscard:K,handleRoundStartDiscard:H,setConfirmationModal:W,turn:re,passInfo:le,validCardTargets:ne,gameEngine:L,opponentPlayerState:q,setAiDecisionLogToShow:ue}){return v.jsxs("footer",{className:xe.footer,children:[v.jsxs("div",{className:xe.tabContainer,children:[v.jsx("button",{onClick:()=>h("hand"),className:`${xe.tabButton} ${s&&i==="hand"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="hand"&&v.jsx(sf,{size:16}),"Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>h("drones"),className:`${xe.tabButton} ${s&&i==="drones"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="drones"&&v.jsx(sf,{size:16}),"Drones"]})}),v.jsx("button",{onClick:()=>h("log"),className:`${xe.tabButton} ${s&&i==="log"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="log"&&v.jsx(sf,{size:16}),"Log (",r.length,")"]})})]}),v.jsx("div",{className:`${xe.contentContainer} ${s?xe.contentOpen:xe.contentClosed}`,children:v.jsxs("div",{className:xe.contentWrapper,children:[l&&v.jsxs("div",{className:xe.multiSelectOverlay,children:[v.jsxs("span",{className:xe.multiSelectText,children:[l.phase==="select_source_lane"&&"Reposition: Select a source lane",l.phase==="select_drones"&&`Select Drones (${l.selectedDrones.length} / ${l.maxSelection})`,l.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:ye=>{ye.stopPropagation(),g()},className:xe.buttonDanger,children:"Cancel"}),l.phase==="select_drones"&&v.jsx("button",{onClick:ye=>{ye.stopPropagation(),l.selectedDrones.length>0&&console.log("Confirm drones clicked")},disabled:l.selectedDrones.length===0,className:`${xe.buttonSuccess} ${l.selectedDrones.length===0?xe.buttonDisabled:""}`,children:"Confirm Drones"})]}),i==="hand"&&v.jsx("div",{className:xe.viewContent,children:v.jsx(CF,{localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:u,turnPhase:p,mandatoryAction:f,handleCardClick:m,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:T,setIsViewDeckModalOpen:O,optionalDiscardCount:k,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleConfirmMandatoryDiscard:K,handleRoundStartDiscard:H,setConfirmationModal:W,passInfo:le,validCardTargets:ne,gameEngine:L,opponentPlayerState:q})}),i==="drones"&&v.jsx("div",{className:xe.viewContent,children:v.jsx(PF,{localPlayerState:e,sortedLocalActivePool:n,selectedCard:u,turnPhase:p,mandatoryAction:f,handleToggleDroneSelection:M,selectedDrone:j,setViewUpgradesModal:U,getLocalPlayerId:S,isMyTurn:A,turn:re,passInfo:le,validCardTargets:ne})}),i==="log"&&v.jsx("div",{className:xe.viewContent,children:v.jsx(wF,{gameLog:r,downloadLogAsCSV:b,setAiDecisionLogToShow:ue})})]})})]})}const OF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(Ko,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},_F=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=E.useState(null);return v.jsxs(Ko,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(p=>{const f=s.appliedUpgrades[p.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",p.name]}),v.jsx("div",{className:"space-y-2",children:f.map(h=>v.jsx("div",{onClick:()=>u({droneName:p.name,instanceId:h.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===h.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:h.name})},h.instanceId))})]},p.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},DF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=E.useState(null);return v.jsxs(Ko,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(Vo,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},NF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:p})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(OF,{modalData:e,onClose:()=>t(null)}),n&&v.jsx(_F,{selectionData:n,onConfirm:async(f,h)=>{await l(f,h,u()),r(null)},onCancel:()=>{r(null),p()}}),i&&v.jsx(DF,{selectionData:i,onConfirm:async(f,h)=>{await l(f,h,u()),s(null)},onCancel:()=>{s(null),p()}})]}),kF=({visible:e,start:t,end:n,lineRef:r})=>e?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,MF=({top:e,left:t,size:n="large"})=>{const[r,i]=E.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return E.useEffect(()=>{const u=[];for(let p=0;p<l.particleCount;p++){const f=Math.PI*2*p/l.particleCount,h=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),m=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:p,x:Math.cos(f)*h,y:Math.sin(f)*h,size:m,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),v.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>v.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},jF=()=>{const e=Math.random()>.5;return{width:`${180+Math.random()*40}%`,height:`${60+Math.random()*40}%`,gradientAngle:e?120+Math.random()*30:-60+Math.random()*30,colorIntensity:{r:4+Math.random()*10,g:8+Math.random()*16,b:24+Math.random()*20},opacity:.5+Math.random()*.4,scale:1+(Math.random()*.2-.1),position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},RF=()=>{const e=Math.random()>.5;return{position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},IF=({id:e,properties:t})=>{const n=`rgb(${t.colorIntensity.r} ${t.colorIntensity.g} ${t.colorIntensity.b})`,r=t.position.top!==void 0?{top:t.position.top,left:t.position.left}:{bottom:t.position.bottom,right:t.position.right};return v.jsx("div",{className:"absolute",style:{width:t.width,height:t.height,...r,transform:`rotate(${t.rotation}deg) scale(${t.scale})`,background:`linear-gradient(${t.gradientAngle}deg, ${n} 0%, transparent 100%)`,opacity:t.opacity,transition:"all 8s ease-in-out",willChange:"transform"}})},_N=()=>{const[e,t]=E.useState([]);return E.useEffect(()=>{const n=3+Math.floor(Math.random()*3),r=Array.from({length:n},(i,s)=>({id:s,properties:jF()}));t(r)},[]),E.useEffect(()=>{if(e.length===0)return;const n=setInterval(()=>{t(r=>{const i=Math.floor(Math.random()*r.length);return r.map((s,l)=>{if(l===i){const u=RF();return{...s,properties:{...s.properties,position:u.position,rotation:u.rotation}}}return s})})},1e4);return()=>clearInterval(n)},[e.length]),v.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:e.map(n=>v.jsx(IF,{id:n.id,properties:n.properties},n.id))})},LF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const p=n!=="local";return v.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:[v.jsx(_N,{}),v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine relative z-10",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:p?"Opponent Thinking":"AI Thinking"})]})},Rw=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Ln,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(Vo,{card:l,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1})},`${l.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},$F=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:"✓"})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),BF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=E.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:p,filter:f}=r,h=S=>{s(A=>{const C=S.instanceId||`${S.id}-${S.name}`;return A.some(T=>(T.instanceId||`${T.id}-${T.name}`)===C)?A.filter(T=>(T.instanceId||`${T.id}-${T.name}`)!==C):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),s([]))},g=()=>{s([]),t()},b=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:g,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Ln,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:p==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:f?`Select ${u} ${f.type} card${u>1?"s":""} from ${l.length} found ${f.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${b?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>v.jsx($F,{card:S,isSelected:i.some(C=>{const P=S.instanceId||`${S.id}-${S.name}`;return(C.instanceId||`${C.id}-${C.name}`)===P}),onClick:h},S.instanceId||`${S.id}-${A}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:g,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!b,className:"btn-confirm",children:"Confirm Selection"})]})]})})},UF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return v.jsxs(Ko,{title:"AI Action: Card Played",text:"",onClose:t,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:n.name}),r&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:r}),i&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(Vo,{card:n,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},zF=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(mf,{drone:t,isSelectable:!1,deployedCount:0})})]})}),GF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return v.jsx(Ko,{title:"Deployment Complete",text:u,onClose:s,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},HF=({show:e,onContinue:t})=>e?v.jsx(Ko,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,qF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=s=>{switch(s){case"determineFirstPlayer":return"Waiting for Opponent";case"mandatoryDiscard":return"Opponent Discarding";case"allocateShields":return"Opponent Allocating Shields";case"mandatoryDroneRemoval":return"Opponent Removing Drones";case"deploymentComplete":return"Waiting for Opponent";default:return"Waiting for Opponent"}};return v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:i(t)})})},YF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&v.jsx("button",{onClick:e.onCancel,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"modal-title",children:n}),v.jsx("p",{className:"modal-text",children:e.text}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},FF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"modal-title",children:s}),v.jsx("p",{className:"modal-text",children:l})]})})},VF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{const i=e===t;if(!n)return null;const s=()=>{r()},l=()=>{Re.setState({appState:"menu"})};return v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-center justify-center",children:v.jsxs("div",{className:"flex flex-col items-center gap-12",children:[i?v.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"VICTORY"}):v.jsxs("div",{className:"relative w-full h-full flex items-center justify-center screen-flicker",children:[v.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center defeat-glow screen-distort z-10",style:{color:"#ff3232",textShadow:"0 0 30px rgba(255, 50, 50, 1), 0 0 60px rgba(255, 50, 50, 0.8), 0 0 90px rgba(255, 50, 50, 0.6)",filter:"drop-shadow(0 0 30px rgba(255, 50, 50, 0.6))"},children:"DEFEAT"}),v.jsx("div",{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent scanline-shutdown",style:{boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)"}}),v.jsx("div",{className:"absolute inset-0 bg-red-900/20 defeat-glow",style:{mixBlendMode:"multiply"}})]}),v.jsxs("div",{className:"flex gap-6 z-20",children:[v.jsx("button",{onClick:s,className:"px-8 py-4 bg-cyan-600 hover:bg-cyan-700 text-white font-bold text-xl rounded-lg transition-colors shadow-lg shadow-cyan-500/50",children:"View Board"}),v.jsx("button",{onClick:l,className:"px-8 py-4 bg-gray-600 hover:bg-gray-700 text-white font-bold text-xl rounded-lg transition-colors shadow-lg",children:"Exit to Menu"})]})]})})},KF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,p=>p.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),v.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),v.jsx("td",{className:"p-2 text-center",children:s.isChosen&&v.jsx("span",{className:"text-yellow-400",children:"✔"})})]},l))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},WF=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[v.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),v.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsx("div",{className:"bg-gray-900/95 p-8 text-center",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsxs("div",{className:"space-y-8",children:[v.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Deploy Drone?"}),v.jsxs("div",{className:"flex items-center justify-center gap-8",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-5xl font-bold text-cyan-400 mb-2",children:i}),v.jsx("div",{className:"text-cyan-300/50 uppercase text-xs tracking-widest",children:"Deployment"})]}),v.jsx("div",{className:"text-4xl text-cyan-500/30 font-light",children:"|"}),v.jsxs("div",{children:[v.jsx("div",{className:"text-5xl font-bold text-blue-400 mb-2",children:s}),v.jsx("div",{className:"text-blue-300/50 uppercase text-xs tracking-widest",children:"Energy"})]})]}),v.jsxs("div",{className:"flex justify-center gap-6 pt-4",children:[v.jsx("button",{onClick:n,className:"w-32 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Cancel"}),v.jsx("button",{onClick:r,className:"w-32 py-3 border-2 rounded uppercase text-sm tracking-wider font-semibold transition-all hover:scale-110 hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",style:{borderColor:"#00ff88",background:"linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 136, 255, 0.2))",color:"#00ff88",boxShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"Confirm"})]}),v.jsx("div",{className:"h-px w-80 mx-auto bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})})]})},XF=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Move"}),v.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},QF=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:f,shipAbilityMode:h,droneRefs:m,mandatoryAction:g})=>{if(!t||!e)return null;const{attackDetails:b,interceptors:S}=e,{attacker:A,target:C,targetType:P,lane:T}=b;return v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),v.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500 max-w-4xl w-full",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsxs("div",{className:"bg-gray-900/95 p-8",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:[v.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center mb-2",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Interception!"}),v.jsxs("p",{className:"text-center text-cyan-300/60 uppercase text-sm tracking-widest mb-8",children:["Combat in ",T?.replace("lane","Lane ")||"Unknown Lane"]}),v.jsx("div",{className:"mb-6 py-8",children:v.jsxs("div",{className:"flex items-start justify-center gap-6",children:[v.jsxs("div",{className:"flex flex-col items-center gap-4",children:[v.jsx("div",{className:"text-xs uppercase tracking-widest text-pink-400/60",children:"Attacker"}),v.jsx("div",{className:"transform scale-150 origin-top",children:v.jsx(uf,{drone:A,isPlayer:!1,lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})})]}),v.jsx("div",{className:"text-5xl font-light text-cyan-500/30 px-4 pt-16",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center gap-4",children:[v.jsx("div",{className:"text-xs uppercase tracking-widest text-cyan-400/60",children:"Target"}),P==="drone"?v.jsx("div",{className:"transform scale-150 origin-top",children:v.jsx(uf,{drone:C,isPlayer:!0,lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})}):v.jsx("div",{className:"transform scale-[0.95] origin-top",style:{width:"400px"},children:v.jsx(Zf,{section:C.name,stats:f.shipSections[C.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:f,shipAbilityMode:h})})]})]})}),v.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-4"}),v.jsx("h3",{className:"text-center text-2xl font-bold uppercase tracking-wider mb-1",style:{background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Choose Interceptor"}),v.jsx("p",{className:"text-center text-cyan-300/50 text-sm mb-4",children:"Select a drone to intercept the attack"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-12 mb-6",children:S.map(O=>v.jsx("div",{className:"cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_20px_rgba(0,255,136,0.4)]",children:v.jsx(uf,{drone:O,isPlayer:!0,onClick:()=>n(O),lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})},O.id))}),v.jsx("div",{className:"flex justify-center gap-6 pt-4",children:v.jsx("button",{onClick:r,className:"w-40 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Decline"})}),v.jsx("div",{className:"h-px w-80 mx-auto mt-8 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})]})},ZF=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),v.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},JF=({show:e,opponentName:t="Opponent"})=>e?v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Opponent Deciding Interception"})}):null,eV=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},tV=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},nV=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase());let p="";return l&&(p=l.name),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${p}`:"","? This will cost ",i.cost.energy," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},rV=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),v.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>v.jsx(Vo,{card:i,isPlayable:!1},i.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),aV=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=E.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(g,b)=>{navigator.clipboard.writeText(JSON.stringify(g,null,2)).then(()=>console.log(`${b} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},p=g=>g===null?"null":g===void 0?"undefined":typeof g=="boolean"?g.toString():typeof g=="string"?`"${g}"`:typeof g=="number"?g.toString():Array.isArray(g)?g.length===0?"[]":`[${g.length} items]`:typeof g=="object"?Object.keys(g).length===0?"{}":`{${Object.keys(g).length} properties}`:String(g),f=(g,b,S="")=>v.jsxs("div",{className:`mb-6 ${S}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-white",children:b}),v.jsxs("button",{onClick:()=>u(g,b),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[v.jsx(tv,{size:12}),"Copy"]})]}),v.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-800",children:[v.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),v.jsx("tbody",{children:Object.entries(g).map(([A,C],P)=>v.jsxs("tr",{className:P%2===0?"bg-gray-900":"bg-gray-800",children:[v.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),v.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:p(C)}),v.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof C=="object"&&C!==null?Array.isArray(C)?"array":"object":typeof C})]},A))})]})})]}),h=()=>{const g={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return v.jsxs("div",{className:"p-4 space-y-6",children:[f(g,"Core Game Info"),f(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),f(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),f({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),f({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&f(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return v.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const g=r.getEffectiveShipStats(l.player1,l.placedSections),b=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(P=>{S[P]=l.player1.dronesOnBoard[P].map(T=>({drone:T.name,effectiveStats:r.getEffectiveStats(T,P)})),A[P]=l.player2.dronesOnBoard[P].map(T=>({drone:T.name,effectiveStats:r.getEffectiveStats(T,P)}))});const C=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return v.jsxs("div",{className:"p-4 space-y-6",children:[f(g,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),f(b,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),f(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),f(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),f(C,"GameDataService Cache Statistics")]})}catch(g){return v.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",g.message]})}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Ln,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Game Debug View"}),v.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[v.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),v.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),v.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?h():m()}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},iV=(e,t)=>{const[n,r]=E.useState([]),i=E.useCallback((s,l=null,u="large")=>{console.log("🔥 [EXPLOSION] triggerExplosion called:",{targetId:s,capturedPosition:l,size:u});const p=ke.createExplosionEffect(s);let f=l;if(!f){const h=e.current[s];console.log("🔥 [EXPLOSION] Looking for drone element:",{targetId:s,found:!!h}),f=Xy(h,t.current)}if(console.log("🔥 [EXPLOSION] Position calculated:",f),f){const h=`${p.timestamp}-${Math.random()}`;console.log("🔥 [EXPLOSION] Adding explosion to state:",{explosionId:h,top:f.y,left:f.x,size:u}),r(m=>[...m,{id:h,top:f.y,left:f.x,size:u}]),setTimeout(()=>{r(m=>m.filter(g=>g.id!==h))},p.duration)}else console.warn("🔥 [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class oV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_REVEAL:{duration:1e3,type:"CARD_REVEAL_EFFECT",config:{}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},PASS_NOTIFICATION:{duration:1e3,type:"PASS_NOTIFICATION_EFFECT",config:{}},PHASE_ANNOUNCEMENT:{duration:1500,type:"PHASE_ANNOUNCEMENT_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{revealAt:.7}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t){if(console.log("[ANIMATION EVENTS] AnimationManager executing:",t),t.forEach((n,r)=>{console.log(`[ANIMATION EVENTS] Animation ${r+1}:`,{name:n.animationName,type:this.animations[n.animationName]?.type,duration:this.animations[n.animationName]?.duration,payload:n.payload})}),console.log("🎬 [AI ANIMATION DEBUG] AnimationManager.executeAnimations() called:",{effectCount:t?.length||0,effects:t?.map(n=>n.animationName)}),!t||t.length===0){console.log("🎬 [AI ANIMATION DEBUG] No effects to execute, returning early");return}this.setBlocking(!0);try{const n=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED"];let r=0;for(;r<t.length;){const i=t[r];if(n.includes(i.animationName)){const s=[];for(;r<t.length&&n.includes(t[r].animationName);)s.push(t[r]),r++;console.log("🎬 [ANIMATION DEBUG] Playing damage effects in parallel:",s.map(l=>l.animationName)),await Promise.all(s.map(async l=>{const u=this.animations[l.animationName];if(!u){console.warn(`❌ [ANIMATION DEBUG] Unknown animation: ${l.animationName}`);return}const p=this.visualHandlers.get(u.type);if(!p){console.warn(`❌ [ANIMATION DEBUG] No visual handler for: ${u.type}`);return}return new Promise(f=>{p({...l.payload,config:u.config,onComplete:f}),setTimeout(f,u.duration)})})),console.log("🎬 [ANIMATION DEBUG] All damage effects completed")}else{console.log("🎬 [ANIMATION DEBUG] Processing sequential effect:",i.animationName);const s=this.animations[i.animationName];if(!s){console.warn(`❌ [ANIMATION DEBUG] Unknown animation: ${i.animationName}`),r++;continue}const l=this.visualHandlers.get(s.type);if(!l){console.warn(`❌ [ANIMATION DEBUG] No visual handler for: ${s.type}`),r++;continue}await new Promise(u=>{l({...i.payload,config:s.config,onComplete:u}),setTimeout(u,s.duration)}),console.log("🎬 [ANIMATION DEBUG] Animation completed:",i.animationName),r++}}}finally{await new Promise(n=>setTimeout(n,200)),this.setBlocking(!1),console.log("🎬 [AI ANIMATION DEBUG] All animations completed, blocking released")}}setBlocking(t){console.log(`🔒 [ANIMATION BLOCKING] Setting blocking to: ${t}`),this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const sV=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,s]=E.useState(0);return E.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,p=150;setTimeout(()=>s(n),10),setTimeout(()=>s(0),l+u),setTimeout(()=>{r?.()},l+u+p)},[n,r,e]),e?v.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},lV=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[s,l]=E.useState(!1);if(E.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!s||!t||!n)return null;switch(e){case"LASER_BLAST":return v.jsx(cV,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return v.jsx(uV,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return v.jsx(dV,{endPos:n,duration:r});default:return null}},cV=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return v.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},uV=({startPos:e,duration:t})=>v.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),dV=({endPos:e,duration:t})=>v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),v.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function fV(e,t,n,r,i,s,l,u,p,f,h,m,g,b,S,A,C){E.useEffect(()=>{r(),i();const P=new oV(e),T=(k,N,D,M)=>{if(M==="drone")return t.current[D]||null;if(M==="section"){const j=e.getLocalPlayerId(),U=k===j?"local":"opponent";return n.current[`${U}-${D}`]||null}return null};P.registerVisualHandler("DRONE_FLY",k=>{const{droneId:N,sourcePlayer:D,sourceLane:M,targetId:j,targetPlayer:U,targetLane:K,targetType:H,config:W,attackValue:re,onComplete:le}=k;if(W.isReturn){le?.();return}console.log("🔫 [LASER DEBUG] DRONE_FLY handler called:",{droneId:N,sourcePlayer:D,sourceLane:M,targetId:j,targetPlayer:U,targetType:H,attackValue:re,config:W});const ne=T(D,M,N,"drone"),L=T(U,K,j,H);if(!ne||!L){console.warn("⚠️ [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!ne,hasTarget:!!L,sourcePlayer:D,sourceLane:M,targetPlayer:U,targetType:H,targetId:j}),le?.();return}console.log("✅ [LASER DEBUG] Creating laser effect with attack:",re);const q=l(ne,u.current),ue=l(L,u.current),ye=`laser-${N}-${Date.now()}`;S(R=>[...R,{id:ye,startPos:q,endPos:ue,attackValue:re||1,duration:500,onComplete:()=>{S(F=>F.filter(X=>X.id!==ye)),le?.()}}])}),P.registerVisualHandler("EXPLOSION_EFFECT",k=>{const{targetId:N,targetPlayer:D,targetLane:M,targetType:j,config:U,onComplete:K}=k,H=T(D,M,N,j);if(H){const W=l(H,u.current);s(N,W,U?.size||"large")}else console.warn("⚠️ [EXPLOSION DEBUG] Target element not found:",{targetId:N,targetPlayer:D,targetLane:M,targetType:j});K?.()}),P.registerVisualHandler("FLASH_EFFECT",k=>{const{targetId:N,targetPlayer:D,targetLane:M,targetType:j,config:U,onComplete:K}=k,H=T(D,M,N,j);if(!H){console.warn("⚠️ [FLASH DEBUG] Target element not found:",{targetId:N,targetPlayer:D,targetLane:M,targetType:j}),K?.();return}const W=H.getBoundingClientRect(),re=`flash-${N}-${Date.now()}`;h(le=>[...le,{id:re,position:{left:W.left,top:W.top,width:W.width,height:W.height},color:U.color,intensity:U.intensity,onComplete:()=>{h(ne=>ne.filter(L=>L.id!==re)),K?.()}}])}),P.registerVisualHandler("CARD_VISUAL_EFFECT",k=>{const{visualType:N,sourcePlayer:D,targetId:M,targetPlayer:j,targetLane:U,targetType:K,duration:H,onComplete:W}=k,re=u.current?.getBoundingClientRect();if(!re){W?.();return}const le=e.getLocalPlayerId(),ne=D===le?re.bottom-100:re.top+100,L=re.left+re.width/2;let q;if(K==="lane")if(j==="center")q={x:re.left+re.width/2,y:re.top+re.height/2};else{const ye=D===le?j:j===le?le:j,ae=(e.getState()[ye]?.dronesOnBoard||{})[U]||[];if(ae.length>0){const me=ae[0],z=t.current[me.id];if(z){const te=z.getBoundingClientRect();q={x:te.left+te.width/2,y:te.top+te.height/2}}else q={x:re.left+re.width/2,y:re.top+re.height/2}}else{const me=U==="lane1"?0:U==="lane2"?1:2,z=ye===le?re.bottom-200:re.top+200;q={x:re.left+re.width/4*(me+1),y:z}}}else{const ye=T(j,U,M,K);if(!ye){console.warn("⚠️ [CARD VISUAL DEBUG] Target element not found:",{targetId:M,targetPlayer:j,targetLane:U,targetType:K}),W?.();return}const R=ye.getBoundingClientRect();q={x:R.left+R.width/2,y:R.top+R.height/2}}const ue=`cardvisual-${Date.now()}`;m(ye=>[...ye,{id:ue,visualType:N||"LASER_BLAST",startPos:{x:L,y:ne},endPos:q,duration:H||800,onComplete:()=>{m(R=>R.filter(F=>F.id!==ue)),W?.()}}])}),P.registerVisualHandler("CARD_REVEAL_EFFECT",k=>{const{cardData:N,actingPlayerId:D,onComplete:M}=k;console.log("🃏 [CARD REVEAL DEBUG] CARD_REVEAL_EFFECT handler called:",{cardName:N?.name,actingPlayerId:D});const j=e.getLocalPlayerId(),U=D===j,K=`cardreveal-${Date.now()}`;g(H=>[...H,{id:K,card:N,label:U?"You Played":"Opponent Played",onComplete:()=>{g(W=>W.filter(re=>re.id!==K)),M?.()}}])}),P.registerVisualHandler("PHASE_ANNOUNCEMENT_EFFECT",k=>{const{phaseText:N,phaseName:D,firstPlayerId:M,onComplete:j}=k;let U=null;if(M){const H=e.getLocalPlayerId();U=M===H?"You Go First":"Opponent Goes First"}console.log("📢 [PHASE ANNOUNCEMENT DEBUG] PHASE_ANNOUNCEMENT_EFFECT handler called:",{phaseName:D,phaseText:N,firstPlayerId:M,localPlayerId:e.getLocalPlayerId(),calculatedSubtitle:U});const K=`phaseannouncement-${Date.now()}`;b(H=>[...H,{id:K,phaseText:N,subtitle:U,onComplete:()=>{b(W=>W.filter(re=>re.id!==K)),j?.()}}])}),P.registerVisualHandler("PASS_NOTIFICATION_EFFECT",k=>{const{passingPlayerId:N,onComplete:D}=k;console.log("⏸️ [PASS NOTIFICATION DEBUG] PASS_NOTIFICATION_EFFECT handler called:",{passingPlayerId:N});const M=e.getLocalPlayerId(),j=N===M,U=`passnotif-${Date.now()}`;C(K=>[...K,{id:U,label:j?"You Passed":"Opponent Passed",onComplete:()=>{C(H=>H.filter(W=>W.id!==U)),D?.()}}])}),P.registerVisualHandler("SHAKE_EFFECT",k=>{const{targetId:N,config:D,onComplete:M}=k,j=t.current[N];j?(j.classList.add("animate-shake-damage"),setTimeout(()=>{j.classList.remove("animate-shake-damage"),M?.()},D?.duration||500)):M?.()}),P.registerVisualHandler("TELEPORT_EFFECT",k=>{const{targetId:N,laneId:D,playerId:M,onComplete:j}=k;console.log("✨ [TELEPORT DEBUG] TELEPORT_EFFECT handler called:",{targetId:N,laneId:D,playerId:M});const U=t.current[N];if(!U){console.warn("⚠️ [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",N),j?.();return}const K=l(U,u.current);console.log("✨ [TELEPORT DEBUG] Using exact drone placeholder position:",K);const H=e.getLocalPlayerId(),re=M===H?"#00ffff":"#ec4899",le=`teleport-${N}-${Date.now()}`;A(ne=>[...ne,{id:le,top:K.y,left:K.x,color:re,duration:600,onComplete:()=>{A(L=>L.filter(q=>q.id!==le)),j?.()}}])});const O=e.subscribe(k=>{k.type==="animationStateChange"&&f(k.blocking)});return e.actionProcessor.setAnimationManager(P),O},[r,i,e,s,t,n,l,u,p,f,h,m,g,b,S,A,C])}const pV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=E.useState(t),[u,p]=E.useState([]),f=E.useRef(),h=E.useRef(Date.now());return E.useEffect(()=>{const m=r.duration||800,g=()=>{const b=Date.now()-h.current,S=Math.min(b/m,1),A=S<.5?2*S*S:-1+(4-2*S)*S,C=t.x+(n.x-t.x)*A,P=t.y+(n.y-t.y)*A;l({x:C,y:P}),r.trail&&p(T=>[...T.slice(-8),{id:Date.now(),x:C,y:P}]),S<1?f.current=requestAnimationFrame(g):i?.()};return f.current=requestAnimationFrame(g),()=>{f.current&&cancelAnimationFrame(f.current)}},[t,n,r,i]),v.jsxs(v.Fragment,{children:[u.map((m,g)=>v.jsx("div",{style:{position:"fixed",left:m.x+35,top:m.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+g*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},m.id)),v.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:v.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},hV=({card:e,label:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),v.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[v.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),v.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[v.jsx("h2",{className:`
            text-4xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
            card-reveal-label
            ${r?"card-reveal-label-show":""}
          `,children:t}),v.jsx("div",{className:`
            transform scale-110 card-reveal-card
            ${r?"":"card-reveal-dissolve"}
          `,children:v.jsx(Vo,{card:e,isPlayable:!1})}),v.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            card-reveal-scanline
            ${r?"card-reveal-scanline-active":""}
          `})]})]})},mV=({label:e,onComplete:t})=>{const[n,r]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{r(!0)});const i=setTimeout(()=>{r(!1);const s=setTimeout(()=>{t?.()},300);return()=>clearTimeout(s)},1e3);return()=>clearTimeout(i)},[t]),v.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${n?"opacity-100":"opacity-0"}
      `,children:[v.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),v.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${n?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[v.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-red-300 via-red-400 to-red-300
            animate-pulse
            drop-shadow-[0_0_20px_rgba(239,68,68,0.8)]
          `,children:e}),v.jsx("div",{className:`
            absolute top-1/2 left-0 w-full h-1 pointer-events-none
            ${n?"animate-horizontalScan":""}
          `,style:{background:"linear-gradient(to right, rgba(239, 68, 68, 0) 0%, rgba(239, 68, 68, 0.8) 50%, rgba(239, 68, 68, 0) 100%)",boxShadow:"0 0 10px rgba(239, 68, 68, 0.8), 0 0 20px rgba(239, 68, 68, 0.4)",transform:"translateY(-50%)"}})]}),v.jsx("style",{children:`
        @keyframes horizontalScan {
          0% {
            transform: translateX(-100%) translateY(-50%);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          90% {
            opacity: 1;
          }
          100% {
            transform: translateX(100%) translateY(-50%);
            opacity: 0;
          }
        }

        .animate-horizontalScan {
          animation: horizontalScan 800ms ease-in-out;
        }
      `})]})},gV=({phaseText:e,subtitle:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1500);return()=>clearTimeout(s)},[n]),v.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[v.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),v.jsxs("div",{className:`
          relative flex flex-col items-center
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[v.jsx("h1",{className:`
            text-6xl font-orbitron font-black uppercase tracking-widest text-center
            phase-announcement-text
            ${r?"phase-announcement-shine":""}
          `,style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:e}),t&&v.jsx("p",{className:`
              text-2xl font-orbitron font-medium uppercase tracking-wider text-center
              text-cyan-300/80 mt-4
              transition-all duration-300
              ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
            `,children:t}),v.jsx("div",{className:`
            mt-8 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent
            transition-all duration-500
            ${r?"w-96 opacity-100":"w-0 opacity-0"}
          `}),v.jsx("div",{className:`
            absolute inset-0 pointer-events-none overflow-hidden
          `,children:v.jsx("div",{className:`
              absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent
              phase-announcement-scanline
              ${r?"phase-announcement-scanline-active":""}
            `})})]})]})},yV=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=E.useState(0);E.useEffect(()=>{setTimeout(()=>l(1),50);const g=r*.7;setTimeout(()=>l(0),g);const b=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(b)}},[r,i]);const u=t.x-e.x,p=t.y-e.y,f=Math.sqrt(u*u+p*p),h=Math.atan2(p,u)*(180/Math.PI),m=Math.max(3,2+n*1.5);return v.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${f}px`,height:`${m}px`,transformOrigin:"0 50%",transform:`rotate(${h}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[v.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${m*2}px rgba(255, 0, 0, 0.8), 0 0 ${m*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),v.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},vV=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=E.useState([]);return E.useEffect(()=>{const u=[];for(let h=0;h<16;h++){const m=Math.PI*2*h/16;u.push({id:h,angle:m,delay:h/16*200})}l(u);const f=setTimeout(()=>{i?.()},n);return()=>clearTimeout(f)},[n,i]),v.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},Iw=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:p,addLogEntry:f,resetGame:h,processAction:m,gameStateManager:g,p2pManager:b}=Ri(),{getEffectiveStats:S,getEffectiveShipStats:A,gameDataService:C}=Rp(),P=!0,[T,O]=E.useState(!1),[k,N]=E.useState(!1),[D,M]=E.useState([]),[j,U]=E.useState([]),[K,H]=E.useState([]),[W,re]=E.useState([]),[le,ne]=E.useState([]),[L,q]=E.useState([]),[ue,ye]=E.useState([]),[R,F]=E.useState([]),[X,ae]=E.useState(!1),[me,z]=E.useState(null),[te,ve]=E.useState(null),[pe,oe]=E.useState(null),[de,be]=E.useState(null),[fe,Qe]=E.useState(!1),[Ge,Bt]=E.useState(!1),[mt,pt]=E.useState(null),[fr,Kr]=E.useState(!1),[Wo,Gi]=E.useState(!1),[Ip,Cl]=E.useState(!1),[Ke,Xt]=E.useState(null),[Hi,hn]=E.useState(null),[Wr,Tn]=E.useState(null),[Pl,ex]=E.useState(null),[Xo,Xr]=E.useState(null),[Qo,Qr]=E.useState([]),[Zo,Qa]=E.useState(!1),[Lp,gu]=E.useState(null),[Zr,qi]=E.useState(null),[Za,yu]=E.useState(null),[wl,Jo]=E.useState("drones"),[es,Yi]=E.useState(!0),[vu,tx]=E.useState([]),[$n,Ut]=E.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[On,Fi]=E.useState({}),[gt,Jr]=E.useState(null),[Vi,ts]=E.useState([]),[mn,Lr]=E.useState(null),[pr,Bn]=E.useState(null),[zt,_n]=E.useState(null),[ut,ns]=E.useState([]),[Ki,on]=E.useState(null),[hr,rs]=E.useState(null),[ot,mr]=E.useState(null),[$p,Wi]=E.useState(null),[as,gr]=E.useState(null),[Tl,Ol]=E.useState(null),[Dn,pa]=E.useState(null),[_l,bu]=E.useState(!1),[Dl,kt]=E.useState(null),[Xi,is]=E.useState(null),[yr,os]=E.useState(null),[Ja,ei]=E.useState(0),[gn,ti]=E.useState(0),[Nl,ss]=E.useState(null),[ni,kl]=E.useState(null),[Bp,Qi]=E.useState(null),[Ml,jl]=E.useState(null),[Up,xu]=E.useState(null),[zp,Su]=E.useState(0),ha=E.useRef(null),ma=E.useRef({}),ls=E.useRef({}),Un=E.useRef(null),zn=E.useRef(!1),{explosions:Au,triggerExplosion:cs}=iV(ma,Un);fV(g,ma,ls,s,l,cs,Xy,Un,M,ae,U,H,re,ne,q,ye,F),E.useEffect(()=>{pf.initialize(g,g.actionProcessor,()=>e.gameMode!=="local",Hr),console.log("🔧 GameFlowManager initialized")},[]),E.useEffect(()=>{const $=ge=>{const{type:he,phase:Se,playerId:Le,data:Me}=ge;if(console.log(`🔔 App.jsx received PhaseManager event: ${he}`,{phase:Se,playerId:Le}),he==="phaseTransition"){const{newPhase:qe,previousPhase:Xn,firstPlayerResult:va}=ge;console.log(`🔄 App.jsx handling phase transition: ${Xn} → ${qe}`),mt===Xn&&pt(null),qe==="deploymentComplete"&&(console.log("🎯 Deployment complete phase started, showing modal"),Qe(!0))}else he==="phaseComplete"&&(console.log(`🎯 App.jsx handling phase completion: ${Se}`),mt===Se&&pt(null),Se==="determineFirstPlayer"&&console.log("✅ Both players acknowledged first player determination"),Se==="deploymentComplete"&&console.log("✅ Both players acknowledged deployment complete"))},Z=pf.subscribe($);return()=>{Z()}},[i,n,z,mt]);const{turnPhase:st,turn:$r,currentPlayer:yn,firstPlayerOfRound:us,firstPasserOfPreviousRound:ds,firstPlayerOverride:ga,passInfo:Gt,winner:vn,unplacedSections:Gp,shieldsToAllocate:fs,opponentShieldsToAllocate:ps,gameLog:hs,placedSections:Nn}=e,[ri,Rl]=E.useState(yn),Zi=E.useRef(Gt),Hp=E.useRef(st),Il=E.useRef(vn);E.useEffect(()=>{Zi.current=Gt},[Gt]),E.useEffect(()=>{Hp.current=st},[st]),E.useEffect(()=>{Il.current=vn},[vn]);const Oe=s(),Ie=l(),ea=u(),Ji=p();if(!Oe||!Ie)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});E.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]);const Eu=E.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);E.useEffect(()=>{if(!i())return;const $=ge=>{if(console.log("🔥 P2P Event received in App:",ge),ge.type==="PHASE_COMPLETED"){const{phase:he}=ge.data||ge;console.log(`🔥 Opponent completed phase: ${he}`)}};return b.subscribe($)},[i,b]);const ms=Oe?A(Oe,ea):null,Cu=Ie?A(Ie,Ji):null,gs=E.useMemo(()=>Oe?Object.values(Oe.dronesOnBoard).flat().length:0,[Oe?.dronesOnBoard]),Pu=E.useMemo(()=>Ie?Object.values(Ie.dronesOnBoard).flat().length:0,[Ie?.dronesOnBoard]),qp=E.useMemo(()=>[...Oe.activeDronePool].sort(($,Z)=>$.class!==Z.class?$.class-Z.class:$.name.localeCompare(Z.name)),[Oe.activeDronePool]);E.useMemo(()=>Oe?Object.keys(Oe.shipSections).some($=>Oe.shipSections[$].allocatedShields<C.getEffectiveSectionMaxShields($,Oe,ea)):!1,[Oe.shipSections,ea,C]);const Xe=E.useCallback(async($,Z)=>{if(e.gameMode==="guest"){console.log("[GUEST] Processing action locally (optimistic) and sending to host:",$,Z),g.trackOptimisticAction($,Z);const ge=await m($,Z);return b.sendActionToHost($,Z),ge}return await m($,Z)},[e.gameMode,m,b,g]);E.useCallback($=>{if(console.log(`🔥 sendPhaseCompletion called for phase: ${$}`),i()){const Z={type:"PHASE_COMPLETED",data:{phase:$}};console.log("🔥 Sending phase completion message:",Z),b.sendData(Z),console.log(`🔥 Sent phase completion: ${$}`)}else console.log("🔥 Not multiplayer, skipping network send")},[i,b]),E.useCallback(async()=>{Zr&&!Zr.card.effect.goAgain?await Xe("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):Zr&&Zr.card.effect.goAgain&&!vn&&await Xe("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),qi(null)},[m,n,r,Zr,vn]);const Yp=E.useCallback(async()=>{await Xe("resetShields",{playerId:n()})},[Xe,n]),Fp=E.useCallback(async()=>{await Xe("commitment",{playerId:n(),phase:"allocateShields",actionData:{committed:!0}})},[Xe,n]);E.useEffect(()=>{const{validAbilityTargets:$,validCardTargets:Z}=ke.calculateAllValidTargets(gt,mn,ot,zt,Oe,Ie);ts($),ns(Z),gt&&(_n(null),Lr(null))},[gt,mn,zt,Oe,Ie,ot]);const ta=()=>{gt&&(Jr(null),Xt(null))},sn=()=>{_n(null),mr(null)},ys=E.useCallback(async $=>{if(zn.current){console.warn("Attack already in progress. Aborting duplicate call.");return}zn.current=!0;try{await new Promise(ge=>setTimeout(ge,250));const Z=await Xe("attack",{attackDetails:$});if(Z?.needsInterceptionDecision){console.log("🛡️ [APP] Interception decision needed, showing modal..."),Xr(Z.interceptionData),zn.current=!1;return}}catch(Z){console.error("Error in resolveAttack:",Z)}finally{zn.current=!1}},[cs,m,n,r]),wu=E.useCallback(async($,Z,ge)=>{try{const he=await Xe("ability",{droneId:Z.id,abilityIndex:Z.abilities.findIndex(Se=>Se.name===$.name),targetId:ge?.id||null});ta()}catch(he){console.error("Error in resolveAbility:",he),ta()}},[m,n]),Vp=E.useCallback(async($,Z,ge)=>{const he=await Xe("shipAbility",{ability:$,sectionName:Z,targetId:ge?.id||null,playerId:n()});if(he.mandatoryAction){pa(he.mandatoryAction),Jo("hand"),Yi(!0),Lr(null),Bn(null);return}if(he.requiresShieldReallocation){Lr(null),Bn(null);return}return Lr(null),Bn(null),he},[m,n]),eo=E.useCallback(async($,Z,ge,he=null)=>{if(ge===r()){let Le="",Me="";if(Z)if(Z.name){if(Le=Z.name,Z.id&&Z.owner){const qe=Z.owner===n()?Oe:Ie;for(const[Xn,va]of Object.entries(qe.dronesOnBoard))if(va.some(ao=>ao.id===Z.id)){Me=Xn.replace("lane","Lane ");break}}}else Z.id.startsWith("lane")?(Le=`Lane ${Z.id.slice(-1)}`,Me=`Lane ${Z.id.slice(-1)}`):Le=Z.id.replace(/([A-Z])/g," $1").replace(/^./,qe=>qe.toUpperCase());qi({card:$,targetName:Le,targetLane:Me})}const Se=await Xe("cardPlay",{card:$,targetId:Z?.id||null,playerId:ge});if(Se.needsCardSelection){if(Se.needsCardSelection.type==="single_move"||Se.needsCardSelection.type==="multi_move"){mr({card:Se.needsCardSelection.card,phase:Se.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}is({...Se.needsCardSelection,onConfirm:Le=>{Kp(Le,Se.needsCardSelection,$,Z,ge,he,Se.newPlayerStates),is(null)},onCancel:()=>{is(null),ge===n()&&(sn(),on(null))}});return}return ge===n()&&(sn(),on(null)),Se},[m,n,Oe,Ie]),Kp=E.useCallback(($,Z,ge,he,Se,Le,Me=null)=>{const{searchedCards:qe,remainingDeck:Xn,discardPile:va,shuffleAfter:ao}=Z,ba=qe.filter(Sa=>{const uh=Sa.instanceId||`${Sa.id}-${Sa.name}`;return!$.some(na=>(na.instanceId||`${na.id}-${na.name}`)===uh)}),ai=Me||{player1:Oe,player2:Ie},Tt=Se===n()?ai[n()]:ai[r()],io=[...Tt.hand,...$];let vs=[...Xn,...ba];ao&&(vs=vs.sort(()=>.5-Math.random()));const xa={...Tt,deck:vs,hand:io,discardPile:va};f({player:Tt.name,actionType:"CARD_SELECTION",source:ge.name,target:`Selected ${$.length} cards`,outcome:`Drew: ${$.map(Sa=>Sa.name).join(", ")}`},"handleCardSelection",Se===r()?Le:null);const Iu={[n()]:Se===n()?{...Tt,deck:xa.deck,hand:xa.hand,discardPile:xa.discardPile}:ai[n()],[r()]:Se===r()?{...Tt,deck:xa.deck,hand:xa.hand,discardPile:xa.discardPile}:ai[r()]},$l=ke.finishCardPlay(ge,Se,Iu);g.setPlayerStates($l.newPlayerStates.player1,$l.newPlayerStates.player2),Se===n()&&(sn(),on(null))},[Oe,Ie,f]),Wp=E.useCallback(async($,Z,ge,he)=>{await Xe("movementCompletion",{card:$,movementType:"multi_move",drones:Z,fromLane:ge,toLane:he,playerId:n()}),mr(null),sn()},[m,n]),Xp=E.useCallback(async($,Z,ge,he)=>{await Xe("movementCompletion",{card:$,movementType:"single_move",drones:[Z],fromLane:ge,toLane:he,playerId:n()}),mr(null),sn()},[m,n]),Tu=$=>{es?wl===$?Yi(!1):Jo($):(Yi(!0),Jo($))};E.useEffect(()=>{const{validAbilityTargets:$,validCardTargets:Z}=ke.calculateAllValidTargets(gt,mn,ot,zt,Oe,Ie);ts($),ns(Z),gt&&(_n(null),Lr(null))},[gt,mn,zt,Oe,Ie,ot]),E.useEffect(()=>{vn&&!fr&&Kr(!0)},[vn,fr]),E.useEffect(()=>{if(st==="action"){const $=ke.calculatePotentialInterceptors(Ke,Oe,Ie,Eu());Qr($)}else Qr([])},[Ke,st,Oe,Ie,ke,ea,Ji]),E.useEffect(()=>{const $=n();if(e.interceptionPending){const{attackingPlayerId:Z,defendingPlayerId:ge,attackDetails:he,interceptors:Se}=e.interceptionPending;Z===$?Qa(!0):ge===$&&Xr({attackDetails:he,interceptors:Se})}else Qa(!1),Xr(null)},[e.interceptionPending,n]),E.useEffect(()=>{if(e.lastInterception){const{interceptor:$,timestamp:Z}=e.lastInterception;gu({droneId:$.id,timestamp:Z})}},[e.lastInterception]),E.useEffect(()=>{hn(null)},[Ke]),E.useEffect(()=>{if(Ke&&!gt&&st==="action"){const $=Xy(ma.current[Ke.id],Un.current);$&&Ut({visible:!0,start:$,end:{x:$.x,y:$.y}})}else Ut($=>({...$,visible:!1}))},[Ke,st,gt]),E.useEffect(()=>{const $=ge=>{if($n.visible&&ha.current&&Un.current){const he=Un.current.getBoundingClientRect(),Se=ge.clientX-he.left,Le=ge.clientY-he.top;ha.current.setAttribute("x2",Se),ha.current.setAttribute("y2",Le)}},Z=Un.current;return Z?.addEventListener("mousemove",$),()=>{Z?.removeEventListener("mousemove",$)}},[$n.visible]),E.useEffect(()=>{vn&&zn.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),zn.current=!1)},[vn,st,yn]),E.useEffect(()=>{e.gameMode==="guest"&&(console.log("✅ [GUEST RENDER] Emitting render_complete event"),g.emit("render_complete"))},[e,g]);const Qp=()=>{h(),zn.current=!1,Xt(null),z(null),Jr(null),ts([]),pa(null),bu(!1),kt(null),_n(null),ns([]),on(null),Kr(!1)},Zp=async $=>{const{turnPhase:Z}=e;Z==="allocateShields"?await Xe("addShield",{sectionName:$,playerId:n()}):await Xe("reallocateShields",{action:"add",sectionName:$,playerId:n()})},Jp=async $=>{if(gn<=0||Oe.shipSections[$].allocatedShields<=0)return;(await Xe("reallocateShields",{action:"remove",sectionName:$,playerId:n()})).success&&(ti(he=>he-1),ei(he=>he+1))},eh=async $=>{if(Ja<=0)return;(await Xe("reallocateShields",{action:"add",sectionName:$,playerId:n()})).success&&ei(ge=>ge-1)},th=()=>{kl(JSON.parse(JSON.stringify(Oe.shipSections))),os("adding")},nh=async()=>{yr==="removing"?(await Xe("reallocateShields",{action:"restore",originalShipSections:Nl,playerId:n()}),ti(Ml.ability.effect.value.maxShields),ei(0)):yr==="adding"&&(await Xe("reallocateShields",{action:"restore",originalShipSections:ni,playerId:n()}),ei(gn+Ja))},rh=async()=>{await Xe("reallocateShields",{action:"restore",originalShipSections:Nl,playerId:n()}),os(null),ti(0),ei(0),ss(null),kl(null),jl(null)},ah=()=>{Bn({ability:Ml.ability,sectionName:Ml.sectionName,target:null})},ih=async()=>{console.log("🎯 App.jsx: Acknowledging deployment complete");const $=n(),Z=await Xe("acknowledgeDeploymentComplete",{playerId:$});Z.success&&(Qe(!1),Z.data?.bothPlayersComplete||pt("deploymentComplete"))},Ll=$=>{if(yr){yr==="removing"?Jp($):yr==="adding"&&eh($);return}st==="allocateShields"&&Zp($)},to=$=>{Gt[n()+"Passed"]||(Ke&&Ke.name===$.name?Xt(null):(Xt($),Jr(null),sn()))},Ou=async $=>{try{const Z=await Xe("deployment",{droneData:Ke,laneId:$,playerId:n(),turn:$r});Z.success?Xt(null):z({title:Z.error,text:Z.message,isBlocking:!0})}catch(Z){console.error("Error executing deployment:",Z),z({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},_u=$=>{if(!(!Ke||yn!==n()||Gt[n()+"Passed"])){if($r===1){const Z=ke.validateDeployment(Oe,Ke,$r,gs,ms);if(!Z.isValid){z({title:Z.reason,text:Z.message,isBlocking:!0});return}const{budgetCost:ge,energyCost:he}=Z;if(he>0){ve({lane:$,budgetCost:ge,energyCost:he});return}}Ou($)}},Du=async()=>{Gt[`${n()}Passed`]||await Xe("playerPass",{playerId:n(),playerName:Oe.name,turnPhase:st,passInfo:Gt,opponentPlayerId:r()})},Nu=($,Z,ge)=>{if($.stopPropagation(),st!=="action"||yn!==n()||Gt[n()+"Passed"])return;const he=ge.cost||{};if(Z.isExhausted&&he.exhausts!==!1){z({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(he.energy&&Oe.energy<he.energy){z({title:"Not Enough Energy",text:`This ability costs ${he.energy} energy, but you only have ${Oe.energy}.`,isBlocking:!0});return}if(ge.targeting?.type==="LANE"&&ge.targeting?.location==="SAME_LANE"){const Se=ke.getLaneOfDrone(Z.id,Oe);if(Se){rs({ability:ge,drone:Z,target:{id:Se,owner:n()}});return}}gt&&gt.drone.id===Z.id?ta():(Jr({drone:Z,ability:ge}),Xt(Z),sn())},ku=($,Z,ge)=>{if($.stopPropagation(),!(st!=="action"||!t()||Gt[`${n()}Passed`])){if(Oe.energy<ge.cost.energy){z({title:"Not Enough Energy",text:`This ability costs ${ge.cost.energy} energy, but you only have ${Oe.energy}.`,isBlocking:!0});return}mn?.ability.id===ge.id?Lr(null):ge.targeting?(Lr({sectionName:Z.name,ability:ge}),Xt(null),ta(),sn()):ge.effect.type==="REALLOCATE_SHIELDS"?(os("removing"),ti(ge.effect.value.maxShields),ei(0),ss(JSON.parse(JSON.stringify(Oe.shipSections))),jl({ability:ge,sectionName:Z.name})):Bn({ability:ge,sectionName:Z.name,target:null})}},Mu=($,Z,ge)=>{if($.stopPropagation(),console.log(`--- handleTokenClick triggered for ${Z.name} (isPlayer: ${ge}) ---`),ot&&ot.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:he,maxSelection:Se}=ot;he.some(Me=>Me.id===Z.id)?mr(Me=>({...Me,selectedDrones:Me.selectedDrones.filter(qe=>qe.id!==Z.id)})):he.length<Se&&mr(Me=>({...Me,selectedDrones:[...Me.selectedDrones,Z]}));return}if(Vi.some(he=>he.id===Z.id)||ut.some(he=>he.id===Z.id)){console.log("Action: Targeting for an active card/ability."),ya(Z,"drone",ge);return}if(st==="action"&&t()&&Ke&&!Ke.isExhausted&&!ge){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",Ke.name,`(ID: ${Ke.id})`),console.log("Target clicked:",Z.name,`(ID: ${Z.id})`);const[he]=Object.entries(Oe.dronesOnBoard).find(([Le,Me])=>Me.some(qe=>qe.id===Ke.id))||[],[Se]=Object.entries(Ie.dronesOnBoard).find(([Le,Me])=>Me.some(qe=>qe.id===Z.id))||[];if(console.log("Calculated Attacker Lane:",he),console.log("Calculated Target Lane:",Se),he&&Se&&he===Se)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),Ie.dronesOnBoard[Se].some(qe=>S(qe,Se).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),z({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Processing attack...");const qe={attacker:Ke,target:Z,targetType:"drone",lane:he,attackingPlayer:n()};ys(qe),Xt(null)}else console.log("FAILURE: Lanes do not match or could not be found."),z({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(ot&&ot.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:he,maxSelection:Se}=ot;he.some(Me=>Me.id===Z.id)?mr(Me=>({...Me,selectedDrones:Me.selectedDrones.filter(qe=>qe.id!==Z.id)})):he.length<Se&&mr(Me=>({...Me,selectedDrones:[...Me.selectedDrones,Z]}));return}if(Dn?.type==="destroy"&&ge){console.log("Action: Mandatory destruction."),kt({type:"destroy",target:Z,onConfirm:()=>ro(Z),onCancel:()=>kt(null),text:`Are you sure you want to destroy your ${Z.name}?`});return}if(ge&&st==="action"&&t()&&!Gt[`${n()}Passed`]){if(Z.isExhausted){console.log("Action prevented: Drone is exhausted.");return}Ke?.id===Z.id?(console.log("Action: Deselecting drone",Z.name),Xt(null)):(console.log("Action: Selecting drone",Z.name),Xt(Z),ta(),sn());return}console.log("Action: Fallback - showing drone details."),be(Z)},ya=($,Z,ge)=>{if(mn&&Vi.some(he=>he.id===$.id)){Bn({ability:mn.ability,sectionName:mn.sectionName,target:$});return}if(gt&&Vi.some(he=>he.id===$.id)){wu(gt.ability,gt.drone,$);return}if(zt&&ut.some(he=>he.id===$.id)){const he=ge?n():r();on({card:zt,target:{...$,owner:he}});return}if(st==="action"&&t()&&Ke&&!Ke.isExhausted&&!ge&&Z==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",Ke.name,`(ID: ${Ke.id})`),console.log("Target clicked:",$.name,`(Type: ${Z})`);const[he]=Object.entries(Oe.dronesOnBoard).find(([Se,Le])=>Le.some(Me=>Me.id===Ke.id))||[];if(console.log("Calculated Attacker Lane:",he),he){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const Se=Ie.dronesOnBoard[he];if(Se&&Se.some(Me=>S(Me,he).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),z({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Processing attack...");const Me={attacker:Ke,target:$,targetType:"section",lane:he,attackingPlayer:n()};ys(Me),Xt(null)}}else console.log("FAILURE: Could not determine attacker lane."),z({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}Z==="drone"&&be($)},oh=($,Z,ge)=>{if($.stopPropagation(),gt&&gt.ability.targeting.type==="LANE"){const he=ge?n():r();if(Vi.some(Se=>Se.id===Z&&Se.owner===he)){rs({ability:gt.ability,drone:gt.drone,target:{id:Z,owner:he}});return}}if(ot&&ge&&ut.some(he=>he.id===Z)){const{phase:he,sourceLane:Se,selectedDrones:Le}=ot;if(he==="select_source_lane"){mr(Me=>({...Me,phase:"select_drones",sourceLane:Z}));return}if(he==="select_destination_lane"){Wp(ot.card,Le,Se,Z);return}}if(ot&&ot.card.effect.type==="SINGLE_MOVE"&&ot.phase==="select_destination"&&ge){ut.some(he=>he.id===Z)&&Xp(ot.card,ot.selectedDrone,ot.sourceLane,Z);return}if(zt&&zt.targeting.type==="LANE"){const he=ge?n():r();if(ut.some(Se=>Se.id===Z&&Se.owner===he)){on({card:zt,target:{id:Z,owner:he}});return}}if(zt){sn();return}if(gt){ta();return}if(st==="deployment"&&ge)_u(Z);else if(st==="action"&&ge&&Ke){const[he]=Object.entries(Oe.dronesOnBoard).find(([Me,qe])=>qe.some(Xn=>Xn.id===Ke.id))||[];if(!he)return;const Se=parseInt(he.replace("lane",""),10),Le=parseInt(Z.replace("lane",""),10);Math.abs(Se-Le)===1?oe({drone:Ke,from:he,to:Z}):z({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},sh=async $=>{if(!(st!=="action"||!t()||Gt[`${n()}Passed`])&&!(Oe.energy<$.cost)){if($.effect.type==="MULTI_MOVE"||$.effect.type==="SINGLE_MOVE"){ot&&ot.card.instanceId===$.instanceId?sn():await eo($,null,n());return}if(zt?.instanceId===$.instanceId)sn();else if($.name==="System Sabotage"){const Z=ke.getValidTargets(n(),null,$,Oe,Ie);Wi({card:$,targets:Z,opponentState:Ie}),_n(null),Jr(null),Xt(null)}else if($.type==="Upgrade"){const Z=ke.getValidTargets(n(),null,$,Oe,Ie);Z.length>0?(gr({card:$,targets:Z}),_n(null),Jr(null),Xt(null)):z({title:"No Valid Targets",text:`There are no drone types that can accept the '${$.name}' upgrade right now.`,isBlocking:!0})}else $.targeting?(_n($),Xt(null),Jr(null)):(on({card:$,target:null}),_n(null),Jr(null),Xt(null))}},lh=async $=>{const Z=Dn;await Xe("optionalDiscard",{playerId:n(),cardsToDiscard:[$],isMandatory:!0}),kt(null);const ge=Z.count-1;ge<=0?(pa(null),Z.fromAbility):pa(he=>({...he,count:ge}))},ju=async $=>{await Xe("optionalDiscard",{playerId:n(),cardsToDiscard:[$],isMandatory:!1}),Su(Z=>Z+1),kt(null)},Ru=async()=>{console.log("[OPTIONAL DISCARD] Player completing optional discard phase"),Su(0),await Xe("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}})},no=()=>{const $=g.actionProcessor?.getPhaseCommitmentStatus("optionalDiscard");return console.log("[OPTIONAL DISCARD] Commitment status:",$),$?.bothComplete||!1},ro=async $=>{const Z=await Xe("destroyDrone",{droneId:$.id,playerId:n()});if(!Z.success){console.error("Failed to destroy drone:",Z.error);return}pa(ge=>{const he=ge.count-1;if(he<=0){if(Pu>Cu.totals.cpuLimit&&e.gameMode==="local"){const Le=Object.values(Ie.dronesOnBoard).flat().length-A(Ie,Ji).totals.cpuLimit;for(let Me=0;Me<Le;Me++){const qe=Object.entries(Ie.dronesOnBoard).flatMap(([ba,ai])=>ai.map(Tt=>({...Tt,lane:ba})));if(qe.length===0)break;const Xn=Math.min(...qe.map(ba=>ba.class)),va=qe.filter(ba=>ba.class===Xn),ao=va[Math.floor(Math.random()*va.length)];Xe("destroyDrone",{droneId:ao.id,playerId:r()})}}return null}return{...ge,count:he}}),kt(null)},ch=()=>{if(hs.length===0){alert("The game log is empty.");return}const $=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],Z=hs.map(Le=>[Le.round,Le.player,Le.actionType,Le.source,Le.target,Le.outcome,Le.debugSource||"N/A"].map(qe=>`"${String(qe).replace(/"/g,'""')}"`).join(",")),ge=[$.join(","),...Z].join(`
`),he=new Blob([ge],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a");if(Se.download!==void 0){const Le=URL.createObjectURL(he);Se.setAttribute("href",Le),Se.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Se.style.visibility="hidden",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)}};return v.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col relative",ref:Un,onClick:()=>{ta(),sn()},children:[v.jsx(xY,{}),v.jsx(kF,{visible:$n.visible,start:$n.start,end:$n.end,lineRef:ha}),Au.map($=>v.jsx(MF,{top:$.top,left:$.left,size:$.size},$.id)),D.map($=>v.jsx(pV,{droneData:$.droneData,startPos:$.startPos,endPos:$.endPos,config:$.config,onComplete:$.onComplete},$.id)),j.map($=>v.jsx(sV,{position:$.position,color:$.color,intensity:$.intensity,onComplete:$.onComplete},$.id)),K.map($=>v.jsx(lV,{visualType:$.visualType,startPos:$.startPos,endPos:$.endPos,duration:$.duration,onComplete:$.onComplete},$.id)),W.map($=>v.jsx(hV,{card:$.card,label:$.label,onComplete:$.onComplete},$.id)),le.map($=>v.jsx(gV,{phaseText:$.phaseText,subtitle:$.subtitle,onComplete:$.onComplete},$.id)),R.map($=>v.jsx(mV,{label:$.label,onComplete:$.onComplete},$.id)),L.map($=>v.jsx(yV,{startPos:$.startPos,endPos:$.endPos,attackValue:$.attackValue,duration:$.duration,onComplete:$.onComplete},$.id)),ue.map($=>v.jsx(vV,{top:$.top,left:$.left,color:$.color,duration:$.duration,onComplete:$.onComplete},$.id)),X&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),v.jsx(SY,{localPlayerState:Oe,opponentPlayerState:Ie,localPlayerEffectiveStats:ms,opponentPlayerEffectiveStats:Cu,turnPhase:st,turn:$r,passInfo:Gt,firstPlayerOfRound:us,shieldsToAllocate:fs,opponentShieldsToAllocate:ps,shieldsToRemove:gn,shieldsToAdd:Ja,reallocationPhase:yr,totalLocalPlayerDrones:gs,totalOpponentPlayerDrones:Pu,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:yn,isMultiplayer:i,handlePlayerPass:Du,handleReset:Qp,handleResetShields:Yp,handleConfirmShields:Fp,handleCancelReallocation:rh,handleResetReallocation:nh,handleContinueToAddPhase:th,handleConfirmReallocation:ah,mandatoryAction:Dn,multiSelectState:ot,AI_HAND_DEBUG_MODE:P,setShowAiHandModal:O,onShowDebugModal:()=>N(!0)}),!t()&&(st==="deployment"||st==="action")&&v.jsx("div",{style:{position:"fixed",inset:0,background:"transparent",zIndex:40,cursor:"not-allowed"},onClick:$=>$.stopPropagation()}),v.jsx(PY,{localPlayerState:Oe,opponentPlayerState:Ie,localPlacedSections:ea,opponentPlacedSections:Ji,selectedCard:zt,validCardTargets:ut,abilityMode:gt,validAbilityTargets:Vi,multiSelectState:ot,turnPhase:st,reallocationPhase:yr,shipAbilityMode:mn,hoveredTarget:Hi,selectedDrone:Ke,recentlyHitDrones:vu,potentialInterceptors:Qo,droneRefs:ma,sectionRefs:ls,mandatoryAction:Dn,gameEngine:ke,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:Eu,passInfo:Gt,handleTargetClick:ya,handleLaneClick:oh,handleShipSectionClick:Ll,handleShipAbilityClick:ku,handleTokenClick:Mu,handleAbilityIconClick:Nu,setHoveredTarget:hn,interceptedBadge:Lp}),v.jsx(TF,{localPlayerState:Oe,localPlayerEffectiveStats:ms,sortedLocalActivePool:qp,gameLog:hs,footerView:wl,isFooterOpen:es,multiSelectState:ot,selectedCard:zt,turnPhase:st,mandatoryAction:Dn,handleFooterButtonClick:Tu,handleCardClick:sh,cancelCardSelection:sn,downloadLogAsCSV:ch,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Wr,setHoveredCardId:Tn,setIsViewDiscardModalOpen:Cl,setIsViewDeckModalOpen:Gi,handleToggleDroneSelection:to,selectedDrone:Ke,setViewUpgradesModal:Ol,handleConfirmMandatoryDiscard:lh,setConfirmationModal:kt,turn:$r,passInfo:Gt,validCardTargets:ut,gameEngine:ke,opponentPlayerState:Ie,setAiDecisionLogToShow:yu,optionalDiscardCount:zp,handleRoundStartDraw:Ru,handleRoundStartDiscard:ju,checkBothPlayersHandLimitComplete:no}),me&&v.jsx(Ko,{title:me.title,text:me.text,onClose:me.onClose===null?null:me.onClose||(()=>z(null)),children:me.children}),v.jsx(GF,{show:fe,firstPlayerOfRound:us,localPlayerId:n(),localPlayerName:Oe.name,opponentPlayerName:Ie.name,onContinue:ih}),v.jsx(HF,{show:Ge,onContinue:()=>Bt(!1)}),v.jsx(qF,{show:!!mt,phase:mt,opponentName:Ie.name,roomCode:b.roomCode}),v.jsx(WF,{deploymentConfirmation:te,show:!!te,onCancel:()=>ve(null),onConfirm:async()=>{if(!te)return;const{lane:$}=te;ve(null),await Ou($)}}),v.jsx(XF,{moveConfirmation:pe,show:!!pe,onCancel:()=>oe(null),onConfirm:async()=>{if(!pe)return;const{drone:$,from:Z,to:ge}=pe;await Xe("move",{droneId:$.id,fromLane:Z,toLane:ge,playerId:n()}),oe(null),Xt(null)}}),v.jsx(ZF,{interceptionModal:Pl,show:!!Pl,onClose:Pl?.onClose}),v.jsx(QF,{choiceData:Xo,show:!!Xo,onIntercept:async $=>{const Z={...Xo.attackDetails,interceptor:$};Xr(null),setTimeout(async()=>{await ys(Z)},400)},onDecline:async()=>{const $={...Xo.attackDetails,interceptor:null};Xr(null),setTimeout(async()=>{await ys($)},400)},gameEngine:ke,turnPhase:st,isMyTurn:t,passInfo:Gt,getLocalPlayerId:n,localPlayerState:Oe,shipAbilityMode:mn,droneRefs:ma,mandatoryAction:Dn}),v.jsx(JF,{show:Zo,opponentName:Ie?.name||"Opponent"}),v.jsx(zF,{isOpen:!!de,drone:de,onClose:()=>be(null)}),Zr&&v.jsx(UF,{report:Zr,onClose:()=>qi(null)}),v.jsx(KF,{decisionLog:Za,show:!!Za,onClose:()=>yu(null),getLocalPlayerId:n}),v.jsx(VF,{winner:vn,localPlayerId:n(),show:vn&&fr,onClose:()=>Kr(!1)}),v.jsx(FF,{mandatoryAction:Dn,effectiveStats:ms,show:Dn&&_l,onClose:()=>bu(!1)}),v.jsx(YF,{confirmationModal:Dl,show:!!Dl}),v.jsx(NF,{viewUpgradesModal:Tl,setViewUpgradesModal:Ol,destroyUpgradeModal:$p,setDestroyUpgradeModal:Wi,upgradeSelectionModal:as,setUpgradeSelectionModal:gr,resolveCardPlay:eo,getLocalPlayerId:n,cancelCardSelection:sn}),v.jsx(eV,{cardConfirmation:Ki,show:!!Ki,onCancel:()=>on(null),onConfirm:async()=>{const $=Ki.card,Z=Ki.target;on(null),setTimeout(async()=>{await eo($,Z,n())},400)}}),v.jsx(tV,{abilityConfirmation:hr,show:!!hr,onCancel:()=>rs(null),onConfirm:()=>{wu(hr.ability,hr.drone,hr.target),rs(null)}}),v.jsx(rV,{opponentPlayerState:Ie,show:T,debugMode:P,onClose:()=>O(!1)}),v.jsx(aV,{show:k,onClose:()=>N(!1),gameStateManager:g,gameDataService:C}),v.jsx(Rw,{isOpen:Wo,onClose:()=>Gi(!1),cards:Oe.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(Rw,{isOpen:Ip,onClose:()=>Cl(!1),cards:Oe.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(BF,{isOpen:!!Xi,onClose:Xi?.onCancel||(()=>is(null)),onConfirm:Xi?.onConfirm||(()=>{}),selectionData:Xi}),v.jsx(nV,{shipAbilityConfirmation:pr,show:!!pr,onCancel:()=>Bn(null),onConfirm:async()=>await Vp(pr.ability,pr.sectionName,pr.target)}),v.jsx(LF,{isVisible:!1,currentPlayer:yn,gameMode:e.gameMode,roomCode:b.roomCode,lastAction:null,localPlayerState:Oe,opponentPlayerState:Ie,getLocalPlayerId:n})]})};function bV(){const{gameState:e}=Ri(),[t,n]=E.useState(!0),r=E.useRef(!1);if(E.useEffect(()=>{const l=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(l)},[]),E.useEffect(()=>{if(e.gameMode==="guest"){console.log("🔄 Guest mode detected - skipping manager initialization");return}r.current?console.log("🔄 GameFlowManager already initialized, skipping..."):(pf.initialize(Re,Re.actionProcessor,()=>e.gameMode!=="local",Hr),Re.setGameFlowManager(pf),r.current=!0,console.log("🔄 GameFlowManager initialized in AppRouter (host/local mode)"))},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading EREMOS..."})});const i=!(e.appState==="inGame"&&!["droneSelection","placement"].includes(e.turnPhase));let s;switch(e.appState){case"menu":s=v.jsx(TA,{});break;case"lobby":s=v.jsx(xR,{});break;case"inGame":switch(e.turnPhase){case"droneSelection":s=v.jsx(AR,{});break;case"deckSelection":s=v.jsx(yY,{});break;case"placement":s=v.jsx(bY,{});break;case"gameInitializing":s=v.jsx(Iw,{});break;default:s=v.jsx(Iw,{})}break;default:console.warn("Unknown app state:",e.appState,"defaulting to menu"),s=v.jsx(TA,{})}return v.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto"},children:[i&&v.jsx(_N,{}),s]})}aM.createRoot(document.getElementById("root")).render(v.jsx($w.StrictMode,{children:v.jsx(bV,{})}));export{Ft as G,Pn as f};
