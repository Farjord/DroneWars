function ow(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function va(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bg={exports:{}},Fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA;function Uj(){if(PA)return Fc;PA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return Fc.Fragment=t,Fc.jsx=n,Fc.jsxs=n,Fc}var wA;function zj(){return wA||(wA=1,bg.exports=Uj()),bg.exports}var h=zj(),xg={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OA;function Hj(){if(OA)return qe;OA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function E(R,V,K){this.props=R,this.context=V,this.refs=A,this.updater=K||b}E.prototype.isReactComponent={},E.prototype.setState=function(R,V){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,V,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function T(){}T.prototype=E.prototype;function w(R,V,K){this.props=R,this.context=V,this.refs=A,this.updater=K||b}var O=w.prototype=new T;O.constructor=w,S(O,E.prototype),O.isPureReactComponent=!0;var _=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function j(R,V,K,ae,me,Se){return K=Se.ref,{$$typeof:e,type:R,key:V,ref:K!==void 0?K:null,props:Se}}function U(R,V){return j(R.type,V,void 0,void 0,void 0,R.props)}function q(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function L(R){var V={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(K){return V[K]})}var $=/\/+/g;function G(R,V){return typeof R=="object"&&R!==null&&R.key!=null?L(""+R.key):V.toString(36)}function Z(){}function X(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(Z,Z):(R.status="pending",R.then(function(V){R.status==="pending"&&(R.status="fulfilled",R.value=V)},function(V){R.status==="pending"&&(R.status="rejected",R.reason=V)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function re(R,V,K,ae,me){var Se=typeof R;(Se==="undefined"||Se==="boolean")&&(R=null);var Ae=!1;if(R===null)Ae=!0;else switch(Se){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(R.$$typeof){case e:case t:Ae=!0;break;case p:return Ae=R._init,re(Ae(R._payload),V,K,ae,me)}}if(Ae)return me=me(R),Ae=ae===""?"."+G(R,0):ae,_(me)?(K="",Ae!=null&&(K=Ae.replace($,"$&/")+"/"),re(me,V,K,"",function(xe){return xe})):me!=null&&(q(me)&&(me=U(me,K+(me.key==null||R&&R.key===me.key?"":(""+me.key).replace($,"$&/")+"/")+Ae)),V.push(me)),1;Ae=0;var Me=ae===""?".":ae+":";if(_(R))for(var Ne=0;Ne<R.length;Ne++)ae=R[Ne],Se=Me+G(ae,Ne),Ae+=re(ae,V,K,Se,me);else if(Ne=y(R),typeof Ne=="function")for(R=Ne.call(R),Ne=0;!(ae=R.next()).done;)ae=ae.value,Se=Me+G(ae,Ne++),Ae+=re(ae,V,K,Se,me);else if(Se==="object"){if(typeof R.then=="function")return re(X(R),V,K,ae,me);throw V=String(R),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function I(R,V,K){if(R==null)return R;var ae=[],me=0;return re(R,ae,"","",function(Se){return V.call(K,Se,me++)}),ae}function Y(R){if(R._status===-1){var V=R._result;V=V(),V.then(function(K){(R._status===0||R._status===-1)&&(R._status=1,R._result=K)},function(K){(R._status===0||R._status===-1)&&(R._status=2,R._result=K)}),R._status===-1&&(R._status=0,R._result=V)}if(R._status===1)return R._result.default;throw R._result}var Q=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function ve(){}return qe.Children={map:I,forEach:function(R,V,K){I(R,function(){V.apply(this,arguments)},K)},count:function(R){var V=0;return I(R,function(){V++}),V},toArray:function(R){return I(R,function(V){return V})||[]},only:function(R){if(!q(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},qe.Component=E,qe.Fragment=n,qe.Profiler=i,qe.PureComponent=w,qe.StrictMode=r,qe.Suspense=f,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,qe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return k.H.useMemoCache(R)}},qe.cache=function(R){return function(){return R.apply(null,arguments)}},qe.cloneElement=function(R,V,K){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ae=S({},R.props),me=R.key,Se=void 0;if(V!=null)for(Ae in V.ref!==void 0&&(Se=void 0),V.key!==void 0&&(me=""+V.key),V)!M.call(V,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&V.ref===void 0||(ae[Ae]=V[Ae]);var Ae=arguments.length-2;if(Ae===1)ae.children=K;else if(1<Ae){for(var Me=Array(Ae),Ne=0;Ne<Ae;Ne++)Me[Ne]=arguments[Ne+2];ae.children=Me}return j(R.type,me,void 0,void 0,Se,ae)},qe.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:s,_context:R},R},qe.createElement=function(R,V,K){var ae,me={},Se=null;if(V!=null)for(ae in V.key!==void 0&&(Se=""+V.key),V)M.call(V,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(me[ae]=V[ae]);var Ae=arguments.length-2;if(Ae===1)me.children=K;else if(1<Ae){for(var Me=Array(Ae),Ne=0;Ne<Ae;Ne++)Me[Ne]=arguments[Ne+2];me.children=Me}if(R&&R.defaultProps)for(ae in Ae=R.defaultProps,Ae)me[ae]===void 0&&(me[ae]=Ae[ae]);return j(R,Se,void 0,void 0,null,me)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(R){return{$$typeof:u,render:R}},qe.isValidElement=q,qe.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:Y}},qe.memo=function(R,V){return{$$typeof:d,type:R,compare:V===void 0?null:V}},qe.startTransition=function(R){var V=k.T,K={};k.T=K;try{var ae=R(),me=k.S;me!==null&&me(K,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(ve,Q)}catch(Se){Q(Se)}finally{k.T=V}},qe.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},qe.use=function(R){return k.H.use(R)},qe.useActionState=function(R,V,K){return k.H.useActionState(R,V,K)},qe.useCallback=function(R,V){return k.H.useCallback(R,V)},qe.useContext=function(R){return k.H.useContext(R)},qe.useDebugValue=function(){},qe.useDeferredValue=function(R,V){return k.H.useDeferredValue(R,V)},qe.useEffect=function(R,V,K){var ae=k.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(R,V)},qe.useId=function(){return k.H.useId()},qe.useImperativeHandle=function(R,V,K){return k.H.useImperativeHandle(R,V,K)},qe.useInsertionEffect=function(R,V){return k.H.useInsertionEffect(R,V)},qe.useLayoutEffect=function(R,V){return k.H.useLayoutEffect(R,V)},qe.useMemo=function(R,V){return k.H.useMemo(R,V)},qe.useOptimistic=function(R,V){return k.H.useOptimistic(R,V)},qe.useReducer=function(R,V,K){return k.H.useReducer(R,V,K)},qe.useRef=function(R){return k.H.useRef(R)},qe.useState=function(R){return k.H.useState(R)},qe.useSyncExternalStore=function(R,V,K){return k.H.useSyncExternalStore(R,V,K)},qe.useTransition=function(){return k.H.useTransition()},qe.version="19.1.1",qe}var NA;function Dl(){return NA||(NA=1,xg.exports=Hj()),xg.exports}var C=Dl();const pv=va(C),Gj=ow({__proto__:null,default:pv},[C]);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),DA=e=>{const t=qj(e);return t.charAt(0).toUpperCase()+t.slice(1)},lw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Fj=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},f)=>C.createElement("svg",{ref:f,...Vj,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:lw("lucide",i),...!s&&!Fj(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,p])=>C.createElement(d,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=(e,t)=>{const n=C.forwardRef(({className:r,...i},s)=>C.createElement(Kj,{ref:s,iconNode:t,className:lw(`lucide-${Yj(DA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=DA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Uf=It("bolt",Wj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Qj=It("check",Xj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Jj=It("chevron-down",Zj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ou=It("chevron-up",ek);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],hv=It("copy",tk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],_A=It("cpu",nk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ak=It("download",rk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qs=It("eye",ik);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],ok=It("gamepad",sk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ck=It("grid-3x3",lk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],dk=It("hand",uk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fl=It("loader-circle",fk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],hk=It("refresh-cw",pk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],l0=It("rocket",mk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yk=It("rotate-ccw",gk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MA=It("settings",vk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Sg=It("shield-check",bk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Sk=It("shield",xk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Ck=It("sword",Ak);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Tk=It("upload",Ek);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],wk=It("users",Pk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Nk=It("wifi-off",Ok);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],jA=It("wifi",Dk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cn=It("x",_k),cw={categories:{DEPLOYMENT:!1,DRONE_SELECTION:!1,DECK_SELECTION:!1,PLACEMENT:!1,PHASE_TRANSITIONS:!1,AI_DECISIONS:!1,MULTIPLAYER:!1,ANIMATIONS:!0,COMMITMENTS:!1,COMBAT:!0,PASS_LOGIC:!1,STATE_SYNC:!1,ENERGY:!1,CARDS:!0,HAND_VIEW:!1,CARD_PLAY:!1}},P=(e,t,n=null)=>{if(!cw.categories[e])return;const r=`ðŸ” [${e} DEBUG]`;n!=null?console.log(r,t,n):console.log(r,t)};let ff=null;ff=console.log,console.log=(...e)=>{(e[0]?.toString()||"").startsWith("ðŸ”")&&ff(...e)},ff("ðŸ”§ Debug logger active: Filtering console to show only debugLog messages"),ff("ðŸ”§ Active categories:",Object.entries(cw.categories).filter(([e,t])=>t).map(([e])=>e).join(", ")||"NONE");var Ag={exports:{}},Vc={},Cg={exports:{}},Eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA;function Mk(){return kA||(kA=1,(function(e){function t(I,Y){var Q=I.length;I.push(Y);e:for(;0<Q;){var ve=Q-1>>>1,R=I[ve];if(0<i(R,Y))I[ve]=Y,I[Q]=R,Q=ve;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var Y=I[0],Q=I.pop();if(Q!==Y){I[0]=Q;e:for(var ve=0,R=I.length,V=R>>>1;ve<V;){var K=2*(ve+1)-1,ae=I[K],me=K+1,Se=I[me];if(0>i(ae,Q))me<R&&0>i(Se,ae)?(I[ve]=Se,I[me]=Q,ve=me):(I[ve]=ae,I[K]=Q,ve=K);else if(me<R&&0>i(Se,Q))I[ve]=Se,I[me]=Q,ve=me;else break e}}return Y}function i(I,Y){var Q=I.sortIndex-Y.sortIndex;return Q!==0?Q:I.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var f=[],d=[],p=1,g=null,y=3,b=!1,S=!1,A=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function _(I){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=I)r(d),Y.sortIndex=Y.expirationTime,t(f,Y);else break;Y=n(d)}}function k(I){if(A=!1,_(I),!S)if(n(f)!==null)S=!0,M||(M=!0,G());else{var Y=n(d);Y!==null&&re(k,Y.startTime-I)}}var M=!1,j=-1,U=5,q=-1;function L(){return E?!0:!(e.unstable_now()-q<U)}function $(){if(E=!1,M){var I=e.unstable_now();q=I;var Y=!0;try{e:{S=!1,A&&(A=!1,w(j),j=-1),b=!0;var Q=y;try{t:{for(_(I),g=n(f);g!==null&&!(g.expirationTime>I&&L());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,y=g.priorityLevel;var R=ve(g.expirationTime<=I);if(I=e.unstable_now(),typeof R=="function"){g.callback=R,_(I),Y=!0;break t}g===n(f)&&r(f),_(I)}else r(f);g=n(f)}if(g!==null)Y=!0;else{var V=n(d);V!==null&&re(k,V.startTime-I),Y=!1}}break e}finally{g=null,y=Q,b=!1}Y=void 0}}finally{Y?G():M=!1}}}var G;if(typeof O=="function")G=function(){O($)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,X=Z.port2;Z.port1.onmessage=$,G=function(){X.postMessage(null)}}else G=function(){T($,0)};function re(I,Y){j=T(function(){I(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(I){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var Q=y;y=Y;try{return I()}finally{y=Q}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(I,Y){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Q=y;y=I;try{return Y()}finally{y=Q}},e.unstable_scheduleCallback=function(I,Y,Q){var ve=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ve+Q:ve):Q=ve,I){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=Q+R,I={id:p++,callback:Y,priorityLevel:I,startTime:Q,expirationTime:R,sortIndex:-1},Q>ve?(I.sortIndex=Q,t(d,I),n(f)===null&&I===n(d)&&(A?(w(j),j=-1):A=!0,re(k,Q-ve))):(I.sortIndex=R,t(f,I),S||b||(S=!0,M||(M=!0,G()))),I},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(I){var Y=y;return function(){var Q=y;y=Y;try{return I.apply(this,arguments)}finally{y=Q}}}})(Eg)),Eg}var IA;function jk(){return IA||(IA=1,Cg.exports=Mk()),Cg.exports}var Tg={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function kk(){if(RA)return Ln;RA=1;var e=Dl();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:d,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(f,d,null,p)},Ln.flushSync=function(f){var d=l.T,p=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=p,r.d.f()}},Ln.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},Ln.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Ln.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ln.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},Ln.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ln.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},Ln.requestFormReset=function(f){r.d.r(f)},Ln.unstable_batchedUpdates=function(f,d){return f(d)},Ln.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},Ln.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ln.version="19.1.1",Ln}var LA;function uw(){if(LA)return Tg.exports;LA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Tg.exports=kk(),Tg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $A;function Ik(){if($A)return Vc;$A=1;var e=jk(),t=Dl(),n=uw();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function f(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,m=o;;){var v=c.return;if(v===null)break;var x=v.alternate;if(x===null){if(m=v.return,m!==null){c=m;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===c)return u(v),a;if(x===m)return u(v),o;x=x.sibling}throw Error(r(188))}if(c.return!==m.return)c=v,m=x;else{for(var N=!1,D=v.child;D;){if(D===c){N=!0,c=v,m=x;break}if(D===m){N=!0,m=v,c=x;break}D=D.sibling}if(!N){for(D=x.child;D;){if(D===c){N=!0,c=x,m=v;break}if(D===m){N=!0,m=x,c=v;break}D=D.sibling}if(!N)throw Error(r(189))}}if(c.alternate!==m)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function d(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=d(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),O=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function G(a){return a===null||typeof a!="object"?null:(a=$&&a[$]||a["@@iterator"],typeof a=="function"?a:null)}var Z=Symbol.for("react.client.reference");function X(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Z?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case E:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case M:return"SuspenseList";case q:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case O:return(a.displayName||"Context")+".Provider";case w:return(a._context.displayName||"Context")+".Consumer";case _:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return o=a.displayName||null,o!==null?o:X(a.type)||"Memo";case U:o=a._payload,a=a._init;try{return X(a(o))}catch{}}return null}var re=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ve=[],R=-1;function V(a){return{current:a}}function K(a){0>R||(a.current=ve[R],ve[R]=null,R--)}function ae(a,o){R++,ve[R]=a.current,a.current=o}var me=V(null),Se=V(null),Ae=V(null),Me=V(null);function Ne(a,o){switch(ae(Ae,o),ae(Se,a),ae(me,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?eA(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=eA(o),a=tA(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}K(me),ae(me,a)}function xe(){K(me),K(Se),K(Ae)}function $e(a){a.memoizedState!==null&&ae(Me,a);var o=me.current,c=tA(o,a.type);o!==c&&(ae(Se,a),ae(me,c))}function He(a){Se.current===a&&(K(me),K(Se)),Me.current===a&&(K(Me),zc._currentValue=Q)}var ye=Object.prototype.hasOwnProperty,vt=e.unstable_scheduleCallback,Xe=e.unstable_cancelCallback,Yt=e.unstable_shouldYield,Bt=e.unstable_requestPaint,Et=e.unstable_now,xa=e.unstable_getCurrentPriorityLevel,Dt=e.unstable_ImmediatePriority,Qn=e.unstable_UserBlockingPriority,Sa=e.unstable_NormalPriority,ys=e.unstable_LowPriority,La=e.unstable_IdlePriority,fr=e.log,wi=e.unstable_setDisableYieldValue,Aa=null,En=null;function pr(a){if(typeof fr=="function"&&wi(a),En&&typeof En.setStrictMode=="function")try{En.setStrictMode(Aa,a)}catch{}}var Ie=Math.clz32?Math.clz32:vs,jn=Math.log,Hl=Math.LN2;function vs(a){return a>>>=0,a===0?32:31-(jn(a)/Hl|0)|0}var Oi=256,Ni=4194304;function Zn(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function B(a,o,c){var m=a.pendingLanes;if(m===0)return 0;var v=0,x=a.suspendedLanes,N=a.pingedLanes;a=a.warmLanes;var D=m&134217727;return D!==0?(m=D&~x,m!==0?v=Zn(m):(N&=D,N!==0?v=Zn(N):c||(c=D&~a,c!==0&&(v=Zn(c))))):(D=m&~x,D!==0?v=Zn(D):N!==0?v=Zn(N):c||(c=m&~a,c!==0&&(v=Zn(c)))),v===0?0:o!==0&&o!==v&&(o&x)===0&&(x=v&-v,c=o&-o,x>=c||x===32&&(c&4194048)!==0)?o:v}function oe(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function he(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ce(){var a=Oi;return Oi<<=1,(Oi&4194048)===0&&(Oi=256),a}function ge(){var a=Ni;return Ni<<=1,(Ni&62914560)===0&&(Ni=4194304),a}function be(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Re(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function kn(a,o,c,m,v,x){var N=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var D=a.entanglements,H=a.expirationTimes,ee=a.hiddenUpdates;for(c=N&~c;0<c;){var le=31-Ie(c),fe=1<<le;D[le]=0,H[le]=-1;var ne=ee[le];if(ne!==null)for(ee[le]=null,le=0;le<ne.length;le++){var ie=ne[le];ie!==null&&(ie.lane&=-536870913)}c&=~fe}m!==0&&Tt(a,m,0),x!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=x&~(N&~o))}function Tt(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var m=31-Ie(o);a.entangledLanes|=o,a.entanglements[m]=a.entanglements[m]|1073741824|c&4194090}function Pt(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var m=31-Ie(c),v=1<<m;v&o|a[m]&o&&(a[m]|=o),c&=~v}}function nt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function lt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function qt(){var a=Y.p;return a!==0?a:(a=window.event,a===void 0?32:xA(a.type))}function Gn(a,o){var c=Y.p;try{return Y.p=a,o()}finally{Y.p=c}}var In=Math.random().toString(36).slice(2),Ft="__reactFiber$"+In,pn="__reactProps$"+In,Di="__reactContainer$"+In,Hu="__reactEvents$"+In,bs="__reactListeners$"+In,Gu="__reactHandles$"+In,uh="__reactResources$"+In,Po="__reactMarker$"+In;function wt(a){delete a[Ft],delete a[pn],delete a[Hu],delete a[bs],delete a[Gu]}function kr(a){var o=a[Ft];if(o)return o;for(var c=a.parentNode;c;){if(o=c[Di]||c[Ft]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=iA(a);a!==null;){if(c=a[Ft])return c;a=iA(a)}return o}a=c,c=a.parentNode}return null}function Ir(a){if(a=a[Ft]||a[Di]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function $a(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function hn(a){var o=a[uh];return o||(o=a[uh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function bt(a){a[Po]=!0}var Ba=new Set,aa={};function Ut(a,o){hr(a,o),hr(a+"Capture",o)}function hr(a,o){for(aa[a]=o,a=0;a<o.length;a++)Ba.add(o[a])}var Ua=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wo={},_i={};function Rr(a){return ye.call(_i,a)?!0:ye.call(wo,a)?!1:Ua.test(a)?_i[a]=!0:(wo[a]=!0,!1)}function ia(a,o,c){if(Rr(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function Ca(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function Ze(a,o,c,m){if(m===null)a.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+m)}}var Jn,Yu;function za(a){if(Jn===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Jn=o&&o[1]||"",Yu=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jn+a+Yu}var Gl=!1;function Oo(a,o){if(!a||Gl)return"";Gl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ie){var ne=ie}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(ie){ne=ie}a.call(fe.prototype)}}else{try{throw Error()}catch(ie){ne=ie}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ie){if(ie&&ne&&typeof ie.stack=="string")return[ie.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=m.DetermineComponentFrameRoot(),N=x[0],D=x[1];if(N&&D){var H=N.split(`
`),ee=D.split(`
`);for(v=m=0;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;for(;v<ee.length&&!ee[v].includes("DetermineComponentFrameRoot");)v++;if(m===H.length||v===ee.length)for(m=H.length-1,v=ee.length-1;1<=m&&0<=v&&H[m]!==ee[v];)v--;for(;1<=m&&0<=v;m--,v--)if(H[m]!==ee[v]){if(m!==1||v!==1)do if(m--,v--,0>v||H[m]!==ee[v]){var le=`
`+H[m].replace(" at new "," at ");return a.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",a.displayName)),le}while(1<=m&&0<=v);break}}}finally{Gl=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?za(c):""}function dh(a){switch(a.tag){case 26:case 27:case 5:return za(a.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 15:return Oo(a.type,!1);case 11:return Oo(a.type.render,!1);case 1:return Oo(a.type,!0);case 31:return za("Activity");default:return""}}function Yl(a){try{var o="";do o+=dh(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function zt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ha(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function fh(a){var o=Ha(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),m=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,x=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(N){m=""+N,x.call(this,N)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function xs(a){a._valueTracker||(a._valueTracker=fh(a))}function ql(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),m="";return a&&(m=Ha(a)?a.checked?"true":"false":a.value),a=m,a!==c?(o.setValue(a),!0):!1}function Lr(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var No=/[\n"\\]/g;function Tn(a){return a.replace(No,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function $r(a,o,c,m,v,x,N,D){a.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.type=N:a.removeAttribute("type"),o!=null?N==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+zt(o)):a.value!==""+zt(o)&&(a.value=""+zt(o)):N!=="submit"&&N!=="reset"||a.removeAttribute("value"),o!=null?Ss(a,N,zt(o)):c!=null?Ss(a,N,zt(c)):m!=null&&a.removeAttribute("value"),v==null&&x!=null&&(a.defaultChecked=!!x),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.name=""+zt(D):a.removeAttribute("name")}function Do(a,o,c,m,v,x,N,D){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),o!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||o!=null))return;c=c!=null?""+zt(c):"",o=o!=null?""+zt(o):c,D||o===a.value||(a.value=o),a.defaultValue=o}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=D?a.checked:!!m,a.defaultChecked=!!m,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(a.name=N)}function Ss(a,o,c){o==="number"&&Lr(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function mr(a,o,c,m){if(a=a.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<a.length;c++)v=o.hasOwnProperty("$"+a[c].value),a[c].selected!==v&&(a[c].selected=v),v&&m&&(a[c].defaultSelected=!0)}else{for(c=""+zt(c),o=null,v=0;v<a.length;v++){if(a[v].value===c){a[v].selected=!0,m&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function _o(a,o,c){if(o!=null&&(o=""+zt(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+zt(c):""}function As(a,o,c,m){if(o==null){if(m!=null){if(c!=null)throw Error(r(92));if(re(m)){if(1<m.length)throw Error(r(93));m=m[0]}c=m}c==null&&(c=""),o=c}c=zt(o),a.defaultValue=c,m=a.textContent,m===c&&m!==""&&m!==null&&(a.value=m)}function Ga(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fu(a,o,c){var m=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":m?a.setProperty(o,c):typeof c!="number"||c===0||qu.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function Fl(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var v in o)m=o[v],o.hasOwnProperty(v)&&c[v]!==m&&Fu(a,v,m)}else for(var x in o)o.hasOwnProperty(x)&&Fu(a,x,o[x])}function Vu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cs(a){return Vl.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Ku=null;function Wu(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ya=null,qa=null;function Es(a){var o=Ir(a);if(o&&(a=o.stateNode)){var c=a[pn]||null;e:switch(a=o.stateNode,o.type){case"input":if($r(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Tn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var m=c[o];if(m!==a&&m.form===a.form){var v=m[pn]||null;if(!v)throw Error(r(90));$r(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<c.length;o++)m=c[o],m.form===a.form&&ql(m)}break e;case"textarea":_o(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&mr(a,!!c.multiple,o,!1)}}}var Fa=!1;function Kl(a,o,c){if(Fa)return a(o,c);Fa=!0;try{var m=a(o);return m}finally{if(Fa=!1,(Ya!==null||qa!==null)&&(Yd(),Ya&&(o=Ya,a=qa,qa=Ya=null,Es(o),a)))for(o=0;o<a.length;o++)Es(a[o])}}function gr(a,o){var c=a.stateNode;if(c===null)return null;var m=c[pn]||null;if(m===null)return null;c=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ts=!1;if(Pn)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Ts=!1}var sa=null,Qe=null,oa=null;function Va(){if(oa)return oa;var a,o=Qe,c=o.length,m,v="value"in sa?sa.value:sa.textContent,x=v.length;for(a=0;a<c&&o[a]===v[a];a++);var N=c-a;for(m=1;m<=N&&o[c-m]===v[x-m];m++);return oa=v.slice(a,1<m?1-m:void 0)}function ws(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Wl(){return!0}function ph(){return!1}function ot(a){function o(c,m,v,x,N){this._reactName=c,this._targetInst=v,this.type=m,this.nativeEvent=x,this.target=N,this.currentTarget=null;for(var D in a)a.hasOwnProperty(D)&&(c=a[D],this[D]=c?c(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Wl:ph,this.isPropagationStopped=ph,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Wl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Wl)},persist:function(){},isPersistent:Wl}),o}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xl=ot(rn),Os=p({},rn,{view:0,detail:0}),hh=ot(Os),Ns,Xu,Ds,Ql=p({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ds&&(Ds&&a.type==="mousemove"?(Ns=a.screenX-Ds.screenX,Xu=a.screenY-Ds.screenY):Xu=Ns=0,Ds=a),Ns)},movementY:function(a){return"movementY"in a?a.movementY:Xu}}),mh=ot(Ql),gh=p({},Ql,{dataTransfer:0}),yh=ot(gh),vh=p({},Os,{relatedTarget:0}),je=ot(vh),Je=p({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),_s=ot(Je),Mo=p({},rn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Qu=ot(Mo),jo=p({},rn,{data:0}),Zl=ot(jo),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xh(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=bh[a])?!!o[a]:!1}function Jl(){return xh}var tt=p({},Os,{key:function(a){if(a.key){var o=Zu[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=ws(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ju[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jl,charCode:function(a){return a.type==="keypress"?ws(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ws(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Sh=ot(tt),Ah=p({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=ot(Ah),Ms=p({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jl}),Yn=ot(Ms),er=p({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ko=ot(er),td=p({},Ql,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ch=ot(td),ec=p({},rn,{newState:0,oldState:0}),Eh=ot(ec),Th=[9,13,27,32],tc=Pn&&"CompositionEvent"in window,js=null;Pn&&"documentMode"in document&&(js=document.documentMode);var Ph=Pn&&"TextEvent"in window&&!js,nd=Pn&&(!tc||js&&8<js&&11>=js),rd=" ",ad=!1;function id(a,o){switch(a){case"keyup":return Th.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ka=!1;function wh(a,o){switch(a){case"compositionend":return sd(o);case"keypress":return o.which!==32?null:(ad=!0,rd);case"textInput":return a=o.data,a===rd&&ad?null:a;default:return null}}function Oh(a,o){if(Ka)return a==="compositionend"||!tc&&id(a,o)?(a=Va(),oa=Qe=sa=null,Ka=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return nd&&o.locale!=="ko"?null:o.data;default:return null}}var Nh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Nh[a.type]:o==="textarea"}function nc(a,o,c,m){Ya?qa?qa.push(m):qa=[m]:Ya=m,o=Xd(o,"onChange"),0<o.length&&(c=new Xl("onChange","change",null,c,m),a.push({event:c,listeners:o}))}var ks=null,Is=null;function Dh(a){W1(a,0)}function Io(a){var o=$a(a);if(ql(o))return a}function ld(a,o){if(a==="change")return o}var rc=!1;if(Pn){var ac;if(Pn){var ic="oninput"in document;if(!ic){var cd=document.createElement("div");cd.setAttribute("oninput","return;"),ic=typeof cd.oninput=="function"}ac=ic}else ac=!1;rc=ac&&(!document.documentMode||9<document.documentMode)}function ud(){ks&&(ks.detachEvent("onpropertychange",sc),Is=ks=null)}function sc(a){if(a.propertyName==="value"&&Io(Is)){var o=[];nc(o,Is,a,Wu(a)),Kl(Dh,o)}}function _h(a,o,c){a==="focusin"?(ud(),ks=o,Is=c,ks.attachEvent("onpropertychange",sc)):a==="focusout"&&ud()}function Mh(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Io(Is)}function jh(a,o){if(a==="click")return Io(o)}function z(a,o){if(a==="input"||a==="change")return Io(o)}function te(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var pe=typeof Object.is=="function"?Object.is:te;function ue(a,o){if(pe(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),m=Object.keys(o);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var v=c[m];if(!ye.call(o,v)||!pe(a[v],o[v]))return!1}return!0}function Ce(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Be(a,o){var c=Ce(a);a=0;for(var m;c;){if(c.nodeType===3){if(m=a+c.textContent.length,a<=o&&m>=o)return{node:c,offset:o-a};a=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ce(c)}}function Ye(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Ye(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function ct(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Lr(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=Lr(a.document)}return o}function mn(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Ro=Pn&&"documentMode"in document&&11>=document.documentMode,la=null,oc=null,ca=null,lc=!1;function dd(a,o,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;lc||la==null||la!==Lr(m)||(m=la,"selectionStart"in m&&mn(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ca&&ue(ca,m)||(ca=m,m=Xd(oc,"onSelect"),0<m.length&&(o=new Xl("onSelect","select",null,o,c),a.push({event:o,listeners:m}),o.target=la)))}function Rs(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var Lo={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionrun:Rs("Transition","TransitionRun"),transitionstart:Rs("Transition","TransitionStart"),transitioncancel:Rs("Transition","TransitionCancel"),transitionend:Rs("Transition","TransitionEnd")},kh={},Px={};Pn&&(Px=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Ls(a){if(kh[a])return kh[a];if(!Lo[a])return a;var o=Lo[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in Px)return kh[a]=o[c];return a}var wx=Ls("animationend"),Ox=Ls("animationiteration"),Nx=Ls("animationstart"),AM=Ls("transitionrun"),CM=Ls("transitionstart"),EM=Ls("transitioncancel"),Dx=Ls("transitionend"),_x=new Map,Ih="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ih.push("scrollEnd");function ua(a,o){_x.set(a,o),Ut(o,[a])}var Mx=new WeakMap;function Br(a,o){if(typeof a=="object"&&a!==null){var c=Mx.get(a);return c!==void 0?c:(o={value:a,source:o,stack:Yl(o)},Mx.set(a,o),o)}return{value:a,source:o,stack:Yl(o)}}var Ur=[],$o=0,Rh=0;function fd(){for(var a=$o,o=Rh=$o=0;o<a;){var c=Ur[o];Ur[o++]=null;var m=Ur[o];Ur[o++]=null;var v=Ur[o];Ur[o++]=null;var x=Ur[o];if(Ur[o++]=null,m!==null&&v!==null){var N=m.pending;N===null?v.next=v:(v.next=N.next,N.next=v),m.pending=v}x!==0&&jx(c,v,x)}}function pd(a,o,c,m){Ur[$o++]=a,Ur[$o++]=o,Ur[$o++]=c,Ur[$o++]=m,Rh|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Lh(a,o,c,m){return pd(a,o,c,m),hd(a)}function Bo(a,o){return pd(a,null,null,o),hd(a)}function jx(a,o,c){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c);for(var v=!1,x=a.return;x!==null;)x.childLanes|=c,m=x.alternate,m!==null&&(m.childLanes|=c),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(v=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,v&&o!==null&&(v=31-Ie(c),a=x.hiddenUpdates,m=a[v],m===null?a[v]=[o]:m.push(o),o.lane=c|536870912),x):null}function hd(a){if(50<jc)throw jc=0,Gm=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Uo={};function TM(a,o,c,m){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(a,o,c,m){return new TM(a,o,c,m)}function $h(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Wa(a,o){var c=a.alternate;return c===null?(c=yr(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function kx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function md(a,o,c,m,v,x){var N=0;if(m=a,typeof a=="function")$h(a)&&(N=1);else if(typeof a=="string")N=wj(a,c,me.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case q:return a=yr(31,c,o,v),a.elementType=q,a.lanes=x,a;case S:return $s(c.children,v,x,o);case A:N=8,v|=24;break;case E:return a=yr(12,c,o,v|2),a.elementType=E,a.lanes=x,a;case k:return a=yr(13,c,o,v),a.elementType=k,a.lanes=x,a;case M:return a=yr(19,c,o,v),a.elementType=M,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case T:case O:N=10;break e;case w:N=9;break e;case _:N=11;break e;case j:N=14;break e;case U:N=16,m=null;break e}N=29,c=Error(r(130,a===null?"null":typeof a,"")),m=null}return o=yr(N,c,o,v),o.elementType=a,o.type=m,o.lanes=x,o}function $s(a,o,c,m){return a=yr(7,a,m,o),a.lanes=c,a}function Bh(a,o,c){return a=yr(6,a,null,o),a.lanes=c,a}function Uh(a,o,c){return o=yr(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var zo=[],Ho=0,gd=null,yd=0,zr=[],Hr=0,Bs=null,Xa=1,Qa="";function Us(a,o){zo[Ho++]=yd,zo[Ho++]=gd,gd=a,yd=o}function Ix(a,o,c){zr[Hr++]=Xa,zr[Hr++]=Qa,zr[Hr++]=Bs,Bs=a;var m=Xa;a=Qa;var v=32-Ie(m)-1;m&=~(1<<v),c+=1;var x=32-Ie(o)+v;if(30<x){var N=v-v%5;x=(m&(1<<N)-1).toString(32),m>>=N,v-=N,Xa=1<<32-Ie(o)+v|c<<v|m,Qa=x+a}else Xa=1<<x|c<<v|m,Qa=a}function zh(a){a.return!==null&&(Us(a,1),Ix(a,1,0))}function Hh(a){for(;a===gd;)gd=zo[--Ho],zo[Ho]=null,yd=zo[--Ho],zo[Ho]=null;for(;a===Bs;)Bs=zr[--Hr],zr[Hr]=null,Qa=zr[--Hr],zr[Hr]=null,Xa=zr[--Hr],zr[Hr]=null}var qn=null,Ht=null,st=!1,zs=null,Ea=!1,Gh=Error(r(519));function Hs(a){var o=Error(r(418,""));throw dc(Br(o,a)),Gh}function Rx(a){var o=a.stateNode,c=a.type,m=a.memoizedProps;switch(o[Ft]=a,o[pn]=m,c){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(c=0;c<Ic.length;c++)We(Ic[c],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),Do(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),xs(o);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),As(o,m.value,m.defaultValue,m.children),xs(o)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||m.suppressHydrationWarning===!0||J1(o.textContent,c)?(m.popover!=null&&(We("beforetoggle",o),We("toggle",o)),m.onScroll!=null&&We("scroll",o),m.onScrollEnd!=null&&We("scrollend",o),m.onClick!=null&&(o.onclick=Qd),o=!0):o=!1,o||Hs(a)}function Lx(a){for(qn=a.return;qn;)switch(qn.tag){case 5:case 13:Ea=!1;return;case 27:case 3:Ea=!0;return;default:qn=qn.return}}function cc(a){if(a!==qn)return!1;if(!st)return Lx(a),st=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||ig(a.type,a.memoizedProps)),c=!c),c&&Ht&&Hs(a),Lx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){Ht=fa(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}Ht=null}}else o===27?(o=Ht,Vi(a.type)?(a=cg,cg=null,Ht=a):Ht=o):Ht=qn?fa(a.stateNode.nextSibling):null;return!0}function uc(){Ht=qn=null,st=!1}function $x(){var a=zs;return a!==null&&(rr===null?rr=a:rr.push.apply(rr,a),zs=null),a}function dc(a){zs===null?zs=[a]:zs.push(a)}var Yh=V(null),Gs=null,Za=null;function Mi(a,o,c){ae(Yh,o._currentValue),o._currentValue=c}function Ja(a){a._currentValue=Yh.current,K(Yh)}function qh(a,o,c){for(;a!==null;){var m=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),a===c)break;a=a.return}}function Fh(a,o,c,m){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var x=v.dependencies;if(x!==null){var N=v.child;x=x.firstContext;e:for(;x!==null;){var D=x;x=v;for(var H=0;H<o.length;H++)if(D.context===o[H]){x.lanes|=c,D=x.alternate,D!==null&&(D.lanes|=c),qh(x.return,c,a),m||(N=null);break e}x=D.next}}else if(v.tag===18){if(N=v.return,N===null)throw Error(r(341));N.lanes|=c,x=N.alternate,x!==null&&(x.lanes|=c),qh(N,c,a),N=null}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===a){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}}function fc(a,o,c,m){a=null;for(var v=o,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var N=v.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var D=v.type;pe(v.pendingProps.value,N.value)||(a!==null?a.push(D):a=[D])}}else if(v===Me.current){if(N=v.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(zc):a=[zc])}v=v.return}a!==null&&Fh(o,a,c,m),o.flags|=262144}function vd(a){for(a=a.firstContext;a!==null;){if(!pe(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ys(a){Gs=a,Za=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Rn(a){return Bx(Gs,a)}function bd(a,o){return Gs===null&&Ys(a),Bx(a,o)}function Bx(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Za===null){if(a===null)throw Error(r(308));Za=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Za=Za.next=o;return c}var PM=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,m){a.push(m)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},wM=e.unstable_scheduleCallback,OM=e.unstable_NormalPriority,an={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vh(){return{controller:new PM,data:new Map,refCount:0}}function pc(a){a.refCount--,a.refCount===0&&wM(OM,function(){a.controller.abort()})}var hc=null,Kh=0,Go=0,Yo=null;function NM(a,o){if(hc===null){var c=hc=[];Kh=0,Go=Xm(),Yo={status:"pending",value:void 0,then:function(m){c.push(m)}}}return Kh++,o.then(Ux,Ux),o}function Ux(){if(--Kh===0&&hc!==null){Yo!==null&&(Yo.status="fulfilled");var a=hc;hc=null,Go=0,Yo=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function DM(a,o){var c=[],m={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return a.then(function(){m.status="fulfilled",m.value=o;for(var v=0;v<c.length;v++)(0,c[v])(o)},function(v){for(m.status="rejected",m.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),m}var zx=I.S;I.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&NM(a,o),zx!==null&&zx(a,o)};var qs=V(null);function Wh(){var a=qs.current;return a!==null?a:At.pooledCache}function xd(a,o){o===null?ae(qs,qs.current):ae(qs,o.pool)}function Hx(){var a=Wh();return a===null?null:{parent:an._currentValue,pool:a}}var mc=Error(r(460)),Gx=Error(r(474)),Sd=Error(r(542)),Xh={then:function(){}};function Yx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ad(){}function qx(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Ad,Ad),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Vx(a),a;default:if(typeof o.status=="string")o.then(Ad,Ad);else{if(a=At,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(m){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=m}},function(m){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Vx(a),a}throw gc=o,mc}}var gc=null;function Fx(){if(gc===null)throw Error(r(459));var a=gc;return gc=null,a}function Vx(a){if(a===mc||a===Sd)throw Error(r(483))}var ji=!1;function Qh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ki(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ii(a,o,c){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(ut&2)!==0){var v=m.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),m.pending=o,o=hd(a),jx(a,null,c),o}return pd(a,m,o,c),hd(a)}function yc(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var m=o.lanes;m&=a.pendingLanes,c|=m,o.lanes=c,Pt(a,c)}}function Jh(a,o){var c=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var v=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var N={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?v=x=N:x=x.next=N,c=c.next}while(c!==null);x===null?v=x=o:x=x.next=o}else v=x=o;c={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:m.shared,callbacks:m.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var em=!1;function vc(){if(em){var a=Yo;if(a!==null)throw a}}function bc(a,o,c,m){em=!1;var v=a.updateQueue;ji=!1;var x=v.firstBaseUpdate,N=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var H=D,ee=H.next;H.next=null,N===null?x=ee:N.next=ee,N=H;var le=a.alternate;le!==null&&(le=le.updateQueue,D=le.lastBaseUpdate,D!==N&&(D===null?le.firstBaseUpdate=ee:D.next=ee,le.lastBaseUpdate=H))}if(x!==null){var fe=v.baseState;N=0,le=ee=H=null,D=x;do{var ne=D.lane&-536870913,ie=ne!==D.lane;if(ie?(et&ne)===ne:(m&ne)===ne){ne!==0&&ne===Go&&(em=!0),le!==null&&(le=le.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var ze=a,Le=D;ne=o;var gt=c;switch(Le.tag){case 1:if(ze=Le.payload,typeof ze=="function"){fe=ze.call(gt,fe,ne);break e}fe=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Le.payload,ne=typeof ze=="function"?ze.call(gt,fe,ne):ze,ne==null)break e;fe=p({},fe,ne);break e;case 2:ji=!0}}ne=D.callback,ne!==null&&(a.flags|=64,ie&&(a.flags|=8192),ie=v.callbacks,ie===null?v.callbacks=[ne]:ie.push(ne))}else ie={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},le===null?(ee=le=ie,H=fe):le=le.next=ie,N|=ne;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ie=D,D=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);le===null&&(H=fe),v.baseState=H,v.firstBaseUpdate=ee,v.lastBaseUpdate=le,x===null&&(v.shared.lanes=0),Gi|=N,a.lanes=N,a.memoizedState=fe}}function Kx(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Wx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Kx(c[a],o)}var qo=V(null),Cd=V(0);function Xx(a,o){a=si,ae(Cd,a),ae(qo,o),si=a|o.baseLanes}function tm(){ae(Cd,si),ae(qo,qo.current)}function nm(){si=Cd.current,K(qo),K(Cd)}var Ri=0,Fe=null,ht=null,Qt=null,Ed=!1,Fo=!1,Fs=!1,Td=0,xc=0,Vo=null,_M=0;function Vt(){throw Error(r(321))}function rm(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!pe(a[c],o[c]))return!1;return!0}function am(a,o,c,m,v,x){return Ri=x,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=a===null||a.memoizedState===null?jS:kS,Fs=!1,x=c(m,v),Fs=!1,Fo&&(x=Zx(o,c,m,v)),Qx(a),x}function Qx(a){I.H=_d;var o=ht!==null&&ht.next!==null;if(Ri=0,Qt=ht=Fe=null,Ed=!1,xc=0,Vo=null,o)throw Error(r(300));a===null||gn||(a=a.dependencies,a!==null&&vd(a)&&(gn=!0))}function Zx(a,o,c,m){Fe=a;var v=0;do{if(Fo&&(Vo=null),xc=0,Fo=!1,25<=v)throw Error(r(301));if(v+=1,Qt=ht=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}I.H=$M,x=o(c,m)}while(Fo);return x}function MM(){var a=I.H,o=a.useState()[0];return o=typeof o.then=="function"?Sc(o):o,a=a.useState()[0],(ht!==null?ht.memoizedState:null)!==a&&(Fe.flags|=1024),o}function im(){var a=Td!==0;return Td=0,a}function sm(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function om(a){if(Ed){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ed=!1}Ri=0,Qt=ht=Fe=null,Fo=!1,xc=Td=0,Vo=null}function tr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Fe.memoizedState=Qt=a:Qt=Qt.next=a,Qt}function Zt(){if(ht===null){var a=Fe.alternate;a=a!==null?a.memoizedState:null}else a=ht.next;var o=Qt===null?Fe.memoizedState:Qt.next;if(o!==null)Qt=o,ht=a;else{if(a===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));ht=a,a={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Qt===null?Fe.memoizedState=Qt=a:Qt=Qt.next=a}return Qt}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sc(a){var o=xc;return xc+=1,Vo===null&&(Vo=[]),a=qx(Vo,a,o),o=Fe,(Qt===null?o.memoizedState:Qt.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?jS:kS),a}function Pd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Sc(a);if(a.$$typeof===O)return Rn(a)}throw Error(r(438,String(a)))}function cm(a){var o=null,c=Fe.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var m=Fe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=lm(),Fe.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),m=0;m<a;m++)c[m]=L;return o.index++,c}function ei(a,o){return typeof o=="function"?o(a):o}function wd(a){var o=Zt();return um(o,ht,a)}function um(a,o,c){var m=a.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var v=a.baseQueue,x=m.pending;if(x!==null){if(v!==null){var N=v.next;v.next=x.next,x.next=N}o.baseQueue=v=x,m.pending=null}if(x=a.baseState,v===null)a.memoizedState=x;else{o=v.next;var D=N=null,H=null,ee=o,le=!1;do{var fe=ee.lane&-536870913;if(fe!==ee.lane?(et&fe)===fe:(Ri&fe)===fe){var ne=ee.revertLane;if(ne===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),fe===Go&&(le=!0);else if((Ri&ne)===ne){ee=ee.next,ne===Go&&(le=!0);continue}else fe={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(D=H=fe,N=x):H=H.next=fe,Fe.lanes|=ne,Gi|=ne;fe=ee.action,Fs&&c(x,fe),x=ee.hasEagerState?ee.eagerState:c(x,fe)}else ne={lane:fe,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(D=H=ne,N=x):H=H.next=ne,Fe.lanes|=fe,Gi|=fe;ee=ee.next}while(ee!==null&&ee!==o);if(H===null?N=x:H.next=D,!pe(x,a.memoizedState)&&(gn=!0,le&&(c=Yo,c!==null)))throw c;a.memoizedState=x,a.baseState=N,a.baseQueue=H,m.lastRenderedState=x}return v===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function dm(a){var o=Zt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var m=c.dispatch,v=c.pending,x=o.memoizedState;if(v!==null){c.pending=null;var N=v=v.next;do x=a(x,N.action),N=N.next;while(N!==v);pe(x,o.memoizedState)||(gn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,m]}function Jx(a,o,c){var m=Fe,v=Zt(),x=st;if(x){if(c===void 0)throw Error(r(407));c=c()}else c=o();var N=!pe((ht||v).memoizedState,c);N&&(v.memoizedState=c,gn=!0),v=v.queue;var D=nS.bind(null,m,v,a);if(Ac(2048,8,D,[a]),v.getSnapshot!==o||N||Qt!==null&&Qt.memoizedState.tag&1){if(m.flags|=2048,Ko(9,Od(),tS.bind(null,m,v,c,o),null),At===null)throw Error(r(349));x||(Ri&124)!==0||eS(m,o,c)}return c}function eS(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=Fe.updateQueue,o===null?(o=lm(),Fe.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function tS(a,o,c,m){o.value=c,o.getSnapshot=m,rS(o)&&aS(a)}function nS(a,o,c){return c(function(){rS(o)&&aS(a)})}function rS(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!pe(a,c)}catch{return!0}}function aS(a){var o=Bo(a,2);o!==null&&Ar(o,a,2)}function fm(a){var o=tr();if(typeof a=="function"){var c=a;if(a=c(),Fs){pr(!0);try{c()}finally{pr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},o}function iS(a,o,c,m){return a.baseState=c,um(a,ht,typeof m=="function"?m:ei)}function jM(a,o,c,m,v){if(Dd(a))throw Error(r(485));if(a=o.action,a!==null){var x={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){x.listeners.push(N)}};I.T!==null?c(!0):x.isTransition=!1,m(x),c=o.pending,c===null?(x.next=o.pending=x,sS(o,x)):(x.next=c.next,o.pending=c.next=x)}}function sS(a,o){var c=o.action,m=o.payload,v=a.state;if(o.isTransition){var x=I.T,N={};I.T=N;try{var D=c(v,m),H=I.S;H!==null&&H(N,D),oS(a,o,D)}catch(ee){pm(a,o,ee)}finally{I.T=x}}else try{x=c(v,m),oS(a,o,x)}catch(ee){pm(a,o,ee)}}function oS(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){lS(a,o,m)},function(m){return pm(a,o,m)}):lS(a,o,c)}function lS(a,o,c){o.status="fulfilled",o.value=c,cS(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,sS(a,c)))}function pm(a,o,c){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=c,cS(o),o=o.next;while(o!==m)}a.action=null}function cS(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function uS(a,o){return o}function dS(a,o){if(st){var c=At.formState;if(c!==null){e:{var m=Fe;if(st){if(Ht){t:{for(var v=Ht,x=Ea;v.nodeType!==8;){if(!x){v=null;break t}if(v=fa(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){Ht=fa(v.nextSibling),m=v.data==="F!";break e}}Hs(m)}m=!1}m&&(o=c[0])}}return c=tr(),c.memoizedState=c.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uS,lastRenderedState:o},c.queue=m,c=DS.bind(null,Fe,m),m.dispatch=c,m=fm(!1),x=vm.bind(null,Fe,!1,m.queue),m=tr(),v={state:o,dispatch:null,action:a,pending:null},m.queue=v,c=jM.bind(null,Fe,v,x,c),v.dispatch=c,m.memoizedState=a,[o,c,!1]}function fS(a){var o=Zt();return pS(o,ht,a)}function pS(a,o,c){if(o=um(a,o,uS)[0],a=wd(ei)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Sc(o)}catch(N){throw N===mc?Sd:N}else m=o;o=Zt();var v=o.queue,x=v.dispatch;return c!==o.memoizedState&&(Fe.flags|=2048,Ko(9,Od(),kM.bind(null,v,c),null)),[m,x,a]}function kM(a,o){a.action=o}function hS(a){var o=Zt(),c=ht;if(c!==null)return pS(o,c,a);Zt(),o=o.memoizedState,c=Zt();var m=c.queue.dispatch;return c.memoizedState=a,[o,m,!1]}function Ko(a,o,c,m){return a={tag:a,create:c,deps:m,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=lm(),Fe.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(m=c.next,c.next=a,a.next=m,o.lastEffect=a),a}function Od(){return{destroy:void 0,resource:void 0}}function mS(){return Zt().memoizedState}function Nd(a,o,c,m){var v=tr();m=m===void 0?null:m,Fe.flags|=a,v.memoizedState=Ko(1|o,Od(),c,m)}function Ac(a,o,c,m){var v=Zt();m=m===void 0?null:m;var x=v.memoizedState.inst;ht!==null&&m!==null&&rm(m,ht.memoizedState.deps)?v.memoizedState=Ko(o,x,c,m):(Fe.flags|=a,v.memoizedState=Ko(1|o,x,c,m))}function gS(a,o){Nd(8390656,8,a,o)}function yS(a,o){Ac(2048,8,a,o)}function vS(a,o){return Ac(4,2,a,o)}function bS(a,o){return Ac(4,4,a,o)}function xS(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function SS(a,o,c){c=c!=null?c.concat([a]):null,Ac(4,4,xS.bind(null,o,a),c)}function hm(){}function AS(a,o){var c=Zt();o=o===void 0?null:o;var m=c.memoizedState;return o!==null&&rm(o,m[1])?m[0]:(c.memoizedState=[a,o],a)}function CS(a,o){var c=Zt();o=o===void 0?null:o;var m=c.memoizedState;if(o!==null&&rm(o,m[1]))return m[0];if(m=a(),Fs){pr(!0);try{a()}finally{pr(!1)}}return c.memoizedState=[m,o],m}function mm(a,o,c){return c===void 0||(Ri&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=P1(),Fe.lanes|=a,Gi|=a,c)}function ES(a,o,c,m){return pe(c,o)?c:qo.current!==null?(a=mm(a,c,m),pe(a,o)||(gn=!0),a):(Ri&42)===0?(gn=!0,a.memoizedState=c):(a=P1(),Fe.lanes|=a,Gi|=a,o)}function TS(a,o,c,m,v){var x=Y.p;Y.p=x!==0&&8>x?x:8;var N=I.T,D={};I.T=D,vm(a,!1,o,c);try{var H=v(),ee=I.S;if(ee!==null&&ee(D,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var le=DM(H,m);Cc(a,o,le,Sr(a))}else Cc(a,o,m,Sr(a))}catch(fe){Cc(a,o,{then:function(){},status:"rejected",reason:fe},Sr())}finally{Y.p=x,I.T=N}}function IM(){}function gm(a,o,c,m){if(a.tag!==5)throw Error(r(476));var v=PS(a).queue;TS(a,v,o,Q,c===null?IM:function(){return wS(a),c(m)})}function PS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:Q},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function wS(a){var o=PS(a).next.queue;Cc(a,o,{},Sr())}function ym(){return Rn(zc)}function OS(){return Zt().memoizedState}function NS(){return Zt().memoizedState}function RM(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=Sr();a=ki(c);var m=Ii(o,a,c);m!==null&&(Ar(m,o,c),yc(m,o,c)),o={cache:Vh()},a.payload=o;return}o=o.return}}function LM(a,o,c){var m=Sr();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Dd(a)?_S(o,c):(c=Lh(a,o,c,m),c!==null&&(Ar(c,a,m),MS(c,o,m)))}function DS(a,o,c){var m=Sr();Cc(a,o,c,m)}function Cc(a,o,c,m){var v={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dd(a))_S(o,v);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var N=o.lastRenderedState,D=x(N,c);if(v.hasEagerState=!0,v.eagerState=D,pe(D,N))return pd(a,o,v,0),At===null&&fd(),!1}catch{}finally{}if(c=Lh(a,o,v,m),c!==null)return Ar(c,a,m),MS(c,o,m),!0}return!1}function vm(a,o,c,m){if(m={lane:2,revertLane:Xm(),action:m,hasEagerState:!1,eagerState:null,next:null},Dd(a)){if(o)throw Error(r(479))}else o=Lh(a,c,m,2),o!==null&&Ar(o,a,2)}function Dd(a){var o=a.alternate;return a===Fe||o!==null&&o===Fe}function _S(a,o){Fo=Ed=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function MS(a,o,c){if((c&4194048)!==0){var m=o.lanes;m&=a.pendingLanes,c|=m,o.lanes=c,Pt(a,c)}}var _d={readContext:Rn,use:Pd,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt},jS={readContext:Rn,use:Pd,useCallback:function(a,o){return tr().memoizedState=[a,o===void 0?null:o],a},useContext:Rn,useEffect:gS,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Nd(4194308,4,xS.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Nd(4194308,4,a,o)},useInsertionEffect:function(a,o){Nd(4,2,a,o)},useMemo:function(a,o){var c=tr();o=o===void 0?null:o;var m=a();if(Fs){pr(!0);try{a()}finally{pr(!1)}}return c.memoizedState=[m,o],m},useReducer:function(a,o,c){var m=tr();if(c!==void 0){var v=c(o);if(Fs){pr(!0);try{c(o)}finally{pr(!1)}}}else v=o;return m.memoizedState=m.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},m.queue=a,a=a.dispatch=LM.bind(null,Fe,a),[m.memoizedState,a]},useRef:function(a){var o=tr();return a={current:a},o.memoizedState=a},useState:function(a){a=fm(a);var o=a.queue,c=DS.bind(null,Fe,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:hm,useDeferredValue:function(a,o){var c=tr();return mm(c,a,o)},useTransition:function(){var a=fm(!1);return a=TS.bind(null,Fe,a.queue,!0,!1),tr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var m=Fe,v=tr();if(st){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),At===null)throw Error(r(349));(et&124)!==0||eS(m,o,c)}v.memoizedState=c;var x={value:c,getSnapshot:o};return v.queue=x,gS(nS.bind(null,m,x,a),[a]),m.flags|=2048,Ko(9,Od(),tS.bind(null,m,x,c,o),null),c},useId:function(){var a=tr(),o=At.identifierPrefix;if(st){var c=Qa,m=Xa;c=(m&~(1<<32-Ie(m)-1)).toString(32)+c,o="Â«"+o+"R"+c,c=Td++,0<c&&(o+="H"+c.toString(32)),o+="Â»"}else c=_M++,o="Â«"+o+"r"+c.toString(32)+"Â»";return a.memoizedState=o},useHostTransitionStatus:ym,useFormState:dS,useActionState:dS,useOptimistic:function(a){var o=tr();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=vm.bind(null,Fe,!0,c),c.dispatch=o,[a,o]},useMemoCache:cm,useCacheRefresh:function(){return tr().memoizedState=RM.bind(null,Fe)}},kS={readContext:Rn,use:Pd,useCallback:AS,useContext:Rn,useEffect:yS,useImperativeHandle:SS,useInsertionEffect:vS,useLayoutEffect:bS,useMemo:CS,useReducer:wd,useRef:mS,useState:function(){return wd(ei)},useDebugValue:hm,useDeferredValue:function(a,o){var c=Zt();return ES(c,ht.memoizedState,a,o)},useTransition:function(){var a=wd(ei)[0],o=Zt().memoizedState;return[typeof a=="boolean"?a:Sc(a),o]},useSyncExternalStore:Jx,useId:OS,useHostTransitionStatus:ym,useFormState:fS,useActionState:fS,useOptimistic:function(a,o){var c=Zt();return iS(c,ht,a,o)},useMemoCache:cm,useCacheRefresh:NS},$M={readContext:Rn,use:Pd,useCallback:AS,useContext:Rn,useEffect:yS,useImperativeHandle:SS,useInsertionEffect:vS,useLayoutEffect:bS,useMemo:CS,useReducer:dm,useRef:mS,useState:function(){return dm(ei)},useDebugValue:hm,useDeferredValue:function(a,o){var c=Zt();return ht===null?mm(c,a,o):ES(c,ht.memoizedState,a,o)},useTransition:function(){var a=dm(ei)[0],o=Zt().memoizedState;return[typeof a=="boolean"?a:Sc(a),o]},useSyncExternalStore:Jx,useId:OS,useHostTransitionStatus:ym,useFormState:hS,useActionState:hS,useOptimistic:function(a,o){var c=Zt();return ht!==null?iS(c,ht,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:cm,useCacheRefresh:NS},Wo=null,Ec=0;function Md(a){var o=Ec;return Ec+=1,Wo===null&&(Wo=[]),qx(Wo,a,o)}function Tc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function jd(a,o){throw o.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function IS(a){var o=a._init;return o(a._payload)}function RS(a){function o(W,F){if(a){var J=W.deletions;J===null?(W.deletions=[F],W.flags|=16):J.push(F)}}function c(W,F){if(!a)return null;for(;F!==null;)o(W,F),F=F.sibling;return null}function m(W){for(var F=new Map;W!==null;)W.key!==null?F.set(W.key,W):F.set(W.index,W),W=W.sibling;return F}function v(W,F){return W=Wa(W,F),W.index=0,W.sibling=null,W}function x(W,F,J){return W.index=J,a?(J=W.alternate,J!==null?(J=J.index,J<F?(W.flags|=67108866,F):J):(W.flags|=67108866,F)):(W.flags|=1048576,F)}function N(W){return a&&W.alternate===null&&(W.flags|=67108866),W}function D(W,F,J,de){return F===null||F.tag!==6?(F=Bh(J,W.mode,de),F.return=W,F):(F=v(F,J),F.return=W,F)}function H(W,F,J,de){var Pe=J.type;return Pe===S?le(W,F,J.props.children,de,J.key):F!==null&&(F.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===U&&IS(Pe)===F.type)?(F=v(F,J.props),Tc(F,J),F.return=W,F):(F=md(J.type,J.key,J.props,null,W.mode,de),Tc(F,J),F.return=W,F)}function ee(W,F,J,de){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=Uh(J,W.mode,de),F.return=W,F):(F=v(F,J.children||[]),F.return=W,F)}function le(W,F,J,de,Pe){return F===null||F.tag!==7?(F=$s(J,W.mode,de,Pe),F.return=W,F):(F=v(F,J),F.return=W,F)}function fe(W,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Bh(""+F,W.mode,J),F.return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case y:return J=md(F.type,F.key,F.props,null,W.mode,J),Tc(J,F),J.return=W,J;case b:return F=Uh(F,W.mode,J),F.return=W,F;case U:var de=F._init;return F=de(F._payload),fe(W,F,J)}if(re(F)||G(F))return F=$s(F,W.mode,J,null),F.return=W,F;if(typeof F.then=="function")return fe(W,Md(F),J);if(F.$$typeof===O)return fe(W,bd(W,F),J);jd(W,F)}return null}function ne(W,F,J,de){var Pe=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Pe!==null?null:D(W,F,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case y:return J.key===Pe?H(W,F,J,de):null;case b:return J.key===Pe?ee(W,F,J,de):null;case U:return Pe=J._init,J=Pe(J._payload),ne(W,F,J,de)}if(re(J)||G(J))return Pe!==null?null:le(W,F,J,de,null);if(typeof J.then=="function")return ne(W,F,Md(J),de);if(J.$$typeof===O)return ne(W,F,bd(W,J),de);jd(W,J)}return null}function ie(W,F,J,de,Pe){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return W=W.get(J)||null,D(F,W,""+de,Pe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case y:return W=W.get(de.key===null?J:de.key)||null,H(F,W,de,Pe);case b:return W=W.get(de.key===null?J:de.key)||null,ee(F,W,de,Pe);case U:var Ve=de._init;return de=Ve(de._payload),ie(W,F,J,de,Pe)}if(re(de)||G(de))return W=W.get(J)||null,le(F,W,de,Pe,null);if(typeof de.then=="function")return ie(W,F,J,Md(de),Pe);if(de.$$typeof===O)return ie(W,F,J,bd(F,de),Pe);jd(F,de)}return null}function ze(W,F,J,de){for(var Pe=null,Ve=null,De=F,Ue=F=0,vn=null;De!==null&&Ue<J.length;Ue++){De.index>Ue?(vn=De,De=null):vn=De.sibling;var rt=ne(W,De,J[Ue],de);if(rt===null){De===null&&(De=vn);break}a&&De&&rt.alternate===null&&o(W,De),F=x(rt,F,Ue),Ve===null?Pe=rt:Ve.sibling=rt,Ve=rt,De=vn}if(Ue===J.length)return c(W,De),st&&Us(W,Ue),Pe;if(De===null){for(;Ue<J.length;Ue++)De=fe(W,J[Ue],de),De!==null&&(F=x(De,F,Ue),Ve===null?Pe=De:Ve.sibling=De,Ve=De);return st&&Us(W,Ue),Pe}for(De=m(De);Ue<J.length;Ue++)vn=ie(De,W,Ue,J[Ue],de),vn!==null&&(a&&vn.alternate!==null&&De.delete(vn.key===null?Ue:vn.key),F=x(vn,F,Ue),Ve===null?Pe=vn:Ve.sibling=vn,Ve=vn);return a&&De.forEach(function(Zi){return o(W,Zi)}),st&&Us(W,Ue),Pe}function Le(W,F,J,de){if(J==null)throw Error(r(151));for(var Pe=null,Ve=null,De=F,Ue=F=0,vn=null,rt=J.next();De!==null&&!rt.done;Ue++,rt=J.next()){De.index>Ue?(vn=De,De=null):vn=De.sibling;var Zi=ne(W,De,rt.value,de);if(Zi===null){De===null&&(De=vn);break}a&&De&&Zi.alternate===null&&o(W,De),F=x(Zi,F,Ue),Ve===null?Pe=Zi:Ve.sibling=Zi,Ve=Zi,De=vn}if(rt.done)return c(W,De),st&&Us(W,Ue),Pe;if(De===null){for(;!rt.done;Ue++,rt=J.next())rt=fe(W,rt.value,de),rt!==null&&(F=x(rt,F,Ue),Ve===null?Pe=rt:Ve.sibling=rt,Ve=rt);return st&&Us(W,Ue),Pe}for(De=m(De);!rt.done;Ue++,rt=J.next())rt=ie(De,W,Ue,rt.value,de),rt!==null&&(a&&rt.alternate!==null&&De.delete(rt.key===null?Ue:rt.key),F=x(rt,F,Ue),Ve===null?Pe=rt:Ve.sibling=rt,Ve=rt);return a&&De.forEach(function(Bj){return o(W,Bj)}),st&&Us(W,Ue),Pe}function gt(W,F,J,de){if(typeof J=="object"&&J!==null&&J.type===S&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case y:e:{for(var Pe=J.key;F!==null;){if(F.key===Pe){if(Pe=J.type,Pe===S){if(F.tag===7){c(W,F.sibling),de=v(F,J.props.children),de.return=W,W=de;break e}}else if(F.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===U&&IS(Pe)===F.type){c(W,F.sibling),de=v(F,J.props),Tc(de,J),de.return=W,W=de;break e}c(W,F);break}else o(W,F);F=F.sibling}J.type===S?(de=$s(J.props.children,W.mode,de,J.key),de.return=W,W=de):(de=md(J.type,J.key,J.props,null,W.mode,de),Tc(de,J),de.return=W,W=de)}return N(W);case b:e:{for(Pe=J.key;F!==null;){if(F.key===Pe)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){c(W,F.sibling),de=v(F,J.children||[]),de.return=W,W=de;break e}else{c(W,F);break}else o(W,F);F=F.sibling}de=Uh(J,W.mode,de),de.return=W,W=de}return N(W);case U:return Pe=J._init,J=Pe(J._payload),gt(W,F,J,de)}if(re(J))return ze(W,F,J,de);if(G(J)){if(Pe=G(J),typeof Pe!="function")throw Error(r(150));return J=Pe.call(J),Le(W,F,J,de)}if(typeof J.then=="function")return gt(W,F,Md(J),de);if(J.$$typeof===O)return gt(W,F,bd(W,J),de);jd(W,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(c(W,F.sibling),de=v(F,J),de.return=W,W=de):(c(W,F),de=Bh(J,W.mode,de),de.return=W,W=de),N(W)):c(W,F)}return function(W,F,J,de){try{Ec=0;var Pe=gt(W,F,J,de);return Wo=null,Pe}catch(De){if(De===mc||De===Sd)throw De;var Ve=yr(29,De,null,W.mode);return Ve.lanes=de,Ve.return=W,Ve}finally{}}}var Xo=RS(!0),LS=RS(!1),Gr=V(null),Ta=null;function Li(a){var o=a.alternate;ae(sn,sn.current&1),ae(Gr,a),Ta===null&&(o===null||qo.current!==null||o.memoizedState!==null)&&(Ta=a)}function $S(a){if(a.tag===22){if(ae(sn,sn.current),ae(Gr,a),Ta===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(Ta=a)}}else $i()}function $i(){ae(sn,sn.current),ae(Gr,Gr.current)}function ti(a){K(Gr),Ta===a&&(Ta=null),K(sn)}var sn=V(0);function kd(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||lg(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function bm(a,o,c,m){o=a.memoizedState,c=c(m,o),c=c==null?o:p({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var xm={enqueueSetState:function(a,o,c){a=a._reactInternals;var m=Sr(),v=ki(m);v.payload=o,c!=null&&(v.callback=c),o=Ii(a,v,m),o!==null&&(Ar(o,a,m),yc(o,a,m))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var m=Sr(),v=ki(m);v.tag=1,v.payload=o,c!=null&&(v.callback=c),o=Ii(a,v,m),o!==null&&(Ar(o,a,m),yc(o,a,m))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=Sr(),m=ki(c);m.tag=2,o!=null&&(m.callback=o),o=Ii(a,m,c),o!==null&&(Ar(o,a,c),yc(o,a,c))}};function BS(a,o,c,m,v,x,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,x,N):o.prototype&&o.prototype.isPureReactComponent?!ue(c,m)||!ue(v,x):!0}function US(a,o,c,m){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,m),o.state!==a&&xm.enqueueReplaceState(o,o.state,null)}function Vs(a,o){var c=o;if("ref"in o){c={};for(var m in o)m!=="ref"&&(c[m]=o[m])}if(a=a.defaultProps){c===o&&(c=p({},c));for(var v in a)c[v]===void 0&&(c[v]=a[v])}return c}var Id=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function zS(a){Id(a)}function HS(a){console.error(a)}function GS(a){Id(a)}function Rd(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function YS(a,o,c){try{var m=a.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Sm(a,o,c){return c=ki(c),c.tag=3,c.payload={element:null},c.callback=function(){Rd(a,o)},c}function qS(a){return a=ki(a),a.tag=3,a}function FS(a,o,c,m){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var x=m.value;a.payload=function(){return v(x)},a.callback=function(){YS(o,c,m)}}var N=c.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(a.callback=function(){YS(o,c,m),typeof v!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function BM(a,o,c,m,v){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=c.alternate,o!==null&&fc(o,c,v,!0),c=Gr.current,c!==null){switch(c.tag){case 13:return Ta===null?qm():c.alternate===null&&Gt===0&&(Gt=3),c.flags&=-257,c.flags|=65536,c.lanes=v,m===Xh?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([m]):o.add(m),Vm(a,m,v)),!1;case 22:return c.flags|=65536,m===Xh?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([m]):c.add(m)),Vm(a,m,v)),!1}throw Error(r(435,c.tag))}return Vm(a,m,v),qm(),!1}if(st)return o=Gr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,m!==Gh&&(a=Error(r(422),{cause:m}),dc(Br(a,c)))):(m!==Gh&&(o=Error(r(423),{cause:m}),dc(Br(o,c))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,m=Br(m,c),v=Sm(a.stateNode,m,v),Jh(a,v),Gt!==4&&(Gt=2)),!1;var x=Error(r(520),{cause:m});if(x=Br(x,c),Mc===null?Mc=[x]:Mc.push(x),Gt!==4&&(Gt=2),o===null)return!0;m=Br(m,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=v&-v,c.lanes|=a,a=Sm(c.stateNode,m,a),Jh(c,a),!1;case 1:if(o=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Yi===null||!Yi.has(x))))return c.flags|=65536,v&=-v,c.lanes|=v,v=qS(v),FS(v,a,c,m),Jh(c,v),!1}c=c.return}while(c!==null);return!1}var VS=Error(r(461)),gn=!1;function wn(a,o,c,m){o.child=a===null?LS(o,null,c,m):Xo(o,a.child,c,m)}function KS(a,o,c,m,v){c=c.render;var x=o.ref;if("ref"in m){var N={};for(var D in m)D!=="ref"&&(N[D]=m[D])}else N=m;return Ys(o),m=am(a,o,c,N,x,v),D=im(),a!==null&&!gn?(sm(a,o,v),ni(a,o,v)):(st&&D&&zh(o),o.flags|=1,wn(a,o,m,v),o.child)}function WS(a,o,c,m,v){if(a===null){var x=c.type;return typeof x=="function"&&!$h(x)&&x.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=x,XS(a,o,x,m,v)):(a=md(c.type,null,m,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(x=a.child,!Nm(a,v)){var N=x.memoizedProps;if(c=c.compare,c=c!==null?c:ue,c(N,m)&&a.ref===o.ref)return ni(a,o,v)}return o.flags|=1,a=Wa(x,m),a.ref=o.ref,a.return=o,o.child=a}function XS(a,o,c,m,v){if(a!==null){var x=a.memoizedProps;if(ue(x,m)&&a.ref===o.ref)if(gn=!1,o.pendingProps=m=x,Nm(a,v))(a.flags&131072)!==0&&(gn=!0);else return o.lanes=a.lanes,ni(a,o,v)}return Am(a,o,c,m,v)}function QS(a,o,c){var m=o.pendingProps,v=m.children,x=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=x!==null?x.baseLanes|c:c,a!==null){for(v=o.child=a.child,x=0;v!==null;)x=x|v.lanes|v.childLanes,v=v.sibling;o.childLanes=x&~m}else o.childLanes=0,o.child=null;return ZS(a,o,m,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&xd(o,x!==null?x.cachePool:null),x!==null?Xx(o,x):tm(),$S(o);else return o.lanes=o.childLanes=536870912,ZS(a,o,x!==null?x.baseLanes|c:c,c)}else x!==null?(xd(o,x.cachePool),Xx(o,x),$i(),o.memoizedState=null):(a!==null&&xd(o,null),tm(),$i());return wn(a,o,v,c),o.child}function ZS(a,o,c,m){var v=Wh();return v=v===null?null:{parent:an._currentValue,pool:v},o.memoizedState={baseLanes:c,cachePool:v},a!==null&&xd(o,null),tm(),$S(o),a!==null&&fc(a,o,m,!0),null}function Ld(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function Am(a,o,c,m,v){return Ys(o),c=am(a,o,c,m,void 0,v),m=im(),a!==null&&!gn?(sm(a,o,v),ni(a,o,v)):(st&&m&&zh(o),o.flags|=1,wn(a,o,c,v),o.child)}function JS(a,o,c,m,v,x){return Ys(o),o.updateQueue=null,c=Zx(o,m,c,v),Qx(a),m=im(),a!==null&&!gn?(sm(a,o,x),ni(a,o,x)):(st&&m&&zh(o),o.flags|=1,wn(a,o,c,x),o.child)}function e1(a,o,c,m,v){if(Ys(o),o.stateNode===null){var x=Uo,N=c.contextType;typeof N=="object"&&N!==null&&(x=Rn(N)),x=new c(m,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=xm,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=m,x.state=o.memoizedState,x.refs={},Qh(o),N=c.contextType,x.context=typeof N=="object"&&N!==null?Rn(N):Uo,x.state=o.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(bm(o,c,N,m),x.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(N=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),N!==x.state&&xm.enqueueReplaceState(x,x.state,null),bc(o,m,x,v),vc(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(a===null){x=o.stateNode;var D=o.memoizedProps,H=Vs(c,D);x.props=H;var ee=x.context,le=c.contextType;N=Uo,typeof le=="object"&&le!==null&&(N=Rn(le));var fe=c.getDerivedStateFromProps;le=typeof fe=="function"||typeof x.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,le||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D||ee!==N)&&US(o,x,m,N),ji=!1;var ne=o.memoizedState;x.state=ne,bc(o,m,x,v),vc(),ee=o.memoizedState,D||ne!==ee||ji?(typeof fe=="function"&&(bm(o,c,fe,m),ee=o.memoizedState),(H=ji||BS(o,c,H,m,ne,ee,N))?(le||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=ee),x.props=m,x.state=ee,x.context=N,m=H):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{x=o.stateNode,Zh(a,o),N=o.memoizedProps,le=Vs(c,N),x.props=le,fe=o.pendingProps,ne=x.context,ee=c.contextType,H=Uo,typeof ee=="object"&&ee!==null&&(H=Rn(ee)),D=c.getDerivedStateFromProps,(ee=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==fe||ne!==H)&&US(o,x,m,H),ji=!1,ne=o.memoizedState,x.state=ne,bc(o,m,x,v),vc();var ie=o.memoizedState;N!==fe||ne!==ie||ji||a!==null&&a.dependencies!==null&&vd(a.dependencies)?(typeof D=="function"&&(bm(o,c,D,m),ie=o.memoizedState),(le=ji||BS(o,c,le,m,ne,ie,H)||a!==null&&a.dependencies!==null&&vd(a.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(m,ie,H),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(m,ie,H)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ie),x.props=m,x.state=ie,x.context=H,m=le):(typeof x.componentDidUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(o.flags|=1024),m=!1)}return x=m,Ld(a,o),m=(o.flags&128)!==0,x||m?(x=o.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,a!==null&&m?(o.child=Xo(o,a.child,null,v),o.child=Xo(o,null,c,v)):wn(a,o,c,v),o.memoizedState=x.state,a=o.child):a=ni(a,o,v),a}function t1(a,o,c,m){return uc(),o.flags|=256,wn(a,o,c,m),o.child}var Cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Em(a){return{baseLanes:a,cachePool:Hx()}}function Tm(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=Yr),a}function n1(a,o,c){var m=o.pendingProps,v=!1,x=(o.flags&128)!==0,N;if((N=x)||(N=a!==null&&a.memoizedState===null?!1:(sn.current&2)!==0),N&&(v=!0,o.flags&=-129),N=(o.flags&32)!==0,o.flags&=-33,a===null){if(st){if(v?Li(o):$i(),st){var D=Ht,H;if(H=D){e:{for(H=D,D=Ea;H.nodeType!==8;){if(!D){D=null;break e}if(H=fa(H.nextSibling),H===null){D=null;break e}}D=H}D!==null?(o.memoizedState={dehydrated:D,treeContext:Bs!==null?{id:Xa,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},H=yr(18,null,null,0),H.stateNode=D,H.return=o,o.child=H,qn=o,Ht=null,H=!0):H=!1}H||Hs(o)}if(D=o.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return lg(D)?o.lanes=32:o.lanes=536870912,null;ti(o)}return D=m.children,m=m.fallback,v?($i(),v=o.mode,D=$d({mode:"hidden",children:D},v),m=$s(m,v,c,null),D.return=o,m.return=o,D.sibling=m,o.child=D,v=o.child,v.memoizedState=Em(c),v.childLanes=Tm(a,N,c),o.memoizedState=Cm,m):(Li(o),Pm(o,D))}if(H=a.memoizedState,H!==null&&(D=H.dehydrated,D!==null)){if(x)o.flags&256?(Li(o),o.flags&=-257,o=wm(a,o,c)):o.memoizedState!==null?($i(),o.child=a.child,o.flags|=128,o=null):($i(),v=m.fallback,D=o.mode,m=$d({mode:"visible",children:m.children},D),v=$s(v,D,c,null),v.flags|=2,m.return=o,v.return=o,m.sibling=v,o.child=m,Xo(o,a.child,null,c),m=o.child,m.memoizedState=Em(c),m.childLanes=Tm(a,N,c),o.memoizedState=Cm,o=v);else if(Li(o),lg(D)){if(N=D.nextSibling&&D.nextSibling.dataset,N)var ee=N.dgst;N=ee,m=Error(r(419)),m.stack="",m.digest=N,dc({value:m,source:null,stack:null}),o=wm(a,o,c)}else if(gn||fc(a,o,c,!1),N=(c&a.childLanes)!==0,gn||N){if(N=At,N!==null&&(m=c&-c,m=(m&42)!==0?1:nt(m),m=(m&(N.suspendedLanes|c))!==0?0:m,m!==0&&m!==H.retryLane))throw H.retryLane=m,Bo(a,m),Ar(N,a,m),VS;D.data==="$?"||qm(),o=wm(a,o,c)}else D.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=H.treeContext,Ht=fa(D.nextSibling),qn=o,st=!0,zs=null,Ea=!1,a!==null&&(zr[Hr++]=Xa,zr[Hr++]=Qa,zr[Hr++]=Bs,Xa=a.id,Qa=a.overflow,Bs=o),o=Pm(o,m.children),o.flags|=4096);return o}return v?($i(),v=m.fallback,D=o.mode,H=a.child,ee=H.sibling,m=Wa(H,{mode:"hidden",children:m.children}),m.subtreeFlags=H.subtreeFlags&65011712,ee!==null?v=Wa(ee,v):(v=$s(v,D,c,null),v.flags|=2),v.return=o,m.return=o,m.sibling=v,o.child=m,m=v,v=o.child,D=a.child.memoizedState,D===null?D=Em(c):(H=D.cachePool,H!==null?(ee=an._currentValue,H=H.parent!==ee?{parent:ee,pool:ee}:H):H=Hx(),D={baseLanes:D.baseLanes|c,cachePool:H}),v.memoizedState=D,v.childLanes=Tm(a,N,c),o.memoizedState=Cm,m):(Li(o),c=a.child,a=c.sibling,c=Wa(c,{mode:"visible",children:m.children}),c.return=o,c.sibling=null,a!==null&&(N=o.deletions,N===null?(o.deletions=[a],o.flags|=16):N.push(a)),o.child=c,o.memoizedState=null,c)}function Pm(a,o){return o=$d({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function $d(a,o){return a=yr(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function wm(a,o,c){return Xo(o,a.child,null,c),a=Pm(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function r1(a,o,c){a.lanes|=o;var m=a.alternate;m!==null&&(m.lanes|=o),qh(a.return,o,c)}function Om(a,o,c,m,v){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:v}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=c,x.tailMode=v)}function a1(a,o,c){var m=o.pendingProps,v=m.revealOrder,x=m.tail;if(wn(a,o,m.children,c),m=sn.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&r1(a,c,o);else if(a.tag===19)r1(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(ae(sn,m),v){case"forwards":for(c=o.child,v=null;c!==null;)a=c.alternate,a!==null&&kd(a)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Om(o,!1,v,c,x);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&kd(a)===null){o.child=v;break}a=v.sibling,v.sibling=c,c=v,v=a}Om(o,!0,c,null,x);break;case"together":Om(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ni(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),Gi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(fc(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Wa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Wa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function Nm(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&vd(a)))}function UM(a,o,c){switch(o.tag){case 3:Ne(o,o.stateNode.containerInfo),Mi(o,an,a.memoizedState.cache),uc();break;case 27:case 5:$e(o);break;case 4:Ne(o,o.stateNode.containerInfo);break;case 10:Mi(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Li(o),o.flags|=128,null):(c&o.child.childLanes)!==0?n1(a,o,c):(Li(o),a=ni(a,o,c),a!==null?a.sibling:null);Li(o);break;case 19:var v=(a.flags&128)!==0;if(m=(c&o.childLanes)!==0,m||(fc(a,o,c,!1),m=(c&o.childLanes)!==0),v){if(m)return a1(a,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ae(sn,sn.current),m)break;return null;case 22:case 23:return o.lanes=0,QS(a,o,c);case 24:Mi(o,an,a.memoizedState.cache)}return ni(a,o,c)}function i1(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)gn=!0;else{if(!Nm(a,c)&&(o.flags&128)===0)return gn=!1,UM(a,o,c);gn=(a.flags&131072)!==0}else gn=!1,st&&(o.flags&1048576)!==0&&Ix(o,yd,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var m=o.elementType,v=m._init;if(m=v(m._payload),o.type=m,typeof m=="function")$h(m)?(a=Vs(m,a),o.tag=1,o=e1(null,o,m,a,c)):(o.tag=0,o=Am(null,o,m,a,c));else{if(m!=null){if(v=m.$$typeof,v===_){o.tag=11,o=KS(null,o,m,a,c);break e}else if(v===j){o.tag=14,o=WS(null,o,m,a,c);break e}}throw o=X(m)||m,Error(r(306,o,""))}}return o;case 0:return Am(a,o,o.type,o.pendingProps,c);case 1:return m=o.type,v=Vs(m,o.pendingProps),e1(a,o,m,v,c);case 3:e:{if(Ne(o,o.stateNode.containerInfo),a===null)throw Error(r(387));m=o.pendingProps;var x=o.memoizedState;v=x.element,Zh(a,o),bc(o,m,null,c);var N=o.memoizedState;if(m=N.cache,Mi(o,an,m),m!==x.cache&&Fh(o,[an],c,!0),vc(),m=N.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:N.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=t1(a,o,m,c);break e}else if(m!==v){v=Br(Error(r(424)),o),dc(v),o=t1(a,o,m,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ht=fa(a.firstChild),qn=o,st=!0,zs=null,Ea=!0,c=LS(o,null,m,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(uc(),m===v){o=ni(a,o,c);break e}wn(a,o,m,c)}o=o.child}return o;case 26:return Ld(a,o),a===null?(c=cA(o.type,null,o.pendingProps,null))?o.memoizedState=c:st||(c=o.type,a=o.pendingProps,m=Zd(Ae.current).createElement(c),m[Ft]=o,m[pn]=a,Nn(m,c,a),bt(m),o.stateNode=m):o.memoizedState=cA(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return $e(o),a===null&&st&&(m=o.stateNode=sA(o.type,o.pendingProps,Ae.current),qn=o,Ea=!0,v=Ht,Vi(o.type)?(cg=v,Ht=fa(m.firstChild)):Ht=v),wn(a,o,o.pendingProps.children,c),Ld(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&st&&((v=m=Ht)&&(m=hj(m,o.type,o.pendingProps,Ea),m!==null?(o.stateNode=m,qn=o,Ht=fa(m.firstChild),Ea=!1,v=!0):v=!1),v||Hs(o)),$e(o),v=o.type,x=o.pendingProps,N=a!==null?a.memoizedProps:null,m=x.children,ig(v,x)?m=null:N!==null&&ig(v,N)&&(o.flags|=32),o.memoizedState!==null&&(v=am(a,o,MM,null,null,c),zc._currentValue=v),Ld(a,o),wn(a,o,m,c),o.child;case 6:return a===null&&st&&((a=c=Ht)&&(c=mj(c,o.pendingProps,Ea),c!==null?(o.stateNode=c,qn=o,Ht=null,a=!0):a=!1),a||Hs(o)),null;case 13:return n1(a,o,c);case 4:return Ne(o,o.stateNode.containerInfo),m=o.pendingProps,a===null?o.child=Xo(o,null,m,c):wn(a,o,m,c),o.child;case 11:return KS(a,o,o.type,o.pendingProps,c);case 7:return wn(a,o,o.pendingProps,c),o.child;case 8:return wn(a,o,o.pendingProps.children,c),o.child;case 12:return wn(a,o,o.pendingProps.children,c),o.child;case 10:return m=o.pendingProps,Mi(o,o.type,m.value),wn(a,o,m.children,c),o.child;case 9:return v=o.type._context,m=o.pendingProps.children,Ys(o),v=Rn(v),m=m(v),o.flags|=1,wn(a,o,m,c),o.child;case 14:return WS(a,o,o.type,o.pendingProps,c);case 15:return XS(a,o,o.type,o.pendingProps,c);case 19:return a1(a,o,c);case 31:return m=o.pendingProps,c=o.mode,m={mode:m.mode,children:m.children},a===null?(c=$d(m,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Wa(a.child,m),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return QS(a,o,c);case 24:return Ys(o),m=Rn(an),a===null?(v=Wh(),v===null&&(v=At,x=Vh(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=c),v=x),o.memoizedState={parent:m,cache:v},Qh(o),Mi(o,an,v)):((a.lanes&c)!==0&&(Zh(a,o),bc(o,null,null,c),vc()),v=a.memoizedState,x=o.memoizedState,v.parent!==m?(v={parent:m,cache:m},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Mi(o,an,m)):(m=x.cache,Mi(o,an,m),m!==v.cache&&Fh(o,[an],c,!0))),wn(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ri(a){a.flags|=4}function s1(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!hA(o)){if(o=Gr.current,o!==null&&((et&4194048)===et?Ta!==null:(et&62914560)!==et&&(et&536870912)===0||o!==Ta))throw gc=Xh,Gx;a.flags|=8192}}function Bd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ge():536870912,a.lanes|=o,el|=o)}function Pc(a,o){if(!st)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Lt(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,m=0;if(o)for(var v=a.child;v!==null;)c|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)c|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=m,a.childLanes=c,o}function zM(a,o,c){var m=o.pendingProps;switch(Hh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(o),null;case 1:return Lt(o),null;case 3:return c=o.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Ja(an),xe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(cc(o)?ri(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$x())),Lt(o),null;case 26:return c=o.memoizedState,a===null?(ri(o),c!==null?(Lt(o),s1(o,c)):(Lt(o),o.flags&=-16777217)):c?c!==a.memoizedState?(ri(o),Lt(o),s1(o,c)):(Lt(o),o.flags&=-16777217):(a.memoizedProps!==m&&ri(o),Lt(o),o.flags&=-16777217),null;case 27:He(o),c=Ae.current;var v=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==m&&ri(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Lt(o),null}a=me.current,cc(o)?Rx(o):(a=sA(v,m,c),o.stateNode=a,ri(o))}return Lt(o),null;case 5:if(He(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&ri(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Lt(o),null}if(a=me.current,cc(o))Rx(o);else{switch(v=Zd(Ae.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?v.createElement(c,{is:m.is}):v.createElement(c)}}a[Ft]=o,a[pn]=m;e:for(v=o.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}o.stateNode=a;e:switch(Nn(a,c,m),c){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ri(o)}}return Lt(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==m&&ri(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(r(166));if(a=Ae.current,cc(o)){if(a=o.stateNode,c=o.memoizedProps,m=null,v=qn,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}a[Ft]=o,a=!!(a.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||J1(a.nodeValue,c)),a||Hs(o)}else a=Zd(a).createTextNode(m),a[Ft]=o,o.stateNode=a}return Lt(o),null;case 13:if(m=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=cc(o),m!==null&&m.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Ft]=o}else uc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Lt(o),v=!1}else v=$x(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(ti(o),o):(ti(o),null)}if(ti(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=m!==null,a=a!==null&&a.memoizedState!==null,c){m=o.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var x=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),x!==v&&(m.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),Bd(o,o.updateQueue),Lt(o),null;case 4:return xe(),a===null&&eg(o.stateNode.containerInfo),Lt(o),null;case 10:return Ja(o.type),Lt(o),null;case 19:if(K(sn),v=o.memoizedState,v===null)return Lt(o),null;if(m=(o.flags&128)!==0,x=v.rendering,x===null)if(m)Pc(v,!1);else{if(Gt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(x=kd(a),x!==null){for(o.flags|=128,Pc(v,!1),a=x.updateQueue,o.updateQueue=a,Bd(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)kx(c,a),c=c.sibling;return ae(sn,sn.current&1|2),o.child}a=a.sibling}v.tail!==null&&Et()>Hd&&(o.flags|=128,m=!0,Pc(v,!1),o.lanes=4194304)}else{if(!m)if(a=kd(x),a!==null){if(o.flags|=128,m=!0,a=a.updateQueue,o.updateQueue=a,Bd(o,a),Pc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!x.alternate&&!st)return Lt(o),null}else 2*Et()-v.renderingStartTime>Hd&&c!==536870912&&(o.flags|=128,m=!0,Pc(v,!1),o.lanes=4194304);v.isBackwards?(x.sibling=o.child,o.child=x):(a=v.last,a!==null?a.sibling=x:o.child=x,v.last=x)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Et(),o.sibling=null,a=sn.current,ae(sn,m?a&1|2:a&1),o):(Lt(o),null);case 22:case 23:return ti(o),nm(),m=o.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(c&536870912)!==0&&(o.flags&128)===0&&(Lt(o),o.subtreeFlags&6&&(o.flags|=8192)):Lt(o),c=o.updateQueue,c!==null&&Bd(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==c&&(o.flags|=2048),a!==null&&K(qs),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ja(an),Lt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function HM(a,o){switch(Hh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ja(an),xe(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return He(o),null;case 13:if(ti(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));uc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return K(sn),null;case 4:return xe(),null;case 10:return Ja(o.type),null;case 22:case 23:return ti(o),nm(),a!==null&&K(qs),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ja(an),null;case 25:return null;default:return null}}function o1(a,o){switch(Hh(o),o.tag){case 3:Ja(an),xe();break;case 26:case 27:case 5:He(o);break;case 4:xe();break;case 13:ti(o);break;case 19:K(sn);break;case 10:Ja(o.type);break;case 22:case 23:ti(o),nm(),a!==null&&K(qs);break;case 24:Ja(an)}}function wc(a,o){try{var c=o.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var v=m.next;c=v;do{if((c.tag&a)===a){m=void 0;var x=c.create,N=c.inst;m=x(),N.destroy=m}c=c.next}while(c!==v)}}catch(D){xt(o,o.return,D)}}function Bi(a,o,c){try{var m=o.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var x=v.next;m=x;do{if((m.tag&a)===a){var N=m.inst,D=N.destroy;if(D!==void 0){N.destroy=void 0,v=o;var H=c,ee=D;try{ee()}catch(le){xt(v,H,le)}}}m=m.next}while(m!==x)}}catch(le){xt(o,o.return,le)}}function l1(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{Wx(o,c)}catch(m){xt(a,a.return,m)}}}function c1(a,o,c){c.props=Vs(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(m){xt(a,o,m)}}function Oc(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof c=="function"?a.refCleanup=c(m):c.current=m}}catch(v){xt(a,o,v)}}function Pa(a,o){var c=a.ref,m=a.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(v){xt(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){xt(a,o,v)}else c.current=null}function u1(a){var o=a.type,c=a.memoizedProps,m=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(v){xt(a,a.return,v)}}function Dm(a,o,c){try{var m=a.stateNode;cj(m,a.type,c,o),m[pn]=o}catch(v){xt(a,a.return,v)}}function d1(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Vi(a.type)||a.tag===4}function _m(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||d1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Vi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Mm(a,o,c){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Qd));else if(m!==4&&(m===27&&Vi(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(Mm(a,o,c),a=a.sibling;a!==null;)Mm(a,o,c),a=a.sibling}function Ud(a,o,c){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(m!==4&&(m===27&&Vi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Ud(a,o,c),a=a.sibling;a!==null;)Ud(a,o,c),a=a.sibling}function f1(a){var o=a.stateNode,c=a.memoizedProps;try{for(var m=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Nn(o,m,c),o[Ft]=a,o[pn]=c}catch(x){xt(a,a.return,x)}}var ai=!1,Kt=!1,jm=!1,p1=typeof WeakSet=="function"?WeakSet:Set,yn=null;function GM(a,o){if(a=a.containerInfo,rg=af,a=ct(a),mn(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var v=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var N=0,D=-1,H=-1,ee=0,le=0,fe=a,ne=null;t:for(;;){for(var ie;fe!==c||v!==0&&fe.nodeType!==3||(D=N+v),fe!==x||m!==0&&fe.nodeType!==3||(H=N+m),fe.nodeType===3&&(N+=fe.nodeValue.length),(ie=fe.firstChild)!==null;)ne=fe,fe=ie;for(;;){if(fe===a)break t;if(ne===c&&++ee===v&&(D=N),ne===x&&++le===m&&(H=N),(ie=fe.nextSibling)!==null)break;fe=ne,ne=fe.parentNode}fe=ie}c=D===-1||H===-1?null:{start:D,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(ag={focusedElem:a,selectionRange:c},af=!1,yn=o;yn!==null;)if(o=yn,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,yn=a;else for(;yn!==null;){switch(o=yn,x=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,c=o,v=x.memoizedProps,x=x.memoizedState,m=c.stateNode;try{var ze=Vs(c.type,v,c.elementType===c.type);a=m.getSnapshotBeforeUpdate(ze,x),m.__reactInternalSnapshotBeforeUpdate=a}catch(Le){xt(c,c.return,Le)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)og(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":og(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,yn=a;break}yn=o.return}}function h1(a,o,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:Ui(a,c),m&4&&wc(5,c);break;case 1:if(Ui(a,c),m&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(N){xt(c,c.return,N)}else{var v=Vs(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(N){xt(c,c.return,N)}}m&64&&l1(c),m&512&&Oc(c,c.return);break;case 3:if(Ui(a,c),m&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Wx(a,o)}catch(N){xt(c,c.return,N)}}break;case 27:o===null&&m&4&&f1(c);case 26:case 5:Ui(a,c),o===null&&m&4&&u1(c),m&512&&Oc(c,c.return);break;case 12:Ui(a,c);break;case 13:Ui(a,c),m&4&&y1(a,c),m&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=ZM.bind(null,c),gj(a,c))));break;case 22:if(m=c.memoizedState!==null||ai,!m){o=o!==null&&o.memoizedState!==null||Kt,v=ai;var x=Kt;ai=m,(Kt=o)&&!x?zi(a,c,(c.subtreeFlags&8772)!==0):Ui(a,c),ai=v,Kt=x}break;case 30:break;default:Ui(a,c)}}function m1(a){var o=a.alternate;o!==null&&(a.alternate=null,m1(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&wt(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var _t=null,nr=!1;function ii(a,o,c){for(c=c.child;c!==null;)g1(a,o,c),c=c.sibling}function g1(a,o,c){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Aa,c)}catch{}switch(c.tag){case 26:Kt||Pa(c,o),ii(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Kt||Pa(c,o);var m=_t,v=nr;Vi(c.type)&&(_t=c.stateNode,nr=!1),ii(a,o,c),Lc(c.stateNode),_t=m,nr=v;break;case 5:Kt||Pa(c,o);case 6:if(m=_t,v=nr,_t=null,ii(a,o,c),_t=m,nr=v,_t!==null)if(nr)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(c.stateNode)}catch(x){xt(c,o,x)}else try{_t.removeChild(c.stateNode)}catch(x){xt(c,o,x)}break;case 18:_t!==null&&(nr?(a=_t,aA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),qc(a)):aA(_t,c.stateNode));break;case 4:m=_t,v=nr,_t=c.stateNode.containerInfo,nr=!0,ii(a,o,c),_t=m,nr=v;break;case 0:case 11:case 14:case 15:Kt||Bi(2,c,o),Kt||Bi(4,c,o),ii(a,o,c);break;case 1:Kt||(Pa(c,o),m=c.stateNode,typeof m.componentWillUnmount=="function"&&c1(c,o,m)),ii(a,o,c);break;case 21:ii(a,o,c);break;case 22:Kt=(m=Kt)||c.memoizedState!==null,ii(a,o,c),Kt=m;break;default:ii(a,o,c)}}function y1(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{qc(a)}catch(c){xt(o,o.return,c)}}function YM(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new p1),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new p1),o;default:throw Error(r(435,a.tag))}}function km(a,o){var c=YM(a);o.forEach(function(m){var v=JM.bind(null,a,m);c.has(m)||(c.add(m),m.then(v,v))})}function vr(a,o){var c=o.deletions;if(c!==null)for(var m=0;m<c.length;m++){var v=c[m],x=a,N=o,D=N;e:for(;D!==null;){switch(D.tag){case 27:if(Vi(D.type)){_t=D.stateNode,nr=!1;break e}break;case 5:_t=D.stateNode,nr=!1;break e;case 3:case 4:_t=D.stateNode.containerInfo,nr=!0;break e}D=D.return}if(_t===null)throw Error(r(160));g1(x,N,v),_t=null,nr=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)v1(o,a),o=o.sibling}var da=null;function v1(a,o){var c=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:vr(o,a),br(a),m&4&&(Bi(3,a,a.return),wc(3,a),Bi(5,a,a.return));break;case 1:vr(o,a),br(a),m&512&&(Kt||c===null||Pa(c,c.return)),m&64&&ai&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var v=da;if(vr(o,a),br(a),m&512&&(Kt||c===null||Pa(c,c.return)),m&4){var x=c!==null?c.memoizedState:null;if(m=a.memoizedState,c===null)if(m===null)if(a.stateNode===null){e:{m=a.type,c=a.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":x=v.getElementsByTagName("title")[0],(!x||x[Po]||x[Ft]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(m),v.head.insertBefore(x,v.querySelector("head > title"))),Nn(x,m,c),x[Ft]=a,bt(x),m=x;break e;case"link":var N=fA("link","href",v).get(m+(c.href||""));if(N){for(var D=0;D<N.length;D++)if(x=N[D],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){N.splice(D,1);break t}}x=v.createElement(m),Nn(x,m,c),v.head.appendChild(x);break;case"meta":if(N=fA("meta","content",v).get(m+(c.content||""))){for(D=0;D<N.length;D++)if(x=N[D],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){N.splice(D,1);break t}}x=v.createElement(m),Nn(x,m,c),v.head.appendChild(x);break;default:throw Error(r(468,m))}x[Ft]=a,bt(x),m=x}a.stateNode=m}else pA(v,a.type,a.stateNode);else a.stateNode=dA(v,m,a.memoizedProps);else x!==m?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,m===null?pA(v,a.type,a.stateNode):dA(v,m,a.memoizedProps)):m===null&&a.stateNode!==null&&Dm(a,a.memoizedProps,c.memoizedProps)}break;case 27:vr(o,a),br(a),m&512&&(Kt||c===null||Pa(c,c.return)),c!==null&&m&4&&Dm(a,a.memoizedProps,c.memoizedProps);break;case 5:if(vr(o,a),br(a),m&512&&(Kt||c===null||Pa(c,c.return)),a.flags&32){v=a.stateNode;try{Ga(v,"")}catch(ie){xt(a,a.return,ie)}}m&4&&a.stateNode!=null&&(v=a.memoizedProps,Dm(a,v,c!==null?c.memoizedProps:v)),m&1024&&(jm=!0);break;case 6:if(vr(o,a),br(a),m&4){if(a.stateNode===null)throw Error(r(162));m=a.memoizedProps,c=a.stateNode;try{c.nodeValue=m}catch(ie){xt(a,a.return,ie)}}break;case 3:if(tf=null,v=da,da=Jd(o.containerInfo),vr(o,a),da=v,br(a),m&4&&c!==null&&c.memoizedState.isDehydrated)try{qc(o.containerInfo)}catch(ie){xt(a,a.return,ie)}jm&&(jm=!1,b1(a));break;case 4:m=da,da=Jd(a.stateNode.containerInfo),vr(o,a),br(a),da=m;break;case 12:vr(o,a),br(a);break;case 13:vr(o,a),br(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Um=Et()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,km(a,m)));break;case 22:v=a.memoizedState!==null;var H=c!==null&&c.memoizedState!==null,ee=ai,le=Kt;if(ai=ee||v,Kt=le||H,vr(o,a),Kt=le,ai=ee,br(a),m&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(c===null||H||ai||Kt||Ks(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){H=c=o;try{if(x=H.stateNode,v)N=x.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{D=H.stateNode;var fe=H.memoizedProps.style,ne=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;D.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ie){xt(H,H.return,ie)}}}else if(o.tag===6){if(c===null){H=o;try{H.stateNode.nodeValue=v?"":H.memoizedProps}catch(ie){xt(H,H.return,ie)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=a.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,km(a,c))));break;case 19:vr(o,a),br(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,km(a,m)));break;case 30:break;case 21:break;default:vr(o,a),br(a)}}function br(a){var o=a.flags;if(o&2){try{for(var c,m=a.return;m!==null;){if(d1(m)){c=m;break}m=m.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var v=c.stateNode,x=_m(a);Ud(a,x,v);break;case 5:var N=c.stateNode;c.flags&32&&(Ga(N,""),c.flags&=-33);var D=_m(a);Ud(a,D,N);break;case 3:case 4:var H=c.stateNode.containerInfo,ee=_m(a);Mm(a,ee,H);break;default:throw Error(r(161))}}catch(le){xt(a,a.return,le)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function b1(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;b1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ui(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)h1(a,o.alternate,o),o=o.sibling}function Ks(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Bi(4,o,o.return),Ks(o);break;case 1:Pa(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&c1(o,o.return,c),Ks(o);break;case 27:Lc(o.stateNode);case 26:case 5:Pa(o,o.return),Ks(o);break;case 22:o.memoizedState===null&&Ks(o);break;case 30:Ks(o);break;default:Ks(o)}a=a.sibling}}function zi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,v=a,x=o,N=x.flags;switch(x.tag){case 0:case 11:case 15:zi(v,x,c),wc(4,x);break;case 1:if(zi(v,x,c),m=x,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ee){xt(m,m.return,ee)}if(m=x,v=m.updateQueue,v!==null){var D=m.stateNode;try{var H=v.shared.hiddenCallbacks;if(H!==null)for(v.shared.hiddenCallbacks=null,v=0;v<H.length;v++)Kx(H[v],D)}catch(ee){xt(m,m.return,ee)}}c&&N&64&&l1(x),Oc(x,x.return);break;case 27:f1(x);case 26:case 5:zi(v,x,c),c&&m===null&&N&4&&u1(x),Oc(x,x.return);break;case 12:zi(v,x,c);break;case 13:zi(v,x,c),c&&N&4&&y1(v,x);break;case 22:x.memoizedState===null&&zi(v,x,c),Oc(x,x.return);break;case 30:break;default:zi(v,x,c)}o=o.sibling}}function Im(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&pc(c))}function Rm(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&pc(a))}function wa(a,o,c,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)x1(a,o,c,m),o=o.sibling}function x1(a,o,c,m){var v=o.flags;switch(o.tag){case 0:case 11:case 15:wa(a,o,c,m),v&2048&&wc(9,o);break;case 1:wa(a,o,c,m);break;case 3:wa(a,o,c,m),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&pc(a)));break;case 12:if(v&2048){wa(a,o,c,m),a=o.stateNode;try{var x=o.memoizedProps,N=x.id,D=x.onPostCommit;typeof D=="function"&&D(N,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(H){xt(o,o.return,H)}}else wa(a,o,c,m);break;case 13:wa(a,o,c,m);break;case 23:break;case 22:x=o.stateNode,N=o.alternate,o.memoizedState!==null?x._visibility&2?wa(a,o,c,m):Nc(a,o):x._visibility&2?wa(a,o,c,m):(x._visibility|=2,Qo(a,o,c,m,(o.subtreeFlags&10256)!==0)),v&2048&&Im(N,o);break;case 24:wa(a,o,c,m),v&2048&&Rm(o.alternate,o);break;default:wa(a,o,c,m)}}function Qo(a,o,c,m,v){for(v=v&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var x=a,N=o,D=c,H=m,ee=N.flags;switch(N.tag){case 0:case 11:case 15:Qo(x,N,D,H,v),wc(8,N);break;case 23:break;case 22:var le=N.stateNode;N.memoizedState!==null?le._visibility&2?Qo(x,N,D,H,v):Nc(x,N):(le._visibility|=2,Qo(x,N,D,H,v)),v&&ee&2048&&Im(N.alternate,N);break;case 24:Qo(x,N,D,H,v),v&&ee&2048&&Rm(N.alternate,N);break;default:Qo(x,N,D,H,v)}o=o.sibling}}function Nc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,m=o,v=m.flags;switch(m.tag){case 22:Nc(c,m),v&2048&&Im(m.alternate,m);break;case 24:Nc(c,m),v&2048&&Rm(m.alternate,m);break;default:Nc(c,m)}o=o.sibling}}var Dc=8192;function Zo(a){if(a.subtreeFlags&Dc)for(a=a.child;a!==null;)S1(a),a=a.sibling}function S1(a){switch(a.tag){case 26:Zo(a),a.flags&Dc&&a.memoizedState!==null&&Nj(da,a.memoizedState,a.memoizedProps);break;case 5:Zo(a);break;case 3:case 4:var o=da;da=Jd(a.stateNode.containerInfo),Zo(a),da=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Dc,Dc=16777216,Zo(a),Dc=o):Zo(a));break;default:Zo(a)}}function A1(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function _c(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];yn=m,E1(m,a)}A1(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)C1(a),a=a.sibling}function C1(a){switch(a.tag){case 0:case 11:case 15:_c(a),a.flags&2048&&Bi(9,a,a.return);break;case 3:_c(a);break;case 12:_c(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,zd(a)):_c(a);break;default:_c(a)}}function zd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];yn=m,E1(m,a)}A1(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Bi(8,o,o.return),zd(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,zd(o));break;default:zd(o)}a=a.sibling}}function E1(a,o){for(;yn!==null;){var c=yn;switch(c.tag){case 0:case 11:case 15:Bi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:pc(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,yn=m;else e:for(c=a;yn!==null;){m=yn;var v=m.sibling,x=m.return;if(m1(m),m===c){yn=null;break e}if(v!==null){v.return=x,yn=v;break e}yn=x}}}var qM={getCacheForType:function(a){var o=Rn(an),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},FM=typeof WeakMap=="function"?WeakMap:Map,ut=0,At=null,Ke=null,et=0,dt=0,xr=null,Hi=!1,Jo=!1,Lm=!1,si=0,Gt=0,Gi=0,Ws=0,$m=0,Yr=0,el=0,Mc=null,rr=null,Bm=!1,Um=0,Hd=1/0,Gd=null,Yi=null,On=0,qi=null,tl=null,nl=0,zm=0,Hm=null,T1=null,jc=0,Gm=null;function Sr(){if((ut&2)!==0&&et!==0)return et&-et;if(I.T!==null){var a=Go;return a!==0?a:Xm()}return qt()}function P1(){Yr===0&&(Yr=(et&536870912)===0||st?ce():536870912);var a=Gr.current;return a!==null&&(a.flags|=32),Yr}function Ar(a,o,c){(a===At&&(dt===2||dt===9)||a.cancelPendingCommit!==null)&&(rl(a,0),Fi(a,et,Yr,!1)),Re(a,c),((ut&2)===0||a!==At)&&(a===At&&((ut&2)===0&&(Ws|=c),Gt===4&&Fi(a,et,Yr,!1)),Oa(a))}function w1(a,o,c){if((ut&6)!==0)throw Error(r(327));var m=!c&&(o&124)===0&&(o&a.expiredLanes)===0||oe(a,o),v=m?WM(a,o):Fm(a,o,!0),x=m;do{if(v===0){Jo&&!m&&Fi(a,o,0,!1);break}else{if(c=a.current.alternate,x&&!VM(c)){v=Fm(a,o,!1),x=!1;continue}if(v===2){if(x=o,a.errorRecoveryDisabledLanes&x)var N=0;else N=a.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){o=N;e:{var D=a;v=Mc;var H=D.current.memoizedState.isDehydrated;if(H&&(rl(D,N).flags|=256),N=Fm(D,N,!1),N!==2){if(Lm&&!H){D.errorRecoveryDisabledLanes|=x,Ws|=x,v=4;break e}x=rr,rr=v,x!==null&&(rr===null?rr=x:rr.push.apply(rr,x))}v=N}if(x=!1,v!==2)continue}}if(v===1){rl(a,0),Fi(a,o,0,!0);break}e:{switch(m=a,x=v,x){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Fi(m,o,Yr,!Hi);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=Um+300-Et(),10<v)){if(Fi(m,o,Yr,!Hi),B(m,0,!0)!==0)break e;m.timeoutHandle=nA(O1.bind(null,m,c,rr,Gd,Bm,o,Yr,Ws,el,Hi,x,2,-0,0),v);break e}O1(m,c,rr,Gd,Bm,o,Yr,Ws,el,Hi,x,0,-0,0)}}break}while(!0);Oa(a)}function O1(a,o,c,m,v,x,N,D,H,ee,le,fe,ne,ie){if(a.timeoutHandle=-1,fe=o.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(Uc={stylesheets:null,count:0,unsuspend:Oj},S1(o),fe=Dj(),fe!==null)){a.cancelPendingCommit=fe(I1.bind(null,a,o,x,c,m,v,N,D,H,le,1,ne,ie)),Fi(a,x,N,!ee);return}I1(a,o,x,c,m,v,N,D,H)}function VM(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var v=c[m],x=v.getSnapshot;v=v.value;try{if(!pe(x(),v))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fi(a,o,c,m){o&=~$m,o&=~Ws,a.suspendedLanes|=o,a.pingedLanes&=~o,m&&(a.warmLanes|=o),m=a.expirationTimes;for(var v=o;0<v;){var x=31-Ie(v),N=1<<x;m[x]=-1,v&=~N}c!==0&&Tt(a,c,o)}function Yd(){return(ut&6)===0?(kc(0),!1):!0}function Ym(){if(Ke!==null){if(dt===0)var a=Ke.return;else a=Ke,Za=Gs=null,om(a),Wo=null,Ec=0,a=Ke;for(;a!==null;)o1(a.alternate,a),a=a.return;Ke=null}}function rl(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,dj(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Ym(),At=a,Ke=c=Wa(a.current,null),et=o,dt=0,xr=null,Hi=!1,Jo=oe(a,o),Lm=!1,el=Yr=$m=Ws=Gi=Gt=0,rr=Mc=null,Bm=!1,(o&8)!==0&&(o|=o&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=o;0<m;){var v=31-Ie(m),x=1<<v;o|=a[v],m&=~x}return si=o,fd(),c}function N1(a,o){Fe=null,I.H=_d,o===mc||o===Sd?(o=Fx(),dt=3):o===Gx?(o=Fx(),dt=4):dt=o===VS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,xr=o,Ke===null&&(Gt=1,Rd(a,Br(o,a.current)))}function D1(){var a=I.H;return I.H=_d,a===null?_d:a}function _1(){var a=I.A;return I.A=qM,a}function qm(){Gt=4,Hi||(et&4194048)!==et&&Gr.current!==null||(Jo=!0),(Gi&134217727)===0&&(Ws&134217727)===0||At===null||Fi(At,et,Yr,!1)}function Fm(a,o,c){var m=ut;ut|=2;var v=D1(),x=_1();(At!==a||et!==o)&&(Gd=null,rl(a,o)),o=!1;var N=Gt;e:do try{if(dt!==0&&Ke!==null){var D=Ke,H=xr;switch(dt){case 8:Ym(),N=6;break e;case 3:case 2:case 9:case 6:Gr.current===null&&(o=!0);var ee=dt;if(dt=0,xr=null,al(a,D,H,ee),c&&Jo){N=0;break e}break;default:ee=dt,dt=0,xr=null,al(a,D,H,ee)}}KM(),N=Gt;break}catch(le){N1(a,le)}while(!0);return o&&a.shellSuspendCounter++,Za=Gs=null,ut=m,I.H=v,I.A=x,Ke===null&&(At=null,et=0,fd()),N}function KM(){for(;Ke!==null;)M1(Ke)}function WM(a,o){var c=ut;ut|=2;var m=D1(),v=_1();At!==a||et!==o?(Gd=null,Hd=Et()+500,rl(a,o)):Jo=oe(a,o);e:do try{if(dt!==0&&Ke!==null){o=Ke;var x=xr;t:switch(dt){case 1:dt=0,xr=null,al(a,o,x,1);break;case 2:case 9:if(Yx(x)){dt=0,xr=null,j1(o);break}o=function(){dt!==2&&dt!==9||At!==a||(dt=7),Oa(a)},x.then(o,o);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Yx(x)?(dt=0,xr=null,j1(o)):(dt=0,xr=null,al(a,o,x,7));break;case 5:var N=null;switch(Ke.tag){case 26:N=Ke.memoizedState;case 5:case 27:var D=Ke;if(!N||hA(N)){dt=0,xr=null;var H=D.sibling;if(H!==null)Ke=H;else{var ee=D.return;ee!==null?(Ke=ee,qd(ee)):Ke=null}break t}}dt=0,xr=null,al(a,o,x,5);break;case 6:dt=0,xr=null,al(a,o,x,6);break;case 8:Ym(),Gt=6;break e;default:throw Error(r(462))}}XM();break}catch(le){N1(a,le)}while(!0);return Za=Gs=null,I.H=m,I.A=v,ut=c,Ke!==null?0:(At=null,et=0,fd(),Gt)}function XM(){for(;Ke!==null&&!Yt();)M1(Ke)}function M1(a){var o=i1(a.alternate,a,si);a.memoizedProps=a.pendingProps,o===null?qd(a):Ke=o}function j1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=JS(c,o,o.pendingProps,o.type,void 0,et);break;case 11:o=JS(c,o,o.pendingProps,o.type.render,o.ref,et);break;case 5:om(o);default:o1(c,o),o=Ke=kx(o,si),o=i1(c,o,si)}a.memoizedProps=a.pendingProps,o===null?qd(a):Ke=o}function al(a,o,c,m){Za=Gs=null,om(o),Wo=null,Ec=0;var v=o.return;try{if(BM(a,v,o,c,et)){Gt=1,Rd(a,Br(c,a.current)),Ke=null;return}}catch(x){if(v!==null)throw Ke=v,x;Gt=1,Rd(a,Br(c,a.current)),Ke=null;return}o.flags&32768?(st||m===1?a=!0:Jo||(et&536870912)!==0?a=!1:(Hi=a=!0,(m===2||m===9||m===3||m===6)&&(m=Gr.current,m!==null&&m.tag===13&&(m.flags|=16384))),k1(o,a)):qd(o)}function qd(a){var o=a;do{if((o.flags&32768)!==0){k1(o,Hi);return}a=o.return;var c=zM(o.alternate,o,si);if(c!==null){Ke=c;return}if(o=o.sibling,o!==null){Ke=o;return}Ke=o=a}while(o!==null);Gt===0&&(Gt=5)}function k1(a,o){do{var c=HM(a.alternate,a);if(c!==null){c.flags&=32767,Ke=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){Ke=a;return}Ke=a=c}while(a!==null);Gt=6,Ke=null}function I1(a,o,c,m,v,x,N,D,H){a.cancelPendingCommit=null;do Fd();while(On!==0);if((ut&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(x=o.lanes|o.childLanes,x|=Rh,kn(a,c,x,N,D,H),a===At&&(Ke=At=null,et=0),tl=o,qi=a,nl=c,zm=x,Hm=v,T1=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,ej(Sa,function(){return U1(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=I.T,I.T=null,v=Y.p,Y.p=2,N=ut,ut|=4;try{GM(a,o,c)}finally{ut=N,Y.p=v,I.T=m}}On=1,R1(),L1(),$1()}}function R1(){if(On===1){On=0;var a=qi,o=tl,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=I.T,I.T=null;var m=Y.p;Y.p=2;var v=ut;ut|=4;try{v1(o,a);var x=ag,N=ct(a.containerInfo),D=x.focusedElem,H=x.selectionRange;if(N!==D&&D&&D.ownerDocument&&Ye(D.ownerDocument.documentElement,D)){if(H!==null&&mn(D)){var ee=H.start,le=H.end;if(le===void 0&&(le=ee),"selectionStart"in D)D.selectionStart=ee,D.selectionEnd=Math.min(le,D.value.length);else{var fe=D.ownerDocument||document,ne=fe&&fe.defaultView||window;if(ne.getSelection){var ie=ne.getSelection(),ze=D.textContent.length,Le=Math.min(H.start,ze),gt=H.end===void 0?Le:Math.min(H.end,ze);!ie.extend&&Le>gt&&(N=gt,gt=Le,Le=N);var W=Be(D,Le),F=Be(D,gt);if(W&&F&&(ie.rangeCount!==1||ie.anchorNode!==W.node||ie.anchorOffset!==W.offset||ie.focusNode!==F.node||ie.focusOffset!==F.offset)){var J=fe.createRange();J.setStart(W.node,W.offset),ie.removeAllRanges(),Le>gt?(ie.addRange(J),ie.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),ie.addRange(J))}}}}for(fe=[],ie=D;ie=ie.parentNode;)ie.nodeType===1&&fe.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<fe.length;D++){var de=fe[D];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}af=!!rg,ag=rg=null}finally{ut=v,Y.p=m,I.T=c}}a.current=o,On=2}}function L1(){if(On===2){On=0;var a=qi,o=tl,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=I.T,I.T=null;var m=Y.p;Y.p=2;var v=ut;ut|=4;try{h1(a,o.alternate,o)}finally{ut=v,Y.p=m,I.T=c}}On=3}}function $1(){if(On===4||On===3){On=0,Bt();var a=qi,o=tl,c=nl,m=T1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?On=5:(On=0,tl=qi=null,B1(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Yi=null),lt(c),o=o.stateNode,En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Aa,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=I.T,v=Y.p,Y.p=2,I.T=null;try{for(var x=a.onRecoverableError,N=0;N<m.length;N++){var D=m[N];x(D.value,{componentStack:D.stack})}}finally{I.T=o,Y.p=v}}(nl&3)!==0&&Fd(),Oa(a),v=a.pendingLanes,(c&4194090)!==0&&(v&42)!==0?a===Gm?jc++:(jc=0,Gm=a):jc=0,kc(0)}}function B1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,pc(o)))}function Fd(a){return R1(),L1(),$1(),U1()}function U1(){if(On!==5)return!1;var a=qi,o=zm;zm=0;var c=lt(nl),m=I.T,v=Y.p;try{Y.p=32>c?32:c,I.T=null,c=Hm,Hm=null;var x=qi,N=nl;if(On=0,tl=qi=null,nl=0,(ut&6)!==0)throw Error(r(331));var D=ut;if(ut|=4,C1(x.current),x1(x,x.current,N,c),ut=D,kc(0,!1),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Aa,x)}catch{}return!0}finally{Y.p=v,I.T=m,B1(a,o)}}function z1(a,o,c){o=Br(c,o),o=Sm(a.stateNode,o,2),a=Ii(a,o,2),a!==null&&(Re(a,2),Oa(a))}function xt(a,o,c){if(a.tag===3)z1(a,a,c);else for(;o!==null;){if(o.tag===3){z1(o,a,c);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Yi===null||!Yi.has(m))){a=Br(c,a),c=qS(2),m=Ii(o,c,2),m!==null&&(FS(c,m,o,a),Re(m,2),Oa(m));break}}o=o.return}}function Vm(a,o,c){var m=a.pingCache;if(m===null){m=a.pingCache=new FM;var v=new Set;m.set(o,v)}else v=m.get(o),v===void 0&&(v=new Set,m.set(o,v));v.has(c)||(Lm=!0,v.add(c),a=QM.bind(null,a,o,c),o.then(a,a))}function QM(a,o,c){var m=a.pingCache;m!==null&&m.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,At===a&&(et&c)===c&&(Gt===4||Gt===3&&(et&62914560)===et&&300>Et()-Um?(ut&2)===0&&rl(a,0):$m|=c,el===et&&(el=0)),Oa(a)}function H1(a,o){o===0&&(o=ge()),a=Bo(a,o),a!==null&&(Re(a,o),Oa(a))}function ZM(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),H1(a,c)}function JM(a,o){var c=0;switch(a.tag){case 13:var m=a.stateNode,v=a.memoizedState;v!==null&&(c=v.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(o),H1(a,c)}function ej(a,o){return vt(a,o)}var Vd=null,il=null,Km=!1,Kd=!1,Wm=!1,Xs=0;function Oa(a){a!==il&&a.next===null&&(il===null?Vd=il=a:il=il.next=a),Kd=!0,Km||(Km=!0,nj())}function kc(a,o){if(!Wm&&Kd){Wm=!0;do for(var c=!1,m=Vd;m!==null;){if(a!==0){var v=m.pendingLanes;if(v===0)var x=0;else{var N=m.suspendedLanes,D=m.pingedLanes;x=(1<<31-Ie(42|a)+1)-1,x&=v&~(N&~D),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,F1(m,x))}else x=et,x=B(m,m===At?x:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(x&3)===0||oe(m,x)||(c=!0,F1(m,x));m=m.next}while(c);Wm=!1}}function tj(){G1()}function G1(){Kd=Km=!1;var a=0;Xs!==0&&(uj()&&(a=Xs),Xs=0);for(var o=Et(),c=null,m=Vd;m!==null;){var v=m.next,x=Y1(m,o);x===0?(m.next=null,c===null?Vd=v:c.next=v,v===null&&(il=c)):(c=m,(a!==0||(x&3)!==0)&&(Kd=!0)),m=v}kc(a)}function Y1(a,o){for(var c=a.suspendedLanes,m=a.pingedLanes,v=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var N=31-Ie(x),D=1<<N,H=v[N];H===-1?((D&c)===0||(D&m)!==0)&&(v[N]=he(D,o)):H<=o&&(a.expiredLanes|=D),x&=~D}if(o=At,c=et,c=B(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,c===0||a===o&&(dt===2||dt===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Xe(m),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||oe(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(m!==null&&Xe(m),lt(c)){case 2:case 8:c=Qn;break;case 32:c=Sa;break;case 268435456:c=La;break;default:c=Sa}return m=q1.bind(null,a),c=vt(c,m),a.callbackPriority=o,a.callbackNode=c,o}return m!==null&&m!==null&&Xe(m),a.callbackPriority=2,a.callbackNode=null,2}function q1(a,o){if(On!==0&&On!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Fd()&&a.callbackNode!==c)return null;var m=et;return m=B(a,a===At?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(w1(a,m,o),Y1(a,Et()),a.callbackNode!=null&&a.callbackNode===c?q1.bind(null,a):null)}function F1(a,o){if(Fd())return null;w1(a,o,!0)}function nj(){fj(function(){(ut&6)!==0?vt(Dt,tj):G1()})}function Xm(){return Xs===0&&(Xs=ce()),Xs}function V1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Cs(""+a)}function K1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function rj(a,o,c,m,v){if(o==="submit"&&c&&c.stateNode===v){var x=V1((v[pn]||null).action),N=m.submitter;N&&(o=(o=N[pn]||null)?V1(o.formAction):N.getAttribute("formAction"),o!==null&&(x=o,N=null));var D=new Xl("action","action",null,m,v);a.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Xs!==0){var H=N?K1(v,N):new FormData(v);gm(c,{pending:!0,data:H,method:v.method,action:x},null,H)}}else typeof x=="function"&&(D.preventDefault(),H=N?K1(v,N):new FormData(v),gm(c,{pending:!0,data:H,method:v.method,action:x},x,H))},currentTarget:v}]})}}for(var Qm=0;Qm<Ih.length;Qm++){var Zm=Ih[Qm],aj=Zm.toLowerCase(),ij=Zm[0].toUpperCase()+Zm.slice(1);ua(aj,"on"+ij)}ua(wx,"onAnimationEnd"),ua(Ox,"onAnimationIteration"),ua(Nx,"onAnimationStart"),ua("dblclick","onDoubleClick"),ua("focusin","onFocus"),ua("focusout","onBlur"),ua(AM,"onTransitionRun"),ua(CM,"onTransitionStart"),ua(EM,"onTransitionCancel"),ua(Dx,"onTransitionEnd"),hr("onMouseEnter",["mouseout","mouseover"]),hr("onMouseLeave",["mouseout","mouseover"]),hr("onPointerEnter",["pointerout","pointerover"]),hr("onPointerLeave",["pointerout","pointerover"]),Ut("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ut("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ut("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ut("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ut("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ut("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function W1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var m=a[c],v=m.event;m=m.listeners;e:{var x=void 0;if(o)for(var N=m.length-1;0<=N;N--){var D=m[N],H=D.instance,ee=D.currentTarget;if(D=D.listener,H!==x&&v.isPropagationStopped())break e;x=D,v.currentTarget=ee;try{x(v)}catch(le){Id(le)}v.currentTarget=null,x=H}else for(N=0;N<m.length;N++){if(D=m[N],H=D.instance,ee=D.currentTarget,D=D.listener,H!==x&&v.isPropagationStopped())break e;x=D,v.currentTarget=ee;try{x(v)}catch(le){Id(le)}v.currentTarget=null,x=H}}}}function We(a,o){var c=o[Hu];c===void 0&&(c=o[Hu]=new Set);var m=a+"__bubble";c.has(m)||(X1(o,a,2,!1),c.add(m))}function Jm(a,o,c){var m=0;o&&(m|=4),X1(c,a,m,o)}var Wd="_reactListening"+Math.random().toString(36).slice(2);function eg(a){if(!a[Wd]){a[Wd]=!0,Ba.forEach(function(c){c!=="selectionchange"&&(sj.has(c)||Jm(c,!1,a),Jm(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Wd]||(o[Wd]=!0,Jm("selectionchange",!1,o))}}function X1(a,o,c,m){switch(xA(o)){case 2:var v=jj;break;case 8:v=kj;break;default:v=hg}c=v.bind(null,o,c,a),v=void 0,!Ts||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),m?v!==void 0?a.addEventListener(o,c,{capture:!0,passive:v}):a.addEventListener(o,c,!0):v!==void 0?a.addEventListener(o,c,{passive:v}):a.addEventListener(o,c,!1)}function tg(a,o,c,m,v){var x=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var D=m.stateNode.containerInfo;if(D===v)break;if(N===4)for(N=m.return;N!==null;){var H=N.tag;if((H===3||H===4)&&N.stateNode.containerInfo===v)return;N=N.return}for(;D!==null;){if(N=kr(D),N===null)return;if(H=N.tag,H===5||H===6||H===26||H===27){m=x=N;continue e}D=D.parentNode}}m=m.return}Kl(function(){var ee=x,le=Wu(c),fe=[];e:{var ne=_x.get(a);if(ne!==void 0){var ie=Xl,ze=a;switch(a){case"keypress":if(ws(c)===0)break e;case"keydown":case"keyup":ie=Sh;break;case"focusin":ze="focus",ie=je;break;case"focusout":ze="blur",ie=je;break;case"beforeblur":case"afterblur":ie=je;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Yn;break;case wx:case Ox:case Nx:ie=_s;break;case Dx:ie=ko;break;case"scroll":case"scrollend":ie=hh;break;case"wheel":ie=Ch;break;case"copy":case"cut":case"paste":ie=Qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=ed;break;case"toggle":case"beforetoggle":ie=Eh}var Le=(o&4)!==0,gt=!Le&&(a==="scroll"||a==="scrollend"),W=Le?ne!==null?ne+"Capture":null:ne;Le=[];for(var F=ee,J;F!==null;){var de=F;if(J=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||J===null||W===null||(de=gr(F,W),de!=null&&Le.push(Rc(F,de,J))),gt)break;F=F.return}0<Le.length&&(ne=new ie(ne,ze,null,c,le),fe.push({event:ne,listeners:Le}))}}if((o&7)===0){e:{if(ne=a==="mouseover"||a==="pointerover",ie=a==="mouseout"||a==="pointerout",ne&&c!==Ku&&(ze=c.relatedTarget||c.fromElement)&&(kr(ze)||ze[Di]))break e;if((ie||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,ie?(ze=c.relatedTarget||c.toElement,ie=ee,ze=ze?kr(ze):null,ze!==null&&(gt=s(ze),Le=ze.tag,ze!==gt||Le!==5&&Le!==27&&Le!==6)&&(ze=null)):(ie=null,ze=ee),ie!==ze)){if(Le=mh,de="onMouseLeave",W="onMouseEnter",F="mouse",(a==="pointerout"||a==="pointerover")&&(Le=ed,de="onPointerLeave",W="onPointerEnter",F="pointer"),gt=ie==null?ne:$a(ie),J=ze==null?ne:$a(ze),ne=new Le(de,F+"leave",ie,c,le),ne.target=gt,ne.relatedTarget=J,de=null,kr(le)===ee&&(Le=new Le(W,F+"enter",ze,c,le),Le.target=J,Le.relatedTarget=gt,de=Le),gt=de,ie&&ze)t:{for(Le=ie,W=ze,F=0,J=Le;J;J=sl(J))F++;for(J=0,de=W;de;de=sl(de))J++;for(;0<F-J;)Le=sl(Le),F--;for(;0<J-F;)W=sl(W),J--;for(;F--;){if(Le===W||W!==null&&Le===W.alternate)break t;Le=sl(Le),W=sl(W)}Le=null}else Le=null;ie!==null&&Q1(fe,ne,ie,Le,!1),ze!==null&&gt!==null&&Q1(fe,gt,ze,Le,!0)}}e:{if(ne=ee?$a(ee):window,ie=ne.nodeName&&ne.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ne.type==="file")var Pe=ld;else if(od(ne))if(rc)Pe=z;else{Pe=Mh;var Ve=_h}else ie=ne.nodeName,!ie||ie.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Vu(ee.elementType)&&(Pe=ld):Pe=jh;if(Pe&&(Pe=Pe(a,ee))){nc(fe,Pe,c,le);break e}Ve&&Ve(a,ne,ee),a==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Ss(ne,"number",ne.value)}switch(Ve=ee?$a(ee):window,a){case"focusin":(od(Ve)||Ve.contentEditable==="true")&&(la=Ve,oc=ee,ca=null);break;case"focusout":ca=oc=la=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,dd(fe,c,le);break;case"selectionchange":if(Ro)break;case"keydown":case"keyup":dd(fe,c,le)}var De;if(tc)e:{switch(a){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ka?id(a,c)&&(Ue="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Ue="onCompositionStart");Ue&&(nd&&c.locale!=="ko"&&(Ka||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ka&&(De=Va()):(sa=le,Qe="value"in sa?sa.value:sa.textContent,Ka=!0)),Ve=Xd(ee,Ue),0<Ve.length&&(Ue=new Zl(Ue,a,null,c,le),fe.push({event:Ue,listeners:Ve}),De?Ue.data=De:(De=sd(c),De!==null&&(Ue.data=De)))),(De=Ph?wh(a,c):Oh(a,c))&&(Ue=Xd(ee,"onBeforeInput"),0<Ue.length&&(Ve=new Zl("onBeforeInput","beforeinput",null,c,le),fe.push({event:Ve,listeners:Ue}),Ve.data=De)),rj(fe,a,ee,c,le)}W1(fe,o)})}function Rc(a,o,c){return{instance:a,listener:o,currentTarget:c}}function Xd(a,o){for(var c=o+"Capture",m=[];a!==null;){var v=a,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=gr(a,c),v!=null&&m.unshift(Rc(a,v,x)),v=gr(a,o),v!=null&&m.push(Rc(a,v,x))),a.tag===3)return m;a=a.return}return[]}function sl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Q1(a,o,c,m,v){for(var x=o._reactName,N=[];c!==null&&c!==m;){var D=c,H=D.alternate,ee=D.stateNode;if(D=D.tag,H!==null&&H===m)break;D!==5&&D!==26&&D!==27||ee===null||(H=ee,v?(ee=gr(c,x),ee!=null&&N.unshift(Rc(c,ee,H))):v||(ee=gr(c,x),ee!=null&&N.push(Rc(c,ee,H)))),c=c.return}N.length!==0&&a.push({event:o,listeners:N})}var oj=/\r\n?/g,lj=/\u0000|\uFFFD/g;function Z1(a){return(typeof a=="string"?a:""+a).replace(oj,`
`).replace(lj,"")}function J1(a,o){return o=Z1(o),Z1(a)===o}function Qd(){}function mt(a,o,c,m,v,x){switch(c){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ga(a,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ga(a,""+m);break;case"className":Ca(a,"class",m);break;case"tabIndex":Ca(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ca(a,c,m);break;case"style":Fl(a,m,x);break;case"data":if(o!=="object"){Ca(a,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(c);break}m=Cs(""+m),a.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(o!=="input"&&mt(a,o,"name",v.name,v,null),mt(a,o,"formEncType",v.formEncType,v,null),mt(a,o,"formMethod",v.formMethod,v,null),mt(a,o,"formTarget",v.formTarget,v,null)):(mt(a,o,"encType",v.encType,v,null),mt(a,o,"method",v.method,v,null),mt(a,o,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(c);break}m=Cs(""+m),a.setAttribute(c,m);break;case"onClick":m!=null&&(a.onclick=Qd);break;case"onScroll":m!=null&&We("scroll",a);break;case"onScrollEnd":m!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}c=Cs(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,""+m):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":m===!0?a.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,m):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(c,m):a.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(c):a.setAttribute(c,m);break;case"popover":We("beforetoggle",a),We("toggle",a),ia(a,"popover",m);break;case"xlinkActuate":Ze(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ze(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ze(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ze(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ze(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ze(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ze(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ze(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ze(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ia(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Tx.get(c)||c,ia(a,c,m))}}function ng(a,o,c,m,v,x){switch(c){case"style":Fl(a,m,x);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof m=="string"?Ga(a,m):(typeof m=="number"||typeof m=="bigint")&&Ga(a,""+m);break;case"onScroll":m!=null&&We("scroll",a);break;case"onScrollEnd":m!=null&&We("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Qd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!aa.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),o=c.slice(2,v?c.length-7:void 0),x=a[pn]||null,x=x!=null?x[c]:null,typeof x=="function"&&a.removeEventListener(o,x,v),typeof m=="function")){typeof x!="function"&&x!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,m,v);break e}c in a?a[c]=m:m===!0?a.setAttribute(c,""):ia(a,c,m)}}}function Nn(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var m=!1,v=!1,x;for(x in c)if(c.hasOwnProperty(x)){var N=c[x];if(N!=null)switch(x){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mt(a,o,x,N,c,null)}}v&&mt(a,o,"srcSet",c.srcSet,c,null),m&&mt(a,o,"src",c.src,c,null);return;case"input":We("invalid",a);var D=x=N=v=null,H=null,ee=null;for(m in c)if(c.hasOwnProperty(m)){var le=c[m];if(le!=null)switch(m){case"name":v=le;break;case"type":N=le;break;case"checked":H=le;break;case"defaultChecked":ee=le;break;case"value":x=le;break;case"defaultValue":D=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,o));break;default:mt(a,o,m,le,c,null)}}Do(a,x,D,H,ee,N,v,!1),xs(a);return;case"select":We("invalid",a),m=N=x=null;for(v in c)if(c.hasOwnProperty(v)&&(D=c[v],D!=null))switch(v){case"value":x=D;break;case"defaultValue":N=D;break;case"multiple":m=D;default:mt(a,o,v,D,c,null)}o=x,c=N,a.multiple=!!m,o!=null?mr(a,!!m,o,!1):c!=null&&mr(a,!!m,c,!0);return;case"textarea":We("invalid",a),x=v=m=null;for(N in c)if(c.hasOwnProperty(N)&&(D=c[N],D!=null))switch(N){case"value":m=D;break;case"defaultValue":v=D;break;case"children":x=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:mt(a,o,N,D,c,null)}As(a,m,v,x),xs(a);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(m=c[H],m!=null))switch(H){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:mt(a,o,H,m,c,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(m=0;m<Ic.length;m++)We(Ic[m],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in c)if(c.hasOwnProperty(ee)&&(m=c[ee],m!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mt(a,o,ee,m,c,null)}return;default:if(Vu(o)){for(le in c)c.hasOwnProperty(le)&&(m=c[le],m!==void 0&&ng(a,o,le,m,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(m=c[D],m!=null&&mt(a,o,D,m,c,null))}function cj(a,o,c,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,N=null,D=null,H=null,ee=null,le=null;for(ie in c){var fe=c[ie];if(c.hasOwnProperty(ie)&&fe!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=fe;default:m.hasOwnProperty(ie)||mt(a,o,ie,null,m,fe)}}for(var ne in m){var ie=m[ne];if(fe=c[ne],m.hasOwnProperty(ne)&&(ie!=null||fe!=null))switch(ne){case"type":x=ie;break;case"name":v=ie;break;case"checked":ee=ie;break;case"defaultChecked":le=ie;break;case"value":N=ie;break;case"defaultValue":D=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:ie!==fe&&mt(a,o,ne,ie,m,fe)}}$r(a,N,D,H,ee,le,x,v);return;case"select":ie=N=D=ne=null;for(x in c)if(H=c[x],c.hasOwnProperty(x)&&H!=null)switch(x){case"value":break;case"multiple":ie=H;default:m.hasOwnProperty(x)||mt(a,o,x,null,m,H)}for(v in m)if(x=m[v],H=c[v],m.hasOwnProperty(v)&&(x!=null||H!=null))switch(v){case"value":ne=x;break;case"defaultValue":D=x;break;case"multiple":N=x;default:x!==H&&mt(a,o,v,x,m,H)}o=D,c=N,m=ie,ne!=null?mr(a,!!c,ne,!1):!!m!=!!c&&(o!=null?mr(a,!!c,o,!0):mr(a,!!c,c?[]:"",!1));return;case"textarea":ie=ne=null;for(D in c)if(v=c[D],c.hasOwnProperty(D)&&v!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:mt(a,o,D,null,m,v)}for(N in m)if(v=m[N],x=c[N],m.hasOwnProperty(N)&&(v!=null||x!=null))switch(N){case"value":ne=v;break;case"defaultValue":ie=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==x&&mt(a,o,N,v,m,x)}_o(a,ne,ie);return;case"option":for(var ze in c)if(ne=c[ze],c.hasOwnProperty(ze)&&ne!=null&&!m.hasOwnProperty(ze))switch(ze){case"selected":a.selected=!1;break;default:mt(a,o,ze,null,m,ne)}for(H in m)if(ne=m[H],ie=c[H],m.hasOwnProperty(H)&&ne!==ie&&(ne!=null||ie!=null))switch(H){case"selected":a.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:mt(a,o,H,ne,m,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in c)ne=c[Le],c.hasOwnProperty(Le)&&ne!=null&&!m.hasOwnProperty(Le)&&mt(a,o,Le,null,m,ne);for(ee in m)if(ne=m[ee],ie=c[ee],m.hasOwnProperty(ee)&&ne!==ie&&(ne!=null||ie!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:mt(a,o,ee,ne,m,ie)}return;default:if(Vu(o)){for(var gt in c)ne=c[gt],c.hasOwnProperty(gt)&&ne!==void 0&&!m.hasOwnProperty(gt)&&ng(a,o,gt,void 0,m,ne);for(le in m)ne=m[le],ie=c[le],!m.hasOwnProperty(le)||ne===ie||ne===void 0&&ie===void 0||ng(a,o,le,ne,m,ie);return}}for(var W in c)ne=c[W],c.hasOwnProperty(W)&&ne!=null&&!m.hasOwnProperty(W)&&mt(a,o,W,null,m,ne);for(fe in m)ne=m[fe],ie=c[fe],!m.hasOwnProperty(fe)||ne===ie||ne==null&&ie==null||mt(a,o,fe,ne,m,ie)}var rg=null,ag=null;function Zd(a){return a.nodeType===9?a:a.ownerDocument}function eA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tA(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function ig(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sg=null;function uj(){var a=window.event;return a&&a.type==="popstate"?a===sg?!1:(sg=a,!0):(sg=null,!1)}var nA=typeof setTimeout=="function"?setTimeout:void 0,dj=typeof clearTimeout=="function"?clearTimeout:void 0,rA=typeof Promise=="function"?Promise:void 0,fj=typeof queueMicrotask=="function"?queueMicrotask:typeof rA<"u"?function(a){return rA.resolve(null).then(a).catch(pj)}:nA;function pj(a){setTimeout(function(){throw a})}function Vi(a){return a==="head"}function aA(a,o){var c=o,m=0,v=0;do{var x=c.nextSibling;if(a.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(0<m&&8>m){c=m;var N=a.ownerDocument;if(c&1&&Lc(N.documentElement),c&2&&Lc(N.body),c&4)for(c=N.head,Lc(c),N=c.firstChild;N;){var D=N.nextSibling,H=N.nodeName;N[Po]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&N.rel.toLowerCase()==="stylesheet"||c.removeChild(N),N=D}}if(v===0){a.removeChild(x),qc(o);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:m=c.charCodeAt(0)-48;else m=0;c=x}while(c);qc(o)}function og(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":og(c),wt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function hj(a,o,c,m){for(;a.nodeType===1;){var v=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Po])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=fa(a.nextSibling),a===null)break}return null}function mj(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=fa(a.nextSibling),a===null))return null;return a}function lg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function gj(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var m=function(){o(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function fa(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var cg=null;function iA(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function sA(a,o,c){switch(o=Zd(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Lc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);wt(a)}var qr=new Map,oA=new Set;function Jd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var oi=Y.d;Y.d={f:yj,r:vj,D:bj,C:xj,L:Sj,m:Aj,X:Ej,S:Cj,M:Tj};function yj(){var a=oi.f(),o=Yd();return a||o}function vj(a){var o=Ir(a);o!==null&&o.tag===5&&o.type==="form"?wS(o):oi.r(a)}var ol=typeof document>"u"?null:document;function lA(a,o,c){var m=ol;if(m&&typeof o=="string"&&o){var v=Tn(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),oA.has(v)||(oA.add(v),a={rel:a,crossOrigin:c,href:o},m.querySelector(v)===null&&(o=m.createElement("link"),Nn(o,"link",a),bt(o),m.head.appendChild(o)))}}function bj(a){oi.D(a),lA("dns-prefetch",a,null)}function xj(a,o){oi.C(a,o),lA("preconnect",a,o)}function Sj(a,o,c){oi.L(a,o,c);var m=ol;if(m&&a&&o){var v='link[rel="preload"][as="'+Tn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Tn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Tn(c.imageSizes)+'"]')):v+='[href="'+Tn(a)+'"]';var x=v;switch(o){case"style":x=ll(a);break;case"script":x=cl(a)}qr.has(x)||(a=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),qr.set(x,a),m.querySelector(v)!==null||o==="style"&&m.querySelector($c(x))||o==="script"&&m.querySelector(Bc(x))||(o=m.createElement("link"),Nn(o,"link",a),bt(o),m.head.appendChild(o)))}}function Aj(a,o){oi.m(a,o);var c=ol;if(c&&a){var m=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Tn(m)+'"][href="'+Tn(a)+'"]',x=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=cl(a)}if(!qr.has(x)&&(a=p({rel:"modulepreload",href:a},o),qr.set(x,a),c.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Bc(x)))return}m=c.createElement("link"),Nn(m,"link",a),bt(m),c.head.appendChild(m)}}}function Cj(a,o,c){oi.S(a,o,c);var m=ol;if(m&&a){var v=hn(m).hoistableStyles,x=ll(a);o=o||"default";var N=v.get(x);if(!N){var D={loading:0,preload:null};if(N=m.querySelector($c(x)))D.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},c),(c=qr.get(x))&&ug(a,c);var H=N=m.createElement("link");bt(H),Nn(H,"link",a),H._p=new Promise(function(ee,le){H.onload=ee,H.onerror=le}),H.addEventListener("load",function(){D.loading|=1}),H.addEventListener("error",function(){D.loading|=2}),D.loading|=4,ef(N,o,m)}N={type:"stylesheet",instance:N,count:1,state:D},v.set(x,N)}}}function Ej(a,o){oi.X(a,o);var c=ol;if(c&&a){var m=hn(c).hoistableScripts,v=cl(a),x=m.get(v);x||(x=c.querySelector(Bc(v)),x||(a=p({src:a,async:!0},o),(o=qr.get(v))&&dg(a,o),x=c.createElement("script"),bt(x),Nn(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(v,x))}}function Tj(a,o){oi.M(a,o);var c=ol;if(c&&a){var m=hn(c).hoistableScripts,v=cl(a),x=m.get(v);x||(x=c.querySelector(Bc(v)),x||(a=p({src:a,async:!0,type:"module"},o),(o=qr.get(v))&&dg(a,o),x=c.createElement("script"),bt(x),Nn(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(v,x))}}function cA(a,o,c,m){var v=(v=Ae.current)?Jd(v):null;if(!v)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=ll(c.href),c=hn(v).hoistableStyles,m=c.get(o),m||(m={type:"style",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=ll(c.href);var x=hn(v).hoistableStyles,N=x.get(a);if(N||(v=v.ownerDocument||v,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,N),(x=v.querySelector($c(a)))&&!x._p&&(N.instance=x,N.state.loading=5),qr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},qr.set(a,c),x||Pj(v,a,c,N.state))),o&&m===null)throw Error(r(528,""));return N}if(o&&m!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=cl(c),c=hn(v).hoistableScripts,m=c.get(o),m||(m={type:"script",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function ll(a){return'href="'+Tn(a)+'"'}function $c(a){return'link[rel="stylesheet"]['+a+"]"}function uA(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function Pj(a,o,c,m){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=a.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Nn(o,"link",c),bt(o),a.head.appendChild(o))}function cl(a){return'[src="'+Tn(a)+'"]'}function Bc(a){return"script[async]"+a}function dA(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var m=a.querySelector('style[data-href~="'+Tn(c.href)+'"]');if(m)return o.instance=m,bt(m),m;var v=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),bt(m),Nn(m,"style",v),ef(m,c.precedence,a),o.instance=m;case"stylesheet":v=ll(c.href);var x=a.querySelector($c(v));if(x)return o.state.loading|=4,o.instance=x,bt(x),x;m=uA(c),(v=qr.get(v))&&ug(m,v),x=(a.ownerDocument||a).createElement("link"),bt(x);var N=x;return N._p=new Promise(function(D,H){N.onload=D,N.onerror=H}),Nn(x,"link",m),o.state.loading|=4,ef(x,c.precedence,a),o.instance=x;case"script":return x=cl(c.src),(v=a.querySelector(Bc(x)))?(o.instance=v,bt(v),v):(m=c,(v=qr.get(x))&&(m=p({},c),dg(m,v)),a=a.ownerDocument||a,v=a.createElement("script"),bt(v),Nn(v,"link",m),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,ef(m,c.precedence,a));return o.instance}function ef(a,o,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,x=v,N=0;N<m.length;N++){var D=m[N];if(D.dataset.precedence===o)x=D;else if(x!==v)break}x?x.parentNode.insertBefore(a,x.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function ug(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function dg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var tf=null;function fA(a,o,c){if(tf===null){var m=new Map,v=tf=new Map;v.set(c,m)}else v=tf,m=v.get(c),m||(m=new Map,v.set(c,m));if(m.has(a))return m;for(m.set(a,null),c=c.getElementsByTagName(a),v=0;v<c.length;v++){var x=c[v];if(!(x[Po]||x[Ft]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var N=x.getAttribute(o)||"";N=a+N;var D=m.get(N);D?D.push(x):m.set(N,[x])}}return m}function pA(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function wj(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function hA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Uc=null;function Oj(){}function Nj(a,o,c){if(Uc===null)throw Error(r(475));var m=Uc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=ll(c.href),x=a.querySelector($c(v));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=nf.bind(m),a.then(m,m)),o.state.loading|=4,o.instance=x,bt(x);return}x=a.ownerDocument||a,c=uA(c),(v=qr.get(v))&&ug(c,v),x=x.createElement("link"),bt(x);var N=x;N._p=new Promise(function(D,H){N.onload=D,N.onerror=H}),Nn(x,"link",c),o.instance=x}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=nf.bind(m),a.addEventListener("load",o),a.addEventListener("error",o))}}function Dj(){if(Uc===null)throw Error(r(475));var a=Uc;return a.stylesheets&&a.count===0&&fg(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&fg(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function nf(){if(this.count--,this.count===0){if(this.stylesheets)fg(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var rf=null;function fg(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,rf=new Map,o.forEach(_j,a),rf=null,nf.call(a))}function _j(a,o){if(!(o.state.loading&4)){var c=rf.get(a);if(c)var m=c.get(null);else{c=new Map,rf.set(a,c);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var N=v[x];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(c.set(N.dataset.precedence,N),m=N)}m&&c.set(null,m)}v=o.instance,N=v.getAttribute("data-precedence"),x=c.get(N)||m,x===m&&c.set(null,v),c.set(N,v),this.count++,m=nf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),x?x.parentNode.insertBefore(v,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var zc={$$typeof:O,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Mj(a,o,c,m,v,x,N,D){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=be(0),this.hiddenUpdates=be(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function mA(a,o,c,m,v,x,N,D,H,ee,le,fe){return a=new Mj(a,o,c,N,D,H,ee,fe),o=1,x===!0&&(o|=24),x=yr(3,null,null,o),a.current=x,x.stateNode=a,o=Vh(),o.refCount++,a.pooledCache=o,o.refCount++,x.memoizedState={element:m,isDehydrated:c,cache:o},Qh(x),a}function gA(a){return a?(a=Uo,a):Uo}function yA(a,o,c,m,v,x){v=gA(v),m.context===null?m.context=v:m.pendingContext=v,m=ki(o),m.payload={element:c},x=x===void 0?null:x,x!==null&&(m.callback=x),c=Ii(a,m,o),c!==null&&(Ar(c,a,o),yc(c,a,o))}function vA(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function pg(a,o){vA(a,o),(a=a.alternate)&&vA(a,o)}function bA(a){if(a.tag===13){var o=Bo(a,67108864);o!==null&&Ar(o,a,67108864),pg(a,67108864)}}var af=!0;function jj(a,o,c,m){var v=I.T;I.T=null;var x=Y.p;try{Y.p=2,hg(a,o,c,m)}finally{Y.p=x,I.T=v}}function kj(a,o,c,m){var v=I.T;I.T=null;var x=Y.p;try{Y.p=8,hg(a,o,c,m)}finally{Y.p=x,I.T=v}}function hg(a,o,c,m){if(af){var v=mg(m);if(v===null)tg(a,o,m,sf,c),SA(a,m);else if(Rj(v,a,o,c,m))m.stopPropagation();else if(SA(a,m),o&4&&-1<Ij.indexOf(a)){for(;v!==null;){var x=Ir(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var N=Zn(x.pendingLanes);if(N!==0){var D=x;for(D.pendingLanes|=2,D.entangledLanes|=2;N;){var H=1<<31-Ie(N);D.entanglements[1]|=H,N&=~H}Oa(x),(ut&6)===0&&(Hd=Et()+500,kc(0))}}break;case 13:D=Bo(x,2),D!==null&&Ar(D,x,2),Yd(),pg(x,2)}if(x=mg(m),x===null&&tg(a,o,m,sf,c),x===v)break;v=x}v!==null&&m.stopPropagation()}else tg(a,o,m,null,c)}}function mg(a){return a=Wu(a),gg(a)}var sf=null;function gg(a){if(sf=null,a=kr(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return sf=a,null}function xA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xa()){case Dt:return 2;case Qn:return 8;case Sa:case ys:return 32;case La:return 268435456;default:return 32}default:return 32}}var yg=!1,Ki=null,Wi=null,Xi=null,Hc=new Map,Gc=new Map,Qi=[],Ij="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SA(a,o){switch(a){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Hc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(o.pointerId)}}function Yc(a,o,c,m,v,x){return a===null||a.nativeEvent!==x?(a={blockedOn:o,domEventName:c,eventSystemFlags:m,nativeEvent:x,targetContainers:[v]},o!==null&&(o=Ir(o),o!==null&&bA(o)),a):(a.eventSystemFlags|=m,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function Rj(a,o,c,m,v){switch(o){case"focusin":return Ki=Yc(Ki,a,o,c,m,v),!0;case"dragenter":return Wi=Yc(Wi,a,o,c,m,v),!0;case"mouseover":return Xi=Yc(Xi,a,o,c,m,v),!0;case"pointerover":var x=v.pointerId;return Hc.set(x,Yc(Hc.get(x)||null,a,o,c,m,v)),!0;case"gotpointercapture":return x=v.pointerId,Gc.set(x,Yc(Gc.get(x)||null,a,o,c,m,v)),!0}return!1}function AA(a){var o=kr(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,Gn(a.priority,function(){if(c.tag===13){var m=Sr();m=nt(m);var v=Bo(c,m);v!==null&&Ar(v,c,m),pg(c,m)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function of(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=mg(a.nativeEvent);if(c===null){c=a.nativeEvent;var m=new c.constructor(c.type,c);Ku=m,c.target.dispatchEvent(m),Ku=null}else return o=Ir(c),o!==null&&bA(o),a.blockedOn=c,!1;o.shift()}return!0}function CA(a,o,c){of(a)&&c.delete(o)}function Lj(){yg=!1,Ki!==null&&of(Ki)&&(Ki=null),Wi!==null&&of(Wi)&&(Wi=null),Xi!==null&&of(Xi)&&(Xi=null),Hc.forEach(CA),Gc.forEach(CA)}function lf(a,o){a.blockedOn===o&&(a.blockedOn=null,yg||(yg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lj)))}var cf=null;function EA(a){cf!==a&&(cf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){cf===a&&(cf=null);for(var o=0;o<a.length;o+=3){var c=a[o],m=a[o+1],v=a[o+2];if(typeof m!="function"){if(gg(m||c)===null)continue;break}var x=Ir(c);x!==null&&(a.splice(o,3),o-=3,gm(x,{pending:!0,data:v,method:c.method,action:m},m,v))}}))}function qc(a){function o(H){return lf(H,a)}Ki!==null&&lf(Ki,a),Wi!==null&&lf(Wi,a),Xi!==null&&lf(Xi,a),Hc.forEach(o),Gc.forEach(o);for(var c=0;c<Qi.length;c++){var m=Qi[c];m.blockedOn===a&&(m.blockedOn=null)}for(;0<Qi.length&&(c=Qi[0],c.blockedOn===null);)AA(c),c.blockedOn===null&&Qi.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var v=c[m],x=c[m+1],N=v[pn]||null;if(typeof x=="function")N||EA(c);else if(N){var D=null;if(x&&x.hasAttribute("formAction")){if(v=x,N=x[pn]||null)D=N.formAction;else if(gg(v)!==null)continue}else D=N.action;typeof D=="function"?c[m+1]=D:(c.splice(m,3),m-=3),EA(c)}}}function vg(a){this._internalRoot=a}uf.prototype.render=vg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,m=Sr();yA(c,m,a,o,null,null)},uf.prototype.unmount=vg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;yA(a.current,2,null,a,null,null),Yd(),o[Di]=null}};function uf(a){this._internalRoot=a}uf.prototype.unstable_scheduleHydration=function(a){if(a){var o=qt();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Qi.length&&o!==0&&o<Qi[c].priority;c++);Qi.splice(c,0,a),c===0&&AA(a)}};var TA=t.version;if(TA!=="19.1.1")throw Error(r(527,TA,"19.1.1"));Y.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=f(o),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var $j={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{Aa=df.inject($j),En=df}catch{}}return Vc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,m="",v=zS,x=HS,N=GS,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks)),o=mA(a,1,!1,null,null,c,m,v,x,N,D,null),a[Di]=o.current,eg(a),new vg(o)},Vc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var m=!1,v="",x=zS,N=HS,D=GS,H=null,ee=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(H=c.unstable_transitionCallbacks),c.formState!==void 0&&(ee=c.formState)),o=mA(a,1,!0,o,c??null,m,v,x,N,D,H,ee),o.context=gA(null),c=o.current,m=Sr(),m=nt(m),v=ki(m),v.callback=null,Ii(c,v,m),c=m,o.current.lanes=c,Re(o,c),Oa(o),a[Di]=o.current,eg(a),new uf(o)},Vc.version="19.1.1",Vc}var BA;function Rk(){if(BA)return Ag.exports;BA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ag.exports=Ik(),Ag.exports}var Lk=Rk();const $k=va(Lk),Bk="modulepreload",Uk=function(e){return"/"+e},UA={},Tr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=f(n.map(d=>{if(d=Uk(d),d in UA)return;UA[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Bk,p||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((b,S)=>{y.addEventListener("load",b),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})},Nt=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:6,image:"/img/Interceptor.png",abilities:[{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],Vn=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],sr=[{id:"BRIDGE_001",type:"Bridge",name:"Standard Command Bridge",key:"bridge",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},{id:"POWERCELL_001",type:"Power Cell",name:"Standard Power Cell",key:"powerCell",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},{id:"DRONECONTROL_001",type:"Drone Control Hub",name:"Standard Drone Control Hub",key:"droneControlHub",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}],lu={bridge:sr.find(e=>e.key==="bridge"),powerCell:sr.find(e=>e.key==="powerCell"),droneControlHub:sr.find(e=>e.key==="droneControlHub")},ss=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Ra=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=ss(l),f={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const p in l.middleLaneBonus)f.hasOwnProperty(p)&&(f[p]+=l.middleLaneBonus[p]);r[s]=f}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},ur=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=Nt.find(y=>y.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,f=s.speed,d=s.shields,p=s.class;l.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(f+=y.mod.value),y.mod.stat==="shields"&&(d+=y.mod.value),y.mod.stat==="cost"&&(p+=y.mod.value)}),p=Math.max(0,p);let g={...e,attack:u,speed:f,maxShields:d,cost:p,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(g.attack+=y.value),y.stat==="speed"&&(g.speed+=y.value),y.stat==="cost"&&(g.cost=Math.max(0,g.cost+y.value))}),s.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&g.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:b,mod:S}=y.effect;let A=!1;if(b.type==="SHIP_SECTION_HULL_DAMAGED"&&b.location==="SAME_LANE"){const E=parseInt(t.slice(-1))-1,w=(n.name==="Player 1"?i.player1:i.player2)[E];if(w){const O=n.shipSections[w],_=ss(O);(_==="damaged"||_==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(g.attack+=S.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:b,mod:S}=y.effect;let A=0;if(b.type==="OWN_DAMAGED_SECTIONS")for(const E in n.shipSections){const T=n.shipSections[E],w=ss(T);(w==="damaged"||w==="critical")&&A++}A>0&&(S.stat==="attack"&&(g.attack+=S.value*A),S.stat==="speed"&&(g.speed+=S.value*A))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(g.potentialShipDamage=(g.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(b=>{b.stat==="attack"&&(g.attack+=b.value),b.stat==="speed"&&(g.speed+=b.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;Nt.find(S=>S.name===y.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:E}=S.effect;A==="shields"?g.maxShields+=E:A==="attack"?g.attack+=E:A==="speed"&&(g.speed+=E)}})}),l.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(b=>{if(b.type==="PASSIVE"&&(b.effect.type==="GRANT_KEYWORD"&&g.keywords.add(b.effect.keyword),b.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=b.effect;S==="attack"&&(g.attack+=A),S==="speed"&&(g.speed+=A),S==="shields"&&(g.maxShields+=A)}})}),g},dw=(e,t)=>({...e,instanceId:t}),pl=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],fw=["Scout Drone","Standard Fighter","Heavy Fighter","Guardian Drone","Bomber","Repair Drone","Interceptor","Aegis Drone","Kamikaze Drone","Swarm Drone"],pw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=Vn.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(dw(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},mv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},zk=(e,t)=>{const n=Ra({shipSections:lu},[]).totals;return{name:e,shipSections:lu,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:pw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},gl=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},hw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},_l=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=ur(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},lr=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},cu=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],d=!(typeof n.cost=="number"),{type:p,affinity:g,location:y,custom:b}=n.targeting;let S=null;if(d&&Object.values(s.dronesOnBoard).flat().some(w=>w.id===t.id)&&(S=lr(t.id,s),!S))return[];const A=(T,w)=>{Object.entries(T.dronesOnBoard).forEach(([O,_])=>{let k=!1;y==="ANY_LANE"&&(k=!0),d&&y==="SAME_LANE"&&(k=O===S),k&&_.forEach(M=>{let j=!0;if(b?.includes("DAMAGED_HULL")){const U=Nt.find(q=>q.name===M.name);(!U||M.hull>=U.hull)&&(j=!1)}b?.includes("EXHAUSTED")&&(M.isExhausted||(j=!1)),j&&u.push({...M,lane:O,owner:w})})})},E=(T,w)=>{Object.keys(T.shipSections).forEach(O=>{u.push({...T.shipSections[O],id:O,name:O,owner:w})})};if(p==="DRONE")(g==="FRIENDLY"||g==="ANY")&&A(s,e),(g==="ENEMY"||g==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(p==="SHIP_SECTION")(g==="FRIENDLY"||g==="ANY")&&E(s,e),(g==="ENEMY"||g==="ANY")&&E(l,e==="player1"?"player2":"player1");else if(p==="LANE")["lane1","lane2","lane3"].forEach(T=>{if((g==="FRIENDLY"||g==="ANY")&&u.push({id:T,owner:e}),g==="ENEMY"||g==="ANY"){const w=e==="player1"?"player2":"player1";u.push({id:T,owner:w})}});else if(p==="DRONE_CARD"){const T=e==="player1"?r:i;T.activeDronePool.forEach(w=>{const O=Nt.find(j=>j.name===w.name),_=T.appliedUpgrades[w.name]||[],k=_.filter(j=>j.id===n.id).length,M=n.maxApplications===void 0?1:n.maxApplications;O&&_.length<O.upgradeSlots&&k<M&&u.push({...w,id:w.name,owner:e})})}else if(p==="APPLIED_UPGRADE"){const T=g==="ENEMY"?l:s,w=g==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(T.dronesOnBoard).flat().forEach(O=>{(T.appliedUpgrades[O.name]||[]).length>0&&u.push({...O,owner:w})})}return u},mw=(e,t,n,r,i)=>{const s=Nt.find(d=>d.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const f=s.abilities.filter(d=>d.type==="TRIGGERED"&&d.trigger==="ON_MOVE");if(f.length>0){const d=l.dronesOnBoard[r].findIndex(p=>p.id===t.id);if(d!==-1){const p=l.dronesOnBoard[r][d];f.forEach(g=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${g.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),p.statMods||(p.statMods=[]),g.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,p.statMods.push(y.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},gw=(e,t,n)=>{const r=Nt.find(d=>d.name===t.name);if(!r?.abilities)return{newState:e,effects:[],animationEvents:[]};let i=JSON.parse(JSON.stringify(e));const s=[],l=[];let u=!1;return r.abilities.filter(d=>d.effect?.type==="AFTER_ATTACK").forEach(d=>{const{subEffect:p}=d.effect;if(p.type==="DESTROY_SELF")for(const g in i.dronesOnBoard){const y=i.dronesOnBoard[g].findIndex(b=>b.id===t.id);if(y!==-1){u=!0;const b=i.dronesOnBoard[g][y];s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${d.name}', destroying itself.`}}),l.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:n,targetLane:g,targetType:"drone",timestamp:Date.now()}),i.dronesOnBoard[g]=i.dronesOnBoard[g].filter(S=>S.id!==t.id),Object.assign(i,gl(i,b));break}}else if(p.type==="PERMANENT_STAT_MOD")for(const g in i.dronesOnBoard){const y=i.dronesOnBoard[g].findIndex(b=>b.id===t.id);if(y!==-1){u=!0,i.dronesOnBoard[g][y].statMods||(i.dronesOnBoard[g][y].statMods=[]),s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${d.name}', gaining a permanent +${p.mod.value} ${p.mod.stat}.`}}),i.dronesOnBoard[g][y].statMods.push(p.mod);break}}}),{newState:u?i:e,effects:s,animationEvents:l}},c0=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>ss(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},yw=(e,t,n,r,i)=>{if(P("DEPLOYMENT","ðŸ” validateDeployment: Entry params:",{droneName:t?.name,droneType:typeof t,droneKeys:t?Object.keys(t):"null",fullDroneCollectionLength:Nt.length}),r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};P("DEPLOYMENT","ðŸ” validateDeployment: About to find baseDroneInfo for:",t?.name);const s=Nt.find(g=>g.name===t.name);P("DEPLOYMENT","ðŸ” validateDeployment: Found baseDroneInfo:",{found:!!s,droneInfo:s});const l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(g=>{g.mod.stat==="limit"&&(u+=g.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const f=t.class;let d=0,p=0;return n===1?(p=Math.min(e.initialDeploymentBudget,f),d=f-p):(p=Math.min(e.deploymentBudget,f),d=f-p),e.energy<d?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${d} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:p,energyCost:d}},vw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},gv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=mv(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},Hk=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},Gk=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")vw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=gv(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},Yk=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=gv(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},qk=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Ra(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(f=>{l[f]={...n.shipSections[f],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},Fk=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,f=Ra(s,l).totals.shieldsPerTurn,d=JSON.parse(JSON.stringify(s.shipSections)),p=Object.keys(d);let g=f,y=0,b=0;for(;g>0&&b<100;){const T=p[y%p.length],w=d[T],O=mv(T,s,l);w.allocatedShields<O&&(w.allocatedShields++,g--),y++,b++}const S={...s,shipSections:d},E={success:!0,newPhase:"deployment",firstPlayer:Op(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(E.player1State=i,E.player2State=S):(E.player1State=S,E.player2State=i),E},Vk=(e,t,n,r,i,s,l)=>{const{effect:u,cost:f}=e,d=r.player1;let p="",g="Ability effect applied.";e.targeting?.type==="LANE"?p=`Lane ${n.id.slice(-1)}`:n&&(p=n.name),u.type==="HEAL"?(g=`Healed ${u.value} hull on targets in ${p}.`,u.scope!=="LANE"&&(g=`Healed ${u.value} hull on ${p}.`)):u.type==="DAMAGE"&&(g=`Dealt ${u.value} damage to ${p}.`),s&&s({player:d.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:p,outcome:g});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(f.energy&&(y.player1.energy-=f.energy),f.exhausts)for(const A in y.player1.dronesOnBoard){const E=y.player1.dronesOnBoard[A].findIndex(T=>T.id===t.id);if(E!==-1){y.player1.dronesOnBoard[A][E].isExhausted=!0;break}}const b=Ow(u,t,n,y,i,{resolveAttackCallback:l});y.player1=b.newPlayerStates.player1,y.player2=b.newPlayerStates.player2;const S=b.animationEvents||[];return{newPlayerStates:y,shouldEndTurn:!u.goAgain,animationEvents:S}},Kk=(e,t,n,r,i,s,l)=>{const{logCallback:u,resolveAttackCallback:f}=s||{},{cost:d,effect:p}=e,g=r[l];u&&u({player:g.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const y=[{type:"SHIP_ABILITY_REVEAL",abilityName:e.name,sectionName:t,actingPlayerId:l}],b={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(b[l].energy-=d.energy,p.type==="REALLOCATE_SHIELDS")return{newPlayerStates:b,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:y};{const S=Nw(p,t,n,b,i,{resolveAttackCallback:f},l);return b.player1=S.newPlayerStates.player1,b.player2=S.newPlayerStates.player2,y.push(...S.animationEvents||[]),S.needsDiscardSelection?{newPlayerStates:b,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:l,count:S.needsDiscardSelection,fromAbility:!0,abilityName:e.name,sectionName:t,actingPlayerId:l},animationEvents:[]}:{newPlayerStates:b,shouldEndTurn:!0,animationEvents:y}}},bw=(e,t,n,r,i,s,l,u)=>{const f=yw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Ra(r,s.player1||s));if(!f.isValid)return{success:!1,error:f.reason,message:f.message,newPlayerState:r};const{budgetCost:d,energyCost:p}=f;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const g=JSON.parse(JSON.stringify(r)),y={...g.dronesOnBoard,[t]:[...g.dronesOnBoard[t],{...e,id:0}]},b={...g,dronesOnBoard:y},S=ur(e,t,b,i,s),A={...e,id:Date.now(),statMods:[],currentShields:S.maxShields,currentMaxShields:S.maxShields,hull:e.hull,isExhausted:!1};g.dronesOnBoard[t].push(A),g.deployedDroneCounts={...g.deployedDroneCounts,[e.name]:(g.deployedDroneCounts[e.name]||0)+1},n===1?g.initialDeploymentBudget-=d:g.deploymentBudget-=d,g.energy-=p,g.dronesOnBoard=_l(g,i,s);const E=[{type:"TELEPORT_IN",targetId:A.id,laneId:t,playerId:u,timestamp:Date.now()}];return{success:!0,newPlayerState:g,deployedDrone:A,animationEvents:E}},Wk=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return c0(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):c0(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},Xk=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=lr(e.id,t);if(!i)return[];const s=ur(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(f=>{const d=ur(f,i,n,t,r);return!f.isExhausted&&(d.speed>s.speed||d.keywords.has("ALWAYS_INTERCEPTS"))}).map(f=>f.id)},Qk=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,f=e.class;let d=0;n===1?d=Math.min(r.initialDeploymentBudget,f):d=Math.min(r.deploymentBudget,f);const p=f-d;if(r.energy<p)return{success:!1,error:"Insufficient energy for deployment"};const g={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],g]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-d:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-d:r.deploymentBudget,energy:r.energy-p};return y.dronesOnBoard=_l(y,i,s),{success:!0,newPlayerState:y,deployedDrone:g,costs:{energy:p,budget:d}}},Zk=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l,attackingPlayer:u}=e,d=t[u==="player1"?"player2":"player1"],p=t[u],g=ur(r,l,p,d,n),y=d.dronesOnBoard[l].filter(b=>{const S=ur(b,l,d,p,n);return!b.isExhausted&&(S.speed>g.speed||S.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||b.id!==i.id)});return{hasInterceptors:y.length>0,interceptors:y,attackDetails:e}},yv=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},Jk=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},eI=(e,t)=>{const n=yv(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},tI=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=Op(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},nI=(e,t,n,r)=>{const i=u0(e.player1,t,n,e.player2,e.placedSections),s=u0(e.player2,t,r,e.player1,e.opponentPlacedSections),l=d0(i,n.totals.handLimit),u=d0(s,r.totals.handLimit),f=Op(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),d={...e,turn:t,turnPhase:"deployment",currentPlayer:f,firstPlayerOfRound:f,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},p=[{type:"ROUND_START",turn:t,firstPlayer:f},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:d,uiEffects:p}},xw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=ur(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},u0=(e,t,n,r,i)=>({...xw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),d0=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;const s=n.pop();r.push(s),P("CARDS",`ðŸ“¥ Card drawn to hand: ${s.name}`,{id:s.id,instanceId:s.instanceId,hasInstanceId:s.instanceId!==void 0,playerName:e.name})}return{...e,deck:n,hand:r,discardPile:i}},rI=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:f,opponentPlacedSections:d}=e,{addLogEntry:p,setPlayer2:g,setPendingAttack:y,endTurn:b,endDeploymentPhase:S,endActionPhase:A,setPassInfo:E}=n;let T;return l==="deployment"&&!u.player2Passed?T=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:d,placedSections:f,getShipStatus:ss,calculateEffectiveShipStats:Ra,calculateEffectiveStats:ur,addLogEntry:p}):l==="action"&&!u.player2Passed&&(T=t.handleOpponentAction({player1:r,player2:i,placedSections:f,opponentPlacedSections:d,getShipStatus:ss,getLaneOfDrone:lr,getValidTargets:cu,calculateEffectiveStats:ur,addLogEntry:p})),T||null},aI=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:f}=t,{addLogEntry:d,setPlayer2:p,setPendingAttack:g,endTurn:y,endDeploymentPhase:b,endActionPhase:S,setPassInfo:A,resolveCardPlay:E}=n;if(e.type==="pass"){const T=!t.passInfo.player1Passed,w={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(T?"player2":null)};return A(w),w.player1Passed?l==="deployment"?b():l==="action"&&S():y("player2"),{newPassInfo:w}}else if(e.type==="deploy"){const{droneToDeploy:T,targetLane:w,logContext:O}=e.payload;d({player:i.name,actionType:"DEPLOY",source:T.name,target:w,outcome:`Deployed to ${w}.`},"aiDeploymentDeploy",O);const _=bw(T,w,i,r,s,{player1:u,player2:f});return _.success&&(p(_.newPlayerState),y("player2")),{deployedDrone:_.deployedDrone}}else if(e.type==="action"){const T=e.payload,{logContext:w}=e;switch(T.type){case"play_card":E(T.card,T.target,"player2",w);break;case"attack":g({attacker:T.attacker,target:T.target,targetType:T.targetType,lane:T.attacker.lane,attackingPlayer:"player2",aiContext:w});break;case"move":{const{drone:O,fromLane:_,toLane:k}=T;d({player:i.name,actionType:"MOVE",source:O.name,target:k,outcome:`Moved from ${_} to ${k}.`},"aiActionMove",w);let M=JSON.parse(JSON.stringify(i));M.dronesOnBoard[_]=M.dronesOnBoard[_].filter(q=>q.id!==O.id);const j={...O,isExhausted:!0};M.dronesOnBoard[k].push(j);const{newState:U}=mw(M,j,_,k,d);U.dronesOnBoard=_l(U,r,{player1:u,player2:f}),p(U),y("player2");break}default:y("player2");break}return{action:T}}return null},Sw=(e,t,n,r,i,s,l,u)=>{const{cost:f,effect:d}=e,{logCallback:p,applyOnMoveEffectsCallback:g,updateAurasCallback:y}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=f,b.hand=b.hand.filter(T=>T.instanceId!==e.instanceId),b.discardPile.push(e);const S=new Set(t.map(T=>T.id));b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(T=>!S.has(T.id));const A=t.map(T=>({...T,isExhausted:T.isExhausted||!d.properties?.includes("DO_NOT_EXHAUST")}));b.dronesOnBoard[r].push(...A),p({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(T=>T.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let E=b;return A.forEach(T=>{const{newState:w}=g(E,T,n,r,p);E=w}),E.dronesOnBoard=y(E,s,l),{newPlayerState:E,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},Aw=(e,t,n,r,i,s,l,u)=>{const{cost:f,effect:d}=e,{logCallback:p,applyOnMoveEffectsCallback:g,updateAurasCallback:y}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=f,b.hand=b.hand.filter(E=>E.instanceId!==e.instanceId),b.discardPile.push(e),b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(E=>E.id!==t.id);const S={...t,isExhausted:d.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};b.dronesOnBoard[r].push(S),p({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=g(b,S,n,r,p);return A.dronesOnBoard=y(A,s,l),{newPlayerState:A,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},Cw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Ew=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=ss(i);(s==="damaged"||s==="critical")&&n++}return n},iI=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:f,resolveAttackCallback:d}=s,p=t?t.name||t.id:"N/A";let g="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(g=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(g=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(g=`Healed ${y.value} hull on ${p}.`),y.type==="HEAL_SHIELDS"&&(g=`Healed ${y.value} shields on ${p}.`),y.type==="READY_DRONE"&&(g=`Readied ${p}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?g=`Dealt ${y.value} damage to filtered targets in ${p}.`:g=`Dealt ${y.value} damage to ${p}.`),y.type==="MODIFY_STAT"){const T=y.mod,w=T.type==="temporary"?" until the end of the turn":" permanently";g=`Gave ${p} a ${T.value>0?"+":""}${T.value} ${T.stat} bonus${w}.`}if(y.type==="REPEATING_EFFECT"){const T=r[n],w=Ew(y.condition,T);g=`Drew ${w} card(s) and gained ${w} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:p,outcome:g});let S=n==="player1"&&(e.effect.type==="SEARCH_AND_DRAW"||e.effect.type==="SINGLE_MOVE"||e.effect.type==="MULTI_MOVE")?r:Cw(e,n,r);const A=sI(e.effect,t,n,S,i,s,e),E=[];if(A.needsCardSelection||E.push({type:"CARD_REVEAL",cardId:e.id,cardName:e.name,cardData:e,actingPlayerId:n,timestamp:Date.now()}),e.visualEffect&&t){let T=null,w=null,O=null;if(t.id&&(t.id==="lane1"||t.id==="lane2"||t.id==="lane3")){const _=e.targeting?.affinity||"ANY";_==="ENEMY"?(T=n==="player1"?"player2":"player1",w=t.id,O="lane"):_==="ANY"&&(T="center",w=t.id,O="lane"),T&&O&&E.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:T,targetLane:w,targetType:O,duration:e.visualEffect.duration||800,timestamp:Date.now()})}else{for(const _ of["player1","player2"]){for(const k in S[_].dronesOnBoard)if(S[_].dronesOnBoard[k].some(M=>M.id===t.id)){T=_,w=k,O="drone";break}if(T)break}if(!T){for(const _ of["player1","player2"])if(S[_].shipSections[t.name]||S[_].shipSections[t.id]){T=_,O="section";break}}T&&O&&E.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:T,targetLane:w,targetType:O,duration:e.visualEffect.duration||800,timestamp:Date.now()})}}if(A.animationEvents&&E.push(...A.animationEvents),P("CARDS","[ANIMATION EVENTS] resolveCardPlay emitted:",E),!A.needsCardSelection){const T=Tw(e,n,A.newPlayerStates);return{newPlayerStates:T.newPlayerStates,shouldEndTurn:T.shouldEndTurn,additionalEffects:A.additionalEffects||[],animationEvents:E,needsCardSelection:!1}}return{newPlayerStates:r,shouldEndTurn:!1,additionalEffects:A.additionalEffects||[],animationEvents:E,needsCardSelection:A.needsCardSelection}},Tw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},sI=(e,t,n,r,i,s,l=null)=>e.effects?oI(e,t,n,r,i,s,l):Pw(e,t,n,r,i,s,l),oI=(e,t,n,r,i,s,l=null)=>{let u=r,f=[];if(e.type==="REPEATING_EFFECT"){const d=Ew(e.condition,u[n]);for(let p=0;p<d;p++)for(const g of e.effects){const y=Pw(g,t,n,u,i,s,l);u=y.newPlayerStates,y.additionalEffects&&f.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:f}},Pw=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return bv(e,null,t,n,r);case"SEARCH_AND_DRAW":return ww(e,null,t,n,r);case"GAIN_ENERGY":return lI(e,n,r,i);case"READY_DRONE":return cI(e,t,n,r);case"HEAL_HULL":return vv(e,null,t,n,r,i);case"HEAL_SHIELDS":return uI(e,t,n,r,s,i);case"DAMAGE":return wp(e,null,t,n,r,i,s,l);case"DESTROY":return fI(e,t,n,r);case"MODIFY_STAT":return pI(e,t,n,r);case"MODIFY_DRONE_BASE":return hI(e,t,n,r);case"DESTROY_UPGRADE":return mI(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return bI(e,t,n,r,i,s,l);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},lI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,f=Ra(l,u).totals,d=Math.min(f.maxEnergy,l.energy+e.value);return l.energy=d,{newPlayerStates:s,additionalEffects:[]}},cI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const f=l.dronesOnBoard[u].findIndex(d=>d.id===t.id);if(f!==-1){l.dronesOnBoard[u][f].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},uI=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=[];if(t.id&&t.id.startsWith("lane")){const f=t.id,d=t.owner||n,p=l[d],y=l[d==="player1"?"player2":"player1"],b=s?.[d]||[],S=p.dronesOnBoard[f]||[];P("COMBAT",`[HEAL_SHIELDS] Healing all drones in ${d} ${f} (${S.length} drones)`),S.forEach(A=>{const T=ur(A,f,p,y,b).maxShields,w=A.currentShields||0;w<T&&(A.currentShields=Math.min(T,w+e.value)),P("COMBAT",`[HEAL_SHIELDS] ${A.name}: ${w} â†’ ${A.currentShields} (max: ${T})`),u.push({type:"HEAL_EFFECT",targetId:A.id,targetPlayer:d,targetLane:f,targetType:"drone",healAmount:e.value,config:{},onComplete:null})})}else{const f=l[t.owner||n],d=t.owner||n,g=l[d==="player1"?"player2":"player1"],y=s?.[d]||[];for(const b in f.dronesOnBoard){const S=f.dronesOnBoard[b].findIndex(A=>A.id===t.id);if(S!==-1){const A=f.dronesOnBoard[b][S],T=ur(A,b,f,g,y).maxShields,w=A.currentShields||0;w<T&&(A.currentShields=Math.min(T,w+e.value),P("COMBAT",`[HEAL_SHIELDS] ${A.name} in ${b}: ${w} â†’ ${A.currentShields} (max: ${T})`)),u.push({type:"HEAL_EFFECT",targetId:t.id,targetPlayer:d,targetLane:b,targetType:"drone",healAmount:e.value,config:{},onComplete:null});break}}}return{newPlayerStates:l,additionalEffects:[],animationEvents:u}},dI=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,d=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,g=r[d].dronesOnBoard[u]||[];P("COMBAT",`[DEBUG] Filtered damage - ${n} targeting ${d} ${u}`),P("COMBAT",`[DEBUG] Drones in ${d} ${u}:`,g.map(O=>`${O.name}(${O.id}) [${O.hull}hp, ${O.speed}spd]`));const{stat:y,comparison:b,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},T=A[d].dronesOnBoard[u]||[];for(let O=T.length-1;O>=0;O--){const _=T[O];let k=!1;if(b==="GTE"&&_[y]>=S&&(k=!0),b==="LTE"&&_[y]<=S&&(k=!0),P("COMBAT",`[DEBUG] ${_.name} ${y}=${_[y]} ${b} ${S} = ${k}`),k){P("COMBAT",`[DEBUG] Applying ${e.value} damage to ${_.name}`);const M=_.currentShields||0;let j=e.value;const U=Math.min(j,M);_.currentShields=(_.currentShields||0)-U,j-=U,j>0&&(_.hull-=j),_.hull<=0&&(P("COMBAT",`[DEBUG] ${_.name} destroyed`),T.splice(O,1))}}const w=[];for(const O of g){const _=T.find(M=>M.id===O.id);let k=!1;if(b==="GTE"&&O[y]>=S&&(k=!0),b==="LTE"&&O[y]<=S&&(k=!0),k){const M=O.currentShields||0,j=Math.min(e.value,M),U=e.value-j;j>0&&w.push({type:"SHIELD_DAMAGE",targetId:O.id,targetPlayer:d,targetLane:u,targetType:"drone",amount:j,timestamp:Date.now()}),_?U>0&&w.push({type:"HULL_DAMAGE",targetId:O.id,targetPlayer:d,targetLane:u,targetType:"drone",amount:U,timestamp:Date.now()}):w.push({type:"DRONE_DESTROYED",targetId:O.id,targetPlayer:d,targetLane:u,targetType:"drone",timestamp:Date.now()})}}return{newPlayerStates:A,additionalEffects:[],animationEvents:w}}else{const u=r[t.owner],f=lr(t.id,u);if(f){P("COMBAT",`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const d={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},g=d[t.owner].dronesOnBoard[f]||[],y=g.find(b=>b.id===t.id);if(y){let b=e.value,S=0,A=b;if(e.damageType!=="PIERCING"&&(S=Math.min(b,y.currentShields),A-=S,y.currentShields-=S),y.hull-=A,P("COMBAT",`[DEBUG] Applied ${A} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){P("COMBAT",`[DEBUG] ${y.name} destroyed`);const T=g.findIndex(w=>w.id===t.id);T>=0&&g.splice(T,1)}const E=[];return S>0&&E.push({type:"SHIELD_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:f,targetType:"drone",amount:S,timestamp:Date.now()}),y.hull<=0?E.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:t.owner,targetLane:f,targetType:"drone",timestamp:Date.now()}):A>0&&E.push({type:"HULL_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:f,targetType:"drone",amount:A,timestamp:Date.now()}),{newPlayerStates:d,additionalEffects:[],animationEvents:E}}return{newPlayerStates:d,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},fI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const f=t.id;(s[l].dronesOnBoard[f]||[]).forEach(g=>{u.push({type:"DRONE_DESTROYED",targetId:g.id,targetPlayer:l,targetLane:f,targetType:"drone",timestamp:Date.now()});const y=gl(s[l],g);s[l].deployedDroneCounts={...s[l].deployedDroneCounts||{},...y.deployedDroneCounts}}),s[l].dronesOnBoard[f]=[],(s[n].dronesOnBoard[f]||[]).forEach(g=>{u.push({type:"DRONE_DESTROYED",targetId:g.id,targetPlayer:n,targetLane:f,targetType:"drone",timestamp:Date.now()});const y=gl(s[n],g);s[n].deployedDroneCounts={...s[n].deployedDroneCounts||{},...y.deployedDroneCounts}}),s[n].dronesOnBoard[f]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const f=s[l],d=lr(t.id,f);if(d){const p=f.dronesOnBoard[d].find(g=>g.id===t.id);if(p){u.push({type:"DRONE_DESTROYED",targetId:p.id,targetPlayer:l,targetLane:d,targetType:"drone",timestamp:Date.now()});const g=gl(f,p);f.deployedDroneCounts={...f.deployedDroneCounts||{},...g.deployedDroneCounts},f.dronesOnBoard[d]=f.dronesOnBoard[d].filter(y=>y.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:[],animationEvents:u}},pI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const f=t.id;l.dronesOnBoard[f]&&l.dronesOnBoard[f].forEach(d=>{d.statMods||(d.statMods=[]),d.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const f in l.dronesOnBoard){const d=l.dronesOnBoard[f].findIndex(p=>p.id===t.id);if(d!==-1){const p=l.dronesOnBoard[f][d];p.statMods||(p.statMods=[]),p.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},hI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,f=l.appliedUpgrades[u]||[],d={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(d.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...f,d]},{newPlayerStates:s,additionalEffects:[]}},mI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:f,instanceId:d}=t;if(u.appliedUpgrades[f]){const p=u.appliedUpgrades[f].filter(g=>g.instanceId!==d);p.length>0?u.appliedUpgrades[f]=p:delete u.appliedUpgrades[f]}return{newPlayerStates:s,additionalEffects:[]}},wp=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:f}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return dI(e,n,r,i,l,u?.targeting);const d=n.owner==="player1"?i.player1:i.player2,p=lr(n.id,d);if(p&&f){const g={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:p,damageType:e.damageType},y=_w(g,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[],animationEvents:y.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},vv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=[],d=r||"player1";if(e.scope==="LANE"){const p=n.id;u[d].dronesOnBoard[p]&&u[d].dronesOnBoard[p].forEach(g=>{const y=Nt.find(b=>b.name===g.name);y&&(g.hull<y.hull&&(g.hull=Math.min(y.hull,g.hull+e.value)),f.push({type:"HEAL_EFFECT",targetId:g.id,targetPlayer:d,targetLane:p,targetType:"drone",healAmount:e.value,config:{},onComplete:null}))})}else{const p=Nt.find(g=>g.name===n.name);if(p){const g=lr(n.id,u[d]);if(g){const y=u[d].dronesOnBoard[g].findIndex(b=>b.id===n.id);if(y!==-1){const b=u[d].dronesOnBoard[g][y];b.hull<p.hull&&(b.hull=Math.min(p.hull,b.hull+e.value)),f.push({type:"HEAL_EFFECT",targetId:n.id,targetPlayer:d,targetLane:g,targetType:"drone",healAmount:e.value,config:{},onComplete:null})}}}else if(n.name&&u[d].shipSections[n.name]){const g=u[d].shipSections[n.name],b=(d==="player1"?s.player1:s.player2).find(S=>S.name===n.name);b&&(g.hull<b.maxHull&&(g.hull=Math.min(b.maxHull,g.hull+e.value)),f.push({type:"HEAL_EFFECT",targetId:n.name,targetPlayer:d,targetLane:null,targetType:"section",healAmount:e.value,config:{},onComplete:null}))}}return{newPlayerStates:u,additionalEffects:[],animationEvents:f}},bv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=r||"player1",d=u[f];let p=[...d.deck],g=[...d.hand],y=[...d.discardPile];const b=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<b;A++){if(p.length===0)if(y.length>0)p=[...y].sort(()=>.5-Math.random()),y=[];else break;p.length>0&&g.push(p.pop())}u[f]={...d,deck:p,hand:g,discardPile:y};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},gI=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),ww=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=r||"player1",d=u[f];let p=[...d.deck],g=[...d.discardPile],y,b;if(e.filter)p.length===0&&g.length>0&&(p=[...g.sort(()=>.5-Math.random())],g=[]),y=p.filter(A=>gI(A,e.filter)).slice(0,e.searchCount),b=p.filter(A=>!y.includes(A));else{const S=e.searchCount;p.length<S&&g.length>0&&(p=[...p,...g.sort(()=>.5-Math.random())],g=[]),y=p.slice(-e.searchCount).reverse(),b=p.slice(0,-e.searchCount)}if(f==="player2"){const S=yI(y,e.drawCount,u),A=y.filter(w=>!S.includes(w)),E=[...d.hand,...S];let T=[...b,...A];return e.shuffleAfter&&(T=T.sort(()=>.5-Math.random())),u[f]={...d,deck:T,hand:E,discardPile:g},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:b,discardPile:g,filter:e.filter}}},yI=(e,t,n,r)=>e.map(s=>({card:s,score:vI(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),vI=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},bI=(e,t,n,r,i,s,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",f=r[n],d=r[u];let p=null,g=-1/0;for(const y of["lane1","lane2","lane3"]){const S=(f.dronesOnBoard[y]||[]).filter(A=>!A.isExhausted);if(S.length!==0)for(const A of["lane1","lane2","lane3"]){if(y===A)continue;if(e.type==="SINGLE_MOVE"){const O=parseInt(y.replace("lane","")),_=parseInt(A.replace("lane",""));if(Math.abs(O-_)!==1)continue}const E=d.dronesOnBoard[A]?.length||0,T=f.dronesOnBoard[A]?.length||0,w=E*10-T*5;w>g&&(g=w,p={fromLane:y,toLane:A,drones:e.type==="SINGLE_MOVE"?[S[0]]:S.slice(0,Math.min(e.count||3,S.length))})}}if(!p)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const y=Aw(l,p.drones[0],p.fromLane,p.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}else{const y=Sw(l,p.drones,p.fromLane,p.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}},Ow=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return vv(e,t,n,"player1",r,i);case"DAMAGE":return wp(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},Nw=(e,t,n,r,i,s,l)=>{const u={name:t};switch(e.type){case"DAMAGE":return wp(e,u,n,l,r,i,s);case"RECALL_DRONE":return Dw(e,t,n,r,i,s,l);case"DRAW_THEN_DISCARD":return bv(e,u,n,l,r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},Dw=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},f=l==="player1"?"player2":"player1",d=lr(n,u[l]);if(d){const p=u[l].dronesOnBoard[d].find(y=>y.id===n);if(!p)return console.warn("âš ï¸ [RECALL DEBUG] Drone not found in lane:",n,"lane:",d),{newPlayerStates:u,additionalEffects:[],animationEvents:[]};u[l].dronesOnBoard[d]=u[l].dronesOnBoard[d].filter(y=>y.id!==n),Object.assign(u[l],hw(u[l],p)),u[l].dronesOnBoard=_l(u[l],u[f],i);const g=[{type:"TELEPORT_OUT",targetId:n,laneId:d,playerId:l,timestamp:Date.now()}];return{newPlayerStates:u,additionalEffects:[],animationEvents:g}}return{newPlayerStates:u,additionalEffects:[],animationEvents:[]}},_w=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:f,interceptor:d,attackingPlayer:p,abilityDamage:g,goAgain:y,damageType:b,lane:S,aiContext:A}=e,E=g!==void 0,T=d||u,w=d?"drone":f,O=p,_=T.owner||(O==="player1"?"player2":"player1"),k=t[O],M=t[_];let j=null,U=null;!E&&l&&l.id&&(j=lr(l.id,k),U=ur(l,j,k,M,n));let q=g??(U?Math.max(0,U.attack):0),L=b||(l?l.damageType:void 0);U&&U.keywords&&U.keywords.has("PIERCING")&&(L="PIERCING"),w==="section"&&!g&&l&&l.name&&Nt.find(ae=>ae.name===l.name)?.abilities?.forEach(ae=>{ae.type==="PASSIVE"&&ae.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(q+=ae.effect.value)});let $=0,G=0,Z=!1,X=0,re=0;if(w==="drone"){let K=null;for(const ae in M.dronesOnBoard)if(K=M.dronesOnBoard[ae].find(me=>me.id===T.id),K)break;if(K){let ae=q;L!=="PIERCING"&&($=Math.min(q,K.currentShields),ae-=$),G=Math.min(ae,K.hull),Z=K.hull-G<=0,X=K.currentShields-$,re=Z?0:K.hull-G}}else{const K=M.shipSections[T.name];if(K){let ae=q;L!=="PIERCING"&&($=Math.min(q,K.allocatedShields),ae-=$),G=Math.min(ae,K.hull),Z=K.hull-G<=0,X=K.allocatedShields-$,re=Z?0:K.hull-G}}const I=`Dealt ${$} shield and ${G} hull damage to ${T.name}.`+(w==="drone"?Z?` ${T.name} Destroyed.`:` ${T.name} has ${X} shields and ${re} hull left.`:""),Y=[];if(l&&l.id&&!E&&Y.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:O,sourceLane:j,targetId:T.id,targetPlayer:_,targetLane:w==="drone"?lr(T.id,M):null,targetType:w,attackValue:U?U.attack:1,timestamp:Date.now()}),$>0){const K={type:"SHIELD_DAMAGE",targetId:T.id,targetPlayer:_,targetLane:w==="drone"?lr(T.id,M):null,targetType:w,amount:$,timestamp:Date.now()};Y.push(K)}if(Z){const K={type:w==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:T.id,targetPlayer:_,targetLane:w==="drone"?lr(T.id,M):null,targetType:w,timestamp:Date.now()};Y.push(K)}else{if(G>0){const K={type:"HULL_DAMAGE",targetId:T.id,targetPlayer:_,targetLane:w==="drone"?lr(T.id,M):null,targetType:w,amount:G,timestamp:Date.now()};Y.push(K)}w==="section"&&($>0||G>0)&&Y.push({type:"SECTION_DAMAGED",targetId:T.id,targetPlayer:_,targetType:"section",timestamp:Date.now()}),l&&l.id&&!E&&Y.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:O,sourceLane:j,timestamp:Date.now()})}P("COMBAT","[ANIMATION EVENTS] resolveAttack emitted:",Y);const Q=j||(S?S.replace("lane","Lane "):null),ve=w==="drone"?`${T.name} (${Q})`:T.name,R=l&&l.name?`${l.name} (${Q})`:"Card Effect";r&&r({player:t[O].name,actionType:"ATTACK",source:R,target:ve,outcome:I},"resolveAttack",A);const V={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(w==="drone"){let K=!1;for(const ae in V[_].dronesOnBoard){const me=V[_].dronesOnBoard[ae].findIndex(Se=>Se.id===T.id);if(me!==-1){if(V[_].dronesOnBoard[ae][me].hull-G<=0){K=!0;const Se=V[_].dronesOnBoard[ae][me];V[_].dronesOnBoard[ae]=V[_].dronesOnBoard[ae].filter(Ae=>Ae.id!==T.id),Object.assign(V[_],gl(V[_],Se))}else V[_].dronesOnBoard[ae][me].hull-=G,V[_].dronesOnBoard[ae][me].currentShields-=$;break}}if(K){const ae=_==="player1"?V.player2:V.player1;V[_].dronesOnBoard=_l(V[_],ae,n)}}else{V[_].shipSections[T.name].hull-=G,V[_].shipSections[T.name].allocatedShields-=$;const K=_==="player1"?n.player1:n.player2,ae=Ra(V[_],K).totals;V[_].energy>ae.maxEnergy&&(V[_].energy=ae.maxEnergy)}if(!E&&l&&l.id){let K=!1;for(const ae in V[O].dronesOnBoard){const me=V[O].dronesOnBoard[ae].findIndex(Se=>Se.id===l.id);if(me!==-1){V[O].dronesOnBoard[ae][me].isExhausted=!0,K=!0;break}}if(K){const ae=gw(V[O],l,O);V[O]=ae.newState,ae.animationEvents&&ae.animationEvents.length>0&&Y.push(...ae.animationEvents),ae.effects.forEach(me=>{me.type==="LOG"&&r&&r(me.payload,"afterAttack")})}}if(d){const K=O==="player1"?"player2":"player1";for(const ae in V[K].dronesOnBoard){const me=V[K].dronesOnBoard[ae].findIndex(Se=>Se.id===d.id);if(me!==-1){ur(V[K].dronesOnBoard[ae][me],ae,V[K],V[O],n).keywords.has("DEFENDER")||(V[K].dronesOnBoard[ae][me].isExhausted=!0);break}}}return{newPlayerStates:V,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:j||S,targetName:T.name,targetType:w,interceptorName:d?d.name:null,shieldDamage:$,hullDamage:G,wasDestroyed:Z,remainingShields:X,remainingHull:re,outcome:I,shouldEndTurn:!y},animationEvents:Y}},xI=(e,t)=>{const n=Ra(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},Op=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),SI=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},AI=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},CI=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},EI=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},TI=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(f=>f.instanceId===l.instanceId||f.name===l.name&&f.id===l.id);if(u!==-1&&s<t){const f=r.splice(u,1)[0];i.push(f),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),f=r.splice(u,1)[0];i.push(f),s++}return{...e,hand:r,discardPile:i,discardCount:s}},Mw=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const f=parseInt(u.replace("lane",""),10);Math.abs(l-f)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const f=parseInt(u.replace("lane",""),10);Math.abs(l-f)===1&&s.push({id:u,owner:"player1"})})}return s},jw=(e,t)=>t.activeDronePool.map(n=>{const r=Nt.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),kw=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},PI=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=cu("player1",e.drone,e.ability,i,s):t?l=cu("player1",{id:t.sectionName},t.ability,i,s):n?u=Mw(n,i):r&&(r.type==="Upgrade"?u=jw(r,i):r.effect.type==="MULTI_MOVE"?u=kw(n,i):u=cu("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},wI=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),OI=(e,t,n,r)=>{const i=yv(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},ke={initialPlayerState:zk,buildDeckFromList:pw,createCard:dw,getEffectiveSectionMaxShields:mv,getShipStatus:ss,onDroneDestroyed:gl,onDroneRecalled:hw,checkWinCondition:c0,calculateAfterAttackStateAndEffects:gw,applyOnMoveEffects:mw,updateAuras:_l,getLaneOfDrone:lr,getValidTargets:cu,calculateAllValidTargets:PI,calculateMultiSelectTargets:Mw,calculateUpgradeTargets:jw,calculateMultiMoveTargets:kw,validateDeployment:yw,validateShieldRemoval:vw,validateShieldAddition:gv,executeShieldReallocation:Hk,getValidShieldReallocationTargets:Gk,processShieldAllocation:Yk,processResetShieldAllocation:qk,processEndShieldAllocation:Fk,resolveAttack:_w,resolveAbility:Vk,resolveShipAbility:Kk,executeDeployment:bw,resolveCardPlay:iI,payCardCosts:Cw,finishCardPlay:Tw,resolveMultiMove:Sw,resolveSingleMove:Aw,checkGameStateForWinner:Wk,calculatePotentialInterceptors:Xk,calculateAiInterception:Zk,calculateTurnTransition:yv,calculatePassTransition:Jk,readyDronesAndRestoreShields:xw,calculateNewRoundPlayerState:u0,drawToHandLimit:d0,drawPlayerCards:xI,determineFirstPlayer:Op,enforceHandLimit:SI,checkHandLimitCompliance:AI,checkHandLimitViolations:CI,enforceHandLimits:EI,processDiscardPhase:TI,processTurnTransition:eI,processPhaseChange:tI,processRoundStart:nI,createExplosionEffect:wI,createTurnEndEffects:OI,resolveUnifiedDamageEffect:wp,resolveUnifiedHealEffect:vv,resolveUnifiedDrawEffect:bv,resolveSearchAndDrawEffect:ww,resolveDroneAbilityEffect:Ow,resolveShipAbilityEffect:Nw,resolveShipRecallEffect:Dw,executeAiDeployment:Qk,executeAiTurn:rI,executeAiAction:aI},ul=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:ke,startingDecklist:pl,startingDroneList:fw},Symbol.toStringTag,{value:"Module"}));class NI{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},P("STATE_SYNC","ðŸ’¾ GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&P("STATE_SYNC",`ðŸ’¾ Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&P("STATE_SYNC",`ðŸ’¾ Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const DI=new NI;class ln{static instance=null;static getInstance(t){return ln.instance||(ln.instance=new ln(t)),ln.instance}static reset(){ln.instance&&ln.instance.stateSubscriptionCleanup&&ln.instance.stateSubscriptionCleanup(),ln.instance=null,P("STATE_SYNC","ðŸŽ¯ GameDataService singleton reset")}constructor(t){if(ln.instance)return console.warn("âš ï¸ GameDataService already exists. Use getInstance() instead of new GameDataService()"),ln.instance;this.gameStateManager=t,this.cache=DI,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),P("STATE_SYNC","ðŸŽ¯ GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),f=s[l],d=s[u],p=this.getPlacedSectionsForEngine(),g=this.isDroneOwnedByPlayer(t,f),S=ur(t,n,g?f:d,g?d:f,p);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Ra(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(d=>({...d,effectiveStats:this.getEffectiveStats(d,t),isPlayer:!0})),f=(l.dronesOnBoard[t]||[]).map(d=>({...d,effectiveStats:this.getEffectiveStats(d,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:f,hasGuardian:this.hasGuardianInLane(t,f)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const _I=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"}));class MI{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){if(this.isInitialized){P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=ln.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&P("AI_DECISIONS","ðŸ”— AIPhaseProcessor connected to ActionProcessor for execution"),s&&P("AI_DECISIONS","ðŸ”— AIPhaseProcessor subscribed to GameStateManager for self-triggering")}cleanup(){P("AI_DECISIONS","ðŸ§¹ AIPhaseProcessor: Cleaning up resources"),this.turnTimer&&(clearTimeout(this.turnTimer),this.turnTimer=null),this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.isProcessing=!1,this.isInitialized=!1,P("AI_DECISIONS","âœ… AIPhaseProcessor: Cleanup complete")}async processDroneSelection(t=null){P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.processDroneSelection starting (selecting 5 from deck)...");const i=this.gameStateManager.getState().commitments?.deckSelection;if(!i||!i.player2)throw new Error("AI deck commitment not found - deckSelection phase must complete first");const s=i.player2.drones||[];if(P("AI_DECISIONS",`ðŸŽ² AI deck contains ${s.length} drones:`,s.join(", ")),s.length<5||s.length>10)throw new Error(`AI deck must have 5-10 drones, found ${s.length}`);const l=this.extractDronesFromDeck(s);if(l.length<5)throw console.error("âŒ Failed to extract minimum required drones from deck"),new Error(`Only extracted ${l.length} drones from AI deck (minimum 5 required)`);const u=this.randomlySelectDrones(l,5),f=u.map(d=>d.name).join(", ");return P("AI_DECISIONS",`ðŸ¤– AI randomly selected 5 drones from ${l.length} available: ${f}`),u}extractDronesFromDeck(t){return t.map(r=>{const i=this.dronePool?.find(s=>s.name===r);return i||console.warn(`âš ï¸ Drone "${r}" not found in drone collection`),i}).filter(Boolean)}randomlySelectDrones(t,n){return[...t].sort(()=>.5-Math.random()).slice(0,n)}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(f=>n.preferredDrones.includes(f.name)),u=Math.min(3,l.length);r=l.slice(0,u),P("AI_DECISIONS",`ðŸŽ¯ AI selected ${r.length} preferred drones:`,r.map(f=>f.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((f,d)=>{const p=(f.energyCost||1)+(f.health||0)+(f.attack||0);return(d.energyCost||1)+(d.health||0)+(d.attack||0)-p});const l=r?.aggression||.5,u=r?.economy||.5;for(let f=0;f<n&&s.length>0;f++){let d=0;if(l>.7)d=s.findIndex(p=>(p.attack||0)>2),d===-1&&(d=0);else if(u>.7)d=s.findIndex(p=>(p.energyCost||1)<=2),d===-1&&(d=0);else{const p=Math.min(3,s.length);d=Math.floor(Math.random()*p)}i.push(s.splice(d,1)[0])}return P("AI_DECISIONS",`ðŸŽ¯ AI balanced selection (${n}):`,i.map(f=>f.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.processDeckSelection starting (selecting 40 cards + drones)...");let r=[];if(n&&n.decklist&&n.decklist.length>0){P("AI_DECISIONS",`ðŸŽ¯ Using ${n.name} personality decklist`);const{gameEngine:l}=await Tr(async()=>{const{gameEngine:u}=await Promise.resolve().then(()=>ul);return{gameEngine:u}},void 0);r=l.buildDeckFromList(n.decklist)}else{P("AI_DECISIONS","ðŸŽ¯ Using standard deck as fallback");const{gameEngine:l,startingDecklist:u}=await Tr(async()=>{const{gameEngine:f,startingDecklist:d}=await Promise.resolve().then(()=>ul);return{gameEngine:f,startingDecklist:d}},void 0);r=l.buildDeckFromList(u)}let i=[];if(n&&n.dronePool&&Array.isArray(n.dronePool)){if(i=[...n.dronePool],P("AI_DECISIONS",`ðŸŽ¯ Using ${n.name} personality dronePool: ${i.length} drones`),i.length<5)throw new Error(`AI personality '${n.name}' has only ${i.length} drones in dronePool. Minimum 5 required.`);if(i.length>10)throw new Error(`AI personality '${n.name}' has ${i.length} drones in dronePool. Maximum 10 allowed.`)}else{P("AI_DECISIONS","âš ï¸ Personality missing dronePool, using standard drone list as fallback");const{startingDroneList:l}=await Tr(async()=>{const{startingDroneList:u}=await Promise.resolve().then(()=>ul);return{startingDroneList:u}},void 0);i=[...l]}return P("AI_DECISIONS",`âœ… AI selected deck: ${r.length} cards + ${i.length} drones`),P("AI_DECISIONS",`ðŸŽ² AI drones: ${i.join(", ")}`),{deck:r,drones:i,shipComponents:{BRIDGE_001:"l",POWERCELL_001:"m",DRONECONTROL_001:"r"}}}async processPlacement(t=null){const n=t||this.currentAIPersonality;P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];P("AI_DECISIONS",`ðŸŽ¯ AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return P("AI_DECISIONS",`ðŸ¤– AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return P("AI_DECISIONS","ðŸŽ¯ AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return P("AI_DECISIONS","ðŸŽ¯ AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return P("AI_DECISIONS","ðŸŽ¯ AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Tr(async()=>{const{aiBrain:s}=await import("./aiLogic-4l1XV7wO.js");return{aiBrain:s}},[]),{gameEngine:r}=await Tr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>ul);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Tr(async()=>{const{aiBrain:s}=await import("./aiLogic-4l1XV7wO.js");return{aiBrain:s}},[]),{gameEngine:r}=await Tr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>ul);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});return P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor executing action decision:",i),i.type==="pass"?(await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}),null):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await Tr(async()=>{const{gameEngine:p}=await Promise.resolve().then(()=>ul);return{gameEngine:p}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return P("AI_DECISIONS","ðŸ¤– AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},f=[];if(u.hand.length>l){const p=u.hand.length-l;f=u.hand.slice(0,p),u={...u,hand:u.hand.slice(p),discardPile:[...u.discardPile,...f]},P("AI_DECISIONS",`ðŸ¤– AI discarding ${p} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const d=u.hand.length-(r.hand.length-f.length);return d>0&&P("AI_DECISIONS",`ðŸ¤– AI drew ${d} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:f,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return P("AI_DECISIONS","ðŸ¤– AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];const f=n.hand.reduce((p,g)=>(p[g.cost]||(p[g.cost]=[]),p[g.cost].push(g),p),{}),d=Object.keys(f).map(Number).sort((p,g)=>p-g);for(const p of d){const g=[...f[p]].sort(()=>.5-Math.random());if(u.push(...g),u.length>=l)break}return u=u.slice(0,l),P("AI_DECISIONS",`ðŸ¤– AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return P("AI_DECISIONS","ðŸ¤– AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let f=[];const d=t.player1,p=(b,S)=>b.reduce((A,E)=>{const T=this.gameDataService.getEffectiveStats(E,S);return A+(T.attack||0)+(T.hull||0)},0),g={lane1:p(n.dronesOnBoard.lane1||[],"lane1")-p(d.dronesOnBoard.lane1||[],"lane1"),lane2:p(n.dronesOnBoard.lane2||[],"lane2")-p(d.dronesOnBoard.lane2||[],"lane2"),lane3:p(n.dronesOnBoard.lane3||[],"lane3")-p(d.dronesOnBoard.lane3||[],"lane3")},y=[];return Object.entries(n.dronesOnBoard||{}).forEach(([b,S])=>{S.forEach(A=>{y.push({...A,lane:b,laneScore:g[b]})})}),y.sort((b,S)=>S.laneScore!==b.laneScore?S.laneScore-b.laneScore:b.class-S.class),f=y.slice(0,u),P("AI_DECISIONS",`ðŸ¤– AI removing ${f.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:f,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(P("AI_DECISIONS","ðŸ¤– AI has already passed"),!0):!1}async executePass(t){return P("AI_DECISIONS",`ðŸ³ï¸ AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}async executeShieldAllocationTurn(t){if(P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.executeShieldAllocationTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");t.player2;const n=t.opponentPlacedSections,r=t.opponentShieldsToAllocate||0;if(r===0){P("AI_DECISIONS","ðŸ¤– AI has no shields to allocate");return}const i=n.map(u=>u.name);if(i.length===0){P("AI_DECISIONS","ðŸ¤– AI has no placed sections to allocate shields to");return}let s=r,l=0;for(P("AI_DECISIONS",`ðŸ¤– AI distributing ${r} shields evenly across ${i.length} sections`);s>0;){const u=i[l];await this.actionProcessor.queueAction({type:"addShield",payload:{sectionName:u,playerId:"player2"}}),s--,l=(l+1)%i.length,P("AI_DECISIONS",`ðŸ¤– AI allocated shield to ${u}, ${s} remaining`)}P("AI_DECISIONS","âœ… AI shield allocation complete")}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||t.winner||t.gameStage==="gameOver"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(P("AI_DECISIONS",`â° AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn()},1500)))}async executeTurn(){if(this.isProcessing){P("AI_DECISIONS","âš ï¸ AIPhaseProcessor: Already processing a turn, skipping");return}const t=this.gameStateManager.getState();if(t.currentPlayer!=="player2"){P("AI_DECISIONS","âš ï¸ AIPhaseProcessor: Turn changed before execution, cancelling AI turn");return}if(t.passInfo&&t.passInfo.player2Passed){P("AI_DECISIONS","âš ï¸ AIPhaseProcessor: AI has already passed, cancelling turn");return}if(!["deployment","action"].includes(t.turnPhase)){P("AI_DECISIONS","âš ï¸ AIPhaseProcessor: Phase changed to non-sequential, cancelling turn");return}this.isProcessing=!0;try{P("AI_DECISIONS",`ðŸ¤– AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let r;if(t.turnPhase==="deployment")r=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")r=await this.executeActionTurn(t);else{console.warn(`âš ï¸ AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}if(r?.needsInterceptionDecision){P("AI_DECISIONS","ðŸ›¡ï¸ AIPhaseProcessor: AI attack needs human interception decision, pausing turn loop"),this.isProcessing=!1;return}const i=this.gameStateManager.getState();i.currentPlayer==="player2"&&i.passInfo&&!i.passInfo.player2Passed&&(P("AI_DECISIONS","ðŸ”„ AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(i)},100))}catch(r){console.error("âŒ AIPhaseProcessor: Error executing turn:",r)}finally{this.isProcessing=!1}}async makeInterceptionDecision(t,n){if(!this.isInitialized)throw new Error("AIPhaseProcessor not initialized");P("AI_DECISIONS","ðŸ¤– AIPhaseProcessor.makeInterceptionDecision called:",{interceptorCount:t?.length||0,target:n.target?.name});const{aiBrain:r}=await Tr(async()=>{const{aiBrain:s}=await import("./aiLogic-4l1XV7wO.js");return{aiBrain:s}},[]),i=r.makeInterceptionDecision(t,n.target);return P("AI_DECISIONS","ðŸ¤– AI interception decision:",{willIntercept:!!i.interceptor,interceptorName:i.interceptor?.name}),i}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,interception:!0,version:"1.3.0"}}}const Pr=new MI;class ui{static instance=null;static getInstance(t){return ui.instance||(ui.instance=new ui(t)),ui.instance}static reset(){ui.instance=null,P("STATE_SYNC","âš™ï¸ ActionProcessor singleton reset")}constructor(t){if(ui.instance)return console.warn("âš ï¸ ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),ui.instance;this.gameStateManager=t,this.gameDataService=ln.getInstance(t),this.animationManager=null,this.pendingActionAnimations=[],this.pendingSystemAnimations=[],this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},P("STATE_SYNC","âš™ï¸ ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1,this.actionQueue.length>0&&this.processQueue()}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const f=`${u}Passed`;if(s.passInfo[f])throw P("PASS_LOGIC",`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return P("STATE_SYNC","ðŸ›¡ï¸ Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return P("STATE_SYNC","ðŸ”„ Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return P("COMMITMENTS","ðŸ Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"searchAndDrawCompletion":return await this.processSearchAndDrawCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);case"destroyDrone":return await this.processDestroyDrone(r);case"addShield":return await this.processAddShield(r);case"resetShields":return await this.processResetShields(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{i||this.broadcastStateToGuest(),this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections};let s={...n};if(n.interceptor===void 0){const g=ke.calculateAiInterception(n,{player1:r.player1,player2:r.player2},i);if(g.hasInterceptors){const y=n.attackingPlayer==="player1"?"player2":"player1";if(this.gameStateManager.setState({interceptionPending:{attackDetails:n,defendingPlayerId:y,attackingPlayerId:n.attackingPlayer,interceptors:g.interceptors,timestamp:Date.now()}}),y==="player2"&&r.gameMode==="local"){if(P("COMBAT","ðŸ›¡ï¸ [INTERCEPTION] AI defender has interceptors"),await new Promise(b=>setTimeout(b,1e3)),this.aiPhaseProcessor){const b=await this.aiPhaseProcessor.makeInterceptionDecision(g.interceptors,n);P("COMBAT","ðŸ›¡ï¸ [INTERCEPTION] AI decision:",b.interceptor?"INTERCEPT":"DECLINE"),b.interceptor&&(s.interceptor=b.interceptor,this.gameStateManager.setState({lastInterception:{interceptor:b.interceptor,originalTarget:n.target,timestamp:Date.now()}}))}this.gameStateManager.setState({interceptionPending:null})}else return P("COMBAT","ðŸ›¡ï¸ [INTERCEPTION] Human defender has interceptors"),{needsInterceptionDecision:!0,interceptionData:{interceptors:g.interceptors,attackDetails:g.attackDetails}}}}const l=g=>{this.gameStateManager.addLogEntry(g,"resolveAttack",s.attackingPlayer==="player2"?s.aiContext:null)},u=()=>{},f=()=>{},d=ke.resolveAttack(s,{player1:r.player1,player2:r.player2},i,l,u,f),p=(d.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));return P("COMBAT","[ANIMATION EVENTS] ActionProcessor received:",d.animationEvents),P("COMBAT","[ANIMATION EVENTS] Mapped to animations:",p),P("COMBAT","ðŸŽ¬ [AI ANIMATION DEBUG] Built animations array:",{count:p.length,animations:p.map(g=>({name:g.animationName,sourceId:g.payload.sourceId,targetId:g.payload.targetId})),hasAnimationManager:!!this.animationManager}),P("COMBAT","ðŸŽ¬ [AI ANIMATION DEBUG] Calling executeAndCaptureAnimations()"),await this.executeAndCaptureAnimations(p),P("COMBAT","ðŸŽ¬ [AI ANIMATION DEBUG] executeAndCaptureAnimations() completed"),this.gameStateManager.setPlayerStates(d.newPlayerStates.player1,d.newPlayerStates.player2),r.interceptionPending&&(P("COMBAT","ðŸ›¡ï¸ [INTERCEPTION] Clearing interceptionPending after attack completed"),this.gameStateManager.setState({interceptionPending:null})),this.checkWinCondition(),d.attackResult&&d.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),d}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const f=u.dronesOnBoard[r].findIndex(g=>g.id===n);if(f===-1)throw new Error(`Drone ${n} not found in ${r}`);const d=u.dronesOnBoard[r][f],p={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(g=>g.id!==n),[i]:[...u.dronesOnBoard[i],{...d,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:p}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:d.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),P("COMBAT",`âœ… Moved ${d.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${d.name} moved from ${r} to ${i}`,drone:d,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let f=null,d=null;if(Object.values(l).forEach(A=>{Object.values(A.dronesOnBoard).forEach(E=>{E.forEach(T=>{T.id===n&&(f=T),T.id===i&&(d=T)})})}),i&&typeof i=="string"&&i.startsWith("lane")&&!d&&(d={id:i}),!f||!f.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const p=f.abilities[r],g=A=>{this.gameStateManager.addLogEntry(A,"resolveAbility")},y=async A=>await this.processAttack({attackDetails:A}),b=ke.resolveAbility(p,f,d,l,u,g,y),S=(b.animationEvents||[]).map(A=>({animationName:A.type,payload:{...A,droneId:A.sourceId}}));if(await this.executeAndCaptureAnimations(S),this.gameStateManager.setPlayerStates(b.newPlayerStates.player1,b.newPlayerStates.player2),this.checkWinCondition(),b.shouldEndTurn){const A=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:A.currentPlayer==="player1"?"player2":"player1"})}return b}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t;P("DEPLOYMENT","ðŸ“¥ ActionProcessor.processDeployment: Received payload:",{droneDataName:n?.name,droneDataType:typeof n,droneDataKeys:n?Object.keys(n):"null",laneId:r,playerId:i,turn:s});const l=this.gameStateManager.getState(),u=l[i],d=l[i==="player1"?"player2":"player1"],p={player1:l.placedSections,player2:l.opponentPlacedSections},g=b=>{this.gameStateManager.addLogEntry(b)},y=ke.executeDeployment(n,r,s||l.turn,u,d,p,g,i);if(y.success){const b=y.deployedDrone?.id||n.id,S=(y.animationEvents||[]).map(O=>({animationName:O.type,payload:{...O,droneId:O.targetId}})),A={...y.newPlayerState,dronesOnBoard:{...y.newPlayerState.dronesOnBoard,[r]:y.newPlayerState.dronesOnBoard[r].map(O=>O.id===b?{...O,isTeleporting:!0}:O)}};i==="player1"?this.gameStateManager.updatePlayers(A,{}):this.gameStateManager.updatePlayers({},A),await new Promise(O=>setTimeout(O,50));const E=this.executeAndCaptureAnimations(S),T=this.animationManager?.animations?.TELEPORT_IN||{duration:600,config:{revealAt:.7}},w=T.duration*(T.config?.revealAt||.7);setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState)},w),await E,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let f=null;if(r){for(const y of["player1","player2"]){for(const b of["lane1","lane2","lane3"]){const A=(l[y].dronesOnBoard[b]||[]).find(E=>E.id===r);if(A){f={...A,owner:y};break}}if(f)break}if(!f)for(const y of["player1","player2"]){const b=l[y].shipSections;if(b[r]){f={...b[r],name:r,owner:y};break}}!f&&r&&r.startsWith("lane")&&(f={id:r})}const d={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},p=ke.resolveCardPlay(n,f,i,l,u,d);P("CARDS","[ANIMATION EVENTS] Card play events:",p.animationEvents);const g=(p.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId}}));if(await this.executeAndCaptureAnimations(g),this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),this.checkWinCondition(),p.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return p}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:s,toLane:l,playerId:u}=t,f=this.gameStateManager.getState(),d=ke.payCardCosts(n,u,{player1:f.player1,player2:f.player2}),p={player1:f.placedSections,player2:f.opponentPlacedSections},g={logCallback:S=>this.gameStateManager.addLogEntry(S),applyOnMoveEffectsCallback:ke.applyOnMoveEffects,updateAurasCallback:ke.updateAuras};let y;if(r==="single_move"){y=ke.resolveSingleMove(n,i[0],s,l,d[u],d[u==="player1"?"player2":"player1"],p,g);const S={...d,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(S.player1,S.player2)}else{y=ke.resolveMultiMove(n,i,s,l,d[u],d[u==="player1"?"player2":"player1"],p,g);const S={...d,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(S.player1,S.player2)}const b=[{animationName:"CARD_REVEAL",payload:{cardId:n.id,cardName:n.name,cardData:n,actingPlayerId:u,timestamp:Date.now()}}];if(await this.executeAndCaptureAnimations(b),y.shouldEndTurn){const S=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:S.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:y.shouldEndTurn}}async processSearchAndDrawCompletion(t){const{card:n,selectedCards:r,selectionData:i,playerId:s}=t,l=this.gameStateManager.getState(),{searchedCards:u,remainingDeck:f,discardPile:d,shuffleAfter:p}=i,g=ke.payCardCosts(n,s,{player1:l.player1,player2:l.player2}),y=u.filter(O=>{const _=O.instanceId||`${O.id}-${O.name}`;return!r.some(k=>(k.instanceId||`${k.id}-${k.name}`)===_)}),b=g[s],S=[...b.hand,...r];let A=[...f,...y];p&&(A=A.sort(()=>.5-Math.random()));const E={...b,deck:A,hand:S,discardPile:d},T={player1:s==="player1"?E:g.player1,player2:s==="player2"?E:g.player2},w=ke.finishCardPlay(n,s,T);if(this.gameStateManager.addLogEntry({player:b.name,actionType:"CARD_SELECTION",source:n.name,target:`Selected ${r.length} cards`,outcome:`Drew: ${r.map(O=>O.name).join(", ")}`},"processSearchAndDrawCompletion"),this.gameStateManager.setPlayerStates(w.newPlayerStates.player1,w.newPlayerStates.player2),w.shouldEndTurn){const O=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:O.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:w.shouldEndTurn,newPlayerStates:w.newPlayerStates}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},f={player1:l.placedSections,player2:l.opponentPlacedSections},d={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},p=ke.resolveShipAbility(n,r,i,u,f,d,s),g=(p.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId}}));if(await this.executeAndCaptureAnimations(g),this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return p}checkWinCondition(){const t=this.gameStateManager.getState();if(t.winner)return null;const n={player1:t.player1,player2:t.player2},r={logCallback:s=>{this.gameStateManager.addLogEntry(s,"checkWinCondition")},setWinnerCallback:s=>{this.gameStateManager.setWinner(s)},showWinnerModalCallback:()=>{}};return ke.checkGameStateForWinner(n,r)}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;P("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();P("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=ke.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(P("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let f=r;u.passInfo&&u.passInfo[`${r}Passed`]?(f=u.currentPlayer,P("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${f}`)):P("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] Setting new player: ${f}`),this.gameStateManager.setCurrentPlayer(f)}const l=this.gameStateManager.getState();return P("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return P("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};P("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),P("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,P("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const d=this.gameStateManager.getLocalPlayerId(),p=i[d],y=this.gameDataService.getEffectiveShipStats(p,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=y,P("PHASE_TRANSITIONS",`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${y}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),P("PHASE_TRANSITIONS","[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(n),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1});const u={determineFirstPlayer:"DETERMINING FIRST PLAYER",energyReset:"ENERGY RESET",mandatoryDiscard:"MANDATORY DISCARD PHASE",optionalDiscard:"OPTIONAL DISCARD PHASE",draw:"DRAW PHASE",allocateShields:"ALLOCATE SHIELDS",mandatoryDroneRemoval:"REMOVE EXCESS DRONES",deployment:"DEPLOYMENT PHASE",deploymentComplete:"DEPLOYMENT COMPLETE",action:"ACTION PHASE"};if(u[n]&&this.animationManager){P("PHASE_TRANSITIONS",`ðŸŽ¬ [PHASE ANNOUNCEMENT] Showing announcement for: ${n}`);const d={phaseText:u[n],phaseName:n,timestamp:Date.now()};(n==="deployment"||n==="action")&&(d.firstPlayerId=i.firstPlayerOfRound);const p={animationName:"PHASE_ANNOUNCEMENT",payload:d};await this.executeAndCaptureAnimations([p],!0),P("PHASE_TRANSITIONS",`ðŸŽ¬ [PHASE ANNOUNCEMENT] Announcement complete for: ${n}`)}P("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase} â†’ ${n}`);const f=this.gameStateManager.getState();return P("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:f.turnPhase,placedSections:f.placedSections,opponentPlacedSections:f.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;P("PHASE_TRANSITIONS",`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||ke.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),f=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),d=ke.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),p=ke.calculateNewRoundPlayerState(s.player2,n,f,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,firstPasserOfPreviousRound:s.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(d,p),P("PHASE_TRANSITIONS",`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:d,player2:p}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);P("ENERGY","[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const f=u.shipSections[r];if(!f||f.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const d={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},p={...u,shipSections:d};return this.gameStateManager.updatePlayerState(s,p),P("ENERGY",`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:p}}else if(n==="add"){const f=s==="player1"?l.placedSections:l.opponentPlacedSections,d=ke.getEffectiveSectionMaxShields(r,u,f),p=u.shipSections[r];if(!p||p.allocatedShields>=d)return{success:!1,error:"Cannot add shield to this section"};const g={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:g};return this.gameStateManager.updatePlayerState(s,y),P("ENERGY",`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const f={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,f),P("ENERGY","[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:f}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return P("COMBAT","ðŸŽ¬ [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(P("DEPLOYMENT",`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;P("DEPLOYMENT","[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return P("DEPLOYMENT","[AI DECISION DEBUG] Deployment result:",s),s.success?(P("DEPLOYMENT","[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),P("DEPLOYMENT","[AI DECISION DEBUG] Turn transition complete")):P("DEPLOYMENT","[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":P("PASS_LOGIC","[AI DECISION DEBUG] AI passing");const f=this.gameStateManager.getState(),d=!f.passInfo[n==="player1"?"player2Passed":"player1Passed"];P("PASS_LOGIC","[AI DECISION DEBUG] Pass info before update:",f.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:f.passInfo.firstPasser||(d?n:null)});const p=this.gameStateManager.get("passInfo");return P("PASS_LOGIC","[AI DECISION DEBUG] Pass info after update:",p),p.player1Passed&&p.player2Passed?(P("PASS_LOGIC","[AI DECISION DEBUG] Both players passed, transitioning phase"),f.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):f.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(P("PASS_LOGIC","[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;P("STATE_SYNC","[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processGuestAction(t){if(this.gameStateManager.get("gameMode")!=="host"){console.warn("âš ï¸ processGuestAction should only be called by host");return}P("STATE_SYNC","[HOST] Processing guest action:",t);const r=await this.queueAction({type:t.type,payload:t.payload,isNetworkAction:!0});return this.broadcastStateToGuest(),r}async executeAndCaptureAnimations(t,n=!1){if(!t||t.length===0)return;const r=this.gameStateManager.get("gameMode");if(r==="host"&&(n?this.pendingSystemAnimations.push(...t):this.pendingActionAnimations.push(...t)),this.animationManager){const i=r==="guest"?"GUEST_OPTIMISTIC":r==="host"?"HOST_LOCAL":"LOCAL";await this.animationManager.executeAnimations(t,i)}}getAndClearPendingActionAnimations(){const t=[...this.pendingActionAnimations];return this.pendingActionAnimations=[],t}getAndClearPendingSystemAnimations(){const t=[...this.pendingSystemAnimations];return this.pendingSystemAnimations=[],t}broadcastStateToGuest(){if(this.gameStateManager.get("gameMode")==="host"&&this.p2pManager&&this.p2pManager.isConnected){const n=this.gameStateManager.getState(),r=this.getAndClearPendingActionAnimations(),i=this.getAndClearPendingSystemAnimations();P("STATE_SYNC","ðŸ“¡ [ANIMATION BROADCAST] Sending state with animations:",{actionAnimationCount:r.length,systemAnimationCount:i.length,actionAnimations:r.map(s=>s.animationName),systemAnimations:i.map(s=>s.animationName)}),this.p2pManager.broadcastState(n,r,i)}}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;P("PASS_LOGIC","[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=[{animationName:"PASS_NOTIFICATION",payload:{passingPlayerId:n}}];await this.executeAndCaptureAnimations(u);const f=`${l}Passed`,d=`${n}Passed`,p=!s[f],g={...s,[d]:!0,firstPasser:s.firstPasser||(p?n:null)};if(P("PASS_LOGIC","[PLAYER PASS DEBUG] Updating pass info:",g),this.gameStateManager.setPassInfo(g,"ActionProcessor"),g.player1Passed&&g.player2Passed)P("PASS_LOGIC","[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let b=null;n==="player1"&&!g.player2Passed?b="player2":n==="player2"&&!g.player1Passed&&(b="player1"),b&&(P("PASS_LOGIC",`[PLAYER PASS DEBUG] Switching turn to ${b} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:b},"TURN_SWITCH","playerPass"))}return{success:!0,newPassInfo:g}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;P("STATE_SYNC","[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error("ðŸ”¥ CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error("ðŸ”¥ CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1,abilityMetadata:s=null}=t,l=this.gameStateManager.getState();if(P("CARDS",`[OPTIONAL DISCARD DEBUG] Processing ${i?"mandatory":"optional"} discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const u=l[n];if(!u)throw new Error(`Player ${n} not found`);r.forEach(p=>{this.gameStateManager.addLogEntry({player:u.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:p.name,target:"N/A",outcome:`Discarded ${p.name}.`})});const f=u.hand.filter(p=>!r.some(g=>p.instanceId===g.instanceId)),d=[...u.discardPile,...r];if(this.gameStateManager.updatePlayerState(n,{hand:f,discardPile:d}),P("CARDS",`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),s){P("CARDS","[OPTIONAL DISCARD DEBUG] Final ability discard - executing SHIP_ABILITY_REVEAL animation",s);const p=[{animationName:"SHIP_ABILITY_REVEAL",payload:{abilityName:s.abilityName,sectionName:s.sectionName,actingPlayerId:s.actingPlayerId}}];await this.executeAndCaptureAnimations(p)}return{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){P("PHASE_TRANSITIONS","ðŸŽ¯ ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await Tr(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-DE-Sm-Nm.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),P("PHASE_TRANSITIONS",`âœ… First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeDeploymentComplete(t){return P("COMMITMENTS",`ðŸŽ¯ ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),P("COMMITMENTS",`ðŸ”„ Cleared commitments for phase: ${t}`)):(n.commitments={},P("COMMITMENTS","ðŸ”„ Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;if(P("COMMITMENTS",`ðŸ¤ ActionProcessor: Processing ${r} commitment for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("âš ï¸ Guest attempted processCommitment - should send to host instead"),{success:!1,error:"Guest cannot process commitments locally"};const l=this.gameStateManager.getState();l.commitments[r]||(l.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),l.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:l.commitments},"COMMITMENT_UPDATE");let u=l.commitments[r].player1.completed&&l.commitments[r].player2.completed;if(P("COMMITMENTS",`âœ… ${n} ${r} committed, both complete: ${u}`),n==="player1"&&l.gameMode==="local"&&!u&&(P("COMMITMENTS","ðŸ¤– Single-player mode: Auto-completing AI commitment immediately"),Pr))try{await this.handleAICommitment(r,l),P("COMMITMENTS","âœ… AI commitment completed successfully");const f=this.gameStateManager.getState();u=f.commitments[r].player1.completed&&f.commitments[r].player2.completed,P("COMMITMENTS",`ðŸ”„ Recalculated bothComplete after AI commit: ${u}`)}catch(f){throw console.error("âŒ AI commitment error:",f),f}return{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:u}}}async handleAICommitment(t,n){try{P("COMMITMENTS",`ðŸ¤– Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await Pr.processDroneSelection(),await this.processCommitment({playerId:"player2",phase:"droneSelection",actionData:{drones:r}});break;case"deckSelection":r=await Pr.processDeckSelection(),await this.processCommitment({playerId:"player2",phase:"deckSelection",actionData:{deck:r.deck,drones:r.drones,shipComponents:r.shipComponents}});break;case"placement":r=await Pr.processPlacement(),await this.processCommitment({playerId:"player2",phase:"placement",actionData:{placedSections:r}});break;case"mandatoryDiscard":if(r=await Pr.executeMandatoryDiscardTurn(n),r.cardsToDiscard.length>0){const i=n.player2,s=i.hand.filter(u=>!r.cardsToDiscard.some(f=>u.instanceId===f.instanceId)),l=[...i.discardPile,...r.cardsToDiscard];this.gameStateManager.updatePlayerState("player2",{hand:s,discardPile:l}),P("COMMITMENTS",`ðŸ¤– AI discarded ${r.cardsToDiscard.length} cards for mandatory discard`)}await this.processCommitment({playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"optionalDiscard":r=await Pr.executeOptionalDiscardTurn(n),await this.processCommitment({playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"allocateShields":await Pr.executeShieldAllocationTurn(n),await this.processCommitment({playerId:"player2",phase:"allocateShields",actionData:{committed:!0}});break;case"mandatoryDroneRemoval":if(r=await Pr.executeMandatoryDroneRemovalTurn(n),r.dronesToRemove.length>0){for(const i of r.dronesToRemove)await this.processDestroyDrone({droneId:i.id,playerId:"player2"});P("COMMITMENTS",`ðŸ¤– AI removed ${r.dronesToRemove.length} drones for mandatory drone removal`)}await this.processCommitment({playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}),i()},1e3)});break;case"deploymentComplete":P("COMMITMENTS","ðŸ¤– AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}),P("COMMITMENTS","ðŸ¤– AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(`âš ï¸ No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(`âš ï¸ No commitments found for phase: ${t}`),{};P("COMMITMENTS",`ðŸ“‹ ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),P("COMMITMENTS","âœ… Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,deckDronePool:r.player1.drones||[],selectedShipComponents:r.player1.shipComponents||{},discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,deckDronePool:r.player2.drones||[],selectedShipComponents:r.player2.shipComponents||{},discard:[]}),P("COMMITMENTS","âœ… Applied deck selections (cards + drones + ship components) to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),P("COMMITMENTS","âœ… Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":P("COMMITMENTS","âœ… First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":P("COMMITMENTS","âœ… Discard commitments (handled via card actions)");break;case"allocateShields":P("COMMITMENTS","âœ… Shield allocation (handled separately)");break;case"deploymentComplete":P("COMMITMENTS","âœ… Deployment complete acknowledgments (no state changes)");break;case"determineFirstPlayer":P("COMMITMENTS","âœ… First player determination (handled by GameFlowManager)");break;default:console.warn(`âš ï¸ No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return P("CARDS","ðŸƒ ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}=t;return P("ENERGY","âš¡ ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),i!==void 0&&this.gameStateManager.setState({shieldsToAllocate:i}),s!==void 0&&this.gameStateManager.setState({opponentShieldsToAllocate:s}),P("ENERGY",`âœ… Energy reset complete - Shields to allocate: ${i||0}, ${s||0}`),{success:!0,message:"Energy reset completed",player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}}async processDestroyDrone(t){const{droneId:n,playerId:r}=t;if(P("COMBAT",`ðŸ’¥ ActionProcessor: Processing drone destruction for ${r}, drone ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("âš ï¸ Guest attempted processDestroyDrone - should send to host instead"),{success:!1,error:"Guest cannot destroy drones locally"};const s=this.gameStateManager.getState(),l=s[r];if(!l)return{success:!1,error:`Player ${r} not found`};const u=ke.getLaneOfDrone(n,l);if(!u)return{success:!1,error:`Drone ${n} not found on board`};const f=l.dronesOnBoard[u].find(S=>S.id===n);if(!f)return{success:!1,error:`Drone ${n} not found in lane ${u}`};let d={...l,dronesOnBoard:{...l.dronesOnBoard}};d.dronesOnBoard[u]=d.dronesOnBoard[u].filter(S=>S.id!==n);const p=ke.onDroneDestroyed(d,f);Object.assign(d,p);const y=s[r==="player1"?"player2":"player1"],b={player1:s.placedSections,player2:s.opponentPlacedSections};return d.dronesOnBoard=ke.updateAuras(d,y,b),this.gameStateManager.updatePlayerState(r,d),P("COMBAT",`âœ… Drone ${n} destroyed successfully from ${u}`),{success:!0,message:`Drone destroyed from ${u}`,droneId:n,lane:u,droneName:f.name}}async processAddShield(t){const{sectionName:n,playerId:r}=t;if(P("ENERGY",`ðŸ›¡ï¸ ActionProcessor: Processing shield addition for ${r}, section ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("âš ï¸ Guest attempted processAddShield - should send to host instead"),{success:!1,error:"Guest cannot add shields locally"};const s=this.gameStateManager.getState(),l=r==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate",u=ke.processShieldAllocation({...s,shieldsToAllocate:s[l]},r,n);return u.success?(this.gameStateManager.updatePlayerState(r,u.newPlayerState),this.gameStateManager.setState({[l]:u.newShieldsToAllocate}),P("ENERGY",`âœ… Shield added to ${n}, ${u.newShieldsToAllocate} shields remaining`),{success:!0,message:`Shield added to ${n}`,sectionName:n,shieldsRemaining:u.newShieldsToAllocate}):(console.warn(`âš ï¸ Shield allocation failed: ${u.error}`),u)}async processResetShields(t){const{playerId:n}=t;if(P("ENERGY",`ðŸ”„ ActionProcessor: Processing shield allocation reset for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("âš ï¸ Guest attempted processResetShields - should send to host instead"),{success:!1,error:"Guest cannot reset shields locally"};const i=this.gameStateManager.getState(),s=ke.processResetShieldAllocation(i,n);if(!s.success)return console.warn(`âš ï¸ Shield reset failed: ${s.error}`),s;this.gameStateManager.updatePlayerState(n,s.newPlayerState);const l=n==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate";return this.gameStateManager.setState({[l]:s.newShieldsToAllocate}),P("ENERGY",`âœ… Shield allocation reset, ${s.newShieldsToAllocate} shields available`),{success:!0,message:"Shield allocation reset",shieldsToAllocate:s.newShieldsToAllocate}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}class jI{constructor(t){this.gameStateManager=t,this.messageQueue=[],this.isProcessing=!1,this.renderCompletePromise=null,this.renderCompleteResolve=null}initialize(t){P("MULTIPLAYER","ðŸŽ¯ [GUEST QUEUE] Initializing GuestMessageQueueService"),t.subscribe(n=>{n.type==="state_update_received"&&(P("MULTIPLAYER","ðŸ“¥ [GUEST QUEUE] Received state update, queuing for processing"),this.enqueueMessage(n))}),this.gameStateManager.subscribe(n=>{n.type==="render_complete"&&(P("STATE_SYNC","âœ… [GUEST QUEUE] Render complete received"),this.renderCompleteResolve&&(this.renderCompleteResolve(),this.renderCompleteResolve=null,this.renderCompletePromise=null))})}enqueueMessage(t){P("MULTIPLAYER","ðŸ“ [GUEST QUEUE] Enqueuing message:",{type:t.type,queueLength:this.messageQueue.length+1}),this.messageQueue.push(t),this.processQueue()}async processQueue(){if(this.isProcessing){P("MULTIPLAYER","â¸ï¸ [GUEST QUEUE] Already processing, queue length:",this.messageQueue.length);return}for(this.isProcessing=!0,P("MULTIPLAYER","â–¶ï¸ [GUEST QUEUE] Starting queue processing");this.messageQueue.length>0;){const t=this.messageQueue.shift();P("MULTIPLAYER","ðŸ”„ [GUEST QUEUE] Processing message:",{type:t.type,remaining:this.messageQueue.length}),await this.processMessage(t)}this.isProcessing=!1,P("MULTIPLAYER","â¹ï¸ [GUEST QUEUE] Queue processing complete")}async processMessage(t){switch(t.type){case"state_update_received":await this.processStateUpdate(t.data);break;default:console.warn("âš ï¸ [GUEST QUEUE] Unknown message type:",t.type)}}async processStateUpdate({state:t,actionAnimations:n,systemAnimations:r}){P("STATE_SYNC","ðŸ“Š [GUEST QUEUE] Processing state update:",{turnPhase:t?.turnPhase,hasActionAnimations:n?.length>0,hasSystemAnimations:r?.length>0,actionAnimationCount:n?.length||0,systemAnimationCount:r?.length||0});const i=this.gameStateManager.hasRecentOptimisticActions(),s=this.gameStateManager.optimisticActions?.length||0;let l=n||[];i&&n&&n.length>0&&(P("ANIMATIONS","â­ï¸ [GUEST QUEUE] SKIPPING action animations - already played optimistically"),l=[]);const u=r||[],f=[...l,...u];P("ANIMATIONS","ðŸ” [GUEST QUEUE] Animation filtering decision:",{hasOptimisticActions:i,optimisticActionsCount:s,incomingActionCount:n?.length||0,incomingSystemCount:r?.length||0,skippedActionCount:(n?.length||0)-l.length,systemAnimationsKept:u.length,totalToPlay:f.length,reasoning:i?"Filtered action animations (optimistic), kept system animations":"Playing all animations (no optimistic actions)"});const d=f.length>0;let p=null;d&&(P("STATE_SYNC","ðŸ”§ [GUEST QUEUE] Setting up render listener for animations..."),p=this.waitForRender()),P("STATE_SYNC","ðŸ“ [GUEST QUEUE] Applying state..."),this.gameStateManager.applyHostState(t),d&&p?(P("STATE_SYNC","â³ [GUEST QUEUE] Waiting for React render before animations..."),await p,P("STATE_SYNC","âœ… [GUEST QUEUE] React render complete"),this.gameStateManager.actionProcessor?.animationManager&&(P("ANIMATIONS","ðŸŽ¬ [GUEST QUEUE] Executing animations from HOST response..."),await this.gameStateManager.actionProcessor.animationManager.executeAnimations(f,"HOST_RESPONSE"),P("ANIMATIONS","âœ… [GUEST QUEUE] Host response animations complete"))):P("STATE_SYNC","âš¡ [GUEST QUEUE] No animations - state applied immediately without render wait"),P("STATE_SYNC","âœ… [GUEST QUEUE] State update processing complete")}async waitForRender(){return this.renderCompletePromise?this.renderCompletePromise:(this.renderCompletePromise=new Promise(t=>{this.renderCompleteResolve=t}),this.renderCompletePromise)}getStatus(){return{queueLength:this.messageQueue.length,isProcessing:this.isProcessing,waitingForRender:!!this.renderCompletePromise}}}const zA=(e,t=3)=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const n=[...e].sort(()=>.5-Math.random()),r=n.slice(0,t),i=n.slice(t);return P("DRONE_SELECTION",`ðŸŽ² Initialized drone selection: ${r.length} in initial selection, ${i.length} in pool`),P("DRONE_SELECTION",`ðŸŽ¯ Initial selection: ${r.map(s=>s.name).join(", ")}`),{droneSelectionTrio:r,droneSelectionPool:i}},kI=(e,t=3)=>{if(!e||e.length===0)return console.warn("âš ï¸ No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return P("DRONE_SELECTION",`ðŸ”„ Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),P("DRONE_SELECTION",`ðŸ“¦ Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class II{constructor(){P("STATE_SYNC","ðŸ”„ GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.optimisticActions=[],this.optimisticActionTimeout=5e3,this.state={appState:"menu",isConnected:!1,opponentId:null,gameMode:"local",testMode:!1,gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=ui.getInstance(this),this.gameFlowManager=null,this.guestQueueService=null,this.p2pIntegrationSetup=!1,P("STATE_SYNC","ðŸ”„ GAMESTATE INITIALIZATION: GameStateManager created"),P("STATE_SYNC","ðŸ“± App State:",this.state.appState),P("STATE_SYNC","ðŸŽ® Game Active:",this.state.gameActive),P("STATE_SYNC","âœ… GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost),n.data.mode==="guest"&&!this.guestQueueService&&(P("STATE_SYNC","ðŸŽ¯ [GUEST QUEUE] Initializing service for guest mode"),this.guestQueueService=new jI(this),this.guestQueueService.initialize(t));break;case"state_update_received":this.state.gameMode==="guest"&&(this.guestQueueService||(console.warn("âš ï¸ [GUEST QUEUE] Service not initialized, applying state directly (fallback)"),this.applyHostState(n.data.state)));break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}applyHostState(t){if(this.state.gameMode!=="guest"){console.warn("âš ï¸ applyHostState should only be called in guest mode");return}P("STATE_SYNC","[GUEST STATE UPDATE] Applying state from host:",{turnPhase:t.turnPhase,currentPlayer:t.currentPlayer,roundNumber:t.roundNumber}),P("STATE_SYNC","[GUEST] Received player2 hand from host:",{handSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId,hasInstanceId:t.player2?.hand?.[0]?.instanceId!==void 0});const n=this.state.gameMode;this.state={...t},this.state.gameMode=n,P("STATE_SYNC","[GUEST] After applying state - player2 hand check:",{handSize:this.state.player2?.hand?.length||0,sampleCard:this.state.player2?.hand?.[0]||null,sampleInstanceId:this.state.player2?.hand?.[0]?.instanceId,hasInstanceId:this.state.player2?.hand?.[0]?.instanceId!==void 0}),this.emit("HOST_STATE_UPDATE",{hostState:t})}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),f=l.some(A=>A.includes("App.jsx")),d=l.some(A=>A.includes("ActionProcessor")),p=l.some(A=>A.includes("PhaseManager")),g=d||p;f&&!g&&(console.error("ðŸš¨ ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error("ðŸ“‹ App.jsx should only call ActionProcessor or PhaseManager methods"),console.error("ðŸ” Stack trace:",s));const y=Object.keys(t),b=`${u.primaryCaller} in ${u.primaryFile}`;P("STATE_SYNC",`ðŸ” GAMESTATE CHANGE [${n}] from ${b}:`,{changedKeys:y,allUpdates:t,architectureViolation:f&&!g});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,b,n),y.forEach(A=>{if(!["player1","player2"].includes(A)){const E=i[A],T=t[A];JSON.stringify(E)!==JSON.stringify(T)&&P("STATE_SYNC",`ðŸ” STATE CHANGE: ${A}`,{before:E,after:T,caller:b,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(g=>g in t),f=i&&i.includes("GameFlowManager"),d=r==="phaseTransition"||t.turnPhase&&f;u&&!(d&&f)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:f,isPhaseTransition:d,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(f=>{i.has(f.id)&&console.error(`Duplicate drone ID detected: ${f.id} in player${l+1}`),i.add(f.id)})})})}validateTurnPhaseTransition(t,n){if(this.state.testMode)return;({null:["deckSelection","preGame"],preGame:["deckSelection","droneSelection"],deckSelection:["droneSelection"],droneSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(P("STATE_SYNC","ðŸ” Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){P("STATE_SYNC","âœ… Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],f=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],d=Object.keys(t).filter(T=>u.includes(T)),p=Object.keys(t).filter(T=>f.includes(T)),g=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const y=d.every(T=>["player1","player2"].includes(T)),b=d.every(T=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(T));if(g&&(y||b))return;const S=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),E=d.length===1&&d[0]==="passInfo";if(!(S&&A&&E)){if(d.length>0&&!r){const T=i?.split(`
`)||[],w=T.find(O=>O.includes(".jsx")&&!O.includes("GameStateManager"))||T[2]||"Unknown";console.warn("âš ï¸ ActionProcessor bypass detected: Critical game state updated directly",{updates:d,turnPhase:n.turnPhase,caller:w.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug("ðŸ› ActionProcessor bypass debug info:",{stackTrace:T.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}p.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];P("STATE_SYNC",`ðŸš¨ PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(d=>{const p=l?l[d]:void 0,g=u?u[d]:void 0;if(JSON.stringify(p)!==JSON.stringify(g))if(d==="energy"||d==="deploymentBudget"||d==="initialDeploymentBudget")P("STATE_SYNC",`  ðŸ’° ${d}: ${p} â†’ ${g}`),(g==null||isNaN(g))&&console.error(`  ðŸš¨ WARNING: ${d} became ${g}!`);else if(d==="activeDronePool"){const y=Array.isArray(p)?p.length:"undefined",b=Array.isArray(g)?g.length:"undefined";let S,A;if(Array.isArray(p))try{S=p.map(E=>E?.name||"UNNAMED").join(",")}catch(E){S=`ERROR_MAPPING_OLD: ${E.message}`}else S="undefined";if(Array.isArray(g))try{A=g.map(E=>E?.name||"UNNAMED").join(",")}catch(E){A=`ERROR_MAPPING_NEW: ${E.message}`}else A="undefined";if(P("STATE_SYNC",`  ðŸ¤– ${d}: [${y} drones] â†’ [${b} drones]`),P("STATE_SYNC",`    Old drones: ${S}`),P("STATE_SYNC",`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(P("STATE_SYNC","    ðŸ” Debug newValue:",g),Array.isArray(g)&&g.length>0&&P("STATE_SYNC","    ðŸ” First drone object:",g[0])),y!==b||S!==A){const E=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";P("STATE_SYNC",`    ðŸ“ Update source:
${E}`)}}else if(d==="hand"||d==="deck"){const y=Array.isArray(p)?p.length:"undefined",b=Array.isArray(g)?g.length:"undefined";P("STATE_SYNC",`  ðŸƒ ${d}: [${y} cards] â†’ [${b} cards]`)}else if(d==="dronesOnBoard"){const y=p?`L1:${p.lane1?.length||0} L2:${p.lane2?.length||0} L3:${p.lane3?.length||0}`:"undefined",b=g?`L1:${g.lane1?.length||0} L2:${g.lane2?.length||0} L3:${g.lane3?.length||0}`:"undefined";P("STATE_SYNC",`  ðŸ›¸ ${d}: ${y} â†’ ${b}`)}else P("STATE_SYNC",`  ðŸ“ ${d}:`,{before:p,after:g})}),P("STATE_SYNC",`ðŸ” Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],f=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],d=l.functions.filter(g=>u.some(y=>g.toLowerCase().includes(y.toLowerCase()))),p=l.functions.filter(g=>f.some(y=>g.toLowerCase().includes(y.toLowerCase())));d.length>0&&p.length===0&&(console.warn("ðŸš¨ Inappropriate function updating game state:",{inappropriateFunctions:d,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI â†’ ActionProcessor â†’ gameLogic.js â†’ GameStateManager"}),console.debug("ðŸ” Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:d,appropriateFound:p,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const f of r){const d=u[f];if(!d)continue;const p=Array.isArray(d)?d:[d];let g=!1;for(const y of p)(y==="GameFlowManager"&&i||y==="SequentialPhaseManager"&&s||y==="ActionProcessor"&&l)&&(g=!0);if(!g){const y=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(`ðŸš¨ OWNERSHIP VIOLATION: ${y} cannot update '${f}'`,{updateKey:f,currentManager:y,allowedOwners:p,updates:r,recommendation:`Only ${p.join(" or ")} should update '${f}'`})}}}reset(){P("STATE_SYNC","ðŸ”„ GAME RESET: Resetting game state and clearing caches");const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:ke.initialPlayerState("Player 1",pl),player2:ke.initialPlayerState("Player 2",pl),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),ln.reset(),this.actionProcessor.clearQueue(),P("STATE_SYNC","âœ… GAME RESET: State, cache, and queue cleared")}startGame(t="local",n={},r={}){P("STATE_SYNC","ðŸŽ® GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"deckSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...ke.initialPlayerState(n.name||"Player 1",n.decklist||pl),...n},player2:{...ke.initialPlayerState(r.name||"Player 2",r.decklist||pl),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{},droneSelectionPool:[],droneSelectionTrio:[]};this.setState(i,"GAME_STARTED"),P("STATE_SYNC","ðŸ‘¤ Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),P("STATE_SYNC","ðŸ‘¤ Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),P("STATE_SYNC","âœ… GAME START: Game session initialized successfully")}endGame(){P("STATE_SYNC","ðŸŽ® GAME END: Ending current game session and clearing caches"),this.setState({appState:"menu",gameActive:!1,testMode:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),ln.reset(),this.actionProcessor.clearQueue(),this.gameFlowManager&&this.gameFlowManager.reset(),P("STATE_SYNC","âœ… GAME END: Returned to menu state, all singletons cleared")}initializeTestMode(t){return P("STATE_SYNC","ðŸ§ª TEST MODE: Initializing test game from GameStateManager"),Tr(()=>Promise.resolve().then(()=>CF),void 0).then(n=>{n.initializeTestGame(t,this)?P("STATE_SYNC","âœ… TEST MODE: Test game initialized successfully"):P("STATE_SYNC","âŒ TEST MODE: Test game initialization failed")}).catch(n=>{console.error("âŒ TEST MODE: Error importing testGameInitializer:",n)}),!0}setMultiplayerMode(t,n=!1){this.setState({gameMode:t},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&P("STATE_SYNC","ðŸ” [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}trackOptimisticAction(t,n){const r={type:t,payload:n,timestamp:Date.now(),id:`${t}-${Date.now()}-${Math.random()}`};this.optimisticActions.push(r),P("STATE_SYNC","ðŸ”® [OPTIMISTIC] Tracked action:",t,"Total tracked:",this.optimisticActions.length),setTimeout(()=>{this.optimisticActions=this.optimisticActions.filter(i=>i.id!==r.id),P("STATE_SYNC","ðŸ§¹ [OPTIMISTIC] Cleared old action:",t,"Remaining:",this.optimisticActions.length)},this.optimisticActionTimeout)}hasRecentOptimisticActions(){return this.optimisticActions.length>0}clearOptimisticActions(){P("STATE_SYNC","ðŸ§¹ [OPTIMISTIC] Clearing all actions"),this.optimisticActions=[]}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Ge=new II;class RI{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return LI(t).buffer}}function LI(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function Iw(e){return new $I(e).unpack()}function Rw(e){const t=new BI,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class $I{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class BI{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,f=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(f)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new RI,this._textEncoder=new TextEncoder}}let Lw=!0,$w=!0;function au(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function vo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const f=d=>{const p=n(d);p&&(u.handleEvent?u.handleEvent(p):u(p))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,f),i.apply(this,[l,f])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const f=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,f])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function UI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Lw=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function zI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):($w=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Bw(){if(typeof window=="object"){if(Lw)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function xv(e,t){$w&&console.warn(e+" is deprecated, please use "+t+" instead.")}function HI(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(au(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(au(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(au(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=au(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function HA(e){return Object.prototype.toString.call(e)==="[object Object]"}function Uw(e){return HA(e)?Object.keys(e).reduce(function(t,n){const r=HA(e[n]),i=r?Uw(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function f0(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?f0(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{f0(e,e.get(i),n)})}))}function GA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&f0(e,u,i)})}),i}const YA=Bw;function zw(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const f={};return Object.keys(u).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const p=typeof u[d]=="object"?u[d]:{ideal:u[d]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const g=function(y,b){return y?y+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(p.ideal!==void 0){f.optional=f.optional||[];let y={};typeof p.ideal=="number"?(y[g("min",d)]=p.ideal,f.optional.push(y),y={},y[g("max",d)]=p.ideal,f.optional.push(y)):(y[g("",d)]=p.ideal,f.optional.push(y))}p.exact!==void 0&&typeof p.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[g("",d)]=p.exact):["min","max"].forEach(y=>{p[y]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[g(y,d)]=p[y])})}),u.advanced&&(f.optional=(f.optional||[]).concat(u.advanced)),f},i=function(u,f){if(t.version>=61)return f(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const d=function(p,g,y){g in p&&!(y in p)&&(p[y]=p[g],delete p[g])};u=JSON.parse(JSON.stringify(u)),d(u.audio,"autoGainControl","googAutoGainControl"),d(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let d=u.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const p=t.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete u.video.facingMode;let g;if(d.exact==="environment"||d.ideal==="environment"?g=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(g=["front"]),g)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let b=y.find(S=>g.some(A=>S.label.toLowerCase().includes(A)));return!b&&y.length&&g.includes("back")&&(b=y[y.length-1]),b&&(u.video.deviceId=d.exact?{exact:b.deviceId}:{ideal:b.deviceId}),u.video=r(u.video),YA("chrome: "+JSON.stringify(u)),f(u)})}u.video=r(u.video)}return YA("chrome: "+JSON.stringify(u)),f(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,f,d){i(u,p=>{n.webkitGetUserMedia(p,f,g=>{d&&d(s(g))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(f){return i(f,d=>u(d).then(p=>{if(d.audio&&!p.getAudioTracks().length||d.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(s(p))))}}}function Hw(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Gw(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else vo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Yw(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,f){let d=i.apply(this,arguments);return d||(d=t(this,u),this._senders.push(d)),d};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const f=this._senders.indexOf(u);f!==-1&&this._senders.splice(f,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(f=>f.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function qw(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>GA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),vo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>GA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Fw(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(f)===-1&&this._shimmedLocalStreams[u.id].push(f):this._shimmedLocalStreams[u.id]=[u,f],f};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const f=this.getSenders().filter(d=>u.indexOf(d)===-1);this._shimmedLocalStreams[l.id]=[l].concat(f)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const f=this._shimmedLocalStreams[u].indexOf(l);f!==-1&&this._shimmedLocalStreams[u].splice(f,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function Vw(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Fw(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=n.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(g=>this._reverseStreams[g.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(g=>{if(this.getSenders().find(b=>b.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const g=new e.MediaStream(p.getTracks());this._streams[p.id]=g,this._reverseStreams[g.id]=p,p=g}r.apply(this,[p])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(A=>A===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[g.id];if(S)S.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([p]);this._streams[g.id]=A,this._reverseStreams[A.id]=g,this.addStream(A)}return this.getSenders().find(A=>A.track===p)};function s(d,p){let g=p.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const b=d._reverseStreams[y],S=d._streams[b.id];g=g.replace(new RegExp(S.id,"g"),b.id)}),new RTCSessionDescription({type:p.type,sdp:g})}function l(d,p){let g=p.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const b=d._reverseStreams[y],S=d._streams[b.id];g=g.replace(new RegExp(b.id,"g"),S.id)}),new RTCSessionDescription({type:p.type,sdp:g})}["createOffer","createAnswer"].forEach(function(d){const p=e.RTCPeerConnection.prototype[d],g={[d](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[S=>{const A=s(this,S);y[0].apply(null,[A])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):p.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[d]=g[d]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const d=f.get.apply(this);return d.type===""?d:s(this,d)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(A=>p.track===A)&&(y=this._streams[b])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function p0(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function Kw(e,t){vo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const qA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Kw,shimAddTrackRemoveTrack:Vw,shimAddTrackRemoveTrackWithNative:Fw,shimGetSendersWithDtmf:Yw,shimGetUserMedia:zw,shimMediaStream:Hw,shimOnTrack:Gw,shimPeerConnection:p0,shimSenderReceiverGetStats:qw},Symbol.toStringTag,{value:"Module"}));function Ww(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){xv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,f){u in l&&!(f in l)&&(l[f]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function GI(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function Xw(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function h0(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(f=>{if(t.version<53&&!l)try{f.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;f.forEach((p,g)=>{f.set(g,Object.assign({},p,{type:n[p.type]||p.type}))})}return f}).then(l,u)}}function Qw(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Zw(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),vo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Jw(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){xv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function eO(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function tO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function nO(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function rO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function aO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const FA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:tO,shimCreateAnswer:aO,shimCreateOffer:rO,shimGetDisplayMedia:GI,shimGetParameters:nO,shimGetUserMedia:Ww,shimOnTrack:Xw,shimPeerConnection:h0,shimRTCDataChannel:eO,shimReceiverGetStats:Zw,shimRemoveStream:Jw,shimSenderGetStats:Qw},Symbol.toStringTag,{value:"Module"}));function iO(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function sO(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function oO(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(d,p){const g=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[g]);return p?(y.then(d,p),Promise.resolve()):y},t.createAnswer=function(d,p){const g=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[g]);return p?(y.then(d,p),Promise.resolve()):y};let u=function(f,d,p){const g=i.apply(this,[f]);return p?(g.then(d,p),Promise.resolve()):g};t.setLocalDescription=u,u=function(f,d,p){const g=s.apply(this,[f]);return p?(g.then(d,p),Promise.resolve()):g},t.setRemoteDescription=u,u=function(f,d,p){const g=l.apply(this,[f]);return p?(g.then(d,p),Promise.resolve()):g},t.addIceCandidate=u}function lO(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(cO(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function cO(e){return e&&e.video!==void 0?Object.assign({},e,{video:Uw(e.video)}):e}function uO(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(xv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function dO(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fO(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function pO(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const VA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:pO,shimCallbacksAPI:oO,shimConstraints:cO,shimCreateOfferLegacy:fO,shimGetUserMedia:lO,shimLocalStreamsAPI:iO,shimRTCIceServerUrls:uO,shimRemoteStreamsAPI:sO,shimTrackEventTransceiver:dO},Symbol.toStringTag,{value:"Module"}));var Pg={exports:{}},KA;function YI(){return KA||(KA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const f=s[u],d=t.matchPrefix(n,"a=rtpmap:"+f+" ")[0];if(d){const p=t.parseRtpMap(d),g=t.matchPrefix(n,"a=fmtp:"+f+" ");switch(p.parameters=g.length?t.parseFmtp(g[0]):{},p.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+f+" ").map(t.parseRtcpFb),r.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(p.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(f=>{u.rtcpFeedback.find(p=>p.type===f.type&&p.parameter===f.parameter)||u.rtcpFeedback.push(f)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),f=u.length>0&&u[0].ssrc;let d;const p=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));p.length>0&&p[0].length>1&&p[0][0]===f&&(d=p[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let b={ssrc:f,codecPayloadType:parseInt(y.parameters.apt,10)};f&&d&&(b.rtx={ssrc:d}),r.push(b),s&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:f,mechanism:l?"red+ulpfec":"red"},r.push(b))}}),r.length===0&&f&&r.push({ssrc:f});let g=t.matchPrefix(n,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substring(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substring(5),10)*1e3*.95-2e3*8:g=void 0,r.forEach(y=>{y.maxBitrate=g})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const f=u[0].substring(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(Pg)),Pg.exports}var hO=YI();const yl=va(hO),qI=ow({__proto__:null,default:yl},[hO]);function Df(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=yl.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,vo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function m0(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||vo(e,"icecandidate",t=>{if(t.candidate){const n=yl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function _f(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const f=yl.splitSections(u.sdp);return f.shift(),f.some(d=>{const p=yl.parseMLine(d);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},r=function(u){const f=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const d=parseInt(f[1],10);return d!==d?-1:d},i=function(u){let f=65536;return t.browser==="firefox"&&(t.version<57?u===-1?f=16384:f=2147483637:t.version<60?f=t.version===57?65535:65536:f=2147483637),f},s=function(u,f){let d=65536;t.browser==="firefox"&&t.version===57&&(d=65535);const p=yl.matchPrefix(u.sdp,"a=max-message-size:");return p.length>0?d=parseInt(p[0].substring(19),10):t.browser==="firefox"&&f!==-1&&(d=2147483637),d},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const f=r(arguments[0]),d=i(f),p=s(arguments[0],f);let g;d===0&&p===0?g=Number.POSITIVE_INFINITY:d===0||p===0?g=Math.max(d,p):g=Math.min(d,p);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return g}}),this._sctp=y}return l.apply(this,arguments)}}function Mf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],f=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&f>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},vo(e,"datachannel",r=>(t(r.channel,r.target),r))}function g0(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function y0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function jf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function kf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const FI=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:y0,shimAddIceCandidateNullOrEmpty:jf,shimConnectionState:g0,shimMaxMessageSize:_f,shimParameterlessSetLocalDescription:kf,shimRTCIceCandidate:Df,shimRTCIceCandidateRelayProtocol:m0,shimSendThrowTypeError:Mf},Symbol.toStringTag,{value:"Module"}));function VI({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Bw,r=HI(e),i={browserDetails:r,commonShim:FI,extractVersion:au,disableLog:UI,disableWarnings:zI,sdp:qI};switch(r.browser){case"chrome":if(!qA||!p0||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=qA,jf(e,r),kf(e),zw(e,r),Hw(e),p0(e,r),Gw(e),Vw(e,r),Yw(e),qw(e),Kw(e,r),Df(e),m0(e),g0(e),_f(e,r),Mf(e),y0(e,r);break;case"firefox":if(!FA||!h0||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=FA,jf(e,r),kf(e),Ww(e,r),h0(e,r),Xw(e),Jw(e),Qw(e),Zw(e),eO(e),tO(e),nO(e),rO(e),aO(e),Df(e),g0(e),_f(e,r),Mf(e);break;case"safari":if(!VA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=VA,jf(e,r),kf(e),uO(e),fO(e),oO(e),iO(e),sO(e),dO(e),lO(e),pO(e),Df(e),m0(e),_f(e,r),Mf(e),y0(e,r);break;default:n("Unsupported browser!");break}return i}const WA=VI({window:typeof window>"u"?void 0:window});function bo(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class mO{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),f=t.slice(l,u),d={__peerData:this._dataCount,n:s,data:f,total:i};n.push(d),l=u,s++}return this._dataCount++,n}}}function KI(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const wg=WA.default||WA,Kc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return wg.browserDetails.browser}getVersion(){return wg.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=wg.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},WI=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),gO=()=>Math.random().toString(36).slice(2),XA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class XI extends mO{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=XA,this.browser=Kc.getBrowser(),this.browserVersion=Kc.getVersion(),this.pack=Rw,this.unpack=Iw,this.supports=(function(){const n={browser:Kc.isBrowserSupported(),webRTC:Kc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(XA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Kc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=WI,this.randomToken=gO}}const ar=new XI,QI="PeerJS: ";class ZI{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[QI,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var we=new ZI,Sv={},JI=Object.prototype.hasOwnProperty,Xn="~";function hu(){}Object.create&&(hu.prototype=Object.create(null),new hu().__proto__||(Xn=!1));function eR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function yO(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new eR(n,r||e,i),l=Xn?Xn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function If(e,t){--e._eventsCount===0?e._events=new hu:delete e._events[t]}function Hn(){this._events=new hu,this._eventsCount=0}Hn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)JI.call(n,r)&&t.push(Xn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Hn.prototype.listeners=function(t){var n=Xn?Xn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};Hn.prototype.listenerCount=function(t){var n=Xn?Xn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Hn.prototype.emit=function(t,n,r,i,s,l){var u=Xn?Xn+t:t;if(!this._events[u])return!1;var f=this._events[u],d=arguments.length,p,g;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,n),!0;case 3:return f.fn.call(f.context,n,r),!0;case 4:return f.fn.call(f.context,n,r,i),!0;case 5:return f.fn.call(f.context,n,r,i,s),!0;case 6:return f.fn.call(f.context,n,r,i,s,l),!0}for(g=1,p=new Array(d-1);g<d;g++)p[g-1]=arguments[g];f.fn.apply(f.context,p)}else{var y=f.length,b;for(g=0;g<y;g++)switch(f[g].once&&this.removeListener(t,f[g].fn,void 0,!0),d){case 1:f[g].fn.call(f[g].context);break;case 2:f[g].fn.call(f[g].context,n);break;case 3:f[g].fn.call(f[g].context,n,r);break;case 4:f[g].fn.call(f[g].context,n,r,i);break;default:if(!p)for(b=1,p=new Array(d-1);b<d;b++)p[b-1]=arguments[b];f[g].fn.apply(f[g].context,p)}}return!0};Hn.prototype.on=function(t,n,r){return yO(this,t,n,r,!1)};Hn.prototype.once=function(t,n,r){return yO(this,t,n,r,!0)};Hn.prototype.removeListener=function(t,n,r,i){var s=Xn?Xn+t:t;if(!this._events[s])return this;if(!n)return If(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&If(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&f.push(l[u]);f.length?this._events[s]=f.length===1?f[0]:f:If(this,s)}return this};Hn.prototype.removeAllListeners=function(t){var n;return t?(n=Xn?Xn+t:t,this._events[n]&&If(this,n)):(this._events=new hu,this._eventsCount=0),this};Hn.prototype.off=Hn.prototype.removeListener;Hn.prototype.addListener=Hn.prototype.on;Hn.prefixed=Xn;Hn.EventEmitter=Hn;Sv=Hn;var xo={};bo(xo,"ConnectionType",()=>as);bo(xo,"PeerErrorType",()=>Jt);bo(xo,"BaseConnectionErrorType",()=>v0);bo(xo,"DataConnectionErrorType",()=>Av);bo(xo,"SerializationType",()=>Np);bo(xo,"SocketEventType",()=>rs);bo(xo,"ServerMessageType",()=>Bn);var as=(function(e){return e.Data="data",e.Media="media",e})({}),Jt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),v0=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Av=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Np=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),rs=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Bn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const vO="1.5.5";class tR extends Sv.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+vO),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),we.log("Server message received:",s)}catch{we.log("Invalid server message",i.data);return}this.emit(rs.Message,s)},this._socket.onclose=i=>{this._disconnected||(we.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(rs.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),we.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){we.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Bn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(rs.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class bO{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===as.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){we.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;we.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(we.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:Bn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":we.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(v0.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":we.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(v0.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":we.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},we.log("Listening for data channel"),t.ondatachannel=l=>{we.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},we.log("Listening for remote stream"),t.ontrack=l=>{we.log("Received remote stream");const u=l.streams[0],f=s.getConnection(n,r);if(f.type===as.Media){const d=f;this._addStreamToMediaConnection(u,d)}}}cleanup(){we.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);we.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),we.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===as.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Bn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Jt.WebRTC,i),we.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Jt.WebRTC,r),we.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();we.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),we.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Bn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Jt.WebRTC,i),we.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Jt.WebRTC,r),we.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;we.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),we.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Jt.WebRTC,l),we.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){we.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),we.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Jt.WebRTC,n),we.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(we.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return we.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){we.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class xO extends Sv.EventEmitter{emitError(t,n){we.error("Error:",n),this.emit("error",new nR(`${t}`,n))}}class nR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class SO extends xO{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class zf extends SO{static#e=this.ID_PREFIX="mc_";get type(){return as.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||zf.ID_PREFIX+ar.randomToken(),this._negotiator=new bO(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){we.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Bn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Bn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:we.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){we.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class rR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",vO),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){we.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==ar.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===ar.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw we.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Hf extends SO{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return as.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Hf.ID_PREFIX+gO(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new bO(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{we.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Av.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Bn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Bn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:we.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Cv extends Hf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Hf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return we.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Og extends Cv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new mO,this.serialization=Np.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=Iw(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=KI(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=Rw(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);we.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class aR extends Cv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Np.None}}class iR extends Cv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=ar.chunkedMTU){this.emitError(Av.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Np.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Ev extends xO{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:aR,json:iR,binary:Og,"binary-utf8":Og,default:Og},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:ar.CLOUD_HOST,port:ar.CLOUD_PORT,path:"/",key:Ev.DEFAULT_KEY,token:ar.randomToken(),config:ar.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==ar.CLOUD_HOST?this._options.secure=ar.isSecure():this._options.host==ar.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&we.setLogFunction(this._options.logFunction),we.logLevel=this._options.debug||0,this._api=new rR(n),this._socket=this._createServerConnection(),!ar.supports.audioVideo&&!ar.supports.data){this._delayedAbort(Jt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!ar.validateId(r)){this._delayedAbort(Jt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Jt.ServerError,i))}_createServerConnection(){const t=new tR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(rs.Message,n=>{this._handleMessage(n)}),t.on(rs.Error,n=>{this._abort(Jt.SocketError,n)}),t.on(rs.Disconnected,()=>{this.disconnected||(this.emitError(Jt.Network,"Lost connection to server."),this.disconnect())}),t.on(rs.Close,()=>{this.disconnected||this._abort(Jt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case Bn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Bn.Error:this._abort(Jt.ServerError,r.msg);break;case Bn.IdTaken:this._abort(Jt.UnavailableID,`ID "${this.id}" is taken`);break;case Bn.InvalidKey:this._abort(Jt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Bn.Leave:we.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Bn.Expire:this.emitError(Jt.PeerUnavailable,`Could not connect to peer ${i}`);break;case Bn.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),we.warn(`Offer received for existing Connection ID:${s}`)),r.type===as.Media){const f=new zf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=f,this._addConnection(i,l),this.emit("call",f)}else if(r.type===as.Data){const f=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=f,this._addConnection(i,l),this.emit("connection",f)}else{we.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const f of u)l.handleMessage(f);break}default:{if(!r){we.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):we.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Jt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Jt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){we.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new zf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){we.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){we.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(we.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;we.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)we.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)we.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Jt.ServerError,n))}}var QA=Ev;class sR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new QA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{P("MULTIPLAYER","Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{P("MULTIPLAYER","Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new QA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{P("MULTIPLAYER","Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{P("MULTIPLAYER","Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),P("MULTIPLAYER","P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),P("MULTIPLAYER","P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(P("MULTIPLAYER","Received P2P data:",t),t.type){case"STATE_UPDATE":P("MULTIPLAYER","[P2P GUEST] Received state update with animations:",{hasActionAnimations:t.actionAnimations&&t.actionAnimations.length>0,hasSystemAnimations:t.systemAnimations&&t.systemAnimations.length>0,actionAnimationCount:t.actionAnimations?.length||0,systemAnimationCount:t.systemAnimations?.length||0}),this.emit("state_update_received",{state:t.state,actionAnimations:t.actionAnimations||[],systemAnimations:t.systemAnimations||[]});break;case"GUEST_ACTION":this.actionProcessor?await this.actionProcessor.processGuestAction(t.action):console.error("ActionProcessor not set - cannot process guest action");break;case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}broadcastState(t,n=[],r=[]){if(!this.isHost){console.warn("Only host can broadcast state");return}if(this.connection&&this.isConnected)try{P("MULTIPLAYER","[P2P HOST] Broadcasting state - checking player2 hand:",{player2HandSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId}),this.connection.send({type:"STATE_UPDATE",state:t,actionAnimations:n,systemAnimations:r,timestamp:Date.now()}),P("MULTIPLAYER","[P2P HOST] Broadcasted state update to guest",{hasAnimations:n.length+r.length>0,actionAnimationCount:n.length,systemAnimationCount:r.length})}catch(i){console.error("Failed to broadcast state:",i),this.emit("send_error",{error:i.message})}else console.warn("Cannot broadcast state - no connection available")}sendActionToHost(t,n){if(this.isHost){console.warn("Host should not send actions to itself");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"GUEST_ACTION",action:{type:t,payload:n},timestamp:Date.now()}),P("MULTIPLAYER","[P2P GUEST] Sent action to host:",t)}catch(r){console.error("Failed to send action to host:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot send action - no connection to host")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(P("MULTIPLAYER","Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const Kn=new sR,b0=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},oR=e=>({preGame:"Pre-Game Setup",gameInitializing:"Initialising Game",deckSelection:"Deck Selection",droneSelection:"Drone Selection",placement:"Placement Phase",determineFirstPlayer:"Determining First Player",energyReset:"Energy Reset",mandatoryDiscard:"Mandatory Discard",optionalDiscard:"Optional Discard",initialDraw:"Drawing Cards",draw:"Drawing Cards",allocateShields:"Shield Allocation",mandatoryDroneRemoval:"Mandatory Drone Removal",deployment:"Deployment Phase",deploymentComplete:"Deployment Complete",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,lR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],cR=["deployment","action"],uR=e=>lR.includes(e),ZA=e=>cR.includes(e),Si=()=>{const[e,t]=C.useState(Ge.getState()),[n,r]=C.useState(Kn.getStatus());C.useEffect(()=>{Ge.setupP2PIntegration(Kn)},[]),C.useEffect(()=>Ge.subscribe(Y=>{Y.type!=="render_complete"&&t(Ge.getState())}),[]),C.useEffect(()=>Kn.subscribe(Y=>{r(Kn.getStatus())}),[]);const i=C.useCallback(()=>Ge.isMyTurn(),[e.currentPlayer,e.gameMode]),s=C.useCallback(()=>Ge.getLocalPlayerId(),[e.gameMode]),l=C.useCallback(()=>Ge.getOpponentPlayerId(),[e.gameMode]),u=C.useCallback(()=>e.gameMode!=="local",[e.gameMode]),f=C.useCallback(()=>u()&&!i(),[u,i]),d=C.useCallback(()=>Ge.getLocalPlayerState(),[e.gameMode]),p=C.useCallback(()=>Ge.getOpponentPlayerState(),[e.gameMode]),g=C.useCallback(I=>Ge.isLocalPlayer(I),[e.gameMode]),y=C.useCallback(()=>Ge.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),b=C.useCallback(()=>{const I=Ge.getOpponentPlacedSections();return e.turnPhase==="placement"&&I.some(Y=>Y!==null)&&console.error("ðŸ”¥ CRITICAL - getOpponentPlacedSections returning:",I,"from gameState:",e.opponentPlacedSections),I},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=C.useCallback((I,Y)=>{Ge.updatePlayers(I,Y)},[]),A=C.useCallback((I,Y)=>{Ge.updatePlayerState(I,Y)},[]),E=C.useCallback((I,Y)=>{Ge.setPlayerStates(I,Y)},[]),T=C.useCallback(I=>{Ge.setFirstPasserOfPreviousRound(I)},[]),w=C.useCallback(I=>{Ge.setFirstPlayerOverride(I)},[]),O=C.useCallback(I=>{Ge.setPassInfo(I)},[]),_=C.useCallback(I=>{Ge.updatePassInfo(I)},[]),k=C.useCallback((I,Y,Q)=>{Ge.addLogEntry(I,Y,Q)},[]),M=C.useCallback(()=>{Ge.reset()},[]),j=C.useCallback(()=>{Ge.endGame()},[]),U=C.useCallback(I=>{Ge.setWinner(I)},[]),q=C.useCallback(async(I,Y)=>await Ge.processAction(I,Y),[]),L=C.useCallback(()=>Ge.isActionInProgress(),[]),$=C.useCallback(()=>Ge.getActionQueueLength(),[]),G=C.useCallback(()=>{Ge.clearActionQueue()},[]),Z=C.useCallback(()=>uR(e.turnPhase),[e.turnPhase]),X=C.useCallback(()=>ZA(e.turnPhase),[e.turnPhase]),re=C.useCallback(async(I,Y)=>{const Q=e.turnPhase,ve=ZA(Q);return P("STATE_SYNC",`ðŸ”€ useGameState.routeAction: ${I} in phase ${Q} (${ve?"sequential":"simultaneous"})`),ve?await q(I,Y):(console.warn(`âš ï¸ Simultaneous phase action ${I} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${I} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:Q,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,q]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:f,getLocalPlayerState:d,getOpponentPlayerState:p,isLocalPlayer:g,getLocalPlacedSections:y,getOpponentPlacedSections:b,updatePlayers:S,updatePlayerState:A,setPlayerStates:E,setFirstPasserOfPreviousRound:T,setFirstPlayerOverride:w,setPassInfo:O,updatePassInfo:_,addLogEntry:k,resetGame:M,endGame:j,setWinner:U,processAction:q,isActionInProgress:L,getActionQueueLength:$,clearActionQueue:G,isSimultaneousPhase:Z,isSequentialPhase:X,routeAction:re,gameStateManager:Ge,p2pManager:Kn}},JA=()=>{const e=["bridge","powerCell","droneControlHub"];return P("PLACEMENT",`ðŸš¢ Initialized ship placement: ${e.length} sections available`),P("PLACEMENT",`ðŸŽ¯ Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class uu{constructor(){if(uu.instance)return uu.instance;uu.instance=this,this.PRE_GAME_PHASES=["deckSelection","droneSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,P("PHASE_TRANSITIONS","ðŸŽ® GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){P("PHASE_TRANSITIONS","ðŸ”§ GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=ln.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&(i.initialize(u,l,s,n,t),P("PHASE_TRANSITIONS","ðŸ”„ GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,P("PHASE_TRANSITIONS","ðŸ”§ GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){P("PHASE_TRANSITIONS",`ðŸ”” GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="deckSelection"){if(this.gameStateManager.get("gameMode")==="guest"){P("PHASE_TRANSITIONS","ðŸ”’ Guest mode: Skipping game flow logic (waiting for host state)");return}P("PHASE_TRANSITIONS",`ðŸš€ GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let r={};t==="deckSelection"&&(P("PHASE_TRANSITIONS","ðŸŽ² GameFlowManager initializing deck selection phase data"),r={...JA()}),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(r).length>0&&this.gameStateManager.setState(r,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(this.gameStateManager.get("gameMode")==="guest")return;if(P("PHASE_TRANSITIONS",`âœ… GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const s=this.actionProcessor.applyPhaseCommitments(t);if(t==="deckSelection"){P("PHASE_TRANSITIONS","ðŸŽ² GameFlowManager: Initializing drone selection data for both players after deck selection");const u=this.gameStateManager.get("commitments")?.deckSelection;if(P("DRONE_SELECTION","Deck commitments:",{hasCommitments:!!u,player1HasDrones:!!u?.player1?.drones,player2HasDrones:!!u?.player2?.drones,player1DroneCount:u?.player1?.drones?.length,player2DroneCount:u?.player2?.drones?.length,player1Drones:u?.player1?.drones,player2Drones:u?.player2?.drones}),u){if(u.player1?.drones){const f=this.extractDronesFromDeck(u.player1.drones),d=zA(f,2);s.player1DroneSelectionTrio=d.droneSelectionTrio,s.player1DroneSelectionPool=d.droneSelectionPool,P("PHASE_TRANSITIONS",`ðŸŽ² Player1 deck has ${f.length} drones for selection`),P("DRONE_SELECTION","Created player1DroneSelectionTrio:",d.droneSelectionTrio.map(p=>p.name))}else console.warn("âš ï¸ No drones found in player1 deck commitment");if(u.player2?.drones){const f=this.extractDronesFromDeck(u.player2.drones),d=zA(f,2);s.player2DroneSelectionTrio=d.droneSelectionTrio,s.player2DroneSelectionPool=d.droneSelectionPool,P("PHASE_TRANSITIONS",`ðŸŽ² Player2 deck has ${f.length} drones for selection`),P("DRONE_SELECTION","Created player2DroneSelectionTrio:",d.droneSelectionTrio.map(p=>p.name))}else console.warn("âš ï¸ No drones found in player2 deck commitment");P("DRONE_SELECTION","stateUpdates keys:",Object.keys(s))}else console.error("âŒ No deck commitments found - cannot initialize drone selection")}Object.keys(s).length>0&&(this.gameStateManager.setState(s,"COMMITMENT_APPLICATION",`${t}_completion`),P("PHASE_TRANSITIONS",`ðŸ“‹ GameFlowManager: Applied ${t} commitments to game state`))}const i=this.getNextPhase(t);i?this.isSequentialPhase(i)?(P("PHASE_TRANSITIONS",`ðŸ”„ GameFlowManager: Handover to sequential phase '${i}'`),this.initiateSequentialPhase(i)):(P("PHASE_TRANSITIONS",`ðŸ”„ GameFlowManager: Continuing with simultaneous phase '${i}'`),await this.transitionToPhase(i)):P("PHASE_TRANSITIONS","ðŸŽ¯ GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){t.gameMode==="guest"||n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(P("PHASE_TRANSITIONS",`ðŸŽ¯ GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(t.gameMode==="guest"||n!=="COMMITMENT_UPDATE"||!t.commitments)return;P("PHASE_TRANSITIONS","ðŸ” checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){P("PHASE_TRANSITIONS","ðŸ” Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){P("PHASE_TRANSITIONS","ðŸ” Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;P("PHASE_TRANSITIONS","ðŸ” Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:s}),s&&(P("PHASE_TRANSITIONS",`ðŸŽ¯ GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.emit("bothPlayersComplete",{phase:r,commitments:i}),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){P("PHASE_TRANSITIONS",`âœ… GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t,n){P("PHASE_TRANSITIONS",`ðŸ¤– GameFlowManager: Processing automatic phase '${t}' from '${n}'`),this.isProcessingAutomaticPhase=!0;let r=null;try{t==="gameInitializing"?r=await this.processGameInitializingPhase(n):t==="energyReset"?r=await this.processAutomaticEnergyResetPhase(n):t==="draw"?r=await this.processAutomaticDrawPhase(n):t==="determineFirstPlayer"?r=await this.processAutomaticFirstPlayerPhase(n):console.warn(`âš ï¸ No handler for automatic phase: ${t}`),r?(P("PHASE_TRANSITIONS",`ðŸ”„ GameFlowManager: Transitioning from automatic phase '${t}' to '${r}'`),await this.transitionToPhase(r)):console.warn(`âš ï¸ No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(t){P("PHASE_TRANSITIONS","ðŸƒ GameFlowManager: Processing automatic draw phase");try{const{performAutomaticDraw:n}=await Tr(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-TVR6gTqR.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error("âŒ GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),P("PHASE_TRANSITIONS","âœ… Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return P("PHASE_TRANSITIONS","âœ… Automatic draw completed, returning next phase:",s),s}catch(n){console.error("âŒ Error during automatic draw phase:",n)}}async processAutomaticFirstPlayerPhase(t){P("PHASE_TRANSITIONS","ðŸŽ¯ GameFlowManager: Processing automatic first player determination phase");try{const n=await this.actionProcessor.processFirstPlayerDetermination();if(P("PHASE_TRANSITIONS","ðŸŽ¯ First player determination completed:",n),this.animationManager&&n.stateUpdates){const i=this.gameStateManager.getLocalPlayerId(),f={animationName:"PHASE_ANNOUNCEMENT",payload:{phaseText:n.stateUpdates.firstPlayerOfRound===i?"YOU ARE FIRST PLAYER":"OPPONENT IS FIRST PLAYER",phaseName:"firstPlayerResult",timestamp:Date.now()}};await this.actionProcessor.executeAndCaptureAnimations([f],!0),P("PHASE_TRANSITIONS","ðŸŽ¬ [FIRST PLAYER] Second announcement complete")}this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const r=this.getNextPhase("determineFirstPlayer");return P("PHASE_TRANSITIONS","âœ… Automatic first player determination completed, returning next phase:",r),r}catch(n){console.error("âŒ Error during automatic first player determination:",n)}}async processAutomaticEnergyResetPhase(t){P("PHASE_TRANSITIONS","âš¡ GameFlowManager: Processing automatic energy reset phase");try{if(!this.gameStateManager){console.error("âŒ GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await Tr(async()=>{const{default:A}=await Promise.resolve().then(()=>_I);return{default:A}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},f=ke.readyDronesAndRestoreShields(n.player1,n.player2,u),d=ke.readyDronesAndRestoreShields(n.player2,n.player1,u),p={...f,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},g={...d,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget},y=this.roundNumber>=2?s.totals.shieldsPerTurn:0,b=this.roundNumber>=2?l.totals.shieldsPerTurn:0;await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:p,player2:g,shieldsToAllocate:y,opponentShieldsToAllocate:b}}),P("PHASE_TRANSITIONS",`âœ… Energy reset complete - Player 1: ${p.energy} energy, Player 2: ${g.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const S=this.getNextPhase("energyReset");return P("PHASE_TRANSITIONS","âœ… Automatic energy reset completed, returning next phase:",S),S}catch(n){console.error("âŒ Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(t){P("PHASE_TRANSITIONS","ðŸŽ¯ GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(r=>setTimeout(r,100));const n=this.getNextPhase("gameInitializing");return P("PHASE_TRANSITIONS","âœ… Game initialization completed, returning next phase:",n),n}catch(n){throw console.error("âŒ Error during game initialization:",n),n}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn("âš ï¸ GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn("âš ï¸ GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return t.roundNumber<2?!1:t.shieldsToAllocate>0||t.opponentShieldsToAllocate>0}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn("âš ï¸ GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){P("PHASE_TRANSITIONS",`ðŸŽ¯ GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(P("PHASE_TRANSITIONS",`ðŸ”„ Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn("âš ï¸ ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1,this.gameStateManager.setState({roundNumber:1,turn:1}))),P("PHASE_TRANSITIONS",`ðŸ”„ GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"&&(P("PHASE_TRANSITIONS","ðŸš¢ GameFlowManager: Initializing placement phase data"),r=JA()),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t,resetPassInfo:!0}}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){P("PHASE_TRANSITIONS",`ðŸ¤– GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t,n);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,P("PHASE_TRANSITIONS",`ðŸ”„ GameFlowManager: Starting round ${this.roundNumber}`),this.gameStateManager.setState({roundNumber:this.roundNumber,turn:this.roundNumber},"ROUND_START","gameFlowManagerMetadata");const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn("âš ï¸ No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){P("PHASE_TRANSITIONS",`ðŸ† GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){P("PHASE_TRANSITIONS","ðŸ”„ GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}extractDronesFromDeck(t){if(!t||!Array.isArray(t))return console.warn("âš ï¸ Invalid drone names provided to extractDronesFromDeck"),[];const n=t.map(r=>{const i=Nt.find(s=>s.name===r);return i||console.warn(`âš ï¸ Drone "${r}" not found in collection`),i}).filter(Boolean);return P("PHASE_TRANSITIONS",`ðŸ“¦ Extracted ${n.length} drones from deck: ${n.map(r=>r.name).join(", ")}`),n}}const Gf=new uu,dR=!0,fR={features:{aiHandDebug:dR}};function eC(){const{gameStateManager:e}=Si(),[t,n]=C.useState(0);C.useEffect(()=>{const s=()=>{const u=2e4+Math.random()*2e4;return setTimeout(()=>{n(d=>d+1),s()},u)},l=s();return()=>{clearTimeout(l)}},[]),C.useEffect(()=>{P("PHASE_TRANSITIONS","ðŸ  MenuScreen mounted - ensuring clean state"),ln.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),e?.gameFlowManager&&e.gameFlowManager.reset(),P("PHASE_TRANSITIONS","âœ… MenuScreen: State cleaned up")},[e]);const r=()=>{P("PHASE_TRANSITIONS","ðŸŽ® Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{P("PHASE_TRANSITIONS","ðŸŽ® Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})};return h.jsx("div",{className:"body-font",style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",minHeight:"100vh",color:"#ffffff",padding:"60px 20px 20px 20px",boxSizing:"border-box",position:"relative"},children:h.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[h.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"2rem"},children:[h.jsx("h1",{className:"menu-rgb-split-red heading-font","aria-hidden":"true",style:{position:"absolute",fontSize:"4rem",margin:0,textAlign:"center",color:"#ff0000",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0},children:"EREMOS"},`rgb-red-${t}`),h.jsx("h1",{className:"menu-rgb-split-blue heading-font","aria-hidden":"true",style:{position:"absolute",fontSize:"4rem",margin:0,textAlign:"center",color:"#00ffff",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0},children:"EREMOS"},`rgb-blue-${t}`),h.jsx("h1",{className:"menu-gradient-cycle menu-title-glitch-distort menu-title-opacity-glitch animate-pulse heading-font",style:{fontSize:"4rem",margin:0,textAlign:"center",background:"linear-gradient(90deg, #00ff88, #00d4aa, #00a0cc, #0088ff, #00aaff, #00ffff, #00d4aa, #00ff88)",backgroundSize:"300% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))",textShadow:"0 0 20px rgba(0, 255, 136, 0.4), 0 0 40px rgba(0, 136, 255, 0.3)",position:"relative",zIndex:1},children:"EREMOS"},`title-${t}`)]}),h.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"the wilderness left when civilization departs"}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",alignItems:"center"},children:[h.jsxs("button",{onClick:r,className:"btn-continue",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:["SINGLE PLAYER",h.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),h.jsxs("button",{onClick:i,className:"btn-continue",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:["MULTIPLAYER",h.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]}),h.jsxs("button",{onClick:()=>e.setState({appState:"modalShowcase"}),className:"btn-continue",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px",backgroundColor:"#6a0dad",borderColor:"#9932cc"},children:["MODAL SHOWCASE",h.jsx("div",{className:"body-font",style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Dev Preview Tool"})]}),h.jsxs("button",{onClick:()=>e.setState({appState:"testingSetup"}),className:"btn-utility",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:["TESTING MODE",h.jsx("div",{className:"body-font",style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Dev Scenario Setup"})]})]})]})})}const Yf=[{name:"TEST AI",description:"Used for test scenarios.",difficulty:"Easy",imagePath:"/AI/TEST.png",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",difficulty:"Normal",imagePath:"/AI/Manticore.png",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}],pR=({onGameStart:e,onBack:t})=>{const[n,r]=C.useState("menu"),[i,s]=C.useState(""),[l,u]=C.useState(""),[f,d]=C.useState("disconnected"),[p,g]=C.useState(""),[y,b]=C.useState(!1),[S,A]=C.useState(!1);C.useEffect(()=>Kn.subscribe(U=>{switch(P("MULTIPLAYER","P2P Event:",U),U.type){case"room_created":s(U.data.roomCode),r("waiting"),d("waiting"),b(!1);break;case"joined_room":s(U.data.roomCode),r("connected"),d("connected"),b(!1);break;case"connected":r("connected"),d("connected"),b(!1),g("");break;case"disconnected":d("disconnected"),r("menu"),s(""),g("");break;case"connection_error":g(U.data.error),b(!1),r("menu");break}}),[]);const E=async()=>{b(!0),g(""),r("host");try{const j=await Kn.hostGame();P("MULTIPLAYER","Room created with code:",j)}catch(j){console.error("Failed to host game:",j),g(j.message),b(!1),r("menu")}},T=async()=>{if(l.length!==6){g("Please enter a 6-digit room code");return}b(!0),g(""),r("join");try{await Kn.joinGame(l)}catch(j){console.error("Failed to join game:",j),g(j.message),b(!1),r("menu")}},w=async()=>{try{await navigator.clipboard.writeText(i),A(!0),setTimeout(()=>A(!1),2e3)}catch(j){console.error("Failed to copy room code:",j)}},O=()=>{f==="connected"&&e()},_=()=>{Kn.disconnect(),r("menu"),s(""),u(""),g("")},k=()=>{f!=="disconnected"&&_(),t()},M=()=>{switch(f){case"waiting":return h.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[h.jsx(fl,{className:"w-4 h-4 animate-spin"}),h.jsx("span",{children:"Waiting for opponent..."})]});case"connected":return h.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[h.jsx(jA,{className:"w-4 h-4"}),h.jsx("span",{children:"Connected to opponent"})]});case"disconnected":default:return h.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[h.jsx(Nk,{className:"w-4 h-4"}),h.jsx("span",{children:"Not connected"})]})}};return P("MULTIPLAYER","ðŸŽ® MultiplayerLobby rendering - mode:",n),h.jsx("div",{style:{maxWidth:"500px",width:"100%",margin:"0 auto"},children:h.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20",style:{backgroundColor:"rgba(15, 23, 42, 0.95)",borderColor:"#a855f7",boxShadow:"0 20px 50px rgba(168, 85, 247, 0.2)"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[h.jsx(wk,{className:"w-8 h-8 text-purple-400"}),"Multiplayer Lobby"]}),h.jsx("div",{style:{marginBottom:"1rem"},children:M()})]}),p&&h.jsx("div",{style:{backgroundColor:"rgba(127, 29, 29, 0.5)",border:"1px solid #ef4444",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"1rem"},children:h.jsx("p",{style:{color:"#fca5a5",fontSize:"0.875rem"},children:p})}),n==="menu"&&h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[h.jsxs("button",{onClick:E,disabled:y,className:"btn-continue",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?h.jsx(fl,{className:"w-5 h-5 animate-spin"}):h.jsx(ok,{className:"w-5 h-5"}),"Host Game"]}),h.jsx("div",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.875rem"},children:"or"}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.jsx("input",{type:"text",placeholder:"Enter 6-digit room code",value:l,onChange:j=>u(j.target.value.replace(/[^0-9]/g,"").slice(0,6)),style:{width:"100%",backgroundColor:"#1e293b",border:"1px solid #4b5563",borderRadius:"0.5rem",padding:"0.75rem 1rem",color:"#ffffff",textAlign:"center",fontSize:"1.125rem",letterSpacing:"0.1em"},maxLength:6}),h.jsxs("button",{onClick:T,disabled:y||l.length!==6,className:"btn-confirm",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?h.jsx(fl,{className:"w-5 h-5 animate-spin"}):h.jsx(jA,{className:"w-5 h-5"}),"Join Game"]})]})]}),n==="waiting"&&h.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[h.jsxs("div",{style:{backgroundColor:"#1e293b",borderRadius:"0.5rem",padding:"1rem"},children:[h.jsx("p",{style:{color:"#d1d5db",marginBottom:"0.5rem"},children:"Share this room code:"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[h.jsx("code",{style:{fontSize:"1.5rem",fontFamily:"monospace",color:"#ffffff",backgroundColor:"#334155",padding:"0.5rem 1rem",borderRadius:"0.25rem"},children:i}),h.jsx("button",{onClick:w,style:{backgroundColor:"#9333ea",color:"#ffffff",padding:"0.5rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:j=>j.target.style.backgroundColor="#7c3aed",onMouseOut:j=>j.target.style.backgroundColor="#9333ea",children:S?h.jsx(Qj,{className:"w-5 h-5"}):h.jsx(hv,{className:"w-5 h-5"})})]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#facc15"},children:[h.jsx(fl,{className:"w-5 h-5 animate-spin"}),h.jsx("span",{children:"Waiting for opponent to join..."})]})]}),n==="connected"&&h.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[h.jsxs("div",{style:{backgroundColor:"rgba(20, 83, 45, 0.5)",border:"1px solid #22c55e",borderRadius:"0.5rem",padding:"1rem"},children:[h.jsx("p",{style:{color:"#86efac"},children:"âœ… Connected to opponent!"}),i&&h.jsxs("p",{style:{color:"#9ca3af",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Room: ",i]})]}),h.jsx("button",{onClick:O,className:"btn-continue",style:{width:"100%"},children:"Start Game"})]}),(n==="host"||n==="join")&&y&&h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx(fl,{className:"w-8 h-8 animate-spin text-purple-400",style:{margin:"0 auto 1rem auto",color:"#c084fc"}}),h.jsx("p",{style:{color:"#d1d5db"},children:n==="host"?"Creating room...":"Joining room..."})]}),h.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #374151"},children:h.jsx("button",{onClick:k,className:"btn-cancel",style:{width:"100%"},children:f!=="disconnected"?"Disconnect & Back":"Back"})})]})})},tC=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>h.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:h.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:h.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&h.jsx(n,{size:14,className:r}),h.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),AO=({text:e,className:t})=>{const n=C.useRef(null),r=C.useRef(null);return C.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,f;t.includes("font-orbitron")?(u=8,f=16):(u=8,f=12);let d=f;for(s.style.fontSize=d+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&d>u;)d-=.5,s.style.fontSize=d+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),h.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:h.jsx("span",{ref:r,className:t,children:e})})},os=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:f,scale:d=1,isViewOnly:p=!1})=>{let g=e.limit;l.forEach(Y=>{Y.mod.stat==="limit"&&(g+=Y.mod.value)});const y=i>=g,b=n&&(!y||s),S=C.useMemo(()=>{const Y={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(Q=>{Q.mod.stat==="cost"?Y.cost=Math.max(0,Y.cost+Q.mod.value):Y.hasOwnProperty(Q.mod.stat)&&(Y[Q.mod.stat]+=Q.mod.value)}),Y},[e,l]),A=S.cost,E=S.attack>e.attack,T=S.attack<e.attack,w=E?"text-green-400":T?"text-red-400":"text-white",O=S.speed>e.speed,_=S.speed<e.speed,k=O?"text-green-400":_?"text-red-400":"text-white",M=S.cost<e.class,j=S.cost>e.class,U=M?"text-green-400":j?"text-red-400":"text-white",L=g>e.limit?"text-green-400":"text-white",{name:$,image:G,hull:Z,shields:X,abilities:re}=e,I=d!==1?{transform:`scale(${d})`,transformOrigin:"center center"}:{};return h.jsx("div",{onClick:b?()=>t(e):void 0,className:`
        rounded-lg p-[2px] relative group
        transition-all duration-200
        ${b?"cursor-pointer":p?"cursor-default":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${!b&&!p?"opacity-60":""}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{width:"240px",height:"275px",clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...I},children:h.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[h.jsx("img",{src:G,alt:$,className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-black/40"}),h.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[h.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:h.jsx(AO,{text:$,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),h.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[h.jsx("div",{className:"w-10 h-12",children:h.jsx(tC,{value:S.attack,isFlat:!1,icon:Ck,iconColor:"text-red-400",textColor:w})}),h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:X>0&&Array.from({length:X}).map((Y,Q)=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:h.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${Q}`))}),h.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:Z}).map((Y,Q)=>h.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${Q}`))})]}),h.jsx("div",{className:"w-12 h-12",children:h.jsx(tC,{value:S.speed,isFlat:!0,icon:l0,iconColor:"text-blue-400",textColor:k})})]}),h.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-48 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:re&&re.length>0?re.map((Y,Q)=>h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:Y.name}),h.jsx("p",{className:"text-white text-xs leading-tight font-exo",children:Y.description})]},Q)):h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),h.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(Uf,{size:14,className:"text-yellow-300"}),h.jsx("span",{className:`font-bold text-base ml-1 ${U}`,children:A})]})]}),e.upgradeSlots>0&&h.jsxs("button",{onClick:Y=>{Y.stopPropagation(),f&&f(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[h.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),h.jsx("div",{className:"flex items-center",children:h.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),h.jsx("div",{className:"flex items-center",children:h.jsxs("span",{className:`font-bold text-base ${y?"text-pink-500":L}`,children:[i,"/",g]})})]})]})]})]})})},Ai=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i,scale:s=1})=>{const{name:l,cost:u,image:f,description:d,type:p,effect:g}=e,y=g?.goAgain,b=s!==1?{transform:`scale(${s})`,transformOrigin:"center center"}:{};return h.jsx("div",{onClick:S=>{S.stopPropagation(),P("CARD_PLAY",`ðŸ–±ï¸ ActionCard clicked: ${e.name}`,{cardId:e.id,cardName:e.name,isPlayable:n,isMandatoryTarget:i,willCallOnClick:n||i}),n||i?t(e):P("CARD_PLAY",`ðŸš« Card click blocked - not playable: ${e.name}`,{isPlayable:n,isMandatoryTarget:i})},className:`
        rounded-lg p-[2px] relative group
        transition-all duration-200
        ${n||i?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"opacity-60":""}
        ${i?"ring-4 ring-red-500 animate-pulse":""}
      `,style:{width:"240px",height:"275px",clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...b},children:h.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-purple-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900"}),h.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[h.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center py-1 px-3 bg-black/40 flex-shrink-0 h-8",children:[h.jsx("div",{className:"text-center min-w-0",children:h.jsx(AO,{text:l,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),h.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full flex-shrink-0",children:[h.jsx(Uf,{size:14,className:"text-yellow-300"}),h.jsx("span",{className:"text-white font-bold text-sm ml-1",children:u})]})]}),h.jsx("div",{className:"p-1 flex-shrink-0",children:h.jsx("div",{className:"relative h-[80px] rounded border border-purple-400/50 overflow-hidden",children:h.jsx("img",{src:f,alt:l,className:"w-full h-full object-cover object-center",style:{objectFit:"cover"}})})}),h.jsx("div",{className:"mx-1 mb-1 flex-grow bg-black/60 backdrop-blur-sm border border-purple-800/70 p-2 overflow-y-auto rounded-md",children:h.jsx("p",{className:"text-sm text-white leading-tight text-center font-exo font-normal",children:d})}),h.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] gap-2 items-center px-2 border-t border-purple-800/70 flex-shrink-0 h-6 mt-auto",children:[h.jsx("div",{className:"w-4"}),h.jsx("div",{className:"flex items-center justify-center",children:h.jsxs("span",{className:"text-[10px] text-purple-400 uppercase tracking-widest font-semibold",children:[p," Card"]})}),h.jsx("div",{className:"w-4 flex items-center justify-center",children:y&&h.jsx(hk,{size:14,className:"text-cyan-400",style:{marginLeft:"-20px"}})})]})]})]})})},hR=({onClick:e,ability:t,isUsable:n,isSelected:r})=>h.jsx("button",{onClick:e,disabled:!n,className:`w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 flex-shrink-0 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("circle",{cx:"12",cy:"12",r:"6"}),h.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),fo=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:f,isHovered:d,onMouseEnter:p,onMouseLeave:g,isCardTarget:y,isInMiddleLane:b,reallocationState:S,gameEngine:A,turnPhase:E,isMyTurn:T,passInfo:w,getLocalPlayerId:O,localPlayerState:_,shipAbilityMode:k,sectionRef:M})=>{if(i)return h.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:h.jsx("span",{className:"text-center",children:"Click to place section"})});const j=A.getShipStatus(t),U=j==="critical"?"bg-red-900/60":j==="damaged"?"bg-yellow-900/50":"bg-black/60";let q=j==="critical"?"border-red-500":j==="damaged"?"border-yellow-500":f?"border-pink-500":"border-cyan-500";const L=f?"shadow-pink-500/20":"shadow-cyan-500/20",$=d?"scale-105 shadow-xl":"";let G="";if(S)switch(S){case"can-remove":q="border-orange-400",G="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":q="border-orange-600",G="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":q="border-gray-600",G="opacity-50";break;case"can-add":q="border-green-400",G="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":q="border-green-600",G="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":q="border-gray-600",G="opacity-50";break}const Z=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",X=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,I=>I.toUpperCase()),re={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return h.jsxs("div",{ref:M,className:`
        relative rounded-xl shadow-lg ${L} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${q}
        ${u?`cursor-pointer ${$}`:""}
        ${Z}
        ${G}
      `,style:re,onClick:s,onMouseEnter:p,onMouseLeave:g,children:[h.jsx("div",{className:`absolute inset-0 ${U}`}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center p-2 h-full",children:[h.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("p",{className:"font-bold text-lg text-white",children:t.name||X}),h.jsx("div",{className:`flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${j==="healthy"?"bg-green-500/20 text-green-300":j==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:j.charAt(0).toUpperCase()+j.slice(1)})]}),r&&t.ability&&h.jsx(hR,{ability:t.ability,isUsable:E==="action"&&T()&&!w[`${O()}Passed`]&&_.energy>=t.ability.cost.energy,isSelected:k?.ability.id===t.ability.id,onClick:I=>l(I,{...t,name:e},t.ability)})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[h.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([I,Y])=>{const Q=b&&t.middleLaneBonus&&t.middleLaneBonus[I];return h.jsxs("span",{className:"flex items-center text-xs",children:[h.jsxs("span",{className:"font-semibold mr-1",children:[I,":"]}),h.jsx("span",{className:Q?"text-green-400 font-bold":"",children:Y})]},I)})}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((I,Y)=>h.jsx("div",{children:Y<t.allocatedShields?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:h.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:h.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},Y))}),h.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((I,Y)=>{const Q=Y+1,{critical:ve,damaged:R}=t.thresholds;let V;Q<=ve?V="bg-red-500":Q<=R?V="bg-orange-500":V="bg-green-500";const K=Y<t.hull;return h.jsx("div",{className:`h-4 w-4 rounded-sm ${K?V:"bg-gray-400"} border border-black/50`},Y)})})]}),h.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:t.ability&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight mb-1",children:t.ability.name}),h.jsx("p",{className:"text-xs text-white leading-tight",children:t.ability.description})]})})]})]})]})},Tv=({isOpen:e,onClose:t,title:n,drones:r=[],cards:i=[],shipComponents:s={}})=>{if(!e)return null;const l=[...r].sort((d,p)=>d.class-p.class),u=[...i].sort((d,p)=>d.card.cost-p.card.cost),f=(d,p)=>{const g=d.stats.healthy,y=d.middleLaneBonus||{},b={};return Object.keys(g).forEach(S=>{b[S]=g[S]+(p&&y[S]||0)}),b};return h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 max-w-[1500px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[h.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:n}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:h.jsx(cn,{size:32})})]}),h.jsxs("div",{className:"overflow-y-auto flex-grow pr-4",children:[Object.keys(s).length>0&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-xl font-orbitron text-yellow-400 mb-3",children:"Ship Layout"}),h.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4",children:["l","m","r"].map((d,p)=>{const g=Object.entries(s).find(([b,S])=>S===d),y=g?sr.find(b=>b.id===g[0]):null;return h.jsxs("div",{children:[h.jsx("div",{className:"text-center mb-2",children:h.jsx("span",{className:`font-bold text-sm ${p===1?"text-yellow-400":"text-cyan-400"}`,children:p===1?"MIDDLE (Bonus)":p===0?"LEFT":"RIGHT"})}),y?h.jsx("div",{className:"h-[200px]",children:h.jsx(fo,{section:y.key,stats:y,effectiveStatsForDisplay:f(y,p===1),isPlayer:!0,isInMiddleLane:p===1,gameEngine:ke,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})}):h.jsx("div",{className:"h-[200px] bg-gray-800/30 rounded-lg border-2 border-dashed border-gray-600 flex items-center justify-center",children:h.jsx("span",{className:"text-center text-gray-500 italic text-xs",children:"Empty Lane"})})]},d)})}),h.jsx("div",{className:"border-t border-purple-500/30 mb-6"})]}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",l.length,")"]}),l.length>0?h.jsx("div",{className:"max-w-[1165px] mx-auto",children:h.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:l.map((d,p)=>h.jsx("div",{children:h.jsx(os,{drone:d,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[],isViewOnly:!0})},`${d.name}-${p}`))})}):h.jsx("div",{className:"flex items-center justify-center py-20",children:h.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected"})})]}),h.jsx("div",{className:"border-t border-purple-500/30 mb-6"}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("h3",{className:"text-xl font-orbitron text-purple-400 mb-3",children:["Cards (",u.reduce((d,p)=>d+p.quantity,0),")"]}),u.length>0?h.jsx("div",{className:"max-w-[1165px] mx-auto",children:h.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:u.map((d,p)=>h.jsxs("div",{className:"relative",children:[h.jsx(Ai,{card:d.card,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1}),d.quantity>1&&h.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white font-bold text-sm px-2 py-1 rounded z-10",children:["x",d.quantity]})]},`${d.card.id}-${p}`))})}):h.jsx("div",{className:"flex items-center justify-center py-20",children:h.jsx("p",{className:"text-gray-500 text-xl italic",children:"No cards in deck"})})]})]})]})})};function mR(){const{gameState:e,gameStateManager:t}=Si(),[n,r]=C.useState(null),[i,s]=C.useState(!1),[l,u]=C.useState(null),f=e.gameMode==="local",d=e.gameMode!=="local";C.useEffect(()=>{d&&(P("PHASE_TRANSITIONS","ðŸ”Œ Setting up P2P integration for multiplayer"),t.setupP2PIntegration(Kn))},[d]);const p=()=>{P("PHASE_TRANSITIONS","ðŸ”™ Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},g=E=>{P("PHASE_TRANSITIONS","ðŸ¤– Selected AI:",E.name),r(E)},y=()=>{if(f&&n){if(P("PHASE_TRANSITIONS","ðŸŽ® Starting single player game with AI:",n.name),!n.dronePool||!Array.isArray(n.dronePool)){const w=`Cannot start game: AI '${n.name}' has invalid dronePool configuration.`;console.error("âŒ",w),alert(w);return}if(n.dronePool.length<5){const w=`Cannot start game: AI '${n.name}' has only ${n.dronePool.length} drones. Minimum 5 drones required.`;console.error("âŒ",w),alert(w);return}if(n.dronePool.length>10){const w=`Cannot start game: AI '${n.name}' has ${n.dronePool.length} drones. Maximum 10 drones allowed.`;console.error("âŒ",w),alert(w);return}P("PHASE_TRANSITIONS",`âœ… AI drone pool validated: ${n.dronePool.length} drones`);const E=Nt.filter(w=>n.dronePool.includes(w.name)),T={};E.forEach(w=>{T[w.name]=0}),Pr.initialize(Yf,Nt,n,t.actionProcessor,t),P("PHASE_TRANSITIONS","ðŸ¤– AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:E,deployedDroneCounts:T,aiPersonality:n})}},b=()=>{P("PHASE_TRANSITIONS","ðŸŽ® Starting multiplayer game after connection");const E=Kn.isHost,T=E?"host":"guest";P("PHASE_TRANSITIONS",`ðŸŽ® Multiplayer mode: ${T}`),t.startGame(T,{name:E?"Host Player":"Guest Player"},{name:E?"Guest Player":"Host Player"})},S=E=>{P("LOBBY","ðŸ“‹ Opening deck view for AI:",E.name),u(E),s(!0)},A=E=>{if(!E)return{drones:[],cards:[],shipComponents:{}};const T=Nt.filter(k=>E.dronePool.includes(k.name)),w=E.decklist.filter(k=>k.quantity>0).map(k=>({card:Vn.find(M=>M.id===k.id),quantity:k.quantity})).filter(k=>k.card),O={},_=["l","m","r"];return E.shipDeployment.placement.forEach((k,M)=>{const j=sr.find(U=>U.key===k);j&&(O[j.id]=_[M])}),{drones:T,cards:w,shipComponents:O}};return h.jsxs("div",{className:"body-font",style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",minHeight:"100vh",color:"#ffffff",padding:"60px 20px 20px 20px",boxSizing:"border-box",position:"relative"},children:[h.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[f?h.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"2rem"},children:[h.jsx("h2",{"aria-hidden":"true",className:"heading-font",style:{position:"absolute",fontSize:"3.5rem",margin:0,textAlign:"center",color:"#ef4444",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0,fontWeight:"bold"},children:"SELECT OPPONENT"}),h.jsx("h2",{"aria-hidden":"true",className:"heading-font",style:{position:"absolute",fontSize:"3.5rem",margin:0,textAlign:"center",color:"#ff9944",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0,fontWeight:"bold"},children:"SELECT OPPONENT"}),h.jsx("h2",{className:"defeat-glow heading-font",style:{fontSize:"3.5rem",margin:0,textAlign:"center",background:"linear-gradient(90deg, #dc2626, #ef4444, #fca5a5, #ffffff, #fca5a5, #ef4444, #dc2626)",backgroundSize:"300% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 0 10px rgba(239, 68, 68, 0.3))",position:"relative",zIndex:1,fontWeight:"bold"},children:"SELECT OPPONENT"})]}):h.jsx("h2",{className:"body-font",style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:"MULTIPLAYER SETUP"}),f&&h.jsx("div",{style:{maxWidth:"600px",width:"100%",marginBottom:"2rem"},children:h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem"},children:Yf.map(E=>h.jsxs("div",{className:`ai-opponent-card ${n?.name===E.name?"selected":""}`,onClick:()=>g(E),children:[h.jsx("div",{className:"ai-opponent-card-bg",style:{backgroundImage:`url(${E.imagePath})`}}),h.jsx("div",{className:"ai-opponent-card-overlay"}),h.jsxs("div",{className:"ai-opponent-card-content",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"body-font",style:{margin:"0 0 8px 0",fontSize:"1.8rem",fontWeight:"bold",color:"#ffffff",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"},children:E.name}),h.jsx("p",{className:"body-font",style:{margin:"0",fontSize:"1rem",color:"#dddddd",lineHeight:"1.4",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:E.description})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs("div",{className:"body-font",style:{fontSize:"0.9rem",fontWeight:"bold",color:"#ffcc00",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",textTransform:"uppercase",letterSpacing:"1px"},children:["Difficulty: ",E.difficulty]}),h.jsx("button",{onClick:T=>{T.stopPropagation(),S(E)},className:"btn-info",children:"View Deck"})]})]})]},E.name))})}),d&&h.jsx(pR,{onGameStart:b,onBack:p}),f&&h.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[h.jsx("button",{onClick:p,className:"btn-cancel",children:"BACK TO MENU"}),h.jsx("button",{onClick:y,disabled:!n,className:"btn-continue",children:"START GAME"})]})]}),i&&l&&h.jsx(Tv,{isOpen:i,onClose:()=>{s(!1),u(null)},title:`${l.name} - Complete Loadout`,...A(l)})]})}const Pv=({phase:e,localPlayerStatus:t})=>h.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:h.jsxs("div",{className:"text-center p-8",children:[h.jsx(fl,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),h.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),h.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&h.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[h.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"âœ… Your Selection Complete"}),h.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function gR(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i}=Si(),{turnPhase:s}=e;i();const l=t(),u=`${l}DroneSelectionTrio`,f=`${l}DroneSelectionPool`,d=e[u],p=e[f];P("DRONE_SELECTION","DroneSelectionScreen render:",{localPlayerId:l,propertyNameTrio:u,propertyNamePool:f,hasTrio:!!d,hasPool:!!p,trioLength:d?.length,poolLength:p?.length,trioData:d?.map(j=>j.name),player1Trio:e.player1DroneSelectionTrio?.map(j=>j.name),player2Trio:e.player2DroneSelectionTrio?.map(j=>j.name),gameMode:e.gameMode});const[g,y]=C.useState([]),[b,S]=C.useState(d||[]),[A,E]=C.useState(p||[]),T=j=>{if(s!=="droneSelection")return;P("DRONE_SELECTION","ðŸ”§ handleChooseDroneForSelection called with:",j.name);const U=[...g,j];if(y(U),U.length<5){const q=kI(A,2);S(q.droneSelectionTrio),E(q.droneSelectionPool),P("DRONE_SELECTION","ðŸ”§ Advanced to next pair locally, selected:",U.length)}else P("DRONE_SELECTION","ðŸ”§ All 5 drones selected, waiting for Continue button click")},w=()=>{if(s!=="droneSelection")return;P("DRONE_SELECTION","ðŸ”§ handleContinueDroneSelection called with:",g.length);const j=t(),U={playerId:j,phase:"droneSelection",actionData:{drones:g}};if(P("DRONE_SELECTION","Submitting commitment:",{gameMode:e.gameMode,playerId:j,droneCount:g.length,commitmentsBefore:e.commitments?.droneSelection}),e.gameMode==="guest"){P("DRONE_SELECTION","[GUEST] Sending drone selection commitment to host"),Kn.sendActionToHost("commitment",U);return}Ge.actionProcessor.queueAction({type:"commitment",payload:U}).then(q=>{if(!q.success){console.error("âŒ Drone selection submission failed:",q.error);return}P("DRONE_SELECTION","âœ… Drone selection submitted successfully")}).catch(q=>{console.error("âŒ Drone selection submission error:",q)}),P("DRONE_SELECTION","âœ… Drone selection submitted to PhaseManager")};C.useEffect(()=>{d&&d.length>0&&b.length===0&&(S(d),P("DRONE_SELECTION","ðŸ”„ Updated currentTrio from gameState after data arrival")),p&&p.length>0&&A.length===0&&(E(p),P("DRONE_SELECTION","ðŸ”„ Updated remainingPool from gameState after data arrival"))},[d,p]),C.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const O=n(),_=e.commitments?.droneSelection?.[l]?.completed||!1,k=e.commitments?.droneSelection?.[O]?.completed||!1;if(P("DRONE_SELECTION","Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:l,opponentPlayerId:O,localPlayerCompleted:_,opponentCompleted:k,fullCommitmentsObject:e.commitments?.droneSelection,turnPhase:s,willShowWaiting:r()&&_&&!k}),r()&&_&&!k){const j=e.commitments?.droneSelection?.[l]?.drones||g,U=j.length>0?j.map(q=>q.name).join(", "):"Selection complete";return h.jsx(Pv,{phase:"droneSelection",localPlayerStatus:`You selected: ${U}`})}const M=g.length===5;return h.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[h.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),h.jsxs("div",{className:"flex flex-col items-center w-full p-4 relative z-10",children:[h.jsx("h2",{className:"text-3xl font-bold mb-8 text-white text-center",children:"Select Your Active Drone Pool"}),M?null:h.jsxs(h.Fragment,{children:[h.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",g.length+1," of 5: Select one drone from the two options below for your Active Drone Pool."]}),b&&b.length>0&&h.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:b.map((j,U)=>h.jsx(os,{drone:j,onClick:()=>T(j),isSelectable:!0,deployedCount:0},j.name||U))})]}),M&&h.jsx("button",{onClick:w,className:"btn-continue mb-8",children:"Continue to Ship Placement"}),h.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[h.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",g.length,"/5)",M&&h.jsx("span",{className:"text-green-400 ml-2",children:"âœ“"})]}),g.length>0?h.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:g.map((j,U)=>h.jsx(os,{drone:j,isSelectable:!1,deployedCount:0,isViewOnly:!0},U))}):h.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function CO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=CO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function pt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=CO(e))&&(r&&(r+=" "),r+=t);return r}var Ng={},Dg={},nC;function yR(){return nC||(nC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Dg)),Dg}var _g={},rC;function EO(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(_g)),_g}var Mg={},aC;function TO(){return aC||(aC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Mg)),Mg}var jg={},iC;function wv(){return iC||(iC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",f=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const d=n[s];u?d==="\\"&&s+1<i?(s++,l+=n[s]):d===u?u="":l+=d:f?d==='"'||d==="'"?u=d:d==="]"?(f=!1,r.push(l),l=""):l+=d:d==="["?(f=!0,l&&(r.push(l),l="")):d==="."?l&&(r.push(l),l=""):l+=d,s++}return l&&r.push(l),r}e.toPath=t})(jg)),jg}var sC;function Ov(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yR(),n=EO(),r=TO(),i=wv();function s(u,f,d){if(u==null)return d;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return d;const p=u[f];return p===void 0?n.isDeepKey(f)?s(u,i.toPath(f),d):d:p}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const p=u[f];return p===void 0?d:p}default:{if(Array.isArray(f))return l(u,f,d);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return d;const p=u[f];return p===void 0?d:p}}}function l(u,f,d){if(f.length===0)return d;let p=u;for(let g=0;g<f.length;g++){if(p==null||t.isUnsafeProperty(f[g]))return d;p=p[f[g]]}return p===void 0?d:p}e.get=s})(Ng)),Ng}var kg,oC;function vR(){return oC||(oC=1,kg=Ov().get),kg}var bR=vR();const po=va(bR);var Ig={exports:{}},yt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC;function xR(){if(lC)return yt;lC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var E=A.$$typeof;switch(E){case e:switch(A=A.type,A){case n:case i:case r:case f:case d:case y:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case g:case p:return A;case s:return A;default:return E}}case t:return E}}}return yt.ContextConsumer=s,yt.ContextProvider=l,yt.Element=e,yt.ForwardRef=u,yt.Fragment=n,yt.Lazy=g,yt.Memo=p,yt.Portal=t,yt.Profiler=i,yt.StrictMode=r,yt.Suspense=f,yt.SuspenseList=d,yt.isContextConsumer=function(A){return S(A)===s},yt.isContextProvider=function(A){return S(A)===l},yt.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},yt.isForwardRef=function(A){return S(A)===u},yt.isFragment=function(A){return S(A)===n},yt.isLazy=function(A){return S(A)===g},yt.isMemo=function(A){return S(A)===p},yt.isPortal=function(A){return S(A)===t},yt.isProfiler=function(A){return S(A)===i},yt.isStrictMode=function(A){return S(A)===r},yt.isSuspense=function(A){return S(A)===f},yt.isSuspenseList=function(A){return S(A)===d},yt.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===f||A===d||typeof A=="object"&&A!==null&&(A.$$typeof===g||A.$$typeof===p||A.$$typeof===l||A.$$typeof===s||A.$$typeof===u||A.$$typeof===b||A.getModuleId!==void 0)},yt.typeOf=S,yt}var cC;function SR(){return cC||(cC=1,Ig.exports=xR()),Ig.exports}var AR=SR(),xn=e=>e===0?0:e>0?1:-1,Dr=e=>typeof e=="number"&&e!=+e,no=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,_e=e=>(typeof e=="number"||e instanceof Number)&&!Dr(e),ka=e=>_e(e)||typeof e=="string",CR=0,mu=e=>{var t=++CR;return"".concat(e||"").concat(t)},zn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_e(t)&&typeof t!="string")return r;var s;if(no(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return Dr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},PO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Mn(e,t,n){return _e(e)&&_e(t)?e+n*(t-e):t}function ER(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):po(r,t))===n)}var Sn=e=>e===null||typeof e>"u",Tu=e=>Sn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),TR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Nv(e){if(typeof e!="string")return!1;var t=TR;return t.includes(e)}var PR=["viewBox","children"],uC=["points","pathLength"],Rg={svg:PR,polygon:uC,polyline:uC},wR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(C.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Nv(i)&&(r[i]=(s=>n[i](n,s)))}),r},OR=(e,t,n)=>r=>(e(t,n,r),null),Pu=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Nv(i)&&typeof s=="function"&&(r||(r={}),r[i]=OR(s,t,n))}),r},NR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function wO(e){if(typeof e!="string")return!1;var t=NR;return t.includes(e)}function So(e){var t=Object.entries(e).filter(n=>{var[r]=n;return wO(r)});return Object.fromEntries(t)}var dC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",fC=null,Lg=null,OO=e=>{if(e===fC&&Array.isArray(Lg))return Lg;var t=[];return C.Children.forEach(e,n=>{Sn(n)||(AR.isFragment(n)?t=t.concat(OO(n.props.children)):t.push(n))}),Lg=t,fC=e,t};function Dv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>dC(i)):r=[dC(t)],OO(e).forEach(i=>{var s=po(i,"type.displayName")||po(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var DR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&Rg?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||wO(t)),f=!!n&&Nv(t);return l||u||f},en=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(C.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;DR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},_R=["children","width","height","viewBox","className","style","title","desc"];function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x0.apply(null,arguments)}function MR(e,t){if(e==null)return{};var n,r,i=jR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _v=C.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:f,desc:d}=e,p=MR(e,_R),g=s||{width:r,height:i,x:0,y:0},y=pt("recharts-surface",l);return C.createElement("svg",x0({},en(p,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),C.createElement("title",null,f),C.createElement("desc",null,d),n)}),kR=["children","className"];function S0(){return S0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S0.apply(null,arguments)}function IR(e,t){if(e==null)return{};var n,r,i=RR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function RR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dr=C.forwardRef((e,t)=>{var{children:n,className:r}=e,i=IR(e,kR),s=pt("recharts-layer",r);return C.createElement("g",S0({className:s},en(i,!0),{ref:t}),n)}),NO=uw(),DO=C.createContext(null),LR=()=>C.useContext(DO);function Ct(e){return function(){return e}}const _O=Math.cos,qf=Math.sin,ba=Math.sqrt,Ff=Math.PI,Dp=2*Ff,A0=Math.PI,C0=2*A0,Js=1e-6,$R=C0-Js;function MO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function BR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return MO;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class UR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?MO:BR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,f=r-t,d=i-n,p=l-t,g=u-n,y=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Js)if(!(Math.abs(g*f-d*p)>Js)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let b=r-l,S=i-u,A=f*f+d*d,E=b*b+S*S,T=Math.sqrt(A),w=Math.sqrt(y),O=s*Math.tan((A0-Math.acos((A+y-E)/(2*T*w)))/2),_=O/w,k=O/T;Math.abs(_-1)>Js&&this._append`L${t+_*p},${n+_*g}`,this._append`A${s},${s},0,0,${+(g*b>p*S)},${this._x1=t+k*f},${this._y1=n+k*d}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),d=t+u,p=n+f,g=1^l,y=l?i-s:s-i;this._x1===null?this._append`M${d},${p}`:(Math.abs(this._x1-d)>Js||Math.abs(this._y1-p)>Js)&&this._append`L${d},${p}`,r&&(y<0&&(y=y%C0+C0),y>$R?this._append`A${r},${r},0,1,${g},${t-u},${n-f}A${r},${r},0,1,${g},${this._x1=d},${this._y1=p}`:y>Js&&this._append`A${r},${r},0,${+(y>=A0)},${g},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Mv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new UR(t)}function jv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jO(e){this._context=e}jO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _p(e){return new jO(e)}function kO(e){return e[0]}function IO(e){return e[1]}function RO(e,t){var n=Ct(!0),r=null,i=_p,s=null,l=Mv(u);e=typeof e=="function"?e:e===void 0?kO:Ct(e),t=typeof t=="function"?t:t===void 0?IO:Ct(t);function u(f){var d,p=(f=jv(f)).length,g,y=!1,b;for(r==null&&(s=i(b=l())),d=0;d<=p;++d)!(d<p&&n(g=f[d],d,f))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(g,d,f),+t(g,d,f));if(b)return s=null,b+""||null}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ct(+f),u):e},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ct(+f),u):t},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Ct(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(s=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=s=null:s=i(r=f),u):r},u}function pf(e,t,n){var r=null,i=Ct(!0),s=null,l=_p,u=null,f=Mv(d);e=typeof e=="function"?e:e===void 0?kO:Ct(+e),t=typeof t=="function"?t:Ct(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?IO:Ct(+n);function d(g){var y,b,S,A=(g=jv(g)).length,E,T=!1,w,O=new Array(A),_=new Array(A);for(s==null&&(u=l(w=f())),y=0;y<=A;++y){if(!(y<A&&i(E=g[y],y,g))===T)if(T=!T)b=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=b;--S)u.point(O[S],_[S]);u.lineEnd(),u.areaEnd()}T&&(O[y]=+e(E,y,g),_[y]=+t(E,y,g),u.point(r?+r(E,y,g):O[y],n?+n(E,y,g):_[y]))}if(w)return u=null,w+""||null}function p(){return RO().defined(i).curve(l).context(s)}return d.x=function(g){return arguments.length?(e=typeof g=="function"?g:Ct(+g),r=null,d):e},d.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Ct(+g),d):e},d.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Ct(+g),d):r},d.y=function(g){return arguments.length?(t=typeof g=="function"?g:Ct(+g),n=null,d):t},d.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Ct(+g),d):t},d.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Ct(+g),d):n},d.lineX0=d.lineY0=function(){return p().x(e).y(t)},d.lineY1=function(){return p().x(e).y(n)},d.lineX1=function(){return p().x(r).y(t)},d.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Ct(!!g),d):i},d.curve=function(g){return arguments.length?(l=g,s!=null&&(u=l(s)),d):l},d.context=function(g){return arguments.length?(g==null?s=u=null:u=l(s=g),d):s},d}class LO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function zR(e){return new LO(e,!0)}function HR(e){return new LO(e,!1)}const kv={draw(e,t){const n=ba(t/Ff);e.moveTo(n,0),e.arc(0,0,n,0,Dp)}},GR={draw(e,t){const n=ba(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},$O=ba(1/3),YR=$O*2,qR={draw(e,t){const n=ba(t/YR),r=n*$O;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},FR={draw(e,t){const n=ba(t),r=-n/2;e.rect(r,r,n,n)}},VR=.8908130915292852,BO=qf(Ff/10)/qf(7*Ff/10),KR=qf(Dp/10)*BO,WR=-_O(Dp/10)*BO,XR={draw(e,t){const n=ba(t*VR),r=KR*n,i=WR*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=Dp*s/5,u=_O(l),f=qf(l);e.lineTo(f*n,-u*n),e.lineTo(u*r-f*i,f*r+u*i)}e.closePath()}},$g=ba(3),QR={draw(e,t){const n=-ba(t/($g*3));e.moveTo(0,n*2),e.lineTo(-$g*n,-n),e.lineTo($g*n,-n),e.closePath()}},Fr=-.5,Vr=ba(3)/2,E0=1/ba(12),ZR=(E0/2+1)*3,JR={draw(e,t){const n=ba(t/ZR),r=n/2,i=n*E0,s=r,l=n*E0+n,u=-s,f=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,f),e.lineTo(Fr*r-Vr*i,Vr*r+Fr*i),e.lineTo(Fr*s-Vr*l,Vr*s+Fr*l),e.lineTo(Fr*u-Vr*f,Vr*u+Fr*f),e.lineTo(Fr*r+Vr*i,Fr*i-Vr*r),e.lineTo(Fr*s+Vr*l,Fr*l-Vr*s),e.lineTo(Fr*u+Vr*f,Fr*f-Vr*u),e.closePath()}};function e5(e,t){let n=null,r=Mv(i);e=typeof e=="function"?e:Ct(e||kv),t=typeof t=="function"?t:Ct(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Ct(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Ct(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Vf(){}function Kf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function UO(e){this._context=e}UO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Kf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Kf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function t5(e){return new UO(e)}function zO(e){this._context=e}zO.prototype={areaStart:Vf,areaEnd:Vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Kf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function n5(e){return new zO(e)}function HO(e){this._context=e}HO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Kf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function r5(e){return new HO(e)}function GO(e){this._context=e}GO.prototype={areaStart:Vf,areaEnd:Vf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function a5(e){return new GO(e)}function pC(e){return e<0?-1:1}function hC(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(pC(s)+pC(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function mC(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Bg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function Wf(e){this._context=e}Wf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bg(this,this._t0,mC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Bg(this,mC(this,n=hC(this,e,t)),n);break;default:Bg(this,this._t0,n=hC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function YO(e){this._context=new qO(e)}(YO.prototype=Object.create(Wf.prototype)).point=function(e,t){Wf.prototype.point.call(this,t,e)};function qO(e){this._context=e}qO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function i5(e){return new Wf(e)}function s5(e){return new YO(e)}function FO(e){this._context=e}FO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=gC(e),i=gC(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function gC(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function o5(e){return new FO(e)}function Mp(e,t){this._context=e,this._t=t}Mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function l5(e){return new Mp(e,.5)}function c5(e){return new Mp(e,0)}function u5(e){return new Mp(e,1)}function xl(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function T0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function d5(e,t){return e[t]}function f5(e){const t=[];return t.key=e,t}function p5(){var e=Ct([]),t=T0,n=xl,r=d5;function i(s){var l=Array.from(e.apply(this,arguments),f5),u,f=l.length,d=-1,p;for(const g of s)for(u=0,++d;u<f;++u)(l[u][d]=[0,+r(g,l[u].key,d,s)]).data=g;for(u=0,p=jv(t(l));u<f;++u)l[p[u]].index=u;return n(l,p),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Ct(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Ct(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?T0:typeof s=="function"?s:Ct(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??xl,i):n},i}function h5(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}xl(e,t)}}function m5(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}xl(e,t)}}function g5(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,f=0,d=0;u<l;++u){for(var p=e[t[u]],g=p[r][1]||0,y=p[r-1][1]||0,b=(g-y)/2,S=0;S<u;++S){var A=e[t[S]],E=A[r][1]||0,T=A[r-1][1]||0;b+=E-T}f+=g,d+=b*g}i[r-1][1]+=i[r-1][0]=n,f&&(n-=d/f)}i[r-1][1]+=i[r-1][0]=n,xl(e,t)}}var y5=["type","size","sizeType"];function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P0.apply(null,arguments)}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){v5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v5(e,t,n){return(t=b5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b5(e){var t=x5(e,"string");return typeof t=="symbol"?t:t+""}function x5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S5(e,t){if(e==null)return{};var n,r,i=A5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var VO={symbolCircle:kv,symbolCross:GR,symbolDiamond:qR,symbolSquare:FR,symbolStar:XR,symbolTriangle:QR,symbolWye:JR},C5=Math.PI/180,E5=e=>{var t="symbol".concat(Tu(e));return VO[t]||kv},T5=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*C5;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},P5=(e,t)=>{VO["symbol".concat(Tu(e))]=t},Iv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=S5(e,y5),s=vC(vC({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=E5(l),b=e5().type(y).size(T5(n,r,l));return b()},{className:f,cx:d,cy:p}=s,g=en(s,!0);return d===+d&&p===+p&&n===+n?C.createElement("path",P0({},g,{className:pt("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(p,")"),d:u()})):null};Iv.registerSymbol=P5;function w0(){return w0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w0.apply(null,arguments)}function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function w5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(n),!0).forEach(function(r){Rv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rv(e,t,n){return(t=O5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O5(e){var t=N5(e,"string");return typeof t=="symbol"?t:t+""}function N5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kr=32;class Lv extends C.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Kr/2,s=Kr/6,l=Kr/3,u=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Kr,y2:i,className:"recharts-legend-icon"});if(f==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Kr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return C.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Kr/8,"h").concat(Kr,"v").concat(Kr*3/4,"h").concat(-Kr,"z"),className:"recharts-legend-icon"});if(C.isValidElement(t.legendIcon)){var d=w5({},t);return delete d.legendIcon,C.cloneElement(t.legendIcon,d)}return C.createElement(Iv,{fill:u,cx:i,cy:i,size:Kr,sizeType:"diameter",type:f})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Kr,height:Kr},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,g)=>{var y=p.formatter||i,b=pt({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:p.inactive});if(p.type==="none")return null;var S=p.inactive?s:p.color,A=y?y(p.value,p,g):p.value;return C.createElement("li",w0({className:b,style:f,key:"legend-item-".concat(g)},Pu(this.props,p,g)),C.createElement(_v,{width:n,height:n,viewBox:u,style:d,"aria-label":"".concat(A," legend icon")},this.renderIcon(p,l)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Rv(Lv,"displayName","Legend");Rv(Lv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Ug={},zg={},xC;function D5(){return xC||(xC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(zg)),zg}var Hg={},SC;function KO(){return SC||(SC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Hg)),Hg}var Gg={},Yg={},qg={},AC;function _5(){return AC||(AC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(qg)),qg}var CC;function $v(){return CC||(CC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_5();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Yg)),Yg}var Fg={},EC;function M5(){return EC||(EC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Fg)),Fg}var TC;function j5(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$v(),n=M5();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(Gg)),Gg}var Vg={},Kg={},PC;function k5(){return PC||(PC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ov();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Kg)),Kg}var Wg={},Xg={},Qg={},Zg={},wC;function WO(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Zg)),Zg}var Jg={},OC;function XO(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Jg)),Jg}var ey={},NC;function QO(){return NC||(NC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(ey)),ey}var DC;function I5(){return DC||(DC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bv(),n=WO(),r=XO(),i=QO();function s(g,y,b){return typeof b!="function"?t.isMatch(g,y):l(g,y,function S(A,E,T,w,O,_){const k=b(A,E,T,w,O,_);return k!==void 0?!!k:l(A,E,S,_)},new Map)}function l(g,y,b,S){if(y===g)return!0;switch(typeof y){case"object":return u(g,y,b,S);case"function":return Object.keys(y).length>0?l(g,{...y},b,S):i.eq(g,y);default:return n.isObject(g)?typeof y=="string"?y==="":!0:i.eq(g,y)}}function u(g,y,b,S){if(y==null)return!0;if(Array.isArray(y))return d(g,y,b,S);if(y instanceof Map)return f(g,y,b,S);if(y instanceof Set)return p(g,y,b,S);const A=Object.keys(y);if(g==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(y))return S.get(y)===g;S&&S.set(y,g);try{for(let E=0;E<A.length;E++){const T=A[E];if(!r.isPrimitive(g)&&!(T in g)||y[T]===void 0&&g[T]!==void 0||y[T]===null&&g[T]!==null||!b(g[T],y[T],T,g,y,S))return!1}return!0}finally{S&&S.delete(y)}}function f(g,y,b,S){if(y.size===0)return!0;if(!(g instanceof Map))return!1;for(const[A,E]of y.entries()){const T=g.get(A);if(b(T,E,A,g,y,S)===!1)return!1}return!0}function d(g,y,b,S){if(y.length===0)return!0;if(!Array.isArray(g))return!1;const A=new Set;for(let E=0;E<y.length;E++){const T=y[E];let w=!1;for(let O=0;O<g.length;O++){if(A.has(O))continue;const _=g[O];let k=!1;if(b(_,T,E,g,y,S)&&(k=!0),k){A.add(O),w=!0;break}}if(!w)return!1}return!0}function p(g,y,b,S){return y.size===0?!0:g instanceof Set?d([...g],[...y],b,S):!1}e.isMatchWith=s,e.isSetMatch=p})(Qg)),Qg}var _C;function Bv(){return _C||(_C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I5();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Xg)),Xg}var ty={},ny={},ry={},MC;function R5(){return MC||(MC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(ry)),ry}var ay={},jC;function ZO(){return jC||(jC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(ay)),ay}var iy={},kC;function JO(){return kC||(kC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",f="[object Map]",d="[object Set]",p="[object Array]",g="[object Function]",y="[object ArrayBuffer]",b="[object Object]",S="[object Error]",A="[object DataView]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",w="[object Uint16Array]",O="[object Uint32Array]",_="[object BigUint64Array]",k="[object Int8Array]",M="[object Int16Array]",j="[object Int32Array]",U="[object BigInt64Array]",q="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=p,e.bigInt64ArrayTag=U,e.bigUint64ArrayTag=_,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=q,e.float64ArrayTag=L,e.functionTag=g,e.int16ArrayTag=M,e.int32ArrayTag=j,e.int8ArrayTag=k,e.mapTag=f,e.numberTag=r,e.objectTag=b,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=w,e.uint32ArrayTag=O,e.uint8ArrayTag=E,e.uint8ClampedArrayTag=T})(iy)),iy}var sy={},IC;function L5(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(sy)),sy}var RC;function e2(){return RC||(RC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R5(),n=ZO(),r=JO(),i=XO(),s=L5();function l(p,g){return u(p,void 0,p,new Map,g)}function u(p,g,y,b=new Map,S=void 0){const A=S?.(p,g,y,b);if(A!==void 0)return A;if(i.isPrimitive(p))return p;if(b.has(p))return b.get(p);if(Array.isArray(p)){const E=new Array(p.length);b.set(p,E);for(let T=0;T<p.length;T++)E[T]=u(p[T],T,y,b,S);return Object.hasOwn(p,"index")&&(E.index=p.index),Object.hasOwn(p,"input")&&(E.input=p.input),E}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const E=new RegExp(p.source,p.flags);return E.lastIndex=p.lastIndex,E}if(p instanceof Map){const E=new Map;b.set(p,E);for(const[T,w]of p)E.set(T,u(w,T,y,b,S));return E}if(p instanceof Set){const E=new Set;b.set(p,E);for(const T of p)E.add(u(T,void 0,y,b,S));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const E=new(Object.getPrototypeOf(p)).constructor(p.length);b.set(p,E);for(let T=0;T<p.length;T++)E[T]=u(p[T],T,y,b,S);return E}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const E=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return b.set(p,E),f(E,p,y,b,S),E}if(typeof File<"u"&&p instanceof File){const E=new File([p],p.name,{type:p.type});return b.set(p,E),f(E,p,y,b,S),E}if(p instanceof Blob){const E=new Blob([p],{type:p.type});return b.set(p,E),f(E,p,y,b,S),E}if(p instanceof Error){const E=new p.constructor;return b.set(p,E),E.message=p.message,E.name=p.name,E.stack=p.stack,E.cause=p.cause,f(E,p,y,b,S),E}if(typeof p=="object"&&d(p)){const E=Object.create(Object.getPrototypeOf(p));return b.set(p,E),f(E,p,y,b,S),E}return p}function f(p,g,y=p,b,S){const A=[...Object.keys(g),...t.getSymbols(g)];for(let E=0;E<A.length;E++){const T=A[E],w=Object.getOwnPropertyDescriptor(p,T);(w==null||w.writable)&&(p[T]=u(g[T],T,y,b,S))}}function d(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=f})(ny)),ny}var LC;function $5(){return LC||(LC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e2();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(ty)),ty}var $C;function B5(){return $C||($C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bv(),n=$5();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Wg)),Wg}var oy={},ly={},cy={},BC;function U5(){return BC||(BC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e2(),n=JO();function r(i,s){return t.cloneDeepWith(i,(l,u,f,d)=>{const p=s?.(l,u,f,d);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case n.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=r})(cy)),cy}var UC;function z5(){return UC||(UC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U5();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(ly)),ly}var uy={},dy={},zC;function t2(){return zC||(zC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(dy)),dy}var fy={},HC;function H5(){return HC||(HC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZO();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(fy)),fy}var GC;function G5(){return GC||(GC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EO(),n=t2(),r=H5(),i=wv();function s(l,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?f=i.toPath(u):f=[u],f.length===0)return!1;let d=l;for(let p=0;p<f.length;p++){const g=f[p];if((d==null||!Object.hasOwn(d,g))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(g)&&g<d.length))return!1;d=d[g]}return!0}e.has=s})(uy)),uy}var YC;function Y5(){return YC||(YC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bv(),n=TO(),r=z5(),i=Ov(),s=G5();function l(u,f){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(d){const p=i.get(d,u);return p===void 0?s.has(d,u):f===void 0?p===void 0:t.isMatch(p,f)}}e.matchesProperty=l})(oy)),oy}var qC;function q5(){return qC||(qC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KO(),n=k5(),r=B5(),i=Y5();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Vg)),Vg}var FC;function F5(){return FC||(FC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D5(),n=KO(),r=j5(),i=q5();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(Ug)),Ug}var py,VC;function V5(){return VC||(VC=1,py=F5().uniqBy),py}var K5=V5();const KC=va(K5);function n2(e,t,n){return t===!0?KC(e,n):typeof t=="function"?KC(e,t):e}var hy={exports:{}},my={},gy={exports:{}},yy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WC;function W5(){if(WC)return yy;WC=1;var e=Dl();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(g,y){var b=y(),S=r({inst:{value:b,getSnapshot:y}}),A=S[0].inst,E=S[1];return s(function(){A.value=b,A.getSnapshot=y,f(A)&&E({inst:A})},[g,b,y]),i(function(){return f(A)&&E({inst:A}),g(function(){f(A)&&E({inst:A})})},[g]),l(b),b}function f(g){var y=g.getSnapshot;g=g.value;try{var b=y();return!n(g,b)}catch{return!0}}function d(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return yy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,yy}var XC;function X5(){return XC||(XC=1,gy.exports=W5()),gy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC;function Q5(){if(QC)return my;QC=1;var e=Dl(),t=X5();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return my.useSyncExternalStoreWithSelector=function(d,p,g,y,b){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function T(M){if(!w){if(w=!0,O=M,M=y(M),b!==void 0&&A.hasValue){var j=A.value;if(b(j,M))return _=j}return _=M}if(j=_,r(O,M))return j;var U=y(M);return b!==void 0&&b(j,U)?(O=M,j):(O=M,_=U)}var w=!1,O,_,k=g===void 0?null:g;return[function(){return T(p())},k===null?void 0:function(){return T(k())}]},[p,g,y,b]);var E=i(d,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=E},[E]),f(E),E},my}var ZC;function Z5(){return ZC||(ZC=1,hy.exports=Q5()),hy.exports}var J5=Z5(),Uv=C.createContext(null),eL=e=>e,$t=()=>{var e=C.useContext(Uv);return e?e.store.dispatch:eL},Rf=()=>{},tL=()=>Rf,nL=(e,t)=>e===t;function Oe(e){var t=C.useContext(Uv);return J5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:tL,t?t.store.getState:Rf,t?t.store.getState:Rf,t?e:Rf,nL)}function rL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function aL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function iL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var JC=e=>Array.isArray(e)?e:[e];function sL(e){const t=Array.isArray(e[0])?e[0]:e;return iL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function oL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var lL=class{constructor(e){this.value=e}deref(){return this.value}},cL=typeof WeakRef<"u"?WeakRef:lL,uL=0,eE=1;function hf(){return{s:uL,v:void 0,o:null,p:null}}function r2(e,t={}){let n=hf();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:f}=arguments;for(let g=0,y=f;g<y;g++){const b=arguments[g];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(b);A===void 0?(u=hf(),S.set(b,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(b);A===void 0?(u=hf(),S.set(b,u)):u=A}}const d=u;let p;if(u.s===eE)p=u.v;else if(p=e.apply(null,arguments),s++,r){const g=i?.deref?.()??i;g!=null&&r(g,p)&&(p=g,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new cL(p):p}return d.s=eE,d.v=p,p}return l.clearCache=()=>{n=hf(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function dL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,f={},d=i.pop();typeof d=="object"&&(f=d,d=i.pop()),rL(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const p={...n,...f},{memoize:g,memoizeOptions:y=[],argsMemoize:b=r2,argsMemoizeOptions:S=[]}=p,A=JC(y),E=JC(S),T=sL(i),w=g(function(){return s++,d.apply(null,arguments)},...A),O=b(function(){l++;const k=oL(T,arguments);return u=w.apply(null,k),u},...E);return Object.assign(O,{resultFunc:d,memoizedResultFunc:w,dependencies:T,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var se=dL(r2),fL=Object.assign((e,t=se)=>{aL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,f)=>(l[n[f]]=u,l),{}))},{withTypes:()=>fL}),vy={},by={},xy={},tE;function pL(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(xy)),xy}var Sy={},Ay={},nE;function a2(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Ay)),Ay}var rE;function hL(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a2(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Sy)),Sy}var aE;function mL(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pL(),n=hL(),r=wv();function i(s,l,u,f){if(s==null)return[];u=f?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(b=>String(b));const d=(b,S)=>{let A=b;for(let E=0;E<S.length&&A!=null;++E)A=A[S[E]];return A},p=(b,S)=>S==null||b==null?S:typeof b=="object"&&"key"in b?Object.hasOwn(S,b.key)?S[b.key]:d(S,b.path):typeof b=="function"?b(S):Array.isArray(b)?d(S,b):typeof S=="object"?S[b]:S,g=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return s.map(b=>({original:b,criteria:g.map(S=>p(S,b))})).slice().sort((b,S)=>{for(let A=0;A<g.length;A++){const E=t.compareValues(b.criteria[A],S.criteria[A],u[A]);if(E!==0)return E}return 0}).map(b=>b.original)}e.orderBy=i})(by)),by}var Cy={},iE;function gL(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,f)=>{for(let d=0;d<u.length;d++){const p=u[d];Array.isArray(p)&&f<s?l(p,f+1):i.push(p)}};return l(n,0),i}e.flatten=t})(Cy)),Cy}var Ey={},sE;function i2(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t2(),n=$v(),r=WO(),i=QO();function s(l,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&t.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.eq(f[u],l):!1}e.isIterateeCall=s})(Ey)),Ey}var oE;function yL(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mL(),n=gL(),r=i2();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(vy)),vy}var Ty,lE;function vL(){return lE||(lE=1,Ty=yL().sortBy),Ty}var bL=vL();const jp=va(bL);var s2=e=>e.legend.settings,xL=e=>e.legend.size,SL=e=>e.legend.payload,AL=se([SL,s2],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?jp(r,n):r});function CL(){return Oe(AL)}var mf=1;function o2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=C.useState({height:0,left:0,top:0,width:0}),r=C.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>mf||Math.abs(l.left-t.left)>mf||Math.abs(l.top-t.top)>mf||Math.abs(l.width-t.width)>mf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Dn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var EL=typeof Symbol=="function"&&Symbol.observable||"@@observable",cE=EL,Py=()=>Math.random().toString(36).substring(7).split("").join("."),TL={INIT:`@@redux/INIT${Py()}`,REPLACE:`@@redux/REPLACE${Py()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Py()}`},Xf=TL;function zv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function l2(e,t,n){if(typeof e!="function")throw new Error(Dn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Dn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Dn(1));return n(l2)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,f=!1;function d(){l===s&&(l=new Map,s.forEach((E,T)=>{l.set(T,E)}))}function p(){if(f)throw new Error(Dn(3));return i}function g(E){if(typeof E!="function")throw new Error(Dn(4));if(f)throw new Error(Dn(5));let T=!0;d();const w=u++;return l.set(w,E),function(){if(T){if(f)throw new Error(Dn(6));T=!1,d(),l.delete(w),s=null}}}function y(E){if(!zv(E))throw new Error(Dn(7));if(typeof E.type>"u")throw new Error(Dn(8));if(typeof E.type!="string")throw new Error(Dn(17));if(f)throw new Error(Dn(9));try{f=!0,i=r(i,E)}finally{f=!1}return(s=l).forEach(w=>{w()}),E}function b(E){if(typeof E!="function")throw new Error(Dn(10));r=E,y({type:Xf.REPLACE})}function S(){const E=g;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(Dn(11));function w(){const _=T;_.next&&_.next(p())}return w(),{unsubscribe:E(w)}},[cE](){return this}}}return y({type:Xf.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:b,[cE]:S}}function PL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Xf.INIT})>"u")throw new Error(Dn(12));if(typeof n(void 0,{type:Xf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Dn(13))})}function c2(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{PL(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let f=!1;const d={};for(let p=0;p<r.length;p++){const g=r[p],y=n[g],b=l[g],S=y(b,u);if(typeof S>"u")throw u&&u.type,new Error(Dn(14));d[g]=S,f=f||S!==b}return f=f||r.length!==Object.keys(l).length,f?d:l}}function Qf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function wL(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Dn(15))};const l={getState:i.getState,dispatch:(f,...d)=>s(f,...d)},u=e.map(f=>f(l));return s=Qf(...u)(i.dispatch),{...i,dispatch:s}}}function u2(e){return zv(e)&&"type"in e&&typeof e.type=="string"}var d2=Symbol.for("immer-nothing"),uE=Symbol.for("immer-draftable"),_r=Symbol.for("immer-state");function ga(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sl=Object.getPrototypeOf;function ho(e){return!!e&&!!e[_r]}function yi(e){return e?f2(e)||Array.isArray(e)||!!e[uE]||!!e.constructor?.[uE]||wu(e)||Ip(e):!1}var OL=Object.prototype.constructor.toString();function f2(e){if(!e||typeof e!="object")return!1;const t=Sl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===OL}function Zf(e,t){kp(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function kp(e){const t=e[_r];return t?t.type_:Array.isArray(e)?1:wu(e)?2:Ip(e)?3:0}function O0(e,t){return kp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function p2(e,t,n){const r=kp(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function NL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function wu(e){return e instanceof Map}function Ip(e){return e instanceof Set}function eo(e){return e.copy_||e.base_}function N0(e,t){if(wu(e))return new Map(e);if(Ip(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=f2(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[_r];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Sl(e),r)}else{const r=Sl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Hv(e,t=!1){return Rp(e)||ho(e)||!yi(e)||(kp(e)>1&&Object.defineProperties(e,{set:{value:gf},add:{value:gf},clear:{value:gf},delete:{value:gf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Hv(n,!0))),e}function gf(){ga(2)}function Rp(e){return Object.isFrozen(e)}var DL={};function mo(e){const t=DL[e];return t||ga(0,e),t}var gu;function h2(){return gu}function _L(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dE(e,t){t&&(mo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function D0(e){_0(e),e.drafts_.forEach(ML),e.drafts_=null}function _0(e){e===gu&&(gu=e.parent_)}function fE(e){return gu=_L(gu,e)}function ML(e){const t=e[_r];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function pE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[_r].modified_&&(D0(t),ga(4)),yi(e)&&(e=Jf(t,e),t.parent_||ep(t,e)),t.patches_&&mo("Patches").generateReplacementPatches_(n[_r].base_,e,t.patches_,t.inversePatches_)):e=Jf(t,n,[]),D0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==d2?e:void 0}function Jf(e,t,n){if(Rp(t))return t;const r=t[_r];if(!r)return Zf(t,(i,s)=>hE(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ep(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),Zf(s,(u,f)=>hE(e,r,i,u,f,n,l)),ep(e,i,!1),n&&e.patches_&&mo("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function hE(e,t,n,r,i,s,l){if(ho(i)){const u=s&&t&&t.type_!==3&&!O0(t.assigned_,r)?s.concat(r):void 0,f=Jf(e,i,u);if(p2(n,r,f),ho(f))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(yi(i)&&!Rp(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(wu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&ep(e,i)}}function ep(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Hv(t,n)}function jL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:h2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Gv;n&&(i=[r],s=yu);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var Gv={get(e,t){if(t===_r)return e;const n=eo(e);if(!O0(n,t))return kL(e,n,t);const r=n[t];return e.finalized_||!yi(r)?r:r===wy(e.base_,t)?(Oy(e),e.copy_[t]=j0(r,e)):r},has(e,t){return t in eo(e)},ownKeys(e){return Reflect.ownKeys(eo(e))},set(e,t,n){const r=m2(eo(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=wy(eo(e),t),s=i?.[_r];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(NL(n,i)&&(n!==void 0||O0(e.base_,t)))return!0;Oy(e),M0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return wy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Oy(e),M0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=eo(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ga(11)},getPrototypeOf(e){return Sl(e.base_)},setPrototypeOf(){ga(12)}},yu={};Zf(Gv,(e,t)=>{yu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});yu.deleteProperty=function(e,t){return yu.set.call(this,e,t,void 0)};yu.set=function(e,t,n){return Gv.set.call(this,e[0],t,n,e[0])};function wy(e,t){const n=e[_r];return(n?eo(n):e)[t]}function kL(e,t,n){const r=m2(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function m2(e,t){if(!(t in e))return;let n=Sl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Sl(n)}}function M0(e){e.modified_||(e.modified_=!0,e.parent_&&M0(e.parent_))}function Oy(e){e.copy_||(e.copy_=N0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var IL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(f=s,...d){return l.produce(f,p=>n.call(this,p,...d))}}typeof n!="function"&&ga(6),r!==void 0&&typeof r!="function"&&ga(7);let i;if(yi(t)){const s=fE(this),l=j0(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?D0(s):_0(s)}return dE(s,r),pE(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===d2&&(i=void 0),this.autoFreeze_&&Hv(i,!0),r){const s=[],l=[];mo("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else ga(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,f=>t(f,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){yi(e)||ga(8),ho(e)&&(e=mi(e));const t=fE(this),n=j0(e,void 0);return n[_r].isManual_=!0,_0(t),n}finishDraft(e,t){const n=e&&e[_r];(!n||!n.isManual_)&&ga(9);const{scope_:r}=n;return dE(r,t),pE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=mo("Patches").applyPatches_;return ho(e)?r(e,t):this.produce(e,i=>r(i,t))}};function j0(e,t){const n=wu(e)?mo("MapSet").proxyMap_(e,t):Ip(e)?mo("MapSet").proxySet_(e,t):jL(e,t);return(t?t.scope_:h2()).drafts_.push(n),n}function mi(e){return ho(e)||ga(10,e),g2(e)}function g2(e){if(!yi(e)||Rp(e))return e;const t=e[_r];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=N0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=N0(e,!0);return Zf(n,(r,i)=>{p2(n,r,g2(i))}),t&&(t.finalized_=!1),n}var RL=new IL,y2=RL.produce;function v2(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var LL=v2(),$L=v2,BL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qf:Qf.apply(null,arguments)};function Jr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Nr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>u2(r)&&r.type===e,n}var b2=class iu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,iu.prototype)}static get[Symbol.species](){return iu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new iu(...t[0].concat(this)):new iu(...t.concat(this))}};function mE(e){return yi(e)?y2(e,()=>{}):e}function yf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function UL(e){return typeof e=="boolean"}var zL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new b2;return n&&(UL(n)?l.push(LL):l.push($L(n.extraArgument))),l},HL="RTK_autoBatch",gE=e=>t=>{setTimeout(t,e)},GL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gE(10):e.type==="callback"?e.queueNotification:gE(e.timeout),d=()=>{l=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const g=()=>i&&p(),y=r.subscribe(g);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[HL],s=!i,s&&(l||(l=!0,f(d))),r.dispatch(p)}finally{i=!0}}})},YL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new b2(e);return r&&i.push(GL(typeof r=="object"?r:void 0)),i};function qL(e){const t=zL(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(zv(n))u=c2(n);else throw new Error(Nr(1));let f;typeof r=="function"?f=r(t):f=t();let d=Qf;i&&(d=BL({trace:!1,...typeof i=="object"&&i}));const p=wL(...f),g=YL(p);let y=typeof l=="function"?l(g):g();const b=d(...y);return l2(u,s,b)}function x2(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(Nr(28));if(u in t)throw new Error(Nr(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function FL(e){return typeof e=="function"}function VL(e,t){let[n,r,i]=x2(t),s;if(FL(e))s=()=>mE(e());else{const u=mE(e);s=()=>u}function l(u=s(),f){let d=[n[f.type],...r.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return d.filter(p=>!!p).length===0&&(d=[i]),d.reduce((p,g)=>{if(g)if(ho(p)){const b=g(p,f);return b===void 0?p:b}else{if(yi(p))return y2(p,y=>g(y,f));{const y=g(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return l.getInitialState=s,l}var KL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",WL=(e=21)=>{let t="",n=e;for(;n--;)t+=KL[Math.random()*64|0];return t},XL=Symbol.for("rtk-slice-createasyncthunk");function QL(e,t){return`${e}/${t}`}function ZL({creators:e}={}){const t=e?.asyncThunk?.[XL];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Nr(11));const l=(typeof r.reducers=="function"?r.reducers(e3()):r.reducers)||{},u=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(O,_){const k=typeof O=="string"?O:O.type;if(!k)throw new Error(Nr(12));if(k in f.sliceCaseReducersByType)throw new Error(Nr(13));return f.sliceCaseReducersByType[k]=_,d},addMatcher(O,_){return f.sliceMatchers.push({matcher:O,reducer:_}),d},exposeAction(O,_){return f.actionCreators[O]=_,d},exposeCaseReducer(O,_){return f.sliceCaseReducersByName[O]=_,d}};u.forEach(O=>{const _=l[O],k={reducerName:O,type:QL(i,O),createNotation:typeof r.reducers=="function"};n3(_)?a3(k,_,d,t):t3(k,_,d)});function p(){const[O={},_=[],k=void 0]=typeof r.extraReducers=="function"?x2(r.extraReducers):[r.extraReducers],M={...O,...f.sliceCaseReducersByType};return VL(r.initialState,j=>{for(let U in M)j.addCase(U,M[U]);for(let U of f.sliceMatchers)j.addMatcher(U.matcher,U.reducer);for(let U of _)j.addMatcher(U.matcher,U.reducer);k&&j.addDefaultCase(k)})}const g=O=>O,y=new Map,b=new WeakMap;let S;function A(O,_){return S||(S=p()),S(O,_)}function E(){return S||(S=p()),S.getInitialState()}function T(O,_=!1){function k(j){let U=j[O];return typeof U>"u"&&_&&(U=yf(b,k,E)),U}function M(j=g){const U=yf(y,_,()=>new WeakMap);return yf(U,j,()=>{const q={};for(const[L,$]of Object.entries(r.selectors??{}))q[L]=JL($,j,()=>yf(b,j,E),_);return q})}return{reducerPath:O,getSelectors:M,get selectors(){return M(k)},selectSlice:k}}const w={name:i,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:E,...T(s),injectInto(O,{reducerPath:_,...k}={}){const M=_??s;return O.inject({reducerPath:M,reducer:A},k),{...w,...T(M,!0)}}};return w}}function JL(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var jr=ZL();function e3(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function t3({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!r3(r))throw new Error(Nr(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Jr(e,l):Jr(e))}function n3(e){return e._reducerDefinitionType==="asyncThunk"}function r3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function a3({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Nr(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:f,settled:d,options:p}=n,g=i(e,s,p);r.exposeAction(t,g),l&&r.addCase(g.fulfilled,l),u&&r.addCase(g.pending,u),f&&r.addCase(g.rejected,f),d&&r.addMatcher(g.settled,d),r.exposeCaseReducer(t,{fulfilled:l||vf,pending:u||vf,rejected:f||vf,settled:d||vf})}function vf(){}var i3="task",S2="listener",A2="completed",Yv="cancelled",s3=`task-${Yv}`,o3=`task-${A2}`,k0=`${S2}-${Yv}`,l3=`${S2}-${A2}`,Lp=class{constructor(e){this.code=e,this.message=`${i3} ${Yv} (reason: ${e})`}name="TaskAbortError";message},qv=(e,t)=>{if(typeof e!="function")throw new TypeError(Nr(32))},tp=()=>{},C2=(e,t=tp)=>(e.catch(t),e),E2=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),so=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},oo=e=>{if(e.aborted){const{reason:t}=e;throw new Lp(t)}};function T2(e,t){let n=tp;return new Promise((r,i)=>{const s=()=>i(new Lp(e.reason));if(e.aborted){s();return}n=E2(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=tp})}var c3=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Lp?"cancelled":"rejected",error:n}}finally{t?.()}},np=e=>t=>C2(T2(e,t).then(n=>(oo(e),n))),P2=e=>{const t=np(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:vl}=Object,yE={},$p="listenerMiddleware",u3=(e,t)=>{const n=r=>E2(e,()=>so(r,e.reason));return(r,i)=>{qv(r);const s=new AbortController;n(s);const l=c3(async()=>{oo(e),oo(s.signal);const u=await r({pause:np(s.signal),delay:P2(s.signal),signal:s.signal});return oo(s.signal),u},()=>so(s,o3));return i?.autoJoin&&t.push(l.catch(tp)),{result:np(e)(l),cancel(){so(s,s3)}}}},d3=(e,t)=>{const n=async(r,i)=>{oo(t);let s=()=>{};const u=[new Promise((f,d)=>{let p=e({predicate:r,effect:(g,y)=>{y.unsubscribe(),f([g,y.getState(),y.getOriginalState()])}});s=()=>{p(),d()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await T2(t,Promise.race(u));return oo(t),f}finally{s()}};return(r,i)=>C2(n(r,i))},w2=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Jr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Nr(21));return qv(s),{predicate:i,type:t,effect:s}},O2=vl(e=>{const{type:t,predicate:n,effect:r}=w2(e);return{id:WL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Nr(22))}}},{withTypes:()=>O2}),vE=(e,t)=>{const{type:n,effect:r,predicate:i}=w2(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},I0=e=>{e.pending.forEach(t=>{so(t,k0)})},f3=e=>()=>{e.forEach(I0),e.clear()},bE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},N2=vl(Jr(`${$p}/add`),{withTypes:()=>N2}),p3=Jr(`${$p}/removeAll`),D2=vl(Jr(`${$p}/remove`),{withTypes:()=>D2}),h3=(...e)=>{console.error(`${$p}/error`,...e)},Ou=(e={})=>{const t=new Map,{extra:n,onError:r=h3}=e;qv(r);const i=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),g=>{p.unsubscribe(),g?.cancelActive&&I0(p)}),s=p=>{const g=vE(t,p)??O2(p);return i(g)};vl(s,{withTypes:()=>s});const l=p=>{const g=vE(t,p);return g&&(g.unsubscribe(),p.cancelActive&&I0(g)),!!g};vl(l,{withTypes:()=>l});const u=async(p,g,y,b)=>{const S=new AbortController,A=d3(s,S.signal),E=[];try{p.pending.add(S),await Promise.resolve(p.effect(g,vl({},y,{getOriginalState:b,condition:(T,w)=>A(T,w).then(Boolean),take:A,delay:P2(S.signal),pause:np(S.signal),extra:n,signal:S.signal,fork:u3(S.signal,E),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((T,w,O)=>{T!==S&&(so(T,k0),O.delete(T))})},cancel:()=>{so(S,k0),p.pending.delete(S)},throwIfCancelled:()=>{oo(S.signal)}})))}catch(T){T instanceof Lp||bE(r,T,{raisedBy:"effect"})}finally{await Promise.all(E),so(S,l3),p.pending.delete(S)}},f=f3(t);return{middleware:p=>g=>y=>{if(!u2(y))return g(y);if(N2.match(y))return s(y.payload);if(p3.match(y)){f();return}if(D2.match(y))return l(y.payload);let b=p.getState();const S=()=>{if(b===yE)throw new Error(Nr(23));return b};let A;try{if(A=g(y),t.size>0){const E=p.getState(),T=Array.from(t.values());for(const w of T){let O=!1;try{O=w.predicate(y,E,b)}catch(_){O=!1,bE(r,_,{raisedBy:"predicate"})}O&&u(w,y,p,S)}}}finally{b=yE}return A},startListening:s,stopListening:l,clearListeners:f}};function Nr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var m3={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},_2=jr({name:"chartLayout",initialState:m3,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:g3,setLayout:y3,setChartSize:v3,setScale:b3}=_2.actions,x3=_2.reducer;function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function SE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(n),!0).forEach(function(r){S3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function S3(e,t,n){return(t=A3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A3(e){var t=C3(e,"string");return typeof t=="symbol"?t:t+""}function C3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rp=Math.PI/180,E3=e=>e*180/Math.PI,tn=(e,t,n,r)=>({x:e+Math.cos(-rp*r)*n,y:t+Math.sin(-rp*r)*n}),M2=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},T3=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},P3=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=T3({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,f=Math.acos(u);return r>s&&(f=2*Math.PI-f),{radius:l,angle:E3(f),angleInRadian:f}},w3=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},O3=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},N3=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=P3({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:f,endAngle:d}=w3(t),p=s,g;if(f<=d){for(;p>d;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=d}else{for(;p>f;)p-=360;for(;p<d;)p+=360;g=p>=d&&p<=f}return g?SE(SE({},t),{},{radius:i,angle:O3(p,t)}):null};function j2(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function AE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(n),!0).forEach(function(r){D3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D3(e,t,n){return(t=_3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _3(e){var t=M3(e,"string");return typeof t=="symbol"?t:t+""}function M3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jt(e,t,n){return Sn(e)||Sn(t)?n:ka(t)?po(e,t,n):typeof t=="function"?t(e):n}var j3=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<u;f++){var d=f>0?n[f-1].coordinate:n[u-1].coordinate,p=n[f].coordinate,g=f>=u-1?n[0].coordinate:n[f+1].coordinate,y=void 0;if(xn(p-d)!==xn(g-p)){var b=[];if(xn(g-p)===xn(i[1]-i[0])){y=g;var S=p+i[1]-i[0];b[0]=Math.min(S,(S+d)/2),b[1]=Math.max(S,(S+d)/2)}else{y=d;var A=g+i[1]-i[0];b[0]=Math.min(p,(A+p)/2),b[1]=Math.max(p,(A+p)/2)}var E=[Math.min(p,(y+p)/2),Math.max(p,(y+p)/2)];if(e>E[0]&&e<=E[1]||e>=b[0]&&e<=b[1]){({index:l}=n[f]);break}}else{var T=Math.min(d,g),w=Math.max(d,g);if(e>(T+p)/2&&e<=(w+p)/2){({index:l}=n[f]);break}}}else if(t){for(var O=0;O<u;O++)if(O===0&&e<=(t[O].coordinate+t[O+1].coordinate)/2||O>0&&O<u-1&&e>(t[O].coordinate+t[O-1].coordinate)/2&&e<=(t[O].coordinate+t[O+1].coordinate)/2||O===u-1&&e>(t[O].coordinate+t[O-1].coordinate)/2){({index:l}=t[O]);break}}return l},k3=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&_e(e[s]))return Qr(Qr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&_e(e[l]))return Qr(Qr({},e),{},{[l]:e[l]+(i||0)})}return e},Ao=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",k2=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},I2=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:f,categoricalDomain:d,tickCount:p,ticks:g,niceTicks:y,axisType:b}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=b==="angleAxis"&&s&&s.length>=2?xn(s[0]-s[1])*2*A:A,g||y){var E=(g||y||[]).map((T,w)=>{var O=r?r.indexOf(T):T;return{coordinate:l(O)+A,value:T,offset:A,index:w}});return E.filter(T=>!Dr(T.coordinate))}return f&&d?d.map((T,w)=>({coordinate:l(T)+A,value:T,index:w,offset:A})):l.ticks&&p!=null?l.ticks(p).map((T,w)=>({coordinate:l(T)+A,value:T,offset:A,index:w})):l.domain().map((T,w)=>({coordinate:l(T)+A,value:r?r[T]:T,index:w,offset:A}))},CE=1e-4,I3=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-CE,s=Math.max(r[0],r[1])+CE,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},R3=(e,t)=>{if(!t||t.length!==2||!_e(t[0])||!_e(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!_e(e[0])||e[0]<n)&&(i[0]=n),(!_e(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},L3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=Dr(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},$3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=Dr(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},B3={sign:L3,expand:h5,none:xl,silhouette:m5,wiggle:g5,positive:$3},U3=(e,t,n)=>{var r=B3[n],i=p5().keys(t).value((s,l)=>+jt(s,l,0)).order(T0).offset(r);return i(e)};function z3(e){return e==null?void 0:String(e)}var EE=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=jt(s,t.dataKey,t.scale.domain()[l]);return Sn(u)?null:t.scale(u)-i/2+r},H3=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},G3=e=>{var t=e.flat(2).filter(_e);return[Math.min(...t),Math.max(...t)]},Y3=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],q3=(e,t,n)=>{if(e!=null)return Y3(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((f,d)=>{var p=j2(d,t,n),g=G3(p);return[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},TE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=jp(t,p=>p.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var f=i[l],d=i[l-1];s=Math.min((f.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function wE(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Qr(Qr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function Bp(e,t){if(e)return String(e);if(typeof t=="string")return t}function F3(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?N3({x:e,y:t},r):null}var V3=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Qr(Qr(Qr({},r),tn(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:f}=r;return Qr(Qr(Qr({},r),tn(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{x:0,y:0}},K3=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Ci=e=>e.layout.width,Ei=e=>e.layout.height,W3=e=>e.layout.scale,R2=e=>e.layout.margin,Up=se(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),zp=se(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),L2="data-recharts-item-index",$2="data-recharts-item-data-key",Nu=60;function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(n),!0).forEach(function(r){X3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X3(e,t,n){return(t=Q3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q3(e){var t=Z3(e,"string");return typeof t=="symbol"?t:t+""}function Z3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J3=e=>e.brush.height;function e4(e){var t=zp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Nu;return n+i}return n},0)}function t4(e){var t=zp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Nu;return n+i}return n},0)}function n4(e){var t=Up(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function r4(e){var t=Up(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var un=se([Ci,Ei,R2,J3,e4,t4,n4,r4,s2,xL],(e,t,n,r,i,s,l,u,f,d)=>{var p={left:(n.left||0)+i,right:(n.right||0)+s},g={top:(n.top||0)+l,bottom:(n.bottom||0)+u},y=bf(bf({},g),p),b=y.bottom;y.bottom+=r,y=k3(y,f,d);var S=e-y.left-y.right,A=t-y.top-y.bottom;return bf(bf({brushBottom:b},y),{},{width:Math.max(S,0),height:Math.max(A,0)})}),a4=se(un,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Vv=se(Ci,Ei,(e,t)=>({x:0,y:0,width:e,height:t})),i4=C.createContext(null),ta=()=>C.useContext(i4)!=null,Hp=e=>e.brush,Gp=se([Hp,un,R2],(e,t,n)=>({height:e.height,x:_e(e.x)?e.x:t.left,y:_e(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:_e(e.width)?e.width:t.width})),Kv=()=>{var e,t=ta(),n=Oe(a4),r=Oe(Gp),i=(e=Oe(Hp))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},s4={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},B2=()=>{var e;return(e=Oe(un))!==null&&e!==void 0?e:s4},Wv=()=>Oe(Ci),Xv=()=>Oe(Ei),o4=()=>Oe(e=>e.layout.margin),it=e=>e.layout.layoutType,Qv=()=>Oe(it),l4={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},U2=jr({name:"legend",initialState:l4,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=mi(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:NE,setLegendSettings:c4,addLegendPayload:z2,removeLegendPayload:H2}=U2.actions,u4=U2.reducer,d4=["contextPayload"];function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R0.apply(null,arguments)}function DE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Al(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(n),!0).forEach(function(r){Zv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zv(e,t,n){return(t=f4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f4(e){var t=p4(e,"string");return typeof t=="symbol"?t:t+""}function p4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h4(e,t){if(e==null)return{};var n,r,i=m4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function m4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function g4(e){return e.value}function y4(e){var{contextPayload:t}=e,n=h4(e,d4),r=n2(t,e.payloadUniqBy,g4),i=Al(Al({},n),{},{payload:r});return C.isValidElement(e.content)?C.cloneElement(e.content,i):typeof e.content=="function"?C.createElement(e.content,i):C.createElement(Lv,i)}function v4(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:f}=t,d,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?d={left:((r||0)-s.width)/2}:d=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?p={top:((i||0)-s.height)/2}:p=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Al(Al({},d),p)}function b4(e){var t=$t();return C.useEffect(()=>{t(c4(e))},[t,e]),null}function x4(e){var t=$t();return C.useEffect(()=>(t(NE(e)),()=>{t(NE({width:0,height:0}))}),[t,e]),null}function S4(e){var t=CL(),n=LR(),r=o4(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[f,d]=o2([t]),p=Wv(),g=Xv();if(p==null||g==null)return null;var y=p-(r.left||0)-(r.right||0),b=Yp.getWidthOrHeight(e.layout,s,i,y),S=u?l:Al(Al({position:"absolute",width:b?.width||i||"auto",height:b?.height||s||"auto"},v4(l,e,r,p,g,f)),l),A=u??n;if(A==null)return null;var E=C.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:d},C.createElement(b4,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),C.createElement(x4,{width:f.width,height:f.height}),C.createElement(y4,R0({},e,b,{margin:r,chartWidth:p,chartHeight:g,contextPayload:t})));return NO.createPortal(E,A)}class Yp extends C.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&_e(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return C.createElement(S4,this.props)}}Zv(Yp,"displayName","Legend");Zv(Yp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function L0(){return L0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L0.apply(null,arguments)}function _E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_E(Object(n),!0).forEach(function(r){A4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_E(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function A4(e,t,n){return(t=C4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C4(e){var t=E4(e,"string");return typeof t=="symbol"?t:t+""}function E4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T4(e){return Array.isArray(e)&&ka(e[0])&&ka(e[1])?e.join(" ~ "):e}var P4=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:f,labelClassName:d,label:p,labelFormatter:g,accessibilityLayer:y=!1}=e,b=()=>{if(s&&s.length){var k={padding:0,margin:0},M=(u?jp(s,u):s).map((j,U)=>{if(j.type==="none")return null;var q=j.formatter||l||T4,{value:L,name:$}=j,G=L,Z=$;if(q){var X=q(L,$,j,U,s);if(Array.isArray(X))[G,Z]=X;else if(X!=null)G=X;else return null}var re=Ny({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},r);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:re},ka(Z)?C.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,ka(Z)?C.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,C.createElement("span",{className:"recharts-tooltip-item-value"},G),C.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:k},M)}return null},S=Ny({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=Ny({margin:0},i),E=!Sn(p),T=E?p:"",w=pt("recharts-default-tooltip",f),O=pt("recharts-tooltip-label",d);E&&g&&s!==void 0&&s!==null&&(T=g(p,s));var _=y?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",L0({className:w,style:S},_),C.createElement("p",{className:O,style:A},C.isValidElement(T)?T:"".concat(T)),b())},Wc="recharts-tooltip-wrapper",w4={visibility:"hidden"};function O4(e){var{coordinate:t,translateX:n,translateY:r}=e;return pt(Wc,{["".concat(Wc,"-right")]:_e(n)&&t&&_e(t.x)&&n>=t.x,["".concat(Wc,"-left")]:_e(n)&&t&&_e(t.x)&&n<t.x,["".concat(Wc,"-bottom")]:_e(r)&&t&&_e(t.y)&&r>=t.y,["".concat(Wc,"-top")]:_e(r)&&t&&_e(t.y)&&r<t.y})}function ME(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:f,viewBoxDimension:d}=e;if(s&&_e(s[r]))return s[r];var p=n[r]-u-(i>0?i:0),g=n[r]+i;if(t[r])return l[r]?p:g;var y=f[r];if(y==null)return 0;if(l[r]){var b=p,S=y;return b<S?Math.max(g,y):Math.max(p,y)}if(d==null)return 0;var A=g+u,E=y+d;return A>E?Math.max(p,y):Math.max(g,y)}function N4(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function D4(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:f}=e,d,p,g;return l.height>0&&l.width>0&&n?(p=ME({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),g=ME({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),d=N4({translateX:p,translateY:g,useTranslate3d:u})):d=w4,{cssProperties:d,cssClasses:O4({translateX:p,translateY:g,coordinate:n})}}function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(n),!0).forEach(function(r){$0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $0(e,t,n){return(t=_4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _4(e){var t=M4(e,"string");return typeof t=="symbol"?t:t+""}function M4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class j4 extends C.PureComponent{constructor(){super(...arguments),$0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:f,offset:d,position:p,reverseDirection:g,useTranslate3d:y,viewBox:b,wrapperStyle:S,lastBoundingBox:A,innerRef:E,hasPortalFromProps:T}=this.props,{cssClasses:w,cssProperties:O}=D4({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:d,position:p,reverseDirection:g,tooltipBox:{height:A.height,width:A.width},useTranslate3d:y,viewBox:b}),_=T?{}:xf(xf({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),k=xf(xf({},_),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:E},s)}}var k4=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ml={isSsr:k4()},G2=()=>Oe(e=>e.rootProps.accessibilityLayer);function Mr(e){return Number.isFinite(e)}function Cl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B0.apply(null,arguments)}function kE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function IE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(n),!0).forEach(function(r){I4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I4(e,t,n){return(t=R4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R4(e){var t=L4(e,"string");return typeof t=="symbol"?t:t+""}function L4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RE={curveBasisClosed:n5,curveBasisOpen:r5,curveBasis:t5,curveBumpX:zR,curveBumpY:HR,curveLinearClosed:a5,curveLinear:_p,curveMonotoneX:i5,curveMonotoneY:s5,curveNatural:o5,curveStep:l5,curveStepAfter:u5,curveStepBefore:c5},Sf=e=>Mr(e.x)&&Mr(e.y),Xc=e=>e.x,Qc=e=>e.y,$4=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Tu(e));return(n==="curveMonotone"||n==="curveBump")&&t?RE["".concat(n).concat(t==="vertical"?"Y":"X")]:RE[n]||_p},B4=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=$4(t,i),u=s?n.filter(Sf):n,f;if(Array.isArray(r)){var d=s?r.filter(g=>Sf(g)):r,p=u.map((g,y)=>IE(IE({},g),{},{base:d[y]}));return i==="vertical"?f=pf().y(Qc).x1(Xc).x0(g=>g.base.x):f=pf().x(Xc).y1(Qc).y0(g=>g.base.y),f.defined(Sf).curve(l),f(p)}return i==="vertical"&&_e(r)?f=pf().y(Qc).x1(Xc).x0(r):_e(r)?f=pf().x(Xc).y1(Qc).y0(r):f=RO().x(Xc).y(Qc),f.defined(Sf).curve(l),f(u)},Y2=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?B4(e):r;return C.createElement("path",B0({},So(e),wR(e),{className:pt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},U4=["x","y","top","left","width","height","className"];function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U0.apply(null,arguments)}function LE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function z4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(n),!0).forEach(function(r){H4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H4(e,t,n){return(t=G4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G4(e){var t=Y4(e,"string");return typeof t=="symbol"?t:t+""}function Y4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q4(e,t){if(e==null)return{};var n,r,i=F4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function F4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var V4=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),K4=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,f=q4(e,U4),d=z4({x:t,y:n,top:r,left:i,width:s,height:l},f);return!_e(t)||!_e(n)||!_e(s)||!_e(l)||!_e(r)||!_e(i)?null:C.createElement("path",U0({},en(d,!0),{className:pt("recharts-cross",u),d:V4(t,n,s,l,r,i)}))};function W4(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function X4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(n),!0).forEach(function(r){Q4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q4(e,t,n){return(t=Z4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z4(e){var t=J4(e,"string");return typeof t=="symbol"?t:t+""}function J4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function na(e,t){var n=X4({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function e$(){}function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(n),!0).forEach(function(r){t$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t$(e,t,n){return(t=n$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n$(e){var t=r$(e,"string");return typeof t=="symbol"?t:t+""}function r$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a$=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),q2=(e,t,n)=>e.map(r=>"".concat(a$(r)," ").concat(t,"ms ").concat(n)).join(","),i$=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),vu=(e,t)=>Object.keys(t).reduce((n,r)=>UE(UE({},n),{},{[r]:e(r,t[r])}),{});function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(n),!0).forEach(function(r){s$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s$(e,t,n){return(t=o$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o$(e){var t=l$(e,"string");return typeof t=="symbol"?t:t+""}function l$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ap=(e,t,n)=>e+(t-e)*n,z0=e=>{var{from:t,to:n}=e;return t!==n},F2=(e,t,n)=>{var r=vu((i,s)=>{if(z0(s)){var[l,u]=e(s.from,s.to,s.velocity);return _n(_n({},s),{},{from:l,velocity:u})}return s},t);return n<1?vu((i,s)=>z0(s)?_n(_n({},s),{},{velocity:ap(s.velocity,r[i].velocity,n),from:ap(s.from,r[i].from,n)}):s,t):F2(e,r,n-1)};function c$(e,t,n,r,i,s){var l,u=r.reduce((y,b)=>_n(_n({},y),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),f=()=>vu((y,b)=>b.from,u),d=()=>!Object.values(u).filter(z0).length,p=null,g=y=>{l||(l=y);var b=y-l,S=b/n.dt;u=F2(n,u,S),i(_n(_n(_n({},e),t),f())),l=y,d()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{p()})}function u$(e,t,n,r,i,s,l){var u=null,f=i.reduce((g,y)=>_n(_n({},g),{},{[y]:[e[y],t[y]]}),{}),d,p=g=>{d||(d=g);var y=(g-d)/r,b=vu((A,E)=>ap(...E,n(y)),f);if(s(_n(_n(_n({},e),t),b)),y<1)u=l.setTimeout(p);else{var S=vu((A,E)=>ap(...E,n(1)),f);s(_n(_n(_n({},e),t),S))}};return()=>(u=l.setTimeout(p),()=>{u()})}const d$=(e,t,n,r,i,s)=>{var l=i$(e,t);return n.isStepper===!0?c$(e,t,n,l,i,s):u$(e,t,n,r,l,i,s)};var ip=1e-4,V2=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],K2=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),HE=(e,t)=>n=>{var r=V2(e,t);return K2(r,n)},f$=(e,t)=>n=>{var r=V2(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return K2(i,n)},GE=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var f=l[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([t,r,n,i]=f[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var d=HE(t,n),p=HE(r,i),g=f$(t,n),y=S=>S>1?1:S<0?0:S,b=S=>{for(var A=S>1?1:S,E=A,T=0;T<8;++T){var w=d(E)-A,O=g(E);if(Math.abs(w-A)<ip||O<ip)return p(E);E=y(E-w/O)}return p(E)};return b.isStepper=!1,b},p$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,f)=>{var d=-(l-u)*n,p=f*r,g=f+(d-p)*i/1e3,y=f*i/1e3+l;return Math.abs(y-u)<ip&&Math.abs(g)<ip?[u,0]:[y,g]};return s.isStepper=!0,s.dt=i,s},h$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GE(e);case"spring":return p$();default:if(e.split("(")[0]==="cubic-bezier")return GE(e)}return typeof e=="function"?e:null};function m$(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[f,...d]=u;if(typeof f=="number"){i=e.setTimeout(s.bind(null,d),f);return}s(f),i=e.setTimeout(s.bind(null,d));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class g${setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function y$(){return m$(new g$)}var v$=C.createContext(y$);function b$(e,t){var n=C.useContext(v$);return C.useMemo(()=>t??n(e),[e,t,n])}var x$={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},YE={t:0},Dy={t:1};function qp(e){var t=na(e,x$),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:f,children:d}=t,p=b$(t.animationId,t.animationManager),[g,y]=C.useState(n?YE:Dy),b=C.useRef(null);return C.useEffect(()=>{n||y(Dy)},[n]),C.useEffect(()=>{if(!n||!r)return e$;var S=d$(YE,Dy,h$(s),i,y,p.getTimeoutController()),A=()=>{b.current=S()};return p.start([f,l,A,i,u]),()=>{p.stop(),b.current&&b.current(),u()}},[n,r,i,s,l,f,u,p]),d(g.t)}function Fp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=C.useRef(mu(t)),r=C.useRef(e);return r.current!==e&&(n.current=mu(t),r.current=e),n.current}function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(n),!0).forEach(function(r){S$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function S$(e,t,n){return(t=A$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A$(e){var t=C$(e,"string");return typeof t=="symbol"?t:t+""}function C$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sp.apply(null,arguments)}var VE=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var p=[0,0,0,0],g=0,y=4;g<y;g++)p[g]=i[g]>s?s:i[g];d="M".concat(e,",").concat(t+l*p[0]),p[0]>0&&(d+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(f,",").concat(e+u*p[0],",").concat(t)),d+="L ".concat(e+n-u*p[1],",").concat(t),p[1]>0&&(d+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(t+l*p[1])),d+="L ".concat(e+n,",").concat(t+r-l*p[2]),p[2]>0&&(d+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(f,`,
        `).concat(e+n-u*p[2],",").concat(t+r)),d+="L ".concat(e+u*p[3],",").concat(t+r),p[3]>0&&(d+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(t+r-l*p[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var b=Math.min(s,i);d="M ".concat(e,",").concat(t+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+u*b,",").concat(t,`
            L `).concat(e+n-u*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+n,",").concat(t+l*b,`
            L `).concat(e+n,",").concat(t+r-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+n-u*b,",").concat(t+r,`
            L `).concat(e+u*b,",").concat(t+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e,",").concat(t+r-l*b," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},E$={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},W2=e=>{var t=na(e,E$),n=C.useRef(null),[r,i]=C.useState(-1);C.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var X=n.current.getTotalLength();X&&i(X)}catch{}},[]);var{x:s,y:l,width:u,height:f,radius:d,className:p}=t,{animationEasing:g,animationDuration:y,animationBegin:b,isAnimationActive:S,isUpdateAnimationActive:A}=t,E=C.useRef(u),T=C.useRef(f),w=C.useRef(s),O=C.useRef(l),_=C.useMemo(()=>({x:s,y:l,width:u,height:f,radius:d}),[s,l,u,f,d]),k=Fp(_,"rectangle-");if(s!==+s||l!==+l||u!==+u||f!==+f||u===0||f===0)return null;var M=pt("recharts-rectangle",p);if(!A)return C.createElement("path",sp({},en(t,!0),{className:M,d:VE(s,l,u,f,d)}));var j=E.current,U=T.current,q=w.current,L=O.current,$="0px ".concat(r===-1?1:r,"px"),G="".concat(r,"px 0px"),Z=q2(["strokeDasharray"],y,typeof g=="string"?g:void 0);return C.createElement(qp,{animationId:k,key:k,canBegin:r>0,duration:y,easing:g,isActive:A,begin:b},X=>{var re=Mn(j,u,X),I=Mn(U,f,X),Y=Mn(q,s,X),Q=Mn(L,l,X);n.current&&(E.current=re,T.current=I,w.current=Y,O.current=Q);var ve;return S?X>0?ve={transition:Z,strokeDasharray:G}:ve={strokeDasharray:$}:ve={strokeDasharray:G},C.createElement("path",sp({},en(t,!0),{className:M,d:VE(Y,Q,re,I,d),ref:n,style:FE(FE({},ve),t.style)}))})};function X2(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=tn(t,n,r,i),u=tn(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H0.apply(null,arguments)}var T$=(e,t)=>{var n=xn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Af=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:f}=e,d=u*(l?1:-1)+r,p=Math.asin(u/d)/rp,g=f?i:i+s*p,y=tn(t,n,d,g),b=tn(t,n,r,g),S=f?i-s*p:i,A=tn(t,n,d*Math.cos(p*rp),S);return{center:y,circleTangency:b,lineTangency:A,theta:p}},Q2=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=T$(s,l),f=s+u,d=tn(t,n,i,s),p=tn(t,n,i,f),g="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>f),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var y=tn(t,n,r,s),b=tn(t,n,r,f);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=f),`,
            `).concat(y.x,",").concat(y.y," Z")}else g+="L ".concat(t,",").concat(n," Z");return g},P$=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}=e,p=xn(d-f),{circleTangency:g,lineTangency:y,theta:b}=Af({cx:t,cy:n,radius:i,angle:f,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:E}=Af({cx:t,cy:n,radius:i,angle:d,sign:-p,cornerRadius:s,cornerIsExternal:u}),T=u?Math.abs(f-d):Math.abs(f-d)-b-E;if(T<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Q2({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:d});var w="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:O,lineTangency:_,theta:k}=Af({cx:t,cy:n,radius:r,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:M,lineTangency:j,theta:U}=Af({cx:t,cy:n,radius:r,angle:d,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),q=u?Math.abs(f-d):Math.abs(f-d)-k-U;if(q<0&&s===0)return"".concat(w,"L").concat(t,",").concat(n,"Z");w+="L".concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(q>180),",").concat(+(p>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(t,",").concat(n,"Z");return w},w$={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Z2=e=>{var t=na(e,w$),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:p,className:g}=t;if(s<i||d===p)return null;var y=pt("recharts-sector",g),b=s-i,S=zn(l,b,0,!0),A;return S>0&&Math.abs(d-p)<360?A=P$({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,b/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:p}):A=Q2({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:d,endAngle:p}),C.createElement("path",H0({},en(t,!0),{className:y,d:A}))};function O$(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:f,innerRadius:d,outerRadius:p,angle:g}=t,y=tn(u,f,d,g),b=tn(u,f,p,g);r=y.x,i=y.y,s=b.x,l=b.y}else return X2(t);return[{x:r,y:i},{x:s,y:l}]}var _y={},My={},jy={},KE;function N$(){return KE||(KE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a2();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(jy)),jy}var WE;function D$(){return WE||(WE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N$();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(My)),My}var XE;function _$(){return XE||(XE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i2(),n=D$();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),f=new Array(u);for(let d=0;d<u;d++)f[d]=i,i+=l;return f}e.range=r})(_y)),_y}var ky,QE;function M$(){return QE||(QE=1,ky=_$().range),ky}var j$=M$();const J2=va(j$);function is(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function k$(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jv(e){let t,n,r;e.length!==2?(t=is,n=(u,f)=>is(e(u),f),r=(u,f)=>e(u)-f):(t=e===is||e===k$?e:I$,n=e,r=e);function i(u,f,d=0,p=u.length){if(d<p){if(t(f,f)!==0)return p;do{const g=d+p>>>1;n(u[g],f)<0?d=g+1:p=g}while(d<p)}return d}function s(u,f,d=0,p=u.length){if(d<p){if(t(f,f)!==0)return p;do{const g=d+p>>>1;n(u[g],f)<=0?d=g+1:p=g}while(d<p)}return d}function l(u,f,d=0,p=u.length){const g=i(u,f,d,p-1);return g>d&&r(u[g-1],f)>-r(u[g],f)?g-1:g}return{left:i,center:l,right:s}}function I$(){return 0}function eN(e){return e===null?NaN:+e}function*R$(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const L$=Jv(is),Du=L$.right;Jv(eN).center;class ZE extends Map{constructor(t,n=U$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(JE(this,t))}has(t){return super.has(JE(this,t))}set(t,n){return super.set($$(this,t),n)}delete(t){return super.delete(B$(this,t))}}function JE({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function $$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function B$({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function U$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function z$(e=is){if(e===is)return tN;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function tN(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const H$=Math.sqrt(50),G$=Math.sqrt(10),Y$=Math.sqrt(2);function op(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=H$?10:s>=G$?5:s>=Y$?2:1;let u,f,d;return i<0?(d=Math.pow(10,-i)/l,u=Math.round(e*d),f=Math.round(t*d),u/d<e&&++u,f/d>t&&--f,d=-d):(d=Math.pow(10,i)*l,u=Math.round(e/d),f=Math.round(t/d),u*d<e&&++u,f*d>t&&--f),f<u&&.5<=n&&n<2?op(e,t,n*2):[u,f,d]}function G0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?op(t,e,n):op(e,t,n);if(!(s>=i))return[];const u=s-i+1,f=new Array(u);if(r)if(l<0)for(let d=0;d<u;++d)f[d]=(s-d)/-l;else for(let d=0;d<u;++d)f[d]=(s-d)*l;else if(l<0)for(let d=0;d<u;++d)f[d]=(i+d)/-l;else for(let d=0;d<u;++d)f[d]=(i+d)*l;return f}function Y0(e,t,n){return t=+t,e=+e,n=+n,op(e,t,n)[2]}function q0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Y0(t,e,n):Y0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function eT(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function tT(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function nN(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?tN:z$(i);r>n;){if(r-n>600){const f=r-n+1,d=t-n+1,p=Math.log(f),g=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*g*(f-g)/f)*(d-f/2<0?-1:1),b=Math.max(n,Math.floor(t-d*g/f+y)),S=Math.min(r,Math.floor(t+(f-d)*g/f+y));nN(e,t,b,S,i)}const s=e[t];let l=n,u=r;for(Zc(e,n,t),i(e[r],s)>0&&Zc(e,n,r);l<u;){for(Zc(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Zc(e,n,u):(++u,Zc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Zc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function q$(e,t,n){if(e=Float64Array.from(R$(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return tT(e);if(t>=1)return eT(e);var r,i=(r-1)*t,s=Math.floor(i),l=eT(nN(e,s).subarray(0,s+1)),u=tT(e.subarray(s+1));return l+(u-l)*(i-s)}}function F$(e,t,n=eN){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function V$(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function ra(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ti(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const F0=Symbol("implicit");function eb(){var e=new ZE,t=[],n=[],r=F0;function i(s){let l=e.get(s);if(l===void 0){if(r!==F0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ZE;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return eb(t,n).unknown(r)},ra.apply(i,arguments),i}function tb(){var e=eb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,f=0,d=0,p=.5;delete e.unknown;function g(){var y=t().length,b=i<r,S=b?i:r,A=b?r:i;s=(A-S)/Math.max(1,y-f+d*2),u&&(s=Math.floor(s)),S+=(A-S-s*(y-f))*p,l=s*(1-f),u&&(S=Math.round(S),l=Math.round(l));var E=V$(y).map(function(T){return S+s*T});return n(b?E.reverse():E)}return e.domain=function(y){return arguments.length?(t(y),g()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,g()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(u=!!y,g()):u},e.padding=function(y){return arguments.length?(f=Math.min(1,d=+y),g()):f},e.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),g()):f},e.paddingOuter=function(y){return arguments.length?(d=+y,g()):d},e.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),g()):p},e.copy=function(){return tb(t(),[r,i]).round(u).paddingInner(f).paddingOuter(d).align(p)},ra.apply(g(),arguments)}function rN(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return rN(t())},e}function K$(){return rN(tb.apply(null,arguments).paddingInner(1))}function nb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function aN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _u(){}var bu=.7,lp=1/bu,bl="\\s*([+-]?\\d+)\\s*",xu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ja="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",W$=/^#([0-9a-f]{3,8})$/,X$=new RegExp(`^rgb\\(${bl},${bl},${bl}\\)$`),Q$=new RegExp(`^rgb\\(${ja},${ja},${ja}\\)$`),Z$=new RegExp(`^rgba\\(${bl},${bl},${bl},${xu}\\)$`),J$=new RegExp(`^rgba\\(${ja},${ja},${ja},${xu}\\)$`),e8=new RegExp(`^hsl\\(${xu},${ja},${ja}\\)$`),t8=new RegExp(`^hsla\\(${xu},${ja},${ja},${xu}\\)$`),nT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nb(_u,Su,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rT,formatHex:rT,formatHex8:n8,formatHsl:r8,formatRgb:aT,toString:aT});function rT(){return this.rgb().formatHex()}function n8(){return this.rgb().formatHex8()}function r8(){return iN(this).formatHsl()}function aT(){return this.rgb().formatRgb()}function Su(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=W$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?iT(t):n===3?new cr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Cf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Cf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=X$.exec(e))?new cr(t[1],t[2],t[3],1):(t=Q$.exec(e))?new cr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Z$.exec(e))?Cf(t[1],t[2],t[3],t[4]):(t=J$.exec(e))?Cf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=e8.exec(e))?lT(t[1],t[2]/100,t[3]/100,1):(t=t8.exec(e))?lT(t[1],t[2]/100,t[3]/100,t[4]):nT.hasOwnProperty(e)?iT(nT[e]):e==="transparent"?new cr(NaN,NaN,NaN,0):null}function iT(e){return new cr(e>>16&255,e>>8&255,e&255,1)}function Cf(e,t,n,r){return r<=0&&(e=t=n=NaN),new cr(e,t,n,r)}function a8(e){return e instanceof _u||(e=Su(e)),e?(e=e.rgb(),new cr(e.r,e.g,e.b,e.opacity)):new cr}function V0(e,t,n,r){return arguments.length===1?a8(e):new cr(e,t,n,r??1)}function cr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}nb(cr,V0,aN(_u,{brighter(e){return e=e==null?lp:Math.pow(lp,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bu:Math.pow(bu,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cr(lo(this.r),lo(this.g),lo(this.b),cp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sT,formatHex:sT,formatHex8:i8,formatRgb:oT,toString:oT}));function sT(){return`#${ro(this.r)}${ro(this.g)}${ro(this.b)}`}function i8(){return`#${ro(this.r)}${ro(this.g)}${ro(this.b)}${ro((isNaN(this.opacity)?1:this.opacity)*255)}`}function oT(){const e=cp(this.opacity);return`${e===1?"rgb(":"rgba("}${lo(this.r)}, ${lo(this.g)}, ${lo(this.b)}${e===1?")":`, ${e})`}`}function cp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function lo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ro(e){return e=lo(e),(e<16?"0":"")+e.toString(16)}function lT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ya(e,t,n,r)}function iN(e){if(e instanceof ya)return new ya(e.h,e.s,e.l,e.opacity);if(e instanceof _u||(e=Su(e)),!e)return new ya;if(e instanceof ya)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,f=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=f<.5?s+i:2-s-i,l*=60):u=f>0&&f<1?0:l,new ya(l,u,f,e.opacity)}function s8(e,t,n,r){return arguments.length===1?iN(e):new ya(e,t,n,r??1)}function ya(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nb(ya,s8,aN(_u,{brighter(e){return e=e==null?lp:Math.pow(lp,e),new ya(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bu:Math.pow(bu,e),new ya(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new cr(Iy(e>=240?e-240:e+120,i,r),Iy(e,i,r),Iy(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ya(cT(this.h),Ef(this.s),Ef(this.l),cp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cp(this.opacity);return`${e===1?"hsl(":"hsla("}${cT(this.h)}, ${Ef(this.s)*100}%, ${Ef(this.l)*100}%${e===1?")":`, ${e})`}`}}));function cT(e){return e=(e||0)%360,e<0?e+360:e}function Ef(e){return Math.max(0,Math.min(1,e||0))}function Iy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rb=e=>()=>e;function o8(e,t){return function(n){return e+n*t}}function l8(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function c8(e){return(e=+e)==1?sN:function(t,n){return n-t?l8(t,n,e):rb(isNaN(t)?n:t)}}function sN(e,t){var n=t-e;return n?o8(e,n):rb(isNaN(e)?t:e)}const uT=(function e(t){var n=c8(t);function r(i,s){var l=n((i=V0(i)).r,(s=V0(s)).r),u=n(i.g,s.g),f=n(i.b,s.b),d=sN(i.opacity,s.opacity);return function(p){return i.r=l(p),i.g=u(p),i.b=f(p),i.opacity=d(p),i+""}}return r.gamma=e,r})(1);function u8(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function d8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function f8(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=jl(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function p8(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function up(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function h8(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=jl(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var K0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ry=new RegExp(K0.source,"g");function m8(e){return function(){return e}}function g8(e){return function(t){return e(t)+""}}function y8(e,t){var n=K0.lastIndex=Ry.lastIndex=0,r,i,s,l=-1,u=[],f=[];for(e=e+"",t=t+"";(r=K0.exec(e))&&(i=Ry.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,f.push({i:l,x:up(r,i)})),n=Ry.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?f[0]?g8(f[0].x):m8(t):(t=f.length,function(d){for(var p=0,g;p<t;++p)u[(g=f[p]).i]=g.x(d);return u.join("")})}function jl(e,t){var n=typeof t,r;return t==null||n==="boolean"?rb(t):(n==="number"?up:n==="string"?(r=Su(t))?(t=r,uT):y8:t instanceof Su?uT:t instanceof Date?p8:d8(t)?u8:Array.isArray(t)?f8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?h8:up)(e,t)}function ab(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function v8(e,t){t===void 0&&(t=e,e=jl);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function b8(e){return function(){return e}}function dp(e){return+e}var dT=[0,1];function Wn(e){return e}function W0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:b8(isNaN(t)?NaN:.5)}function x8(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function S8(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=W0(i,r),s=n(l,s)):(r=W0(r,i),s=n(s,l)),function(u){return s(r(u))}}function A8(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=W0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var f=Du(e,u,1,r)-1;return s[f](i[f](u))}}function Mu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vp(){var e=dT,t=dT,n=jl,r,i,s,l=Wn,u,f,d;function p(){var y=Math.min(e.length,t.length);return l!==Wn&&(l=x8(e[0],e[y-1])),u=y>2?A8:S8,f=d=null,g}function g(y){return y==null||isNaN(y=+y)?s:(f||(f=u(e.map(r),t,n)))(r(l(y)))}return g.invert=function(y){return l(i((d||(d=u(t,e.map(r),up)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,dp),p()):e.slice()},g.range=function(y){return arguments.length?(t=Array.from(y),p()):t.slice()},g.rangeRound=function(y){return t=Array.from(y),n=ab,p()},g.clamp=function(y){return arguments.length?(l=y?!0:Wn,p()):l!==Wn},g.interpolate=function(y){return arguments.length?(n=y,p()):n},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,b){return r=y,i=b,p()}}function ib(){return Vp()(Wn,Wn)}function C8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function El(e){return e=fp(Math.abs(e)),e?e[1]:NaN}function E8(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),s.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function T8(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var P8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Au(e){if(!(t=P8.exec(e)))throw new Error("invalid format: "+e);var t;return new sb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Au.prototype=sb.prototype;function sb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}sb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function w8(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var oN;function O8(e,t){var n=fp(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(oN=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+fp(e,Math.max(0,t+s-1))[0]}function fT(e,t){var n=fp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const pT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:C8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fT(e*100,t),r:fT,s:O8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function hT(e){return e}var mT=Array.prototype.map,gT=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function N8(e){var t=e.grouping===void 0||e.thousands===void 0?hT:E8(mT.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?hT:T8(mT.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"âˆ’":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function d(g){g=Au(g);var y=g.fill,b=g.align,S=g.sign,A=g.symbol,E=g.zero,T=g.width,w=g.comma,O=g.precision,_=g.trim,k=g.type;k==="n"?(w=!0,k="g"):pT[k]||(O===void 0&&(O=12),_=!0,k="g"),(E||y==="0"&&b==="=")&&(E=!0,y="0",b="=");var M=A==="$"?n:A==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",j=A==="$"?r:/[%p]/.test(k)?l:"",U=pT[k],q=/[defgprs%]/.test(k);O=O===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function L($){var G=M,Z=j,X,re,I;if(k==="c")Z=U($)+Z,$="";else{$=+$;var Y=$<0||1/$<0;if($=isNaN($)?f:U(Math.abs($),O),_&&($=w8($)),Y&&+$==0&&S!=="+"&&(Y=!1),G=(Y?S==="("?S:u:S==="-"||S==="("?"":S)+G,Z=(k==="s"?gT[8+oN/3]:"")+Z+(Y&&S==="("?")":""),q){for(X=-1,re=$.length;++X<re;)if(I=$.charCodeAt(X),48>I||I>57){Z=(I===46?i+$.slice(X+1):$.slice(X))+Z,$=$.slice(0,X);break}}}w&&!E&&($=t($,1/0));var Q=G.length+$.length+Z.length,ve=Q<T?new Array(T-Q+1).join(y):"";switch(w&&E&&($=t(ve+$,ve.length?T-Z.length:1/0),ve=""),b){case"<":$=G+$+Z+ve;break;case"=":$=G+ve+$+Z;break;case"^":$=ve.slice(0,Q=ve.length>>1)+G+$+Z+ve.slice(Q);break;default:$=ve+G+$+Z;break}return s($)}return L.toString=function(){return g+""},L}function p(g,y){var b=d((g=Au(g),g.type="f",g)),S=Math.max(-8,Math.min(8,Math.floor(El(y)/3)))*3,A=Math.pow(10,-S),E=gT[8+S/3];return function(T){return b(A*T)+E}}return{format:d,formatPrefix:p}}var Tf,ob,lN;D8({thousands:",",grouping:[3],currency:["$",""]});function D8(e){return Tf=N8(e),ob=Tf.format,lN=Tf.formatPrefix,Tf}function _8(e){return Math.max(0,-El(Math.abs(e)))}function M8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(El(t)/3)))*3-El(Math.abs(e)))}function j8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,El(t)-El(e))+1}function cN(e,t,n,r){var i=q0(e,t,n),s;switch(r=Au(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=M8(i,l))&&(r.precision=s),lN(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=j8(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=_8(i))&&(r.precision=s-(r.type==="%")*2);break}}return ob(r)}function us(e){var t=e.domain;return e.ticks=function(n){var r=t();return G0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return cN(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],f,d,p=10;for(u<l&&(d=l,l=u,u=d,d=i,i=s,s=d);p-- >0;){if(d=Y0(l,u,n),d===f)return r[i]=l,r[s]=u,t(r);if(d>0)l=Math.floor(l/d)*d,u=Math.ceil(u/d)*d;else if(d<0)l=Math.ceil(l*d)/d,u=Math.floor(u*d)/d;else break;f=d}return e},e}function uN(){var e=ib();return e.copy=function(){return Mu(e,uN())},ra.apply(e,arguments),us(e)}function dN(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,dp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return dN(e).unknown(t)},e=arguments.length?Array.from(e,dp):[0,1],us(n)}function fN(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function yT(e){return Math.log(e)}function vT(e){return Math.exp(e)}function k8(e){return-Math.log(-e)}function I8(e){return-Math.exp(-e)}function R8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function L8(e){return e===10?R8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function bT(e){return(t,n)=>-e(-t,n)}function lb(e){const t=e(yT,vT),n=t.domain;let r=10,i,s;function l(){return i=$8(r),s=L8(r),n()[0]<0?(i=bT(i),s=bT(s),e(k8,I8)):e(yT,vT),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const f=n();let d=f[0],p=f[f.length-1];const g=p<d;g&&([d,p]=[p,d]);let y=i(d),b=i(p),S,A;const E=u==null?10:+u;let T=[];if(!(r%1)&&b-y<E){if(y=Math.floor(y),b=Math.ceil(b),d>0){for(;y<=b;++y)for(S=1;S<r;++S)if(A=y<0?S/s(-y):S*s(y),!(A<d)){if(A>p)break;T.push(A)}}else for(;y<=b;++y)for(S=r-1;S>=1;--S)if(A=y>0?S/s(-y):S*s(y),!(A<d)){if(A>p)break;T.push(A)}T.length*2<E&&(T=G0(d,p,E))}else T=G0(y,b,Math.min(b-y,E)).map(s);return g?T.reverse():T},t.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Au(f)).precision==null&&(f.trim=!0),f=ob(f)),u===1/0)return f;const d=Math.max(1,r*u/t.ticks().length);return p=>{let g=p/s(Math.round(i(p)));return g*r<r-.5&&(g*=r),g<=d?f(p):""}},t.nice=()=>n(fN(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function pN(){const e=lb(Vp()).domain([1,10]);return e.copy=()=>Mu(e,pN()).base(e.base()),ra.apply(e,arguments),e}function xT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ST(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cb(e){var t=1,n=e(xT(t),ST(t));return n.constant=function(r){return arguments.length?e(xT(t=+r),ST(t)):t},us(n)}function hN(){var e=cb(Vp());return e.copy=function(){return Mu(e,hN()).constant(e.constant())},ra.apply(e,arguments)}function AT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function B8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function U8(e){return e<0?-e*e:e*e}function ub(e){var t=e(Wn,Wn),n=1;function r(){return n===1?e(Wn,Wn):n===.5?e(B8,U8):e(AT(n),AT(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},us(t)}function db(){var e=ub(Vp());return e.copy=function(){return Mu(e,db()).exponent(e.exponent())},ra.apply(e,arguments),e}function z8(){return db.apply(null,arguments).exponent(.5)}function CT(e){return Math.sign(e)*e*e}function H8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function mN(){var e=ib(),t=[0,1],n=!1,r;function i(s){var l=H8(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(CT(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,dp)).map(CT)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return mN(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ra.apply(i,arguments),us(i)}function gN(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=F$(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[Du(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(is),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return gN().domain(e).range(t).unknown(r)},ra.apply(s,arguments)}function yN(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(f){return f!=null&&f<=f?i[Du(r,f,0,n)]:s}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,u()):[e,t]},l.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},l.invertExtent=function(f){var d=i.indexOf(f);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return r.slice()},l.copy=function(){return yN().domain([e,t]).range(i).unknown(s)},ra.apply(us(l),arguments)}function vN(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Du(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return vN().domain(e).range(t).unknown(n)},ra.apply(i,arguments)}const Ly=new Date,$y=new Date;function dn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const f=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return f;let d;do f.push(d=new Date(+s)),t(s,u),e(s);while(d<s&&s<l);return f},i.filter=s=>dn(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(Ly.setTime(+s),$y.setTime(+l),e(Ly),e($y),Math.floor(n(Ly,$y))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const pp=dn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):pp);pp.range;const pi=1e3,Zr=pi*60,hi=Zr*60,vi=hi*24,fb=vi*7,ET=vi*30,By=vi*365,ao=dn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getUTCSeconds());ao.range;const pb=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pi)},(e,t)=>{e.setTime(+e+t*Zr)},(e,t)=>(t-e)/Zr,e=>e.getMinutes());pb.range;const hb=dn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Zr)},(e,t)=>(t-e)/Zr,e=>e.getUTCMinutes());hb.range;const mb=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pi-e.getMinutes()*Zr)},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getHours());mb.range;const gb=dn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getUTCHours());gb.range;const ju=dn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zr)/vi,e=>e.getDate()-1);ju.range;const Kp=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vi,e=>e.getUTCDate()-1);Kp.range;const bN=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vi,e=>Math.floor(e/vi));bN.range;function Co(e){return dn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Zr)/fb)}const Wp=Co(0),hp=Co(1),G8=Co(2),Y8=Co(3),Tl=Co(4),q8=Co(5),F8=Co(6);Wp.range;hp.range;G8.range;Y8.range;Tl.range;q8.range;F8.range;function Eo(e){return dn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/fb)}const Xp=Eo(0),mp=Eo(1),V8=Eo(2),K8=Eo(3),Pl=Eo(4),W8=Eo(5),X8=Eo(6);Xp.range;mp.range;V8.range;K8.range;Pl.range;W8.range;X8.range;const yb=dn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());yb.range;const vb=dn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vb.range;const bi=dn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});bi.range;const xi=dn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});xi.range;function xN(e,t,n,r,i,s){const l=[[ao,1,pi],[ao,5,5*pi],[ao,15,15*pi],[ao,30,30*pi],[s,1,Zr],[s,5,5*Zr],[s,15,15*Zr],[s,30,30*Zr],[i,1,hi],[i,3,3*hi],[i,6,6*hi],[i,12,12*hi],[r,1,vi],[r,2,2*vi],[n,1,fb],[t,1,ET],[t,3,3*ET],[e,1,By]];function u(d,p,g){const y=p<d;y&&([d,p]=[p,d]);const b=g&&typeof g.range=="function"?g:f(d,p,g),S=b?b.range(d,+p+1):[];return y?S.reverse():S}function f(d,p,g){const y=Math.abs(p-d)/g,b=Jv(([,,E])=>E).right(l,y);if(b===l.length)return e.every(q0(d/By,p/By,g));if(b===0)return pp.every(Math.max(q0(d,p,g),1));const[S,A]=l[y/l[b-1][2]<l[b][2]/y?b-1:b];return S.every(A)}return[u,f]}const[Q8,Z8]=xN(xi,vb,Xp,bN,gb,hb),[J8,eB]=xN(bi,yb,Wp,ju,mb,pb);function Uy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Jc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function tB(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,f=e.shortMonths,d=eu(i),p=tu(i),g=eu(s),y=tu(s),b=eu(l),S=tu(l),A=eu(u),E=tu(u),T=eu(f),w=tu(f),O={a:Y,A:Q,b:ve,B:R,c:null,d:DT,e:DT,f:EB,g:kB,G:RB,H:SB,I:AB,j:CB,L:SN,m:TB,M:PB,p:V,q:K,Q:jT,s:kT,S:wB,u:OB,U:NB,V:DB,w:_B,W:MB,x:null,X:null,y:jB,Y:IB,Z:LB,"%":MT},_={a:ae,A:me,b:Se,B:Ae,c:null,d:_T,e:_T,f:zB,g:QB,G:JB,H:$B,I:BB,j:UB,L:CN,m:HB,M:GB,p:Me,q:Ne,Q:jT,s:kT,S:YB,u:qB,U:FB,V:VB,w:KB,W:WB,x:null,X:null,y:XB,Y:ZB,Z:e6,"%":MT},k={a:L,A:$,b:G,B:Z,c:X,d:OT,e:OT,f:yB,g:wT,G:PT,H:NT,I:NT,j:pB,L:gB,m:fB,M:hB,p:q,q:dB,Q:bB,s:xB,S:mB,u:sB,U:oB,V:lB,w:iB,W:cB,x:re,X:I,y:wT,Y:PT,Z:uB,"%":vB};O.x=M(n,O),O.X=M(r,O),O.c=M(t,O),_.x=M(n,_),_.X=M(r,_),_.c=M(t,_);function M(xe,$e){return function(He){var ye=[],vt=-1,Xe=0,Yt=xe.length,Bt,Et,xa;for(He instanceof Date||(He=new Date(+He));++vt<Yt;)xe.charCodeAt(vt)===37&&(ye.push(xe.slice(Xe,vt)),(Et=TT[Bt=xe.charAt(++vt)])!=null?Bt=xe.charAt(++vt):Et=Bt==="e"?" ":"0",(xa=$e[Bt])&&(Bt=xa(He,Et)),ye.push(Bt),Xe=vt+1);return ye.push(xe.slice(Xe,vt)),ye.join("")}}function j(xe,$e){return function(He){var ye=Jc(1900,void 0,1),vt=U(ye,xe,He+="",0),Xe,Yt;if(vt!=He.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if($e&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(Xe=zy(Jc(ye.y,0,1)),Yt=Xe.getUTCDay(),Xe=Yt>4||Yt===0?mp.ceil(Xe):mp(Xe),Xe=Kp.offset(Xe,(ye.V-1)*7),ye.y=Xe.getUTCFullYear(),ye.m=Xe.getUTCMonth(),ye.d=Xe.getUTCDate()+(ye.w+6)%7):(Xe=Uy(Jc(ye.y,0,1)),Yt=Xe.getDay(),Xe=Yt>4||Yt===0?hp.ceil(Xe):hp(Xe),Xe=ju.offset(Xe,(ye.V-1)*7),ye.y=Xe.getFullYear(),ye.m=Xe.getMonth(),ye.d=Xe.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Yt="Z"in ye?zy(Jc(ye.y,0,1)).getUTCDay():Uy(Jc(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Yt+5)%7:ye.w+ye.U*7-(Yt+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,zy(ye)):Uy(ye)}}function U(xe,$e,He,ye){for(var vt=0,Xe=$e.length,Yt=He.length,Bt,Et;vt<Xe;){if(ye>=Yt)return-1;if(Bt=$e.charCodeAt(vt++),Bt===37){if(Bt=$e.charAt(vt++),Et=k[Bt in TT?$e.charAt(vt++):Bt],!Et||(ye=Et(xe,He,ye))<0)return-1}else if(Bt!=He.charCodeAt(ye++))return-1}return ye}function q(xe,$e,He){var ye=d.exec($e.slice(He));return ye?(xe.p=p.get(ye[0].toLowerCase()),He+ye[0].length):-1}function L(xe,$e,He){var ye=b.exec($e.slice(He));return ye?(xe.w=S.get(ye[0].toLowerCase()),He+ye[0].length):-1}function $(xe,$e,He){var ye=g.exec($e.slice(He));return ye?(xe.w=y.get(ye[0].toLowerCase()),He+ye[0].length):-1}function G(xe,$e,He){var ye=T.exec($e.slice(He));return ye?(xe.m=w.get(ye[0].toLowerCase()),He+ye[0].length):-1}function Z(xe,$e,He){var ye=A.exec($e.slice(He));return ye?(xe.m=E.get(ye[0].toLowerCase()),He+ye[0].length):-1}function X(xe,$e,He){return U(xe,t,$e,He)}function re(xe,$e,He){return U(xe,n,$e,He)}function I(xe,$e,He){return U(xe,r,$e,He)}function Y(xe){return l[xe.getDay()]}function Q(xe){return s[xe.getDay()]}function ve(xe){return f[xe.getMonth()]}function R(xe){return u[xe.getMonth()]}function V(xe){return i[+(xe.getHours()>=12)]}function K(xe){return 1+~~(xe.getMonth()/3)}function ae(xe){return l[xe.getUTCDay()]}function me(xe){return s[xe.getUTCDay()]}function Se(xe){return f[xe.getUTCMonth()]}function Ae(xe){return u[xe.getUTCMonth()]}function Me(xe){return i[+(xe.getUTCHours()>=12)]}function Ne(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var $e=M(xe+="",O);return $e.toString=function(){return xe},$e},parse:function(xe){var $e=j(xe+="",!1);return $e.toString=function(){return xe},$e},utcFormat:function(xe){var $e=M(xe+="",_);return $e.toString=function(){return xe},$e},utcParse:function(xe){var $e=j(xe+="",!0);return $e.toString=function(){return xe},$e}}}var TT={"-":"",_:" ",0:"0"},An=/^\s*\d+/,nB=/^%/,rB=/[\\^$*+?|[\]().{}]/g;function at(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function aB(e){return e.replace(rB,"\\$&")}function eu(e){return new RegExp("^(?:"+e.map(aB).join("|")+")","i")}function tu(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function iB(e,t,n){var r=An.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function sB(e,t,n){var r=An.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function oB(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function lB(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function cB(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function PT(e,t,n){var r=An.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function wT(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function uB(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function dB(e,t,n){var r=An.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function fB(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function OT(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function pB(e,t,n){var r=An.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function NT(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function hB(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function mB(e,t,n){var r=An.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function gB(e,t,n){var r=An.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function yB(e,t,n){var r=An.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vB(e,t,n){var r=nB.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function bB(e,t,n){var r=An.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function xB(e,t,n){var r=An.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function DT(e,t){return at(e.getDate(),t,2)}function SB(e,t){return at(e.getHours(),t,2)}function AB(e,t){return at(e.getHours()%12||12,t,2)}function CB(e,t){return at(1+ju.count(bi(e),e),t,3)}function SN(e,t){return at(e.getMilliseconds(),t,3)}function EB(e,t){return SN(e,t)+"000"}function TB(e,t){return at(e.getMonth()+1,t,2)}function PB(e,t){return at(e.getMinutes(),t,2)}function wB(e,t){return at(e.getSeconds(),t,2)}function OB(e){var t=e.getDay();return t===0?7:t}function NB(e,t){return at(Wp.count(bi(e)-1,e),t,2)}function AN(e){var t=e.getDay();return t>=4||t===0?Tl(e):Tl.ceil(e)}function DB(e,t){return e=AN(e),at(Tl.count(bi(e),e)+(bi(e).getDay()===4),t,2)}function _B(e){return e.getDay()}function MB(e,t){return at(hp.count(bi(e)-1,e),t,2)}function jB(e,t){return at(e.getFullYear()%100,t,2)}function kB(e,t){return e=AN(e),at(e.getFullYear()%100,t,2)}function IB(e,t){return at(e.getFullYear()%1e4,t,4)}function RB(e,t){var n=e.getDay();return e=n>=4||n===0?Tl(e):Tl.ceil(e),at(e.getFullYear()%1e4,t,4)}function LB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function _T(e,t){return at(e.getUTCDate(),t,2)}function $B(e,t){return at(e.getUTCHours(),t,2)}function BB(e,t){return at(e.getUTCHours()%12||12,t,2)}function UB(e,t){return at(1+Kp.count(xi(e),e),t,3)}function CN(e,t){return at(e.getUTCMilliseconds(),t,3)}function zB(e,t){return CN(e,t)+"000"}function HB(e,t){return at(e.getUTCMonth()+1,t,2)}function GB(e,t){return at(e.getUTCMinutes(),t,2)}function YB(e,t){return at(e.getUTCSeconds(),t,2)}function qB(e){var t=e.getUTCDay();return t===0?7:t}function FB(e,t){return at(Xp.count(xi(e)-1,e),t,2)}function EN(e){var t=e.getUTCDay();return t>=4||t===0?Pl(e):Pl.ceil(e)}function VB(e,t){return e=EN(e),at(Pl.count(xi(e),e)+(xi(e).getUTCDay()===4),t,2)}function KB(e){return e.getUTCDay()}function WB(e,t){return at(mp.count(xi(e)-1,e),t,2)}function XB(e,t){return at(e.getUTCFullYear()%100,t,2)}function QB(e,t){return e=EN(e),at(e.getUTCFullYear()%100,t,2)}function ZB(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function JB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pl(e):Pl.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function e6(){return"+0000"}function MT(){return"%"}function jT(e){return+e}function kT(e){return Math.floor(+e/1e3)}var dl,TN,PN;t6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function t6(e){return dl=tB(e),TN=dl.format,dl.parse,PN=dl.utcFormat,dl.utcParse,dl}function n6(e){return new Date(e)}function r6(e){return e instanceof Date?+e:+new Date(+e)}function bb(e,t,n,r,i,s,l,u,f,d){var p=ib(),g=p.invert,y=p.domain,b=d(".%L"),S=d(":%S"),A=d("%I:%M"),E=d("%I %p"),T=d("%a %d"),w=d("%b %d"),O=d("%B"),_=d("%Y");function k(M){return(f(M)<M?b:u(M)<M?S:l(M)<M?A:s(M)<M?E:r(M)<M?i(M)<M?T:w:n(M)<M?O:_)(M)}return p.invert=function(M){return new Date(g(M))},p.domain=function(M){return arguments.length?y(Array.from(M,r6)):y().map(n6)},p.ticks=function(M){var j=y();return e(j[0],j[j.length-1],M??10)},p.tickFormat=function(M,j){return j==null?k:d(j)},p.nice=function(M){var j=y();return(!M||typeof M.range!="function")&&(M=t(j[0],j[j.length-1],M??10)),M?y(fN(j,M)):p},p.copy=function(){return Mu(p,bb(e,t,n,r,i,s,l,u,f,d))},p}function a6(){return ra.apply(bb(J8,eB,bi,yb,Wp,ju,mb,pb,ao,TN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function i6(){return ra.apply(bb(Q8,Z8,xi,vb,Xp,Kp,gb,hb,ao,PN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qp(){var e=0,t=1,n,r,i,s,l=Wn,u=!1,f;function d(g){return g==null||isNaN(g=+g)?f:l(i===0?.5:(g=(s(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([e,t]=g,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(g){return arguments.length?(u=!!g,d):u},d.interpolator=function(g){return arguments.length?(l=g,d):l};function p(g){return function(y){var b,S;return arguments.length?([b,S]=y,l=g(b,S),d):[l(0),l(1)]}}return d.range=p(jl),d.rangeRound=p(ab),d.unknown=function(g){return arguments.length?(f=g,d):f},function(g){return s=g,n=g(e),r=g(t),i=n===r?0:1/(r-n),d}}function ds(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wN(){var e=us(Qp()(Wn));return e.copy=function(){return ds(e,wN())},Ti.apply(e,arguments)}function ON(){var e=lb(Qp()).domain([1,10]);return e.copy=function(){return ds(e,ON()).base(e.base())},Ti.apply(e,arguments)}function NN(){var e=cb(Qp());return e.copy=function(){return ds(e,NN()).constant(e.constant())},Ti.apply(e,arguments)}function xb(){var e=ub(Qp());return e.copy=function(){return ds(e,xb()).exponent(e.exponent())},Ti.apply(e,arguments)}function s6(){return xb.apply(null,arguments).exponent(.5)}function DN(){var e=[],t=Wn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Du(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(is),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>q$(e,s/r))},n.copy=function(){return DN(t).domain(e)},Ti.apply(n,arguments)}function Zp(){var e=0,t=.5,n=1,r=1,i,s,l,u,f,d=Wn,p,g=!1,y;function b(A){return isNaN(A=+A)?y:(A=.5+((A=+p(A))-s)*(r*A<r*s?u:f),d(g?Math.max(0,Math.min(1,A)):A))}b.domain=function(A){return arguments.length?([e,t,n]=A,i=p(e=+e),s=p(t=+t),l=p(n=+n),u=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,b):[e,t,n]},b.clamp=function(A){return arguments.length?(g=!!A,b):g},b.interpolator=function(A){return arguments.length?(d=A,b):d};function S(A){return function(E){var T,w,O;return arguments.length?([T,w,O]=E,d=v8(A,[T,w,O]),b):[d(0),d(.5),d(1)]}}return b.range=S(jl),b.rangeRound=S(ab),b.unknown=function(A){return arguments.length?(y=A,b):y},function(A){return p=A,i=A(e),s=A(t),l=A(n),u=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,b}}function _N(){var e=us(Zp()(Wn));return e.copy=function(){return ds(e,_N())},Ti.apply(e,arguments)}function MN(){var e=lb(Zp()).domain([.1,1,10]);return e.copy=function(){return ds(e,MN()).base(e.base())},Ti.apply(e,arguments)}function jN(){var e=cb(Zp());return e.copy=function(){return ds(e,jN()).constant(e.constant())},Ti.apply(e,arguments)}function Sb(){var e=ub(Zp());return e.copy=function(){return ds(e,Sb()).exponent(e.exponent())},Ti.apply(e,arguments)}function o6(){return Sb.apply(null,arguments).exponent(.5)}const su=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:tb,scaleDiverging:_N,scaleDivergingLog:MN,scaleDivergingPow:Sb,scaleDivergingSqrt:o6,scaleDivergingSymlog:jN,scaleIdentity:dN,scaleImplicit:F0,scaleLinear:uN,scaleLog:pN,scaleOrdinal:eb,scalePoint:K$,scalePow:db,scaleQuantile:gN,scaleQuantize:yN,scaleRadial:mN,scaleSequential:wN,scaleSequentialLog:ON,scaleSequentialPow:xb,scaleSequentialQuantile:DN,scaleSequentialSqrt:s6,scaleSequentialSymlog:NN,scaleSqrt:z8,scaleSymlog:hN,scaleThreshold:vN,scaleTime:a6,scaleUtc:i6,tickFormat:cN},Symbol.toStringTag,{value:"Module"}));var fs=e=>e.chartData,Ab=se([fs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Cb=(e,t,n,r)=>r?Ab(e):fs(e);function wl(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Mr(t)&&Mr(n))return!0}return!1}function IT(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function l6(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(Mr(n))i=n;else if(typeof n=="function")return;if(Mr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(wl(l))return l}}function c6(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(wl(r))return IT(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(_e(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&TE.test(i)){var f=TE.exec(i);if(f==null||t==null)l=void 0;else{var d=+f[1];l=t[0]-d}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(_e(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&PE.test(s)){var p=PE.exec(s);if(p==null||t==null)u=void 0;else{var g=+p[1];u=t[1]+g}}else u=t?.[1];var y=[l,u];if(wl(y))return t==null?y:IT(y,t,n)}}}var kl=1e9,u6={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Tb,kt=!0,ea="[DecimalError] ",co=ea+"Invalid argument: ",Eb=ea+"Exponent out of range: ",Il=Math.floor,to=Math.pow,d6=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Or,bn=1e7,Ot=7,kN=9007199254740991,gp=Il(kN/Ot),Te={};Te.absoluteValue=Te.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Te.comparedTo=Te.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Te.decimalPlaces=Te.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ot;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Te.dividedBy=Te.div=function(e){return gi(this,new this.constructor(e))};Te.dividedToIntegerBy=Te.idiv=function(e){var t=this,n=t.constructor;return St(gi(t,new n(e),0,1),n.precision)};Te.equals=Te.eq=function(e){return!this.cmp(e)};Te.exponent=function(){return nn(this)};Te.greaterThan=Te.gt=function(e){return this.cmp(e)>0};Te.greaterThanOrEqualTo=Te.gte=function(e){return this.cmp(e)>=0};Te.isInteger=Te.isint=function(){return this.e>this.d.length-2};Te.isNegative=Te.isneg=function(){return this.s<0};Te.isPositive=Te.ispos=function(){return this.s>0};Te.isZero=function(){return this.s===0};Te.lessThan=Te.lt=function(e){return this.cmp(e)<0};Te.lessThanOrEqualTo=Te.lte=function(e){return this.cmp(e)<1};Te.logarithm=Te.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Or))throw Error(ea+"NaN");if(n.s<1)throw Error(ea+(n.s?"NaN":"-Infinity"));return n.eq(Or)?new r(0):(kt=!1,t=gi(Cu(n,s),Cu(e,s),s),kt=!0,St(t,i))};Te.minus=Te.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LN(t,e):IN(t,(e.s=-e.s,e))};Te.modulo=Te.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(ea+"NaN");return n.s?(kt=!1,t=gi(n,e,0,1).times(e),kt=!0,n.minus(t)):St(new r(n),i)};Te.naturalExponential=Te.exp=function(){return RN(this)};Te.naturalLogarithm=Te.ln=function(){return Cu(this)};Te.negated=Te.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Te.plus=Te.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?IN(t,e):LN(t,(e.s=-e.s,e))};Te.precision=Te.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(co+e);if(t=nn(i)+1,r=i.d.length-1,n=r*Ot+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Te.squareRoot=Te.sqrt=function(){var e,t,n,r,i,s,l,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(ea+"NaN")}for(e=nn(u),kt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=Ma(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Il((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=l=n+3;;)if(s=r,r=s.plus(gi(u,s,l+2)).times(.5),Ma(s.d).slice(0,l)===(t=Ma(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(St(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return kt=!0,St(r,n)};Te.times=Te.mul=function(e){var t,n,r,i,s,l,u,f,d,p=this,g=p.constructor,y=p.d,b=(e=new g(e)).d;if(!p.s||!e.s)return new g(0);for(e.s*=p.s,n=p.e+e.e,f=y.length,d=b.length,f<d&&(s=y,y=b,b=s,l=f,f=d,d=l),s=[],l=f+d,r=l;r--;)s.push(0);for(r=d;--r>=0;){for(t=0,i=f+r;i>r;)u=s[i]+b[r]*y[i-r-1]+t,s[i--]=u%bn|0,t=u/bn|0;s[i]=(s[i]+t)%bn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,kt?St(e,g.precision):e};Te.toDecimalPlaces=Te.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ia(e,0,kl),t===void 0?t=r.rounding:Ia(t,0,8),St(n,e+nn(n)+1,t))};Te.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=go(r,!0):(Ia(e,0,kl),t===void 0?t=i.rounding:Ia(t,0,8),r=St(new i(r),e+1,t),n=go(r,!0,e+1)),n};Te.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?go(i):(Ia(e,0,kl),t===void 0?t=s.rounding:Ia(t,0,8),r=St(new s(i),e+nn(i)+1,t),n=go(r.abs(),!1,e+nn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Te.toInteger=Te.toint=function(){var e=this,t=e.constructor;return St(new t(e),nn(e)+1,t.rounding)};Te.toNumber=function(){return+this};Te.toPower=Te.pow=function(e){var t,n,r,i,s,l,u=this,f=u.constructor,d=12,p=+(e=new f(e));if(!e.s)return new f(Or);if(u=new f(u),!u.s){if(e.s<1)throw Error(ea+"Infinity");return u}if(u.eq(Or))return u;if(r=f.precision,e.eq(Or))return St(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=p<0?-p:p)<=kN){for(i=new f(Or),t=Math.ceil(r/Ot+4),kt=!1;n%2&&(i=i.times(u),LT(i.d,t)),n=Il(n/2),n!==0;)u=u.times(u),LT(u.d,t);return kt=!0,e.s<0?new f(Or).div(i):St(i,r)}}else if(s<0)throw Error(ea+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,kt=!1,i=e.times(Cu(u,r+d)),kt=!0,i=RN(i),i.s=s,i};Te.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=nn(i),r=go(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ia(e,1,kl),t===void 0?t=s.rounding:Ia(t,0,8),i=St(new s(i),e,t),n=nn(i),r=go(i,e<=n||n<=s.toExpNeg,e)),r};Te.toSignificantDigits=Te.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ia(e,1,kl),t===void 0?t=r.rounding:Ia(t,0,8)),St(new r(n),e,t)};Te.toString=Te.valueOf=Te.val=Te.toJSON=Te[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=nn(e),n=e.constructor;return go(e,t<=n.toExpNeg||t>=n.toExpPos)};function IN(e,t){var n,r,i,s,l,u,f,d,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),kt?St(t,g):t;if(f=e.d,d=t.d,l=e.e,i=t.e,f=f.slice(),s=l-i,s){for(s<0?(r=f,s=-s,u=d.length):(r=d,i=l,u=f.length),l=Math.ceil(g/Ot),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=f.length,s=d.length,u-s<0&&(s=u,r=d,d=f,f=r),n=0;s;)n=(f[--s]=f[s]+d[s]+n)/bn|0,f[s]%=bn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return t.d=f,t.e=i,kt?St(t,g):t}function Ia(e,t,n){if(e!==~~e||e<t||e>n)throw Error(co+e)}function Ma(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=Ot-r.length,n&&(s+=es(n)),s+=r;l=e[t],r=l+"",n=Ot-r.length,n&&(s+=es(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var gi=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%bn|0,l=s/bn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,f;if(s!=l)f=s>l?1:-1;else for(u=f=0;u<s;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*bn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,f,d,p,g,y,b,S,A,E,T,w,O,_,k,M,j,U,q=r.constructor,L=r.s==i.s?1:-1,$=r.d,G=i.d;if(!r.s)return new q(r);if(!i.s)throw Error(ea+"Division by zero");for(f=r.e-i.e,j=G.length,k=$.length,b=new q(L),S=b.d=[],d=0;G[d]==($[d]||0);)++d;if(G[d]>($[d]||0)&&--f,s==null?w=s=q.precision:l?w=s+(nn(r)-nn(i))+1:w=s,w<0)return new q(0);if(w=w/Ot+2|0,d=0,j==1)for(p=0,G=G[0],w++;(d<k||p)&&w--;d++)O=p*bn+($[d]||0),S[d]=O/G|0,p=O%G|0;else{for(p=bn/(G[0]+1)|0,p>1&&(G=e(G,p),$=e($,p),j=G.length,k=$.length),_=j,A=$.slice(0,j),E=A.length;E<j;)A[E++]=0;U=G.slice(),U.unshift(0),M=G[0],G[1]>=bn/2&&++M;do p=0,u=t(G,A,j,E),u<0?(T=A[0],j!=E&&(T=T*bn+(A[1]||0)),p=T/M|0,p>1?(p>=bn&&(p=bn-1),g=e(G,p),y=g.length,E=A.length,u=t(g,A,y,E),u==1&&(p--,n(g,j<y?U:G,y))):(p==0&&(u=p=1),g=G.slice()),y=g.length,y<E&&g.unshift(0),n(A,g,E),u==-1&&(E=A.length,u=t(G,A,j,E),u<1&&(p++,n(A,j<E?U:G,E))),E=A.length):u===0&&(p++,A=[0]),S[d++]=p,u&&A[0]?A[E++]=$[_]||0:(A=[$[_]],E=1);while((_++<k||A[0]!==void 0)&&w--)}return S[0]||S.shift(),b.e=f,St(b,l?s+nn(b)+1:s)}})();function RN(e,t){var n,r,i,s,l,u,f=0,d=0,p=e.constructor,g=p.precision;if(nn(e)>16)throw Error(Eb+nn(e));if(!e.s)return new p(Or);for(kt=!1,u=g,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(r=Math.log(to(2,d))/Math.LN10*2+5|0,u+=r,n=i=s=new p(Or),p.precision=u;;){if(i=St(i.times(e),u),n=n.times(++f),l=s.plus(gi(i,n,u)),Ma(l.d).slice(0,u)===Ma(s.d).slice(0,u)){for(;d--;)s=St(s.times(s),u);return p.precision=g,t==null?(kt=!0,St(s,g)):s}s=l}}function nn(e){for(var t=e.e*Ot,n=e.d[0];n>=10;n/=10)t++;return t}function Hy(e,t,n){if(t>e.LN10.sd())throw kt=!0,n&&(e.precision=n),Error(ea+"LN10 precision limit exceeded");return St(new e(e.LN10),t)}function es(e){for(var t="";e--;)t+="0";return t}function Cu(e,t){var n,r,i,s,l,u,f,d,p,g=1,y=10,b=e,S=b.d,A=b.constructor,E=A.precision;if(b.s<1)throw Error(ea+(b.s?"NaN":"-Infinity"));if(b.eq(Or))return new A(0);if(t==null?(kt=!1,d=E):d=t,b.eq(10))return t==null&&(kt=!0),Hy(A,d);if(d+=y,A.precision=d,n=Ma(S),r=n.charAt(0),s=nn(b),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(e),n=Ma(b.d),r=n.charAt(0),g++;s=nn(b),r>1?(b=new A("0."+n),s++):b=new A(r+"."+n.slice(1))}else return f=Hy(A,d+2,E).times(s+""),b=Cu(new A(r+"."+n.slice(1)),d-y).plus(f),A.precision=E,t==null?(kt=!0,St(b,E)):b;for(u=l=b=gi(b.minus(Or),b.plus(Or),d),p=St(b.times(b),d),i=3;;){if(l=St(l.times(p),d),f=u.plus(gi(l,new A(i),d)),Ma(f.d).slice(0,d)===Ma(u.d).slice(0,d))return u=u.times(2),s!==0&&(u=u.plus(Hy(A,d+2,E).times(s+""))),u=gi(u,new A(g),d),A.precision=E,t==null?(kt=!0,St(u,E)):u;u=f,i+=2}}function RT(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Il(n/Ot),e.d=[],r=(n+1)%Ot,n<0&&(r+=Ot),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Ot;r<i;)e.d.push(+t.slice(r,r+=Ot));t=t.slice(r),r=Ot-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),kt&&(e.e>gp||e.e<-gp))throw Error(Eb+n)}else e.s=0,e.e=0,e.d=[0];return e}function St(e,t,n){var r,i,s,l,u,f,d,p,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=Ot,i=t,d=g[p=0];else{if(p=Math.ceil((r+1)/Ot),s=g.length,p>=s)return e;for(d=s=g[p],l=1;s>=10;s/=10)l++;r%=Ot,i=r-Ot+l}if(n!==void 0&&(s=to(10,l-i-1),u=d/s%10|0,f=t<0||g[p+1]!==void 0||d%s,f=n<4?(u||f)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?d/to(10,l-i):0:g[p-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return f?(s=nn(e),g.length=1,t=t-s-1,g[0]=to(10,(Ot-t%Ot)%Ot),e.e=Il(-t/Ot)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(r==0?(g.length=p,s=1,p--):(g.length=p+1,s=to(10,Ot-r),g[p]=i>0?(d/to(10,l-i)%to(10,i)|0)*s:0),f)for(;;)if(p==0){(g[0]+=s)==bn&&(g[0]=1,++e.e);break}else{if(g[p]+=s,g[p]!=bn)break;g[p--]=0,s=1}for(r=g.length;g[--r]===0;)g.pop();if(kt&&(e.e>gp||e.e<-gp))throw Error(Eb+nn(e));return e}function LN(e,t){var n,r,i,s,l,u,f,d,p,g,y=e.constructor,b=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),kt?St(t,b):t;if(f=e.d,g=t.d,r=t.e,d=e.e,f=f.slice(),l=d-r,l){for(p=l<0,p?(n=f,l=-l,u=g.length):(n=g,r=d,u=f.length),i=Math.max(Math.ceil(b/Ot),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=g.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(f[i]!=g[i]){p=f[i]<g[i];break}l=0}for(p&&(n=f,f=g,g=n,t.s=-t.s),u=f.length,i=g.length-u;i>0;--i)f[u++]=0;for(i=g.length;i>l;){if(f[--i]<g[i]){for(s=i;s&&f[--s]===0;)f[s]=bn-1;--f[s],f[i]+=bn}f[i]-=g[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,kt?St(t,b):t):new y(0)}function go(e,t,n){var r,i=nn(e),s=Ma(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+es(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+es(-i-1)+s,n&&(r=n-l)>0&&(s+=es(r))):i>=l?(s+=es(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+es(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=es(r))),e.s<0?"-"+s:s}function LT(e,t){if(e.length>t)return e.length=t,!0}function $N(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(co+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return RT(l,s.toString())}else if(typeof s!="string")throw Error(co+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,d6.test(s))RT(l,s);else throw Error(co+s)}if(i.prototype=Te,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=$N,i.config=i.set=f6,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function f6(e){if(!e||typeof e!="object")throw Error(ea+"Object expected");var t,n,r,i=["precision",1,kl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Il(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(co+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(co+n+": "+r);return this}var Tb=$N(u6);Or=new Tb(1);const ft=Tb;var p6=e=>e,BN={},UN=e=>e===BN,$T=e=>function t(){return arguments.length===0||arguments.length===1&&UN(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},zN=(e,t)=>e===1?t:$T(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==BN).length;return s>=e?t(...r):zN(e-s,$T(function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var d=r.map(p=>UN(p)?u.shift():p);return t(...d,...u)}))}),Jp=e=>zN(e.length,e),X0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},h6=Jp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),m6=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return p6;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,f)=>f(u),s(...arguments))}},Q0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),HN=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var f;return l===((f=t)===null||f===void 0?void 0:f[u])})||(t=i,n=e(...i)),n}};function GN(e){var t;return e===0?t=1:t=Math.floor(new ft(e).abs().log(10).toNumber())+1,t}function YN(e,t,n){for(var r=new ft(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Jp((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Jp((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Jp((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var qN=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},FN=(e,t,n)=>{if(e.lte(0))return new ft(0);var r=GN(e.toNumber()),i=new ft(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new ft(Math.ceil(s.div(l).toNumber())).add(n).mul(l),f=u.mul(i);return t?new ft(f.toNumber()):new ft(Math.ceil(f.toNumber()))},g6=(e,t,n)=>{var r=new ft(1),i=new ft(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new ft(10).pow(GN(e)-1),i=new ft(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new ft(Math.floor(e)))}else e===0?i=new ft(Math.floor((t-1)/2)):n||(i=new ft(Math.floor(e)));var l=Math.floor((t-1)/2),u=m6(h6(f=>i.add(new ft(f-l).mul(r)).toNumber()),X0);return u(0,t)},VN=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new ft(0),tickMin:new ft(0),tickMax:new ft(0)};var l=FN(new ft(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new ft(0):(u=new ft(t).add(n).div(2),u=u.sub(new ft(u).mod(l)));var f=Math.ceil(u.sub(t).div(l).toNumber()),d=Math.ceil(new ft(n).sub(u).div(l).toNumber()),p=f+d+1;return p>r?VN(t,n,r,i,s+1):(p<r&&(d=n>0?d+(r-p):d,f=n>0?f:f+(r-p)),{step:l,tickMin:u.sub(new ft(f).mul(l)),tickMax:u.add(new ft(d).mul(l))})};function y6(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=qN([t,n]);if(l===-1/0||u===1/0){var f=u===1/0?[l,...X0(0,r-1).map(()=>1/0)]:[...X0(0,r-1).map(()=>-1/0),u];return t>n?Q0(f):f}if(l===u)return g6(l,r,i);var{step:d,tickMin:p,tickMax:g}=VN(l,u,s,i,0),y=YN(p,g.add(new ft(.1).mul(d)),d);return t>n?Q0(y):y}function v6(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=qN([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),f=FN(new ft(l).sub(s).div(u-1),i,0),d=[...YN(new ft(s),new ft(l),f),l];return i===!1&&(d=d.map(p=>Math.round(p))),n>r?Q0(d):d}var b6=HN(y6),x6=HN(v6),KN=e=>e.rootProps.maxBarSize,S6=e=>e.rootProps.barGap,WN=e=>e.rootProps.barCategoryGap,A6=e=>e.rootProps.barSize,ku=e=>e.rootProps.stackOffset,Pb=e=>e.options.chartName,wb=e=>e.rootProps.syncId,XN=e=>e.rootProps.syncMethod,Ob=e=>e.options.eventEmitter,di={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},wr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},eh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},C6={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:di.angleAxisId,includeHidden:!1,name:void 0,reversed:di.reversed,scale:di.scale,tick:di.tick,tickCount:void 0,ticks:void 0,type:di.type,unit:void 0},E6={allowDataOverflow:wr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wr.scale,tick:wr.tick,tickCount:wr.tickCount,ticks:void 0,type:wr.type,unit:void 0},T6={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:di.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:di.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:di.scale,tick:di.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},P6={allowDataOverflow:wr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wr.scale,tick:wr.tick,tickCount:wr.tickCount,ticks:void 0,type:"category",unit:void 0},Nb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?T6:C6,Db=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?P6:E6,th=e=>e.polarOptions,_b=se([Ci,Ei,un],M2),QN=se([th,_b],(e,t)=>{if(e!=null)return zn(e.innerRadius,t,0)}),ZN=se([th,_b],(e,t)=>{if(e!=null)return zn(e.outerRadius,t,t*.8)}),w6=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},JN=se([th],w6);se([Nb,JN],eh);var eD=se([_b,QN,ZN],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});se([Db,eD],eh);var tD=se([it,th,QN,ZN,Ci,Ei],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:f,endAngle:d}=t;return{cx:zn(l,i,i/2),cy:zn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:d,clockWise:!1}}}),Rt=(e,t)=>t,Iu=(e,t,n)=>n;function Mb(e){return e?.id}var fn=e=>{var t=it(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Rl=e=>e.tooltip.settings.axisId,Cn=e=>{var t=fn(e),n=Rl(e);return Ru(e,t,n)},nD=se([Cn],e=>e?.dataKey);function rD(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var f,d=(f=u.data)!==null&&f!==void 0?f:r;if(!(d==null||d.length===0)){var p=Mb(u);d.forEach((g,y)=>{var b=s==null||i?y:String(jt(g,s,null)),S=jt(g,u.dataKey,0),A;l.has(b)?A=l.get(b):A={},Object.assign(A,{[p]:S}),l.set(b,A)})}}),Array.from(l.values())}function nh(e){return e.stackId!=null&&e.dataKey!=null}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(r){O6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O6(e,t,n){return(t=N6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N6(e){var t=D6(e,"string");return typeof t=="symbol"?t:t+""}function D6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z0=[0,"auto"],Cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},aD=(e,t)=>e.cartesianAxis.xAxis[t],ps=(e,t)=>{var n=aD(e,t);return n??Cr},Er={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Z0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Nu},iD=(e,t)=>e.cartesianAxis.yAxis[t],hs=(e,t)=>{var n=iD(e,t);return n??Er},_6={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},jb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??_6},Xt=(e,t,n)=>{switch(t){case"xAxis":return ps(e,n);case"yAxis":return hs(e,n);case"zAxis":return jb(e,n);case"angleAxis":return Nb(e,n);case"radiusAxis":return Db(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},M6=(e,t,n)=>{switch(t){case"xAxis":return ps(e,n);case"yAxis":return hs(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ru=(e,t,n)=>{switch(t){case"xAxis":return ps(e,n);case"yAxis":return hs(e,n);case"angleAxis":return Nb(e,n);case"radiusAxis":return Db(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},sD=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function kb(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Ib=e=>e.graphicalItems.cartesianItems,j6=se([Rt,Iu],kb),Rb=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Lu=se([Ib,Xt,j6],Rb),oD=se([Lu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(nh)),lD=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),cD=se([Lu],lD),Lb=e=>e.map(t=>t.data).filter(Boolean).flat(1),k6=se([Lu],Lb),$b=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},Bb=se([k6,Cb],$b),Ub=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:jt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:jt(i,r)}))):e.map(r=>({value:r})),rh=se([Bb,Xt,Lu],Ub);function uD(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function To(e){return e.filter(t=>ka(t)||t instanceof Date).map(Number).filter(t=>Dr(t)===!1)}function I6(e,t,n){return!n||typeof t!="number"||Dr(t)?[]:n.length?To(n.flatMap(r=>{var i=jt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!Mr(s)||!Mr(l)))return[t-s,t+l]})):[]}var R6=se([oD,Cb,Cn],rD),dD=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,f=u.map(Mb);return[l,{stackedData:U3(e,f,n),graphicalItems:u}]}))},J0=se([R6,oD,ku],dD),fD=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=q3(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},L6=se([J0,fs,Rt],fD),pD=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,f,d=(u=r[l.id])===null||u===void 0?void 0:u.filter(g=>uD(i,g)),p=jt(s,(f=t.dataKey)!==null&&f!==void 0?f:l.dataKey);return{value:p,errorDomain:I6(s,p,d)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:jt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),ah=e=>e.errorBars,hD=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>uD(n,r));se([cD,ah,Rt],hD);var $6=se([Bb,Xt,cD,ah,Rt],pD);function B6(e){var{value:t}=e;if(ka(t)||t instanceof Date)return t}var UT=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=To(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},U6=(e,t,n)=>{var r=e.map(B6).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&PO(r))?J2(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},zb=e=>{var t;if(e==null||!("domain"in e))return Z0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=To(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Z0},vp=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},mD=e=>e.referenceElements.dots,Ll=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),z6=se([mD,Rt,Iu],Ll),gD=e=>e.referenceElements.areas,H6=se([gD,Rt,Iu],Ll),yD=e=>e.referenceElements.lines,G6=se([yD,Rt,Iu],Ll),vD=(e,t)=>{var n=To(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Y6=se(z6,Rt,vD),bD=(e,t)=>{var n=To(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},q6=se([H6,Rt],bD),xD=(e,t)=>{var n=To(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},F6=se(G6,Rt,xD),V6=se(Y6,F6,q6,(e,t,n)=>vp(e,n,t)),SD=se([Xt],zb),Hb=(e,t,n,r,i,s,l)=>{var u=l6(t,e.allowDataOverflow);if(u!=null)return u;var f=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",d=f?vp(n,i,UT(r)):vp(i,UT(r));return c6(t,d,e.allowDataOverflow)},K6=se([Xt,SD,L6,$6,V6,it,Rt],Hb),W6=[0,1],Gb=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:f}=e,d=Ao(t,s);return d&&u==null?J2(0,n.length):f==="category"?U6(r,e,d):i==="expand"?W6:l}},Yb=se([Xt,it,Bb,rh,ku,Rt,K6],Gb),AD=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Tu(s));return u in su?u:"point"}}},$l=se([Xt,it,sD,Pb,Rt],AD);function X6(e){if(e!=null){if(e in su)return su[e]();var t="scale".concat(Tu(e));if(t in su)return su[t]()}}function qb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=X6(t);if(i!=null){var s=i.domain(n).range(r);return I3(s),s}}}var Fb=(e,t,n)=>{var r=zb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&wl(e))return b6(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&wl(e))return x6(e,t.tickCount,t.allowDecimals)}},Vb=se([Yb,Ru,$l],Fb),Kb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&wl(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},Q6=se([Xt,Yb,Vb,Rt],Kb),Z6=se(rh,Xt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(To(e.map(u=>u.value))).sort((u,f)=>u-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),CD=se(Z6,it,WN,un,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Mr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=zn(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),J6=(e,t)=>{var n=ps(e,t);return n==null||typeof n.padding!="string"?0:CD(e,"xAxis",t,n.padding)},eU=(e,t)=>{var n=hs(e,t);return n==null||typeof n.padding!="string"?0:CD(e,"yAxis",t,n.padding)},tU=se(ps,J6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),nU=se(hs,eU,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),rU=se([un,tU,Gp,Hp,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),aU=se([un,it,nU,Gp,Hp,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),$u=(e,t,n,r)=>{var i;switch(t){case"xAxis":return rU(e,n,r);case"yAxis":return aU(e,n,r);case"zAxis":return(i=jb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return JN(e);case"radiusAxis":return eD(e,n);default:return}},ED=se([Xt,$u],eh),Bl=se([Xt,$l,Q6,ED],qb);se([Lu,ah,Rt],hD);function TD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ih=(e,t)=>t,sh=(e,t,n)=>n,iU=se(Up,ih,sh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(TD)),sU=se(zp,ih,sh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(TD)),PD=(e,t)=>({width:e.width,height:t.height}),oU=(e,t)=>{var n=typeof t.width=="number"?t.width:Nu;return{width:n,height:e.height}},wD=se(un,ps,PD),lU=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},cU=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},uU=se(Ei,un,iU,ih,sh,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var f=PD(t,u);l==null&&(l=lU(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(d)*f.height,l+=(d?-1:1)*f.height}),s}),dU=se(Ci,un,sU,ih,sh,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var f=oU(t,u);l==null&&(l=cU(t,r,e));var d=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(d)*f.width,l+=(d?-1:1)*f.width}),s}),fU=(e,t)=>{var n=un(e),r=ps(e,t);if(r!=null){var i=uU(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},pU=(e,t)=>{var n=un(e),r=hs(e,t);if(r!=null){var i=dU(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},OD=se(un,hs,(e,t)=>{var n=typeof t.width=="number"?t.width:Nu;return{width:n,height:e.height}}),zT=(e,t,n)=>{switch(t){case"xAxis":return wD(e,n).width;case"yAxis":return OD(e,n).height;default:return}},ND=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Ao(e,r),f=t.map(d=>d.value);if(l&&u&&s==="category"&&i&&PO(f))return f}},Wb=se([it,rh,Xt,Rt],ND),DD=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Ao(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},Xb=se([it,rh,Ru,Rt],DD),HT=se([it,M6,$l,Bl,Wb,Xb,$u,Vb,Rt],(e,t,n,r,i,s,l,u,f)=>{if(t==null)return null;var d=Ao(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:s,duplicateDomain:i,isCategorical:d,niceTicks:u,range:l,realScaleType:n,scale:r}}),hU=(e,t,n,r,i,s,l,u,f)=>{if(!(t==null||r==null)){var d=Ao(e,f),{type:p,ticks:g,tickCount:y}=t,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=p==="category"&&r.bandwidth?r.bandwidth()/b:0;S=f==="angleAxis"&&s!=null&&s.length>=2?xn(s[0]-s[1])*2*S:S;var A=g||i;if(A){var E=A.map((T,w)=>{var O=l?l.indexOf(T):T;return{index:w,coordinate:r(O)+S,value:T,offset:S}});return E.filter(T=>!Dr(T.coordinate))}return d&&u?u.map((T,w)=>({coordinate:r(T)+S,value:T,index:w,offset:S})):r.ticks?r.ticks(y).map(T=>({coordinate:r(T)+S,value:T,offset:S})):r.domain().map((T,w)=>({coordinate:r(T)+S,value:l?l[T]:T,index:w,offset:S}))}},_D=se([it,Ru,$l,Bl,Vb,$u,Wb,Xb,Rt],hU),mU=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Ao(e,l),{tickCount:f}=t,d=0;return d=l==="angleAxis"&&r?.length>=2?xn(r[0]-r[1])*2*d:d,u&&s?s.map((p,g)=>({coordinate:n(p)+d,value:p,index:g,offset:d})):n.ticks?n.ticks(f).map(p=>({coordinate:n(p)+d,value:p,offset:d})):n.domain().map((p,g)=>({coordinate:n(p)+d,value:i?i[p]:p,index:g,offset:d}))}},Ol=se([it,Ru,Bl,$u,Wb,Xb,Rt],mU),Nl=se(Xt,Bl,(e,t)=>{if(!(e==null||t==null))return yp(yp({},e),{},{scale:t})}),gU=se([Xt,$l,Yb,ED],qb);se((e,t,n)=>jb(e,n),gU,(e,t)=>{if(!(e==null||t==null))return yp(yp({},e),{},{scale:t})});var yU=se([it,Up,zp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),MD=e=>e.options.defaultTooltipEventType,jD=e=>e.options.validateTooltipEventTypes;function kD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Qb(e,t){var n=MD(e),r=jD(e);return kD(t,n,r)}function vU(e){return Oe(t=>Qb(t,e))}var ID=(e,t)=>{var n,r=Number(t);if(!(Dr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},bU=e=>e.tooltip.settings,ns={active:!1,index:null,dataKey:void 0,coordinate:void 0},xU={itemInteraction:{click:ns,hover:ns},axisInteraction:{click:ns,hover:ns},keyboardInteraction:ns,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},RD=jr({name:"tooltip",initialState:xU,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=mi(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:SU,removeTooltipEntrySettings:AU,setTooltipSettingsState:CU,setActiveMouseOverItemIndex:LD,mouseLeaveItem:EU,mouseLeaveChart:$D,setActiveClickItemIndex:TU,setMouseOverAxisIndex:BD,setMouseClickAxisIndex:PU,setSyncInteraction:ev,setKeyboardInteraction:tv}=RD.actions,wU=RD.reducer;function GT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GT(Object(n),!0).forEach(function(r){OU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OU(e,t,n){return(t=NU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NU(e){var t=DU(e,"string");return typeof t=="symbol"?t:t+""}function DU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _U(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function MU(e){return e.index!=null}var UD=(e,t,n,r)=>{if(t==null)return ns;var i=_U(e,t,n);if(i==null)return ns;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(MU(i)){if(s)return Pf(Pf({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Pf(Pf({},ns),{},{coordinate:i.coordinate})},Zb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!Mr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},zD=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var f=l[0],d=f==null?void 0:u(f.positions,s);if(d!=null)return d;var p=i?.[Number(s)];if(p)switch(n){case"horizontal":return{x:p.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:p.coordinate}}}},HD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},Bu=e=>e.options.tooltipPayloadSearcher,Ul=e=>e.tooltip;function YT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YT(Object(n),!0).forEach(function(r){jU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jU(e,t,n){return(t=kU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kU(e){var t=IU(e,"string");return typeof t=="symbol"?t:t+""}function IU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RU(e,t){return e??t}var GD=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:f,dataStartIndex:d,dataEndIndex:p}=n,g=[];return e.reduce((y,b)=>{var S,{dataDefinedOnItem:A,settings:E}=b,T=RU(A,u),w=Array.isArray(T)?j2(T,d,p):T,O=(S=E?.dataKey)!==null&&S!==void 0?S:r,_=E?.nameKey,k;if(r&&Array.isArray(w)&&!Array.isArray(w[0])&&l==="axis"?k=ER(w,r,i):k=s(w,t,f,_),Array.isArray(k))k.forEach(j=>{var U=qT(qT({},E),{},{name:j.name,unit:j.unit,color:void 0,fill:void 0});y.push(wE({tooltipEntrySettings:U,dataKey:j.dataKey,payload:j.payload,value:jt(j.payload,j.dataKey),name:j.name}))});else{var M;y.push(wE({tooltipEntrySettings:E,dataKey:O,payload:k,value:jt(k,O),name:(M=jt(k,_))!==null&&M!==void 0?M:E?.name}))}return y},g)}},Jb=se([Cn,it,sD,Pb,fn],AD),LU=se([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),$U=se([fn,Rl],kb),Uu=se([LU,Cn,$U],Rb),BU=se([Uu],e=>e.filter(nh)),UU=se([Uu],Lb),zl=se([UU,fs],$b),zU=se([BU,fs,Cn],rD),ex=se([zl,Cn,Uu],Ub),HU=se([Cn],zb),GU=se([Uu],e=>e.filter(nh)),YU=se([zU,GU,ku],dD),qU=se([YU,fs,fn],fD),FU=se([Uu],lD),VU=se([zl,Cn,FU,ah,fn],pD),KU=se([mD,fn,Rl],Ll),WU=se([KU,fn],vD),XU=se([gD,fn,Rl],Ll),QU=se([XU,fn],bD),ZU=se([yD,fn,Rl],Ll),JU=se([ZU,fn],xD),ez=se([WU,JU,QU],vp),tz=se([Cn,HU,qU,VU,ez,it,fn],Hb),YD=se([Cn,it,zl,ex,ku,fn,tz],Gb),nz=se([YD,Cn,Jb],Fb),rz=se([Cn,YD,nz,fn],Kb),qD=e=>{var t=fn(e),n=Rl(e),r=!1;return $u(e,t,n,r)},FD=se([Cn,qD],eh),VD=se([Cn,Jb,rz,FD],qb),az=se([it,ex,Cn,fn],ND),iz=se([it,ex,Cn,fn],DD),sz=(e,t,n,r,i,s,l,u)=>{if(t){var{type:f}=t,d=Ao(e,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/p:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?xn(i[0]-i[1])*2*g:g,d&&l?l.map((y,b)=>({coordinate:r(y)+g,value:y,index:b,offset:g})):r.domain().map((y,b)=>({coordinate:r(y)+g,value:s?s[y]:y,index:b,offset:g}))}}},Pi=se([it,Cn,Jb,VD,qD,az,iz,fn],sz),tx=se([MD,jD,bU],(e,t,n)=>kD(n.shared,e,t)),KD=e=>e.tooltip.settings.trigger,nx=e=>e.tooltip.settings.defaultIndex,oh=se([Ul,tx,KD,nx],UD),yo=se([oh,zl],Zb),WD=se([Pi,yo],ID),XD=se([oh],e=>{if(e)return e.dataKey}),QD=se([Ul,tx,KD,nx],HD),oz=se([Ci,Ei,it,un,Pi,nx,QD,Bu],zD),lz=se([oh,oz],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),cz=se([oh],e=>e.active),uz=se([QD,yo,fs,nD,WD,Bu,tx],GD);se([uz],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function FT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function VT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FT(Object(n),!0).forEach(function(r){dz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dz(e,t,n){return(t=fz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fz(e){var t=pz(e,"string");return typeof t=="symbol"?t:t+""}function pz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hz=()=>Oe(Cn),mz=()=>{var e=hz(),t=Oe(Pi),n=Oe(VD);return Fv(VT(VT({},e),{},{scale:n}),t)},gz=()=>Oe(Pb),rx=(e,t)=>t,ZD=(e,t,n)=>n,ax=(e,t,n,r)=>r,yz=se(Pi,e=>jp(e,t=>t.coordinate)),ix=se([Ul,rx,ZD,ax],UD),JD=se([ix,zl],Zb),vz=(e,t,n)=>{if(t!=null){var r=Ul(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},e_=se([Ul,rx,ZD,ax],HD),bp=se([Ci,Ei,it,un,Pi,ax,e_,Bu],zD),bz=se([ix,bp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),t_=se(Pi,JD,ID),xz=se([e_,JD,fs,nD,t_,Bu,rx],GD),Sz=se([ix],e=>({isActive:e.active,activeIndex:e.index})),Az=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var f=F3(e.chartX,e.chartY,t,n,u);if(f){var d=K3(f,t),p=j3(d,l,s,r,i),g=V3(t,s,p,f);return{activeIndex:String(p),activeCoordinate:g}}}};function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(null,arguments)}function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(r){Cz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cz(e,t,n){return(t=Ez(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ez(e){var t=Tz(e,"string");return typeof t=="symbol"?t:t+""}function Tz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pz(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:f,chartName:d}=e,p=t,g=n,y=r;if(!u||!p||d!=="ScatterChart"&&f!=="axis")return null;var b,S;if(d==="ScatterChart")b=p,S=K4;else if(d==="BarChart")b=W4(l,p,i,s),S=W2;else if(l==="radial"){var{cx:A,cy:E,radius:T,startAngle:w,endAngle:O}=X2(p);b={cx:A,cy:E,startAngle:w,endAngle:O,innerRadius:T,outerRadius:T},S=Z2}else b={points:O$(l,p,i)},S=Y2;var _=typeof u=="object"&&"className"in u?u.className:void 0,k=wf(wf(wf(wf({stroke:"#ccc",pointerEvents:"none"},i),b),en(u,!1)),{},{payload:g,payloadIndex:y,className:pt("recharts-tooltip-cursor",_)});return C.isValidElement(u)?C.cloneElement(u,k):C.createElement(S,k)}function wz(e){var t=mz(),n=B2(),r=Qv(),i=gz();return C.createElement(Pz,nv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var n_=C.createContext(null),Oz=()=>C.useContext(n_),Gy={exports:{}},WT;function Nz(){return WT||(WT=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,p){this.fn=f,this.context=d,this.once=p||!1}function s(f,d,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new i(p,g||f,y),S=n?n+d:d;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],b]:f._events[S].push(b):(f._events[S]=b,f._eventsCount++),f}function l(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],p,g;if(this._eventsCount===0)return d;for(g in p=this._events)t.call(p,g)&&d.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(p)):d},u.prototype.listeners=function(d){var p=n?n+d:d,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,b=g.length,S=new Array(b);y<b;y++)S[y]=g[y].fn;return S},u.prototype.listenerCount=function(d){var p=n?n+d:d,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(d,p,g,y,b,S){var A=n?n+d:d;if(!this._events[A])return!1;var E=this._events[A],T=arguments.length,w,O;if(E.fn){switch(E.once&&this.removeListener(d,E.fn,void 0,!0),T){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,p),!0;case 3:return E.fn.call(E.context,p,g),!0;case 4:return E.fn.call(E.context,p,g,y),!0;case 5:return E.fn.call(E.context,p,g,y,b),!0;case 6:return E.fn.call(E.context,p,g,y,b,S),!0}for(O=1,w=new Array(T-1);O<T;O++)w[O-1]=arguments[O];E.fn.apply(E.context,w)}else{var _=E.length,k;for(O=0;O<_;O++)switch(E[O].once&&this.removeListener(d,E[O].fn,void 0,!0),T){case 1:E[O].fn.call(E[O].context);break;case 2:E[O].fn.call(E[O].context,p);break;case 3:E[O].fn.call(E[O].context,p,g);break;case 4:E[O].fn.call(E[O].context,p,g,y);break;default:if(!w)for(k=1,w=new Array(T-1);k<T;k++)w[k-1]=arguments[k];E[O].fn.apply(E[O].context,w)}}return!0},u.prototype.on=function(d,p,g){return s(this,d,p,g,!1)},u.prototype.once=function(d,p,g){return s(this,d,p,g,!0)},u.prototype.removeListener=function(d,p,g,y){var b=n?n+d:d;if(!this._events[b])return this;if(!p)return l(this,b),this;var S=this._events[b];if(S.fn)S.fn===p&&(!y||S.once)&&(!g||S.context===g)&&l(this,b);else{for(var A=0,E=[],T=S.length;A<T;A++)(S[A].fn!==p||y&&!S[A].once||g&&S[A].context!==g)&&E.push(S[A]);E.length?this._events[b]=E.length===1?E[0]:E:l(this,b)}return this},u.prototype.removeAllListeners=function(d){var p;return d?(p=n?n+d:d,this._events[p]&&l(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Gy)),Gy.exports}var Dz=Nz();const _z=va(Dz);var Eu=new _z,rv="recharts.syncEvent.tooltip",XT="recharts.syncEvent.brush";function r_(e,t){if(t){var n=Number.parseInt(t,10);if(!Dr(n))return e?.[n]}}var Mz={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},a_=jr({name:"options",initialState:Mz,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),jz=a_.reducer,{createEventEmitter:kz}=a_.actions;function Iz(e){return e.tooltip.syncInteraction}var Rz={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},i_=jr({name:"chartData",initialState:Rz,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:QT,setDataStartEndIndexes:Lz,setComputedData:tK}=i_.actions,$z=i_.reducer,Bz=["x","y"];function ZT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(n),!0).forEach(function(r){Uz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uz(e,t,n){return(t=zz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zz(e){var t=Hz(e,"string");return typeof t=="symbol"?t:t+""}function Hz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gz(e,t){if(e==null)return{};var n,r,i=Yz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var s_=()=>{};function qz(){var e=Oe(wb),t=Oe(Ob),n=$t(),r=Oe(XN),i=Oe(Pi),s=Qv(),l=Kv(),u=Oe(f=>f.rootProps.className);C.useEffect(()=>{if(e==null)return s_;var f=(d,p,g)=>{if(t!==g&&e===d){if(r==="index"){var y;if(l&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate){var b=p.payload.coordinate,{x:S,y:A}=b,E=Gz(b,Bz),T=Zs(Zs(Zs({},E),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),w=Zs(Zs({},p),{},{payload:Zs(Zs({},p.payload),{},{coordinate:T})});n(w)}else n(p);return}if(i!=null){var O;if(typeof r=="function"){var _={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},k=r(i,_);O=i[k]}else r==="value"&&(O=i.find(Z=>String(Z.value)===p.payload.label));var{coordinate:M}=p.payload;if(O==null||p.payload.active===!1||M==null||l==null){n(ev({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:j,y:U}=M,q=Math.min(j,l.x+l.width),L=Math.min(U,l.y+l.height),$={x:s==="horizontal"?O.coordinate:q,y:s==="horizontal"?L:O.coordinate},G=ev({active:p.payload.active,coordinate:$,dataKey:p.payload.dataKey,index:String(O.index),label:p.payload.label});n(G)}}};return Eu.on(rv,f),()=>{Eu.off(rv,f)}},[u,n,t,e,r,i,s,l])}function Fz(){var e=Oe(wb),t=Oe(Ob),n=$t();C.useEffect(()=>{if(e==null)return s_;var r=(i,s,l)=>{t!==l&&e===i&&n(Lz(s))};return Eu.on(XT,r),()=>{Eu.off(XT,r)}},[n,t,e])}function Vz(){var e=$t();C.useEffect(()=>{e(kz())},[e]),qz(),Fz()}function Kz(e,t,n,r,i,s){var l=Oe(y=>vz(y,e,t)),u=Oe(Ob),f=Oe(wb),d=Oe(XN),p=Oe(Iz),g=p?.active;C.useEffect(()=>{if(!g&&f!=null&&u!=null){var y=ev({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Eu.emit(rv,f,y,u)}},[g,n,l,i,r,u,f,d,s])}function JT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JT(Object(n),!0).forEach(function(r){Wz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wz(e,t,n){return(t=Xz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xz(e){var t=Qz(e,"string");return typeof t=="symbol"?t:t+""}function Qz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zz(e){return e.dataKey}function Jz(e,t){return C.isValidElement(e)?C.cloneElement(e,t):typeof e=="function"?C.createElement(e,t):C.createElement(P4,t)}var tP=[],eH={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ml.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function pa(e){var t=na(e,eH),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:f,offset:d,payloadUniqBy:p,position:g,reverseDirection:y,useTranslate3d:b,wrapperStyle:S,cursor:A,shared:E,trigger:T,defaultIndex:w,portal:O,axisId:_}=t,k=$t(),M=typeof w=="number"?String(w):w;C.useEffect(()=>{k(CU({shared:E,trigger:T,axisId:_,active:n,defaultIndex:M}))},[k,E,T,_,n,M]);var j=Kv(),U=G2(),q=vU(E),{activeIndex:L,isActive:$}=Oe(Se=>Sz(Se,q,T,M)),G=Oe(Se=>xz(Se,q,T,M)),Z=Oe(Se=>t_(Se,q,T,M)),X=Oe(Se=>bz(Se,q,T,M)),re=G,I=Oz(),Y=n??$,[Q,ve]=o2([re,Y]),R=q==="axis"?Z:void 0;Kz(q,T,X,R,L,Y);var V=O??I;if(V==null)return null;var K=re??tP;Y||(K=tP),u&&K.length&&(K=n2(re.filter(Se=>Se.value!=null&&(Se.hide!==!0||t.includeHidden)),p,Zz));var ae=K.length>0,me=C.createElement(j4,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:f,active:Y,coordinate:X,hasPayload:ae,offset:d,position:g,reverseDirection:y,useTranslate3d:b,viewBox:j,wrapperStyle:S,lastBoundingBox:Q,innerRef:ve,hasPortalFromProps:!!O},Jz(l,eP(eP({},t),{},{payload:K,label:R,active:Y,coordinate:X,accessibilityLayer:U})));return C.createElement(C.Fragment,null,NO.createPortal(me,V),Y&&C.createElement(wz,{cursor:A,tooltipEventType:q,coordinate:X,payload:re,index:L}))}var Yy={},qy={},Fy={},nP;function tH(){return nP||(nP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const f=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),p=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},g=()=>{d&&p(),A()};let y=null;const b=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},r)},S=()=>{y!==null&&(clearTimeout(y),y=null)},A=()=>{S(),l=void 0,u=null},E=()=>{p()},T=function(...w){if(i?.aborted)return;l=this,u=w;const O=y==null;b(),f&&O&&p()};return T.schedule=b,T.cancel=A,T.flush=E,i?.addEventListener("abort",A,{once:!0}),T}e.debounce=t})(Fy)),Fy}var rP;function nH(){return rP||(rP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tH();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:f}=s,d=Array(2);l&&(d[0]="leading"),u&&(d[1]="trailing");let p,g=null;const y=t.debounce(function(...A){p=r.apply(this,A),g=null},i,{edges:d}),b=function(...A){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(p=r.apply(this,A),g=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,A),p)},S=()=>(y.flush(),p);return b.cancel=y.cancel,b.flush=S,b}e.debounce=n})(qy)),qy}var aP;function rH(){return aP||(aP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nH();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Yy)),Yy}var Vy,iP;function aH(){return iP||(iP=1,Vy=rH().throttle),Vy}var iH=aH();const sH=va(iH);var du=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function sP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ky(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(n),!0).forEach(function(r){oH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oH(e,t,n){return(t=lH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lH(e){var t=cH(e,"string");return typeof t=="symbol"?t:t+""}function cH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ha=C.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:f,children:d,debounce:p=0,id:g,className:y,onResize:b,style:S={}}=e,A=C.useRef(null),E=C.useRef();E.current=b,C.useImperativeHandle(t,()=>A.current);var[T,w]=C.useState({containerWidth:r.width,containerHeight:r.height}),O=C.useCallback((k,M)=>{w(j=>{var U=Math.round(k),q=Math.round(M);return j.containerWidth===U&&j.containerHeight===q?j:{containerWidth:U,containerHeight:q}})},[]);C.useEffect(()=>{var k=q=>{var L,{width:$,height:G}=q[0].contentRect;O($,G),(L=E.current)===null||L===void 0||L.call(E,$,G)};p>0&&(k=sH(k,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(k),{width:j,height:U}=A.current.getBoundingClientRect();return O(j,U),M.observe(A.current),()=>{M.disconnect()}},[O,p]);var _=C.useMemo(()=>{var{containerWidth:k,containerHeight:M}=T;if(k<0||M<0)return null;du(no(i)||no(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),du(!n||n>0,"The aspect(%s) must be greater than zero.",n);var j=no(i)?k:i,U=no(s)?M:s;return n&&n>0&&(j?U=j/n:U&&(j=U*n),f&&U>f&&(U=f)),du(j>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,U,i,s,l,u,n),C.Children.map(d,q=>C.cloneElement(q,{width:j,height:U,style:Ky({width:j,height:U},q.props.style)}))},[n,d,s,f,u,l,T,i]);return C.createElement("div",{id:g?"".concat(g):void 0,className:pt("recharts-responsive-container",y),style:Ky(Ky({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:f}),ref:A},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_))}),uo=e=>null;uo.displayName="Cell";function uH(e,t,n){return(t=dH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dH(e){var t=fH(e,"string");return typeof t=="symbol"?t:t+""}function fH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pH{constructor(t){uH(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function oP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(n),!0).forEach(function(r){mH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mH(e,t,n){return(t=gH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gH(e){var t=yH(e,"string");return typeof t=="symbol"?t:t+""}function yH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vH={cacheSize:2e3,enableCache:!0},o_=hH({},vH),lP=new pH(o_.cacheSize),bH={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},cP="recharts_measurement_span";function xH(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var uP=(e,t)=>{try{var n=document.getElementById(cP);n||(n=document.createElement("span"),n.setAttribute("id",cP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,bH,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},fu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ml.isSsr)return{width:0,height:0};if(!o_.enableCache)return uP(t,n);var r=xH(t,n),i=lP.get(r);if(i)return i;var s=uP(t,n);return lP.set(r,s),s},dP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SH=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,AH=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,l_={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},CH=Object.keys(l_),hl="NaN";function EH(e,t){return e*l_[t]}class ir{static parse(t){var n,[,r,i]=(n=AH.exec(t))!==null&&n!==void 0?n:[];return new ir(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Dr(t)&&(this.unit=""),n!==""&&!SH.test(n)&&(this.num=NaN,this.unit=""),CH.includes(n)&&(this.num=EH(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new ir(NaN,""):new ir(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ir(NaN,""):new ir(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ir(NaN,""):new ir(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ir(NaN,""):new ir(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Dr(this.num)}}function c_(e){if(e.includes(hl))return hl;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=dP.exec(t))!==null&&n!==void 0?n:[],l=ir.parse(r??""),u=ir.parse(s??""),f=i==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return hl;t=t.replace(dP,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,p,g,y]=(d=fP.exec(t))!==null&&d!==void 0?d:[],b=ir.parse(p??""),S=ir.parse(y??""),A=g==="+"?b.add(S):b.subtract(S);if(A.isNaN())return hl;t=t.replace(fP,A.toString())}return t}var pP=/\(([^()]*)\)/;function TH(e){for(var t=e,n;(n=pP.exec(t))!=null;){var[,r]=n;t=t.replace(pP,c_(r))}return t}function PH(e){var t=e.replace(/\s+/g,"");return t=TH(t),t=c_(t),t}function wH(e){try{return PH(e)}catch{return hl}}function Wy(e){var t=wH(e.slice(5,-1));return t===hl?"":t}var OH=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],NH=["dx","dy","angle","className","breakAll"];function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},av.apply(null,arguments)}function hP(e,t){if(e==null)return{};var n,r,i=DH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function DH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var u_=/[ \f\n\r\t\v\u2028\u2029]+/,d_=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Sn(t)||(n?i=t.toString().split(""):i=t.toString().split(u_));var s=i.map(u=>({word:u,width:fu(u,r).width})),l=n?0:fu("Â ",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},_H=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:f}=e,d=_e(s),p=l,g=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce((G,Z)=>{var{word:X,width:re}=Z,I=G[G.length-1];if(I&&(r==null||i||I.width+re+n<Number(r)))I.words.push(X),I.width+=re+n;else{var Y={words:[X],width:re};G.push(Y)}return G},[])},y=g(t),b=L=>L.reduce(($,G)=>$.width>G.width?$:G);if(!d||i)return y;var S=y.length>s||b(y).width>Number(r);if(!S)return y;for(var A="â€¦",E=L=>{var $=p.slice(0,L),G=d_({breakAll:f,style:u,children:$+A}).wordsWithComputedWidth,Z=g(G),X=Z.length>s||b(Z).width>Number(r);return[X,Z]},T=0,w=p.length-1,O=0,_;T<=w&&O<=p.length-1;){var k=Math.floor((T+w)/2),M=k-1,[j,U]=E(M),[q]=E(k);if(!j&&!q&&(T=k+1),j&&q&&(w=k-1),!j&&q){_=U;break}O++}return _||y},mP=e=>{var t=Sn(e)?[]:e.toString().split(u_);return[{words:t}]},MH=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!Ml.isSsr){var u,f,d=d_({breakAll:s,children:r,style:i});if(d){var{wordsWithComputedWidth:p,spaceWidth:g}=d;u=p,f=g}else return mP(r);return _H({breakAll:s,children:r,maxLines:l,style:i},u,f,t,n)}return mP(r)},gP="#808080",lh=C.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:f="end",fill:d=gP}=e,p=hP(e,OH),g=C.useMemo(()=>MH({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:l,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,l,p.style,p.width]),{dx:y,dy:b,angle:S,className:A,breakAll:E}=p,T=hP(p,NH);if(!ka(n)||!ka(r)||g.length===0)return null;var w=n+(_e(y)?y:0),O=r+(_e(b)?b:0),_;switch(f){case"start":_=Wy("calc(".concat(s,")"));break;case"middle":_=Wy("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:_=Wy("calc(".concat(g.length-1," * -").concat(i,")"));break}var k=[];if(l){var M=g[0].width,{width:j}=p;k.push("scale(".concat(_e(j)?j/M:1,")"))}return S&&k.push("rotate(".concat(S,", ").concat(w,", ").concat(O,")")),k.length&&(T.transform=k.join(" ")),C.createElement("text",av({},en(T,!0),{ref:t,x:w,y:O,className:pt("recharts-text",A),textAnchor:u,fill:d.includes("url")?gP:d}),g.map((U,q)=>{var L=U.words.join(E?"":" ");return C.createElement("tspan",{x:w,dy:q===0?_:i,key:"".concat(L,"-").concat(q)},L)}))});lh.displayName="Text";var jH=["labelRef"];function kH(e,t){if(e==null)return{};var n,r,i=IH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(r){RH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RH(e,t,n){return(t=LH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LH(e){var t=$H(e,"string");return typeof t=="symbol"?t:t+""}function $H(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fi.apply(null,arguments)}var f_=C.createContext(null),BH=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=C.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return C.createElement(f_.Provider,{value:l},s)},p_=()=>{var e=C.useContext(f_),t=Kv();return e||t},UH=C.createContext(null),zH=()=>{var e=C.useContext(UH),t=Oe(tD);return e||t},HH=e=>{var{value:t,formatter:n}=e,r=Sn(e.children)?t:e.children;return typeof n=="function"?n(r):r},sx=e=>e!=null&&typeof e=="function",GH=(e,t)=>{var n=xn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},YH=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:f,innerRadius:d,outerRadius:p,startAngle:g,endAngle:y,clockWise:b}=i,S=(d+p)/2,A=GH(g,y),E=A>=0?1:-1,T,w;switch(t){case"insideStart":T=g+E*s,w=b;break;case"insideEnd":T=y-E*s,w=!b;break;case"end":T=y+E*s,w=b;break;default:throw new Error("Unsupported position ".concat(t))}w=A<=0?w:!w;var O=tn(u,f,S,T),_=tn(u,f,S,T+(w?1:-1)*359),k="M".concat(O.x,",").concat(O.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),M=Sn(e.id)?mu("recharts-radial-line-"):e.id;return C.createElement("text",fi({},r,{dominantBaseline:"central",className:pt("recharts-radial-bar-label",l)}),C.createElement("defs",null,C.createElement("path",{id:M,d:k})),C.createElement("textPath",{xlinkHref:"#".concat(M)},n))},qH=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:f}=e,d=(u+f)/2;if(n==="outside"){var{x:p,y:g}=tn(r,i,l+t,d);return{x:p,y:g,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x:b,y:S}=tn(r,i,y,d);return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},h_=e=>"cx"in e&&_e(e.cx),FH=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!h_(n)&&(s=n);var{x:l,y:u,width:f,height:d}=t,p=d>=0?1:-1,g=p*r,y=p>0?"end":"start",b=p>0?"start":"end",S=f>=0?1:-1,A=S*r,E=S>0?"end":"start",T=S>0?"start":"end";if(i==="top"){var w={x:l+f/2,y:u-p*r,textAnchor:"middle",verticalAnchor:y};return Wt(Wt({},w),s?{height:Math.max(u-s.y,0),width:f}:{})}if(i==="bottom"){var O={x:l+f/2,y:u+d+g,textAnchor:"middle",verticalAnchor:b};return Wt(Wt({},O),s?{height:Math.max(s.y+s.height-(u+d),0),width:f}:{})}if(i==="left"){var _={x:l-A,y:u+d/2,textAnchor:E,verticalAnchor:"middle"};return Wt(Wt({},_),s?{width:Math.max(_.x-s.x,0),height:d}:{})}if(i==="right"){var k={x:l+f+A,y:u+d/2,textAnchor:T,verticalAnchor:"middle"};return Wt(Wt({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:d}:{})}var M=s?{width:f,height:d}:{};return i==="insideLeft"?Wt({x:l+A,y:u+d/2,textAnchor:T,verticalAnchor:"middle"},M):i==="insideRight"?Wt({x:l+f-A,y:u+d/2,textAnchor:E,verticalAnchor:"middle"},M):i==="insideTop"?Wt({x:l+f/2,y:u+g,textAnchor:"middle",verticalAnchor:b},M):i==="insideBottom"?Wt({x:l+f/2,y:u+d-g,textAnchor:"middle",verticalAnchor:y},M):i==="insideTopLeft"?Wt({x:l+A,y:u+g,textAnchor:T,verticalAnchor:b},M):i==="insideTopRight"?Wt({x:l+f-A,y:u+g,textAnchor:E,verticalAnchor:b},M):i==="insideBottomLeft"?Wt({x:l+A,y:u+d-g,textAnchor:T,verticalAnchor:y},M):i==="insideBottomRight"?Wt({x:l+f-A,y:u+d-g,textAnchor:E,verticalAnchor:y},M):i&&typeof i=="object"&&(_e(i.x)||no(i.x))&&(_e(i.y)||no(i.y))?Wt({x:l+zn(i.x,f),y:u+zn(i.y,d),textAnchor:"end",verticalAnchor:"end"},M):Wt({x:l+f/2,y:u+d/2,textAnchor:"middle",verticalAnchor:"middle"},M)},VH={offset:5};function ts(e){var t=na(e,VH),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:f,labelRef:d}=t,p=zH(),g=p_(),y=r==="center"?g:p??g,b=n||y;if(!b||Sn(i)&&Sn(s)&&!C.isValidElement(l)&&typeof l!="function")return null;var S=Wt(Wt({},t),{},{viewBox:b});if(C.isValidElement(l)){var{labelRef:A}=S,E=kH(S,jH);return C.cloneElement(l,E)}var T;if(typeof l=="function"){if(T=C.createElement(l,S),C.isValidElement(T))return T}else T=HH(t);var w=h_(b),O=en(t,!0);if(w&&(r==="insideStart"||r==="insideEnd"||r==="end"))return YH(t,r,T,O,b);var _=w?qH(b,t.offset,t.position):FH(t,b);return C.createElement(lh,fi({ref:d,className:pt("recharts-label",u)},O,_,{breakAll:f}),T)}ts.displayName="Label";var KH=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?C.createElement(ts,fi({key:"label-implicit"},r)):ka(e)?C.createElement(ts,fi({key:"label-implicit",value:e},r)):C.isValidElement(e)?e.type===ts?C.cloneElement(e,Wt({key:"label-implicit"},r)):C.createElement(ts,fi({key:"label-implicit",content:e},r)):sx(e)?C.createElement(ts,fi({key:"label-implicit",content:e},r)):e&&typeof e=="object"?C.createElement(ts,fi({},e,{key:"label-implicit"},r)):null};function WH(e){var{label:t}=e,n=p_();return KH(t,n)||null}var Xy={},Qy={},vP;function XH(){return vP||(vP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Qy)),Qy}var Zy={},bP;function QH(){return bP||(bP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Zy)),Zy}var xP;function ZH(){return xP||(xP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XH(),n=QH(),r=$v();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Xy)),Xy}var Jy,SP;function JH(){return SP||(SP=1,Jy=ZH().last),Jy}var eG=JH();const tG=va(eG);var nG=["valueAccessor"],rG=["dataKey","clockWise","id","textBreakAll"];function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp.apply(null,arguments)}function AP(e,t){if(e==null)return{};var n,r,i=aG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iG=e=>Array.isArray(e.value)?tG(e.value):e.value,m_=C.createContext(void 0),sG=m_.Provider,g_=C.createContext(void 0),oG=g_.Provider;function lG(){return C.useContext(m_)}function cG(){return C.useContext(g_)}function Lf(e){var{valueAccessor:t=iG}=e,n=AP(e,nG),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=AP(n,rG),f=lG(),d=cG(),p=f||d;return!p||!p.length?null:C.createElement(dr,{className:"recharts-label-list"},p.map((g,y)=>{var b,S=Sn(r)?t(g,y):jt(g&&g.payload,r),A=Sn(s)?{}:{id:"".concat(s,"-").concat(y)};return C.createElement(ts,xp({},en(g,!0),u,A,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:S,textBreakAll:l,viewBox:g.viewBox,key:"label-".concat(y),index:y}))}))}Lf.displayName="LabelList";function y_(e){var{label:t}=e;return t?t===!0?C.createElement(Lf,{key:"labelList-implicit"}):C.isValidElement(t)||sx(t)?C.createElement(Lf,{key:"labelList-implicit",content:t}):typeof t=="object"?C.createElement(Lf,xp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var v_=e=>e.graphicalItems.polarItems,uG=se([Rt,Iu],kb),ox=se([v_,Xt,uG],Rb),dG=se([ox],Lb),lx=se([dG,Ab],$b),fG=se([lx,Xt,ox],Ub),pG=se([lx,Xt,ox],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=jt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:jt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),CP=()=>{},hG=se([Xt,SD,CP,pG,CP,it,Rt],Hb),b_=se([Xt,it,lx,fG,ku,Rt,hG],Gb),mG=se([b_,Xt,$l],Fb);se([Xt,b_,mG,Rt],Kb);var gG={radiusAxis:{},angleAxis:{}},x_=jr({name:"polarAxis",initialState:gG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:nK,removeRadiusAxis:rK,addAngleAxis:aK,removeAngleAxis:iK}=x_.actions,yG=x_.reducer;function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function TP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(r){vG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vG(e,t,n){return(t=bG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bG(e){var t=xG(e,"string");return typeof t=="symbol"?t:t+""}function xG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SG=(e,t)=>t,cx=se([v_,SG],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),AG=[],ux=(e,t,n)=>n?.length===0?AG:n,S_=se([Ab,cx,ux],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>TP(TP({},t.presentationProps),s.props))),i!=null)return i}}),CG=se([S_,cx,ux],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=jt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:Bp(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),EG=se([S_,cx,ux,un],(e,t,n,r)=>{if(!(t==null||e==null))return C9({offset:r,pieSettings:t,displayedData:e,cells:n})}),e0={},PP;function TG(){return PP||(PP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(e0)),e0}var t0,wP;function PG(){return wP||(wP=1,t0=TG().isPlainObject),t0}var wG=PG();const OG=va(wG);function OP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(n),!0).forEach(function(r){NG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NG(e,t,n){return(t=DG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DG(e){var t=_G(e,"string");return typeof t=="symbol"?t:t+""}function _G(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sp(){return Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sp.apply(null,arguments)}var DP=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},MG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jG=e=>{var t=na(e,MG),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:f,animationDuration:d,animationBegin:p,isUpdateAnimationActive:g}=t,y=C.useRef(),[b,S]=C.useState(-1),A=C.useRef(i),E=C.useRef(s),T=C.useRef(l),w=C.useRef(n),O=C.useRef(r),_=Fp(e,"trapezoid-");if(C.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var X=y.current.getTotalLength();X&&S(X)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var k=pt("recharts-trapezoid",u);if(!g)return C.createElement("g",null,C.createElement("path",Sp({},en(t,!0),{className:k,d:DP(n,r,i,s,l)})));var M=A.current,j=E.current,U=T.current,q=w.current,L=O.current,$="0px ".concat(b===-1?1:b,"px"),G="".concat(b,"px 0px"),Z=q2(["strokeDasharray"],d,f);return C.createElement(qp,{animationId:_,key:_,canBegin:b>0,duration:d,easing:f,isActive:g,begin:p},X=>{var re=Mn(M,i,X),I=Mn(j,s,X),Y=Mn(U,l,X),Q=Mn(q,n,X),ve=Mn(L,r,X);y.current&&(A.current=re,E.current=I,T.current=Y,w.current=Q,O.current=ve);var R=X>0?{transition:Z,strokeDasharray:G}:{strokeDasharray:$};return C.createElement("path",Sp({},en(t,!0),{className:k,d:DP(Q,ve,re,I,Y),ref:y,style:NP(NP({},R),t.style)}))})},kG=["option","shapeType","propTransformer","activeClassName","isActive"];function IG(e,t){if(e==null)return{};var n,r,i=RG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function RG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ap(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(n),!0).forEach(function(r){LG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LG(e,t,n){return(t=$G(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $G(e){var t=BG(e,"string");return typeof t=="symbol"?t:t+""}function BG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UG(e,t){return Ap(Ap({},t),e)}function zG(e,t){return e==="symbols"}function MP(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return C.createElement(W2,n);case"trapezoid":return C.createElement(jG,n);case"sector":return C.createElement(Z2,n);case"symbols":if(zG(t))return C.createElement(Iv,n);break;default:return null}}function HG(e){return C.isValidElement(e)?e.props:e}function A_(e){var{option:t,shapeType:n,propTransformer:r=UG,activeClassName:i="recharts-active-shape",isActive:s}=e,l=IG(e,kG),u;if(C.isValidElement(t))u=C.cloneElement(t,Ap(Ap({},l),HG(t)));else if(typeof t=="function")u=t(l);else if(OG(t)&&typeof t!="boolean"){var f=r(t,l);u=C.createElement(MP,{shapeType:n,elementProps:f})}else{var d=l;u=C.createElement(MP,{shapeType:n,elementProps:d})}return s?C.createElement(dr,{className:i},u):u}var dx=(e,t)=>{var n=$t();return(r,i)=>s=>{e?.(r,i,s),n(LD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},fx=e=>{var t=$t();return(n,r)=>i=>{e?.(n,r,i),t(EU())}},px=(e,t)=>{var n=$t();return(r,i)=>s=>{e?.(r,i,s),n(TU({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function C_(e){var{fn:t,args:n}=e,r=$t(),i=ta();return C.useEffect(()=>{if(!i){var s=t(n);return r(SU(s)),()=>{r(AU(s))}}},[t,n,r,i]),null}var E_=()=>{};function GG(e){var{legendPayload:t}=e,n=$t(),r=ta();return C.useEffect(()=>r?E_:(n(z2(t)),()=>{n(H2(t))}),[n,r,t]),null}function YG(e){var{legendPayload:t}=e,n=$t(),r=Oe(it);return C.useEffect(()=>r!=="centric"&&r!=="radial"?E_:(n(z2(t)),()=>{n(H2(t))}),[n,r,t]),null}var n0,qG=()=>{var[e]=C.useState(()=>mu("uid-"));return e},FG=(n0=Gj.useId)!==null&&n0!==void 0?n0:qG;function VG(e,t){var n=FG();return t||(e?"".concat(e,"-").concat(n):n)}var KG=C.createContext(void 0),T_=e=>{var{id:t,type:n,children:r}=e,i=VG("recharts-".concat(n),t);return C.createElement(KG.Provider,{value:i},r(i))},WG={cartesianItems:[],polarItems:[]},P_=jr({name:"graphicalItems",initialState:WG,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=mi(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=mi(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=mi(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:XG,replaceCartesianGraphicalItem:QG,removeCartesianGraphicalItem:ZG,addPolarGraphicalItem:JG,removePolarGraphicalItem:e9}=P_.actions,t9=P_.reducer;function n9(e){var t=$t(),n=C.useRef(null);return C.useEffect(()=>{n.current===null?t(XG(e)):n.current!==e&&t(QG({prev:n.current,next:e})),n.current=e},[t,e]),C.useEffect(()=>()=>{n.current&&(t(ZG(n.current)),n.current=null)},[t]),null}function r9(e){var t=$t();return C.useEffect(()=>(t(JG(e)),()=>{t(e9(e))}),[t,e]),null}var a9=["onMouseEnter","onClick","onMouseLeave"],i9=["id"],s9=["id"];function hx(e,t){if(e==null)return{};var n,r,i=o9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function jP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(n),!0).forEach(function(r){l9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l9(e,t,n){return(t=c9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c9(e){var t=u9(e,"string");return typeof t=="symbol"?t:t+""}function u9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ls(){return ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ls.apply(null,arguments)}function d9(e){var t=C.useMemo(()=>Dv(e.children,uo),[e.children]),n=Oe(r=>CG(r,e.id,t));return n==null?null:C.createElement(YG,{legendPayload:n})}function f9(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:f,tooltipType:d}=e;return{dataDefinedOnItem:r.map(p=>p.tooltipPayload),positions:r.map(p=>p.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:Bp(u,t),hide:f,type:d,color:l,unit:""}}}var p9=(e,t)=>e>t?"start":e<t?"end":"middle",h9=(e,t,n)=>zn(typeof t=="function"?t(e):t,n,n*.8),m9=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=M2(s,l),f=i+zn(e.cx,s,s/2),d=r+zn(e.cy,l,l/2),p=zn(e.innerRadius,u,0),g=h9(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:f,cy:d,innerRadius:p,outerRadius:g,maxRadius:y}},g9=(e,t)=>{var n=xn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function y9(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var v9=(e,t)=>{if(C.isValidElement(e))return C.cloneElement(e,t);if(typeof e=="function")return e(t);var n=pt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return C.createElement(Y2,ls({},t,{type:"linear",className:n}))},b9=(e,t,n)=>{if(C.isValidElement(e))return C.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),C.isValidElement(r)))return r;var i=pt("recharts-pie-label-text",y9(e));return C.createElement(lh,ls({},t,{alignmentBaseline:"middle",className:i}),r)};function x9(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=So(n),f=en(i,!1),d=en(s,!1),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((y,b)=>{var S=(y.startAngle+y.endAngle)/2,A=tn(y.cx,y.cy,y.outerRadius+p,S),E=Mt(Mt(Mt(Mt({},u),y),{},{stroke:"none"},f),{},{index:b,textAnchor:p9(A.x,y.cx)},A),T=Mt(Mt(Mt(Mt({},u),y),{},{fill:"none",stroke:y.fill},d),{},{index:b,points:[tn(y.cx,y.cy,y.outerRadius,S),A],key:"line"});return C.createElement(dr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},s&&v9(s,T),b9(i,E,jt(y,l)))});return C.createElement(dr,{className:"recharts-pie-labels"},g)}function S9(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?C.createElement(y_,{label:n.label}):C.createElement(x9,{sectors:t,props:n,showLabels:r})}function A9(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=Oe(yo),{onMouseEnter:l,onClick:u,onMouseLeave:f}=i,d=hx(i,a9),p=dx(l,i.dataKey),g=fx(f),y=px(u,i.dataKey);return t==null||t.length===0?null:C.createElement(C.Fragment,null,t.map((b,S)=>{if(b?.startAngle===0&&b?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===s,E=s?r:null,T=A?n:E,w=Mt(Mt({},b),{},{stroke:b.stroke,tabIndex:-1,[L2]:S,[$2]:i.dataKey});return C.createElement(dr,ls({tabIndex:-1,className:"recharts-pie-sector"},Pu(d,b,S),{onMouseEnter:p(b,S),onMouseLeave:g(b,S),onClick:y(b,S),key:"sector-".concat(b?.startAngle,"-").concat(b?.endAngle,"-").concat(b.midAngle,"-").concat(S)}),C.createElement(A_,ls({option:T,isActive:A,shapeType:"sector"},w)))}))}function C9(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:f,dataKey:d,nameKey:p,tooltipType:g}=n,y=Math.abs(n.minAngle),b=g9(u,f),S=Math.abs(b),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,E=r.filter(M=>jt(M,d,0)!==0).length,T=(S>=360?E:E-1)*A,w=S-E*y-T,O=r.reduce((M,j)=>{var U=jt(j,d,0);return M+(_e(U)?U:0)},0),_;if(O>0){var k;_=r.map((M,j)=>{var U=jt(M,d,0),q=jt(M,p,j),L=m9(n,s,M),$=(_e(U)?U:0)/O,G,Z=Mt(Mt({},M),i&&i[j]&&i[j].props);j?G=k.endAngle+xn(b)*A*(U!==0?1:0):G=u;var X=G+xn(b)*((U!==0?y:0)+$*w),re=(G+X)/2,I=(L.innerRadius+L.outerRadius)/2,Y=[{name:q,value:U,payload:Z,dataKey:d,type:g}],Q=tn(L.cx,L.cy,I,re);return k=Mt(Mt(Mt(Mt({},n.presentationProps),{},{percent:$,cornerRadius:l,name:q,tooltipPayload:Y,midAngle:re,middleRadius:I,tooltipPosition:Q},Z),L),{},{value:jt(M,d),startAngle:G,endAngle:X,payload:Z,paddingAngle:xn(b)*A}),k})}return _}function E9(e){var{showLabels:t,sectors:n,children:r}=e,i=C.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return C.createElement(oG,{value:t?i:void 0},r)}function T9(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:f,inactiveShape:d,onAnimationStart:p,onAnimationEnd:g}=t,y=Fp(t,"recharts-pie-"),b=n.current,[S,A]=C.useState(!1),E=C.useCallback(()=>{typeof g=="function"&&g(),A(!1)},[g]),T=C.useCallback(()=>{typeof p=="function"&&p(),A(!0)},[p]);return C.createElement(E9,{showLabels:!S,sectors:r},C.createElement(qp,{animationId:y,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:T,onAnimationEnd:E,key:y},w=>{var O=[],_=r&&r[0],k=_?.startAngle;return r?.forEach((M,j)=>{var U=b&&b[j],q=j>0?po(M,"paddingAngle",0):0;if(U){var L=Mn(U.endAngle-U.startAngle,M.endAngle-M.startAngle,w),$=Mt(Mt({},M),{},{startAngle:k+q,endAngle:k+L+q});O.push($),k=$.endAngle}else{var{endAngle:G,startAngle:Z}=M,X=Mn(0,G-Z,w),re=Mt(Mt({},M),{},{startAngle:k+q,endAngle:k+X+q});O.push(re),k=re.endAngle}}),n.current=O,C.createElement(dr,null,C.createElement(A9,{sectors:O,activeShape:f,inactiveShape:d,allOtherPieProps:t}))}),C.createElement(S9,{showLabels:!S,sectors:r,props:t}),t.children)}var P9={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ml.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function w9(e){var{id:t}=e,n=hx(e,i9),{hide:r,className:i,rootTabIndex:s}=e,l=C.useMemo(()=>Dv(e.children,uo),[e.children]),u=Oe(p=>EG(p,t,l)),f=C.useRef(null),d=pt("recharts-pie",i);return r||u==null?(f.current=null,C.createElement(dr,{tabIndex:s,className:d})):C.createElement(C.Fragment,null,C.createElement(C_,{fn:f9,args:Mt(Mt({},e),{},{sectors:u})}),C.createElement(dr,{tabIndex:s,className:d},C.createElement(T9,{props:Mt(Mt({},n),{},{sectors:u}),previousSectorsRef:f})))}function $f(e){var t=na(e,P9),{id:n}=t,r=hx(t,s9),i=So(r);return C.createElement(T_,{id:n,type:"pie"},s=>C.createElement(C.Fragment,null,C.createElement(r9,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),C.createElement(d9,ls({},r,{id:s})),C.createElement(w9,ls({},r,{id:s}))))}$f.displayName="Pie";function kP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function IP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(n),!0).forEach(function(r){O9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O9(e,t,n){return(t=N9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N9(e){var t=D9(e,"string");return typeof t=="symbol"?t:t+""}function D9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _9={xAxis:{},yAxis:{},zAxis:{}},w_=jr({name:"cartesianAxis",initialState:_9,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=IP(IP({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:M9,removeXAxis:j9,addYAxis:k9,removeYAxis:I9,addZAxis:sK,removeZAxis:oK,updateYAxisWidth:R9}=w_.actions,L9=w_.reducer,$9=se([un],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),B9=se([$9,Ci,Ei],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),O_=()=>Oe(B9),U9="Invariant failed";function z9(e,t){throw new Error(U9)}var H9=["x","y"];function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iv.apply(null,arguments)}function RP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(n),!0).forEach(function(r){G9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G9(e,t,n){return(t=Y9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F9(e,t){if(e==null)return{};var n,r,i=V9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function V9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function K9(e,t){var{x:n,y:r}=e,i=F9(e,H9),s="".concat(n),l=parseInt(s,10),u="".concat(r),f=parseInt(u,10),d="".concat(t.height||i.height),p=parseInt(d,10),g="".concat(t.width||i.width),y=parseInt(g,10);return nu(nu(nu(nu(nu({},t),i),l?{x:l}:{}),f?{y:f}:{}),{},{height:p,width:y,name:t.name,radius:t.radius})}function mx(e){return C.createElement(A_,iv({shapeType:"rectangle",propTransformer:K9,activeClassName:"recharts-active-bar"},e))}var W9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(_e(t))return t;var s=_e(r)||Sn(r);return s?t(r,i):(s||z9(),n)}},X9={},N_=jr({name:"errorBars",initialState:X9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:lK,replaceErrorBar:cK,removeErrorBar:uK}=N_.actions,Q9=N_.reducer,Z9=["children"];function J9(e,t){if(e==null)return{};var n,r,i=e7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function e7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var t7={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},n7=C.createContext(t7);function r7(e){var{children:t}=e,n=J9(e,Z9);return C.createElement(n7.Provider,{value:n},t)}function D_(e,t){var n,r,i=Oe(d=>ps(d,e)),s=Oe(d=>hs(d,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Cr.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Er.allowDataOverflow,f=l||u;return{needClip:f,needClipX:l,needClipY:u}}function a7(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=O_(),{needClipX:s,needClipY:l,needClip:u}=D_(t,n);if(!u)return null;var{x:f,y:d,width:p,height:g}=i;return C.createElement("clipPath",{id:"clipPath-".concat(r)},C.createElement("rect",{x:s?f:f-p/2,y:l?d:d-g/2,width:s?p:p*2,height:l?g:g*2}))}var i7=["onMouseEnter","onMouseLeave","onClick"],s7=["value","background","tooltipPosition"],o7=["id"],l7=["onMouseEnter","onClick","onMouseLeave"];function cs(){return cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cs.apply(null,arguments)}function LP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(n),!0).forEach(function(r){c7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c7(e,t,n){return(t=u7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u7(e){var t=d7(e,"string");return typeof t=="symbol"?t:t+""}function d7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cp(e,t){if(e==null)return{};var n,r,i=f7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var p7=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Bp(n,t),payload:e}]};function h7(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Bp(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function m7(e){var t=Oe(yo),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:f}=s,d=Cp(s,i7),p=dx(l,r),g=fx(u),y=px(f,r);if(!i||n==null)return null;var b=en(i,!1);return C.createElement(C.Fragment,null,n.map((S,A)=>{var{value:E,background:T,tooltipPosition:w}=S,O=Cp(S,s7);if(!T)return null;var _=p(S,A),k=g(S,A),M=y(S,A),j=Fn(Fn(Fn(Fn(Fn({option:i,isActive:String(A)===t},O),{},{fill:"#eee"},T),b),Pu(d,S,A)),{},{onMouseEnter:_,onMouseLeave:k,onClick:M,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return C.createElement(mx,cs({key:"background-bar-".concat(A)},j))}))}function g7(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Fn(Fn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return C.createElement(sG,{value:t?i:void 0},n)}function y7(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=Oe(yo),f=Oe(XD),d=n&&String(s)===u&&(f==null||l===f),p=d?n:t;return C.createElement(mx,cs({},r,i,{isActive:d,option:p,index:s,dataKey:l}))}function v7(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return C.createElement(mx,cs({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function b7(e){var{data:t,props:n}=e,r=So(n),{id:i}=r,s=Cp(r,o7),{shape:l,dataKey:u,activeBar:f}=n,{onMouseEnter:d,onClick:p,onMouseLeave:g}=n,y=Cp(n,l7),b=dx(d,u),S=fx(g),A=px(p,u);return t?C.createElement(C.Fragment,null,t.map((E,T)=>C.createElement(dr,cs({className:"recharts-bar-rectangle"},Pu(y,E,T),{onMouseEnter:b(E,T),onMouseLeave:S(E,T),onClick:A(E,T),key:"rectangle-".concat(E?.x,"-").concat(E?.y,"-").concat(E?.value,"-").concat(T)}),f?C.createElement(y7,{shape:l,activeBar:f,baseProps:s,entry:E,index:T,dataKey:u}):C.createElement(v7,{shape:l,baseProps:s,entry:E,index:T,dataKey:u})))):null}function x7(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:f,onAnimationEnd:d,onAnimationStart:p}=t,g=n.current,y=Fp(t,"recharts-bar-"),[b,S]=C.useState(!1),A=!b,E=C.useCallback(()=>{typeof d=="function"&&d(),S(!1)},[d]),T=C.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return C.createElement(g7,{showLabels:A,rects:r},C.createElement(qp,{animationId:y,begin:l,duration:u,isActive:s,easing:f,onAnimationEnd:E,onAnimationStart:T,key:y},w=>{var O=w===1?r:r?.map((_,k)=>{var M=g&&g[k];if(M)return Fn(Fn({},_),{},{x:Mn(M.x,_.x,w),y:Mn(M.y,_.y,w),width:Mn(M.width,_.width,w),height:Mn(M.height,_.height,w)});if(i==="horizontal"){var j=Mn(0,_.height,w);return Fn(Fn({},_),{},{y:_.y+_.height-j,height:j})}var U=Mn(0,_.width,w);return Fn(Fn({},_),{},{width:U})});return w>0&&(n.current=O??null),O==null?null:C.createElement(dr,null,C.createElement(b7,{props:t,data:O}))}),C.createElement(y_,{label:t.label}),t.children)}function S7(e){var t=C.useRef(null);return C.createElement(x7,{previousRectanglesRef:t,props:e})}var __=0,A7=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:jt(e,t)}};class C7 extends C.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:f,id:d}=this.props;if(t||n==null)return null;var p=pt("recharts-bar",i),g=d;return C.createElement(dr,{className:p,id:d},u&&C.createElement("defs",null,C.createElement(a7,{clipPathId:g,xAxisId:s,yAxisId:l})),C.createElement(dr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},C.createElement(m7,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),C.createElement(S7,this.props)))}}var E7={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ml.isSsr,legendType:"rect",minPointSize:__,xAxisId:0,yAxisId:0};function T7(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:d,isAnimationActive:p}=e,{needClip:g}=D_(t,n),y=Qv(),b=ta(),S=Dv(e.children,uo),A=Oe(w=>Z7(w,t,n,b,e.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var E,T=A?.[0];return T==null||T.height==null||T.width==null?E=0:E=y==="vertical"?T.height/2:T.width/2,C.createElement(r7,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:A7,errorBarOffset:E},C.createElement(C7,cs({},e,{layout:y,needClip:g,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:d,isAnimationActive:p})))}function P7(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:f,yAxisTicks:d,stackedData:p,displayedData:g,offset:y,cells:b,parentViewBox:S}=e,A=t==="horizontal"?u:l,E=p?A.scale.domain():null,T=H3({numericAxis:A});return g.map((w,O)=>{var _,k,M,j,U,q;p?_=R3(p[O],E):(_=jt(w,n),Array.isArray(_)||(_=[T,_]));var L=W9(r,__)(_[1],O);if(t==="horizontal"){var $,[G,Z]=[u.scale(_[0]),u.scale(_[1])];k=EE({axis:l,ticks:f,bandSize:s,offset:i.offset,entry:w,index:O}),M=($=Z??G)!==null&&$!==void 0?$:void 0,j=i.size;var X=G-Z;if(U=Dr(X)?0:X,q={x:k,y:y.top,width:j,height:y.height},Math.abs(L)>0&&Math.abs(U)<Math.abs(L)){var re=xn(U||L)*(Math.abs(L)-Math.abs(U));M-=re,U+=re}}else{var[I,Y]=[l.scale(_[0]),l.scale(_[1])];if(k=I,M=EE({axis:u,ticks:d,bandSize:s,offset:i.offset,entry:w,index:O}),j=Y-I,U=i.size,q={x:y.left,y:M,width:y.width,height:U},Math.abs(L)>0&&Math.abs(j)<Math.abs(L)){var Q=xn(j||L)*(Math.abs(L)-Math.abs(j));j+=Q}}if(k==null||M==null||j==null||U==null)return null;var ve=Fn(Fn({},w),{},{x:k,y:M,width:j,height:U,value:p?_:_[1],payload:w,background:q,tooltipPosition:{x:k+j/2,y:M+U/2},parentViewBox:S},b&&b[O]&&b[O].props);return ve}).filter(Boolean)}function li(e){var t=na(e,E7),n=ta();return C.createElement(T_,{id:t.id,type:"bar"},r=>C.createElement(C.Fragment,null,C.createElement(GG,{legendPayload:p7(t)}),C.createElement(C_,{fn:h7,args:t}),C.createElement(n9,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:z3(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),C.createElement(T7,cs({},t,{id:r}))))}li.displayName="Bar";function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(n),!0).forEach(function(r){w7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w7(e,t,n){return(t=O7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O7(e){var t=N7(e,"string");return typeof t=="symbol"?t:t+""}function N7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D7=(e,t)=>t,_7=(e,t,n)=>n,M7=(e,t,n,r)=>r,j7=(e,t,n,r,i)=>i,zu=se([Ib,j7],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),k7=se([zu],e=>e?.maxBarSize),I7=(e,t,n,r,i,s)=>s,BP=(e,t,n)=>{var r=n??e;if(!Sn(r))return zn(r,t,0)},R7=se([it,Ib,D7,_7,M7],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),L7=(e,t,n,r)=>{var i=it(e);return i==="horizontal"?J0(e,"yAxis",n,r):J0(e,"xAxis",t,r)},$7=(e,t,n)=>{var r=it(e);return r==="horizontal"?zT(e,"xAxis",t):zT(e,"yAxis",n)},B7=(e,t,n)=>{var r={},i=e.filter(nh),s=e.filter(d=>d.stackId==null),l=i.reduce((d,p)=>(d[p.stackId]||(d[p.stackId]=[]),d[p.stackId].push(p),d),r),u=Object.entries(l).map(d=>{var[p,g]=d,y=g.map(S=>S.dataKey),b=BP(t,n,g[0].barSize);return{stackId:p,dataKeys:y,barSize:b}}),f=s.map(d=>{var p=[d.dataKey].filter(y=>y!=null),g=BP(t,n,d.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...u,...f]},U7=se([R7,A6,$7],B7),z7=(e,t,n,r,i)=>{var s,l,u=zu(e,t,n,r,i);if(u!=null){var f=it(e),d=KN(e),{maxBarSize:p}=u,g=Sn(p)?d:p,y,b;return f==="horizontal"?(y=Nl(e,"xAxis",t,r),b=Ol(e,"xAxis",t,r)):(y=Nl(e,"yAxis",n,r),b=Ol(e,"yAxis",n,r)),(s=(l=Fv(y,b,!0))!==null&&l!==void 0?l:g)!==null&&s!==void 0?s:0}},M_=(e,t,n,r)=>{var i=it(e),s,l;return i==="horizontal"?(s=Nl(e,"xAxis",t,r),l=Ol(e,"xAxis",t,r)):(s=Nl(e,"yAxis",n,r),l=Ol(e,"yAxis",n,r)),Fv(s,l)};function H7(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=zn(e,n,0,!0),u,f=[];if(Mr(r[0].barSize)){var d=!1,p=n/s,g=r.reduce((T,w)=>T+(w.barSize||0),0);g+=(s-1)*l,g>=n&&(g-=(s-1)*l,l=0),g>=n&&p>0&&(d=!0,p*=.9,g=s*p);var y=(n-g)/2>>0,b={offset:y-l,size:0};u=r.reduce((T,w)=>{var O,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:b.offset+b.size+l,size:d?p:(O=w.barSize)!==null&&O!==void 0?O:0}},k=[...T,_];return b=k[k.length-1].position,k},f)}else{var S=zn(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var A=(n-2*S-(s-1)*l)/s;A>1&&(A>>=0);var E=Mr(i)?Math.min(A,i):A;u=r.reduce((T,w,O)=>[...T,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:S+(A+l)*O+(A-E)/2,size:E}}],f)}return u}}var G7=(e,t,n,r,i,s,l)=>{var u=Sn(l)?t:l,f=H7(n,r,i!==s?i:s,e,u);return i!==s&&f!=null&&(f=f.map(d=>Of(Of({},d),{},{position:Of(Of({},d.position),{},{offset:d.position.offset-i/2})}))),f},Y7=se([U7,KN,S6,WN,z7,M_,k7],G7),q7=(e,t,n,r)=>Nl(e,"xAxis",t,r),F7=(e,t,n,r)=>Nl(e,"yAxis",n,r),V7=(e,t,n,r)=>Ol(e,"xAxis",t,r),K7=(e,t,n,r)=>Ol(e,"yAxis",n,r),W7=se([Y7,zu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),X7=(e,t)=>{var n=Mb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},Q7=se([L7,zu],X7),Z7=se([un,Vv,q7,F7,V7,K7,W7,it,Cb,M_,Q7,zu,I7],(e,t,n,r,i,s,l,u,f,d,p,g,y)=>{var{chartData:b,dataStartIndex:S,dataEndIndex:A}=f;if(!(g==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||d==null)){var{data:E}=g,T;if(E!=null&&E.length>0?T=E:T=b?.slice(S,A+1),T!=null)return P7({layout:u,barSettings:g,pos:l,parentViewBox:t,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:T,offset:e,cells:y})}}),j_=e=>{var{chartData:t}=e,n=$t(),r=ta();return C.useEffect(()=>r?()=>{}:(n(QT(t)),()=>{n(QT(void 0))}),[t,n,r]),null},UP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},k_=jr({name:"brush",initialState:UP,reducers:{setBrushSettings(e,t){return t.payload==null?UP:t.payload}}}),{setBrushSettings:dK}=k_.actions,J7=k_.reducer;function eY(e,t,n){return(t=tY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class gx{static create(t){return new gx(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}eY(gx,"EPS",1e-4);function rY(e){return(e%180+180)%180}var aY=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=rY(i),l=s*Math.PI/180,u=Math.atan(r/n),f=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(f)},iY={dots:[],areas:[],lines:[]},I_=jr({name:"referenceElements",initialState:iY,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=mi(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=mi(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=mi(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:fK,removeDot:pK,addArea:hK,removeArea:mK,addLine:gK,removeLine:yK}=I_.actions,sY=I_.reducer,oY=C.createContext(void 0),lY=e=>{var{children:t}=e,[n]=C.useState("".concat(mu("recharts"),"-clip")),r=O_();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return C.createElement(oY.Provider,{value:n},C.createElement("defs",null,C.createElement("clipPath",{id:n},C.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function r0(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function R_(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function cY(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return aY(r,n)}function uY(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Ep(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function dY(e,t){return R_(e,t+1)}function fY(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,f=0,d=1,p=l,g=function(){var S=r?.[f];if(S===void 0)return{v:R_(r,d)};var A=f,E,T=()=>(E===void 0&&(E=n(S,A)),E),w=S.coordinate,O=f===0||Ep(e,w,T,p,u);O||(f=0,p=l,d+=1),O&&(p=w+e*(T()/2+i),f+=d)},y;d<=s.length;)if(y=g(),y)return y.v;return[]}function zP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(n),!0).forEach(function(r){pY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pY(e,t,n){return(t=hY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hY(e){var t=mY(e,"string");return typeof t=="symbol"?t:t+""}function mY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gY(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:f}=t,d=function(y){var b=s[y],S,A=()=>(S===void 0&&(S=n(b,y)),S);if(y===l-1){var E=e*(b.coordinate+e*A()/2-f);s[y]=b=$n($n({},b),{},{tickCoord:E>0?b.coordinate-E*e:b.coordinate})}else s[y]=b=$n($n({},b),{},{tickCoord:b.coordinate});var T=Ep(e,b.tickCoord,A,u,f);T&&(f=b.tickCoord-e*(A()/2+i),s[y]=$n($n({},b),{},{isShow:!0}))},p=l-1;p>=0;p--)d(p);return s}function yY(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:f,end:d}=t;if(s){var p=r[u-1],g=n(p,u-1),y=e*(p.coordinate+e*g/2-d);l[u-1]=p=$n($n({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate});var b=Ep(e,p.tickCoord,()=>g,f,d);b&&(d=p.tickCoord-e*(g/2+i),l[u-1]=$n($n({},p),{},{isShow:!0}))}for(var S=s?u-1:u,A=function(w){var O=l[w],_,k=()=>(_===void 0&&(_=n(O,w)),_);if(w===0){var M=e*(O.coordinate-e*k()/2-f);l[w]=O=$n($n({},O),{},{tickCoord:M<0?O.coordinate-M*e:O.coordinate})}else l[w]=O=$n($n({},O),{},{tickCoord:O.coordinate});var j=Ep(e,O.tickCoord,k,f,d);j&&(f=O.tickCoord+e*(k()/2+i),l[w]=$n($n({},O),{},{isShow:!0}))},E=0;E<S;E++)A(E);return l}function yx(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:f,tickFormatter:d,unit:p,angle:g}=e;if(!i||!i.length||!r)return[];if(_e(f)||Ml.isSsr){var y;return(y=dY(i,_e(f)?f:0))!==null&&y!==void 0?y:[]}var b=[],S=u==="top"||u==="bottom"?"width":"height",A=p&&S==="width"?fu(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},E=(O,_)=>{var k=typeof d=="function"?d(O.value,_):O.value;return S==="width"?cY(fu(k,{fontSize:t,letterSpacing:n}),A,g):fu(k,{fontSize:t,letterSpacing:n})[S]},T=i.length>=2?xn(i[1].coordinate-i[0].coordinate):1,w=uY(s,T,S);return f==="equidistantPreserveStart"?fY(T,w,E,i,l):(f==="preserveStart"||f==="preserveStartEnd"?b=yY(T,w,E,i,l,f==="preserveStartEnd"):b=gY(T,w,E,i,l),b.filter(O=>O.isShow))}var vY=["viewBox"],bY=["viewBox"];function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ml.apply(null,arguments)}function HP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(n),!0).forEach(function(r){vx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GP(e,t){if(e==null)return{};var n,r,i=xY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function vx(e,t,n){return(t=SY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SY(e){var t=AY(e,"string");return typeof t=="symbol"?t:t+""}function AY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ms extends C.Component{constructor(t){super(t),this.tickRefs=C.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=GP(t,vY),s=this.props,{viewBox:l}=s,u=GP(s,bY);return!r0(r,l)||!r0(i,u)||!r0(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:f,tickMargin:d}=this.props,p,g,y,b,S,A,E=f?-1:1,T=t.tickSize||u,w=_e(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":p=g=t.coordinate,b=r+ +!f*s,y=b-E*T,A=y-E*d,S=w;break;case"left":y=b=t.coordinate,g=n+ +!f*i,p=g-E*T,S=p-E*d,A=w;break;case"right":y=b=t.coordinate,g=n+ +f*i,p=g+E*T,S=p+E*d,A=w;break;default:p=g=t.coordinate,b=r+ +f*s,y=b+E*T,A=y+E*d,S=w;break}return{line:{x1:p,y1:y,x2:g,y2:b},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,f=on(on(on({},en(this.props,!1)),en(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!l||s==="bottom"&&l);f=on(on({},f),{},{x1:t,y1:n+d*i,x2:t+r,y2:n+d*i})}else{var p=+(s==="left"&&!l||s==="right"&&l);f=on(on({},f),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+i})}return C.createElement("line",ml({},f,{className:pt("recharts-cartesian-axis-line",po(u,"className"))}))}static renderTickItem(t,n,r){var i,s=pt(n.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(t))i=C.cloneElement(t,on(on({},n),{},{className:s}));else if(typeof t=="function")i=t(on(on({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=pt(l,t.className)),i=C.createElement(lh,ml({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:f,padding:d,tickTextProps:p}=this.props,g=yx(on(on({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),S=So(this.props),A=en(l,!1),E=on(on({},S),{},{fill:"none"},en(i,!1)),T=g.map((w,O)=>{var{line:_,tick:k}=this.getTickLineCoord(w),M=on(on(on(on({textAnchor:y,verticalAnchor:b},S),{},{stroke:"none",fill:s},A),k),{},{index:O,payload:w,visibleTicksCount:g.length,tickFormatter:u,padding:d},p);return C.createElement(dr,ml({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Pu(this.props,w,O)),i&&C.createElement("line",ml({},E,_,{className:pt("recharts-cartesian-axis-tick-line",po(i,"className"))})),l&&ms.renderTickItem(l,M,"".concat(typeof u=="function"?u(w.value,O):w.value).concat(f||"")))});return T.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},T):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:C.createElement(dr,{className:pt("recharts-cartesian-axis",i),ref:u=>{if(u){var f=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(f);var d=f[0];if(d){var p=window.getComputedStyle(d).fontSize,g=window.getComputedStyle(d).letterSpacing;(p!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),C.createElement(BH,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},C.createElement(WH,{label:this.props.label}),this.props.children))}}vx(ms,"displayName","CartesianAxis");vx(ms,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var CY=["x1","y1","x2","y2","key"],EY=["offset"],TY=["xAxisId","yAxisId"],PY=["xAxisId","yAxisId"];function YP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(n),!0).forEach(function(r){wY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wY(e,t,n){return(t=OY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OY(e){var t=NY(e,"string");return typeof t=="symbol"?t:t+""}function NY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},io.apply(null,arguments)}function Tp(e,t){if(e==null)return{};var n,r,i=DY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function DY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _Y=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return C.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function L_(e,t){var n;if(C.isValidElement(e))n=C.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,f=Tp(t,CY),d=So(f),{offset:p}=d,g=Tp(d,EY);n=C.createElement("line",io({},g,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function MY(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Tp(e,TY),f=i.map((d,p)=>{var g=Un(Un({},u),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(p),index:p});return L_(r,g)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function jY(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Tp(e,PY),f=i.map((d,p)=>{var g=Un(Un({},u),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(p),index:p});return L_(r,g)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function kY(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:f=!0}=e;if(!f||!t||!t.length)return null;var d=u.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==d[0]&&d.unshift(0);var p=d.map((g,y)=>{var b=!d[y+1],S=b?i+l-g:d[y+1]-g;if(S<=0)return null;var A=y%t.length;return C.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:S,width:s,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function IY(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var d=f.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==d[0]&&d.unshift(0);var p=d.map((g,y)=>{var b=!d[y+1],S=b?i+l-g:d[y+1]-g;if(S<=0)return null;var A=y%n.length;return C.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var RY=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return k2(yx(Un(Un(Un({},ms.defaultProps),n),{},{ticks:I2(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},LY=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return k2(yx(Un(Un(Un({},ms.defaultProps),n),{},{ticks:I2(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},$Y={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function ci(e){var t=Wv(),n=Xv(),r=B2(),i=Un(Un({},na(e,$Y)),{},{x:_e(e.x)?e.x:r.left,y:_e(e.y)?e.y:r.top,width:_e(e.width)?e.width:r.width,height:_e(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:f,width:d,height:p,syncWithTicks:g,horizontalValues:y,verticalValues:b}=i,S=ta(),A=Oe(q=>HT(q,"xAxis",s,S)),E=Oe(q=>HT(q,"yAxis",l,S));if(!_e(d)||d<=0||!_e(p)||p<=0||!_e(u)||u!==+u||!_e(f)||f!==+f)return null;var T=i.verticalCoordinatesGenerator||RY,w=i.horizontalCoordinatesGenerator||LY,{horizontalPoints:O,verticalPoints:_}=i;if((!O||!O.length)&&typeof w=="function"){var k=y&&y.length,M=w({yAxis:E?Un(Un({},E),{},{ticks:k?y:E.ticks}):void 0,width:t,height:n,offset:r},k?!0:g);du(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(O=M)}if((!_||!_.length)&&typeof T=="function"){var j=b&&b.length,U=T({xAxis:A?Un(Un({},A),{},{ticks:j?b:A.ticks}):void 0,width:t,height:n,offset:r},j?!0:g);du(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(_=U)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(_Y,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),C.createElement(kY,io({},i,{horizontalPoints:O})),C.createElement(IY,io({},i,{verticalPoints:_})),C.createElement(MY,io({},i,{offset:r,horizontalPoints:O,xAxis:A,yAxis:E})),C.createElement(jY,io({},i,{offset:r,verticalPoints:_,xAxis:A,yAxis:E})))}ci.displayName="CartesianGrid";var BY=["children"],UY=["dangerouslySetInnerHTML","ticks"],zY=["id"];function $_(e,t,n){return(t=HY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HY(e){var t=GY(e,"string");return typeof t=="symbol"?t:t+""}function GY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sv.apply(null,arguments)}function ov(e,t){if(e==null)return{};var n,r,i=YY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qY(e){var t=$t(),n=C.useMemo(()=>{var{children:r}=e,i=ov(e,BY);return i},[e]);return C.useEffect(()=>(t(M9(n)),()=>{t(j9(n))}),[n,t]),e.children}var FY=e=>{var{xAxisId:t,className:n}=e,r=Oe(Vv),i=ta(),s="xAxis",l=Oe(E=>Bl(E,s,t,i)),u=Oe(E=>_D(E,s,t,i)),f=Oe(E=>wD(E,t)),d=Oe(E=>fU(E,t)),p=Oe(E=>aD(E,t));if(f==null||d==null||p==null)return null;var{dangerouslySetInnerHTML:g,ticks:y}=e,b=ov(e,UY),{id:S}=p,A=ov(p,zY);return C.createElement(ms,sv({},b,A,{scale:l,x:d.x,y:d.y,width:f.width,height:f.height,className:pt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},VY=e=>{var t,n,r,i,s;return C.createElement(qY,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},C.createElement(FY,e))};class Da extends C.Component{render(){return C.createElement(VY,this.props)}}$_(Da,"displayName","XAxis");$_(Da,"defaultProps",{allowDataOverflow:Cr.allowDataOverflow,allowDecimals:Cr.allowDecimals,allowDuplicatedCategory:Cr.allowDuplicatedCategory,height:Cr.height,hide:!1,mirror:Cr.mirror,orientation:Cr.orientation,padding:Cr.padding,reversed:Cr.reversed,scale:Cr.scale,tickCount:Cr.tickCount,type:Cr.type,xAxisId:0});var KY=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>l&&(l=g.width)}});var u=n?n.getBoundingClientRect().width:0,f=i+s,d=l+f+u+(n?r:0);return Math.round(d)}return 0},WY=["dangerouslySetInnerHTML","ticks"],XY=["id"];function B_(e,t,n){return(t=QY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QY(e){var t=ZY(e,"string");return typeof t=="symbol"?t:t+""}function ZY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lv.apply(null,arguments)}function qP(e,t){if(e==null)return{};var n,r,i=JY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function JY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function eq(e){var t=$t();return C.useEffect(()=>(t(k9(e)),()=>{t(I9(e))}),[e,t]),null}var tq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=C.useRef(null),u=C.useRef(null),f=Oe(Vv),d=ta(),p=$t(),g="yAxis",y=Oe(M=>Bl(M,g,n,d)),b=Oe(M=>OD(M,n)),S=Oe(M=>pU(M,n)),A=Oe(M=>_D(M,g,n,d)),E=Oe(M=>iD(M,n));if(C.useLayoutEffect(()=>{var M;if(!(i!=="auto"||!b||sx(s)||C.isValidElement(s)||E==null)){var j=l.current,U=j==null||(M=j.tickRefs)===null||M===void 0?void 0:M.current,{tickSize:q,tickMargin:L}=j.props,$=KY({ticks:U,label:u.current,labelGapWithTick:5,tickSize:q,tickMargin:L});Math.round(b.width)!==Math.round($)&&p(R9({id:n,width:$}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,b?.width,b,p,s,n,i]),b==null||S==null||E==null)return null;var{dangerouslySetInnerHTML:T,ticks:w}=e,O=qP(e,WY),{id:_}=E,k=qP(E,XY);return C.createElement(ms,lv({},O,k,{ref:l,labelRef:u,scale:y,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:b.width,height:b.height,className:pt("recharts-".concat(g," ").concat(g),r),viewBox:f,ticks:A}))},nq=e=>{var t,n,r,i,s;return C.createElement(C.Fragment,null,C.createElement(eq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),C.createElement(tq,e))},rq={allowDataOverflow:Er.allowDataOverflow,allowDecimals:Er.allowDecimals,allowDuplicatedCategory:Er.allowDuplicatedCategory,hide:!1,mirror:Er.mirror,orientation:Er.orientation,padding:Er.padding,reversed:Er.reversed,scale:Er.scale,tickCount:Er.tickCount,type:Er.type,width:Er.width,yAxisId:0};class _a extends C.Component{render(){return C.createElement(nq,this.props)}}B_(_a,"displayName","YAxis");B_(_a,"defaultProps",rq);var a0={exports:{}},i0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FP;function aq(){if(FP)return i0;FP=1;var e=Dl();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return i0.useSyncExternalStoreWithSelector=function(f,d,p,g,y){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function E(k){if(!T){if(T=!0,w=k,k=g(k),y!==void 0&&S.hasValue){var M=S.value;if(y(M,k))return O=M}return O=k}if(M=O,n(w,k))return M;var j=g(k);return y!==void 0&&y(M,j)?(w=k,M):(w=k,O=j)}var T=!1,w,O,_=p===void 0?null:p;return[function(){return E(d())},_===null?void 0:function(){return E(_())}]},[d,p,g,y]);var A=r(f,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},i0}var VP;function iq(){return VP||(VP=1,a0.exports=aq()),a0.exports}iq();function sq(e){e()}function oq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var KP={notify(){},get:()=>[]};function lq(e,t){let n,r=KP,i=0,s=!1;function l(A){p();const E=r.subscribe(A);let T=!1;return()=>{T||(T=!0,E(),g())}}function u(){r.notify()}function f(){S.onStateChange&&S.onStateChange()}function d(){return s}function p(){i++,n||(n=e.subscribe(f),r=oq())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=KP)}function y(){s||(s=!0,p())}function b(){s&&(s=!1,g())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:d,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>r};return S}var cq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uq=cq(),dq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fq=dq(),pq=()=>uq||fq?C.useLayoutEffect:C.useEffect,hq=pq(),mq=Symbol.for("react-redux-context"),gq=typeof globalThis<"u"?globalThis:{};function yq(){if(!C.createContext)return{};const e=gq[mq]??=new Map;let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var vq=yq();function bq(e){const{children:t,context:n,serverState:r,store:i}=e,s=C.useMemo(()=>{const f=lq(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),l=C.useMemo(()=>i.getState(),[i]);hq(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const u=n||vq;return C.createElement(u.Provider,{value:s},t)}var xq=bq,Sq=(e,t)=>t,bx=se([Sq,it,tD,fn,FD,Pi,yz,un],Az),xx=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},U_=Jr("mouseClick"),z_=Ou();z_.startListening({actionCreator:U_,effect:(e,t)=>{var n=e.payload,r=bx(t.getState(),xx(n));r?.activeIndex!=null&&t.dispatch(PU({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var cv=Jr("mouseMove"),H_=Ou();H_.startListening({actionCreator:cv,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Qb(r,r.tooltip.settings.shared),s=bx(r,xx(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(BD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch($D()))}});function Aq(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var WP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},G_=jr({name:"rootProps",initialState:WP,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:WP.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Cq=G_.reducer,{updateOptions:Eq}=G_.actions,Y_=jr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Tq}=Y_.actions,Pq=Y_.reducer,q_=Jr("keyDown"),F_=Jr("focus"),Sx=Ou();Sx.startListening({actionCreator:q_,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(Zb(i,zl(n))),u=Pi(n);if(s==="Enter"){var f=bp(n,"axis","hover",String(i.index));t.dispatch(tv({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var d=yU(n),p=d==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,y=l+g*p;if(!(u==null||y>=u.length||y<0)){var b=bp(n,"axis","hover",String(y));t.dispatch(tv({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});Sx.startListening({actionCreator:F_,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=bp(n,"axis","hover",String(s));t.dispatch(tv({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Xr=Jr("externalEvent"),V_=Ou();V_.startListening({actionCreator:Xr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:lz(n),activeDataKey:XD(n),activeIndex:yo(n),activeLabel:WD(n),activeTooltipIndex:yo(n),isTooltipActive:cz(n)};e.payload.handler(r,e.payload.reactEvent)}}});var wq=se([Ul],e=>e.tooltipItemPayloads),Oq=se([wq,Bu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),K_=Jr("touchMove"),W_=Ou();W_.startListening({actionCreator:K_,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Qb(r,r.tooltip.settings.shared);if(i==="axis"){var s=bx(r,xx({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(BD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],f=document.elementFromPoint(u.clientX,u.clientY);if(!f||!f.getAttribute)return;var d=f.getAttribute(L2),p=(l=f.getAttribute($2))!==null&&l!==void 0?l:void 0,g=Oq(t.getState(),d,p);t.dispatch(LD({activeDataKey:p,activeIndex:d,activeCoordinate:g}))}}});var Nq=c2({brush:J7,cartesianAxis:L9,chartData:$z,errorBars:Q9,graphicalItems:t9,layout:x3,legend:u4,options:jz,polarAxis:yG,polarOptions:Pq,referenceElements:sY,rootProps:Cq,tooltip:wU}),Dq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return qL({reducer:Nq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([z_.middleware,H_.middleware,Sx.middleware,V_.middleware,W_.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Aq},name:"recharts-".concat(n)}})};function X_(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=ta(),s=C.useRef(null);if(i)return n;s.current==null&&(s.current=Dq(t,r));var l=Uv;return C.createElement(xq,{context:l,store:s.current},n)}function Q_(e){var{layout:t,width:n,height:r,margin:i}=e,s=$t(),l=ta();return C.useEffect(()=>{l||(s(y3(t)),s(v3({width:n,height:r})),s(g3(i)))},[s,l,t,n,r,i]),null}function Z_(e){var t=$t();return C.useEffect(()=>{t(Eq(e))},[t,e]),null}var _q=["children"];function Mq(e,t){if(e==null)return{};var n,r,i=jq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Pp(){return Pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pp.apply(null,arguments)}var kq={width:"100%",height:"100%"},Iq=C.forwardRef((e,t)=>{var n=Wv(),r=Xv(),i=G2();if(!Cl(n)||!Cl(r))return null;var{children:s,otherAttributes:l,title:u,desc:f}=e,d,p;return typeof l.tabIndex=="number"?d=l.tabIndex:d=i?0:void 0,typeof l.role=="string"?p=l.role:p=i?"application":void 0,C.createElement(_v,Pp({},l,{title:u,desc:f,role:p,tabIndex:d,width:n,height:r,style:kq,ref:t}),s)}),Rq=e=>{var{children:t}=e,n=Oe(Gp);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return C.createElement(_v,{width:r,height:i,x:l,y:s},t)},XP=C.forwardRef((e,t)=>{var{children:n}=e,r=Mq(e,_q),i=ta();return i?C.createElement(Rq,null,n):C.createElement(Iq,Pp({ref:t},r),n)});function Lq(){var e=$t(),[t,n]=C.useState(null),r=Oe(W3);return C.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;Mr(s)&&s!==r&&e(b3(s))}},[t,e,r]),n}function QP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(n),!0).forEach(function(r){Bq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bq(e,t,n){return(t=Uq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uq(e){var t=zq(e,"string");return typeof t=="symbol"?t:t+""}function zq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hq=C.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:f,onMouseEnter:d,onMouseLeave:p,onMouseMove:g,onMouseUp:y,onTouchEnd:b,onTouchMove:S,onTouchStart:A,style:E,width:T}=e,w=$t(),[O,_]=C.useState(null),[k,M]=C.useState(null);Vz();var j=Lq(),U=C.useCallback(K=>{j(K),typeof t=="function"&&t(K),_(K),M(K)},[j,t,_,M]),q=C.useCallback(K=>{w(U_(K)),w(Xr({handler:s,reactEvent:K}))},[w,s]),L=C.useCallback(K=>{w(cv(K)),w(Xr({handler:d,reactEvent:K}))},[w,d]),$=C.useCallback(K=>{w($D()),w(Xr({handler:p,reactEvent:K}))},[w,p]),G=C.useCallback(K=>{w(cv(K)),w(Xr({handler:g,reactEvent:K}))},[w,g]),Z=C.useCallback(()=>{w(F_())},[w]),X=C.useCallback(K=>{w(q_(K.key))},[w]),re=C.useCallback(K=>{w(Xr({handler:l,reactEvent:K}))},[w,l]),I=C.useCallback(K=>{w(Xr({handler:u,reactEvent:K}))},[w,u]),Y=C.useCallback(K=>{w(Xr({handler:f,reactEvent:K}))},[w,f]),Q=C.useCallback(K=>{w(Xr({handler:y,reactEvent:K}))},[w,y]),ve=C.useCallback(K=>{w(Xr({handler:A,reactEvent:K}))},[w,A]),R=C.useCallback(K=>{w(K_(K)),w(Xr({handler:S,reactEvent:K}))},[w,S]),V=C.useCallback(K=>{w(Xr({handler:b,reactEvent:K}))},[w,b]);return C.createElement(n_.Provider,{value:O},C.createElement(DO.Provider,{value:k},C.createElement("div",{className:pt("recharts-wrapper",r),style:$q({position:"relative",cursor:"default",width:T,height:i},E),onClick:q,onContextMenu:re,onDoubleClick:I,onFocus:Z,onKeyDown:X,onMouseDown:Y,onMouseEnter:L,onMouseLeave:$,onMouseMove:G,onMouseUp:Q,onTouchEnd:V,onTouchMove:R,onTouchStart:ve,ref:U},n)))}),Gq=["children","className","width","height","style","compact","title","desc"];function Yq(e,t){if(e==null)return{};var n,r,i=qq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function qq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var J_=C.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:f,desc:d}=e,p=Yq(e,Gq),g=So(p);return u?C.createElement(XP,{otherAttributes:g,title:f,desc:d},n):C.createElement(Hq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},C.createElement(XP,{otherAttributes:g,title:f,desc:d,ref:t},C.createElement(lY,null,n)))}),Fq=["width","height"];function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uv.apply(null,arguments)}function Vq(e,t){if(e==null)return{};var n,r,i=Kq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Wq={top:5,right:5,bottom:5,left:5},Xq={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Wq,reverseStackOrder:!1,syncMethod:"index"},Qq=C.forwardRef(function(t,n){var r,i=na(t.categoricalChartProps,Xq),{width:s,height:l}=i,u=Vq(i,Fq);if(!Cl(s)||!Cl(l))return null;var{chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,categoricalChartProps:y}=t,b={chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,eventEmitter:void 0};return C.createElement(X_,{preloadedState:{options:b},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:f},C.createElement(j_,{chartData:y.data}),C.createElement(Q_,{width:s,height:l,layout:i.layout,margin:i.margin}),C.createElement(Z_,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(J_,uv({},u,{width:s,height:l,ref:n})))}),Zq=["axis","item"],Ji=C.forwardRef((e,t)=>C.createElement(Qq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Zq,tooltipPayloadSearcher:r_,categoricalChartProps:e,ref:t}));function Jq(e){var t=$t();return C.useEffect(()=>{t(Tq(e))},[t,e]),null}var eF=["width","height","layout"];function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dv.apply(null,arguments)}function tF(e,t){if(e==null)return{};var n,r,i=nF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var rF={top:5,right:5,bottom:5,left:5},aF={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:rF,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},iF=C.forwardRef(function(t,n){var r,i=na(t.categoricalChartProps,aF),{width:s,height:l,layout:u}=i,f=tF(i,eF);if(!Cl(s)||!Cl(l))return null;var{chartName:d,defaultTooltipEventType:p,validateTooltipEventTypes:g,tooltipPayloadSearcher:y}=t,b={chartName:d,defaultTooltipEventType:p,validateTooltipEventTypes:g,tooltipPayloadSearcher:y,eventEmitter:void 0};return C.createElement(X_,{preloadedState:{options:b},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:d},C.createElement(j_,{chartData:i.data}),C.createElement(Q_,{width:s,height:l,layout:u,margin:i.margin}),C.createElement(Z_,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(Jq,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),C.createElement(J_,dv({width:s,height:l},f,{ref:n})))}),sF=["item"],oF={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},s0=C.forwardRef((e,t)=>{var n=na(e,oF);return C.createElement(iF,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:sF,tooltipPayloadSearcher:r_,categoricalChartProps:n,ref:t})});const lF=({card:e,onClose:t})=>e?h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:h.jsx("div",{onClick:n=>n.stopPropagation(),children:h.jsx(Ai,{card:e,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1,scale:1.5})})}):null,cF=({drone:e,onClose:t})=>e?h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:h.jsx("div",{onClick:n=>n.stopPropagation(),children:h.jsx(os,{drone:e,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,ignoreDeployLimit:!0,appliedUpgrades:[],scale:1.5,isViewOnly:!0})})}):null,uF=({component:e,onClose:t})=>{if(!e)return null;const n=(r,i)=>{const s=r.stats.healthy,l=r.middleLaneBonus||{},u={};return Object.keys(s).forEach(f=>{u[f]=s[f]+(i&&l[f]||0)}),u};return h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-6xl w-[95vw]",onClick:r=>r.stopPropagation(),children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-orbitron font-bold text-cyan-400 mb-2",children:e.name}),h.jsx("p",{className:"text-gray-400 text-sm",children:e.description})]}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:h.jsx(cn,{size:32})})]}),h.jsx("div",{className:"mb-4 text-center",children:h.jsx("p",{className:"text-yellow-400 font-semibold text-sm",children:"Compare standard lane stats with middle lane bonus stats. The middle lane provides enhanced performance!"})}),h.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-center font-orbitron text-lg text-gray-300 mb-3",children:"LEFT / RIGHT LANE"}),h.jsx("div",{className:"h-[250px]",children:h.jsx(fo,{section:e.key,stats:e,effectiveStatsForDisplay:n(e,!1),isPlayer:!0,isInMiddleLane:!1,gameEngine:ke,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})})]}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl animate-pulse"}),h.jsxs("div",{className:"relative",children:[h.jsx("h3",{className:"text-center font-orbitron text-lg text-yellow-400 mb-3 font-bold",children:"MIDDLE LANE (BONUS)"}),h.jsx("div",{className:"h-[250px]",children:h.jsx(fo,{section:e.key,stats:e,effectiveStatsForDisplay:n(e,!0),isPlayer:!0,isInMiddleLane:!0,gameEngine:ke,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})})]})]})]}),e.ability&&h.jsxs("div",{className:"mt-6 p-4 bg-purple-900/30 rounded-lg border border-purple-500/50",children:[h.jsxs("h4",{className:"font-orbitron text-purple-400 font-bold mb-2",children:["Ship Ability: ",e.ability.name]}),h.jsx("p",{className:"text-gray-300 text-sm mb-2",children:e.ability.description}),h.jsxs("p",{className:"text-gray-400 text-xs",children:["Cost: ",e.ability.cost.energy," Energy"]})]})]})})},dF=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onDronesChange:i,selectedShipComponents:s,onShipComponentsChange:l,onConfirmDeck:u,onImportDeck:f})=>{const[d,p]=C.useState(null),[g,y]=C.useState(null),[b,S]=C.useState(null),[A,E]=C.useState(!1),[T,w]=C.useState(!1),[O,_]=C.useState(!1),[k,M]=C.useState("cards"),[j,U]=C.useState("deck"),[q,L]=C.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[$,G]=C.useState(!1),Z=C.useRef(null),[X,re]=C.useState({key:"name",direction:"ascending"}),[I,Y]=C.useState({abilities:[]}),[Q,ve]=C.useState({key:"name",direction:"ascending"}),[R,V]=C.useState("cost"),[K,ae]=C.useState(!0),me=C.useMemo(()=>{const B=oe=>oe?oe.replace(/_/g," ").toLowerCase().split(" ").map(ce=>ce.charAt(0).toUpperCase()+ce.slice(1)).join(" "):"";return t.map(oe=>{const he=[],ce=oe.effect;if(ce.type==="REPEATING_EFFECT")he.push(B(ce.type)),ce.effects&&Array.isArray(ce.effects)&&ce.effects.forEach(be=>{be.type&&he.push(B(be.type))});else if(ce.type==="MODIFY_DRONE_BASE"&&ce.mod){const be=ce.mod.stat,Re=ce.mod.value;be==="attack"?he.push(Re>0?"Attack Buff":"Attack Debuff"):be==="speed"?he.push(Re>0?"Speed Buff":"Speed Debuff"):be==="shields"?he.push(Re>0?"Shield Buff":"Shield Debuff"):be==="cost"?he.push(Re<0?"Cost Reduction":"Cost Increase"):be==="limit"?he.push(Re>0?"Limit Buff":"Limit Debuff"):be==="ability"?(he.push("Ability Grant"),ce.mod.abilityToAdd&&ce.mod.abilityToAdd.name&&he.push(ce.mod.abilityToAdd.name)):he.push(B(`${be} Modification`))}else if(ce.type==="MODIFY_STAT"&&ce.mod){const be=ce.mod.stat,Re=ce.mod.value;ce.mod.type,be==="attack"?he.push(Re>0?"Attack Buff":"Attack Debuff"):be==="speed"?he.push(Re>0?"Speed Buff":"Speed Debuff"):be==="shields"?he.push(Re>0?"Shield Buff":"Shield Debuff"):he.push(Re>0?`${be} Buff`:`${be} Debuff`)}else ce.type==="SEARCH_AND_DRAW"?(he.push(B(ce.type)),he.push("Draw")):ce.type&&he.push(B(ce.type));ce.goAgain&&he.push("Go Again"),ce.damageType==="PIERCING"&&he.push("Piercing"),ce.mod?.type&&he.push(B(ce.mod.type));const ge=(()=>{if(oe.targeting){const be=B(oe.targeting.type);if(oe.targeting.affinity){const Re=oe.targeting.affinity.charAt(0)+oe.targeting.affinity.slice(1).toLowerCase();return`${be} (${Re})`}return be}else if(ce.type==="MULTI_MOVE"&&ce.source){const be=ce.source.location||"Any",Re=ce.source.affinity||"Any",kn=Re.charAt(0).toUpperCase()+Re.slice(1).toLowerCase();return`${B(be)} (${kn})`}else if(ce.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...oe,keywords:he,targetingText:ge}})},[t]),Se=C.useMemo(()=>Nt.map(B=>{const oe=[];B.abilities&&B.abilities.length>0&&B.abilities.forEach(ce=>{ce.name&&oe.push(ce.name),ce.type&&oe.push(ce.type==="ACTIVE"?"Active":ce.type==="PASSIVE"?"Passive":"Triggered"),ce.effect?.keyword&&oe.push(ce.effect.keyword)});const he=B.abilities&&B.abilities.length>0?B.abilities.map(ce=>ce.description).join(" | "):"No abilities";return{...B,keywords:oe,description:he}}),[]),Ae=C.useMemo(()=>{const B=new Set,oe=new Set,he=new Set;me.forEach(ge=>{B.add(ge.cost),oe.add(ge.targetingText),ge.keywords.forEach(be=>he.add(be))});const ce=Array.from(B);return{minCost:Math.min(...ce),maxCost:Math.max(...ce),targets:["all",...Array.from(oe).sort()],abilities:Array.from(he).sort()}},[me]),Me=C.useMemo(()=>{const B=new Set;return Se.forEach(oe=>{oe.keywords.forEach(he=>B.add(he))}),{abilities:Array.from(B).sort()}},[Se]);C.useEffect(()=>{Ae.minCost!==1/0&&Ae.maxCost!==-1/0&&L(B=>({...B,cost:{min:Ae.minCost,max:Ae.maxCost}}))},[Ae.minCost,Ae.maxCost]);const{cardCount:Ne,deckListForDisplay:xe,baseCardCounts:$e}=C.useMemo(()=>{const B={};let oe=0;Object.entries(n).forEach(([ce,ge])=>{if(ge>0){oe+=ge;const be=me.find(Re=>Re.id===ce);if(be){const Re=be.baseCardId;B[Re]=(B[Re]||0)+ge}}});const he=Object.entries(n).filter(([,ce])=>ce>0).map(([ce,ge])=>({...me.find(Re=>Re.id===ce),quantity:ge})).sort((ce,ge)=>ce.name.localeCompare(ge.name));return{cardCount:oe,deckListForDisplay:he,baseCardCounts:B}},[n,me]),He=Ne>=40,{droneCount:ye,droneListForDisplay:vt}=C.useMemo(()=>{let B=0;const oe=[];return Object.entries(e||{}).forEach(([he,ce])=>{if(ce>0){B+=ce;const ge=Se.find(be=>be.name===he);ge&&oe.push({...ge,quantity:ce})}}),oe.sort((he,ce)=>he.name.localeCompare(ce.name)),{droneCount:B,droneListForDisplay:oe}},[e,Se]),Xe=ye===10,{shipComponentCount:Yt,shipComponentsValid:Bt}=C.useMemo(()=>{const B=s||{},oe=Object.keys(B).filter(nt=>B[nt]).length,he=Object.keys(B).some(nt=>{const lt=sr.find(qt=>qt.id===nt);return lt&&lt.type==="Bridge"&&B[nt]}),ce=Object.keys(B).some(nt=>{const lt=sr.find(qt=>qt.id===nt);return lt&&lt.type==="Power Cell"&&B[nt]}),ge=Object.keys(B).some(nt=>{const lt=sr.find(qt=>qt.id===nt);return lt&&lt.type==="Drone Control Hub"&&B[nt]}),be=Object.values(B).filter(nt=>nt),Re=new Set(be),kn=be.length===3,Tt=Re.size===3;return{shipComponentCount:oe,shipComponentsValid:he&&ce&&ge&&kn&&Tt}},[s]),Et=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],xa=C.useMemo(()=>{const B={};xe.forEach(ge=>{const be=ge.cost||0;B[be]=(B[be]||0)+ge.quantity});const oe=Object.entries(B).map(([ge,be])=>({name:`${ge}`,count:be})).sort((ge,be)=>parseInt(ge.name)-parseInt(be.name)),he={};xe.forEach(ge=>{ge.keywords&&ge.keywords.forEach(be=>{he[be]=(he[be]||0)+ge.quantity})});const ce=Object.entries(he).map(([ge,be])=>({name:ge,value:be})).sort((ge,be)=>be.value-ge.value);return{barChartData:oe,pieChartData:ce}},[xe]),Dt=C.useMemo(()=>{const B=nt=>{const lt={};return vt.forEach(qt=>{const Gn=qt[nt]||0;lt[Gn]=(lt[Gn]||0)+qt.quantity}),Object.entries(lt).map(([qt,Gn])=>({name:`${qt}`,count:Gn})).sort((qt,Gn)=>parseInt(qt.name)-parseInt(Gn.name))},oe=B("class"),he=B("attack"),ce=B("speed"),ge=B("shields"),be=B("hull"),Re=B("limit"),kn=B("upgradeSlots"),Tt={};vt.forEach(nt=>{nt.keywords&&nt.keywords.forEach(lt=>{Tt[lt]=(Tt[lt]||0)+nt.quantity})});const Pt=Object.entries(Tt).map(([nt,lt])=>({name:nt,value:lt})).sort((nt,lt)=>lt.value-nt.value);return{costData:oe,attackData:he,speedData:ce,shieldsData:ge,hullData:be,limitData:Re,upgradesData:kn,abilityData:Pt}},[vt]),Qn=C.useMemo(()=>{const B=[];Object.entries(e||{}).forEach(([he,ce])=>{if(ce>0){const ge=Se.find(be=>be.name===he);ge&&B.push(ge)}});const oe=[];return Object.entries(n).forEach(([he,ce])=>{if(ce>0){const ge=me.find(be=>be.id===he);ge&&oe.push({card:ge,quantity:ce})}}),{drones:B,cards:oe}},[e,n,Se,me]),Sa=C.useMemo(()=>{let B=[...me].filter(oe=>oe.cost<q.cost.min||oe.cost>q.cost.max||q.target!=="all"&&oe.targetingText!==q.target||q.type!=="all"&&oe.type!==q.type?!1:q.abilities.length>0?q.abilities.every(he=>oe.keywords.includes(he)):!(q.hideEnhanced&&oe.id.endsWith("_ENHANCED")));return X.key!==null&&B.sort((oe,he)=>{const ce=oe[X.key],ge=he[X.key];if(ce==null&&ge==null)return 0;if(ce==null)return 1;if(ge==null)return-1;const be=String(ce).toLowerCase(),Re=String(ge).toLowerCase();return be<Re?X.direction==="ascending"?-1:1:be>Re?X.direction==="ascending"?1:-1:oe.id.localeCompare(he.id)}),B},[me,q,X]),ys=C.useMemo(()=>{let B=[...Se].filter(oe=>I.abilities.length>0?I.abilities.every(he=>oe.keywords.includes(he)):!0);return Q.key!==null&&B.sort((oe,he)=>{const ce=oe[Q.key],ge=he[Q.key];if(ce==null&&ge==null)return 0;if(ce==null)return 1;if(ge==null)return-1;const be=String(ce).toLowerCase(),Re=String(ge).toLowerCase();return be<Re?Q.direction==="ascending"?-1:1:be>Re?Q.direction==="ascending"?1:-1:oe.name.localeCompare(he.name)}),B},[Se,I,Q]),La=B=>{let oe="ascending";X.key===B&&X.direction==="ascending"&&(oe="descending"),re({key:B,direction:oe})},fr=B=>{let oe="ascending";Q.key===B&&Q.direction==="ascending"&&(oe="descending"),ve({key:B,direction:oe})},wi=(B,oe)=>{L(he=>({...he,[B]:oe}))},Aa=B=>{L(oe=>{const he=oe.abilities.includes(B)?oe.abilities.filter(ce=>ce!==B):[...oe.abilities,B];return{...oe,abilities:he}})},En=B=>{Y(oe=>{const he=oe.abilities.includes(B)?oe.abilities.filter(ce=>ce!==B):[...oe.abilities,B];return{...oe,abilities:he}})},pr=()=>{L({cost:{min:Ae.minCost,max:Ae.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),G(!1)},Ie=()=>{Y({abilities:[]})},jn=()=>{Object.keys(n).forEach(B=>{n[B]>0&&r(B,0)})},Hl=()=>{Object.keys(e||{}).forEach(B=>{e[B]>0&&i(B,0)})};C.useEffect(()=>{const B=oe=>{Z.current&&!Z.current.contains(oe.target)&&G(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]);const vs=Math.PI/180,Oi=({cx:B,cy:oe,midAngle:he,outerRadius:ce,fill:ge,name:be,value:Re})=>{const kn=Math.sin(-vs*he),Tt=Math.cos(-vs*he),Pt=B+(ce+5)*Tt,nt=oe+(ce+5)*kn,lt=B+(ce+15)*Tt,qt=oe+(ce+15)*kn,Gn=lt+(Tt>=0?1:-1)*12,In=qt,Ft=Tt>=0?"start":"end";return h.jsxs("g",{children:[h.jsx("path",{d:`M${Pt},${nt}L${lt},${qt}L${Gn},${In}`,stroke:ge,fill:"none"}),h.jsx("circle",{cx:Gn,cy:In,r:2,fill:ge,stroke:"none"}),h.jsx("text",{x:Gn+(Tt>=0?1:-1)*8,y:In,dy:4,textAnchor:Ft,fill:"#9CA3AF",fontSize:"11px",children:`${be} (${Re})`})]})},Ni=()=>{const[B,oe]=C.useState(""),he=C.useRef(null),ce=C.useMemo(()=>{const be=Object.entries(n).map(([Tt,Pt])=>`${Tt}:${Pt}`).join(","),Re=Object.entries(e||{}).map(([Tt,Pt])=>`${Tt}:${Pt}`).join(","),kn=Object.entries(s||{}).filter(([Tt,Pt])=>Pt).map(([Tt,Pt])=>`${Tt}:${Pt}`).join(",");return`cards:${be}|drones:${Re}|ship:${kn}`},[n,e,s]),ge=()=>{he.current.select(),document.execCommand("copy"),oe("Copied!"),setTimeout(()=>oe(""),2e3)};return h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>E(!1),children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:be=>be.stopPropagation(),children:[h.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck and drones."}),h.jsx("textarea",{ref:he,readOnly:!0,value:ce,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),h.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[h.jsx("span",{className:"text-green-400 self-center",children:B}),h.jsxs("button",{onClick:ge,className:"btn-confirm flex items-center gap-2",children:[h.jsx(hv,{size:16})," Copy to Clipboard"]}),h.jsxs("button",{onClick:()=>E(!1),className:"btn-cancel flex items-center gap-2",children:[h.jsx(cn,{size:16})," Close"]})]})]})})},Zn=()=>{const[B,oe]=C.useState(""),[he,ce]=C.useState(""),ge=()=>{ce("");const be=f(B);be.success?w(!1):ce(be.message||"Invalid deck code format.")};return h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>w(!1),children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:be=>be.stopPropagation(),children:[h.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load both cards and drones into the builder."}),h.jsx("textarea",{value:B,onChange:be=>oe(be.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"cards:CARD001:4,CARD002:2|drones:Scout Drone:1,Heavy Fighter:1"}),he&&h.jsx("p",{className:"text-red-500 mt-2",children:he}),h.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[h.jsx("button",{onClick:()=>w(!1),className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:ge,className:"btn-confirm",children:"Load Deck"})]})]})})};return h.jsxs("div",{className:"w-full flex flex-col text-white font-exo mt-8 text-sm",children:[d&&h.jsx(lF,{card:d,onClose:()=>p(null)}),g&&h.jsx(cF,{drone:g,onClose:()=>y(null)}),b&&h.jsx(uF,{component:b,onClose:()=>S(null)}),A&&h.jsx(Ni,{}),T&&h.jsx(Zn,{}),h.jsx(Tv,{isOpen:O,onClose:()=>_(!1),title:"Your Deck & Drones",drones:Qn.drones,cards:Qn.cards,shipComponents:s||{}}),h.jsxs("div",{className:"flex justify-center items-center mb-4",children:[h.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),h.jsxs("div",{className:"flex gap-4 ml-8",children:[h.jsxs("button",{onClick:()=>w(!0),className:"btn-utility flex items-center gap-2",children:[h.jsx(Tk,{size:16})," Import"]}),h.jsxs("button",{onClick:()=>E(!0),className:"btn-utility flex items-center gap-2",children:[h.jsx(ak,{size:16})," Export"]})]})]}),h.jsxs("div",{className:"flex-grow flex gap-6 min-h-0 mb-[10px]",children:[h.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] ml-[10px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{M("cards"),U("deck")},className:`btn-utility ${k==="cards"?"opacity-100":"opacity-60"}`,children:"Cards"}),h.jsx("button",{onClick:()=>{M("drones"),U("drones")},className:`btn-utility ${k==="drones"?"opacity-100":"opacity-60"}`,children:"Drones"}),h.jsx("button",{onClick:()=>{M("ship"),U("ship")},className:`btn-utility ${k==="ship"?"opacity-100":"opacity-60"}`,children:"Ship Components"}),h.jsxs("button",{onClick:()=>_(!0),className:"btn-utility flex items-center gap-2",children:[h.jsx(ck,{size:16}),"View All"]})]}),h.jsx("button",{onClick:k==="cards"?pr:Ie,className:"btn-reset",children:"Reset Filters"})]}),k==="cards"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[h.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[h.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",q.cost.min," - ",q.cost.max]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"range",min:Ae.minCost,max:Ae.maxCost,value:q.cost.min,onChange:B=>wi("cost",{...q.cost,min:Math.min(parseInt(B.target.value),q.cost.max)}),className:"w-1/2"}),h.jsx("input",{type:"range",min:Ae.minCost,max:Ae.maxCost,value:q.cost.max,onChange:B=>wi("cost",{...q.cost,max:Math.max(parseInt(B.target.value),q.cost.min)}),className:"w-1/2"})]})]}),h.jsxs("div",{className:"relative",ref:Z,children:[h.jsx("button",{onClick:()=>G(!$),className:"filter-select w-full text-left h-full",children:q.abilities.length===0?"Select Abilities":`${q.abilities.length} Abilities Selected`}),$&&h.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:Ae.abilities.map(B=>h.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:q.abilities.includes(B),onChange:()=>Aa(B),className:"mr-2"}),B]},B))})]}),h.jsxs("select",{onChange:B=>wi("type",B.target.value),value:q.type,className:"filter-select h-full",children:[h.jsx("option",{value:"all",children:"All Types"}),h.jsx("option",{value:"Action",children:"Action Cards"}),h.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),h.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:h.jsxs("label",{className:"flex items-center cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:q.hideEnhanced,onChange:B=>wi("hideEnhanced",B.target.checked),className:"mr-2"}),h.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),h.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:h.jsxs("table",{className:"w-full text-left deck-builder-table",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Info"}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>La("name"),className:`w-full text-left transition-colors underline cursor-pointer ${X.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",X.key==="name"&&(X.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>La("type"),className:`w-full text-left transition-colors underline cursor-pointer ${X.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",X.key==="type"&&(X.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>La("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${X.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",X.key==="cost"&&(X.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>La("description"),className:`w-full text-left transition-colors underline cursor-pointer ${X.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",X.key==="description"&&(X.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:"Abilities"}),h.jsx("th",{children:"Targeting"}),h.jsx("th",{children:"Quantity"})]})}),h.jsx("tbody",{children:Sa.map((B,oe)=>{const he=n[B.id]||0,ce=$e[B.baseCardId]||0,ge=B.maxInDeck;return h.jsxs("tr",{className:B.type==="Upgrade"?"bg-purple-900/10":"",children:[h.jsx("td",{children:h.jsx("button",{onClick:()=>p(B),className:"p-1 text-gray-400 hover:text-white",children:h.jsx(Qs,{size:18})})}),h.jsx("td",{className:"font-bold",children:B.name}),h.jsx("td",{className:`font-semibold ${B.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:B.type}),h.jsx("td",{children:B.cost}),h.jsx("td",{className:"text-xs text-gray-400",children:B.description}),h.jsx("td",{children:h.jsx("div",{className:"flex flex-wrap gap-2",children:B.keywords.map(be=>h.jsx("span",{className:"ability-chip",children:be},be))})}),h.jsx("td",{className:"text-xs",children:B.targetingText==="N/A"?h.jsx("span",{className:"text-gray-500",children:"N/A"}):B.targetingText}),h.jsx("td",{children:h.jsx("div",{className:"quantity-buttons",children:Array.from({length:ge+1}).map((be,Re)=>{const kn=Re===he,Tt=ge-(ce-he),Pt=Re>Tt;return h.jsx("button",{onClick:()=>r(B.id,Re),className:`quantity-btn ${kn?"selected":""}`,disabled:Pt,children:Re},Re)})})})]},`${B.id}-${oe}`)})})]})})]}),k==="drones"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:h.jsxs("div",{className:"relative",ref:Z,children:[h.jsx("button",{onClick:()=>G(!$),className:"filter-select w-full text-left h-full",children:I.abilities.length===0?"Select Abilities":`${I.abilities.length} Abilities Selected`}),$&&h.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:Me.abilities.map(B=>h.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:I.abilities.includes(B),onChange:()=>En(B),className:"mr-2"}),B]},B))})]})}),h.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:h.jsxs("table",{className:"w-full text-left deck-builder-table",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Info"}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>fr("name"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",Q.key==="name"&&(Q.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>fr("class"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="class"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",Q.key==="class"&&(Q.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>fr("attack"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="attack"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Attack",Q.key==="attack"&&(Q.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>fr("speed"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="speed"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Speed",Q.key==="speed"&&(Q.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>fr("shields"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="shields"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Shields",Q.key==="shields"&&(Q.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>fr("hull"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="hull"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Hull",Q.key==="hull"&&(Q.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:"Abilities"}),h.jsx("th",{children:"Description"}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>fr("limit"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="limit"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Limit",Q.key==="limit"&&(Q.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:h.jsxs("button",{onClick:()=>fr("upgradeSlots"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="upgradeSlots"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Upgrades",Q.key==="upgradeSlots"&&(Q.direction==="ascending"?" â–²":" â–¼")]})}),h.jsx("th",{children:"Quantity"})]})}),h.jsx("tbody",{children:ys.map((B,oe)=>{const he=e&&e[B.name]||0;return h.jsxs("tr",{children:[h.jsx("td",{children:h.jsx("button",{onClick:()=>y(B),className:"p-1 text-gray-400 hover:text-white",children:h.jsx(Qs,{size:18})})}),h.jsx("td",{className:"font-bold",children:B.name}),h.jsx("td",{children:B.class}),h.jsx("td",{children:B.attack}),h.jsx("td",{children:B.speed}),h.jsx("td",{children:B.shields}),h.jsx("td",{children:B.hull}),h.jsx("td",{children:h.jsx("div",{className:"flex flex-wrap gap-2",children:B.keywords.map(ce=>h.jsx("span",{className:"ability-chip",children:ce},ce))})}),h.jsx("td",{className:"text-xs text-gray-400",children:B.description}),h.jsx("td",{children:B.limit}),h.jsx("td",{children:B.upgradeSlots}),h.jsx("td",{children:h.jsxs("div",{className:"quantity-buttons",children:[h.jsx("button",{onClick:()=>i(B.name,0),className:`quantity-btn ${he===0?"selected":""}`,children:"0"}),h.jsx("button",{onClick:()=>i(B.name,1),className:`quantity-btn ${he===1?"selected":""}`,children:"1"})]})})]},`${B.name}-${oe}`)})})]})})]}),k==="ship"&&h.jsx(h.Fragment,{children:h.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:h.jsxs("table",{className:"w-full text-left deck-builder-table",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Info"}),h.jsx("th",{children:"Type"}),h.jsx("th",{children:"Name"}),h.jsx("th",{children:"Description"}),h.jsx("th",{children:"Lane"})]})}),h.jsxs("tbody",{children:[h.jsx("tr",{className:"bg-cyan-900/20",children:h.jsx("td",{colSpan:"5",className:"font-bold text-cyan-400 text-sm py-2",children:"BRIDGE"})}),sr.filter(B=>B.type==="Bridge").map((B,oe)=>{const he=s?.[B.id]||null,ce=Object.entries(s||{}).filter(([ge,be])=>ge!==B.id&&be).map(([ge,be])=>be);return h.jsxs("tr",{children:[h.jsx("td",{children:h.jsx("button",{onClick:()=>S(B),className:"p-1 text-gray-400 hover:text-white",children:h.jsx(Qs,{size:18})})}),h.jsx("td",{className:"font-semibold text-cyan-400",children:B.type}),h.jsx("td",{className:"font-bold",children:B.name}),h.jsx("td",{className:"text-xs text-gray-400",children:B.description}),h.jsx("td",{children:h.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(ge=>h.jsx("button",{onClick:()=>l(B.id,he===ge?null:ge),disabled:ce.includes(ge)&&he!==ge,className:`px-3 py-1 rounded text-xs font-bold transition-all ${he===ge?"bg-cyan-500 text-white":ce.includes(ge)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-cyan-600 hover:text-white"}`,children:ge.toUpperCase()},ge))})})]},`${B.id}-${oe}`)}),h.jsx("tr",{className:"bg-purple-900/20",children:h.jsx("td",{colSpan:"5",className:"font-bold text-purple-400 text-sm py-2",children:"POWER CELL"})}),sr.filter(B=>B.type==="Power Cell").map((B,oe)=>{const he=s?.[B.id]||null,ce=Object.entries(s||{}).filter(([ge,be])=>ge!==B.id&&be).map(([ge,be])=>be);return h.jsxs("tr",{children:[h.jsx("td",{children:h.jsx("button",{onClick:()=>S(B),className:"p-1 text-gray-400 hover:text-white",children:h.jsx(Qs,{size:18})})}),h.jsx("td",{className:"font-semibold text-purple-400",children:B.type}),h.jsx("td",{className:"font-bold",children:B.name}),h.jsx("td",{className:"text-xs text-gray-400",children:B.description}),h.jsx("td",{children:h.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(ge=>h.jsx("button",{onClick:()=>l(B.id,he===ge?null:ge),disabled:ce.includes(ge)&&he!==ge,className:`px-3 py-1 rounded text-xs font-bold transition-all ${he===ge?"bg-purple-500 text-white":ce.includes(ge)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-purple-600 hover:text-white"}`,children:ge.toUpperCase()},ge))})})]},`${B.id}-${oe}`)}),h.jsx("tr",{className:"bg-pink-900/20",children:h.jsx("td",{colSpan:"5",className:"font-bold text-pink-400 text-sm py-2",children:"DRONE CONTROL HUB"})}),sr.filter(B=>B.type==="Drone Control Hub").map((B,oe)=>{const he=s?.[B.id]||null,ce=Object.entries(s||{}).filter(([ge,be])=>ge!==B.id&&be).map(([ge,be])=>be);return h.jsxs("tr",{children:[h.jsx("td",{children:h.jsx("button",{onClick:()=>S(B),className:"p-1 text-gray-400 hover:text-white",children:h.jsx(Qs,{size:18})})}),h.jsx("td",{className:"font-semibold text-pink-400",children:B.type}),h.jsx("td",{className:"font-bold",children:B.name}),h.jsx("td",{className:"text-xs text-gray-400",children:B.description}),h.jsx("td",{children:h.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(ge=>h.jsx("button",{onClick:()=>l(B.id,he===ge?null:ge),disabled:ce.includes(ge)&&he!==ge,className:`px-3 py-1 rounded text-xs font-bold transition-all ${he===ge?"bg-pink-500 text-white":ce.includes(ge)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-pink-600 hover:text-white"}`,children:ge.toUpperCase()},ge))})})]},`${B.id}-${oe}`)})]})]})})})]}),h.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] mr-[10px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("div",{className:"flex gap-2 flex-wrap",children:[h.jsxs("button",{onClick:()=>U("deck"),className:`btn-utility ${j==="deck"?"opacity-100":"opacity-60"}`,children:["Deck (",Ne,"/40)"]}),h.jsxs("button",{onClick:()=>U("drones"),className:`btn-utility ${j==="drones"?"opacity-100":"opacity-60"}`,children:["Drones (",ye,"/10)"]}),h.jsxs("button",{onClick:()=>U("ship"),className:`btn-utility ${j==="ship"?"opacity-100":"opacity-60"}`,children:["Ship (",Yt,"/3)"]})]}),h.jsx("button",{onClick:j==="deck"?jn:j==="drones"?Hl:()=>l(null,null),className:"btn-reset",children:"Reset"})]}),j==="deck"&&h.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:xe.length>0?xe.map(B=>{const oe=$e[B.baseCardId]>=B.maxInDeck;return h.jsxs("div",{className:"deck-list-item",children:[h.jsx("button",{onClick:()=>p(B),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:h.jsx(Qs,{size:18})}),h.jsx("span",{className:"flex-grow truncate",title:B.name,children:B.name}),h.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[h.jsx("button",{onClick:()=>r(B.id,B.quantity-1),className:"deck-edit-btn",children:"-"}),h.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",B.quantity]}),h.jsx("button",{onClick:()=>r(B.id,B.quantity+1),disabled:oe,className:"deck-edit-btn",children:"+"})]})]},B.id)}):h.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),j==="drones"&&h.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:vt.length>0?vt.map(B=>h.jsxs("div",{className:"deck-list-item",children:[h.jsx("button",{onClick:()=>y(B),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Drone Details",children:h.jsx(Qs,{size:18})}),h.jsx("span",{className:"flex-grow truncate",title:B.name,children:B.name}),h.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[h.jsx("button",{onClick:()=>i(B.name,0),className:"deck-edit-btn",children:"-"}),h.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",B.quantity]}),h.jsx("button",{onClick:()=>i(B.name,1),disabled:ye>=10,className:"deck-edit-btn",children:"+"})]})]},B.name)):h.jsx("p",{className:"text-gray-500 italic",children:"Your drone pool is empty. Add drones from the left."})}),j==="ship"&&h.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("div",{className:"grid grid-cols-3 gap-4",children:["l","m","r"].map((B,oe)=>{const he=Object.entries(s||{}).find(([ge,be])=>be===B),ce=he?sr.find(ge=>ge.id===he[0]):null;return h.jsxs("div",{className:`p-4 rounded-lg border-2 ${ce?"border-cyan-500 bg-cyan-900/10":"border-dashed border-gray-600 bg-gray-800/30"}`,children:[h.jsx("div",{className:"text-center mb-2",children:h.jsx("span",{className:"font-bold text-sm text-cyan-400",children:oe===1?"MIDDLE (Bonus)":oe===0?"LEFT":"RIGHT"})}),ce?h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-gray-400 mb-1",children:ce.type}),h.jsx("div",{className:"font-bold text-white mb-2",children:ce.name}),h.jsx("div",{className:"text-xs text-gray-500 mb-2",children:ce.description}),oe===1&&h.jsx("div",{className:"text-xs text-cyan-300 font-semibold",children:"+ Bonus Stats"})]}):h.jsx("div",{className:"text-center text-gray-500 italic text-xs py-4",children:"No component"})]},B)})}),Yt>0&&h.jsxs("div",{className:"mt-4",children:[h.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Selected Components"}),h.jsx("div",{className:"deck-list",children:Object.entries(s||{}).filter(([B,oe])=>oe).map(([B,oe])=>{const he=sr.find(ce=>ce.id===B);return he?h.jsxs("div",{className:"deck-list-item",children:[h.jsxs("span",{className:"flex-grow truncate",title:he.name,children:[he.name," (",he.type,")"]}),h.jsxs("span",{className:"font-bold text-cyan-400",children:["Lane: ",oe.toUpperCase()]})]},B):null})})]}),Yt===0&&h.jsx("p",{className:"text-gray-500 italic text-center py-8",children:"No ship components selected. Select components from the left."})]})}),j==="deck"&&Ne>0&&h.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[h.jsxs("button",{onClick:()=>ae(!K),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",h.jsx(ou,{size:20,className:`transition-transform duration-300 ${K?"rotate-0":"rotate-180"}`})]}),h.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${K?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[h.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[h.jsx("button",{onClick:()=>V("cost"),className:`btn-info text-xs ${R==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),h.jsx("button",{onClick:()=>V("type"),className:`btn-info text-xs ${R==="type"?"opacity-100":"opacity-60"}`,children:"Type"}),h.jsx("button",{onClick:()=>V("ability"),className:`btn-info text-xs ${R==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),h.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[R==="cost"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(Ji,{data:xa.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[h.jsx(ci,{strokeDasharray:"3 3",stroke:"#4A5568"}),h.jsx(Da,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),h.jsx(_a,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),h.jsx(pa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),h.jsx(li,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),R==="type"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(s0,{margin:{top:20,right:30,bottom:20,left:30},children:[h.jsx($f,{data:[{name:"Action Cards",value:xe.filter(B=>B.type==="Action").reduce((B,oe)=>B+oe.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:xe.filter(B=>B.type==="Upgrade").reduce((B,oe)=>B+oe.quantity,0),color:"#c084fc"}].filter(B=>B.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:B,value:oe,percent:he})=>`${B}: ${oe} (${(he*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:xe.filter(B=>B.type==="Action").reduce((B,oe)=>B+oe.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:xe.filter(B=>B.type==="Upgrade").reduce((B,oe)=>B+oe.quantity,0),color:"#c084fc"}].filter(B=>B.value>0).map((B,oe)=>h.jsx(uo,{fill:B.color},`cell-${oe}`))}),h.jsx(pa,{}),h.jsx(Yp,{})]})})]}),R==="ability"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(s0,{margin:{top:20,right:30,bottom:20,left:30},children:[h.jsx($f,{data:xa.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:Oi,outerRadius:60,dataKey:"value",children:xa.pieChartData.map((B,oe)=>h.jsx(uo,{fill:Et[oe%Et.length]},`cell-${oe}`))}),h.jsx(pa,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),j==="drones"&&ye>0&&h.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[h.jsxs("button",{onClick:()=>ae(!K),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Drone Statistics",h.jsx(ou,{size:20,className:`transition-transform duration-300 ${K?"rotate-0":"rotate-180"}`})]}),h.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${K?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[h.jsxs("div",{className:"flex justify-center gap-2 mb-2 flex-wrap",children:[h.jsx("button",{onClick:()=>V("cost"),className:`btn-info text-xs ${R==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),h.jsx("button",{onClick:()=>V("attack"),className:`btn-info text-xs ${R==="attack"?"opacity-100":"opacity-60"}`,children:"Attack"}),h.jsx("button",{onClick:()=>V("speed"),className:`btn-info text-xs ${R==="speed"?"opacity-100":"opacity-60"}`,children:"Speed"}),h.jsx("button",{onClick:()=>V("shields"),className:`btn-info text-xs ${R==="shields"?"opacity-100":"opacity-60"}`,children:"Shields"}),h.jsx("button",{onClick:()=>V("hull"),className:`btn-info text-xs ${R==="hull"?"opacity-100":"opacity-60"}`,children:"Hull"}),h.jsx("button",{onClick:()=>V("limit"),className:`btn-info text-xs ${R==="limit"?"opacity-100":"opacity-60"}`,children:"Limit"}),h.jsx("button",{onClick:()=>V("upgrades"),className:`btn-info text-xs ${R==="upgrades"?"opacity-100":"opacity-60"}`,children:"Upgrades"}),h.jsx("button",{onClick:()=>V("ability"),className:`btn-info text-xs ${R==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),h.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[R==="cost"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Drone Cost Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(Ji,{data:Dt.costData,margin:{top:5,right:20,left:-15,bottom:0},children:[h.jsx(ci,{strokeDasharray:"3 3",stroke:"#4A5568"}),h.jsx(Da,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),h.jsx(_a,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),h.jsx(pa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),h.jsx(li,{dataKey:"count",fill:"#8884d8",name:"Drone Count"})]})})]}),R==="attack"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Attack Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(Ji,{data:Dt.attackData,margin:{top:5,right:20,left:-15,bottom:0},children:[h.jsx(ci,{strokeDasharray:"3 3",stroke:"#4A5568"}),h.jsx(Da,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),h.jsx(_a,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),h.jsx(pa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),h.jsx(li,{dataKey:"count",fill:"#ef4444",name:"Drone Count"})]})})]}),R==="speed"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Speed Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(Ji,{data:Dt.speedData,margin:{top:5,right:20,left:-15,bottom:0},children:[h.jsx(ci,{strokeDasharray:"3 3",stroke:"#4A5568"}),h.jsx(Da,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),h.jsx(_a,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),h.jsx(pa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),h.jsx(li,{dataKey:"count",fill:"#3b82f6",name:"Drone Count"})]})})]}),R==="shields"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Shield Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(Ji,{data:Dt.shieldsData,margin:{top:5,right:20,left:-15,bottom:0},children:[h.jsx(ci,{strokeDasharray:"3 3",stroke:"#4A5568"}),h.jsx(Da,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),h.jsx(_a,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),h.jsx(pa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),h.jsx(li,{dataKey:"count",fill:"#06b6d4",name:"Drone Count"})]})})]}),R==="hull"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Hull Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(Ji,{data:Dt.hullData,margin:{top:5,right:20,left:-15,bottom:0},children:[h.jsx(ci,{strokeDasharray:"3 3",stroke:"#4A5568"}),h.jsx(Da,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),h.jsx(_a,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),h.jsx(pa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),h.jsx(li,{dataKey:"count",fill:"#22c55e",name:"Drone Count"})]})})]}),R==="limit"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Deployment Limit Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(Ji,{data:Dt.limitData,margin:{top:5,right:20,left:-15,bottom:0},children:[h.jsx(ci,{strokeDasharray:"3 3",stroke:"#4A5568"}),h.jsx(Da,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),h.jsx(_a,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),h.jsx(pa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),h.jsx(li,{dataKey:"count",fill:"#f59e0b",name:"Drone Count"})]})})]}),R==="upgrades"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Upgrade Slots Distribution"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(Ji,{data:Dt.upgradesData,margin:{top:5,right:20,left:-15,bottom:0},children:[h.jsx(ci,{strokeDasharray:"3 3",stroke:"#4A5568"}),h.jsx(Da,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),h.jsx(_a,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),h.jsx(pa,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),h.jsx(li,{dataKey:"count",fill:"#a855f7",name:"Drone Count"})]})})]}),R==="ability"&&h.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),h.jsx(ha,{width:"100%",height:"100%",children:h.jsxs(s0,{margin:{top:20,right:30,bottom:20,left:30},children:[h.jsx($f,{data:Dt.abilityData,cx:"50%",cy:"50%",labelLine:!1,label:({name:B,value:oe,percent:he})=>`${B}: ${oe} (${(he*100).toFixed(0)}%)`,outerRadius:60,dataKey:"value",children:Dt.abilityData.map((B,oe)=>h.jsx(uo,{fill:Et[oe%Et.length]},`cell-${oe}`))}),h.jsx(pa,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),h.jsx("button",{onClick:u,disabled:!He||!Xe||!Bt,className:"btn-confirm w-full p-4 mt-4 text-lg font-bold font-orbitron",title:Bt?"":"You must select all 3 ship components with lanes assigned",children:"Confirm Deck, Drones & Ship"})]})]})]})};function fF(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getOpponentPlayerState:s,addLogEntry:l}=Si(),{turnPhase:u}=e,f=i();s();const[d,p]=C.useState(!1),[g,y]=C.useState({}),[b,S]=C.useState({}),[A,E]=C.useState({}),T=async $=>{if(u==="deckSelection")if(P("DECK_SELECTION","ðŸ”§ handleDeckChoice called with:",$),$==="standard"){const G=t(),Z=ke.buildDeckFromList(pl),X=[...fw];if(X.length!==10){console.error(`âŒ Standard drone list has ${X.length} drones, expected 10`),l({player:"SYSTEM",actionType:"ERROR",source:"Deck Validation",target:"N/A",outcome:`Invalid standard drone list: ${X.length} drones instead of 10.`},"handleDeckChoice");return}const I={phase:"deckSelection",playerId:G,actionData:{deck:Z,drones:X,shipComponents:{BRIDGE_001:"l",POWERCELL_001:"m",DRONECONTROL_001:"r"}}};if(e.gameMode==="guest"){P("DECK_SELECTION","[GUEST] Sending deck selection commitment to host"),Kn.sendActionToHost("commitment",I);return}const Y=await Ge.actionProcessor.processCommitment(I);if(!Y.success){console.error("âŒ Deck selection submission failed:",Y.error);return}P("DECK_SELECTION","âœ… Standard deck selection submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else $==="custom"&&(P("DECK_SELECTION","ðŸ”§ Opening custom deck builder"),p(!0))},w=($,G)=>{y(Z=>({...Z,[$]:G}))},O=($,G)=>{S(Z=>({...Z,[$]:G}))},_=($,G)=>{if($===null&&G===null){E({});return}E(Z=>({...Z,[$]:G}))},k=async()=>{P("DECK_SELECTION","ðŸ”§ Confirming custom deck:",g);const $=[];let G=0;Object.entries(g).forEach(([Q,ve])=>{for(let R=0;R<ve;R++){const V=Vn.find(K=>K.id===Q);V&&$.push(ke.createCard(V,`card-${Date.now()}-${G++}`))}});const Z=$.sort(()=>.5-Math.random());P("DECK_SELECTION",`ðŸ”€ Custom deck shuffled: ${Z.length} cards`,{sampleCard:Z[0],sampleInstanceId:Z[0]?.instanceId,hasInstanceId:Z[0]?.instanceId!==void 0});const X=[];Object.entries(b).forEach(([Q,ve])=>{ve>0&&X.push(Q)}),P("DECK_SELECTION",`ðŸŽ² Custom deck includes ${X.length} drones:`,X.join(", "));const I={phase:"deckSelection",playerId:t(),actionData:{deck:Z,drones:X,shipComponents:A}};if(e.gameMode==="guest"){P("DECK_SELECTION","[GUEST] Sending custom deck commitment to host"),Kn.sendActionToHost("commitment",I),p(!1);return}const Y=await Ge.actionProcessor.processCommitment(I);if(!Y.success){console.error("âŒ Custom deck submission failed:",Y.error);return}P("DECK_SELECTION","âœ… Custom deck submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected a Custom Deck."},"handleConfirmDeck"),p(!1)},M=$=>{try{const G={},Z={},X={},re=$.split("|");for(const I of re){const[Y,...Q]=I.split(":"),ve=Q.join(":");if(Y==="cards"){const R=ve.split(",");for(const V of R){const[K,ae]=V.split(":"),me=parseInt(ae,10);if(!K||isNaN(me))return{success:!1,message:"Invalid card format in deck code."};if(!Vn.find(Ae=>Ae.id===K))return{success:!1,message:`Card ${K} not found.`};G[K]=me}}else if(Y==="drones"){const R=ve.split(",");for(const V of R){const K=V.split(":"),ae=K.pop(),me=K.join(":"),Se=parseInt(ae,10);if(!me||isNaN(Se))return{success:!1,message:"Invalid drone format in deck code."};Z[me]=Se}}else if(Y==="ship"){const R=ve.split(",");for(const V of R){const[K,ae]=V.split(":");if(!K||!ae||!["l","m","r"].includes(ae))return{success:!1,message:"Invalid ship component format in deck code."};X[K]=ae}}}return y(G),S(Z),E(X),{success:!0}}catch(G){return console.error("Error importing deck:",G),{success:!1,message:"Failed to parse deck code."}}};C.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const j=t(),U=n(),q=e.commitments?.deckSelection?.[j]?.completed||!1,L=e.commitments?.deckSelection?.[U]?.completed||!1;return P("DECK_SELECTION","ðŸ” [DECK SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:j,opponentPlayerId:U,localPlayerCompleted:q,opponentCompleted:L,fullCommitmentsObject:e.commitments?.deckSelection,turnPhase:u,localPlayerDeckLength:f.deck?.length,willShowWaiting:r()&&q&&!L}),r()&&q&&!L?h.jsx(Pv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):d?h.jsx(dF,{selectedDrones:b,fullCardCollection:Vn,deck:g,onDeckChange:w,onDronesChange:O,selectedShipComponents:A,onShipComponentsChange:_,onConfirmDeck:k,onImportDeck:M}):h.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[h.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),h.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative z-10",children:[h.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),h.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[h.jsxs("div",{onClick:()=>T("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[h.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),h.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),h.jsx("button",{className:"btn-confirm mt-6",children:"Select"})]}),h.jsxs("div",{onClick:()=>T("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[h.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),h.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),h.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}function pF(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getLocalPlacedSections:s}=Si(),{turnPhase:l,unplacedSections:u}=e,f=i(),d=s(),[p,g]=C.useState(null),b=(()=>{const L=f.selectedShipComponents;if(!L||Object.keys(L).length===0)return{placed:d||[null,null,null],unplaced:u||["bridge","powerCell","droneControlHub"]};const $=[null,null,null],G=[],Z={l:0,m:1,r:2};return Object.entries(L).forEach(([re,I])=>{if(I){const Y=sr.find(Q=>Q.id===re);if(Y&&Y.key){const Q=Z[I];$[Q]=Y.key}}}),["bridge","powerCell","droneControlHub"].forEach(re=>{$.includes(re)||G.push(re)}),{placed:$,unplaced:G}})(),[S,A]=C.useState(b.placed),[E,T]=C.useState(b.unplaced),w=L=>{if(l==="placement")if(P("PLACEMENT","ðŸ”§ handleSelectSectionForPlacement called with:",L,"gameMode:",e.gameMode),E.includes(L))g($=>$===L?null:L);else{const $=S.indexOf(L),G=[...S];G[$]=null,A(G),T(Z=>[...Z,L]),g(null)}},O=L=>{if(l==="placement")if(P("PLACEMENT","ðŸ”§ handleLaneSelectForPlacement called with lane:",L,"gameMode:",e.gameMode),p){if(S[L]){const $=S[L],G=[...S];G[L]=p;const Z=E.indexOf(p),X=[...E];X.splice(Z,1,$),A(G),T(X)}else{const $=[...S];$[L]=p,A($),T(G=>G.filter(Z=>Z!==p))}g(null)}else S[L]&&w(S[L])},_=async()=>{if(l!=="placement")return;if(P("PLACEMENT","ðŸ”§ handleConfirmPlacement called"),S.some(G=>G==null)){console.warn("âš ï¸ Cannot confirm placement: All ship sections must be placed");return}P("PLACEMENT","ðŸ”§ Submitting placement to PhaseManager:",S);const $={phase:"placement",playerId:t(),actionData:{placedSections:S}};if(e.gameMode==="guest"){P("PLACEMENT","[GUEST] Sending ship placement commitment to host"),Kn.sendActionToHost("commitment",$);return}try{const G=await Ge.actionProcessor.processCommitment($);if(!G.success){console.error("âŒ Placement submission failed:",G.error);return}P("PLACEMENT","âœ… Placement submitted to PhaseManager")}catch(G){console.error("âŒ Error submitting placement:",G)}};C.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const k=t(),M=n(),j=e.commitments?.placement?.[k]?.completed||!1,U=e.commitments?.placement?.[M]?.completed||!1;if(P("PLACEMENT","ðŸ” [SHIP PLACEMENT] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:k,opponentPlayerId:M,localPlayerCompleted:j,opponentCompleted:U,fullCommitmentsObject:e.commitments?.placement,turnPhase:l,willShowWaiting:r()&&j&&!U}),r()&&j&&!U){const L=S.map(($,G)=>$?$.name:"Empty").join(", ");return h.jsx(Pv,{phase:"placement",localPlayerStatus:`Your ship layout: ${L}`})}const q=S.every(L=>L!==null);return P("PLACEMENT","ðŸ”¥ ShipPlacementScreen rendered:",{allPlaced:q,placed:S,unplaced:u,selected:p}),h.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[h.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),h.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[h.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),h.jsxs("p",{className:"text-center text-gray-400 mb-8",children:[E.length>0?"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again.":"Your ship components are pre-configured. You can rearrange them by clicking a section to pick it up."," ","The ship section placed in the centre lane will gain a bonus to its stats."]}),q&&h.jsx("button",{onClick:()=>{P("PLACEMENT",`ðŸ”¥ Confirm Layout button clicked! allPlaced: ${q}`),_()},className:"btn-confirm text-lg mb-6",children:"Confirm Layout"}),h.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[h.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(L=>{const $=S[L],G=p&&!S[L];return h.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>O(L),children:$?h.jsx(fo,{section:$,stats:f.shipSections[$],effectiveStatsForDisplay:f.shipSections[$].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:L===1,gameEngine:ke,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:f,shipAbilityMode:null}):h.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${G?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:h.jsx("span",{className:"text-center font-bold",children:L===1?"Lane 2 (Center Bonus)":`Lane ${L+1}`})})},L)})}),E.length>0&&h.jsx("div",{className:"w-full text-center mt-6 mb-2",children:h.jsx("h3",{className:"text-lg font-orbitron text-gray-400",children:"Available Sections"})}),h.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(L=>h.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:E.includes(L)&&h.jsx("div",{onClick:()=>w(L),className:`h-full transition-all duration-300 rounded-xl ${p===L?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:h.jsx(fo,{section:L,stats:f.shipSections[L],effectiveStatsForDisplay:f.shipSections[L].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:ke,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:f,shipAbilityMode:null})})},L))})]})]})]})}const or=(e=null)=>({...e?Nt.find(n=>n.name===e):Nt[0],id:`mock-${Date.now()}-${Math.random()}`,isExhausted:!1,temporaryMods:[],permanentMods:[]}),pu=(e=3)=>Nt.slice(0,e).map((t,n)=>({...t,id:`mock-drone-${n}`,isExhausted:n%2===0,temporaryMods:[],permanentMods:[]})),ru=(e=null)=>({...e?Vn.find(n=>n.name===e):Vn[0],instanceId:`mock-card-${Date.now()}-${Math.random()}`}),ma=(e=5)=>Vn.slice(0,e).map((t,n)=>({...t,instanceId:`mock-card-${n}`})),Wr=(e="bridge")=>{const t={bridge:{name:"bridge",health:15,maxHealth:20,shields:2},powerCell:{name:"powerCell",health:12,maxHealth:15,shields:1},droneControlHub:{name:"droneControlHub",health:18,maxHealth:20,shields:3}};return t[e]||t.bridge},hF=()=>({gameMode:"local",turnPhase:"action",currentPlayer:"player1",turn:3,roundNumber:3,player1:{name:"Player 1",energy:10,hand:ma(5),deck:ma(20),discardPile:ma(5),dronesOnBoard:{lane1:[or("Scout Drone")],lane2:[or("Standard Fighter"),or("Heavy Fighter")],lane3:[]},shipSections:{bridge:Wr("bridge"),powerCell:Wr("powerCell"),droneControlHub:Wr("droneControlHub")},activeDronePool:pu(5),deployedDroneCounts:{},droneUpgrades:{}},player2:{name:"AI Opponent",energy:8,hand:ma(4),deck:ma(15),discardPile:ma(3),dronesOnBoard:{lane1:[or("Interceptor")],lane2:[or("Guardian Drone")],lane3:[or("Bomber")]},shipSections:{bridge:Wr("bridge"),powerCell:Wr("powerCell"),droneControlHub:Wr("droneControlHub")},activeDronePool:pu(5),deployedDroneCounts:{},droneUpgrades:{}},placedSections:[Wr("bridge"),Wr("powerCell"),Wr("droneControlHub")],opponentPlacedSections:[Wr("bridge"),Wr("powerCell"),Wr("droneControlHub")],passInfo:{player1Passed:!1,player2Passed:!1,firstPasser:null},gameLog:[]}),mF={all:{name:"All",count:23},confirmation:{name:"Confirmation",count:5},interception:{name:"Interception",count:2},gamePhase:{name:"Game Phase",count:3},aiDebug:{name:"AI Debug",count:3},playerActions:{name:"Player Actions",count:3},upgrades:{name:"Upgrades",count:3},utility:{name:"Utility",count:3},debug:{name:"Debug",count:2}},ZP=e=>{const t=hF(),n=or();return ru(),{DeploymentConfirmationModal:{category:"confirmation",props:{show:!0,deploymentConfirmation:{budgetCost:3,energyCost:2},onConfirm:()=>console.log("Deployment confirmed"),onCancel:()=>console.log("Deployment cancelled")}},CardConfirmationModal:{category:"confirmation",props:{show:!0,cardConfirmation:{card:ru("Laser Blast"),target:n},onConfirm:()=>console.log("Card play confirmed"),onCancel:()=>console.log("Card play cancelled")}},DroneAbilityConfirmationModal:{category:"confirmation",props:{show:!0,abilityConfirmation:{drone:or("Repair Drone"),ability:{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",cost:{energy:1}},target:{id:"lane2"}},onConfirm:()=>console.log("Ability confirmed"),onCancel:()=>console.log("Ability cancelled")}},ShipAbilityConfirmationModal:{category:"confirmation",props:{show:!0,shipAbilityConfirmation:{sectionName:"bridge",ability:{name:"Emergency Protocols",description:"Draw 2 cards",type:"ACTIVE",cost:{energy:2}},target:null},onConfirm:()=>console.log("Ship ability confirmed"),onCancel:()=>console.log("Ship ability cancelled")}},MoveConfirmationModal:{category:"confirmation",props:{show:!0,moveConfirmation:{drone:n,from:"lane1",to:"lane2"},onConfirm:()=>console.log("Move confirmed"),onCancel:()=>console.log("Move cancelled")}},InterceptionOpportunityModal:{category:"interception",props:{show:!0,choiceData:{attackDetails:{attacker:or("Standard Fighter"),target:or("Scout Drone"),targetType:"drone",lane:"lane2"},interceptors:pu(3)},onIntercept:i=>console.log("Intercept with:",i.name),onDecline:()=>console.log("Declined interception"),gameEngine:ke,turnPhase:"action",isMyTurn:!0,passInfo:{player1Passed:!1,player2Passed:!1},getLocalPlayerId:()=>"player1",localPlayerState:t.player1,shipAbilityMode:null,droneRefs:{current:{}},mandatoryAction:null}},OpponentDecidingInterceptionModal:{category:"interception",props:{show:!0,attacker:n,target:or("Heavy Fighter")}},WinnerModal:{category:"gamePhase",props:{show:!0,winner:"player1",localPlayerId:"player1",onClose:()=>console.log("View board")}},WaitingForPlayerModal:{category:"gamePhase",props:{show:!0,message:"Waiting for opponent to complete placement...",phase:"placement"}},GamePhaseModal:{category:"gamePhase",props:{title:"Deployment Phase",text:"Deploy drones to lanes using your deployment budget",onClose:()=>console.log("Modal closed"),children:null}},AICardPlayReportModal:{category:"aiDebug",props:{show:!0,card:ru("Energy Surge"),result:{success:!0,energyGained:2},onClose:()=>console.log("Modal closed")}},AIDecisionLogModal:{category:"aiDebug",props:{show:!0,aiDecisionContext:{phase:"action",decision:"attack",reasoning:"Target has low health and no shields",alternatives:["pass","ability","card"],scores:{attack:85,ability:60,card:45,pass:20}},onClose:()=>console.log("Modal closed")}},AIHandDebugModal:{category:"aiDebug",props:{show:!0,aiHand:ma(5),onClose:()=>console.log("Modal closed")}},MandatoryActionModal:{category:"playerActions",props:{show:!0,mandatoryAction:{type:"discard",count:2},effectiveStats:{handLimit:5,cpuLimit:8},onClose:()=>console.log("Modal closed")}},ConfirmationModal:{category:"playerActions",props:{show:!0,title:"Confirm Action",message:"Are you sure you want to pass this phase?",onConfirm:()=>console.log("Confirmed"),onCancel:()=>console.log("Cancelled")}},OpponentDronesModal:{category:"playerActions",props:{show:!0,drones:pu(5),lane:"lane2",onClose:()=>console.log("Modal closed")}},ViewUpgradesModal:{category:"upgrades",props:{modalData:{droneName:"Scout Drone",upgrades:[{instanceId:"CARD020",name:"Slimline Bodywork",description:"+1 to Deployment Limit",stat:"limit",value:1},{instanceId:"CARD021",name:"Overclocked Thrusters",description:"+1 Speed",stat:"speed",value:1}]},onClose:()=>console.log("Modal closed")}},UpgradeSelectionModal:{category:"upgrades",props:{selectionData:{card:ru("Combat Enhancement"),targets:pu(5)},onConfirm:(i,s)=>console.log("Selected drone:",s.name),onCancel:()=>console.log("Cancelled")}},DestroyUpgradeModal:{category:"upgrades",props:{selectionData:{card:ru("System Sabotage"),targets:[or("Scout Drone"),or("Heavy Fighter")],opponentState:{appliedUpgrades:{"Scout Drone":[{instanceId:"upgrade-1",name:"Slimline Bodywork",stat:"limit",value:1}],"Heavy Fighter":[{instanceId:"upgrade-2",name:"Combat Enhancement",stat:"attack",value:1},{instanceId:"upgrade-3",name:"Shield Amplifier",stat:"shields",value:1}]}}},onConfirm:(i,s)=>console.log("Destroying upgrade:",s),onCancel:()=>console.log("Cancelled")}},CardSelectionModal:{category:"utility",props:{isOpen:!0,selectionData:{searchedCards:ma(8),drawCount:2,type:"search_and_draw",filter:{type:"upgrade"}},onConfirm:i=>console.log("Selected:",i),onClose:()=>console.log("Cancelled")}},CardViewerModal:{category:"utility",props:{isOpen:!0,cards:ma(5),title:"Your Deck",shouldSort:!0,onClose:()=>console.log("Modal closed")}},ViewDeckModal:{category:"utility",props:{show:!0,deck:ma(20),discardPile:ma(5),onClose:()=>console.log("Modal closed")}},GameDebugModal:{category:"debug",props:{show:!0,gameState:t,onClose:()=>console.log("Modal closed")}},DetailedDroneModal:{category:"debug",props:{show:!0,drone:or("Heavy Fighter"),lane:"lane2",effectiveStats:{attack:4,hull:4,shields:1,speed:3,power:11},onClose:()=>console.log("Modal closed")}}}[e]||null},gF=()=>({all:["DeploymentConfirmationModal","CardConfirmationModal","DroneAbilityConfirmationModal","ShipAbilityConfirmationModal","MoveConfirmationModal","InterceptionOpportunityModal","OpponentDecidingInterceptionModal","WinnerModal","WaitingForPlayerModal","GamePhaseModal","AICardPlayReportModal","AIDecisionLogModal","AIHandDebugModal","MandatoryActionModal","ConfirmationModal","OpponentDronesModal","ViewUpgradesModal","UpgradeSelectionModal","DestroyUpgradeModal","CardSelectionModal","CardViewerModal","ViewDeckModal","GameDebugModal","DetailedDroneModal"],confirmation:["DeploymentConfirmationModal","CardConfirmationModal","DroneAbilityConfirmationModal","ShipAbilityConfirmationModal","MoveConfirmationModal"],interception:["InterceptionOpportunityModal","OpponentDecidingInterceptionModal"],gamePhase:["WinnerModal","WaitingForPlayerModal","GamePhaseModal"],aiDebug:["AICardPlayReportModal","AIDecisionLogModal","AIHandDebugModal"],playerActions:["MandatoryActionModal","ConfirmationModal","OpponentDronesModal"],upgrades:["ViewUpgradesModal","UpgradeSelectionModal","DestroyUpgradeModal"],utility:["CardSelectionModal","CardViewerModal","ViewDeckModal"],debug:["GameDebugModal","DetailedDroneModal"]}),eM=({winner:e,localPlayerId:t,show:n,onClose:r})=>{const i=e===t;if(!n)return null;const s=()=>{r()},l=()=>{Ge.setState({appState:"menu"})};return h.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-center justify-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-12",children:[i?h.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"VICTORY"}):h.jsxs("div",{className:"relative w-full h-full flex items-center justify-center screen-flicker",children:[h.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center defeat-glow screen-distort z-10",style:{color:"#ff3232",textShadow:"0 0 30px rgba(255, 50, 50, 1), 0 0 60px rgba(255, 50, 50, 0.8), 0 0 90px rgba(255, 50, 50, 0.6)",filter:"drop-shadow(0 0 30px rgba(255, 50, 50, 0.6))"},children:"DEFEAT"}),h.jsx("div",{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent scanline-shutdown",style:{boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)"}}),h.jsx("div",{className:"absolute inset-0 bg-red-900/20 defeat-glow",style:{mixBlendMode:"multiply"}})]}),h.jsxs("div",{className:"flex gap-6 z-20",children:[h.jsx("button",{onClick:s,className:"btn-continue text-xl px-8 py-4",children:"View Board"}),h.jsx("button",{onClick:l,className:"btn-cancel text-xl px-8 py-4",children:"Exit to Menu"})]})]})})},ch=()=>{const{gameStateManager:e}=Si(),t=C.useMemo(()=>e?ln.getInstance(e):null,[e]),[n,r]=C.useState(null);C.useEffect(()=>{if(!t)return;const p=()=>{r(t.getCacheStats())};p();const g=setInterval(p,5e3);return()=>clearInterval(g)},[t]);const i=C.useCallback((p,g)=>t?t.getEffectiveStats(p,g):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},[t]),s=C.useCallback(p=>t?t.getLaneData(p):{lane:p,localDrones:[],opponentDrones:[],hasGuardian:!1},[t]),l=C.useCallback((p,g=null)=>t?t.hasGuardianInLane(p,g):!1,[t]),u=C.useCallback(()=>t?t.getPlacedSectionsForEngine():{},[t]),f=C.useCallback((p,g=[])=>t?t.getEffectiveShipStats(p,g):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},[t]),d=C.useCallback(()=>{t&&t.clearCache()},[t]);return{gameDataService:t,getEffectiveStats:i,getEffectiveShipStats:f,getLaneData:s,hasGuardianInLane:l,getPlacedSections:u,clearCache:d,cacheStats:n,isReady:!!t}},yF=({droneId:e,timestamp:t,duration:n=2e3})=>{const[r,i]=C.useState(!0);return C.useEffect(()=>{const s=setTimeout(()=>{i(!1)},n);return()=>clearTimeout(s)},[t,n]),r?h.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:h.jsx("div",{className:"bg-red-600/90 rounded-lg px-4 py-2 shadow-2xl border-2 border-red-400 animate-pulse",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Sk,{className:"w-5 h-5 text-white"}),h.jsx("span",{className:"text-white font-bold text-lg tracking-wide drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]",children:"Intercepted!"})]})})}):null},JP=({value:e,isFlat:t,bgColor:n,textColor:r})=>h.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:h.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),vF=({onClick:e})=>h.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("circle",{cx:"12",cy:"12",r:"6"}),h.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Bf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,isPotentialGuardian:u,onMouseEnter:f,onMouseLeave:d,lane:p,onAbilityClick:g,isActionTarget:y,droneRefs:b,mandatoryAction:S,localPlayerState:A,interceptedBadge:E,enableFloatAnimation:T=!1})=>{const{getEffectiveStats:w}=ch(),O=C.useMemo(()=>Nt.find(Me=>Me.name===e.name),[e.name]),_=w(e,p),{maxShields:k}=_,M=e.currentShields??k,j=O.abilities.filter(Me=>Me.type==="ACTIVE"),U=n?"border-cyan-400":"border-pink-500",q=n?"bg-cyan-900":"bg-pink-950",L=n?"text-cyan-100":"text-pink-100",$=n?"bg-cyan-900":"bg-pink-950",G=n?"text-cyan-400":"text-pink-500",Z=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",X=_.attack>_.baseAttack,re=_.attack<_.baseAttack,I=X?"text-green-400":re?"text-red-400":"text-white",Y=_.speed>_.baseSpeed,Q=_.speed<_.baseSpeed,ve=Y?"text-green-400":Q?"text-red-400":"text-white",R=e.isExhausted?"grayscale opacity-60":"",V=s?"animate-shake":"",K=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",ae=y?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",me=S?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",Se=Me=>!(e.isExhausted&&Me.cost.exhausts!==!1||Me.cost.energy&&A.energy<Me.cost.energy),Ae=e.isTeleporting?"opacity-0 pointer-events-none":"";return h.jsxs("div",{ref:Me=>b.current[e.id]=Me,onClick:Me=>t&&t(Me,e,n),onMouseEnter:f,onMouseLeave:d,className:`relative transition-all duration-200 ${R} ${V} ${K} ${ae} ${me} ${Ae} ${T?"drone-float":""}`,style:{width:"clamp(85px, 4.427vw, 115px)",height:"clamp(115px, 5.99vw, 156px)"},children:[h.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${U} cursor-pointer shadow-black overflow-hidden ${u?"guardian-glow":""}`,children:[h.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-black/10"}),h.jsxs("div",{className:"relative z-10 h-full",children:[h.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[h.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:k}).map((Me,Ne)=>Ne<M?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:G,children:h.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},Ne):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:Z,children:h.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},Ne))}),h.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:O.hull}).map((Me,Ne)=>{const xe=Ne<e.hull,$e=e.isExhausted?"bg-green-800":"bg-green-500";return h.jsx("div",{className:`h-2 w-2 rounded-sm ${xe?$e:"bg-gray-400"} border border-black/50`},Ne)})})]}),h.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${q} flex items-center justify-center border-t ${U}`,children:h.jsx("span",{className:`font-orbitron text-[8px] uppercase ${L} tracking-wider w-full text-center`,children:e.name})})]})]}),h.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:h.jsx(JP,{value:_.attack,isFlat:!1,bgColor:$,textColor:I})}),h.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:h.jsx(JP,{value:_.speed,isFlat:!0,bgColor:$,textColor:ve})}),n&&j.length>0&&Se(j[0])&&h.jsx(vF,{onClick:Me=>g&&g(Me,e,j[0])}),E&&E.droneId===e.id&&h.jsx(yF,{droneId:e.id,timestamp:E.timestamp})]})},tM=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:f,localPlayerState:d,shipAbilityMode:p,droneRefs:g,mandatoryAction:y})=>{if(!t||!e)return null;const{attackDetails:b,interceptors:S}=e,{attacker:A,target:E,targetType:T,lane:w}=b;return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),h.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500 max-w-4xl w-full",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:h.jsxs("div",{className:"bg-gray-900/95 p-8",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:[h.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center mb-2",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Interception!"}),h.jsxs("p",{className:"text-center text-cyan-300/60 uppercase text-sm tracking-widest mb-8",children:["Combat in ",w?.replace("lane","Lane ")||"Unknown Lane"]}),h.jsx("div",{className:"mb-6 py-8",children:h.jsxs("div",{className:"flex items-start justify-center gap-6",children:[h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"text-xs uppercase tracking-widest text-pink-400/60",children:"Attacker"}),h.jsx("div",{className:"transform scale-150 origin-top",children:h.jsx(Bf,{drone:A,isPlayer:!1,lane:w,droneRefs:g,mandatoryAction:y,localPlayerState:d})})]}),h.jsx("div",{className:"text-5xl font-light text-cyan-500/30 px-4 pt-16",children:"VS"}),h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"text-xs uppercase tracking-widest text-cyan-400/60",children:"Target"}),T==="drone"?h.jsx("div",{className:"transform scale-150 origin-top",children:h.jsx(Bf,{drone:E,isPlayer:!0,lane:w,droneRefs:g,mandatoryAction:y,localPlayerState:d})}):h.jsx("div",{className:"transform scale-[0.95] origin-top",style:{width:"400px"},children:h.jsx(fo,{section:E.name,stats:d.shipSections[E.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:f,localPlayerState:d,shipAbilityMode:p})})]})]})}),h.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-4"}),h.jsx("h3",{className:"text-center text-2xl font-bold uppercase tracking-wider mb-1",style:{background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Choose Interceptor"}),h.jsx("p",{className:"text-center text-cyan-300/50 text-sm mb-4",children:"Select a drone to intercept the attack"}),h.jsx("div",{className:"flex flex-wrap justify-center gap-12 mb-6",children:S.map(O=>h.jsx("div",{className:"cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_20px_rgba(0,255,136,0.4)]",children:h.jsx(Bf,{drone:O,isPlayer:!0,onClick:()=>n(O),lane:w,droneRefs:g,mandatoryAction:y,localPlayerState:d})},O.id))}),h.jsx("div",{className:"flex justify-center gap-6 pt-4",children:h.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline"})}),h.jsx("div",{className:"h-px w-80 mx-auto mt-8 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})]})},nM=({show:e,opponentName:t="Opponent"})=>e?h.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:h.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Opponent Deciding Interception"})}):null,rM=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[h.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),h.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:h.jsx("div",{className:"bg-gray-900/95 p-8 text-center",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:h.jsxs("div",{className:"space-y-8",children:[h.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Deploy Drone?"}),h.jsxs("div",{className:"flex items-center justify-center gap-8",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-5xl font-bold text-cyan-400 mb-2",children:i}),h.jsx("div",{className:"text-cyan-300/50 uppercase text-xs tracking-widest",children:"Deployment"})]}),h.jsx("div",{className:"text-4xl text-cyan-500/30 font-light",children:"|"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-5xl font-bold text-blue-400 mb-2",children:s}),h.jsx("div",{className:"text-blue-300/50 uppercase text-xs tracking-widest",children:"Energy"})]})]}),h.jsxs("div",{className:"flex justify-center gap-6 pt-4",children:[h.jsx("button",{onClick:n,className:"w-32 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Cancel"}),h.jsx("button",{onClick:r,className:"w-32 py-3 border-2 rounded uppercase text-sm tracking-wider font-semibold transition-all hover:scale-110 hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",style:{borderColor:"#00ff88",background:"linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 136, 255, 0.2))",color:"#00ff88",boxShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"Confirm"})]}),h.jsx("div",{className:"h-px w-80 mx-auto bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})})]})},aM=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container modal-container-md",children:[n&&h.jsx("button",{onClick:n,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),h.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),h.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[h.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},iM=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container modal-container-md",children:[n&&h.jsx("button",{onClick:n,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),h.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),h.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[h.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},sM=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase());let f="";return l&&(f=l.name),h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container modal-container-md",children:[n&&h.jsx("button",{onClick:n,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),h.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${f}`:"","? This will cost ",i.cost.energy," energy."]}),h.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[h.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},oM=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container modal-container-md",children:[n&&h.jsx("button",{onClick:n,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsx("h2",{className:"modal-title",children:"Confirm Move"}),h.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),h.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[h.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},lM=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container modal-container-md",children:[r&&h.jsx("button",{onClick:r,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsx("h2",{className:"modal-title",children:s}),h.jsx("p",{className:"modal-text",children:l})]})})},cM=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&h.jsx("button",{onClick:e.onCancel,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsx("h2",{className:"modal-title",children:n}),h.jsx("p",{className:"modal-text",children:e.text}),h.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[h.jsx("button",{onClick:e.onCancel,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:e.onConfirm,className:"btn-confirm",children:"Confirm"})]})]})})},gs=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&h.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:h.jsx(cn,{size:24})}),h.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),h.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),uM=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return h.jsxs(gs,{title:"AI Action: Card Played",text:"",onClose:t,children:[h.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[h.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",h.jsx("strong",{className:"text-purple-400",children:n.name}),r&&h.jsxs(h.Fragment,{children:[" on ",h.jsx("strong",{className:"text-cyan-400",children:r}),i&&h.jsxs(h.Fragment,{children:[" in ",h.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),h.jsx("div",{className:"transform scale-75",children:h.jsx(Ai,{card:n,isPlayable:!1})})]}),h.jsx("div",{className:"flex justify-center mt-6",children:h.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},dM=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&h.jsx("button",{onClick:n,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),h.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),h.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:h.jsxs("table",{className:"w-full text-left text-sm",children:[h.jsx("thead",{className:"sticky top-0 bg-slate-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-2",children:"Type"}),h.jsx("th",{className:"p-2",children:"Instigator"}),h.jsx("th",{className:"p-2",children:"Target"}),h.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),h.jsx("th",{className:"p-2",children:"Score"}),h.jsx("th",{className:"p-2",children:"Chosen"})]})}),h.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>h.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[h.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),h.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),h.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),h.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),h.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),h.jsx("td",{className:"p-2 text-center",children:s.isChosen&&h.jsx("span",{className:"text-yellow-400",children:"âœ”"})})]},l))})]})}),h.jsx("div",{className:"flex justify-center mt-6",children:h.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},fM=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&h.jsx("button",{onClick:r,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),h.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),h.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>h.jsx(Ai,{card:i,isPlayable:!1},i.instanceId)):h.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),h.jsx("div",{className:"flex justify-center mt-6",children:h.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),pM=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=C.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(y,b)=>{navigator.clipboard.writeText(JSON.stringify(y,null,2)).then(()=>P("STATE_SYNC",`${b} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},f=y=>y===null?"null":y===void 0?"undefined":typeof y=="boolean"?y.toString():typeof y=="string"?`"${y}"`:typeof y=="number"?y.toString():Array.isArray(y)?y.length===0?"[]":`[${y.length} items]`:typeof y=="object"?Object.keys(y).length===0?"{}":`{${Object.keys(y).length} properties}`:String(y),d=(y,b,S="")=>h.jsxs("div",{className:`mb-6 ${S}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"text-lg font-bold text-white",children:b}),h.jsxs("button",{onClick:()=>u(y,b),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[h.jsx(hv,{size:12}),"Copy"]})]}),h.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-800",children:[h.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),h.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),h.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),h.jsx("tbody",{children:Object.entries(y).map(([A,E],T)=>h.jsxs("tr",{className:T%2===0?"bg-gray-900":"bg-gray-800",children:[h.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),h.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:f(E)}),h.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof E=="object"&&E!==null?Array.isArray(E)?"array":"object":typeof E})]},A))})]})})]}),p=()=>{const y={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return h.jsxs("div",{className:"p-4 space-y-6",children:[d(y,"Core Game Info"),d(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),d(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),d({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),d({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&d(l.passInfo,"Pass Information")]})},g=()=>{if(!r)return h.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const y=r.getEffectiveShipStats(l.player1,l.placedSections),b=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(T=>{S[T]=l.player1.dronesOnBoard[T].map(w=>({drone:w.name,effectiveStats:r.getEffectiveStats(w,T)})),A[T]=l.player2.dronesOnBoard[T].map(w=>({drone:w.name,effectiveStats:r.getEffectiveStats(w,T)}))});const E=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return h.jsxs("div",{className:"p-4 space-y-6",children:[d(y,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),d(b,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),d(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),d(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),d(E,"GameDataService Cache Statistics")]})}catch(y){return h.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",y.message]})}};return h.jsx("div",{className:"modal-overlay",children:h.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[h.jsx("button",{onClick:t,className:"modal-close",children:h.jsx(cn,{size:24})}),h.jsx("h2",{className:"modal-title",children:"Game Debug View"}),h.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[h.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),h.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),h.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?p():g()}),h.jsx("div",{className:"flex justify-center mt-6",children:h.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},hM=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=s=>{switch(s){case"determineFirstPlayer":return"Waiting for Opponent";case"mandatoryDiscard":return"Opponent Discarding";case"optionalDiscard":return"Opponent Discarding Cards";case"allocateShields":return"Opponent Allocating Shields";case"mandatoryDroneRemoval":return"Opponent Removing Drones";case"deploymentComplete":return"Waiting for Opponent";default:return"Waiting for Opponent"}};return h.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-auto",children:h.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:i(t)})})},mM=({isOpen:e,onClose:t,drones:n=[]})=>{if(!e)return null;const r=[...n].sort((i,s)=>i.class-s.class);return h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-pink-500 p-8 shadow-2xl shadow-pink-500/20 max-w-[1400px] max-h-[600px] w-[95vw] flex flex-col",onClick:i=>i.stopPropagation(),children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[h.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-pink-400",children:"Opponent's Selected Drones"}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:h.jsx(cn,{size:32})})]}),h.jsx("div",{className:"overflow-y-auto flex-grow pr-4",children:h.jsxs("div",{className:"mb-6",children:[h.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",r.length,")"]}),r.length>0?h.jsx("div",{className:"w-full mx-auto",children:h.jsx("div",{className:"flex flex-nowrap gap-[10px] justify-center",children:r.map((i,s)=>h.jsx("div",{children:h.jsx(os,{drone:i,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[],isViewOnly:!0})},`${i.name}-${s}`))})}):h.jsx("div",{className:"flex items-center justify-center py-20",children:h.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected yet"})})]})})]})})},gM=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return h.jsxs(gs,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[h.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>h.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[h.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),h.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):h.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),h.jsx("div",{className:"flex justify-center mt-6",children:h.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},yM=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=C.useState(null);return h.jsxs(gs,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[h.jsx("div",{className:"flex justify-center my-4",children:h.jsx(Ai,{card:r,isPlayable:!1})}),h.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>h.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[h.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),h.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),h.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[h.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"btn-confirm disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Upgrade"})]})]})},vM=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=C.useState(null);return h.jsxs(gs,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[h.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(f=>{const d=s.appliedUpgrades[f.name]||[];return h.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[h.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",f.name]}),h.jsx("div",{className:"space-y-2",children:d.map(p=>h.jsx("div",{onClick:()=>u({droneName:f.name,instanceId:p.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===p.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:h.jsx("p",{className:"font-semibold text-white",children:p.name})},p.instanceId))})]},f.id)}):h.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),h.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[h.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"btn-confirm disabled:opacity-50 disabled:cursor-not-allowed",children:"Destroy Upgrade"})]})]})},bF=({card:e,isSelected:t,onClick:n})=>h.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:h.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[h.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[h.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),h.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:h.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),h.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),h.jsx("div",{className:"p-1",children:h.jsxs("div",{className:"relative h-24",children:[h.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),h.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&h.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:h.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:"âœ“"})})]})}),h.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:h.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:h.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),h.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),bM=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=C.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:f,filter:d}=r,p=S=>{s(A=>{const E=S.instanceId||`${S.id}-${S.name}`;return A.some(w=>(w.instanceId||`${w.id}-${w.name}`)===E)?A.filter(w=>(w.instanceId||`${w.id}-${w.name}`)!==E):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},g=()=>{i.length===u&&(n(i),s([]))},y=()=>{s([]),t()},b=i.length===u;return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[h.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:h.jsx(cn,{size:24})}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:f==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),h.jsx("p",{className:"text-gray-300 text-lg",children:d?`Select ${u} ${d.type} card${u>1?"s":""} from ${l.length} found ${d.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),h.jsx("div",{className:"mt-2",children:h.jsxs("span",{className:`text-lg font-bold ${b?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto",children:h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>h.jsx(bF,{card:S,isSelected:i.some(E=>{const T=S.instanceId||`${S.id}-${S.name}`;return(E.instanceId||`${E.id}-${E.name}`)===T}),onClick:p},S.instanceId||`${S.id}-${A}`))})}),h.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[h.jsx("button",{onClick:y,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:g,disabled:!b,className:"btn-confirm",children:"Confirm Selection"})]})]})})},fv=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[h.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:h.jsx(cn,{size:24})}),h.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?h.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:h.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>h.jsx("div",{className:"flex justify-center",children:h.jsx(Ai,{card:l,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1})},`${l.instanceId}-${u}`))})}):h.jsx("div",{className:"flex-grow flex items-center justify-center",children:h.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},xM=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[h.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:h.jsx(cn,{size:24})}),h.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),h.jsx("div",{className:"flex justify-center",children:h.jsx(os,{drone:t,isSelectable:!1,deployedCount:0,isViewOnly:!0})})]})});function xF(){const[e,t]=C.useState(""),[n,r]=C.useState("all"),[i,s]=C.useState(null),[l,u]=C.useState(null),d=gF()[n].filter(S=>S.toLowerCase().includes(e.toLowerCase())),p=S=>{const A=ZP(S);A&&(s(S),u(A.props))};C.useEffect(()=>{const S=A=>{A.key==="Escape"&&i&&(s(null),u(null))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[i]);const g=()=>{s(null),u(null)},y=()=>{Ge.setState({appState:"menu"})},b=()=>{if(!i||!l)return null;const S={...l,onClose:g,onCancel:g,onConfirm:()=>{console.log(`${i}: Confirmed`),g()},onIntercept:T=>{console.log(`${i}: Intercept with`,T),g()},onDecline:()=>{console.log(`${i}: Declined`),g()},onComplete:()=>{console.log(`${i}: Completed`),g()},onSelect:T=>{console.log(`${i}: Selected`,T),g()}},E={WinnerModal:eM,InterceptionOpportunityModal:tM,OpponentDecidingInterceptionModal:nM,DeploymentConfirmationModal:rM,CardConfirmationModal:aM,DroneAbilityConfirmationModal:iM,ShipAbilityConfirmationModal:sM,MoveConfirmationModal:oM,MandatoryActionModal:lM,ConfirmationModal:cM,AICardPlayReportModal:uM,AIDecisionLogModal:dM,AIHandDebugModal:fM,GameDebugModal:pM,WaitingForPlayerModal:hM,OpponentDronesModal:mM,ViewUpgradesModal:gM,UpgradeSelectionModal:yM,DestroyUpgradeModal:vM,CardSelectionModal:bM,CardViewerModal:fv,ViewDeckModal:Tv,GamePhaseModal:gs,DetailedDroneModal:xM}[i];return E?h.jsx(E,{...S}):(console.warn(`Modal component not found: ${i}`),null)};return h.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto",padding:"40px 20px"},children:[h.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",marginBottom:"30px"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[h.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 20px rgba(0, 255, 136, 0.4)"},children:"MODAL SHOWCASE"}),h.jsx("button",{onClick:y,className:"btn-cancel",style:{fontSize:"1rem"},children:"Close Showcase"})]}),h.jsx("p",{style:{color:"#cccccc",fontSize:"1rem",marginBottom:"30px"},children:"Preview all modal components with realistic mock data. Press ESC to close modal preview, Ctrl+M to toggle showcase."}),h.jsx("input",{type:"text",placeholder:"Search modals...",value:e,onChange:S=>t(S.target.value),style:{width:"100%",padding:"12px 20px",fontSize:"1rem",backgroundColor:"#1a1a1a",border:"2px solid #333",borderRadius:"8px",color:"#ffffff",outline:"none",transition:"border-color 0.3s"},onFocus:S=>S.target.style.borderColor="#00ff88",onBlur:S=>S.target.style.borderColor="#333"})]}),h.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",marginBottom:"30px"},children:h.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:Object.entries(mF).map(([S,{name:A,count:E}])=>h.jsxs("button",{onClick:()=>r(S),style:{padding:"10px 20px",fontSize:"0.9rem",fontWeight:n===S?"bold":"normal",backgroundColor:n===S?"#0088ff":"#2a2a2a",color:n===S?"#ffffff":"#cccccc",border:`2px solid ${n===S?"#00ff88":"#444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:T=>{n!==S&&(T.target.style.backgroundColor="#333",T.target.style.borderColor="#666")},onMouseOut:T=>{n!==S&&(T.target.style.backgroundColor="#2a2a2a",T.target.style.borderColor="#444")},children:[A," (",E,")"]},S))})}),h.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:d.length===0?h.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:h.jsxs("p",{style:{fontSize:"1.2rem"},children:['No modals found matching "',e,'"']})}):h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:d.map(S=>{const E=ZP(S)?.category||"unknown";return h.jsxs("button",{onClick:()=>p(S),style:{padding:"20px",backgroundColor:"#2a2a2a",border:"2px solid #444",borderRadius:"8px",cursor:"pointer",textAlign:"left",transition:"all 0.3s ease",position:"relative"},onMouseOver:T=>{T.currentTarget.style.backgroundColor="#333",T.currentTarget.style.borderColor="#00ff88",T.currentTarget.style.transform="translateY(-4px)",T.currentTarget.style.boxShadow="0 8px 16px rgba(0, 255, 136, 0.2)"},onMouseOut:T=>{T.currentTarget.style.backgroundColor="#2a2a2a",T.currentTarget.style.borderColor="#444",T.currentTarget.style.transform="translateY(0)",T.currentTarget.style.boxShadow="none"},children:[h.jsx("div",{style:{fontSize:"0.75rem",color:"#888",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px"},children:E}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#00ff88",marginBottom:"4px"},children:S.replace(/Modal$/,"")}),h.jsx("div",{style:{fontSize:"0.85rem",color:"#999"},children:"Click to preview"})]},S)})})}),b(),h.jsxs("div",{style:{maxWidth:"1400px",margin:"40px auto 0",padding:"20px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",fontSize:"0.9rem",color:"#888"},children:[h.jsx("div",{style:{marginBottom:"10px",fontWeight:"bold",color:"#00ff88"},children:"Keyboard Shortcuts:"}),h.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[h.jsxs("li",{style:{marginBottom:"5px"},children:[h.jsx("strong",{style:{color:"#ccc"},children:"ESC:"})," Close modal preview"]}),h.jsxs("li",{style:{marginBottom:"5px"},children:[h.jsx("strong",{style:{color:"#ccc"},children:"Ctrl+M:"})," Toggle Modal Showcase from anywhere"]})]}),h.jsx("div",{style:{marginTop:"15px",fontStyle:"italic"},children:"All modal interactions are logged to console. Buttons will close the preview instead of performing actual actions."})]})]})}function o0(e){return{...e,id:`test-drone-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1,statMods:[]}}function Ax(e,t){P("TESTING","ðŸ§ª TEST MODE: Initializing test game with config:",e);const n=Cx(e);if(!n.valid)return console.error("âŒ TEST MODE: Invalid configuration:",n.errors),alert(`Test configuration invalid:
${n.errors.join(`
`)}`),!1;try{const r=ew(e.player1,"Player 1"),i=ew(e.player2,"Player 2"),s=e.player1.shipSections||["bridge","powerCell","droneControlHub"],l=e.player2.shipSections||["bridge","powerCell","droneControlHub"],u={appState:"inGame",gameActive:!0,gameMode:"local",testMode:!0,turnPhase:"action",gameStage:"roundLoop",roundNumber:e.roundNumber||1,turn:e.roundNumber||1,currentPlayer:e.firstPlayer||"player1",firstPlayerOfRound:e.firstPlayer||"player1",firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:r,player2:i,placedSections:s,opponentPlacedSections:l,unplacedSections:[],shieldsToAllocate:0,winner:null,gameLog:[{type:"system",message:"ðŸ§ª Test game initialized",timestamp:Date.now(),round:e.roundNumber||1}],droneSelectionPool:[],droneSelectionTrio:[],commitments:{droneSelection:{player1:{drones:r.activeDronePool,timestamp:Date.now()},player2:{drones:i.activeDronePool,timestamp:Date.now()}}}};t.setState(u,"TEST_GAME_INITIALIZED");const f=Yf[0];return Pr.initialize(Yf,Nt,f,t.actionProcessor,t),P("TESTING","ðŸ¤– TEST MODE: AIPhaseProcessor initialized with:",f.name),P("TESTING","âœ… TEST MODE: Game state initialized successfully"),P("TESTING","ðŸŽ® TEST MODE: Starting at action phase with first player:",e.firstPlayer),!0}catch(r){return console.error("âŒ TEST MODE: Error initializing test game:",r),alert(`Failed to initialize test game: ${r.message}`),!1}}function ew(e,t){const n={bridge:JSON.parse(JSON.stringify(lu.bridge)),powerCell:JSON.parse(JSON.stringify(lu.powerCell)),droneControlHub:JSON.parse(JSON.stringify(lu.droneControlHub))};let r=e.deck||[];if(e.deckComposition&&Object.keys(e.deckComposition).length>0){const f=[];let d=0;Object.entries(e.deckComposition).forEach(([p,g])=>{for(let y=0;y<g;y++){const b=Vn.find(S=>S.id===p);b&&f.push(ke.createCard(b,`card-${Date.now()}-${d++}`))}}),r=f.sort(()=>.5-Math.random()),P("TESTING",`ðŸƒ Built deck from composition for ${t}: ${r.length} cards`)}const i=e.laneAssignments||{lane1:[],lane2:[],lane3:[]},s={lane1:i.lane1.map(f=>o0(f)),lane2:i.lane2.map(f=>o0(f)),lane3:i.lane3.map(f=>o0(f))};let l=[];if(e.handCards&&Array.isArray(e.handCards)&&e.handCards.length>0){let f=0;e.handCards.forEach(d=>{if(typeof d=="string"){const p=Vn.find(g=>g.id===d);p?l.push(ke.createCard(p,`hand-${Date.now()}-${f++}`)):console.warn(`âš ï¸ TEST MODE: Card ID "${d}" not found in card collection`)}else d&&d.id&&(d.instanceId?l.push(d):l.push({...d,instanceId:`hand-${Date.now()}-${f++}`}))}),P("TESTING",`ðŸƒ Built hand from configuration for ${t}: ${l.length} cards`)}else if(r.length>0){const p=Ra({shipSections:n},e.shipSections||["bridge","powerCell","droneControlHub"]).totals.handLimit,g=Math.min(p,r.length);l=r.splice(0,g),P("TESTING",`ðŸŽ² Auto-drew ${g} cards to hand limit (${p}) for ${t}`)}else P("TESTING",`âš ï¸ No deck available to auto-draw hand cards for ${t}`);const u={name:t,shipSections:n,energy:e.energy||10,initialDeploymentBudget:e.initialDeploymentBudget||10,deploymentBudget:e.deploymentBudget||10,hand:l,deck:r,discardPile:[],activeDronePool:e.selectedDrones||[],dronesOnBoard:s,deployedDroneCounts:SF(i),appliedUpgrades:{}};return P("TESTING",`ðŸ“Š Created ${t} state:`,{energy:u.energy,handSize:u.hand.length,deckSize:u.deck.length,activeDronePoolSize:u.activeDronePool.length,dronesOnBoard:{lane1:u.dronesOnBoard.lane1.length,lane2:u.dronesOnBoard.lane2.length,lane3:u.dronesOnBoard.lane3.length}}),u}function SF(e){if(!e)return{};const t={};return Object.values(e).forEach(n=>{n.forEach(r=>{t[r.name]=(t[r.name]||0)+1})}),t}function Cx(e){const t=[];if(!e.player1)t.push("Player 1 configuration is required");else{const n=tw(e.player1,"Player 1");t.push(...n)}if(!e.player2)t.push("Player 2 configuration is required");else{const n=tw(e.player2,"Player 2");t.push(...n)}return e.firstPlayer&&!["player1","player2"].includes(e.firstPlayer)&&t.push('First player must be "player1" or "player2"'),e.roundNumber!==void 0&&(e.roundNumber<1||!Number.isInteger(e.roundNumber))&&t.push("Round number must be a positive integer"),{valid:t.length===0,errors:t}}function tw(e,t){const n=[];if(e.selectedDrones&&(Array.isArray(e.selectedDrones)?e.selectedDrones.length!==5&&n.push(`${t}: Must have exactly 5 selected drones (found ${e.selectedDrones.length})`):n.push(`${t}: selectedDrones must be an array`)),e.laneAssignments)if(!e.laneAssignments.lane1||!e.laneAssignments.lane2||!e.laneAssignments.lane3)n.push(`${t}: Lane assignments must include lane1, lane2, and lane3`);else{const r=e.laneAssignments.lane1.length+e.laneAssignments.lane2.length+e.laneAssignments.lane3.length;if(e.selectedDrones&&r>0){const i=new Set(e.selectedDrones.map(s=>s.name));Object.values(e.laneAssignments).forEach(s=>{s.forEach(l=>{i.has(l.name)||n.push(`${t}: Drone "${l.name}" in lane not in selected drone pool`)})})}}return e.energy!==void 0&&(e.energy<0||e.energy>100)&&n.push(`${t}: Energy must be between 0 and 100`),e.handCards&&!Array.isArray(e.handCards)&&n.push(`${t}: Hand cards must be an array`),e.deck&&!Array.isArray(e.deck)&&n.push(`${t}: Deck must be an array`),n}function Ex(){return{player1:{selectedDrones:[],laneAssignments:{lane1:[],lane2:[],lane3:[]},handCards:[],deck:[],deckComposition:{},energy:10,initialDeploymentBudget:10,deploymentBudget:10,shipSections:["bridge","powerCell","droneControlHub"]},player2:{selectedDrones:[],laneAssignments:{lane1:[],lane2:[],lane3:[]},handCards:[],deck:[],deckComposition:{},energy:10,initialDeploymentBudget:10,deploymentBudget:10,shipSections:["bridge","powerCell","droneControlHub"]},firstPlayer:"player1",roundNumber:1}}const AF={initializeTestGame:Ax,validateTestConfig:Cx,createDefaultTestConfig:Ex},CF=Object.freeze(Object.defineProperty({__proto__:null,createDefaultTestConfig:Ex,default:AF,initializeTestGame:Ax,validateTestConfig:Cx},Symbol.toStringTag,{value:"Module"})),nw=({isOpen:e,onClose:t,onConfirm:n,initialSelection:r=[],allDrones:i=[],title:s="Select Drones"})=>{const[l,u]=C.useState([]);if(C.useEffect(()=>{if(e){const E=r.map(T=>i.find(O=>O.name===T.name)||T);u(E)}},[e,r,i]),!e)return null;const f=5,d=l.length,p=d===f,g=p,y=E=>l.some(T=>T.name===E.name),b=E=>{y(E)?u(w=>w.filter(O=>O.name!==E.name)):d<f?u(w=>[...w,E]):console.log("Maximum 5 drones already selected")},S=()=>{g&&n(l)},A=[...i].sort((E,T)=>E.class-T.class);return h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-[1500px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:E=>E.stopPropagation(),children:[h.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[h.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:s}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:h.jsx(cn,{size:32})})]}),h.jsx("div",{className:"flex-shrink-0 mb-6",children:h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:`text-4xl font-orbitron font-bold ${p?"text-green-400":"text-yellow-400"}`,children:[d,"/",f," Drones Selected"]}),!p&&h.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Click on drones to select or deselect them"}),p&&h.jsx("p",{className:"text-green-400 text-sm mt-2",children:"âœ“ Ready to confirm selection"})]})}),h.jsx("div",{className:"overflow-y-auto flex-grow pr-4 mb-6",children:h.jsx("div",{className:"max-w-[1300px] mx-auto",children:h.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:A.map((E,T)=>{const w=y(E),O=d<f||w;return h.jsxs("div",{className:`relative transition-all duration-200 ${w?"ring-4 ring-cyan-400 ring-offset-2 ring-offset-gray-900 scale-105":O?"hover:ring-2 hover:ring-cyan-600 hover:scale-102":"opacity-40"}`,style:{filter:w?"drop-shadow(0 0 20px rgba(34, 211, 238, 0.6))":"none"},children:[h.jsx(os,{drone:E,onClick:()=>b(E),isSelectable:O,isSelected:w,deployedCount:0,appliedUpgrades:[],isViewOnly:!1}),w&&h.jsxs("div",{className:"absolute top-2 right-2 bg-cyan-400 text-gray-900 font-bold text-sm px-2 py-1 rounded-full shadow-lg z-20 flex items-center gap-1",children:[h.jsx("span",{children:"âœ“"}),h.jsx("span",{children:"Selected"})]})]},`${E.name}-${T}`)})})})}),h.jsxs("div",{className:"flex justify-center gap-4 flex-shrink-0",children:[h.jsx("button",{onClick:t,className:"btn-cancel",style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:"Cancel"}),h.jsx("button",{onClick:S,disabled:!g,className:`btn-confirm ${g?"":"opacity-50 cursor-not-allowed"}`,style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:g?"Confirm Selection":`Select ${f-d} More`})]})]})})},Nf=({isOpen:e,onClose:t,onConfirm:n,initialSelection:r={},allCards:i=[],title:s="Select Cards",minCards:l=40,mandatory:u=!1})=>{const[f,d]=C.useState({}),[p,g]=C.useState({cost:{min:0,max:20},type:"all",search:""});C.useEffect(()=>{e&&d({...r})},[e,r]);const y=Object.values(f).reduce((O,_)=>O+_,0),b=y>=l,S=l===0?!0:b,A=C.useMemo(()=>i.filter(O=>!(O.cost<p.cost.min||O.cost>p.cost.max||p.type!=="all"&&O.type!==p.type||p.search&&!O.name.toLowerCase().includes(p.search.toLowerCase()))).sort((O,_)=>O.cost!==_.cost?O.cost-_.cost:O.name.localeCompare(_.name)),[i,p]);if(!e)return null;const E=O=>f[O]||0,T=(O,_)=>{if(_<=0){const k={...f};delete k[O],d(k)}else d(k=>({...k,[O]:_}))},w=()=>{S&&n(f)};return h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:u?void 0:t,children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-[1600px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[h.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[h.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:s}),!u&&h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:h.jsx(cn,{size:32})})]}),h.jsxs("div",{className:"flex-shrink-0 mb-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("div",{className:`text-3xl font-orbitron font-bold ${b?"text-green-400":l===0?"text-cyan-400":"text-yellow-400"}`,children:l===0?`${y} Cards Selected`:`${y} / ${l}+ Cards Selected`}),!b&&l>0&&h.jsxs("p",{className:"text-gray-400 text-sm",children:["Minimum ",l," cards required"]}),l===0&&h.jsx("p",{className:"text-gray-400 text-sm",children:"Select any number of cards"}),b&&l>0&&h.jsx("p",{className:"text-green-400 text-sm",children:"âœ“ Ready to confirm selection"})]}),h.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[h.jsx("input",{type:"text",placeholder:"Search cards...",value:p.search,onChange:O=>g(_=>({..._,search:O.target.value})),className:"px-3 py-2 bg-gray-800 border border-gray-600 rounded text-white"}),h.jsxs("select",{value:p.type,onChange:O=>g(_=>({..._,type:O.target.value})),className:"px-3 py-2 bg-gray-800 border border-gray-600 rounded text-white",children:[h.jsx("option",{value:"all",children:"All Types"}),h.jsx("option",{value:"Action",children:"Action Cards"}),h.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),h.jsxs("div",{className:"col-span-2",children:[h.jsxs("label",{className:"text-gray-400 text-sm mb-1 block",children:["Cost Range: ",p.cost.min," - ",p.cost.max]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"range",min:0,max:20,value:p.cost.min,onChange:O=>g(_=>({..._,cost:{..._.cost,min:Math.min(parseInt(O.target.value),_.cost.max)}})),className:"flex-1"}),h.jsx("input",{type:"range",min:0,max:20,value:p.cost.max,onChange:O=>g(_=>({..._,cost:{..._.cost,max:Math.max(parseInt(O.target.value),_.cost.min)}})),className:"flex-1"})]})]})]})]}),h.jsx("div",{className:"overflow-y-auto flex-grow pr-4 mb-6",children:h.jsx("div",{className:"max-w-[1400px] mx-auto",children:h.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:A.map((O,_)=>{const k=E(O.id),M=O.maxInDeck||3;return h.jsxs("div",{className:"relative flex flex-col items-center",children:[h.jsx("div",{className:`transition-all duration-200 ${k>0?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-gray-900":"hover:ring-2 hover:ring-cyan-600"}`,style:{filter:k>0?"drop-shadow(0 0 10px rgba(34, 211, 238, 0.4))":"none"},children:h.jsx(Ai,{card:O,onClick:()=>{},isPlayable:!0,isSelected:k>0,isMandatoryTarget:!1,scale:.7})}),h.jsx("div",{className:"mt-2 flex items-center gap-2 bg-gray-800 rounded px-3 py-1",children:Array.from({length:M+1}).map((j,U)=>h.jsx("button",{onClick:()=>T(O.id,U),className:`px-3 py-1 rounded text-sm font-bold transition-all ${k===U?"bg-cyan-500 text-white":"bg-gray-700 text-gray-300 hover:bg-cyan-600 hover:text-white"}`,children:U},U))})]},`${O.id}-${_}`)})})})}),h.jsxs("div",{className:"flex justify-center gap-4 flex-shrink-0",children:[!u&&h.jsx("button",{onClick:t,className:"btn-cancel",style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:"Cancel"}),h.jsx("button",{onClick:w,disabled:!S,className:`btn-confirm ${S?"":"opacity-50 cursor-not-allowed"}`,style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:S?"Confirm Selection":l>0?`Add ${l-y} More Cards`:"Confirm Selection"})]})]})})};function EF(){const{gameStateManager:e}=Si(),[t,n]=C.useState(Ex()),[r,i]=C.useState(null),[s,l]=C.useState(null),[u,f]=C.useState(null),[d,p]=C.useState(null),g=()=>{P("TESTING","ðŸ”™ Returning to main menu from testing setup"),e.setState({appState:"menu"})},y=()=>{P("TESTING","ðŸ§ª Starting test game with configuration:",t),Ax(t,e)||console.error("Failed to initialize test game")},b=(L,$,G)=>{n(Z=>({...Z,[L]:{...Z[L],[$]:G}}))},S=(L,$,G)=>{const Z=t[L].selectedDrones.find(Y=>Y.name===$);if(!Z)return;const X={...Z,id:`${L}-${$}-${G}-${Date.now()}-${Math.random()}`,currentHealth:Z.health,currentShields:0,currentMaxShields:Z.maxShields||0},re=t[L].laneAssignments,I={...re,[G]:[...re[G],X]};b(L,"laneAssignments",I)},A=(L,$,G)=>{const Z=t[L].laneAssignments,X=Z[G],re=X.map(Q=>Q.name).lastIndexOf($);if(re===-1)return;const I=[...X.slice(0,re),...X.slice(re+1)],Y={...Z,[G]:I};b(L,"laneAssignments",Y)},E=L=>{i(L)},T=(L,$)=>{const G=$.map(Z=>({...Z,id:`${L}-${Z.name}-${Date.now()}-${Math.random()}`,currentHealth:Z.health,currentShields:0,currentMaxShields:Z.maxShields||0}));b(L,"selectedDrones",G),i(null)},w=L=>{l(L)},O=(L,$)=>{b(L,"deckComposition",$),l(null)},_=L=>{f(L)},k=(L,$)=>{const G=[];Object.entries($).forEach(([Z,X])=>{for(let re=0;re<X;re++)G.push(Z)}),b(L,"handCards",G),f(null)},M=L=>{b(L,"handCards",[])},j=L=>{p(L)},U=(L,$)=>{try{const G=$.split("|"),Z={},X=[];for(const re of G){const[I,...Y]=re.split(":"),Q=Y.join(":");if(I==="cards"){const ve=Q.split(",");for(const R of ve){const[V,K]=R.split(":"),ae=parseInt(K,10);if(!V||isNaN(ae)){alert("Invalid card format in deck code.");return}if(!Vn.find(Se=>Se.id===V)){alert(`Card ${V} not found.`);return}Z[V]=ae}}else if(I==="drones"){const ve=Q.split(",");for(const R of ve){const V=R.split(":"),K=V.pop(),ae=V.join(":"),me=parseInt(K,10);if(!ae||isNaN(me)||me<=0)continue;const Se=Nt.find(Ae=>Ae.name===ae);Se&&X.push(Se)}}}if(b(L,"deckComposition",Z),X.length>0){const re=X.slice(0,5);T(L,re)}P("TESTING",`ðŸ“¥ Imported deck for ${L}: ${Object.values(Z).reduce((re,I)=>re+I,0)} cards, ${X.length} drones`),alert(`Deck imported successfully!
${Object.values(Z).reduce((re,I)=>re+I,0)} cards${X.length>0?` and ${Math.min(X.length,5)} drones`:""}`)}catch(G){console.error("Error importing deck:",G),alert("Failed to parse deck code. Please check the format.")}},q=L=>{const $=L==="player1"?"player2":"player1",G=t[$],Z=G.selectedDrones.map(Y=>({...Y,id:`${L}-${Y.name}-${Date.now()}-${Math.random()}`})),X=Y=>Y.map(Q=>Z.find(R=>R.name===Q.name)||Q),re={lane1:X(G.laneAssignments.lane1),lane2:X(G.laneAssignments.lane2),lane3:X(G.laneAssignments.lane3)},I={...G.deckComposition};b(L,"selectedDrones",Z),b(L,"laneAssignments",re),b(L,"deckComposition",I),P("TESTING",`ðŸ“‹ Copied configuration from ${$} to ${L} (drones, lanes, and deck)`)};return h.jsxs("div",{className:"body-font",style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",minHeight:"100vh",color:"#ffffff",padding:"20px",boxSizing:"border-box",overflow:"auto"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[h.jsx("h1",{className:"heading-font",style:{fontSize:"2.5rem",color:"#ffb74d",marginBottom:"0.5rem"},children:"ðŸ§ª TESTING MODE"}),h.jsx("p",{style:{color:"#aaaaaa",fontSize:"1rem"},children:"Configure game scenario - Start directly at action phase"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[h.jsx(rw,{player:"player1",playerLabel:"Player 1",config:t.player1,updateConfig:(L,$)=>b("player1",L,$),addDroneInstanceToLane:(L,$)=>S("player1",L,$),removeDroneInstanceFromLane:(L,$)=>A("player1",L,$),onOpenDroneSelection:()=>E("player1"),onOpenCardSelection:()=>w("player1"),onOpenHandCardSelection:()=>_("player1"),onClearHandCards:()=>M("player1"),onOpenImportDeck:()=>j("player1"),onCopyFromOtherPlayer:()=>q("player1")}),h.jsx(rw,{player:"player2",playerLabel:"Player 2",config:t.player2,updateConfig:(L,$)=>b("player2",L,$),addDroneInstanceToLane:(L,$)=>S("player2",L,$),removeDroneInstanceFromLane:(L,$)=>A("player2",L,$),onOpenDroneSelection:()=>E("player2"),onOpenCardSelection:()=>w("player2"),onOpenHandCardSelection:()=>_("player2"),onClearHandCards:()=>M("player2"),onOpenImportDeck:()=>j("player2"),onCopyFromOtherPlayer:()=>q("player2")})]}),h.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"1.5rem",borderRadius:"8px",marginBottom:"2rem"},children:[h.jsx("h3",{className:"heading-font",style:{fontSize:"1.2rem",marginBottom:"1rem"},children:"Global Settings"}),h.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[h.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.jsx("span",{children:"First Player:"}),h.jsxs("select",{value:t.firstPlayer,onChange:L=>n($=>({...$,firstPlayer:L.target.value})),style:{padding:"8px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"},children:[h.jsx("option",{value:"player1",children:"Player 1"}),h.jsx("option",{value:"player2",children:"Player 2"})]})]}),h.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.jsx("span",{children:"Round Number:"}),h.jsx("input",{type:"number",min:"1",max:"99",value:t.roundNumber,onChange:L=>n($=>({...$,roundNumber:parseInt(L.target.value)||1})),style:{padding:"8px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",width:"100px"}})]})]})]}),h.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[h.jsx("button",{onClick:g,className:"btn-cancel",children:"BACK TO MENU"}),h.jsx("button",{onClick:y,className:"btn-confirm",children:"START TEST GAME"})]}),h.jsx(nw,{isOpen:r==="player1",onClose:()=>i(null),onConfirm:L=>T("player1",L),initialSelection:t.player1.selectedDrones,allDrones:Nt,title:"Select Drones for Player 1"}),h.jsx(nw,{isOpen:r==="player2",onClose:()=>i(null),onConfirm:L=>T("player2",L),initialSelection:t.player2.selectedDrones,allDrones:Nt,title:"Select Drones for Player 2"}),h.jsx(Nf,{isOpen:s==="player1",onClose:()=>l(null),onConfirm:L=>O("player1",L),initialSelection:t.player1.deckComposition,allCards:Vn,title:"Select Cards for Player 1"}),h.jsx(Nf,{isOpen:s==="player2",onClose:()=>l(null),onConfirm:L=>O("player2",L),initialSelection:t.player2.deckComposition,allCards:Vn,title:"Select Cards for Player 2"}),h.jsx(Nf,{isOpen:u==="player1",onClose:()=>f(null),onConfirm:L=>k("player1",L),initialSelection:{},allCards:Vn,title:"Select Starting Hand for Player 1",minCards:0}),h.jsx(Nf,{isOpen:u==="player2",onClose:()=>f(null),onConfirm:L=>k("player2",L),initialSelection:{},allCards:Vn,title:"Select Starting Hand for Player 2",minCards:0}),d&&h.jsx(PF,{isOpen:!0,onClose:()=>p(null),onImport:L=>{U(d,L),p(null)},playerLabel:d==="player1"?"Player 1":"Player 2"})]})}function rw({player:e,playerLabel:t,config:n,updateConfig:r,addDroneInstanceToLane:i,removeDroneInstanceFromLane:s,onOpenDroneSelection:l,onOpenCardSelection:u,onOpenHandCardSelection:f,onClearHandCards:d,onOpenImportDeck:p,onCopyFromOtherPlayer:g}){const y=e==="player1"?"Player 2":"Player 1",b=Object.values(n.deckComposition||{}).reduce((A,E)=>A+E,0),S=(n.handCards||[]).length;return h.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"1.5rem",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("h2",{className:"heading-font",style:{fontSize:"1.5rem",color:"#6dd5fa",margin:0},children:t}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{onClick:p,className:"btn-utility",style:{padding:"6px 12px",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"},children:"ðŸ“¥ Import Deck"}),h.jsxs("button",{onClick:g,className:"btn-utility",style:{padding:"6px 12px",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"},children:["ðŸ“‹ Copy from ",y]})]})]}),h.jsxs("div",{children:[h.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Deck (",b," cards)"]}),h.jsxs("button",{onClick:u,className:"btn-confirm",style:{width:"100%",padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[h.jsx("span",{children:"ðŸƒ"}),h.jsxs("span",{children:["SELECT CARDS (",b," total, ",Object.keys(n.deckComposition||{}).length," unique)"]})]})]}),h.jsxs("div",{children:[h.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Starting Hand (",S," cards)"]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsxs("button",{onClick:f,className:"btn-confirm",style:{flex:1,padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[h.jsx("span",{children:"âœ‹"}),h.jsxs("span",{children:["SELECT HAND (",S," cards)"]})]}),S>0&&h.jsx("button",{onClick:d,className:"btn-cancel",style:{padding:"12px",fontSize:"0.9rem"},children:"Clear"})]})]}),h.jsxs("div",{children:[h.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Drone Pool (",n.selectedDrones.length,"/5)"]}),h.jsxs("button",{onClick:l,className:"btn-confirm",style:{width:"100%",padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[h.jsx("span",{children:"ðŸŽ¯"}),h.jsxs("span",{children:["SELECT DRONES (",n.selectedDrones.length,"/5)"]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.5rem",color:"#aaa"},children:"Lane Assignments"}),h.jsx(TF,{selectedDrones:n.selectedDrones,laneAssignments:n.laneAssignments,addDroneInstanceToLane:i,removeDroneInstanceFromLane:s})]}),h.jsxs("div",{children:[h.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.5rem",color:"#aaa"},children:"Resources"}),h.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[h.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.3rem",flex:1},children:[h.jsx("span",{style:{fontSize:"0.9rem"},children:"Energy:"}),h.jsx("input",{type:"number",min:"0",max:"50",value:n.energy,onChange:A=>r("energy",parseInt(A.target.value)||0),style:{padding:"6px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}})]}),h.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.3rem",flex:1},children:[h.jsx("span",{style:{fontSize:"0.9rem"},children:"Deployment Budget:"}),h.jsx("input",{type:"number",min:"0",max:"50",value:n.deploymentBudget,onChange:A=>r("deploymentBudget",parseInt(A.target.value)||0),style:{padding:"6px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}})]})]})]})]})}function TF({selectedDrones:e,laneAssignments:t,addDroneInstanceToLane:n,removeDroneInstanceFromLane:r}){const i=(l,u)=>t[u].filter(f=>f.name===l).length,s={lane1:t.lane1.length,lane2:t.lane2.length,lane3:t.lane3.length};return e.length===0?h.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"0.8rem",padding:"1rem",fontStyle:"italic",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px"},children:"Select drones first to assign them to lanes"}):h.jsx("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px",padding:"0.5rem",overflow:"auto"},children:h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(140px, 1fr) repeat(3, minmax(100px, 1fr))",gap:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[h.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"left"},children:"Drone Name"}),h.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 1"}),h.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 2 (Center)"}),h.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 3"}),e.map((l,u)=>{const d=u%2===0?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.03)";return h.jsxs(pv.Fragment,{children:[h.jsx("div",{style:{padding:"6px 8px",backgroundColor:d,fontSize:"0.8rem",display:"flex",alignItems:"center"},children:l.name}),h.jsxs("div",{style:{padding:"6px 8px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[h.jsx("button",{onClick:()=>r(l.name,"lane1"),disabled:i(l.name,"lane1")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane1")===0?.3:1,cursor:i(l.name,"lane1")===0?"not-allowed":"pointer"},children:"âˆ’"}),h.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane1")>0?"#6dd5fa":"#666"},children:i(l.name,"lane1")}),h.jsx("button",{onClick:()=>n(l.name,"lane1"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane1`),h.jsxs("div",{style:{padding:"6px 8px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[h.jsx("button",{onClick:()=>r(l.name,"lane2"),disabled:i(l.name,"lane2")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane2")===0?.3:1,cursor:i(l.name,"lane2")===0?"not-allowed":"pointer"},children:"âˆ’"}),h.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane2")>0?"#6dd5fa":"#666"},children:i(l.name,"lane2")}),h.jsx("button",{onClick:()=>n(l.name,"lane2"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane2`),h.jsxs("div",{style:{padding:"6px 8px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[h.jsx("button",{onClick:()=>r(l.name,"lane3"),disabled:i(l.name,"lane3")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane3")===0?.3:1,cursor:i(l.name,"lane3")===0?"not-allowed":"pointer"},children:"âˆ’"}),h.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane3")>0?"#6dd5fa":"#666"},children:i(l.name,"lane3")}),h.jsx("button",{onClick:()=>n(l.name,"lane3"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane3`)]},l.id)}),h.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.75rem",color:"#aaa",textAlign:"left",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:"Total:"}),h.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane1>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane1}),h.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane2>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane2}),h.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane3>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane3})]})})}function PF({isOpen:e,onClose:t,onImport:n,playerLabel:r}){const[i,s]=C.useState("");if(!e)return null;const l=()=>{i.trim()?(n(i),s("")):alert("Please enter a deck code")};return h.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:h.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:u=>u.stopPropagation(),children:[h.jsxs("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-4",children:["Import Deck for ",r]}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below. The deck will be imported with both cards and drones (if included)."}),h.jsx("textarea",{value:i,onChange:u=>s(u.target.value),className:"w-full h-32 p-3 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono text-sm",placeholder:"cards:CARD001:4,CARD002:2|drones:Scout Drone:1,Heavy Fighter:1"}),h.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[h.jsx("button",{onClick:t,className:"btn-cancel",children:"Cancel"}),h.jsx("button",{onClick:l,className:"btn-confirm",children:"Import Deck"})]})]})})}const wF=()=>{const e=C.useRef(null);return C.useEffect(()=>{const t=e.current,n=t.getContext("2d");let r;const i=Array.from({length:500},()=>{const d=Math.random();let p;return d<.9?p="rgba(255, 255, 255, ":d<.94?p="rgba(100, 150, 255, ":d<.98?p="rgba(255, 200, 100, ":p="rgba(255, 100, 100, ",{x:0,y:0,radius:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,twinkleSpeed:.005+Math.random()*.01,twinklePhase:Math.random()*Math.PI*2,color:p}}),s=["rgba(147, 51, 234, ","rgba(59, 130, 246, ","rgba(236, 72, 153, ","rgba(16, 185, 129, ","rgba(6, 182, 212, ","rgba(139, 92, 246, ","rgba(34, 211, 238, "],l=Array.from({length:4},()=>({x:0,y:0,radius:180+Math.random()*150,color:s[Math.floor(Math.random()*s.length)],pulsePhase:Math.random()*Math.PI*2,pulseSpeed:.004+Math.random()*.003})),u=()=>{t.width=window.innerWidth,t.height=window.innerHeight,i.forEach(d=>{d.x=Math.random()*t.width,d.y=Math.random()*(t.height*.75)}),l.forEach(d=>{d.x=Math.random()*t.width,d.y=Math.random()*(t.height*.75)})};u(),window.addEventListener("resize",u);const f=()=>{n.fillStyle="#0a0a1a",n.fillRect(0,0,t.width,t.height),l.forEach(d=>{d.pulsePhase+=d.pulseSpeed;const p=.08+Math.sin(d.pulsePhase)*.04;for(let g=0;g<3;g++){const y=Math.sin(d.pulsePhase*.5+g)*30,b=Math.cos(d.pulsePhase*.3+g)*30,S=p*(.4+g*.3),A=n.createRadialGradient(d.x+y,d.y+b,0,d.x+y,d.y+b,d.radius*(.7+g*.15));A.addColorStop(0,d.color+S+")"),A.addColorStop(.3,d.color+S*.6+")"),A.addColorStop(.7,d.color+S*.2+")"),A.addColorStop(1,d.color+"0)"),n.fillStyle=A,n.fillRect(0,0,t.width,t.height)}}),i.forEach(d=>{d.twinklePhase+=d.twinkleSpeed;const p=.3+Math.sin(d.twinklePhase)*.7;n.beginPath(),n.arc(d.x,d.y,d.radius,0,Math.PI*2),n.fillStyle=d.color+d.opacity*p+")",n.fill(),d.radius>1&&(n.beginPath(),n.arc(d.x,d.y,d.radius*2,0,Math.PI*2),n.fillStyle=d.color+d.opacity*p*.1+")",n.fill())}),r=requestAnimationFrame(f)};return f(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(r)}},[]),h.jsx("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"#0a0a1a"}})},Na=({icon:e,value:t,max:n,iconColor:r,isPlayer:i})=>{const s=i?"from-cyan-400/30 via-blue-400/30 to-blue-500/30":"from-pink-400/30 via-pink-500/30 to-pink-600/30";return h.jsx("div",{className:`relative p-[1px] bg-gradient-to-br ${s}`,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:h.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 px-3 py-1 flex items-center gap-2",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[h.jsx(e,{size:18,className:r}),h.jsxs("span",{className:"font-bold text-base text-white whitespace-nowrap",children:[t,n!==void 0&&h.jsxs("span",{className:"hidden xl:inline",children:[" / ",n]})]})]})})};function OF({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:f,opponentShieldsToAllocate:d,shieldsToRemove:p,shieldsToAdd:g,reallocationPhase:y,totalLocalPlayerDrones:b,totalOpponentPlayerDrones:S,getLocalPlayerId:A,getOpponentPlayerId:E,isMyTurn:T,currentPlayer:w,isMultiplayer:O,handlePlayerPass:_,handleExitGame:k,handleResetShields:M,handleConfirmShields:j,handleCancelReallocation:U,handleResetReallocation:q,handleContinueToAddPhase:L,handleConfirmReallocation:$,handleRoundStartDraw:G,optionalDiscardCount:Z,mandatoryAction:X,multiSelectState:re,AI_HAND_DEBUG_MODE:I,setShowAiHandModal:Y,onShowDebugModal:Q,onShowOpponentDrones:ve,testMode:R}){const[V,K]=C.useState(!1),ae=C.useRef(null);return C.useEffect(()=>{const me=Se=>{ae.current&&!ae.current.contains(Se.target)&&K(!1)};return document.addEventListener("mousedown",me),()=>{document.removeEventListener("mousedown",me)}},[]),h.jsxs("header",{className:"w-full flex justify-between items-start mb-2 flex-shrink-0 px-5 pt-2",children:[R&&h.jsx("div",{className:"body-font",style:{position:"absolute",top:"10px",right:"10px",padding:"8px 16px",backgroundColor:"rgba(255, 165, 0, 0.2)",border:"2px solid #ff9800",borderRadius:"8px",color:"#ffb74d",fontWeight:"bold",fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 0 20px rgba(255, 152, 0, 0.4)",backdropFilter:"blur(4px)"},children:"ðŸ§ª TESTING MODE"}),h.jsxs("div",{className:"flex flex-col gap-1.5",children:[h.jsxs("h2",{className:"text-base font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Opponent",(i==="deployment"||i==="action")&&u===E()&&h.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${E()}Passed`]&&h.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Na,{icon:Uf,value:t.energy,max:r.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!1}),h.jsx("div",{onClick:()=>I&&setTimeout(()=>Y(!0),100),className:I?"cursor-pointer":"",children:h.jsx(Na,{icon:dk,value:t.hand.length,max:r.totals.handLimit,iconColor:"text-gray-400",isPlayer:!1})}),i==="deployment"&&h.jsx(Na,{icon:l0,value:s===1?t.initialDeploymentBudget:t.deploymentBudget,iconColor:"text-purple-400",isPlayer:!1}),h.jsx("div",{onClick:()=>setTimeout(()=>ve(),100),className:"cursor-pointer hover:scale-105 transition-transform",children:h.jsx(Na,{icon:_A,value:S,max:r.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!1})})]})]}),h.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[h.jsxs("h2",{className:"text-base font-bold uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #6b7280, #9ca3af)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[oR(i),i==="allocateShields"&&h.jsxs("span",{className:"text-base font-semibold text-cyan-300 ml-2",children:["(",f," shields to assign)"]}),y==="removing"&&h.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",p," shields to remove)"]}),y==="adding"&&h.jsxs("span",{className:"text-base font-semibold text-green-300 ml-2",children:["(",g," shields to add)"]}),i==="mandatoryDiscard"&&X?.type==="discard"&&h.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",X.count," ",X.count===1?"card":"cards"," to discard)"]}),i==="optionalDiscard"&&h.jsxs("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:["(",n.totals.discardLimit-Z," ",n.totals.discardLimit-Z===1?"card":"cards"," to discard)"]})]}),h.jsx("div",{className:"flex items-center gap-3",children:i==="deployment"||i==="action"||y?h.jsxs(h.Fragment,{children:[T()?h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Your Turn"})}):h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest phase-announcement-shine animate-pulse",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(236, 72, 153, 0.5), 0 0 60px rgba(244, 114, 182, 0.3)",filter:"drop-shadow(0 0 20px rgba(236, 72, 153, 0.4))",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:O()?"Opponent's Turn":"AI Thinking"})}),T()&&!X&&!re&&!y&&h.jsx("button",{onClick:_,disabled:l[`${A()}Passed`],className:"relative p-[1px] transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:l[`${A()}Passed`]?"linear-gradient(45deg, rgba(75, 85, 99, 0.6), rgba(107, 114, 128, 0.6))":"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:l[`${A()}Passed`]?"#9ca3af":"#fca5a5"},children:"Pass"})}),y==="removing"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:U,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),h.jsx("button",{onClick:q,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),h.jsx("button",{onClick:L,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Continue"})})]}),y==="adding"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:U,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),h.jsx("button",{onClick:q,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),h.jsx("button",{onClick:$,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Initialising"})}),i==="allocateShields"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:M,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),h.jsx("button",{onClick:j,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:h.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]}),i==="optionalDiscard"&&h.jsx("button",{onClick:G,className:"btn-confirm",children:"Confirm"})]})})]}),h.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[h.jsxs("h2",{className:"text-base font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Your Resources",(i==="deployment"||i==="action")&&u===A()&&h.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&h.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Na,{icon:Uf,value:e.energy,max:n.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!0}),i==="deployment"&&h.jsx(Na,{icon:l0,value:s===1?e.initialDeploymentBudget:e.deploymentBudget,iconColor:"text-purple-400",isPlayer:!0}),h.jsx(Na,{icon:_A,value:b,max:n.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!0}),i==="allocateShields"&&h.jsx(Na,{icon:Sg,value:f,iconColor:"text-cyan-300",isPlayer:!0}),y==="removing"&&h.jsx(Na,{icon:Sg,value:p,iconColor:"text-orange-300",isPlayer:!0}),y==="adding"&&h.jsx(Na,{icon:Sg,value:g,iconColor:"text-green-300",isPlayer:!0}),h.jsxs("div",{className:"relative",ref:ae,children:[h.jsx("button",{onClick:()=>K(!V),className:"relative p-[2px] bg-gradient-to-br from-gray-500 to-gray-700",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Settings",children:h.jsxs("div",{className:"bg-slate-700 hover:bg-slate-600 p-1.5 transition-colors flex items-center gap-1",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[h.jsx(MA,{size:20,className:"text-white"}),h.jsx(Jj,{size:16,className:"text-white"})]})}),V&&h.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:[h.jsxs("button",{onClick:()=>{Q&&Q(),K(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors flex items-center gap-2 border-b border-gray-700",children:[h.jsx(MA,{size:16}),"Debug View"]}),h.jsxs("button",{onClick:()=>{k(),K(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-b-lg flex items-center gap-2",children:[h.jsx(yk,{size:16}),"Exit"]})]})]})]})]})]})}const aw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:f,gameEngine:d,turnPhase:p,isMyTurn:g,passInfo:y,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:A,hoveredTarget:E,setHoveredTarget:T,sectionRefs:w})=>{const{getEffectiveShipStats:O}=ch(),_=O(e,n);return h.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(k=>{const M=n[k];if(!M)return P("STATE_SYNC",`Lane ${k} rendering EMPTY div - no hover possible:`,{sectionName:M,sectionNameType:typeof M,sectionNameValue:JSON.stringify(M),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),h.jsx("div",{className:"bg-black/20 rounded-lg border-2 border-dashed border-gray-700",style:{width:"clamp(600px, 31.25vw, 810px)",height:"clamp(120px, 6.25vw, 162px)"}},k);const j=e.shipSections[M],U=u.some(L=>L.id===M);let q=null;if(f&&t){if(f==="removing")j.allocatedShields>0?q="can-remove":q="cannot-remove";else if(f==="adding"){const L=d.getEffectiveSectionMaxShields(M,e,n);j.allocatedShields<L?q="can-add":q="cannot-add"}}return h.jsx("div",{style:{width:"clamp(600px, 31.25vw, 810px)",height:"clamp(120px, 6.25vw, 162px)"},children:h.jsx(fo,{section:M,stats:j,effectiveStatsForDisplay:_.bySection[M],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(M):s&&s({...j,id:M,name:M},"section",t)},onAbilityClick:i,isInteractive:l||p==="action"&&t&&j.ability&&S.energy>=j.ability.cost.energy,isCardTarget:U,isInMiddleLane:k===1,isHovered:E?.type==="section"&&E?.target.name===M&&E?.isOpponent===!t,onMouseEnter:()=>!t&&T({target:{...j,name:M},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&T(null),reallocationState:q,gameEngine:d,turnPhase:p,isMyTurn:g,passInfo:y,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:A,sectionRef:L=>{if(w&&L){const $=`${t?"local":"opponent"}-${M}`;w.current[$]=L}}})},k)})})},NF=(e,t,n,r,i,s,l,u,f,d,p,g,y,b,S,A,E,T,w,O,_,k)=>h.jsx("div",{className:"flex flex-wrap gap-8 justify-center items-center",style:{minHeight:"clamp(130px, 6.77vw, 175px)",paddingTop:"2px"},children:e.map(M=>h.jsx(Bf,{drone:M,lane:n,isPlayer:t,onClick:d,onAbilityClick:p,isSelected:g&&g.id===M.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(j=>j.id===M.id),isHit:b.includes(M.id),isPotentialInterceptor:S.includes(M.id),isPotentialGuardian:A.includes(M.id),droneRefs:E,mandatoryAction:T,localPlayerState:r,isActionTarget:w.some(j=>j.id===M.id)||O.some(j=>j.id===M.id),onMouseEnter:()=>!t&&_({target:M,type:"drone",lane:n}),onMouseLeave:()=>!t&&_(null),interceptedBadge:k,enableFloatAnimation:!0},M.id))}),iw=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:f,multiSelectState:d,turnPhase:p,localPlayerState:g,opponentPlayerState:y,localPlacedSections:b,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:E,handleTokenClick:T,handleAbilityIconClick:w,selectedDrone:O,recentlyHitDrones:_,potentialInterceptors:k,potentialGuardians:M,droneRefs:j,mandatoryAction:U,setHoveredTarget:q,interceptedBadge:L})=>(ch(),h.jsx("div",{className:"flex w-full justify-between gap-8",style:{minHeight:"clamp(140px, 7.292vw, 190px)"},children:["lane1","lane2","lane3"].map($=>{const G=t?r():i(),Z=s&&l.some(I=>I.id===$&&I.owner===G)||u&&f.some(I=>I.id===$&&I.owner===G)||d&&f.some(I=>I.id===$&&I.owner===G),X=t&&(p==="deployment"||p==="action"),re=t?"bg-cyan-400/10":"bg-pink-500/10";return h.jsx("div",{onClick:I=>n(I,$,t),className:`flex-1 rounded-lg transition-all duration-200 p-2
              ${Z?"bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":re}
              ${X?"cursor-pointer hover:bg-cyan-900/20":""}
            `,children:NF(e.dronesOnBoard[$],t,$,g,y,b,S,A,E,T,w,O,d,_,k,M,j,U,l,f,q,L)},$)})}));function DF({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:f,turnPhase:d,reallocationPhase:p,shipAbilityMode:g,hoveredTarget:y,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,potentialGuardians:E,droneRefs:T,sectionRefs:w,mandatoryAction:O,gameEngine:_,getLocalPlayerId:k,getOpponentPlayerId:M,isMyTurn:j,getPlacedSectionsForEngine:U,passInfo:q,handleTargetClick:L,handleLaneClick:$,handleShipSectionClick:G,handleShipAbilityClick:Z,handleTokenClick:X,handleAbilityIconClick:re,setHoveredTarget:I,interceptedBadge:Y}){return h.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:h.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[h.jsx(aw,{player:t,isPlayer:!1,placedSections:r,onTargetClick:L,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:_,turnPhase:d,isMyTurn:j,passInfo:q,getLocalPlayerId:k,localPlayerState:e,shipAbilityMode:g,hoveredTarget:y,setHoveredTarget:I,sectionRefs:w}),h.jsx(iw,{player:t,isPlayer:!1,onLaneClick:$,getLocalPlayerId:k,getOpponentPlayerId:M,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:f,turnPhase:d,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:_,getPlacedSectionsForEngine:U,handleTokenClick:X,handleAbilityIconClick:re,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,potentialGuardians:E,droneRefs:T,mandatoryAction:O,setHoveredTarget:I,interceptedBadge:Y}),h.jsx(iw,{player:e,isPlayer:!0,onLaneClick:$,getLocalPlayerId:k,getOpponentPlayerId:M,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:f,turnPhase:d,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:_,getPlacedSectionsForEngine:U,handleTokenClick:X,handleAbilityIconClick:re,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:A,potentialGuardians:E,droneRefs:T,mandatoryAction:O,setHoveredTarget:I,interceptedBadge:Y}),h.jsx(aw,{player:e,isPlayer:!0,placedSections:n,onSectionClick:G,onAbilityClick:Z,onTargetClick:L,isInteractive:d==="allocateShields"||p,selectedCard:i,validCardTargets:s,reallocationPhase:p,gameEngine:_,turnPhase:d,isMyTurn:j,passInfo:q,getLocalPlayerId:k,localPlayerState:e,shipAbilityMode:g,hoveredTarget:y,setHoveredTarget:I,sectionRefs:w})]})})}const _F="_footer_15bg8_15",MF="_tabContainer_15bg8_21",jF="_contentContainer_15bg8_25",kF="_contentOpen_15bg8_29",IF="_contentClosed_15bg8_34",RF="_contentWrapper_15bg8_38",LF="_tabButton_15bg8_44",$F="_tabButtonActive_15bg8_48",BF="_tabButtonInactive_15bg8_52",UF="_tabIcon_15bg8_56",zF="_multiSelectOverlay_15bg8_62",HF="_multiSelectText_15bg8_66",GF="_handContainer_15bg8_72",YF="_cardPile_15bg8_76",qF="_deckCard_15bg8_80",FF="_deckCardText_15bg8_88",VF="_discardCard_15bg8_93",KF="_discardCardText_15bg8_101",WF="_pileLabel_15bg8_106",XF="_handSection_15bg8_110",QF="_handCardsContainer_15bg8_134",ZF="_handCardsWrapper_15bg8_139",JF="_handCardsWrapperGap_15bg8_143",eV="_cardWrapper_15bg8_148",tV="_droneContainer_15bg8_155",nV="_droneGrid_15bg8_159",rV="_logContainer_15bg8_170",aV="_logHeader_15bg8_174",iV="_logTitle_15bg8_178",sV="_downloadButton_15bg8_182",oV="_logTableWrapper_15bg8_187",lV="_logTable_15bg8_187",cV="_logTableHeader_15bg8_195",uV="_logTableHeaderCell_15bg8_199",dV="_logTableDebugHeader_15bg8_203",fV="_logTableRow_15bg8_207",pV="_logTableCell_15bg8_211",hV="_logTableCellBold_15bg8_215",mV="_logTableCellGray_15bg8_219",gV="_logTableCellCyan_15bg8_223",yV="_logTableCellYellow_15bg8_227",vV="_logTableCellGrayText_15bg8_231",bV="_logTableCellDebug_15bg8_235",xV="_logTableCellCenter_15bg8_239",SV="_aiDecisionButton_15bg8_243",AV="_buttonDanger_15bg8_254",CV="_buttonSuccess_15bg8_259",EV="_buttonDisabled_15bg8_264",Ee={footer:_F,tabContainer:MF,contentContainer:jF,contentOpen:kF,contentClosed:IF,contentWrapper:RF,tabButton:LF,tabButtonActive:$F,tabButtonInactive:BF,tabIcon:UF,multiSelectOverlay:zF,multiSelectText:HF,handContainer:GF,cardPile:YF,deckCard:qF,deckCardText:FF,discardCard:VF,discardCardText:KF,pileLabel:WF,handSection:XF,handCardsContainer:QF,handCardsWrapper:ZF,handCardsWrapperGap:JF,cardWrapper:eV,droneContainer:tV,droneGrid:nV,logContainer:rV,logHeader:aV,logTitle:iV,downloadButton:sV,logTableWrapper:oV,logTable:lV,logTableHeader:cV,logTableHeaderCell:uV,logTableDebugHeader:dV,logTableRow:fV,logTableCell:pV,logTableCellBold:hV,logTableCellGray:mV,logTableCellCyan:gV,logTableCellYellow:yV,logTableCellGrayText:vV,logTableCellDebug:bV,logTableCellCenter:xV,aiDecisionButton:SV,buttonDanger:AV,buttonSuccess:CV,buttonDisabled:EV};function TV({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:r,turnPhase:i,mandatoryAction:s,handleCardClick:l,getLocalPlayerId:u,isMyTurn:f,hoveredCardId:d,setHoveredCardId:p,setIsViewDiscardModalOpen:g,setIsViewDeckModalOpen:y,optionalDiscardCount:b,handleRoundStartDraw:S,checkBothPlayersHandLimitComplete:A,handleConfirmMandatoryDiscard:E,handleRoundStartDiscard:T,setConfirmationModal:w,passInfo:O,validCardTargets:_,gameEngine:k,opponentPlayerState:M}){const j=u(),U=f(),q=O[`${j}Passed`];P("HAND_VIEW","HandView render:",{gameMode:e,localPlayerId:j,turnPhase:i,isMyTurn:U,playerPassed:q,handSize:t.hand.length,energy:t.energy,passInfo:O,mandatoryAction:s});const L=225,$=12,G=6,Z=t.hand.length>G,X=G*L+(G-1)*$,re=t.hand.length;let I=0;return re>1&&Z&&(I=(X-L)/(re-1)-L),h.jsxs("div",{className:Ee.handContainer,children:[h.jsxs("div",{className:Ee.cardPile,children:[h.jsx("div",{onClick:()=>g(!0),className:Ee.discardCard,children:h.jsx("p",{className:Ee.discardCardText,children:t.discardPile.length})}),h.jsx("p",{className:Ee.pileLabel,children:"Discard Pile"})]}),h.jsx("div",{className:Ee.handSection,children:h.jsx("div",{className:Ee.handCardsContainer,style:Z?{width:`${X}px`}:{},children:h.jsx("div",{className:`${Ee.handCardsWrapper} ${Z?"":Ee.handCardsWrapperGap}`,children:t.hand.map((Y,Q)=>{const ve=d?t.hand.findIndex(Me=>Me.instanceId===d):-1,R=t.energy>=Y.cost,V=!Y.targeting||k.getValidTargets(j,null,Y,t,M).length>0,K=i==="action"&&U&&!q&&R&&V,ae=i==="optionalDiscard"&&b<n.totals.discardLimit,me=K||ae;P("CARD_PLAY",`Card ${Q}: ${Y.name}`,{instanceId:Y.instanceId,hasInstanceId:Y.instanceId!==void 0,instanceIdType:typeof Y.instanceId,id:Y.id,cost:Y.cost,targeting:Y.targeting,hasEnoughEnergy:R,hasValidTargets:V,isActionPhasePlayable:K,isOptionalDiscardPlayable:ae,finalIsPlayable:me,cardKeys:Object.keys(Y),conditions:{turnPhase:i,isMyTurn:U,playerPassed:q,energy:t.energy,cardCost:Y.cost}});let Se="",Ae={zIndex:Q};return Z&&ve!==-1&&(Q<ve?Se="transform -translate-x-12":Q>ve?Se="transform translate-x-12":(Se="",Ae.zIndex=50)),Z&&Q>0&&(Ae.marginLeft=`${I}px`),h.jsx("div",{className:`${Ee.cardWrapper} ${Se}`,style:Ae,onMouseEnter:()=>p(Y.instanceId),onMouseLeave:()=>p(null),children:h.jsx(Ai,{card:Y,isSelected:r?.instanceId===Y.instanceId,isPlayable:me,isMandatoryTarget:s?.type==="discard",onClick:s?.type==="discard"?Me=>w({type:"discard",target:Me,onConfirm:()=>E(Me),onCancel:()=>w(null),text:`Are you sure you want to discard ${Me.name}?`}):i==="optionalDiscard"?Me=>w({type:"discard",target:Me,onConfirm:()=>T(Me),onCancel:()=>w(null),text:`Are you sure you want to discard ${Me.name}?`}):l})},Y.instanceId||`${Y.id}-${Q}`)})})})}),h.jsxs("div",{className:Ee.cardPile,children:[h.jsx("div",{onClick:()=>y(!0),className:Ee.deckCard,children:h.jsx("p",{className:Ee.deckCardText,children:t.deck.length})}),h.jsx("p",{className:Ee.pileLabel,children:"Deck"})]})]})}function PV({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:f,isMyTurn:d,turn:p,passInfo:g,validCardTargets:y}){return h.jsx("div",{className:Ee.droneContainer,children:h.jsx("div",{className:Ee.droneGrid,children:t.map((b,S)=>{const E=(p===1?e.initialDeploymentBudget+e.energy:e.energy)>=b.class,T=n?.type==="Upgrade"&&y.some(w=>w.id===b.name);return h.jsx(os,{drone:b,onClick:s,isSelected:l&&l.name===b.name,isSelectable:r==="deployment"&&d()&&!g[`${f()}Passed`]&&E&&!i||T,deployedCount:e.deployedDroneCounts[b.name]||0,appliedUpgrades:e.appliedUpgrades[b.name]||[],isUpgradeTarget:T,onViewUpgrades:(w,O)=>u({droneName:w.name,upgrades:O})},S)})})})}function wV({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return h.jsxs("div",{className:Ee.logContainer,children:[h.jsxs("div",{className:Ee.logHeader,children:[h.jsx("h3",{className:Ee.logTitle,children:"Game Log"}),h.jsx("button",{onClick:t,className:Ee.downloadButton,children:"Download CSV"})]}),h.jsx("div",{className:Ee.logTableWrapper,children:h.jsxs("table",{className:Ee.logTable,children:[h.jsx("thead",{className:Ee.logTableHeader,children:h.jsxs("tr",{children:[h.jsx("th",{className:Ee.logTableHeaderCell,children:"Rnd"}),h.jsx("th",{className:Ee.logTableHeaderCell,children:"Timestamp (UTC)"}),h.jsx("th",{className:Ee.logTableHeaderCell,children:"Player"}),h.jsx("th",{className:Ee.logTableHeaderCell,children:"Action"}),h.jsx("th",{className:Ee.logTableHeaderCell,children:"Source"}),h.jsx("th",{className:Ee.logTableHeaderCell,children:"Target"}),h.jsx("th",{className:Ee.logTableHeaderCell,children:"Outcome"}),h.jsx("th",{className:Ee.logTableDebugHeader,children:"Debug Source"}),h.jsx("th",{className:Ee.logTableHeaderCell})]})}),h.jsx("tbody",{children:e.map((r,i)=>h.jsxs("tr",{className:Ee.logTableRow,children:[h.jsx("td",{className:Ee.logTableCellBold,children:r.round}),h.jsx("td",{className:Ee.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),h.jsx("td",{className:Ee.logTableCellCyan,children:r.player}),h.jsx("td",{className:Ee.logTableCellYellow,children:r.actionType}),h.jsx("td",{className:Ee.logTableCell,children:r.source}),h.jsx("td",{className:Ee.logTableCell,children:r.target}),h.jsx("td",{className:Ee.logTableCellGrayText,children:r.outcome}),h.jsx("td",{className:Ee.logTableCellDebug,children:r.debugSource}),h.jsx("td",{className:Ee.logTableCellCenter,children:r.aiDecisionContext&&h.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:Ee.aiDecisionButton,title:"Show AI Decision Logic",children:"â„¹ï¸"})})]},i)).reverse()})]})})]})}function OV({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,sortedLocalActivePool:r,gameLog:i,footerView:s,isFooterOpen:l,multiSelectState:u,selectedCard:f,turnPhase:d,mandatoryAction:p,handleFooterButtonClick:g,handleCardClick:y,cancelCardSelection:b,downloadLogAsCSV:S,getLocalPlayerId:A,isMyTurn:E,hoveredCardId:T,setHoveredCardId:w,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:_,optionalDiscardCount:k,handleRoundStartDraw:M,checkBothPlayersHandLimitComplete:j,handleToggleDroneSelection:U,selectedDrone:q,setViewUpgradesModal:L,handleConfirmMandatoryDiscard:$,handleRoundStartDiscard:G,setConfirmationModal:Z,turn:X,passInfo:re,validCardTargets:I,gameEngine:Y,opponentPlayerState:Q,setAiDecisionLogToShow:ve}){return h.jsxs("footer",{className:Ee.footer,children:[h.jsxs("div",{className:Ee.tabContainer,children:[h.jsx("button",{onClick:()=>g("hand"),className:`${Ee.tabButton} ${l&&s==="hand"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:h.jsxs("span",{className:Ee.tabIcon,children:[l&&s==="hand"&&h.jsx(ou,{size:14}),"Hand (",t.hand.length,"/",n.totals.handLimit,")"]})}),h.jsx("button",{onClick:()=>g("drones"),className:`${Ee.tabButton} ${l&&s==="drones"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:h.jsxs("span",{className:Ee.tabIcon,children:[l&&s==="drones"&&h.jsx(ou,{size:14}),"Drones"]})}),h.jsx("button",{onClick:()=>g("log"),className:`${Ee.tabButton} ${l&&s==="log"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:h.jsxs("span",{className:Ee.tabIcon,children:[l&&s==="log"&&h.jsx(ou,{size:14}),"Log (",i.length,")"]})})]}),h.jsx("div",{className:`${Ee.contentContainer} ${l?Ee.contentOpen:Ee.contentClosed}`,children:h.jsxs("div",{className:Ee.contentWrapper,children:[u&&h.jsxs("div",{className:Ee.multiSelectOverlay,children:[h.jsxs("span",{className:Ee.multiSelectText,children:[u.phase==="select_source_lane"&&"Reposition: Select a source lane",u.phase==="select_drones"&&`Select Drones (${u.selectedDrones.length} / ${u.maxSelection})`,u.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),h.jsx("button",{onClick:R=>{R.stopPropagation(),b()},className:Ee.buttonDanger,children:"Cancel"}),u.phase==="select_drones"&&h.jsx("button",{onClick:R=>{R.stopPropagation(),u.selectedDrones.length>0&&P("HAND_VIEW","Confirm drones clicked")},disabled:u.selectedDrones.length===0,className:`${Ee.buttonSuccess} ${u.selectedDrones.length===0?Ee.buttonDisabled:""}`,children:"Confirm Drones"})]}),s==="hand"&&h.jsx("div",{className:Ee.viewContent,children:h.jsx(TV,{gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:f,turnPhase:d,mandatoryAction:p,handleCardClick:y,getLocalPlayerId:A,isMyTurn:E,hoveredCardId:T,setHoveredCardId:w,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:_,optionalDiscardCount:k,handleRoundStartDraw:M,checkBothPlayersHandLimitComplete:j,handleConfirmMandatoryDiscard:$,handleRoundStartDiscard:G,setConfirmationModal:Z,passInfo:re,validCardTargets:I,gameEngine:Y,opponentPlayerState:Q})}),s==="drones"&&h.jsx("div",{className:Ee.viewContent,children:h.jsx(PV,{localPlayerState:t,sortedLocalActivePool:r,selectedCard:f,turnPhase:d,mandatoryAction:p,handleToggleDroneSelection:U,selectedDrone:q,setViewUpgradesModal:L,getLocalPlayerId:A,isMyTurn:E,turn:X,passInfo:re,validCardTargets:I})}),s==="log"&&h.jsx("div",{className:Ee.viewContent,children:h.jsx(wV,{gameLog:i,downloadLogAsCSV:S,setAiDecisionLogToShow:ve})})]})})]})}const NV=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:f})=>h.jsxs(h.Fragment,{children:[e&&h.jsx(gM,{modalData:e,onClose:()=>t(null)}),n&&h.jsx(vM,{selectionData:n,onConfirm:async(d,p)=>{await l(d,p,u()),r(null)},onCancel:()=>{r(null),f()}}),i&&h.jsx(yM,{selectionData:i,onConfirm:async(d,p)=>{await l(d,p,u()),s(null)},onCancel:()=>{s(null),f()}})]}),DV=({visible:e,start:t,end:n,lineRef:r})=>e?h.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[h.jsx("defs",{children:h.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:h.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),h.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,_V=({top:e,left:t,size:n="large"})=>{const[r,i]=C.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return C.useEffect(()=>{const u=[];for(let f=0;f<l.particleCount;f++){const d=Math.PI*2*f/l.particleCount,p=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),g=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:f,x:Math.cos(d)*p,y:Math.sin(d)*p,size:g,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),h.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>h.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},MV=()=>{const e=Math.random()>.5;return{width:`${180+Math.random()*40}%`,height:`${60+Math.random()*40}%`,gradientAngle:e?120+Math.random()*30:-60+Math.random()*30,colorIntensity:{r:4+Math.random()*10,g:8+Math.random()*16,b:24+Math.random()*20},opacity:.5+Math.random()*.4,scale:1+(Math.random()*.2-.1),position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},jV=()=>{const e=Math.random()>.5;return{position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},kV=({id:e,properties:t})=>{const n=`rgb(${t.colorIntensity.r} ${t.colorIntensity.g} ${t.colorIntensity.b})`,r=t.position.top!==void 0?{top:t.position.top,left:t.position.left}:{bottom:t.position.bottom,right:t.position.right};return h.jsx("div",{className:"absolute",style:{width:t.width,height:t.height,...r,transform:`rotate(${t.rotation}deg) scale(${t.scale})`,background:`linear-gradient(${t.gradientAngle}deg, ${n} 0%, transparent 100%)`,opacity:t.opacity,transition:"all 8s ease-in-out",willChange:"transform"}})},SM=()=>{const[e,t]=C.useState([]);return C.useEffect(()=>{const n=3+Math.floor(Math.random()*3),r=Array.from({length:n},(i,s)=>({id:s,properties:MV()}));t(r)},[]),C.useEffect(()=>{if(e.length===0)return;const n=setInterval(()=>{t(r=>{const i=Math.floor(Math.random()*r.length);return r.map((s,l)=>{if(l===i){const u=jV();return{...s,properties:{...s.properties,position:u.position,rotation:u.rotation}}}return s})})},1e4);return()=>clearInterval(n)},[e.length]),h.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{zIndex:-1},children:e.map(n=>h.jsx(kV,{id:n.id,properties:n.properties},n.id))})},IV=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const f=n!=="local";return h.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:[h.jsx(SM,{}),h.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine relative z-10",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:f?"Opponent Thinking":"AI Thinking"})]})},RV=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return h.jsx(gs,{title:"Deployment Complete",text:u,onClose:s,children:h.jsx("div",{className:"flex justify-center mt-6",children:h.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},LV=({show:e,onContinue:t})=>e?h.jsx(gs,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:h.jsx("div",{className:"flex justify-center mt-6",children:h.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,$V=(e,t)=>{const[n,r]=C.useState([]),i=C.useCallback((s,l=null,u="large")=>{P("ANIMATIONS","ðŸ”¥ [EXPLOSION] triggerExplosion called:",{targetId:s,capturedPosition:l,size:u});const f=ke.createExplosionEffect(s);let d=l;if(!d){const p=e.current[s];P("ANIMATIONS","ðŸ”¥ [EXPLOSION] Looking for drone element:",{targetId:s,found:!!p}),d=b0(p,t.current)}if(P("ANIMATIONS","ðŸ”¥ [EXPLOSION] Position calculated:",d),d){const p=`${f.timestamp}-${Math.random()}`;P("ANIMATIONS","ðŸ”¥ [EXPLOSION] Adding explosion to state:",{explosionId:p,top:d.y,left:d.x,size:u}),r(g=>[...g,{id:p,top:d.y,left:d.x,size:u}]),setTimeout(()=>{r(g=>g.filter(y=>y.id!==p))},f.duration)}else console.warn("ðŸ”¥ [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class BV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_REVEAL:{duration:1e3,type:"CARD_REVEAL_EFFECT",config:{}},SHIP_ABILITY_REVEAL:{duration:1e3,type:"SHIP_ABILITY_REVEAL_EFFECT",config:{}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},PASS_NOTIFICATION:{duration:1e3,type:"PASS_NOTIFICATION_EFFECT",config:{}},PHASE_ANNOUNCEMENT:{duration:1500,type:"PHASE_ANNOUNCEMENT_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{revealAt:.7}},TELEPORT_OUT:{duration:600,type:"TELEPORT_EFFECT",config:{}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}},HEAL_EFFECT:{duration:1400,type:"HEAL_EFFECT",config:{}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t,n="unknown"){const r=this.gameStateManager?.getState()?.gameMode;if(P("ANIMATIONS","ðŸŽ¬ [EXECUTE] AnimationManager.executeAnimations() START:",{source:n,gameMode:r,effectCount:t?.length||0,effects:t?.map(i=>i.animationName)}),t.forEach((i,s)=>{P("ANIMATIONS",`  ðŸŽ¬ [EXECUTE] Animation ${s+1}/${t.length}: ${i.animationName}`,{type:this.animations[i.animationName]?.type,duration:this.animations[i.animationName]?.duration})}),!t||t.length===0){P("ANIMATIONS","â­ï¸ [EXECUTE] No effects to execute, returning early");return}P("ANIMATIONS",`ðŸš¨ [EXECUTE] PLAYING ${t.length} ANIMATION(S) - Source: ${n} - Mode: ${r}`),this.setBlocking(!0);try{const i=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED","HEAL_EFFECT"];let s=0;for(;s<t.length;){const l=t[s];if(i.includes(l.animationName)){const u=[];for(;s<t.length&&i.includes(t[s].animationName);)u.push(t[s]),s++;P("ANIMATIONS","ðŸŽ¬ [ANIMATION DEBUG] Playing damage effects in parallel:",u.map(f=>f.animationName)),await Promise.all(u.map(async f=>{const d=this.animations[f.animationName];if(!d){console.warn(`âŒ [ANIMATION DEBUG] Unknown animation: ${f.animationName}`);return}const p=this.visualHandlers.get(d.type);if(!p){console.warn(`âŒ [ANIMATION DEBUG] No visual handler for: ${d.type}`);return}return new Promise(g=>{p({...f.payload,config:d.config,onComplete:g}),setTimeout(g,d.duration)})})),P("ANIMATIONS","ðŸŽ¬ [ANIMATION DEBUG] All damage effects completed")}else{P("ANIMATIONS","ðŸŽ¬ [ANIMATION DEBUG] Processing sequential effect:",l.animationName);const u=this.animations[l.animationName];if(!u){console.warn(`âŒ [ANIMATION DEBUG] Unknown animation: ${l.animationName}`),s++;continue}const f=this.visualHandlers.get(u.type);if(!f){console.warn(`âŒ [ANIMATION DEBUG] No visual handler for: ${u.type}`),s++;continue}await new Promise(d=>{f({...l.payload,config:u.config,onComplete:d}),setTimeout(d,u.duration)}),P("ANIMATIONS","ðŸŽ¬ [ANIMATION DEBUG] Animation completed:",l.animationName),s++}}}finally{await new Promise(i=>setTimeout(i,200)),this.setBlocking(!1),P("ANIMATIONS","ðŸŽ¬ [AI ANIMATION DEBUG] All animations completed, blocking released")}}setBlocking(t){P("ANIMATIONS",`ðŸ”’ [ANIMATION BLOCKING] Setting blocking to: ${t}`),this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const UV=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,s]=C.useState(0);return C.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,f=150;setTimeout(()=>s(n),10),setTimeout(()=>s(0),l+u),setTimeout(()=>{r?.()},l+u+f)},[n,r,e]),e?h.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},zV=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[s,l]=C.useState(!1);if(C.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!s||!t||!n)return null;switch(e){case"LASER_BLAST":return h.jsx(HV,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return h.jsx(GV,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return h.jsx(YV,{endPos:n,duration:r});default:return null}},HV=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return h.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},GV=({startPos:e,duration:t})=>h.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),YV=({endPos:e,duration:t})=>h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),h.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function qV(e,t,n,r,i,s,l,u,f,d,p,g,y,b,S,A,E,T,w){C.useEffect(()=>{r(),i();const O=new BV(e),_=(M,j,U,q)=>{if(q==="drone")return t.current[U]||null;if(q==="section"){const L=e.getLocalPlayerId(),$=M===L?"local":"opponent";return n.current[`${$}-${U}`]||null}return null};O.registerVisualHandler("DRONE_FLY",M=>{const{droneId:j,sourcePlayer:U,sourceLane:q,targetId:L,targetPlayer:$,targetLane:G,targetType:Z,config:X,attackValue:re,onComplete:I}=M;if(X.isReturn){I?.();return}P("ANIMATIONS","ðŸ”« [LASER DEBUG] DRONE_FLY handler called:",{droneId:j,sourcePlayer:U,sourceLane:q,targetId:L,targetPlayer:$,targetType:Z,attackValue:re,config:X});const Y=_(U,q,j,"drone"),Q=_($,G,L,Z);if(!Y||!Q){console.warn("âš ï¸ [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!Y,hasTarget:!!Q,sourcePlayer:U,sourceLane:q,targetPlayer:$,targetType:Z,targetId:L}),I?.();return}P("ANIMATIONS","âœ… [LASER DEBUG] Creating laser effect with attack:",re);const ve=l(Y,u.current),R=l(Q,u.current),V=`laser-${j}-${Date.now()}`;E(K=>[...K,{id:V,startPos:ve,endPos:R,attackValue:re||1,duration:500,onComplete:()=>{E(ae=>ae.filter(me=>me.id!==V)),I?.()}}])}),O.registerVisualHandler("EXPLOSION_EFFECT",M=>{const{targetId:j,targetPlayer:U,targetLane:q,targetType:L,config:$,onComplete:G}=M,Z=_(U,q,j,L);if(Z){const X=l(Z,u.current);s(j,X,$?.size||"large")}else console.warn("âš ï¸ [EXPLOSION DEBUG] Target element not found:",{targetId:j,targetPlayer:U,targetLane:q,targetType:L});G?.()}),O.registerVisualHandler("FLASH_EFFECT",M=>{const{targetId:j,targetPlayer:U,targetLane:q,targetType:L,config:$,onComplete:G}=M,Z=_(U,q,j,L);if(!Z){console.warn("âš ï¸ [FLASH DEBUG] Target element not found:",{targetId:j,targetPlayer:U,targetLane:q,targetType:L}),G?.();return}const X=Z.getBoundingClientRect(),re=`flash-${j}-${Date.now()}`;p(I=>[...I,{id:re,position:{left:X.left,top:X.top,width:X.width,height:X.height},color:$.color,intensity:$.intensity,onComplete:()=>{p(Y=>Y.filter(Q=>Q.id!==re)),G?.()}}])}),O.registerVisualHandler("HEAL_EFFECT",M=>{const{targetId:j,targetPlayer:U,targetLane:q,targetType:L,healAmount:$,onComplete:G}=M;P("ANIMATIONS","ðŸ’š [HEAL DEBUG] HEAL_EFFECT handler called with payload:",{targetId:j,targetPlayer:U,targetLane:q,targetType:L,healAmount:$,rawPayload:M});const Z=_(U,q,j,L);if(!Z){console.warn("âš ï¸ [HEAL DEBUG] Target element not found:",{targetId:j,targetPlayer:U,targetLane:q,targetType:L,droneRefsKeys:Object.keys(t.current),sectionRefsKeys:Object.keys(n.current)}),G?.();return}const X=Z.getBoundingClientRect(),re=`heal-${j}-${Date.now()}`;g(I=>[...I,{id:re,position:{left:X.left,top:X.top,width:X.width,height:X.height},healAmount:$,onComplete:()=>{g(Y=>Y.filter(Q=>Q.id!==re)),G?.()}}]),P("ANIMATIONS","âœ… [HEAL DEBUG] Heal effect created:",re)}),O.registerVisualHandler("CARD_VISUAL_EFFECT",M=>{const{visualType:j,sourcePlayer:U,targetId:q,targetPlayer:L,targetLane:$,targetType:G,duration:Z,onComplete:X}=M,re=u.current?.getBoundingClientRect();if(!re){X?.();return}const I=e.getLocalPlayerId(),Y=U===I?re.bottom-100:re.top+100,Q=re.left+re.width/2;let ve;if(G==="lane")if(L==="center")ve={x:re.left+re.width/2,y:re.top+re.height/2};else{const V=U===I?L:L===I?I:L,Se=(e.getState()[V]?.dronesOnBoard||{})[$]||[];if(Se.length>0){const Ae=Se[0],Me=t.current[Ae.id];if(Me){const Ne=Me.getBoundingClientRect();ve={x:Ne.left+Ne.width/2,y:Ne.top+Ne.height/2}}else ve={x:re.left+re.width/2,y:re.top+re.height/2}}else{const Ae=$==="lane1"?0:$==="lane2"?1:2,Me=V===I?re.bottom-200:re.top+200;ve={x:re.left+re.width/4*(Ae+1),y:Me}}}else{const V=_(L,$,q,G);if(!V){console.warn("âš ï¸ [CARD VISUAL DEBUG] Target element not found:",{targetId:q,targetPlayer:L,targetLane:$,targetType:G}),X?.();return}const K=V.getBoundingClientRect();ve={x:K.left+K.width/2,y:K.top+K.height/2}}const R=`cardvisual-${Date.now()}`;y(V=>[...V,{id:R,visualType:j||"LASER_BLAST",startPos:{x:Q,y:Y},endPos:ve,duration:Z||800,onComplete:()=>{y(K=>K.filter(ae=>ae.id!==R)),X?.()}}])}),O.registerVisualHandler("CARD_REVEAL_EFFECT",M=>{const{cardData:j,actingPlayerId:U,onComplete:q}=M;P("ANIMATIONS","ðŸƒ [CARD REVEAL DEBUG] CARD_REVEAL_EFFECT handler called:",{cardName:j?.name,actingPlayerId:U});const L=e.getLocalPlayerId(),$=U===L,G=`cardreveal-${Date.now()}`;b(Z=>[...Z,{id:G,card:j,label:$?"You Played":"Opponent Played",onComplete:()=>{b(X=>X.filter(re=>re.id!==G)),q?.()}}])}),O.registerVisualHandler("SHIP_ABILITY_REVEAL_EFFECT",M=>{const{abilityName:j,actingPlayerId:U,onComplete:q}=M;P("ANIMATIONS","ðŸš€ [SHIP ABILITY REVEAL DEBUG] SHIP_ABILITY_REVEAL_EFFECT handler called:",{abilityName:j,actingPlayerId:U});const L=e.getLocalPlayerId();if(U===L)q?.();else{const G=`shipability-${Date.now()}`;S(Z=>[...Z,{id:G,abilityName:j,label:"Opponent Used",onComplete:()=>{S(X=>X.filter(re=>re.id!==G)),q?.()}}])}}),O.registerVisualHandler("PHASE_ANNOUNCEMENT_EFFECT",async M=>{const{phaseText:j,phaseName:U,firstPlayerId:q,onComplete:L}=M;await new Promise(Z=>setTimeout(Z,300));let $=null;if(q){const Z=e.getLocalPlayerId();$=q===Z?"You Go First":"Opponent Goes First"}P("ANIMATIONS","ðŸ“¢ [PHASE ANNOUNCEMENT DEBUG] PHASE_ANNOUNCEMENT_EFFECT handler called:",{phaseName:U,phaseText:j,firstPlayerId:q,localPlayerId:e.getLocalPlayerId(),calculatedSubtitle:$});const G=`phaseannouncement-${Date.now()}`;A(Z=>[...Z,{id:G,phaseText:j,subtitle:$,onComplete:()=>{A(X=>X.filter(re=>re.id!==G)),L?.()}}])}),O.registerVisualHandler("PASS_NOTIFICATION_EFFECT",M=>{const{passingPlayerId:j,onComplete:U}=M;P("ANIMATIONS","â¸ï¸ [PASS NOTIFICATION DEBUG] PASS_NOTIFICATION_EFFECT handler called:",{passingPlayerId:j});const q=e.getLocalPlayerId(),L=j===q,$=`passnotif-${Date.now()}`;w(G=>[...G,{id:$,label:L?"You Passed":"Opponent Passed",onComplete:()=>{w(Z=>Z.filter(X=>X.id!==$)),U?.()}}])}),O.registerVisualHandler("SHAKE_EFFECT",M=>{const{targetId:j,config:U,onComplete:q}=M,L=t.current[j];L?(L.classList.add("animate-shake-damage"),setTimeout(()=>{L.classList.remove("animate-shake-damage"),q?.()},U?.duration||500)):q?.()}),O.registerVisualHandler("TELEPORT_EFFECT",M=>{const{targetId:j,laneId:U,playerId:q,onComplete:L}=M;P("ANIMATIONS","âœ¨ [TELEPORT DEBUG] TELEPORT_EFFECT handler called:",{targetId:j,laneId:U,playerId:q});const $=t.current[j];if(!$){console.warn("âš ï¸ [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",j),L?.();return}const G=l($,u.current);P("ANIMATIONS","âœ¨ [TELEPORT DEBUG] Using exact drone placeholder position:",G);const Z=e.getLocalPlayerId(),re=q===Z?"#00ffff":"#ec4899",I=`teleport-${j}-${Date.now()}`;T(Y=>[...Y,{id:I,top:G.y,left:G.x,color:re,duration:600,onComplete:()=>{T(Q=>Q.filter(ve=>ve.id!==I)),L?.()}}])});const k=e.subscribe(M=>{M.type==="animationStateChange"&&d(M.payload.blocking)});return e.actionProcessor.setAnimationManager(O),k},[r,i,e,s,t,n,l,u,f,d,p,g,y,b,A,E,T,w])}const FV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=C.useState(t),[u,f]=C.useState([]),d=C.useRef(),p=C.useRef(Date.now());return C.useEffect(()=>{const g=r.duration||800,y=()=>{const b=Date.now()-p.current,S=Math.min(b/g,1),A=S<.5?2*S*S:-1+(4-2*S)*S,E=t.x+(n.x-t.x)*A,T=t.y+(n.y-t.y)*A;l({x:E,y:T}),r.trail&&f(w=>[...w.slice(-8),{id:Date.now(),x:E,y:T}]),S<1?d.current=requestAnimationFrame(y):i?.()};return d.current=requestAnimationFrame(y),()=>{d.current&&cancelAnimationFrame(d.current)}},[t,n,r,i]),h.jsxs(h.Fragment,{children:[u.map((g,y)=>h.jsx("div",{style:{position:"fixed",left:g.x+35,top:g.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+y*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},g.id)),h.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:h.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},VV=({position:e,healAmount:t,onComplete:n})=>{const[r,i]=C.useState([]);if(C.useEffect(()=>{if(!e||!t){n?.();return}const u=t===1?"small":t<=3?"medium":"large",f={small:{particleCount:12,spread:40,glowSize:30,duration:1e3},medium:{particleCount:18,spread:60,glowSize:50,duration:1200},large:{particleCount:24,spread:80,glowSize:70,duration:1400}}[u],d=[];for(let g=0;g<f.particleCount;g++){const y=Math.PI*2*g/f.particleCount+(Math.random()-.5)*.5,b=f.spread*(.5+Math.random()*.5);d.push({id:g,x:Math.cos(y)*b,y:Math.sin(y)*b,delay:g/f.particleCount*300,floatDistance:40+Math.random()*30,symbol:Math.random()>.3?"+":"âœ¨"})}i(d);const p=setTimeout(()=>{n?.()},f.duration);return()=>clearTimeout(p)},[t,n,e]),!e||!t)return null;const s=t===1?"small":t<=3?"medium":"large",l={small:{particleCount:12,spread:40,glowSize:30,duration:1e3},medium:{particleCount:18,spread:60,glowSize:50,duration:1200},large:{particleCount:24,spread:80,glowSize:70,duration:1400}}[s];return h.jsxs("div",{style:{position:"fixed",left:`${e.left+e.width/2}px`,top:`${e.top+e.height/2}px`,width:`${l.spread*2}px`,height:`${l.spread*2}px`,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9998},children:[h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:`${l.glowSize}px`,height:`${l.glowSize}px`,transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(34, 197, 94, 0.8) 0%, rgba(34, 197, 94, 0.4) 50%, rgba(34, 197, 94, 0) 70%)",animation:`healPulse ${l.duration}ms ease-out forwards`,borderRadius:"50%"}}),r.map(u=>h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",color:"#22c55e",fontSize:s==="large"?"18px":s==="medium"?"16px":"14px",fontWeight:"bold",textShadow:"0 0 4px rgba(34, 197, 94, 0.8)",display:"flex",alignItems:"center",justifyContent:"center","--start-x":`${u.x}px`,"--start-y":`${u.y}px`,"--float-distance":`${u.floatDistance}px`,animation:`healFloat ${l.duration}ms ease-out ${u.delay}ms forwards`,opacity:0},children:u.symbol},u.id)),h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:`${l.glowSize*1.5}px`,height:`${l.glowSize*1.5}px`,transform:"translate(-50%, -50%)",border:"2px solid rgba(34, 197, 94, 0.6)",borderRadius:"50%",animation:`healPulse ${l.duration}ms ease-out 100ms forwards`,boxShadow:"0 0 15px rgba(34, 197, 94, 0.4)"}}),s!=="small"&&r.slice(0,Math.floor(l.particleCount/3)).map((u,f)=>h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"8px",height:"8px",backgroundColor:"#22c55e",borderRadius:"50%",boxShadow:"0 0 8px rgba(34, 197, 94, 0.8)","--start-x":`${u.x*.7}px`,"--start-y":`${u.y*.7}px`,"--float-distance":`${u.floatDistance*.8}px`,animation:`healFloat ${l.duration}ms ease-out ${u.delay+150}ms forwards, healSparkle ${l.duration}ms ease-in-out ${u.delay+150}ms infinite`,opacity:0}},`sparkle-${f}`))]})},KV=({card:e,label:t,onComplete:n})=>{const[r,i]=C.useState(!1);return C.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),h.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),h.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[h.jsx("h2",{className:`
            text-4xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
            card-reveal-label
            ${r?"card-reveal-label-show":""}
          `,children:t}),h.jsx("div",{className:`
            transform scale-110 card-reveal-card
            ${r?"":"card-reveal-dissolve"}
          `,children:h.jsx(Ai,{card:e,isPlayable:!1})}),h.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            card-reveal-scanline
            ${r?"card-reveal-scanline-active":""}
          `})]})]})},WV=({abilityName:e,label:t,onComplete:n})=>{const[r,i]=C.useState(!1);return C.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),h.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),h.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[h.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
          `,children:t}),h.jsx("div",{className:`
            px-8 py-4 rounded-xl
            bg-gradient-to-r from-purple-900/80 via-pink-900/80 to-purple-900/80
            border-2 border-purple-400
            shadow-[0_0_30px_rgba(168,85,247,0.6)]
            transition-all duration-300
            ${r?"scale-100":"scale-90"}
          `,children:h.jsx("p",{className:"text-3xl font-bold text-white text-center",children:e})}),h.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            transition-all duration-1000
            ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-full"}
          `})]})]})},XV=({label:e,onComplete:t})=>{const[n,r]=C.useState(!1);return C.useEffect(()=>{requestAnimationFrame(()=>{r(!0)});const i=setTimeout(()=>{r(!1);const s=setTimeout(()=>{t?.()},300);return()=>clearTimeout(s)},1e3);return()=>clearTimeout(i)},[t]),h.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${n?"opacity-100":"opacity-0"}
      `,children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),h.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${n?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[h.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-red-300 via-red-400 to-red-300
            animate-pulse
            drop-shadow-[0_0_20px_rgba(239,68,68,0.8)]
          `,children:e}),h.jsx("div",{className:`
            absolute top-1/2 left-0 w-full h-1 pointer-events-none
            ${n?"animate-horizontalScan":""}
          `,style:{background:"linear-gradient(to right, rgba(239, 68, 68, 0) 0%, rgba(239, 68, 68, 0.8) 50%, rgba(239, 68, 68, 0) 100%)",boxShadow:"0 0 10px rgba(239, 68, 68, 0.8), 0 0 20px rgba(239, 68, 68, 0.4)",transform:"translateY(-50%)"}})]}),h.jsx("style",{children:`
        @keyframes horizontalScan {
          0% {
            transform: translateX(-100%) translateY(-50%);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          90% {
            opacity: 1;
          }
          100% {
            transform: translateX(100%) translateY(-50%);
            opacity: 0;
          }
        }

        .animate-horizontalScan {
          animation: horizontalScan 800ms ease-in-out;
        }
      `})]})},QV=({phaseText:e,subtitle:t,onComplete:n})=>{const[r,i]=C.useState(!1);return C.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1500);return()=>clearTimeout(s)},[n]),h.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),h.jsxs("div",{className:`
          relative flex flex-col items-center
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[h.jsx("h1",{className:`
            text-6xl font-orbitron font-black uppercase tracking-widest text-center
            phase-announcement-text
            ${r?"phase-announcement-shine":""}
          `,style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:e}),t&&h.jsx("p",{className:`
              text-2xl font-orbitron font-medium uppercase tracking-wider text-center
              text-cyan-300/80 mt-4
              transition-all duration-300
              ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
            `,children:t}),h.jsx("div",{className:`
            mt-8 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent
            transition-all duration-500
            ${r?"w-96 opacity-100":"w-0 opacity-0"}
          `}),h.jsx("div",{className:`
            absolute inset-0 pointer-events-none overflow-hidden
          `,children:h.jsx("div",{className:`
              absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent
              phase-announcement-scanline
              ${r?"phase-announcement-scanline-active":""}
            `})})]})]})},ZV=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=C.useState(0);C.useEffect(()=>{setTimeout(()=>l(1),50);const y=r*.7;setTimeout(()=>l(0),y);const b=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(b)}},[r,i]);const u=t.x-e.x,f=t.y-e.y,d=Math.sqrt(u*u+f*f),p=Math.atan2(f,u)*(180/Math.PI),g=Math.max(3,2+n*1.5);return h.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${d}px`,height:`${g}px`,transformOrigin:"0 50%",transform:`rotate(${p}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[h.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${g*2}px rgba(255, 0, 0, 0.8), 0 0 ${g*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),h.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},JV=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=C.useState([]);return C.useEffect(()=>{const u=[];for(let p=0;p<16;p++){const g=Math.PI*2*p/16;u.push({id:p,angle:g,delay:p/16*200})}l(u);const d=setTimeout(()=>{i?.()},n);return()=>clearTimeout(d)},[n,i]),h.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),h.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},sw=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:f,endGame:d,processAction:p,gameStateManager:g,p2pManager:y}=Si(),{getEffectiveStats:b,getEffectiveShipStats:S,gameDataService:A}=ch(),E=fR.features.aiHandDebug,[T,w]=C.useState(!1),[O,_]=C.useState(!1),[k,M]=C.useState([]),[j,U]=C.useState([]),[q,L]=C.useState([]),[$,G]=C.useState([]),[Z,X]=C.useState([]),[re,I]=C.useState([]),[Y,Q]=C.useState([]),[ve,R]=C.useState([]),[V,K]=C.useState([]),[ae,me]=C.useState([]),[Se,Ae]=C.useState(!1),[Me,Ne]=C.useState(null),[xe,$e]=C.useState(null),[He,ye]=C.useState(null),[vt,Xe]=C.useState(null),[Yt,Bt]=C.useState(!1),[Et,xa]=C.useState(!1),[Dt,Qn]=C.useState(null),[Sa,ys]=C.useState(!1),[La,fr]=C.useState(!1),[wi,Aa]=C.useState(!1),[En,pr]=C.useState(!1),[Ie,jn]=C.useState(null),[Hl,vs]=C.useState(null),[Oi,Ni]=C.useState(null),[Zn,B]=C.useState(null),[oe,he]=C.useState([]),[ce,ge]=C.useState([]),[be,Re]=C.useState(!1),[kn,Tt]=C.useState(null),[Pt,nt]=C.useState(null),[lt,qt]=C.useState(null),[Gn,In]=C.useState("drones"),[Ft,pn]=C.useState(!0),[Di,Hu]=C.useState([]),[bs,Gu]=C.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[uh,Po]=C.useState({}),[wt,kr]=C.useState(null),[Ir,$a]=C.useState([]),[hn,bt]=C.useState(null),[Ba,aa]=C.useState(null),[Ut,hr]=C.useState(null),[Ua,wo]=C.useState([]),[_i,Rr]=C.useState(null),[ia,Ca]=C.useState(null),[Ze,Jn]=C.useState(null),[Yu,za]=C.useState(null),[Gl,Oo]=C.useState(null),[dh,Yl]=C.useState(null),[zt,Ha]=C.useState(null),[fh,xs]=C.useState(!1),[ql,Lr]=C.useState(null),[No,Tn]=C.useState(null),[$r,Do]=C.useState(null),[Ss,mr]=C.useState(0),[_o,As]=C.useState(0),[Ga,qu]=C.useState(null),[Fu,Fl]=C.useState(null),[Vu,Tx]=C.useState(null),[Vl,Cs]=C.useState(null),[Ku,Wu]=C.useState(null),[Ya,qa]=C.useState(0),Es=C.useRef(null),Fa=C.useRef({}),Kl=C.useRef({}),gr=C.useRef(null),Pn=C.useRef(!1),Ts=C.useRef(null),{explosions:Ps,triggerExplosion:sa}=$V(Fa,gr);qV(g,Fa,Kl,s,l,sa,b0,gr,M,Ae,U,L,G,X,I,Q,R,K,me),C.useEffect(()=>{Gf.initialize(g,g.actionProcessor,()=>e.gameMode!=="local",Pr),P("PHASE_TRANSITIONS","ðŸ”§ GameFlowManager initialized")},[]),C.useEffect(()=>{if(e.gameMode==="guest")return;const z=pe=>{const{type:ue,phase:Ce,playerId:Be,data:Ye}=pe;if(P("PHASE_TRANSITIONS",`ðŸ”” App.jsx received PhaseManager event: ${ue}`,{phase:Ce,playerId:Be}),ue==="bothPlayersComplete"){const{phase:ct}=pe;P("PHASE_TRANSITIONS",`ðŸŽ¯ Both players completed phase: ${ct}`),Dt===ct&&(P("PHASE_TRANSITIONS",`âœ… Clearing waiting overlay immediately for completed phase: ${ct}`),Qn(null))}if(ue==="phaseTransition"){const{newPhase:ct,previousPhase:mn,firstPlayerResult:Ro}=pe;P("PHASE_TRANSITIONS",`ðŸ”„ App.jsx handling phase transition: ${mn} â†’ ${ct}`),P("PHASE_TRANSITIONS",`ðŸ” Waiting overlay check: waitingForPlayerPhase="${Dt}", previousPhase="${mn}", match=${Dt===mn}`),Dt===mn?(P("PHASE_TRANSITIONS",`âœ… Clearing waiting overlay for phase: ${mn}`),Qn(null)):Dt&&P("PHASE_TRANSITIONS",`âš ï¸ Waiting overlay NOT cleared: waiting for "${Dt}" but transition is from "${mn}"`),ct==="deploymentComplete"&&(P("PHASE_TRANSITIONS","ðŸŽ¯ Deployment complete phase started, showing modal"),Bt(!0))}},te=Gf.subscribe(z);return()=>{te()}},[i,n,Ne,Dt,e.gameMode]);const{turnPhase:Qe,turn:oa,currentPlayer:Va,firstPlayerOfRound:ws,firstPasserOfPreviousRound:Wl,firstPlayerOverride:ph,passInfo:ot,winner:rn,unplacedSections:Xl,shieldsToAllocate:Os,opponentShieldsToAllocate:hh,gameLog:Ns,placedSections:Xu,testMode:Ds}=e,[Ql,mh]=C.useState(Va),gh=C.useRef(ot),yh=C.useRef(Qe),vh=C.useRef(rn);C.useEffect(()=>{gh.current=ot},[ot]),C.useEffect(()=>{yh.current=Qe},[Qe]),C.useEffect(()=>{vh.current=rn},[rn]);const je=s(),Je=l(),_s=u(),Mo=f();if(!je||!Je)return h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:h.jsx("div",{children:"Initializing game board..."})});C.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]);const Qu=C.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);C.useEffect(()=>{if(!i())return;const z=pe=>{if(P("MULTIPLAYER","ðŸ”¥ P2P Event received in App:",pe),pe.type==="PHASE_COMPLETED"){const{phase:ue}=pe.data||pe;P("MULTIPLAYER",`ðŸ”¥ Opponent completed phase: ${ue}`)}};return y.subscribe(z)},[i,y]);const jo=je?S(je,_s):null,Zl=Je?S(Je,Mo):null,Zu=C.useMemo(()=>je?Object.values(je.dronesOnBoard).flat().length:0,[je?.dronesOnBoard]),Ju=C.useMemo(()=>Je?Object.values(Je.dronesOnBoard).flat().length:0,[Je?.dronesOnBoard]),bh=C.useMemo(()=>e.commitments?.droneSelection?.[r()]?.drones||[],[e.commitments?.droneSelection,r]),xh=C.useMemo(()=>[...je.activeDronePool].sort((z,te)=>z.class!==te.class?z.class-te.class:z.name.localeCompare(te.name)),[je.activeDronePool]);C.useMemo(()=>je?Object.keys(je.shipSections).some(z=>je.shipSections[z].allocatedShields<A.getEffectiveSectionMaxShields(z,je,_s)):!1,[je.shipSections,_s,A]);const Jl=["commitment","destroyDrone","addShield","resetShields"],tt=C.useCallback(async(z,te)=>{if(e.gameMode==="guest"){if(Jl.includes(z))return P("MULTIPLAYER","ðŸ”’ [GUEST HOST-ONLY] Sending action to host (no local processing):",z),y.sendActionToHost(z,te),{success:!0,hostProcessing:!0};P("MULTIPLAYER","ðŸ”® [GUEST OPTIMISTIC] Processing action locally and sending to host:",z),g.trackOptimisticAction(z,te),P("ANIMATIONS","ðŸ”® [GUEST OPTIMISTIC] Tracked action for deduplication:",{type:z,totalTracked:g.optimisticActions?.length||0}),P("ANIMATIONS","ðŸŽ¬ [GUEST OPTIMISTIC] About to process action locally (will generate animations)");const ue=await p(z,te);return P("ANIMATIONS","âœ… [GUEST OPTIMISTIC] Local processing complete (animations should have played)"),y.sendActionToHost(z,te),ue}return await p(z,te)},[e.gameMode,p,y,g]);C.useCallback(z=>{if(P("MULTIPLAYER",`ðŸ”¥ sendPhaseCompletion called for phase: ${z}`),i()){const te={type:"PHASE_COMPLETED",data:{phase:z}};P("MULTIPLAYER","ðŸ”¥ Sending phase completion message:",te),y.sendData(te),P("MULTIPLAYER",`ðŸ”¥ Sent phase completion: ${z}`)}else P("MULTIPLAYER","ðŸ”¥ Not multiplayer, skipping network send")},[i,y]),C.useCallback(async()=>{Pt&&!Pt.card.effect.goAgain?await tt("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):Pt&&Pt.card.effect.goAgain&&!rn&&await tt("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),nt(null)},[p,n,r,Pt,rn]);const Sh=C.useCallback(async()=>{await tt("resetShields",{playerId:n()})},[tt,n]),Ah=C.useCallback(()=>{pr(!0)},[]),ed=C.useCallback(async()=>{P("COMMITMENTS","ðŸ handleConfirmShields called");const z=await tt("commitment",{playerId:n(),phase:"allocateShields",actionData:{committed:!0}});P("COMMITMENTS","ðŸ Shield allocation commitment result:",{hasData:!!z.data,bothPlayersComplete:z.data?.bothPlayersComplete,fullResult:z}),((e.commitments||{}).allocateShields||{})[r()]?.completed?P("COMMITMENTS","âœ… Both players complete, no waiting overlay"):(P("COMMITMENTS","âœ‹ Opponent not committed yet, showing waiting overlay"),Qn("allocateShields"))},[tt,n,e.commitments,r]);C.useEffect(()=>{const{validAbilityTargets:z,validCardTargets:te}=ke.calculateAllValidTargets(wt,hn,Ze,Ut,je,Je);$a(z),wo(te),wt&&(hr(null),bt(null))},[wt,hn,Ut,je,Je,Ze]);const Ms=()=>{wt&&(kr(null),jn(null))},Yn=()=>{hr(null),Jn(null)},er=()=>{Ie&&jn(null),wt&&kr(null),hn&&bt(null),(Ut||Ze)&&(hr(null),Jn(null)),$r&&Ka(),ia&&Ca(null),Ba&&aa(null),_i&&Rr(null),xe&&$e(null)},ko=C.useCallback(async z=>{if(Pn.current){console.warn("Attack already in progress. Aborting duplicate call.");return}Pn.current=!0;try{await new Promise(pe=>setTimeout(pe,250));const te=await tt("attack",{attackDetails:z});if(te?.needsInterceptionDecision){P("COMBAT","ðŸ›¡ï¸ [APP] Interception decision needed, showing modal..."),B(te.interceptionData),Pn.current=!1;return}}catch(te){console.error("Error in resolveAttack:",te)}finally{Pn.current=!1}},[sa,p,n,r]),td=C.useCallback(async(z,te,pe)=>{try{const ue=await tt("ability",{droneId:te.id,abilityIndex:te.abilities.findIndex(Ce=>Ce.name===z.name),targetId:pe?.id||null});Ms()}catch(ue){console.error("Error in resolveAbility:",ue),Ms()}},[p,n]),Ch=C.useCallback(async(z,te,pe)=>{const ue=await tt("shipAbility",{ability:z,sectionName:te,targetId:pe?.id||null,playerId:n()});if(ue.mandatoryAction){Ha(ue.mandatoryAction),In("hand"),pn(!0),bt(null),aa(null);return}if(ue.requiresShieldReallocation){bt(null),aa(null);return}return bt(null),aa(null),ue},[p,n]),ec=C.useCallback(async(z,te,pe,ue=null)=>{if(pe===r()){let Be="",Ye="";if(te)if(te.name){if(Be=te.name,te.id&&te.owner){const ct=te.owner===n()?je:Je;for(const[mn,Ro]of Object.entries(ct.dronesOnBoard))if(Ro.some(la=>la.id===te.id)){Ye=mn.replace("lane","Lane ");break}}}else te.id.startsWith("lane")?(Be=`Lane ${te.id.slice(-1)}`,Ye=`Lane ${te.id.slice(-1)}`):Be=te.id.replace(/([A-Z])/g," $1").replace(/^./,ct=>ct.toUpperCase());nt({card:z,targetName:Be,targetLane:Ye})}const Ce=await tt("cardPlay",{card:z,targetId:te?.id||null,playerId:pe});if(Ce.needsCardSelection){if(Ce.needsCardSelection.type==="single_move"||Ce.needsCardSelection.type==="multi_move"){Jn({card:Ce.needsCardSelection.card,phase:Ce.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}Tn({...Ce.needsCardSelection,onConfirm:async Be=>{await Eh(Be,Ce.needsCardSelection,z,te,pe,ue,null),Tn(null)},onCancel:()=>{Tn(null),pe===n()&&(Yn(),Rr(null))}});return}return pe===n()&&(Yn(),Rr(null)),Ce},[p,n,je,Je]),Eh=C.useCallback(async(z,te,pe,ue,Ce,Be,Ye=null)=>{await p("searchAndDrawCompletion",{card:pe,selectedCards:z,selectionData:te,playerId:Ce,playerStatesWithEnergyCosts:Ye}),Ce===n()&&(Yn(),Rr(null))},[p,n,Yn]),Th=C.useCallback(async(z,te,pe,ue)=>{await tt("movementCompletion",{card:z,movementType:"multi_move",drones:te,fromLane:pe,toLane:ue,playerId:n()}),Jn(null),Yn()},[p,n]),tc=C.useCallback(async(z,te,pe,ue)=>{await tt("movementCompletion",{card:z,movementType:"single_move",drones:[te],fromLane:pe,toLane:ue,playerId:n()}),Jn(null),Yn()},[p,n]),js=z=>{Ft?Gn===z?pn(!1):In(z):(pn(!0),In(z))};C.useEffect(()=>{const{validAbilityTargets:z,validCardTargets:te}=ke.calculateAllValidTargets(wt,hn,Ze,Ut,je,Je);$a(z),wo(te),wt&&(hr(null),bt(null))},[wt,hn,Ut,je,Je,Ze]),C.useEffect(()=>{rn&&!Sa&&ys(!0)},[rn,Sa]),C.useEffect(()=>{if(Qe==="action"){const z=ke.calculatePotentialInterceptors(Ie,je,Je,Qu());he(z)}else he([])},[Ie,Qe,je,Je,ke,_s,Mo]),C.useEffect(()=>{if(Qe==="action"&&Ie&&!Ie.isExhausted){const[z]=Object.entries(je.dronesOnBoard).find(([te,pe])=>pe.some(ue=>ue.id===Ie.id))||[];if(z){const pe=(Je.dronesOnBoard[z]||[]).filter(ue=>b(ue,z).keywords.has("GUARDIAN")).map(ue=>ue.id);ge(pe)}else ge([])}else ge([])},[Ie,Qe,je,Je,b]),C.useEffect(()=>{const z=n();if(e.interceptionPending){const{attackingPlayerId:te,defendingPlayerId:pe,attackDetails:ue,interceptors:Ce}=e.interceptionPending;te===z?Re(!0):pe===z&&B({attackDetails:ue,interceptors:Ce})}else Re(!1),B(null)},[e.interceptionPending,n]),C.useEffect(()=>{if(e.lastInterception){const{interceptor:z,timestamp:te}=e.lastInterception;Tt({droneId:z.id,timestamp:te})}},[e.lastInterception]),C.useEffect(()=>{vs(null)},[Ie]),C.useEffect(()=>{if(Ie&&!wt&&Qe==="action"){const z=b0(Fa.current[Ie.id],gr.current);z&&Gu({visible:!0,start:z,end:{x:z.x,y:z.y}})}else Gu(z=>({...z,visible:!1}))},[Ie,Qe,wt]),C.useEffect(()=>{const z=pe=>{if(bs.visible&&Es.current&&gr.current){const ue=gr.current.getBoundingClientRect(),Ce=pe.clientX-ue.left,Be=pe.clientY-ue.top;Es.current.setAttribute("x2",Ce),Es.current.setAttribute("y2",Be)}},te=gr.current;return te?.addEventListener("mousemove",z),()=>{te?.removeEventListener("mousemove",z)}},[bs.visible]),C.useEffect(()=>{rn&&Pn.current&&(P("COMBAT","[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),Pn.current=!1)},[rn,Qe,Va]),C.useEffect(()=>{e.gameMode==="guest"&&(P("STATE_SYNC","âœ… [GUEST RENDER] Emitting render_complete event"),g.emit("render_complete"))},[e,g]),C.useEffect(()=>{if(e.gameMode!=="guest")return;const z=Ts.current;if(z===null){Ts.current=Qe;return}if(z!==Qe){P("PHASE_TRANSITIONS",`ðŸ‘ï¸ Guest detected phase change: ${z} â†’ ${Qe}`);const te={newPhase:Qe,previousPhase:z,gameStage:e.gameStage,roundNumber:e.roundNumber};(ue=>{{const{newPhase:Ce,previousPhase:Be}=ue;P("PHASE_TRANSITIONS",`ðŸ”„ Guest handling synthetic phase transition: ${Be} â†’ ${Ce}`),Dt===Be&&Qn(null),Ce==="deploymentComplete"&&(P("PHASE_TRANSITIONS","ðŸŽ¯ Deployment complete phase started, showing modal"),Bt(!0))}})(te),Ts.current=Qe}},[Qe,e.gameStage,e.roundNumber,e.gameMode,Dt]);const Ph=()=>{e.gameMode==="local"&&Pr.cleanup(),d(),Pn.current=!1,jn(null),Ne(null),kr(null),$a([]),Ha(null),xs(!1),Lr(null),hr(null),wo([]),Rr(null),ys(!1)},nd=async z=>{const{turnPhase:te}=e;te==="allocateShields"?await tt("addShield",{sectionName:z,playerId:n()}):await tt("reallocateShields",{action:"add",sectionName:z,playerId:n()})},rd=async z=>{if(_o<=0||je.shipSections[z].allocatedShields<=0)return;(await tt("reallocateShields",{action:"remove",sectionName:z,playerId:n()})).success&&(As(ue=>ue-1),mr(ue=>ue+1))},ad=async z=>{if(Ss<=0)return;(await tt("reallocateShields",{action:"add",sectionName:z,playerId:n()})).success&&mr(pe=>pe-1)},id=()=>{Fl(JSON.parse(JSON.stringify(je.shipSections))),Do("adding")},sd=async()=>{$r==="removing"?(await tt("reallocateShields",{action:"restore",originalShipSections:Ga,playerId:n()}),As(Vl.ability.effect.value.maxShields),mr(0)):$r==="adding"&&(await tt("reallocateShields",{action:"restore",originalShipSections:Fu,playerId:n()}),mr(_o+Ss))},Ka=async()=>{await tt("reallocateShields",{action:"restore",originalShipSections:Ga,playerId:n()}),Do(null),As(0),mr(0),qu(null),Fl(null),Cs(null)},wh=()=>{aa({ability:Vl.ability,sectionName:Vl.sectionName,target:null})},Oh=async()=>{P("PHASE_TRANSITIONS","ðŸŽ¯ App.jsx: Acknowledging deployment complete");const z=n(),te=await tt("acknowledgeDeploymentComplete",{playerId:z});te.success&&(Bt(!1),te.data?.bothPlayersComplete||Qn("deploymentComplete"))},Nh=z=>{if($r){$r==="removing"?rd(z):$r==="adding"&&ad(z);return}Qe==="allocateShields"&&nd(z)},od=z=>{ot[n()+"Passed"]||(Ie&&Ie.name===z.name?jn(null):(jn(z),kr(null),Yn()))},nc=async(z,te=Ie)=>{const pe=te;try{P("DEPLOYMENT","ðŸŽ¯ App.jsx: Deploying drone:",{droneName:pe?.name,droneObject:pe,lane:z,playerId:n(),turn:oa});const ue=await tt("deployment",{droneData:pe,laneId:z,playerId:n(),turn:oa});ue.success?jn(null):Ne({title:ue.error,text:ue.message,isBlocking:!0})}catch(ue){console.error("Error executing deployment:",ue),Ne({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},ks=z=>{if(!(!Ie||Va!==n()||ot[n()+"Passed"])){if(er(),oa===1){const te=ke.validateDeployment(je,Ie,oa,Zu,jo);if(!te.isValid){Ne({title:te.reason,text:te.message,isBlocking:!0});return}const{budgetCost:pe,energyCost:ue}=te;if(ue>0){$e({lane:z,budgetCost:pe,energyCost:ue,drone:Ie});return}}nc(z)}},Is=async()=>{ot[`${n()}Passed`]||(er(),await tt("playerPass",{playerId:n(),playerName:je.name,turnPhase:Qe,passInfo:ot,opponentPlayerId:r()}))},Dh=(z,te,pe)=>{if(z.stopPropagation(),Qe!=="action"||Va!==n()||ot[n()+"Passed"])return;const ue=pe.cost||{};if(te.isExhausted&&ue.exhausts!==!1){Ne({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(ue.energy&&je.energy<ue.energy){Ne({title:"Not Enough Energy",text:`This ability costs ${ue.energy} energy, but you only have ${je.energy}.`,isBlocking:!0});return}if(pe.targeting?.type==="LANE"&&pe.targeting?.location==="SAME_LANE"){const Ce=ke.getLaneOfDrone(te.id,je);if(Ce){Ca({ability:pe,drone:te,target:{id:Ce,owner:n()}});return}}wt&&wt.drone.id===te.id?Ms():(er(),kr({drone:te,ability:pe}),jn(te))},Io=(z,te,pe)=>{if(z.stopPropagation(),!(Qe!=="action"||!t()||ot[`${n()}Passed`])){if(je.energy<pe.cost.energy){Ne({title:"Not Enough Energy",text:`This ability costs ${pe.cost.energy} energy, but you only have ${je.energy}.`,isBlocking:!0});return}hn?.ability.id===pe.id?bt(null):pe.targeting?(er(),bt({sectionName:te.name,ability:pe})):pe.effect.type==="REALLOCATE_SHIELDS"?(er(),Do("removing"),As(pe.effect.value.maxShields),mr(0),qu(JSON.parse(JSON.stringify(je.shipSections))),Cs({ability:pe,sectionName:te.name})):(er(),aa({ability:pe,sectionName:te.name,target:null}))}},ld=(z,te,pe)=>{if(z.stopPropagation(),P("COMBAT",`--- handleTokenClick triggered for ${te.name} (isPlayer: ${pe}) ---`),Ze&&Ze.phase==="select_drones"&&pe){P("COMBAT","Action: Multi-move drone selection.");const{selectedDrones:ue,maxSelection:Ce}=Ze;ue.some(Ye=>Ye.id===te.id)?Jn(Ye=>({...Ye,selectedDrones:Ye.selectedDrones.filter(ct=>ct.id!==te.id)})):ue.length<Ce&&Jn(Ye=>({...Ye,selectedDrones:[...Ye.selectedDrones,te]}));return}if(Ir.some(ue=>ue.id===te.id)||Ua.some(ue=>ue.id===te.id)){P("COMBAT","Action: Targeting for an active card/ability."),rc(te,"drone",pe);return}if(Qe==="action"&&t()&&Ie&&!Ie.isExhausted&&!pe){P("COMBAT","Action: Attempting a standard attack."),P("COMBAT","Attacker selected:",Ie.name,`(ID: ${Ie.id})`),P("COMBAT","Target clicked:",te.name,`(ID: ${te.id})`);const[ue]=Object.entries(je.dronesOnBoard).find(([Be,Ye])=>Ye.some(ct=>ct.id===Ie.id))||[],[Ce]=Object.entries(Je.dronesOnBoard).find(([Be,Ye])=>Ye.some(ct=>ct.id===te.id))||[];if(P("COMBAT","Calculated Attacker Lane:",ue),P("COMBAT","Calculated Target Lane:",Ce),ue&&Ce&&ue===Ce){P("COMBAT","SUCCESS: Lanes match. Processing attack...");const Be={attacker:Ie,target:te,targetType:"drone",lane:ue,attackingPlayer:n()};ko(Be),jn(null)}else P("COMBAT","FAILURE: Lanes do not match or could not be found."),Ne({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(Ze&&Ze.phase==="select_drones"&&pe){P("COMBAT","Action: Multi-move drone selection.");const{selectedDrones:ue,maxSelection:Ce}=Ze;ue.some(Ye=>Ye.id===te.id)?Jn(Ye=>({...Ye,selectedDrones:Ye.selectedDrones.filter(ct=>ct.id!==te.id)})):ue.length<Ce&&Jn(Ye=>({...Ye,selectedDrones:[...Ye.selectedDrones,te]}));return}if(zt?.type==="destroy"&&pe){P("COMBAT","Action: Mandatory destruction."),Lr({type:"destroy",target:te,onConfirm:()=>Mh(te),onCancel:()=>Lr(null),text:`Are you sure you want to destroy your ${te.name}?`});return}if(pe&&Qe==="action"&&t()&&!ot[`${n()}Passed`]){if(te.isExhausted){P("COMBAT","Action prevented: Drone is exhausted.");return}Ie?.id===te.id?(P("COMBAT","Action: Deselecting drone",te.name),jn(null)):(P("COMBAT","Action: Selecting drone",te.name),er(),jn(te));return}P("COMBAT","Action: Fallback - showing drone details."),Xe(te)},rc=(z,te,pe)=>{if(hn&&Ir.some(ue=>ue.id===z.id)){aa({ability:hn.ability,sectionName:hn.sectionName,target:z});return}if(wt&&Ir.some(ue=>ue.id===z.id)){td(wt.ability,wt.drone,z);return}if(Ut&&Ua.some(ue=>ue.id===z.id)){const ue=pe?n():r();Rr({card:Ut,target:{...z,owner:ue}});return}if(Qe==="action"&&t()&&Ie&&!Ie.isExhausted&&!pe&&te==="section"){P("COMBAT","Action: Attempting ship section attack."),P("COMBAT","Attacker selected:",Ie.name,`(ID: ${Ie.id})`),P("COMBAT","Target clicked:",z.name);const[ue]=Object.entries(je.dronesOnBoard).find(([Ce,Be])=>Be.some(Ye=>Ye.id===Ie.id))||[];if(P("COMBAT","Calculated Attacker Lane:",ue),ue){P("COMBAT","SUCCESS: Found attacker lane. Checking for Guardian...");const Ce=Je.dronesOnBoard[ue];if(Ce&&Ce.some(Ye=>b(Ye,ue).keywords.has("GUARDIAN")&&!Ye.isExhausted))P("COMBAT","FAILURE: Ship section is protected by a Guardian drone."),Ne({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{P("COMBAT","SUCCESS: No Guardian. Processing attack...");const Ye={attacker:Ie,target:z,targetType:"section",lane:ue,attackingPlayer:n()};ko(Ye),jn(null)}}else P("COMBAT","FAILURE: Could not determine attacker lane."),Ne({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}te==="drone"&&Xe(z)},ac=(z,te,pe)=>{if(z.stopPropagation(),wt&&wt.ability.targeting.type==="LANE"){const ue=pe?n():r();if(Ir.some(Ce=>Ce.id===te&&Ce.owner===ue)){Ca({ability:wt.ability,drone:wt.drone,target:{id:te,owner:ue}});return}}if(Ze&&pe&&Ua.some(ue=>ue.id===te)){const{phase:ue,sourceLane:Ce,selectedDrones:Be}=Ze;if(ue==="select_source_lane"){Jn(Ye=>({...Ye,phase:"select_drones",sourceLane:te}));return}if(ue==="select_destination_lane"){Th(Ze.card,Be,Ce,te);return}}if(Ze&&Ze.card.effect.type==="SINGLE_MOVE"&&Ze.phase==="select_destination"&&pe){Ua.some(ue=>ue.id===te)&&tc(Ze.card,Ze.selectedDrone,Ze.sourceLane,te);return}if(Ut&&Ut.targeting.type==="LANE"){const ue=pe?n():r();if(Ua.some(Ce=>Ce.id===te&&Ce.owner===ue)){Rr({card:Ut,target:{id:te,owner:ue}});return}}if(Ut){Yn();return}if(wt){Ms();return}if(Qe==="deployment"&&pe)ks(te);else if(Qe==="action"&&pe&&Ie){const[ue]=Object.entries(je.dronesOnBoard).find(([Ye,ct])=>ct.some(mn=>mn.id===Ie.id))||[];if(!ue)return;const Ce=parseInt(ue.replace("lane",""),10),Be=parseInt(te.replace("lane",""),10);Math.abs(Ce-Be)===1?ye({drone:Ie,from:ue,to:te}):Ne({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},ic=async z=>{const te=n(),pe=t(),ue=ot[`${te}Passed`];if(P("CARD_PLAY",`ðŸŽ¯ handleCardClick called: ${z.name}`,{cardId:z.id,cardCost:z.cost,gameMode:e.gameMode,localPlayerId:te,turnPhase:Qe,isMyTurn:pe,playerPassed:ue,playerEnergy:je.energy,hasEnoughEnergy:je.energy>=z.cost}),Qe!=="action"){P("CARD_PLAY",`ðŸš« Card click rejected - wrong phase: ${Qe}`,{card:z.name});return}if(!pe){P("CARD_PLAY","ðŸš« Card click rejected - not player's turn",{card:z.name,localPlayerId:te,currentPlayer:e.currentPlayer});return}if(ue){P("CARD_PLAY","ðŸš« Card click rejected - player has passed",{card:z.name});return}if(je.energy<z.cost){P("CARD_PLAY","ðŸš« Card click rejected - not enough energy",{card:z.name,cardCost:z.cost,playerEnergy:je.energy});return}if(z.effect.type==="MULTI_MOVE"||z.effect.type==="SINGLE_MOVE"){P("CARD_PLAY",`âœ… Movement card - processing: ${z.name}`,{effectType:z.effect.type}),Ze&&Ze.card.instanceId===z.instanceId?Yn():(er(),await ec(z,null,n()));return}if(Ut?.instanceId===z.instanceId)P("CARD_PLAY",`âœ… Card deselected: ${z.name}`),Yn();else if(z.name==="System Sabotage"){P("CARD_PLAY","âœ… System Sabotage card - getting targets",{card:z.name});const Ce=ke.getValidTargets(n(),null,z,je,Je);P("CARD_PLAY",`âœ… System Sabotage targets found: ${Ce.length}`,{targets:Ce}),er(),za({card:z,targets:Ce,opponentState:Je})}else if(z.type==="Upgrade"){P("CARD_PLAY",`âœ… Upgrade card - getting targets: ${z.name}`);const Ce=ke.getValidTargets(n(),null,z,je,Je);P("CARD_PLAY",`âœ… Upgrade targets found: ${Ce.length}`,{targets:Ce}),Ce.length>0?(er(),Oo({card:z,targets:Ce})):Ne({title:"No Valid Targets",text:`There are no drone types that can accept the '${z.name}' upgrade right now.`,isBlocking:!0})}else z.targeting?(P("CARD_PLAY",`âœ… Targeted card - waiting for target selection: ${z.name}`,{targeting:z.targeting}),er(),hr(z)):(P("CARD_PLAY",`âœ… Non-targeted card - showing confirmation: ${z.name}`),er(),Rr({card:z,target:null}))},cd=async z=>{const te=zt,pe=te.count-1,ue=pe<=0,Ce={playerId:n(),cardsToDiscard:[z],isMandatory:!0};if(ue&&te.fromAbility&&te.abilityName&&(Ce.abilityMetadata={abilityName:te.abilityName,sectionName:te.sectionName,actingPlayerId:te.actingPlayerId}),await tt("optionalDiscard",Ce),Lr(null),ue)if(Ha(null),te.fromAbility){const Be=n();await tt("turnTransition",{newPlayer:Be==="player1"?"player2":"player1"})}else{const Be=await tt("commitment",{playerId:n(),phase:"mandatoryDiscard",actionData:{completed:!0}});Be.data&&!Be.data.bothPlayersComplete&&Qn("mandatoryDiscard")}else Ha(Be=>({...Be,count:pe}))},ud=async z=>{await tt("optionalDiscard",{playerId:n(),cardsToDiscard:[z],isMandatory:!1}),qa(te=>te+1),Lr(null)},sc=async()=>{P("PHASE_TRANSITIONS","[OPTIONAL DISCARD] Player completing optional discard phase"),qa(0),await tt("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}}),((e.commitments||{}).optionalDiscard||{})[r()]?.completed?P("PHASE_TRANSITIONS","âœ… Both players complete, no waiting overlay"):(P("PHASE_TRANSITIONS","âœ‹ Opponent not committed yet, showing waiting overlay"),Qn("optionalDiscard"))},_h=()=>{const z=g.actionProcessor?.getPhaseCommitmentStatus("optionalDiscard");return P("PHASE_TRANSITIONS","[OPTIONAL DISCARD] Commitment status:",z),z?.bothComplete||!1},Mh=async z=>{const te=zt,pe=await tt("destroyDrone",{droneId:z.id,playerId:n()});if(!pe.success){console.error("Failed to destroy drone:",pe.error);return}const ue=te.count-1;if(ue<=0){if(Ju>Zl.totals.cpuLimit&&e.gameMode==="local"){const Ye=Object.values(Je.dronesOnBoard).flat().length-S(Je,Mo).totals.cpuLimit;for(let ct=0;ct<Ye;ct++){const mn=Object.entries(Je.dronesOnBoard).flatMap(([ca,lc])=>lc.map(dd=>({...dd,lane:ca})));if(mn.length===0)break;const Ro=Math.min(...mn.map(ca=>ca.class)),la=mn.filter(ca=>ca.class===Ro),oc=la[Math.floor(Math.random()*la.length)];await tt("destroyDrone",{droneId:oc.id,playerId:r()})}}Ha(null);const Be=await tt("commitment",{playerId:n(),phase:"mandatoryDroneRemoval",actionData:{completed:!0}});Be.data&&!Be.data.bothPlayersComplete&&Qn("mandatoryDroneRemoval")}else Ha(Ce=>({...Ce,count:ue}));Lr(null)},jh=()=>{if(Ns.length===0){alert("The game log is empty.");return}const z=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],te=Ns.map(Be=>[Be.round,Be.player,Be.actionType,Be.source,Be.target,Be.outcome,Be.debugSource||"N/A"].map(ct=>`"${String(ct).replace(/"/g,'""')}"`).join(",")),pe=[z.join(","),...te].join(`
`),ue=new Blob([pe],{type:"text/csv;charset=utf-8;"}),Ce=document.createElement("a");if(Ce.download!==void 0){const Be=URL.createObjectURL(ue);Ce.setAttribute("href",Be),Ce.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Ce.style.visibility="hidden",document.body.appendChild(Ce),Ce.click(),document.body.removeChild(Ce)}};return h.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col relative",ref:gr,onClick:()=>{Ms(),Yn()},children:[h.jsx(wF,{}),h.jsx(DV,{visible:bs.visible,start:bs.start,end:bs.end,lineRef:Es}),Ps.map(z=>h.jsx(_V,{top:z.top,left:z.left,size:z.size},z.id)),k.map(z=>h.jsx(FV,{droneData:z.droneData,startPos:z.startPos,endPos:z.endPos,config:z.config,onComplete:z.onComplete},z.id)),j.map(z=>h.jsx(UV,{position:z.position,color:z.color,intensity:z.intensity,onComplete:z.onComplete},z.id)),q.map(z=>h.jsx(VV,{position:z.position,healAmount:z.healAmount,onComplete:z.onComplete},z.id)),$.map(z=>h.jsx(zV,{visualType:z.visualType,startPos:z.startPos,endPos:z.endPos,duration:z.duration,onComplete:z.onComplete},z.id)),Z.map(z=>h.jsx(KV,{card:z.card,label:z.label,onComplete:z.onComplete},z.id)),re.map(z=>h.jsx(WV,{abilityName:z.abilityName,label:z.label,onComplete:z.onComplete},z.id)),Y.map(z=>h.jsx(QV,{phaseText:z.phaseText,subtitle:z.subtitle,onComplete:z.onComplete},z.id)),ae.map(z=>h.jsx(XV,{label:z.label,onComplete:z.onComplete},z.id)),ve.map(z=>h.jsx(ZV,{startPos:z.startPos,endPos:z.endPos,attackValue:z.attackValue,duration:z.duration,onComplete:z.onComplete},z.id)),V.map(z=>h.jsx(JV,{top:z.top,left:z.left,color:z.color,duration:z.duration,onComplete:z.onComplete},z.id)),Se&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),h.jsx(OF,{localPlayerState:je,opponentPlayerState:Je,localPlayerEffectiveStats:jo,opponentPlayerEffectiveStats:Zl,turnPhase:Qe,turn:oa,passInfo:ot,firstPlayerOfRound:ws,shieldsToAllocate:Os,opponentShieldsToAllocate:hh,shieldsToRemove:_o,shieldsToAdd:Ss,reallocationPhase:$r,totalLocalPlayerDrones:Zu,totalOpponentPlayerDrones:Ju,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:Va,isMultiplayer:i,handlePlayerPass:Is,handleExitGame:Ph,handleResetShields:Sh,handleConfirmShields:ed,handleCancelReallocation:Ka,handleResetReallocation:sd,handleContinueToAddPhase:id,handleConfirmReallocation:wh,handleRoundStartDraw:sc,optionalDiscardCount:Ya,mandatoryAction:zt,multiSelectState:Ze,AI_HAND_DEBUG_MODE:E,setShowAiHandModal:w,onShowDebugModal:()=>_(!0),onShowOpponentDrones:Ah,testMode:Ds}),h.jsx(DF,{localPlayerState:je,opponentPlayerState:Je,localPlacedSections:_s,opponentPlacedSections:Mo,selectedCard:Ut,validCardTargets:Ua,abilityMode:wt,validAbilityTargets:Ir,multiSelectState:Ze,turnPhase:Qe,reallocationPhase:$r,shipAbilityMode:hn,hoveredTarget:Hl,selectedDrone:Ie,recentlyHitDrones:Di,potentialInterceptors:oe,potentialGuardians:ce,droneRefs:Fa,sectionRefs:Kl,mandatoryAction:zt,gameEngine:ke,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:Qu,passInfo:ot,handleTargetClick:rc,handleLaneClick:ac,handleShipSectionClick:Nh,handleShipAbilityClick:Io,handleTokenClick:ld,handleAbilityIconClick:Dh,setHoveredTarget:vs,interceptedBadge:kn}),h.jsx(OV,{gameMode:e.gameMode,localPlayerState:je,localPlayerEffectiveStats:jo,sortedLocalActivePool:xh,gameLog:Ns,footerView:Gn,isFooterOpen:Ft,multiSelectState:Ze,selectedCard:Ut,turnPhase:Qe,mandatoryAction:zt,handleFooterButtonClick:js,handleCardClick:ic,cancelCardSelection:Yn,downloadLogAsCSV:jh,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Oi,setHoveredCardId:Ni,setIsViewDiscardModalOpen:Aa,setIsViewDeckModalOpen:fr,handleToggleDroneSelection:od,selectedDrone:Ie,setViewUpgradesModal:Yl,handleConfirmMandatoryDiscard:cd,setConfirmationModal:Lr,turn:oa,passInfo:ot,validCardTargets:Ua,gameEngine:ke,opponentPlayerState:Je,setAiDecisionLogToShow:qt,optionalDiscardCount:Ya,handleRoundStartDraw:sc,handleRoundStartDiscard:ud,checkBothPlayersHandLimitComplete:_h}),Me&&h.jsx(gs,{title:Me.title,text:Me.text,onClose:Me.onClose===null?null:Me.onClose||(()=>Ne(null)),children:Me.children}),h.jsx(RV,{show:Yt,firstPlayerOfRound:ws,localPlayerId:n(),localPlayerName:je.name,opponentPlayerName:Je.name,onContinue:Oh}),h.jsx(LV,{show:Et,onContinue:()=>xa(!1)}),h.jsx(hM,{show:!!Dt,phase:Dt,opponentName:Je.name,roomCode:y.roomCode}),h.jsx(rM,{deploymentConfirmation:xe,show:!!xe,onCancel:()=>$e(null),onConfirm:async()=>{if(!xe)return;const{lane:z,drone:te}=xe;$e(null),await nc(z,te)}}),h.jsx(oM,{moveConfirmation:He,show:!!He,onCancel:()=>ye(null),onConfirm:async()=>{if(!He)return;const{drone:z,from:te,to:pe}=He;await tt("move",{droneId:z.id,fromLane:te,toLane:pe,playerId:n()}),ye(null),jn(null)}}),h.jsx(tM,{choiceData:Zn,show:!!Zn,onIntercept:async z=>{const te={...Zn.attackDetails,interceptor:z};B(null),setTimeout(async()=>{await ko(te)},400)},onDecline:async()=>{const z={...Zn.attackDetails,interceptor:null};B(null),setTimeout(async()=>{await ko(z)},400)},gameEngine:ke,turnPhase:Qe,isMyTurn:t,passInfo:ot,getLocalPlayerId:n,localPlayerState:je,shipAbilityMode:hn,droneRefs:Fa,mandatoryAction:zt}),h.jsx(nM,{show:be,opponentName:Je?.name||"Opponent"}),h.jsx(xM,{isOpen:!!vt,drone:vt,onClose:()=>Xe(null)}),Pt&&h.jsx(uM,{report:Pt,onClose:()=>nt(null)}),h.jsx(dM,{decisionLog:lt,show:!!lt,onClose:()=>qt(null),getLocalPlayerId:n}),h.jsx(eM,{winner:rn,localPlayerId:n(),show:rn&&Sa,onClose:()=>ys(!1)}),h.jsx(lM,{mandatoryAction:zt,effectiveStats:jo,show:zt&&fh,onClose:()=>xs(!1)}),h.jsx(cM,{confirmationModal:ql,show:!!ql}),h.jsx(NV,{viewUpgradesModal:dh,setViewUpgradesModal:Yl,destroyUpgradeModal:Yu,setDestroyUpgradeModal:za,upgradeSelectionModal:Gl,setUpgradeSelectionModal:Oo,resolveCardPlay:ec,getLocalPlayerId:n,cancelCardSelection:Yn}),h.jsx(aM,{cardConfirmation:_i,show:!!_i,onCancel:()=>Rr(null),onConfirm:async()=>{const z=_i.card,te=_i.target;Rr(null),setTimeout(async()=>{await ec(z,te,n())},400)}}),h.jsx(iM,{abilityConfirmation:ia,show:!!ia,onCancel:()=>Ca(null),onConfirm:()=>{td(ia.ability,ia.drone,ia.target),Ca(null)}}),h.jsx(fM,{opponentPlayerState:Je,show:T,debugMode:E,onClose:()=>w(!1)}),h.jsx(mM,{isOpen:En,onClose:()=>pr(!1),drones:bh}),h.jsx(pM,{show:O,onClose:()=>_(!1),gameStateManager:g,gameDataService:A}),h.jsx(fv,{isOpen:La,onClose:()=>fr(!1),cards:je.deck,title:"Remaining Cards in Deck",shouldSort:!0}),h.jsx(fv,{isOpen:wi,onClose:()=>Aa(!1),cards:je.discardPile,title:"Discard Pile",shouldSort:!1}),h.jsx(bM,{isOpen:!!No,onClose:No?.onCancel||(()=>Tn(null)),onConfirm:No?.onConfirm||(()=>{}),selectionData:No,mandatory:!0}),h.jsx(sM,{shipAbilityConfirmation:Ba,show:!!Ba,onCancel:()=>aa(null),onConfirm:async()=>await Ch(Ba.ability,Ba.sectionName,Ba.target)}),h.jsx(IV,{isVisible:!1,currentPlayer:Va,gameMode:e.gameMode,roomCode:y.roomCode,lastAction:null,localPlayerState:je,opponentPlayerState:Je,getLocalPlayerId:n})]})};function eK(){const{gameState:e}=Si(),[t,n]=C.useState(!0),r=C.useRef(!1);if(C.useEffect(()=>{const l=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(l)},[]),C.useEffect(()=>{if(e.gameMode==="guest"){P("PHASE_TRANSITIONS","ðŸ”„ Guest mode detected - skipping manager initialization");return}r.current?P("PHASE_TRANSITIONS","ðŸ”„ GameFlowManager already initialized, skipping..."):(Gf.initialize(Ge,Ge.actionProcessor,()=>e.gameMode!=="local",Pr),Ge.setGameFlowManager(Gf),r.current=!0,P("PHASE_TRANSITIONS","ðŸ”„ GameFlowManager initialized in AppRouter (host/local mode)"))},[e.gameMode]),C.useEffect(()=>{const l=u=>{if(u.ctrlKey&&u.key==="m"){u.preventDefault();const f=e.appState,d=f==="modalShowcase"?"menu":"modalShowcase";Ge.setState({appState:d}),P("PHASE_TRANSITIONS",`ðŸŽ¨ Modal Showcase toggled: ${f} -> ${d}`)}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[e.appState]),t)return h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:h.jsx("div",{children:"Loading EREMOS..."})});const i=!(e.appState==="inGame"&&!["droneSelection","placement"].includes(e.turnPhase));let s;switch(e.appState){case"menu":s=h.jsx(eC,{});break;case"lobby":s=h.jsx(mR,{});break;case"modalShowcase":s=h.jsx(xF,{});break;case"testingSetup":s=h.jsx(EF,{});break;case"inGame":switch(e.turnPhase){case"droneSelection":s=h.jsx(gR,{});break;case"deckSelection":s=h.jsx(fF,{});break;case"placement":s=h.jsx(pF,{});break;case"gameInitializing":s=h.jsx(sw,{});break;default:s=h.jsx(sw,{})}break;default:console.warn("Unknown app state:",e.appState,"defaulting to menu"),s=h.jsx(eC,{})}return h.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto"},children:[i&&h.jsx(SM,{}),s]})}$k.createRoot(document.getElementById("root")).render(h.jsx(pv.StrictMode,{children:h.jsx(eK,{})}));export{ln as G,P as d,Nt as f};
