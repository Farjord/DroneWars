function Rw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Fr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qm={exports:{}},mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA;function Kk(){if(eA)return mc;eA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return mc.Fragment=t,mc.jsx=n,mc.jsxs=n,mc}var tA;function Wk(){return tA||(tA=1,qm.exports=Kk()),qm.exports}var v=Wk(),Ym={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA;function Xk(){if(nA)return Re;nA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function g(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function C(M,F,V){this.props=M,this.context=F,this.refs=A,this.updater=V||x}C.prototype.isReactComponent={},C.prototype.setState=function(M,F){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,F,"setState")},C.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function P(){}P.prototype=C.prototype;function T(M,F,V){this.props=M,this.context=F,this.refs=A,this.updater=V||x}var O=T.prototype=new P;O.constructor=T,S(O,C.prototype),O.isPureReactComponent=!0;var k=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function j(M,F,V,ue,ge,U){return V=U.ref,{$$typeof:e,type:M,key:F,ref:V!==void 0?V:null,props:U}}function R(M,F){return j(M.type,F,void 0,void 0,void 0,M.props)}function z(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function W(M){var F={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(V){return F[V]})}var H=/\/+/g;function q(M,F){return typeof M=="object"&&M!==null&&M.key!=null?W(""+M.key):F.toString(36)}function se(){}function te(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(se,se):(M.status="pending",M.then(function(F){M.status==="pending"&&(M.status="fulfilled",M.value=F)},function(F){M.status==="pending"&&(M.status="rejected",M.reason=F)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ne(M,F,V,ue,ge){var U=typeof M;(U==="undefined"||U==="boolean")&&(M=null);var re=!1;if(M===null)re=!0;else switch(U){case"bigint":case"string":case"number":re=!0;break;case"object":switch(M.$$typeof){case e:case t:re=!0;break;case h:return re=M._init,ne(re(M._payload),F,V,ue,ge)}}if(re)return ge=ge(M),re=ue===""?"."+q(M,0):ue,k(ge)?(V="",re!=null&&(V=re.replace(H,"$&/")+"/"),ne(ge,F,V,"",function(ie){return ie})):ge!=null&&(z(ge)&&(ge=R(ge,V+(ge.key==null||M&&M.key===ge.key?"":(""+ge.key).replace(H,"$&/")+"/")+re)),F.push(ge)),1;re=0;var ve=ue===""?".":ue+":";if(k(M))for(var pe=0;pe<M.length;pe++)ue=M[pe],U=ve+q(ue,pe),re+=ne(ue,F,V,U,ge);else if(pe=g(M),typeof pe=="function")for(M=pe.call(M),pe=0;!(ue=M.next()).done;)ue=ue.value,U=ve+q(ue,pe++),re+=ne(ue,F,V,U,ge);else if(U==="object"){if(typeof M.then=="function")return ne(te(M),F,V,ue,ge);throw F=String(M),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return re}function L(M,F,V){if(M==null)return M;var ue=[],ge=0;return ne(M,ue,"","",function(U){return F.call(V,U,ge++)}),ue}function ee(M){if(M._status===-1){var F=M._result;F=F(),F.then(function(V){(M._status===0||M._status===-1)&&(M._status=1,M._result=V)},function(V){(M._status===0||M._status===-1)&&(M._status=2,M._result=V)}),M._status===-1&&(M._status=0,M._result=F)}if(M._status===1)return M._result.default;throw M._result}var ce=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function ye(){}return Re.Children={map:L,forEach:function(M,F,V){L(M,function(){F.apply(this,arguments)},V)},count:function(M){var F=0;return L(M,function(){F++}),F},toArray:function(M){return L(M,function(F){return F})||[]},only:function(M){if(!z(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Re.Component=C,Re.Fragment=n,Re.Profiler=i,Re.PureComponent=T,Re.StrictMode=r,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Re.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Re.cache=function(M){return function(){return M.apply(null,arguments)}},Re.cloneElement=function(M,F,V){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ue=S({},M.props),ge=M.key,U=void 0;if(F!=null)for(re in F.ref!==void 0&&(U=void 0),F.key!==void 0&&(ge=""+F.key),F)!D.call(F,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&F.ref===void 0||(ue[re]=F[re]);var re=arguments.length-2;if(re===1)ue.children=V;else if(1<re){for(var ve=Array(re),pe=0;pe<re;pe++)ve[pe]=arguments[pe+2];ue.children=ve}return j(M.type,ge,void 0,void 0,U,ue)},Re.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:s,_context:M},M},Re.createElement=function(M,F,V){var ue,ge={},U=null;if(F!=null)for(ue in F.key!==void 0&&(U=""+F.key),F)D.call(F,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ge[ue]=F[ue]);var re=arguments.length-2;if(re===1)ge.children=V;else if(1<re){for(var ve=Array(re),pe=0;pe<re;pe++)ve[pe]=arguments[pe+2];ge.children=ve}if(M&&M.defaultProps)for(ue in re=M.defaultProps,re)ge[ue]===void 0&&(ge[ue]=re[ue]);return j(M,U,void 0,void 0,null,ge)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:u,render:M}},Re.isValidElement=z,Re.lazy=function(M){return{$$typeof:h,_payload:{_status:-1,_result:M},_init:ee}},Re.memo=function(M,F){return{$$typeof:f,type:M,compare:F===void 0?null:F}},Re.startTransition=function(M){var F=N.T,V={};N.T=V;try{var ue=M(),ge=N.S;ge!==null&&ge(V,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ye,ce)}catch(U){ce(U)}finally{N.T=F}},Re.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Re.use=function(M){return N.H.use(M)},Re.useActionState=function(M,F,V){return N.H.useActionState(M,F,V)},Re.useCallback=function(M,F){return N.H.useCallback(M,F)},Re.useContext=function(M){return N.H.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M,F){return N.H.useDeferredValue(M,F)},Re.useEffect=function(M,F,V){var ue=N.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(M,F)},Re.useId=function(){return N.H.useId()},Re.useImperativeHandle=function(M,F,V){return N.H.useImperativeHandle(M,F,V)},Re.useInsertionEffect=function(M,F){return N.H.useInsertionEffect(M,F)},Re.useLayoutEffect=function(M,F){return N.H.useLayoutEffect(M,F)},Re.useMemo=function(M,F){return N.H.useMemo(M,F)},Re.useOptimistic=function(M,F){return N.H.useOptimistic(M,F)},Re.useReducer=function(M,F,V){return N.H.useReducer(M,F,V)},Re.useRef=function(M){return N.H.useRef(M)},Re.useState=function(M){return N.H.useState(M)},Re.useSyncExternalStore=function(M,F,V){return N.H.useSyncExternalStore(M,F,V)},Re.useTransition=function(){return N.H.useTransition()},Re.version="19.1.1",Re}var rA;function tl(){return rA||(rA=1,Ym.exports=Xk()),Ym.exports}var E=tl();const Iw=Fr(E),Qk=Rw({__proto__:null,default:Iw},[E]);var Fm={exports:{}},gc={},Vm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA;function Zk(){return aA||(aA=1,(function(e){function t(L,ee){var ce=L.length;L.push(ee);e:for(;0<ce;){var ye=ce-1>>>1,M=L[ye];if(0<i(M,ee))L[ye]=ee,L[ce]=M,ce=ye;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var ee=L[0],ce=L.pop();if(ce!==ee){L[0]=ce;e:for(var ye=0,M=L.length,F=M>>>1;ye<F;){var V=2*(ye+1)-1,ue=L[V],ge=V+1,U=L[ge];if(0>i(ue,ce))ge<M&&0>i(U,ue)?(L[ye]=U,L[ge]=ce,ye=ge):(L[ye]=ue,L[V]=ce,ye=V);else if(ge<M&&0>i(U,ce))L[ye]=U,L[ge]=ce,ye=ge;else break e}}return ee}function i(L,ee){var ce=L.sortIndex-ee.sortIndex;return ce!==0?ce:L.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var p=[],f=[],h=1,m=null,g=3,x=!1,S=!1,A=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function k(L){for(var ee=n(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=L)r(f),ee.sortIndex=ee.expirationTime,t(p,ee);else break;ee=n(f)}}function N(L){if(A=!1,k(L),!S)if(n(p)!==null)S=!0,D||(D=!0,q());else{var ee=n(f);ee!==null&&ne(N,ee.startTime-L)}}var D=!1,j=-1,R=5,z=-1;function W(){return C?!0:!(e.unstable_now()-z<R)}function H(){if(C=!1,D){var L=e.unstable_now();z=L;var ee=!0;try{e:{S=!1,A&&(A=!1,T(j),j=-1),x=!0;var ce=g;try{t:{for(k(L),m=n(p);m!==null&&!(m.expirationTime>L&&W());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,g=m.priorityLevel;var M=ye(m.expirationTime<=L);if(L=e.unstable_now(),typeof M=="function"){m.callback=M,k(L),ee=!0;break t}m===n(p)&&r(p),k(L)}else r(p);m=n(p)}if(m!==null)ee=!0;else{var F=n(f);F!==null&&ne(N,F.startTime-L),ee=!1}}break e}finally{m=null,g=ce,x=!1}ee=void 0}}finally{ee?q():D=!1}}}var q;if(typeof O=="function")q=function(){O(H)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,te=se.port2;se.port1.onmessage=H,q=function(){te.postMessage(null)}}else q=function(){P(H,0)};function ne(L,ee){j=P(function(){L(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var ce=g;g=ee;try{return L()}finally{g=ce}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(L,ee){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ce=g;g=L;try{return ee()}finally{g=ce}},e.unstable_scheduleCallback=function(L,ee,ce){var ye=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ye+ce:ye):ce=ye,L){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ce+M,L={id:h++,callback:ee,priorityLevel:L,startTime:ce,expirationTime:M,sortIndex:-1},ce>ye?(L.sortIndex=ce,t(f,L),n(p)===null&&L===n(f)&&(A?(T(j),j=-1):A=!0,ne(N,ce-ye))):(L.sortIndex=M,t(p,L),S||x||(S=!0,D||(D=!0,q()))),L},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(L){var ee=g;return function(){var ce=g;g=ee;try{return L.apply(this,arguments)}finally{g=ce}}}})(Km)),Km}var iA;function Jk(){return iA||(iA=1,Vm.exports=Zk()),Vm.exports}var Wm={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oA;function ej(){if(oA)return yn;oA=1;var e=tl();function t(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(p,f,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:p,containerInfo:f,implementation:h}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(p,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(p,f,null,h)},yn.flushSync=function(p){var f=l.T,h=r.p;try{if(l.T=null,r.p=2,p)return p()}finally{l.T=f,r.p=h,r.d.f()}},yn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(p,f))},yn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},yn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var h=f.as,m=u(h,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:x}):h==="script"&&r.d.X(p,{crossOrigin:m,integrity:g,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},yn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=u(f.as,f.crossOrigin);r.d.M(p,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(p)},yn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,m=u(h,f.crossOrigin);r.d.L(p,h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},yn.preloadModule=function(p,f){if(typeof p=="string")if(f){var h=u(f.as,f.crossOrigin);r.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(p)},yn.requestFormReset=function(p){r.d.r(p)},yn.unstable_batchedUpdates=function(p,f){return p(f)},yn.useFormState=function(p,f,h){return l.H.useFormState(p,f,h)},yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},yn.version="19.1.1",yn}var sA;function Lw(){if(sA)return Wm.exports;sA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wm.exports=ej(),Wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA;function tj(){if(lA)return gc;lA=1;var e=Jk(),t=tl(),n=Lw();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function p(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,d=o;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return u(y),a;if(b===d)return u(y),o;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=b;else{for(var w=!1,_=y.child;_;){if(_===c){w=!0,c=y,d=b;break}if(_===d){w=!0,d=y,c=b;break}_=_.sibling}if(!w){for(_=b.child;_;){if(_===c){w=!0,c=b,d=y;break}if(_===d){w=!0,d=b,c=y;break}_=_.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function f(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=f(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function q(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var se=Symbol.for("react.client.reference");function te(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===se?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList";case z:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case O:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return o=a.displayName||null,o!==null?o:te(a.type)||"Memo";case R:o=a._payload,a=a._init;try{return te(a(o))}catch{}}return null}var ne=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},ye=[],M=-1;function F(a){return{current:a}}function V(a){0>M||(a.current=ye[M],ye[M]=null,M--)}function ue(a,o){M++,ye[M]=a.current,a.current=o}var ge=F(null),U=F(null),re=F(null),ve=F(null);function pe(a,o){switch(ue(re,o),ue(U,a),ue(ge,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?T1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=T1(o),a=_1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}V(ge),ue(ge,a)}function ie(){V(ge),V(U),V(re)}function de(a){a.memoizedState!==null&&ue(ve,a);var o=ge.current,c=_1(o,a.type);o!==c&&(ue(U,a),ue(ge,c))}function be(a){U.current===a&&(V(ge),V(U)),ve.current===a&&(V(ve),uc._currentValue=ce)}var fe=Object.prototype.hasOwnProperty,tt=e.unstable_scheduleCallback,ze=e.unstable_cancelCallback,bt=e.unstable_shouldYield,At=e.unstable_requestPaint,ft=e.unstable_now,lr=e.unstable_getCurrentPriorityLevel,Wa=e.unstable_ImmediatePriority,Gi=e.unstable_UserBlockingPriority,Xo=e.unstable_NormalPriority,pu=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Kt=e.log,kp=e.unstable_setDisableYieldValue,Xa=null,Cn=null;function Kr(a){if(typeof Kt=="function"&&kp(a),Cn&&typeof Cn.setStrictMode=="function")try{Cn.setStrictMode(Xa,a)}catch{}}var rn=Math.clz32?Math.clz32:Hi,Fb=Math.log,Qo=Math.LN2;function Hi(a){return a>>>=0,a===0?32:31-(Fb(a)/Qo|0)|0}var Zo=256,qi=4194304;function da(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Yi(a,o,c){var d=a.pendingLanes;if(d===0)return 0;var y=0,b=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var _=d&134217727;return _!==0?(d=_&~b,d!==0?y=da(d):(w&=_,w!==0?y=da(w):c||(c=_&~a,c!==0&&(y=da(c))))):(_=d&~b,_!==0?y=da(_):w!==0?y=da(w):c||(c=d&~a,c!==0&&(y=da(c)))),y===0?0:o!==0&&o!==y&&(o&b)===0&&(b=y&-y,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:y}function Fi(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function jp(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(){var a=Zo;return Zo<<=1,(Zo&4194048)===0&&(Zo=256),a}function Jo(){var a=qi;return qi<<=1,(qi&62914560)===0&&(qi=4194304),a}function es(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Qa(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function hu(a,o,c,d,y,b){var w=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var _=a.entanglements,I=a.expirationTimes,K=a.hiddenUpdates;for(c=w&~c;0<c;){var ae=31-rn(c),le=1<<ae;_[ae]=0,I[ae]=-1;var X=K[ae];if(X!==null)for(K[ae]=null,ae=0;ae<X.length;ae++){var Q=X[ae];Q!==null&&(Q.lane&=-536870913)}c&=~le}d!==0&&ts(a,d,0),b!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=b&~(w&~o))}function ts(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-rn(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|c&4194090}function pl(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var d=31-rn(c),y=1<<d;y&o|a[d]&o&&(a[d]|=o),c&=~y}}function Vi(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function hl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Mp(){var a=ee.p;return a!==0?a:(a=window.event,a===void 0?32:K1(a.type))}function Ki(a,o){var c=ee.p;try{return ee.p=a,o()}finally{ee.p=c}}var Mr=Math.random().toString(36).slice(2),an="__reactFiber$"+Mr,Pn="__reactProps$"+Mr,ot="__reactContainer$"+Mr,cr="__reactEvents$"+Mr,Wi="__reactListeners$"+Mr,ml="__reactHandles$"+Mr,Gn="__reactResources$"+Mr,Hn="__reactMarker$"+Mr;function fa(a){delete a[an],delete a[Pn],delete a[cr],delete a[Wi],delete a[ml]}function qn(a){var o=a[an];if(o)return o;for(var c=a.parentNode;c;){if(o=c[ot]||c[an]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=j1(a);a!==null;){if(c=a[an])return c;a=j1(a)}return o}a=c,c=a.parentNode}return null}function Nt(a){if(a=a[an]||a[ot]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function kn(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function jn(a){var o=a[Gn];return o||(o=a[Gn]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Et(a){a[Hn]=!0}var Xi=new Set,ur={};function Yn(a,o){Rr(a,o),Rr(a+"Capture",o)}function Rr(a,o){for(ur[a]=o,a=0;a<o.length;a++)Xi.add(o[a])}var ct=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dr={},mu={};function gu(a){return fe.call(mu,a)?!0:fe.call(dr,a)?!1:ct.test(a)?mu[a]=!0:(dr[a]=!0,!1)}function ns(a,o,c){if(gu(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function Qi(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function Ir(a,o,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+d)}}var rs,Lr;function fr(a){if(rs===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);rs=o&&o[1]||"",Lr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rs+a+Lr}var gl=!1;function as(a,o){if(!a||gl)return"";gl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Q){var X=Q}Reflect.construct(a,[],le)}else{try{le.call()}catch(Q){X=Q}a.call(le.prototype)}}else{try{throw Error()}catch(Q){X=Q}(le=a())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(Q){if(Q&&X&&typeof Q.stack=="string")return[Q.stack,X.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),w=b[0],_=b[1];if(w&&_){var I=w.split(`
`),K=_.split(`
`);for(y=d=0;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(d===I.length||y===K.length)for(d=I.length-1,y=K.length-1;1<=d&&0<=y&&I[d]!==K[y];)y--;for(;1<=d&&0<=y;d--,y--)if(I[d]!==K[y]){if(d!==1||y!==1)do if(d--,y--,0>y||I[d]!==K[y]){var ae=`
`+I[d].replace(" at new "," at ");return a.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",a.displayName)),ae}while(1<=d&&0<=y);break}}}finally{gl=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?fr(c):""}function yu(a){switch(a.tag){case 26:case 27:case 5:return fr(a.type);case 16:return fr("Lazy");case 13:return fr("Suspense");case 19:return fr("SuspenseList");case 0:case 15:return as(a.type,!1);case 11:return as(a.type.render,!1);case 1:return as(a.type,!0);case 31:return fr("Activity");default:return""}}function Xr(a){try{var o="";do o+=yu(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function on(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Zi(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ji(a){var o=Zi(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),d=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,b=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(w){d=""+w,b.call(this,w)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function is(a){a._valueTracker||(a._valueTracker=Ji(a))}function yl(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return a&&(d=Zi(a)?a.checked?"true":"false":a.value),a=d,a!==c?(o.setValue(a),!0):!1}function Za(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var vu=/[\n"\\]/g;function wn(a){return a.replace(vu,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function bu(a,o,c,d,y,b,w,_){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),o!=null?w==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+on(o)):a.value!==""+on(o)&&(a.value=""+on(o)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),o!=null?Su(a,w,on(o)):c!=null?Su(a,w,on(c)):d!=null&&a.removeAttribute("value"),y==null&&b!=null&&(a.defaultChecked=!!b),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+on(_):a.removeAttribute("name")}function xu(a,o,c,d,y,b,w,_){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;c=c!=null?""+on(c):"",o=o!=null?""+on(o):c,_||o===a.value||(a.value=o),a.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=_?a.checked:!!d,a.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function Su(a,o,c){o==="number"&&Za(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function eo(a,o,c,d){if(a=a.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=o.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&d&&(a[c].defaultSelected=!0)}else{for(c=""+on(c),o=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,d&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function Rp(a,o,c){if(o!=null&&(o=""+on(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+on(c):""}function Au(a,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(ne(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=on(o),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d)}function to(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var Vb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eu(a,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,c):typeof c!="number"||c===0||Vb.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function vl(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&Eu(a,y,d)}else for(var b in o)o.hasOwnProperty(b)&&Eu(a,b,o[b])}function Ja(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var no=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pr(a){return Cu.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var $r=null;function bl(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var pa=null,Ke=null;function ei(a){var o=Nt(a);if(o&&(a=o.stateNode)){var c=a[Pn]||null;e:switch(a=o.stateNode,o.type){case"input":if(bu(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+wn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==a&&d.form===a.form){var y=d[Pn]||null;if(!y)throw Error(r(90));bu(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===a.form&&yl(d)}break e;case"textarea":Rp(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&eo(a,!!c.multiple,o,!1)}}}var Qr=!1;function xl(a,o,c){if(Qr)return a(o,c);Qr=!0;try{var d=a(o);return d}finally{if(Qr=!1,(pa!==null||Ke!==null)&&(hd(),pa&&(o=pa,a=Ke,Ke=pa=null,ei(o),a)))for(o=0;o<a.length;o++)ei(a[o])}}function os(a,o){var c=a.stateNode;if(c===null)return null;var d=c[Pn]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$t=!1;if(Zr)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){$t=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{$t=!1}var ha=null,Sl=null,ti=null;function Ip(){if(ti)return ti;var a,o=Sl,c=o.length,d,y="value"in ha?ha.value:ha.textContent,b=y.length;for(a=0;a<c&&o[a]===y[a];a++);var w=c-a;for(d=1;d<=w&&o[c-d]===y[b-d];d++);return ti=y.slice(a,1<d?1-d:void 0)}function Al(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function El(){return!0}function Pu(){return!1}function hn(a){function o(c,d,y,b,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(c=a[_],this[_]=c?c(b):b[_]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?El:Pu,this.isPropagationStopped=Pu,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),o}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Te=hn(ma),Ie=h({},ma,{view:0,detail:0}),ro=hn(Ie),ni,ri,Jr,ao=h({},Ie,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Jr&&(Jr&&a.type==="mousemove"?(ni=a.screenX-Jr.screenX,ri=a.screenY-Jr.screenY):ri=ni=0,Jr=a),ni)},movementY:function(a){return"movementY"in a?a.movementY:ri}}),Cl=hn(ao),wu=h({},ao,{dataTransfer:0}),Lp=hn(wu),ga=h({},Ie,{relatedTarget:0}),Bt=hn(ga),ss=h({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Ou=hn(ss),$p=h({},ma,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Pl=hn($p),Bp=h({},ma,{data:0}),Tu=hn(Bp),Up={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hp(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Gp[a])?!!o[a]:!1}function wl(){return Hp}var qp=h({},Ie,{key:function(a){if(a.key){var o=Up[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Al(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?zp[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wl,charCode:function(a){return a.type==="keypress"?Al(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Al(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Yp=hn(qp),Fp=h({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=hn(Fp),Du=h({},Ie,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wl}),Vp=hn(Du),Kp=h({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wp=hn(Kp),Xp=h({},ao,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Qp=hn(Xp),Nu=h({},ma,{newState:0,oldState:0}),Zp=hn(Nu),Jp=[9,13,27,32],Ol=Zr&&"CompositionEvent"in window,io=null;Zr&&"documentMode"in document&&(io=document.documentMode);var eh=Zr&&"TextEvent"in window&&!io,ku=Zr&&(!Ol||io&&8<io&&11>=io),ju=" ",Mu=!1;function B(a,o){switch(a){case"keyup":return Jp.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var he=!1;function me(a,o){switch(a){case"compositionend":return Z(o);case"keypress":return o.which!==32?null:(Mu=!0,ju);case"textInput":return a=o.data,a===ju&&Mu?null:a;default:return null}}function Se(a,o){if(he)return a==="compositionend"||!Ol&&B(a,o)?(a=Ip(),ti=Sl=ha=null,he=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ku&&o.locale!=="ko"?null:o.data;default:return null}}var ke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Me(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!ke[a.type]:o==="textarea"}function We(a,o,c,d){pa?Ke?Ke.push(d):Ke=[d]:pa=d,o=xd(o,"onChange"),0<o.length&&(c=new Te("onChange","change",null,c,d),a.push({event:c,listeners:o}))}var Ut=null,hr=null;function ai(a){E1(a,0)}function Br(a){var o=kn(a);if(yl(o))return a}function ya(a,o){if(a==="change")return o}var mn=!1;if(Zr){var oo;if(Zr){var va="oninput"in document;if(!va){var ba=document.createElement("div");ba.setAttribute("oninput","return;"),va=typeof ba.oninput=="function"}oo=va}else oo=!1;mn=oo&&(!document.documentMode||9<document.documentMode)}function Ru(){Ut&&(Ut.detachEvent("onpropertychange",Tl),hr=Ut=null)}function Tl(a){if(a.propertyName==="value"&&Br(hr)){var o=[];We(o,hr,a,bl(a)),xl(ai,o)}}function so(a,o,c){a==="focusin"?(Ru(),Ut=o,hr=c,Ut.attachEvent("onpropertychange",Tl)):a==="focusout"&&Ru()}function th(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Br(hr)}function _l(a,o){if(a==="click")return Br(o)}function Kb(a,o){if(a==="input"||a==="change")return Br(o)}function TN(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Fn=typeof Object.is=="function"?Object.is:TN;function Dl(a,o){if(Fn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!fe.call(o,y)||!Fn(a[y],o[y]))return!1}return!0}function Wb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Xb(a,o){var c=Wb(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=o&&d>=o)return{node:c,offset:o-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Wb(c)}}function Qb(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Qb(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Zb(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Za(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=Za(a.document)}return o}function nh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var _N=Zr&&"documentMode"in document&&11>=document.documentMode,ls=null,rh=null,Nl=null,ah=!1;function Jb(a,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ah||ls==null||ls!==Za(d)||(d=ls,"selectionStart"in d&&nh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Nl&&Dl(Nl,d)||(Nl=d,d=xd(rh,"onSelect"),0<d.length&&(o=new Te("onSelect","select",null,o,c),a.push({event:o,listeners:d}),o.target=ls)))}function lo(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var cs={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},ih={},ex={};Zr&&(ex=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function co(a){if(ih[a])return ih[a];if(!cs[a])return a;var o=cs[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in ex)return ih[a]=o[c];return a}var tx=co("animationend"),nx=co("animationiteration"),rx=co("animationstart"),DN=co("transitionrun"),NN=co("transitionstart"),kN=co("transitioncancel"),ax=co("transitionend"),ix=new Map,oh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oh.push("scrollEnd");function Ur(a,o){ix.set(a,o),Yn(o,[a])}var ox=new WeakMap;function mr(a,o){if(typeof a=="object"&&a!==null){var c=ox.get(a);return c!==void 0?c:(o={value:a,source:o,stack:Xr(o)},ox.set(a,o),o)}return{value:a,source:o,stack:Xr(o)}}var gr=[],us=0,sh=0;function Iu(){for(var a=us,o=sh=us=0;o<a;){var c=gr[o];gr[o++]=null;var d=gr[o];gr[o++]=null;var y=gr[o];gr[o++]=null;var b=gr[o];if(gr[o++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}b!==0&&sx(c,y,b)}}function Lu(a,o,c,d){gr[us++]=a,gr[us++]=o,gr[us++]=c,gr[us++]=d,sh|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function lh(a,o,c,d){return Lu(a,o,c,d),$u(a)}function ds(a,o){return Lu(a,null,null,o),$u(a)}function sx(a,o,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=a.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(y=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,y&&o!==null&&(y=31-rn(c),a=b.hiddenUpdates,d=a[y],d===null?a[y]=[o]:d.push(o),o.lane=c|536870912),b):null}function $u(a){if(50<nc)throw nc=0,hm=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var fs={};function jN(a,o,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(a,o,c,d){return new jN(a,o,c,d)}function ch(a){return a=a.prototype,!(!a||!a.isReactComponent)}function xa(a,o){var c=a.alternate;return c===null?(c=Vn(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function lx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Bu(a,o,c,d,y,b){var w=0;if(d=a,typeof a=="function")ch(a)&&(w=1);else if(typeof a=="string")w=Rk(a,c,ge.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case z:return a=Vn(31,c,o,y),a.elementType=z,a.lanes=b,a;case S:return uo(c.children,y,b,o);case A:w=8,y|=24;break;case C:return a=Vn(12,c,o,y|2),a.elementType=C,a.lanes=b,a;case N:return a=Vn(13,c,o,y),a.elementType=N,a.lanes=b,a;case D:return a=Vn(19,c,o,y),a.elementType=D,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case P:case O:w=10;break e;case T:w=9;break e;case k:w=11;break e;case j:w=14;break e;case R:w=16,d=null;break e}w=29,c=Error(r(130,a===null?"null":typeof a,"")),d=null}return o=Vn(w,c,o,y),o.elementType=a,o.type=d,o.lanes=b,o}function uo(a,o,c,d){return a=Vn(7,a,d,o),a.lanes=c,a}function uh(a,o,c){return a=Vn(6,a,null,o),a.lanes=c,a}function dh(a,o,c){return o=Vn(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var ps=[],hs=0,Uu=null,zu=0,yr=[],vr=0,fo=null,Sa=1,Aa="";function po(a,o){ps[hs++]=zu,ps[hs++]=Uu,Uu=a,zu=o}function cx(a,o,c){yr[vr++]=Sa,yr[vr++]=Aa,yr[vr++]=fo,fo=a;var d=Sa;a=Aa;var y=32-rn(d)-1;d&=~(1<<y),c+=1;var b=32-rn(o)+y;if(30<b){var w=y-y%5;b=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Sa=1<<32-rn(o)+y|c<<y|d,Aa=b+a}else Sa=1<<b|c<<y|d,Aa=a}function fh(a){a.return!==null&&(po(a,1),cx(a,1,0))}function ph(a){for(;a===Uu;)Uu=ps[--hs],ps[hs]=null,zu=ps[--hs],ps[hs]=null;for(;a===fo;)fo=yr[--vr],yr[vr]=null,Aa=yr[--vr],yr[vr]=null,Sa=yr[--vr],yr[vr]=null}var On=null,Ct=null,Xe=!1,ho=null,ea=!1,hh=Error(r(519));function mo(a){var o=Error(r(418,""));throw Ml(mr(o,a)),hh}function ux(a){var o=a.stateNode,c=a.type,d=a.memoizedProps;switch(o[an]=a,o[Pn]=d,c){case"dialog":Ue("cancel",o),Ue("close",o);break;case"iframe":case"object":case"embed":Ue("load",o);break;case"video":case"audio":for(c=0;c<ac.length;c++)Ue(ac[c],o);break;case"source":Ue("error",o);break;case"img":case"image":case"link":Ue("error",o),Ue("load",o);break;case"details":Ue("toggle",o);break;case"input":Ue("invalid",o),xu(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),is(o);break;case"select":Ue("invalid",o);break;case"textarea":Ue("invalid",o),Au(o,d.value,d.defaultValue,d.children),is(o)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||O1(o.textContent,c)?(d.popover!=null&&(Ue("beforetoggle",o),Ue("toggle",o)),d.onScroll!=null&&Ue("scroll",o),d.onScrollEnd!=null&&Ue("scrollend",o),d.onClick!=null&&(o.onclick=Sd),o=!0):o=!1,o||mo(a)}function dx(a){for(On=a.return;On;)switch(On.tag){case 5:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:On=On.return}}function kl(a){if(a!==On)return!1;if(!Xe)return dx(a),Xe=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Dm(a.type,a.memoizedProps)),c=!c),c&&Ct&&mo(a),dx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){Ct=Gr(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}Ct=null}}else o===27?(o=Ct,xi(a.type)?(a=Mm,Mm=null,Ct=a):Ct=o):Ct=On?Gr(a.stateNode.nextSibling):null;return!0}function jl(){Ct=On=null,Xe=!1}function fx(){var a=ho;return a!==null&&(In===null?In=a:In.push.apply(In,a),ho=null),a}function Ml(a){ho===null?ho=[a]:ho.push(a)}var mh=F(null),go=null,Ea=null;function ii(a,o,c){ue(mh,o._currentValue),o._currentValue=c}function Ca(a){a._currentValue=mh.current,V(mh)}function gh(a,o,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===c)break;a=a.return}}function yh(a,o,c,d){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var b=y.dependencies;if(b!==null){var w=y.child;b=b.firstContext;e:for(;b!==null;){var _=b;b=y;for(var I=0;I<o.length;I++)if(_.context===o[I]){b.lanes|=c,_=b.alternate,_!==null&&(_.lanes|=c),gh(b.return,c,a),d||(w=null);break e}b=_.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),gh(w,c,a),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===a){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function Rl(a,o,c,d){a=null;for(var y=o,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var _=y.type;Fn(y.pendingProps.value,w.value)||(a!==null?a.push(_):a=[_])}}else if(y===ve.current){if(w=y.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(uc):a=[uc])}y=y.return}a!==null&&yh(o,a,c,d),o.flags|=262144}function Gu(a){for(a=a.firstContext;a!==null;){if(!Fn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function yo(a){go=a,Ea=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function gn(a){return px(go,a)}function Hu(a,o){return go===null&&yo(a),px(a,o)}function px(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ea===null){if(a===null)throw Error(r(308));Ea=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Ea=Ea.next=o;return c}var MN=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},RN=e.unstable_scheduleCallback,IN=e.unstable_NormalPriority,zt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vh(){return{controller:new MN,data:new Map,refCount:0}}function Il(a){a.refCount--,a.refCount===0&&RN(IN,function(){a.controller.abort()})}var Ll=null,bh=0,ms=0,gs=null;function LN(a,o){if(Ll===null){var c=Ll=[];bh=0,ms=Sm(),gs={status:"pending",value:void 0,then:function(d){c.push(d)}}}return bh++,o.then(hx,hx),o}function hx(){if(--bh===0&&Ll!==null){gs!==null&&(gs.status="fulfilled");var a=Ll;Ll=null,ms=0,gs=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function $N(a,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var mx=L.S;L.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&LN(a,o),mx!==null&&mx(a,o)};var vo=F(null);function xh(){var a=vo.current;return a!==null?a:ut.pooledCache}function qu(a,o){o===null?ue(vo,vo.current):ue(vo,o.pool)}function gx(){var a=xh();return a===null?null:{parent:zt._currentValue,pool:a}}var $l=Error(r(460)),yx=Error(r(474)),Yu=Error(r(542)),Sh={then:function(){}};function vx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Fu(){}function bx(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Fu,Fu),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Sx(a),a;default:if(typeof o.status=="string")o.then(Fu,Fu);else{if(a=ut,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Sx(a),a}throw Bl=o,$l}}var Bl=null;function xx(){if(Bl===null)throw Error(r(459));var a=Bl;return Bl=null,a}function Sx(a){if(a===$l||a===Yu)throw Error(r(483))}var oi=!1;function Ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function si(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function li(a,o,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Qe&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=$u(a),sx(a,null,c),o}return Lu(a,d,o,c),$u(a)}function Ul(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,pl(a,c)}}function Ch(a,o){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?y=b=o:b=b.next=o}else y=b=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var Ph=!1;function zl(){if(Ph){var a=gs;if(a!==null)throw a}}function Gl(a,o,c,d){Ph=!1;var y=a.updateQueue;oi=!1;var b=y.firstBaseUpdate,w=y.lastBaseUpdate,_=y.shared.pending;if(_!==null){y.shared.pending=null;var I=_,K=I.next;I.next=null,w===null?b=K:w.next=K,w=I;var ae=a.alternate;ae!==null&&(ae=ae.updateQueue,_=ae.lastBaseUpdate,_!==w&&(_===null?ae.firstBaseUpdate=K:_.next=K,ae.lastBaseUpdate=I))}if(b!==null){var le=y.baseState;w=0,ae=K=I=null,_=b;do{var X=_.lane&-536870913,Q=X!==_.lane;if(Q?(Ge&X)===X:(d&X)===X){X!==0&&X===ms&&(Ph=!0),ae!==null&&(ae=ae.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Ne=a,_e=_;X=o;var at=c;switch(_e.tag){case 1:if(Ne=_e.payload,typeof Ne=="function"){le=Ne.call(at,le,X);break e}le=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=_e.payload,X=typeof Ne=="function"?Ne.call(at,le,X):Ne,X==null)break e;le=h({},le,X);break e;case 2:oi=!0}}X=_.callback,X!==null&&(a.flags|=64,Q&&(a.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[X]:Q.push(X))}else Q={lane:X,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ae===null?(K=ae=Q,I=le):ae=ae.next=Q,w|=X;if(_=_.next,_===null){if(_=y.shared.pending,_===null)break;Q=_,_=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);ae===null&&(I=le),y.baseState=I,y.firstBaseUpdate=K,y.lastBaseUpdate=ae,b===null&&(y.shared.lanes=0),gi|=w,a.lanes=w,a.memoizedState=le}}function Ax(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Ex(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Ax(c[a],o)}var ys=F(null),Vu=F(0);function Cx(a,o){a=Na,ue(Vu,a),ue(ys,o),Na=a|o.baseLanes}function wh(){ue(Vu,Na),ue(ys,ys.current)}function Oh(){Na=Vu.current,V(ys),V(Vu)}var ci=0,Le=null,nt=null,kt=null,Ku=!1,vs=!1,bo=!1,Wu=0,Hl=0,bs=null,BN=0;function Ot(){throw Error(r(321))}function Th(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!Fn(a[c],o[c]))return!1;return!0}function _h(a,o,c,d,y,b){return ci=b,Le=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=a===null||a.memoizedState===null?sS:lS,bo=!1,b=c(d,y),bo=!1,vs&&(b=wx(o,c,d,y)),Px(a),b}function Px(a){L.H=td;var o=nt!==null&&nt.next!==null;if(ci=0,kt=nt=Le=null,Ku=!1,Hl=0,bs=null,o)throw Error(r(300));a===null||Wt||(a=a.dependencies,a!==null&&Gu(a)&&(Wt=!0))}function wx(a,o,c,d){Le=a;var y=0;do{if(vs&&(bs=null),Hl=0,vs=!1,25<=y)throw Error(r(301));if(y+=1,kt=nt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}L.H=FN,b=o(c,d)}while(vs);return b}function UN(){var a=L.H,o=a.useState()[0];return o=typeof o.then=="function"?ql(o):o,a=a.useState()[0],(nt!==null?nt.memoizedState:null)!==a&&(Le.flags|=1024),o}function Dh(){var a=Wu!==0;return Wu=0,a}function Nh(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function kh(a){if(Ku){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ku=!1}ci=0,kt=nt=Le=null,vs=!1,Hl=Wu=0,bs=null}function Mn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Le.memoizedState=kt=a:kt=kt.next=a,kt}function jt(){if(nt===null){var a=Le.alternate;a=a!==null?a.memoizedState:null}else a=nt.next;var o=kt===null?Le.memoizedState:kt.next;if(o!==null)kt=o,nt=a;else{if(a===null)throw Le.alternate===null?Error(r(467)):Error(r(310));nt=a,a={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},kt===null?Le.memoizedState=kt=a:kt=kt.next=a}return kt}function jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(a){var o=Hl;return Hl+=1,bs===null&&(bs=[]),a=bx(bs,a,o),o=Le,(kt===null?o.memoizedState:kt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?sS:lS),a}function Xu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ql(a);if(a.$$typeof===O)return gn(a)}throw Error(r(438,String(a)))}function Mh(a){var o=null,c=Le.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=Le.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=jh(),Le.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),d=0;d<a;d++)c[d]=W;return o.index++,c}function Pa(a,o){return typeof o=="function"?o(a):o}function Qu(a){var o=jt();return Rh(o,nt,a)}function Rh(a,o,c){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=a.baseQueue,b=d.pending;if(b!==null){if(y!==null){var w=y.next;y.next=b.next,b.next=w}o.baseQueue=y=b,d.pending=null}if(b=a.baseState,y===null)a.memoizedState=b;else{o=y.next;var _=w=null,I=null,K=o,ae=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(Ge&le)===le:(ci&le)===le){var X=K.revertLane;if(X===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===ms&&(ae=!0);else if((ci&X)===X){K=K.next,X===ms&&(ae=!0);continue}else le={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(_=I=le,w=b):I=I.next=le,Le.lanes|=X,gi|=X;le=K.action,bo&&c(b,le),b=K.hasEagerState?K.eagerState:c(b,le)}else X={lane:le,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(_=I=X,w=b):I=I.next=X,Le.lanes|=le,gi|=le;K=K.next}while(K!==null&&K!==o);if(I===null?w=b:I.next=_,!Fn(b,a.memoizedState)&&(Wt=!0,ae&&(c=gs,c!==null)))throw c;a.memoizedState=b,a.baseState=w,a.baseQueue=I,d.lastRenderedState=b}return y===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Ih(a){var o=jt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var d=c.dispatch,y=c.pending,b=o.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do b=a(b,w.action),w=w.next;while(w!==y);Fn(b,o.memoizedState)||(Wt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Ox(a,o,c){var d=Le,y=jt(),b=Xe;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!Fn((nt||y).memoizedState,c);w&&(y.memoizedState=c,Wt=!0),y=y.queue;var _=Dx.bind(null,d,y,a);if(Yl(2048,8,_,[a]),y.getSnapshot!==o||w||kt!==null&&kt.memoizedState.tag&1){if(d.flags|=2048,xs(9,Zu(),_x.bind(null,d,y,c,o),null),ut===null)throw Error(r(349));b||(ci&124)!==0||Tx(d,o,c)}return c}function Tx(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=Le.updateQueue,o===null?(o=jh(),Le.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function _x(a,o,c,d){o.value=c,o.getSnapshot=d,Nx(o)&&kx(a)}function Dx(a,o,c){return c(function(){Nx(o)&&kx(a)})}function Nx(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!Fn(a,c)}catch{return!0}}function kx(a){var o=ds(a,2);o!==null&&Zn(o,a,2)}function Lh(a){var o=Mn();if(typeof a=="function"){var c=a;if(a=c(),bo){Kr(!0);try{c()}finally{Kr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:a},o}function jx(a,o,c,d){return a.baseState=c,Rh(a,nt,typeof d=="function"?d:Pa)}function zN(a,o,c,d,y){if(ed(a))throw Error(r(485));if(a=o.action,a!==null){var b={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};L.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,Mx(o,b)):(b.next=c.next,o.pending=c.next=b)}}function Mx(a,o){var c=o.action,d=o.payload,y=a.state;if(o.isTransition){var b=L.T,w={};L.T=w;try{var _=c(y,d),I=L.S;I!==null&&I(w,_),Rx(a,o,_)}catch(K){$h(a,o,K)}finally{L.T=b}}else try{b=c(y,d),Rx(a,o,b)}catch(K){$h(a,o,K)}}function Rx(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Ix(a,o,d)},function(d){return $h(a,o,d)}):Ix(a,o,c)}function Ix(a,o,c){o.status="fulfilled",o.value=c,Lx(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,Mx(a,c)))}function $h(a,o,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,Lx(o),o=o.next;while(o!==d)}a.action=null}function Lx(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function $x(a,o){return o}function Bx(a,o){if(Xe){var c=ut.formState;if(c!==null){e:{var d=Le;if(Xe){if(Ct){t:{for(var y=Ct,b=ea;y.nodeType!==8;){if(!b){y=null;break t}if(y=Gr(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Ct=Gr(y.nextSibling),d=y.data==="F!";break e}}mo(d)}d=!1}d&&(o=c[0])}}return c=Mn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$x,lastRenderedState:o},c.queue=d,c=aS.bind(null,Le,d),d.dispatch=c,d=Lh(!1),b=Hh.bind(null,Le,!1,d.queue),d=Mn(),y={state:o,dispatch:null,action:a,pending:null},d.queue=y,c=zN.bind(null,Le,y,b,c),y.dispatch=c,d.memoizedState=a,[o,c,!1]}function Ux(a){var o=jt();return zx(o,nt,a)}function zx(a,o,c){if(o=Rh(a,o,$x)[0],a=Qu(Pa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=ql(o)}catch(w){throw w===$l?Yu:w}else d=o;o=jt();var y=o.queue,b=y.dispatch;return c!==o.memoizedState&&(Le.flags|=2048,xs(9,Zu(),GN.bind(null,y,c),null)),[d,b,a]}function GN(a,o){a.action=o}function Gx(a){var o=jt(),c=nt;if(c!==null)return zx(o,c,a);jt(),o=o.memoizedState,c=jt();var d=c.queue.dispatch;return c.memoizedState=a,[o,d,!1]}function xs(a,o,c,d){return a={tag:a,create:c,deps:d,inst:o,next:null},o=Le.updateQueue,o===null&&(o=jh(),Le.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,o.lastEffect=a),a}function Zu(){return{destroy:void 0,resource:void 0}}function Hx(){return jt().memoizedState}function Ju(a,o,c,d){var y=Mn();d=d===void 0?null:d,Le.flags|=a,y.memoizedState=xs(1|o,Zu(),c,d)}function Yl(a,o,c,d){var y=jt();d=d===void 0?null:d;var b=y.memoizedState.inst;nt!==null&&d!==null&&Th(d,nt.memoizedState.deps)?y.memoizedState=xs(o,b,c,d):(Le.flags|=a,y.memoizedState=xs(1|o,b,c,d))}function qx(a,o){Ju(8390656,8,a,o)}function Yx(a,o){Yl(2048,8,a,o)}function Fx(a,o){return Yl(4,2,a,o)}function Vx(a,o){return Yl(4,4,a,o)}function Kx(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Wx(a,o,c){c=c!=null?c.concat([a]):null,Yl(4,4,Kx.bind(null,o,a),c)}function Bh(){}function Xx(a,o){var c=jt();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&Th(o,d[1])?d[0]:(c.memoizedState=[a,o],a)}function Qx(a,o){var c=jt();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&Th(o,d[1]))return d[0];if(d=a(),bo){Kr(!0);try{a()}finally{Kr(!1)}}return c.memoizedState=[d,o],d}function Uh(a,o,c){return c===void 0||(ci&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=e1(),Le.lanes|=a,gi|=a,c)}function Zx(a,o,c,d){return Fn(c,o)?c:ys.current!==null?(a=Uh(a,c,d),Fn(a,o)||(Wt=!0),a):(ci&42)===0?(Wt=!0,a.memoizedState=c):(a=e1(),Le.lanes|=a,gi|=a,o)}function Jx(a,o,c,d,y){var b=ee.p;ee.p=b!==0&&8>b?b:8;var w=L.T,_={};L.T=_,Hh(a,!1,o,c);try{var I=y(),K=L.S;if(K!==null&&K(_,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ae=$N(I,d);Fl(a,o,ae,Qn(a))}else Fl(a,o,d,Qn(a))}catch(le){Fl(a,o,{then:function(){},status:"rejected",reason:le},Qn())}finally{ee.p=b,L.T=w}}function HN(){}function zh(a,o,c,d){if(a.tag!==5)throw Error(r(476));var y=eS(a).queue;Jx(a,y,o,ce,c===null?HN:function(){return tS(a),c(d)})}function eS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:ce},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function tS(a){var o=eS(a).next.queue;Fl(a,o,{},Qn())}function Gh(){return gn(uc)}function nS(){return jt().memoizedState}function rS(){return jt().memoizedState}function qN(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=Qn();a=si(c);var d=li(o,a,c);d!==null&&(Zn(d,o,c),Ul(d,o,c)),o={cache:vh()},a.payload=o;return}o=o.return}}function YN(a,o,c){var d=Qn();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},ed(a)?iS(o,c):(c=lh(a,o,c,d),c!==null&&(Zn(c,a,d),oS(c,o,d)))}function aS(a,o,c){var d=Qn();Fl(a,o,c,d)}function Fl(a,o,c,d){var y={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(ed(a))iS(o,y);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var w=o.lastRenderedState,_=b(w,c);if(y.hasEagerState=!0,y.eagerState=_,Fn(_,w))return Lu(a,o,y,0),ut===null&&Iu(),!1}catch{}finally{}if(c=lh(a,o,y,d),c!==null)return Zn(c,a,d),oS(c,o,d),!0}return!1}function Hh(a,o,c,d){if(d={lane:2,revertLane:Sm(),action:d,hasEagerState:!1,eagerState:null,next:null},ed(a)){if(o)throw Error(r(479))}else o=lh(a,c,d,2),o!==null&&Zn(o,a,2)}function ed(a){var o=a.alternate;return a===Le||o!==null&&o===Le}function iS(a,o){vs=Ku=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function oS(a,o,c){if((c&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,pl(a,c)}}var td={readContext:gn,use:Xu,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},sS={readContext:gn,use:Xu,useCallback:function(a,o){return Mn().memoizedState=[a,o===void 0?null:o],a},useContext:gn,useEffect:qx,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Ju(4194308,4,Kx.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Ju(4194308,4,a,o)},useInsertionEffect:function(a,o){Ju(4,2,a,o)},useMemo:function(a,o){var c=Mn();o=o===void 0?null:o;var d=a();if(bo){Kr(!0);try{a()}finally{Kr(!1)}}return c.memoizedState=[d,o],d},useReducer:function(a,o,c){var d=Mn();if(c!==void 0){var y=c(o);if(bo){Kr(!0);try{c(o)}finally{Kr(!1)}}}else y=o;return d.memoizedState=d.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},d.queue=a,a=a.dispatch=YN.bind(null,Le,a),[d.memoizedState,a]},useRef:function(a){var o=Mn();return a={current:a},o.memoizedState=a},useState:function(a){a=Lh(a);var o=a.queue,c=aS.bind(null,Le,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:Bh,useDeferredValue:function(a,o){var c=Mn();return Uh(c,a,o)},useTransition:function(){var a=Lh(!1);return a=Jx.bind(null,Le,a.queue,!0,!1),Mn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var d=Le,y=Mn();if(Xe){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),ut===null)throw Error(r(349));(Ge&124)!==0||Tx(d,o,c)}y.memoizedState=c;var b={value:c,getSnapshot:o};return y.queue=b,qx(Dx.bind(null,d,b,a),[a]),d.flags|=2048,xs(9,Zu(),_x.bind(null,d,b,c,o),null),c},useId:function(){var a=Mn(),o=ut.identifierPrefix;if(Xe){var c=Aa,d=Sa;c=(d&~(1<<32-rn(d)-1)).toString(32)+c,o=""+o+"R"+c,c=Wu++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=BN++,o=""+o+"r"+c.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:Gh,useFormState:Bx,useActionState:Bx,useOptimistic:function(a){var o=Mn();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Hh.bind(null,Le,!0,c),c.dispatch=o,[a,o]},useMemoCache:Mh,useCacheRefresh:function(){return Mn().memoizedState=qN.bind(null,Le)}},lS={readContext:gn,use:Xu,useCallback:Xx,useContext:gn,useEffect:Yx,useImperativeHandle:Wx,useInsertionEffect:Fx,useLayoutEffect:Vx,useMemo:Qx,useReducer:Qu,useRef:Hx,useState:function(){return Qu(Pa)},useDebugValue:Bh,useDeferredValue:function(a,o){var c=jt();return Zx(c,nt.memoizedState,a,o)},useTransition:function(){var a=Qu(Pa)[0],o=jt().memoizedState;return[typeof a=="boolean"?a:ql(a),o]},useSyncExternalStore:Ox,useId:nS,useHostTransitionStatus:Gh,useFormState:Ux,useActionState:Ux,useOptimistic:function(a,o){var c=jt();return jx(c,nt,a,o)},useMemoCache:Mh,useCacheRefresh:rS},FN={readContext:gn,use:Xu,useCallback:Xx,useContext:gn,useEffect:Yx,useImperativeHandle:Wx,useInsertionEffect:Fx,useLayoutEffect:Vx,useMemo:Qx,useReducer:Ih,useRef:Hx,useState:function(){return Ih(Pa)},useDebugValue:Bh,useDeferredValue:function(a,o){var c=jt();return nt===null?Uh(c,a,o):Zx(c,nt.memoizedState,a,o)},useTransition:function(){var a=Ih(Pa)[0],o=jt().memoizedState;return[typeof a=="boolean"?a:ql(a),o]},useSyncExternalStore:Ox,useId:nS,useHostTransitionStatus:Gh,useFormState:Gx,useActionState:Gx,useOptimistic:function(a,o){var c=jt();return nt!==null?jx(c,nt,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Mh,useCacheRefresh:rS},Ss=null,Vl=0;function nd(a){var o=Vl;return Vl+=1,Ss===null&&(Ss=[]),bx(Ss,a,o)}function Kl(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function rd(a,o){throw o.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function cS(a){var o=a._init;return o(a._payload)}function uS(a){function o(G,$){if(a){var Y=G.deletions;Y===null?(G.deletions=[$],G.flags|=16):Y.push($)}}function c(G,$){if(!a)return null;for(;$!==null;)o(G,$),$=$.sibling;return null}function d(G){for(var $=new Map;G!==null;)G.key!==null?$.set(G.key,G):$.set(G.index,G),G=G.sibling;return $}function y(G,$){return G=xa(G,$),G.index=0,G.sibling=null,G}function b(G,$,Y){return G.index=Y,a?(Y=G.alternate,Y!==null?(Y=Y.index,Y<$?(G.flags|=67108866,$):Y):(G.flags|=67108866,$)):(G.flags|=1048576,$)}function w(G){return a&&G.alternate===null&&(G.flags|=67108866),G}function _(G,$,Y,oe){return $===null||$.tag!==6?($=uh(Y,G.mode,oe),$.return=G,$):($=y($,Y),$.return=G,$)}function I(G,$,Y,oe){var Ee=Y.type;return Ee===S?ae(G,$,Y.props.children,oe,Y.key):$!==null&&($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&cS(Ee)===$.type)?($=y($,Y.props),Kl($,Y),$.return=G,$):($=Bu(Y.type,Y.key,Y.props,null,G.mode,oe),Kl($,Y),$.return=G,$)}function K(G,$,Y,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Y.containerInfo||$.stateNode.implementation!==Y.implementation?($=dh(Y,G.mode,oe),$.return=G,$):($=y($,Y.children||[]),$.return=G,$)}function ae(G,$,Y,oe,Ee){return $===null||$.tag!==7?($=uo(Y,G.mode,oe,Ee),$.return=G,$):($=y($,Y),$.return=G,$)}function le(G,$,Y){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=uh(""+$,G.mode,Y),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return Y=Bu($.type,$.key,$.props,null,G.mode,Y),Kl(Y,$),Y.return=G,Y;case x:return $=dh($,G.mode,Y),$.return=G,$;case R:var oe=$._init;return $=oe($._payload),le(G,$,Y)}if(ne($)||q($))return $=uo($,G.mode,Y,null),$.return=G,$;if(typeof $.then=="function")return le(G,nd($),Y);if($.$$typeof===O)return le(G,Hu(G,$),Y);rd(G,$)}return null}function X(G,$,Y,oe){var Ee=$!==null?$.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ee!==null?null:_(G,$,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:return Y.key===Ee?I(G,$,Y,oe):null;case x:return Y.key===Ee?K(G,$,Y,oe):null;case R:return Ee=Y._init,Y=Ee(Y._payload),X(G,$,Y,oe)}if(ne(Y)||q(Y))return Ee!==null?null:ae(G,$,Y,oe,null);if(typeof Y.then=="function")return X(G,$,nd(Y),oe);if(Y.$$typeof===O)return X(G,$,Hu(G,Y),oe);rd(G,Y)}return null}function Q(G,$,Y,oe,Ee){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return G=G.get(Y)||null,_($,G,""+oe,Ee);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return G=G.get(oe.key===null?Y:oe.key)||null,I($,G,oe,Ee);case x:return G=G.get(oe.key===null?Y:oe.key)||null,K($,G,oe,Ee);case R:var $e=oe._init;return oe=$e(oe._payload),Q(G,$,Y,oe,Ee)}if(ne(oe)||q(oe))return G=G.get(Y)||null,ae($,G,oe,Ee,null);if(typeof oe.then=="function")return Q(G,$,Y,nd(oe),Ee);if(oe.$$typeof===O)return Q(G,$,Y,Hu($,oe),Ee);rd($,oe)}return null}function Ne(G,$,Y,oe){for(var Ee=null,$e=null,we=$,De=$=0,Qt=null;we!==null&&De<Y.length;De++){we.index>De?(Qt=we,we=null):Qt=we.sibling;var Ye=X(G,we,Y[De],oe);if(Ye===null){we===null&&(we=Qt);break}a&&we&&Ye.alternate===null&&o(G,we),$=b(Ye,$,De),$e===null?Ee=Ye:$e.sibling=Ye,$e=Ye,we=Qt}if(De===Y.length)return c(G,we),Xe&&po(G,De),Ee;if(we===null){for(;De<Y.length;De++)we=le(G,Y[De],oe),we!==null&&($=b(we,$,De),$e===null?Ee=we:$e.sibling=we,$e=we);return Xe&&po(G,De),Ee}for(we=d(we);De<Y.length;De++)Qt=Q(we,G,De,Y[De],oe),Qt!==null&&(a&&Qt.alternate!==null&&we.delete(Qt.key===null?De:Qt.key),$=b(Qt,$,De),$e===null?Ee=Qt:$e.sibling=Qt,$e=Qt);return a&&we.forEach(function(Pi){return o(G,Pi)}),Xe&&po(G,De),Ee}function _e(G,$,Y,oe){if(Y==null)throw Error(r(151));for(var Ee=null,$e=null,we=$,De=$=0,Qt=null,Ye=Y.next();we!==null&&!Ye.done;De++,Ye=Y.next()){we.index>De?(Qt=we,we=null):Qt=we.sibling;var Pi=X(G,we,Ye.value,oe);if(Pi===null){we===null&&(we=Qt);break}a&&we&&Pi.alternate===null&&o(G,we),$=b(Pi,$,De),$e===null?Ee=Pi:$e.sibling=Pi,$e=Pi,we=Qt}if(Ye.done)return c(G,we),Xe&&po(G,De),Ee;if(we===null){for(;!Ye.done;De++,Ye=Y.next())Ye=le(G,Ye.value,oe),Ye!==null&&($=b(Ye,$,De),$e===null?Ee=Ye:$e.sibling=Ye,$e=Ye);return Xe&&po(G,De),Ee}for(we=d(we);!Ye.done;De++,Ye=Y.next())Ye=Q(we,G,De,Ye.value,oe),Ye!==null&&(a&&Ye.alternate!==null&&we.delete(Ye.key===null?De:Ye.key),$=b(Ye,$,De),$e===null?Ee=Ye:$e.sibling=Ye,$e=Ye);return a&&we.forEach(function(Vk){return o(G,Vk)}),Xe&&po(G,De),Ee}function at(G,$,Y,oe){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:e:{for(var Ee=Y.key;$!==null;){if($.key===Ee){if(Ee=Y.type,Ee===S){if($.tag===7){c(G,$.sibling),oe=y($,Y.props.children),oe.return=G,G=oe;break e}}else if($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&cS(Ee)===$.type){c(G,$.sibling),oe=y($,Y.props),Kl(oe,Y),oe.return=G,G=oe;break e}c(G,$);break}else o(G,$);$=$.sibling}Y.type===S?(oe=uo(Y.props.children,G.mode,oe,Y.key),oe.return=G,G=oe):(oe=Bu(Y.type,Y.key,Y.props,null,G.mode,oe),Kl(oe,Y),oe.return=G,G=oe)}return w(G);case x:e:{for(Ee=Y.key;$!==null;){if($.key===Ee)if($.tag===4&&$.stateNode.containerInfo===Y.containerInfo&&$.stateNode.implementation===Y.implementation){c(G,$.sibling),oe=y($,Y.children||[]),oe.return=G,G=oe;break e}else{c(G,$);break}else o(G,$);$=$.sibling}oe=dh(Y,G.mode,oe),oe.return=G,G=oe}return w(G);case R:return Ee=Y._init,Y=Ee(Y._payload),at(G,$,Y,oe)}if(ne(Y))return Ne(G,$,Y,oe);if(q(Y)){if(Ee=q(Y),typeof Ee!="function")throw Error(r(150));return Y=Ee.call(Y),_e(G,$,Y,oe)}if(typeof Y.then=="function")return at(G,$,nd(Y),oe);if(Y.$$typeof===O)return at(G,$,Hu(G,Y),oe);rd(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,$!==null&&$.tag===6?(c(G,$.sibling),oe=y($,Y),oe.return=G,G=oe):(c(G,$),oe=uh(Y,G.mode,oe),oe.return=G,G=oe),w(G)):c(G,$)}return function(G,$,Y,oe){try{Vl=0;var Ee=at(G,$,Y,oe);return Ss=null,Ee}catch(we){if(we===$l||we===Yu)throw we;var $e=Vn(29,we,null,G.mode);return $e.lanes=oe,$e.return=G,$e}finally{}}}var As=uS(!0),dS=uS(!1),br=F(null),ta=null;function ui(a){var o=a.alternate;ue(Gt,Gt.current&1),ue(br,a),ta===null&&(o===null||ys.current!==null||o.memoizedState!==null)&&(ta=a)}function fS(a){if(a.tag===22){if(ue(Gt,Gt.current),ue(br,a),ta===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(ta=a)}}else di()}function di(){ue(Gt,Gt.current),ue(br,br.current)}function wa(a){V(br),ta===a&&(ta=null),V(Gt)}var Gt=F(0);function ad(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||jm(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function qh(a,o,c,d){o=a.memoizedState,c=c(d,o),c=c==null?o:h({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Yh={enqueueSetState:function(a,o,c){a=a._reactInternals;var d=Qn(),y=si(d);y.payload=o,c!=null&&(y.callback=c),o=li(a,y,d),o!==null&&(Zn(o,a,d),Ul(o,a,d))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var d=Qn(),y=si(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=li(a,y,d),o!==null&&(Zn(o,a,d),Ul(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=Qn(),d=si(c);d.tag=2,o!=null&&(d.callback=o),o=li(a,d,c),o!==null&&(Zn(o,a,c),Ul(o,a,c))}};function pS(a,o,c,d,y,b,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,b,w):o.prototype&&o.prototype.isPureReactComponent?!Dl(c,d)||!Dl(y,b):!0}function hS(a,o,c,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==a&&Yh.enqueueReplaceState(o,o.state,null)}function xo(a,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(a=a.defaultProps){c===o&&(c=h({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}var id=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function mS(a){id(a)}function gS(a){console.error(a)}function yS(a){id(a)}function od(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function vS(a,o,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Fh(a,o,c){return c=si(c),c.tag=3,c.payload={element:null},c.callback=function(){od(a,o)},c}function bS(a){return a=si(a),a.tag=3,a}function xS(a,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;a.payload=function(){return y(b)},a.callback=function(){vS(o,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){vS(o,c,d),typeof y!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var _=d.stack;this.componentDidCatch(d.value,{componentStack:_!==null?_:""})})}function VN(a,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&Rl(o,c,y,!0),c=br.current,c!==null){switch(c.tag){case 13:return ta===null?gm():c.alternate===null&&Pt===0&&(Pt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===Sh?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),vm(a,d,y)),!1;case 22:return c.flags|=65536,d===Sh?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),vm(a,d,y)),!1}throw Error(r(435,c.tag))}return vm(a,d,y),gm(),!1}if(Xe)return o=br.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==hh&&(a=Error(r(422),{cause:d}),Ml(mr(a,c)))):(d!==hh&&(o=Error(r(423),{cause:d}),Ml(mr(o,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,d=mr(d,c),y=Fh(a.stateNode,d,y),Ch(a,y),Pt!==4&&(Pt=2)),!1;var b=Error(r(520),{cause:d});if(b=mr(b,c),tc===null?tc=[b]:tc.push(b),Pt!==4&&(Pt=2),o===null)return!0;d=mr(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Fh(c.stateNode,d,a),Ch(c,a),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(yi===null||!yi.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=bS(y),xS(y,a,c,d),Ch(c,y),!1}c=c.return}while(c!==null);return!1}var SS=Error(r(461)),Wt=!1;function ln(a,o,c,d){o.child=a===null?dS(o,null,c,d):As(o,a.child,c,d)}function AS(a,o,c,d,y){c=c.render;var b=o.ref;if("ref"in d){var w={};for(var _ in d)_!=="ref"&&(w[_]=d[_])}else w=d;return yo(o),d=_h(a,o,c,w,b,y),_=Dh(),a!==null&&!Wt?(Nh(a,o,y),Oa(a,o,y)):(Xe&&_&&fh(o),o.flags|=1,ln(a,o,d,y),o.child)}function ES(a,o,c,d,y){if(a===null){var b=c.type;return typeof b=="function"&&!ch(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,CS(a,o,b,d,y)):(a=Bu(c.type,null,d,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!em(a,y)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:Dl,c(w,d)&&a.ref===o.ref)return Oa(a,o,y)}return o.flags|=1,a=xa(b,d),a.ref=o.ref,a.return=o,o.child=a}function CS(a,o,c,d,y){if(a!==null){var b=a.memoizedProps;if(Dl(b,d)&&a.ref===o.ref)if(Wt=!1,o.pendingProps=d=b,em(a,y))(a.flags&131072)!==0&&(Wt=!0);else return o.lanes=a.lanes,Oa(a,o,y)}return Vh(a,o,c,d,y)}function PS(a,o,c){var d=o.pendingProps,y=d.children,b=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=b!==null?b.baseLanes|c:c,a!==null){for(y=o.child=a.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;o.childLanes=b&~d}else o.childLanes=0,o.child=null;return wS(a,o,d,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&qu(o,b!==null?b.cachePool:null),b!==null?Cx(o,b):wh(),fS(o);else return o.lanes=o.childLanes=536870912,wS(a,o,b!==null?b.baseLanes|c:c,c)}else b!==null?(qu(o,b.cachePool),Cx(o,b),di(),o.memoizedState=null):(a!==null&&qu(o,null),wh(),di());return ln(a,o,y,c),o.child}function wS(a,o,c,d){var y=xh();return y=y===null?null:{parent:zt._currentValue,pool:y},o.memoizedState={baseLanes:c,cachePool:y},a!==null&&qu(o,null),wh(),fS(o),a!==null&&Rl(a,o,d,!0),null}function sd(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function Vh(a,o,c,d,y){return yo(o),c=_h(a,o,c,d,void 0,y),d=Dh(),a!==null&&!Wt?(Nh(a,o,y),Oa(a,o,y)):(Xe&&d&&fh(o),o.flags|=1,ln(a,o,c,y),o.child)}function OS(a,o,c,d,y,b){return yo(o),o.updateQueue=null,c=wx(o,d,c,y),Px(a),d=Dh(),a!==null&&!Wt?(Nh(a,o,b),Oa(a,o,b)):(Xe&&d&&fh(o),o.flags|=1,ln(a,o,c,b),o.child)}function TS(a,o,c,d,y){if(yo(o),o.stateNode===null){var b=fs,w=c.contextType;typeof w=="object"&&w!==null&&(b=gn(w)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Yh,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},Ah(o),w=c.contextType,b.context=typeof w=="object"&&w!==null?gn(w):fs,b.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(qh(o,c,w,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&Yh.enqueueReplaceState(b,b.state,null),Gl(o,d,b,y),zl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){b=o.stateNode;var _=o.memoizedProps,I=xo(c,_);b.props=I;var K=b.context,ae=c.contextType;w=fs,typeof ae=="object"&&ae!==null&&(w=gn(ae));var le=c.getDerivedStateFromProps;ae=typeof le=="function"||typeof b.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,ae||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_||K!==w)&&hS(o,b,d,w),oi=!1;var X=o.memoizedState;b.state=X,Gl(o,d,b,y),zl(),K=o.memoizedState,_||X!==K||oi?(typeof le=="function"&&(qh(o,c,le,d),K=o.memoizedState),(I=oi||pS(o,c,I,d,X,K,w))?(ae||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=K),b.props=d,b.state=K,b.context=w,d=I):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,Eh(a,o),w=o.memoizedProps,ae=xo(c,w),b.props=ae,le=o.pendingProps,X=b.context,K=c.contextType,I=fs,typeof K=="object"&&K!==null&&(I=gn(K)),_=c.getDerivedStateFromProps,(K=typeof _=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==le||X!==I)&&hS(o,b,d,I),oi=!1,X=o.memoizedState,b.state=X,Gl(o,d,b,y),zl();var Q=o.memoizedState;w!==le||X!==Q||oi||a!==null&&a.dependencies!==null&&Gu(a.dependencies)?(typeof _=="function"&&(qh(o,c,_,d),Q=o.memoizedState),(ae=oi||pS(o,c,ae,d,X,Q,I)||a!==null&&a.dependencies!==null&&Gu(a.dependencies))?(K||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,Q,I),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,Q,I)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&X===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&X===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Q),b.props=d,b.state=Q,b.context=I,d=ae):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&X===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&X===a.memoizedState||(o.flags|=1024),d=!1)}return b=d,sd(a,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&d?(o.child=As(o,a.child,null,y),o.child=As(o,null,c,y)):ln(a,o,c,y),o.memoizedState=b.state,a=o.child):a=Oa(a,o,y),a}function _S(a,o,c,d){return jl(),o.flags|=256,ln(a,o,c,d),o.child}var Kh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wh(a){return{baseLanes:a,cachePool:gx()}}function Xh(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=xr),a}function DS(a,o,c){var d=o.pendingProps,y=!1,b=(o.flags&128)!==0,w;if((w=b)||(w=a!==null&&a.memoizedState===null?!1:(Gt.current&2)!==0),w&&(y=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,a===null){if(Xe){if(y?ui(o):di(),Xe){var _=Ct,I;if(I=_){e:{for(I=_,_=ea;I.nodeType!==8;){if(!_){_=null;break e}if(I=Gr(I.nextSibling),I===null){_=null;break e}}_=I}_!==null?(o.memoizedState={dehydrated:_,treeContext:fo!==null?{id:Sa,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},I=Vn(18,null,null,0),I.stateNode=_,I.return=o,o.child=I,On=o,Ct=null,I=!0):I=!1}I||mo(o)}if(_=o.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return jm(_)?o.lanes=32:o.lanes=536870912,null;wa(o)}return _=d.children,d=d.fallback,y?(di(),y=o.mode,_=ld({mode:"hidden",children:_},y),d=uo(d,y,c,null),_.return=o,d.return=o,_.sibling=d,o.child=_,y=o.child,y.memoizedState=Wh(c),y.childLanes=Xh(a,w,c),o.memoizedState=Kh,d):(ui(o),Qh(o,_))}if(I=a.memoizedState,I!==null&&(_=I.dehydrated,_!==null)){if(b)o.flags&256?(ui(o),o.flags&=-257,o=Zh(a,o,c)):o.memoizedState!==null?(di(),o.child=a.child,o.flags|=128,o=null):(di(),y=d.fallback,_=o.mode,d=ld({mode:"visible",children:d.children},_),y=uo(y,_,c,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,As(o,a.child,null,c),d=o.child,d.memoizedState=Wh(c),d.childLanes=Xh(a,w,c),o.memoizedState=Kh,o=y);else if(ui(o),jm(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var K=w.dgst;w=K,d=Error(r(419)),d.stack="",d.digest=w,Ml({value:d,source:null,stack:null}),o=Zh(a,o,c)}else if(Wt||Rl(a,o,c,!1),w=(c&a.childLanes)!==0,Wt||w){if(w=ut,w!==null&&(d=c&-c,d=(d&42)!==0?1:Vi(d),d=(d&(w.suspendedLanes|c))!==0?0:d,d!==0&&d!==I.retryLane))throw I.retryLane=d,ds(a,d),Zn(w,a,d),SS;_.data==="$?"||gm(),o=Zh(a,o,c)}else _.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=I.treeContext,Ct=Gr(_.nextSibling),On=o,Xe=!0,ho=null,ea=!1,a!==null&&(yr[vr++]=Sa,yr[vr++]=Aa,yr[vr++]=fo,Sa=a.id,Aa=a.overflow,fo=o),o=Qh(o,d.children),o.flags|=4096);return o}return y?(di(),y=d.fallback,_=o.mode,I=a.child,K=I.sibling,d=xa(I,{mode:"hidden",children:d.children}),d.subtreeFlags=I.subtreeFlags&65011712,K!==null?y=xa(K,y):(y=uo(y,_,c,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,_=a.child.memoizedState,_===null?_=Wh(c):(I=_.cachePool,I!==null?(K=zt._currentValue,I=I.parent!==K?{parent:K,pool:K}:I):I=gx(),_={baseLanes:_.baseLanes|c,cachePool:I}),y.memoizedState=_,y.childLanes=Xh(a,w,c),o.memoizedState=Kh,d):(ui(o),c=a.child,a=c.sibling,c=xa(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,a!==null&&(w=o.deletions,w===null?(o.deletions=[a],o.flags|=16):w.push(a)),o.child=c,o.memoizedState=null,c)}function Qh(a,o){return o=ld({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function ld(a,o){return a=Vn(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Zh(a,o,c){return As(o,a.child,null,c),a=Qh(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function NS(a,o,c){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),gh(a.return,o,c)}function Jh(a,o,c,d,y){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=y)}function kS(a,o,c){var d=o.pendingProps,y=d.revealOrder,b=d.tail;if(ln(a,o,d.children,c),d=Gt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&NS(a,c,o);else if(a.tag===19)NS(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(ue(Gt,d),y){case"forwards":for(c=o.child,y=null;c!==null;)a=c.alternate,a!==null&&ad(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),Jh(o,!1,y,c,b);break;case"backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&ad(a)===null){o.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}Jh(o,!0,c,null,b);break;case"together":Jh(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Oa(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),gi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(Rl(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=xa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=xa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function em(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Gu(a)))}function KN(a,o,c){switch(o.tag){case 3:pe(o,o.stateNode.containerInfo),ii(o,zt,a.memoizedState.cache),jl();break;case 27:case 5:de(o);break;case 4:pe(o,o.stateNode.containerInfo);break;case 10:ii(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(ui(o),o.flags|=128,null):(c&o.child.childLanes)!==0?DS(a,o,c):(ui(o),a=Oa(a,o,c),a!==null?a.sibling:null);ui(o);break;case 19:var y=(a.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(Rl(a,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return kS(a,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(Gt,Gt.current),d)break;return null;case 22:case 23:return o.lanes=0,PS(a,o,c);case 24:ii(o,zt,a.memoizedState.cache)}return Oa(a,o,c)}function jS(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)Wt=!0;else{if(!em(a,c)&&(o.flags&128)===0)return Wt=!1,KN(a,o,c);Wt=(a.flags&131072)!==0}else Wt=!1,Xe&&(o.flags&1048576)!==0&&cx(o,zu,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var d=o.elementType,y=d._init;if(d=y(d._payload),o.type=d,typeof d=="function")ch(d)?(a=xo(d,a),o.tag=1,o=TS(null,o,d,a,c)):(o.tag=0,o=Vh(null,o,d,a,c));else{if(d!=null){if(y=d.$$typeof,y===k){o.tag=11,o=AS(null,o,d,a,c);break e}else if(y===j){o.tag=14,o=ES(null,o,d,a,c);break e}}throw o=te(d)||d,Error(r(306,o,""))}}return o;case 0:return Vh(a,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=xo(d,o.pendingProps),TS(a,o,d,y,c);case 3:e:{if(pe(o,o.stateNode.containerInfo),a===null)throw Error(r(387));d=o.pendingProps;var b=o.memoizedState;y=b.element,Eh(a,o),Gl(o,d,null,c);var w=o.memoizedState;if(d=w.cache,ii(o,zt,d),d!==b.cache&&yh(o,[zt],c,!0),zl(),d=w.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=_S(a,o,d,c);break e}else if(d!==y){y=mr(Error(r(424)),o),Ml(y),o=_S(a,o,d,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ct=Gr(a.firstChild),On=o,Xe=!0,ho=null,ea=!0,c=dS(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(jl(),d===y){o=Oa(a,o,c);break e}ln(a,o,d,c)}o=o.child}return o;case 26:return sd(a,o),a===null?(c=L1(o.type,null,o.pendingProps,null))?o.memoizedState=c:Xe||(c=o.type,a=o.pendingProps,d=Ad(re.current).createElement(c),d[an]=o,d[Pn]=a,un(d,c,a),Et(d),o.stateNode=d):o.memoizedState=L1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return de(o),a===null&&Xe&&(d=o.stateNode=M1(o.type,o.pendingProps,re.current),On=o,ea=!0,y=Ct,xi(o.type)?(Mm=y,Ct=Gr(d.firstChild)):Ct=y),ln(a,o,o.pendingProps.children,c),sd(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Xe&&((y=d=Ct)&&(d=Ak(d,o.type,o.pendingProps,ea),d!==null?(o.stateNode=d,On=o,Ct=Gr(d.firstChild),ea=!1,y=!0):y=!1),y||mo(o)),de(o),y=o.type,b=o.pendingProps,w=a!==null?a.memoizedProps:null,d=b.children,Dm(y,b)?d=null:w!==null&&Dm(y,w)&&(o.flags|=32),o.memoizedState!==null&&(y=_h(a,o,UN,null,null,c),uc._currentValue=y),sd(a,o),ln(a,o,d,c),o.child;case 6:return a===null&&Xe&&((a=c=Ct)&&(c=Ek(c,o.pendingProps,ea),c!==null?(o.stateNode=c,On=o,Ct=null,a=!0):a=!1),a||mo(o)),null;case 13:return DS(a,o,c);case 4:return pe(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=As(o,null,d,c):ln(a,o,d,c),o.child;case 11:return AS(a,o,o.type,o.pendingProps,c);case 7:return ln(a,o,o.pendingProps,c),o.child;case 8:return ln(a,o,o.pendingProps.children,c),o.child;case 12:return ln(a,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,ii(o,o.type,d.value),ln(a,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,yo(o),y=gn(y),d=d(y),o.flags|=1,ln(a,o,d,c),o.child;case 14:return ES(a,o,o.type,o.pendingProps,c);case 15:return CS(a,o,o.type,o.pendingProps,c);case 19:return kS(a,o,c);case 31:return d=o.pendingProps,c=o.mode,d={mode:d.mode,children:d.children},a===null?(c=ld(d,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=xa(a.child,d),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return PS(a,o,c);case 24:return yo(o),d=gn(zt),a===null?(y=xh(),y===null&&(y=ut,b=vh(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),o.memoizedState={parent:d,cache:y},Ah(o),ii(o,zt,y)):((a.lanes&c)!==0&&(Eh(a,o),Gl(o,null,null,c),zl()),y=a.memoizedState,b=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),ii(o,zt,d)):(d=b.cache,ii(o,zt,d),d!==y.cache&&yh(o,[zt],c,!0))),ln(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Ta(a){a.flags|=4}function MS(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!G1(o)){if(o=br.current,o!==null&&((Ge&4194048)===Ge?ta!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||o!==ta))throw Bl=Sh,yx;a.flags|=8192}}function cd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Jo():536870912,a.lanes|=o,ws|=o)}function Wl(a,o){if(!Xe)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function xt(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(o)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=d,a.childLanes=c,o}function WN(a,o,c){var d=o.pendingProps;switch(ph(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(o),null;case 1:return xt(o),null;case 3:return c=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Ca(zt),ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(kl(o)?Ta(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,fx())),xt(o),null;case 26:return c=o.memoizedState,a===null?(Ta(o),c!==null?(xt(o),MS(o,c)):(xt(o),o.flags&=-16777217)):c?c!==a.memoizedState?(Ta(o),xt(o),MS(o,c)):(xt(o),o.flags&=-16777217):(a.memoizedProps!==d&&Ta(o),xt(o),o.flags&=-16777217),null;case 27:be(o),c=re.current;var y=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Ta(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return xt(o),null}a=ge.current,kl(o)?ux(o):(a=M1(y,d,c),o.stateNode=a,Ta(o))}return xt(o),null;case 5:if(be(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Ta(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return xt(o),null}if(a=ge.current,kl(o))ux(o);else{switch(y=Ad(re.current),a){case 1:a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=y.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?y.createElement(c,{is:d.is}):y.createElement(c)}}a[an]=o,a[Pn]=d;e:for(y=o.child;y!==null;){if(y.tag===5||y.tag===6)a.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}o.stateNode=a;e:switch(un(a,c,d),c){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ta(o)}}return xt(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Ta(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(a=re.current,kl(o)){if(a=o.stateNode,c=o.memoizedProps,d=null,y=On,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}a[an]=o,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||O1(a.nodeValue,c)),a||mo(o)}else a=Ad(a).createTextNode(d),a[an]=o,o.stateNode=a}return xt(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=kl(o),d!==null&&d.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[an]=o}else jl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;xt(o),y=!1}else y=fx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(wa(o),o):(wa(o),null)}if(wa(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=d!==null,a=a!==null&&a.memoizedState!==null,c){d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),cd(o,o.updateQueue),xt(o),null;case 4:return ie(),a===null&&Pm(o.stateNode.containerInfo),xt(o),null;case 10:return Ca(o.type),xt(o),null;case 19:if(V(Gt),y=o.memoizedState,y===null)return xt(o),null;if(d=(o.flags&128)!==0,b=y.rendering,b===null)if(d)Wl(y,!1);else{if(Pt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=ad(a),b!==null){for(o.flags|=128,Wl(y,!1),a=b.updateQueue,o.updateQueue=a,cd(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)lx(c,a),c=c.sibling;return ue(Gt,Gt.current&1|2),o.child}a=a.sibling}y.tail!==null&&ft()>fd&&(o.flags|=128,d=!0,Wl(y,!1),o.lanes=4194304)}else{if(!d)if(a=ad(b),a!==null){if(o.flags|=128,d=!0,a=a.updateQueue,o.updateQueue=a,cd(o,a),Wl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!Xe)return xt(o),null}else 2*ft()-y.renderingStartTime>fd&&c!==536870912&&(o.flags|=128,d=!0,Wl(y,!1),o.lanes=4194304);y.isBackwards?(b.sibling=o.child,o.child=b):(a=y.last,a!==null?a.sibling=b:o.child=b,y.last=b)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ft(),o.sibling=null,a=Gt.current,ue(Gt,d?a&1|2:a&1),o):(xt(o),null);case 22:case 23:return wa(o),Oh(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(xt(o),o.subtreeFlags&6&&(o.flags|=8192)):xt(o),c=o.updateQueue,c!==null&&cd(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),a!==null&&V(vo),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ca(zt),xt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function XN(a,o){switch(ph(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ca(zt),ie(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return be(o),null;case 13:if(wa(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));jl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return V(Gt),null;case 4:return ie(),null;case 10:return Ca(o.type),null;case 22:case 23:return wa(o),Oh(),a!==null&&V(vo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ca(zt),null;case 25:return null;default:return null}}function RS(a,o){switch(ph(o),o.tag){case 3:Ca(zt),ie();break;case 26:case 27:case 5:be(o);break;case 4:ie();break;case 13:wa(o);break;case 19:V(Gt);break;case 10:Ca(o.type);break;case 22:case 23:wa(o),Oh(),a!==null&&V(vo);break;case 24:Ca(zt)}}function Xl(a,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&a)===a){d=void 0;var b=c.create,w=c.inst;d=b(),w.destroy=d}c=c.next}while(c!==y)}}catch(_){st(o,o.return,_)}}function fi(a,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&a)===a){var w=d.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,y=o;var I=c,K=_;try{K()}catch(ae){st(y,I,ae)}}}d=d.next}while(d!==b)}}catch(ae){st(o,o.return,ae)}}function IS(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{Ex(o,c)}catch(d){st(a,a.return,d)}}}function LS(a,o,c){c.props=xo(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){st(a,o,d)}}function Ql(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(y){st(a,o,y)}}function na(a,o){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){st(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){st(a,o,y)}else c.current=null}function $S(a){var o=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){st(a,a.return,y)}}function tm(a,o,c){try{var d=a.stateNode;yk(d,a.type,c,o),d[Pn]=o}catch(y){st(a,a.return,y)}}function BS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&xi(a.type)||a.tag===4}function nm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||BS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&xi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function rm(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Sd));else if(d!==4&&(d===27&&xi(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(rm(a,o,c),a=a.sibling;a!==null;)rm(a,o,c),a=a.sibling}function ud(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(d!==4&&(d===27&&xi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(ud(a,o,c),a=a.sibling;a!==null;)ud(a,o,c),a=a.sibling}function US(a){var o=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);un(o,d,c),o[an]=a,o[Pn]=c}catch(b){st(a,a.return,b)}}var _a=!1,Tt=!1,am=!1,zS=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function QN(a,o){if(a=a.containerInfo,Tm=Td,a=Zb(a),nh(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var w=0,_=-1,I=-1,K=0,ae=0,le=a,X=null;t:for(;;){for(var Q;le!==c||y!==0&&le.nodeType!==3||(_=w+y),le!==b||d!==0&&le.nodeType!==3||(I=w+d),le.nodeType===3&&(w+=le.nodeValue.length),(Q=le.firstChild)!==null;)X=le,le=Q;for(;;){if(le===a)break t;if(X===c&&++K===y&&(_=w),X===b&&++ae===d&&(I=w),(Q=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=Q}c=_===-1||I===-1?null:{start:_,end:I}}else c=null}c=c||{start:0,end:0}}else c=null;for(_m={focusedElem:a,selectionRange:c},Td=!1,Xt=o;Xt!==null;)if(o=Xt,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,Xt=a;else for(;Xt!==null;){switch(o=Xt,b=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,c=o,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Ne=xo(c.type,y,c.elementType===c.type);a=d.getSnapshotBeforeUpdate(Ne,b),d.__reactInternalSnapshotBeforeUpdate=a}catch(_e){st(c,c.return,_e)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)km(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":km(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Xt=a;break}Xt=o.return}}function GS(a,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:pi(a,c),d&4&&Xl(5,c);break;case 1:if(pi(a,c),d&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(w){st(c,c.return,w)}else{var y=xo(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(w){st(c,c.return,w)}}d&64&&IS(c),d&512&&Ql(c,c.return);break;case 3:if(pi(a,c),d&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Ex(a,o)}catch(w){st(c,c.return,w)}}break;case 27:o===null&&d&4&&US(c);case 26:case 5:pi(a,c),o===null&&d&4&&$S(c),d&512&&Ql(c,c.return);break;case 12:pi(a,c);break;case 13:pi(a,c),d&4&&YS(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=ok.bind(null,c),Ck(a,c))));break;case 22:if(d=c.memoizedState!==null||_a,!d){o=o!==null&&o.memoizedState!==null||Tt,y=_a;var b=Tt;_a=d,(Tt=o)&&!b?hi(a,c,(c.subtreeFlags&8772)!==0):pi(a,c),_a=y,Tt=b}break;case 30:break;default:pi(a,c)}}function HS(a){var o=a.alternate;o!==null&&(a.alternate=null,HS(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&fa(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ht=null,Rn=!1;function Da(a,o,c){for(c=c.child;c!==null;)qS(a,o,c),c=c.sibling}function qS(a,o,c){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Xa,c)}catch{}switch(c.tag){case 26:Tt||na(c,o),Da(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Tt||na(c,o);var d=ht,y=Rn;xi(c.type)&&(ht=c.stateNode,Rn=!1),Da(a,o,c),oc(c.stateNode),ht=d,Rn=y;break;case 5:Tt||na(c,o);case 6:if(d=ht,y=Rn,ht=null,Da(a,o,c),ht=d,Rn=y,ht!==null)if(Rn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(c.stateNode)}catch(b){st(c,o,b)}else try{ht.removeChild(c.stateNode)}catch(b){st(c,o,b)}break;case 18:ht!==null&&(Rn?(a=ht,k1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),hc(a)):k1(ht,c.stateNode));break;case 4:d=ht,y=Rn,ht=c.stateNode.containerInfo,Rn=!0,Da(a,o,c),ht=d,Rn=y;break;case 0:case 11:case 14:case 15:Tt||fi(2,c,o),Tt||fi(4,c,o),Da(a,o,c);break;case 1:Tt||(na(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&LS(c,o,d)),Da(a,o,c);break;case 21:Da(a,o,c);break;case 22:Tt=(d=Tt)||c.memoizedState!==null,Da(a,o,c),Tt=d;break;default:Da(a,o,c)}}function YS(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{hc(a)}catch(c){st(o,o.return,c)}}function ZN(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new zS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new zS),o;default:throw Error(r(435,a.tag))}}function im(a,o){var c=ZN(a);o.forEach(function(d){var y=sk.bind(null,a,d);c.has(d)||(c.add(d),d.then(y,y))})}function Kn(a,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=a,w=o,_=w;e:for(;_!==null;){switch(_.tag){case 27:if(xi(_.type)){ht=_.stateNode,Rn=!1;break e}break;case 5:ht=_.stateNode,Rn=!1;break e;case 3:case 4:ht=_.stateNode.containerInfo,Rn=!0;break e}_=_.return}if(ht===null)throw Error(r(160));qS(b,w,y),ht=null,Rn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)FS(o,a),o=o.sibling}var zr=null;function FS(a,o){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Kn(o,a),Wn(a),d&4&&(fi(3,a,a.return),Xl(3,a),fi(5,a,a.return));break;case 1:Kn(o,a),Wn(a),d&512&&(Tt||c===null||na(c,c.return)),d&64&&_a&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=zr;if(Kn(o,a),Wn(a),d&512&&(Tt||c===null||na(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Hn]||b[an]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),un(b,d,c),b[an]=a,Et(b),d=b;break e;case"link":var w=U1("link","href",y).get(d+(c.href||""));if(w){for(var _=0;_<w.length;_++)if(b=w[_],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(_,1);break t}}b=y.createElement(d),un(b,d,c),y.head.appendChild(b);break;case"meta":if(w=U1("meta","content",y).get(d+(c.content||""))){for(_=0;_<w.length;_++)if(b=w[_],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(_,1);break t}}b=y.createElement(d),un(b,d,c),y.head.appendChild(b);break;default:throw Error(r(468,d))}b[an]=a,Et(b),d=b}a.stateNode=d}else z1(y,a.type,a.stateNode);else a.stateNode=B1(y,d,a.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?z1(y,a.type,a.stateNode):B1(y,d,a.memoizedProps)):d===null&&a.stateNode!==null&&tm(a,a.memoizedProps,c.memoizedProps)}break;case 27:Kn(o,a),Wn(a),d&512&&(Tt||c===null||na(c,c.return)),c!==null&&d&4&&tm(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Kn(o,a),Wn(a),d&512&&(Tt||c===null||na(c,c.return)),a.flags&32){y=a.stateNode;try{to(y,"")}catch(Q){st(a,a.return,Q)}}d&4&&a.stateNode!=null&&(y=a.memoizedProps,tm(a,y,c!==null?c.memoizedProps:y)),d&1024&&(am=!0);break;case 6:if(Kn(o,a),Wn(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(Q){st(a,a.return,Q)}}break;case 3:if(Pd=null,y=zr,zr=Ed(o.containerInfo),Kn(o,a),zr=y,Wn(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{hc(o.containerInfo)}catch(Q){st(a,a.return,Q)}am&&(am=!1,VS(a));break;case 4:d=zr,zr=Ed(a.stateNode.containerInfo),Kn(o,a),Wn(a),zr=d;break;case 12:Kn(o,a),Wn(a);break;case 13:Kn(o,a),Wn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(dm=ft()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,im(a,d)));break;case 22:y=a.memoizedState!==null;var I=c!==null&&c.memoizedState!==null,K=_a,ae=Tt;if(_a=K||y,Tt=ae||I,Kn(o,a),Tt=ae,_a=K,Wn(a),d&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||I||_a||Tt||So(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){I=c=o;try{if(b=I.stateNode,y)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=I.stateNode;var le=I.memoizedProps.style,X=le!=null&&le.hasOwnProperty("display")?le.display:null;_.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Q){st(I,I.return,Q)}}}else if(o.tag===6){if(c===null){I=o;try{I.stateNode.nodeValue=y?"":I.memoizedProps}catch(Q){st(I,I.return,Q)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,im(a,c))));break;case 19:Kn(o,a),Wn(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,im(a,d)));break;case 30:break;case 21:break;default:Kn(o,a),Wn(a)}}function Wn(a){var o=a.flags;if(o&2){try{for(var c,d=a.return;d!==null;){if(BS(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,b=nm(a);ud(a,b,y);break;case 5:var w=c.stateNode;c.flags&32&&(to(w,""),c.flags&=-33);var _=nm(a);ud(a,_,w);break;case 3:case 4:var I=c.stateNode.containerInfo,K=nm(a);rm(a,K,I);break;default:throw Error(r(161))}}catch(ae){st(a,a.return,ae)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function VS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;VS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function pi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)GS(a,o.alternate,o),o=o.sibling}function So(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:fi(4,o,o.return),So(o);break;case 1:na(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&LS(o,o.return,c),So(o);break;case 27:oc(o.stateNode);case 26:case 5:na(o,o.return),So(o);break;case 22:o.memoizedState===null&&So(o);break;case 30:So(o);break;default:So(o)}a=a.sibling}}function hi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=a,b=o,w=b.flags;switch(b.tag){case 0:case 11:case 15:hi(y,b,c),Xl(4,b);break;case 1:if(hi(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){st(d,d.return,K)}if(d=b,y=d.updateQueue,y!==null){var _=d.stateNode;try{var I=y.shared.hiddenCallbacks;if(I!==null)for(y.shared.hiddenCallbacks=null,y=0;y<I.length;y++)Ax(I[y],_)}catch(K){st(d,d.return,K)}}c&&w&64&&IS(b),Ql(b,b.return);break;case 27:US(b);case 26:case 5:hi(y,b,c),c&&d===null&&w&4&&$S(b),Ql(b,b.return);break;case 12:hi(y,b,c);break;case 13:hi(y,b,c),c&&w&4&&YS(y,b);break;case 22:b.memoizedState===null&&hi(y,b,c),Ql(b,b.return);break;case 30:break;default:hi(y,b,c)}o=o.sibling}}function om(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&Il(c))}function sm(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Il(a))}function ra(a,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)KS(a,o,c,d),o=o.sibling}function KS(a,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:ra(a,o,c,d),y&2048&&Xl(9,o);break;case 1:ra(a,o,c,d);break;case 3:ra(a,o,c,d),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Il(a)));break;case 12:if(y&2048){ra(a,o,c,d),a=o.stateNode;try{var b=o.memoizedProps,w=b.id,_=b.onPostCommit;typeof _=="function"&&_(w,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(I){st(o,o.return,I)}}else ra(a,o,c,d);break;case 13:ra(a,o,c,d);break;case 23:break;case 22:b=o.stateNode,w=o.alternate,o.memoizedState!==null?b._visibility&2?ra(a,o,c,d):Zl(a,o):b._visibility&2?ra(a,o,c,d):(b._visibility|=2,Es(a,o,c,d,(o.subtreeFlags&10256)!==0)),y&2048&&om(w,o);break;case 24:ra(a,o,c,d),y&2048&&sm(o.alternate,o);break;default:ra(a,o,c,d)}}function Es(a,o,c,d,y){for(y=y&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=a,w=o,_=c,I=d,K=w.flags;switch(w.tag){case 0:case 11:case 15:Es(b,w,_,I,y),Xl(8,w);break;case 23:break;case 22:var ae=w.stateNode;w.memoizedState!==null?ae._visibility&2?Es(b,w,_,I,y):Zl(b,w):(ae._visibility|=2,Es(b,w,_,I,y)),y&&K&2048&&om(w.alternate,w);break;case 24:Es(b,w,_,I,y),y&&K&2048&&sm(w.alternate,w);break;default:Es(b,w,_,I,y)}o=o.sibling}}function Zl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,d=o,y=d.flags;switch(d.tag){case 22:Zl(c,d),y&2048&&om(d.alternate,d);break;case 24:Zl(c,d),y&2048&&sm(d.alternate,d);break;default:Zl(c,d)}o=o.sibling}}var Jl=8192;function Cs(a){if(a.subtreeFlags&Jl)for(a=a.child;a!==null;)WS(a),a=a.sibling}function WS(a){switch(a.tag){case 26:Cs(a),a.flags&Jl&&a.memoizedState!==null&&Lk(zr,a.memoizedState,a.memoizedProps);break;case 5:Cs(a);break;case 3:case 4:var o=zr;zr=Ed(a.stateNode.containerInfo),Cs(a),zr=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Jl,Jl=16777216,Cs(a),Jl=o):Cs(a));break;default:Cs(a)}}function XS(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function ec(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Xt=d,ZS(d,a)}XS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)QS(a),a=a.sibling}function QS(a){switch(a.tag){case 0:case 11:case 15:ec(a),a.flags&2048&&fi(9,a,a.return);break;case 3:ec(a);break;case 12:ec(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,dd(a)):ec(a);break;default:ec(a)}}function dd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Xt=d,ZS(d,a)}XS(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:fi(8,o,o.return),dd(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,dd(o));break;default:dd(o)}a=a.sibling}}function ZS(a,o){for(;Xt!==null;){var c=Xt;switch(c.tag){case 0:case 11:case 15:fi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Il(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Xt=d;else e:for(c=a;Xt!==null;){d=Xt;var y=d.sibling,b=d.return;if(HS(d),d===c){Xt=null;break e}if(y!==null){y.return=b,Xt=y;break e}Xt=b}}}var JN={getCacheForType:function(a){var o=gn(zt),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},ek=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ut=null,Be=null,Ge=0,Ze=0,Xn=null,mi=!1,Ps=!1,lm=!1,Na=0,Pt=0,gi=0,Ao=0,cm=0,xr=0,ws=0,tc=null,In=null,um=!1,dm=0,fd=1/0,pd=null,yi=null,cn=0,vi=null,Os=null,Ts=0,fm=0,pm=null,JS=null,nc=0,hm=null;function Qn(){if((Qe&2)!==0&&Ge!==0)return Ge&-Ge;if(L.T!==null){var a=ms;return a!==0?a:Sm()}return Mp()}function e1(){xr===0&&(xr=(Ge&536870912)===0||Xe?Wr():536870912);var a=br.current;return a!==null&&(a.flags|=32),xr}function Zn(a,o,c){(a===ut&&(Ze===2||Ze===9)||a.cancelPendingCommit!==null)&&(_s(a,0),bi(a,Ge,xr,!1)),Qa(a,c),((Qe&2)===0||a!==ut)&&(a===ut&&((Qe&2)===0&&(Ao|=c),Pt===4&&bi(a,Ge,xr,!1)),aa(a))}function t1(a,o,c){if((Qe&6)!==0)throw Error(r(327));var d=!c&&(o&124)===0&&(o&a.expiredLanes)===0||Fi(a,o),y=d?rk(a,o):ym(a,o,!0),b=d;do{if(y===0){Ps&&!d&&bi(a,o,0,!1);break}else{if(c=a.current.alternate,b&&!tk(c)){y=ym(a,o,!1),b=!1;continue}if(y===2){if(b=o,a.errorRecoveryDisabledLanes&b)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var _=a;y=tc;var I=_.current.memoizedState.isDehydrated;if(I&&(_s(_,w).flags|=256),w=ym(_,w,!1),w!==2){if(lm&&!I){_.errorRecoveryDisabledLanes|=b,Ao|=b,y=4;break e}b=In,In=y,b!==null&&(In===null?In=b:In.push.apply(In,b))}y=w}if(b=!1,y!==2)continue}}if(y===1){_s(a,0),bi(a,o,0,!0);break}e:{switch(d=a,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:bi(d,o,xr,!mi);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=dm+300-ft(),10<y)){if(bi(d,o,xr,!mi),Yi(d,0,!0)!==0)break e;d.timeoutHandle=D1(n1.bind(null,d,c,In,pd,um,o,xr,Ao,ws,mi,b,2,-0,0),y);break e}n1(d,c,In,pd,um,o,xr,Ao,ws,mi,b,0,-0,0)}}break}while(!0);aa(a)}function n1(a,o,c,d,y,b,w,_,I,K,ae,le,X,Q){if(a.timeoutHandle=-1,le=o.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(cc={stylesheets:null,count:0,unsuspend:Ik},WS(o),le=$k(),le!==null)){a.cancelPendingCommit=le(c1.bind(null,a,o,b,c,d,y,w,_,I,ae,1,X,Q)),bi(a,b,w,!K);return}c1(a,o,b,c,d,y,w,_,I)}function tk(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!Fn(b(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function bi(a,o,c,d){o&=~cm,o&=~Ao,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var y=o;0<y;){var b=31-rn(y),w=1<<b;d[b]=-1,y&=~w}c!==0&&ts(a,c,o)}function hd(){return(Qe&6)===0?(rc(0),!1):!0}function mm(){if(Be!==null){if(Ze===0)var a=Be.return;else a=Be,Ea=go=null,kh(a),Ss=null,Vl=0,a=Be;for(;a!==null;)RS(a.alternate,a),a=a.return;Be=null}}function _s(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,bk(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),mm(),ut=a,Be=c=xa(a.current,null),Ge=o,Ze=0,Xn=null,mi=!1,Ps=Fi(a,o),lm=!1,ws=xr=cm=Ao=gi=Pt=0,In=tc=null,um=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var y=31-rn(d),b=1<<y;o|=a[y],d&=~b}return Na=o,Iu(),c}function r1(a,o){Le=null,L.H=td,o===$l||o===Yu?(o=xx(),Ze=3):o===yx?(o=xx(),Ze=4):Ze=o===SS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Xn=o,Be===null&&(Pt=1,od(a,mr(o,a.current)))}function a1(){var a=L.H;return L.H=td,a===null?td:a}function i1(){var a=L.A;return L.A=JN,a}function gm(){Pt=4,mi||(Ge&4194048)!==Ge&&br.current!==null||(Ps=!0),(gi&134217727)===0&&(Ao&134217727)===0||ut===null||bi(ut,Ge,xr,!1)}function ym(a,o,c){var d=Qe;Qe|=2;var y=a1(),b=i1();(ut!==a||Ge!==o)&&(pd=null,_s(a,o)),o=!1;var w=Pt;e:do try{if(Ze!==0&&Be!==null){var _=Be,I=Xn;switch(Ze){case 8:mm(),w=6;break e;case 3:case 2:case 9:case 6:br.current===null&&(o=!0);var K=Ze;if(Ze=0,Xn=null,Ds(a,_,I,K),c&&Ps){w=0;break e}break;default:K=Ze,Ze=0,Xn=null,Ds(a,_,I,K)}}nk(),w=Pt;break}catch(ae){r1(a,ae)}while(!0);return o&&a.shellSuspendCounter++,Ea=go=null,Qe=d,L.H=y,L.A=b,Be===null&&(ut=null,Ge=0,Iu()),w}function nk(){for(;Be!==null;)o1(Be)}function rk(a,o){var c=Qe;Qe|=2;var d=a1(),y=i1();ut!==a||Ge!==o?(pd=null,fd=ft()+500,_s(a,o)):Ps=Fi(a,o);e:do try{if(Ze!==0&&Be!==null){o=Be;var b=Xn;t:switch(Ze){case 1:Ze=0,Xn=null,Ds(a,o,b,1);break;case 2:case 9:if(vx(b)){Ze=0,Xn=null,s1(o);break}o=function(){Ze!==2&&Ze!==9||ut!==a||(Ze=7),aa(a)},b.then(o,o);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:vx(b)?(Ze=0,Xn=null,s1(o)):(Ze=0,Xn=null,Ds(a,o,b,7));break;case 5:var w=null;switch(Be.tag){case 26:w=Be.memoizedState;case 5:case 27:var _=Be;if(!w||G1(w)){Ze=0,Xn=null;var I=_.sibling;if(I!==null)Be=I;else{var K=_.return;K!==null?(Be=K,md(K)):Be=null}break t}}Ze=0,Xn=null,Ds(a,o,b,5);break;case 6:Ze=0,Xn=null,Ds(a,o,b,6);break;case 8:mm(),Pt=6;break e;default:throw Error(r(462))}}ak();break}catch(ae){r1(a,ae)}while(!0);return Ea=go=null,L.H=d,L.A=y,Qe=c,Be!==null?0:(ut=null,Ge=0,Iu(),Pt)}function ak(){for(;Be!==null&&!bt();)o1(Be)}function o1(a){var o=jS(a.alternate,a,Na);a.memoizedProps=a.pendingProps,o===null?md(a):Be=o}function s1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=OS(c,o,o.pendingProps,o.type,void 0,Ge);break;case 11:o=OS(c,o,o.pendingProps,o.type.render,o.ref,Ge);break;case 5:kh(o);default:RS(c,o),o=Be=lx(o,Na),o=jS(c,o,Na)}a.memoizedProps=a.pendingProps,o===null?md(a):Be=o}function Ds(a,o,c,d){Ea=go=null,kh(o),Ss=null,Vl=0;var y=o.return;try{if(VN(a,y,o,c,Ge)){Pt=1,od(a,mr(c,a.current)),Be=null;return}}catch(b){if(y!==null)throw Be=y,b;Pt=1,od(a,mr(c,a.current)),Be=null;return}o.flags&32768?(Xe||d===1?a=!0:Ps||(Ge&536870912)!==0?a=!1:(mi=a=!0,(d===2||d===9||d===3||d===6)&&(d=br.current,d!==null&&d.tag===13&&(d.flags|=16384))),l1(o,a)):md(o)}function md(a){var o=a;do{if((o.flags&32768)!==0){l1(o,mi);return}a=o.return;var c=WN(o.alternate,o,Na);if(c!==null){Be=c;return}if(o=o.sibling,o!==null){Be=o;return}Be=o=a}while(o!==null);Pt===0&&(Pt=5)}function l1(a,o){do{var c=XN(a.alternate,a);if(c!==null){c.flags&=32767,Be=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){Be=a;return}Be=a=c}while(a!==null);Pt=6,Be=null}function c1(a,o,c,d,y,b,w,_,I){a.cancelPendingCommit=null;do gd();while(cn!==0);if((Qe&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=sh,hu(a,c,b,w,_,I),a===ut&&(Be=ut=null,Ge=0),Os=o,vi=a,Ts=c,fm=b,pm=y,JS=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,lk(Xo,function(){return h1(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=L.T,L.T=null,y=ee.p,ee.p=2,w=Qe,Qe|=4;try{QN(a,o,c)}finally{Qe=w,ee.p=y,L.T=d}}cn=1,u1(),d1(),f1()}}function u1(){if(cn===1){cn=0;var a=vi,o=Os,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var d=ee.p;ee.p=2;var y=Qe;Qe|=4;try{FS(o,a);var b=_m,w=Zb(a.containerInfo),_=b.focusedElem,I=b.selectionRange;if(w!==_&&_&&_.ownerDocument&&Qb(_.ownerDocument.documentElement,_)){if(I!==null&&nh(_)){var K=I.start,ae=I.end;if(ae===void 0&&(ae=K),"selectionStart"in _)_.selectionStart=K,_.selectionEnd=Math.min(ae,_.value.length);else{var le=_.ownerDocument||document,X=le&&le.defaultView||window;if(X.getSelection){var Q=X.getSelection(),Ne=_.textContent.length,_e=Math.min(I.start,Ne),at=I.end===void 0?_e:Math.min(I.end,Ne);!Q.extend&&_e>at&&(w=at,at=_e,_e=w);var G=Xb(_,_e),$=Xb(_,at);if(G&&$&&(Q.rangeCount!==1||Q.anchorNode!==G.node||Q.anchorOffset!==G.offset||Q.focusNode!==$.node||Q.focusOffset!==$.offset)){var Y=le.createRange();Y.setStart(G.node,G.offset),Q.removeAllRanges(),_e>at?(Q.addRange(Y),Q.extend($.node,$.offset)):(Y.setEnd($.node,$.offset),Q.addRange(Y))}}}}for(le=[],Q=_;Q=Q.parentNode;)Q.nodeType===1&&le.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<le.length;_++){var oe=le[_];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Td=!!Tm,_m=Tm=null}finally{Qe=y,ee.p=d,L.T=c}}a.current=o,cn=2}}function d1(){if(cn===2){cn=0;var a=vi,o=Os,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var d=ee.p;ee.p=2;var y=Qe;Qe|=4;try{GS(a,o.alternate,o)}finally{Qe=y,ee.p=d,L.T=c}}cn=3}}function f1(){if(cn===4||cn===3){cn=0,At();var a=vi,o=Os,c=Ts,d=JS;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?cn=5:(cn=0,Os=vi=null,p1(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(yi=null),hl(c),o=o.stateNode,Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Xa,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=L.T,y=ee.p,ee.p=2,L.T=null;try{for(var b=a.onRecoverableError,w=0;w<d.length;w++){var _=d[w];b(_.value,{componentStack:_.stack})}}finally{L.T=o,ee.p=y}}(Ts&3)!==0&&gd(),aa(a),y=a.pendingLanes,(c&4194090)!==0&&(y&42)!==0?a===hm?nc++:(nc=0,hm=a):nc=0,rc(0)}}function p1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Il(o)))}function gd(a){return u1(),d1(),f1(),h1()}function h1(){if(cn!==5)return!1;var a=vi,o=fm;fm=0;var c=hl(Ts),d=L.T,y=ee.p;try{ee.p=32>c?32:c,L.T=null,c=pm,pm=null;var b=vi,w=Ts;if(cn=0,Os=vi=null,Ts=0,(Qe&6)!==0)throw Error(r(331));var _=Qe;if(Qe|=4,QS(b.current),KS(b,b.current,w,c),Qe=_,rc(0,!1),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Xa,b)}catch{}return!0}finally{ee.p=y,L.T=d,p1(a,o)}}function m1(a,o,c){o=mr(c,o),o=Fh(a.stateNode,o,2),a=li(a,o,2),a!==null&&(Qa(a,2),aa(a))}function st(a,o,c){if(a.tag===3)m1(a,a,c);else for(;o!==null;){if(o.tag===3){m1(o,a,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(yi===null||!yi.has(d))){a=mr(c,a),c=bS(2),d=li(o,c,2),d!==null&&(xS(c,d,o,a),Qa(d,2),aa(d));break}}o=o.return}}function vm(a,o,c){var d=a.pingCache;if(d===null){d=a.pingCache=new ek;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(lm=!0,y.add(c),a=ik.bind(null,a,o,c),o.then(a,a))}function ik(a,o,c){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,ut===a&&(Ge&c)===c&&(Pt===4||Pt===3&&(Ge&62914560)===Ge&&300>ft()-dm?(Qe&2)===0&&_s(a,0):cm|=c,ws===Ge&&(ws=0)),aa(a)}function g1(a,o){o===0&&(o=Jo()),a=ds(a,o),a!==null&&(Qa(a,o),aa(a))}function ok(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),g1(a,c)}function sk(a,o){var c=0;switch(a.tag){case 13:var d=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),g1(a,c)}function lk(a,o){return tt(a,o)}var yd=null,Ns=null,bm=!1,vd=!1,xm=!1,Eo=0;function aa(a){a!==Ns&&a.next===null&&(Ns===null?yd=Ns=a:Ns=Ns.next=a),vd=!0,bm||(bm=!0,uk())}function rc(a,o){if(!xm&&vd){xm=!0;do for(var c=!1,d=yd;d!==null;){if(a!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var w=d.suspendedLanes,_=d.pingedLanes;b=(1<<31-rn(42|a)+1)-1,b&=y&~(w&~_),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,x1(d,b))}else b=Ge,b=Yi(d,d===ut?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Fi(d,b)||(c=!0,x1(d,b));d=d.next}while(c);xm=!1}}function ck(){y1()}function y1(){vd=bm=!1;var a=0;Eo!==0&&(vk()&&(a=Eo),Eo=0);for(var o=ft(),c=null,d=yd;d!==null;){var y=d.next,b=v1(d,o);b===0?(d.next=null,c===null?yd=y:c.next=y,y===null&&(Ns=c)):(c=d,(a!==0||(b&3)!==0)&&(vd=!0)),d=y}rc(a)}function v1(a,o){for(var c=a.suspendedLanes,d=a.pingedLanes,y=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var w=31-rn(b),_=1<<w,I=y[w];I===-1?((_&c)===0||(_&d)!==0)&&(y[w]=jp(_,o)):I<=o&&(a.expiredLanes|=_),b&=~_}if(o=ut,c=Ge,c=Yi(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===o&&(Ze===2||Ze===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&ze(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Fi(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(d!==null&&ze(d),hl(c)){case 2:case 8:c=Gi;break;case 32:c=Xo;break;case 268435456:c=qe;break;default:c=Xo}return d=b1.bind(null,a),c=tt(c,d),a.callbackPriority=o,a.callbackNode=c,o}return d!==null&&d!==null&&ze(d),a.callbackPriority=2,a.callbackNode=null,2}function b1(a,o){if(cn!==0&&cn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(gd()&&a.callbackNode!==c)return null;var d=Ge;return d=Yi(a,a===ut?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(t1(a,d,o),v1(a,ft()),a.callbackNode!=null&&a.callbackNode===c?b1.bind(null,a):null)}function x1(a,o){if(gd())return null;t1(a,o,!0)}function uk(){xk(function(){(Qe&6)!==0?tt(Wa,ck):y1()})}function Sm(){return Eo===0&&(Eo=Wr()),Eo}function S1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:pr(""+a)}function A1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function dk(a,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var b=S1((y[Pn]||null).action),w=d.submitter;w&&(o=(o=w[Pn]||null)?S1(o.formAction):w.getAttribute("formAction"),o!==null&&(b=o,w=null));var _=new Te("action","action",null,d,y);a.push({event:_,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Eo!==0){var I=w?A1(y,w):new FormData(y);zh(c,{pending:!0,data:I,method:y.method,action:b},null,I)}}else typeof b=="function"&&(_.preventDefault(),I=w?A1(y,w):new FormData(y),zh(c,{pending:!0,data:I,method:y.method,action:b},b,I))},currentTarget:y}]})}}for(var Am=0;Am<oh.length;Am++){var Em=oh[Am],fk=Em.toLowerCase(),pk=Em[0].toUpperCase()+Em.slice(1);Ur(fk,"on"+pk)}Ur(tx,"onAnimationEnd"),Ur(nx,"onAnimationIteration"),Ur(rx,"onAnimationStart"),Ur("dblclick","onDoubleClick"),Ur("focusin","onFocus"),Ur("focusout","onBlur"),Ur(DN,"onTransitionRun"),Ur(NN,"onTransitionStart"),Ur(kN,"onTransitionCancel"),Ur(ax,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function E1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],y=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var w=d.length-1;0<=w;w--){var _=d[w],I=_.instance,K=_.currentTarget;if(_=_.listener,I!==b&&y.isPropagationStopped())break e;b=_,y.currentTarget=K;try{b(y)}catch(ae){id(ae)}y.currentTarget=null,b=I}else for(w=0;w<d.length;w++){if(_=d[w],I=_.instance,K=_.currentTarget,_=_.listener,I!==b&&y.isPropagationStopped())break e;b=_,y.currentTarget=K;try{b(y)}catch(ae){id(ae)}y.currentTarget=null,b=I}}}}function Ue(a,o){var c=o[cr];c===void 0&&(c=o[cr]=new Set);var d=a+"__bubble";c.has(d)||(C1(o,a,2,!1),c.add(d))}function Cm(a,o,c){var d=0;o&&(d|=4),C1(c,a,d,o)}var bd="_reactListening"+Math.random().toString(36).slice(2);function Pm(a){if(!a[bd]){a[bd]=!0,Xi.forEach(function(c){c!=="selectionchange"&&(hk.has(c)||Cm(c,!1,a),Cm(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[bd]||(o[bd]=!0,Cm("selectionchange",!1,o))}}function C1(a,o,c,d){switch(K1(o)){case 2:var y=zk;break;case 8:y=Gk;break;default:y=Bm}c=y.bind(null,o,c,a),y=void 0,!$t||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?a.addEventListener(o,c,{capture:!0,passive:y}):a.addEventListener(o,c,!0):y!==void 0?a.addEventListener(o,c,{passive:y}):a.addEventListener(o,c,!1)}function wm(a,o,c,d,y){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var _=d.stateNode.containerInfo;if(_===y)break;if(w===4)for(w=d.return;w!==null;){var I=w.tag;if((I===3||I===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;_!==null;){if(w=qn(_),w===null)return;if(I=w.tag,I===5||I===6||I===26||I===27){d=b=w;continue e}_=_.parentNode}}d=d.return}xl(function(){var K=b,ae=bl(c),le=[];e:{var X=ix.get(a);if(X!==void 0){var Q=Te,Ne=a;switch(a){case"keypress":if(Al(c)===0)break e;case"keydown":case"keyup":Q=Yp;break;case"focusin":Ne="focus",Q=Bt;break;case"focusout":Ne="blur",Q=Bt;break;case"beforeblur":case"afterblur":Q=Bt;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Lp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Vp;break;case tx:case nx:case rx:Q=Ou;break;case ax:Q=Wp;break;case"scroll":case"scrollend":Q=ro;break;case"wheel":Q=Qp;break;case"copy":case"cut":case"paste":Q=Pl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=_u;break;case"toggle":case"beforetoggle":Q=Zp}var _e=(o&4)!==0,at=!_e&&(a==="scroll"||a==="scrollend"),G=_e?X!==null?X+"Capture":null:X;_e=[];for(var $=K,Y;$!==null;){var oe=$;if(Y=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Y===null||G===null||(oe=os($,G),oe!=null&&_e.push(ic($,oe,Y))),at)break;$=$.return}0<_e.length&&(X=new Q(X,Ne,null,c,ae),le.push({event:X,listeners:_e}))}}if((o&7)===0){e:{if(X=a==="mouseover"||a==="pointerover",Q=a==="mouseout"||a==="pointerout",X&&c!==$r&&(Ne=c.relatedTarget||c.fromElement)&&(qn(Ne)||Ne[ot]))break e;if((Q||X)&&(X=ae.window===ae?ae:(X=ae.ownerDocument)?X.defaultView||X.parentWindow:window,Q?(Ne=c.relatedTarget||c.toElement,Q=K,Ne=Ne?qn(Ne):null,Ne!==null&&(at=s(Ne),_e=Ne.tag,Ne!==at||_e!==5&&_e!==27&&_e!==6)&&(Ne=null)):(Q=null,Ne=K),Q!==Ne)){if(_e=Cl,oe="onMouseLeave",G="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(_e=_u,oe="onPointerLeave",G="onPointerEnter",$="pointer"),at=Q==null?X:kn(Q),Y=Ne==null?X:kn(Ne),X=new _e(oe,$+"leave",Q,c,ae),X.target=at,X.relatedTarget=Y,oe=null,qn(ae)===K&&(_e=new _e(G,$+"enter",Ne,c,ae),_e.target=Y,_e.relatedTarget=at,oe=_e),at=oe,Q&&Ne)t:{for(_e=Q,G=Ne,$=0,Y=_e;Y;Y=ks(Y))$++;for(Y=0,oe=G;oe;oe=ks(oe))Y++;for(;0<$-Y;)_e=ks(_e),$--;for(;0<Y-$;)G=ks(G),Y--;for(;$--;){if(_e===G||G!==null&&_e===G.alternate)break t;_e=ks(_e),G=ks(G)}_e=null}else _e=null;Q!==null&&P1(le,X,Q,_e,!1),Ne!==null&&at!==null&&P1(le,at,Ne,_e,!0)}}e:{if(X=K?kn(K):window,Q=X.nodeName&&X.nodeName.toLowerCase(),Q==="select"||Q==="input"&&X.type==="file")var Ee=ya;else if(Me(X))if(mn)Ee=Kb;else{Ee=th;var $e=so}else Q=X.nodeName,!Q||Q.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&Ja(K.elementType)&&(Ee=ya):Ee=_l;if(Ee&&(Ee=Ee(a,K))){We(le,Ee,c,ae);break e}$e&&$e(a,X,K),a==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&Su(X,"number",X.value)}switch($e=K?kn(K):window,a){case"focusin":(Me($e)||$e.contentEditable==="true")&&(ls=$e,rh=K,Nl=null);break;case"focusout":Nl=rh=ls=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,Jb(le,c,ae);break;case"selectionchange":if(_N)break;case"keydown":case"keyup":Jb(le,c,ae)}var we;if(Ol)e:{switch(a){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else he?B(a,c)&&(De="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(De="onCompositionStart");De&&(ku&&c.locale!=="ko"&&(he||De!=="onCompositionStart"?De==="onCompositionEnd"&&he&&(we=Ip()):(ha=ae,Sl="value"in ha?ha.value:ha.textContent,he=!0)),$e=xd(K,De),0<$e.length&&(De=new Tu(De,a,null,c,ae),le.push({event:De,listeners:$e}),we?De.data=we:(we=Z(c),we!==null&&(De.data=we)))),(we=eh?me(a,c):Se(a,c))&&(De=xd(K,"onBeforeInput"),0<De.length&&($e=new Tu("onBeforeInput","beforeinput",null,c,ae),le.push({event:$e,listeners:De}),$e.data=we)),dk(le,a,K,c,ae)}E1(le,o)})}function ic(a,o,c){return{instance:a,listener:o,currentTarget:c}}function xd(a,o){for(var c=o+"Capture",d=[];a!==null;){var y=a,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=os(a,c),y!=null&&d.unshift(ic(a,y,b)),y=os(a,o),y!=null&&d.push(ic(a,y,b))),a.tag===3)return d;a=a.return}return[]}function ks(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function P1(a,o,c,d,y){for(var b=o._reactName,w=[];c!==null&&c!==d;){var _=c,I=_.alternate,K=_.stateNode;if(_=_.tag,I!==null&&I===d)break;_!==5&&_!==26&&_!==27||K===null||(I=K,y?(K=os(c,b),K!=null&&w.unshift(ic(c,K,I))):y||(K=os(c,b),K!=null&&w.push(ic(c,K,I)))),c=c.return}w.length!==0&&a.push({event:o,listeners:w})}var mk=/\r\n?/g,gk=/\u0000|\uFFFD/g;function w1(a){return(typeof a=="string"?a:""+a).replace(mk,`
`).replace(gk,"")}function O1(a,o){return o=w1(o),w1(a)===o}function Sd(){}function rt(a,o,c,d,y,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||to(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&to(a,""+d);break;case"className":Qi(a,"class",d);break;case"tabIndex":Qi(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Qi(a,c,d);break;case"style":vl(a,d,b);break;case"data":if(o!=="object"){Qi(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=pr(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&rt(a,o,"name",y.name,y,null),rt(a,o,"formEncType",y.formEncType,y,null),rt(a,o,"formMethod",y.formMethod,y,null),rt(a,o,"formTarget",y.formTarget,y,null)):(rt(a,o,"encType",y.encType,y,null),rt(a,o,"method",y.method,y,null),rt(a,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=pr(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=Sd);break;case"onScroll":d!=null&&Ue("scroll",a);break;case"onScrollEnd":d!=null&&Ue("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=pr(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":Ue("beforetoggle",a),Ue("toggle",a),ns(a,"popover",d);break;case"xlinkActuate":Ir(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ir(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ir(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ir(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ir(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ir(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ir(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ir(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ir(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ns(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=no.get(c)||c,ns(a,c,d))}}function Om(a,o,c,d,y,b){switch(c){case"style":vl(a,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof d=="string"?to(a,d):(typeof d=="number"||typeof d=="bigint")&&to(a,""+d);break;case"onScroll":d!=null&&Ue("scroll",a);break;case"onScrollEnd":d!=null&&Ue("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Sd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ur.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),b=a[Pn]||null,b=b!=null?b[c]:null,typeof b=="function"&&a.removeEventListener(o,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,d,y);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):ns(a,c,d)}}}function un(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",a),Ue("load",a);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:rt(a,o,b,w,c,null)}}y&&rt(a,o,"srcSet",c.srcSet,c,null),d&&rt(a,o,"src",c.src,c,null);return;case"input":Ue("invalid",a);var _=b=w=y=null,I=null,K=null;for(d in c)if(c.hasOwnProperty(d)){var ae=c[d];if(ae!=null)switch(d){case"name":y=ae;break;case"type":w=ae;break;case"checked":I=ae;break;case"defaultChecked":K=ae;break;case"value":b=ae;break;case"defaultValue":_=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:rt(a,o,d,ae,c,null)}}xu(a,b,_,I,K,w,y,!1),is(a);return;case"select":Ue("invalid",a),d=w=b=null;for(y in c)if(c.hasOwnProperty(y)&&(_=c[y],_!=null))switch(y){case"value":b=_;break;case"defaultValue":w=_;break;case"multiple":d=_;default:rt(a,o,y,_,c,null)}o=b,c=w,a.multiple=!!d,o!=null?eo(a,!!d,o,!1):c!=null&&eo(a,!!d,c,!0);return;case"textarea":Ue("invalid",a),b=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(_=c[w],_!=null))switch(w){case"value":d=_;break;case"defaultValue":y=_;break;case"children":b=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:rt(a,o,w,_,c,null)}Au(a,d,y,b),is(a);return;case"option":for(I in c)if(c.hasOwnProperty(I)&&(d=c[I],d!=null))switch(I){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:rt(a,o,I,d,c,null)}return;case"dialog":Ue("beforetoggle",a),Ue("toggle",a),Ue("cancel",a),Ue("close",a);break;case"iframe":case"object":Ue("load",a);break;case"video":case"audio":for(d=0;d<ac.length;d++)Ue(ac[d],a);break;case"image":Ue("error",a),Ue("load",a);break;case"details":Ue("toggle",a);break;case"embed":case"source":case"link":Ue("error",a),Ue("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in c)if(c.hasOwnProperty(K)&&(d=c[K],d!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:rt(a,o,K,d,c,null)}return;default:if(Ja(o)){for(ae in c)c.hasOwnProperty(ae)&&(d=c[ae],d!==void 0&&Om(a,o,ae,d,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(d=c[_],d!=null&&rt(a,o,_,d,c,null))}function yk(a,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,w=null,_=null,I=null,K=null,ae=null;for(Q in c){var le=c[Q];if(c.hasOwnProperty(Q)&&le!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":I=le;default:d.hasOwnProperty(Q)||rt(a,o,Q,null,d,le)}}for(var X in d){var Q=d[X];if(le=c[X],d.hasOwnProperty(X)&&(Q!=null||le!=null))switch(X){case"type":b=Q;break;case"name":y=Q;break;case"checked":K=Q;break;case"defaultChecked":ae=Q;break;case"value":w=Q;break;case"defaultValue":_=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,o));break;default:Q!==le&&rt(a,o,X,Q,d,le)}}bu(a,w,_,I,K,ae,b,y);return;case"select":Q=w=_=X=null;for(b in c)if(I=c[b],c.hasOwnProperty(b)&&I!=null)switch(b){case"value":break;case"multiple":Q=I;default:d.hasOwnProperty(b)||rt(a,o,b,null,d,I)}for(y in d)if(b=d[y],I=c[y],d.hasOwnProperty(y)&&(b!=null||I!=null))switch(y){case"value":X=b;break;case"defaultValue":_=b;break;case"multiple":w=b;default:b!==I&&rt(a,o,y,b,d,I)}o=_,c=w,d=Q,X!=null?eo(a,!!c,X,!1):!!d!=!!c&&(o!=null?eo(a,!!c,o,!0):eo(a,!!c,c?[]:"",!1));return;case"textarea":Q=X=null;for(_ in c)if(y=c[_],c.hasOwnProperty(_)&&y!=null&&!d.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:rt(a,o,_,null,d,y)}for(w in d)if(y=d[w],b=c[w],d.hasOwnProperty(w)&&(y!=null||b!=null))switch(w){case"value":X=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&rt(a,o,w,y,d,b)}Rp(a,X,Q);return;case"option":for(var Ne in c)if(X=c[Ne],c.hasOwnProperty(Ne)&&X!=null&&!d.hasOwnProperty(Ne))switch(Ne){case"selected":a.selected=!1;break;default:rt(a,o,Ne,null,d,X)}for(I in d)if(X=d[I],Q=c[I],d.hasOwnProperty(I)&&X!==Q&&(X!=null||Q!=null))switch(I){case"selected":a.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:rt(a,o,I,X,d,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in c)X=c[_e],c.hasOwnProperty(_e)&&X!=null&&!d.hasOwnProperty(_e)&&rt(a,o,_e,null,d,X);for(K in d)if(X=d[K],Q=c[K],d.hasOwnProperty(K)&&X!==Q&&(X!=null||Q!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,o));break;default:rt(a,o,K,X,d,Q)}return;default:if(Ja(o)){for(var at in c)X=c[at],c.hasOwnProperty(at)&&X!==void 0&&!d.hasOwnProperty(at)&&Om(a,o,at,void 0,d,X);for(ae in d)X=d[ae],Q=c[ae],!d.hasOwnProperty(ae)||X===Q||X===void 0&&Q===void 0||Om(a,o,ae,X,d,Q);return}}for(var G in c)X=c[G],c.hasOwnProperty(G)&&X!=null&&!d.hasOwnProperty(G)&&rt(a,o,G,null,d,X);for(le in d)X=d[le],Q=c[le],!d.hasOwnProperty(le)||X===Q||X==null&&Q==null||rt(a,o,le,X,d,Q)}var Tm=null,_m=null;function Ad(a){return a.nodeType===9?a:a.ownerDocument}function T1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Dm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Nm=null;function vk(){var a=window.event;return a&&a.type==="popstate"?a===Nm?!1:(Nm=a,!0):(Nm=null,!1)}var D1=typeof setTimeout=="function"?setTimeout:void 0,bk=typeof clearTimeout=="function"?clearTimeout:void 0,N1=typeof Promise=="function"?Promise:void 0,xk=typeof queueMicrotask=="function"?queueMicrotask:typeof N1<"u"?function(a){return N1.resolve(null).then(a).catch(Sk)}:D1;function Sk(a){setTimeout(function(){throw a})}function xi(a){return a==="head"}function k1(a,o){var c=o,d=0,y=0;do{var b=c.nextSibling;if(a.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<d&&8>d){c=d;var w=a.ownerDocument;if(c&1&&oc(w.documentElement),c&2&&oc(w.body),c&4)for(c=w.head,oc(c),w=c.firstChild;w;){var _=w.nextSibling,I=w.nodeName;w[Hn]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=_}}if(y===0){a.removeChild(b),hc(o);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:d=c.charCodeAt(0)-48;else d=0;c=b}while(c);hc(o)}function km(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":km(c),fa(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function Ak(a,o,c,d){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Hn])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Gr(a.nextSibling),a===null)break}return null}function Ek(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=Gr(a.nextSibling),a===null))return null;return a}function jm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Ck(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Gr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var Mm=null;function j1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function M1(a,o,c){switch(o=Ad(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function oc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);fa(a)}var Sr=new Map,R1=new Set;function Ed(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ka=ee.d;ee.d={f:Pk,r:wk,D:Ok,C:Tk,L:_k,m:Dk,X:kk,S:Nk,M:jk};function Pk(){var a=ka.f(),o=hd();return a||o}function wk(a){var o=Nt(a);o!==null&&o.tag===5&&o.type==="form"?tS(o):ka.r(a)}var js=typeof document>"u"?null:document;function I1(a,o,c){var d=js;if(d&&typeof o=="string"&&o){var y=wn(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),R1.has(y)||(R1.add(y),a={rel:a,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),un(o,"link",a),Et(o),d.head.appendChild(o)))}}function Ok(a){ka.D(a),I1("dns-prefetch",a,null)}function Tk(a,o){ka.C(a,o),I1("preconnect",a,o)}function _k(a,o,c){ka.L(a,o,c);var d=js;if(d&&a&&o){var y='link[rel="preload"][as="'+wn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+wn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+wn(c.imageSizes)+'"]')):y+='[href="'+wn(a)+'"]';var b=y;switch(o){case"style":b=Ms(a);break;case"script":b=Rs(a)}Sr.has(b)||(a=h({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),Sr.set(b,a),d.querySelector(y)!==null||o==="style"&&d.querySelector(sc(b))||o==="script"&&d.querySelector(lc(b))||(o=d.createElement("link"),un(o,"link",a),Et(o),d.head.appendChild(o)))}}function Dk(a,o){ka.m(a,o);var c=js;if(c&&a){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+wn(d)+'"][href="'+wn(a)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Rs(a)}if(!Sr.has(b)&&(a=h({rel:"modulepreload",href:a},o),Sr.set(b,a),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(lc(b)))return}d=c.createElement("link"),un(d,"link",a),Et(d),c.head.appendChild(d)}}}function Nk(a,o,c){ka.S(a,o,c);var d=js;if(d&&a){var y=jn(d).hoistableStyles,b=Ms(a);o=o||"default";var w=y.get(b);if(!w){var _={loading:0,preload:null};if(w=d.querySelector(sc(b)))_.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},c),(c=Sr.get(b))&&Rm(a,c);var I=w=d.createElement("link");Et(I),un(I,"link",a),I._p=new Promise(function(K,ae){I.onload=K,I.onerror=ae}),I.addEventListener("load",function(){_.loading|=1}),I.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Cd(w,o,d)}w={type:"stylesheet",instance:w,count:1,state:_},y.set(b,w)}}}function kk(a,o){ka.X(a,o);var c=js;if(c&&a){var d=jn(c).hoistableScripts,y=Rs(a),b=d.get(y);b||(b=c.querySelector(lc(y)),b||(a=h({src:a,async:!0},o),(o=Sr.get(y))&&Im(a,o),b=c.createElement("script"),Et(b),un(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function jk(a,o){ka.M(a,o);var c=js;if(c&&a){var d=jn(c).hoistableScripts,y=Rs(a),b=d.get(y);b||(b=c.querySelector(lc(y)),b||(a=h({src:a,async:!0,type:"module"},o),(o=Sr.get(y))&&Im(a,o),b=c.createElement("script"),Et(b),un(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function L1(a,o,c,d){var y=(y=re.current)?Ed(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Ms(c.href),c=jn(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Ms(c.href);var b=jn(y).hoistableStyles,w=b.get(a);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,w),(b=y.querySelector(sc(a)))&&!b._p&&(w.instance=b,w.state.loading=5),Sr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Sr.set(a,c),b||Mk(y,a,c,w.state))),o&&d===null)throw Error(r(528,""));return w}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Rs(c),c=jn(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Ms(a){return'href="'+wn(a)+'"'}function sc(a){return'link[rel="stylesheet"]['+a+"]"}function $1(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function Mk(a,o,c,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),un(o,"link",c),Et(o),a.head.appendChild(o))}function Rs(a){return'[src="'+wn(a)+'"]'}function lc(a){return"script[async]"+a}function B1(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+wn(c.href)+'"]');if(d)return o.instance=d,Et(d),d;var y=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Et(d),un(d,"style",y),Cd(d,c.precedence,a),o.instance=d;case"stylesheet":y=Ms(c.href);var b=a.querySelector(sc(y));if(b)return o.state.loading|=4,o.instance=b,Et(b),b;d=$1(c),(y=Sr.get(y))&&Rm(d,y),b=(a.ownerDocument||a).createElement("link"),Et(b);var w=b;return w._p=new Promise(function(_,I){w.onload=_,w.onerror=I}),un(b,"link",d),o.state.loading|=4,Cd(b,c.precedence,a),o.instance=b;case"script":return b=Rs(c.src),(y=a.querySelector(lc(b)))?(o.instance=y,Et(y),y):(d=c,(y=Sr.get(b))&&(d=h({},c),Im(d,y)),a=a.ownerDocument||a,y=a.createElement("script"),Et(y),un(y,"link",d),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Cd(d,c.precedence,a));return o.instance}function Cd(a,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,w=0;w<d.length;w++){var _=d[w];if(_.dataset.precedence===o)b=_;else if(b!==y)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function Rm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Im(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Pd=null;function U1(a,o,c){if(Pd===null){var d=new Map,y=Pd=new Map;y.set(c,d)}else y=Pd,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var b=c[y];if(!(b[Hn]||b[an]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(o)||"";w=a+w;var _=d.get(w);_?_.push(b):d.set(w,[b])}}return d}function z1(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function Rk(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function G1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var cc=null;function Ik(){}function Lk(a,o,c){if(cc===null)throw Error(r(475));var d=cc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=Ms(c.href),b=a.querySelector(sc(y));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=wd.bind(d),a.then(d,d)),o.state.loading|=4,o.instance=b,Et(b);return}b=a.ownerDocument||a,c=$1(c),(y=Sr.get(y))&&Rm(c,y),b=b.createElement("link"),Et(b);var w=b;w._p=new Promise(function(_,I){w.onload=_,w.onerror=I}),un(b,"link",c),o.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=wd.bind(d),a.addEventListener("load",o),a.addEventListener("error",o))}}function $k(){if(cc===null)throw Error(r(475));var a=cc;return a.stylesheets&&a.count===0&&Lm(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&Lm(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function wd(){if(this.count--,this.count===0){if(this.stylesheets)Lm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Od=null;function Lm(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Od=new Map,o.forEach(Bk,a),Od=null,wd.call(a))}function Bk(a,o){if(!(o.state.loading&4)){var c=Od.get(a);if(c)var d=c.get(null);else{c=new Map,Od.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var w=y[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=o.instance,w=y.getAttribute("data-precedence"),b=c.get(w)||d,b===d&&c.set(null,y),c.set(w,y),this.count++,d=wd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var uc={$$typeof:O,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Uk(a,o,c,d,y,b,w,_){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=es(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=es(0),this.hiddenUpdates=es(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function H1(a,o,c,d,y,b,w,_,I,K,ae,le){return a=new Uk(a,o,c,w,_,I,K,le),o=1,b===!0&&(o|=24),b=Vn(3,null,null,o),a.current=b,b.stateNode=a,o=vh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},Ah(b),a}function q1(a){return a?(a=fs,a):fs}function Y1(a,o,c,d,y,b){y=q1(y),d.context===null?d.context=y:d.pendingContext=y,d=si(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=li(a,d,o),c!==null&&(Zn(c,a,o),Ul(c,a,o))}function F1(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function $m(a,o){F1(a,o),(a=a.alternate)&&F1(a,o)}function V1(a){if(a.tag===13){var o=ds(a,67108864);o!==null&&Zn(o,a,67108864),$m(a,67108864)}}var Td=!0;function zk(a,o,c,d){var y=L.T;L.T=null;var b=ee.p;try{ee.p=2,Bm(a,o,c,d)}finally{ee.p=b,L.T=y}}function Gk(a,o,c,d){var y=L.T;L.T=null;var b=ee.p;try{ee.p=8,Bm(a,o,c,d)}finally{ee.p=b,L.T=y}}function Bm(a,o,c,d){if(Td){var y=Um(d);if(y===null)wm(a,o,d,_d,c),W1(a,d);else if(qk(y,a,o,c,d))d.stopPropagation();else if(W1(a,d),o&4&&-1<Hk.indexOf(a)){for(;y!==null;){var b=Nt(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=da(b.pendingLanes);if(w!==0){var _=b;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var I=1<<31-rn(w);_.entanglements[1]|=I,w&=~I}aa(b),(Qe&6)===0&&(fd=ft()+500,rc(0))}}break;case 13:_=ds(b,2),_!==null&&Zn(_,b,2),hd(),$m(b,2)}if(b=Um(d),b===null&&wm(a,o,d,_d,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else wm(a,o,d,null,c)}}function Um(a){return a=bl(a),zm(a)}var _d=null;function zm(a){if(_d=null,a=qn(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return _d=a,null}function K1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lr()){case Wa:return 2;case Gi:return 8;case Xo:case pu:return 32;case qe:return 268435456;default:return 32}default:return 32}}var Gm=!1,Si=null,Ai=null,Ei=null,dc=new Map,fc=new Map,Ci=[],Hk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function W1(a,o){switch(a){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":Ai=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":dc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(o.pointerId)}}function pc(a,o,c,d,y,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},o!==null&&(o=Nt(o),o!==null&&V1(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function qk(a,o,c,d,y){switch(o){case"focusin":return Si=pc(Si,a,o,c,d,y),!0;case"dragenter":return Ai=pc(Ai,a,o,c,d,y),!0;case"mouseover":return Ei=pc(Ei,a,o,c,d,y),!0;case"pointerover":var b=y.pointerId;return dc.set(b,pc(dc.get(b)||null,a,o,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,fc.set(b,pc(fc.get(b)||null,a,o,c,d,y)),!0}return!1}function X1(a){var o=qn(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,Ki(a.priority,function(){if(c.tag===13){var d=Qn();d=Vi(d);var y=ds(c,d);y!==null&&Zn(y,c,d),$m(c,d)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Dd(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=Um(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);$r=d,c.target.dispatchEvent(d),$r=null}else return o=Nt(c),o!==null&&V1(o),a.blockedOn=c,!1;o.shift()}return!0}function Q1(a,o,c){Dd(a)&&c.delete(o)}function Yk(){Gm=!1,Si!==null&&Dd(Si)&&(Si=null),Ai!==null&&Dd(Ai)&&(Ai=null),Ei!==null&&Dd(Ei)&&(Ei=null),dc.forEach(Q1),fc.forEach(Q1)}function Nd(a,o){a.blockedOn===o&&(a.blockedOn=null,Gm||(Gm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yk)))}var kd=null;function Z1(a){kd!==a&&(kd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){kd===a&&(kd=null);for(var o=0;o<a.length;o+=3){var c=a[o],d=a[o+1],y=a[o+2];if(typeof d!="function"){if(zm(d||c)===null)continue;break}var b=Nt(c);b!==null&&(a.splice(o,3),o-=3,zh(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function hc(a){function o(I){return Nd(I,a)}Si!==null&&Nd(Si,a),Ai!==null&&Nd(Ai,a),Ei!==null&&Nd(Ei,a),dc.forEach(o),fc.forEach(o);for(var c=0;c<Ci.length;c++){var d=Ci[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Ci.length&&(c=Ci[0],c.blockedOn===null);)X1(c),c.blockedOn===null&&Ci.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],w=y[Pn]||null;if(typeof b=="function")w||Z1(c);else if(w){var _=null;if(b&&b.hasAttribute("formAction")){if(y=b,w=b[Pn]||null)_=w.formAction;else if(zm(y)!==null)continue}else _=w.action;typeof _=="function"?c[d+1]=_:(c.splice(d,3),d-=3),Z1(c)}}}function Hm(a){this._internalRoot=a}jd.prototype.render=Hm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=Qn();Y1(c,d,a,o,null,null)},jd.prototype.unmount=Hm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Y1(a.current,2,null,a,null,null),hd(),o[ot]=null}};function jd(a){this._internalRoot=a}jd.prototype.unstable_scheduleHydration=function(a){if(a){var o=Mp();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Ci.length&&o!==0&&o<Ci[c].priority;c++);Ci.splice(c,0,a),c===0&&X1(a)}};var J1=t.version;if(J1!=="19.1.1")throw Error(r(527,J1,"19.1.1"));ee.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=p(o),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Fk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{Xa=Md.inject(Fk),Cn=Md}catch{}}return gc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,d="",y=mS,b=gS,w=yS,_=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks)),o=H1(a,1,!1,null,null,c,d,y,b,w,_,null),a[ot]=o.current,Pm(a),new Hm(o)},gc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var d=!1,y="",b=mS,w=gS,_=yS,I=null,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(I=c.unstable_transitionCallbacks),c.formState!==void 0&&(K=c.formState)),o=H1(a,1,!0,o,c??null,d,y,b,w,_,I,K),o.context=q1(null),c=o.current,d=Qn(),d=Vi(d),y=si(d),y.callback=null,li(c,y,d),c=d,o.current.lanes=c,Qa(o,c),aa(o),a[ot]=o.current,Pm(a),new jd(o)},gc.version="19.1.1",gc}var cA;function nj(){if(cA)return Fm.exports;cA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fm.exports=tj(),Fm.exports}var rj=nj();const aj=Fr(rj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),uA=e=>{const t=oj(e);return t.charAt(0).toUpperCase()+t.slice(1)},$w=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),sj=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},p)=>E.createElement("svg",{ref:p,...lj,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:$w("lucide",i),...!s&&!sj(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,h])=>E.createElement(f,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(e,t)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(cj,{ref:s,iconNode:t,className:$w(`lucide-${ij(uA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=uA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Ic=wt("bolt",uj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],fj=wt("bomb",dj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hj=wt("chevron-down",pj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dA=wt("chevron-right",mj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Nc=wt("chevron-up",gj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Bw=wt("copy",yj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],fA=wt("cpu",vj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xj=wt("download",bj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pA=wt("eye",Sj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Ej=wt("hand",Aj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Pj=wt("loader-circle",Cj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ky=wt("rocket",wj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Tj=wt("rotate-ccw",Oj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hA=wt("settings",_j);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qd=wt("shield-check",Dj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Zd=wt("shield",Nj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],jj=wt("skull",kj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],jy=wt("sword",Mj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ij=wt("target",Rj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$j=wt("upload",Lj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],mA=wt("wrench",Bj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nn=wt("x",Uj),An=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",icon:Zd,effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",icon:fj,effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",icon:mA,targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:2,image:"/img/Interceptor.png",abilities:[{name:"Vigilant",description:"Can always intercept attacks in this lane, regardless of speed.",type:"PASSIVE",icon:Qd,effect:{type:"GRANT_KEYWORD",keyword:"ALWAYS_INTERCEPTS"}},{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",icon:Zd,effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",icon:Zd,scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",icon:jj,effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",icon:Ij,targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",icon:jy,effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",icon:Nc,effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",icon:jy,effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",icon:dA,effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",icon:dA,effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",icon:mA,targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],zj=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],gA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},ki=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",qa=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=ki(l),p={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const h in l.middleLaneBonus)p.hasOwnProperty(h)&&(p[h]+=l.middleLaneBonus[h]);r[s]=p}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},Tr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=An.find(g=>g.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,p=s.speed,f=s.shields,h=s.class;l.forEach(g=>{g.mod.stat==="attack"&&(u+=g.mod.value),g.mod.stat==="speed"&&(p+=g.mod.value),g.mod.stat==="shields"&&(f+=g.mod.value),g.mod.stat==="cost"&&(h+=g.mod.value)}),h=Math.max(0,h);let m={...e,attack:u,speed:p,maxShields:f,cost:h,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(g=>{g.stat==="attack"&&(m.attack+=g.value),g.stat==="speed"&&(m.speed+=g.value),g.stat==="cost"&&(m.cost=Math.max(0,m.cost+g.value))}),s.abilities?.forEach(g=>{if(g.type==="PASSIVE"){if(g.effect.type==="GRANT_KEYWORD"&&m.keywords.add(g.effect.keyword),g.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:x,mod:S}=g.effect;let A=!1;if(x.type==="SHIP_SECTION_HULL_DAMAGED"&&x.location==="SAME_LANE"){const C=parseInt(t.slice(-1))-1,T=(n.name==="Player 1"?i.player1:i.player2)[C];if(T){const O=n.shipSections[T],k=ki(O);(k==="damaged"||k==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(m.attack+=S.value)}if(g.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:x,mod:S}=g.effect;let A=0;if(x.type==="OWN_DAMAGED_SECTIONS")for(const C in n.shipSections){const P=n.shipSections[C],T=ki(P);(T==="damaged"||T==="critical")&&A++}A>0&&(S.stat==="attack"&&(m.attack+=S.value*A),S.stat==="speed"&&(m.speed+=S.value*A))}g.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+g.effect.value),g.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&g.effect.mods.forEach(x=>{x.stat==="attack"&&(m.attack+=x.value),x.stat==="speed"&&(m.speed+=x.value)})}}),n.dronesOnBoard[t]?.forEach(g=>{if(g.id===e.id)return;An.find(S=>S.name===g.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:C}=S.effect;A==="shields"?m.maxShields+=C:A==="attack"?m.attack+=C:A==="speed"&&(m.speed+=C)}})}),l.forEach(g=>{g.grantedAbilities&&g.grantedAbilities.forEach(x=>{if(x.type==="PASSIVE"&&(x.effect.type==="GRANT_KEYWORD"&&m.keywords.add(x.effect.keyword),x.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=x.effect;S==="attack"&&(m.attack+=A),S==="speed"&&(m.speed+=A),S==="shields"&&(m.maxShields+=A)}})}),m},Gj=(e,t)=>({...e,instanceId:t}),Ls=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],Uw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=zj.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(Gj(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},$0=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},Hj=(e,t)=>{const n=qa({shipSections:gA},[]).totals;return{name:e,shipSections:gA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:Uw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Us=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},zw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},nl=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=Tr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},Bn=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},kc=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],f=!(typeof n.cost=="number"),{type:h,affinity:m,location:g,custom:x}=n.targeting;let S=null;if(f&&Object.values(s.dronesOnBoard).flat().some(T=>T.id===t.id)&&(S=Bn(t.id,s),!S))return[];const A=(P,T)=>{Object.entries(P.dronesOnBoard).forEach(([O,k])=>{let N=!1;g==="ANY_LANE"&&(N=!0),f&&g==="SAME_LANE"&&(N=O===S),N&&k.forEach(D=>{let j=!0;if(x?.includes("DAMAGED_HULL")){const R=An.find(z=>z.name===D.name);(!R||D.hull>=R.hull)&&(j=!1)}x?.includes("EXHAUSTED")&&(D.isExhausted||(j=!1)),j&&u.push({...D,lane:O,owner:T})})})},C=(P,T)=>{Object.keys(P.shipSections).forEach(O=>{u.push({id:O,owner:T,...P.shipSections[O]})})};if(h==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(s,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(h==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&C(s,e),(m==="ENEMY"||m==="ANY")&&C(l,e==="player1"?"player2":"player1");else if(h==="LANE")["lane1","lane2","lane3"].forEach(P=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:P,owner:e}),m==="ENEMY"||m==="ANY"){const T=e==="player1"?"player2":"player1";u.push({id:P,owner:T})}});else if(h==="DRONE_CARD"){const P=e==="player1"?r:i;P.activeDronePool.forEach(T=>{const O=An.find(j=>j.name===T.name),k=P.appliedUpgrades[T.name]||[],N=k.filter(j=>j.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;O&&k.length<O.upgradeSlots&&N<D&&u.push({...T,id:T.name,owner:e})})}else if(h==="APPLIED_UPGRADE"){const P=m==="ENEMY"?l:s,T=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(P.dronesOnBoard).flat().forEach(O=>{(P.appliedUpgrades[O.name]||[]).length>0&&u.push({...O,owner:T})})}return u},Gw=(e,t,n,r,i)=>{const s=An.find(f=>f.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const p=s.abilities.filter(f=>f.type==="TRIGGERED"&&f.trigger==="ON_MOVE");if(p.length>0){const f=l.dronesOnBoard[r].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[r][f];p.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),h.statMods||(h.statMods=[]),m.effects?.forEach(g=>{g.type==="PERMANENT_STAT_MOD"&&(u=!0,h.statMods.push(g.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${g.mod.value} ${g.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},Hw=(e,t,n)=>{const r=An.find(f=>f.name===t.name);if(!r?.abilities)return{newState:e,effects:[],animationEvents:[]};let i=JSON.parse(JSON.stringify(e));const s=[],l=[];let u=!1;return r.abilities.filter(f=>f.effect?.type==="AFTER_ATTACK").forEach(f=>{const{subEffect:h}=f.effect;if(h.type==="DESTROY_SELF")for(const m in i.dronesOnBoard){const g=i.dronesOnBoard[m].findIndex(x=>x.id===t.id);if(g!==-1){u=!0;const x=i.dronesOnBoard[m][g];s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${f.name}', destroying itself.`}}),l.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:n,targetLane:m,targetType:"drone",timestamp:Date.now()}),i.dronesOnBoard[m]=i.dronesOnBoard[m].filter(S=>S.id!==t.id),Object.assign(i,Us(i,x));break}}else if(h.type==="PERMANENT_STAT_MOD")for(const m in i.dronesOnBoard){const g=i.dronesOnBoard[m].findIndex(x=>x.id===t.id);if(g!==-1){u=!0,i.dronesOnBoard[m][g].statMods||(i.dronesOnBoard[m][g].statMods=[]),s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${f.name}', gaining a permanent +${h.mod.value} ${h.mod.stat}.`}}),i.dronesOnBoard[m][g].statMods.push(h.mod);break}}}),{newState:u?i:e,effects:s,animationEvents:l}},My=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>ki(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},qw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=An.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const p=t.class;let f=0,h=0;return n===1?(h=Math.min(e.initialDeploymentBudget,p),f=p-h):(h=Math.min(e.deploymentBudget,p),f=p-h),e.energy<f?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${f} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:h,energyCost:f}},Yw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},B0=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=$0(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},qj=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},Yj=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")Yw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=B0(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},Fj=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=B0(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},Vj=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=qa(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(p=>{l[p]={...n.shipSections[p],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},Kj=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,p=qa(s,l).totals.shieldsPerTurn,f=JSON.parse(JSON.stringify(s.shipSections)),h=Object.keys(f);let m=p,g=0,x=0;for(;m>0&&x<100;){const P=h[g%h.length],T=f[P],O=$0(P,s,l);T.allocatedShields<O&&(T.allocatedShields++,m--),g++,x++}const S={...s,shipSections:f},C={success:!0,newPhase:"deployment",firstPlayer:Xf(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(C.player1State=i,C.player2State=S):(C.player1State=S,C.player2State=i),C},Wj=(e,t,n,r,i,s,l)=>{const{effect:u,cost:p}=e,f=r.player1;let h="",m="Ability effect applied.";e.targeting?.type==="LANE"?h=`Lane ${n.id.slice(-1)}`:n&&(h=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${h}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${h}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${h}.`),s&&s({player:f.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:h,outcome:m});const g={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.energy&&(g.player1.energy-=p.energy),p.exhausts)for(const A in g.player1.dronesOnBoard){const C=g.player1.dronesOnBoard[A].findIndex(P=>P.id===t.id);if(C!==-1){g.player1.dronesOnBoard[A][C].isExhausted=!0;break}}const x=eO(u,t,n,g,i,{resolveAttackCallback:l});g.player1=x.newPlayerStates.player1,g.player2=x.newPlayerStates.player2;const S=x.animationEvents||[];return{newPlayerStates:g,shouldEndTurn:!u.goAgain,animationEvents:S}},Xj=(e,t,n,r,i,s,l)=>{const{cost:u,effect:p}=e,f=r.player1;s&&s({player:f.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(h.player1.energy-=u.energy,p.type==="REALLOCATE_SHIELDS")return{newPlayerStates:h,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:[]};{const m=tO(p,t,n,h,i,{resolveAttackCallback:l});h.player1=m.newPlayerStates.player1,h.player2=m.newPlayerStates.player2;const g=m.animationEvents||[];return m.needsDiscardSelection?{newPlayerStates:h,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0},animationEvents:g}:{newPlayerStates:h,shouldEndTurn:!0,animationEvents:g}}},Fw=(e,t,n,r,i,s,l,u)=>{const p=qw(r,e,n,Object.values(r.dronesOnBoard).flat().length,qa(r,s.player1||s));if(!p.isValid)return{success:!1,error:p.reason,message:p.message,newPlayerState:r};const{budgetCost:f,energyCost:h}=p;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const m=JSON.parse(JSON.stringify(r)),g={...m.dronesOnBoard,[t]:[...m.dronesOnBoard[t],{...e,id:0}]},x={...m,dronesOnBoard:g},S=Tr(e,t,x,i,s),A={...e,id:Date.now(),statMods:[],currentShields:S.maxShields,currentMaxShields:S.maxShields,hull:e.hull,isExhausted:!1};m.dronesOnBoard[t].push(A),m.deployedDroneCounts={...m.deployedDroneCounts,[e.name]:(m.deployedDroneCounts[e.name]||0)+1},n===1?m.initialDeploymentBudget-=f:m.deploymentBudget-=f,m.energy-=h,m.dronesOnBoard=nl(m,i,s);const C=[{type:"TELEPORT_IN",targetId:A.id,laneId:t,playerId:u,timestamp:Date.now()}];return{success:!0,newPlayerState:m,deployedDrone:A,animationEvents:C}},Qj=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return My(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):My(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},Zj=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=Bn(e.id,t);if(!i)return[];const s=Tr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(p=>{const f=Tr(p,i,n,t,r);return!p.isExhausted&&(f.speed>s.speed||f.keywords.has("ALWAYS_INTERCEPTS"))}).map(p=>p.id)},Jj=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,p=e.class;let f=0;n===1?f=Math.min(r.initialDeploymentBudget,p):f=Math.min(r.deploymentBudget,p);const h=p-f;if(r.energy<h)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let g={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-f:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-f:r.deploymentBudget,energy:r.energy-h};return g.dronesOnBoard=nl(g,i,s),{success:!0,newPlayerState:g,deployedDrone:m,costs:{energy:h,budget:f}}},eM=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l,attackingPlayer:u}=e,f=t[u==="player1"?"player2":"player1"],h=t[u],m=Tr(r,l,h,f,n),g=f.dronesOnBoard[l].filter(x=>{const S=Tr(x,l,f,h,n);return!x.isExhausted&&(S.speed>m.speed||S.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||x.id!==i.id)});return{hasInterceptors:g.length>0,interceptors:g,attackDetails:e}},U0=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},tM=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},nM=(e,t)=>{const n=U0(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},rM=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=Xf(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},aM=(e,t,n,r)=>{const i=Ry(e.player1,t,n,e.player2,e.placedSections),s=Ry(e.player2,t,r,e.player1,e.opponentPlacedSections),l=Iy(i,n.totals.handLimit),u=Iy(s,r.totals.handLimit),p=Xf(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),f={...e,turn:t,turnPhase:"deployment",currentPlayer:p,firstPlayerOfRound:p,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},h=[{type:"ROUND_START",turn:t,firstPlayer:p},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:f,uiEffects:h}},Vw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=Tr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},Ry=(e,t,n,r,i)=>({...Vw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),Iy=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},iM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:p,opponentPlacedSections:f}=e,{addLogEntry:h,setPlayer2:m,setPendingAttack:g,endTurn:x,endDeploymentPhase:S,endActionPhase:A,setPassInfo:C}=n;let P;return l==="deployment"&&!u.player2Passed?P=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:f,placedSections:p,getShipStatus:ki,calculateEffectiveShipStats:qa,calculateEffectiveStats:Tr,addLogEntry:h}):l==="action"&&!u.player2Passed&&(P=t.handleOpponentAction({player1:r,player2:i,placedSections:p,opponentPlacedSections:f,getShipStatus:ki,getLaneOfDrone:Bn,getValidTargets:kc,calculateEffectiveStats:Tr,addLogEntry:h})),P||null},oM=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:p}=t,{addLogEntry:f,setPlayer2:h,setPendingAttack:m,endTurn:g,endDeploymentPhase:x,endActionPhase:S,setPassInfo:A,resolveCardPlay:C}=n;if(e.type==="pass"){const P=!t.passInfo.player1Passed,T={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(P?"player2":null)};return A(T),T.player1Passed?l==="deployment"?x():l==="action"&&S():g("player2"),{newPassInfo:T}}else if(e.type==="deploy"){const{droneToDeploy:P,targetLane:T,logContext:O}=e.payload;f({player:i.name,actionType:"DEPLOY",source:P.name,target:T,outcome:`Deployed to ${T}.`},"aiDeploymentDeploy",O);const k=Fw(P,T,i,r,s,{player1:u,player2:p});return k.success&&(h(k.newPlayerState),g("player2")),{deployedDrone:k.deployedDrone}}else if(e.type==="action"){const P=e.payload,{logContext:T}=e;switch(P.type){case"play_card":C(P.card,P.target,"player2",T);break;case"attack":m({attacker:P.attacker,target:P.target,targetType:P.targetType,lane:P.attacker.lane,attackingPlayer:"player2",aiContext:T});break;case"move":{const{drone:O,fromLane:k,toLane:N}=P;f({player:i.name,actionType:"MOVE",source:O.name,target:N,outcome:`Moved from ${k} to ${N}.`},"aiActionMove",T);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[k]=D.dronesOnBoard[k].filter(z=>z.id!==O.id);const j={...O,isExhausted:!0};D.dronesOnBoard[N].push(j);const{newState:R}=Gw(D,j,k,N,f);R.dronesOnBoard=nl(R,r,{player1:u,player2:p}),h(R),g("player2");break}default:g("player2");break}return{action:P}}return null},Kw=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:f}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=p,x.hand=x.hand.filter(P=>P.instanceId!==e.instanceId),x.discardPile.push(e);const S=new Set(t.map(P=>P.id));x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(P=>!S.has(P.id));const A=t.map(P=>({...P,isExhausted:P.isExhausted||!f.properties?.includes("DO_NOT_EXHAUST")}));x.dronesOnBoard[r].push(...A),h({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(P=>P.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let C=x;return A.forEach(P=>{const{newState:T}=m(C,P,n,r,h);C=T}),C.dronesOnBoard=g(C,s,l),{newPlayerState:C,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},Ww=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:f}=e,{logCallback:h,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=p,x.hand=x.hand.filter(C=>C.instanceId!==e.instanceId),x.discardPile.push(e),x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(C=>C.id!==t.id);const S={...t,isExhausted:f.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};x.dronesOnBoard[r].push(S),h({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(x,S,n,r,h);return A.dronesOnBoard=g(A,s,l),{newPlayerState:A,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},sM=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Xw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=ki(i);(s==="damaged"||s==="critical")&&n++}return n},lM=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:p,resolveAttackCallback:f}=s,h=t?t.name||t.id:"N/A";let m="Card effect applied.";const g=e.effect;if(g.type==="DRAW"&&(m=`Drew ${g.value} card(s).`),g.type==="GAIN_ENERGY"&&(m=`Gained ${g.value} energy.`),g.type==="HEAL_HULL"&&(m=`Healed ${g.value} hull on ${h}.`),g.type==="HEAL_SHIELDS"&&(m=`Healed ${g.value} shields on ${h}.`),g.type==="READY_DRONE"&&(m=`Readied ${h}.`),g.type==="DAMAGE"&&(g.scope==="FILTERED"?m=`Dealt ${g.value} damage to filtered targets in ${h}.`:m=`Dealt ${g.value} damage to ${h}.`),g.type==="MODIFY_STAT"){const C=g.mod,P=C.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${h} a ${C.value>0?"+":""}${C.value} ${C.stat} bonus${P}.`}if(g.type==="REPEATING_EFFECT"){const C=r[n],P=Xw(g.condition,C);m=`Drew ${P} card(s) and gained ${P} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:h,outcome:m});let x=sM(e,n,r);const S=cM(e.effect,t,n,x,i,s,e),A=[];if(A.push({type:"CARD_REVEAL",cardId:e.id,cardName:e.name,cardData:e,actingPlayerId:n,timestamp:Date.now()}),e.visualEffect&&t){let C=null,P=null,T=null;if(t.id&&(t.id==="lane1"||t.id==="lane2"||t.id==="lane3")){const O=e.targeting?.affinity||"ANY";O==="ENEMY"?(C=n==="player1"?"player2":"player1",P=t.id,T="lane"):O==="ANY"&&(C="center",P=t.id,T="lane"),C&&T&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:P,targetType:T,duration:e.visualEffect.duration||800,timestamp:Date.now()})}else{for(const O of["player1","player2"]){for(const k in x[O].dronesOnBoard)if(x[O].dronesOnBoard[k].some(N=>N.id===t.id)){C=O,P=k,T="drone";break}if(C)break}if(!C){for(const O of["player1","player2"])if(x[O].shipSections[t.name]||x[O].shipSections[t.id]){C=O,T="section";break}}C&&T&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:P,targetType:T,duration:e.visualEffect.duration||800,timestamp:Date.now()})}}if(S.animationEvents&&A.push(...S.animationEvents),console.log("[ANIMATION EVENTS] resolveCardPlay emitted:",A),!S.needsCardSelection){const C=Qw(e,n,S.newPlayerStates);return{newPlayerStates:C.newPlayerStates,shouldEndTurn:C.shouldEndTurn,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:!1}}return{newPlayerStates:x,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:S.needsCardSelection}},Qw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},cM=(e,t,n,r,i,s,l=null)=>e.effects?uM(e,t,n,r,i,s,l):Zw(e,t,n,r,i,s,l),uM=(e,t,n,r,i,s,l=null)=>{let u=r,p=[];if(e.type==="REPEATING_EFFECT"){const f=Xw(e.condition,u[n]);for(let h=0;h<f;h++)for(const m of e.effects){const g=Zw(m,t,n,u,i,s,l);u=g.newPlayerStates,g.additionalEffects&&p.push(...g.additionalEffects)}}return{newPlayerStates:u,additionalEffects:p}},Zw=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return G0(e,null,t,n,r);case"SEARCH_AND_DRAW":return Jw(e,null,t,n,r);case"GAIN_ENERGY":return dM(e,n,r,i);case"READY_DRONE":return fM(e,t,n,r);case"HEAL_HULL":return z0(e,null,t,n,r,i);case"HEAL_SHIELDS":return pM(e,t,n,r);case"DAMAGE":return Wf(e,null,t,n,r,i,s,l);case"DESTROY":return mM(e,t,n,r);case"MODIFY_STAT":return gM(e,t,n,r);case"MODIFY_DRONE_BASE":return yM(e,t,n,r);case"DESTROY_UPGRADE":return vM(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return AM(e,t,n,r,i,s,l);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},dM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,p=qa(l,u).totals,f=Math.min(p.maxEnergy,l.energy+e.value);return l.energy=f,{newPlayerStates:s,additionalEffects:[]}},fM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(p!==-1){l.dronesOnBoard[u][p].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},pM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(p!==-1){const f=l.dronesOnBoard[u][p];f.currentShields=Math.min(f.currentMaxShields||f.shields,f.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},hM=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,f=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[f].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${f} ${u}`),console.log(`[DEBUG] Drones in ${f} ${u}:`,m.map(O=>`${O.name}(${O.id}) [${O.hull}hp, ${O.speed}spd]`));const{stat:g,comparison:x,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},P=A[f].dronesOnBoard[u]||[];for(let O=P.length-1;O>=0;O--){const k=P[O];let N=!1;if(x==="GTE"&&k[g]>=S&&(N=!0),x==="LTE"&&k[g]<=S&&(N=!0),console.log(`[DEBUG] ${k.name} ${g}=${k[g]} ${x} ${S} = ${N}`),N){console.log(`[DEBUG] Applying ${e.value} damage to ${k.name}`);const D=k.currentShields||0;let j=e.value;const R=Math.min(j,D);k.currentShields=(k.currentShields||0)-R,j-=R,j>0&&(k.hull-=j),k.hull<=0&&(console.log(`[DEBUG] ${k.name} destroyed`),P.splice(O,1))}}const T=[];for(const O of m){const k=P.find(D=>D.id===O.id);let N=!1;if(x==="GTE"&&O[g]>=S&&(N=!0),x==="LTE"&&O[g]<=S&&(N=!0),N){const D=O.currentShields||0,j=Math.min(e.value,D),R=e.value-j;j>0&&T.push({type:"SHIELD_DAMAGE",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",amount:j,timestamp:Date.now()}),k?R>0&&T.push({type:"HULL_DAMAGE",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",amount:R,timestamp:Date.now()}):T.push({type:"DRONE_DESTROYED",targetId:O.id,targetPlayer:f,targetLane:u,targetType:"drone",timestamp:Date.now()})}}return{newPlayerStates:A,additionalEffects:[],animationEvents:T}}else{const u=r[t.owner],p=Bn(t.id,u);if(p){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const f={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=f[t.owner].dronesOnBoard[p]||[],g=m.find(x=>x.id===t.id);if(g){let x=e.value,S=0,A=x;if(e.damageType!=="PIERCING"&&(S=Math.min(x,g.currentShields),A-=S,g.currentShields-=S),g.hull-=A,console.log(`[DEBUG] Applied ${A} hull damage to ${g.name} (${g.hull} hull remaining)`),g.hull<=0){console.log(`[DEBUG] ${g.name} destroyed`);const P=m.findIndex(T=>T.id===t.id);P>=0&&m.splice(P,1)}const C=[];return S>0&&C.push({type:"SHIELD_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:S,timestamp:Date.now()}),g.hull<=0?C.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",timestamp:Date.now()}):A>0&&C.push({type:"HULL_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:A,timestamp:Date.now()}),{newPlayerStates:f,additionalEffects:[],animationEvents:C}}return{newPlayerStates:f,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},mM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const p=t.id;(s[l].dronesOnBoard[p]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:l,targetLane:p,targetType:"drone",timestamp:Date.now()});const g=Us(s[l],m);s[l].deployedDroneCounts={...s[l].deployedDroneCounts||{},...g.deployedDroneCounts}}),s[l].dronesOnBoard[p]=[],(s[n].dronesOnBoard[p]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:n,targetLane:p,targetType:"drone",timestamp:Date.now()});const g=Us(s[n],m);s[n].deployedDroneCounts={...s[n].deployedDroneCounts||{},...g.deployedDroneCounts}}),s[n].dronesOnBoard[p]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const p=s[l],f=Bn(t.id,p);if(f){const h=p.dronesOnBoard[f].find(m=>m.id===t.id);if(h){u.push({type:"DRONE_DESTROYED",targetId:h.id,targetPlayer:l,targetLane:f,targetType:"drone",timestamp:Date.now()});const m=Us(p,h);p.deployedDroneCounts={...p.deployedDroneCounts||{},...m.deployedDroneCounts},p.dronesOnBoard[f]=p.dronesOnBoard[f].filter(g=>g.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:[],animationEvents:u}},gM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const p=t.id;l.dronesOnBoard[p]&&l.dronesOnBoard[p].forEach(f=>{f.statMods||(f.statMods=[]),f.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const p in l.dronesOnBoard){const f=l.dronesOnBoard[p].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[p][f];h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},yM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,p=l.appliedUpgrades[u]||[],f={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(f.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...p,f]},{newPlayerStates:s,additionalEffects:[]}},vM=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:p,instanceId:f}=t;if(u.appliedUpgrades[p]){const h=u.appliedUpgrades[p].filter(m=>m.instanceId!==f);h.length>0?u.appliedUpgrades[p]=h:delete u.appliedUpgrades[p]}return{newPlayerStates:s,additionalEffects:[]}},Wf=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:p}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return hM(e,n,r,i,l,u?.targeting);const f=n.owner==="player1"?i.player1:i.player2,h=Bn(n.id,f);if(h&&p){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:h,damageType:e.damageType},g=rO(m,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:g.newPlayerStates,additionalEffects:g.afterAttackEffects||[],animationEvents:g.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},z0=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1";if(e.scope==="LANE"){const f=n.id;u[p].dronesOnBoard[f]&&u[p].dronesOnBoard[f].forEach(h=>{const m=An.find(g=>g.name===h.name);m&&h.hull<m.hull&&(h.hull=Math.min(m.hull,h.hull+e.value))})}else{const f=An.find(h=>h.name===n.name);if(f){const h=Bn(n.id,u[p]);if(h){const m=u[p].dronesOnBoard[h].findIndex(g=>g.id===n.id);m!==-1&&(u[p].dronesOnBoard[h][m].hull=Math.min(f.hull,u[p].dronesOnBoard[h][m].hull+e.value))}}else if(n.name&&u[p].shipSections[n.name]){const h=u[p].shipSections[n.name],g=(p==="player1"?s.player1:s.player2).find(x=>x.name===n.name);g&&(h.hull=Math.min(g.maxHull,h.hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},G0=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",f=u[p];let h=[...f.deck],m=[...f.hand],g=[...f.discardPile];const x=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<x;A++){if(h.length===0)if(g.length>0)h=[...g].sort(()=>.5-Math.random()),g=[];else break;h.length>0&&m.push(h.pop())}u[p]={...f,deck:h,hand:m,discardPile:g};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},bM=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),Jw=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",f=u[p];let h=[...f.deck],m=[...f.discardPile],g,x;if(e.filter)h.length===0&&m.length>0&&(h=[...m.sort(()=>.5-Math.random())],m=[]),g=h.filter(A=>bM(A,e.filter)).slice(0,e.searchCount),x=h.filter(A=>!g.includes(A));else{const S=e.searchCount;h.length<S&&m.length>0&&(h=[...h,...m.sort(()=>.5-Math.random())],m=[]),g=h.slice(-e.searchCount).reverse(),x=h.slice(0,-e.searchCount)}if(p==="player2"){const S=xM(g,e.drawCount,u),A=g.filter(T=>!S.includes(T)),C=[...f.hand,...S];let P=[...x,...A];return e.shuffleAfter&&(P=P.sort(()=>.5-Math.random())),u[p]={...f,deck:P,hand:C,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:g,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:x,discardPile:m,filter:e.filter}}},xM=(e,t,n,r)=>e.map(s=>({card:s,score:SM(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),SM=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},AM=(e,t,n,r,i,s,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",p=r[n],f=r[u];let h=null,m=-1/0;for(const g of["lane1","lane2","lane3"]){const S=(p.dronesOnBoard[g]||[]).filter(A=>!A.isExhausted);if(S.length!==0)for(const A of["lane1","lane2","lane3"]){if(g===A)continue;if(e.type==="SINGLE_MOVE"){const O=parseInt(g.replace("lane","")),k=parseInt(A.replace("lane",""));if(Math.abs(O-k)!==1)continue}const C=f.dronesOnBoard[A]?.length||0,P=p.dronesOnBoard[A]?.length||0,T=C*10-P*5;T>m&&(m=T,h={fromLane:g,toLane:A,drones:e.type==="SINGLE_MOVE"?[S[0]]:S.slice(0,Math.min(e.count||3,S.length))})}}if(!h)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const g=Ww(l,h.drones[0],h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:g.newPlayerState},additionalEffects:[]}}else{const g=Kw(l,h.drones,h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:g.newPlayerState},additionalEffects:[]}}},eO=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return z0(e,t,n,"player1",r,i);case"DAMAGE":return Wf(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},tO=(e,t,n,r,i,s)=>{const l={name:t};switch(e.type){case"DAMAGE":return Wf(e,l,n,"player1",r,i,s);case"RECALL_DRONE":return nO(e,t,n,r,i);case"DRAW_THEN_DISCARD":return G0(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},nO=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=Bn(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(p=>p.id!==n.id),Object.assign(l.player1,zw(l.player1,n)),l.player1.dronesOnBoard=nl(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[],animationEvents:[]}},rO=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:p,interceptor:f,attackingPlayer:h,abilityDamage:m,goAgain:g,damageType:x,lane:S}=e,A=m!==void 0,C=f||u,P=f?"drone":p,T=h,O=C.owner||(T==="player1"?"player2":"player1"),k=t[T],N=t[O];let D=null,j=null;!A&&l&&l.id&&(D=Bn(l.id,k),j=Tr(l,D,k,N,n));let R=m??(j?Math.max(0,j.attack):0),z=x||(l?l.damageType:void 0);j&&j.keywords&&j.keywords.has("PIERCING")&&(z="PIERCING"),P==="section"&&!m&&l&&l.name&&An.find(V=>V.name===l.name)?.abilities?.forEach(V=>{V.type==="PASSIVE"&&V.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(R+=V.effect.value)});let W=0,H=0,q=!1,se=0,te=0;if(P==="drone"){let F=null;for(const V in N.dronesOnBoard)if(F=N.dronesOnBoard[V].find(ue=>ue.id===C.id),F)break;if(F){let V=R;z!=="PIERCING"&&(W=Math.min(R,F.currentShields),V-=W),H=Math.min(V,F.hull),q=F.hull-H<=0,se=F.currentShields-W,te=q?0:F.hull-H}}else{const F=N.shipSections[C.name];if(F){let V=R;z!=="PIERCING"&&(W=Math.min(R,F.allocatedShields),V-=W),H=Math.min(V,F.hull),q=F.hull-H<=0,se=F.allocatedShields-W,te=q?0:F.hull-H}}const ne=`Dealt ${W} shield and ${H} hull damage to ${C.name}.`+(P==="drone"?q?` ${C.name} Destroyed.`:` ${C.name} has ${se} shields and ${te} hull left.`:""),L=[];if(l&&l.id&&!A&&L.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:T,sourceLane:D,targetId:C.id,targetPlayer:O,targetLane:P==="drone"?Bn(C.id,N):null,targetType:P,attackValue:j?j.attack:1,timestamp:Date.now()}),W>0){const F={type:"SHIELD_DAMAGE",targetId:C.id,targetPlayer:O,targetLane:P==="drone"?Bn(C.id,N):null,targetType:P,amount:W,timestamp:Date.now()};L.push(F)}if(q){const F={type:P==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:C.id,targetPlayer:O,targetLane:P==="drone"?Bn(C.id,N):null,targetType:P,timestamp:Date.now()};L.push(F)}else{if(H>0){const F={type:"HULL_DAMAGE",targetId:C.id,targetPlayer:O,targetLane:P==="drone"?Bn(C.id,N):null,targetType:P,amount:H,timestamp:Date.now()};L.push(F)}P==="section"&&(W>0||H>0)&&L.push({type:"SECTION_DAMAGED",targetId:C.id,targetPlayer:O,targetType:"section",timestamp:Date.now()}),l&&l.id&&!A&&L.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:T,sourceLane:D,timestamp:Date.now()})}console.log("[ANIMATION EVENTS] resolveAttack emitted:",L);const ee=D||(S?S.replace("lane","Lane "):null),ce=P==="drone"?`${C.name} (${ee})`:C.name,ye=l&&l.name?`${l.name} (${ee})`:"Card Effect";r&&r({player:t[T].name,actionType:"ATTACK",source:ye,target:ce,outcome:ne});const M={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(P==="drone"){let F=!1;for(const V in M[O].dronesOnBoard){const ue=M[O].dronesOnBoard[V].findIndex(ge=>ge.id===C.id);if(ue!==-1){if(M[O].dronesOnBoard[V][ue].hull-H<=0){F=!0;const ge=M[O].dronesOnBoard[V][ue];M[O].dronesOnBoard[V]=M[O].dronesOnBoard[V].filter(U=>U.id!==C.id),Object.assign(M[O],Us(M[O],ge))}else M[O].dronesOnBoard[V][ue].hull-=H,M[O].dronesOnBoard[V][ue].currentShields-=W;break}}if(F){const V=O==="player1"?M.player2:M.player1;M[O].dronesOnBoard=nl(M[O],V,n)}}else{M[O].shipSections[C.name].hull-=H,M[O].shipSections[C.name].allocatedShields-=W;const F=O==="player1"?n.player1:n.player2,V=qa(M[O],F).totals;M[O].energy>V.maxEnergy&&(M[O].energy=V.maxEnergy)}if(!A&&l&&l.id){let F=!1;for(const V in M[T].dronesOnBoard){const ue=M[T].dronesOnBoard[V].findIndex(ge=>ge.id===l.id);if(ue!==-1){M[T].dronesOnBoard[V][ue].isExhausted=!0,F=!0;break}}if(F){const V=Hw(M[T],l,T);M[T]=V.newState,V.animationEvents&&V.animationEvents.length>0&&L.push(...V.animationEvents),V.effects.forEach(ue=>{ue.type==="LOG"&&r&&r(ue.payload,"afterAttack")})}}if(f){const F=T==="player1"?"player2":"player1";for(const V in M[F].dronesOnBoard){const ue=M[F].dronesOnBoard[V].findIndex(ge=>ge.id===f.id);if(ue!==-1){Tr(M[F].dronesOnBoard[V][ue],V,M[F],M[T],n).keywords.has("DEFENDER")||(M[F].dronesOnBoard[V][ue].isExhausted=!0);break}}}return{newPlayerStates:M,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:D||S,targetName:C.name,targetType:P,interceptorName:f?f.name:null,shieldDamage:W,hullDamage:H,wasDestroyed:q,remainingShields:se,remainingHull:te,outcome:ne,shouldEndTurn:!g},animationEvents:L}},EM=(e,t)=>{const n=qa(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},Xf=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),CM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},PM=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},wM=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},OM=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},TM=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(p=>p.instanceId===l.instanceId||p.name===l.name&&p.id===l.id);if(u!==-1&&s<t){const p=r.splice(u,1)[0];i.push(p),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),p=r.splice(u,1)[0];i.push(p),s++}return{...e,hand:r,discardPile:i,discardCount:s}},aO=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}return s},iO=(e,t)=>t.activeDronePool.map(n=>{const r=An.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),oO=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},_M=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=kc("player1",e.drone,e.ability,i,s):t?l=kc("player1",{id:t.sectionName},t.ability,i,s):n?u=aO(n,i):r&&(r.type==="Upgrade"?u=iO(r,i):r.effect.type==="MULTI_MOVE"?u=oO(n,i):u=kc("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},DM=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),NM=(e,t,n,r)=>{const i=U0(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},je={initialPlayerState:Hj,buildDeckFromList:Uw,getEffectiveSectionMaxShields:$0,getShipStatus:ki,onDroneDestroyed:Us,onDroneRecalled:zw,checkWinCondition:My,calculateAfterAttackStateAndEffects:Hw,applyOnMoveEffects:Gw,updateAuras:nl,getLaneOfDrone:Bn,getValidTargets:kc,calculateAllValidTargets:_M,calculateMultiSelectTargets:aO,calculateUpgradeTargets:iO,calculateMultiMoveTargets:oO,validateDeployment:qw,validateShieldRemoval:Yw,validateShieldAddition:B0,executeShieldReallocation:qj,getValidShieldReallocationTargets:Yj,processShieldAllocation:Fj,processResetShieldAllocation:Vj,processEndShieldAllocation:Kj,resolveAttack:rO,resolveAbility:Wj,resolveShipAbility:Xj,executeDeployment:Fw,resolveCardPlay:lM,finishCardPlay:Qw,resolveMultiMove:Kw,resolveSingleMove:Ww,checkGameStateForWinner:Qj,calculatePotentialInterceptors:Zj,calculateAiInterception:eM,calculateTurnTransition:U0,calculatePassTransition:tM,readyDronesAndRestoreShields:Vw,calculateNewRoundPlayerState:Ry,drawToHandLimit:Iy,drawPlayerCards:EM,determineFirstPlayer:Xf,enforceHandLimit:CM,checkHandLimitCompliance:PM,checkHandLimitViolations:wM,enforceHandLimits:OM,processDiscardPhase:TM,processTurnTransition:nM,processPhaseChange:rM,processRoundStart:aM,createExplosionEffect:DM,createTurnEndEffects:NM,resolveUnifiedDamageEffect:Wf,resolveUnifiedHealEffect:z0,resolveUnifiedDrawEffect:G0,resolveSearchAndDrawEffect:Jw,resolveDroneAbilityEffect:eO,resolveShipAbilityEffect:tO,resolveShipRecallEffect:nO,executeAiDeployment:Jj,executeAiTurn:iM,executeAiAction:oM},yc=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:je,startingDecklist:Ls},Symbol.toStringTag,{value:"Module"})),kM="modulepreload",jM=function(e){return"/"+e},yA={},Hr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=p(n.map(f=>{if(f=jM(f),f in yA)return;yA[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":kM,h||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((x,S)=>{g.addEventListener("load",x),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class MM{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log(" GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(` Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(` Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const RM=new MM;class qt{static instance=null;static getInstance(t){return qt.instance||(qt.instance=new qt(t)),qt.instance}static reset(){qt.instance&&qt.instance.stateSubscriptionCleanup&&qt.instance.stateSubscriptionCleanup(),qt.instance=null,console.log(" GameDataService singleton reset")}constructor(t){if(qt.instance)return console.warn(" GameDataService already exists. Use getInstance() instead of new GameDataService()"),qt.instance;this.gameStateManager=t,this.cache=RM,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log(" GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),p=s[l],f=s[u],h=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,p),S=Tr(t,n,m?p:f,m?f:p,h);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=qa(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!0})),p=(l.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:p,hasGuardian:this.hasGuardianInLane(t,p)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const IM=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));class LM{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){if(this.isInitialized){console.log(" AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=qt.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,console.log(" AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log(" AIPhaseProcessor connected to ActionProcessor for execution"),s&&console.log(" AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const p=this.dronePool?.find(f=>f.name===u);return p||console.warn(` AI personality references unknown drone: ${u}`),p}).filter(u=>u),console.log(` Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const l=r.map(u=>u.name).join(", ");console.log(` Mapped drones: ${l}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(` Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error(" Not enough drones available for AI selection:",r.length),n&&n.dronePool){const l=n.dronePool.filter(u=>!this.dronePool?.find(p=>p.name===u));l.length>0&&console.error(` Missing drones from collection: ${l.join(", ")}`),console.error(` Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(` Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),s=i.map(l=>l.name).join(", ");return console.log(` AI selected drones: ${s}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(p=>n.preferredDrones.includes(p.name)),u=Math.min(3,l.length);r=l.slice(0,u),console.log(` AI selected ${r.length} preferred drones:`,r.map(p=>p.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((p,f)=>{const h=(p.energyCost||1)+(p.health||0)+(p.attack||0);return(f.energyCost||1)+(f.health||0)+(f.attack||0)-h});const l=r?.aggression||.5,u=r?.economy||.5;for(let p=0;p<n&&s.length>0;p++){let f=0;if(l>.7)f=s.findIndex(h=>(h.attack||0)>2),f===-1&&(f=0);else if(u>.7)f=s.findIndex(h=>(h.energyCost||1)<=2),f===-1&&(f=0);else{const h=Math.min(3,s.length);f=Math.floor(Math.random()*h)}i.push(s.splice(f,1)[0])}return console.log(` AI balanced selection (${n}):`,i.map(p=>p.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(` Using ${n.name} personality decklist`);const{gameEngine:i}=await Hr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>yc);return{gameEngine:s}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log(" Using standard deck as fallback");const{gameEngine:i,startingDecklist:s}=await Hr(async()=>{const{gameEngine:l,startingDecklist:u}=await Promise.resolve().then(()=>yc);return{gameEngine:l,startingDecklist:u}},void 0);r=i.buildDeckFromList(s)}return console.log(` AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(` AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return console.log(` AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return console.log(" AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return console.log(" AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return console.log(" AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(console.log(" AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Hr(async()=>{const{aiBrain:s}=await import("./aiLogic-BEGZrg5E.js");return{aiBrain:s}},[]),{gameEngine:r}=await Hr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>yc);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log(" AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(console.log(" AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Hr(async()=>{const{aiBrain:s}=await import("./aiLogic-BEGZrg5E.js");return{aiBrain:s}},[]),{gameEngine:r}=await Hr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>yc);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});return console.log(" AIPhaseProcessor executing action decision:",i),i.type==="pass"?(await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}),null):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(console.log(" AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await Hr(async()=>{const{gameEngine:h}=await Promise.resolve().then(()=>yc);return{gameEngine:h}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return console.log(" AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},p=[];if(u.hand.length>l){const h=u.hand.length-l;p=u.hand.slice(0,h),u={...u,hand:u.hand.slice(h),discardPile:[...u.discardPile,...p]},console.log(` AI discarding ${h} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const f=u.hand.length-(r.hand.length-p.length);return f>0&&console.log(` AI drew ${f} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:p,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(console.log(" AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return console.log(" AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];return u=[...n.hand].sort((f,h)=>h.cost-f.cost).slice(0,l),console.log(` AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(console.log(" AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return console.log(" AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let p=[];const f=[];return Object.entries(n.dronesOnBoard||{}).forEach(([h,m])=>{m.forEach(g=>{f.push({...g,lane:h})})}),f.sort((h,m)=>{const g=this.gameDataService.getEffectiveStats(h,h.lane),x=this.gameDataService.getEffectiveStats(m,m.lane);return g.power-x.power}),p=f.slice(0,u),console.log(` AI removing ${p.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:p,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log(" AI has already passed"),!0):!1}async executePass(t){return console.log(` AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(console.log(` AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn(t)},1500)))}async executeTurn(t){if(this.isProcessing){console.log(" AIPhaseProcessor: Already processing a turn, skipping");return}this.isProcessing=!0;try{console.log(` AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let n;if(t.turnPhase==="deployment")n=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")n=await this.executeActionTurn(t);else{console.warn(` AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}if(n?.needsInterceptionDecision){console.log(" AIPhaseProcessor: AI attack needs human interception decision, pausing turn loop"),this.isProcessing=!1;return}const r=this.gameStateManager.getState();r.currentPlayer==="player2"&&r.passInfo&&!r.passInfo.player2Passed&&(console.log(" AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(r)},100))}catch(n){console.error(" AIPhaseProcessor: Error executing turn:",n)}finally{this.isProcessing=!1}}async makeInterceptionDecision(t,n){if(!this.isInitialized)throw new Error("AIPhaseProcessor not initialized");console.log(" AIPhaseProcessor.makeInterceptionDecision called:",{interceptorCount:t?.length||0,target:n.target?.name});const{aiBrain:r}=await Hr(async()=>{const{aiBrain:s}=await import("./aiLogic-BEGZrg5E.js");return{aiBrain:s}},[]),i=r.makeInterceptionDecision(t,n.target);return console.log(" AI interception decision:",{willIntercept:!!i.interceptor,interceptorName:i.interceptor?.name}),i}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,interception:!0,version:"1.3.0"}}}const oa=new LM;class ja{static instance=null;static getInstance(t){return ja.instance||(ja.instance=new ja(t)),ja.instance}static reset(){ja.instance=null,console.log(" ActionProcessor singleton reset")}constructor(t){if(ja.instance)return console.warn(" ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),ja.instance;this.gameStateManager=t,this.gameDataService=qt.getInstance(t),this.animationManager=null,this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},console.log(" ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const p=`${u}Passed`;if(s.passInfo[p])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return console.log(" Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return console.log(" Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return console.log(" Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);!i&&this.p2pManager&&this.p2pManager.isConnected&&this.gameStateManager.get("gameMode")!=="local"&&(console.log("[P2P ACTION] Sending action to peer:",{type:n,payload:r}),this.p2pManager.sendData({type:"ACTION",action:{type:n,payload:r},timestamp:Date.now()})),this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections};let s={...n};if(!n.interceptor){const m=je.calculateAiInterception(n,{player1:r.player1,player2:r.player2},i);if(m.hasInterceptors){const g=n.attackingPlayer==="player1"?"player2":"player1";if(this.gameStateManager.setState({interceptionPending:{attackDetails:n,defendingPlayerId:g,attackingPlayerId:n.attackingPlayer,interceptors:m.interceptors,timestamp:Date.now()}}),g==="player2"&&r.gameMode==="local"){if(console.log(" [INTERCEPTION] AI defender has interceptors"),await new Promise(x=>setTimeout(x,1e3)),this.aiPhaseProcessor){const x=await this.aiPhaseProcessor.makeInterceptionDecision(m.interceptors,n);console.log(" [INTERCEPTION] AI decision:",x.interceptor?"INTERCEPT":"DECLINE"),x.interceptor&&(s.interceptor=x.interceptor,this.gameStateManager.setState({lastInterception:{interceptor:x.interceptor,originalTarget:n.target,timestamp:Date.now()}}))}this.gameStateManager.setState({interceptionPending:null})}else return console.log(" [INTERCEPTION] Human defender has interceptors"),{needsInterceptionDecision:!0,interceptionData:{interceptors:m.interceptors,attackDetails:m.attackDetails}}}}const l=m=>{this.gameStateManager.addLogEntry(m,"resolveAttack",s.attackingPlayer==="player2"?s.aiContext:null)},u=()=>{},p=()=>{},f=je.resolveAttack(s,{player1:r.player1,player2:r.player2},i,l,u,p),h=(f.animationEvents||[]).map(m=>({animationName:m.type,payload:{...m,droneId:m.sourceId}}));return console.log("[ANIMATION EVENTS] ActionProcessor received:",f.animationEvents),console.log("[ANIMATION EVENTS] Mapped to animations:",h),console.log(" [AI ANIMATION DEBUG] Built animations array:",{count:h.length,animations:h.map(m=>({name:m.animationName,sourceId:m.payload.sourceId,targetId:m.payload.targetId})),hasAnimationManager:!!this.animationManager}),this.animationManager?(console.log(" [AI ANIMATION DEBUG] Calling animationManager.executeAnimations()"),await this.animationManager.executeAnimations(h),console.log(" [AI ANIMATION DEBUG] executeAnimations() completed")):console.warn(" [AI ANIMATION DEBUG] No animationManager available!"),this.gameStateManager.setPlayerStates(f.newPlayerStates.player1,f.newPlayerStates.player2),r.interceptionPending&&(console.log(" [INTERCEPTION] Clearing interceptionPending after attack completed"),this.gameStateManager.setState({interceptionPending:null})),this.checkWinCondition(),f.attackResult&&f.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),f}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const p=u.dronesOnBoard[r].findIndex(m=>m.id===n);if(p===-1)throw new Error(`Drone ${n} not found in ${r}`);const f=u.dronesOnBoard[r][p],h={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(m=>m.id!==n),[i]:[...u.dronesOnBoard[i],{...f,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:h}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:f.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),console.log(` Moved ${f.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${f.name} moved from ${r} to ${i}`,drone:f,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null,f=null;if(Object.values(l).forEach(A=>{Object.values(A.dronesOnBoard).forEach(C=>{C.forEach(P=>{P.id===n&&(p=P),P.id===i&&(f=P)})})}),i&&i.startsWith("lane")&&!f&&(f={id:i}),!p||!p.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const h=p.abilities[r],m=A=>{this.gameStateManager.addLogEntry(A,"resolveAbility")},g=async A=>await this.processAttack({attackDetails:A}),x=je.resolveAbility(h,p,f,l,u,m,g),S=(x.animationEvents||[]).map(A=>({animationName:A.type,payload:{...A,droneId:A.sourceId}}));if(this.animationManager&&S.length>0&&await this.animationManager.executeAnimations(S),this.gameStateManager.setPlayerStates(x.newPlayerStates.player1,x.newPlayerStates.player2),this.checkWinCondition(),x.shouldEndTurn){const A=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:A.currentPlayer==="player1"?"player2":"player1"})}return x}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,l=this.gameStateManager.getState(),u=l[i],f=l[i==="player1"?"player2":"player1"],h={player1:l.placedSections,player2:l.opponentPlacedSections},m=x=>{this.gameStateManager.addLogEntry(x)},g=je.executeDeployment(n,r,s||l.turn,u,f,h,m,i);if(g.success){const x=g.deployedDrone?.id||n.id,S=(g.animationEvents||[]).map(O=>({animationName:O.type,payload:{...O,droneId:O.targetId}})),A={...g.newPlayerState,dronesOnBoard:{...g.newPlayerState.dronesOnBoard,[r]:g.newPlayerState.dronesOnBoard[r].map(O=>O.id===x?{...O,isTeleporting:!0}:O)}};i==="player1"?this.gameStateManager.updatePlayers(A,{}):this.gameStateManager.updatePlayers({},A),await new Promise(O=>setTimeout(O,50));const C=this.animationManager&&S.length>0?this.animationManager.executeAnimations(S):Promise.resolve(),P=this.animationManager?.animations?.TELEPORT_IN||{duration:600,config:{revealAt:.7}},T=P.duration*(P.config?.revealAt||.7);setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(g.newPlayerState,{}):this.gameStateManager.updatePlayers({},g.newPlayerState)},T),await C,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return g}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null;if(r){for(const g of["player1","player2"]){for(const x of["lane1","lane2","lane3"]){const A=(l[g].dronesOnBoard[x]||[]).find(C=>C.id===r);if(A){p={...A,owner:g};break}}if(p)break}if(!p)for(const g of["player1","player2"]){const x=l[g].shipSections;for(const S in x)if(x[S].id===r){p={...x[S],name:S,owner:g};break}if(p)break}!p&&r&&r.startsWith("lane")&&(p={id:r})}const f={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},h=je.resolveCardPlay(n,p,i,l,u,f);console.log("[ANIMATION EVENTS] Card play events:",h.animationEvents);const m=(h.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));if(this.animationManager&&m.length>0&&await this.animationManager.executeAnimations(m),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),this.checkWinCondition(),h.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return h}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:s,toLane:l,playerId:u}=t,p=this.gameStateManager.getState(),f={player1:p.player1,player2:p.player2},h={player1:p.placedSections,player2:p.opponentPlacedSections},m={logCallback:x=>this.gameStateManager.addLogEntry(x),applyOnMoveEffectsCallback:je.applyOnMoveEffects,updateAurasCallback:je.updateAuras};let g;if(r==="single_move"){g=je.resolveSingleMove(n,i[0],s,l,f[u],f[u==="player1"?"player2":"player1"],h,m);const x={...f,[u]:g.newPlayerState};this.gameStateManager.setPlayerStates(x.player1,x.player2)}else{g=je.resolveMultiMove(n,i,s,l,f[u],f[u==="player1"?"player2":"player1"],h,m);const x={...f,[u]:g.newPlayerState};this.gameStateManager.setPlayerStates(x.player1,x.player2)}if(g.shouldEndTurn){const x=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:x.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:g.shouldEndTurn}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},p={player1:l.placedSections,player2:l.opponentPlacedSections},f={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},h=je.resolveShipAbility(n,r,i,u,p,f),m=(h.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));if(this.animationManager&&m.length>0&&await this.animationManager.executeAnimations(m),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return h}checkWinCondition(){const t=this.gameStateManager.getState();if(t.winner)return null;const n={player1:t.player1,player2:t.player2},r={logCallback:s=>{this.gameStateManager.addLogEntry(s,"checkWinCondition")},setWinnerCallback:s=>{this.gameStateManager.setWinner(s)},showWinnerModalCallback:()=>{}};return je.checkGameStateForWinner(n,r)}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=je.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let p=r;u.passInfo&&u.passInfo[`${r}Passed`]?(p=u.currentPlayer,console.log(`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${p}`)):console.log(`[TURN TRANSITION DEBUG] Setting new player: ${p}`),this.gameStateManager.setCurrentPlayer(p)}const l=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return console.log(`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,console.log(`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const f=this.gameStateManager.getLocalPlayerId(),h=i[f],g=this.gameDataService.getEffectiveShipStats(h,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=g,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${g}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1});const u={determineFirstPlayer:"DETERMINING FIRST PLAYER",energyReset:"ENERGY RESET",mandatoryDiscard:"MANDATORY DISCARD PHASE",optionalDiscard:"OPTIONAL DISCARD PHASE",draw:"DRAW PHASE",allocateShields:"ALLOCATE SHIELDS",mandatoryDroneRemoval:"REMOVE EXCESS DRONES",deployment:"DEPLOYMENT PHASE",deploymentComplete:"DEPLOYMENT COMPLETE",action:"ACTION PHASE"};if(u[n]&&this.animationManager){console.log(` [PHASE ANNOUNCEMENT] Showing announcement for: ${n}`);const f={phaseText:u[n],phaseName:n,timestamp:Date.now()};if(n==="deployment"||n==="action"){const m=this.gameStateManager.getLocalPlayerId(),g=i.firstPlayerOfRound===m;f.subtitle=g?"You Go First":"Opponent Goes First"}const h={animationName:"PHASE_ANNOUNCEMENT",payload:f};await this.animationManager.executeAnimations([h]),console.log(` [PHASE ANNOUNCEMENT] Announcement complete for: ${n}`)}console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase}  ${n}`);const p=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:p.turnPhase,placedSections:p.placedSections,opponentPlacedSections:p.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||je.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),p=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),f=je.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),h=je.calculateNewRoundPlayerState(s.player2,n,p,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,firstPasserOfPreviousRound:s.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(f,h),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:f,player2:h}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const p=u.shipSections[r];if(!p||p.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const f={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},h={...u,shipSections:f};return this.gameStateManager.updatePlayerState(s,h),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:h}}else if(n==="add"){const p=s==="player1"?l.placedSections:l.opponentPlacedSections,f=je.getEffectiveSectionMaxShields(r,u,p),h=u.shipSections[r];if(!h||h.allocatedShields>=f)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},g={...u,shipSections:m};return this.gameStateManager.updatePlayerState(s,g),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:g}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const p={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,p),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:p}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return console.log(" [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",s),s.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const p=this.gameStateManager.getState(),f=!p.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",p.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:p.passInfo.firstPasser||(f?n:null)});const h=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",h),h.player1Passed&&h.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),p.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):p.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=`${l}Passed`,p=`${n}Passed`,f=!s[u],h={...s,[p]:!0,firstPasser:s.firstPasser||(f?n:null)};if(console.log("[PLAYER PASS DEBUG] Updating pass info:",h),this.gameStateManager.setPassInfo(h,"ActionProcessor"),h.player1Passed&&h.player2Passed)console.log("[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let g=null;n==="player1"&&!h.player2Passed?g="player2":n==="player2"&&!h.player1Passed&&(g="player1"),g&&(console.log(`[PLAYER PASS DEBUG] Switching turn to ${g} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:g},"TURN_SWITCH","playerPass"))}return this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("playerPass",{playerId:n,playerName:r,turnPhase:i,passInfo:h}),{success:!0,newPassInfo:h}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error(" CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error(" CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("aiShipPlacement",{placement:n,aiPersonality:r}),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1}=t,s=this.gameStateManager.getState();if(console.log(`[OPTIONAL DISCARD DEBUG] Processing ${i?"mandatory":"optional"} discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const l=s[n];if(!l)throw new Error(`Player ${n} not found`);r.forEach(f=>{this.gameStateManager.addLogEntry({player:l.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:f.name,target:"N/A",outcome:`Discarded ${f.name}.`})});const u=l.hand.filter(f=>!r.some(h=>f.instanceId===h.instanceId)),p=[...l.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:u,discardPile:p}),console.log(`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){console.log(" ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await Hr(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-C-yFl_SP.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),console.log(` First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeDeploymentComplete(t){return console.log(` ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),console.log(` Cleared commitments for phase: ${t}`)):(n.commitments={},console.log(" Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;console.log(` ActionProcessor: Processing ${r} commitment for ${n}`);const s=this.gameStateManager.getState();s.commitments[r]||(s.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),s.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:s.commitments},"COMMITMENT_UPDATE");const l=s.commitments[r].player1.completed&&s.commitments[r].player2.completed;return console.log(` ${n} ${r} committed, both complete: ${l}`),n==="player1"&&s.gameMode==="local"&&(console.log(" Single-player mode: Auto-completing AI commitment"),oa&&setTimeout(async()=>{try{await this.handleAICommitment(r,s)}catch(u){console.error("AI commitment error:",u)}},100)),{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:l}}}async handleAICommitment(t,n){try{console.log(` Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await oa.processDroneSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"droneSelection",actionData:{drones:r}}});break;case"deckSelection":r=await oa.processDeckSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deckSelection",actionData:{deck:r}}});break;case"placement":r=await oa.processPlacement(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"placement",actionData:{placedSections:r}}});break;case"mandatoryDiscard":r=await oa.executeMandatoryDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"optionalDiscard":r=await oa.executeOptionalDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"allocateShields":await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"allocateShields",actionData:{shieldAllocation:[]}}});break;case"mandatoryDroneRemoval":r=await oa.executeMandatoryDroneRemovalTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}}),i()},1e3)});break;case"deploymentComplete":console.log(" AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}}),console.log(" AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(` No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(` No commitments found for phase: ${t}`),{};console.log(` ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),console.log(" Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,discard:[]}),console.log(" Applied deck selections to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),console.log(" Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":console.log(" First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":console.log(" Discard commitments (handled via card actions)");break;case"allocateShields":console.log(" Shield allocation (handled separately)");break;case"deploymentComplete":console.log(" Deployment complete acknowledgments (no state changes)");break;case"determineFirstPlayer":console.log(" First player determination (handled by GameFlowManager)");break;default:console.warn(` No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return console.log(" ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r}=t;return console.log(" ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),{success:!0,message:"Energy reset completed",player1:n,player2:r}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}const sO=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(` Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(` Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},$M=(e,t=3)=>{if(!e||e.length===0)return console.warn(" No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(` Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(` Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class BM{constructor(){console.log(" GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.state={appState:"menu",isHost:!1,isGuest:!1,isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=ja.getInstance(this),this.gameFlowManager=null,this.p2pIntegrationSetup=!1,console.log(" GAMESTATE INITIALIZATION: GameStateManager created"),console.log(" App State:",this.state.appState),console.log(" Game Active:",this.state.gameActive),console.log(" GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost);break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),p=l.some(A=>A.includes("App.jsx")),f=l.some(A=>A.includes("ActionProcessor")),h=l.some(A=>A.includes("PhaseManager")),m=f||h;p&&!m&&(console.error(" ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error(" App.jsx should only call ActionProcessor or PhaseManager methods"),console.error(" Stack trace:",s));const g=Object.keys(t),x=`${u.primaryCaller} in ${u.primaryFile}`;console.log(` GAMESTATE CHANGE [${n}] from ${x}:`,{changedKeys:g,allUpdates:t,architectureViolation:p&&!m});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,x,n),g.forEach(A=>{if(!["player1","player2"].includes(A)){const C=i[A],P=t[A];JSON.stringify(C)!==JSON.stringify(P)&&console.log(` STATE CHANGE: ${A}`,{before:C,after:P,caller:x,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(m=>m in t),p=i&&i.includes("GameFlowManager"),f=r==="phaseTransition"||t.turnPhase&&p;u&&!(f&&p)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:p,isPhaseTransition:f,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(p=>{i.has(p.id)&&console.error(`Duplicate drone ID detected: ${p.id} in player${l+1}`),i.add(p.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(console.log(" Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){console.log(" Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],p=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],f=Object.keys(t).filter(P=>u.includes(P)),h=Object.keys(t).filter(P=>p.includes(P)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const g=f.every(P=>["player1","player2"].includes(P)),x=f.every(P=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(P));if(m&&(g||x))return;const S=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),C=f.length===1&&f[0]==="passInfo";if(!(S&&A&&C)){if(f.length>0&&!r){const P=i?.split(`
`)||[],T=P.find(O=>O.includes(".jsx")&&!O.includes("GameStateManager"))||P[2]||"Unknown";console.warn(" ActionProcessor bypass detected: Critical game state updated directly",{updates:f,turnPhase:n.turnPhase,caller:T.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug(" ActionProcessor bypass debug info:",{stackTrace:P.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}h.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];console.log(` PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(f=>{const h=l?l[f]:void 0,m=u?u[f]:void 0;if(JSON.stringify(h)!==JSON.stringify(m))if(f==="energy"||f==="deploymentBudget"||f==="initialDeploymentBudget")console.log(`   ${f}: ${h}  ${m}`),(m==null||isNaN(m))&&console.error(`   WARNING: ${f} became ${m}!`);else if(f==="activeDronePool"){const g=Array.isArray(h)?h.length:"undefined",x=Array.isArray(m)?m.length:"undefined";let S,A;if(Array.isArray(h))try{S=h.map(C=>C?.name||"UNNAMED").join(",")}catch(C){S=`ERROR_MAPPING_OLD: ${C.message}`}else S="undefined";if(Array.isArray(m))try{A=m.map(C=>C?.name||"UNNAMED").join(",")}catch(C){A=`ERROR_MAPPING_NEW: ${C.message}`}else A="undefined";if(console.log(`   ${f}: [${g} drones]  [${x} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(console.log("     Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("     First drone object:",m[0])),g!==x||S!==A){const C=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`     Update source:
${C}`)}}else if(f==="hand"||f==="deck"){const g=Array.isArray(h)?h.length:"undefined",x=Array.isArray(m)?m.length:"undefined";console.log(`   ${f}: [${g} cards]  [${x} cards]`)}else if(f==="dronesOnBoard"){const g=h?`L1:${h.lane1?.length||0} L2:${h.lane2?.length||0} L3:${h.lane3?.length||0}`:"undefined",x=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`   ${f}: ${g}  ${x}`)}else console.log(`   ${f}:`,{before:h,after:m})}),console.log(` Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],p=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],f=l.functions.filter(m=>u.some(g=>m.toLowerCase().includes(g.toLowerCase()))),h=l.functions.filter(m=>p.some(g=>m.toLowerCase().includes(g.toLowerCase())));f.length>0&&h.length===0&&(console.warn(" Inappropriate function updating game state:",{inappropriateFunctions:f,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI  ActionProcessor  gameLogic.js  GameStateManager"}),console.debug(" Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:f,appropriateFound:h,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const p of r){const f=u[p];if(!f)continue;const h=Array.isArray(f)?f:[f];let m=!1;for(const g of h)(g==="GameFlowManager"&&i||g==="SequentialPhaseManager"&&s||g==="ActionProcessor"&&l)&&(m=!0);if(!m){const g=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(` OWNERSHIP VIOLATION: ${g} cannot update '${p}'`,{updateKey:p,currentManager:g,allowedOwners:h,updates:r,recommendation:`Only ${h.join(" or ")} should update '${p}'`})}}}reset(){console.log(" GAME RESET: Resetting game state and clearing caches");const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:je.initialPlayerState("Player 1",Ls),player2:je.initialPlayerState("Player 2",Ls),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),qt.reset(),this.actionProcessor.clearQueue(),console.log(" GAME RESET: State, cache, and queue cleared")}startGame(t="local",n={},r={}){console.log(" GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...je.initialPlayerState(n.name||"Player 1",n.decklist||Ls),...n},player2:{...je.initialPlayerState(r.name||"Player 2",r.decklist||Ls),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{}},s=sO(An);i.droneSelectionPool=s.droneSelectionPool,i.droneSelectionTrio=s.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log(" Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log(" Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log(" GAME START: Game session initialized successfully")}endGame(){console.log(" GAME END: Ending current game session and clearing caches"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),qt.reset(),this.actionProcessor.clearQueue(),console.log(" GAME END: Returned to menu state, cache and queue cleared")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t,isHost:n&&t!=="local",isGuest:!n&&t!=="local"},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log(" [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const He=new BM;class UM{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return zM(t).buffer}}function zM(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function lO(e){return new GM(e).unpack()}function cO(e){const t=new HM,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class GM{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class HM{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,p=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(p)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new UM,this._textEncoder=new TextEncoder}}let uO=!0,dO=!0;function Tc(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function zo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const p=f=>{const h=n(f);h&&(u.handleEvent?u.handleEvent(h):u(h))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,p),i.apply(this,[l,p])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const p=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,p])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function qM(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(uO=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function YM(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(dO=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function fO(){if(typeof window=="object"){if(uO)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function H0(e,t){dO&&console.warn(e+" is deprecated, please use "+t+" instead.")}function FM(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Tc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Tc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Tc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Tc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function vA(e){return Object.prototype.toString.call(e)==="[object Object]"}function pO(e){return vA(e)?Object.keys(e).reduce(function(t,n){const r=vA(e[n]),i=r?pO(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function Ly(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Ly(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Ly(e,e.get(i),n)})}))}function bA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&Ly(e,u,i)})}),i}const xA=fO;function hO(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const p={};return Object.keys(u).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const h=typeof u[f]=="object"?u[f]:{ideal:u[f]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const m=function(g,x){return g?g+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(h.ideal!==void 0){p.optional=p.optional||[];let g={};typeof h.ideal=="number"?(g[m("min",f)]=h.ideal,p.optional.push(g),g={},g[m("max",f)]=h.ideal,p.optional.push(g)):(g[m("",f)]=h.ideal,p.optional.push(g))}h.exact!==void 0&&typeof h.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[m("",f)]=h.exact):["min","max"].forEach(g=>{h[g]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[m(g,f)]=h[g])})}),u.advanced&&(p.optional=(p.optional||[]).concat(u.advanced)),p},i=function(u,p){if(t.version>=61)return p(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const f=function(h,m,g){m in h&&!(g in h)&&(h[g]=h[m],delete h[m])};u=JSON.parse(JSON.stringify(u)),f(u.audio,"autoGainControl","googAutoGainControl"),f(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let f=u.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const h=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete u.video.facingMode;let m;if(f.exact==="environment"||f.ideal==="environment"?m=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(S=>S.kind==="videoinput");let x=g.find(S=>m.some(A=>S.label.toLowerCase().includes(A)));return!x&&g.length&&m.includes("back")&&(x=g[g.length-1]),x&&(u.video.deviceId=f.exact?{exact:x.deviceId}:{ideal:x.deviceId}),u.video=r(u.video),xA("chrome: "+JSON.stringify(u)),p(u)})}u.video=r(u.video)}return xA("chrome: "+JSON.stringify(u)),p(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,p,f){i(u,h=>{n.webkitGetUserMedia(h,p,m=>{f&&f(s(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(p){return i(p,f=>u(f).then(h=>{if(f.audio&&!h.getAudioTracks().length||f.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function mO(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function gO(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else zo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function yO(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,p){let f=i.apply(this,arguments);return f||(f=t(this,u),this._senders.push(f)),f};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const p=this._senders.indexOf(u);p!==-1&&this._senders.splice(p,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(p=>p.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function vO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>bA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),zo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>bA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function bO(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(p)===-1&&this._shimmedLocalStreams[u.id].push(p):this._shimmedLocalStreams[u.id]=[u,p],p};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(m=>m.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const p=this.getSenders().filter(f=>u.indexOf(f)===-1);this._shimmedLocalStreams[l.id]=[l].concat(p)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const p=this._shimmedLocalStreams[u].indexOf(l);p!==-1&&this._shimmedLocalStreams[u].splice(p,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function xO(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return bO(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(m=>{if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const m=new e.MediaStream(h.getTracks());this._streams[h.id]=m,this._reverseStreams[m.id]=h,h=m}r.apply(this,[h])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(A=>A===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([h]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===h)};function s(f,h){let m=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const x=f._reverseStreams[g],S=f._streams[x.id];m=m.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:h.type,sdp:m})}function l(f,h){let m=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const x=f._reverseStreams[g],S=f._streams[x.id];m=m.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:m})}["createOffer","createAnswer"].forEach(function(f){const h=e.RTCPeerConnection.prototype[f],m={[f](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[S=>{const A=s(this,S);g[0].apply(null,[A])},S=>{g[1]&&g[1].apply(null,S)},arguments[2]]):h.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[f]=m[f]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const f=p.get.apply(this);return f.type===""?f:s(this,f)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(A=>h.track===A)&&(g=this._streams[x])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function $y(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function SO(e,t){zo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const SA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:SO,shimAddTrackRemoveTrack:xO,shimAddTrackRemoveTrackWithNative:bO,shimGetSendersWithDtmf:yO,shimGetUserMedia:hO,shimMediaStream:mO,shimOnTrack:gO,shimPeerConnection:$y,shimSenderReceiverGetStats:vO},Symbol.toStringTag,{value:"Module"}));function AO(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){H0("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,p){u in l&&!(p in l)&&(l[p]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function VM(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function EO(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function By(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(p=>{if(t.version<53&&!l)try{p.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;p.forEach((h,m)=>{p.set(m,Object.assign({},h,{type:n[h.type]||h.type}))})}return p}).then(l,u)}}function CO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function PO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),zo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function wO(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){H0("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function OO(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function TO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function _O(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function DO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function NO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const AA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:TO,shimCreateAnswer:NO,shimCreateOffer:DO,shimGetDisplayMedia:VM,shimGetParameters:_O,shimGetUserMedia:AO,shimOnTrack:EO,shimPeerConnection:By,shimRTCDataChannel:OO,shimReceiverGetStats:PO,shimRemoveStream:wO,shimSenderGetStats:CO},Symbol.toStringTag,{value:"Module"}));function kO(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function jO(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function MO(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(f,h){const m=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[m]);return h?(g.then(f,h),Promise.resolve()):g},t.createAnswer=function(f,h){const m=arguments.length>=2?arguments[2]:arguments[0],g=r.apply(this,[m]);return h?(g.then(f,h),Promise.resolve()):g};let u=function(p,f,h){const m=i.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m};t.setLocalDescription=u,u=function(p,f,h){const m=s.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m},t.setRemoteDescription=u,u=function(p,f,h){const m=l.apply(this,[p]);return h?(m.then(f,h),Promise.resolve()):m},t.addIceCandidate=u}function RO(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(IO(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function IO(e){return e&&e.video!==void 0?Object.assign({},e,{video:pO(e.video)}):e}function LO(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(H0("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function $O(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function BO(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function UO(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const EA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:UO,shimCallbacksAPI:MO,shimConstraints:IO,shimCreateOfferLegacy:BO,shimGetUserMedia:RO,shimLocalStreamsAPI:kO,shimRTCIceServerUrls:LO,shimRemoteStreamsAPI:jO,shimTrackEventTransceiver:$O},Symbol.toStringTag,{value:"Module"}));var Xm={exports:{}},CA;function KM(){return CA||(CA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const p=s[u],f=t.matchPrefix(n,"a=rtpmap:"+p+" ")[0];if(f){const h=t.parseRtpMap(f),m=t.matchPrefix(n,"a=fmtp:"+p+" ");switch(h.parameters=m.length?t.parseFmtp(m[0]):{},h.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+p+" ").map(t.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(p=>{u.rtcpFeedback.find(h=>h.type===p.type&&h.parameter===p.parameter)||u.rtcpFeedback.push(p)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(g=>t.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),p=u.length>0&&u[0].ssrc;let f;const h=t.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(S=>parseInt(S,10)));h.length>0&&h[0].length>1&&h[0][0]===p&&(f=h[0][1]),i.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let x={ssrc:p,codecPayloadType:parseInt(g.parameters.apt,10)};p&&f&&(x.rtx={ssrc:f}),r.push(x),s&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:p,mechanism:l?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&p&&r.push({ssrc:p});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(g=>{g.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const p=u[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(Xm)),Xm.exports}var zO=KM();const zs=Fr(zO),WM=Rw({__proto__:null,default:zs},[zO]);function Jd(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=zs.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,zo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Uy(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||zo(e,"icecandidate",t=>{if(t.candidate){const n=zs.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function ef(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const p=zs.splitSections(u.sdp);return p.shift(),p.some(f=>{const h=zs.parseMLine(f);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(u){const p=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const f=parseInt(p[1],10);return f!==f?-1:f},i=function(u){let p=65536;return t.browser==="firefox"&&(t.version<57?u===-1?p=16384:p=2147483637:t.version<60?p=t.version===57?65535:65536:p=2147483637),p},s=function(u,p){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const h=zs.matchPrefix(u.sdp,"a=max-message-size:");return h.length>0?f=parseInt(h[0].substring(19),10):t.browser==="firefox"&&p!==-1&&(f=2147483637),f},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const p=r(arguments[0]),f=i(p),h=s(arguments[0],p);let m;f===0&&h===0?m=Number.POSITIVE_INFINITY:f===0||h===0?m=Math.max(f,h):m=Math.min(f,h);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return m}}),this._sctp=g}return l.apply(this,arguments)}}function tf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],p=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&p>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},zo(e,"datachannel",r=>(t(r.channel,r.target),r))}function zy(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Gy(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function nf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function rf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const XM=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Gy,shimAddIceCandidateNullOrEmpty:nf,shimConnectionState:zy,shimMaxMessageSize:ef,shimParameterlessSetLocalDescription:rf,shimRTCIceCandidate:Jd,shimRTCIceCandidateRelayProtocol:Uy,shimSendThrowTypeError:tf},Symbol.toStringTag,{value:"Module"}));function QM({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=fO,r=FM(e),i={browserDetails:r,commonShim:XM,extractVersion:Tc,disableLog:qM,disableWarnings:YM,sdp:WM};switch(r.browser){case"chrome":if(!SA||!$y||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=SA,nf(e,r),rf(e),hO(e,r),mO(e),$y(e,r),gO(e),xO(e,r),yO(e),vO(e),SO(e,r),Jd(e),Uy(e),zy(e),ef(e,r),tf(e),Gy(e,r);break;case"firefox":if(!AA||!By||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=AA,nf(e,r),rf(e),AO(e,r),By(e,r),EO(e),wO(e),CO(e),PO(e),OO(e),TO(e),_O(e),DO(e),NO(e),Jd(e),zy(e),ef(e,r),tf(e);break;case"safari":if(!EA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=EA,nf(e,r),rf(e),LO(e),BO(e),MO(e),kO(e),jO(e),$O(e),RO(e),UO(e),Jd(e),Uy(e),ef(e,r),tf(e),Gy(e,r);break;default:n("Unsupported browser!");break}return i}const PA=QM({window:typeof window>"u"?void 0:window});function Go(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class GO{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),p=t.slice(l,u),f={__peerData:this._dataCount,n:s,data:p,total:i};n.push(f),l=u,s++}return this._dataCount++,n}}}function ZM(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const Qm=PA.default||PA,vc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Qm.browserDetails.browser}getVersion(){return Qm.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Qm.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},JM=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),HO=()=>Math.random().toString(36).slice(2),wA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class eR extends GO{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=wA,this.browser=vc.getBrowser(),this.browserVersion=vc.getVersion(),this.pack=cO,this.unpack=lO,this.supports=(function(){const n={browser:vc.isBrowserSupported(),webRTC:vc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(wA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!vc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=JM,this.randomToken=HO}}const Ln=new eR,tR="PeerJS: ";class nR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[tR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ce=new nR,q0={},rR=Object.prototype.hasOwnProperty,Dn="~";function Lc(){}Object.create&&(Lc.prototype=Object.create(null),new Lc().__proto__||(Dn=!1));function aR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function qO(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new aR(n,r||e,i),l=Dn?Dn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function af(e,t){--e._eventsCount===0?e._events=new Lc:delete e._events[t]}function En(){this._events=new Lc,this._eventsCount=0}En.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)rR.call(n,r)&&t.push(Dn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};En.prototype.listeners=function(t){var n=Dn?Dn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};En.prototype.listenerCount=function(t){var n=Dn?Dn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};En.prototype.emit=function(t,n,r,i,s,l){var u=Dn?Dn+t:t;if(!this._events[u])return!1;var p=this._events[u],f=arguments.length,h,m;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),f){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,n),!0;case 3:return p.fn.call(p.context,n,r),!0;case 4:return p.fn.call(p.context,n,r,i),!0;case 5:return p.fn.call(p.context,n,r,i,s),!0;case 6:return p.fn.call(p.context,n,r,i,s,l),!0}for(m=1,h=new Array(f-1);m<f;m++)h[m-1]=arguments[m];p.fn.apply(p.context,h)}else{var g=p.length,x;for(m=0;m<g;m++)switch(p[m].once&&this.removeListener(t,p[m].fn,void 0,!0),f){case 1:p[m].fn.call(p[m].context);break;case 2:p[m].fn.call(p[m].context,n);break;case 3:p[m].fn.call(p[m].context,n,r);break;case 4:p[m].fn.call(p[m].context,n,r,i);break;default:if(!h)for(x=1,h=new Array(f-1);x<f;x++)h[x-1]=arguments[x];p[m].fn.apply(p[m].context,h)}}return!0};En.prototype.on=function(t,n,r){return qO(this,t,n,r,!1)};En.prototype.once=function(t,n,r){return qO(this,t,n,r,!0)};En.prototype.removeListener=function(t,n,r,i){var s=Dn?Dn+t:t;if(!this._events[s])return this;if(!n)return af(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&af(this,s);else{for(var u=0,p=[],f=l.length;u<f;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&p.push(l[u]);p.length?this._events[s]=p.length===1?p[0]:p:af(this,s)}return this};En.prototype.removeAllListeners=function(t){var n;return t?(n=Dn?Dn+t:t,this._events[n]&&af(this,n)):(this._events=new Lc,this._eventsCount=0),this};En.prototype.off=En.prototype.removeListener;En.prototype.addListener=En.prototype.on;En.prefixed=Dn;En.EventEmitter=En;q0=En;var Ho={};Go(Ho,"ConnectionType",()=>Di);Go(Ho,"PeerErrorType",()=>Mt);Go(Ho,"BaseConnectionErrorType",()=>Hy);Go(Ho,"DataConnectionErrorType",()=>Y0);Go(Ho,"SerializationType",()=>Qf);Go(Ho,"SocketEventType",()=>_i);Go(Ho,"ServerMessageType",()=>bn);var Di=(function(e){return e.Data="data",e.Media="media",e})({}),Mt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Hy=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Y0=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Qf=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),_i=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),bn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const YO="1.5.5";class iR extends q0.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+YO),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Ce.log("Server message received:",s)}catch{Ce.log("Invalid server message",i.data);return}this.emit(_i.Message,s)},this._socket.onclose=i=>{this._disconnected||(Ce.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(_i.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ce.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ce.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:bn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(_i.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class FO{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Di.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Ce.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Ce.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Ce.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:bn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Ce.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Hy.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Ce.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Hy.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Ce.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Ce.log("Listening for data channel"),t.ondatachannel=l=>{Ce.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},Ce.log("Listening for remote stream"),t.ontrack=l=>{Ce.log("Received remote stream");const u=l.streams[0],p=s.getConnection(n,r);if(p.type===Di.Media){const f=p;this._addStreamToMediaConnection(u,f)}}}cleanup(){Ce.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Ce.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Di.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:bn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Mt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Mt.WebRTC,r),Ce.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Ce.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:bn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Mt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Mt.WebRTC,r),Ce.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Ce.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Ce.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Mt.WebRTC,l),Ce.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Ce.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Ce.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Mt.WebRTC,n),Ce.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Ce.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Ce.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Ce.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class VO extends q0.EventEmitter{emitError(t,n){Ce.error("Error:",n),this.emit("error",new oR(`${t}`,n))}}class oR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class KO extends VO{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class cf extends KO{static#e=this.ID_PREFIX="mc_";get type(){return Di.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||cf.ID_PREFIX+Ln.randomToken(),this._negotiator=new FO(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Ce.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case bn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case bn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ce.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Ce.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class sR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",YO),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Ce.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Ln.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Ln.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Ce.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class uf extends KO{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Di.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||uf.ID_PREFIX+HO(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new FO(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Ce.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Y0.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case bn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case bn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Ce.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class F0 extends uf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>uf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Ce.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Zm extends F0{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new GO,this.serialization=Qf.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=lO(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=ZM(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=cO(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Ce.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class lR extends F0{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Qf.None}}class cR extends F0{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Ln.chunkedMTU){this.emitError(Y0.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Qf.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class V0 extends VO{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:lR,json:cR,binary:Zm,"binary-utf8":Zm,default:Zm},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Ln.CLOUD_HOST,port:Ln.CLOUD_PORT,path:"/",key:V0.DEFAULT_KEY,token:Ln.randomToken(),config:Ln.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ln.CLOUD_HOST?this._options.secure=Ln.isSecure():this._options.host==Ln.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ce.setLogFunction(this._options.logFunction),Ce.logLevel=this._options.debug||0,this._api=new sR(n),this._socket=this._createServerConnection(),!Ln.supports.audioVideo&&!Ln.supports.data){this._delayedAbort(Mt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Ln.validateId(r)){this._delayedAbort(Mt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Mt.ServerError,i))}_createServerConnection(){const t=new iR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(_i.Message,n=>{this._handleMessage(n)}),t.on(_i.Error,n=>{this._abort(Mt.SocketError,n)}),t.on(_i.Disconnected,()=>{this.disconnected||(this.emitError(Mt.Network,"Lost connection to server."),this.disconnect())}),t.on(_i.Close,()=>{this.disconnected||this._abort(Mt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case bn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case bn.Error:this._abort(Mt.ServerError,r.msg);break;case bn.IdTaken:this._abort(Mt.UnavailableID,`ID "${this.id}" is taken`);break;case bn.InvalidKey:this._abort(Mt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case bn.Leave:Ce.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case bn.Expire:this.emitError(Mt.PeerUnavailable,`Could not connect to peer ${i}`);break;case bn.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),Ce.warn(`Offer received for existing Connection ID:${s}`)),r.type===Di.Media){const p=new cf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=p,this._addConnection(i,l),this.emit("call",p)}else if(r.type===Di.Data){const p=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=p,this._addConnection(i,l),this.emit("connection",p)}else{Ce.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const p of u)l.handleMessage(p);break}default:{if(!r){Ce.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):Ce.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Mt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Mt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Ce.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new cf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Ce.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Ce.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ce.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Ce.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Ce.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ce.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Mt.ServerError,n))}}var OA=V0;class uR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new OA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new OA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const bc=new uR,qy=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},dR=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Drawing up to Hand Limit",draw:"Drawing up to Hand Limit",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,fR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],pR=["deployment","action"],hR=e=>fR.includes(e),TA=e=>pR.includes(e),Ri=()=>{const[e,t]=E.useState(He.getState()),[n,r]=E.useState(bc.getStatus());E.useEffect(()=>{He.setupP2PIntegration(bc)},[]),E.useEffect(()=>He.subscribe(L=>{t(He.getState())}),[]),E.useEffect(()=>bc.subscribe(L=>{r(bc.getStatus())}),[]);const i=E.useCallback(()=>He.isMyTurn(),[e.currentPlayer,e.gameMode]),s=E.useCallback(()=>He.getLocalPlayerId(),[e.gameMode]),l=E.useCallback(()=>He.getOpponentPlayerId(),[e.gameMode]),u=E.useCallback(()=>e.gameMode!=="local",[e.gameMode]),p=E.useCallback(()=>u()&&!i(),[u,i]),f=E.useCallback(()=>He.getLocalPlayerState(),[e.gameMode]),h=E.useCallback(()=>He.getOpponentPlayerState(),[e.gameMode]),m=E.useCallback(ne=>He.isLocalPlayer(ne),[e.gameMode]),g=E.useCallback(()=>He.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),x=E.useCallback(()=>{const ne=He.getOpponentPlacedSections();return e.turnPhase==="placement"&&ne.some(L=>L!==null)&&console.error(" CRITICAL - getOpponentPlacedSections returning:",ne,"from gameState:",e.opponentPlacedSections),ne},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=E.useCallback((ne,L)=>{He.updatePlayers(ne,L)},[]),A=E.useCallback((ne,L)=>{He.updatePlayerState(ne,L)},[]),C=E.useCallback((ne,L)=>{He.setPlayerStates(ne,L)},[]),P=E.useCallback(ne=>{He.setFirstPasserOfPreviousRound(ne)},[]),T=E.useCallback(ne=>{He.setFirstPlayerOverride(ne)},[]),O=E.useCallback(ne=>{He.setPassInfo(ne)},[]),k=E.useCallback(ne=>{He.updatePassInfo(ne)},[]),N=E.useCallback((ne,L,ee)=>{He.addLogEntry(ne,L,ee)},[]),D=E.useCallback(()=>{He.reset()},[]),j=E.useCallback(ne=>{He.setWinner(ne)},[]),R=E.useCallback(async(ne,L)=>await He.processAction(ne,L),[]),z=E.useCallback(()=>He.isActionInProgress(),[]),W=E.useCallback(()=>He.getActionQueueLength(),[]),H=E.useCallback(()=>{He.clearActionQueue()},[]),q=E.useCallback(()=>hR(e.turnPhase),[e.turnPhase]),se=E.useCallback(()=>TA(e.turnPhase),[e.turnPhase]),te=E.useCallback(async(ne,L)=>{const ee=e.turnPhase,ce=TA(ee);return console.log(` useGameState.routeAction: ${ne} in phase ${ee} (${ce?"sequential":"simultaneous"})`),ce?await R(ne,L):(console.warn(` Simultaneous phase action ${ne} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${ne} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:ee,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,R]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:p,getLocalPlayerState:f,getOpponentPlayerState:h,isLocalPlayer:m,getLocalPlacedSections:g,getOpponentPlacedSections:x,updatePlayers:S,updatePlayerState:A,setPlayerStates:C,setFirstPasserOfPreviousRound:P,setFirstPlayerOverride:T,setPassInfo:O,updatePassInfo:k,addLogEntry:N,resetGame:D,setWinner:j,processAction:R,isActionInProgress:z,getActionQueueLength:W,clearActionQueue:H,isSimultaneousPhase:q,isSequentialPhase:se,routeAction:te,gameStateManager:He,p2pManager:bc}},_A=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(` Initialized ship placement: ${e.length} sections available`),console.log(` Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class jc{constructor(){if(jc.instance)return jc.instance;jc.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,console.log(" GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){console.log(" GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=qt.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&(i.initialize(u,l,s,n,t),console.log(" GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,console.log(" GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(` GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="droneSelection"){console.log(` GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let n={};if(t==="droneSelection"){console.log(" GameFlowManager initializing drone selection phase data");const r=sO(An),i=_A();n={...r,...i}}this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(n).length>0&&this.gameStateManager.setState(n,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(console.log(` GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const i=this.actionProcessor.applyPhaseCommitments(t);Object.keys(i).length>0&&(this.gameStateManager.setState(i,"COMMITMENT_APPLICATION",`${t}_completion`),console.log(` GameFlowManager: Applied ${t} commitments to game state`))}const r=this.getNextPhase(t);r?this.isSequentialPhase(r)?(console.log(` GameFlowManager: Handover to sequential phase '${r}'`),this.initiateSequentialPhase(r)):(console.log(` GameFlowManager: Continuing with simultaneous phase '${r}'`),await this.transitionToPhase(r)):console.log(" GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(console.log(` GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(n!=="COMMITMENT_UPDATE"||!t.commitments)return;console.log(" checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){console.log(" Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){console.log(" Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;console.log(" Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:s}),s&&(console.log(` GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){console.log(` GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(` GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="gameInitializing"?n=await this.processGameInitializingPhase():t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():t==="determineFirstPlayer"?n=await this.processAutomaticFirstPlayerPhase():console.warn(` No handler for automatic phase: ${t}`),n?(console.log(` GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),await this.transitionToPhase(n)):console.warn(` No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(){console.log(" GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await Hr(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-zQDSu1aJ.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error(" GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),console.log(" Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return console.log(" Automatic draw completed, returning next phase:",s),s}catch(n){console.error(" Error during automatic draw phase:",n)}}async processAutomaticFirstPlayerPhase(){console.log(" GameFlowManager: Processing automatic first player determination phase");const t="determineFirstPlayer";try{const n=await this.actionProcessor.processFirstPlayerDetermination();if(console.log(" First player determination completed:",n),this.animationManager&&n.stateUpdates){const i=this.gameStateManager.getLocalPlayerId(),p={animationName:"PHASE_ANNOUNCEMENT",payload:{phaseText:n.stateUpdates.firstPlayerOfRound===i?"YOU ARE FIRST PLAYER":"OPPONENT IS FIRST PLAYER",phaseName:"firstPlayerResult",timestamp:Date.now()}};await this.animationManager.executeAnimations([p]),console.log(" [FIRST PLAYER] Second announcement complete")}this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const r=this.getNextPhase("determineFirstPlayer");return console.log(" Automatic first player determination completed, returning next phase:",r),r}catch(n){console.error(" Error during automatic first player determination:",n)}}async processAutomaticEnergyResetPhase(){console.log(" GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error(" GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await Hr(async()=>{const{default:x}=await Promise.resolve().then(()=>IM);return{default:x}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},p=je.readyDronesAndRestoreShields(n.player1,n.player2,u),f=je.readyDronesAndRestoreShields(n.player2,n.player1,u),h={...p,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},m={...f,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget};await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:h,player2:m}}),console.log(` Energy reset complete - Player 1: ${h.energy} energy, Player 2: ${m.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const g=this.getNextPhase("energyReset");return console.log(" Automatic energy reset completed, returning next phase:",g),g}catch(n){console.error(" Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(){console.log(" GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:"placement",gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(n=>setTimeout(n,100));const t=this.getNextPhase("gameInitializing");return console.log(" Game initialization completed, returning next phase:",t),t}catch(t){throw console.error(" Error during game initialization:",t),t}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn(" GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return!1}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(` GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(` Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn(" ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1,this.gameStateManager.setState({roundNumber:1,turn:1}))),console.log(` GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"&&(console.log(" GameFlowManager: Initializing placement phase data"),r=_A()),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!0}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){console.log(` GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,console.log(` GameFlowManager: Starting round ${this.roundNumber}`),this.gameStateManager.setState({roundNumber:this.roundNumber,turn:this.roundNumber});const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn(" No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){console.log(` GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log(" GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const $c=new jc;function DA(){const{gameStateManager:e}=Ri(),[t,n]=E.useState(!1);E.useEffect(()=>{console.log(" MenuScreen mounted - ensuring clean state"),qt.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),console.log(" MenuScreen: State cleaned up")},[e]);const r=()=>{console.log(" Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{console.log(" Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},l=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#00ff88",color:"#000000",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 255, 136, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#00cc6a",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#00ff88",u.target.style.transform="translateY(0)"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#ff6b35",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 53, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#e55a2b",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#ff6b35",u.target.style.transform="translateY(0)"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"10px 20px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>{u.target.style.backgroundColor="#cccccc",u.target.style.color="#1a1a1a"},onMouseOut:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#cccccc"},children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"DRONE WARS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"Strategic Combat in the Digital Arena"}),v.jsx("button",{onClick:s,style:{fontSize:"1.5rem",padding:"15px 40px",backgroundColor:"#0088ff",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 136, 255, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#0066cc",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#0088ff",u.target.style.transform="translateY(0)"},children:"START GAME"})]})})}const NA=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];function mR(){const{gameState:e,gameStateManager:t}=Ri(),[n,r]=E.useState(null),i=e.gameMode==="local",s=e.gameMode==="multiplayer",l=()=>{console.log(" Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=f=>{console.log(" Selected AI:",f.name),r(f)},p=()=>{if(i&&n){console.log(" Starting single player game with AI:",n.name);const f=An.filter(m=>n.dronePool.includes(m.name)),h={};f.forEach(m=>{h[m.name]=0}),oa.initialize(NA,An,n,t.actionProcessor,t),console.log(" AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:f,deployedDroneCounts:h,aiPersonality:n})}else s&&(console.log(" Starting multiplayer game"),t.startGame("multiplayer",{name:"Player 1"},{name:"Player 2"}))};return v.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:NA.map(f=>v.jsxs("div",{onClick:()=>u(f),style:{padding:"20px",backgroundColor:n?.name===f.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===f.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:h=>{n?.name!==f.name&&(h.target.style.backgroundColor="#333333",h.target.style.borderColor="#666666")},onMouseOut:h=>{n?.name!==f.name&&(h.target.style.backgroundColor="#2a2a2a",h.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===f.name?"#ffffff":"#00ff88"},children:f.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:f.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",f.difficulty]})]},f.name))})}),s&&v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[v.jsx("div",{style:{fontSize:"1.2rem",color:"#cccccc",marginBottom:"1rem"},children:"Multiplayer game ready to start"}),v.jsx("div",{style:{fontSize:"1rem",color:"#888888"},children:"Both players will customize their decks and drones in-game"})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"12px 24px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:f=>{f.target.style.backgroundColor="#cccccc",f.target.style.color="#1a1a1a"},onMouseOut:f=>{f.target.style.backgroundColor="transparent",f.target.style.color="#cccccc"},children:"BACK TO MENU"}),v.jsx("button",{onClick:p,disabled:i&&!n,style:{fontSize:"1.2rem",padding:"12px 30px",backgroundColor:i&&!n?"#444444":"#00ff88",color:i&&!n?"#888888":"#000000",border:"none",borderRadius:"8px",cursor:i&&!n?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:i&&!n?.5:1},onMouseOver:f=>{i&&!n||(f.target.style.backgroundColor="#00cc6a",f.target.style.transform="translateY(-2px)")},onMouseOut:f=>{i&&!n||(f.target.style.backgroundColor="#00ff88",f.target.style.transform="translateY(0)")},children:i?"START GAME":"START MULTIPLAYER"})]})]})}const kA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),gR=({text:e,className:t})=>{const n=E.useRef(null),r=E.useRef(null);return E.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,p;t.includes("font-orbitron")?(u=8,p=16):(u=8,p=12);let f=p;for(s.style.fontSize=f+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&f>u;)f-=.5,s.style.fontSize=f+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},df=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:p})=>{let f=e.limit;l.forEach(te=>{te.mod.stat==="limit"&&(f+=te.mod.value)});const h=i>=f,m=n&&(!h||s),g=E.useMemo(()=>{const te={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(ne=>{ne.mod.stat==="cost"?te.cost=Math.max(0,te.cost+ne.mod.value):te.hasOwnProperty(ne.mod.stat)&&(te[ne.mod.stat]+=ne.mod.value)}),te},[e,l]),x=g.cost,S=g.attack>e.attack,A=g.attack<e.attack,C=S?"text-green-400":A?"text-red-400":"text-white",P=g.speed>e.speed,T=g.speed<e.speed,O=P?"text-green-400":T?"text-red-400":"text-white",k=g.cost<e.class,N=g.cost>e.class,D=k?"text-green-400":N?"text-red-400":"text-white",R=f>e.limit?"text-green-400":"text-white",{name:z,image:W,hull:H,shields:q,abilities:se}=e;return v.jsx("div",{onClick:m?()=>t(e):void 0,className:`
        w-60 h-[320px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${m?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${m?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:v.jsxs("div",{className:`
          w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden
        `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:W,alt:z,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(gR,{text:z,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(kA,{value:g.attack,isFlat:!1,icon:jy,iconColor:"text-red-400",textColor:C})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:q>0&&Array.from({length:q}).map((te,ne)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${ne}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:H}).map((te,ne)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${ne}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(kA,{value:g.speed,isFlat:!0,icon:ky,iconColor:"text-blue-400",textColor:O})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-40 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:se&&se.length>0?se.map((te,ne)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:te.name}),v.jsx("p",{className:"text-gray-400 text-xs leading-tight font-exo",children:te.description})]},ne)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Ic,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${D}`,children:x})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:te=>{te.stopPropagation(),p&&p(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${h?"text-pink-500":R}`,children:[i,"/",f]})})]})]})]})]})})},K0=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(Pj,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:" Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function yR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r}=Ri(),{droneSelectionPool:i,droneSelectionTrio:s,turnPhase:l}=e,u=r(),[p,f]=E.useState([]),[h,m]=E.useState(s),[g,x]=E.useState(i),[S,A]=E.useState({droneSelection:!1}),[C,P]=E.useState({droneSelection:!1});E.useEffect(()=>{const D=j=>{const{type:R,phase:z,playerId:W}=j.detail||j;console.log(` DroneSelectionScreen received PhaseManager event: ${R}`,{phase:z,playerId:W}),z==="droneSelection"&&(R==="playerCompleted"?W===t()?A(q=>({...q,droneSelection:!0})):n()&&P(q=>({...q,droneSelection:!0})):R==="phaseCompleted"&&(f([]),A(H=>({...H,droneSelection:!1})),P(H=>({...H,droneSelection:!1}))))};return window.addEventListener("phaseManagerEvent",D),()=>{window.removeEventListener("phaseManagerEvent",D)}},[t,n]);const T=D=>{if(l!=="droneSelection")return;console.log(" handleChooseDroneForSelection called with:",D.name);const j=[...p,D];if(f(j),j.length<5){const R=$M(g);m(R.droneSelectionTrio),x(R.droneSelectionPool),console.log(" Advanced to next trio locally, selected:",j.length,"of 5 drones")}else console.log(" All 5 drones selected, waiting for Continue button click")},O=()=>{if(l!=="droneSelection")return;console.log(" handleContinueDroneSelection called with:",p.length,"drones");const D=t();He.actionProcessor.queueAction({type:"commitment",payload:{playerId:D,phase:"droneSelection",actionData:{drones:p}}}).then(j=>{if(!j.success){console.error(" Drone selection submission failed:",j.error);return}console.log(" Drone selection submitted successfully")}).catch(j=>{console.error(" Drone selection submission error:",j)}),console.log(" Drone selection submitted to PhaseManager")},k=S.droneSelection;if(n()&&k&&!C.droneSelection){const j=He.actionProcessor.getPhaseCommitmentStatus("droneSelection").commitments?.player1?.drones||u.activeDronePool||p,R=j.length>0?j.map(z=>z.name).join(", "):"Selection complete";return v.jsx(K0,{phase:"droneSelection",localPlayerStatus:`You selected: ${R}`})}const N=p.length===5;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((D,j)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${j<p.length?"bg-green-500":"bg-gray-600"}`},j)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[p.length,"/5 drones selected"]})]}),N?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:" Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",p.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),h&&h.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:h.map((D,j)=>v.jsx(df,{drone:D,onClick:()=>T(D),isSelectable:!0,deployedCount:0},D.name||j))})]}),v.jsx("button",{onClick:O,disabled:!N,className:`px-8 py-3 font-bold rounded-lg transition-all mb-8 ${N?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/25 hover:shadow-green-500/30 transform hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:N?"Continue to Deck Selection":`Continue (${p.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",p.length,"/5)",N&&v.jsx("span",{className:"text-green-400 ml-2",children:""})]}),p.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:p.map((D,j)=>v.jsx(df,{drone:D,isSelectable:!1,deployedCount:0},j))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function vR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getOpponentPlayerState:i,addLogEntry:s}=Ri(),{turnPhase:l}=e,u=r();i();const[p,f]=E.useState({deckSelection:!1}),[h,m]=E.useState({deckSelection:!1});E.useEffect(()=>{const S=A=>{const{type:C,phase:P,playerId:T}=A.detail||A;console.log(` DeckSelectionScreen received PhaseManager event: ${C}`,{phase:P,playerId:T}),P==="deckSelection"&&(C==="playerCompleted"?T===t()?f(k=>({...k,deckSelection:!0})):n()&&m(k=>({...k,deckSelection:!0})):C==="phaseCompleted"&&(f(O=>({...O,deckSelection:!1})),m(O=>({...O,deckSelection:!1}))))};return window.addEventListener("phaseManagerEvent",S),()=>{window.removeEventListener("phaseManagerEvent",S)}},[t,n]);const g=async S=>{if(l==="deckSelection")if(console.log(" handleDeckChoice called with:",S),S==="standard"){const A=t(),C=je.buildDeckFromList(Ls),P=await He.actionProcessor.processCommitment({phase:"deckSelection",playerId:A,actionData:{deck:C}});if(!P.success){console.error(" Deck selection submission failed:",P.error);return}console.log(" Standard deck selection submitted to PhaseManager"),s({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else S==="custom"&&(console.log(" Transitioning to deck building phase"),$c.transitionToPhase("deckBuilding"))},x=u.deck&&u.deck.length>0;return console.log("Deck selection render check:",{isMultiplayer:n(),localPlayerHasDeck:x,opponentPhaseCompletion_deckSelection:h.deckSelection,turnPhase:l,localPlayerDeckLength:u.deck?.length}),n()&&x&&!h.deckSelection?v.jsx(K0,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>g("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"mt-6 bg-cyan-600 text-white font-bold px-6 py-2 rounded-full hover:bg-cyan-700 transition-colors duration-200",children:"Select"})]}),v.jsxs("div",{onClick:()=>g("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const bR=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),ff=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:p,isHovered:f,onMouseEnter:h,onMouseLeave:m,isCardTarget:g,isInMiddleLane:x,reallocationState:S,gameEngine:A,turnPhase:C,isMyTurn:P,passInfo:T,getLocalPlayerId:O,localPlayerState:k,shipAbilityMode:N,sectionRef:D})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const j=A.getShipStatus(t),R=j==="critical"?"bg-red-900/60":j==="damaged"?"bg-yellow-900/50":"bg-black/60";let z=j==="critical"?"border-red-500":j==="damaged"?"border-yellow-500":p?"border-pink-500":"border-cyan-500";const W=p?"shadow-pink-500/20":"shadow-cyan-500/20",H=f?"scale-105 shadow-xl":"";let q="";if(S)switch(S){case"can-remove":z="border-orange-400",q="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":z="border-orange-600",q="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":z="border-gray-600",q="opacity-50";break;case"can-add":z="border-green-400",q="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":z="border-green-600",q="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":z="border-gray-600",q="opacity-50";break}const se=g?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",te=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,L=>L.toUpperCase()),ne={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{ref:D,className:`
        relative rounded-xl shadow-lg ${W} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${z}
        ${u?`cursor-pointer ${H}`:""}
        ${se}
        ${q}
      `,style:ne,onClick:s,onMouseEnter:h,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${R}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-4 h-full",children:[v.jsx("div",{className:`absolute top-2 right-2 flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${j==="healthy"?"bg-green-500/20 text-green-300":j==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:j.charAt(0).toUpperCase()+j.slice(1)}),v.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:te}),v.jsx("p",{className:"text-xs text-gray-400 italic max-w-[200px]",children:t.description})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([L,ee])=>{const ce=x&&t.middleLaneBonus&&t.middleLaneBonus[L];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[L,":"]}),v.jsx("span",{className:ce?"text-green-400 font-bold":"",children:ee})]},L)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((L,ee)=>v.jsx("div",{children:ee<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},ee))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((L,ee)=>{const ce=ee+1,{critical:ye,damaged:M}=t.thresholds;let F;ce<=ye?F="bg-red-500":ce<=M?F="bg-orange-500":F="bg-green-500";const V=ee<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${V?F:"bg-gray-400"} border border-black/50`},ee)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(bR,{ability:t.ability,isUsable:C==="action"&&P()&&!T[`${O()}Passed`]&&k.energy>=t.ability.cost.energy,isSelected:N?.ability.id===t.ability.id,onClick:L=>l(L,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function xR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getLocalPlacedSections:i,setModalContent:s}=Ri(),{turnPhase:l,unplacedSections:u}=e,p=r(),f=i(),[h,m]=E.useState(null),[g,x]=E.useState(f||[null,null,null]),[S,A]=E.useState(u||["bridge","powerCell","droneControlHub"]),[C,P]=E.useState({placement:!1}),[T,O]=E.useState({placement:!1});E.useEffect(()=>{const R=z=>{const{type:W,phase:H,playerId:q}=z.detail||z;console.log(` ShipPlacementScreen received PhaseManager event: ${W}`,{phase:H,playerId:q}),H==="placement"&&(W==="playerCompleted"?q===t()?P(te=>({...te,placement:!0})):n()&&O(te=>({...te,placement:!0})):W==="phaseCompleted"&&(P(se=>({...se,placement:!1})),O(se=>({...se,placement:!1}))))};return window.addEventListener("phaseManagerEvent",R),()=>{window.removeEventListener("phaseManagerEvent",R)}},[t,n]);const k=R=>{if(l==="placement")if(console.log(" handleSelectSectionForPlacement called with:",R,"gameMode:",e.gameMode),S.includes(R))m(z=>z===R?null:R);else{const z=g.indexOf(R),W=[...g];W[z]=null,x(W),A(H=>[...H,R]),m(null)}},N=R=>{if(l==="placement")if(console.log(" handleLaneSelectForPlacement called with lane:",R,"gameMode:",e.gameMode),h){if(g[R]){const z=g[R],W=[...g];W[R]=h;const H=S.indexOf(h),q=[...S];q.splice(H,1,z),x(W),A(q)}else{const z=[...g];z[R]=h,x(z),A(W=>W.filter(H=>H!==h))}m(null)}else g[R]&&k(g[R])},D=async()=>{if(l!=="placement")return;if(console.log(" handleConfirmPlacement called"),g.some(z=>z==null)){s({title:"Incomplete Placement",text:"All ship sections must be placed before confirming placement.",onClose:()=>s(null),isBlocking:!1});return}console.log(" Submitting placement to PhaseManager:",g);try{const z=await He.actionProcessor.processCommitment({phase:"placement",playerId:t(),actionData:{placedSections:g}});if(!z.success){console.error(" Placement submission failed:",z.error),s({title:"Placement Error",text:z.error,onClose:()=>s(null),isBlocking:!1});return}console.log(" Placement submitted to PhaseManager"),n()&&!z.data.bothComplete&&s({title:"Placement Confirmed",text:"Your ship placement has been confirmed. Waiting for opponent to complete their placement...",onClose:()=>s(null),isBlocking:!1})}catch(z){console.error(" Error submitting placement:",z),s({title:"Placement Error",text:"An error occurred while submitting placement. Please try again.",onClose:()=>s(null),isBlocking:!1})}};if(g&&g.length===3&&g.every(R=>R!==null),n()&&C.placement&&!T.placement){const R=g.map((z,W)=>z?z.name:"Empty").join(", ");return v.jsx(K0,{phase:"placement",localPlayerStatus:`Your ship layout: ${R}`})}const j=g.every(R=>R!==null);return console.log(" ShipPlacementScreen rendered:",{allPlaced:j,placed:g,unplaced:u,selected:h}),v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(R=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes(R)&&v.jsx("div",{onClick:()=>k(R),className:`h-full transition-all duration-300 rounded-xl ${h===R?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(ff,{section:R,stats:p.shipSections[R],effectiveStatsForDisplay:p.shipSections[R].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:je,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null})})},R))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(R=>{const z=g[R],W=h&&!g[R];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>N(R),children:z?v.jsx(ff,{section:z,stats:p.shipSections[z],effectiveStatsForDisplay:p.shipSections[z].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:R===1,gameEngine:je,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${W?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:R===1?"Lane 2 (Center Bonus)":`Lane ${R+1}`})})},R)})})]}),v.jsx("button",{onClick:()=>{console.log(` Confirm Layout button clicked! allPlaced: ${j}`),D()},disabled:!j,className:"mt-12 bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 disabled:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed enabled:hover:bg-green-500 shadow-lg",children:"Confirm Layout"})]})]})}function WO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=WO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function et(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=WO(e))&&(r&&(r+=" "),r+=t);return r}var Jm={},eg={},jA;function SR(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(eg)),eg}var tg={},MA;function XO(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(tg)),tg}var ng={},RA;function QO(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(ng)),ng}var rg={},IA;function W0(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",p=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const f=n[s];u?f==="\\"&&s+1<i?(s++,l+=n[s]):f===u?u="":l+=f:p?f==='"'||f==="'"?u=f:f==="]"?(p=!1,r.push(l),l=""):l+=f:f==="["?(p=!0,l&&(r.push(l),l="")):f==="."?l&&(r.push(l),l=""):l+=f,s++}return l&&r.push(l),r}e.toPath=t})(rg)),rg}var LA;function X0(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SR(),n=XO(),r=QO(),i=W0();function s(u,p,f){if(u==null)return f;switch(typeof p){case"string":{if(t.isUnsafeProperty(p))return f;const h=u[p];return h===void 0?n.isDeepKey(p)?s(u,i.toPath(p),f):f:h}case"number":case"symbol":{typeof p=="number"&&(p=r.toKey(p));const h=u[p];return h===void 0?f:h}default:{if(Array.isArray(p))return l(u,p,f);if(Object.is(p?.valueOf(),-0)?p="-0":p=String(p),t.isUnsafeProperty(p))return f;const h=u[p];return h===void 0?f:h}}}function l(u,p,f){if(p.length===0)return f;let h=u;for(let m=0;m<p.length;m++){if(h==null||t.isUnsafeProperty(p[m]))return f;h=h[p[m]]}return h===void 0?f:h}e.get=s})(Jm)),Jm}var ag,$A;function AR(){return $A||($A=1,ag=X0().get),ag}var ER=AR();const Io=Fr(ER);var ig={exports:{}},it={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BA;function CR(){if(BA)return it;BA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var C=A.$$typeof;switch(C){case e:switch(A=A.type,A){case n:case i:case r:case p:case f:case g:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case h:return A;case s:return A;default:return C}}case t:return C}}}return it.ContextConsumer=s,it.ContextProvider=l,it.Element=e,it.ForwardRef=u,it.Fragment=n,it.Lazy=m,it.Memo=h,it.Portal=t,it.Profiler=i,it.StrictMode=r,it.Suspense=p,it.SuspenseList=f,it.isContextConsumer=function(A){return S(A)===s},it.isContextProvider=function(A){return S(A)===l},it.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},it.isForwardRef=function(A){return S(A)===u},it.isFragment=function(A){return S(A)===n},it.isLazy=function(A){return S(A)===m},it.isMemo=function(A){return S(A)===h},it.isPortal=function(A){return S(A)===t},it.isProfiler=function(A){return S(A)===i},it.isStrictMode=function(A){return S(A)===r},it.isSuspense=function(A){return S(A)===p},it.isSuspenseList=function(A){return S(A)===f},it.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===p||A===f||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===h||A.$$typeof===l||A.$$typeof===s||A.$$typeof===u||A.$$typeof===x||A.getModuleId!==void 0)},it.typeOf=S,it}var UA;function PR(){return UA||(UA=1,ig.exports=CR()),ig.exports}var wR=PR(),Jt=e=>e===0?0:e>0?1:-1,ar=e=>typeof e=="number"&&e!=+e,To=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Oe=e=>(typeof e=="number"||e instanceof Number)&&!ar(e),ca=e=>Oe(e)||typeof e=="string",OR=0,Bc=e=>{var t=++OR;return"".concat(e||"").concat(t)},Sn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Oe(t)&&typeof t!="string")return r;var s;if(To(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return ar(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},ZO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function pn(e,t,n){return Oe(e)&&Oe(t)?e+n*(t-e):t}function TR(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Io(r,t))===n)}var en=e=>e===null||typeof e>"u",Wc=e=>en(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),_R=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Q0(e){if(typeof e!="string")return!1;var t=_R;return t.includes(e)}var DR=["viewBox","children"],zA=["points","pathLength"],og={svg:DR,polygon:zA,polyline:zA},NR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Q0(i)&&(r[i]=(s=>n[i](n,s)))}),r},kR=(e,t,n)=>r=>(e(t,n,r),null),Xc=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Q0(i)&&typeof s=="function"&&(r||(r={}),r[i]=kR(s,t,n))}),r},jR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function JO(e){if(typeof e!="string")return!1;var t=jR;return t.includes(e)}function qo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return JO(r)});return Object.fromEntries(t)}var GA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",HA=null,sg=null,e2=e=>{if(e===HA&&Array.isArray(sg))return sg;var t=[];return E.Children.forEach(e,n=>{en(n)||(wR.isFragment(n)?t=t.concat(e2(n.props.children)):t.push(n))}),sg=t,HA=e,t};function Z0(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>GA(i)):r=[GA(t)],e2(e).forEach(i=>{var s=Io(i,"type.displayName")||Io(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var MR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&og?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||JO(t)),p=!!n&&Q0(t);return l||u||p},Rt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;MR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},RR=["children","width","height","viewBox","className","style","title","desc"];function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(null,arguments)}function IR(e,t){if(e==null)return{};var n,r,i=LR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function LR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var J0=E.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:p,desc:f}=e,h=IR(e,RR),m=s||{width:r,height:i,x:0,y:0},g=et("recharts-surface",l);return E.createElement("svg",Yy({},Rt(h,!0,"svg"),{className:g,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),E.createElement("title",null,p),E.createElement("desc",null,f),n)}),$R=["children","className"];function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fy.apply(null,arguments)}function BR(e,t){if(e==null)return{};var n,r,i=UR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var zn=E.forwardRef((e,t)=>{var{children:n,className:r}=e,i=BR(e,$R),s=et("recharts-layer",r);return E.createElement("g",Fy({className:s},Rt(i,!0),{ref:t}),n)}),t2=Lw(),n2=E.createContext(null),zR=()=>E.useContext(n2);function dt(e){return function(){return e}}const r2=Math.cos,pf=Math.sin,Vr=Math.sqrt,hf=Math.PI,Zf=2*hf,Vy=Math.PI,Ky=2*Vy,Po=1e-6,GR=Ky-Po;function a2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function HR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return a2;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class qR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?a2:HR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,p=r-t,f=i-n,h=l-t,m=u-n,g=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Po)if(!(Math.abs(m*p-f*h)>Po)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,S=i-u,A=p*p+f*f,C=x*x+S*S,P=Math.sqrt(A),T=Math.sqrt(g),O=s*Math.tan((Vy-Math.acos((A+g-C)/(2*P*T)))/2),k=O/T,N=O/P;Math.abs(k-1)>Po&&this._append`L${t+k*h},${n+k*m}`,this._append`A${s},${s},0,0,${+(m*x>h*S)},${this._x1=t+N*p},${this._y1=n+N*f}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),p=r*Math.sin(i),f=t+u,h=n+p,m=1^l,g=l?i-s:s-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>Po||Math.abs(this._y1-h)>Po)&&this._append`L${f},${h}`,r&&(g<0&&(g=g%Ky+Ky),g>GR?this._append`A${r},${r},0,1,${m},${t-u},${n-p}A${r},${r},0,1,${m},${this._x1=f},${this._y1=h}`:g>Po&&this._append`A${r},${r},0,${+(g>=Vy)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ev(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new qR(t)}function tv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i2(e){this._context=e}i2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Jf(e){return new i2(e)}function o2(e){return e[0]}function s2(e){return e[1]}function l2(e,t){var n=dt(!0),r=null,i=Jf,s=null,l=ev(u);e=typeof e=="function"?e:e===void 0?o2:dt(e),t=typeof t=="function"?t:t===void 0?s2:dt(t);function u(p){var f,h=(p=tv(p)).length,m,g=!1,x;for(r==null&&(s=i(x=l())),f=0;f<=h;++f)!(f<h&&n(m=p[f],f,p))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+e(m,f,p),+t(m,f,p));if(x)return s=null,x+""||null}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:dt(+p),u):e},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:dt(+p),u):t},u.defined=function(p){return arguments.length?(n=typeof p=="function"?p:dt(!!p),u):n},u.curve=function(p){return arguments.length?(i=p,r!=null&&(s=i(r)),u):i},u.context=function(p){return arguments.length?(p==null?r=s=null:s=i(r=p),u):r},u}function Rd(e,t,n){var r=null,i=dt(!0),s=null,l=Jf,u=null,p=ev(f);e=typeof e=="function"?e:e===void 0?o2:dt(+e),t=typeof t=="function"?t:dt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?s2:dt(+n);function f(m){var g,x,S,A=(m=tv(m)).length,C,P=!1,T,O=new Array(A),k=new Array(A);for(s==null&&(u=l(T=p())),g=0;g<=A;++g){if(!(g<A&&i(C=m[g],g,m))===P)if(P=!P)x=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=g-1;S>=x;--S)u.point(O[S],k[S]);u.lineEnd(),u.areaEnd()}P&&(O[g]=+e(C,g,m),k[g]=+t(C,g,m),u.point(r?+r(C,g,m):O[g],n?+n(C,g,m):k[g]))}if(T)return u=null,T+""||null}function h(){return l2().defined(i).curve(l).context(s)}return f.x=function(m){return arguments.length?(e=typeof m=="function"?m:dt(+m),r=null,f):e},f.x0=function(m){return arguments.length?(e=typeof m=="function"?m:dt(+m),f):e},f.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:dt(+m),f):r},f.y=function(m){return arguments.length?(t=typeof m=="function"?m:dt(+m),n=null,f):t},f.y0=function(m){return arguments.length?(t=typeof m=="function"?m:dt(+m),f):t},f.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:dt(+m),f):n},f.lineX0=f.lineY0=function(){return h().x(e).y(t)},f.lineY1=function(){return h().x(e).y(n)},f.lineX1=function(){return h().x(r).y(t)},f.defined=function(m){return arguments.length?(i=typeof m=="function"?m:dt(!!m),f):i},f.curve=function(m){return arguments.length?(l=m,s!=null&&(u=l(s)),f):l},f.context=function(m){return arguments.length?(m==null?s=u=null:u=l(s=m),f):s},f}class c2{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function YR(e){return new c2(e,!0)}function FR(e){return new c2(e,!1)}const nv={draw(e,t){const n=Vr(t/hf);e.moveTo(n,0),e.arc(0,0,n,0,Zf)}},VR={draw(e,t){const n=Vr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},u2=Vr(1/3),KR=u2*2,WR={draw(e,t){const n=Vr(t/KR),r=n*u2;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},XR={draw(e,t){const n=Vr(t),r=-n/2;e.rect(r,r,n,n)}},QR=.8908130915292852,d2=pf(hf/10)/pf(7*hf/10),ZR=pf(Zf/10)*d2,JR=-r2(Zf/10)*d2,eI={draw(e,t){const n=Vr(t*QR),r=ZR*n,i=JR*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=Zf*s/5,u=r2(l),p=pf(l);e.lineTo(p*n,-u*n),e.lineTo(u*r-p*i,p*r+u*i)}e.closePath()}},lg=Vr(3),tI={draw(e,t){const n=-Vr(t/(lg*3));e.moveTo(0,n*2),e.lineTo(-lg*n,-n),e.lineTo(lg*n,-n),e.closePath()}},Ar=-.5,Er=Vr(3)/2,Wy=1/Vr(12),nI=(Wy/2+1)*3,rI={draw(e,t){const n=Vr(t/nI),r=n/2,i=n*Wy,s=r,l=n*Wy+n,u=-s,p=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,p),e.lineTo(Ar*r-Er*i,Er*r+Ar*i),e.lineTo(Ar*s-Er*l,Er*s+Ar*l),e.lineTo(Ar*u-Er*p,Er*u+Ar*p),e.lineTo(Ar*r+Er*i,Ar*i-Er*r),e.lineTo(Ar*s+Er*l,Ar*l-Er*s),e.lineTo(Ar*u+Er*p,Ar*p-Er*u),e.closePath()}};function aI(e,t){let n=null,r=ev(i);e=typeof e=="function"?e:dt(e||nv),t=typeof t=="function"?t:dt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:dt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:dt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function mf(){}function gf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function f2(e){this._context=e}f2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iI(e){return new f2(e)}function p2(e){this._context=e}p2.prototype={areaStart:mf,areaEnd:mf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oI(e){return new p2(e)}function h2(e){this._context=e}h2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sI(e){return new h2(e)}function m2(e){this._context=e}m2.prototype={areaStart:mf,areaEnd:mf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lI(e){return new m2(e)}function qA(e){return e<0?-1:1}function YA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(qA(s)+qA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function FA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function cg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function yf(e){this._context=e}yf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cg(this,this._t0,FA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,cg(this,FA(this,n=YA(this,e,t)),n);break;default:cg(this,this._t0,n=YA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function g2(e){this._context=new y2(e)}(g2.prototype=Object.create(yf.prototype)).point=function(e,t){yf.prototype.point.call(this,t,e)};function y2(e){this._context=e}y2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function cI(e){return new yf(e)}function uI(e){return new g2(e)}function v2(e){this._context=e}v2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=VA(e),i=VA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function VA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function dI(e){return new v2(e)}function ep(e,t){this._context=e,this._t=t}ep.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function fI(e){return new ep(e,.5)}function pI(e){return new ep(e,0)}function hI(e){return new ep(e,1)}function qs(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Xy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function mI(e,t){return e[t]}function gI(e){const t=[];return t.key=e,t}function yI(){var e=dt([]),t=Xy,n=qs,r=mI;function i(s){var l=Array.from(e.apply(this,arguments),gI),u,p=l.length,f=-1,h;for(const m of s)for(u=0,++f;u<p;++u)(l[u][f]=[0,+r(m,l[u].key,f,s)]).data=m;for(u=0,h=tv(t(l));u<p;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:dt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:dt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Xy:typeof s=="function"?s:dt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??qs,i):n},i}function vI(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}qs(e,t)}}function bI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}qs(e,t)}}function xI(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,p=0,f=0;u<l;++u){for(var h=e[t[u]],m=h[r][1]||0,g=h[r-1][1]||0,x=(m-g)/2,S=0;S<u;++S){var A=e[t[S]],C=A[r][1]||0,P=A[r-1][1]||0;x+=C-P}p+=m,f+=x*m}i[r-1][1]+=i[r-1][0]=n,p&&(n-=f/p)}i[r-1][1]+=i[r-1][0]=n,qs(e,t)}}var SI=["type","size","sizeType"];function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qy.apply(null,arguments)}function KA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(n),!0).forEach(function(r){AI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AI(e,t,n){return(t=EI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EI(e){var t=CI(e,"string");return typeof t=="symbol"?t:t+""}function CI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PI(e,t){if(e==null)return{};var n,r,i=wI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var b2={symbolCircle:nv,symbolCross:VR,symbolDiamond:WR,symbolSquare:XR,symbolStar:eI,symbolTriangle:tI,symbolWye:rI},OI=Math.PI/180,TI=e=>{var t="symbol".concat(Wc(e));return b2[t]||nv},_I=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*OI;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},DI=(e,t)=>{b2["symbol".concat(Wc(e))]=t},rv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=PI(e,SI),s=WA(WA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var g=TI(l),x=aI().type(g).size(_I(n,r,l));return x()},{className:p,cx:f,cy:h}=s,m=Rt(s,!0);return f===+f&&h===+h&&n===+n?E.createElement("path",Qy({},m,{className:et("recharts-symbols",p),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};rv.registerSymbol=DI;function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(null,arguments)}function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(r){av(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function av(e,t,n){return(t=kI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kI(e){var t=jI(e,"string");return typeof t=="symbol"?t:t+""}function jI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cr=32;class iv extends E.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Cr/2,s=Cr/6,l=Cr/3,u=t.inactive?r:t.color,p=n??t.type;if(p==="none")return null;if(p==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Cr,y2:i,className:"recharts-legend-icon"});if(p==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Cr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(p==="rect")return E.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Cr/8,"h").concat(Cr,"v").concat(Cr*3/4,"h").concat(-Cr,"z"),className:"recharts-legend-icon"});if(E.isValidElement(t.legendIcon)){var f=NI({},t);return delete f.legendIcon,E.cloneElement(t.legendIcon,f)}return E.createElement(rv,{fill:u,cx:i,cy:i,size:Cr,sizeType:"diameter",type:p})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Cr,height:Cr},p={display:r==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,m)=>{var g=h.formatter||i,x=et({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:h.inactive});if(h.type==="none")return null;var S=h.inactive?s:h.color,A=g?g(h.value,h,m):h.value;return E.createElement("li",Zy({className:x,style:p,key:"legend-item-".concat(m)},Xc(this.props,h,m)),E.createElement(J0,{width:n,height:n,viewBox:u,style:f,"aria-label":"".concat(A," legend icon")},this.renderIcon(h,l)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}av(iv,"displayName","Legend");av(iv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var ug={},dg={},QA;function MI(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(dg)),dg}var fg={},ZA;function x2(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(fg)),fg}var pg={},hg={},mg={},JA;function RI(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(mg)),mg}var eE;function ov(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RI();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(hg)),hg}var gg={},tE;function II(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(gg)),gg}var nE;function LI(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ov(),n=II();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(pg)),pg}var yg={},vg={},rE;function $I(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X0();function n(r){return function(i){return t.get(i,r)}}e.property=n})(vg)),vg}var bg={},xg={},Sg={},Ag={},aE;function S2(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Ag)),Ag}var Eg={},iE;function A2(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Eg)),Eg}var Cg={},oE;function E2(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Cg)),Cg}var sE;function BI(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sv(),n=S2(),r=A2(),i=E2();function s(m,g,x){return typeof x!="function"?t.isMatch(m,g):l(m,g,function S(A,C,P,T,O,k){const N=x(A,C,P,T,O,k);return N!==void 0?!!N:l(A,C,S,k)},new Map)}function l(m,g,x,S){if(g===m)return!0;switch(typeof g){case"object":return u(m,g,x,S);case"function":return Object.keys(g).length>0?l(m,{...g},x,S):i.eq(m,g);default:return n.isObject(m)?typeof g=="string"?g==="":!0:i.eq(m,g)}}function u(m,g,x,S){if(g==null)return!0;if(Array.isArray(g))return f(m,g,x,S);if(g instanceof Map)return p(m,g,x,S);if(g instanceof Set)return h(m,g,x,S);const A=Object.keys(g);if(m==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(g))return S.get(g)===m;S&&S.set(g,m);try{for(let C=0;C<A.length;C++){const P=A[C];if(!r.isPrimitive(m)&&!(P in m)||g[P]===void 0&&m[P]!==void 0||g[P]===null&&m[P]!==null||!x(m[P],g[P],P,m,g,S))return!1}return!0}finally{S&&S.delete(g)}}function p(m,g,x,S){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,C]of g.entries()){const P=m.get(A);if(x(P,C,A,m,g,S)===!1)return!1}return!0}function f(m,g,x,S){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let C=0;C<g.length;C++){const P=g[C];let T=!1;for(let O=0;O<m.length;O++){if(A.has(O))continue;const k=m[O];let N=!1;if(x(k,P,C,m,g,S)&&(N=!0),N){A.add(O),T=!0;break}}if(!T)return!1}return!0}function h(m,g,x,S){return g.size===0?!0:m instanceof Set?f([...m],[...g],x,S):!1}e.isMatchWith=s,e.isSetMatch=h})(Sg)),Sg}var lE;function sv(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(xg)),xg}var Pg={},wg={},Og={},cE;function UI(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Og)),Og}var Tg={},uE;function C2(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Tg)),Tg}var _g={},dE;function P2(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",p="[object Map]",f="[object Set]",h="[object Array]",m="[object Function]",g="[object ArrayBuffer]",x="[object Object]",S="[object Error]",A="[object DataView]",C="[object Uint8Array]",P="[object Uint8ClampedArray]",T="[object Uint16Array]",O="[object Uint32Array]",k="[object BigUint64Array]",N="[object Int8Array]",D="[object Int16Array]",j="[object Int32Array]",R="[object BigInt64Array]",z="[object Float32Array]",W="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=g,e.arrayTag=h,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=z,e.float64ArrayTag=W,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=j,e.int8ArrayTag=N,e.mapTag=p,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=f,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=T,e.uint32ArrayTag=O,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=P})(_g)),_g}var Dg={},fE;function zI(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(Dg)),Dg}var pE;function w2(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UI(),n=C2(),r=P2(),i=A2(),s=zI();function l(h,m){return u(h,void 0,h,new Map,m)}function u(h,m,g,x=new Map,S=void 0){const A=S?.(h,m,g,x);if(A!==void 0)return A;if(i.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const C=new Array(h.length);x.set(h,C);for(let P=0;P<h.length;P++)C[P]=u(h[P],P,g,x,S);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;x.set(h,C);for(const[P,T]of h)C.set(P,u(T,P,g,x,S));return C}if(h instanceof Set){const C=new Set;x.set(h,C);for(const P of h)C.add(u(P,void 0,g,x,S));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,C);for(let P=0;P<h.length;P++)C[P]=u(h[P],P,g,x,S);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,C),p(C,h,g,x,S),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return x.set(h,C),p(C,h,g,x,S),C}if(h instanceof Blob){const C=new Blob([h],{type:h.type});return x.set(h,C),p(C,h,g,x,S),C}if(h instanceof Error){const C=new h.constructor;return x.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,p(C,h,g,x,S),C}if(typeof h=="object"&&f(h)){const C=Object.create(Object.getPrototypeOf(h));return x.set(h,C),p(C,h,g,x,S),C}return h}function p(h,m,g=h,x,S){const A=[...Object.keys(m),...t.getSymbols(m)];for(let C=0;C<A.length;C++){const P=A[C],T=Object.getOwnPropertyDescriptor(h,P);(T==null||T.writable)&&(h[P]=u(m[P],P,g,x,S))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=p})(wg)),wg}var hE;function GI(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w2();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Pg)),Pg}var mE;function HI(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sv(),n=GI();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(bg)),bg}var Ng={},kg={},jg={},gE;function qI(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w2(),n=P2();function r(i,s){return t.cloneDeepWith(i,(l,u,p,f)=>{const h=s?.(l,u,p,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(jg)),jg}var yE;function YI(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qI();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(kg)),kg}var Mg={},Rg={},vE;function O2(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Rg)),Rg}var Ig={},bE;function FI(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C2();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Ig)),Ig}var xE;function VI(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XO(),n=O2(),r=FI(),i=W0();function s(l,u){let p;if(Array.isArray(u)?p=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?p=i.toPath(u):p=[u],p.length===0)return!1;let f=l;for(let h=0;h<p.length;h++){const m=p[h];if((f==null||!Object.hasOwn(f,m))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(m)&&m<f.length))return!1;f=f[m]}return!0}e.has=s})(Mg)),Mg}var SE;function KI(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sv(),n=QO(),r=YI(),i=X0(),s=VI();function l(u,p){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return p=r.cloneDeep(p),function(f){const h=i.get(f,u);return h===void 0?s.has(f,u):p===void 0?h===void 0:t.isMatch(h,p)}}e.matchesProperty=l})(Ng)),Ng}var AE;function WI(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x2(),n=$I(),r=HI(),i=KI();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(yg)),yg}var EE;function XI(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MI(),n=x2(),r=LI(),i=WI();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(ug)),ug}var Lg,CE;function QI(){return CE||(CE=1,Lg=XI().uniqBy),Lg}var ZI=QI();const PE=Fr(ZI);function T2(e,t,n){return t===!0?PE(e,n):typeof t=="function"?PE(e,t):e}var $g={exports:{}},Bg={},Ug={exports:{}},zg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function JI(){if(wE)return zg;wE=1;var e=tl();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(m,g){var x=g(),S=r({inst:{value:x,getSnapshot:g}}),A=S[0].inst,C=S[1];return s(function(){A.value=x,A.getSnapshot=g,p(A)&&C({inst:A})},[m,x,g]),i(function(){return p(A)&&C({inst:A}),m(function(){p(A)&&C({inst:A})})},[m]),l(x),x}function p(m){var g=m.getSnapshot;m=m.value;try{var x=g();return!n(m,x)}catch{return!0}}function f(m,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return zg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,zg}var OE;function eL(){return OE||(OE=1,Ug.exports=JI()),Ug.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function tL(){if(TE)return Bg;TE=1;var e=tl(),t=eL();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,p=e.useDebugValue;return Bg.useSyncExternalStoreWithSelector=function(f,h,m,g,x){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function P(D){if(!T){if(T=!0,O=D,D=g(D),x!==void 0&&A.hasValue){var j=A.value;if(x(j,D))return k=j}return k=D}if(j=k,r(O,D))return j;var R=g(D);return x!==void 0&&x(j,R)?(O=D,j):(O=D,k=R)}var T=!1,O,k,N=m===void 0?null:m;return[function(){return P(h())},N===null?void 0:function(){return P(N())}]},[h,m,g,x]);var C=i(f,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=C},[C]),p(C),C},Bg}var _E;function nL(){return _E||(_E=1,$g.exports=tL()),$g.exports}var rL=nL(),lv=E.createContext(null),aL=e=>e,St=()=>{var e=E.useContext(lv);return e?e.store.dispatch:aL},of=()=>{},iL=()=>of,oL=(e,t)=>e===t;function Pe(e){var t=E.useContext(lv);return rL.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:iL,t?t.store.getState:of,t?t.store.getState:of,t?e:of,oL)}function sL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function lL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function cL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var DE=e=>Array.isArray(e)?e:[e];function uL(e){const t=Array.isArray(e[0])?e[0]:e;return cL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function dL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var fL=class{constructor(e){this.value=e}deref(){return this.value}},pL=typeof WeakRef<"u"?WeakRef:fL,hL=0,NE=1;function Id(){return{s:hL,v:void 0,o:null,p:null}}function _2(e,t={}){let n=Id();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:p}=arguments;for(let m=0,g=p;m<g;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(x);A===void 0?(u=Id(),S.set(x,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(x);A===void 0?(u=Id(),S.set(x,u)):u=A}}const f=u;let h;if(u.s===NE)h=u.v;else if(h=e.apply(null,arguments),s++,r){const m=i?.deref?.()??i;m!=null&&r(m,h)&&(h=m,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new pL(h):h}return f.s=NE,f.v=h,h}return l.clearCache=()=>{n=Id(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function mL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,p={},f=i.pop();typeof f=="object"&&(p=f,f=i.pop()),sL(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...p},{memoize:m,memoizeOptions:g=[],argsMemoize:x=_2,argsMemoizeOptions:S=[]}=h,A=DE(g),C=DE(S),P=uL(i),T=m(function(){return s++,f.apply(null,arguments)},...A),O=x(function(){l++;const N=dL(P,arguments);return u=T.apply(null,N),u},...C);return Object.assign(O,{resultFunc:f,memoizedResultFunc:T,dependencies:P,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var J=mL(_2),gL=Object.assign((e,t=J)=>{lL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,p)=>(l[n[p]]=u,l),{}))},{withTypes:()=>gL}),Gg={},Hg={},qg={},kE;function yL(){return kE||(kE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(qg)),qg}var Yg={},Fg={},jE;function D2(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Fg)),Fg}var ME;function vL(){return ME||(ME=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D2(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Yg)),Yg}var RE;function bL(){return RE||(RE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yL(),n=vL(),r=W0();function i(s,l,u,p){if(s==null)return[];u=p?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const f=(x,S)=>{let A=x;for(let C=0;C<S.length&&A!=null;++C)A=A[S[C]];return A},h=(x,S)=>S==null||x==null?S:typeof x=="object"&&"key"in x?Object.hasOwn(S,x.key)?S[x.key]:f(S,x.path):typeof x=="function"?x(S):Array.isArray(x)?f(S,x):typeof S=="object"?S[x]:S,m=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:m.map(S=>h(S,x))})).slice().sort((x,S)=>{for(let A=0;A<m.length;A++){const C=t.compareValues(x.criteria[A],S.criteria[A],u[A]);if(C!==0)return C}return 0}).map(x=>x.original)}e.orderBy=i})(Hg)),Hg}var Vg={},IE;function xL(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,p)=>{for(let f=0;f<u.length;f++){const h=u[f];Array.isArray(h)&&p<s?l(h,p+1):i.push(h)}};return l(n,0),i}e.flatten=t})(Vg)),Vg}var Kg={},LE;function N2(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O2(),n=ov(),r=S2(),i=E2();function s(l,u,p){return r.isObject(p)&&(typeof u=="number"&&n.isArrayLike(p)&&t.isIndex(u)&&u<p.length||typeof u=="string"&&u in p)?i.eq(p[u],l):!1}e.isIterateeCall=s})(Kg)),Kg}var $E;function SL(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bL(),n=xL(),r=N2();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(Gg)),Gg}var Wg,BE;function AL(){return BE||(BE=1,Wg=SL().sortBy),Wg}var EL=AL();const tp=Fr(EL);var k2=e=>e.legend.settings,CL=e=>e.legend.size,PL=e=>e.legend.payload,wL=J([PL,k2],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?tp(r,n):r});function OL(){return Pe(wL)}var Ld=1;function j2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Ld||Math.abs(l.left-t.left)>Ld||Math.abs(l.top-t.top)>Ld||Math.abs(l.width-t.width)>Ld)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function dn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var TL=typeof Symbol=="function"&&Symbol.observable||"@@observable",UE=TL,Xg=()=>Math.random().toString(36).substring(7).split("").join("."),_L={INIT:`@@redux/INIT${Xg()}`,REPLACE:`@@redux/REPLACE${Xg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Xg()}`},vf=_L;function cv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function M2(e,t,n){if(typeof e!="function")throw new Error(dn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(dn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(dn(1));return n(M2)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,p=!1;function f(){l===s&&(l=new Map,s.forEach((C,P)=>{l.set(P,C)}))}function h(){if(p)throw new Error(dn(3));return i}function m(C){if(typeof C!="function")throw new Error(dn(4));if(p)throw new Error(dn(5));let P=!0;f();const T=u++;return l.set(T,C),function(){if(P){if(p)throw new Error(dn(6));P=!1,f(),l.delete(T),s=null}}}function g(C){if(!cv(C))throw new Error(dn(7));if(typeof C.type>"u")throw new Error(dn(8));if(typeof C.type!="string")throw new Error(dn(17));if(p)throw new Error(dn(9));try{p=!0,i=r(i,C)}finally{p=!1}return(s=l).forEach(T=>{T()}),C}function x(C){if(typeof C!="function")throw new Error(dn(10));r=C,g({type:vf.REPLACE})}function S(){const C=m;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(dn(11));function T(){const k=P;k.next&&k.next(h())}return T(),{unsubscribe:C(T)}},[UE](){return this}}}return g({type:vf.INIT}),{dispatch:g,subscribe:m,getState:h,replaceReducer:x,[UE]:S}}function DL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:vf.INIT})>"u")throw new Error(dn(12));if(typeof n(void 0,{type:vf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(dn(13))})}function R2(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{DL(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let p=!1;const f={};for(let h=0;h<r.length;h++){const m=r[h],g=n[m],x=l[m],S=g(x,u);if(typeof S>"u")throw u&&u.type,new Error(dn(14));f[m]=S,p=p||S!==x}return p=p||r.length!==Object.keys(l).length,p?f:l}}function bf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function NL(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(dn(15))};const l={getState:i.getState,dispatch:(p,...f)=>s(p,...f)},u=e.map(p=>p(l));return s=bf(...u)(i.dispatch),{...i,dispatch:s}}}function I2(e){return cv(e)&&"type"in e&&typeof e.type=="string"}var L2=Symbol.for("immer-nothing"),zE=Symbol.for("immer-draftable"),ir=Symbol.for("immer-state");function qr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ys=Object.getPrototypeOf;function Lo(e){return!!e&&!!e[ir]}function Ua(e){return e?$2(e)||Array.isArray(e)||!!e[zE]||!!e.constructor?.[zE]||Qc(e)||rp(e):!1}var kL=Object.prototype.constructor.toString();function $2(e){if(!e||typeof e!="object")return!1;const t=Ys(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===kL}function xf(e,t){np(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function np(e){const t=e[ir];return t?t.type_:Array.isArray(e)?1:Qc(e)?2:rp(e)?3:0}function Jy(e,t){return np(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function B2(e,t,n){const r=np(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function jL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Qc(e){return e instanceof Map}function rp(e){return e instanceof Set}function wo(e){return e.copy_||e.base_}function e0(e,t){if(Qc(e))return new Map(e);if(rp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=$2(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ir];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ys(e),r)}else{const r=Ys(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function uv(e,t=!1){return ap(e)||Lo(e)||!Ua(e)||(np(e)>1&&Object.defineProperties(e,{set:{value:$d},add:{value:$d},clear:{value:$d},delete:{value:$d}}),Object.freeze(e),t&&Object.values(e).forEach(n=>uv(n,!0))),e}function $d(){qr(2)}function ap(e){return Object.isFrozen(e)}var ML={};function $o(e){const t=ML[e];return t||qr(0,e),t}var Uc;function U2(){return Uc}function RL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function GE(e,t){t&&($o("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function t0(e){n0(e),e.drafts_.forEach(IL),e.drafts_=null}function n0(e){e===Uc&&(Uc=e.parent_)}function HE(e){return Uc=RL(Uc,e)}function IL(e){const t=e[ir];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function qE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ir].modified_&&(t0(t),qr(4)),Ua(e)&&(e=Sf(t,e),t.parent_||Af(t,e)),t.patches_&&$o("Patches").generateReplacementPatches_(n[ir].base_,e,t.patches_,t.inversePatches_)):e=Sf(t,n,[]),t0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==L2?e:void 0}function Sf(e,t,n){if(ap(t))return t;const r=t[ir];if(!r)return xf(t,(i,s)=>YE(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Af(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),xf(s,(u,p)=>YE(e,r,i,u,p,n,l)),Af(e,i,!1),n&&e.patches_&&$o("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function YE(e,t,n,r,i,s,l){if(Lo(i)){const u=s&&t&&t.type_!==3&&!Jy(t.assigned_,r)?s.concat(r):void 0,p=Sf(e,i,u);if(B2(n,r,p),Lo(p))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Ua(i)&&!ap(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Sf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Qc(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Af(e,i)}}function Af(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&uv(t,n)}function LL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:U2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=dv;n&&(i=[r],s=zc);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var dv={get(e,t){if(t===ir)return e;const n=wo(e);if(!Jy(n,t))return $L(e,n,t);const r=n[t];return e.finalized_||!Ua(r)?r:r===Qg(e.base_,t)?(Zg(e),e.copy_[t]=a0(r,e)):r},has(e,t){return t in wo(e)},ownKeys(e){return Reflect.ownKeys(wo(e))},set(e,t,n){const r=z2(wo(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Qg(wo(e),t),s=i?.[ir];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(jL(n,i)&&(n!==void 0||Jy(e.base_,t)))return!0;Zg(e),r0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Qg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Zg(e),r0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=wo(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){qr(11)},getPrototypeOf(e){return Ys(e.base_)},setPrototypeOf(){qr(12)}},zc={};xf(dv,(e,t)=>{zc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zc.deleteProperty=function(e,t){return zc.set.call(this,e,t,void 0)};zc.set=function(e,t,n){return dv.set.call(this,e[0],t,n,e[0])};function Qg(e,t){const n=e[ir];return(n?wo(n):e)[t]}function $L(e,t,n){const r=z2(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function z2(e,t){if(!(t in e))return;let n=Ys(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Ys(n)}}function r0(e){e.modified_||(e.modified_=!0,e.parent_&&r0(e.parent_))}function Zg(e){e.copy_||(e.copy_=e0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var BL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(p=s,...f){return l.produce(p,h=>n.call(this,h,...f))}}typeof n!="function"&&qr(6),r!==void 0&&typeof r!="function"&&qr(7);let i;if(Ua(t)){const s=HE(this),l=a0(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?t0(s):n0(s)}return GE(s,r),qE(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===L2&&(i=void 0),this.autoFreeze_&&uv(i,!0),r){const s=[],l=[];$o("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else qr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,p=>t(p,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ua(e)||qr(8),Lo(e)&&(e=$a(e));const t=HE(this),n=a0(e,void 0);return n[ir].isManual_=!0,n0(t),n}finishDraft(e,t){const n=e&&e[ir];(!n||!n.isManual_)&&qr(9);const{scope_:r}=n;return GE(r,t),qE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=$o("Patches").applyPatches_;return Lo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function a0(e,t){const n=Qc(e)?$o("MapSet").proxyMap_(e,t):rp(e)?$o("MapSet").proxySet_(e,t):LL(e,t);return(t?t.scope_:U2()).drafts_.push(n),n}function $a(e){return Lo(e)||qr(10,e),G2(e)}function G2(e){if(!Ua(e)||ap(e))return e;const t=e[ir];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=e0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=e0(e,!0);return xf(n,(r,i)=>{B2(n,r,G2(i))}),t&&(t.finalized_=!1),n}var UL=new BL,H2=UL.produce;function q2(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var zL=q2(),GL=q2,HL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bf:bf.apply(null,arguments)};function _r(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(rr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>I2(r)&&r.type===e,n}var Y2=class _c extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,_c.prototype)}static get[Symbol.species](){return _c}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new _c(...t[0].concat(this)):new _c(...t.concat(this))}};function FE(e){return Ua(e)?H2(e,()=>{}):e}function Bd(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function qL(e){return typeof e=="boolean"}var YL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new Y2;return n&&(qL(n)?l.push(zL):l.push(GL(n.extraArgument))),l},FL="RTK_autoBatch",VE=e=>t=>{setTimeout(t,e)},VL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:VE(10):e.type==="callback"?e.queueNotification:VE(e.timeout),f=()=>{l=!1,s&&(s=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),g=r.subscribe(m);return u.add(h),()=>{g(),u.delete(h)}},dispatch(h){try{return i=!h?.meta?.[FL],s=!i,s&&(l||(l=!0,p(f))),r.dispatch(h)}finally{i=!0}}})},KL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Y2(e);return r&&i.push(VL(typeof r=="object"?r:void 0)),i};function WL(e){const t=YL(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(cv(n))u=R2(n);else throw new Error(rr(1));let p;typeof r=="function"?p=r(t):p=t();let f=bf;i&&(f=HL({trace:!1,...typeof i=="object"&&i}));const h=NL(...p),m=KL(h);let g=typeof l=="function"?l(m):m();const x=f(...g);return M2(u,s,x)}function F2(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(rr(28));if(u in t)throw new Error(rr(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function XL(e){return typeof e=="function"}function QL(e,t){let[n,r,i]=F2(t),s;if(XL(e))s=()=>FE(e());else{const u=FE(e);s=()=>u}function l(u=s(),p){let f=[n[p.type],...r.filter(({matcher:h})=>h(p)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,m)=>{if(m)if(Lo(h)){const x=m(h,p);return x===void 0?h:x}else{if(Ua(h))return H2(h,g=>m(g,p));{const g=m(h,p);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},u)}return l.getInitialState=s,l}var ZL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",JL=(e=21)=>{let t="",n=e;for(;n--;)t+=ZL[Math.random()*64|0];return t},e3=Symbol.for("rtk-slice-createasyncthunk");function t3(e,t){return`${e}/${t}`}function n3({creators:e}={}){const t=e?.asyncThunk?.[e3];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(rr(11));const l=(typeof r.reducers=="function"?r.reducers(a3()):r.reducers)||{},u=Object.keys(l),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,k){const N=typeof O=="string"?O:O.type;if(!N)throw new Error(rr(12));if(N in p.sliceCaseReducersByType)throw new Error(rr(13));return p.sliceCaseReducersByType[N]=k,f},addMatcher(O,k){return p.sliceMatchers.push({matcher:O,reducer:k}),f},exposeAction(O,k){return p.actionCreators[O]=k,f},exposeCaseReducer(O,k){return p.sliceCaseReducersByName[O]=k,f}};u.forEach(O=>{const k=l[O],N={reducerName:O,type:t3(i,O),createNotation:typeof r.reducers=="function"};o3(k)?l3(N,k,f,t):i3(N,k,f)});function h(){const[O={},k=[],N=void 0]=typeof r.extraReducers=="function"?F2(r.extraReducers):[r.extraReducers],D={...O,...p.sliceCaseReducersByType};return QL(r.initialState,j=>{for(let R in D)j.addCase(R,D[R]);for(let R of p.sliceMatchers)j.addMatcher(R.matcher,R.reducer);for(let R of k)j.addMatcher(R.matcher,R.reducer);N&&j.addDefaultCase(N)})}const m=O=>O,g=new Map,x=new WeakMap;let S;function A(O,k){return S||(S=h()),S(O,k)}function C(){return S||(S=h()),S.getInitialState()}function P(O,k=!1){function N(j){let R=j[O];return typeof R>"u"&&k&&(R=Bd(x,N,C)),R}function D(j=m){const R=Bd(g,k,()=>new WeakMap);return Bd(R,j,()=>{const z={};for(const[W,H]of Object.entries(r.selectors??{}))z[W]=r3(H,j,()=>Bd(x,j,C),k);return z})}return{reducerPath:O,getSelectors:D,get selectors(){return D(N)},selectSlice:N}}const T={name:i,reducer:A,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:C,...P(s),injectInto(O,{reducerPath:k,...N}={}){const D=k??s;return O.inject({reducerPath:D,reducer:A},N),{...T,...P(D,!0)}}};return T}}function r3(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var sr=n3();function a3(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function i3({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!s3(r))throw new Error(rr(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?_r(e,l):_r(e))}function o3(e){return e._reducerDefinitionType==="asyncThunk"}function s3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function l3({type:e,reducerName:t},n,r,i){if(!i)throw new Error(rr(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:p,settled:f,options:h}=n,m=i(e,s,h);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),p&&r.addCase(m.rejected,p),f&&r.addMatcher(m.settled,f),r.exposeCaseReducer(t,{fulfilled:l||Ud,pending:u||Ud,rejected:p||Ud,settled:f||Ud})}function Ud(){}var c3="task",V2="listener",K2="completed",fv="cancelled",u3=`task-${fv}`,d3=`task-${K2}`,i0=`${V2}-${fv}`,f3=`${V2}-${K2}`,ip=class{constructor(e){this.code=e,this.message=`${c3} ${fv} (reason: ${e})`}name="TaskAbortError";message},pv=(e,t)=>{if(typeof e!="function")throw new TypeError(rr(32))},Ef=()=>{},W2=(e,t=Ef)=>(e.catch(t),e),X2=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ko=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},jo=e=>{if(e.aborted){const{reason:t}=e;throw new ip(t)}};function Q2(e,t){let n=Ef;return new Promise((r,i)=>{const s=()=>i(new ip(e.reason));if(e.aborted){s();return}n=X2(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Ef})}var p3=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof ip?"cancelled":"rejected",error:n}}finally{t?.()}},Cf=e=>t=>W2(Q2(e,t).then(n=>(jo(e),n))),Z2=e=>{const t=Cf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Gs}=Object,KE={},op="listenerMiddleware",h3=(e,t)=>{const n=r=>X2(e,()=>ko(r,e.reason));return(r,i)=>{pv(r);const s=new AbortController;n(s);const l=p3(async()=>{jo(e),jo(s.signal);const u=await r({pause:Cf(s.signal),delay:Z2(s.signal),signal:s.signal});return jo(s.signal),u},()=>ko(s,d3));return i?.autoJoin&&t.push(l.catch(Ef)),{result:Cf(e)(l),cancel(){ko(s,u3)}}}},m3=(e,t)=>{const n=async(r,i)=>{jo(t);let s=()=>{};const u=[new Promise((p,f)=>{let h=e({predicate:r,effect:(m,g)=>{g.unsubscribe(),p([m,g.getState(),g.getOriginalState()])}});s=()=>{h(),f()}})];i!=null&&u.push(new Promise(p=>setTimeout(p,i,null)));try{const p=await Q2(t,Promise.race(u));return jo(t),p}finally{s()}};return(r,i)=>W2(n(r,i))},J2=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=_r(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(rr(21));return pv(s),{predicate:i,type:t,effect:s}},eT=Gs(e=>{const{type:t,predicate:n,effect:r}=J2(e);return{id:JL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(rr(22))}}},{withTypes:()=>eT}),WE=(e,t)=>{const{type:n,effect:r,predicate:i}=J2(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},o0=e=>{e.pending.forEach(t=>{ko(t,i0)})},g3=e=>()=>{e.forEach(o0),e.clear()},XE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},tT=Gs(_r(`${op}/add`),{withTypes:()=>tT}),y3=_r(`${op}/removeAll`),nT=Gs(_r(`${op}/remove`),{withTypes:()=>nT}),v3=(...e)=>{console.error(`${op}/error`,...e)},Zc=(e={})=>{const t=new Map,{extra:n,onError:r=v3}=e;pv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),m=>{h.unsubscribe(),m?.cancelActive&&o0(h)}),s=h=>{const m=WE(t,h)??eT(h);return i(m)};Gs(s,{withTypes:()=>s});const l=h=>{const m=WE(t,h);return m&&(m.unsubscribe(),h.cancelActive&&o0(m)),!!m};Gs(l,{withTypes:()=>l});const u=async(h,m,g,x)=>{const S=new AbortController,A=m3(s,S.signal),C=[];try{h.pending.add(S),await Promise.resolve(h.effect(m,Gs({},g,{getOriginalState:x,condition:(P,T)=>A(P,T).then(Boolean),take:A,delay:Z2(S.signal),pause:Cf(S.signal),extra:n,signal:S.signal,fork:h3(S.signal,C),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((P,T,O)=>{P!==S&&(ko(P,i0),O.delete(P))})},cancel:()=>{ko(S,i0),h.pending.delete(S)},throwIfCancelled:()=>{jo(S.signal)}})))}catch(P){P instanceof ip||XE(r,P,{raisedBy:"effect"})}finally{await Promise.all(C),ko(S,f3),h.pending.delete(S)}},p=g3(t);return{middleware:h=>m=>g=>{if(!I2(g))return m(g);if(tT.match(g))return s(g.payload);if(y3.match(g)){p();return}if(nT.match(g))return l(g.payload);let x=h.getState();const S=()=>{if(x===KE)throw new Error(rr(23));return x};let A;try{if(A=m(g),t.size>0){const C=h.getState(),P=Array.from(t.values());for(const T of P){let O=!1;try{O=T.predicate(g,C,x)}catch(k){O=!1,XE(r,k,{raisedBy:"predicate"})}O&&u(T,g,h,S)}}}finally{x=KE}return A},startListening:s,stopListening:l,clearListeners:p}};function rr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var b3={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},rT=sr({name:"chartLayout",initialState:b3,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:x3,setLayout:S3,setChartSize:A3,setScale:E3}=rT.actions,C3=rT.reducer;function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(n),!0).forEach(function(r){P3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P3(e,t,n){return(t=w3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w3(e){var t=O3(e,"string");return typeof t=="symbol"?t:t+""}function O3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pf=Math.PI/180,T3=e=>e*180/Math.PI,It=(e,t,n,r)=>({x:e+Math.cos(-Pf*r)*n,y:t+Math.sin(-Pf*r)*n}),aT=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},_3=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},D3=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=_3({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,p=Math.acos(u);return r>s&&(p=2*Math.PI-p),{radius:l,angle:T3(p),angleInRadian:p}},N3=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},k3=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},j3=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=D3({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:p,endAngle:f}=N3(t),h=s,m;if(p<=f){for(;h>f;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=f}else{for(;h>p;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=p}return m?ZE(ZE({},t),{},{radius:i,angle:k3(h,t)}):null};function iT(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(r){M3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M3(e,t,n){return(t=R3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R3(e){var t=I3(e,"string");return typeof t=="symbol"?t:t+""}function I3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gt(e,t,n){return en(e)||en(t)?n:ca(t)?Io(e,t,n):typeof t=="function"?t(e):n}var L3=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var p=0;p<u;p++){var f=p>0?n[p-1].coordinate:n[u-1].coordinate,h=n[p].coordinate,m=p>=u-1?n[0].coordinate:n[p+1].coordinate,g=void 0;if(Jt(h-f)!==Jt(m-h)){var x=[];if(Jt(m-h)===Jt(i[1]-i[0])){g=m;var S=h+i[1]-i[0];x[0]=Math.min(S,(S+f)/2),x[1]=Math.max(S,(S+f)/2)}else{g=f;var A=m+i[1]-i[0];x[0]=Math.min(h,(A+h)/2),x[1]=Math.max(h,(A+h)/2)}var C=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>C[0]&&e<=C[1]||e>=x[0]&&e<=x[1]){({index:l}=n[p]);break}}else{var P=Math.min(f,m),T=Math.max(f,m);if(e>(P+h)/2&&e<=(T+h)/2){({index:l}=n[p]);break}}}else if(t){for(var O=0;O<u;O++)if(O===0&&e<=(t[O].coordinate+t[O+1].coordinate)/2||O>0&&O<u-1&&e>(t[O].coordinate+t[O-1].coordinate)/2&&e<=(t[O].coordinate+t[O+1].coordinate)/2||O===u-1&&e>(t[O].coordinate+t[O-1].coordinate)/2){({index:l}=t[O]);break}}return l},$3=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&Oe(e[s]))return wr(wr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&Oe(e[l]))return wr(wr({},e),{},{[l]:e[l]+(i||0)})}return e},Yo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",oT=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},sT=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:p,categoricalDomain:f,tickCount:h,ticks:m,niceTicks:g,axisType:x}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=x==="angleAxis"&&s&&s.length>=2?Jt(s[0]-s[1])*2*A:A,m||g){var C=(m||g||[]).map((P,T)=>{var O=r?r.indexOf(P):P;return{coordinate:l(O)+A,value:P,offset:A,index:T}});return C.filter(P=>!ar(P.coordinate))}return p&&f?f.map((P,T)=>({coordinate:l(P)+A,value:P,index:T,offset:A})):l.ticks&&h!=null?l.ticks(h).map((P,T)=>({coordinate:l(P)+A,value:P,offset:A,index:T})):l.domain().map((P,T)=>({coordinate:l(P)+A,value:r?r[P]:P,index:T,offset:A}))},eC=1e-4,B3=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-eC,s=Math.max(r[0],r[1])+eC,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},U3=(e,t)=>{if(!t||t.length!==2||!Oe(t[0])||!Oe(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Oe(e[0])||e[0]<n)&&(i[0]=n),(!Oe(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},z3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=ar(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},G3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=ar(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},H3={sign:z3,expand:vI,none:qs,silhouette:bI,wiggle:xI,positive:G3},q3=(e,t,n)=>{var r=H3[n],i=yI().keys(t).value((s,l)=>+gt(s,l,0)).order(Xy).offset(r);return i(e)};function Y3(e){return e==null?void 0:String(e)}var tC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=gt(s,t.dataKey,t.scale.domain()[l]);return en(u)?null:t.scale(u)-i/2+r},F3=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},V3=e=>{var t=e.flat(2).filter(Oe);return[Math.min(...t),Math.max(...t)]},K3=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],W3=(e,t,n)=>{if(e!=null)return K3(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((p,f)=>{var h=iT(f,t,n),m=V3(h);return[Math.min(p[0],m[0]),Math.max(p[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},nC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=tp(t,h=>h.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var p=i[l],f=i[l-1];s=Math.min((p.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function aC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return wr(wr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function sp(e,t){if(e)return String(e);if(typeof t=="string")return t}function X3(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?j3({x:e,y:t},r):null}var Q3=(e,t,n,r)=>{var i=t.find(f=>f&&f.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return wr(wr(wr({},r),It(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:p}=r;return wr(wr(wr({},r),It(r.cx,r.cy,u,p)),{},{angle:p,radius:u})}return{x:0,y:0}},Z3=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Ya=e=>e.layout.width,Fa=e=>e.layout.height,J3=e=>e.layout.scale,lT=e=>e.layout.margin,lp=J(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),cp=J(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),cT="data-recharts-item-index",uT="data-recharts-item-data-key",Jc=60;function iC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(n),!0).forEach(function(r){e4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e4(e,t,n){return(t=t4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t4(e){var t=n4(e,"string");return typeof t=="symbol"?t:t+""}function n4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r4=e=>e.brush.height;function a4(e){var t=cp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Jc;return n+i}return n},0)}function i4(e){var t=cp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Jc;return n+i}return n},0)}function o4(e){var t=lp(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function s4(e){var t=lp(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Yt=J([Ya,Fa,lT,r4,a4,i4,o4,s4,k2,CL],(e,t,n,r,i,s,l,u,p,f)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},g=zd(zd({},m),h),x=g.bottom;g.bottom+=r,g=$3(g,p,f);var S=e-g.left-g.right,A=t-g.top-g.bottom;return zd(zd({brushBottom:x},g),{},{width:Math.max(S,0),height:Math.max(A,0)})}),l4=J(Yt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),mv=J(Ya,Fa,(e,t)=>({x:0,y:0,width:e,height:t})),c4=E.createContext(null),Nr=()=>E.useContext(c4)!=null,up=e=>e.brush,dp=J([up,Yt,lT],(e,t,n)=>({height:e.height,x:Oe(e.x)?e.x:t.left,y:Oe(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Oe(e.width)?e.width:t.width})),gv=()=>{var e,t=Nr(),n=Pe(l4),r=Pe(dp),i=(e=Pe(up))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},u4={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},dT=()=>{var e;return(e=Pe(Yt))!==null&&e!==void 0?e:u4},yv=()=>Pe(Ya),vv=()=>Pe(Fa),d4=()=>Pe(e=>e.layout.margin),Ve=e=>e.layout.layoutType,bv=()=>Pe(Ve),f4={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},fT=sr({name:"legend",initialState:f4,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=$a(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:oC,setLegendSettings:p4,addLegendPayload:pT,removeLegendPayload:hT}=fT.actions,h4=fT.reducer,m4=["contextPayload"];function s0(){return s0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s0.apply(null,arguments)}function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(r){xv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xv(e,t,n){return(t=g4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g4(e){var t=y4(e,"string");return typeof t=="symbol"?t:t+""}function y4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v4(e,t){if(e==null)return{};var n,r,i=b4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function x4(e){return e.value}function S4(e){var{contextPayload:t}=e,n=v4(e,m4),r=T2(t,e.payloadUniqBy,x4),i=Fs(Fs({},n),{},{payload:r});return E.isValidElement(e.content)?E.cloneElement(e.content,i):typeof e.content=="function"?E.createElement(e.content,i):E.createElement(iv,i)}function A4(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:p}=t,f,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?f={left:((r||0)-s.width)/2}:f=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(p==="middle"?h={top:((i||0)-s.height)/2}:h=p==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Fs(Fs({},f),h)}function E4(e){var t=St();return E.useEffect(()=>{t(p4(e))},[t,e]),null}function C4(e){var t=St();return E.useEffect(()=>(t(oC(e)),()=>{t(oC({width:0,height:0}))}),[t,e]),null}function P4(e){var t=OL(),n=zR(),r=d4(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[p,f]=j2([t]),h=yv(),m=vv();if(h==null||m==null)return null;var g=h-(r.left||0)-(r.right||0),x=fp.getWidthOrHeight(e.layout,s,i,g),S=u?l:Fs(Fs({position:"absolute",width:x?.width||i||"auto",height:x?.height||s||"auto"},A4(l,e,r,h,m,p)),l),A=u??n;if(A==null)return null;var C=E.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:f},E.createElement(E4,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),E.createElement(C4,{width:p.width,height:p.height}),E.createElement(S4,s0({},e,x,{margin:r,chartWidth:h,chartHeight:m,contextPayload:t})));return t2.createPortal(C,A)}class fp extends E.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Oe(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return E.createElement(P4,this.props)}}xv(fp,"displayName","Legend");xv(fp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function l0(){return l0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l0.apply(null,arguments)}function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(r){w4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w4(e,t,n){return(t=O4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O4(e){var t=T4(e,"string");return typeof t=="symbol"?t:t+""}function T4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _4(e){return Array.isArray(e)&&ca(e[0])&&ca(e[1])?e.join(" ~ "):e}var D4=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:p,labelClassName:f,label:h,labelFormatter:m,accessibilityLayer:g=!1}=e,x=()=>{if(s&&s.length){var N={padding:0,margin:0},D=(u?tp(s,u):s).map((j,R)=>{if(j.type==="none")return null;var z=j.formatter||l||_4,{value:W,name:H}=j,q=W,se=H;if(z){var te=z(W,H,j,R,s);if(Array.isArray(te))[q,se]=te;else if(te!=null)q=te;else return null}var ne=Jg({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:ne},ca(se)?E.createElement("span",{className:"recharts-tooltip-item-name"},se):null,ca(se)?E.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,E.createElement("span",{className:"recharts-tooltip-item-value"},q),E.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:N},D)}return null},S=Jg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=Jg({margin:0},i),C=!en(h),P=C?h:"",T=et("recharts-default-tooltip",p),O=et("recharts-tooltip-label",f);C&&m&&s!==void 0&&s!==null&&(P=m(h,s));var k=g?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",l0({className:T,style:S},k),E.createElement("p",{className:O,style:A},E.isValidElement(P)?P:"".concat(P)),x())},xc="recharts-tooltip-wrapper",N4={visibility:"hidden"};function k4(e){var{coordinate:t,translateX:n,translateY:r}=e;return et(xc,{["".concat(xc,"-right")]:Oe(n)&&t&&Oe(t.x)&&n>=t.x,["".concat(xc,"-left")]:Oe(n)&&t&&Oe(t.x)&&n<t.x,["".concat(xc,"-bottom")]:Oe(r)&&t&&Oe(t.y)&&r>=t.y,["".concat(xc,"-top")]:Oe(r)&&t&&Oe(t.y)&&r<t.y})}function cC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:p,viewBoxDimension:f}=e;if(s&&Oe(s[r]))return s[r];var h=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?h:m;var g=p[r];if(g==null)return 0;if(l[r]){var x=h,S=g;return x<S?Math.max(m,g):Math.max(h,g)}if(f==null)return 0;var A=m+u,C=g+f;return A>C?Math.max(h,g):Math.max(m,g)}function j4(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function M4(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:p}=e,f,h,m;return l.height>0&&l.width>0&&n?(h=cC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:p,viewBoxDimension:p.width}),m=cC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:p,viewBoxDimension:p.height}),f=j4({translateX:h,translateY:m,useTranslate3d:u})):f=N4,{cssProperties:f,cssClasses:k4({translateX:h,translateY:m,coordinate:n})}}function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(n),!0).forEach(function(r){c0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c0(e,t,n){return(t=R4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R4(e){var t=I4(e,"string");return typeof t=="symbol"?t:t+""}function I4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class L4 extends E.PureComponent{constructor(){super(...arguments),c0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),c0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:p,offset:f,position:h,reverseDirection:m,useTranslate3d:g,viewBox:x,wrapperStyle:S,lastBoundingBox:A,innerRef:C,hasPortalFromProps:P}=this.props,{cssClasses:T,cssProperties:O}=M4({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:f,position:h,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:g,viewBox:x}),k=P?{}:Gd(Gd({transition:p&&t?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),N=Gd(Gd({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:N,ref:C},s)}}var $4=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),rl={isSsr:$4()},mT=()=>Pe(e=>e.rootProps.accessibilityLayer);function or(e){return Number.isFinite(e)}function Vs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u0.apply(null,arguments)}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(r){B4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B4(e,t,n){return(t=U4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U4(e){var t=z4(e,"string");return typeof t=="symbol"?t:t+""}function z4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pC={curveBasisClosed:oI,curveBasisOpen:sI,curveBasis:iI,curveBumpX:YR,curveBumpY:FR,curveLinearClosed:lI,curveLinear:Jf,curveMonotoneX:cI,curveMonotoneY:uI,curveNatural:dI,curveStep:fI,curveStepAfter:hI,curveStepBefore:pI},Hd=e=>or(e.x)&&or(e.y),Sc=e=>e.x,Ac=e=>e.y,G4=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Wc(e));return(n==="curveMonotone"||n==="curveBump")&&t?pC["".concat(n).concat(t==="vertical"?"Y":"X")]:pC[n]||Jf},H4=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=G4(t,i),u=s?n.filter(Hd):n,p;if(Array.isArray(r)){var f=s?r.filter(m=>Hd(m)):r,h=u.map((m,g)=>fC(fC({},m),{},{base:f[g]}));return i==="vertical"?p=Rd().y(Ac).x1(Sc).x0(m=>m.base.x):p=Rd().x(Sc).y1(Ac).y0(m=>m.base.y),p.defined(Hd).curve(l),p(h)}return i==="vertical"&&Oe(r)?p=Rd().y(Ac).x1(Sc).x0(r):Oe(r)?p=Rd().x(Sc).y1(Ac).y0(r):p=l2().x(Sc).y(Ac),p.defined(Hd).curve(l),p(u)},gT=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?H4(e):r;return E.createElement("path",u0({},qo(e),NR(e),{className:et("recharts-curve",t),d:s===null?void 0:s,ref:i}))},q4=["x","y","top","left","width","height","className"];function d0(){return d0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d0.apply(null,arguments)}function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(n),!0).forEach(function(r){F4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F4(e,t,n){return(t=V4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V4(e){var t=K4(e,"string");return typeof t=="symbol"?t:t+""}function K4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W4(e,t){if(e==null)return{};var n,r,i=X4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function X4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Q4=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),Z4=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,p=W4(e,q4),f=Y4({x:t,y:n,top:r,left:i,width:s,height:l},p);return!Oe(t)||!Oe(n)||!Oe(s)||!Oe(l)||!Oe(r)||!Oe(i)?null:E.createElement("path",d0({},Rt(f,!0),{className:et("recharts-cross",u),d:Q4(t,n,s,l,r,i)}))};function J4(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function e5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(n),!0).forEach(function(r){t5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t5(e,t,n){return(t=n5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n5(e){var t=r5(e,"string");return typeof t=="symbol"?t:t+""}function r5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kr(e,t){var n=e5({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function a5(){}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){i5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i5(e,t,n){return(t=o5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o5(e){var t=s5(e,"string");return typeof t=="symbol"?t:t+""}function s5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l5=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),yT=(e,t,n)=>e.map(r=>"".concat(l5(r)," ").concat(t,"ms ").concat(n)).join(","),c5=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Gc=(e,t)=>Object.keys(t).reduce((n,r)=>yC(yC({},n),{},{[r]:e(r,t[r])}),{});function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(r){u5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u5(e,t,n){return(t=d5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d5(e){var t=f5(e,"string");return typeof t=="symbol"?t:t+""}function f5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wf=(e,t,n)=>e+(t-e)*n,f0=e=>{var{from:t,to:n}=e;return t!==n},vT=(e,t,n)=>{var r=Gc((i,s)=>{if(f0(s)){var[l,u]=e(s.from,s.to,s.velocity);return fn(fn({},s),{},{from:l,velocity:u})}return s},t);return n<1?Gc((i,s)=>f0(s)?fn(fn({},s),{},{velocity:wf(s.velocity,r[i].velocity,n),from:wf(s.from,r[i].from,n)}):s,t):vT(e,r,n-1)};function p5(e,t,n,r,i,s){var l,u=r.reduce((g,x)=>fn(fn({},g),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),p=()=>Gc((g,x)=>x.from,u),f=()=>!Object.values(u).filter(f0).length,h=null,m=g=>{l||(l=g);var x=g-l,S=x/n.dt;u=vT(n,u,S),i(fn(fn(fn({},e),t),p())),l=g,f()||(h=s.setTimeout(m))};return()=>(h=s.setTimeout(m),()=>{h()})}function h5(e,t,n,r,i,s,l){var u=null,p=i.reduce((m,g)=>fn(fn({},m),{},{[g]:[e[g],t[g]]}),{}),f,h=m=>{f||(f=m);var g=(m-f)/r,x=Gc((A,C)=>wf(...C,n(g)),p);if(s(fn(fn(fn({},e),t),x)),g<1)u=l.setTimeout(h);else{var S=Gc((A,C)=>wf(...C,n(1)),p);s(fn(fn(fn({},e),t),S))}};return()=>(u=l.setTimeout(h),()=>{u()})}const m5=(e,t,n,r,i,s)=>{var l=c5(e,t);return n.isStepper===!0?p5(e,t,n,l,i,s):h5(e,t,n,r,l,i,s)};var Of=1e-4,bT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],xT=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),bC=(e,t)=>n=>{var r=bT(e,t);return xT(r,n)},g5=(e,t)=>n=>{var r=bT(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return xT(i,n)},xC=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var p=l[0].split("(");p[0]==="cubic-bezier"&&p[1].split(")")[0].split(",").length===4&&([t,r,n,i]=p[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var f=bC(t,n),h=bC(r,i),m=g5(t,n),g=S=>S>1?1:S<0?0:S,x=S=>{for(var A=S>1?1:S,C=A,P=0;P<8;++P){var T=f(C)-A,O=m(C);if(Math.abs(T-A)<Of||O<Of)return h(C);C=g(C-T/O)}return h(C)};return x.isStepper=!1,x},y5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,p)=>{var f=-(l-u)*n,h=p*r,m=p+(f-h)*i/1e3,g=p*i/1e3+l;return Math.abs(g-u)<Of&&Math.abs(m)<Of?[u,0]:[g,m]};return s.isStepper=!0,s.dt=i,s},v5=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return xC(e);case"spring":return y5();default:if(e.split("(")[0]==="cubic-bezier")return xC(e)}return typeof e=="function"?e:null};function b5(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[p,...f]=u;if(typeof p=="number"){i=e.setTimeout(s.bind(null,f),p);return}s(p),i=e.setTimeout(s.bind(null,f));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class x5{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function S5(){return b5(new x5)}var A5=E.createContext(S5);function E5(e,t){var n=E.useContext(A5);return E.useMemo(()=>t??n(e),[e,t,n])}var C5={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},SC={t:0},ey={t:1};function pp(e){var t=kr(e,C5),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:p,children:f}=t,h=E5(t.animationId,t.animationManager),[m,g]=E.useState(n?SC:ey),x=E.useRef(null);return E.useEffect(()=>{n||g(ey)},[n]),E.useEffect(()=>{if(!n||!r)return a5;var S=m5(SC,ey,v5(s),i,g,h.getTimeoutController()),A=()=>{x.current=S()};return h.start([p,l,A,i,u]),()=>{h.stop(),x.current&&x.current(),u()}},[n,r,i,s,l,p,u,h]),f(m.t)}function hp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(Bc(t)),r=E.useRef(e);return r.current!==e&&(n.current=Bc(t),r.current=e),n.current}function AC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(n),!0).forEach(function(r){P5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P5(e,t,n){return(t=w5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w5(e){var t=O5(e,"string");return typeof t=="symbol"?t:t+""}function O5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tf.apply(null,arguments)}var CC=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,p=r>=0&&n>=0||r<0&&n<0?1:0,f;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,g=4;m<g;m++)h[m]=i[m]>s?s:i[m];f="M".concat(e,",").concat(t+l*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(p,",").concat(e+u*h[0],",").concat(t)),f+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(p,`,
        `).concat(e+n,",").concat(t+l*h[1])),f+="L ".concat(e+n,",").concat(t+r-l*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(p,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),f+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(p,`,
        `).concat(e,",").concat(t+r-l*h[3])),f+="Z"}else if(s>0&&i===+i&&i>0){var x=Math.min(s,i);f="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(p,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(p,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(p,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(p,",").concat(e,",").concat(t+r-l*x," Z")}else f="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},T5={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ST=e=>{var t=kr(e,T5),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var te=n.current.getTotalLength();te&&i(te)}catch{}},[]);var{x:s,y:l,width:u,height:p,radius:f,className:h}=t,{animationEasing:m,animationDuration:g,animationBegin:x,isAnimationActive:S,isUpdateAnimationActive:A}=t,C=E.useRef(u),P=E.useRef(p),T=E.useRef(s),O=E.useRef(l),k=E.useMemo(()=>({x:s,y:l,width:u,height:p,radius:f}),[s,l,u,p,f]),N=hp(k,"rectangle-");if(s!==+s||l!==+l||u!==+u||p!==+p||u===0||p===0)return null;var D=et("recharts-rectangle",h);if(!A)return E.createElement("path",Tf({},Rt(t,!0),{className:D,d:CC(s,l,u,p,f)}));var j=C.current,R=P.current,z=T.current,W=O.current,H="0px ".concat(r===-1?1:r,"px"),q="".concat(r,"px 0px"),se=yT(["strokeDasharray"],g,typeof m=="string"?m:void 0);return E.createElement(pp,{animationId:N,key:N,canBegin:r>0,duration:g,easing:m,isActive:A,begin:x},te=>{var ne=pn(j,u,te),L=pn(R,p,te),ee=pn(z,s,te),ce=pn(W,l,te);n.current&&(C.current=ne,P.current=L,T.current=ee,O.current=ce);var ye;return S?te>0?ye={transition:se,strokeDasharray:q}:ye={strokeDasharray:H}:ye={strokeDasharray:q},E.createElement("path",Tf({},Rt(t,!0),{className:D,d:CC(ee,ce,ne,L,f),ref:n,style:EC(EC({},ye),t.style)}))})};function AT(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=It(t,n,r,i),u=It(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function p0(){return p0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p0.apply(null,arguments)}var _5=(e,t)=>{var n=Jt(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},qd=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:p}=e,f=u*(l?1:-1)+r,h=Math.asin(u/f)/Pf,m=p?i:i+s*h,g=It(t,n,f,m),x=It(t,n,r,m),S=p?i-s*h:i,A=It(t,n,f*Math.cos(h*Pf),S);return{center:g,circleTangency:x,lineTangency:A,theta:h}},ET=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=_5(s,l),p=s+u,f=It(t,n,i,s),h=It(t,n,i,p),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>p),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var g=It(t,n,r,s),x=It(t,n,r,p);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=p),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},D5=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:p,endAngle:f}=e,h=Jt(f-p),{circleTangency:m,lineTangency:g,theta:x}=qd({cx:t,cy:n,radius:i,angle:p,sign:h,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:C}=qd({cx:t,cy:n,radius:i,angle:f,sign:-h,cornerRadius:s,cornerIsExternal:u}),P=u?Math.abs(p-f):Math.abs(p-f)-x-C;if(P<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):ET({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:p,endAngle:f});var T="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:O,lineTangency:k,theta:N}=qd({cx:t,cy:n,radius:r,angle:p,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:j,theta:R}=qd({cx:t,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),z=u?Math.abs(p-f):Math.abs(p-f)-N-R;if(z<0&&s===0)return"".concat(T,"L").concat(t,",").concat(n,"Z");T+="L".concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(z>180),",").concat(+(h>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,"Z")}else T+="L".concat(t,",").concat(n,"Z");return T},N5={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},CT=e=>{var t=kr(e,N5),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:p,startAngle:f,endAngle:h,className:m}=t;if(s<i||f===h)return null;var g=et("recharts-sector",m),x=s-i,S=Sn(l,x,0,!0),A;return S>0&&Math.abs(f-h)<360?A=D5({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,x/2),forceCornerRadius:u,cornerIsExternal:p,startAngle:f,endAngle:h}):A=ET({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:f,endAngle:h}),E.createElement("path",p0({},Rt(t,!0),{className:g,d:A}))};function k5(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:p,innerRadius:f,outerRadius:h,angle:m}=t,g=It(u,p,f,m),x=It(u,p,h,m);r=g.x,i=g.y,s=x.x,l=x.y}else return AT(t);return[{x:r,y:i},{x:s,y:l}]}var ty={},ny={},ry={},PC;function j5(){return PC||(PC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D2();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(ry)),ry}var wC;function M5(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j5();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(ny)),ny}var OC;function R5(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N2(),n=M5();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),p=new Array(u);for(let f=0;f<u;f++)p[f]=i,i+=l;return p}e.range=r})(ty)),ty}var ay,TC;function I5(){return TC||(TC=1,ay=R5().range),ay}var L5=I5();const PT=Fr(L5);function Ni(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $5(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sv(e){let t,n,r;e.length!==2?(t=Ni,n=(u,p)=>Ni(e(u),p),r=(u,p)=>e(u)-p):(t=e===Ni||e===$5?e:B5,n=e,r=e);function i(u,p,f=0,h=u.length){if(f<h){if(t(p,p)!==0)return h;do{const m=f+h>>>1;n(u[m],p)<0?f=m+1:h=m}while(f<h)}return f}function s(u,p,f=0,h=u.length){if(f<h){if(t(p,p)!==0)return h;do{const m=f+h>>>1;n(u[m],p)<=0?f=m+1:h=m}while(f<h)}return f}function l(u,p,f=0,h=u.length){const m=i(u,p,f,h-1);return m>f&&r(u[m-1],p)>-r(u[m],p)?m-1:m}return{left:i,center:l,right:s}}function B5(){return 0}function wT(e){return e===null?NaN:+e}function*U5(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const z5=Sv(Ni),eu=z5.right;Sv(wT).center;class _C extends Map{constructor(t,n=q5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(DC(this,t))}has(t){return super.has(DC(this,t))}set(t,n){return super.set(G5(this,t),n)}delete(t){return super.delete(H5(this,t))}}function DC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function G5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function H5({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function q5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Y5(e=Ni){if(e===Ni)return OT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function OT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const F5=Math.sqrt(50),V5=Math.sqrt(10),K5=Math.sqrt(2);function _f(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=F5?10:s>=V5?5:s>=K5?2:1;let u,p,f;return i<0?(f=Math.pow(10,-i)/l,u=Math.round(e*f),p=Math.round(t*f),u/f<e&&++u,p/f>t&&--p,f=-f):(f=Math.pow(10,i)*l,u=Math.round(e/f),p=Math.round(t/f),u*f<e&&++u,p*f>t&&--p),p<u&&.5<=n&&n<2?_f(e,t,n*2):[u,p,f]}function h0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?_f(t,e,n):_f(e,t,n);if(!(s>=i))return[];const u=s-i+1,p=new Array(u);if(r)if(l<0)for(let f=0;f<u;++f)p[f]=(s-f)/-l;else for(let f=0;f<u;++f)p[f]=(s-f)*l;else if(l<0)for(let f=0;f<u;++f)p[f]=(i+f)/-l;else for(let f=0;f<u;++f)p[f]=(i+f)*l;return p}function m0(e,t,n){return t=+t,e=+e,n=+n,_f(e,t,n)[2]}function g0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?m0(t,e,n):m0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function NC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function kC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function TT(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?OT:Y5(i);r>n;){if(r-n>600){const p=r-n+1,f=t-n+1,h=Math.log(p),m=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*m*(p-m)/p)*(f-p/2<0?-1:1),x=Math.max(n,Math.floor(t-f*m/p+g)),S=Math.min(r,Math.floor(t+(p-f)*m/p+g));TT(e,t,x,S,i)}const s=e[t];let l=n,u=r;for(Ec(e,n,t),i(e[r],s)>0&&Ec(e,n,r);l<u;){for(Ec(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Ec(e,n,u):(++u,Ec(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Ec(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function W5(e,t,n){if(e=Float64Array.from(U5(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return kC(e);if(t>=1)return NC(e);var r,i=(r-1)*t,s=Math.floor(i),l=NC(TT(e,s).subarray(0,s+1)),u=kC(e.subarray(s+1));return l+(u-l)*(i-s)}}function X5(e,t,n=wT){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function Q5(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function jr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Va(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const y0=Symbol("implicit");function Av(){var e=new _C,t=[],n=[],r=y0;function i(s){let l=e.get(s);if(l===void 0){if(r!==y0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new _C;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Av(t,n).unknown(r)},jr.apply(i,arguments),i}function Ev(){var e=Av().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,p=0,f=0,h=.5;delete e.unknown;function m(){var g=t().length,x=i<r,S=x?i:r,A=x?r:i;s=(A-S)/Math.max(1,g-p+f*2),u&&(s=Math.floor(s)),S+=(A-S-s*(g-p))*h,l=s*(1-p),u&&(S=Math.round(S),l=Math.round(l));var C=Q5(g).map(function(P){return S+s*P});return n(x?C.reverse():C)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(g){return arguments.length?(u=!!g,m()):u},e.padding=function(g){return arguments.length?(p=Math.min(1,f=+g),m()):p},e.paddingInner=function(g){return arguments.length?(p=Math.min(1,g),m()):p},e.paddingOuter=function(g){return arguments.length?(f=+g,m()):f},e.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),m()):h},e.copy=function(){return Ev(t(),[r,i]).round(u).paddingInner(p).paddingOuter(f).align(h)},jr.apply(m(),arguments)}function _T(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return _T(t())},e}function Z5(){return _T(Ev.apply(null,arguments).paddingInner(1))}function Cv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function DT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tu(){}var Hc=.7,Df=1/Hc,Hs="\\s*([+-]?\\d+)\\s*",qc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",la="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",J5=/^#([0-9a-f]{3,8})$/,e$=new RegExp(`^rgb\\(${Hs},${Hs},${Hs}\\)$`),t$=new RegExp(`^rgb\\(${la},${la},${la}\\)$`),n$=new RegExp(`^rgba\\(${Hs},${Hs},${Hs},${qc}\\)$`),r$=new RegExp(`^rgba\\(${la},${la},${la},${qc}\\)$`),a$=new RegExp(`^hsl\\(${qc},${la},${la}\\)$`),i$=new RegExp(`^hsla\\(${qc},${la},${la},${qc}\\)$`),jC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cv(tu,Yc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:MC,formatHex:MC,formatHex8:o$,formatHsl:s$,formatRgb:RC,toString:RC});function MC(){return this.rgb().formatHex()}function o$(){return this.rgb().formatHex8()}function s$(){return NT(this).formatHsl()}function RC(){return this.rgb().formatRgb()}function Yc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=J5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?IC(t):n===3?new Un(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=e$.exec(e))?new Un(t[1],t[2],t[3],1):(t=t$.exec(e))?new Un(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=n$.exec(e))?Yd(t[1],t[2],t[3],t[4]):(t=r$.exec(e))?Yd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=a$.exec(e))?BC(t[1],t[2]/100,t[3]/100,1):(t=i$.exec(e))?BC(t[1],t[2]/100,t[3]/100,t[4]):jC.hasOwnProperty(e)?IC(jC[e]):e==="transparent"?new Un(NaN,NaN,NaN,0):null}function IC(e){return new Un(e>>16&255,e>>8&255,e&255,1)}function Yd(e,t,n,r){return r<=0&&(e=t=n=NaN),new Un(e,t,n,r)}function l$(e){return e instanceof tu||(e=Yc(e)),e?(e=e.rgb(),new Un(e.r,e.g,e.b,e.opacity)):new Un}function v0(e,t,n,r){return arguments.length===1?l$(e):new Un(e,t,n,r??1)}function Un(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Cv(Un,v0,DT(tu,{brighter(e){return e=e==null?Df:Math.pow(Df,e),new Un(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hc:Math.pow(Hc,e),new Un(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Un(Mo(this.r),Mo(this.g),Mo(this.b),Nf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LC,formatHex:LC,formatHex8:c$,formatRgb:$C,toString:$C}));function LC(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}`}function c$(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}${_o((isNaN(this.opacity)?1:this.opacity)*255)}`}function $C(){const e=Nf(this.opacity);return`${e===1?"rgb(":"rgba("}${Mo(this.r)}, ${Mo(this.g)}, ${Mo(this.b)}${e===1?")":`, ${e})`}`}function Nf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _o(e){return e=Mo(e),(e<16?"0":"")+e.toString(16)}function BC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Yr(e,t,n,r)}function NT(e){if(e instanceof Yr)return new Yr(e.h,e.s,e.l,e.opacity);if(e instanceof tu||(e=Yc(e)),!e)return new Yr;if(e instanceof Yr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,p=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=p<.5?s+i:2-s-i,l*=60):u=p>0&&p<1?0:l,new Yr(l,u,p,e.opacity)}function u$(e,t,n,r){return arguments.length===1?NT(e):new Yr(e,t,n,r??1)}function Yr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Cv(Yr,u$,DT(tu,{brighter(e){return e=e==null?Df:Math.pow(Df,e),new Yr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hc:Math.pow(Hc,e),new Yr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Un(iy(e>=240?e-240:e+120,i,r),iy(e,i,r),iy(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Yr(UC(this.h),Fd(this.s),Fd(this.l),Nf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Nf(this.opacity);return`${e===1?"hsl(":"hsla("}${UC(this.h)}, ${Fd(this.s)*100}%, ${Fd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function UC(e){return e=(e||0)%360,e<0?e+360:e}function Fd(e){return Math.max(0,Math.min(1,e||0))}function iy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Pv=e=>()=>e;function d$(e,t){return function(n){return e+n*t}}function f$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function p$(e){return(e=+e)==1?kT:function(t,n){return n-t?f$(t,n,e):Pv(isNaN(t)?n:t)}}function kT(e,t){var n=t-e;return n?d$(e,n):Pv(isNaN(e)?t:e)}const zC=(function e(t){var n=p$(t);function r(i,s){var l=n((i=v0(i)).r,(s=v0(s)).r),u=n(i.g,s.g),p=n(i.b,s.b),f=kT(i.opacity,s.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=p(h),i.opacity=f(h),i+""}}return r.gamma=e,r})(1);function h$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function m$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function g$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=al(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function y$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function v$(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=al(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var b0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oy=new RegExp(b0.source,"g");function b$(e){return function(){return e}}function x$(e){return function(t){return e(t)+""}}function S$(e,t){var n=b0.lastIndex=oy.lastIndex=0,r,i,s,l=-1,u=[],p=[];for(e=e+"",t=t+"";(r=b0.exec(e))&&(i=oy.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,p.push({i:l,x:kf(r,i)})),n=oy.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?p[0]?x$(p[0].x):b$(t):(t=p.length,function(f){for(var h=0,m;h<t;++h)u[(m=p[h]).i]=m.x(f);return u.join("")})}function al(e,t){var n=typeof t,r;return t==null||n==="boolean"?Pv(t):(n==="number"?kf:n==="string"?(r=Yc(t))?(t=r,zC):S$:t instanceof Yc?zC:t instanceof Date?y$:m$(t)?h$:Array.isArray(t)?g$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?v$:kf)(e,t)}function wv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function A$(e,t){t===void 0&&(t=e,e=al);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function E$(e){return function(){return e}}function jf(e){return+e}var GC=[0,1];function _n(e){return e}function x0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:E$(isNaN(t)?NaN:.5)}function C$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function P$(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=x0(i,r),s=n(l,s)):(r=x0(r,i),s=n(s,l)),function(u){return s(r(u))}}function w$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=x0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var p=eu(e,u,1,r)-1;return s[p](i[p](u))}}function nu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mp(){var e=GC,t=GC,n=al,r,i,s,l=_n,u,p,f;function h(){var g=Math.min(e.length,t.length);return l!==_n&&(l=C$(e[0],e[g-1])),u=g>2?w$:P$,p=f=null,m}function m(g){return g==null||isNaN(g=+g)?s:(p||(p=u(e.map(r),t,n)))(r(l(g)))}return m.invert=function(g){return l(i((f||(f=u(t,e.map(r),kf)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,jf),h()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),h()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),n=wv,h()},m.clamp=function(g){return arguments.length?(l=g?!0:_n,h()):l!==_n},m.interpolate=function(g){return arguments.length?(n=g,h()):n},m.unknown=function(g){return arguments.length?(s=g,m):s},function(g,x){return r=g,i=x,h()}}function Ov(){return mp()(_n,_n)}function O$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Mf(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ks(e){return e=Mf(Math.abs(e)),e?e[1]:NaN}function T$(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],p=0;i>0&&u>0&&(p+u+1>r&&(u=Math.max(1,r-p)),s.push(n.substring(i-=u,i+u)),!((p+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function _$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var D$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fc(e){if(!(t=D$.exec(e)))throw new Error("invalid format: "+e);var t;return new Tv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fc.prototype=Tv.prototype;function Tv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Tv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function N$(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var jT;function k$(e,t){var n=Mf(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(jT=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Mf(e,Math.max(0,t+s-1))[0]}function HC(e,t){var n=Mf(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const qC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:O$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>HC(e*100,t),r:HC,s:k$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YC(e){return e}var FC=Array.prototype.map,VC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function j$(e){var t=e.grouping===void 0||e.thousands===void 0?YC:T$(FC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?YC:_$(FC.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function f(m){m=Fc(m);var g=m.fill,x=m.align,S=m.sign,A=m.symbol,C=m.zero,P=m.width,T=m.comma,O=m.precision,k=m.trim,N=m.type;N==="n"?(T=!0,N="g"):qC[N]||(O===void 0&&(O=12),k=!0,N="g"),(C||g==="0"&&x==="=")&&(C=!0,g="0",x="=");var D=A==="$"?n:A==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",j=A==="$"?r:/[%p]/.test(N)?l:"",R=qC[N],z=/[defgprs%]/.test(N);O=O===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function W(H){var q=D,se=j,te,ne,L;if(N==="c")se=R(H)+se,H="";else{H=+H;var ee=H<0||1/H<0;if(H=isNaN(H)?p:R(Math.abs(H),O),k&&(H=N$(H)),ee&&+H==0&&S!=="+"&&(ee=!1),q=(ee?S==="("?S:u:S==="-"||S==="("?"":S)+q,se=(N==="s"?VC[8+jT/3]:"")+se+(ee&&S==="("?")":""),z){for(te=-1,ne=H.length;++te<ne;)if(L=H.charCodeAt(te),48>L||L>57){se=(L===46?i+H.slice(te+1):H.slice(te))+se,H=H.slice(0,te);break}}}T&&!C&&(H=t(H,1/0));var ce=q.length+H.length+se.length,ye=ce<P?new Array(P-ce+1).join(g):"";switch(T&&C&&(H=t(ye+H,ye.length?P-se.length:1/0),ye=""),x){case"<":H=q+H+se+ye;break;case"=":H=q+ye+H+se;break;case"^":H=ye.slice(0,ce=ye.length>>1)+q+H+se+ye.slice(ce);break;default:H=ye+q+H+se;break}return s(H)}return W.toString=function(){return m+""},W}function h(m,g){var x=f((m=Fc(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(Ks(g)/3)))*3,A=Math.pow(10,-S),C=VC[8+S/3];return function(P){return x(A*P)+C}}return{format:f,formatPrefix:h}}var Vd,_v,MT;M$({thousands:",",grouping:[3],currency:["$",""]});function M$(e){return Vd=j$(e),_v=Vd.format,MT=Vd.formatPrefix,Vd}function R$(e){return Math.max(0,-Ks(Math.abs(e)))}function I$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ks(t)/3)))*3-Ks(Math.abs(e)))}function L$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ks(t)-Ks(e))+1}function RT(e,t,n,r){var i=g0(e,t,n),s;switch(r=Fc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=I$(i,l))&&(r.precision=s),MT(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=L$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=R$(i))&&(r.precision=s-(r.type==="%")*2);break}}return _v(r)}function Ii(e){var t=e.domain;return e.ticks=function(n){var r=t();return h0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return RT(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],p,f,h=10;for(u<l&&(f=l,l=u,u=f,f=i,i=s,s=f);h-- >0;){if(f=m0(l,u,n),f===p)return r[i]=l,r[s]=u,t(r);if(f>0)l=Math.floor(l/f)*f,u=Math.ceil(u/f)*f;else if(f<0)l=Math.ceil(l*f)/f,u=Math.floor(u*f)/f;else break;p=f}return e},e}function IT(){var e=Ov();return e.copy=function(){return nu(e,IT())},jr.apply(e,arguments),Ii(e)}function LT(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,jf),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return LT(e).unknown(t)},e=arguments.length?Array.from(e,jf):[0,1],Ii(n)}function $T(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function KC(e){return Math.log(e)}function WC(e){return Math.exp(e)}function $$(e){return-Math.log(-e)}function B$(e){return-Math.exp(-e)}function U$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function z$(e){return e===10?U$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function G$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function XC(e){return(t,n)=>-e(-t,n)}function Dv(e){const t=e(KC,WC),n=t.domain;let r=10,i,s;function l(){return i=G$(r),s=z$(r),n()[0]<0?(i=XC(i),s=XC(s),e($$,B$)):e(KC,WC),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const p=n();let f=p[0],h=p[p.length-1];const m=h<f;m&&([f,h]=[h,f]);let g=i(f),x=i(h),S,A;const C=u==null?10:+u;let P=[];if(!(r%1)&&x-g<C){if(g=Math.floor(g),x=Math.ceil(x),f>0){for(;g<=x;++g)for(S=1;S<r;++S)if(A=g<0?S/s(-g):S*s(g),!(A<f)){if(A>h)break;P.push(A)}}else for(;g<=x;++g)for(S=r-1;S>=1;--S)if(A=g>0?S/s(-g):S*s(g),!(A<f)){if(A>h)break;P.push(A)}P.length*2<C&&(P=h0(f,h,C))}else P=h0(g,x,Math.min(x-g,C)).map(s);return m?P.reverse():P},t.tickFormat=(u,p)=>{if(u==null&&(u=10),p==null&&(p=r===10?"s":","),typeof p!="function"&&(!(r%1)&&(p=Fc(p)).precision==null&&(p.trim=!0),p=_v(p)),u===1/0)return p;const f=Math.max(1,r*u/t.ticks().length);return h=>{let m=h/s(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=f?p(h):""}},t.nice=()=>n($T(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function BT(){const e=Dv(mp()).domain([1,10]);return e.copy=()=>nu(e,BT()).base(e.base()),jr.apply(e,arguments),e}function QC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ZC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Nv(e){var t=1,n=e(QC(t),ZC(t));return n.constant=function(r){return arguments.length?e(QC(t=+r),ZC(t)):t},Ii(n)}function UT(){var e=Nv(mp());return e.copy=function(){return nu(e,UT()).constant(e.constant())},jr.apply(e,arguments)}function JC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function H$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function q$(e){return e<0?-e*e:e*e}function kv(e){var t=e(_n,_n),n=1;function r(){return n===1?e(_n,_n):n===.5?e(H$,q$):e(JC(n),JC(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ii(t)}function jv(){var e=kv(mp());return e.copy=function(){return nu(e,jv()).exponent(e.exponent())},jr.apply(e,arguments),e}function Y$(){return jv.apply(null,arguments).exponent(.5)}function eP(e){return Math.sign(e)*e*e}function F$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function zT(){var e=Ov(),t=[0,1],n=!1,r;function i(s){var l=F$(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(eP(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,jf)).map(eP)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return zT(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},jr.apply(i,arguments),Ii(i)}function GT(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=X5(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[eu(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ni),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return GT().domain(e).range(t).unknown(r)},jr.apply(s,arguments)}function HT(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(p){return p!=null&&p<=p?i[eu(r,p,0,n)]:s}function u(){var p=-1;for(r=new Array(n);++p<n;)r[p]=((p+1)*t-(p-n)*e)/(n+1);return l}return l.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,u()):[e,t]},l.range=function(p){return arguments.length?(n=(i=Array.from(p)).length-1,u()):i.slice()},l.invertExtent=function(p){var f=i.indexOf(p);return f<0?[NaN,NaN]:f<1?[e,r[0]]:f>=n?[r[n-1],t]:[r[f-1],r[f]]},l.unknown=function(p){return arguments.length&&(s=p),l},l.thresholds=function(){return r.slice()},l.copy=function(){return HT().domain([e,t]).range(i).unknown(s)},jr.apply(Ii(l),arguments)}function qT(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[eu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return qT().domain(e).range(t).unknown(n)},jr.apply(i,arguments)}const sy=new Date,ly=new Date;function Ft(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const p=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return p;let f;do p.push(f=new Date(+s)),t(s,u),e(s);while(f<s&&s<l);return p},i.filter=s=>Ft(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(sy.setTime(+s),ly.setTime(+l),e(sy),e(ly),Math.floor(n(sy,ly))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const Rf=Ft(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Rf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ft(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Rf);Rf.range;const Ia=1e3,Or=Ia*60,La=Or*60,za=La*24,Mv=za*7,tP=za*30,cy=za*365,Do=Ft(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ia)},(e,t)=>(t-e)/Ia,e=>e.getUTCSeconds());Do.range;const Rv=Ft(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ia)},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getMinutes());Rv.range;const Iv=Ft(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getUTCMinutes());Iv.range;const Lv=Ft(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ia-e.getMinutes()*Or)},(e,t)=>{e.setTime(+e+t*La)},(e,t)=>(t-e)/La,e=>e.getHours());Lv.range;const $v=Ft(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*La)},(e,t)=>(t-e)/La,e=>e.getUTCHours());$v.range;const ru=Ft(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Or)/za,e=>e.getDate()-1);ru.range;const gp=Ft(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/za,e=>e.getUTCDate()-1);gp.range;const YT=Ft(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/za,e=>Math.floor(e/za));YT.range;function Fo(e){return Ft(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Or)/Mv)}const yp=Fo(0),If=Fo(1),V$=Fo(2),K$=Fo(3),Ws=Fo(4),W$=Fo(5),X$=Fo(6);yp.range;If.range;V$.range;K$.range;Ws.range;W$.range;X$.range;function Vo(e){return Ft(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Mv)}const vp=Vo(0),Lf=Vo(1),Q$=Vo(2),Z$=Vo(3),Xs=Vo(4),J$=Vo(5),e8=Vo(6);vp.range;Lf.range;Q$.range;Z$.range;Xs.range;J$.range;e8.range;const Bv=Ft(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Bv.range;const Uv=Ft(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Uv.range;const Ga=Ft(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ga.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ft(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ga.range;const Ha=Ft(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ft(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ha.range;function FT(e,t,n,r,i,s){const l=[[Do,1,Ia],[Do,5,5*Ia],[Do,15,15*Ia],[Do,30,30*Ia],[s,1,Or],[s,5,5*Or],[s,15,15*Or],[s,30,30*Or],[i,1,La],[i,3,3*La],[i,6,6*La],[i,12,12*La],[r,1,za],[r,2,2*za],[n,1,Mv],[t,1,tP],[t,3,3*tP],[e,1,cy]];function u(f,h,m){const g=h<f;g&&([f,h]=[h,f]);const x=m&&typeof m.range=="function"?m:p(f,h,m),S=x?x.range(f,+h+1):[];return g?S.reverse():S}function p(f,h,m){const g=Math.abs(h-f)/m,x=Sv(([,,C])=>C).right(l,g);if(x===l.length)return e.every(g0(f/cy,h/cy,m));if(x===0)return Rf.every(Math.max(g0(f,h,m),1));const[S,A]=l[g/l[x-1][2]<l[x][2]/g?x-1:x];return S.every(A)}return[u,p]}const[t8,n8]=FT(Ha,Uv,vp,YT,$v,Iv),[r8,a8]=FT(Ga,Bv,yp,ru,Lv,Rv);function uy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function i8(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,p=e.shortMonths,f=Pc(i),h=wc(i),m=Pc(s),g=wc(s),x=Pc(l),S=wc(l),A=Pc(u),C=wc(u),P=Pc(p),T=wc(p),O={a:ee,A:ce,b:ye,B:M,c:null,d:sP,e:sP,f:T8,g:$8,G:U8,H:P8,I:w8,j:O8,L:VT,m:_8,M:D8,p:F,q:V,Q:uP,s:dP,S:N8,u:k8,U:j8,V:M8,w:R8,W:I8,x:null,X:null,y:L8,Y:B8,Z:z8,"%":cP},k={a:ue,A:ge,b:U,B:re,c:null,d:lP,e:lP,f:Y8,g:tB,G:rB,H:G8,I:H8,j:q8,L:WT,m:F8,M:V8,p:ve,q:pe,Q:uP,s:dP,S:K8,u:W8,U:X8,V:Q8,w:Z8,W:J8,x:null,X:null,y:eB,Y:nB,Z:aB,"%":cP},N={a:W,A:H,b:q,B:se,c:te,d:iP,e:iP,f:S8,g:aP,G:rP,H:oP,I:oP,j:y8,L:x8,m:g8,M:v8,p:z,q:m8,Q:E8,s:C8,S:b8,u:u8,U:d8,V:f8,w:c8,W:p8,x:ne,X:L,y:aP,Y:rP,Z:h8,"%":A8};O.x=D(n,O),O.X=D(r,O),O.c=D(t,O),k.x=D(n,k),k.X=D(r,k),k.c=D(t,k);function D(ie,de){return function(be){var fe=[],tt=-1,ze=0,bt=ie.length,At,ft,lr;for(be instanceof Date||(be=new Date(+be));++tt<bt;)ie.charCodeAt(tt)===37&&(fe.push(ie.slice(ze,tt)),(ft=nP[At=ie.charAt(++tt)])!=null?At=ie.charAt(++tt):ft=At==="e"?" ":"0",(lr=de[At])&&(At=lr(be,ft)),fe.push(At),ze=tt+1);return fe.push(ie.slice(ze,tt)),fe.join("")}}function j(ie,de){return function(be){var fe=Cc(1900,void 0,1),tt=R(fe,ie,be+="",0),ze,bt;if(tt!=be.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(de&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(ze=dy(Cc(fe.y,0,1)),bt=ze.getUTCDay(),ze=bt>4||bt===0?Lf.ceil(ze):Lf(ze),ze=gp.offset(ze,(fe.V-1)*7),fe.y=ze.getUTCFullYear(),fe.m=ze.getUTCMonth(),fe.d=ze.getUTCDate()+(fe.w+6)%7):(ze=uy(Cc(fe.y,0,1)),bt=ze.getDay(),ze=bt>4||bt===0?If.ceil(ze):If(ze),ze=ru.offset(ze,(fe.V-1)*7),fe.y=ze.getFullYear(),fe.m=ze.getMonth(),fe.d=ze.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),bt="Z"in fe?dy(Cc(fe.y,0,1)).getUTCDay():uy(Cc(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(bt+5)%7:fe.w+fe.U*7-(bt+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,dy(fe)):uy(fe)}}function R(ie,de,be,fe){for(var tt=0,ze=de.length,bt=be.length,At,ft;tt<ze;){if(fe>=bt)return-1;if(At=de.charCodeAt(tt++),At===37){if(At=de.charAt(tt++),ft=N[At in nP?de.charAt(tt++):At],!ft||(fe=ft(ie,be,fe))<0)return-1}else if(At!=be.charCodeAt(fe++))return-1}return fe}function z(ie,de,be){var fe=f.exec(de.slice(be));return fe?(ie.p=h.get(fe[0].toLowerCase()),be+fe[0].length):-1}function W(ie,de,be){var fe=x.exec(de.slice(be));return fe?(ie.w=S.get(fe[0].toLowerCase()),be+fe[0].length):-1}function H(ie,de,be){var fe=m.exec(de.slice(be));return fe?(ie.w=g.get(fe[0].toLowerCase()),be+fe[0].length):-1}function q(ie,de,be){var fe=P.exec(de.slice(be));return fe?(ie.m=T.get(fe[0].toLowerCase()),be+fe[0].length):-1}function se(ie,de,be){var fe=A.exec(de.slice(be));return fe?(ie.m=C.get(fe[0].toLowerCase()),be+fe[0].length):-1}function te(ie,de,be){return R(ie,t,de,be)}function ne(ie,de,be){return R(ie,n,de,be)}function L(ie,de,be){return R(ie,r,de,be)}function ee(ie){return l[ie.getDay()]}function ce(ie){return s[ie.getDay()]}function ye(ie){return p[ie.getMonth()]}function M(ie){return u[ie.getMonth()]}function F(ie){return i[+(ie.getHours()>=12)]}function V(ie){return 1+~~(ie.getMonth()/3)}function ue(ie){return l[ie.getUTCDay()]}function ge(ie){return s[ie.getUTCDay()]}function U(ie){return p[ie.getUTCMonth()]}function re(ie){return u[ie.getUTCMonth()]}function ve(ie){return i[+(ie.getUTCHours()>=12)]}function pe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var de=D(ie+="",O);return de.toString=function(){return ie},de},parse:function(ie){var de=j(ie+="",!1);return de.toString=function(){return ie},de},utcFormat:function(ie){var de=D(ie+="",k);return de.toString=function(){return ie},de},utcParse:function(ie){var de=j(ie+="",!0);return de.toString=function(){return ie},de}}}var nP={"-":"",_:" ",0:"0"},tn=/^\s*\d+/,o8=/^%/,s8=/[\\^$*+?|[\]().{}]/g;function Fe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function l8(e){return e.replace(s8,"\\$&")}function Pc(e){return new RegExp("^(?:"+e.map(l8).join("|")+")","i")}function wc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function c8(e,t,n){var r=tn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function u8(e,t,n){var r=tn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function d8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function f8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function p8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function rP(e,t,n){var r=tn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function aP(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function h8(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function m8(e,t,n){var r=tn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function g8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function iP(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function y8(e,t,n){var r=tn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function oP(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function v8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function b8(e,t,n){var r=tn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function x8(e,t,n){var r=tn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S8(e,t,n){var r=tn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function A8(e,t,n){var r=o8.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function E8(e,t,n){var r=tn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function C8(e,t,n){var r=tn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function sP(e,t){return Fe(e.getDate(),t,2)}function P8(e,t){return Fe(e.getHours(),t,2)}function w8(e,t){return Fe(e.getHours()%12||12,t,2)}function O8(e,t){return Fe(1+ru.count(Ga(e),e),t,3)}function VT(e,t){return Fe(e.getMilliseconds(),t,3)}function T8(e,t){return VT(e,t)+"000"}function _8(e,t){return Fe(e.getMonth()+1,t,2)}function D8(e,t){return Fe(e.getMinutes(),t,2)}function N8(e,t){return Fe(e.getSeconds(),t,2)}function k8(e){var t=e.getDay();return t===0?7:t}function j8(e,t){return Fe(yp.count(Ga(e)-1,e),t,2)}function KT(e){var t=e.getDay();return t>=4||t===0?Ws(e):Ws.ceil(e)}function M8(e,t){return e=KT(e),Fe(Ws.count(Ga(e),e)+(Ga(e).getDay()===4),t,2)}function R8(e){return e.getDay()}function I8(e,t){return Fe(If.count(Ga(e)-1,e),t,2)}function L8(e,t){return Fe(e.getFullYear()%100,t,2)}function $8(e,t){return e=KT(e),Fe(e.getFullYear()%100,t,2)}function B8(e,t){return Fe(e.getFullYear()%1e4,t,4)}function U8(e,t){var n=e.getDay();return e=n>=4||n===0?Ws(e):Ws.ceil(e),Fe(e.getFullYear()%1e4,t,4)}function z8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Fe(t/60|0,"0",2)+Fe(t%60,"0",2)}function lP(e,t){return Fe(e.getUTCDate(),t,2)}function G8(e,t){return Fe(e.getUTCHours(),t,2)}function H8(e,t){return Fe(e.getUTCHours()%12||12,t,2)}function q8(e,t){return Fe(1+gp.count(Ha(e),e),t,3)}function WT(e,t){return Fe(e.getUTCMilliseconds(),t,3)}function Y8(e,t){return WT(e,t)+"000"}function F8(e,t){return Fe(e.getUTCMonth()+1,t,2)}function V8(e,t){return Fe(e.getUTCMinutes(),t,2)}function K8(e,t){return Fe(e.getUTCSeconds(),t,2)}function W8(e){var t=e.getUTCDay();return t===0?7:t}function X8(e,t){return Fe(vp.count(Ha(e)-1,e),t,2)}function XT(e){var t=e.getUTCDay();return t>=4||t===0?Xs(e):Xs.ceil(e)}function Q8(e,t){return e=XT(e),Fe(Xs.count(Ha(e),e)+(Ha(e).getUTCDay()===4),t,2)}function Z8(e){return e.getUTCDay()}function J8(e,t){return Fe(Lf.count(Ha(e)-1,e),t,2)}function eB(e,t){return Fe(e.getUTCFullYear()%100,t,2)}function tB(e,t){return e=XT(e),Fe(e.getUTCFullYear()%100,t,2)}function nB(e,t){return Fe(e.getUTCFullYear()%1e4,t,4)}function rB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Xs(e):Xs.ceil(e),Fe(e.getUTCFullYear()%1e4,t,4)}function aB(){return"+0000"}function cP(){return"%"}function uP(e){return+e}function dP(e){return Math.floor(+e/1e3)}var Is,QT,ZT;iB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function iB(e){return Is=i8(e),QT=Is.format,Is.parse,ZT=Is.utcFormat,Is.utcParse,Is}function oB(e){return new Date(e)}function sB(e){return e instanceof Date?+e:+new Date(+e)}function zv(e,t,n,r,i,s,l,u,p,f){var h=Ov(),m=h.invert,g=h.domain,x=f(".%L"),S=f(":%S"),A=f("%I:%M"),C=f("%I %p"),P=f("%a %d"),T=f("%b %d"),O=f("%B"),k=f("%Y");function N(D){return(p(D)<D?x:u(D)<D?S:l(D)<D?A:s(D)<D?C:r(D)<D?i(D)<D?P:T:n(D)<D?O:k)(D)}return h.invert=function(D){return new Date(m(D))},h.domain=function(D){return arguments.length?g(Array.from(D,sB)):g().map(oB)},h.ticks=function(D){var j=g();return e(j[0],j[j.length-1],D??10)},h.tickFormat=function(D,j){return j==null?N:f(j)},h.nice=function(D){var j=g();return(!D||typeof D.range!="function")&&(D=t(j[0],j[j.length-1],D??10)),D?g($T(j,D)):h},h.copy=function(){return nu(h,zv(e,t,n,r,i,s,l,u,p,f))},h}function lB(){return jr.apply(zv(r8,a8,Ga,Bv,yp,ru,Lv,Rv,Do,QT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cB(){return jr.apply(zv(t8,n8,Ha,Uv,vp,gp,$v,Iv,Do,ZT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bp(){var e=0,t=1,n,r,i,s,l=_n,u=!1,p;function f(m){return m==null||isNaN(m=+m)?p:l(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(m){return arguments.length?(u=!!m,f):u},f.interpolator=function(m){return arguments.length?(l=m,f):l};function h(m){return function(g){var x,S;return arguments.length?([x,S]=g,l=m(x,S),f):[l(0),l(1)]}}return f.range=h(al),f.rangeRound=h(wv),f.unknown=function(m){return arguments.length?(p=m,f):p},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),f}}function Li(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function JT(){var e=Ii(bp()(_n));return e.copy=function(){return Li(e,JT())},Va.apply(e,arguments)}function e_(){var e=Dv(bp()).domain([1,10]);return e.copy=function(){return Li(e,e_()).base(e.base())},Va.apply(e,arguments)}function t_(){var e=Nv(bp());return e.copy=function(){return Li(e,t_()).constant(e.constant())},Va.apply(e,arguments)}function Gv(){var e=kv(bp());return e.copy=function(){return Li(e,Gv()).exponent(e.exponent())},Va.apply(e,arguments)}function uB(){return Gv.apply(null,arguments).exponent(.5)}function n_(){var e=[],t=_n;function n(r){if(r!=null&&!isNaN(r=+r))return t((eu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Ni),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>W5(e,s/r))},n.copy=function(){return n_(t).domain(e)},Va.apply(n,arguments)}function xp(){var e=0,t=.5,n=1,r=1,i,s,l,u,p,f=_n,h,m=!1,g;function x(A){return isNaN(A=+A)?g:(A=.5+((A=+h(A))-s)*(r*A<r*s?u:p),f(m?Math.max(0,Math.min(1,A)):A))}x.domain=function(A){return arguments.length?([e,t,n]=A,i=h(e=+e),s=h(t=+t),l=h(n=+n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(A){return arguments.length?(m=!!A,x):m},x.interpolator=function(A){return arguments.length?(f=A,x):f};function S(A){return function(C){var P,T,O;return arguments.length?([P,T,O]=C,f=A$(A,[P,T,O]),x):[f(0),f(.5),f(1)]}}return x.range=S(al),x.rangeRound=S(wv),x.unknown=function(A){return arguments.length?(g=A,x):g},function(A){return h=A,i=A(e),s=A(t),l=A(n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,x}}function r_(){var e=Ii(xp()(_n));return e.copy=function(){return Li(e,r_())},Va.apply(e,arguments)}function a_(){var e=Dv(xp()).domain([.1,1,10]);return e.copy=function(){return Li(e,a_()).base(e.base())},Va.apply(e,arguments)}function i_(){var e=Nv(xp());return e.copy=function(){return Li(e,i_()).constant(e.constant())},Va.apply(e,arguments)}function Hv(){var e=kv(xp());return e.copy=function(){return Li(e,Hv()).exponent(e.exponent())},Va.apply(e,arguments)}function dB(){return Hv.apply(null,arguments).exponent(.5)}const Dc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ev,scaleDiverging:r_,scaleDivergingLog:a_,scaleDivergingPow:Hv,scaleDivergingSqrt:dB,scaleDivergingSymlog:i_,scaleIdentity:LT,scaleImplicit:y0,scaleLinear:IT,scaleLog:BT,scaleOrdinal:Av,scalePoint:Z5,scalePow:jv,scaleQuantile:GT,scaleQuantize:HT,scaleRadial:zT,scaleSequential:JT,scaleSequentialLog:e_,scaleSequentialPow:Gv,scaleSequentialQuantile:n_,scaleSequentialSqrt:uB,scaleSequentialSymlog:t_,scaleSqrt:Y$,scaleSymlog:UT,scaleThreshold:qT,scaleTime:lB,scaleUtc:cB,tickFormat:RT},Symbol.toStringTag,{value:"Module"}));var $i=e=>e.chartData,qv=J([$i],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Yv=(e,t,n,r)=>r?qv(e):$i(e);function Qs(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(or(t)&&or(n))return!0}return!1}function fP(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function fB(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(or(n))i=n;else if(typeof n=="function")return;if(or(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Qs(l))return l}}function pB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Qs(r))return fP(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Oe(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&nC.test(i)){var p=nC.exec(i);if(p==null||t==null)l=void 0;else{var f=+p[1];l=t[0]-f}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(Oe(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&rC.test(s)){var h=rC.exec(s);if(h==null||t==null)u=void 0;else{var m=+h[1];u=t[1]+m}}else u=t?.[1];var g=[l,u];if(Qs(g))return t==null?g:fP(g,t,n)}}}var il=1e9,hB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Vv,yt=!0,Dr="[DecimalError] ",Ro=Dr+"Invalid argument: ",Fv=Dr+"Exponent out of range: ",ol=Math.floor,Oo=Math.pow,mB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,nr,Zt=1e7,pt=7,o_=9007199254740991,$f=ol(o_/pt),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*pt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ae.dividedBy=Ae.div=function(e){return Ba(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,n=t.constructor;return lt(Ba(t,new n(e),0,1),n.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return Lt(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(nr))throw Error(Dr+"NaN");if(n.s<1)throw Error(Dr+(n.s?"NaN":"-Infinity"));return n.eq(nr)?new r(0):(yt=!1,t=Ba(Vc(n,s),Vc(e,s),s),yt=!0,lt(t,i))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?c_(t,e):s_(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Dr+"NaN");return n.s?(yt=!1,t=Ba(n,e,0,1).times(e),yt=!0,n.minus(t)):lt(new r(n),i)};Ae.naturalExponential=Ae.exp=function(){return l_(this)};Ae.naturalLogarithm=Ae.ln=function(){return Vc(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?s_(t,e):c_(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ro+e);if(t=Lt(i)+1,r=i.d.length-1,n=r*pt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ae.squareRoot=Ae.sqrt=function(){var e,t,n,r,i,s,l,u=this,p=u.constructor;if(u.s<1){if(!u.s)return new p(0);throw Error(Dr+"NaN")}for(e=Lt(u),yt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=sa(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ol((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new p(t)):r=new p(i.toString()),n=p.precision,i=l=n+3;;)if(s=r,r=s.plus(Ba(u,s,l+2)).times(.5),sa(s.d).slice(0,l)===(t=sa(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(lt(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return yt=!0,lt(r,n)};Ae.times=Ae.mul=function(e){var t,n,r,i,s,l,u,p,f,h=this,m=h.constructor,g=h.d,x=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,p=g.length,f=x.length,p<f&&(s=g,g=x,x=s,l=p,p=f,f=l),s=[],l=p+f,r=l;r--;)s.push(0);for(r=f;--r>=0;){for(t=0,i=p+r;i>r;)u=s[i]+x[r]*g[i-r-1]+t,s[i--]=u%Zt|0,t=u/Zt|0;s[i]=(s[i]+t)%Zt|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,yt?lt(e,m.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ua(e,0,il),t===void 0?t=r.rounding:ua(t,0,8),lt(n,e+Lt(n)+1,t))};Ae.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Bo(r,!0):(ua(e,0,il),t===void 0?t=i.rounding:ua(t,0,8),r=lt(new i(r),e+1,t),n=Bo(r,!0,e+1)),n};Ae.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Bo(i):(ua(e,0,il),t===void 0?t=s.rounding:ua(t,0,8),r=lt(new s(i),e+Lt(i)+1,t),n=Bo(r.abs(),!1,e+Lt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return lt(new t(e),Lt(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,n,r,i,s,l,u=this,p=u.constructor,f=12,h=+(e=new p(e));if(!e.s)return new p(nr);if(u=new p(u),!u.s){if(e.s<1)throw Error(Dr+"Infinity");return u}if(u.eq(nr))return u;if(r=p.precision,e.eq(nr))return lt(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=h<0?-h:h)<=o_){for(i=new p(nr),t=Math.ceil(r/pt+4),yt=!1;n%2&&(i=i.times(u),hP(i.d,t)),n=ol(n/2),n!==0;)u=u.times(u),hP(u.d,t);return yt=!0,e.s<0?new p(nr).div(i):lt(i,r)}}else if(s<0)throw Error(Dr+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,yt=!1,i=e.times(Vc(u,r+f)),yt=!0,i=l_(i),i.s=s,i};Ae.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Lt(i),r=Bo(i,n<=s.toExpNeg||n>=s.toExpPos)):(ua(e,1,il),t===void 0?t=s.rounding:ua(t,0,8),i=lt(new s(i),e,t),n=Lt(i),r=Bo(i,e<=n||n<=s.toExpNeg,e)),r};Ae.toSignificantDigits=Ae.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ua(e,1,il),t===void 0?t=r.rounding:ua(t,0,8)),lt(new r(n),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Lt(e),n=e.constructor;return Bo(e,t<=n.toExpNeg||t>=n.toExpPos)};function s_(e,t){var n,r,i,s,l,u,p,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),yt?lt(t,m):t;if(p=e.d,f=t.d,l=e.e,i=t.e,p=p.slice(),s=l-i,s){for(s<0?(r=p,s=-s,u=f.length):(r=f,i=l,u=p.length),l=Math.ceil(m/pt),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=p.length,s=f.length,u-s<0&&(s=u,r=f,f=p,p=r),n=0;s;)n=(p[--s]=p[s]+f[s]+n)/Zt|0,p[s]%=Zt;for(n&&(p.unshift(n),++i),u=p.length;p[--u]==0;)p.pop();return t.d=p,t.e=i,yt?lt(t,m):t}function ua(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ro+e)}function sa(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=pt-r.length,n&&(s+=wi(n)),s+=r;l=e[t],r=l+"",n=pt-r.length,n&&(s+=wi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Ba=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%Zt|0,l=s/Zt|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,p;if(s!=l)p=s>l?1:-1;else for(u=p=0;u<s;u++)if(r[u]!=i[u]){p=r[u]>i[u]?1:-1;break}return p}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*Zt+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,p,f,h,m,g,x,S,A,C,P,T,O,k,N,D,j,R,z=r.constructor,W=r.s==i.s?1:-1,H=r.d,q=i.d;if(!r.s)return new z(r);if(!i.s)throw Error(Dr+"Division by zero");for(p=r.e-i.e,j=q.length,N=H.length,x=new z(W),S=x.d=[],f=0;q[f]==(H[f]||0);)++f;if(q[f]>(H[f]||0)&&--p,s==null?T=s=z.precision:l?T=s+(Lt(r)-Lt(i))+1:T=s,T<0)return new z(0);if(T=T/pt+2|0,f=0,j==1)for(h=0,q=q[0],T++;(f<N||h)&&T--;f++)O=h*Zt+(H[f]||0),S[f]=O/q|0,h=O%q|0;else{for(h=Zt/(q[0]+1)|0,h>1&&(q=e(q,h),H=e(H,h),j=q.length,N=H.length),k=j,A=H.slice(0,j),C=A.length;C<j;)A[C++]=0;R=q.slice(),R.unshift(0),D=q[0],q[1]>=Zt/2&&++D;do h=0,u=t(q,A,j,C),u<0?(P=A[0],j!=C&&(P=P*Zt+(A[1]||0)),h=P/D|0,h>1?(h>=Zt&&(h=Zt-1),m=e(q,h),g=m.length,C=A.length,u=t(m,A,g,C),u==1&&(h--,n(m,j<g?R:q,g))):(h==0&&(u=h=1),m=q.slice()),g=m.length,g<C&&m.unshift(0),n(A,m,C),u==-1&&(C=A.length,u=t(q,A,j,C),u<1&&(h++,n(A,j<C?R:q,C))),C=A.length):u===0&&(h++,A=[0]),S[f++]=h,u&&A[0]?A[C++]=H[k]||0:(A=[H[k]],C=1);while((k++<N||A[0]!==void 0)&&T--)}return S[0]||S.shift(),x.e=p,lt(x,l?s+Lt(x)+1:s)}})();function l_(e,t){var n,r,i,s,l,u,p=0,f=0,h=e.constructor,m=h.precision;if(Lt(e)>16)throw Error(Fv+Lt(e));if(!e.s)return new h(nr);for(yt=!1,u=m,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(r=Math.log(Oo(2,f))/Math.LN10*2+5|0,u+=r,n=i=s=new h(nr),h.precision=u;;){if(i=lt(i.times(e),u),n=n.times(++p),l=s.plus(Ba(i,n,u)),sa(l.d).slice(0,u)===sa(s.d).slice(0,u)){for(;f--;)s=lt(s.times(s),u);return h.precision=m,t==null?(yt=!0,lt(s,m)):s}s=l}}function Lt(e){for(var t=e.e*pt,n=e.d[0];n>=10;n/=10)t++;return t}function fy(e,t,n){if(t>e.LN10.sd())throw yt=!0,n&&(e.precision=n),Error(Dr+"LN10 precision limit exceeded");return lt(new e(e.LN10),t)}function wi(e){for(var t="";e--;)t+="0";return t}function Vc(e,t){var n,r,i,s,l,u,p,f,h,m=1,g=10,x=e,S=x.d,A=x.constructor,C=A.precision;if(x.s<1)throw Error(Dr+(x.s?"NaN":"-Infinity"));if(x.eq(nr))return new A(0);if(t==null?(yt=!1,f=C):f=t,x.eq(10))return t==null&&(yt=!0),fy(A,f);if(f+=g,A.precision=f,n=sa(S),r=n.charAt(0),s=Lt(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=sa(x.d),r=n.charAt(0),m++;s=Lt(x),r>1?(x=new A("0."+n),s++):x=new A(r+"."+n.slice(1))}else return p=fy(A,f+2,C).times(s+""),x=Vc(new A(r+"."+n.slice(1)),f-g).plus(p),A.precision=C,t==null?(yt=!0,lt(x,C)):x;for(u=l=x=Ba(x.minus(nr),x.plus(nr),f),h=lt(x.times(x),f),i=3;;){if(l=lt(l.times(h),f),p=u.plus(Ba(l,new A(i),f)),sa(p.d).slice(0,f)===sa(u.d).slice(0,f))return u=u.times(2),s!==0&&(u=u.plus(fy(A,f+2,C).times(s+""))),u=Ba(u,new A(m),f),A.precision=C,t==null?(yt=!0,lt(u,C)):u;u=p,i+=2}}function pP(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=ol(n/pt),e.d=[],r=(n+1)%pt,n<0&&(r+=pt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=pt;r<i;)e.d.push(+t.slice(r,r+=pt));t=t.slice(r),r=pt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),yt&&(e.e>$f||e.e<-$f))throw Error(Fv+n)}else e.s=0,e.e=0,e.d=[0];return e}function lt(e,t,n){var r,i,s,l,u,p,f,h,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=pt,i=t,f=m[h=0];else{if(h=Math.ceil((r+1)/pt),s=m.length,h>=s)return e;for(f=s=m[h],l=1;s>=10;s/=10)l++;r%=pt,i=r-pt+l}if(n!==void 0&&(s=Oo(10,l-i-1),u=f/s%10|0,p=t<0||m[h+1]!==void 0||f%s,p=n<4?(u||p)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||p||n==6&&(r>0?i>0?f/Oo(10,l-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return p?(s=Lt(e),m.length=1,t=t-s-1,m[0]=Oo(10,(pt-t%pt)%pt),e.e=ol(-t/pt)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=h,s=1,h--):(m.length=h+1,s=Oo(10,pt-r),m[h]=i>0?(f/Oo(10,l-i)%Oo(10,i)|0)*s:0),p)for(;;)if(h==0){(m[0]+=s)==Zt&&(m[0]=1,++e.e);break}else{if(m[h]+=s,m[h]!=Zt)break;m[h--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(yt&&(e.e>$f||e.e<-$f))throw Error(Fv+Lt(e));return e}function c_(e,t){var n,r,i,s,l,u,p,f,h,m,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),yt?lt(t,x):t;if(p=e.d,m=t.d,r=t.e,f=e.e,p=p.slice(),l=f-r,l){for(h=l<0,h?(n=p,l=-l,u=m.length):(n=m,r=f,u=p.length),i=Math.max(Math.ceil(x/pt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=p.length,u=m.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(p[i]!=m[i]){h=p[i]<m[i];break}l=0}for(h&&(n=p,p=m,m=n,t.s=-t.s),u=p.length,i=m.length-u;i>0;--i)p[u++]=0;for(i=m.length;i>l;){if(p[--i]<m[i]){for(s=i;s&&p[--s]===0;)p[s]=Zt-1;--p[s],p[i]+=Zt}p[i]-=m[i]}for(;p[--u]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=r,yt?lt(t,x):t):new g(0)}function Bo(e,t,n){var r,i=Lt(e),s=sa(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+wi(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+wi(-i-1)+s,n&&(r=n-l)>0&&(s+=wi(r))):i>=l?(s+=wi(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+wi(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=wi(r))),e.s<0?"-"+s:s}function hP(e,t){if(e.length>t)return e.length=t,!0}function u_(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Ro+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return pP(l,s.toString())}else if(typeof s!="string")throw Error(Ro+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,mB.test(s))pP(l,s);else throw Error(Ro+s)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=u_,i.config=i.set=gB,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function gB(e){if(!e||typeof e!="object")throw Error(Dr+"Object expected");var t,n,r,i=["precision",1,il,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(ol(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Ro+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ro+n+": "+r);return this}var Vv=u_(hB);nr=new Vv(1);const Je=Vv;var yB=e=>e,d_={},f_=e=>e===d_,mP=e=>function t(){return arguments.length===0||arguments.length===1&&f_(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},p_=(e,t)=>e===1?t:mP(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==d_).length;return s>=e?t(...r):p_(e-s,mP(function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];var f=r.map(h=>f_(h)?u.shift():h);return t(...f,...u)}))}),Sp=e=>p_(e.length,e),S0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},vB=Sp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),bB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return yB;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,p)=>p(u),s(...arguments))}},A0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),h_=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var p;return l===((p=t)===null||p===void 0?void 0:p[u])})||(t=i,n=e(...i)),n}};function m_(e){var t;return e===0?t=1:t=Math.floor(new Je(e).abs().log(10).toNumber())+1,t}function g_(e,t,n){for(var r=new Je(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Sp((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Sp((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Sp((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var y_=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},v_=(e,t,n)=>{if(e.lte(0))return new Je(0);var r=m_(e.toNumber()),i=new Je(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new Je(Math.ceil(s.div(l).toNumber())).add(n).mul(l),p=u.mul(i);return t?new Je(p.toNumber()):new Je(Math.ceil(p.toNumber()))},xB=(e,t,n)=>{var r=new Je(1),i=new Je(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new Je(10).pow(m_(e)-1),i=new Je(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Je(Math.floor(e)))}else e===0?i=new Je(Math.floor((t-1)/2)):n||(i=new Je(Math.floor(e)));var l=Math.floor((t-1)/2),u=bB(vB(p=>i.add(new Je(p-l).mul(r)).toNumber()),S0);return u(0,t)},b_=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Je(0),tickMin:new Je(0),tickMax:new Je(0)};var l=v_(new Je(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new Je(0):(u=new Je(t).add(n).div(2),u=u.sub(new Je(u).mod(l)));var p=Math.ceil(u.sub(t).div(l).toNumber()),f=Math.ceil(new Je(n).sub(u).div(l).toNumber()),h=p+f+1;return h>r?b_(t,n,r,i,s+1):(h<r&&(f=n>0?f+(r-h):f,p=n>0?p:p+(r-h)),{step:l,tickMin:u.sub(new Je(p).mul(l)),tickMax:u.add(new Je(f).mul(l))})};function SB(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=y_([t,n]);if(l===-1/0||u===1/0){var p=u===1/0?[l,...S0(0,r-1).map(()=>1/0)]:[...S0(0,r-1).map(()=>-1/0),u];return t>n?A0(p):p}if(l===u)return xB(l,r,i);var{step:f,tickMin:h,tickMax:m}=b_(l,u,s,i,0),g=g_(h,m.add(new Je(.1).mul(f)),f);return t>n?A0(g):g}function AB(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=y_([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),p=v_(new Je(l).sub(s).div(u-1),i,0),f=[...g_(new Je(s),new Je(l),p),l];return i===!1&&(f=f.map(h=>Math.round(h))),n>r?A0(f):f}var EB=h_(SB),CB=h_(AB),x_=e=>e.rootProps.maxBarSize,PB=e=>e.rootProps.barGap,S_=e=>e.rootProps.barCategoryGap,wB=e=>e.rootProps.barSize,au=e=>e.rootProps.stackOffset,Kv=e=>e.options.chartName,Wv=e=>e.rootProps.syncId,A_=e=>e.rootProps.syncMethod,Xv=e=>e.options.eventEmitter,Ma={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},tr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Ap=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},OB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ma.angleAxisId,includeHidden:!1,name:void 0,reversed:Ma.reversed,scale:Ma.scale,tick:Ma.tick,tickCount:void 0,ticks:void 0,type:Ma.type,unit:void 0},TB={allowDataOverflow:tr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:tr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:tr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:tr.scale,tick:tr.tick,tickCount:tr.tickCount,ticks:void 0,type:tr.type,unit:void 0},_B={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ma.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ma.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ma.scale,tick:Ma.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},DB={allowDataOverflow:tr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:tr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:tr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:tr.scale,tick:tr.tick,tickCount:tr.tickCount,ticks:void 0,type:"category",unit:void 0},Qv=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?_B:OB,Zv=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?DB:TB,Ep=e=>e.polarOptions,Jv=J([Ya,Fa,Yt],aT),E_=J([Ep,Jv],(e,t)=>{if(e!=null)return Sn(e.innerRadius,t,0)}),C_=J([Ep,Jv],(e,t)=>{if(e!=null)return Sn(e.outerRadius,t,t*.8)}),NB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},P_=J([Ep],NB);J([Qv,P_],Ap);var w_=J([Jv,E_,C_],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});J([Zv,w_],Ap);var O_=J([Ve,Ep,E_,C_,Ya,Fa],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:p,endAngle:f}=t;return{cx:Sn(l,i,i/2),cy:Sn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:p,endAngle:f,clockWise:!1}}}),vt=(e,t)=>t,iu=(e,t,n)=>n;function eb(e){return e?.id}var Vt=e=>{var t=Ve(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},sl=e=>e.tooltip.settings.axisId,nn=e=>{var t=Vt(e),n=sl(e);return ou(e,t,n)},T_=J([nn],e=>e?.dataKey);function __(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var p,f=(p=u.data)!==null&&p!==void 0?p:r;if(!(f==null||f.length===0)){var h=eb(u);f.forEach((m,g)=>{var x=s==null||i?g:String(gt(m,s,null)),S=gt(m,u.dataKey,0),A;l.has(x)?A=l.get(x):A={},Object.assign(A,{[h]:S}),l.set(x,A)})}}),Array.from(l.values())}function Cp(e){return e.stackId!=null&&e.dataKey!=null}function gP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(n),!0).forEach(function(r){kB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kB(e,t,n){return(t=jB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jB(e){var t=MB(e,"string");return typeof t=="symbol"?t:t+""}function MB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E0=[0,"auto"],Jn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},D_=(e,t)=>e.cartesianAxis.xAxis[t],Bi=(e,t)=>{var n=D_(e,t);return n??Jn},er={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:E0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Jc},N_=(e,t)=>e.cartesianAxis.yAxis[t],Ui=(e,t)=>{var n=N_(e,t);return n??er},RB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},tb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??RB},Dt=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);case"zAxis":return tb(e,n);case"angleAxis":return Qv(e,n);case"radiusAxis":return Zv(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},IB=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ou=(e,t,n)=>{switch(t){case"xAxis":return Bi(e,n);case"yAxis":return Ui(e,n);case"angleAxis":return Qv(e,n);case"radiusAxis":return Zv(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},k_=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function nb(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var rb=e=>e.graphicalItems.cartesianItems,LB=J([vt,iu],nb),ab=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),su=J([rb,Dt,LB],ab),j_=J([su],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Cp)),M_=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),R_=J([su],M_),ib=e=>e.map(t=>t.data).filter(Boolean).flat(1),$B=J([su],ib),ob=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},sb=J([$B,Yv],ob),lb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:gt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:gt(i,r)}))):e.map(r=>({value:r})),Pp=J([sb,Dt,su],lb);function I_(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ko(e){return e.filter(t=>ca(t)||t instanceof Date).map(Number).filter(t=>ar(t)===!1)}function BB(e,t,n){return!n||typeof t!="number"||ar(t)?[]:n.length?Ko(n.flatMap(r=>{var i=gt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!or(s)||!or(l)))return[t-s,t+l]})):[]}var UB=J([j_,Yv,nn],__),L_=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,p=u.map(eb);return[l,{stackedData:q3(e,p,n),graphicalItems:u}]}))},C0=J([UB,j_,au],L_),$_=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=W3(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},zB=J([C0,$i,vt],$_),B_=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,p,f=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>I_(i,m)),h=gt(s,(p=t.dataKey)!==null&&p!==void 0?p:l.dataKey);return{value:h,errorDomain:BB(s,h,f)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:gt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),wp=e=>e.errorBars,U_=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>I_(n,r));J([R_,wp,vt],U_);var GB=J([sb,Dt,R_,wp,vt],B_);function HB(e){var{value:t}=e;if(ca(t)||t instanceof Date)return t}var yP=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Ko(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},qB=(e,t,n)=>{var r=e.map(HB).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&ZO(r))?PT(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},cb=e=>{var t;if(e==null||!("domain"in e))return E0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Ko(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:E0},Uf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},z_=e=>e.referenceElements.dots,ll=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),YB=J([z_,vt,iu],ll),G_=e=>e.referenceElements.areas,FB=J([G_,vt,iu],ll),H_=e=>e.referenceElements.lines,VB=J([H_,vt,iu],ll),q_=(e,t)=>{var n=Ko(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},KB=J(YB,vt,q_),Y_=(e,t)=>{var n=Ko(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},WB=J([FB,vt],Y_),F_=(e,t)=>{var n=Ko(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},XB=J(VB,vt,F_),QB=J(KB,XB,WB,(e,t,n)=>Uf(e,n,t)),V_=J([Dt],cb),ub=(e,t,n,r,i,s,l)=>{var u=fB(t,e.allowDataOverflow);if(u!=null)return u;var p=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",f=p?Uf(n,i,yP(r)):Uf(i,yP(r));return pB(t,f,e.allowDataOverflow)},ZB=J([Dt,V_,zB,GB,QB,Ve,vt],ub),JB=[0,1],db=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:p}=e,f=Yo(t,s);return f&&u==null?PT(0,n.length):p==="category"?qB(r,e,f):i==="expand"?JB:l}},fb=J([Dt,Ve,sb,Pp,au,vt,ZB],db),K_=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Wc(s));return u in Dc?u:"point"}}},cl=J([Dt,Ve,k_,Kv,vt],K_);function e6(e){if(e!=null){if(e in Dc)return Dc[e]();var t="scale".concat(Wc(e));if(t in Dc)return Dc[t]()}}function pb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=e6(t);if(i!=null){var s=i.domain(n).range(r);return B3(s),s}}}var hb=(e,t,n)=>{var r=cb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Qs(e))return EB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Qs(e))return CB(e,t.tickCount,t.allowDecimals)}},mb=J([fb,ou,cl],hb),gb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Qs(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},t6=J([Dt,fb,mb,vt],gb),n6=J(Pp,Dt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Ko(e.map(u=>u.value))).sort((u,p)=>u-p);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),W_=J(n6,Ve,S_,Yt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!or(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=Sn(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),r6=(e,t)=>{var n=Bi(e,t);return n==null||typeof n.padding!="string"?0:W_(e,"xAxis",t,n.padding)},a6=(e,t)=>{var n=Ui(e,t);return n==null||typeof n.padding!="string"?0:W_(e,"yAxis",t,n.padding)},i6=J(Bi,r6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),o6=J(Ui,a6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),s6=J([Yt,i6,dp,up,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),l6=J([Yt,Ve,o6,dp,up,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),lu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return s6(e,n,r);case"yAxis":return l6(e,n,r);case"zAxis":return(i=tb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return P_(e);case"radiusAxis":return w_(e,n);default:return}},X_=J([Dt,lu],Ap),ul=J([Dt,cl,t6,X_],pb);J([su,wp,vt],U_);function Q_(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Op=(e,t)=>t,Tp=(e,t,n)=>n,c6=J(lp,Op,Tp,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Q_)),u6=J(cp,Op,Tp,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(Q_)),Z_=(e,t)=>({width:e.width,height:t.height}),d6=(e,t)=>{var n=typeof t.width=="number"?t.width:Jc;return{width:n,height:e.height}},J_=J(Yt,Bi,Z_),f6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},p6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},h6=J(Fa,Yt,c6,Op,Tp,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=Z_(t,u);l==null&&(l=f6(t,r,e));var f=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(f)*p.height,l+=(f?-1:1)*p.height}),s}),m6=J(Ya,Yt,u6,Op,Tp,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=d6(t,u);l==null&&(l=p6(t,r,e));var f=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(f)*p.width,l+=(f?-1:1)*p.width}),s}),g6=(e,t)=>{var n=Yt(e),r=Bi(e,t);if(r!=null){var i=h6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},y6=(e,t)=>{var n=Yt(e),r=Ui(e,t);if(r!=null){var i=m6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},eD=J(Yt,Ui,(e,t)=>{var n=typeof t.width=="number"?t.width:Jc;return{width:n,height:e.height}}),vP=(e,t,n)=>{switch(t){case"xAxis":return J_(e,n).width;case"yAxis":return eD(e,n).height;default:return}},tD=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Yo(e,r),p=t.map(f=>f.value);if(l&&u&&s==="category"&&i&&ZO(p))return p}},yb=J([Ve,Pp,Dt,vt],tD),nD=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Yo(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},vb=J([Ve,Pp,ou,vt],nD),bP=J([Ve,IB,cl,ul,yb,vb,lu,mb,vt],(e,t,n,r,i,s,l,u,p)=>{if(t==null)return null;var f=Yo(e,p);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:p,categoricalDomain:s,duplicateDomain:i,isCategorical:f,niceTicks:u,range:l,realScaleType:n,scale:r}}),v6=(e,t,n,r,i,s,l,u,p)=>{if(!(t==null||r==null)){var f=Yo(e,p),{type:h,ticks:m,tickCount:g}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=h==="category"&&r.bandwidth?r.bandwidth()/x:0;S=p==="angleAxis"&&s!=null&&s.length>=2?Jt(s[0]-s[1])*2*S:S;var A=m||i;if(A){var C=A.map((P,T)=>{var O=l?l.indexOf(P):P;return{index:T,coordinate:r(O)+S,value:P,offset:S}});return C.filter(P=>!ar(P.coordinate))}return f&&u?u.map((P,T)=>({coordinate:r(P)+S,value:P,index:T,offset:S})):r.ticks?r.ticks(g).map(P=>({coordinate:r(P)+S,value:P,offset:S})):r.domain().map((P,T)=>({coordinate:r(P)+S,value:l?l[P]:P,index:T,offset:S}))}},rD=J([Ve,ou,cl,ul,mb,lu,yb,vb,vt],v6),b6=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Yo(e,l),{tickCount:p}=t,f=0;return f=l==="angleAxis"&&r?.length>=2?Jt(r[0]-r[1])*2*f:f,u&&s?s.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.ticks?n.ticks(p).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}},Zs=J([Ve,ou,ul,lu,yb,vb,vt],b6),Js=J(Dt,ul,(e,t)=>{if(!(e==null||t==null))return Bf(Bf({},e),{},{scale:t})}),x6=J([Dt,cl,fb,X_],pb);J((e,t,n)=>tb(e,n),x6,(e,t)=>{if(!(e==null||t==null))return Bf(Bf({},e),{},{scale:t})});var S6=J([Ve,lp,cp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),aD=e=>e.options.defaultTooltipEventType,iD=e=>e.options.validateTooltipEventTypes;function oD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function bb(e,t){var n=aD(e),r=iD(e);return oD(t,n,r)}function A6(e){return Pe(t=>bb(t,e))}var sD=(e,t)=>{var n,r=Number(t);if(!(ar(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},E6=e=>e.tooltip.settings,Ti={active:!1,index:null,dataKey:void 0,coordinate:void 0},C6={itemInteraction:{click:Ti,hover:Ti},axisInteraction:{click:Ti,hover:Ti},keyboardInteraction:Ti,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},lD=sr({name:"tooltip",initialState:C6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=$a(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:P6,removeTooltipEntrySettings:w6,setTooltipSettingsState:O6,setActiveMouseOverItemIndex:cD,mouseLeaveItem:T6,mouseLeaveChart:uD,setActiveClickItemIndex:_6,setMouseOverAxisIndex:dD,setMouseClickAxisIndex:D6,setSyncInteraction:P0,setKeyboardInteraction:w0}=lD.actions,N6=lD.reducer;function xP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(n),!0).forEach(function(r){k6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k6(e,t,n){return(t=j6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j6(e){var t=M6(e,"string");return typeof t=="symbol"?t:t+""}function M6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function I6(e){return e.index!=null}var fD=(e,t,n,r)=>{if(t==null)return Ti;var i=R6(e,t,n);if(i==null)return Ti;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(I6(i)){if(s)return Kd(Kd({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Kd(Kd({},Ti),{},{coordinate:i.coordinate})},xb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!or(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},pD=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var p=l[0],f=p==null?void 0:u(p.positions,s);if(f!=null)return f;var h=i?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},hD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},cu=e=>e.options.tooltipPayloadSearcher,dl=e=>e.tooltip;function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){L6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L6(e,t,n){return(t=$6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $6(e){var t=B6(e,"string");return typeof t=="symbol"?t:t+""}function B6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U6(e,t){return e??t}var mD=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:p,dataStartIndex:f,dataEndIndex:h}=n,m=[];return e.reduce((g,x)=>{var S,{dataDefinedOnItem:A,settings:C}=x,P=U6(A,u),T=Array.isArray(P)?iT(P,f,h):P,O=(S=C?.dataKey)!==null&&S!==void 0?S:r,k=C?.nameKey,N;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&l==="axis"?N=TR(T,r,i):N=s(T,t,p,k),Array.isArray(N))N.forEach(j=>{var R=AP(AP({},C),{},{name:j.name,unit:j.unit,color:void 0,fill:void 0});g.push(aC({tooltipEntrySettings:R,dataKey:j.dataKey,payload:j.payload,value:gt(j.payload,j.dataKey),name:j.name}))});else{var D;g.push(aC({tooltipEntrySettings:C,dataKey:O,payload:N,value:gt(N,O),name:(D=gt(N,k))!==null&&D!==void 0?D:C?.name}))}return g},m)}},Sb=J([nn,Ve,k_,Kv,Vt],K_),z6=J([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),G6=J([Vt,sl],nb),uu=J([z6,nn,G6],ab),H6=J([uu],e=>e.filter(Cp)),q6=J([uu],ib),fl=J([q6,$i],ob),Y6=J([H6,$i,nn],__),Ab=J([fl,nn,uu],lb),F6=J([nn],cb),V6=J([uu],e=>e.filter(Cp)),K6=J([Y6,V6,au],L_),W6=J([K6,$i,Vt],$_),X6=J([uu],M_),Q6=J([fl,nn,X6,wp,Vt],B_),Z6=J([z_,Vt,sl],ll),J6=J([Z6,Vt],q_),eU=J([G_,Vt,sl],ll),tU=J([eU,Vt],Y_),nU=J([H_,Vt,sl],ll),rU=J([nU,Vt],F_),aU=J([J6,rU,tU],Uf),iU=J([nn,F6,W6,Q6,aU,Ve,Vt],ub),gD=J([nn,Ve,fl,Ab,au,Vt,iU],db),oU=J([gD,nn,Sb],hb),sU=J([nn,gD,oU,Vt],gb),yD=e=>{var t=Vt(e),n=sl(e),r=!1;return lu(e,t,n,r)},vD=J([nn,yD],Ap),bD=J([nn,Sb,sU,vD],pb),lU=J([Ve,Ab,nn,Vt],tD),cU=J([Ve,Ab,nn,Vt],nD),uU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:p}=t,f=Yo(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=p==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?Jt(i[0]-i[1])*2*m:m,f&&l?l.map((g,x)=>({coordinate:r(g)+m,value:g,index:x,offset:m})):r.domain().map((g,x)=>({coordinate:r(g)+m,value:s?s[g]:g,index:x,offset:m}))}}},Ka=J([Ve,nn,Sb,bD,yD,lU,cU,Vt],uU),Eb=J([aD,iD,E6],(e,t,n)=>oD(n.shared,e,t)),xD=e=>e.tooltip.settings.trigger,Cb=e=>e.tooltip.settings.defaultIndex,_p=J([dl,Eb,xD,Cb],fD),Uo=J([_p,fl],xb),SD=J([Ka,Uo],sD),AD=J([_p],e=>{if(e)return e.dataKey}),ED=J([dl,Eb,xD,Cb],hD),dU=J([Ya,Fa,Ve,Yt,Ka,Cb,ED,cu],pD),fU=J([_p,dU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),pU=J([_p],e=>e.active),hU=J([ED,Uo,$i,T_,SD,cu,Eb],mD);J([hU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(r){mU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mU(e,t,n){return(t=gU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gU(e){var t=yU(e,"string");return typeof t=="symbol"?t:t+""}function yU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vU=()=>Pe(nn),bU=()=>{var e=vU(),t=Pe(Ka),n=Pe(bD);return hv(CP(CP({},e),{},{scale:n}),t)},xU=()=>Pe(Kv),Pb=(e,t)=>t,CD=(e,t,n)=>n,wb=(e,t,n,r)=>r,SU=J(Ka,e=>tp(e,t=>t.coordinate)),Ob=J([dl,Pb,CD,wb],fD),PD=J([Ob,fl],xb),AU=(e,t,n)=>{if(t!=null){var r=dl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},wD=J([dl,Pb,CD,wb],hD),zf=J([Ya,Fa,Ve,Yt,Ka,wb,wD,cu],pD),EU=J([Ob,zf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),OD=J(Ka,PD,sD),CU=J([wD,PD,$i,T_,OD,cu,Pb],mD),PU=J([Ob],e=>({isActive:e.active,activeIndex:e.index})),wU=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var p=X3(e.chartX,e.chartY,t,n,u);if(p){var f=Z3(p,t),h=L3(f,l,s,r,i),m=Q3(t,s,h,p);return{activeIndex:String(h),activeCoordinate:m}}}};function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O0.apply(null,arguments)}function PP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(n),!0).forEach(function(r){OU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OU(e,t,n){return(t=TU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TU(e){var t=_U(e,"string");return typeof t=="symbol"?t:t+""}function _U(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:p,chartName:f}=e,h=t,m=n,g=r;if(!u||!h||f!=="ScatterChart"&&p!=="axis")return null;var x,S;if(f==="ScatterChart")x=h,S=Z4;else if(f==="BarChart")x=J4(l,h,i,s),S=ST;else if(l==="radial"){var{cx:A,cy:C,radius:P,startAngle:T,endAngle:O}=AT(h);x={cx:A,cy:C,startAngle:T,endAngle:O,innerRadius:P,outerRadius:P},S=CT}else x={points:k5(l,h,i)},S=gT;var k=typeof u=="object"&&"className"in u?u.className:void 0,N=Wd(Wd(Wd(Wd({stroke:"#ccc",pointerEvents:"none"},i),x),Rt(u,!1)),{},{payload:m,payloadIndex:g,className:et("recharts-tooltip-cursor",k)});return E.isValidElement(u)?E.cloneElement(u,N):E.createElement(S,N)}function NU(e){var t=bU(),n=dT(),r=bv(),i=xU();return E.createElement(DU,O0({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var TD=E.createContext(null),kU=()=>E.useContext(TD),py={exports:{}},wP;function jU(){return wP||(wP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,f,h){this.fn=p,this.context=f,this.once=h||!1}function s(p,f,h,m,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,m||p,g),S=n?n+f:f;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],x]:p._events[S].push(x):(p._events[S]=x,p._eventsCount++),p}function l(p,f){--p._eventsCount===0?p._events=new r:delete p._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,m;if(this._eventsCount===0)return f;for(m in h=this._events)t.call(h,m)&&f.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=n?n+f:f,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,x=m.length,S=new Array(x);g<x;g++)S[g]=m[g].fn;return S},u.prototype.listenerCount=function(f){var h=n?n+f:f,m=this._events[h];return m?m.fn?1:m.length:0},u.prototype.emit=function(f,h,m,g,x,S){var A=n?n+f:f;if(!this._events[A])return!1;var C=this._events[A],P=arguments.length,T,O;if(C.fn){switch(C.once&&this.removeListener(f,C.fn,void 0,!0),P){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,m),!0;case 4:return C.fn.call(C.context,h,m,g),!0;case 5:return C.fn.call(C.context,h,m,g,x),!0;case 6:return C.fn.call(C.context,h,m,g,x,S),!0}for(O=1,T=new Array(P-1);O<P;O++)T[O-1]=arguments[O];C.fn.apply(C.context,T)}else{var k=C.length,N;for(O=0;O<k;O++)switch(C[O].once&&this.removeListener(f,C[O].fn,void 0,!0),P){case 1:C[O].fn.call(C[O].context);break;case 2:C[O].fn.call(C[O].context,h);break;case 3:C[O].fn.call(C[O].context,h,m);break;case 4:C[O].fn.call(C[O].context,h,m,g);break;default:if(!T)for(N=1,T=new Array(P-1);N<P;N++)T[N-1]=arguments[N];C[O].fn.apply(C[O].context,T)}}return!0},u.prototype.on=function(f,h,m){return s(this,f,h,m,!1)},u.prototype.once=function(f,h,m){return s(this,f,h,m,!0)},u.prototype.removeListener=function(f,h,m,g){var x=n?n+f:f;if(!this._events[x])return this;if(!h)return l(this,x),this;var S=this._events[x];if(S.fn)S.fn===h&&(!g||S.once)&&(!m||S.context===m)&&l(this,x);else{for(var A=0,C=[],P=S.length;A<P;A++)(S[A].fn!==h||g&&!S[A].once||m&&S[A].context!==m)&&C.push(S[A]);C.length?this._events[x]=C.length===1?C[0]:C:l(this,x)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(py)),py.exports}var MU=jU();const RU=Fr(MU);var Kc=new RU,T0="recharts.syncEvent.tooltip",OP="recharts.syncEvent.brush";function _D(e,t){if(t){var n=Number.parseInt(t,10);if(!ar(n))return e?.[n]}}var IU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},DD=sr({name:"options",initialState:IU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),LU=DD.reducer,{createEventEmitter:$U}=DD.actions;function BU(e){return e.tooltip.syncInteraction}var UU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ND=sr({name:"chartData",initialState:UU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:TP,setDataStartEndIndexes:zU,setComputedData:hV}=ND.actions,GU=ND.reducer,HU=["x","y"];function _P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(n),!0).forEach(function(r){qU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qU(e,t,n){return(t=YU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YU(e){var t=FU(e,"string");return typeof t=="symbol"?t:t+""}function FU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VU(e,t){if(e==null)return{};var n,r,i=KU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function KU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var kD=()=>{};function WU(){var e=Pe(Wv),t=Pe(Xv),n=St(),r=Pe(A_),i=Pe(Ka),s=bv(),l=gv(),u=Pe(p=>p.rootProps.className);E.useEffect(()=>{if(e==null)return kD;var p=(f,h,m)=>{if(t!==m&&e===f){if(r==="index"){var g;if(l&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate){var x=h.payload.coordinate,{x:S,y:A}=x,C=VU(x,HU),P=Co(Co(Co({},C),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),T=Co(Co({},h),{},{payload:Co(Co({},h.payload),{},{coordinate:P})});n(T)}else n(h);return}if(i!=null){var O;if(typeof r=="function"){var k={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},N=r(i,k);O=i[N]}else r==="value"&&(O=i.find(se=>String(se.value)===h.payload.label));var{coordinate:D}=h.payload;if(O==null||h.payload.active===!1||D==null||l==null){n(P0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:j,y:R}=D,z=Math.min(j,l.x+l.width),W=Math.min(R,l.y+l.height),H={x:s==="horizontal"?O.coordinate:z,y:s==="horizontal"?W:O.coordinate},q=P0({active:h.payload.active,coordinate:H,dataKey:h.payload.dataKey,index:String(O.index),label:h.payload.label});n(q)}}};return Kc.on(T0,p),()=>{Kc.off(T0,p)}},[u,n,t,e,r,i,s,l])}function XU(){var e=Pe(Wv),t=Pe(Xv),n=St();E.useEffect(()=>{if(e==null)return kD;var r=(i,s,l)=>{t!==l&&e===i&&n(zU(s))};return Kc.on(OP,r),()=>{Kc.off(OP,r)}},[n,t,e])}function QU(){var e=St();E.useEffect(()=>{e($U())},[e]),WU(),XU()}function ZU(e,t,n,r,i,s){var l=Pe(g=>AU(g,e,t)),u=Pe(Xv),p=Pe(Wv),f=Pe(A_),h=Pe(BU),m=h?.active;E.useEffect(()=>{if(!m&&p!=null&&u!=null){var g=P0({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Kc.emit(T0,p,g,u)}},[m,n,l,i,r,u,p,f,s])}function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(r){JU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JU(e,t,n){return(t=ez(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ez(e){var t=tz(e,"string");return typeof t=="symbol"?t:t+""}function tz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nz(e){return e.dataKey}function rz(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(D4,t)}var kP=[],az={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!rl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function hy(e){var t=kr(e,az),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:p,offset:f,payloadUniqBy:h,position:m,reverseDirection:g,useTranslate3d:x,wrapperStyle:S,cursor:A,shared:C,trigger:P,defaultIndex:T,portal:O,axisId:k}=t,N=St(),D=typeof T=="number"?String(T):T;E.useEffect(()=>{N(O6({shared:C,trigger:P,axisId:k,active:n,defaultIndex:D}))},[N,C,P,k,n,D]);var j=gv(),R=mT(),z=A6(C),{activeIndex:W,isActive:H}=Pe(U=>PU(U,z,P,D)),q=Pe(U=>CU(U,z,P,D)),se=Pe(U=>OD(U,z,P,D)),te=Pe(U=>EU(U,z,P,D)),ne=q,L=kU(),ee=n??H,[ce,ye]=j2([ne,ee]),M=z==="axis"?se:void 0;ZU(z,P,te,M,W,ee);var F=O??L;if(F==null)return null;var V=ne??kP;ee||(V=kP),u&&V.length&&(V=T2(ne.filter(U=>U.value!=null&&(U.hide!==!0||t.includeHidden)),h,nz));var ue=V.length>0,ge=E.createElement(L4,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:p,active:ee,coordinate:te,hasPayload:ue,offset:f,position:m,reverseDirection:g,useTranslate3d:x,viewBox:j,wrapperStyle:S,lastBoundingBox:ce,innerRef:ye,hasPortalFromProps:!!O},rz(l,NP(NP({},t),{},{payload:V,label:M,active:ee,coordinate:te,accessibilityLayer:R})));return E.createElement(E.Fragment,null,t2.createPortal(ge,F),ee&&E.createElement(NU,{cursor:A,tooltipEventType:z,coordinate:te,payload:ne,index:W}))}var my={},gy={},yy={},jP;function iz(){return jP||(jP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const p=s!=null&&s.includes("leading"),f=s==null||s.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{f&&h(),A()};let g=null;const x=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},r)},S=()=>{g!==null&&(clearTimeout(g),g=null)},A=()=>{S(),l=void 0,u=null},C=()=>{h()},P=function(...T){if(i?.aborted)return;l=this,u=T;const O=g==null;x(),p&&O&&h()};return P.schedule=x,P.cancel=A,P.flush=C,i?.addEventListener("abort",A,{once:!0}),P}e.debounce=t})(yy)),yy}var MP;function oz(){return MP||(MP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:p}=s,f=Array(2);l&&(f[0]="leading"),u&&(f[1]="trailing");let h,m=null;const g=t.debounce(function(...A){h=r.apply(this,A),m=null},i,{edges:f}),x=function(...A){return p!=null&&(m===null&&(m=Date.now()),Date.now()-m>=p)?(h=r.apply(this,A),m=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,A),h)},S=()=>(g.flush(),h);return x.cancel=g.cancel,x.flush=S,x}e.debounce=n})(gy)),gy}var RP;function sz(){return RP||(RP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oz();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(my)),my}var vy,IP;function lz(){return IP||(IP=1,vy=sz().throttle),vy}var cz=lz();const uz=Fr(cz);var Mc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function LP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function by(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(n),!0).forEach(function(r){dz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dz(e,t,n){return(t=fz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fz(e){var t=pz(e,"string");return typeof t=="symbol"?t:t+""}function pz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xy=E.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:p,children:f,debounce:h=0,id:m,className:g,onResize:x,style:S={}}=e,A=E.useRef(null),C=E.useRef();C.current=x,E.useImperativeHandle(t,()=>A.current);var[P,T]=E.useState({containerWidth:r.width,containerHeight:r.height}),O=E.useCallback((N,D)=>{T(j=>{var R=Math.round(N),z=Math.round(D);return j.containerWidth===R&&j.containerHeight===z?j:{containerWidth:R,containerHeight:z}})},[]);E.useEffect(()=>{var N=z=>{var W,{width:H,height:q}=z[0].contentRect;O(H,q),(W=C.current)===null||W===void 0||W.call(C,H,q)};h>0&&(N=uz(N,h,{trailing:!0,leading:!1}));var D=new ResizeObserver(N),{width:j,height:R}=A.current.getBoundingClientRect();return O(j,R),D.observe(A.current),()=>{D.disconnect()}},[O,h]);var k=E.useMemo(()=>{var{containerWidth:N,containerHeight:D}=P;if(N<0||D<0)return null;Mc(To(i)||To(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Mc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var j=To(i)?N:i,R=To(s)?D:s;return n&&n>0&&(j?R=j/n:R&&(j=R*n),p&&R>p&&(R=p)),Mc(j>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,R,i,s,l,u,n),E.Children.map(f,z=>E.cloneElement(z,{width:j,height:R,style:by({width:j,height:R},z.props.style)}))},[n,f,s,p,u,l,P,i]);return E.createElement("div",{id:m?"".concat(m):void 0,className:et("recharts-responsive-container",g),style:by(by({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:p}),ref:A},E.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),el=e=>null;el.displayName="Cell";function hz(e,t,n){return(t=mz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mz(e){var t=gz(e,"string");return typeof t=="symbol"?t:t+""}function gz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yz{constructor(t){hz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(n),!0).forEach(function(r){bz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bz(e,t,n){return(t=xz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xz(e){var t=Sz(e,"string");return typeof t=="symbol"?t:t+""}function Sz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Az={cacheSize:2e3,enableCache:!0},jD=vz({},Az),BP=new yz(jD.cacheSize),Ez={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UP="recharts_measurement_span";function Cz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var zP=(e,t)=>{try{var n=document.getElementById(UP);n||(n=document.createElement("span"),n.setAttribute("id",UP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Ez,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Rc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||rl.isSsr)return{width:0,height:0};if(!jD.enableCache)return zP(t,n);var r=Cz(t,n),i=BP.get(r);if(i)return i;var s=zP(t,n);return BP.set(r,s),s},GP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Pz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,wz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,MD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Oz=Object.keys(MD),$s="NaN";function Tz(e,t){return e*MD[t]}class $n{static parse(t){var n,[,r,i]=(n=wz.exec(t))!==null&&n!==void 0?n:[];return new $n(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,ar(t)&&(this.unit=""),n!==""&&!Pz.test(n)&&(this.num=NaN,this.unit=""),Oz.includes(n)&&(this.num=Tz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new $n(NaN,""):new $n(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new $n(NaN,""):new $n(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new $n(NaN,""):new $n(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new $n(NaN,""):new $n(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ar(this.num)}}function RD(e){if(e.includes($s))return $s;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=GP.exec(t))!==null&&n!==void 0?n:[],l=$n.parse(r??""),u=$n.parse(s??""),p=i==="*"?l.multiply(u):l.divide(u);if(p.isNaN())return $s;t=t.replace(GP,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,h,m,g]=(f=HP.exec(t))!==null&&f!==void 0?f:[],x=$n.parse(h??""),S=$n.parse(g??""),A=m==="+"?x.add(S):x.subtract(S);if(A.isNaN())return $s;t=t.replace(HP,A.toString())}return t}var qP=/\(([^()]*)\)/;function _z(e){for(var t=e,n;(n=qP.exec(t))!=null;){var[,r]=n;t=t.replace(qP,RD(r))}return t}function Dz(e){var t=e.replace(/\s+/g,"");return t=_z(t),t=RD(t),t}function Nz(e){try{return Dz(e)}catch{return $s}}function Sy(e){var t=Nz(e.slice(5,-1));return t===$s?"":t}var kz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jz=["dx","dy","angle","className","breakAll"];function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_0.apply(null,arguments)}function YP(e,t){if(e==null)return{};var n,r,i=Mz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Mz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ID=/[ \f\n\r\t\v\u2028\u2029]+/,LD=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];en(t)||(n?i=t.toString().split(""):i=t.toString().split(ID));var s=i.map(u=>({word:u,width:Rc(u,r).width})),l=n?0:Rc("",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},Rz=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:p}=e,f=Oe(s),h=l,m=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce((q,se)=>{var{word:te,width:ne}=se,L=q[q.length-1];if(L&&(r==null||i||L.width+ne+n<Number(r)))L.words.push(te),L.width+=ne+n;else{var ee={words:[te],width:ne};q.push(ee)}return q},[])},g=m(t),x=W=>W.reduce((H,q)=>H.width>q.width?H:q);if(!f||i)return g;var S=g.length>s||x(g).width>Number(r);if(!S)return g;for(var A="",C=W=>{var H=h.slice(0,W),q=LD({breakAll:p,style:u,children:H+A}).wordsWithComputedWidth,se=m(q),te=se.length>s||x(se).width>Number(r);return[te,se]},P=0,T=h.length-1,O=0,k;P<=T&&O<=h.length-1;){var N=Math.floor((P+T)/2),D=N-1,[j,R]=C(D),[z]=C(N);if(!j&&!z&&(P=N+1),j&&z&&(T=N-1),!j&&z){k=R;break}O++}return k||g},FP=e=>{var t=en(e)?[]:e.toString().split(ID);return[{words:t}]},Iz=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!rl.isSsr){var u,p,f=LD({breakAll:s,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:m}=f;u=h,p=m}else return FP(r);return Rz({breakAll:s,children:r,maxLines:l,style:i},u,p,t,n)}return FP(r)},VP="#808080",Dp=E.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:p="end",fill:f=VP}=e,h=YP(e,kz),m=E.useMemo(()=>Iz({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:x,angle:S,className:A,breakAll:C}=h,P=YP(h,jz);if(!ca(n)||!ca(r)||m.length===0)return null;var T=n+(Oe(g)?g:0),O=r+(Oe(x)?x:0),k;switch(p){case"start":k=Sy("calc(".concat(s,")"));break;case"middle":k=Sy("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:k=Sy("calc(".concat(m.length-1," * -").concat(i,")"));break}var N=[];if(l){var D=m[0].width,{width:j}=h;N.push("scale(".concat(Oe(j)?j/D:1,")"))}return S&&N.push("rotate(".concat(S,", ").concat(T,", ").concat(O,")")),N.length&&(P.transform=N.join(" ")),E.createElement("text",_0({},Rt(P,!0),{ref:t,x:T,y:O,className:et("recharts-text",A),textAnchor:u,fill:f.includes("url")?VP:f}),m.map((R,z)=>{var W=R.words.join(C?"":" ");return E.createElement("tspan",{x:T,dy:z===0?k:i,key:"".concat(W,"-").concat(z)},W)}))});Dp.displayName="Text";var Lz=["labelRef"];function $z(e,t){if(e==null)return{};var n,r,i=Bz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function KP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(n),!0).forEach(function(r){Uz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uz(e,t,n){return(t=zz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zz(e){var t=Gz(e,"string");return typeof t=="symbol"?t:t+""}function Gz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ra.apply(null,arguments)}var $D=E.createContext(null),Hz=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=E.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return E.createElement($D.Provider,{value:l},s)},BD=()=>{var e=E.useContext($D),t=gv();return e||t},qz=E.createContext(null),Yz=()=>{var e=E.useContext(qz),t=Pe(O_);return e||t},Fz=e=>{var{value:t,formatter:n}=e,r=en(e.children)?t:e.children;return typeof n=="function"?n(r):r},Tb=e=>e!=null&&typeof e=="function",Vz=(e,t)=>{var n=Jt(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Kz=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:p,innerRadius:f,outerRadius:h,startAngle:m,endAngle:g,clockWise:x}=i,S=(f+h)/2,A=Vz(m,g),C=A>=0?1:-1,P,T;switch(t){case"insideStart":P=m+C*s,T=x;break;case"insideEnd":P=g-C*s,T=!x;break;case"end":P=g+C*s,T=x;break;default:throw new Error("Unsupported position ".concat(t))}T=A<=0?T:!T;var O=It(u,p,S,P),k=It(u,p,S,P+(T?1:-1)*359),N="M".concat(O.x,",").concat(O.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(T?0:1,`,
    `).concat(k.x,",").concat(k.y),D=en(e.id)?Bc("recharts-radial-line-"):e.id;return E.createElement("text",Ra({},r,{dominantBaseline:"central",className:et("recharts-radial-bar-label",l)}),E.createElement("defs",null,E.createElement("path",{id:D,d:N})),E.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Wz=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:p}=e,f=(u+p)/2;if(n==="outside"){var{x:h,y:m}=It(r,i,l+t,f);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+l)/2,{x,y:S}=It(r,i,g,f);return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},UD=e=>"cx"in e&&Oe(e.cx),Xz=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!UD(n)&&(s=n);var{x:l,y:u,width:p,height:f}=t,h=f>=0?1:-1,m=h*r,g=h>0?"end":"start",x=h>0?"start":"end",S=p>=0?1:-1,A=S*r,C=S>0?"end":"start",P=S>0?"start":"end";if(i==="top"){var T={x:l+p/2,y:u-h*r,textAnchor:"middle",verticalAnchor:g};return _t(_t({},T),s?{height:Math.max(u-s.y,0),width:p}:{})}if(i==="bottom"){var O={x:l+p/2,y:u+f+m,textAnchor:"middle",verticalAnchor:x};return _t(_t({},O),s?{height:Math.max(s.y+s.height-(u+f),0),width:p}:{})}if(i==="left"){var k={x:l-A,y:u+f/2,textAnchor:C,verticalAnchor:"middle"};return _t(_t({},k),s?{width:Math.max(k.x-s.x,0),height:f}:{})}if(i==="right"){var N={x:l+p+A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return _t(_t({},N),s?{width:Math.max(s.x+s.width-N.x,0),height:f}:{})}var D=s?{width:p,height:f}:{};return i==="insideLeft"?_t({x:l+A,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},D):i==="insideRight"?_t({x:l+p-A,y:u+f/2,textAnchor:C,verticalAnchor:"middle"},D):i==="insideTop"?_t({x:l+p/2,y:u+m,textAnchor:"middle",verticalAnchor:x},D):i==="insideBottom"?_t({x:l+p/2,y:u+f-m,textAnchor:"middle",verticalAnchor:g},D):i==="insideTopLeft"?_t({x:l+A,y:u+m,textAnchor:P,verticalAnchor:x},D):i==="insideTopRight"?_t({x:l+p-A,y:u+m,textAnchor:C,verticalAnchor:x},D):i==="insideBottomLeft"?_t({x:l+A,y:u+f-m,textAnchor:P,verticalAnchor:g},D):i==="insideBottomRight"?_t({x:l+p-A,y:u+f-m,textAnchor:C,verticalAnchor:g},D):i&&typeof i=="object"&&(Oe(i.x)||To(i.x))&&(Oe(i.y)||To(i.y))?_t({x:l+Sn(i.x,p),y:u+Sn(i.y,f),textAnchor:"end",verticalAnchor:"end"},D):_t({x:l+p/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},D)},Qz={offset:5};function Oi(e){var t=kr(e,Qz),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:p,labelRef:f}=t,h=Yz(),m=BD(),g=r==="center"?m:h??m,x=n||g;if(!x||en(i)&&en(s)&&!E.isValidElement(l)&&typeof l!="function")return null;var S=_t(_t({},t),{},{viewBox:x});if(E.isValidElement(l)){var{labelRef:A}=S,C=$z(S,Lz);return E.cloneElement(l,C)}var P;if(typeof l=="function"){if(P=E.createElement(l,S),E.isValidElement(P))return P}else P=Fz(t);var T=UD(x),O=Rt(t,!0);if(T&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Kz(t,r,P,O,x);var k=T?Wz(x,t.offset,t.position):Xz(t,x);return E.createElement(Dp,Ra({ref:f,className:et("recharts-label",u)},O,k,{breakAll:p}),P)}Oi.displayName="Label";var Zz=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?E.createElement(Oi,Ra({key:"label-implicit"},r)):ca(e)?E.createElement(Oi,Ra({key:"label-implicit",value:e},r)):E.isValidElement(e)?e.type===Oi?E.cloneElement(e,_t({key:"label-implicit"},r)):E.createElement(Oi,Ra({key:"label-implicit",content:e},r)):Tb(e)?E.createElement(Oi,Ra({key:"label-implicit",content:e},r)):e&&typeof e=="object"?E.createElement(Oi,Ra({},e,{key:"label-implicit"},r)):null};function Jz(e){var{label:t}=e,n=BD();return Zz(t,n)||null}var Ay={},Ey={},WP;function eG(){return WP||(WP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Ey)),Ey}var Cy={},XP;function tG(){return XP||(XP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Cy)),Cy}var QP;function nG(){return QP||(QP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eG(),n=tG(),r=ov();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Ay)),Ay}var Py,ZP;function rG(){return ZP||(ZP=1,Py=nG().last),Py}var aG=rG();const iG=Fr(aG);var oG=["valueAccessor"],sG=["dataKey","clockWise","id","textBreakAll"];function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gf.apply(null,arguments)}function JP(e,t){if(e==null)return{};var n,r,i=lG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var cG=e=>Array.isArray(e.value)?iG(e.value):e.value,zD=E.createContext(void 0),uG=zD.Provider,GD=E.createContext(void 0),dG=GD.Provider;function fG(){return E.useContext(zD)}function pG(){return E.useContext(GD)}function sf(e){var{valueAccessor:t=cG}=e,n=JP(e,oG),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=JP(n,sG),p=fG(),f=pG(),h=p||f;return!h||!h.length?null:E.createElement(zn,{className:"recharts-label-list"},h.map((m,g)=>{var x,S=en(r)?t(m,g):gt(m&&m.payload,r),A=en(s)?{}:{id:"".concat(s,"-").concat(g)};return E.createElement(Oi,Gf({},Rt(m,!0),u,A,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(g),index:g}))}))}sf.displayName="LabelList";function HD(e){var{label:t}=e;return t?t===!0?E.createElement(sf,{key:"labelList-implicit"}):E.isValidElement(t)||Tb(t)?E.createElement(sf,{key:"labelList-implicit",content:t}):typeof t=="object"?E.createElement(sf,Gf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var qD=e=>e.graphicalItems.polarItems,hG=J([vt,iu],nb),_b=J([qD,Dt,hG],ab),mG=J([_b],ib),Db=J([mG,qv],ob),gG=J([Db,Dt,_b],lb),yG=J([Db,Dt,_b],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=gt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:gt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),ew=()=>{},vG=J([Dt,V_,ew,yG,ew,Ve,vt],ub),YD=J([Dt,Ve,Db,gG,au,vt,vG],db),bG=J([YD,Dt,cl],hb);J([Dt,YD,bG,vt],gb);var xG={radiusAxis:{},angleAxis:{}},FD=sr({name:"polarAxis",initialState:xG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:mV,removeRadiusAxis:gV,addAngleAxis:yV,removeAngleAxis:vV}=FD.actions,SG=FD.reducer;function tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tw(Object(n),!0).forEach(function(r){AG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AG(e,t,n){return(t=EG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EG(e){var t=CG(e,"string");return typeof t=="symbol"?t:t+""}function CG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PG=(e,t)=>t,Nb=J([qD,PG],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),wG=[],kb=(e,t,n)=>n?.length===0?wG:n,VD=J([qv,Nb,kb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>nw(nw({},t.presentationProps),s.props))),i!=null)return i}}),OG=J([VD,Nb,kb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=gt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:sp(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),TG=J([VD,Nb,kb,Yt],(e,t,n,r)=>{if(!(t==null||e==null))return O7({offset:r,pieSettings:t,displayedData:e,cells:n})}),wy={},rw;function _G(){return rw||(rw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(wy)),wy}var Oy,aw;function DG(){return aw||(aw=1,Oy=_G().isPlainObject),Oy}var NG=DG();const kG=Fr(NG);function iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ow(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(n),!0).forEach(function(r){jG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jG(e,t,n){return(t=MG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MG(e){var t=RG(e,"string");return typeof t=="symbol"?t:t+""}function RG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hf.apply(null,arguments)}var sw=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},IG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LG=e=>{var t=kr(e,IG),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:p,animationDuration:f,animationBegin:h,isUpdateAnimationActive:m}=t,g=E.useRef(),[x,S]=E.useState(-1),A=E.useRef(i),C=E.useRef(s),P=E.useRef(l),T=E.useRef(n),O=E.useRef(r),k=hp(e,"trapezoid-");if(E.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var te=g.current.getTotalLength();te&&S(te)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var N=et("recharts-trapezoid",u);if(!m)return E.createElement("g",null,E.createElement("path",Hf({},Rt(t,!0),{className:N,d:sw(n,r,i,s,l)})));var D=A.current,j=C.current,R=P.current,z=T.current,W=O.current,H="0px ".concat(x===-1?1:x,"px"),q="".concat(x,"px 0px"),se=yT(["strokeDasharray"],f,p);return E.createElement(pp,{animationId:k,key:k,canBegin:x>0,duration:f,easing:p,isActive:m,begin:h},te=>{var ne=pn(D,i,te),L=pn(j,s,te),ee=pn(R,l,te),ce=pn(z,n,te),ye=pn(W,r,te);g.current&&(A.current=ne,C.current=L,P.current=ee,T.current=ce,O.current=ye);var M=te>0?{transition:se,strokeDasharray:q}:{strokeDasharray:H};return E.createElement("path",Hf({},Rt(t,!0),{className:N,d:sw(ce,ye,ne,L,ee),ref:g,style:ow(ow({},M),t.style)}))})},$G=["option","shapeType","propTransformer","activeClassName","isActive"];function BG(e,t){if(e==null)return{};var n,r,i=UG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(r){zG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zG(e,t,n){return(t=GG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GG(e){var t=HG(e,"string");return typeof t=="symbol"?t:t+""}function HG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qG(e,t){return qf(qf({},t),e)}function YG(e,t){return e==="symbols"}function cw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return E.createElement(ST,n);case"trapezoid":return E.createElement(LG,n);case"sector":return E.createElement(CT,n);case"symbols":if(YG(t))return E.createElement(rv,n);break;default:return null}}function FG(e){return E.isValidElement(e)?e.props:e}function KD(e){var{option:t,shapeType:n,propTransformer:r=qG,activeClassName:i="recharts-active-shape",isActive:s}=e,l=BG(e,$G),u;if(E.isValidElement(t))u=E.cloneElement(t,qf(qf({},l),FG(t)));else if(typeof t=="function")u=t(l);else if(kG(t)&&typeof t!="boolean"){var p=r(t,l);u=E.createElement(cw,{shapeType:n,elementProps:p})}else{var f=l;u=E.createElement(cw,{shapeType:n,elementProps:f})}return s?E.createElement(zn,{className:i},u):u}var jb=(e,t)=>{var n=St();return(r,i)=>s=>{e?.(r,i,s),n(cD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Mb=e=>{var t=St();return(n,r)=>i=>{e?.(n,r,i),t(T6())}},Rb=(e,t)=>{var n=St();return(r,i)=>s=>{e?.(r,i,s),n(_6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function WD(e){var{fn:t,args:n}=e,r=St(),i=Nr();return E.useEffect(()=>{if(!i){var s=t(n);return r(P6(s)),()=>{r(w6(s))}}},[t,n,r,i]),null}var XD=()=>{};function VG(e){var{legendPayload:t}=e,n=St(),r=Nr();return E.useEffect(()=>r?XD:(n(pT(t)),()=>{n(hT(t))}),[n,r,t]),null}function KG(e){var{legendPayload:t}=e,n=St(),r=Pe(Ve);return E.useEffect(()=>r!=="centric"&&r!=="radial"?XD:(n(pT(t)),()=>{n(hT(t))}),[n,r,t]),null}var Ty,WG=()=>{var[e]=E.useState(()=>Bc("uid-"));return e},XG=(Ty=Qk.useId)!==null&&Ty!==void 0?Ty:WG;function QG(e,t){var n=XG();return t||(e?"".concat(e,"-").concat(n):n)}var ZG=E.createContext(void 0),QD=e=>{var{id:t,type:n,children:r}=e,i=QG("recharts-".concat(n),t);return E.createElement(ZG.Provider,{value:i},r(i))},JG={cartesianItems:[],polarItems:[]},ZD=sr({name:"graphicalItems",initialState:JG,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=$a(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=$a(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=$a(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:e7,replaceCartesianGraphicalItem:t7,removeCartesianGraphicalItem:n7,addPolarGraphicalItem:r7,removePolarGraphicalItem:a7}=ZD.actions,i7=ZD.reducer;function o7(e){var t=St(),n=E.useRef(null);return E.useEffect(()=>{n.current===null?t(e7(e)):n.current!==e&&t(t7({prev:n.current,next:e})),n.current=e},[t,e]),E.useEffect(()=>()=>{n.current&&(t(n7(n.current)),n.current=null)},[t]),null}function s7(e){var t=St();return E.useEffect(()=>(t(r7(e)),()=>{t(a7(e))}),[t,e]),null}var l7=["onMouseEnter","onClick","onMouseLeave"],c7=["id"],u7=["id"];function Ib(e,t){if(e==null)return{};var n,r,i=d7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uw(Object(n),!0).forEach(function(r){f7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f7(e,t,n){return(t=p7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p7(e){var t=h7(e,"string");return typeof t=="symbol"?t:t+""}function h7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(null,arguments)}function m7(e){var t=E.useMemo(()=>Z0(e.children,el),[e.children]),n=Pe(r=>OG(r,e.id,t));return n==null?null:E.createElement(KG,{legendPayload:n})}function g7(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:p,tooltipType:f}=e;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:sp(u,t),hide:p,type:f,color:l,unit:""}}}var y7=(e,t)=>e>t?"start":e<t?"end":"middle",v7=(e,t,n)=>Sn(typeof t=="function"?t(e):t,n,n*.8),b7=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=aT(s,l),p=i+Sn(e.cx,s,s/2),f=r+Sn(e.cy,l,l/2),h=Sn(e.innerRadius,u,0),m=v7(n,e.outerRadius,u),g=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:p,cy:f,innerRadius:h,outerRadius:m,maxRadius:g}},x7=(e,t)=>{var n=Jt(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function S7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var A7=(e,t)=>{if(E.isValidElement(e))return E.cloneElement(e,t);if(typeof e=="function")return e(t);var n=et("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return E.createElement(gT,ji({},t,{type:"linear",className:n}))},E7=(e,t,n)=>{if(E.isValidElement(e))return E.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),E.isValidElement(r)))return r;var i=et("recharts-pie-label-text",S7(e));return E.createElement(Dp,ji({},t,{alignmentBaseline:"middle",className:i}),r)};function C7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=qo(n),p=Rt(i,!1),f=Rt(s,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((g,x)=>{var S=(g.startAngle+g.endAngle)/2,A=It(g.cx,g.cy,g.outerRadius+h,S),C=mt(mt(mt(mt({},u),g),{},{stroke:"none"},p),{},{index:x,textAnchor:y7(A.x,g.cx)},A),P=mt(mt(mt(mt({},u),g),{},{fill:"none",stroke:g.fill},f),{},{index:x,points:[It(g.cx,g.cy,g.outerRadius,S),A],key:"line"});return E.createElement(zn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},s&&A7(s,P),E7(i,C,gt(g,l)))});return E.createElement(zn,{className:"recharts-pie-labels"},m)}function P7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(HD,{label:n.label}):E.createElement(C7,{sectors:t,props:n,showLabels:r})}function w7(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=Pe(Uo),{onMouseEnter:l,onClick:u,onMouseLeave:p}=i,f=Ib(i,l7),h=jb(l,i.dataKey),m=Mb(p),g=Rb(u,i.dataKey);return t==null||t.length===0?null:E.createElement(E.Fragment,null,t.map((x,S)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===s,C=s?r:null,P=A?n:C,T=mt(mt({},x),{},{stroke:x.stroke,tabIndex:-1,[cT]:S,[uT]:i.dataKey});return E.createElement(zn,ji({tabIndex:-1,className:"recharts-pie-sector"},Xc(f,x,S),{onMouseEnter:h(x,S),onMouseLeave:m(x,S),onClick:g(x,S),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(S)}),E.createElement(KD,ji({option:P,isActive:A,shapeType:"sector"},T)))}))}function O7(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:p,dataKey:f,nameKey:h,tooltipType:m}=n,g=Math.abs(n.minAngle),x=x7(u,p),S=Math.abs(x),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(D=>gt(D,f,0)!==0).length,P=(S>=360?C:C-1)*A,T=S-C*g-P,O=r.reduce((D,j)=>{var R=gt(j,f,0);return D+(Oe(R)?R:0)},0),k;if(O>0){var N;k=r.map((D,j)=>{var R=gt(D,f,0),z=gt(D,h,j),W=b7(n,s,D),H=(Oe(R)?R:0)/O,q,se=mt(mt({},D),i&&i[j]&&i[j].props);j?q=N.endAngle+Jt(x)*A*(R!==0?1:0):q=u;var te=q+Jt(x)*((R!==0?g:0)+H*T),ne=(q+te)/2,L=(W.innerRadius+W.outerRadius)/2,ee=[{name:z,value:R,payload:se,dataKey:f,type:m}],ce=It(W.cx,W.cy,L,ne);return N=mt(mt(mt(mt({},n.presentationProps),{},{percent:H,cornerRadius:l,name:z,tooltipPayload:ee,midAngle:ne,middleRadius:L,tooltipPosition:ce},se),W),{},{value:gt(D,f),startAngle:q,endAngle:te,payload:se,paddingAngle:Jt(x)*A}),N})}return k}function T7(e){var{showLabels:t,sectors:n,children:r}=e,i=E.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return E.createElement(dG,{value:t?i:void 0},r)}function _7(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:p,inactiveShape:f,onAnimationStart:h,onAnimationEnd:m}=t,g=hp(t,"recharts-pie-"),x=n.current,[S,A]=E.useState(!1),C=E.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),P=E.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return E.createElement(T7,{showLabels:!S,sectors:r},E.createElement(pp,{animationId:g,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:P,onAnimationEnd:C,key:g},T=>{var O=[],k=r&&r[0],N=k?.startAngle;return r?.forEach((D,j)=>{var R=x&&x[j],z=j>0?Io(D,"paddingAngle",0):0;if(R){var W=pn(R.endAngle-R.startAngle,D.endAngle-D.startAngle,T),H=mt(mt({},D),{},{startAngle:N+z,endAngle:N+W+z});O.push(H),N=H.endAngle}else{var{endAngle:q,startAngle:se}=D,te=pn(0,q-se,T),ne=mt(mt({},D),{},{startAngle:N+z,endAngle:N+te+z});O.push(ne),N=ne.endAngle}}),n.current=O,E.createElement(zn,null,E.createElement(w7,{sectors:O,activeShape:p,inactiveShape:f,allOtherPieProps:t}))}),E.createElement(P7,{showLabels:!S,sectors:r,props:t}),t.children)}var D7={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!rl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function N7(e){var{id:t}=e,n=Ib(e,c7),{hide:r,className:i,rootTabIndex:s}=e,l=E.useMemo(()=>Z0(e.children,el),[e.children]),u=Pe(h=>TG(h,t,l)),p=E.useRef(null),f=et("recharts-pie",i);return r||u==null?(p.current=null,E.createElement(zn,{tabIndex:s,className:f})):E.createElement(E.Fragment,null,E.createElement(WD,{fn:g7,args:mt(mt({},e),{},{sectors:u})}),E.createElement(zn,{tabIndex:s,className:f},E.createElement(_7,{props:mt(mt({},n),{},{sectors:u}),previousSectorsRef:p})))}function D0(e){var t=kr(e,D7),{id:n}=t,r=Ib(t,u7),i=qo(r);return E.createElement(QD,{id:n,type:"pie"},s=>E.createElement(E.Fragment,null,E.createElement(s7,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),E.createElement(m7,ji({},r,{id:s})),E.createElement(N7,ji({},r,{id:s}))))}D0.displayName="Pie";function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(r){k7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k7(e,t,n){return(t=j7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j7(e){var t=M7(e,"string");return typeof t=="symbol"?t:t+""}function M7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R7={xAxis:{},yAxis:{},zAxis:{}},JD=sr({name:"cartesianAxis",initialState:R7,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=fw(fw({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:I7,removeXAxis:L7,addYAxis:$7,removeYAxis:B7,addZAxis:bV,removeZAxis:xV,updateYAxisWidth:U7}=JD.actions,z7=JD.reducer,G7=J([Yt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),H7=J([G7,Ya,Fa],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),eN=()=>Pe(H7),q7="Invariant failed";function Y7(e,t){throw new Error(q7)}var F7=["x","y"];function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N0.apply(null,arguments)}function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){V7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V7(e,t,n){return(t=K7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K7(e){var t=W7(e,"string");return typeof t=="symbol"?t:t+""}function W7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X7(e,t){if(e==null)return{};var n,r,i=Q7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Q7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Z7(e,t){var{x:n,y:r}=e,i=X7(e,F7),s="".concat(n),l=parseInt(s,10),u="".concat(r),p=parseInt(u,10),f="".concat(t.height||i.height),h=parseInt(f,10),m="".concat(t.width||i.width),g=parseInt(m,10);return Oc(Oc(Oc(Oc(Oc({},t),i),l?{x:l}:{}),p?{y:p}:{}),{},{height:h,width:g,name:t.name,radius:t.radius})}function Lb(e){return E.createElement(KD,N0({shapeType:"rectangle",propTransformer:Z7,activeClassName:"recharts-active-bar"},e))}var J7=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Oe(t))return t;var s=Oe(r)||en(r);return s?t(r,i):(s||Y7(),n)}},e9={},tN=sr({name:"errorBars",initialState:e9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:SV,replaceErrorBar:AV,removeErrorBar:EV}=tN.actions,t9=tN.reducer,n9=["children"];function r9(e,t){if(e==null)return{};var n,r,i=a9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var i9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},o9=E.createContext(i9);function s9(e){var{children:t}=e,n=r9(e,n9);return E.createElement(o9.Provider,{value:n},t)}function nN(e,t){var n,r,i=Pe(f=>Bi(f,e)),s=Pe(f=>Ui(f,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Jn.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:er.allowDataOverflow,p=l||u;return{needClip:p,needClipX:l,needClipY:u}}function l9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=eN(),{needClipX:s,needClipY:l,needClip:u}=nN(t,n);if(!u)return null;var{x:p,y:f,width:h,height:m}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:s?p:p-h/2,y:l?f:f-m/2,width:s?h:h*2,height:l?m:m*2}))}var c9=["onMouseEnter","onMouseLeave","onClick"],u9=["value","background","tooltipPosition"],d9=["id"],f9=["onMouseEnter","onClick","onMouseLeave"];function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(null,arguments)}function hw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(n),!0).forEach(function(r){p9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p9(e,t,n){return(t=h9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h9(e){var t=m9(e,"string");return typeof t=="symbol"?t:t+""}function m9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yf(e,t){if(e==null)return{};var n,r,i=g9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function g9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var y9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:sp(n,t),payload:e}]};function v9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:sp(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function b9(e){var t=Pe(Uo),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:p}=s,f=Yf(s,c9),h=jb(l,r),m=Mb(u),g=Rb(p,r);if(!i||n==null)return null;var x=Rt(i,!1);return E.createElement(E.Fragment,null,n.map((S,A)=>{var{value:C,background:P,tooltipPosition:T}=S,O=Yf(S,u9);if(!P)return null;var k=h(S,A),N=m(S,A),D=g(S,A),j=Tn(Tn(Tn(Tn(Tn({option:i,isActive:String(A)===t},O),{},{fill:"#eee"},P),x),Xc(f,S,A)),{},{onMouseEnter:k,onMouseLeave:N,onClick:D,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return E.createElement(Lb,Mi({key:"background-bar-".concat(A)},j))}))}function x9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Tn(Tn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return E.createElement(uG,{value:t?i:void 0},n)}function S9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=Pe(Uo),p=Pe(AD),f=n&&String(s)===u&&(p==null||l===p),h=f?n:t;return E.createElement(Lb,Mi({},r,i,{isActive:f,option:h,index:s,dataKey:l}))}function A9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return E.createElement(Lb,Mi({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function E9(e){var{data:t,props:n}=e,r=qo(n),{id:i}=r,s=Yf(r,d9),{shape:l,dataKey:u,activeBar:p}=n,{onMouseEnter:f,onClick:h,onMouseLeave:m}=n,g=Yf(n,f9),x=jb(f,u),S=Mb(m),A=Rb(h,u);return t?E.createElement(E.Fragment,null,t.map((C,P)=>E.createElement(zn,Mi({className:"recharts-bar-rectangle"},Xc(g,C,P),{onMouseEnter:x(C,P),onMouseLeave:S(C,P),onClick:A(C,P),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(P)}),p?E.createElement(S9,{shape:l,activeBar:p,baseProps:s,entry:C,index:P,dataKey:u}):E.createElement(A9,{shape:l,baseProps:s,entry:C,index:P,dataKey:u})))):null}function C9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:p,onAnimationEnd:f,onAnimationStart:h}=t,m=n.current,g=hp(t,"recharts-bar-"),[x,S]=E.useState(!1),A=!x,C=E.useCallback(()=>{typeof f=="function"&&f(),S(!1)},[f]),P=E.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return E.createElement(x9,{showLabels:A,rects:r},E.createElement(pp,{animationId:g,begin:l,duration:u,isActive:s,easing:p,onAnimationEnd:C,onAnimationStart:P,key:g},T=>{var O=T===1?r:r?.map((k,N)=>{var D=m&&m[N];if(D)return Tn(Tn({},k),{},{x:pn(D.x,k.x,T),y:pn(D.y,k.y,T),width:pn(D.width,k.width,T),height:pn(D.height,k.height,T)});if(i==="horizontal"){var j=pn(0,k.height,T);return Tn(Tn({},k),{},{y:k.y+k.height-j,height:j})}var R=pn(0,k.width,T);return Tn(Tn({},k),{},{width:R})});return T>0&&(n.current=O??null),O==null?null:E.createElement(zn,null,E.createElement(E9,{props:t,data:O}))}),E.createElement(HD,{label:t.label}),t.children)}function P9(e){var t=E.useRef(null);return E.createElement(C9,{previousRectanglesRef:t,props:e})}var rN=0,w9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:gt(e,t)}};class O9 extends E.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:p,id:f}=this.props;if(t||n==null)return null;var h=et("recharts-bar",i),m=f;return E.createElement(zn,{className:h,id:f},u&&E.createElement("defs",null,E.createElement(l9,{clipPathId:m,xAxisId:s,yAxisId:l})),E.createElement(zn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},E.createElement(b9,{data:n,dataKey:r,background:p,allOtherBarProps:this.props}),E.createElement(P9,this.props)))}}var T9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!rl.isSsr,legendType:"rect",minPointSize:rN,xAxisId:0,yAxisId:0};function _9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:f,isAnimationActive:h}=e,{needClip:m}=nN(t,n),g=bv(),x=Nr(),S=Z0(e.children,el),A=Pe(T=>nH(T,t,n,x,e.id,S));if(g!=="vertical"&&g!=="horizontal")return null;var C,P=A?.[0];return P==null||P.height==null||P.width==null?C=0:C=g==="vertical"?P.height/2:P.width/2,E.createElement(s9,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:w9,errorBarOffset:C},E.createElement(O9,Mi({},e,{layout:g,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:f,isAnimationActive:h})))}function D9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:p,yAxisTicks:f,stackedData:h,displayedData:m,offset:g,cells:x,parentViewBox:S}=e,A=t==="horizontal"?u:l,C=h?A.scale.domain():null,P=F3({numericAxis:A});return m.map((T,O)=>{var k,N,D,j,R,z;h?k=U3(h[O],C):(k=gt(T,n),Array.isArray(k)||(k=[P,k]));var W=J7(r,rN)(k[1],O);if(t==="horizontal"){var H,[q,se]=[u.scale(k[0]),u.scale(k[1])];N=tC({axis:l,ticks:p,bandSize:s,offset:i.offset,entry:T,index:O}),D=(H=se??q)!==null&&H!==void 0?H:void 0,j=i.size;var te=q-se;if(R=ar(te)?0:te,z={x:N,y:g.top,width:j,height:g.height},Math.abs(W)>0&&Math.abs(R)<Math.abs(W)){var ne=Jt(R||W)*(Math.abs(W)-Math.abs(R));D-=ne,R+=ne}}else{var[L,ee]=[l.scale(k[0]),l.scale(k[1])];if(N=L,D=tC({axis:u,ticks:f,bandSize:s,offset:i.offset,entry:T,index:O}),j=ee-L,R=i.size,z={x:g.left,y:D,width:g.width,height:R},Math.abs(W)>0&&Math.abs(j)<Math.abs(W)){var ce=Jt(j||W)*(Math.abs(W)-Math.abs(j));j+=ce}}if(N==null||D==null||j==null||R==null)return null;var ye=Tn(Tn({},T),{},{x:N,y:D,width:j,height:R,value:h?k:k[1],payload:T,background:z,tooltipPosition:{x:N+j/2,y:D+R/2},parentViewBox:S},x&&x[O]&&x[O].props);return ye}).filter(Boolean)}function aN(e){var t=kr(e,T9),n=Nr();return E.createElement(QD,{id:t.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(VG,{legendPayload:y9(t)}),E.createElement(WD,{fn:v9,args:t}),E.createElement(o7,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Y3(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),E.createElement(_9,Mi({},t,{id:r}))))}aN.displayName="Bar";function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){N9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N9(e,t,n){return(t=k9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k9(e){var t=j9(e,"string");return typeof t=="symbol"?t:t+""}function j9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M9=(e,t)=>t,R9=(e,t,n)=>n,I9=(e,t,n,r)=>r,L9=(e,t,n,r,i)=>i,du=J([rb,L9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),$9=J([du],e=>e?.maxBarSize),B9=(e,t,n,r,i,s)=>s,gw=(e,t,n)=>{var r=n??e;if(!en(r))return Sn(r,t,0)},U9=J([Ve,rb,M9,R9,I9],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),z9=(e,t,n,r)=>{var i=Ve(e);return i==="horizontal"?C0(e,"yAxis",n,r):C0(e,"xAxis",t,r)},G9=(e,t,n)=>{var r=Ve(e);return r==="horizontal"?vP(e,"xAxis",t):vP(e,"yAxis",n)},H9=(e,t,n)=>{var r={},i=e.filter(Cp),s=e.filter(f=>f.stackId==null),l=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),u=Object.entries(l).map(f=>{var[h,m]=f,g=m.map(S=>S.dataKey),x=gw(t,n,m[0].barSize);return{stackId:h,dataKeys:g,barSize:x}}),p=s.map(f=>{var h=[f.dataKey].filter(g=>g!=null),m=gw(t,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:m}});return[...u,...p]},q9=J([U9,wB,G9],H9),Y9=(e,t,n,r,i)=>{var s,l,u=du(e,t,n,r,i);if(u!=null){var p=Ve(e),f=x_(e),{maxBarSize:h}=u,m=en(h)?f:h,g,x;return p==="horizontal"?(g=Js(e,"xAxis",t,r),x=Zs(e,"xAxis",t,r)):(g=Js(e,"yAxis",n,r),x=Zs(e,"yAxis",n,r)),(s=(l=hv(g,x,!0))!==null&&l!==void 0?l:m)!==null&&s!==void 0?s:0}},iN=(e,t,n,r)=>{var i=Ve(e),s,l;return i==="horizontal"?(s=Js(e,"xAxis",t,r),l=Zs(e,"xAxis",t,r)):(s=Js(e,"yAxis",n,r),l=Zs(e,"yAxis",n,r)),hv(s,l)};function F9(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=Sn(e,n,0,!0),u,p=[];if(or(r[0].barSize)){var f=!1,h=n/s,m=r.reduce((P,T)=>P+(T.barSize||0),0);m+=(s-1)*l,m>=n&&(m-=(s-1)*l,l=0),m>=n&&h>0&&(f=!0,h*=.9,m=s*h);var g=(n-m)/2>>0,x={offset:g-l,size:0};u=r.reduce((P,T)=>{var O,k={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:x.offset+x.size+l,size:f?h:(O=T.barSize)!==null&&O!==void 0?O:0}},N=[...P,k];return x=N[N.length-1].position,N},p)}else{var S=Sn(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var A=(n-2*S-(s-1)*l)/s;A>1&&(A>>=0);var C=or(i)?Math.min(A,i):A;u=r.reduce((P,T,O)=>[...P,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:S+(A+l)*O+(A-C)/2,size:C}}],p)}return u}}var V9=(e,t,n,r,i,s,l)=>{var u=en(l)?t:l,p=F9(n,r,i!==s?i:s,e,u);return i!==s&&p!=null&&(p=p.map(f=>Xd(Xd({},f),{},{position:Xd(Xd({},f.position),{},{offset:f.position.offset-i/2})}))),p},K9=J([q9,x_,PB,S_,Y9,iN,$9],V9),W9=(e,t,n,r)=>Js(e,"xAxis",t,r),X9=(e,t,n,r)=>Js(e,"yAxis",n,r),Q9=(e,t,n,r)=>Zs(e,"xAxis",t,r),Z9=(e,t,n,r)=>Zs(e,"yAxis",n,r),J9=J([K9,du],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),eH=(e,t)=>{var n=eb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},tH=J([z9,du],eH),nH=J([Yt,mv,W9,X9,Q9,Z9,J9,Ve,Yv,iN,tH,du,B9],(e,t,n,r,i,s,l,u,p,f,h,m,g)=>{var{chartData:x,dataStartIndex:S,dataEndIndex:A}=p;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||f==null)){var{data:C}=m,P;if(C!=null&&C.length>0?P=C:P=x?.slice(S,A+1),P!=null)return D9({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:P,offset:e,cells:g})}}),oN=e=>{var{chartData:t}=e,n=St(),r=Nr();return E.useEffect(()=>r?()=>{}:(n(TP(t)),()=>{n(TP(void 0))}),[t,n,r]),null},yw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},sN=sr({name:"brush",initialState:yw,reducers:{setBrushSettings(e,t){return t.payload==null?yw:t.payload}}}),{setBrushSettings:CV}=sN.actions,rH=sN.reducer;function aH(e,t,n){return(t=iH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iH(e){var t=oH(e,"string");return typeof t=="symbol"?t:t+""}function oH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $b{static create(t){return new $b(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}aH($b,"EPS",1e-4);function sH(e){return(e%180+180)%180}var lH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=sH(i),l=s*Math.PI/180,u=Math.atan(r/n),p=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(p)},cH={dots:[],areas:[],lines:[]},lN=sr({name:"referenceElements",initialState:cH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=$a(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=$a(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=$a(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:PV,removeDot:wV,addArea:OV,removeArea:TV,addLine:_V,removeLine:DV}=lN.actions,uH=lN.reducer,dH=E.createContext(void 0),fH=e=>{var{children:t}=e,[n]=E.useState("".concat(Bc("recharts"),"-clip")),r=eN();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return E.createElement(dH.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function _y(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function cN(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function pH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return lH(r,n)}function hH(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Ff(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function mH(e,t){return cN(e,t+1)}function gH(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,p=0,f=1,h=l,m=function(){var S=r?.[p];if(S===void 0)return{v:cN(r,f)};var A=p,C,P=()=>(C===void 0&&(C=n(S,A)),C),T=S.coordinate,O=p===0||Ff(e,T,P,h,u);O||(p=0,h=l,f+=1),O&&(h=T+e*(P()/2+i),p+=f)},g;f<=s.length;)if(g=m(),g)return g.v;return[]}function vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vw(Object(n),!0).forEach(function(r){yH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yH(e,t,n){return(t=vH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vH(e){var t=bH(e,"string");return typeof t=="symbol"?t:t+""}function bH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xH(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:p}=t,f=function(g){var x=s[g],S,A=()=>(S===void 0&&(S=n(x,g)),S);if(g===l-1){var C=e*(x.coordinate+e*A()/2-p);s[g]=x=vn(vn({},x),{},{tickCoord:C>0?x.coordinate-C*e:x.coordinate})}else s[g]=x=vn(vn({},x),{},{tickCoord:x.coordinate});var P=Ff(e,x.tickCoord,A,u,p);P&&(p=x.tickCoord-e*(A()/2+i),s[g]=vn(vn({},x),{},{isShow:!0}))},h=l-1;h>=0;h--)f(h);return s}function SH(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:p,end:f}=t;if(s){var h=r[u-1],m=n(h,u-1),g=e*(h.coordinate+e*m/2-f);l[u-1]=h=vn(vn({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate});var x=Ff(e,h.tickCoord,()=>m,p,f);x&&(f=h.tickCoord-e*(m/2+i),l[u-1]=vn(vn({},h),{},{isShow:!0}))}for(var S=s?u-1:u,A=function(T){var O=l[T],k,N=()=>(k===void 0&&(k=n(O,T)),k);if(T===0){var D=e*(O.coordinate-e*N()/2-p);l[T]=O=vn(vn({},O),{},{tickCoord:D<0?O.coordinate-D*e:O.coordinate})}else l[T]=O=vn(vn({},O),{},{tickCoord:O.coordinate});var j=Ff(e,O.tickCoord,N,p,f);j&&(p=O.tickCoord+e*(N()/2+i),l[T]=vn(vn({},O),{},{isShow:!0}))},C=0;C<S;C++)A(C);return l}function Bb(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:p,tickFormatter:f,unit:h,angle:m}=e;if(!i||!i.length||!r)return[];if(Oe(p)||rl.isSsr){var g;return(g=mH(i,Oe(p)?p:0))!==null&&g!==void 0?g:[]}var x=[],S=u==="top"||u==="bottom"?"width":"height",A=h&&S==="width"?Rc(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(O,k)=>{var N=typeof f=="function"?f(O.value,k):O.value;return S==="width"?pH(Rc(N,{fontSize:t,letterSpacing:n}),A,m):Rc(N,{fontSize:t,letterSpacing:n})[S]},P=i.length>=2?Jt(i[1].coordinate-i[0].coordinate):1,T=hH(s,P,S);return p==="equidistantPreserveStart"?gH(P,T,C,i,l):(p==="preserveStart"||p==="preserveStartEnd"?x=SH(P,T,C,i,l,p==="preserveStartEnd"):x=xH(P,T,C,i,l),x.filter(O=>O.isShow))}var AH=["viewBox"],EH=["viewBox"];function Bs(){return Bs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bs.apply(null,arguments)}function bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(n),!0).forEach(function(r){Ub(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xw(e,t){if(e==null)return{};var n,r,i=CH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function CH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ub(e,t,n){return(t=PH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PH(e){var t=wH(e,"string");return typeof t=="symbol"?t:t+""}function wH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zi extends E.Component{constructor(t){super(t),this.tickRefs=E.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=xw(t,AH),s=this.props,{viewBox:l}=s,u=xw(s,EH);return!_y(r,l)||!_y(i,u)||!_y(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:p,tickMargin:f}=this.props,h,m,g,x,S,A,C=p?-1:1,P=t.tickSize||u,T=Oe(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":h=m=t.coordinate,x=r+ +!p*s,g=x-C*P,A=g-C*f,S=T;break;case"left":g=x=t.coordinate,m=n+ +!p*i,h=m-C*P,S=h-C*f,A=T;break;case"right":g=x=t.coordinate,m=n+ +p*i,h=m+C*P,S=h+C*f,A=T;break;default:h=m=t.coordinate,x=r+ +p*s,g=x+C*P,A=g+C*f,S=T;break}return{line:{x1:h,y1:g,x2:m,y2:x},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,p=Ht(Ht(Ht({},Rt(this.props,!1)),Rt(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!l||s==="bottom"&&l);p=Ht(Ht({},p),{},{x1:t,y1:n+f*i,x2:t+r,y2:n+f*i})}else{var h=+(s==="left"&&!l||s==="right"&&l);p=Ht(Ht({},p),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return E.createElement("line",Bs({},p,{className:et("recharts-cartesian-axis-line",Io(u,"className"))}))}static renderTickItem(t,n,r){var i,s=et(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(t))i=E.cloneElement(t,Ht(Ht({},n),{},{className:s}));else if(typeof t=="function")i=t(Ht(Ht({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=et(l,t.className)),i=E.createElement(Dp,Bs({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:p,padding:f,tickTextProps:h}=this.props,m=Bb(Ht(Ht({},this.props),{},{ticks:r}),t,n),g=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),S=qo(this.props),A=Rt(l,!1),C=Ht(Ht({},S),{},{fill:"none"},Rt(i,!1)),P=m.map((T,O)=>{var{line:k,tick:N}=this.getTickLineCoord(T),D=Ht(Ht(Ht(Ht({textAnchor:g,verticalAnchor:x},S),{},{stroke:"none",fill:s},A),N),{},{index:O,payload:T,visibleTicksCount:m.length,tickFormatter:u,padding:f},h);return E.createElement(zn,Bs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Xc(this.props,T,O)),i&&E.createElement("line",Bs({},C,k,{className:et("recharts-cartesian-axis-tick-line",Io(i,"className"))})),l&&zi.renderTickItem(l,D,"".concat(typeof u=="function"?u(T.value,O):T.value).concat(p||"")))});return P.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:E.createElement(zn,{className:et("recharts-cartesian-axis",i),ref:u=>{if(u){var p=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(p);var f=p[0];if(f){var h=window.getComputedStyle(f).fontSize,m=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),E.createElement(Hz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},E.createElement(Jz,{label:this.props.label}),this.props.children))}}Ub(zi,"displayName","CartesianAxis");Ub(zi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var OH=["x1","y1","x2","y2","key"],TH=["offset"],_H=["xAxisId","yAxisId"],DH=["xAxisId","yAxisId"];function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(r){NH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NH(e,t,n){return(t=kH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kH(e){var t=jH(e,"string");return typeof t=="symbol"?t:t+""}function jH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},No.apply(null,arguments)}function Vf(e,t){if(e==null)return{};var n,r,i=MH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function MH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var RH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return E.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function uN(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,p=Vf(t,OH),f=qo(p),{offset:h}=f,m=Vf(f,TH);n=E.createElement("line",No({},m,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function IH(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Vf(e,_H),p=i.map((f,h)=>{var m=xn(xn({},u),{},{x1:t,y1:f,x2:t+n,y2:f,key:"line-".concat(h),index:h});return uN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function LH(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Vf(e,DH),p=i.map((f,h)=>{var m=xn(xn({},u),{},{x1:f,y1:t,x2:f,y2:t+n,key:"line-".concat(h),index:h});return uN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function $H(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:p=!0}=e;if(!p||!t||!t.length)return null;var f=u.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var h=f.map((m,g)=>{var x=!f[g+1],S=x?i+l-m:f[g+1]-m;if(S<=0)return null;var A=g%t.length;return E.createElement("rect",{key:"react-".concat(g),y:m,x:r,height:S,width:s,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function BH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:p}=e;if(!t||!n||!n.length)return null;var f=p.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var h=f.map((m,g)=>{var x=!f[g+1],S=x?i+l-m:f[g+1]-m;if(S<=0)return null;var A=g%n.length;return E.createElement("rect",{key:"react-".concat(g),x:m,y:s,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var UH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return oT(Bb(xn(xn(xn({},zi.defaultProps),n),{},{ticks:sT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},zH=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return oT(Bb(xn(xn(xn({},zi.defaultProps),n),{},{ticks:sT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},GH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function dN(e){var t=yv(),n=vv(),r=dT(),i=xn(xn({},kr(e,GH)),{},{x:Oe(e.x)?e.x:r.left,y:Oe(e.y)?e.y:r.top,width:Oe(e.width)?e.width:r.width,height:Oe(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:p,width:f,height:h,syncWithTicks:m,horizontalValues:g,verticalValues:x}=i,S=Nr(),A=Pe(z=>bP(z,"xAxis",s,S)),C=Pe(z=>bP(z,"yAxis",l,S));if(!Oe(f)||f<=0||!Oe(h)||h<=0||!Oe(u)||u!==+u||!Oe(p)||p!==+p)return null;var P=i.verticalCoordinatesGenerator||UH,T=i.horizontalCoordinatesGenerator||zH,{horizontalPoints:O,verticalPoints:k}=i;if((!O||!O.length)&&typeof T=="function"){var N=g&&g.length,D=T({yAxis:C?xn(xn({},C),{},{ticks:N?g:C.ticks}):void 0,width:t,height:n,offset:r},N?!0:m);Mc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(O=D)}if((!k||!k.length)&&typeof P=="function"){var j=x&&x.length,R=P({xAxis:A?xn(xn({},A),{},{ticks:j?x:A.ticks}):void 0,width:t,height:n,offset:r},j?!0:m);Mc(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(k=R)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(RH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement($H,No({},i,{horizontalPoints:O})),E.createElement(BH,No({},i,{verticalPoints:k})),E.createElement(IH,No({},i,{offset:r,horizontalPoints:O,xAxis:A,yAxis:C})),E.createElement(LH,No({},i,{offset:r,verticalPoints:k,xAxis:A,yAxis:C})))}dN.displayName="CartesianGrid";var HH=["children"],qH=["dangerouslySetInnerHTML","ticks"],YH=["id"];function fN(e,t,n){return(t=FH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FH(e){var t=VH(e,"string");return typeof t=="symbol"?t:t+""}function VH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k0.apply(null,arguments)}function j0(e,t){if(e==null)return{};var n,r,i=KH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function KH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function WH(e){var t=St(),n=E.useMemo(()=>{var{children:r}=e,i=j0(e,HH);return i},[e]);return E.useEffect(()=>(t(I7(n)),()=>{t(L7(n))}),[n,t]),e.children}var XH=e=>{var{xAxisId:t,className:n}=e,r=Pe(mv),i=Nr(),s="xAxis",l=Pe(C=>ul(C,s,t,i)),u=Pe(C=>rD(C,s,t,i)),p=Pe(C=>J_(C,t)),f=Pe(C=>g6(C,t)),h=Pe(C=>D_(C,t));if(p==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:g}=e,x=j0(e,qH),{id:S}=h,A=j0(h,YH);return E.createElement(zi,k0({},x,A,{scale:l,x:f.x,y:f.y,width:p.width,height:p.height,className:et("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},QH=e=>{var t,n,r,i,s;return E.createElement(WH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},E.createElement(XH,e))};class zb extends E.Component{render(){return E.createElement(QH,this.props)}}fN(zb,"displayName","XAxis");fN(zb,"defaultProps",{allowDataOverflow:Jn.allowDataOverflow,allowDecimals:Jn.allowDecimals,allowDuplicatedCategory:Jn.allowDuplicatedCategory,height:Jn.height,hide:!1,mirror:Jn.mirror,orientation:Jn.orientation,padding:Jn.padding,reversed:Jn.reversed,scale:Jn.scale,tickCount:Jn.tickCount,type:Jn.type,xAxisId:0});var ZH=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,p=i+s,f=l+p+u+(n?r:0);return Math.round(f)}return 0},JH=["dangerouslySetInnerHTML","ticks"],eq=["id"];function pN(e,t,n){return(t=tq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tq(e){var t=nq(e,"string");return typeof t=="symbol"?t:t+""}function nq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M0(){return M0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M0.apply(null,arguments)}function Aw(e,t){if(e==null)return{};var n,r,i=rq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aq(e){var t=St();return E.useEffect(()=>(t($7(e)),()=>{t(B7(e))}),[e,t]),null}var iq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=E.useRef(null),u=E.useRef(null),p=Pe(mv),f=Nr(),h=St(),m="yAxis",g=Pe(D=>ul(D,m,n,f)),x=Pe(D=>eD(D,n)),S=Pe(D=>y6(D,n)),A=Pe(D=>rD(D,m,n,f)),C=Pe(D=>N_(D,n));if(E.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!x||Tb(s)||E.isValidElement(s)||C==null)){var j=l.current,R=j==null||(D=j.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:z,tickMargin:W}=j.props,H=ZH({ticks:R,label:u.current,labelGapWithTick:5,tickSize:z,tickMargin:W});Math.round(x.width)!==Math.round(H)&&h(U7({id:n,width:H}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,h,s,n,i]),x==null||S==null||C==null)return null;var{dangerouslySetInnerHTML:P,ticks:T}=e,O=Aw(e,JH),{id:k}=C,N=Aw(C,eq);return E.createElement(zi,M0({},O,N,{ref:l,labelRef:u,scale:g,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:x.width,height:x.height,className:et("recharts-".concat(m," ").concat(m),r),viewBox:p,ticks:A}))},oq=e=>{var t,n,r,i,s;return E.createElement(E.Fragment,null,E.createElement(aq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),E.createElement(iq,e))},sq={allowDataOverflow:er.allowDataOverflow,allowDecimals:er.allowDecimals,allowDuplicatedCategory:er.allowDuplicatedCategory,hide:!1,mirror:er.mirror,orientation:er.orientation,padding:er.padding,reversed:er.reversed,scale:er.scale,tickCount:er.tickCount,type:er.type,width:er.width,yAxisId:0};class Gb extends E.Component{render(){return E.createElement(oq,this.props)}}pN(Gb,"displayName","YAxis");pN(Gb,"defaultProps",sq);var Dy={exports:{}},Ny={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function lq(){if(Ew)return Ny;Ew=1;var e=tl();function t(p,f){return p===f&&(p!==0||1/p===1/f)||p!==p&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Ny.useSyncExternalStoreWithSelector=function(p,f,h,m,g){var x=i(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function C(N){if(!P){if(P=!0,T=N,N=m(N),g!==void 0&&S.hasValue){var D=S.value;if(g(D,N))return O=D}return O=N}if(D=O,n(T,N))return D;var j=m(N);return g!==void 0&&g(D,j)?(T=N,D):(T=N,O=j)}var P=!1,T,O,k=h===void 0?null:h;return[function(){return C(f())},k===null?void 0:function(){return C(k())}]},[f,h,m,g]);var A=r(p,x[0],x[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},Ny}var Cw;function cq(){return Cw||(Cw=1,Dy.exports=lq()),Dy.exports}cq();function uq(e){e()}function dq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){uq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Pw={notify(){},get:()=>[]};function fq(e,t){let n,r=Pw,i=0,s=!1;function l(A){h();const C=r.subscribe(A);let P=!1;return()=>{P||(P=!0,C(),m())}}function u(){r.notify()}function p(){S.onStateChange&&S.onStateChange()}function f(){return s}function h(){i++,n||(n=e.subscribe(p),r=dq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Pw)}function g(){s||(s=!0,h())}function x(){s&&(s=!1,m())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:p,isSubscribed:f,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>r};return S}var pq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hq=pq(),mq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",gq=mq(),yq=()=>hq||gq?E.useLayoutEffect:E.useEffect,vq=yq(),bq=Symbol.for("react-redux-context"),xq=typeof globalThis<"u"?globalThis:{};function Sq(){if(!E.createContext)return{};const e=xq[bq]??=new Map;let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var Aq=Sq();function Eq(e){const{children:t,context:n,serverState:r,store:i}=e,s=E.useMemo(()=>{const p=fq(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);vq(()=>{const{subscription:p}=s;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),l!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[s,l]);const u=n||Aq;return E.createElement(u.Provider,{value:s},t)}var Cq=Eq,Pq=(e,t)=>t,Hb=J([Pq,Ve,O_,Vt,vD,Ka,SU,Yt],wU),qb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},hN=_r("mouseClick"),mN=Zc();mN.startListening({actionCreator:hN,effect:(e,t)=>{var n=e.payload,r=Hb(t.getState(),qb(n));r?.activeIndex!=null&&t.dispatch(D6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var R0=_r("mouseMove"),gN=Zc();gN.startListening({actionCreator:R0,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=bb(r,r.tooltip.settings.shared),s=Hb(r,qb(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(dD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(uD()))}});function wq(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var ww={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},yN=sr({name:"rootProps",initialState:ww,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:ww.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Oq=yN.reducer,{updateOptions:Tq}=yN.actions,vN=sr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:_q}=vN.actions,Dq=vN.reducer,bN=_r("keyDown"),xN=_r("focus"),Yb=Zc();Yb.startListening({actionCreator:bN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(xb(i,fl(n))),u=Ka(n);if(s==="Enter"){var p=zf(n,"axis","hover",String(i.index));t.dispatch(w0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:p}));return}var f=S6(n),h=f==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=l+m*h;if(!(u==null||g>=u.length||g<0)){var x=zf(n,"axis","hover",String(g));t.dispatch(w0({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Yb.startListening({actionCreator:xN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=zf(n,"axis","hover",String(s));t.dispatch(w0({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Pr=_r("externalEvent"),SN=Zc();SN.startListening({actionCreator:Pr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:fU(n),activeDataKey:AD(n),activeIndex:Uo(n),activeLabel:SD(n),activeTooltipIndex:Uo(n),isTooltipActive:pU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var Nq=J([dl],e=>e.tooltipItemPayloads),kq=J([Nq,cu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),AN=_r("touchMove"),EN=Zc();EN.startListening({actionCreator:AN,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=bb(r,r.tooltip.settings.shared);if(i==="axis"){var s=Hb(r,qb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(dD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],p=document.elementFromPoint(u.clientX,u.clientY);if(!p||!p.getAttribute)return;var f=p.getAttribute(cT),h=(l=p.getAttribute(uT))!==null&&l!==void 0?l:void 0,m=kq(t.getState(),f,h);t.dispatch(cD({activeDataKey:h,activeIndex:f,activeCoordinate:m}))}}});var jq=R2({brush:rH,cartesianAxis:z7,chartData:GU,errorBars:t9,graphicalItems:i7,layout:C3,legend:h4,options:LU,polarAxis:SG,polarOptions:Dq,referenceElements:uH,rootProps:Oq,tooltip:N6}),Mq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return WL({reducer:jq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([mN.middleware,gN.middleware,Yb.middleware,SN.middleware,EN.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:wq},name:"recharts-".concat(n)}})};function CN(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Nr(),s=E.useRef(null);if(i)return n;s.current==null&&(s.current=Mq(t,r));var l=lv;return E.createElement(Cq,{context:l,store:s.current},n)}function PN(e){var{layout:t,width:n,height:r,margin:i}=e,s=St(),l=Nr();return E.useEffect(()=>{l||(s(S3(t)),s(A3({width:n,height:r})),s(x3(i)))},[s,l,t,n,r,i]),null}function wN(e){var t=St();return E.useEffect(()=>{t(Tq(e))},[t,e]),null}var Rq=["children"];function Iq(e,t){if(e==null)return{};var n,r,i=Lq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Lq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Kf(){return Kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kf.apply(null,arguments)}var $q={width:"100%",height:"100%"},Bq=E.forwardRef((e,t)=>{var n=yv(),r=vv(),i=mT();if(!Vs(n)||!Vs(r))return null;var{children:s,otherAttributes:l,title:u,desc:p}=e,f,h;return typeof l.tabIndex=="number"?f=l.tabIndex:f=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,E.createElement(J0,Kf({},l,{title:u,desc:p,role:h,tabIndex:f,width:n,height:r,style:$q,ref:t}),s)}),Uq=e=>{var{children:t}=e,n=Pe(dp);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return E.createElement(J0,{width:r,height:i,x:l,y:s},t)},Ow=E.forwardRef((e,t)=>{var{children:n}=e,r=Iq(e,Rq),i=Nr();return i?E.createElement(Uq,null,n):E.createElement(Bq,Kf({ref:t},r),n)});function zq(){var e=St(),[t,n]=E.useState(null),r=Pe(J3);return E.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;or(s)&&s!==r&&e(E3(s))}},[t,e,r]),n}function Tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tw(Object(n),!0).forEach(function(r){Hq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hq(e,t,n){return(t=qq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e){var t=Yq(e,"string");return typeof t=="symbol"?t:t+""}function Yq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fq=E.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:p,onMouseEnter:f,onMouseLeave:h,onMouseMove:m,onMouseUp:g,onTouchEnd:x,onTouchMove:S,onTouchStart:A,style:C,width:P}=e,T=St(),[O,k]=E.useState(null),[N,D]=E.useState(null);QU();var j=zq(),R=E.useCallback(V=>{j(V),typeof t=="function"&&t(V),k(V),D(V)},[j,t,k,D]),z=E.useCallback(V=>{T(hN(V)),T(Pr({handler:s,reactEvent:V}))},[T,s]),W=E.useCallback(V=>{T(R0(V)),T(Pr({handler:f,reactEvent:V}))},[T,f]),H=E.useCallback(V=>{T(uD()),T(Pr({handler:h,reactEvent:V}))},[T,h]),q=E.useCallback(V=>{T(R0(V)),T(Pr({handler:m,reactEvent:V}))},[T,m]),se=E.useCallback(()=>{T(xN())},[T]),te=E.useCallback(V=>{T(bN(V.key))},[T]),ne=E.useCallback(V=>{T(Pr({handler:l,reactEvent:V}))},[T,l]),L=E.useCallback(V=>{T(Pr({handler:u,reactEvent:V}))},[T,u]),ee=E.useCallback(V=>{T(Pr({handler:p,reactEvent:V}))},[T,p]),ce=E.useCallback(V=>{T(Pr({handler:g,reactEvent:V}))},[T,g]),ye=E.useCallback(V=>{T(Pr({handler:A,reactEvent:V}))},[T,A]),M=E.useCallback(V=>{T(AN(V)),T(Pr({handler:S,reactEvent:V}))},[T,S]),F=E.useCallback(V=>{T(Pr({handler:x,reactEvent:V}))},[T,x]);return E.createElement(TD.Provider,{value:O},E.createElement(n2.Provider,{value:N},E.createElement("div",{className:et("recharts-wrapper",r),style:Gq({position:"relative",cursor:"default",width:P,height:i},C),onClick:z,onContextMenu:ne,onDoubleClick:L,onFocus:se,onKeyDown:te,onMouseDown:ee,onMouseEnter:W,onMouseLeave:H,onMouseMove:q,onMouseUp:ce,onTouchEnd:F,onTouchMove:M,onTouchStart:ye,ref:R},n)))}),Vq=["children","className","width","height","style","compact","title","desc"];function Kq(e,t){if(e==null)return{};var n,r,i=Wq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ON=E.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:p,desc:f}=e,h=Kq(e,Vq),m=qo(h);return u?E.createElement(Ow,{otherAttributes:m,title:p,desc:f},n):E.createElement(Fq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},E.createElement(Ow,{otherAttributes:m,title:p,desc:f,ref:t},E.createElement(fH,null,n)))}),Xq=["width","height"];function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I0.apply(null,arguments)}function Qq(e,t){if(e==null)return{};var n,r,i=Zq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Zq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Jq={top:5,right:5,bottom:5,left:5},eY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Jq,reverseStackOrder:!1,syncMethod:"index"},tY=E.forwardRef(function(t,n){var r,i=kr(t.categoricalChartProps,eY),{width:s,height:l}=i,u=Qq(i,Xq);if(!Vs(s)||!Vs(l))return null;var{chartName:p,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,categoricalChartProps:g}=t,x={chartName:p,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return E.createElement(CN,{preloadedState:{options:x},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:p},E.createElement(oN,{chartData:g.data}),E.createElement(PN,{width:s,height:l,layout:i.layout,margin:i.margin}),E.createElement(wN,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(ON,I0({},u,{width:s,height:l,ref:n})))}),nY=["axis","item"],rY=E.forwardRef((e,t)=>E.createElement(tY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:nY,tooltipPayloadSearcher:_D,categoricalChartProps:e,ref:t}));function aY(e){var t=St();return E.useEffect(()=>{t(_q(e))},[t,e]),null}var iY=["width","height","layout"];function L0(){return L0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L0.apply(null,arguments)}function oY(e,t){if(e==null)return{};var n,r,i=sY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var lY={top:5,right:5,bottom:5,left:5},cY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},uY=E.forwardRef(function(t,n){var r,i=kr(t.categoricalChartProps,cY),{width:s,height:l,layout:u}=i,p=oY(i,iY);if(!Vs(s)||!Vs(l))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g}=t,x={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return E.createElement(CN,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},E.createElement(oN,{chartData:i.data}),E.createElement(PN,{width:s,height:l,layout:u,margin:i.margin}),E.createElement(wN,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(aY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(ON,L0({width:s,height:l},p,{ref:n})))}),dY=["item"],fY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},_w=E.forwardRef((e,t)=>{var n=kr(e,fY);return E.createElement(uY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:dY,tooltipPayloadSearcher:_D,categoricalChartProps:n,ref:t})});const pY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80 transform scale-150",onClick:n=>n.stopPropagation(),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Ic,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})}):null,hY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:s})=>{const[l,u]=E.useState(null),[p,f]=E.useState(!1),[h,m]=E.useState(!1),[g,x]=E.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,A]=E.useState(!1),C=E.useRef(null),[P,T]=E.useState({key:"name",direction:"ascending"}),[O,k]=E.useState("cost"),[N,D]=E.useState(!0),j=E.useMemo(()=>{const U=re=>re?re.replace(/_/g," ").toLowerCase().split(" ").map(pe=>pe.charAt(0).toUpperCase()+pe.slice(1)).join(" "):"";return t.map(re=>{const ve=[],pe=re.effect;if(pe.type==="REPEATING_EFFECT")ve.push(U(pe.type)),pe.effects&&Array.isArray(pe.effects)&&pe.effects.forEach(de=>{de.type&&ve.push(U(de.type))});else if(pe.type==="MODIFY_DRONE_BASE"&&pe.mod){const de=pe.mod.stat,be=pe.mod.value;de==="attack"?ve.push(be>0?"Attack Buff":"Attack Debuff"):de==="speed"?ve.push(be>0?"Speed Buff":"Speed Debuff"):de==="shields"?ve.push(be>0?"Shield Buff":"Shield Debuff"):de==="cost"?ve.push(be<0?"Cost Reduction":"Cost Increase"):de==="limit"?ve.push(be>0?"Limit Buff":"Limit Debuff"):de==="ability"?(ve.push("Ability Grant"),pe.mod.abilityToAdd&&pe.mod.abilityToAdd.name&&ve.push(pe.mod.abilityToAdd.name)):ve.push(U(`${de} Modification`))}else if(pe.type==="MODIFY_STAT"&&pe.mod){const de=pe.mod.stat,be=pe.mod.value;pe.mod.type,de==="attack"?ve.push(be>0?"Attack Buff":"Attack Debuff"):de==="speed"?ve.push(be>0?"Speed Buff":"Speed Debuff"):de==="shields"?ve.push(be>0?"Shield Buff":"Shield Debuff"):ve.push(be>0?`${de} Buff`:`${de} Debuff`)}else pe.type==="SEARCH_AND_DRAW"?(ve.push(U(pe.type)),ve.push("Draw")):pe.type&&ve.push(U(pe.type));pe.goAgain&&ve.push("Go Again"),pe.damageType==="PIERCING"&&ve.push("Piercing"),pe.mod?.type&&ve.push(U(pe.mod.type));const ie=(()=>{if(re.targeting){const de=U(re.targeting.type);if(re.targeting.affinity){const be=re.targeting.affinity.charAt(0)+re.targeting.affinity.slice(1).toLowerCase();return`${de} (${be})`}return de}else if(pe.type==="MULTI_MOVE"&&pe.source){const de=pe.source.location||"Any",be=pe.source.affinity||"Any",fe=be.charAt(0).toUpperCase()+be.slice(1).toLowerCase();return`${U(de)} (${fe})`}else if(pe.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...re,keywords:ve,targetingText:ie}})},[t]),R=E.useMemo(()=>{const U=new Set,re=new Set,ve=new Set;j.forEach(ie=>{U.add(ie.cost),re.add(ie.targetingText),ie.keywords.forEach(de=>ve.add(de))});const pe=Array.from(U);return{minCost:Math.min(...pe),maxCost:Math.max(...pe),targets:["all",...Array.from(re).sort()],abilities:Array.from(ve).sort()}},[j]);E.useEffect(()=>{R.minCost!==1/0&&R.maxCost!==-1/0&&x(U=>({...U,cost:{min:R.minCost,max:R.maxCost}}))},[R.minCost,R.maxCost]);const{cardCount:z,deckListForDisplay:W,baseCardCounts:H}=E.useMemo(()=>{const U={};let re=0;Object.entries(n).forEach(([pe,ie])=>{if(ie>0){re+=ie;const de=j.find(be=>be.id===pe);if(de){const be=de.baseCardId;U[be]=(U[be]||0)+ie}}});const ve=Object.entries(n).filter(([,pe])=>pe>0).map(([pe,ie])=>({...j.find(be=>be.id===pe),quantity:ie})).sort((pe,ie)=>pe.name.localeCompare(ie.name));return{cardCount:re,deckListForDisplay:ve,baseCardCounts:U}},[n,j]),q=z>=40,se=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],te=E.useMemo(()=>{const U={};W.forEach(ie=>{const de=ie.cost||0;U[de]=(U[de]||0)+ie.quantity});const re=Object.entries(U).map(([ie,de])=>({name:`${ie}`,count:de})).sort((ie,de)=>parseInt(ie.name)-parseInt(de.name)),ve={};W.forEach(ie=>{ie.keywords&&ie.keywords.forEach(de=>{ve[de]=(ve[de]||0)+ie.quantity})});const pe=Object.entries(ve).map(([ie,de])=>({name:ie,value:de})).sort((ie,de)=>de.value-ie.value);return{barChartData:re,pieChartData:pe}},[W]),ne=E.useMemo(()=>{let U=[...j].filter(re=>re.cost<g.cost.min||re.cost>g.cost.max||g.target!=="all"&&re.targetingText!==g.target||g.type!=="all"&&re.type!==g.type?!1:g.abilities.length>0?g.abilities.every(ve=>re.keywords.includes(ve)):!(g.hideEnhanced&&re.id.endsWith("_ENHANCED")));return P.key!==null&&U.sort((re,ve)=>{const pe=re[P.key],ie=ve[P.key];if(pe==null&&ie==null)return 0;if(pe==null)return 1;if(ie==null)return-1;const de=String(pe).toLowerCase(),be=String(ie).toLowerCase();return de<be?P.direction==="ascending"?-1:1:de>be?P.direction==="ascending"?1:-1:re.id.localeCompare(ve.id)}),U},[j,g,P]),L=U=>{let re="ascending";P.key===U&&P.direction==="ascending"&&(re="descending"),T({key:U,direction:re})},ee=(U,re)=>{x(ve=>({...ve,[U]:re}))},ce=U=>{x(re=>{const ve=re.abilities.includes(U)?re.abilities.filter(pe=>pe!==U):[...re.abilities,U];return{...re,abilities:ve}})},ye=()=>{x({cost:{min:R.minCost,max:R.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),A(!1)},M=()=>{Object.keys(n).forEach(U=>{n[U]>0&&r(U,0)})};E.useEffect(()=>{const U=re=>{C.current&&!C.current.contains(re.target)&&A(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const F=Math.PI/180,V=({cx:U,cy:re,midAngle:ve,outerRadius:pe,fill:ie,name:de,value:be})=>{const fe=Math.sin(-F*ve),tt=Math.cos(-F*ve),ze=U+(pe+5)*tt,bt=re+(pe+5)*fe,At=U+(pe+15)*tt,ft=re+(pe+15)*fe,lr=At+(tt>=0?1:-1)*12,Wa=ft,Gi=tt>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${ze},${bt}L${At},${ft}L${lr},${Wa}`,stroke:ie,fill:"none"}),v.jsx("circle",{cx:lr,cy:Wa,r:2,fill:ie,stroke:"none"}),v.jsx("text",{x:lr+(tt>=0?1:-1)*8,y:Wa,dy:4,textAnchor:Gi,fill:"#9CA3AF",fontSize:"11px",children:`${de} (${be})`})]})},ue=()=>{const[U,re]=E.useState(""),ve=E.useRef(null),pe=E.useMemo(()=>Object.entries(n).map(([de,be])=>`${de}:${be}`).join(","),[n]),ie=()=>{ve.current.select(),document.execCommand("copy"),re("Copied!"),setTimeout(()=>re(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>f(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:de=>de.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:ve,readOnly:!0,value:pe,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:U}),v.jsxs("button",{onClick:ie,className:"flex items-center gap-2 bg-cyan-600 text-white font-bold py-2 px-4 rounded hover:bg-cyan-700",children:[v.jsx(Bw,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>f(!1),className:"flex items-center gap-2 bg-pink-600 text-white font-bold py-2 px-4 rounded hover:bg-pink-700",children:[v.jsx(Nn,{size:16})," Close"]})]})]})})},ge=()=>{const[U,re]=E.useState(""),[ve,pe]=E.useState(""),ie=()=>{pe("");const de=s(U);de.success?m(!1):pe(de.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:de=>de.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:U,onChange:de=>re(de.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),ve&&v.jsx("p",{className:"text-red-500 mt-2",children:ve}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-700",children:"Cancel"}),v.jsx("button",{onClick:ie,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded hover:bg-purple-700",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[l&&v.jsx(pY,{card:l,onClose:()=>u(null)}),p&&v.jsx(ue,{}),h&&v.jsx(ge,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx($j,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(xj,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:ye,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",g.cost.min," - ",g.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:R.minCost,max:R.maxCost,value:g.cost.min,onChange:U=>ee("cost",{...g.cost,min:Math.min(parseInt(U.target.value),g.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:R.minCost,max:R.maxCost,value:g.cost.max,onChange:U=>ee("cost",{...g.cost,max:Math.max(parseInt(U.target.value),g.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:C,children:[v.jsx("button",{onClick:()=>A(!S),className:"filter-select w-full text-left h-full",children:g.abilities.length===0?"Select Abilities":`${g.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:R.abilities.map(U=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.abilities.includes(U),onChange:()=>ce(U),className:"mr-2"}),U]},U))})]}),v.jsxs("select",{onChange:U=>ee("type",U.target.value),value:g.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.hideEnhanced,onChange:U=>ee("hideEnhanced",U.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("name"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",P.key==="name"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("type"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",P.key==="type"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",P.key==="cost"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("description"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",P.key==="description"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:ne.map((U,re)=>{const ve=n[U.id]||0,pe=H[U.baseCardId]||0,ie=U.maxInDeck;return v.jsxs("tr",{className:U.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(U),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(pA,{size:18})})}),v.jsx("td",{className:"font-bold",children:U.name}),v.jsx("td",{className:`font-semibold ${U.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:U.type}),v.jsx("td",{children:U.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:U.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:U.keywords.map(de=>v.jsx("span",{className:"ability-chip",children:de},de))})}),v.jsx("td",{className:"text-xs",children:U.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):U.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:ie+1}).map((de,be)=>{const fe=be===ve,tt=ie-(pe-ve),ze=be>tt;return v.jsx("button",{onClick:()=>r(U.id,be),className:`quantity-btn ${fe?"selected":""}`,disabled:ze,children:be},be)})})})]},`${U.id}-${re}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${q?"text-green-400":"text-white"}`,children:["Your Deck (",z,"/40)"]}),v.jsx("button",{onClick:M,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:W.length>0?W.map(U=>{const re=H[U.baseCardId]>=U.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(U),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(pA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:U.name,children:U.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(U.id,U.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",U.quantity]}),v.jsx("button",{onClick:()=>r(U.id,U.quantity+1),disabled:re,className:"deck-edit-btn",children:"+"})]})]},U.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),z>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!N),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(Nc,{size:20,className:`transition-transform duration-300 ${N?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${N?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>k("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>k("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>k("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${O==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[O==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(xy,{width:"100%",height:"100%",children:v.jsxs(rY,{data:te.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(dN,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(zb,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(Gb,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(hy,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(aN,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),O==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(xy,{width:"100%",height:"100%",children:v.jsxs(_w,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(D0,{data:[{name:"Action Cards",value:W.filter(U=>U.type==="Action").reduce((U,re)=>U+re.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:W.filter(U=>U.type==="Upgrade").reduce((U,re)=>U+re.quantity,0),color:"#c084fc"}].filter(U=>U.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:U,value:re,percent:ve})=>`${U}: ${re} (${(ve*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:W.filter(U=>U.type==="Action").reduce((U,re)=>U+re.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:W.filter(U=>U.type==="Upgrade").reduce((U,re)=>U+re.quantity,0),color:"#c084fc"}].filter(U=>U.value>0).map((U,re)=>v.jsx(el,{fill:U.color},`cell-${re}`))}),v.jsx(hy,{}),v.jsx(fp,{})]})})]}),O==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(xy,{width:"100%",height:"100%",children:v.jsxs(_w,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(D0,{data:te.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:V,outerRadius:60,dataKey:"value",children:te.pieChartData.map((U,re)=>v.jsx(el,{fill:se[re%se.length]},`cell-${re}`))}),v.jsx(hy,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!q,className:"w-full p-4 mt-4 text-lg font-bold font-orbitron rounded-lg bg-purple-600 text-white transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed enabled:hover:bg-purple-500",children:"Confirm Deck"})]})]})]})},Wo=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),ia=({icon:e,value:t,max:n,iconColor:r,isPlayer:i})=>{const s=i?"from-cyan-400/30 via-blue-400/30 to-blue-500/30":"from-pink-400/30 via-pink-500/30 to-pink-600/30";return v.jsx("div",{className:`relative p-[1px] bg-gradient-to-br ${s}`,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:v.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 px-4 py-2 flex items-center gap-2",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[v.jsx(e,{size:18,className:r}),v.jsxs("span",{className:"font-bold text-base text-white whitespace-nowrap",children:[t,n!==void 0&&v.jsxs("span",{className:"hidden xl:inline",children:[" / ",n]})]})]})})};function mY({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:p,shieldsToRemove:f,shieldsToAdd:h,reallocationPhase:m,totalLocalPlayerDrones:g,totalOpponentPlayerDrones:x,getLocalPlayerId:S,getOpponentPlayerId:A,isMyTurn:C,currentPlayer:P,isMultiplayer:T,handlePlayerPass:O,handleReset:k,mandatoryAction:N,multiSelectState:D,AI_HAND_DEBUG_MODE:j,setShowAiHandModal:R,onShowDebugModal:z}){const[W,H]=E.useState(!1),q=E.useRef(null);return E.useEffect(()=>{const se=te=>{q.current&&!q.current.contains(te.target)&&H(!1)};return document.addEventListener("mousedown",se),()=>{document.removeEventListener("mousedown",se)}},[]),v.jsxs("header",{className:"w-full flex justify-between items-start mb-2 flex-shrink-0 px-5 pt-8",children:[v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Opponent",(i==="deployment"||i==="action")&&u===A()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(ia,{icon:Ic,value:t.energy,max:r.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!1}),v.jsx("div",{onClick:()=>j&&setTimeout(()=>R(!0),100),className:j?"cursor-pointer":"",children:v.jsx(ia,{icon:Ej,value:t.hand.length,max:r.totals.handLimit,iconColor:"text-gray-400",isPlayer:!1})}),i==="deployment"&&v.jsx(ia,{icon:ky,value:s===1?t.initialDeploymentBudget:t.deploymentBudget,iconColor:"text-purple-400",isPlayer:!1}),v.jsx(ia,{icon:fA,value:x,max:r.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!1})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[v.jsx("h2",{className:"text-xl font-bold uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #6b7280, #9ca3af)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:dR(i)}),(i==="deployment"||i==="action")&&v.jsxs("div",{className:"flex items-center gap-3",children:[C()?v.jsx("div",{className:"flex items-center gap-2",children:v.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Your Turn"})}):v.jsx("div",{className:"flex items-center gap-2",children:v.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest phase-announcement-shine animate-pulse",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(236, 72, 153, 0.5), 0 0 60px rgba(244, 114, 182, 0.3)",filter:"drop-shadow(0 0 20px rgba(236, 72, 153, 0.4))",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:T()?"Opponent's Turn":"AI Thinking"})}),C()&&!N&&!D&&v.jsx("button",{onClick:O,disabled:l[`${S()}Passed`],className:"relative p-[1px] transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:l[`${S()}Passed`]?"linear-gradient(45deg, rgba(75, 85, 99, 0.6), rgba(107, 114, 128, 0.6))":"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:v.jsx("div",{className:"px-6 py-2 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:l[`${S()}Passed`]?"#9ca3af":"#fca5a5"},children:"Pass"})})]})]}),v.jsxs("div",{className:"flex flex-col gap-3 items-end",children:[v.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Your Resources",(i==="deployment"||i==="action")&&u===S()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${S()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(ia,{icon:Ic,value:e.energy,max:n.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!0}),i==="deployment"&&v.jsx(ia,{icon:ky,value:s===1?e.initialDeploymentBudget:e.deploymentBudget,iconColor:"text-purple-400",isPlayer:!0}),v.jsx(ia,{icon:fA,value:g,max:n.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!0}),i==="allocateShields"&&v.jsx(ia,{icon:Qd,value:p,iconColor:"text-cyan-300",isPlayer:!0}),m==="removing"&&v.jsx(ia,{icon:Qd,value:f,iconColor:"text-orange-300",isPlayer:!0}),m==="adding"&&v.jsx(ia,{icon:Qd,value:h,iconColor:"text-green-300",isPlayer:!0}),v.jsx("button",{onClick:k,className:"relative p-[2px] bg-gradient-to-br from-pink-400 to-pink-600",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Reset Game",children:v.jsx("div",{className:"bg-pink-700 hover:bg-pink-600 p-2 transition-colors",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:v.jsx(Tj,{size:20,className:"text-white"})})}),v.jsxs("div",{className:"relative",ref:q,children:[v.jsx("button",{onClick:()=>H(!W),className:"relative p-[2px] bg-gradient-to-br from-gray-500 to-gray-700",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Settings",children:v.jsxs("div",{className:"bg-slate-700 hover:bg-slate-600 p-2 transition-colors flex items-center gap-1",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[v.jsx(hA,{size:20,className:"text-white"}),v.jsx(hj,{size:16,className:"text-white"})]})}),W&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:v.jsxs("button",{onClick:()=>{z&&z(),H(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[v.jsx(hA,{size:16}),"Debug View"]})})]})]})]})]})}const Np=()=>{const{gameStateManager:e}=Ri(),t=E.useMemo(()=>e?qt.getInstance(e):null,[e]),[n,r]=E.useState(null);return E.useEffect(()=>{if(!t)return;const h=()=>{r(t.getCacheStats())};h();const m=setInterval(h,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(h,m)=>t?t.getEffectiveStats(h,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(h,m=[])=>t?t.getEffectiveShipStats(h,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:h=>t?t.getLaneData(h):{lane:h,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(h,m=null)=>t?t.hasGuardianInLane(h,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},Dw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:p,gameEngine:f,turnPhase:h,isMyTurn:m,passInfo:g,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,hoveredTarget:C,setHoveredTarget:P,sectionRefs:T})=>{const{getEffectiveShipStats:O}=Np(),k=O(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(N=>{const D=n[N];if(!D)return console.log(` [DEBUG] Lane ${N} rendering EMPTY div - no hover possible:`,{sectionName:D,sectionNameType:typeof D,sectionNameValue:JSON.stringify(D),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},N);const j=e.shipSections[D],R=u.some(W=>W.id===D);let z=null;if(p&&t){if(p==="removing")j.allocatedShields>0?z="can-remove":z="cannot-remove";else if(p==="adding"){const W=f.getEffectiveSectionMaxShields(D,e,n);j.allocatedShields<W?z="can-add":z="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0",children:v.jsx(ff,{section:D,stats:j,effectiveStatsForDisplay:k.bySection[D],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(D):s&&s({id:D,name:D,...j},"section",t)},onAbilityClick:i,isInteractive:l||h==="action"&&t&&j.ability&&S.energy>=j.ability.cost.energy,isCardTarget:R,isInMiddleLane:N===1,isHovered:C?.type==="section"&&C?.target.name===D&&C?.isOpponent===!t,onMouseEnter:()=>!t&&P({target:{name:D,...j},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&P(null),reallocationState:z,gameEngine:f,turnPhase:h,isMyTurn:m,passInfo:g,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,sectionRef:W=>{if(T&&W){const H=`${t?"local":"opponent"}-${D}`;T.current[H]=W}}})},N)})})},gY=({droneId:e,timestamp:t,duration:n=2e3})=>{const[r,i]=E.useState(!0);return E.useEffect(()=>{const s=setTimeout(()=>{i(!1)},n);return()=>clearTimeout(s)},[t,n]),r?v.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:v.jsx("div",{className:"bg-red-600/90 rounded-lg px-4 py-2 shadow-2xl border-2 border-red-400 animate-pulse",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Zd,{className:"w-5 h-5 text-white"}),v.jsx("span",{className:"text-white font-bold text-lg tracking-wide drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]",children:"Intercepted!"})]})})}):null},Nw=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),yY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),lf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:p,lane:f,onAbilityClick:h,isActionTarget:m,droneRefs:g,mandatoryAction:x,localPlayerState:S,interceptedBadge:A})=>{const{getEffectiveStats:C}=Np(),P=E.useMemo(()=>An.find(U=>U.name===e.name),[e.name]),T=C(e,f),{maxShields:O}=T,k=e.currentShields??O,N=P.abilities.filter(U=>U.type==="ACTIVE"),D=n?"border-cyan-400":"border-pink-500",j=n?"bg-cyan-900":"bg-pink-950",R=n?"text-cyan-100":"text-pink-100",z=n?"bg-cyan-900":"bg-pink-950",W=n?"text-cyan-400":"text-pink-500",H=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",q=T.attack>T.baseAttack,se=T.attack<T.baseAttack,te=q?"text-green-400":se?"text-red-400":"text-white",ne=T.speed>T.baseSpeed,L=T.speed<T.baseSpeed,ee=ne?"text-green-400":L?"text-red-400":"text-white",ce=e.isExhausted?"grayscale opacity-60":"",ye=s?"animate-shake":"",M=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",F=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",V=x?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",ue=U=>!(e.isExhausted&&U.cost.exhausts!==!1||U.cost.energy&&S.energy<U.cost.energy),ge=e.isTeleporting?"opacity-0 pointer-events-none":"";return v.jsxs("div",{ref:U=>g.current[e.id]=U,onClick:U=>t&&t(U,e,n),onMouseEnter:u,onMouseLeave:p,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ce} ${ye} ${M} ${F} ${V} ${ge}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${D} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:O}).map((U,re)=>re<k?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:W,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},re):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:H,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},re))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:P.hull}).map((U,re)=>{const ve=re<e.hull,pe=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${ve?pe:"bg-gray-400"} border border-black/50`},re)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${j} flex items-center justify-center border-t ${D}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${R} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(Nw,{value:T.attack,isFlat:!1,bgColor:z,textColor:te})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:v.jsx(Nw,{value:T.speed,isFlat:!0,bgColor:z,textColor:ee})}),n&&N.length>0&&ue(N[0])&&v.jsx(yY,{onClick:U=>h&&h(U,e,N[0])}),A&&A.droneId===e.id&&v.jsx(gY,{droneId:e.id,timestamp:A.timestamp})]})},vY=(e,t,n,r,i,s,l,u,p,f,h,m,g,x,S,A,C,P,T,O,k)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(N=>v.jsx(lf,{drone:N,lane:n,isPlayer:t,onClick:f,onAbilityClick:h,isSelected:m&&m.id===N.id,isSelectedForMove:g?.phase==="select_drones"&&g.selectedDrones.some(D=>D.id===N.id),isHit:x.includes(N.id),isPotentialInterceptor:S.includes(N.id),droneRefs:A,mandatoryAction:C,localPlayerState:r,isActionTarget:P.some(D=>D.id===N.id)||T.some(D=>D.id===N.id),onMouseEnter:()=>!t&&O({target:N,type:"drone",lane:n}),onMouseLeave:()=>!t&&O(null),interceptedBadge:k},N.id))}),kw=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:p,multiSelectState:f,turnPhase:h,localPlayerState:m,opponentPlayerState:g,localPlacedSections:x,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:C,handleTokenClick:P,handleAbilityIconClick:T,selectedDrone:O,recentlyHitDrones:k,potentialInterceptors:N,droneRefs:D,mandatoryAction:j,setHoveredTarget:R,interceptedBadge:z})=>(Np(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(W=>{const H=t?r():i(),q=s&&l.some(te=>te.id===W&&te.owner===H)||u&&p.some(te=>te.id===W&&te.owner===H)||f&&p.some(te=>te.id===W&&te.owner===H),se=t&&(h==="deployment"||h==="action");return v.jsx("div",{onClick:te=>n(te,W,t),className:`flex-1 rounded-lg border-2 transition-all duration-200 p-2 lane-background
              ${q?"border-purple-500 bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":"border-gray-700/50 bg-black/20"}
              ${se?"cursor-pointer hover:bg-cyan-900/50":""}
            `,children:vY(e.dronesOnBoard[W],t,W,m,g,x,S,A,C,P,T,O,f,k,N,D,j,l,p,R,z)},W)})}));function bY({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:p,turnPhase:f,reallocationPhase:h,shipAbilityMode:m,hoveredTarget:g,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,sectionRefs:P,mandatoryAction:T,gameEngine:O,getLocalPlayerId:k,getOpponentPlayerId:N,isMyTurn:D,getPlacedSectionsForEngine:j,passInfo:R,handleTargetClick:z,handleLaneClick:W,handleShipSectionClick:H,handleShipAbilityClick:q,handleTokenClick:se,handleAbilityIconClick:te,setHoveredTarget:ne,interceptedBadge:L}){return v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(Dw,{player:t,isPlayer:!1,placedSections:r,onTargetClick:z,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:O,turnPhase:f,isMyTurn:D,passInfo:R,getLocalPlayerId:k,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:ne,sectionRefs:P}),v.jsx(kw,{player:t,isPlayer:!1,onLaneClick:W,getLocalPlayerId:k,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:j,handleTokenClick:se,handleAbilityIconClick:te,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:T,setHoveredTarget:ne,interceptedBadge:L}),v.jsx(kw,{player:e,isPlayer:!0,onLaneClick:W,getLocalPlayerId:k,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:j,handleTokenClick:se,handleAbilityIconClick:te,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:T,setHoveredTarget:ne,interceptedBadge:L}),v.jsx(Dw,{player:e,isPlayer:!0,placedSections:n,onSectionClick:H,onAbilityClick:q,onTargetClick:z,isInteractive:f==="allocateShields"||h,selectedCard:i,validCardTargets:s,reallocationPhase:h,gameEngine:O,turnPhase:f,isMyTurn:D,passInfo:R,getLocalPlayerId:k,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:ne,sectionRefs:P})]})})}const fu=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i})=>{const{name:s,cost:l,image:u,description:p}=e;return v.jsx("div",{onClick:f=>{f.stopPropagation(),(n||i)&&t(e)},className:`
        w-52 h-72 rounded-lg p-1 relative group transition-all duration-200 flex-shrink-0
        ${n?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"grayscale":""}
        ${i?"cursor-pointer ring-2 ring-red-500 animate-pulse":""}
      `,children:v.jsxs("div",{className:`
          w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md
          transition-all duration-200
          ${n&&!r?"group-hover:bg-slate-800":""}
        `,children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:s}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Ic,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:l})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:u,alt:s,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:p})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})},xY="_footer_js8yx_10",SY="_tabContainer_js8yx_14",AY="_contentContainer_js8yx_18",EY="_contentOpen_js8yx_22",CY="_contentClosed_js8yx_26",PY="_tabButton_js8yx_32",wY="_tabButtonActive_js8yx_36",OY="_tabButtonInactive_js8yx_40",TY="_tabIcon_js8yx_44",_Y="_multiSelectOverlay_js8yx_50",DY="_multiSelectText_js8yx_54",NY="_handContainer_js8yx_60",kY="_cardPile_js8yx_64",jY="_deckCard_js8yx_68",MY="_deckCardText_js8yx_74",RY="_discardCard_js8yx_78",IY="_discardCardText_js8yx_84",LY="_pileLabel_js8yx_88",$Y="_handSection_js8yx_92",BY="_handHeader_js8yx_96",UY="_handTitle_js8yx_100",zY="_handTitleOverLimit_js8yx_104",GY="_handTitleNormal_js8yx_108",HY="_mandatoryDiscardWarning_js8yx_112",qY="_handCardsContainer_js8yx_116",YY="_handCardsWrapper_js8yx_120",FY="_handCardsWrapperGap_js8yx_124",VY="_cardWrapper_js8yx_128",KY="_optionalDiscardControls_js8yx_133",WY="_optionalDiscardCounter_js8yx_137",XY="_finishDiscardButton_js8yx_141",QY="_droneContainer_js8yx_148",ZY="_droneGrid_js8yx_152",JY="_logContainer_js8yx_158",eF="_logHeader_js8yx_162",tF="_logTitle_js8yx_166",nF="_downloadButton_js8yx_170",rF="_logTableWrapper_js8yx_175",aF="_logTable_js8yx_175",iF="_logTableHeader_js8yx_183",oF="_logTableHeaderCell_js8yx_187",sF="_logTableDebugHeader_js8yx_191",lF="_logTableRow_js8yx_195",cF="_logTableCell_js8yx_199",uF="_logTableCellBold_js8yx_203",dF="_logTableCellGray_js8yx_207",fF="_logTableCellCyan_js8yx_211",pF="_logTableCellYellow_js8yx_215",hF="_logTableCellGrayText_js8yx_219",mF="_logTableCellDebug_js8yx_223",gF="_logTableCellCenter_js8yx_227",yF="_aiDecisionButton_js8yx_231",vF="_buttonDanger_js8yx_242",bF="_buttonSuccess_js8yx_247",xF="_buttonDisabled_js8yx_252",xe={footer:xY,tabContainer:SY,contentContainer:AY,contentOpen:EY,contentClosed:CY,tabButton:PY,tabButtonActive:wY,tabButtonInactive:OY,tabIcon:TY,multiSelectOverlay:_Y,multiSelectText:DY,handContainer:NY,cardPile:kY,deckCard:jY,deckCardText:MY,discardCard:RY,discardCardText:IY,pileLabel:LY,handSection:$Y,handHeader:BY,handTitle:UY,handTitleOverLimit:zY,handTitleNormal:GY,mandatoryDiscardWarning:HY,handCardsContainer:qY,handCardsWrapper:YY,handCardsWrapperGap:FY,cardWrapper:VY,optionalDiscardControls:KY,optionalDiscardCounter:WY,finishDiscardButton:XY,droneContainer:QY,droneGrid:ZY,logContainer:JY,logHeader:eF,logTitle:tF,downloadButton:nF,logTableWrapper:rF,logTable:aF,logTableHeader:iF,logTableHeaderCell:oF,logTableDebugHeader:sF,logTableRow:lF,logTableCell:cF,logTableCellBold:uF,logTableCellGray:dF,logTableCellCyan:fF,logTableCellYellow:pF,logTableCellGrayText:hF,logTableCellDebug:mF,logTableCellCenter:gF,aiDecisionButton:yF,buttonDanger:vF,buttonSuccess:bF,buttonDisabled:xF};function SF({localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleCardClick:s,getLocalPlayerId:l,isMyTurn:u,hoveredCardId:p,setHoveredCardId:f,setIsViewDiscardModalOpen:h,setIsViewDeckModalOpen:m,optionalDiscardCount:g,handleRoundStartDraw:x,checkBothPlayersHandLimitComplete:S,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:C,setConfirmationModal:P,passInfo:T,validCardTargets:O,gameEngine:k,opponentPlayerState:N}){const z=e.hand.length>7,W=1552,H=e.hand.length;let q=0;return H>1&&(q=(W-208)/(H-1)-208),v.jsxs("div",{className:xe.handContainer,children:[v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>h(!0),className:xe.discardCard,children:v.jsx("p",{className:xe.discardCardText,children:e.discardPile.length})}),v.jsx("p",{className:xe.pileLabel,children:"Discard Pile"})]}),v.jsxs("div",{className:xe.handSection,children:[v.jsx("div",{className:xe.handHeader,children:v.jsxs("h3",{className:`${xe.handTitle} ${e.hand.length>t.totals.handLimit?xe.handTitleOverLimit:xe.handTitleNormal}`,children:["Your Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),i?.type==="discard"&&i.fromAbility&&v.jsxs("p",{className:xe.mandatoryDiscardWarning,children:["You must discard ",i.count," card(s)."]}),v.jsx("div",{className:xe.handCardsContainer,style:z?{width:`${W}px`}:{},children:v.jsx("div",{className:`${xe.handCardsWrapper} ${z?"":xe.handCardsWrapperGap}`,children:e.hand.map((se,te)=>{const ne=p?e.hand.findIndex(ce=>ce.instanceId===p):-1;let L="",ee={zIndex:te};return z&&ne!==-1&&(te<ne?L="transform -translate-x-12":te>ne?L="transform translate-x-12":(L="transform -translate-y-8 scale-105",ee.zIndex=50)),z&&te>0&&(ee.marginLeft=`${q}px`),v.jsx("div",{className:`${xe.cardWrapper} ${L}`,style:ee,onMouseEnter:()=>f(se.instanceId),onMouseLeave:()=>f(null),children:v.jsx(fu,{card:se,isPlayable:r==="action"&&u()&&!T[`${l()}Passed`]&&e.energy>=se.cost&&(!se.targeting||k.getValidTargets(l(),null,se,e,N).length>0)||r==="optionalDiscard"&&g<t.totals.discardLimit,isMandatoryTarget:i?.type==="discard",onClick:i?.type==="discard"?ce=>P({type:"discard",target:ce,onConfirm:()=>A(ce),onCancel:()=>P(null),text:`Are you sure you want to discard ${ce.name}?`}):r==="optionalDiscard"?ce=>P({type:"discard",target:ce,onConfirm:()=>C(ce),onCancel:()=>P(null),text:`Are you sure you want to discard ${ce.name}?`}):s})},se.instanceId)})})})]}),v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>m(!0),className:xe.deckCard,children:v.jsx("p",{className:xe.deckCardText,children:e.deck.length})}),v.jsx("p",{className:xe.pileLabel,children:"Deck"}),r==="optionalDiscard"&&v.jsxs("div",{className:xe.optionalDiscardControls,children:[v.jsxs("p",{className:xe.optionalDiscardCounter,children:["Discarded: ",g," / ",t.discardLimit]}),v.jsx("button",{onClick:()=>{x(),S()},className:xe.finishDiscardButton,children:"Finish Discarding"})]})]})]})}function AF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:p,isMyTurn:f,turn:h,passInfo:m,validCardTargets:g}){return v.jsx("div",{className:xe.droneContainer,children:v.jsx("div",{className:xe.droneGrid,children:t.map((x,S)=>{const C=(h===1?e.initialDeploymentBudget+e.energy:e.energy)>=x.class,P=n?.type==="Upgrade"&&g.some(T=>T.id===x.name);return v.jsx(df,{drone:x,onClick:s,isSelected:l&&l.name===x.name,isSelectable:r==="deployment"&&f()&&!m[`${p()}Passed`]&&C&&!i||P,deployedCount:e.deployedDroneCounts[x.name]||0,appliedUpgrades:e.appliedUpgrades[x.name]||[],isUpgradeTarget:P,onViewUpgrades:(T,O)=>u({droneName:T.name,upgrades:O})},S)})})})}function EF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return v.jsxs("div",{className:xe.logContainer,children:[v.jsxs("div",{className:xe.logHeader,children:[v.jsx("h3",{className:xe.logTitle,children:"Game Log"}),v.jsx("button",{onClick:t,className:xe.downloadButton,children:"Download CSV"})]}),v.jsx("div",{className:xe.logTableWrapper,children:v.jsxs("table",{className:xe.logTable,children:[v.jsx("thead",{className:xe.logTableHeader,children:v.jsxs("tr",{children:[v.jsx("th",{className:xe.logTableHeaderCell,children:"Rnd"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Timestamp (UTC)"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Player"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Action"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Source"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Target"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Outcome"}),v.jsx("th",{className:xe.logTableDebugHeader,children:"Debug Source"}),v.jsx("th",{className:xe.logTableHeaderCell})]})}),v.jsx("tbody",{children:e.map((r,i)=>v.jsxs("tr",{className:xe.logTableRow,children:[v.jsx("td",{className:xe.logTableCellBold,children:r.round}),v.jsx("td",{className:xe.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:xe.logTableCellCyan,children:r.player}),v.jsx("td",{className:xe.logTableCellYellow,children:r.actionType}),v.jsx("td",{className:xe.logTableCell,children:r.source}),v.jsx("td",{className:xe.logTableCell,children:r.target}),v.jsx("td",{className:xe.logTableCellGrayText,children:r.outcome}),v.jsx("td",{className:xe.logTableCellDebug,children:r.debugSource}),v.jsx("td",{className:xe.logTableCellCenter,children:r.aiDecisionContext&&v.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:xe.aiDecisionButton,title:"Show AI Decision Logic",children:""})})]},i)).reverse()})]})})]})}function CF({localPlayerState:e,localPlayerEffectiveStats:t,sortedLocalActivePool:n,gameLog:r,footerView:i,isFooterOpen:s,multiSelectState:l,selectedCard:u,turnPhase:p,mandatoryAction:f,handleFooterButtonClick:h,handleCardClick:m,cancelCardSelection:g,downloadLogAsCSV:x,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:T,setIsViewDeckModalOpen:O,optionalDiscardCount:k,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleToggleDroneSelection:j,selectedDrone:R,setViewUpgradesModal:z,handleConfirmMandatoryDiscard:W,handleRoundStartDiscard:H,setConfirmationModal:q,turn:se,passInfo:te,validCardTargets:ne,gameEngine:L,opponentPlayerState:ee,setAiDecisionLogToShow:ce}){return v.jsxs("footer",{className:xe.footer,children:[v.jsxs("div",{className:xe.tabContainer,children:[v.jsx("button",{onClick:()=>h("hand"),className:`${xe.tabButton} ${s&&i==="hand"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="hand"&&v.jsx(Nc,{size:20}),"Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>h("drones"),className:`${xe.tabButton} ${s&&i==="drones"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="drones"&&v.jsx(Nc,{size:20}),"Drones"]})}),v.jsx("button",{onClick:()=>h("log"),className:`${xe.tabButton} ${s&&i==="log"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="log"&&v.jsx(Nc,{size:20}),"Log (",r.length,")"]})})]}),v.jsxs("div",{className:`${xe.contentContainer} ${s?xe.contentOpen:xe.contentClosed}`,children:[l&&v.jsxs("div",{className:xe.multiSelectOverlay,children:[v.jsxs("span",{className:xe.multiSelectText,children:[l.phase==="select_source_lane"&&"Reposition: Select a source lane",l.phase==="select_drones"&&`Select Drones (${l.selectedDrones.length} / ${l.maxSelection})`,l.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:ye=>{ye.stopPropagation(),g()},className:xe.buttonDanger,children:"Cancel"}),l.phase==="select_drones"&&v.jsx("button",{onClick:ye=>{ye.stopPropagation(),l.selectedDrones.length>0&&console.log("Confirm drones clicked")},disabled:l.selectedDrones.length===0,className:`${xe.buttonSuccess} ${l.selectedDrones.length===0?xe.buttonDisabled:""}`,children:"Confirm Drones"})]}),i==="hand"&&v.jsx(SF,{localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:u,turnPhase:p,mandatoryAction:f,handleCardClick:m,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:T,setIsViewDeckModalOpen:O,optionalDiscardCount:k,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleConfirmMandatoryDiscard:W,handleRoundStartDiscard:H,setConfirmationModal:q,passInfo:te,validCardTargets:ne,gameEngine:L,opponentPlayerState:ee}),i==="drones"&&v.jsx(AF,{localPlayerState:e,sortedLocalActivePool:n,selectedCard:u,turnPhase:p,mandatoryAction:f,handleToggleDroneSelection:j,selectedDrone:R,setViewUpgradesModal:z,getLocalPlayerId:S,isMyTurn:A,turn:se,passInfo:te,validCardTargets:ne}),i==="log"&&v.jsx(EF,{gameLog:r,downloadLogAsCSV:x,setAiDecisionLogToShow:ce})]})]})}const PF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(Wo,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},wF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=E.useState(null);return v.jsxs(Wo,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(p=>{const f=s.appliedUpgrades[p.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",p.name]}),v.jsx("div",{className:"space-y-2",children:f.map(h=>v.jsx("div",{onClick:()=>u({droneName:p.name,instanceId:h.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===h.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:h.name})},h.instanceId))})]},p.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},OF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=E.useState(null);return v.jsxs(Wo,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(fu,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},TF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:p})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(PF,{modalData:e,onClose:()=>t(null)}),n&&v.jsx(wF,{selectionData:n,onConfirm:async(f,h)=>{await l(f,h,u()),r(null)},onCancel:()=>{r(null),p()}}),i&&v.jsx(OF,{selectionData:i,onConfirm:async(f,h)=>{await l(f,h,u()),s(null)},onCancel:()=>{s(null),p()}})]}),_F=({visible:e,start:t,end:n,lineRef:r})=>e?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,DF=({top:e,left:t,size:n="large"})=>{const[r,i]=E.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return E.useEffect(()=>{const u=[];for(let p=0;p<l.particleCount;p++){const f=Math.PI*2*p/l.particleCount,h=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),m=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:p,x:Math.cos(f)*h,y:Math.sin(f)*h,size:m,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),v.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>v.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},NF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const p=n!=="local";return v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:p?"Opponent Thinking":"AI Thinking"})})},kF=({card:e})=>v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80",children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),jw=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Nn,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(kF,{card:l})},`${l.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},jF=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:""})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),MF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=E.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:p,filter:f}=r,h=S=>{s(A=>{const C=S.instanceId||`${S.id}-${S.name}`;return A.some(T=>(T.instanceId||`${T.id}-${T.name}`)===C)?A.filter(T=>(T.instanceId||`${T.id}-${T.name}`)!==C):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),s([]))},g=()=>{s([]),t()},x=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:g,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Nn,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:p==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:f?`Select ${u} ${f.type} card${u>1?"s":""} from ${l.length} found ${f.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${x?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>v.jsx(jF,{card:S,isSelected:i.some(C=>{const P=S.instanceId||`${S.id}-${S.name}`;return(C.instanceId||`${C.id}-${C.name}`)===P}),onClick:h},S.instanceId||`${S.id}-${A}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:g,className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!x,className:`font-bold py-3 px-8 rounded-full transition-colors ${x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"Confirm Selection"})]})]})})},RF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return v.jsxs(Wo,{title:"AI Action: Card Played",text:"",onClose:t,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:n.name}),r&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:r}),i&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(fu,{card:n,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},IF=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(df,{drone:t,isSelectable:!1,deployedCount:0})})]})}),LF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return v.jsx(Wo,{title:"Deployment Complete",text:u,onClose:s,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},$F=({show:e,onContinue:t})=>e?v.jsx(Wo,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,BF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=s=>{switch(s){case"determineFirstPlayer":return"Waiting for Opponent";case"mandatoryDiscard":return"Opponent Discarding";case"allocateShields":return"Opponent Allocating Shields";case"mandatoryDroneRemoval":return"Opponent Removing Drones";case"deploymentComplete":return"Waiting for Opponent";default:return"Waiting for Opponent"}};return v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:i(t)})})},UF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&v.jsx("button",{onClick:e.onCancel,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"modal-title",children:n}),v.jsx("p",{className:"modal-text",children:e.text}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},zF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"modal-title",children:s}),v.jsx("p",{className:"modal-text",children:l})]})})},GF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{const i=e===t;return E.useEffect(()=>{if(n){const s=setTimeout(()=>{r()},4e3);return()=>clearTimeout(s)}},[n,r]),n?v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:i?v.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"VICTORY"}):v.jsxs("div",{className:"relative w-full h-full flex items-center justify-center screen-flicker",children:[v.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center defeat-glow screen-distort z-10",style:{color:"#ff3232",textShadow:"0 0 30px rgba(255, 50, 50, 1), 0 0 60px rgba(255, 50, 50, 0.8), 0 0 90px rgba(255, 50, 50, 0.6)",filter:"drop-shadow(0 0 30px rgba(255, 50, 50, 0.6))"},children:"DEFEAT"}),v.jsx("div",{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent scanline-shutdown",style:{boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)"}}),v.jsx("div",{className:"absolute inset-0 bg-red-900/20 defeat-glow",style:{mixBlendMode:"multiply"}})]})}):null},HF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,p=>p.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),v.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),v.jsx("td",{className:"p-2 text-center",children:s.isChosen&&v.jsx("span",{className:"text-yellow-400",children:""})})]},l))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},qF=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[v.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),v.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsx("div",{className:"bg-gray-900/95 p-8 text-center",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsxs("div",{className:"space-y-8",children:[v.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Deploy Drone?"}),v.jsxs("div",{className:"flex items-center justify-center gap-8",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-5xl font-bold text-cyan-400 mb-2",children:i}),v.jsx("div",{className:"text-cyan-300/50 uppercase text-xs tracking-widest",children:"Deployment"})]}),v.jsx("div",{className:"text-4xl text-cyan-500/30 font-light",children:"|"}),v.jsxs("div",{children:[v.jsx("div",{className:"text-5xl font-bold text-blue-400 mb-2",children:s}),v.jsx("div",{className:"text-blue-300/50 uppercase text-xs tracking-widest",children:"Energy"})]})]}),v.jsxs("div",{className:"flex justify-center gap-6 pt-4",children:[v.jsx("button",{onClick:n,className:"w-32 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Cancel"}),v.jsx("button",{onClick:r,className:"w-32 py-3 border-2 rounded uppercase text-sm tracking-wider font-semibold transition-all hover:scale-110 hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",style:{borderColor:"#00ff88",background:"linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 136, 255, 0.2))",color:"#00ff88",boxShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"Confirm"})]}),v.jsx("div",{className:"h-px w-80 mx-auto bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})})]})},YF=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Move"}),v.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},FF=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:f,shipAbilityMode:h,droneRefs:m,mandatoryAction:g})=>{if(!t||!e)return null;const{attackDetails:x,interceptors:S}=e,{attacker:A,target:C,targetType:P,lane:T}=x;return v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),v.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500 max-w-4xl w-full",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:v.jsxs("div",{className:"bg-gray-900/95 p-8",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:[v.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center mb-2",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Interception!"}),v.jsxs("p",{className:"text-center text-cyan-300/60 uppercase text-sm tracking-widest mb-8",children:["Combat in ",T?.replace("lane","Lane ")||"Unknown Lane"]}),v.jsx("div",{className:"mb-6 py-8",children:v.jsxs("div",{className:"flex items-start justify-center gap-6",children:[v.jsxs("div",{className:"flex flex-col items-center gap-4",children:[v.jsx("div",{className:"text-xs uppercase tracking-widest text-pink-400/60",children:"Attacker"}),v.jsx("div",{className:"transform scale-150 origin-top",children:v.jsx(lf,{drone:A,isPlayer:!1,lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})})]}),v.jsx("div",{className:"text-5xl font-light text-cyan-500/30 px-4 pt-16",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center gap-4",children:[v.jsx("div",{className:"text-xs uppercase tracking-widest text-cyan-400/60",children:"Target"}),P==="drone"?v.jsx("div",{className:"transform scale-150 origin-top",children:v.jsx(lf,{drone:C,isPlayer:!0,lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})}):v.jsx("div",{className:"transform scale-[0.95] origin-top",style:{width:"400px"},children:v.jsx(ff,{section:C.name,stats:f.shipSections[C.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:f,shipAbilityMode:h})})]})]})}),v.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-4"}),v.jsx("h3",{className:"text-center text-2xl font-bold uppercase tracking-wider mb-1",style:{background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Choose Interceptor"}),v.jsx("p",{className:"text-center text-cyan-300/50 text-sm mb-4",children:"Select a drone to intercept the attack"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-12 mb-6",children:S.map(O=>v.jsx("div",{className:"cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_20px_rgba(0,255,136,0.4)]",children:v.jsx(lf,{drone:O,isPlayer:!0,onClick:()=>n(O),lane:T,droneRefs:m,mandatoryAction:g,localPlayerState:f})},O.id))}),v.jsx("div",{className:"flex justify-center gap-6 pt-4",children:v.jsx("button",{onClick:r,className:"w-40 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Decline"})}),v.jsx("div",{className:"h-px w-80 mx-auto mt-8 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})]})},VF=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),v.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},KF=({show:e,opponentName:t="Opponent"})=>e?v.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:v.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Opponent Deciding Interception"})}):null,WF=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},XF=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},QF=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase());let p="";return l&&(p=l.name),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${p}`:"","? This will cost ",i.cost.energy," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},ZF=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),v.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>v.jsx(fu,{card:i,isPlayable:!1},i.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),JF=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=E.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(g,x)=>{navigator.clipboard.writeText(JSON.stringify(g,null,2)).then(()=>console.log(`${x} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},p=g=>g===null?"null":g===void 0?"undefined":typeof g=="boolean"?g.toString():typeof g=="string"?`"${g}"`:typeof g=="number"?g.toString():Array.isArray(g)?g.length===0?"[]":`[${g.length} items]`:typeof g=="object"?Object.keys(g).length===0?"{}":`{${Object.keys(g).length} properties}`:String(g),f=(g,x,S="")=>v.jsxs("div",{className:`mb-6 ${S}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-white",children:x}),v.jsxs("button",{onClick:()=>u(g,x),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[v.jsx(Bw,{size:12}),"Copy"]})]}),v.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-800",children:[v.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),v.jsx("tbody",{children:Object.entries(g).map(([A,C],P)=>v.jsxs("tr",{className:P%2===0?"bg-gray-900":"bg-gray-800",children:[v.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),v.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:p(C)}),v.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof C=="object"&&C!==null?Array.isArray(C)?"array":"object":typeof C})]},A))})]})})]}),h=()=>{const g={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return v.jsxs("div",{className:"p-4 space-y-6",children:[f(g,"Core Game Info"),f(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),f(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),f({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),f({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&f(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return v.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const g=r.getEffectiveShipStats(l.player1,l.placedSections),x=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(P=>{S[P]=l.player1.dronesOnBoard[P].map(T=>({drone:T.name,effectiveStats:r.getEffectiveStats(T,P)})),A[P]=l.player2.dronesOnBoard[P].map(T=>({drone:T.name,effectiveStats:r.getEffectiveStats(T,P)}))});const C=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return v.jsxs("div",{className:"p-4 space-y-6",children:[f(g,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),f(x,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),f(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),f(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),f(C,"GameDataService Cache Statistics")]})}catch(g){return v.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",g.message]})}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Nn,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Game Debug View"}),v.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[v.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),v.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),v.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?h():m()}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},eV=(e,t)=>{const[n,r]=E.useState([]),i=E.useCallback((s,l=null,u="large")=>{console.log(" [EXPLOSION] triggerExplosion called:",{targetId:s,capturedPosition:l,size:u});const p=je.createExplosionEffect(s);let f=l;if(!f){const h=e.current[s];console.log(" [EXPLOSION] Looking for drone element:",{targetId:s,found:!!h}),f=qy(h,t.current)}if(console.log(" [EXPLOSION] Position calculated:",f),f){const h=`${p.timestamp}-${Math.random()}`;console.log(" [EXPLOSION] Adding explosion to state:",{explosionId:h,top:f.y,left:f.x,size:u}),r(m=>[...m,{id:h,top:f.y,left:f.x,size:u}]),setTimeout(()=>{r(m=>m.filter(g=>g.id!==h))},p.duration)}else console.warn(" [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class tV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_REVEAL:{duration:1e3,type:"CARD_REVEAL_EFFECT",config:{}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},PHASE_ANNOUNCEMENT:{duration:1500,type:"PHASE_ANNOUNCEMENT_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{revealAt:.7}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t){if(console.log("[ANIMATION EVENTS] AnimationManager executing:",t),t.forEach((n,r)=>{console.log(`[ANIMATION EVENTS] Animation ${r+1}:`,{name:n.animationName,type:this.animations[n.animationName]?.type,duration:this.animations[n.animationName]?.duration,payload:n.payload})}),console.log(" [AI ANIMATION DEBUG] AnimationManager.executeAnimations() called:",{effectCount:t?.length||0,effects:t?.map(n=>n.animationName)}),!t||t.length===0){console.log(" [AI ANIMATION DEBUG] No effects to execute, returning early");return}this.setBlocking(!0);try{const n=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED"];let r=0;for(;r<t.length;){const i=t[r];if(n.includes(i.animationName)){const s=[];for(;r<t.length&&n.includes(t[r].animationName);)s.push(t[r]),r++;console.log(" [ANIMATION DEBUG] Playing damage effects in parallel:",s.map(l=>l.animationName)),await Promise.all(s.map(async l=>{const u=this.animations[l.animationName];if(!u){console.warn(` [ANIMATION DEBUG] Unknown animation: ${l.animationName}`);return}const p=this.visualHandlers.get(u.type);if(!p){console.warn(` [ANIMATION DEBUG] No visual handler for: ${u.type}`);return}return new Promise(f=>{p({...l.payload,config:u.config,onComplete:f}),setTimeout(f,u.duration)})})),console.log(" [ANIMATION DEBUG] All damage effects completed")}else{console.log(" [ANIMATION DEBUG] Processing sequential effect:",i.animationName);const s=this.animations[i.animationName];if(!s){console.warn(` [ANIMATION DEBUG] Unknown animation: ${i.animationName}`),r++;continue}const l=this.visualHandlers.get(s.type);if(!l){console.warn(` [ANIMATION DEBUG] No visual handler for: ${s.type}`),r++;continue}await new Promise(u=>{l({...i.payload,config:s.config,onComplete:u}),setTimeout(u,s.duration)}),console.log(" [ANIMATION DEBUG] Animation completed:",i.animationName),r++}}}finally{await new Promise(n=>setTimeout(n,200)),this.setBlocking(!1),console.log(" [AI ANIMATION DEBUG] All animations completed, blocking released")}}setBlocking(t){console.log(` [ANIMATION BLOCKING] Setting blocking to: ${t}`),this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const nV=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,s]=E.useState(0);return E.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,p=150;setTimeout(()=>s(n),10),setTimeout(()=>s(0),l+u),setTimeout(()=>{r?.()},l+u+p)},[n,r,e]),e?v.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},rV=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[s,l]=E.useState(!1);if(E.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!s||!t||!n)return null;switch(e){case"LASER_BLAST":return v.jsx(aV,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return v.jsx(iV,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return v.jsx(oV,{endPos:n,duration:r});default:return null}},aV=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return v.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},iV=({startPos:e,duration:t})=>v.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),oV=({endPos:e,duration:t})=>v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),v.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function sV(e,t,n,r,i,s,l,u,p,f,h,m,g,x,S,A){E.useEffect(()=>{r(),i();const C=new tV(e),P=(O,k,N,D)=>{if(D==="drone")return t.current[N]||null;if(D==="section"){const j=e.getLocalPlayerId(),R=O===j?"local":"opponent";return n.current[`${R}-${N}`]||null}return null};C.registerVisualHandler("DRONE_FLY",O=>{const{droneId:k,sourcePlayer:N,sourceLane:D,targetId:j,targetPlayer:R,targetLane:z,targetType:W,config:H,attackValue:q,onComplete:se}=O;if(H.isReturn){se?.();return}console.log(" [LASER DEBUG] DRONE_FLY handler called:",{droneId:k,sourcePlayer:N,sourceLane:D,targetId:j,targetPlayer:R,targetType:W,attackValue:q,config:H});const te=P(N,D,k,"drone"),ne=P(R,z,j,W);if(!te||!ne){console.warn(" [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!te,hasTarget:!!ne,sourcePlayer:N,sourceLane:D,targetPlayer:R,targetType:W,targetId:j}),se?.();return}console.log(" [LASER DEBUG] Creating laser effect with attack:",q);const L=l(te,u.current),ee=l(ne,u.current),ce=`laser-${k}-${Date.now()}`;S(ye=>[...ye,{id:ce,startPos:L,endPos:ee,attackValue:q||1,duration:500,onComplete:()=>{S(M=>M.filter(F=>F.id!==ce)),se?.()}}])}),C.registerVisualHandler("EXPLOSION_EFFECT",O=>{const{targetId:k,targetPlayer:N,targetLane:D,targetType:j,config:R,onComplete:z}=O,W=P(N,D,k,j);if(W){const H=l(W,u.current);s(k,H,R?.size||"large")}else console.warn(" [EXPLOSION DEBUG] Target element not found:",{targetId:k,targetPlayer:N,targetLane:D,targetType:j});z?.()}),C.registerVisualHandler("FLASH_EFFECT",O=>{const{targetId:k,targetPlayer:N,targetLane:D,targetType:j,config:R,onComplete:z}=O,W=P(N,D,k,j);if(!W){console.warn(" [FLASH DEBUG] Target element not found:",{targetId:k,targetPlayer:N,targetLane:D,targetType:j}),z?.();return}const H=W.getBoundingClientRect(),q=`flash-${k}-${Date.now()}`;h(se=>[...se,{id:q,position:{left:H.left,top:H.top,width:H.width,height:H.height},color:R.color,intensity:R.intensity,onComplete:()=>{h(te=>te.filter(ne=>ne.id!==q)),z?.()}}])}),C.registerVisualHandler("CARD_VISUAL_EFFECT",O=>{const{visualType:k,sourcePlayer:N,targetId:D,targetPlayer:j,targetLane:R,targetType:z,duration:W,onComplete:H}=O,q=u.current?.getBoundingClientRect();if(!q){H?.();return}const se=e.getLocalPlayerId(),te=N===se?q.bottom-100:q.top+100,ne=q.left+q.width/2;let L;if(z==="lane")if(j==="center")L={x:q.left+q.width/2,y:q.top+q.height/2};else{const ce=N===se?j:j===se?se:j,V=(e.getState()[ce]?.dronesOnBoard||{})[R]||[];if(V.length>0){const ue=V[0],ge=t.current[ue.id];if(ge){const U=ge.getBoundingClientRect();L={x:U.left+U.width/2,y:U.top+U.height/2}}else L={x:q.left+q.width/2,y:q.top+q.height/2}}else{const ue=R==="lane1"?0:R==="lane2"?1:2,ge=ce===se?q.bottom-200:q.top+200;L={x:q.left+q.width/4*(ue+1),y:ge}}}else{const ce=P(j,R,D,z);if(!ce){console.warn(" [CARD VISUAL DEBUG] Target element not found:",{targetId:D,targetPlayer:j,targetLane:R,targetType:z}),H?.();return}const ye=ce.getBoundingClientRect();L={x:ye.left+ye.width/2,y:ye.top+ye.height/2}}const ee=`cardvisual-${Date.now()}`;m(ce=>[...ce,{id:ee,visualType:k||"LASER_BLAST",startPos:{x:ne,y:te},endPos:L,duration:W||800,onComplete:()=>{m(ye=>ye.filter(M=>M.id!==ee)),H?.()}}])}),C.registerVisualHandler("CARD_REVEAL_EFFECT",O=>{const{cardData:k,actingPlayerId:N,onComplete:D}=O;console.log(" [CARD REVEAL DEBUG] CARD_REVEAL_EFFECT handler called:",{cardName:k?.name,actingPlayerId:N});const j=e.getLocalPlayerId(),R=N===j,z=`cardreveal-${Date.now()}`;g(W=>[...W,{id:z,card:k,label:R?"You Played":"Opponent Played",onComplete:()=>{g(H=>H.filter(q=>q.id!==z)),D?.()}}])}),C.registerVisualHandler("PHASE_ANNOUNCEMENT_EFFECT",O=>{const{phaseText:k,phaseName:N,subtitle:D,onComplete:j}=O;console.log(" [PHASE ANNOUNCEMENT DEBUG] PHASE_ANNOUNCEMENT_EFFECT handler called:",{phaseName:N,phaseText:k,subtitle:D});const R=`phaseannouncement-${Date.now()}`;x(z=>[...z,{id:R,phaseText:k,subtitle:D,onComplete:()=>{x(W=>W.filter(H=>H.id!==R)),j?.()}}])}),C.registerVisualHandler("SHAKE_EFFECT",O=>{const{targetId:k,config:N,onComplete:D}=O,j=t.current[k];j?(j.classList.add("animate-shake-damage"),setTimeout(()=>{j.classList.remove("animate-shake-damage"),D?.()},N?.duration||500)):D?.()}),C.registerVisualHandler("TELEPORT_EFFECT",O=>{const{targetId:k,laneId:N,playerId:D,onComplete:j}=O;console.log(" [TELEPORT DEBUG] TELEPORT_EFFECT handler called:",{targetId:k,laneId:N,playerId:D});const R=t.current[k];if(!R){console.warn(" [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",k),j?.();return}const z=l(R,u.current);console.log(" [TELEPORT DEBUG] Using exact drone placeholder position:",z);const W=e.getLocalPlayerId(),q=D===W?"#00ffff":"#ec4899",se=`teleport-${k}-${Date.now()}`;A(te=>[...te,{id:se,top:z.y,left:z.x,color:q,duration:600,onComplete:()=>{A(ne=>ne.filter(L=>L.id!==se)),j?.()}}])});const T=e.subscribe(O=>{O.type==="animationStateChange"&&f(O.blocking)});return e.actionProcessor.setAnimationManager(C),T},[r,i,e,s,t,n,l,u,p,f,h,m,g,x,S,A])}const lV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=E.useState(t),[u,p]=E.useState([]),f=E.useRef(),h=E.useRef(Date.now());return E.useEffect(()=>{const m=r.duration||800,g=()=>{const x=Date.now()-h.current,S=Math.min(x/m,1),A=S<.5?2*S*S:-1+(4-2*S)*S,C=t.x+(n.x-t.x)*A,P=t.y+(n.y-t.y)*A;l({x:C,y:P}),r.trail&&p(T=>[...T.slice(-8),{id:Date.now(),x:C,y:P}]),S<1?f.current=requestAnimationFrame(g):i?.()};return f.current=requestAnimationFrame(g),()=>{f.current&&cancelAnimationFrame(f.current)}},[t,n,r,i]),v.jsxs(v.Fragment,{children:[u.map((m,g)=>v.jsx("div",{style:{position:"fixed",left:m.x+35,top:m.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+g*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},m.id)),v.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:v.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},cV=({card:e,label:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),v.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[v.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),v.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[v.jsx("h2",{className:`
            text-4xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
            card-reveal-label
            ${r?"card-reveal-label-show":""}
          `,children:t}),v.jsx("div",{className:`
            transform scale-110 card-reveal-card
            ${r?"":"card-reveal-dissolve"}
          `,children:v.jsx(fu,{card:e,isPlayable:!1})}),v.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            card-reveal-scanline
            ${r?"card-reveal-scanline-active":""}
          `})]})]})},uV=({phaseText:e,subtitle:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1500);return()=>clearTimeout(s)},[n]),v.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[v.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),v.jsxs("div",{className:`
          relative flex flex-col items-center
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[v.jsx("h1",{className:`
            text-6xl font-orbitron font-black uppercase tracking-widest text-center
            phase-announcement-text
            ${r?"phase-announcement-shine":""}
          `,style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:e}),t&&v.jsx("p",{className:`
              text-2xl font-orbitron font-medium uppercase tracking-wider text-center
              text-cyan-300/80 mt-4
              transition-all duration-300
              ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
            `,children:t}),v.jsx("div",{className:`
            mt-8 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent
            transition-all duration-500
            ${r?"w-96 opacity-100":"w-0 opacity-0"}
          `}),v.jsx("div",{className:`
            absolute inset-0 pointer-events-none overflow-hidden
          `,children:v.jsx("div",{className:`
              absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent
              phase-announcement-scanline
              ${r?"phase-announcement-scanline-active":""}
            `})})]})]})},dV=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=E.useState(0);E.useEffect(()=>{setTimeout(()=>l(1),50);const g=r*.7;setTimeout(()=>l(0),g);const x=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(x)}},[r,i]);const u=t.x-e.x,p=t.y-e.y,f=Math.sqrt(u*u+p*p),h=Math.atan2(p,u)*(180/Math.PI),m=Math.max(3,2+n*1.5);return v.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${f}px`,height:`${m}px`,transformOrigin:"0 50%",transform:`rotate(${h}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[v.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${m*2}px rgba(255, 0, 0, 0.8), 0 0 ${m*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),v.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},fV=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=E.useState([]);return E.useEffect(()=>{const u=[];for(let h=0;h<16;h++){const m=Math.PI*2*h/16;u.push({id:h,angle:m,delay:h/16*200})}l(u);const f=setTimeout(()=>{i?.()},n);return()=>clearTimeout(f)},[n,i]),v.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},Mw=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:p,updatePlayerState:f,addLogEntry:h,resetGame:m,processAction:g,gameStateManager:x,p2pManager:S}=Ri(),{getEffectiveStats:A,getEffectiveShipStats:C,gameDataService:P}=Np(),T=!0,[O,k]=E.useState(!1),[N,D]=E.useState(!1),[j,R]=E.useState([]),[z,W]=E.useState([]),[H,q]=E.useState([]),[se,te]=E.useState([]),[ne,L]=E.useState([]),[ee,ce]=E.useState([]),[ye,M]=E.useState([]),[F,V]=E.useState(!1),[ue,ge]=E.useState(null),[U,re]=E.useState(null),[ve,pe]=E.useState(null),[ie,de]=E.useState(null),[be,fe]=E.useState(!1),[tt,ze]=E.useState(!1),[bt,At]=E.useState(null),[ft,lr]=E.useState(!1),[Wa,Gi]=E.useState(!1),[Xo,pu]=E.useState(!1),[qe,Kt]=E.useState(null),[kp,Xa]=E.useState(null),[Cn,Kr]=E.useState(null),[rn,Fb]=E.useState(null),[Qo,Hi]=E.useState(null),[Zo,qi]=E.useState([]),[da,Yi]=E.useState(!1),[Fi,jp]=E.useState(null),[Wr,Jo]=E.useState(null),[es,Qa]=E.useState(null),[hu,ts]=E.useState("drones"),[pl,Vi]=E.useState(!0),[hl,Mp]=E.useState([]),[Ki,Mr]=E.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[an,Pn]=E.useState({}),[ot,cr]=E.useState(null),[Wi,ml]=E.useState([]),[Gn,Hn]=E.useState(null),[fa,qn]=E.useState(null),[Nt,kn]=E.useState(null),[jn,Et]=E.useState([]),[Xi,ur]=E.useState(null),[Yn,Rr]=E.useState(null),[ct,dr]=E.useState(null),[mu,gu]=E.useState(null),[ns,Qi]=E.useState(null),[Ir,rs]=E.useState(null),[Lr,fr]=E.useState(null),[gl,as]=E.useState(!1),[yu,Xr]=E.useState(null),[on,Zi]=E.useState(null),[Ji,is]=E.useState(null),[yl,Za]=E.useState(0),[vu,wn]=E.useState(0),[bu,xu]=E.useState(null),[Su,eo]=E.useState(null),[Rp,Au]=E.useState(null),[to,Vb]=E.useState(null),[Eu,vl]=E.useState(0),Ja=E.useRef(null),no=E.useRef({}),Cu=E.useRef({}),pr=E.useRef(null),$r=E.useRef(!1),{explosions:bl,triggerExplosion:pa}=eV(no,pr);sV(x,no,Cu,s,l,pa,qy,pr,R,V,W,q,te,L,ce,M),E.useEffect(()=>{$c.initialize(x,x.actionProcessor,()=>e.gameMode!=="local",oa),console.log(" GameFlowManager initialized")},[]),E.useEffect(()=>{const B=he=>{const{type:me,phase:Se,playerId:ke,data:Me}=he;if(console.log(` App.jsx received PhaseManager event: ${me}`,{phase:Se,playerId:ke}),me==="phaseTransition"){const{newPhase:We,previousPhase:Ut,firstPlayerResult:hr}=he;console.log(` App.jsx handling phase transition: ${Ut}  ${We}`),bt===Ut&&At(null),We==="deploymentComplete"&&(console.log(" Deployment complete phase started, showing modal"),fe(!0))}else me==="phaseComplete"&&(console.log(` App.jsx handling phase completion: ${Se}`),bt===Se&&At(null),Se==="determineFirstPlayer"&&console.log(" Both players acknowledged first player determination"),Se==="deploymentComplete"&&console.log(" Both players acknowledged deployment complete"))},Z=$c.subscribe(B);return()=>{Z()}},[i,n,ge,bt]);const{turnPhase:Ke,turn:ei,currentPlayer:Qr,firstPlayerOfRound:xl,firstPasserOfPreviousRound:os,firstPlayerOverride:Zr,passInfo:$t,winner:sn,unplacedSections:ha,shieldsToAllocate:Sl,gameLog:ti,placedSections:Ip}=e,[Al,El]=E.useState(Qr),Pu=E.useRef($t),hn=E.useRef(Ke),ma=E.useRef(sn);E.useEffect(()=>{Pu.current=$t},[$t]),E.useEffect(()=>{hn.current=Ke},[Ke]),E.useEffect(()=>{ma.current=sn},[sn]);const Te=s(),Ie=l(),ro=u(),ni=p();if(!Te||!Ie)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});E.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]);const ri=E.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);E.useEffect(()=>{if(!i())return;const B=he=>{if(console.log(" P2P Event received in App:",he),he.type==="PHASE_COMPLETED"){const{phase:me}=he.data||he;console.log(` Opponent completed phase: ${me}`)}};return S.subscribe(B)},[i,S]);const Jr=Te?C(Te,ro):null,ao=Ie?C(Ie,ni):null,Cl=E.useMemo(()=>Te?Object.values(Te.dronesOnBoard).flat().length:0,[Te?.dronesOnBoard]),wu=E.useMemo(()=>Ie?Object.values(Ie.dronesOnBoard).flat().length:0,[Ie?.dronesOnBoard]),Lp=E.useMemo(()=>[...Te.activeDronePool].sort((B,Z)=>B.class!==Z.class?B.class-Z.class:B.name.localeCompare(Z.name)),[Te.activeDronePool]);E.useMemo(()=>Te?Object.keys(Te.shipSections).some(B=>Te.shipSections[B].allocatedShields<P.getEffectiveSectionMaxShields(B,Te,ro)):!1,[Te.shipSections,ro,P]),E.useCallback(B=>{if(console.log(` sendPhaseCompletion called for phase: ${B}`),i()){const Z={type:"PHASE_COMPLETED",data:{phase:B}};console.log(" Sending phase completion message:",Z),S.sendData(Z),console.log(` Sent phase completion: ${B}`)}else console.log(" Not multiplayer, skipping network send")},[i,S]),E.useCallback(async()=>{Wr&&!Wr.card.effect.goAgain?await g("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):Wr&&Wr.card.effect.goAgain&&!sn&&await g("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),Jo(null)},[g,n,r,Wr,sn]),E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:Z}=je.calculateAllValidTargets(ot,Gn,ct,Nt,Te,Ie);ml(B),Et(Z),ot&&(kn(null),Hn(null))},[ot,Gn,Nt,Te,Ie,ct]);const ga=()=>{ot&&(cr(null),Kt(null))},Bt=()=>{kn(null),dr(null)},ss=E.useCallback(async B=>{if($r.current){console.warn("Attack already in progress. Aborting duplicate call.");return}$r.current=!0;try{await new Promise(he=>setTimeout(he,250));const Z=await g("attack",{attackDetails:B});if(Z?.needsInterceptionDecision){console.log(" [APP] Interception decision needed, showing modal..."),Hi(Z.interceptionData),$r.current=!1;return}}catch(Z){console.error("Error in resolveAttack:",Z)}finally{$r.current=!1}},[pa,g,n,r]),Ou=E.useCallback(async(B,Z,he)=>{try{const me=await g("ability",{droneId:Z.id,abilityIndex:Z.abilities.indexOf(B),targetId:he?.id||null});ga()}catch(me){console.error("Error in resolveAbility:",me),ga()}},[g,n]),$p=E.useCallback(async(B,Z,he)=>{const me=await g("shipAbility",{ability:B,sectionName:Z,targetId:he?.id||null,playerId:n()});if(me.mandatoryAction){fr(me.mandatoryAction),ts("hand"),Vi(!0),Hn(null),qn(null);return}if(me.requiresShieldReallocation){Hn(null),qn(null);return}return Hn(null),qn(null),me},[g,n]),Pl=E.useCallback(async(B,Z,he,me=null)=>{if(he===r()){let ke="",Me="";if(Z)if(Z.name){if(ke=Z.name,Z.id&&Z.owner){const We=Z.owner===n()?Te:Ie;for(const[Ut,hr]of Object.entries(We.dronesOnBoard))if(hr.some(ai=>ai.id===Z.id)){Me=Ut.replace("lane","Lane ");break}}}else Z.id.startsWith("lane")?(ke=`Lane ${Z.id.slice(-1)}`,Me=`Lane ${Z.id.slice(-1)}`):ke=Z.id.replace(/([A-Z])/g," $1").replace(/^./,We=>We.toUpperCase());Jo({card:B,targetName:ke,targetLane:Me})}const Se=await g("cardPlay",{card:B,targetId:Z?.id||null,playerId:he});if(Se.needsCardSelection){if(Se.needsCardSelection.type==="single_move"||Se.needsCardSelection.type==="multi_move"){dr({card:Se.needsCardSelection.card,phase:Se.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}Zi({...Se.needsCardSelection,onConfirm:ke=>{Bp(ke,Se.needsCardSelection,B,Z,he,me,Se.newPlayerStates),Zi(null)},onCancel:()=>{Zi(null),he===n()&&(Bt(),ur(null))}});return}return he===n()&&(Bt(),ur(null)),Se},[g,n,Te,Ie]),Bp=E.useCallback((B,Z,he,me,Se,ke,Me=null)=>{const{searchedCards:We,remainingDeck:Ut,discardPile:hr,shuffleAfter:ai}=Z,Br=We.filter(so=>{const th=so.instanceId||`${so.id}-${so.name}`;return!B.some(_l=>(_l.instanceId||`${_l.id}-${_l.name}`)===th)}),ya=Me||{player1:Te,player2:Ie},mn=Se===n()?ya[n()]:ya[r()],oo=[...mn.hand,...B];let va=[...Ut,...Br];ai&&(va=va.sort(()=>.5-Math.random()));const ba={...mn,deck:va,hand:oo,discardPile:hr};h({player:mn.name,actionType:"CARD_SELECTION",source:he.name,target:`Selected ${B.length} cards`,outcome:`Drew: ${B.map(so=>so.name).join(", ")}`},"handleCardSelection",Se===r()?ke:null);const Ru={[n()]:Se===n()?{...mn,deck:ba.deck,hand:ba.hand,discardPile:ba.discardPile}:ya[n()],[r()]:Se===r()?{...mn,deck:ba.deck,hand:ba.hand,discardPile:ba.discardPile}:ya[r()]},Tl=je.finishCardPlay(he,Se,Ru);x.setPlayerStates(Tl.newPlayerStates.player1,Tl.newPlayerStates.player2),Se===n()&&(Bt(),ur(null))},[Te,Ie,h]),Tu=E.useCallback(async(B,Z,he,me)=>{await g("movementCompletion",{card:B,movementType:"multi_move",drones:Z,fromLane:he,toLane:me,playerId:n()}),dr(null),Bt()},[g,n]),Up=E.useCallback(async(B,Z,he,me)=>{await g("movementCompletion",{card:B,movementType:"single_move",drones:[Z],fromLane:he,toLane:me,playerId:n()}),dr(null),Bt()},[g,n]),zp=B=>{pl?hu===B?Vi(!1):ts(B):(Vi(!0),ts(B))};E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:Z}=je.calculateAllValidTargets(ot,Gn,ct,Nt,Te,Ie);ml(B),Et(Z),ot&&(kn(null),Hn(null))},[ot,Gn,Nt,Te,Ie,ct]),E.useEffect(()=>{sn&&!ft&&lr(!0)},[sn,ft]),E.useEffect(()=>{if(Ke==="action"){const B=je.calculatePotentialInterceptors(qe,Te,Ie,ri());qi(B)}else qi([])},[qe,Ke,Te,Ie,je,ro,ni]),E.useEffect(()=>{const B=n();if(e.interceptionPending){const{attackingPlayerId:Z,defendingPlayerId:he,attackDetails:me,interceptors:Se}=e.interceptionPending;Z===B?Yi(!0):he===B&&Hi({attackDetails:me,interceptors:Se})}else Yi(!1),Hi(null)},[e.interceptionPending,n]),E.useEffect(()=>{if(e.lastInterception){const{interceptor:B,timestamp:Z}=e.lastInterception;jp({droneId:B.id,timestamp:Z})}},[e.lastInterception]),E.useEffect(()=>{Xa(null)},[qe]),E.useEffect(()=>{if(qe&&!ot&&Ke==="action"){const B=qy(no.current[qe.id],pr.current);B&&Mr({visible:!0,start:B,end:{x:B.x,y:B.y}})}else Mr(B=>({...B,visible:!1}))},[qe,Ke,ot]),E.useEffect(()=>{const B=he=>{if(Ki.visible&&Ja.current&&pr.current){const me=pr.current.getBoundingClientRect(),Se=he.clientX-me.left,ke=he.clientY-me.top;Ja.current.setAttribute("x2",Se),Ja.current.setAttribute("y2",ke)}},Z=pr.current;return Z?.addEventListener("mousemove",B),()=>{Z?.removeEventListener("mousemove",B)}},[Ki.visible]),E.useEffect(()=>{sn&&$r.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),$r.current=!1)},[sn,Ke,Qr]);const Gp=()=>{m(),$r.current=!1,Kt(null),ge(null),cr(null),ml([]),fr(null),as(!1),Xr(null),kn(null),Et([]),ur(null),lr(!1)},Hp=async B=>{const{turnPhase:Z}=e;Z==="allocateShields"?await g("allocateShield",{sectionName:B,playerId:n()}):await g("reallocateShields",{action:"add",sectionName:B,playerId:n()})},wl=async B=>{if(vu<=0||Te.shipSections[B].allocatedShields<=0)return;(await g("reallocateShields",{action:"remove",sectionName:B,playerId:n()})).success&&(wn(me=>me-1),Za(me=>me+1))},qp=async B=>{if(yl<=0)return;(await g("reallocateShields",{action:"add",sectionName:B,playerId:n()})).success&&Za(he=>he-1)},Yp=async()=>{console.log(" App.jsx: Acknowledging deployment complete");const B=n(),Z=await g("acknowledgeDeploymentComplete",{playerId:B});Z.success&&(fe(!1),Z.data?.bothPlayersComplete||At("deploymentComplete"))},Fp=B=>{if(Ji){Ji==="removing"?wl(B):Ji==="adding"&&qp(B);return}Ke==="allocateShields"&&Hp(B)},_u=B=>{$t[n()+"Passed"]||(qe&&qe.name===B.name?Kt(null):(Kt(B),cr(null),Bt()))},Du=async B=>{try{const Z=await g("deployment",{droneData:qe,laneId:B,playerId:n(),turn:ei});Z.success?Kt(null):ge({title:Z.error,text:Z.message,isBlocking:!0})}catch(Z){console.error("Error executing deployment:",Z),ge({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Vp=B=>{if(!(!qe||Qr!==n()||$t[n()+"Passed"])){if(ei===1){const Z=je.validateDeployment(Te,qe,ei,Cl,Jr);if(!Z.isValid){ge({title:Z.reason,text:Z.message,isBlocking:!0});return}const{budgetCost:he,energyCost:me}=Z;if(me>0){re({lane:B,budgetCost:he,energyCost:me});return}}Du(B)}},Kp=async()=>{$t[`${n()}Passed`]||await g("playerPass",{playerId:n(),playerName:Te.name,turnPhase:Ke,passInfo:$t,opponentPlayerId:r()})},Wp=(B,Z,he)=>{if(B.stopPropagation(),Ke!=="action"||Qr!==n()||$t[n()+"Passed"])return;const me=he.cost||{};if(Z.isExhausted&&me.exhausts!==!1){ge({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(me.energy&&Te.energy<me.energy){ge({title:"Not Enough Energy",text:`This ability costs ${me.energy} energy, but you only have ${Te.energy}.`,isBlocking:!0});return}if(he.targeting?.type==="LANE"&&he.targeting?.location==="SAME_LANE"){const Se=je.getLaneOfDrone(Z.id,Te);if(Se){Rr({ability:he,drone:Z,target:{id:Se,owner:n()}});return}}ot&&ot.drone.id===Z.id?ga():(cr({drone:Z,ability:he}),Kt(Z),Bt())},Xp=(B,Z,he)=>{if(B.stopPropagation(),!(Ke!=="action"||!t()||$t[`${n()}Passed`])){if(Te.energy<he.cost.energy){ge({title:"Not Enough Energy",text:`This ability costs ${he.cost.energy} energy, but you only have ${Te.energy}.`,isBlocking:!0});return}Gn?.ability.id===he.id?Hn(null):he.targeting?(Hn({sectionName:Z.name,ability:he}),Kt(null),ga(),Bt()):he.effect.type==="REALLOCATE_SHIELDS"?(is("removing"),wn(he.effect.value.maxShields),Za(0),xu(JSON.parse(JSON.stringify(Te.shipSections))),Au({ability:he,sectionName:Z.name})):qn({ability:he,sectionName:Z.name,target:null})}},Qp=(B,Z,he)=>{if(B.stopPropagation(),console.log(`--- handleTokenClick triggered for ${Z.name} (isPlayer: ${he}) ---`),ct&&ct.phase==="select_drones"&&he){console.log("Action: Multi-move drone selection.");const{selectedDrones:me,maxSelection:Se}=ct;me.some(Me=>Me.id===Z.id)?dr(Me=>({...Me,selectedDrones:Me.selectedDrones.filter(We=>We.id!==Z.id)})):me.length<Se&&dr(Me=>({...Me,selectedDrones:[...Me.selectedDrones,Z]}));return}if(Wi.some(me=>me.id===Z.id)||jn.some(me=>me.id===Z.id)){console.log("Action: Targeting for an active card/ability."),Nu(Z,"drone",he);return}if(Ke==="action"&&t()&&qe&&!qe.isExhausted&&!he){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",qe.name,`(ID: ${qe.id})`),console.log("Target clicked:",Z.name,`(ID: ${Z.id})`);const[me]=Object.entries(Te.dronesOnBoard).find(([ke,Me])=>Me.some(We=>We.id===qe.id))||[],[Se]=Object.entries(Ie.dronesOnBoard).find(([ke,Me])=>Me.some(We=>We.id===Z.id))||[];if(console.log("Calculated Attacker Lane:",me),console.log("Calculated Target Lane:",Se),me&&Se&&me===Se)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),Ie.dronesOnBoard[Se].some(We=>A(We,Se).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),ge({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Processing attack...");const We={attacker:qe,target:Z,targetType:"drone",lane:me,attackingPlayer:n()};ss(We),Kt(null)}else console.log("FAILURE: Lanes do not match or could not be found."),ge({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(ct&&ct.phase==="select_drones"&&he){console.log("Action: Multi-move drone selection.");const{selectedDrones:me,maxSelection:Se}=ct;me.some(Me=>Me.id===Z.id)?dr(Me=>({...Me,selectedDrones:Me.selectedDrones.filter(We=>We.id!==Z.id)})):me.length<Se&&dr(Me=>({...Me,selectedDrones:[...Me.selectedDrones,Z]}));return}if(Lr?.type==="destroy"&&he){console.log("Action: Mandatory destruction."),Xr({type:"destroy",target:Z,onConfirm:()=>ju(Z),onCancel:()=>Xr(null),text:`Are you sure you want to destroy your ${Z.name}?`});return}if(he&&Ke==="action"&&t()&&!$t[`${n()}Passed`]){if(Z.isExhausted){console.log("Action prevented: Drone is exhausted.");return}qe?.id===Z.id?(console.log("Action: Deselecting drone",Z.name),Kt(null)):(console.log("Action: Selecting drone",Z.name),Kt(Z),ga(),Bt());return}console.log("Action: Fallback - showing drone details."),de(Z)},Nu=(B,Z,he)=>{if(Gn&&Wi.some(me=>me.id===B.id)){qn({ability:Gn.ability,sectionName:Gn.sectionName,target:B});return}if(ot&&Wi.some(me=>me.id===B.id)){Ou(ot.ability,ot.drone,B);return}if(Nt&&jn.some(me=>me.id===B.id)){const me=he?n():r();ur({card:Nt,target:{...B,owner:me}});return}if(Ke==="action"&&t()&&qe&&!qe.isExhausted&&!he&&Z==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",qe.name,`(ID: ${qe.id})`),console.log("Target clicked:",B.name,`(Type: ${Z})`);const[me]=Object.entries(Te.dronesOnBoard).find(([Se,ke])=>ke.some(Me=>Me.id===qe.id))||[];if(console.log("Calculated Attacker Lane:",me),me){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const Se=Ie.dronesOnBoard[me];if(Se&&Se.some(Me=>A(Me,me).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),ge({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Processing attack...");const Me={attacker:qe,target:B,targetType:"section",lane:me,attackingPlayer:n()};ss(Me),Kt(null)}}else console.log("FAILURE: Could not determine attacker lane."),ge({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}Z==="drone"&&de(B)},Zp=(B,Z,he)=>{if(B.stopPropagation(),ot&&ot.ability.targeting.type==="LANE"){const me=he?n():r();if(Wi.some(Se=>Se.id===Z&&Se.owner===me)){Rr({ability:ot.ability,drone:ot.drone,target:{id:Z,owner:me}});return}}if(ct&&he&&jn.some(me=>me.id===Z)){const{phase:me,sourceLane:Se,selectedDrones:ke}=ct;if(me==="select_source_lane"){dr(Me=>({...Me,phase:"select_drones",sourceLane:Z}));return}if(me==="select_destination_lane"){Tu(ct.card,ke,Se,Z);return}}if(ct&&ct.card.effect.type==="SINGLE_MOVE"&&ct.phase==="select_destination"&&he){jn.some(me=>me.id===Z)&&Up(ct.card,ct.selectedDrone,ct.sourceLane,Z);return}if(Nt&&Nt.targeting.type==="LANE"){const me=he?n():r();if(jn.some(Se=>Se.id===Z&&Se.owner===me)){ur({card:Nt,target:{id:Z,owner:me}});return}}if(Nt){Bt();return}if(ot){ga();return}if(Ke==="deployment"&&he)Vp(Z);else if(Ke==="action"&&he&&qe){const[me]=Object.entries(Te.dronesOnBoard).find(([Me,We])=>We.some(Ut=>Ut.id===qe.id))||[];if(!me)return;const Se=parseInt(me.replace("lane",""),10),ke=parseInt(Z.replace("lane",""),10);Math.abs(Se-ke)===1?pe({drone:qe,from:me,to:Z}):ge({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},Jp=async B=>{if(!(Ke!=="action"||!t()||$t[`${n()}Passed`])&&!(Te.energy<B.cost)){if(B.effect.type==="MULTI_MOVE"||B.effect.type==="SINGLE_MOVE"){ct&&ct.card.instanceId===B.instanceId?Bt():await Pl(B,null,n());return}if(Nt?.instanceId===B.instanceId)Bt();else if(B.name==="System Sabotage"){const Z=je.getValidTargets(n(),null,B,Te,Ie);gu({card:B,targets:Z,opponentState:Ie}),kn(null),cr(null),Kt(null)}else if(B.type==="Upgrade"){const Z=je.getValidTargets(n(),null,B,Te,Ie);Z.length>0?(Qi({card:B,targets:Z}),kn(null),cr(null),Kt(null)):ge({title:"No Valid Targets",text:`There are no drone types that can accept the '${B.name}' upgrade right now.`,isBlocking:!0})}else B.targeting?(kn(B),Kt(null),cr(null)):(ur({card:B,target:null}),kn(null),cr(null),Kt(null))}},Ol=async B=>{const Z=Lr;await g("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!0}),Xr(null);const he=Z.count-1;he<=0?(fr(null),Z.fromAbility):fr(me=>({...me,count:he}))},io=async B=>{await g("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!1}),vl(Z=>Z+1),Xr(null)},eh=async()=>{console.log("[OPTIONAL DISCARD] Player completing optional discard phase"),vl(0),await g("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}})},ku=()=>{const B=x.actionProcessor?.getPhaseCommitmentStatus("optionalDiscard");return console.log("[OPTIONAL DISCARD] Commitment status:",B),B?.bothComplete||!1},ju=B=>{const Z=je.getLaneOfDrone(B.id,Te);if(Z){let he={...Te,dronesOnBoard:{...Te.dronesOnBoard}};he.dronesOnBoard[Z]=he.dronesOnBoard[Z].filter(Se=>Se.id!==B.id);const me=je.onDroneDestroyed(he,B);Object.assign(he,me),he.dronesOnBoard=je.updateAuras(he,l(),ri()),f(n(),he)}fr(he=>{const me=he.count-1;if(me<=0){if(wu>ao.totals.cpuLimit){let ke={...Ie},Me=Object.values(Ie.dronesOnBoard).flat().length-C(Ie,ni).totals.cpuLimit;for(let We=0;We<Me;We++){const Ut=Object.entries(ke.dronesOnBoard).flatMap(([mn,oo])=>oo.map(va=>({...va,lane:mn})));if(Ut.length===0)break;const hr=Math.min(...Ut.map(mn=>mn.class)),ai=Ut.filter(mn=>mn.class===hr),Br=ai[Math.floor(Math.random()*ai.length)];ke.dronesOnBoard[Br.lane]=ke.dronesOnBoard[Br.lane].filter(mn=>mn.id!==Br.id);const ya=je.onDroneDestroyed(ke,Br);Object.assign(ke,ya)}ke.dronesOnBoard=je.updateAuras(ke,s(),ri()),f(r(),ke)}return null}return{...he,count:me}}),Xr(null)},Mu=()=>{if(ti.length===0){alert("The game log is empty.");return}const B=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],Z=ti.map(ke=>[ke.round,ke.player,ke.actionType,ke.source,ke.target,ke.outcome,ke.debugSource||"N/A"].map(We=>`"${String(We).replace(/"/g,'""')}"`).join(",")),he=[B.join(","),...Z].join(`
`),me=new Blob([he],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a");if(Se.download!==void 0){const ke=URL.createObjectURL(me);Se.setAttribute("href",ke),Se.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Se.style.visibility="hidden",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)}};return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",ref:pr,onClick:()=>{ga(),Bt()},children:[v.jsx(_F,{visible:Ki.visible,start:Ki.start,end:Ki.end,lineRef:Ja}),bl.map(B=>v.jsx(DF,{top:B.top,left:B.left,size:B.size},B.id)),j.map(B=>v.jsx(lV,{droneData:B.droneData,startPos:B.startPos,endPos:B.endPos,config:B.config,onComplete:B.onComplete},B.id)),z.map(B=>v.jsx(nV,{position:B.position,color:B.color,intensity:B.intensity,onComplete:B.onComplete},B.id)),H.map(B=>v.jsx(rV,{visualType:B.visualType,startPos:B.startPos,endPos:B.endPos,duration:B.duration,onComplete:B.onComplete},B.id)),se.map(B=>v.jsx(cV,{card:B.card,label:B.label,onComplete:B.onComplete},B.id)),ne.map(B=>v.jsx(uV,{phaseText:B.phaseText,subtitle:B.subtitle,onComplete:B.onComplete},B.id)),ee.map(B=>v.jsx(dV,{startPos:B.startPos,endPos:B.endPos,attackValue:B.attackValue,duration:B.duration,onComplete:B.onComplete},B.id)),ye.map(B=>v.jsx(fV,{top:B.top,left:B.left,color:B.color,duration:B.duration,onComplete:B.onComplete},B.id)),F&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),v.jsx(mY,{localPlayerState:Te,opponentPlayerState:Ie,localPlayerEffectiveStats:Jr,opponentPlayerEffectiveStats:ao,turnPhase:Ke,turn:ei,passInfo:$t,firstPlayerOfRound:xl,shieldsToAllocate:Sl,shieldsToRemove:vu,shieldsToAdd:yl,reallocationPhase:Ji,totalLocalPlayerDrones:Cl,totalOpponentPlayerDrones:wu,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:Qr,isMultiplayer:i,handlePlayerPass:Kp,handleReset:Gp,mandatoryAction:Lr,multiSelectState:ct,AI_HAND_DEBUG_MODE:T,setShowAiHandModal:k,onShowDebugModal:()=>D(!0)}),!t()&&(Ke==="deployment"||Ke==="action")&&v.jsx("div",{style:{position:"fixed",inset:0,background:"transparent",zIndex:40,cursor:"not-allowed"},onClick:B=>B.stopPropagation()}),v.jsx(bY,{localPlayerState:Te,opponentPlayerState:Ie,localPlacedSections:ro,opponentPlacedSections:ni,selectedCard:Nt,validCardTargets:jn,abilityMode:ot,validAbilityTargets:Wi,multiSelectState:ct,turnPhase:Ke,reallocationPhase:Ji,shipAbilityMode:Gn,hoveredTarget:kp,selectedDrone:qe,recentlyHitDrones:hl,potentialInterceptors:Zo,droneRefs:no,sectionRefs:Cu,mandatoryAction:Lr,gameEngine:je,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:ri,passInfo:$t,handleTargetClick:Nu,handleLaneClick:Zp,handleShipSectionClick:Fp,handleShipAbilityClick:Xp,handleTokenClick:Qp,handleAbilityIconClick:Wp,setHoveredTarget:Xa,interceptedBadge:Fi}),v.jsx(CF,{localPlayerState:Te,localPlayerEffectiveStats:Jr,sortedLocalActivePool:Lp,gameLog:ti,footerView:hu,isFooterOpen:pl,multiSelectState:ct,selectedCard:Nt,turnPhase:Ke,mandatoryAction:Lr,handleFooterButtonClick:zp,handleCardClick:Jp,cancelCardSelection:Bt,downloadLogAsCSV:Mu,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Cn,setHoveredCardId:Kr,setIsViewDiscardModalOpen:pu,setIsViewDeckModalOpen:Gi,handleToggleDroneSelection:_u,selectedDrone:qe,setViewUpgradesModal:rs,handleConfirmMandatoryDiscard:Ol,setConfirmationModal:Xr,turn:ei,passInfo:$t,validCardTargets:jn,gameEngine:je,opponentPlayerState:Ie,setAiDecisionLogToShow:Qa,optionalDiscardCount:Eu,handleRoundStartDraw:eh,handleRoundStartDiscard:io,checkBothPlayersHandLimitComplete:ku}),ue&&v.jsx(Wo,{title:ue.title,text:ue.text,onClose:ue.onClose===null?null:ue.onClose||(()=>ge(null)),children:ue.children}),v.jsx(LF,{show:be,firstPlayerOfRound:xl,localPlayerId:n(),localPlayerName:Te.name,opponentPlayerName:Ie.name,onContinue:Yp}),v.jsx($F,{show:tt,onContinue:()=>ze(!1)}),v.jsx(BF,{show:!!bt,phase:bt,opponentName:Ie.name,roomCode:null}),v.jsx(qF,{deploymentConfirmation:U,show:!!U,onCancel:()=>re(null),onConfirm:async()=>{if(!U)return;const{lane:B}=U;re(null),await Du(B)}}),v.jsx(YF,{moveConfirmation:ve,show:!!ve,onCancel:()=>pe(null),onConfirm:async()=>{if(!ve)return;const{drone:B,from:Z,to:he}=ve;await g("move",{droneId:B.id,fromLane:Z,toLane:he,playerId:n()}),pe(null),Kt(null)}}),v.jsx(VF,{interceptionModal:rn,show:!!rn,onClose:rn?.onClose}),v.jsx(FF,{choiceData:Qo,show:!!Qo,onIntercept:async B=>{const Z={...Qo.attackDetails,interceptor:B};Hi(null),setTimeout(async()=>{await ss(Z)},400)},onDecline:async()=>{const B={...Qo.attackDetails,interceptor:null};Hi(null),setTimeout(async()=>{await ss(B)},400)},gameEngine:je,turnPhase:Ke,isMyTurn:t,passInfo:$t,getLocalPlayerId:n,localPlayerState:Te,shipAbilityMode:Gn,droneRefs:no,mandatoryAction:Lr}),v.jsx(KF,{show:da,opponentName:Ie?.name||"Opponent"}),v.jsx(IF,{isOpen:!!ie,drone:ie,onClose:()=>de(null)}),Wr&&v.jsx(RF,{report:Wr,onClose:()=>Jo(null)}),v.jsx(HF,{decisionLog:es,show:!!es,onClose:()=>Qa(null),getLocalPlayerId:n}),v.jsx(GF,{winner:sn,localPlayerId:n(),show:sn&&ft,onClose:()=>lr(!1)}),v.jsx(zF,{mandatoryAction:Lr,effectiveStats:Jr,show:Lr&&gl,onClose:()=>as(!1)}),v.jsx(UF,{confirmationModal:yu,show:!!yu}),v.jsx(TF,{viewUpgradesModal:Ir,setViewUpgradesModal:rs,destroyUpgradeModal:mu,setDestroyUpgradeModal:gu,upgradeSelectionModal:ns,setUpgradeSelectionModal:Qi,resolveCardPlay:Pl,getLocalPlayerId:n,cancelCardSelection:Bt}),v.jsx(WF,{cardConfirmation:Xi,show:!!Xi,onCancel:()=>ur(null),onConfirm:async()=>{const B=Xi.card,Z=Xi.target;ur(null),setTimeout(async()=>{await Pl(B,Z,n())},400)}}),v.jsx(XF,{abilityConfirmation:Yn,show:!!Yn,onCancel:()=>Rr(null),onConfirm:()=>{Ou(Yn.ability,Yn.drone,Yn.target),Rr(null)}}),v.jsx(ZF,{opponentPlayerState:Ie,show:O,debugMode:T,onClose:()=>k(!1)}),v.jsx(JF,{show:N,onClose:()=>D(!1),gameStateManager:x,gameDataService:P}),v.jsx(jw,{isOpen:Wa,onClose:()=>Gi(!1),cards:Te.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(jw,{isOpen:Xo,onClose:()=>pu(!1),cards:Te.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(MF,{isOpen:!!on,onClose:on?.onCancel||(()=>Zi(null)),onConfirm:on?.onConfirm||(()=>{}),selectionData:on}),v.jsx(QF,{shipAbilityConfirmation:fa,show:!!fa,onCancel:()=>qn(null),onConfirm:async()=>await $p(fa.ability,fa.sectionName,fa.target)}),v.jsx(NF,{isVisible:!1,currentPlayer:Qr,gameMode:e.gameMode,roomCode:null,lastAction:null,localPlayerState:Te,opponentPlayerState:Ie,getLocalPlayerId:n})]})};function pV(){const{gameState:e}=Ri(),[t,n]=E.useState(!0),r=E.useRef(!1);if(E.useEffect(()=>{const i=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(i)},[]),E.useEffect(()=>{r.current?console.log(" GameFlowManager already initialized, skipping..."):($c.initialize(He,He.actionProcessor,()=>e.gameMode!=="local",oa),He.setGameFlowManager($c),r.current=!0,console.log(" GameFlowManager initialized in AppRouter"))},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading Drone Wars..."})});switch(e.appState){case"menu":return v.jsx(DA,{});case"lobby":return v.jsx(mR,{});case"inGame":switch(e.turnPhase){case"droneSelection":return v.jsx(yR,{});case"deckSelection":return v.jsx(vR,{});case"deckBuilding":return v.jsx(hY,{});case"placement":return v.jsx(xR,{});case"gameInitializing":return v.jsx(Mw,{});default:return v.jsx(Mw,{})}default:return console.warn("Unknown app state:",e.appState,"defaulting to menu"),v.jsx(DA,{})}}aj.createRoot(document.getElementById("root")).render(v.jsx(Iw.StrictMode,{children:v.jsx(pV,{})}));export{qt as G,An as f};
